Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CC7F788501
	for <lists+amd-gfx@lfdr.de>; Fri,  9 Aug 2019 23:38:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BC3E66EEB8;
	Fri,  9 Aug 2019 21:38:43 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-BY2-obe.outbound.protection.outlook.com
 (mail-eopbgr780082.outbound.protection.outlook.com [40.107.78.82])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0A99F6EEB8
 for <amd-gfx@lists.freedesktop.org>; Fri,  9 Aug 2019 21:38:43 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=eIDVFyDw71cwEmdhlQ9i2n4enOA2h4mwf4DEqXFLtL8xuywWOmYDF2McGLPWVU+5hTvyk03yXwyW9Mdv1HuuRd5dWygsqRmhXe3LJm8hEjCAnPH4lLmkr3wLiXlPLCWyu0bdmYvo4ZixWtoF1i/lZwMa9N+mrFm8LdkbBp39kcf/2vIkeYloPYk+pFJggv+Sja67p0GSJNiE70dD/qQML5O8f+p0NYo9gT9ljTJkmYOJD3v7aQ5s6E92vS+Uv57PYJXaTQdZhhN74KSMW4KA8I/ZojGpWQT3/JlSWHDTrofTmvceywoU+AQIVrrx+fDw3p8A7vdEfq+ZocQ8PbNjeg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=yJmo8a5gyg01kPoGwUJtN/x6z6auDNjTqYs8pEP0W2w=;
 b=Ft15eNnP8RZkwKscIELmOcEWuN5toP8P6frVMmvEYgAB3EOKMbXF3BP1JoIIDErMxK/jl9rWg+FjfPjtqFWbdZE61XETk4Q5oyT3C7IWE/R/SE8g1AGR7pUkP0yYJmTWEtuvo8MV0YI8V0NoFWmITRaOJ5efxp3HNQeFaGxW+o4QPdjxpAs3gROJzkr9NMlE5EcfOPBlyg3SjrbXbukvad2cw2tl+H+YZPXiKnb6L88BVBh2zDvKcr/6+PeuMsYXuBZAU101lUY2oxjCpeXO0IGKaziRmaAwStsEmjL4Ea/8yUmbiPs6hJzfr8OOvzyqSKSB2Sl98SYlwG8MGD66BQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org
 smtp.mailfrom=amd.com;dmarc=permerror action=none
 header.from=amd.com;dkim=none (message not signed);arc=none
Received: from CY4PR1201CA0008.namprd12.prod.outlook.com
 (2603:10b6:910:16::18) by CY4PR12MB1272.namprd12.prod.outlook.com
 (2603:10b6:903:3e::21) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2136.12; Fri, 9 Aug
 2019 21:38:40 +0000
Received: from DM3NAM03FT040.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e49::209) by CY4PR1201CA0008.outlook.office365.com
 (2603:10b6:910:16::18) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2157.15 via Frontend
 Transport; Fri, 9 Aug 2019 21:38:40 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV01.amd.com (165.204.84.17) by
 DM3NAM03FT040.mail.protection.outlook.com (10.152.83.222) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2157.15 via Frontend Transport; Fri, 9 Aug 2019 21:38:40 +0000
Received: from localhost.localdomain (10.180.168.240) by SATLEXCHOV01.amd.com
 (10.181.40.71) with Microsoft SMTP Server id 14.3.389.1;
 Fri, 9 Aug 2019 16:38:32 -0500
From: <sunpeng.li@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 27/49] drm/amd/display: update optc odm interface for more
 than 2 opps
Date: Fri, 9 Aug 2019 17:37:20 -0400
Message-ID: <20190809213742.30301-28-sunpeng.li@amd.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190809213742.30301-1-sunpeng.li@amd.com>
References: <20190809213742.30301-1-sunpeng.li@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(346002)(396003)(39860400002)(136003)(376002)(2980300002)(428003)(189003)(199004)(426003)(26005)(8936002)(81156014)(86362001)(126002)(11346002)(8676002)(53936002)(50466002)(5660300002)(186003)(305945005)(4326008)(76176011)(14444005)(446003)(81166006)(70586007)(48376002)(49486002)(2870700001)(316002)(2906002)(47776003)(476003)(2351001)(51416003)(2616005)(356004)(54906003)(36756003)(6666004)(336012)(50226002)(2876002)(6916009)(486006)(1076003)(70206006)(478600001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:CY4PR12MB1272; H:SATLEXCHOV01.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: c3e7721e-fa5f-4ee1-8b9e-08d71d11f1c2
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328);
 SRVR:CY4PR12MB1272; 
X-MS-TrafficTypeDiagnostic: CY4PR12MB1272:
X-Microsoft-Antispam-PRVS: <CY4PR12MB12720296ABB39C6E8651416A82D60@CY4PR12MB1272.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:541;
X-Forefront-PRVS: 01244308DF
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: hdGhkSzsnRF//Q9YNE/HXv52tc2lQr+onCiHZfKCMt2TuLQT5MSnsGDavvG+KzBeS7eNlYeCC3k3eIn2Dsc/PvdwPx6b9yVMTbd26mapPRgiFRhCemFF8OKgCL82ylw5HCj76QOD8JrLcnzQDmQ4dSKhAnrxK7nn3v+RSfXT9F50LfzMfvc+ydu6mJls5KAn2W6noUKUyjP3NzhZgbpV4Rn8ux7QtEdmMVxPNREBVACrL73AzNcF9l7uRQefbr9n6zF6zkRVYVvBWoR5FR+F6YrtJDAEt7DvuQ0qRHUULlc3V7wzr35hQs/Gu1/m+iSUEqs9sKW1EUEzQRTJy0EqO7/zUNoAin5LbYuqIz/Xq3z81YTHlGoUEX09bS3ZVlF7A/LUH6GBsF4hAVViccPV6dfKvikupyDDmY0+XG+4OHc=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 09 Aug 2019 21:38:40.2872 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: c3e7721e-fa5f-4ee1-8b9e-08d71d11f1c2
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV01.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CY4PR12MB1272
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=yJmo8a5gyg01kPoGwUJtN/x6z6auDNjTqYs8pEP0W2w=;
 b=bAOfY329btgow9u2uJ6kHkg2SlFojKnCVJTaDgeU6EV4ATDxO/iRoT31h9ysLG87oSWySCs3lEmRm3/xmCIHu3VzNwu3YlS1+YnmktmFVEzDz5p7qbJU+Ccul5meVlx4m3d9xgRzPDBsgPN2Xd4I+sJ++cv1wltYd3Sr1IivMtI=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Leo Li <sunpeng.li@amd.com>, Charlene Liu <Charlene.Liu@amd.com>,
 Dmytro Laktyushkin <Dmytro.Laktyushkin@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogRG15dHJvIExha3R5dXNoa2luIDxEbXl0cm8uTGFrdHl1c2hraW5AYW1kLmNvbT4KCkN1
cnJlbnQgb3B0YyBvZG0gaW50ZXJmYWNlIG9ubHkgYWNjZXB0cyAyIG9wcHMsIHdlIG5lZWQgdG8K
ZXhwYW5kIHRoaXMgdG8gYWxsb3cgNCB0byAxIG9kbSBjb21iaW5lLgoKU2lnbmVkLW9mZi1ieTog
RG15dHJvIExha3R5dXNoa2luIDxEbXl0cm8uTGFrdHl1c2hraW5AYW1kLmNvbT4KUmV2aWV3ZWQt
Ynk6IENoYXJsZW5lIExpdSA8Q2hhcmxlbmUuTGl1QGFtZC5jb20+CkFja2VkLWJ5OiBMZW8gTGkg
PHN1bnBlbmcubGlAYW1kLmNvbT4KLS0tCiAuLi4vZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24x
MC9kY24xMF9vcHRjLmMgfCAgMyArLS0KIC4uLi9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjEw
L2RjbjEwX29wdGMuaCB8ICAyICstCiAuLi4vZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIw
X2h3c2VxLmMgICAgfCAyMiArKysrKysrKysrKy0tLS0tLS0tCiAuLi4vZ3B1L2RybS9hbWQvZGlz
cGxheS9kYy9kY24yMC9kY24yMF9vcHRjLmMgfCAyMCArKysrKysrKystLS0tLS0tLQogLi4uL2dw
dS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfb3B0Yy5oIHwgIDQgKystLQogLi4uL2Ft
ZC9kaXNwbGF5L2RjL2luYy9ody90aW1pbmdfZ2VuZXJhdG9yLmggIHwgIDYgKystLS0KIDYgZmls
ZXMgY2hhbmdlZCwgMzEgaW5zZXJ0aW9ucygrKSwgMjYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjEwL2RjbjEwX29wdGMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24xMC9kY24xMF9vcHRjLmMKaW5kZXggYTU0
NmMyYmM5MTI5Li5iNjMxNzg2YTRhMzQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
ZGlzcGxheS9kYy9kY24xMC9kY24xMF9vcHRjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9k
aXNwbGF5L2RjL2RjbjEwL2RjbjEwX29wdGMuYwpAQCAtMjg3LDcgKzI4Nyw3IEBAIHZvaWQgb3B0
YzFfcHJvZ3JhbV90aW1pbmcoCiAKIAloX2Rpdl8yID0gb3B0YzFfaXNfdHdvX3BpeGVsc19wZXJf
Y29udGFpbnRlcigmcGF0Y2hlZF9jcnRjX3RpbWluZyk7CiAJUkVHX1VQREFURShPVEdfSF9USU1J
TkdfQ05UTCwKLQkJCU9UR19IX1RJTUlOR19ESVZfQlkyLCBoX2Rpdl8yIHx8IG9wdGMxLT5jb21i
X29wcF9pZCAhPSAweGYpOworCQkJT1RHX0hfVElNSU5HX0RJVl9CWTIsIGhfZGl2XzIgfHwgb3B0
YzEtPm9wcF9jb3VudCA9PSAyKTsKIAogfQogCkBAIC0xNTEzLDcgKzE1MTMsNiBAQCB2b2lkIGRj
bjEwX3RpbWluZ19nZW5lcmF0b3JfaW5pdChzdHJ1Y3Qgb3B0YyAqb3B0YzEpCiAJb3B0YzEtPm1p
bl92X2JsYW5rX2ludGVybGFjZSA9IDU7CiAJb3B0YzEtPm1pbl9oX3N5bmNfd2lkdGggPSA4Owog
CW9wdGMxLT5taW5fdl9zeW5jX3dpZHRoID0gMTsKLQlvcHRjMS0+Y29tYl9vcHBfaWQgPSAweGY7
CiB9CiAKICNpZmRlZiBDT05GSUdfRFJNX0FNRF9EQ19EU0NfU1VQUE9SVApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjEwL2RjbjEwX29wdGMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24xMC9kY24xMF9vcHRjLmgKaW5kZXggNjZjMDhk
MDVkYTBlLi44MmQ5MWFiNTRiYTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlz
cGxheS9kYy9kY24xMC9kY24xMF9vcHRjLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2RjL2RjbjEwL2RjbjEwX29wdGMuaApAQCAtNDk0LDcgKzQ5NCw3IEBAIHN0cnVjdCBvcHRj
IHsKIAljb25zdCBzdHJ1Y3QgZGNuX29wdGNfc2hpZnQgKnRnX3NoaWZ0OwogCWNvbnN0IHN0cnVj
dCBkY25fb3B0Y19tYXNrICp0Z19tYXNrOwogCi0JaW50IGNvbWJfb3BwX2lkOworCWludCBvcHBf
Y291bnQ7CiAKIAl1aW50MzJfdCBtYXhfaF90b3RhbDsKIAl1aW50MzJfdCBtYXhfdl90b3RhbDsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9o
d3NlcS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX2h3c2Vx
LmMKaW5kZXggYzM2MzVmNWNkOTkwLi41OTA0ZDRkMzI5ZGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9od3NlcS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9od3NlcS5jCkBAIC01NDUsMTIgKzU0
NSwxNCBAQCBlbnVtIGRjX3N0YXR1cyBkY24yMF9lbmFibGVfc3RyZWFtX3RpbWluZygKIAogCS8q
IFRPRE8gY2hlY2sgaWYgdGltaW5nX2NoYW5nZWQsIGRpc2FibGUgc3RyZWFtIGlmIHRpbWluZyBj
aGFuZ2VkICovCiAKLQlpZiAob2RtX3BpcGUpCisJaWYgKG9kbV9waXBlKSB7CisJCWludCBvcHBf
aW5zdFsyXSA9IHsgcGlwZV9jdHgtPnN0cmVhbV9yZXMub3BwLT5pbnN0LCBvZG1fcGlwZS0+c3Ry
ZWFtX3Jlcy5vcHAtPmluc3QgfTsKKwogCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy50Zy0+ZnVuY3Mt
PnNldF9vZG1fY29tYmluZSgKIAkJCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy50ZywKLQkJCQlvZG1f
cGlwZS0+c3RyZWFtX3Jlcy5vcHAtPmluc3QsCi0JCQkJcGlwZV9jdHgtPnN0cmVhbS0+dGltaW5n
LmhfYWRkcmVzc2FibGUvMiwKLQkJCQlwaXBlX2N0eC0+c3RyZWFtLT50aW1pbmcucGl4ZWxfZW5j
b2RpbmcpOworCQkJCW9wcF9pbnN0LCAyLAorCQkJCSZwaXBlX2N0eC0+c3RyZWFtLT50aW1pbmcp
OworCX0KIAkvKiBIVyBwcm9ncmFtIGd1aWRlIGFzc3VtZSBkaXNwbGF5IGFscmVhZHkgZGlzYWJs
ZQogCSAqIGJ5IHVucGx1ZyBzZXF1ZW5jZS4gT1RHIGFzc3VtZSBzdG9wLgogCSAqLwpAQCAtODIy
LDEzICs4MjQsMTUgQEAgc3RhdGljIHZvaWQgZGNuMjBfdXBkYXRlX29kbShzdHJ1Y3QgZGMgKmRj
LCBzdHJ1Y3QgZGNfc3RhdGUgKmNvbnRleHQsIHN0cnVjdCBwaXAKIHsKIAlzdHJ1Y3QgcGlwZV9j
dHggKmNvbWJpbmVfcGlwZSA9IGRjX3Jlc19nZXRfb2RtX2JvdHRvbV9waXBlKHBpcGVfY3R4KTsK
IAotCWlmIChjb21iaW5lX3BpcGUpCisJaWYgKGNvbWJpbmVfcGlwZSkgeworCQlpbnQgb3BwX2lu
c3RbMl0gPSB7IHBpcGVfY3R4LT5zdHJlYW1fcmVzLm9wcC0+aW5zdCwKKwkJCQljb21iaW5lX3Bp
cGUtPnN0cmVhbV9yZXMub3BwLT5pbnN0IH07CisKIAkJcGlwZV9jdHgtPnN0cmVhbV9yZXMudGct
PmZ1bmNzLT5zZXRfb2RtX2NvbWJpbmUoCiAJCQkJcGlwZV9jdHgtPnN0cmVhbV9yZXMudGcsCi0J
CQkJY29tYmluZV9waXBlLT5zdHJlYW1fcmVzLm9wcC0+aW5zdCwKLQkJCQlwaXBlX2N0eC0+cGxh
bmVfcmVzLnNjbF9kYXRhLmhfYWN0aXZlLAotCQkJCXBpcGVfY3R4LT5zdHJlYW0tPnRpbWluZy5w
aXhlbF9lbmNvZGluZyk7Ci0JZWxzZQorCQkJCW9wcF9pbnN0LCAyLAorCQkJCSZwaXBlX2N0eC0+
c3RyZWFtLT50aW1pbmcpOworCX0gZWxzZQogCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy50Zy0+ZnVu
Y3MtPnNldF9vZG1fYnlwYXNzKAogCQkJCXBpcGVfY3R4LT5zdHJlYW1fcmVzLnRnLCAmcGlwZV9j
dHgtPnN0cmVhbS0+dGltaW5nKTsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
ZGlzcGxheS9kYy9kY24yMC9kY24yMF9vcHRjLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvZGMvZGNuMjAvZGNuMjBfb3B0Yy5jCmluZGV4IDZkZWRlNDk1ZDBmZC4uYWVkZjlkZTFjOTQ3
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBf
b3B0Yy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9v
cHRjLmMKQEAgLTIyNCw3ICsyMjQsNiBAQCB2b2lkIG9wdGMyX3NldF9vZG1fYnlwYXNzKHN0cnVj
dCB0aW1pbmdfZ2VuZXJhdG9yICpvcHRjLAogCXN0cnVjdCBvcHRjICpvcHRjMSA9IERDTjEwVEdf
RlJPTV9URyhvcHRjKTsKIAl1aW50MzJfdCBoX2Rpdl8yID0gMDsKIAotCW9wdGMxLT5jb21iX29w
cF9pZCA9IDB4ZjsKIAlSRUdfU0VUXzMoT1BUQ19EQVRBX1NPVVJDRV9TRUxFQ1QsIDAsCiAJCQlP
UFRDX05VTV9PRl9JTlBVVF9TRUdNRU5ULCAwLAogCQkJT1BUQ19TRUcwX1NSQ19TRUwsIG9wdGMt
Pmluc3QsCkBAIC0yMzYsMTMgKzIzNSwxNiBAQCB2b2lkIG9wdGMyX3NldF9vZG1fYnlwYXNzKHN0
cnVjdCB0aW1pbmdfZ2VuZXJhdG9yICpvcHRjLAogCQkJT1RHX0hfVElNSU5HX0RJVl9CWTIsIGhf
ZGl2XzIpOwogCVJFR19TRVQoT1BUQ19NRU1PUllfQ09ORklHLCAwLAogCQkJT1BUQ19NRU1fU0VM
LCAwKTsKKwlvcHRjMS0+b3BwX2NvdW50ID0gMTsKIH0KIAotdm9pZCBvcHRjMl9zZXRfb2RtX2Nv
bWJpbmUoc3RydWN0IHRpbWluZ19nZW5lcmF0b3IgKm9wdGMsIGludCBjb21iaW5lX29wcF9pZCwK
LQkJaW50IG1wY2NfaGFjdGl2ZSwgZW51bSBkY19waXhlbF9lbmNvZGluZyBwaXhlbF9lbmNvZGlu
ZykKK3ZvaWQgb3B0YzJfc2V0X29kbV9jb21iaW5lKHN0cnVjdCB0aW1pbmdfZ2VuZXJhdG9yICpv
cHRjLCBpbnQgKm9wcF9pZCwgaW50IG9wcF9jbnQsCisJCXN0cnVjdCBkY19jcnRjX3RpbWluZyAq
dGltaW5nKQogewogCXN0cnVjdCBvcHRjICpvcHRjMSA9IERDTjEwVEdfRlJPTV9URyhvcHRjKTsK
IAkvKiAyIHBpZWNlcyBvZiBtZW1vcnkgcmVxdWlyZWQgZm9yIHVwIHRvIDUxMjAgZGlzcGxheXMs
IDQgZm9yIHVwIHRvIDgxOTIgKi8KKwlpbnQgbXBjY19oYWN0aXZlID0gKHRpbWluZy0+aF9hZGRy
ZXNzYWJsZSArIHRpbWluZy0+aF9ib3JkZXJfbGVmdCArIHRpbWluZy0+aF9ib3JkZXJfcmlnaHQp
CisJCQkvIG9wcF9jbnQ7CiAJaW50IG1lbW9yeV9tYXNrID0gbXBjY19oYWN0aXZlIDw9IDI1NjAg
PyAweDMgOiAweGY7CiAJdWludDMyX3QgZGF0YV9mbXQgPSAwOwogCkBAIC0yNTcsMjMgKzI1OSwy
NCBAQCB2b2lkIG9wdGMyX3NldF9vZG1fY29tYmluZShzdHJ1Y3QgdGltaW5nX2dlbmVyYXRvciAq
b3B0YywgaW50IGNvbWJpbmVfb3BwX2lkLAogCQlSRUdfU0VUKE9QVENfTUVNT1JZX0NPTkZJRywg
MCwKIAkJCU9QVENfTUVNX1NFTCwgbWVtb3J5X21hc2sgPDwgKG9wdGMtPmluc3QgKiA0KSk7CiAK
LQlpZiAocGl4ZWxfZW5jb2RpbmcgPT0gUElYRUxfRU5DT0RJTkdfWUNCQ1I0MjIpCisJaWYgKHRp
bWluZy0+cGl4ZWxfZW5jb2RpbmcgPT0gUElYRUxfRU5DT0RJTkdfWUNCQ1I0MjIpCiAJCWRhdGFf
Zm10ID0gMTsKLQllbHNlIGlmIChwaXhlbF9lbmNvZGluZyA9PSBQSVhFTF9FTkNPRElOR19ZQ0JD
UjQyMCkKKwllbHNlIGlmICh0aW1pbmctPnBpeGVsX2VuY29kaW5nID09IFBJWEVMX0VOQ09ESU5H
X1lDQkNSNDIwKQogCQlkYXRhX2ZtdCA9IDI7CiAKIAlSRUdfVVBEQVRFKE9QVENfREFUQV9GT1JN
QVRfQ09OVFJPTCwgT1BUQ19EQVRBX0ZPUk1BVCwgZGF0YV9mbXQpOwogCisJQVNTRVJUKG9wcF9j
bnQgPT0gMik7CiAJUkVHX1NFVF8zKE9QVENfREFUQV9TT1VSQ0VfU0VMRUNULCAwLAogCQkJT1BU
Q19OVU1fT0ZfSU5QVVRfU0VHTUVOVCwgMSwKLQkJCU9QVENfU0VHMF9TUkNfU0VMLCBvcHRjLT5p
bnN0LAotCQkJT1BUQ19TRUcxX1NSQ19TRUwsIGNvbWJpbmVfb3BwX2lkKTsKKwkJCU9QVENfU0VH
MF9TUkNfU0VMLCBvcHBfaWRbMF0sCisJCQlPUFRDX1NFRzFfU1JDX1NFTCwgb3BwX2lkWzFdKTsK
IAogCVJFR19VUERBVEUoT1BUQ19XSURUSF9DT05UUk9MLAogCQkJT1BUQ19TRUdNRU5UX1dJRFRI
LCBtcGNjX2hhY3RpdmUpOwogCiAJUkVHX1NFVChPVEdfSF9USU1JTkdfQ05UTCwgMCwgT1RHX0hf
VElNSU5HX0RJVl9CWTIsIDEpOwotCW9wdGMxLT5jb21iX29wcF9pZCA9IGNvbWJpbmVfb3BwX2lk
OworCW9wdGMxLT5vcHBfY291bnQgPSBvcHBfY250OwogfQogCiB2b2lkIG9wdGMyX2dldF9vcHRj
X3NvdXJjZShzdHJ1Y3QgdGltaW5nX2dlbmVyYXRvciAqb3B0YywKQEAgLTUzOCw2ICs1NDEsNSBA
QCB2b2lkIGRjbjIwX3RpbWluZ19nZW5lcmF0b3JfaW5pdChzdHJ1Y3Qgb3B0YyAqb3B0YzEpCiAJ
b3B0YzEtPm1pbl92X2JsYW5rX2ludGVybGFjZSA9IDU7CiAJb3B0YzEtPm1pbl9oX3N5bmNfd2lk
dGggPSA0Oy8vCU1pbmltdW0gSFNZTkMgPSA4IHBpeGVscyBhc2tlZCBCeSBIVyBpbiB0aGUgZmly
c3QgcGxhY2UgZm9yIG5vIGFjdHVhbCByZWFzb24uIE9jdWx1cyBSaWZ0IFMgd2lsbCBub3QgbGln
aHQgdXAgd2l0aCA4IGFzIGl0J3MgaHN5bmNXaWR0aCBpcyA2LiBDaGFuZ2luZyBpdCB0byA0IHRv
IGZpeCB0aGF0IGlzc3VlLgogCW9wdGMxLT5taW5fdl9zeW5jX3dpZHRoID0gMTsKLQlvcHRjMS0+
Y29tYl9vcHBfaWQgPSAweGY7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
ZGlzcGxheS9kYy9kY24yMC9kY24yMF9vcHRjLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvZGMvZGNuMjAvZGNuMjBfb3B0Yy5oCmluZGV4IGViZjA3YzU4MmRhMi4uNDdjYjRkZTE1NjRj
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBf
b3B0Yy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9v
cHRjLmgKQEAgLTk2LDggKzk2LDggQEAgdm9pZCBvcHRjMl9zZXRfZHNjX2NvbmZpZyhzdHJ1Y3Qg
dGltaW5nX2dlbmVyYXRvciAqb3B0YywKIHZvaWQgb3B0YzJfc2V0X29kbV9ieXBhc3Moc3RydWN0
IHRpbWluZ19nZW5lcmF0b3IgKm9wdGMsCiAJCWNvbnN0IHN0cnVjdCBkY19jcnRjX3RpbWluZyAq
ZGNfY3J0Y190aW1pbmcpOwogCi12b2lkIG9wdGMyX3NldF9vZG1fY29tYmluZShzdHJ1Y3QgdGlt
aW5nX2dlbmVyYXRvciAqb3B0YywgaW50IGNvbWJpbmVfb3BwX2lkLAotCQlpbnQgbXBjY19oYWN0
aXZlLCBlbnVtIGRjX3BpeGVsX2VuY29kaW5nIHBpeGVsX2VuY29kaW5nKTsKK3ZvaWQgb3B0YzJf
c2V0X29kbV9jb21iaW5lKHN0cnVjdCB0aW1pbmdfZ2VuZXJhdG9yICpvcHRjLCBpbnQgKm9wcF9p
ZCwgaW50IG9wcF9jbnQsCisJCXN0cnVjdCBkY19jcnRjX3RpbWluZyAqdGltaW5nKTsKIAogdm9p
ZCBvcHRjMl9nZXRfb3B0Y19zb3VyY2Uoc3RydWN0IHRpbWluZ19nZW5lcmF0b3IgKm9wdGMsCiAJ
CXVpbnQzMl90ICpudW1fb2Zfc3JjX29wcCwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvZGlzcGxheS9kYy9pbmMvaHcvdGltaW5nX2dlbmVyYXRvci5oIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9kaXNwbGF5L2RjL2luYy9ody90aW1pbmdfZ2VuZXJhdG9yLmgKaW5kZXggNWU5M2JjMGU4
ZmY5Li4xZjgzY2I3YzdkZDQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxh
eS9kYy9pbmMvaHcvdGltaW5nX2dlbmVyYXRvci5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
ZGlzcGxheS9kYy9pbmMvaHcvdGltaW5nX2dlbmVyYXRvci5oCkBAIC0yNjcsOSArMjY3LDkgQEAg
c3RydWN0IHRpbWluZ19nZW5lcmF0b3JfZnVuY3MgewogCQkJICAgICAgIHVpbnQzMl90IGRzY19i
eXRlc19wZXJfcGl4ZWwsCiAJCQkgICAgICAgdWludDMyX3QgZHNjX3NsaWNlX3dpZHRoKTsKICNl
bmRpZgotCXZvaWQgKCpzZXRfb2RtX2J5cGFzcykoc3RydWN0IHRpbWluZ19nZW5lcmF0b3IgKnRn
LCBjb25zdCBzdHJ1Y3QgZGNfY3J0Y190aW1pbmcgKmRjX2NydGNfdGltaW5nKTsKLQl2b2lkICgq
c2V0X29kbV9jb21iaW5lKShzdHJ1Y3QgdGltaW5nX2dlbmVyYXRvciAqdGcsIGludCBjb21iaW5l
X29wcF9pZCwKLQkJaW50IG1wY2NfaGFjdGl2ZSwgZW51bSBkY19waXhlbF9lbmNvZGluZyBwaXhl
bF9lbmNvZGluZyk7CisJdm9pZCAoKnNldF9vZG1fYnlwYXNzKShzdHJ1Y3QgdGltaW5nX2dlbmVy
YXRvciAqb3B0YywgY29uc3Qgc3RydWN0IGRjX2NydGNfdGltaW5nICpkY19jcnRjX3RpbWluZyk7
CisJdm9pZCAoKnNldF9vZG1fY29tYmluZSkoc3RydWN0IHRpbWluZ19nZW5lcmF0b3IgKm9wdGMs
IGludCAqb3BwX2lkLCBpbnQgb3BwX2NudCwKKwkJCXN0cnVjdCBkY19jcnRjX3RpbWluZyAqdGlt
aW5nKTsKIAl2b2lkICgqc2V0X2dzbCkoc3RydWN0IHRpbWluZ19nZW5lcmF0b3IgKm9wdGMsIGNv
bnN0IHN0cnVjdCBnc2xfcGFyYW1zICpwYXJhbXMpOwogCXZvaWQgKCpzZXRfZ3NsX3NvdXJjZV9z
ZWxlY3QpKHN0cnVjdCB0aW1pbmdfZ2VuZXJhdG9yICpvcHRjLAogCQkJaW50IGdyb3VwX2lkeCwK
LS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
