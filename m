Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EBB4FEF1D
	for <lists+amd-gfx@lfdr.de>; Tue, 30 Apr 2019 05:17:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 95E338937C;
	Tue, 30 Apr 2019 03:17:04 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-BY2-obe.outbound.protection.outlook.com
 (mail-eopbgr780079.outbound.protection.outlook.com [40.107.78.79])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D3DA989364
 for <amd-gfx@lists.freedesktop.org>; Tue, 30 Apr 2019 03:17:02 +0000 (UTC)
Received: from MN2PR12MB3344.namprd12.prod.outlook.com (20.178.241.74) by
 MN2PR12MB3437.namprd12.prod.outlook.com (20.178.240.212) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1835.16; Tue, 30 Apr 2019 03:17:01 +0000
Received: from MN2PR12MB3344.namprd12.prod.outlook.com
 ([fe80::c93d:cf5d:3f72:aff6]) by MN2PR12MB3344.namprd12.prod.outlook.com
 ([fe80::c93d:cf5d:3f72:aff6%2]) with mapi id 15.20.1835.010; Tue, 30 Apr 2019
 03:17:01 +0000
From: "Quan, Evan" <Evan.Quan@amd.com>
To: Alex Deucher <alexdeucher@gmail.com>
Subject: RE: [PATCH] drm/amdgpu: enable separate timeout setting for every
 ring type V3
Thread-Topic: [PATCH] drm/amdgpu: enable separate timeout setting for every
 ring type V3
Thread-Index: AQHU/pKevIUGRuFWrEibPCT/oCRBCKZTMhYAgACzNRCAAAczgIAAG2wg
Date: Tue, 30 Apr 2019 03:17:00 +0000
Message-ID: <MN2PR12MB33442E055A3743F68A9D30A8E43A0@MN2PR12MB3344.namprd12.prod.outlook.com>
References: <20190429135051.22316-1-evan.quan@amd.com>
 <CADnq5_NG+5x2Ge017Q_PxOpUtOXh=G_6pLmx6qRoLiZU4HTFGQ@mail.gmail.com>
 <MN2PR12MB33440270FD82161B00659CAEE43A0@MN2PR12MB3344.namprd12.prod.outlook.com>
 <CADnq5_PxXiyrNAcZd_xxcNgQLmzSk76sDR-xJ9QYJCFoDHkxWQ@mail.gmail.com>
In-Reply-To: <CADnq5_PxXiyrNAcZd_xxcNgQLmzSk76sDR-xJ9QYJCFoDHkxWQ@mail.gmail.com>
Accept-Language: en-US, zh-CN
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [210.13.97.164]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 772598a7-489b-4169-7c67-08d6cd1a4fc2
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600141)(711020)(4605104)(4618075)(2017052603328)(7193020);
 SRVR:MN2PR12MB3437; 
x-ms-traffictypediagnostic: MN2PR12MB3437:
x-ms-exchange-purlcount: 1
x-microsoft-antispam-prvs: <MN2PR12MB343788D77BB74B54F1357429E43A0@MN2PR12MB3437.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:3383;
x-forefront-prvs: 00235A1EEF
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(366004)(39860400002)(376002)(396003)(346002)(136003)(189003)(199004)(13464003)(478600001)(6436002)(53946003)(76176011)(7696005)(25786009)(966005)(99286004)(26005)(14454004)(186003)(72206003)(9686003)(33656002)(68736007)(6246003)(53936002)(102836004)(53546011)(486006)(6306002)(476003)(1411001)(5660300002)(30864003)(11346002)(446003)(6506007)(55016002)(229853002)(4326008)(2906002)(81156014)(8936002)(6916009)(8676002)(81166006)(66066001)(93886005)(74316002)(7736002)(305945005)(52536014)(97736004)(86362001)(6116002)(3846002)(73956011)(66446008)(256004)(64756008)(71190400001)(14444005)(66476007)(76116006)(54906003)(316002)(66946007)(66556008)(71200400001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3437;
 H:MN2PR12MB3344.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: vBomrPwSqjOJ+Vags9v4nLOqajnkRO6GmyfMIQeBnJbD1n5A3V3SsnQqytZBS2KfTt6DxseU/5EG0Q+zBv8+wRJcZuvqL6fJutgtWfZCPNekg/665tiYvY7sQzO0p71hikbBCDrgj6tVH/qGrSlncPjBwKWSsjoD02dMLiFnQ1GprjBJgrEO/XEzn/YuhqDYcUULtcD3ZO9VE12rGZdlGeJTN0xj8cSOcAXlJKTcH8xvZjdxyBlyfjmn2HnFRjPJTYjvJmbFh/w2W6FsY7l9lT3CZDCKEzQIE6EpxiTOffg0PCLbMdy+xxVoBe/4/ncyNBHQIeJOpshAwr8Q6coNI0YV9MhUziktOffyes6KDlOGrIc/pBtP3w4uW737kdeKSyelKEQm/eekZn10CySHY15/BodK8f+Da+y9GSHNk/4=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 772598a7-489b-4169-7c67-08d6cd1a4fc2
X-MS-Exchange-CrossTenant-originalarrivaltime: 30 Apr 2019 03:17:00.8312 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3437
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amd-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=M3LJoVZShKiYJyww0LsaXWqRDJ5eqR/pvAs1qV18XrQ=;
 b=LSm/AXKYwj259Nkav5EG+Z/EfdGYnXDxIu/CvUtN5pm9whnciSSQYJrwt5rioSZ7li6Hok7q7dU9PvNZnEocFb/aaDiRu81eEJFg1gv9pVoqs4Lyh/2TxWNfclDfuGncr68vK4HR1C5xZmiAPmS/m1lqpunPlwQ96FRDblHZJCY=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Evan.Quan@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>, "Lou,
 Wentao" <Wentao.Lou@amd.com>, "Daenzer, 
 Michel" <Michel.Daenzer@amd.com>, "Koenig,
 Christian" <Christian.Koenig@amd.com>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

Rml4ZWQgaW4gVjQuDQoNClJlZ2FyZHMsDQpFdmFuDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0t
LS0tDQo+IEZyb206IEFsZXggRGV1Y2hlciA8YWxleGRldWNoZXJAZ21haWwuY29tPg0KPiBTZW50
OiAyMDE55bm0NOaciDMw5pelIDk6MzQNCj4gVG86IFF1YW4sIEV2YW4gPEV2YW4uUXVhbkBhbWQu
Y29tPg0KPiBDYzogYW1kLWdmeCBsaXN0IDxhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZz47
IERldWNoZXIsIEFsZXhhbmRlcg0KPiA8QWxleGFuZGVyLkRldWNoZXJAYW1kLmNvbT47IExvdSwg
V2VudGFvIDxXZW50YW8uTG91QGFtZC5jb20+Ow0KPiBEYWVuemVyLCBNaWNoZWwgPE1pY2hlbC5E
YWVuemVyQGFtZC5jb20+OyBLb2VuaWcsIENocmlzdGlhbg0KPiA8Q2hyaXN0aWFuLktvZW5pZ0Bh
bWQuY29tPg0KPiBTdWJqZWN0OiBSZTogW1BBVENIXSBkcm0vYW1kZ3B1OiBlbmFibGUgc2VwYXJh
dGUgdGltZW91dCBzZXR0aW5nIGZvcg0KPiBldmVyeSByaW5nIHR5cGUgVjMNCj4gDQo+IFtDQVVU
SU9OOiBFeHRlcm5hbCBFbWFpbF0NCj4gDQo+IE9uIE1vbiwgQXByIDI5LCAyMDE5IGF0IDk6Mjkg
UE0gUXVhbiwgRXZhbiA8RXZhbi5RdWFuQGFtZC5jb20+IHdyb3RlOg0KPiA+DQo+ID4gRm9yIG9s
ZCBkZXNpZ24sIGxvY2t1cF90aW1lb3V0IGFmZmVjdHMgbm9uLWNvbXB1dGUgSVBzIG9ubHkoZS5n
Lg0KPiBhbWRncHUubG9ja3VwX3RpbWVvdXQ9MTAwMCkuIENvbXB1dGUgam9icyBhbHdheXMgdXNl
DQo+IE1BWF9TQ0hFRFVMRV9USU1FT1VULg0KPiA+IEZvciB0aGUgbmV3IGRlc2lnbiwgSSB3b3Vs
ZCBsaWtlIGl0IGJlIGJhY2t3YXJkIGNvbXBhdGlibGUuIFdpdGggW05vbi0NCj4gQ29tcHV0ZV06
W0NvbXB1dGVdIGZvcm1hdCwgImFtZGdwdS5sb2NrdXBfdGltZW91dD0xMDAwIiBzZXR0aW5nIGhh
cw0KPiB0aGUgc2FtZSBlZmZlY3QgYXMgb2xkIGRlc2lnbi4NCj4gPg0KPiA+ID4gKiBUaGUgZm9y
bWF0IGNhbiBiZSBbR2xvYmFsXSBvciBbR0ZYLENvbXB1dGUsU0RNQSxWaWRlb10uDQo+ID4gSSB0
aGluayB1c2luZyB0aGlzIGZvcm1hdCB3aWxsIGJyZWFrIGJhY2t3YXJkIGNvbXBhdGliaWxpdHku
IFNpbmNlDQo+ICJhbWRncHUubG9ja3VwX3RpbWVvdXQ9MTAwMCIgc2V0dGluZyB3aWxsIGFmZmVj
dCBhbGwgSVBzKGJvdGggbm9uLWNvbXB1dGUNCj4gYW5kIGNvbXB1dGUpLg0KPiANCj4gQWgsIG9r
LiAgSSBmb3Jnb3Qgd2UgYWx3YXlzIHVzZWQgYSBkaWZmZXJlbnQgdGltZW91dCBmb3IgY29tcHV0
ZS4gIEluIHRoYXQNCj4gY2FzZSwgaG93IGFib3V0DQo+ICogVGhlIGZvcm1hdCBjYW4gYmUgW25v
bi1Db21wdXRlXSBvciBbR0ZYLENvbXB1dGUsU0RNQSxWaWRlb10uDQo+IA0KPiBBbGV4DQo+IA0K
PiA+DQo+ID4gUmVnYXJkcywNCj4gPiBFdmFuDQo+ID4gPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2Ut
LS0tLQ0KPiA+ID4gRnJvbTogQWxleCBEZXVjaGVyIDxhbGV4ZGV1Y2hlckBnbWFpbC5jb20+DQo+
ID4gPiBTZW50OiAyMDE55bm0NOaciDI55pelIDIyOjI3DQo+ID4gPiBUbzogUXVhbiwgRXZhbiA8
RXZhbi5RdWFuQGFtZC5jb20+DQo+ID4gPiBDYzogYW1kLWdmeCBsaXN0IDxhbWQtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZz47IERldWNoZXIsIEFsZXhhbmRlcg0KPiA+ID4gPEFsZXhhbmRlci5E
ZXVjaGVyQGFtZC5jb20+OyBMb3UsIFdlbnRhbw0KPiA8V2VudGFvLkxvdUBhbWQuY29tPjsNCj4g
PiA+IERhZW56ZXIsIE1pY2hlbCA8TWljaGVsLkRhZW56ZXJAYW1kLmNvbT47IEtvZW5pZywgQ2hy
aXN0aWFuDQo+ID4gPiA8Q2hyaXN0aWFuLktvZW5pZ0BhbWQuY29tPg0KPiA+ID4gU3ViamVjdDog
UmU6IFtQQVRDSF0gZHJtL2FtZGdwdTogZW5hYmxlIHNlcGFyYXRlIHRpbWVvdXQgc2V0dGluZyBm
b3INCj4gPiA+IGV2ZXJ5IHJpbmcgdHlwZSBWMw0KPiA+ID4NCj4gPiA+IFtDQVVUSU9OOiBFeHRl
cm5hbCBFbWFpbF0NCj4gPiA+DQo+ID4gPiBPbiBNb24sIEFwciAyOSwgMjAxOSBhdCA5OjUxIEFN
IEV2YW4gUXVhbiA8ZXZhbi5xdWFuQGFtZC5jb20+DQo+IHdyb3RlOg0KPiA+ID4gPg0KPiA+ID4g
PiBFdmVyeSByaW5nIHR5cGUgY2FuIGhhdmUgaXRzIG93biB0aW1lb3V0IHNldHRpbmcuDQo+ID4g
PiA+DQo+ID4gPiA+ICAtIFYyOiB1cGRhdGUgbG9ja3VwX3RpbWVvdXQgcGFyYW1ldGVyIGZvcm1h
dCBhbmQgY29zbWV0aWMgZml4ZXMNCj4gPiA+ID4gIC0gVjM6IGludmFsaWRhdGUgMCBhbmQgbmVn
YXRpdmUgdmFsdWVzDQo+ID4gPiA+DQo+ID4gPiA+IENoYW5nZS1JZDogSTk5MmYyMjRmMzZiYjMz
YWNkNTYwMTYyYmZmZDJjM2U5ODc4NDBhN2UNCj4gPiA+ID4gU2lnbmVkLW9mZi1ieTogRXZhbiBR
dWFuIDxldmFuLnF1YW5AYW1kLmNvbT4NCj4gPiA+ID4gLS0tDQo+ID4gPiA+ICBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaCAgICAgICAgfCAgNyArLQ0KPiA+ID4gPiAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIHwgMTcgKystLQ0KPiA+ID4gPiAg
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rydi5jICAgIHwgOTANCj4gPiA+ICsr
KysrKysrKysrKysrKysrKysrLS0NCj4gPiA+ID4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9mZW5jZS5jICB8IDM1ICsrKysrKystLQ0KPiA+ID4gPiAgZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvbXhncHVfYWkuYyAgICAgIHwgIDIgKy0NCj4gPiA+ID4gIDUgZmlsZXMgY2hh
bmdlZCwgMTMyIGluc2VydGlvbnMoKyksIDE5IGRlbGV0aW9ucygtKQ0KPiA+ID4gPg0KPiA+ID4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgNCj4gPiA+
ID4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaA0KPiA+ID4gPiBpbmRleCBm
Njk2NWI5NDAzZWIuLmM5YjQ0YjhjMTk2OSAxMDA2NDQNCj4gPiA+ID4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgNCj4gPiA+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1LmgNCj4gPiA+ID4gQEAgLTExOCw3ICsxMTgsNiBAQCBleHRlcm4g
aW50IGFtZGdwdV9kaXNwX3ByaW9yaXR5OyAgZXh0ZXJuIGludA0KPiA+ID4gPiBhbWRncHVfaHdf
aTJjOyAgZXh0ZXJuIGludCBhbWRncHVfcGNpZV9nZW4yOyAgZXh0ZXJuIGludA0KPiA+ID4gPiBh
bWRncHVfbXNpOyAtZXh0ZXJuIGludCBhbWRncHVfbG9ja3VwX3RpbWVvdXQ7ICBleHRlcm4gaW50
DQo+ID4gPiA+IGFtZGdwdV9kcG07ICBleHRlcm4gaW50IGFtZGdwdV9md19sb2FkX3R5cGU7ICBl
eHRlcm4gaW50DQo+ID4gPiA+IGFtZGdwdV9hc3BtOyBAQCAtNDI4LDYgKzQyNyw3IEBAIHN0cnVj
dCBhbWRncHVfZnByaXYgeyAgfTsNCj4gPiA+ID4NCj4gPiA+ID4gIGludCBhbWRncHVfZmlsZV90
b19mcHJpdihzdHJ1Y3QgZmlsZSAqZmlscCwgc3RydWN0IGFtZGdwdV9mcHJpdg0KPiA+ID4gPiAq
KmZwcml2KTsNCj4gPiA+ID4gK2ludCBhbWRncHVfZGV2aWNlX2dldF9qb2JfdGltZW91dF9zZXR0
aW5ncyhzdHJ1Y3QgYW1kZ3B1X2RldmljZQ0KPiA+ID4gPiArKmFkZXYpOw0KPiA+ID4gPg0KPiA+
ID4gPiAgaW50IGFtZGdwdV9pYl9nZXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVj
dCBhbWRncHVfdm0NCj4gKnZtLA0KPiA+ID4gPiAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBz
aXplLCBzdHJ1Y3QgYW1kZ3B1X2liICppYik7IEBAIC0xMDAxLDYNCj4gPiA+ID4gKzEwMDEsMTEg
QEAgc3RydWN0IGFtZGdwdV9kZXZpY2Ugew0KPiA+ID4gPiAgICAgICAgIHN0cnVjdCB3b3JrX3N0
cnVjdCAgICAgICAgICAgICAgeGdtaV9yZXNldF93b3JrOw0KPiA+ID4gPg0KPiA+ID4gPiAgICAg
ICAgIGJvb2wgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5fYmFjb19yZXNldDsNCj4gPiA+
ID4gKw0KPiA+ID4gPiArICAgICAgIGxvbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2Z4
X3RpbWVvdXQ7DQo+ID4gPiA+ICsgICAgICAgbG9uZyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzZG1hX3RpbWVvdXQ7DQo+ID4gPiA+ICsgICAgICAgbG9uZyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB2aWRlb190aW1lb3V0Ow0KPiA+ID4gPiArICAgICAgIGxvbmcgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgY29tcHV0ZV90aW1lb3V0Ow0KPiA+ID4gPiAgfTsNCj4gPiA+ID4NCj4g
PiA+ID4gIHN0YXRpYyBpbmxpbmUgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFtZGdwdV90dG1fYWRl
dihzdHJ1Y3QNCj4gPiA+ID4gdHRtX2JvX2RldmljZSAqYmRldikgZGlmZiAtLWdpdA0KPiA+ID4g
PiBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiA+ID4gPiBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiA+ID4gPiBpbmRl
eCA4MGJmNjA0MDE5YjEuLmIxMWFmMzhhMDIzOCAxMDA2NDQNCj4gPiA+ID4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jDQo+ID4gPiA+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiA+ID4gPiBAQCAtOTEyLDgg
KzkxMiwxMCBAQCBzdGF0aWMgdm9pZA0KPiA+ID4gYW1kZ3B1X2RldmljZV9jaGVja19zbXVfcHJ2
X2J1ZmZlcl9zaXplKHN0cnVjdCBhbWRncHVfZGV2aWNlDQo+ICphZGV2KQ0KPiA+ID4gPiAgICog
VmFsaWRhdGVzIGNlcnRhaW4gbW9kdWxlIHBhcmFtZXRlcnMgYW5kIHVwZGF0ZXMNCj4gPiA+ID4g
ICAqIHRoZSBhc3NvY2lhdGVkIHZhbHVlcyB1c2VkIGJ5IHRoZSBkcml2ZXIgKGFsbCBhc2ljcyku
DQo+ID4gPiA+ICAgKi8NCj4gPiA+ID4gLXN0YXRpYyB2b2lkIGFtZGdwdV9kZXZpY2VfY2hlY2tf
YXJndW1lbnRzKHN0cnVjdCBhbWRncHVfZGV2aWNlDQo+ID4gPiAqYWRldikNCj4gPiA+ID4gK3N0
YXRpYyBpbnQgYW1kZ3B1X2RldmljZV9jaGVja19hcmd1bWVudHMoc3RydWN0IGFtZGdwdV9kZXZp
Y2UNCj4gPiA+ID4gKyphZGV2KQ0KPiA+ID4gPiAgew0KPiA+ID4gPiArICAgICAgIGludCByZXQg
PSAwOw0KPiA+ID4gPiArDQo+ID4gPiA+ICAgICAgICAgaWYgKGFtZGdwdV9zY2hlZF9qb2JzIDwg
NCkgew0KPiA+ID4gPiAgICAgICAgICAgICAgICAgZGV2X3dhcm4oYWRldi0+ZGV2LCAic2NoZWQg
am9icyAoJWQpIG11c3QgYmUgYXQgbGVhc3QgNFxuIiwNCj4gPiA+ID4gICAgICAgICAgICAgICAg
ICAgICAgICAgIGFtZGdwdV9zY2hlZF9qb2JzKTsgQEAgLTk1OCwxMyArOTYwLDE2IEBADQo+ID4g
PiA+IHN0YXRpYyB2b2lkIGFtZGdwdV9kZXZpY2VfY2hlY2tfYXJndW1lbnRzKHN0cnVjdCBhbWRn
cHVfZGV2aWNlDQo+ID4gPiAqYWRldikNCj4gPiA+ID4gICAgICAgICAgICAgICAgIGFtZGdwdV92
cmFtX3BhZ2Vfc3BsaXQgPSAxMDI0Ow0KPiA+ID4gPiAgICAgICAgIH0NCj4gPiA+ID4NCj4gPiA+
ID4gLSAgICAgICBpZiAoYW1kZ3B1X2xvY2t1cF90aW1lb3V0ID09IDApIHsNCj4gPiA+ID4gLSAg
ICAgICAgICAgICAgIGRldl93YXJuKGFkZXYtPmRldiwgImxvY2t1cF90aW1lb3V0IG1zdXQgYmUg
PiAwLCBhZGp1c3RpbmcNCj4gdG8NCj4gPiA+IDEwMDAwXG4iKTsNCj4gPiA+ID4gLSAgICAgICAg
ICAgICAgIGFtZGdwdV9sb2NrdXBfdGltZW91dCA9IDEwMDAwOw0KPiA+ID4gPiArICAgICAgIHJl
dCA9IGFtZGdwdV9kZXZpY2VfZ2V0X2pvYl90aW1lb3V0X3NldHRpbmdzKGFkZXYpOw0KPiA+ID4g
PiArICAgICAgIGlmIChyZXQpIHsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgIGRldl9lcnIoYWRl
di0+ZGV2LCAiaW52YWxpZCBsb2NrdXBfdGltZW91dA0KPiA+ID4gPiArIHBhcmFtZXRlcg0KPiA+
ID4gc3ludGF4XG4iKTsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgIHJldHVybiByZXQ7DQo+ID4g
PiA+ICAgICAgICAgfQ0KPiA+ID4gPg0KPiA+ID4gPiAgICAgICAgIGFkZXYtPmZpcm13YXJlLmxv
YWRfdHlwZSA9DQo+ID4gPiA+IGFtZGdwdV91Y29kZV9nZXRfbG9hZF90eXBlKGFkZXYsDQo+ID4g
PiBhbWRncHVfZndfbG9hZF90eXBlKTsNCj4gPiA+ID4gICAgICAgICBhbWRncHVfZGlyZWN0X2dt
YV9zaXplID0gbWluKGFtZGdwdV9kaXJlY3RfZ21hX3NpemUsIDk2KTsNCj4gPiA+ID4gKw0KPiA+
ID4gPiArICAgICAgIHJldHVybiByZXQ7DQo+ID4gPiA+ICB9DQo+ID4gPiA+DQo+ID4gPiA+ICAv
KioNCj4gPiA+ID4gQEAgLTI0NjgsNyArMjQ3Myw5IEBAIGludCBhbWRncHVfZGV2aWNlX2luaXQo
c3RydWN0DQo+IGFtZGdwdV9kZXZpY2UNCj4gPiA+ICphZGV2LA0KPiA+ID4gPiAgICAgICAgIG11
dGV4X2luaXQoJmFkZXYtPmxvY2tfcmVzZXQpOw0KPiA+ID4gPiAgICAgICAgIG11dGV4X2luaXQo
JmFkZXYtPnZpcnQuZHBtX211dGV4KTsNCj4gPiA+ID4NCj4gPiA+ID4gLSAgICAgICBhbWRncHVf
ZGV2aWNlX2NoZWNrX2FyZ3VtZW50cyhhZGV2KTsNCj4gPiA+ID4gKyAgICAgICByID0gYW1kZ3B1
X2RldmljZV9jaGVja19hcmd1bWVudHMoYWRldik7DQo+ID4gPiA+ICsgICAgICAgaWYgKHIpDQo+
ID4gPiA+ICsgICAgICAgICAgICAgICByZXR1cm4gcjsNCj4gPiA+ID4NCj4gPiA+ID4gICAgICAg
ICBzcGluX2xvY2tfaW5pdCgmYWRldi0+bW1pb19pZHhfbG9jayk7DQo+ID4gPiA+ICAgICAgICAg
c3Bpbl9sb2NrX2luaXQoJmFkZXYtPnNtY19pZHhfbG9jayk7DQo+ID4gPiA+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMNCj4gPiA+ID4gYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMNCj4gPiA+ID4gaW5kZXggNzFkZjI3
Y2QwM2RlLi5jOTM2ZTA3MzVhMGEgMTAwNjQ0DQo+ID4gPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYw0KPiA+ID4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMNCj4gPiA+ID4gQEAgLTgzLDYgKzgzLDggQEANCj4gPiA+
ID4NCj4gPiA+ID4gICNkZWZpbmUgQU1ER1BVX1ZFUlNJT04gICAgICAgICAiMTkuMTAuOS40MTgi
DQo+ID4gPiA+DQo+ID4gPiA+ICsjZGVmaW5lIEFNREdQVV9NQVhfVElNRU9VVF9QQVJBTV9MRU5U
SCAyNTYNCj4gPiA+ID4gKw0KPiA+ID4gPiAgaW50IGFtZGdwdV92cmFtX2xpbWl0ID0gMDsNCj4g
PiA+ID4gIGludCBhbWRncHVfdmlzX3ZyYW1fbGltaXQgPSAwOw0KPiA+ID4gPiAgaW50IGFtZGdw
dV9nYXJ0X3NpemUgPSAtMTsgLyogYXV0byAqLyBAQCAtOTUsNyArOTcsNyBAQCBpbnQNCj4gPiA+
ID4gYW1kZ3B1X2Rpc3BfcHJpb3JpdHkgPSAwOyAgaW50IGFtZGdwdV9od19pMmMgPSAwOyAgaW50
DQo+ID4gPiA+IGFtZGdwdV9wY2llX2dlbjIgPSAtMTsgIGludCBhbWRncHVfbXNpID0gLTE7IC1p
bnQNCj4gPiA+ID4gYW1kZ3B1X2xvY2t1cF90aW1lb3V0ID0gMTAwMDA7DQo+ID4gPiA+ICtjaGFy
DQo+ID4gPiBhbWRncHVfbG9ja3VwX3RpbWVvdXRbQU1ER1BVX01BWF9USU1FT1VUX1BBUkFNX0xF
TlRIXTsNCj4gPiA+ID4gIGludCBhbWRncHVfZHBtID0gLTE7DQo+ID4gPiA+ICBpbnQgYW1kZ3B1
X2Z3X2xvYWRfdHlwZSA9IC0xOw0KPiA+ID4gPiAgaW50IGFtZGdwdV9hc3BtID0gLTE7DQo+ID4g
PiA+IEBAIC0yMzIsMTIgKzIzNCwyNSBAQCBNT0RVTEVfUEFSTV9ERVNDKG1zaSwgIk1TSSBzdXBw
b3J0ICgxID0NCj4gPiA+IGVuYWJsZSwNCj4gPiA+ID4gMCA9IGRpc2FibGUsIC0xID0gYXV0byki
KTsgIG1vZHVsZV9wYXJhbV9uYW1lZChtc2ksIGFtZGdwdV9tc2ksDQo+ID4gPiA+IGludCwgMDQ0
NCk7DQo+ID4gPiA+DQo+ID4gPiA+ICAvKioNCj4gPiA+ID4gLSAqIERPQzogbG9ja3VwX3RpbWVv
dXQgKGludCkNCj4gPiA+ID4gLSAqIFNldCBHUFUgc2NoZWR1bGVyIHRpbWVvdXQgdmFsdWUgaW4g
bXMuIFZhbHVlIDAgaXMgaW52YWxpZGF0ZWQsDQo+ID4gPiA+IHdpbGwgYmUNCj4gPiA+IGFkanVz
dGVkIHRvIDEwMDAwLg0KPiA+ID4gPiAtICogTmVnYXRpdmUgdmFsdWVzIG1lYW4gJ2luZmluaXRl
IHRpbWVvdXQnIChNQVhfSklGRllfT0ZGU0VUKS4NCj4gPiA+ID4gVGhlDQo+ID4gPiBkZWZhdWx0
IGlzIDEwMDAwLg0KPiA+ID4gPiArICogRE9DOiBsb2NrdXBfdGltZW91dCAoc3RyaW5nKQ0KPiA+
ID4gPiArICogU2V0IEdQVSBzY2hlZHVsZXIgdGltZW91dCB2YWx1ZSBpbiBtcy4NCj4gPiA+ID4g
KyAqDQo+ID4gPiA+ICsgKiBUaGUgZm9ybWF0IGNhbiBiZSBbTm9uLUNvbXB1dGVdOltDb21wdXRl
XSBvcg0KPiA+ID4gW0dGWCxTRE1BLFtWaWRlb11dOltDb21wdXRlXS4NCj4gPiA+DQo+ID4gPiBJ
IHRoaW5rIHRoaXMgaXMgbW9yZSBjb21wbGljYXRlZCB0aGFuIGl0IG5lZWVkcyB0byBiZS4gIEhv
dyBhYm91dDoNCj4gPiA+ICogVGhlIGZvcm1hdCBjYW4gYmUgW0dsb2JhbF0gb3IgW0dGWCxDb21w
dXRlLFNETUEsVmlkZW9dLg0KPiA+ID4gRWl0aGVyIHlvdSBqdXN0IGFkanVzdCB0aGUgZ2xvYmFs
IHZhbHVlIGZvciBiYWNrd2FyZHMgY29tcGF0LCBvcg0KPiA+ID4geW91ciBzcGVjaWZ5IHRoZSB0
aW1lb3V0IGZvciBhbGwgb2YgdGhlIGVuZ2luZSB0eXBlcy4NCj4gPiA+DQo+ID4gPiBBbGV4DQo+
ID4gPg0KPiA+ID4gPiArICogICAtIFRoZXJlIGNhbiBiZSBvbmUgb3IgbXVsdGlwbGUgdmFsdWVz
IHNwZWNpZmllZCBiZWZvcmUgIjoiLiBPciB0aGVyZQ0KPiBpcw0KPiA+ID4gZXZlbiBubyB2YWx1
ZSBiZWZvcmUgIjoiLg0KPiA+ID4gPiArICogICAgIC0gV2l0aCBubyB2YWx1ZSBzcGVjaWZpZWQg
YmVmb3JlICI6IiwgdGhlIGRlZmF1bHQgdGltZW91dCBmb3IgYWxsDQo+IG5vbi0NCj4gPiA+IGNv
bXB1dGUoR0ZYLCBTRE1BIGFuZCBWaWRlbykNCj4gPiA+ID4gKyAqICAgICAgIGpvYnMgd2lsbCBi
ZSAxMDAwMC4NCj4gPiA+ID4gKyAqICAgICAtIFdpdGggb25lIHZhbHVlIHNwZWNpZmllZCwgdGhl
IHNldHRpbmcgd2lsbCBhcHBseSB0byBhbGwgbm9uLQ0KPiBjb21wdXRlDQo+ID4gPiBqb2JzLg0K
PiA+ID4gPiArICogICAgIC0gV2l0aCBtdWx0aXBsZSB2YWx1ZXMgc3BlY2lmaWVkLCB0aGUgZmly
c3Qgb25lIHdpbGwgYmUgZm9yIEdGWC4gVGhlDQo+ID4gPiBzZWNvbmQgb25lIGlzIGZvciBTRE1B
Lg0KPiA+ID4gPiArICogICAgICAgQW5kIHRoZSB0aGlyZCBvbmUgaXMgZm9yIFZpZGVvLg0KPiA+
ID4gPiArICogICAtIFRoZXJlIGNhbiBiZSBvbmUgb3Igbm8gdmFsdWUgc3BlY2lmaWVkIGFmdGVy
ICI6Ii4NCj4gPiA+ID4gKyAqICAgICAtIFdpdGggbm8gdmFsdWUgc3BlY2lmaWVkIGFmdGVyICI6
IiwgdGhlcmUgd2lsbCBiZSBubyB0aW1lb3V0DQo+IGVuZm9yY2VkDQo+ID4gPiBvbiBjb21wdXRl
IGpvYnMuDQo+ID4gPiA+ICsgKiAgICAgLSBPdGhlcndpc2UsIHRoZSB0aW1lb3V0IGZvciBjb21w
dXRlIGpvYnMgd2lsbCBiZSBzZXQgYXMgc3BlY2lmaWVkLg0KPiA+ID4gPiArICoNCj4gPiA+ID4g
KyAqIDAgYW5kIG5lZ2F0aXZlIHZhbHVlcyBhcmUgaW52YWxpZGF0ZWQuIFRoZXkgd2lsbCBiZSBh
ZGp1c3RlZA0KPiA+ID4gPiArIHRvIGRlZmF1bHQNCj4gPiA+IHRpbWVvdXQuDQo+ID4gPiA+ICAg
Ki8NCj4gPiA+ID4gLU1PRFVMRV9QQVJNX0RFU0MobG9ja3VwX3RpbWVvdXQsICJHUFUgbG9ja3Vw
IHRpbWVvdXQgaW4gbXMgPg0KPiAwDQo+ID4gPiA+IChkZWZhdWx0IDEwMDAwKSIpOyAtbW9kdWxl
X3BhcmFtX25hbWVkKGxvY2t1cF90aW1lb3V0LA0KPiA+ID4gPiBhbWRncHVfbG9ja3VwX3RpbWVv
dXQsIGludCwgMDQ0NCk7DQo+ID4gPiA+ICtNT0RVTEVfUEFSTV9ERVNDKGxvY2t1cF90aW1lb3V0
LCAiR1BVIGxvY2t1cCB0aW1lb3V0IGluIG1zDQo+ID4gPiAoZGVmYXVsdDogMTAwMDAgZm9yIG5v
bi1jb21wdXRlIGpvYnMgYW5kIG5vIHRpbWVvdXQgZm9yIGNvbXB1dGUgam9icyksDQo+ICINCj4g
PiA+ID4gKyAgICAgICAgICAgICAgICJmb3JtYXQgaXMgW05vbi1Db21wdXRlXTpbQ29tcHV0ZV0g
b3INCj4gPiA+ID4gK1tHRlgsU0RNQSxWaWRlb106W0NvbXB1dGVdIik7DQo+IG1vZHVsZV9wYXJh
bV9zdHJpbmcobG9ja3VwX3RpbWVvdXQsDQo+ID4gPiA+ICthbWRncHVfbG9ja3VwX3RpbWVvdXQs
IHNpemVvZihhbWRncHVfbG9ja3VwX3RpbWVvdXQpLCAwNDQ0KTsNCj4gPiA+ID4NCj4gPiA+ID4g
IC8qKg0KPiA+ID4gPiAgICogRE9DOiBkcG0gKGludCkNCj4gPiA+ID4gQEAgLTEzMDcsNiArMTMy
Miw2OSBAQCBpbnQgYW1kZ3B1X2ZpbGVfdG9fZnByaXYoc3RydWN0IGZpbGUgKmZpbHAsDQo+ID4g
PiA+IHN0cnVjdA0KPiA+ID4gYW1kZ3B1X2Zwcml2ICoqZnByaXYpDQo+ID4gPiA+ICAgICAgICAg
cmV0dXJuIDA7DQo+ID4gPiA+ICB9DQo+ID4gPiA+DQo+ID4gPiA+ICtpbnQgYW1kZ3B1X2Rldmlj
ZV9nZXRfam9iX3RpbWVvdXRfc2V0dGluZ3Moc3RydWN0IGFtZGdwdV9kZXZpY2UNCj4gPiA+ID4g
KyphZGV2KSB7DQo+ID4gPiA+ICsgICAgICAgY2hhciAqaW5wdXQgPSBhbWRncHVfbG9ja3VwX3Rp
bWVvdXQ7DQo+ID4gPiA+ICsgICAgICAgY2hhciAqbm9uX2NvbXB1dGVfc2V0dGluZyA9IE5VTEw7
DQo+ID4gPiA+ICsgICAgICAgY2hhciAqdGltZW91dF9zZXR0aW5nID0gTlVMTDsNCj4gPiA+ID4g
KyAgICAgICBpbnQgaW5kZXggPSAwOw0KPiA+ID4gPiArICAgICAgIGxvbmcgdGltZW91dDsNCj4g
PiA+ID4gKyAgICAgICBpbnQgcmV0ID0gMDsNCj4gPiA+ID4gKw0KPiA+ID4gPiArICAgICAgIC8q
DQo+ID4gPiA+ICsgICAgICAgICogQnkgZGVmYXVsdCB0aW1lb3V0IGZvciBub24gY29tcHV0ZSBq
b2JzIGlzIDEwMDAwLg0KPiA+ID4gPiArICAgICAgICAqIEFuZCB0aGVyZSBpcyBubyB0aW1lb3V0
IGVuZm9yY2VkIG9uIGNvbXB1dGUgam9icy4NCj4gPiA+ID4gKyAgICAgICAgKi8NCj4gPiA+ID4g
KyAgICAgICBhZGV2LT5nZnhfdGltZW91dCA9IGFkZXYtPnNkbWFfdGltZW91dCA9DQo+ID4gPiA+
ICsgYWRldi0+dmlkZW9fdGltZW91dCA9DQo+ID4gPiAxMDAwMDsNCj4gPiA+ID4gKyAgICAgICBh
ZGV2LT5jb21wdXRlX3RpbWVvdXQgPSBNQVhfU0NIRURVTEVfVElNRU9VVDsNCj4gPiA+ID4gKw0K
PiA+ID4gPiArICAgICAgIGlmIChzdHJubGVuKGlucHV0LCBBTURHUFVfTUFYX1RJTUVPVVRfUEFS
QU1fTEVOVEgpKSB7DQo+ID4gPiA+ICsgICAgICAgICAgICAgICBub25fY29tcHV0ZV9zZXR0aW5n
ID0gc3Ryc2VwKCZpbnB1dCwgIjoiKTsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgIGlmIChpbnB1
dCkgew0KPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAvKiBHZXQgY29tcHV0ZSBqb2Jz
IHRpbWVvdXQgc2V0dGluZyAqLw0KPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICByZXQg
PSBrc3RydG9sKGlucHV0LCAwLCAmdGltZW91dCk7DQo+ID4gPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgIGlmIChyZXQpDQo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
cmV0dXJuIHJldDsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQg
PiAwKQ0KPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZXYtPmNvbXB1
dGVfdGltZW91dCA9IHRpbWVvdXQ7DQo+ID4gPiA+ICsgICAgICAgICAgICAgICB9DQo+ID4gPiA+
ICsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgIHdoaWxlICgodGltZW91dF9zZXR0aW5nID0gc3Ry
c2VwKCZub25fY29tcHV0ZV9zZXR0aW5nLCAiLCIpKQ0KPiAmJg0KPiA+ID4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cm5sZW4odGltZW91dF9zZXR0aW5nLA0KPiA+ID4gQU1E
R1BVX01BWF9USU1FT1VUX1BBUkFNX0xFTlRIKSkgew0KPiA+ID4gPiArICAgICAgICAgICAgICAg
ICAgICAgICByZXQgPSBrc3RydG9sKHRpbWVvdXRfc2V0dGluZywgMCwgJnRpbWVvdXQpOw0KPiA+
ID4gPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0KQ0KPiA+ID4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7DQo+ID4gPiA+ICsNCj4gPiA+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQgPD0gMCkgew0KPiA+ID4gPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7DQo+ID4gPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY29udGludWU7DQo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgIH0NCj4gPiA+ID4gKw0KPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2gg
KGluZGV4KyspIHsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOg0KPiA+
ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZXYtPmdmeF90aW1lb3V0ID0g
dGltZW91dDsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsN
Cj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOg0KPiA+ID4gPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGFkZXYtPnNkbWFfdGltZW91dCA9IHRpbWVvdXQ7DQo+
ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+ID4gPiA+ICsg
ICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBhZGV2LT52aWRlb190aW1lb3V0ID0gdGltZW91dDsNCj4gPiA+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCj4gPiA+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgZGVmYXVsdDoNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBicmVhazsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgfQ0KPiA+ID4gPiAr
ICAgICAgICAgICAgICAgfQ0KPiA+ID4gPiArICAgICAgICAgICAgICAgLyoNCj4gPiA+ID4gKyAg
ICAgICAgICAgICAgICAqIFRoZXJlIGlzIG9ubHkgb25lIHZhbHVlIHNwZWNpZmllZCBiZWZvcmUg
IjoiIGFuZA0KPiA+ID4gPiArICAgICAgICAgICAgICAgICogaXQgc2hvdWxkIGFwcGx5IHRvIGFs
bCBub24tY29tcHV0ZSBqb2JzLg0KPiA+ID4gPiArICAgICAgICAgICAgICAgICovDQo+ID4gPiA+
ICsgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gMSkNCj4gPiA+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgYWRldi0+c2RtYV90aW1lb3V0ID0gYWRldi0+dmlkZW9fdGltZW91dCA9DQo+ID4g
PiA+ICsgYWRldi0NCj4gPiA+ID5nZnhfdGltZW91dDsNCj4gPiA+ID4gKyAgICAgICB9DQo+ID4g
PiA+ICsNCj4gPiA+ID4gKyAgICAgICByZXR1cm4gcmV0Ow0KPiA+ID4gPiArfQ0KPiA+ID4gPiAr
DQo+ID4gPiA+ICBzdGF0aWMgYm9vbA0KPiA+ID4gPiAgYW1kZ3B1X2dldF9jcnRjX3NjYW5vdXRf
cG9zaXRpb24oc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQNCj4gPiA+ID4gaW50DQo+
ID4gPiBwaXBlLA0KPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29s
IGluX3ZibGFua19pcnEsIGludCAqdnBvcywNCj4gPiA+ID4gaW50ICpocG9zLCBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ZlbmNlLmMNCj4gPiA+ID4gYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYw0KPiA+ID4gPiBpbmRleCBk
MTlhZDM0YmVmNzUuLjE2YjdlM2EyMmU4OSAxMDA2NDQNCj4gPiA+ID4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ZlbmNlLmMNCj4gPiA+ID4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ZlbmNlLmMNCj4gPiA+ID4gQEAgLTQzNiw5ICs0MzYs
MTMgQEAgaW50IGFtZGdwdV9mZW5jZV9kcml2ZXJfc3RhcnRfcmluZyhzdHJ1Y3QNCj4gPiA+ID4g
YW1kZ3B1X3JpbmcgKnJpbmcsICBpbnQgYW1kZ3B1X2ZlbmNlX2RyaXZlcl9pbml0X3Jpbmcoc3Ry
dWN0DQo+ID4gPiBhbWRncHVfcmluZyAqcmluZywNCj4gPiA+ID4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVuc2lnbmVkIG51bV9od19zdWJtaXNzaW9uKSAgew0KPiA+ID4gPiAr
ICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gcmluZy0+YWRldjsNCj4gPiA+ID4g
ICAgICAgICBsb25nIHRpbWVvdXQ7DQo+ID4gPiA+ICAgICAgICAgaW50IHI7DQo+ID4gPiA+DQo+
ID4gPiA+ICsgICAgICAgaWYgKCFhZGV2KQ0KPiA+ID4gPiArICAgICAgICAgICAgICAgcmV0dXJu
IC1FSU5WQUw7DQo+ID4gPiA+ICsNCj4gPiA+ID4gICAgICAgICAvKiBDaGVjayB0aGF0IG51bV9o
d19zdWJtaXNzaW9uIGlzIGEgcG93ZXIgb2YgdHdvICovDQo+ID4gPiA+ICAgICAgICAgaWYgKChu
dW1faHdfc3VibWlzc2lvbiAmIChudW1faHdfc3VibWlzc2lvbiAtIDEpKSAhPSAwKQ0KPiA+ID4g
PiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7DQo+ID4gPiA+IEBAIC00NjUsMTIgKzQ2
OSwzMSBAQCBpbnQgYW1kZ3B1X2ZlbmNlX2RyaXZlcl9pbml0X3Jpbmcoc3RydWN0DQo+ID4gPiA+
IGFtZGdwdV9yaW5nICpyaW5nLA0KPiA+ID4gPg0KPiA+ID4gPiAgICAgICAgIC8qIE5vIG5lZWQg
dG8gc2V0dXAgdGhlIEdQVSBzY2hlZHVsZXIgZm9yIEtJUSByaW5nICovDQo+ID4gPiA+ICAgICAg
ICAgaWYgKHJpbmctPmZ1bmNzLT50eXBlICE9IEFNREdQVV9SSU5HX1RZUEVfS0lRKSB7DQo+ID4g
PiA+IC0gICAgICAgICAgICAgICAvKiBmb3Igbm9uLXNyaW92IGNhc2UsIG5vIHRpbWVvdXQgZW5m
b3JjZSBvbiBjb21wdXRlIHJpbmcgKi8NCj4gPiA+ID4gLSAgICAgICAgICAgICAgIGlmICgocmlu
Zy0+ZnVuY3MtPnR5cGUgPT0gQU1ER1BVX1JJTkdfVFlQRV9DT01QVVRFKQ0KPiA+ID4gPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICFhbWRncHVfc3Jpb3ZfdmYocmluZy0+YWRl
dikpDQo+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBNQVhfU0NIRURV
TEVfVElNRU9VVDsNCj4gPiA+ID4gLSAgICAgICAgICAgICAgIGVsc2UNCj4gPiA+ID4gLSAgICAg
ICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG1zZWNzX3RvX2ppZmZpZXMoYW1kZ3B1X2xvY2t1
cF90aW1lb3V0KTsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgIHN3aXRjaCAocmluZy0+ZnVuY3Mt
PnR5cGUpIHsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgIGNhc2UgQU1ER1BVX1JJTkdfVFlQRV9H
Rlg6DQo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBhZGV2LT5nZnhf
dGltZW91dDsNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+ID4gPiA+
ICsgICAgICAgICAgICAgICBjYXNlIEFNREdQVV9SSU5HX1RZUEVfQ09NUFVURToNCj4gPiA+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgLyoNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICogRm9yIG5vbi1zcmlvdiBjYXNlLCBubyB0aW1lb3V0IGVuZm9yY2UNCj4gPiA+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICogb24gY29tcHV0ZSByaW5nIGJ5IGRlZmF1bHQuIFVubGVz
cyB1c2VyDQo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAqIHNwZWNpZmllcyBhIHRp
bWVvdXQgZm9yIGNvbXB1dGUgcmluZy4NCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICoNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICogRm9yIHNyaW92IGNhc2UsIGFs
d2F5cyB1c2UgdGhlIHRpbWVvdXQNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICog
YXMgZ2Z4IHJpbmcNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICovDQo+ID4gPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgIGlmICghYW1kZ3B1X3NyaW92X3ZmKHJpbmctPmFkZXYp
KQ0KPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBhZGV2
LT5jb21wdXRlX3RpbWVvdXQ7DQo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGVsc2UN
Cj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gYWRldi0+
Z2Z4X3RpbWVvdXQ7DQo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KPiA+
ID4gPiArICAgICAgICAgICAgICAgY2FzZSBBTURHUFVfUklOR19UWVBFX1NETUE6DQo+ID4gPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBhZGV2LT5zZG1hX3RpbWVvdXQ7DQo+
ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KPiA+ID4gPiArICAgICAgICAg
ICAgICAgZGVmYXVsdDoNCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9
IGFkZXYtPnZpZGVvX3RpbWVvdXQ7DQo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGJy
ZWFrOw0KPiA+ID4gPiArICAgICAgICAgICAgICAgfQ0KPiA+ID4gPg0KPiA+ID4gPiAgICAgICAg
ICAgICAgICAgciA9IGRybV9zY2hlZF9pbml0KCZyaW5nLT5zY2hlZCwgJmFtZGdwdV9zY2hlZF9v
cHMsDQo+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtX2h3X3N1
Ym1pc3Npb24sDQo+ID4gPiA+IGFtZGdwdV9qb2JfaGFuZ19saW1pdCwgZGlmZiAtLWdpdA0KPiA+
ID4gPiBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L214Z3B1X2FpLmMNCj4gPiA+ID4gYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9teGdwdV9haS5jDQo+ID4gPiA+IGluZGV4IDhkYmFk
NDk2YjI5Zi4uMDg5OTUyYTFlNmIwIDEwMDY0NA0KPiA+ID4gPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9teGdwdV9haS5jDQo+ID4gPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L214Z3B1X2FpLmMNCj4gPiA+ID4gQEAgLTM0Myw3ICszNDMsNyBAQCBzdGF0aWMg
dm9pZCB4Z3B1X2FpX21haWxib3hfZmxyX3dvcmsoc3RydWN0DQo+ID4gPiA+IHdvcmtfc3RydWN0
ICp3b3JrKQ0KPiA+ID4gPg0KPiA+ID4gPiAgICAgICAgIC8qIFRyaWdnZXIgcmVjb3ZlcnkgZm9y
IHdvcmxkIHN3aXRjaCBmYWlsdXJlIGlmIG5vIFREUiAqLw0KPiA+ID4gPiAgICAgICAgIGlmIChh
bWRncHVfZGV2aWNlX3Nob3VsZF9yZWNvdmVyX2dwdShhZGV2KQ0KPiA+ID4gPiAtICAgICAgICAg
ICAgICAgJiYgYW1kZ3B1X2xvY2t1cF90aW1lb3V0ID09IE1BWF9TQ0hFRFVMRV9USU1FT1VUKQ0K
PiA+ID4gPiArICAgICAgICAgICAgICAgJiYgYWRldi0+c2RtYV90aW1lb3V0ID09IE1BWF9TQ0hF
RFVMRV9USU1FT1VUKQ0KPiA+ID4gPiAgICAgICAgICAgICAgICAgYW1kZ3B1X2RldmljZV9ncHVf
cmVjb3ZlcihhZGV2LCBOVUxMKTsgIH0NCj4gPiA+ID4NCj4gPiA+ID4gLS0NCj4gPiA+ID4gMi4y
MS4wDQo+ID4gPiA+DQo+ID4gPiA+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fDQo+ID4gPiA+IGFtZC1nZnggbWFpbGluZyBsaXN0DQo+ID4gPiA+IGFtZC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQo+ID4gPiA+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA0KX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9hbWQtZ2Z4
