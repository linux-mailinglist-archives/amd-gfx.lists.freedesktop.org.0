Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 78A65113FE5
	for <lists+amd-gfx@lfdr.de>; Thu,  5 Dec 2019 12:04:59 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C05536F63D;
	Thu,  5 Dec 2019 11:04:57 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-CY1-obe.outbound.protection.outlook.com
 (mail-eopbgr760053.outbound.protection.outlook.com [40.107.76.53])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CE9686F63D
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 11:04:56 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=bbOYPY+6z+2O5hoHL+8ftDKXZ6NKRaWzbCXHK+l80HIBVWg1FD+gkq3Hvo/N46wMGsablbmfCn8PwxF0EWJn1FLeZ52XHVa0De/nP0oDAUZ6Q9XJUkzcDXxsplwShUCFsKMX7JMSyVoBfHpxWB8EW6ifuNdyNnU2+keZNLm8OORUBV1eTjW05XM0pGO9eBLjKvkGDgPvreJgFw5UM1kGsEykJiaWNU+tKsIX9E7f83eu+EQDVAyqnFKMOpqq4YR1velC4OgsZboF4nrQYk3JQbjBSZW4Bu2QbX6erXuEBH9xVQlyH7/dLWM2Q7FKNLGCOPeyp/n9ankO7GBzftdmZw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=XHKv2e4wOPcwIwmmPg6gAIyIHixoY/ZwQcn8cl4f/SU=;
 b=XSbOs4rNg4jndxk1WqQckq+0m18d3wz8fZPTLhldac9PQgJEaLijiO8vuWOZ6NlBhq43L8S6LaDhukQODYopdZIB0JIv3Fw/jKH7oSLgdzNTpHnA2c6jN2Ml6pFmQDDR1pYb+cfGDcmw/DYU6cOIhr9g0ge3aFamY/SoDb33GTyiOPmHl9JExnpE8ICoKVm2hFZu9NdtW66cYeerdSvDnPGmMn4CRQigne4CMGs0nsu+FHohNbem+eZjaO/HFdTifjJLOdwN3UGaqMsEBhgdrRmTsn0UP5vxb+hrUuO017+fr1OqnmN7y9fQpc0OWnKaiuBrYD10QP1zsdtLXdj1gA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM5PR12MB2376.namprd12.prod.outlook.com (52.132.143.139) by
 DM5PR12MB2408.namprd12.prod.outlook.com (52.132.143.142) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2495.21; Thu, 5 Dec 2019 11:04:55 +0000
Received: from DM5PR12MB2376.namprd12.prod.outlook.com
 ([fe80::b8ee:257d:3a23:ae8a]) by DM5PR12MB2376.namprd12.prod.outlook.com
 ([fe80::b8ee:257d:3a23:ae8a%7]) with mapi id 15.20.2516.014; Thu, 5 Dec 2019
 11:04:55 +0000
Subject: Re: [RFC PATCH] drm/scheduler: rework entity creation
To: Nirmoy Das <nirmoy.aiemd@gmail.com>, alexander.deucher@amd.com,
 kenny.ho@amd.com, christian.koenig@amd.com
References: <20191205105259.78636-1-nirmoy.das@amd.com>
From: Nirmoy <nirmodas@amd.com>
Message-ID: <6ad43025-72b0-2c94-9406-347856ea26ed@amd.com>
Date: Thu, 5 Dec 2019 12:04:44 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.1.0
In-Reply-To: <20191205105259.78636-1-nirmoy.das@amd.com>
Content-Language: en-US
X-ClientProxiedBy: AM0PR01CA0009.eurprd01.prod.exchangelabs.com
 (2603:10a6:208:69::22) To DM5PR12MB2376.namprd12.prod.outlook.com
 (2603:10b6:4:b9::11)
MIME-Version: 1.0
X-Originating-IP: [2003:c5:8f2d:100:d60:db7f:8dfb:835c]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: ca5d7601-607c-450f-aa5d-08d77972f584
X-MS-TrafficTypeDiagnostic: DM5PR12MB2408:|DM5PR12MB2408:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <DM5PR12MB240824FED586721B7943DBB18B5C0@DM5PR12MB2408.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:5516;
X-Forefront-PRVS: 02426D11FE
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(136003)(346002)(396003)(376002)(366004)(189003)(199004)(54094003)(66476007)(50466002)(66556008)(316002)(14444005)(229853002)(6636002)(58126008)(31696002)(99286004)(14454004)(36756003)(6666004)(6486002)(65956001)(66946007)(25786009)(81166006)(186003)(8676002)(6512007)(478600001)(53546011)(2870700001)(30864003)(31686004)(5660300002)(6506007)(8936002)(4326008)(23676004)(52116002)(305945005)(2616005)(2906002)(81156014)(11346002)(76176011);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM5PR12MB2408;
 H:DM5PR12MB2376.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: Neo3caPnQXlO1i56mEtp9m4uXF9+379201YLCFPcHPG8ih5sS3sj0MiOneq3WIlIRTMfAViohGgO+i/5hc2RoVDeT38LrYiv7l+oxbOqdmBKBPxdMN8LLLiOc1smcQTz53DJuQ+WhEwkbqIuWSXaOgmMucEgNLNv9iyomX1xqetU61DkJvhRq7n23Ksqzul5JkTr3rEwgUb6z2uEaYkxzjg3TI+IbZIy0YtTeQM7c39KhA9FoRbp8ITePR/YdrUY2WhbL3CLGnWGbcX/OObp5O11Oy7bPHosLuLtKtlwiP/OVSV6wn5AST1x4MUxXKyHD13baKgeIeqKGFnke4JwMJjSL6g14Z660TcA/+nPmwY0tPo8PbtViu5VRkoZJU5OeKMq5j+aiJXf9sSXjKwPXOkURmDBieSpUMK3jYmHniU5cFQpQ+JPySeZ6iUPR0iq0jEC0taY460jARRp190L4MRE5o+j/89eTTWM0pd9ivEGl8jNf+q/jrPjGIUrNsVU
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: ca5d7601-607c-450f-aa5d-08d77972f584
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 05 Dec 2019 11:04:55.0398 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: utEzX2ynTEbH9fSa+vgWY+3wqX1l871xt6CBFHKxIXCpBTvB+Fi54pZK0E8mHABnMVGT3KXA/AcxVgouG3pZEw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5PR12MB2408
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=XHKv2e4wOPcwIwmmPg6gAIyIHixoY/ZwQcn8cl4f/SU=;
 b=0t3AP9RrPtn70cDt0FrNyJ7kLTVDQGMTIS6GgtdIf0iRJ6TGzB3+f+hEfFZ5+5p9G1GK4v1gLhH0fVrGuJzRNmdtc6lEq65zgNEd4jSjWv9rZSEXx/EKTmW2RD/WwLSAIMTtCgVmVJFuPfqhn+AmjH/kCVtZIRUNrZ83gs4omgk=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Nirmoy.Das@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: nirmoy.das@amd.com, amd-gfx@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

SGkgQ2hyaXN0aWFuLAoKSSBhbSBub3QgZXhhY3RseSBzdXJlIGFib3V0IGRybV9zY2hlZF9lbnRp
dHlfc2V0X3ByaW9yaXR5KCkgSSB3b25kZXIgaWYgCmp1c3QgY2hhbmdpbmcKCmVudGl0eS0+cHJp
b3JpdHnCoCB0byBjdHgtPm92ZXJyaWRlX3ByaW9yaXR5IHNob3VsZCB3b3JrLiBXaXRoIHRoaXMg
CmNoYW5nZSBkcm1fc2NoZWRfZW50aXR5X3NlbGVjdF9ycSgpCgp3aWxsIGNob3NlIGEgcnEgYmFz
ZWQgb24gZW50aXR5LT5wcmlvcml0eSB3aGljaCBzZWVtcyB0byBtZSBjb3JyZWN0LiBCdXQgCmlz
IHRoaXMgZW5vdWdoIHRvIGZpeCB0aGUgb2xkIGJ1ZyB5b3Ugd2VyZQoKdGFsa2luZyBhYm91dCB3
aGljaCBtZXNzIHVwIGFscmVhZHkgc2NoZWR1bGVkIGpvYiBvbiBwcmlvcml0eSBjaGFuZ2U/CgoK
b2theSBJIGp1c3QgcmVhbGl6ZWQgSSBuZWVkIGEgbG9jayB0byBtYWtlIHN1cmUKCmRybV9zY2hl
ZF9lbnRpdHlfc2V0X3ByaW9yaXR5KCkgYW5kIGRybV9zY2hlZF9lbnRpdHlfc2VsZWN0X3JxKCkg
CnNob3VsZG4ndCBoYXBwZW4gYXQgdGhlIHNhbWUgdGltZS4KCgpSZWdhcmRzLAoKTmlybW95CgoK
T24gMTIvNS8xOSAxMTo1MiBBTSwgTmlybW95IERhcyB3cm90ZToKPiBFbnRpdHkgY3VycmVudGx5
IGtlZXBzIGEgY29weSBvZiBydW5fcXVldWUgbGlzdCBhbmQgbW9kaWZ5IGl0IGluCj4gZHJtX3Nj
aGVkX2VudGl0eV9zZXRfcHJpb3JpdHkoKS4gRW50aXRpZXMgc2hvdWxkbid0IG1vZGlmeSBydW5f
cXVldWUKPiBsaXN0LiBVc2UgZHJtX2dwdV9zY2hlZHVsZXIgbGlzdCBpbnN0ZWFkIG9mIGRybV9z
Y2hlZF9ycSBsaXN0Cj4gaW4gZHJtX3NjaGVkX2VudGl0eSBzdHJ1Y3QuIEluIHRoaXMgd2F5IHdl
IGNhbiBzZWxlY3QgYSBydW5xdWV1ZSBiYXNlZAo+IG9uIGVudGl0eS9jdHgncyBwcmlvcml0eSBm
b3IgYSAgZHJtIHNjaGVkdWxlci4KPgo+IFNpZ25lZC1vZmYtYnk6IE5pcm1veSBEYXMgPG5pcm1v
eS5kYXNAYW1kLmNvbT4KPiAtLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9jdHguYyAgfCAgNyArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90
dG0uYyAgfCAgNyArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91dmQu
YyAgfCAgNyArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92Y2UuYyAg
fCAgNyArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jICAgfCAx
NCArKystLQo+ICAgZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuYyAgICB8ICA4
ICstLQo+ICAgZHJpdmVycy9ncHUvZHJtL2xpbWEvbGltYV9zY2hlZC5jICAgICAgICB8ICA1ICst
Cj4gICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMgIHwgIDcgKy0tCj4g
ICBkcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jIHwgNjUgKysrKysrKysr
LS0tLS0tLS0tLS0tLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vdjNkL3YzZF9kcnYuYyAgICAgICAg
ICAgIHwgIDcgKy0tCj4gICBpbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmggICAgICAgICAgICAg
IHwgIDkgKystLQo+ICAgMTEgZmlsZXMgY2hhbmdlZCwgNjkgaW5zZXJ0aW9ucygrKSwgNzQgZGVs
ZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2N0eC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2N0eC5jCj4gaW5k
ZXggYTBkM2Q3Yjc1NmViLi5lOGY0NmMxM2QwNzMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2N0eC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2N0eC5jCj4gQEAgLTEyMiw3ICsxMjIsNyBAQCBzdGF0aWMgaW50IGFtZGdw
dV9jdHhfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgIAo+ICAgCWZvciAoaSA9
IDA7IGkgPCBBTURHUFVfSFdfSVBfTlVNOyArK2kpIHsKPiAgIAkJc3RydWN0IGFtZGdwdV9yaW5n
ICpyaW5nc1tBTURHUFVfTUFYX1JJTkdTXTsKPiAtCQlzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycXNb
QU1ER1BVX01BWF9SSU5HU107Cj4gKwkJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZF9s
aXN0W0FNREdQVV9NQVhfUklOR1NdOwo+ICAgCQl1bnNpZ25lZCBudW1fcmluZ3MgPSAwOwo+ICAg
CQl1bnNpZ25lZCBudW1fcnFzID0gMDsKPiAgIAo+IEBAIC0xODEsMTIgKzE4MSwxMyBAQCBzdGF0
aWMgaW50IGFtZGdwdV9jdHhfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgIAkJ
CWlmICghcmluZ3Nbal0tPmFkZXYpCj4gICAJCQkJY29udGludWU7Cj4gICAKPiAtCQkJcnFzW251
bV9ycXMrK10gPSAmcmluZ3Nbal0tPnNjaGVkLnNjaGVkX3JxW3ByaW9yaXR5XTsKPiArCQkJc2No
ZWRfbGlzdFtudW1fcnFzKytdID0gJnJpbmdzW2pdLT5zY2hlZDsKPiAgIAkJfQo+ICAgCj4gICAJ
CWZvciAoaiA9IDA7IGogPCBhbWRncHVfY3R4X251bV9lbnRpdGllc1tpXTsgKytqKQo+ICAgCQkJ
ciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmY3R4LT5lbnRpdGllc1tpXVtqXS5lbnRpdHksCj4g
LQkJCQkJCSAgcnFzLCBudW1fcnFzLCAmY3R4LT5ndWlsdHkpOwo+ICsJCQkJCQkgIHNjaGVkX2xp
c3QsIG51bV9ycXMsCj4gKwkJCQkJCSAgJmN0eC0+Z3VpbHR5LCBwcmlvcml0eSk7Cj4gICAJCWlm
IChyKQo+ICAgCQkJZ290byBlcnJvcl9jbGVhbnVwX2VudGl0aWVzOwo+ICAgCX0KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCj4gaW5kZXggMTlmZmUwMGQ5MDcyLi5hOTYw
ZGQ3YzA3MTEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X3R0bS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCj4g
QEAgLTE5NTcsMTEgKzE5NTcsMTIgQEAgdm9pZCBhbWRncHVfdHRtX3NldF9idWZmZXJfZnVuY3Nf
c3RhdHVzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBib29sIGVuYWJsZSkKPiAgIAo+ICAg
CWlmIChlbmFibGUpIHsKPiAgIAkJc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nOwo+IC0JCXN0cnVj
dCBkcm1fc2NoZWRfcnEgKnJxOwo+ICsJCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQ7
Cj4gICAKPiAgIAkJcmluZyA9IGFkZXYtPm1tYW4uYnVmZmVyX2Z1bmNzX3Jpbmc7Cj4gLQkJcnEg
PSAmcmluZy0+c2NoZWQuc2NoZWRfcnFbRFJNX1NDSEVEX1BSSU9SSVRZX0tFUk5FTF07Cj4gLQkJ
ciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmYWRldi0+bW1hbi5lbnRpdHksICZycSwgMSwgTlVM
TCk7Cj4gKwkJc2NoZWQgPSAmcmluZy0+c2NoZWQ7Cj4gKwkJciA9IGRybV9zY2hlZF9lbnRpdHlf
aW5pdCgmYWRldi0+bW1hbi5lbnRpdHksICZzY2hlZCwKPiArCQkJCQkgIDEsIE5VTEwsIERSTV9T
Q0hFRF9QUklPUklUWV9LRVJORUwpOwo+ICAgCQlpZiAocikgewo+ICAgCQkJRFJNX0VSUk9SKCJG
YWlsZWQgc2V0dGluZyB1cCBUVE0gQk8gbW92ZSBlbnRpdHkgKCVkKVxuIiwKPiAgIAkJCQkgIHIp
Owo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdXZkLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdXZkLmMKPiBpbmRleCBlMzI0YmZl
NmM1OGYuLmI4MDNhODg4Mjg2NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfdXZkLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdXZkLmMKPiBAQCAtMzMwLDEyICszMzAsMTMgQEAgaW50IGFtZGdwdV91dmRfc3dfZmluaShz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgIGludCBhbWRncHVfdXZkX2VudGl0eV9pbml0
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgewo+ICAgCXN0cnVjdCBhbWRncHVfcmlu
ZyAqcmluZzsKPiAtCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOwo+ICsJc3RydWN0IGRybV9ncHVf
c2NoZWR1bGVyICpzY2hlZDsKPiAgIAlpbnQgcjsKPiAgIAo+ICAgCXJpbmcgPSAmYWRldi0+dXZk
Lmluc3RbMF0ucmluZzsKPiAtCXJxID0gJnJpbmctPnNjaGVkLnNjaGVkX3JxW0RSTV9TQ0hFRF9Q
UklPUklUWV9OT1JNQUxdOwo+IC0JciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmYWRldi0+dXZk
LmVudGl0eSwgJnJxLCAxLCBOVUxMKTsKPiArCXNjaGVkID0gJnJpbmctPnNjaGVkOwo+ICsJciA9
IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmYWRldi0+dXZkLmVudGl0eSwgJnNjaGVkLAo+ICsJCQkJ
ICAxLCBOVUxMLCBEUk1fU0NIRURfUFJJT1JJVFlfTk9STUFMKTsKPiAgIAlpZiAocikgewo+ICAg
CQlEUk1fRVJST1IoIkZhaWxlZCBzZXR0aW5nIHVwIFVWRCBrZXJuZWwgZW50aXR5LlxuIik7Cj4g
ICAJCXJldHVybiByOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdmNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmNlLmMKPiBp
bmRleCA0NmI1OTBhZjJmZDIuLmI0NGYyOGQ0NGZiNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmNlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfdmNlLmMKPiBAQCAtMjQwLDEyICsyNDAsMTMgQEAgaW50IGFtZGdwdV92
Y2Vfc3dfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgIGludCBhbWRncHVfdmNl
X2VudGl0eV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgewo+ICAgCXN0cnVj
dCBhbWRncHVfcmluZyAqcmluZzsKPiAtCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOwo+ICsJc3Ry
dWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKPiAgIAlpbnQgcjsKPiAgIAo+ICAgCXJpbmcg
PSAmYWRldi0+dmNlLnJpbmdbMF07Cj4gLQlycSA9ICZyaW5nLT5zY2hlZC5zY2hlZF9ycVtEUk1f
U0NIRURfUFJJT1JJVFlfTk9STUFMXTsKPiAtCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJmFk
ZXYtPnZjZS5lbnRpdHksICZycSwgMSwgTlVMTCk7Cj4gKwlzY2hlZCA9ICZyaW5nLT5zY2hlZDsK
PiArCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJmFkZXYtPnZjZS5lbnRpdHksICZzY2hlZCwK
PiArCQkJCSAgMSwgTlVMTCwgRFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTCk7Cj4gICAJaWYgKHIg
IT0gMCkgewo+ICAgCQlEUk1fRVJST1IoIkZhaWxlZCBzZXR0aW5nIHVwIFZDRSBydW4gcXVldWUu
XG4iKTsKPiAgIAkJcmV0dXJuIHI7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV92bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Zt
LmMKPiBpbmRleCBhOTRjNGZhYTVhZjEuLmVjNjE0MTc3M2E5MiAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jCj4gQEAgLTI2ODcsNiArMjY4Nyw3IEBAIGludCBhbWRn
cHVfdm1faW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgc3RydWN0IGFtZGdwdV92bSAq
dm0sCj4gICB7Cj4gICAJc3RydWN0IGFtZGdwdV9ib19wYXJhbSBicDsKPiAgIAlzdHJ1Y3QgYW1k
Z3B1X2JvICpyb290Owo+ICsgICAgICAgIHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWRf
bGlzdFtBTURHUFVfTUFYX1JJTkdTXTsKPiAgIAlpbnQgciwgaTsKPiAgIAo+ICAgCXZtLT52YSA9
IFJCX1JPT1RfQ0FDSEVEOwo+IEBAIC0yNzAwLDE0ICsyNzAxLDE5IEBAIGludCBhbWRncHVfdm1f
aW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgc3RydWN0IGFtZGdwdV92bSAqdm0sCj4g
ICAJc3Bpbl9sb2NrX2luaXQoJnZtLT5pbnZhbGlkYXRlZF9sb2NrKTsKPiAgIAlJTklUX0xJU1Rf
SEVBRCgmdm0tPmZyZWVkKTsKPiAgIAo+ICsgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhZGV2LT52
bV9tYW5hZ2VyLnZtX3B0ZV9udW1fcnFzOyBpKyspCj4gKwkgICAgICAgc2NoZWRfbGlzdFtpXSA9
IGFkZXYtPnZtX21hbmFnZXIudm1fcHRlX3Jxc1tpXS0+c2NoZWQ7Cj4gKwo+ICAgCS8qIGNyZWF0
ZSBzY2hlZHVsZXIgZW50aXRpZXMgZm9yIHBhZ2UgdGFibGUgdXBkYXRlcyAqLwo+IC0JciA9IGRy
bV9zY2hlZF9lbnRpdHlfaW5pdCgmdm0tPmRpcmVjdCwgYWRldi0+dm1fbWFuYWdlci52bV9wdGVf
cnFzLAo+IC0JCQkJICBhZGV2LT52bV9tYW5hZ2VyLnZtX3B0ZV9udW1fcnFzLCBOVUxMKTsKPiAr
CXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJnZtLT5kaXJlY3QsIHNjaGVkX2xpc3QsCj4gKwkJ
CQkgIGFkZXYtPnZtX21hbmFnZXIudm1fcHRlX251bV9ycXMsCj4gKwkJCQkgIE5VTEwsIERSTV9T
Q0hFRF9QUklPUklUWV9LRVJORUwpOwo+ICAgCWlmIChyKQo+ICAgCQlyZXR1cm4gcjsKPiAgIAo+
IC0JciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmdm0tPmRlbGF5ZWQsIGFkZXYtPnZtX21hbmFn
ZXIudm1fcHRlX3JxcywKPiAtCQkJCSAgYWRldi0+dm1fbWFuYWdlci52bV9wdGVfbnVtX3Jxcywg
TlVMTCk7Cj4gKwlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2bS0+ZGVsYXllZCwgc2NoZWRf
bGlzdCwKPiArCQkJCSAgYWRldi0+dm1fbWFuYWdlci52bV9wdGVfbnVtX3JxcywKPiArCQkJCSAg
TlVMTCwgRFJNX1NDSEVEX1BSSU9SSVRZX0tFUk5FTCk7Cj4gICAJaWYgKHIpCj4gICAJCWdvdG8g
ZXJyb3JfZnJlZV9kaXJlY3Q7Cj4gICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0
bmF2aXYvZXRuYXZpdl9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZHJ2
LmMKPiBpbmRleCAxZjljMDFiZTQwZDcuLmE2NWMxZTExNWUzNSAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2Rydi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2V0bmF2aXYvZXRuYXZpdl9kcnYuYwo+IEBAIC02NSwxMiArNjUsMTIgQEAgc3RhdGljIGludCBl
dG5hdml2X29wZW4oc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxl
KQo+ICAgCj4gICAJZm9yIChpID0gMDsgaSA8IEVUTkFfTUFYX1BJUEVTOyBpKyspIHsKPiAgIAkJ
c3RydWN0IGV0bmF2aXZfZ3B1ICpncHUgPSBwcml2LT5ncHVbaV07Cj4gLQkJc3RydWN0IGRybV9z
Y2hlZF9ycSAqcnE7Cj4gKwkJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKPiAgIAo+
ICAgCQlpZiAoZ3B1KSB7Cj4gLQkJCXJxID0gJmdwdS0+c2NoZWQuc2NoZWRfcnFbRFJNX1NDSEVE
X1BSSU9SSVRZX05PUk1BTF07Cj4gLQkJCWRybV9zY2hlZF9lbnRpdHlfaW5pdCgmY3R4LT5zY2hl
ZF9lbnRpdHlbaV0sCj4gLQkJCQkJICAgICAgJnJxLCAxLCBOVUxMKTsKPiArCQkJc2NoZWQgPSAm
Z3B1LT5zY2hlZDsKPiArCQkJZHJtX3NjaGVkX2VudGl0eV9pbml0KCZjdHgtPnNjaGVkX2VudGl0
eVtpXSwgJnNjaGVkLAo+ICsJCQkJCSAgICAgIDEsIE5VTEwsIERSTV9TQ0hFRF9QUklPUklUWV9O
T1JNQUwpOwo+ICAgCQkJfQo+ICAgCX0KPiAgIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vbGltYS9saW1hX3NjaGVkLmMgYi9kcml2ZXJzL2dwdS9kcm0vbGltYS9saW1hX3NjaGVkLmMK
PiBpbmRleCBmNTIyYzVmOTk3MjkuLmE3ZTUzODc4ZDg0MSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vbGltYS9saW1hX3NjaGVkLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbGltYS9s
aW1hX3NjaGVkLmMKPiBAQCAtMTU5LDkgKzE1OSwxMCBAQCBpbnQgbGltYV9zY2hlZF9jb250ZXh0
X2luaXQoc3RydWN0IGxpbWFfc2NoZWRfcGlwZSAqcGlwZSwKPiAgIAkJCSAgICBzdHJ1Y3QgbGlt
YV9zY2hlZF9jb250ZXh0ICpjb250ZXh0LAo+ICAgCQkJICAgIGF0b21pY190ICpndWlsdHkpCj4g
ICB7Cj4gLQlzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycSA9IHBpcGUtPmJhc2Uuc2NoZWRfcnEgKyBE
Uk1fU0NIRURfUFJJT1JJVFlfTk9STUFMOwo+ICsJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpz
Y2hlZCA9ICZwaXBlLT5iYXNlOwo+ICAgCj4gLQlyZXR1cm4gZHJtX3NjaGVkX2VudGl0eV9pbml0
KCZjb250ZXh0LT5iYXNlLCAmcnEsIDEsIGd1aWx0eSk7Cj4gKwlyZXR1cm4gZHJtX3NjaGVkX2Vu
dGl0eV9pbml0KCZjb250ZXh0LT5iYXNlLCAmc2NoZWQsCj4gKwkJCQkgICAgIDEsIGd1aWx0eSwg
RFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTCk7Cj4gICB9Cj4gICAKPiAgIHZvaWQgbGltYV9zY2hl
ZF9jb250ZXh0X2Zpbmkoc3RydWN0IGxpbWFfc2NoZWRfcGlwZSAqcGlwZSwKPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jIGIvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gaW5kZXggZDQxMWViNmM4ZWI5Li44NDE3OGJj
ZjM1YzkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pv
Yi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gQEAg
LTU0MiwxMiArNTQyLDEzIEBAIGludCBwYW5mcm9zdF9qb2Jfb3BlbihzdHJ1Y3QgcGFuZnJvc3Rf
ZmlsZV9wcml2ICpwYW5mcm9zdF9wcml2KQo+ICAgewo+ICAgCXN0cnVjdCBwYW5mcm9zdF9kZXZp
Y2UgKnBmZGV2ID0gcGFuZnJvc3RfcHJpdi0+cGZkZXY7Cj4gICAJc3RydWN0IHBhbmZyb3N0X2pv
Yl9zbG90ICpqcyA9IHBmZGV2LT5qczsKPiAtCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOwo+ICsJ
c3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKPiAgIAlpbnQgcmV0LCBpOwo+ICAgCj4g
ICAJZm9yIChpID0gMDsgaSA8IE5VTV9KT0JfU0xPVFM7IGkrKykgewo+IC0JCXJxID0gJmpzLT5x
dWV1ZVtpXS5zY2hlZC5zY2hlZF9ycVtEUk1fU0NIRURfUFJJT1JJVFlfTk9STUFMXTsKPiAtCQly
ZXQgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJnBhbmZyb3N0X3ByaXYtPnNjaGVkX2VudGl0eVtp
XSwgJnJxLCAxLCBOVUxMKTsKPiArCQlzY2hlZCA9ICZqcy0+cXVldWVbaV0uc2NoZWQ7Cj4gKwkJ
cmV0ID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZwYW5mcm9zdF9wcml2LT5zY2hlZF9lbnRpdHlb
aV0sCj4gKwkJCQkJICAgICZzY2hlZCwgMSwgTlVMTCwgRFJNX1NDSEVEX1BSSU9SSVRZX05PUk1B
TCk7Cj4gICAJCWlmIChXQVJOX09OKHJldCkpCj4gICAJCQlyZXR1cm4gcmV0Owo+ICAgCX0KPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRpdHkuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfZW50aXR5LmMKPiBpbmRleCA0NjFhN2E4MTI5
ZjQuLmUxMGQzNzI2NjgzNiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVy
L3NjaGVkX2VudGl0eS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9l
bnRpdHkuYwo+IEBAIC0zOCw5ICszOCw5IEBACj4gICAgKiBzdWJtaXQgdG8gSFcgcmluZy4KPiAg
ICAqCj4gICAgKiBAZW50aXR5OiBzY2hlZHVsZXIgZW50aXR5IHRvIGluaXQKPiAtICogQHJxX2xp
c3Q6IHRoZSBsaXN0IG9mIHJ1biBxdWV1ZSBvbiB3aGljaCBqb2JzIGZyb20gdGhpcwo+ICsgKiBA
c2NoZWRfbGlzdDogdGhlIGxpc3Qgb2YgZHJtIHNjaGVkcyBvbiB3aGljaCBqb2JzIGZyb20gdGhp
cwo+ICAgICogICAgICAgICAgIGVudGl0eSBjYW4gYmUgc3VibWl0dGVkCj4gLSAqIEBudW1fcnFf
bGlzdDogbnVtYmVyIG9mIHJ1biBxdWV1ZSBpbiBycV9saXN0Cj4gKyAqIEBudW1fc2NoZWRfbGlz
dDogbnVtYmVyIG9mIGRybSBzY2hlZCBpbiBzY2hlZF9saXN0Cj4gICAgKiBAZ3VpbHR5OiBhdG9t
aWNfdCBzZXQgdG8gMSB3aGVuIGEgam9iIG9uIHRoaXMgcXVldWUKPiAgICAqICAgICAgICAgIGlz
IGZvdW5kIHRvIGJlIGd1aWx0eSBjYXVzaW5nIGEgdGltZW91dAo+ICAgICoKPiBAQCAtNTAsMzIg
KzUwLDM0IEBACj4gICAgKiBSZXR1cm5zIDAgb24gc3VjY2VzcyBvciBhIG5lZ2F0aXZlIGVycm9y
IGNvZGUgb24gZmFpbHVyZS4KPiAgICAqLwo+ICAgaW50IGRybV9zY2hlZF9lbnRpdHlfaW5pdChz
dHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5LAo+IC0JCQkgIHN0cnVjdCBkcm1fc2NoZWRf
cnEgKipycV9saXN0LAo+IC0JCQkgIHVuc2lnbmVkIGludCBudW1fcnFfbGlzdCwKPiAtCQkJICBh
dG9taWNfdCAqZ3VpbHR5KQo+ICsJCQkgIHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqKnNjaGVk
X2xpc3QsCj4gKwkJCSAgdW5zaWduZWQgaW50IG51bV9zY2hlZF9saXN0LAo+ICsJCQkgIGF0b21p
Y190ICpndWlsdHksIGVudW0gZHJtX3NjaGVkX3ByaW9yaXR5IHByaW9yaXR5KQo+ICAgewo+ICAg
CWludCBpOwo+ICAgCj4gLQlpZiAoIShlbnRpdHkgJiYgcnFfbGlzdCAmJiAobnVtX3JxX2xpc3Qg
PT0gMCB8fCBycV9saXN0WzBdKSkpCj4gKwlpZiAoIShlbnRpdHkgJiYgc2NoZWRfbGlzdCAmJiAo
bnVtX3NjaGVkX2xpc3QgPT0gMCB8fCBzY2hlZF9saXN0WzBdKSkpCj4gICAJCXJldHVybiAtRUlO
VkFMOwo+ICAgCj4gICAJbWVtc2V0KGVudGl0eSwgMCwgc2l6ZW9mKHN0cnVjdCBkcm1fc2NoZWRf
ZW50aXR5KSk7Cj4gICAJSU5JVF9MSVNUX0hFQUQoJmVudGl0eS0+bGlzdCk7Cj4gICAJZW50aXR5
LT5ycSA9IE5VTEw7Cj4gICAJZW50aXR5LT5ndWlsdHkgPSBndWlsdHk7Cj4gLQllbnRpdHktPm51
bV9ycV9saXN0ID0gbnVtX3JxX2xpc3Q7Cj4gLQllbnRpdHktPnJxX2xpc3QgPSBrY2FsbG9jKG51
bV9ycV9saXN0LCBzaXplb2Yoc3RydWN0IGRybV9zY2hlZF9ycSAqKSwKPiAtCQkJCUdGUF9LRVJO
RUwpOwo+IC0JaWYgKCFlbnRpdHktPnJxX2xpc3QpCj4gKwllbnRpdHktPm51bV9zY2hlZF9saXN0
ID0gbnVtX3NjaGVkX2xpc3Q7Cj4gKwllbnRpdHktPnByaW9yaXR5ID0gcHJpb3JpdHk7Cj4gKwll
bnRpdHktPnNjaGVkX2xpc3QgPSAga2NhbGxvYyhudW1fc2NoZWRfbGlzdCwKPiArCQkJCSAgICAg
IHNpemVvZihzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKiksIEdGUF9LRVJORUwpOwo+ICsKPiAr
CWlmKCFlbnRpdHktPnNjaGVkX2xpc3QpCj4gICAJCXJldHVybiAtRU5PTUVNOwo+ICAgCj4gICAJ
aW5pdF9jb21wbGV0aW9uKCZlbnRpdHktPmVudGl0eV9pZGxlKTsKPiAgIAo+IC0JZm9yIChpID0g
MDsgaSA8IG51bV9ycV9saXN0OyArK2kpCj4gLQkJZW50aXR5LT5ycV9saXN0W2ldID0gcnFfbGlz
dFtpXTsKPiArCWZvciAoaSA9IDA7IGkgPCBudW1fc2NoZWRfbGlzdDsgaSsrKQo+ICsJCWVudGl0
eS0+c2NoZWRfbGlzdFtpXSA9IHNjaGVkX2xpc3RbaV07Cj4gICAKPiAtCWlmIChudW1fcnFfbGlz
dCkKPiAtCQllbnRpdHktPnJxID0gcnFfbGlzdFswXTsKPiArCWlmIChudW1fc2NoZWRfbGlzdCkK
PiArCQllbnRpdHktPnJxID0gJmVudGl0eS0+c2NoZWRfbGlzdFswXS0+c2NoZWRfcnFbZW50aXR5
LT5wcmlvcml0eV07Cj4gICAKPiAgIAllbnRpdHktPmxhc3Rfc2NoZWR1bGVkID0gTlVMTDsKPiAg
IAo+IEBAIC0xMzksMTAgKzE0MSwxMCBAQCBkcm1fc2NoZWRfZW50aXR5X2dldF9mcmVlX3NjaGVk
KHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkpCj4gICAJdW5zaWduZWQgaW50IG1pbl9q
b2JzID0gVUlOVF9NQVgsIG51bV9qb2JzOwo+ICAgCWludCBpOwo+ICAgCj4gLQlmb3IgKGkgPSAw
OyBpIDwgZW50aXR5LT5udW1fcnFfbGlzdDsgKytpKSB7Cj4gLQkJc3RydWN0IGRybV9ncHVfc2No
ZWR1bGVyICpzY2hlZCA9IGVudGl0eS0+cnFfbGlzdFtpXS0+c2NoZWQ7Cj4gKwlmb3IgKGkgPSAw
OyBpIDwgZW50aXR5LT5udW1fc2NoZWRfbGlzdDsgKytpKSB7Cj4gKwkJc3RydWN0IGRybV9ncHVf
c2NoZWR1bGVyICpzY2hlZCA9IGVudGl0eS0+c2NoZWRfbGlzdFtpXTsKPiAgIAo+IC0JCWlmICgh
ZW50aXR5LT5ycV9saXN0W2ldLT5zY2hlZC0+cmVhZHkpIHsKPiArCQlpZiAoIWVudGl0eS0+c2No
ZWRfbGlzdFtpXS0+cmVhZHkpIHsKPiAgIAkJCURSTV9XQVJOKCJzY2hlZCVzIGlzIG5vdCByZWFk
eSwgc2tpcHBpbmciLCBzY2hlZC0+bmFtZSk7Cj4gICAJCQljb250aW51ZTsKPiAgIAkJfQo+IEBA
IC0xNTAsNyArMTUyLDcgQEAgZHJtX3NjaGVkX2VudGl0eV9nZXRfZnJlZV9zY2hlZChzdHJ1Y3Qg
ZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KQo+ICAgCQludW1fam9icyA9IGF0b21pY19yZWFkKCZz
Y2hlZC0+bnVtX2pvYnMpOwo+ICAgCQlpZiAobnVtX2pvYnMgPCBtaW5fam9icykgewo+ICAgCQkJ
bWluX2pvYnMgPSBudW1fam9iczsKPiAtCQkJcnEgPSBlbnRpdHktPnJxX2xpc3RbaV07Cj4gKwkJ
CXJxID0gJmVudGl0eS0+c2NoZWRfbGlzdFtpXS0+c2NoZWRfcnFbZW50aXR5LT5wcmlvcml0eV07
Cj4gICAJCX0KPiAgIAl9Cj4gICAKPiBAQCAtMzA4LDcgKzMxMCw3IEBAIHZvaWQgZHJtX3NjaGVk
X2VudGl0eV9maW5pKHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkpCj4gICAKPiAgIAlk
bWFfZmVuY2VfcHV0KGVudGl0eS0+bGFzdF9zY2hlZHVsZWQpOwo+ICAgCWVudGl0eS0+bGFzdF9z
Y2hlZHVsZWQgPSBOVUxMOwo+IC0Ja2ZyZWUoZW50aXR5LT5ycV9saXN0KTsKPiArCWtmcmVlKGVu
dGl0eS0+c2NoZWRfbGlzdCk7Cj4gICB9Cj4gICBFWFBPUlRfU1lNQk9MKGRybV9zY2hlZF9lbnRp
dHlfZmluaSk7Cj4gICAKPiBAQCAtMzUzLDE1ICszNTUsNiBAQCBzdGF0aWMgdm9pZCBkcm1fc2No
ZWRfZW50aXR5X3dha2V1cChzdHJ1Y3QgZG1hX2ZlbmNlICpmLAo+ICAgCWRybV9zY2hlZF93YWtl
dXAoZW50aXR5LT5ycS0+c2NoZWQpOwo+ICAgfQo+ICAgCj4gLS8qKgo+IC0gKiBkcm1fc2NoZWRf
ZW50aXR5X3NldF9ycV9wcmlvcml0eSAtIGhlbHBlciBmb3IgZHJtX3NjaGVkX2VudGl0eV9zZXRf
cHJpb3JpdHkKPiAtICovCj4gLXN0YXRpYyB2b2lkIGRybV9zY2hlZF9lbnRpdHlfc2V0X3JxX3By
aW9yaXR5KHN0cnVjdCBkcm1fc2NoZWRfcnEgKipycSwKPiAtCQkJCQkgICAgIGVudW0gZHJtX3Nj
aGVkX3ByaW9yaXR5IHByaW9yaXR5KQo+IC17Cj4gLQkqcnEgPSAmKCpycSktPnNjaGVkLT5zY2hl
ZF9ycVtwcmlvcml0eV07Cj4gLX0KPiAtCj4gICAvKioKPiAgICAqIGRybV9zY2hlZF9lbnRpdHlf
c2V0X3ByaW9yaXR5IC0gU2V0cyBwcmlvcml0eSBvZiB0aGUgZW50aXR5Cj4gICAgKgo+IEBAIC0z
NzMsMjAgKzM2Niw4IEBAIHN0YXRpYyB2b2lkIGRybV9zY2hlZF9lbnRpdHlfc2V0X3JxX3ByaW9y
aXR5KHN0cnVjdCBkcm1fc2NoZWRfcnEgKipycSwKPiAgIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9z
ZXRfcHJpb3JpdHkoc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSwKPiAgIAkJCQkgICBl
bnVtIGRybV9zY2hlZF9wcmlvcml0eSBwcmlvcml0eSkKPiAgIHsKPiAtCXVuc2lnbmVkIGludCBp
Owo+IC0KPiAtCXNwaW5fbG9jaygmZW50aXR5LT5ycV9sb2NrKTsKPiAgIAo+IC0JZm9yIChpID0g
MDsgaSA8IGVudGl0eS0+bnVtX3JxX2xpc3Q7ICsraSkKPiAtCQlkcm1fc2NoZWRfZW50aXR5X3Nl
dF9ycV9wcmlvcml0eSgmZW50aXR5LT5ycV9saXN0W2ldLCBwcmlvcml0eSk7Cj4gLQo+IC0JaWYg
KGVudGl0eS0+cnEpIHsKPiAtCQlkcm1fc2NoZWRfcnFfcmVtb3ZlX2VudGl0eShlbnRpdHktPnJx
LCBlbnRpdHkpOwo+IC0JCWRybV9zY2hlZF9lbnRpdHlfc2V0X3JxX3ByaW9yaXR5KCZlbnRpdHkt
PnJxLCBwcmlvcml0eSk7Cj4gLQkJZHJtX3NjaGVkX3JxX2FkZF9lbnRpdHkoZW50aXR5LT5ycSwg
ZW50aXR5KTsKPiAtCX0KPiAtCj4gLQlzcGluX3VubG9jaygmZW50aXR5LT5ycV9sb2NrKTsKPiAr
CWVudGl0eS0+cHJpb3JpdHkgPSBwcmlvcml0eTsKPiAgIH0KPiAgIEVYUE9SVF9TWU1CT0woZHJt
X3NjaGVkX2VudGl0eV9zZXRfcHJpb3JpdHkpOwo+ICAgCj4gQEAgLTQ5MCw3ICs0NzEsNyBAQCB2
b2lkIGRybV9zY2hlZF9lbnRpdHlfc2VsZWN0X3JxKHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICpl
bnRpdHkpCj4gICAJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7Cj4gICAJc3RydWN0IGRybV9zY2hl
ZF9ycSAqcnE7Cj4gICAKPiAtCWlmIChzcHNjX3F1ZXVlX2NvdW50KCZlbnRpdHktPmpvYl9xdWV1
ZSkgfHwgZW50aXR5LT5udW1fcnFfbGlzdCA8PSAxKQo+ICsJaWYgKHNwc2NfcXVldWVfY291bnQo
JmVudGl0eS0+am9iX3F1ZXVlKSB8fCBlbnRpdHktPm51bV9zY2hlZF9saXN0IDw9IDEpCj4gICAJ
CXJldHVybjsKPiAgIAo+ICAgCWZlbmNlID0gUkVBRF9PTkNFKGVudGl0eS0+bGFzdF9zY2hlZHVs
ZWQpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdjNkL3YzZF9kcnYuYyBiL2RyaXZl
cnMvZ3B1L2RybS92M2QvdjNkX2Rydi5jCj4gaW5kZXggMWEwNzQ2MmI0NTI4Li5jNmFmZjFhZWRk
MjcgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3YzZC92M2RfZHJ2LmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vdjNkL3YzZF9kcnYuYwo+IEBAIC0xNDAsNyArMTQwLDcgQEAgdjNkX29w
ZW4oc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxlKQo+ICAgewo+
ICAgCXN0cnVjdCB2M2RfZGV2ICp2M2QgPSB0b192M2RfZGV2KGRldik7Cj4gICAJc3RydWN0IHYz
ZF9maWxlX3ByaXYgKnYzZF9wcml2Owo+IC0Jc3RydWN0IGRybV9zY2hlZF9ycSAqcnE7Cj4gKwlz
dHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVkOwo+ICAgCWludCBpOwo+ICAgCj4gICAJdjNk
X3ByaXYgPSBremFsbG9jKHNpemVvZigqdjNkX3ByaXYpLCBHRlBfS0VSTkVMKTsKPiBAQCAtMTUw
LDggKzE1MCw5IEBAIHYzZF9vcGVuKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1f
ZmlsZSAqZmlsZSkKPiAgIAl2M2RfcHJpdi0+djNkID0gdjNkOwo+ICAgCj4gICAJZm9yIChpID0g
MDsgaSA8IFYzRF9NQVhfUVVFVUVTOyBpKyspIHsKPiAtCQlycSA9ICZ2M2QtPnF1ZXVlW2ldLnNj
aGVkLnNjaGVkX3JxW0RSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUxdOwo+IC0JCWRybV9zY2hlZF9l
bnRpdHlfaW5pdCgmdjNkX3ByaXYtPnNjaGVkX2VudGl0eVtpXSwgJnJxLCAxLCBOVUxMKTsKPiAr
CQlzY2hlZCA9ICZ2M2QtPnF1ZXVlW2ldLnNjaGVkOwo+ICsJCWRybV9zY2hlZF9lbnRpdHlfaW5p
dCgmdjNkX3ByaXYtPnNjaGVkX2VudGl0eVtpXSwgJnNjaGVkLAo+ICsJCQkJICAgICAgMSwgTlVM
TCwgRFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTCk7Cj4gICAJfQo+ICAgCj4gICAJZmlsZS0+ZHJp
dmVyX3ByaXYgPSB2M2RfcHJpdjsKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZ3B1X3NjaGVk
dWxlci5oIGIvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oCj4gaW5kZXggNjg0NjkyYThlZDc2
Li45ZGYzMjJkZmFjMzAgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5o
Cj4gKysrIGIvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oCj4gQEAgLTgxLDggKzgxLDkgQEAg
ZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgewo+ICAgc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgewo+
ICAgCXN0cnVjdCBsaXN0X2hlYWQJCWxpc3Q7Cj4gICAJc3RydWN0IGRybV9zY2hlZF9ycQkJKnJx
Owo+IC0Jc3RydWN0IGRybV9zY2hlZF9ycQkJKipycV9saXN0Owo+IC0JdW5zaWduZWQgaW50ICAg
ICAgICAgICAgICAgICAgICBudW1fcnFfbGlzdDsKPiArCXVuc2lnbmVkIGludCAgICAgICAgICAg
ICAgICAgICAgbnVtX3NjaGVkX2xpc3Q7Cj4gKwlzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgICAg
ICAgICoqc2NoZWRfbGlzdDsKPiArCWVudW0gZHJtX3NjaGVkX3ByaW9yaXR5ICAgICAgICAgcHJp
b3JpdHk7Cj4gICAJc3BpbmxvY2tfdAkJCXJxX2xvY2s7Cj4gICAKPiAgIAlzdHJ1Y3Qgc3BzY19x
dWV1ZQkJam9iX3F1ZXVlOwo+IEBAIC0zMTIsOSArMzEzLDkgQEAgdm9pZCBkcm1fc2NoZWRfcnFf
cmVtb3ZlX2VudGl0eShzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycSwKPiAgIAkJCQlzdHJ1Y3QgZHJt
X3NjaGVkX2VudGl0eSAqZW50aXR5KTsKPiAgIAo+ICAgaW50IGRybV9zY2hlZF9lbnRpdHlfaW5p
dChzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5LAo+IC0JCQkgIHN0cnVjdCBkcm1fc2No
ZWRfcnEgKipycV9saXN0LAo+ICsJCQkgIHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqKnNjaGVk
X2xpc3QsCj4gICAJCQkgIHVuc2lnbmVkIGludCBudW1fcnFfbGlzdCwKPiAtCQkJICBhdG9taWNf
dCAqZ3VpbHR5KTsKPiArCQkJICBhdG9taWNfdCAqZ3VpbHR5LCBlbnVtIGRybV9zY2hlZF9wcmlv
cml0eSBwcmlvcml0eSk7Cj4gICBsb25nIGRybV9zY2hlZF9lbnRpdHlfZmx1c2goc3RydWN0IGRy
bV9zY2hlZF9lbnRpdHkgKmVudGl0eSwgbG9uZyB0aW1lb3V0KTsKPiAgIHZvaWQgZHJtX3NjaGVk
X2VudGl0eV9maW5pKHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkpOwo+ICAgdm9pZCBk
cm1fc2NoZWRfZW50aXR5X2Rlc3Ryb3koc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSk7
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZngg
bWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
