Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6B6781148C2
	for <lists+amd-gfx@lfdr.de>; Thu,  5 Dec 2019 22:39:30 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E9F856F8E2;
	Thu,  5 Dec 2019 21:39:28 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail.rptsys.com (mail.rptsys.com [23.155.224.45])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 172556F8E2
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 21:39:28 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by mail.rptsys.com (Postfix) with ESMTP id 13466EA69091D
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 15:39:27 -0600 (CST)
Received: from mail.rptsys.com ([127.0.0.1])
 by localhost (vali.starlink.edu [127.0.0.1]) (amavisd-new, port 10032)
 with ESMTP id zEm-FwXMFAZJ for <amd-gfx@lists.freedesktop.org>;
 Thu,  5 Dec 2019 15:39:24 -0600 (CST)
Received: from localhost (localhost [127.0.0.1])
 by mail.rptsys.com (Postfix) with ESMTP id C1A8FEA6905C3
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 15:39:24 -0600 (CST)
DKIM-Filter: OpenDKIM Filter v2.10.3 mail.rptsys.com C1A8FEA6905C3
X-Virus-Scanned: amavisd-new at rptsys.com
Received: from mail.rptsys.com ([127.0.0.1])
 by localhost (vali.starlink.edu [127.0.0.1]) (amavisd-new, port 10026)
 with ESMTP id qsL7TVc1O5Bi for <amd-gfx@lists.freedesktop.org>;
 Thu,  5 Dec 2019 15:39:24 -0600 (CST)
Received: from vali.starlink.edu (unknown [192.168.3.2])
 by mail.rptsys.com (Postfix) with ESMTP id 9D756EA690588
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 15:39:24 -0600 (CST)
Date: Thu, 5 Dec 2019 15:39:24 -0600 (CST)
From: Timothy Pearson <tpearson@raptorengineering.com>
To: amd-gfx <amd-gfx@lists.freedesktop.org>
Message-ID: <756058159.3882541.1575581964361.JavaMail.zimbra@raptorengineeringinc.com>
Subject: [PATCH] [RFC] amdgpu: Enable full DCN support on POWER
MIME-Version: 1.0
X-Mailer: Zimbra 8.5.0_GA_3042 (ZimbraWebClient - GC65 (Linux)/8.5.0_GA_3042)
Thread-Index: RRmCzvhTzsfcCUXiXGsYGFpy0PK6Kg==
Thread-Topic: amdgpu: Enable full DCN support on POWER
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=raptorengineering.com; s=B8E824E6-0BE2-11E6-931D-288C65937AAD;
 t=1575581964; bh=T9MsJK8BxuwYi61wrlF8++3LEORmcYsWaI+nc49HIU0=;
 h=Date:From:To:Message-ID:MIME-Version;
 b=nwe6tLH5iCXpCWy9epMEJCVDr3fQreO1SezNk0qHbTtq7OPNlH5EBDP1LJIleFvuS
 xtOYoeItN3Kw2EfhCD8bu8tPNvqSmZG/9xhVpCr0o9WQuFYNd4ZDsT/+YruY76GtJ7
 lxnqIypKz4nLQ8Vcw3zLXxnOun5unUihqqZYhcgA=
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RENOIHJlcXVpcmVzIGZsb2F0aW5nIHBvaW50IHN1cHBvcnQgdG8gb3BlcmF0ZS4gIEFkZCB0aGUg
YXBwcm9wcmlhdGUKeDg2L3BwYzY0IGd1YXJkcyBhbmQgRlBVIC8gQWx0aVZlYyAvIFZTWCBjb250
ZXh0IHN3aXRjaGVzIHRvIERDTi4KClNpZ25lZC1vZmYtYnk6IFRpbW90aHkgUGVhcnNvbiA8dHBl
YXJzb25AcmFwdG9yZW5naW5lZXJpbmcuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvZGlz
cGxheS9LY29uZmlnICAgICAgICAgICB8ICAgOCArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2RjL01ha2VmaWxlICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxh
eS9kYy9jYWxjcy9NYWtlZmlsZSB8ICAgNCArCiAuLi4vZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9j
YWxjcy9kY25fY2FsY3MuYyAgfCAxNTcgKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9k
cm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvTWFrZWZpbGUgfCAgIDQgKwogLi4uL2RybS9hbWQvZGlz
cGxheS9kYy9kY24yMC9kY24yMF9yZXNvdXJjZS5jIHwgIDI3ICsrKwogZHJpdmVycy9ncHUvZHJt
L2FtZC9kaXNwbGF5L2RjL2RjbjIxL01ha2VmaWxlIHwgICA0ICsKIC4uLi9kcm0vYW1kL2Rpc3Bs
YXkvZGMvZGNuMjEvZGNuMjFfcmVzb3VyY2UuYyB8ICAyNyArKysKIGRyaXZlcnMvZ3B1L2RybS9h
bWQvZGlzcGxheS9kYy9kbWwvTWFrZWZpbGUgICB8ICAgNSArCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2Rpc3BsYXkvZGMvZHNjL01ha2VmaWxlICAgfCAgIDQgKwogZHJpdmVycy9ncHUvZHJtL2FtZC9k
aXNwbGF5L2RjL29zX3R5cGVzLmggICAgIHwgICA2ICsKIDExIGZpbGVzIGNoYW5nZWQsIDI0MyBp
bnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvZGlzcGxheS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L0tjb25m
aWcKaW5kZXggMzEzMTgzYjgwMDMyLi5jNzNhNjNmM2UyNDUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvZGlzcGxheS9LY29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlz
cGxheS9LY29uZmlnCkBAIC02LDcgKzYsNyBAQCBjb25maWcgRFJNX0FNRF9EQwogCWJvb2wgIkFN
RCBEQyAtIEVuYWJsZSBuZXcgZGlzcGxheSBlbmdpbmUiCiAJZGVmYXVsdCB5CiAJc2VsZWN0IFNO
RF9IREFfQ09NUE9ORU5UIGlmIFNORF9IREFfQ09SRQotCXNlbGVjdCBEUk1fQU1EX0RDX0RDTjFf
MCBpZiBYODYgJiYgIShLQ09WX0lOU1RSVU1FTlRfQUxMICYmIEtDT1ZfRU5BQkxFX0NPTVBBUklT
T05TKQorCXNlbGVjdCBEUk1fQU1EX0RDX0RDTjFfMCBpZiAoWDg2IHx8IFBQQzY0KSAmJiAhKEtD
T1ZfSU5TVFJVTUVOVF9BTEwgJiYgS0NPVl9FTkFCTEVfQ09NUEFSSVNPTlMpCiAJaGVscAogCSAg
Q2hvb3NlIHRoaXMgb3B0aW9uIGlmIHlvdSB3YW50IHRvIHVzZSB0aGUgbmV3IGRpc3BsYXkgZW5n
aW5lCiAJICBzdXBwb3J0IGZvciBBTURHUFUuIFRoaXMgYWRkcyByZXF1aXJlZCBzdXBwb3J0IGZv
ciBWZWdhIGFuZApAQCAtMjAsNyArMjAsNyBAQCBjb25maWcgRFJNX0FNRF9EQ19EQ04xXzAKIGNv
bmZpZyBEUk1fQU1EX0RDX0RDTjJfMAogCWJvb2wgIkRDTiAyLjAgZmFtaWx5IgogCWRlZmF1bHQg
eQotCWRlcGVuZHMgb24gRFJNX0FNRF9EQyAmJiBYODYKKwlkZXBlbmRzIG9uIERSTV9BTURfREMg
JiYgKFg4NiB8fCBQUEM2NCkKIAlkZXBlbmRzIG9uIERSTV9BTURfRENfRENOMV8wCiAJaGVscAog
CSAgQ2hvb3NlIHRoaXMgb3B0aW9uIGlmIHlvdSB3YW50IHRvIGhhdmUKQEAgLTI4LDcgKzI4LDcg
QEAgY29uZmlnIERSTV9BTURfRENfRENOMl8wCiAKIGNvbmZpZyBEUk1fQU1EX0RDX0RDTjJfMQog
CWJvb2wgIkRDTiAyLjEgZmFtaWx5IgotCWRlcGVuZHMgb24gRFJNX0FNRF9EQyAmJiBYODYKKwlk
ZXBlbmRzIG9uIERSTV9BTURfREMgJiYgKFg4NiB8fCBQUEM2NCkKIAlkZXBlbmRzIG9uIERSTV9B
TURfRENfRENOMl8wCiAJaGVscAogCSAgQ2hvb3NlIHRoaXMgb3B0aW9uIGlmIHlvdSB3YW50IHRv
IGhhdmUKQEAgLTM3LDcgKzM3LDcgQEAgY29uZmlnIERSTV9BTURfRENfRENOMl8xCiBjb25maWcg
RFJNX0FNRF9EQ19EU0NfU1VQUE9SVAogCWJvb2wgIkRTQyBzdXBwb3J0IgogCWRlZmF1bHQgeQot
CWRlcGVuZHMgb24gRFJNX0FNRF9EQyAmJiBYODYKKwlkZXBlbmRzIG9uIERSTV9BTURfREMgJiYg
KFg4NiB8fCBQUEM2NCkKIAlkZXBlbmRzIG9uIERSTV9BTURfRENfRENOMV8wCiAJZGVwZW5kcyBv
biBEUk1fQU1EX0RDX0RDTjJfMAogCWhlbHAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvZGlzcGxheS9kYy9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9N
YWtlZmlsZQppbmRleCBhMTYwNTEyYTJmMDQuLjNlMDI2YTk2OTM4NiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvZGlzcGxheS9kYy9NYWtlZmlsZQpAQCAtMSw1ICsxLDYgQEAKICMKICMgQ29weXJpZ2h0
IDIwMTcgQWR2YW5jZWQgTWljcm8gRGV2aWNlcywgSW5jLgorIyBDb3B5cmlnaHQgMjAxOSBSYXB0
b3IgRW5naW5lZXJpbmcsIExMQwogIwogIyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBm
cmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQogIyBjb3B5IG9mIHRoaXMg
c29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2Fy
ZSIpLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2NhbGNzL01h
a2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2NhbGNzL01ha2VmaWxlCmlu
ZGV4IDI2YzZkNzM1Y2RjNy4uMGQ0NmMzN2Q2Yzk1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2Rpc3BsYXkvZGMvY2FsY3MvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9kaXNwbGF5L2RjL2NhbGNzL01ha2VmaWxlCkBAIC0yNCw3ICsyNCw5IEBACiAjIEl0IGNhbGN1
bGF0ZXMgQmFuZHdpZHRoIGFuZCBXYXRlcm1hcmtzIHZhbHVlcyBmb3IgSFcgcHJvZ3JhbW1pbmcK
ICMKIAoraWZkZWYgQ09ORklHX1g4Nl82NAogY2FsY3NfY2NmbGFncyA6PSAtbWhhcmQtZmxvYXQg
LW1zc2UKK2VuZGlmCiAKIGlmZGVmIENPTkZJR19DQ19JU19HQ0MKIGlmZXEgKCQoY2FsbCBjYy1p
ZnZlcnNpb24sIC1sdCwgMDcwMSwgeSksIHkpCkBAIC0zMiw2ICszNCw3IEBAIElTX09MRF9HQ0Mg
PSAxCiBlbmRpZgogZW5kaWYKIAoraWZkZWYgQ09ORklHX1g4Nl82NAogaWZkZWYgSVNfT0xEX0dD
QwogIyBTdGFjayBhbGlnbm1lbnQgbWlzbWF0Y2gsIHByb2NlZWQgd2l0aCBjYXV0aW9uLgogIyBH
Q0MgPCA3LjEgY2Fubm90IGNvbXBpbGUgY29kZSB1c2luZyBgZG91YmxlYCBhbmQgLW1wcmVmZXJy
ZWQtc3RhY2stYm91bmRhcnk9MwpAQCAtNDAsNiArNDMsNyBAQCBjYWxjc19jY2ZsYWdzICs9IC1t
cHJlZmVycmVkLXN0YWNrLWJvdW5kYXJ5PTQKIGVsc2UKIGNhbGNzX2NjZmxhZ3MgKz0gLW1zc2Uy
CiBlbmRpZgorZW5kaWYKIAogQ0ZMQUdTXyQoQU1EREFMUEFUSCkvZGMvY2FsY3MvZGNuX2NhbGNz
Lm8gOj0gJChjYWxjc19jY2ZsYWdzKQogQ0ZMQUdTXyQoQU1EREFMUEFUSCkvZGMvY2FsY3MvZGNu
X2NhbGNfYXV0by5vIDo9ICQoY2FsY3NfY2NmbGFncykKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvZGlzcGxheS9kYy9jYWxjcy9kY25fY2FsY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvZGlzcGxheS9kYy9jYWxjcy9kY25fY2FsY3MuYwppbmRleCA5YjJjYjU3YmYyYmEuLjVjOTEz
YjU4NWFjNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2NhbGNz
L2Rjbl9jYWxjcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9jYWxjcy9k
Y25fY2FsY3MuYwpAQCAtMSw1ICsxLDYgQEAKIC8qCiAgKiBDb3B5cmlnaHQgMjAxNyBBZHZhbmNl
ZCBNaWNybyBEZXZpY2VzLCBJbmMuCisgKiBDb3B5cmlnaHQgMjAxOSBSYXB0b3IgRW5naW5lZXJp
bmcsIExMQwogICoKICAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hh
cmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCiAgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUg
YW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLApAQCAt
NjI2LDcgKzYyNywyMCBAQCBzdGF0aWMgYm9vbCBkY25fYndfYXBwbHlfcmVnaXN0cnlfb3ZlcnJp
ZGUoc3RydWN0IGRjICpkYykKIHsKIAlib29sIHVwZGF0ZWQgPSBmYWxzZTsKIAorI2lmIGRlZmlu
ZWQoQ09ORklHX1g4Nl82NCkKIAlrZXJuZWxfZnB1X2JlZ2luKCk7CisjZWxpZiBkZWZpbmVkKENP
TkZJR19QUEMzMikgfHwgZGVmaW5lZChDT05GSUdfUFBDNjQpCisJaWYgKGNwdV9oYXNfZmVhdHVy
ZShDUFVfRlRSX1ZTWF9DT01QKSkgeworCQlwcmVlbXB0X2Rpc2FibGUoKTsKKwkJZW5hYmxlX2tl
cm5lbF92c3goKTsKKwl9IGVsc2UgaWYgKGNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX0FMVElWRUNf
Q09NUCkpIHsKKwkJcHJlZW1wdF9kaXNhYmxlKCk7CisJCWVuYWJsZV9rZXJuZWxfYWx0aXZlYygp
OworCX0gZWxzZSBpZiAoIWNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX0ZQVV9VTkFWQUlMQUJMRSkp
IHsKKwkJcHJlZW1wdF9kaXNhYmxlKCk7CisJCWVuYWJsZV9rZXJuZWxfZnAoKTsKKwl9CisjZW5k
aWYKIAlpZiAoKGludCkoZGMtPmRjbl9zb2MtPnNyX2V4aXRfdGltZSAqIDEwMDApICE9IGRjLT5k
ZWJ1Zy5zcl9leGl0X3RpbWVfbnMKIAkJCSYmIGRjLT5kZWJ1Zy5zcl9leGl0X3RpbWVfbnMpIHsK
IAkJdXBkYXRlZCA9IHRydWU7CkBAIC02NjIsNyArNjc2LDIwIEBAIHN0YXRpYyBib29sIGRjbl9i
d19hcHBseV9yZWdpc3RyeV9vdmVycmlkZShzdHJ1Y3QgZGMgKmRjKQogCQlkYy0+ZGNuX3NvYy0+
ZHJhbV9jbG9ja19jaGFuZ2VfbGF0ZW5jeSA9CiAJCQkJZGMtPmRlYnVnLmRyYW1fY2xvY2tfY2hh
bmdlX2xhdGVuY3lfbnMgLyAxMDAwLjA7CiAJfQorI2lmIGRlZmluZWQoQ09ORklHX1g4Nl82NCkK
IAlrZXJuZWxfZnB1X2VuZCgpOworI2VsaWYgZGVmaW5lZChDT05GSUdfUFBDMzIpIHx8IGRlZmlu
ZWQoQ09ORklHX1BQQzY0KQorCWlmIChjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9WU1hfQ09NUCkp
IHsKKwkJZGlzYWJsZV9rZXJuZWxfdnN4KCk7CisJCXByZWVtcHRfZW5hYmxlKCk7CisJfSBlbHNl
IGlmIChjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9BTFRJVkVDX0NPTVApKSB7CisJCWRpc2FibGVf
a2VybmVsX2FsdGl2ZWMoKTsKKwkJcHJlZW1wdF9lbmFibGUoKTsKKwl9IGVsc2UgaWYgKCFjcHVf
aGFzX2ZlYXR1cmUoQ1BVX0ZUUl9GUFVfVU5BVkFJTEFCTEUpKSB7CisJCWRpc2FibGVfa2VybmVs
X2ZwKCk7CisJCXByZWVtcHRfZW5hYmxlKCk7CisJfQorI2VuZGlmCiAKIAlyZXR1cm4gdXBkYXRl
ZDsKIH0KQEAgLTc0Miw3ICs3NjksMjAgQEAgYm9vbCBkY25fdmFsaWRhdGVfYmFuZHdpZHRoKAog
CQlkY25fYndfc3luY19jYWxjc19hbmRfZG1sKGRjKTsKIAogCW1lbXNldCh2LCAwLCBzaXplb2Yo
KnYpKTsKKyNpZiBkZWZpbmVkKENPTkZJR19YODZfNjQpCiAJa2VybmVsX2ZwdV9iZWdpbigpOwor
I2VsaWYgZGVmaW5lZChDT05GSUdfUFBDMzIpIHx8IGRlZmluZWQoQ09ORklHX1BQQzY0KQorCWlm
IChjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9WU1hfQ09NUCkpIHsKKwkJcHJlZW1wdF9kaXNhYmxl
KCk7CisJCWVuYWJsZV9rZXJuZWxfdnN4KCk7CisJfSBlbHNlIGlmIChjcHVfaGFzX2ZlYXR1cmUo
Q1BVX0ZUUl9BTFRJVkVDX0NPTVApKSB7CisJCXByZWVtcHRfZGlzYWJsZSgpOworCQllbmFibGVf
a2VybmVsX2FsdGl2ZWMoKTsKKwl9IGVsc2UgaWYgKCFjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9G
UFVfVU5BVkFJTEFCTEUpKSB7CisJCXByZWVtcHRfZGlzYWJsZSgpOworCQllbmFibGVfa2VybmVs
X2ZwKCk7CisJfQorI2VuZGlmCiAKIAl2LT5zcl9leGl0X3RpbWUgPSBkYy0+ZGNuX3NvYy0+c3Jf
ZXhpdF90aW1lOwogCXYtPnNyX2VudGVyX3BsdXNfZXhpdF90aW1lID0gZGMtPmRjbl9zb2MtPnNy
X2VudGVyX3BsdXNfZXhpdF90aW1lOwpAQCAtMTI3NSw3ICsxMzE1LDIwIEBAIGJvb2wgZGNuX3Zh
bGlkYXRlX2JhbmR3aWR0aCgKIAlid19saW1pdCA9IGRjLT5kY25fc29jLT5wZXJjZW50X2Rpc3Bf
YndfbGltaXQgKiB2LT5mYWJyaWNfYW5kX2RyYW1fYmFuZHdpZHRoX3ZtYXgwcDk7CiAJYndfbGlt
aXRfcGFzcyA9ICh2LT50b3RhbF9kYXRhX3JlYWRfYmFuZHdpZHRoIC8gMTAwMC4wKSA8IGJ3X2xp
bWl0OwogCisjaWYgZGVmaW5lZChDT05GSUdfWDg2XzY0KQogCWtlcm5lbF9mcHVfZW5kKCk7Cisj
ZWxpZiBkZWZpbmVkKENPTkZJR19QUEMzMikgfHwgZGVmaW5lZChDT05GSUdfUFBDNjQpCisJaWYg
KGNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX1ZTWF9DT01QKSkgeworCQlkaXNhYmxlX2tlcm5lbF92
c3goKTsKKwkJcHJlZW1wdF9lbmFibGUoKTsKKwl9IGVsc2UgaWYgKGNwdV9oYXNfZmVhdHVyZShD
UFVfRlRSX0FMVElWRUNfQ09NUCkpIHsKKwkJZGlzYWJsZV9rZXJuZWxfYWx0aXZlYygpOworCQlw
cmVlbXB0X2VuYWJsZSgpOworCX0gZWxzZSBpZiAoIWNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX0ZQ
VV9VTkFWQUlMQUJMRSkpIHsKKwkJZGlzYWJsZV9rZXJuZWxfZnAoKTsKKwkJcHJlZW1wdF9lbmFi
bGUoKTsKKwl9CisjZW5kaWYKIAogCVBFUkZPUk1BTkNFX1RSQUNFX0VORCgpOwogCUJXX1ZBTF9U
UkFDRV9GSU5JU0goKTsKQEAgLTE0NDMsNyArMTQ5NiwyMCBAQCB2b2lkIGRjbl9id191cGRhdGVf
ZnJvbV9wcGxpYihzdHJ1Y3QgZGMgKmRjKQogCXJlcyA9IGRtX3BwX2dldF9jbG9ja19sZXZlbHNf
YnlfdHlwZV93aXRoX3ZvbHRhZ2UoCiAJCQljdHgsIERNX1BQX0NMT0NLX1RZUEVfRkNMSywgJmZj
bGtzKTsKIAorI2lmIGRlZmluZWQoQ09ORklHX1g4Nl82NCkKIAlrZXJuZWxfZnB1X2JlZ2luKCk7
CisjZWxpZiBkZWZpbmVkKENPTkZJR19QUEMzMikgfHwgZGVmaW5lZChDT05GSUdfUFBDNjQpCisJ
aWYgKGNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX1ZTWF9DT01QKSkgeworCQlwcmVlbXB0X2Rpc2Fi
bGUoKTsKKwkJZW5hYmxlX2tlcm5lbF92c3goKTsKKwl9IGVsc2UgaWYgKGNwdV9oYXNfZmVhdHVy
ZShDUFVfRlRSX0FMVElWRUNfQ09NUCkpIHsKKwkJcHJlZW1wdF9kaXNhYmxlKCk7CisJCWVuYWJs
ZV9rZXJuZWxfYWx0aXZlYygpOworCX0gZWxzZSBpZiAoIWNwdV9oYXNfZmVhdHVyZShDUFVfRlRS
X0ZQVV9VTkFWQUlMQUJMRSkpIHsKKwkJcHJlZW1wdF9kaXNhYmxlKCk7CisJCWVuYWJsZV9rZXJu
ZWxfZnAoKTsKKwl9CisjZW5kaWYKIAogCWlmIChyZXMpCiAJCXJlcyA9IHZlcmlmeV9jbG9ja192
YWx1ZXMoJmZjbGtzKTsKQEAgLTE0NjMsMTIgKzE1MjksMzggQEAgdm9pZCBkY25fYndfdXBkYXRl
X2Zyb21fcHBsaWIoc3RydWN0IGRjICpkYykKIAl9IGVsc2UKIAkJQlJFQUtfVE9fREVCVUdHRVIo
KTsKIAorI2lmIGRlZmluZWQoQ09ORklHX1g4Nl82NCkKIAlrZXJuZWxfZnB1X2VuZCgpOworI2Vs
aWYgZGVmaW5lZChDT05GSUdfUFBDMzIpIHx8IGRlZmluZWQoQ09ORklHX1BQQzY0KQorCWlmIChj
cHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9WU1hfQ09NUCkpIHsKKwkJZGlzYWJsZV9rZXJuZWxfdnN4
KCk7CisJCXByZWVtcHRfZW5hYmxlKCk7CisJfSBlbHNlIGlmIChjcHVfaGFzX2ZlYXR1cmUoQ1BV
X0ZUUl9BTFRJVkVDX0NPTVApKSB7CisJCWRpc2FibGVfa2VybmVsX2FsdGl2ZWMoKTsKKwkJcHJl
ZW1wdF9lbmFibGUoKTsKKwl9IGVsc2UgaWYgKCFjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9GUFVf
VU5BVkFJTEFCTEUpKSB7CisJCWRpc2FibGVfa2VybmVsX2ZwKCk7CisJCXByZWVtcHRfZW5hYmxl
KCk7CisJfQorI2VuZGlmCiAKIAlyZXMgPSBkbV9wcF9nZXRfY2xvY2tfbGV2ZWxzX2J5X3R5cGVf
d2l0aF92b2x0YWdlKAogCQkJY3R4LCBETV9QUF9DTE9DS19UWVBFX0RDRkNMSywgJmRjZmNsa3Mp
OwogCisjaWYgZGVmaW5lZChDT05GSUdfWDg2XzY0KQogCWtlcm5lbF9mcHVfYmVnaW4oKTsKKyNl
bGlmIGRlZmluZWQoQ09ORklHX1BQQzMyKSB8fCBkZWZpbmVkKENPTkZJR19QUEM2NCkKKwlpZiAo
Y3B1X2hhc19mZWF0dXJlKENQVV9GVFJfVlNYX0NPTVApKSB7CisJCXByZWVtcHRfZGlzYWJsZSgp
OworCQllbmFibGVfa2VybmVsX3ZzeCgpOworCX0gZWxzZSBpZiAoY3B1X2hhc19mZWF0dXJlKENQ
VV9GVFJfQUxUSVZFQ19DT01QKSkgeworCQlwcmVlbXB0X2Rpc2FibGUoKTsKKwkJZW5hYmxlX2tl
cm5lbF9hbHRpdmVjKCk7CisJfSBlbHNlIGlmICghY3B1X2hhc19mZWF0dXJlKENQVV9GVFJfRlBV
X1VOQVZBSUxBQkxFKSkgeworCQlwcmVlbXB0X2Rpc2FibGUoKTsKKwkJZW5hYmxlX2tlcm5lbF9m
cCgpOworCX0KKyNlbmRpZgogCiAJaWYgKHJlcykKIAkJcmVzID0gdmVyaWZ5X2Nsb2NrX3ZhbHVl
cygmZGNmY2xrcyk7CkBAIC0xNDgxLDcgKzE1NzMsMjAgQEAgdm9pZCBkY25fYndfdXBkYXRlX2Zy
b21fcHBsaWIoc3RydWN0IGRjICpkYykKIAl9IGVsc2UKIAkJQlJFQUtfVE9fREVCVUdHRVIoKTsK
IAorI2lmIGRlZmluZWQoQ09ORklHX1g4Nl82NCkKIAlrZXJuZWxfZnB1X2VuZCgpOworI2VsaWYg
ZGVmaW5lZChDT05GSUdfUFBDMzIpIHx8IGRlZmluZWQoQ09ORklHX1BQQzY0KQorCWlmIChjcHVf
aGFzX2ZlYXR1cmUoQ1BVX0ZUUl9WU1hfQ09NUCkpIHsKKwkJZGlzYWJsZV9rZXJuZWxfdnN4KCk7
CisJCXByZWVtcHRfZW5hYmxlKCk7CisJfSBlbHNlIGlmIChjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZU
Ul9BTFRJVkVDX0NPTVApKSB7CisJCWRpc2FibGVfa2VybmVsX2FsdGl2ZWMoKTsKKwkJcHJlZW1w
dF9lbmFibGUoKTsKKwl9IGVsc2UgaWYgKCFjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9GUFVfVU5B
VkFJTEFCTEUpKSB7CisJCWRpc2FibGVfa2VybmVsX2ZwKCk7CisJCXByZWVtcHRfZW5hYmxlKCk7
CisJfQorI2VuZGlmCiB9CiAKIHZvaWQgZGNuX2J3X25vdGlmeV9wcGxpYl9vZl93bV9yYW5nZXMo
c3RydWN0IGRjICpkYykKQEAgLTE0OTYsMTEgKzE2MDEsMzcgQEAgdm9pZCBkY25fYndfbm90aWZ5
X3BwbGliX29mX3dtX3JhbmdlcyhzdHJ1Y3QgZGMgKmRjKQogCWlmICghcHAgfHwgIXBwLT5zZXRf
d21fcmFuZ2VzKQogCQlyZXR1cm47CiAKKyNpZiBkZWZpbmVkKENPTkZJR19YODZfNjQpCiAJa2Vy
bmVsX2ZwdV9iZWdpbigpOworI2VsaWYgZGVmaW5lZChDT05GSUdfUFBDMzIpIHx8IGRlZmluZWQo
Q09ORklHX1BQQzY0KQorCWlmIChjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9WU1hfQ09NUCkpIHsK
KwkJcHJlZW1wdF9kaXNhYmxlKCk7CisJCWVuYWJsZV9rZXJuZWxfdnN4KCk7CisJfSBlbHNlIGlm
IChjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9BTFRJVkVDX0NPTVApKSB7CisJCXByZWVtcHRfZGlz
YWJsZSgpOworCQllbmFibGVfa2VybmVsX2FsdGl2ZWMoKTsKKwl9IGVsc2UgaWYgKCFjcHVfaGFz
X2ZlYXR1cmUoQ1BVX0ZUUl9GUFVfVU5BVkFJTEFCTEUpKSB7CisJCXByZWVtcHRfZGlzYWJsZSgp
OworCQllbmFibGVfa2VybmVsX2ZwKCk7CisJfQorI2VuZGlmCiAJbWluX2ZjbGtfa2h6ID0gZGMt
PmRjbl9zb2MtPmZhYnJpY19hbmRfZHJhbV9iYW5kd2lkdGhfdm1pbjBwNjUgKiAxMDAwMDAwIC8g
MzI7CiAJbWluX2RjZmNsa19raHogPSBkYy0+ZGNuX3NvYy0+ZGNmY2xrdl9taW4wcDY1ICogMTAw
MDsKIAlzb2NjbGtfa2h6ID0gZGMtPmRjbl9zb2MtPnNvY2NsayAqIDEwMDA7CisjaWYgZGVmaW5l
ZChDT05GSUdfWDg2XzY0KQogCWtlcm5lbF9mcHVfZW5kKCk7CisjZWxpZiBkZWZpbmVkKENPTkZJ
R19QUEMzMikgfHwgZGVmaW5lZChDT05GSUdfUFBDNjQpCisJaWYgKGNwdV9oYXNfZmVhdHVyZShD
UFVfRlRSX1ZTWF9DT01QKSkgeworCQlkaXNhYmxlX2tlcm5lbF92c3goKTsKKwkJcHJlZW1wdF9l
bmFibGUoKTsKKwl9IGVsc2UgaWYgKGNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX0FMVElWRUNfQ09N
UCkpIHsKKwkJZGlzYWJsZV9rZXJuZWxfYWx0aXZlYygpOworCQlwcmVlbXB0X2VuYWJsZSgpOwor
CX0gZWxzZSBpZiAoIWNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX0ZQVV9VTkFWQUlMQUJMRSkpIHsK
KwkJZGlzYWJsZV9rZXJuZWxfZnAoKTsKKwkJcHJlZW1wdF9lbmFibGUoKTsKKwl9CisjZW5kaWYK
IAogCS8qIE5vdyBub3RpZnkgUFBMaWIvU01VIGFib3V0IHdoaWNoIFdhdGVybWFya3Mgc2V0cyB0
aGV5IHNob3VsZCBzZWxlY3QKIAkgKiBkZXBlbmRpbmcgb24gRFBNIHN0YXRlIHRoZXkgYXJlIGlu
LiBBbmQgdXBkYXRlIEJXIE1HUiBHRlggRW5naW5lIGFuZApAQCAtMTU1MSw3ICsxNjgyLDIwIEBA
IHZvaWQgZGNuX2J3X25vdGlmeV9wcGxpYl9vZl93bV9yYW5nZXMoc3RydWN0IGRjICpkYykKIAog
dm9pZCBkY25fYndfc3luY19jYWxjc19hbmRfZG1sKHN0cnVjdCBkYyAqZGMpCiB7CisjaWYgZGVm
aW5lZChDT05GSUdfWDg2XzY0KQogCWtlcm5lbF9mcHVfYmVnaW4oKTsKKyNlbGlmIGRlZmluZWQo
Q09ORklHX1BQQzMyKSB8fCBkZWZpbmVkKENPTkZJR19QUEM2NCkKKwlpZiAoY3B1X2hhc19mZWF0
dXJlKENQVV9GVFJfVlNYX0NPTVApKSB7CisJCXByZWVtcHRfZGlzYWJsZSgpOworCQllbmFibGVf
a2VybmVsX3ZzeCgpOworCX0gZWxzZSBpZiAoY3B1X2hhc19mZWF0dXJlKENQVV9GVFJfQUxUSVZF
Q19DT01QKSkgeworCQlwcmVlbXB0X2Rpc2FibGUoKTsKKwkJZW5hYmxlX2tlcm5lbF9hbHRpdmVj
KCk7CisJfSBlbHNlIGlmICghY3B1X2hhc19mZWF0dXJlKENQVV9GVFJfRlBVX1VOQVZBSUxBQkxF
KSkgeworCQlwcmVlbXB0X2Rpc2FibGUoKTsKKwkJZW5hYmxlX2tlcm5lbF9mcCgpOworCX0KKyNl
bmRpZgogCURDX0xPR19CQU5EV0lEVEhfQ0FMQ1MoInNyX2V4aXRfdGltZTogJWYgbnNcbiIKIAkJ
CSJzcl9lbnRlcl9wbHVzX2V4aXRfdGltZTogJWYgbnNcbiIKIAkJCSJ1cmdlbnRfbGF0ZW5jeTog
JWYgbnNcbiIKQEAgLTE3NDAsNSArMTg4NCwxOCBAQCB2b2lkIGRjbl9id19zeW5jX2NhbGNzX2Fu
ZF9kbWwoc3RydWN0IGRjICpkYykKIAlkYy0+ZG1sLmlwLmJ1Z19mb3JjaW5nX0xDX3JlcV9zYW1l
X3NpemVfZml4ZWQgPQogCQlkYy0+ZGNuX2lwLT5idWdfZm9yY2luZ19sdW1hX2FuZF9jaHJvbWFf
cmVxdWVzdF90b19zYW1lX3NpemVfZml4ZWQgPT0gZGNuX2J3X3llczsKIAlkYy0+ZG1sLmlwLmRj
ZmNsa19jc3RhdGVfbGF0ZW5jeSA9IGRjLT5kY25faXAtPmRjZmNsa19jc3RhdGVfbGF0ZW5jeTsK
KyNpZiBkZWZpbmVkKENPTkZJR19YODZfNjQpCiAJa2VybmVsX2ZwdV9lbmQoKTsKKyNlbGlmIGRl
ZmluZWQoQ09ORklHX1BQQzMyKSB8fCBkZWZpbmVkKENPTkZJR19QUEM2NCkKKwlpZiAoY3B1X2hh
c19mZWF0dXJlKENQVV9GVFJfVlNYX0NPTVApKSB7CisJCWRpc2FibGVfa2VybmVsX3ZzeCgpOwor
CQlwcmVlbXB0X2VuYWJsZSgpOworCX0gZWxzZSBpZiAoY3B1X2hhc19mZWF0dXJlKENQVV9GVFJf
QUxUSVZFQ19DT01QKSkgeworCQlkaXNhYmxlX2tlcm5lbF9hbHRpdmVjKCk7CisJCXByZWVtcHRf
ZW5hYmxlKCk7CisJfSBlbHNlIGlmICghY3B1X2hhc19mZWF0dXJlKENQVV9GVFJfRlBVX1VOQVZB
SUxBQkxFKSkgeworCQlkaXNhYmxlX2tlcm5lbF9mcCgpOworCQlwcmVlbXB0X2VuYWJsZSgpOwor
CX0KKyNlbmRpZgogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2Rj
L2RjbjIwL01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL01h
a2VmaWxlCmluZGV4IDYzZjNiZGRiYTdkYS4uYTBlNDc4MWQwNDI0IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL01ha2VmaWxlCkBAIC0xMCw3ICsxMCw5IEBAIGlm
ZGVmIENPTkZJR19EUk1fQU1EX0RDX0RTQ19TVVBQT1JUCiBEQ04yMCArPSBkY24yMF9kc2Mubwog
ZW5kaWYKIAoraWZkZWYgQ09ORklHX1g4Nl82NAogQ0ZMQUdTXyQoQU1EREFMUEFUSCkvZGMvZGNu
MjAvZGNuMjBfcmVzb3VyY2UubyA6PSAtbWhhcmQtZmxvYXQgLW1zc2UKK2VuZGlmCiAKIGlmZGVm
IENPTkZJR19DQ19JU19HQ0MKIGlmZXEgKCQoY2FsbCBjYy1pZnZlcnNpb24sIC1sdCwgMDcwMSwg
eSksIHkpCkBAIC0xOCw2ICsyMCw3IEBAIElTX09MRF9HQ0MgPSAxCiBlbmRpZgogZW5kaWYKIAor
aWZkZWYgQ09ORklHX1g4Nl82NAogaWZkZWYgSVNfT0xEX0dDQwogIyBTdGFjayBhbGlnbm1lbnQg
bWlzbWF0Y2gsIHByb2NlZWQgd2l0aCBjYXV0aW9uLgogIyBHQ0MgPCA3LjEgY2Fubm90IGNvbXBp
bGUgY29kZSB1c2luZyBgZG91YmxlYCBhbmQgLW1wcmVmZXJyZWQtc3RhY2stYm91bmRhcnk9MwpA
QCAtMjYsNiArMjksNyBAQCBDRkxBR1NfJChBTUREQUxQQVRIKS9kYy9kY24yMC9kY24yMF9yZXNv
dXJjZS5vICs9IC1tcHJlZmVycmVkLXN0YWNrLWJvdW5kYXJ5PTQKIGVsc2UKIENGTEFHU18kKEFN
RERBTFBBVEgpL2RjL2RjbjIwL2RjbjIwX3Jlc291cmNlLm8gKz0gLW1zc2UyCiBlbmRpZgorZW5k
aWYKIAogQU1EX0RBTF9EQ04yMCA9ICQoYWRkcHJlZml4ICQoQU1EREFMUEFUSCkvZGMvZGNuMjAv
LCQoRENOMjApKQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMv
ZGNuMjAvZGNuMjBfcmVzb3VyY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9k
Y24yMC9kY24yMF9yZXNvdXJjZS5jCmluZGV4IGJiZDFjOTg1NjRiZS4uYTZmMzBjZGZjOTA1IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfcmVz
b3VyY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBf
cmVzb3VyY2UuYwpAQCAtMSw1ICsxLDYgQEAKIC8qCiAqIENvcHlyaWdodCAyMDE2IEFkdmFuY2Vk
IE1pY3JvIERldmljZXMsIEluYy4KKyAqIENvcHlyaWdodCAyMDE5IFJhcHRvciBFbmdpbmVlcmlu
ZywgTExDCiAgKgogICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFy
Z2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBh
bmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCkBAIC0z
MTczLDcgKzMxNzQsMjAgQEAgdm9pZCBkY24yMF91cGRhdGVfYm91bmRpbmdfYm94KHN0cnVjdCBk
YyAqZGMsIHN0cnVjdCBfdmNzX2RwaV9zb2NfYm91bmRpbmdfYm94X3MKIAogdm9pZCBkY24yMF9w
YXRjaF9ib3VuZGluZ19ib3goc3RydWN0IGRjICpkYywgc3RydWN0IF92Y3NfZHBpX3NvY19ib3Vu
ZGluZ19ib3hfc3QgKmJiKQogeworI2lmIGRlZmluZWQoQ09ORklHX1g4Nl82NCkKIAlrZXJuZWxf
ZnB1X2JlZ2luKCk7CisjZWxpZiBkZWZpbmVkKENPTkZJR19QUEMzMikgfHwgZGVmaW5lZChDT05G
SUdfUFBDNjQpCisJCWlmIChjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9WU1hfQ09NUCkpIHsKKwkJ
CXByZWVtcHRfZGlzYWJsZSgpOworCQkJZW5hYmxlX2tlcm5lbF92c3goKTsKKwkJfSBlbHNlIGlm
IChjcHVfaGFzX2ZlYXR1cmUoQ1BVX0ZUUl9BTFRJVkVDX0NPTVApKSB7CisJCQlwcmVlbXB0X2Rp
c2FibGUoKTsKKwkJCWVuYWJsZV9rZXJuZWxfYWx0aXZlYygpOworCQl9IGVsc2UgaWYgKCFjcHVf
aGFzX2ZlYXR1cmUoQ1BVX0ZUUl9GUFVfVU5BVkFJTEFCTEUpKSB7CisJCQlwcmVlbXB0X2Rpc2Fi
bGUoKTsKKwkJCWVuYWJsZV9rZXJuZWxfZnAoKTsKKwkJfQorI2VuZGlmCiAJaWYgKChpbnQpKGJi
LT5zcl9leGl0X3RpbWVfdXMgKiAxMDAwKSAhPSBkYy0+YmJfb3ZlcnJpZGVzLnNyX2V4aXRfdGlt
ZV9ucwogCQkJJiYgZGMtPmJiX292ZXJyaWRlcy5zcl9leGl0X3RpbWVfbnMpIHsKIAkJYmItPnNy
X2V4aXRfdGltZV91cyA9IGRjLT5iYl9vdmVycmlkZXMuc3JfZXhpdF90aW1lX25zIC8gMTAwMC4w
OwpAQCAtMzE5Nyw3ICszMjExLDIwIEBAIHZvaWQgZGNuMjBfcGF0Y2hfYm91bmRpbmdfYm94KHN0
cnVjdCBkYyAqZGMsIHN0cnVjdCBfdmNzX2RwaV9zb2NfYm91bmRpbmdfYm94X3N0CiAJCWJiLT5k
cmFtX2Nsb2NrX2NoYW5nZV9sYXRlbmN5X3VzID0KIAkJCQlkYy0+YmJfb3ZlcnJpZGVzLmRyYW1f
Y2xvY2tfY2hhbmdlX2xhdGVuY3lfbnMgLyAxMDAwLjA7CiAJfQorI2lmIGRlZmluZWQoQ09ORklH
X1g4Nl82NCkKIAlrZXJuZWxfZnB1X2VuZCgpOworI2VsaWYgZGVmaW5lZChDT05GSUdfUFBDMzIp
IHx8IGRlZmluZWQoQ09ORklHX1BQQzY0KQorCQlpZiAoY3B1X2hhc19mZWF0dXJlKENQVV9GVFJf
VlNYX0NPTVApKSB7CisJCQlkaXNhYmxlX2tlcm5lbF92c3goKTsKKwkJCXByZWVtcHRfZW5hYmxl
KCk7CisJCX0gZWxzZSBpZiAoY3B1X2hhc19mZWF0dXJlKENQVV9GVFJfQUxUSVZFQ19DT01QKSkg
eworCQkJZGlzYWJsZV9rZXJuZWxfYWx0aXZlYygpOworCQkJcHJlZW1wdF9lbmFibGUoKTsKKwkJ
fSBlbHNlIGlmICghY3B1X2hhc19mZWF0dXJlKENQVV9GVFJfRlBVX1VOQVZBSUxBQkxFKSkgewor
CQkJZGlzYWJsZV9rZXJuZWxfZnAoKTsKKwkJCXByZWVtcHRfZW5hYmxlKCk7CisJCX0KKyNlbmRp
ZgogfQogCiBzdGF0aWMgc3RydWN0IF92Y3NfZHBpX3NvY19ib3VuZGluZ19ib3hfc3QgKmdldF9h
c2ljX3Jldl9zb2NfYmIoCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkv
ZGMvZGNuMjEvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjEv
TWFrZWZpbGUKaW5kZXggMTQxMTNjY2Y0OThkLi5jZTU4OWVmZmMzMzggMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMS9NYWtlZmlsZQorKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjEvTWFrZWZpbGUKQEAgLTMsNyArMyw5IEBACiAK
IERDTjIxID0gZGNuMjFfaHVicC5vIGRjbjIxX2h1YmJ1Yi5vIGRjbjIxX3Jlc291cmNlLm8gZGNu
MjFfaHdzZXEubyBkY24yMV9saW5rX2VuY29kZXIubwogCitpZmRlZiBDT05GSUdfWDg2XzY0CiBD
RkxBR1NfJChBTUREQUxQQVRIKS9kYy9kY24yMS9kY24yMV9yZXNvdXJjZS5vIDo9IC1taGFyZC1m
bG9hdCAtbXNzZQorZW5kaWYKIAogaWZkZWYgQ09ORklHX0NDX0lTX0dDQwogaWZlcSAoJChjYWxs
IGNjLWlmdmVyc2lvbiwgLWx0LCAwNzAxLCB5KSwgeSkKQEAgLTExLDYgKzEzLDcgQEAgSVNfT0xE
X0dDQyA9IDEKIGVuZGlmCiBlbmRpZgogCitpZmRlZiBDT05GSUdfWDg2XzY0CiBpZmRlZiBJU19P
TERfR0NDCiAjIFN0YWNrIGFsaWdubWVudCBtaXNtYXRjaCwgcHJvY2VlZCB3aXRoIGNhdXRpb24u
CiAjIEdDQyA8IDcuMSBjYW5ub3QgY29tcGlsZSBjb2RlIHVzaW5nIGBkb3VibGVgIGFuZCAtbXBy
ZWZlcnJlZC1zdGFjay1ib3VuZGFyeT0zCkBAIC0xOSw2ICsyMiw3IEBAIENGTEFHU18kKEFNRERB
TFBBVEgpL2RjL2RjbjIxL2RjbjIxX3Jlc291cmNlLm8gKz0gLW1wcmVmZXJyZWQtc3RhY2stYm91
bmRhcnk9NAogZWxzZQogQ0ZMQUdTXyQoQU1EREFMUEFUSCkvZGMvZGNuMjEvZGNuMjFfcmVzb3Vy
Y2UubyArPSAtbXNzZTIKIGVuZGlmCitlbmRpZgogCiBBTURfREFMX0RDTjIxID0gJChhZGRwcmVm
aXggJChBTUREQUxQQVRIKS9kYy9kY24yMS8sJChEQ04yMSkpCiAKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMS9kY24yMV9yZXNvdXJjZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIxL2RjbjIxX3Jlc291cmNlLmMKaW5kZXggNDU5
YmQ5YTVjYWVkLi5mYjgzMjNjNDM3YjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
ZGlzcGxheS9kYy9kY24yMS9kY24yMV9yZXNvdXJjZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvZGlzcGxheS9kYy9kY24yMS9kY24yMV9yZXNvdXJjZS5jCkBAIC0xLDUgKzEsNiBAQAogLyoK
ICogQ29weXJpZ2h0IDIwMTggQWR2YW5jZWQgTWljcm8gRGV2aWNlcywgSW5jLgorICogQ29weXJp
Z2h0IDIwMTkgUmFwdG9yIEVuZ2luZWVyaW5nLCBMTEMKICAqCiAgKiBQZXJtaXNzaW9uIGlzIGhl
cmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQog
ICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmls
ZXMgKHRoZSAiU29mdHdhcmUiKSwKQEAgLTEwMTcsNyArMTAxOCwyMCBAQCBzdGF0aWMgdm9pZCBj
YWxjdWxhdGVfd21fc2V0X2Zvcl92bGV2ZWwoCiAKIHN0YXRpYyB2b2lkIHBhdGNoX2JvdW5kaW5n
X2JveChzdHJ1Y3QgZGMgKmRjLCBzdHJ1Y3QgX3Zjc19kcGlfc29jX2JvdW5kaW5nX2JveF9zdCAq
YmIpCiB7CisjaWYgZGVmaW5lZChDT05GSUdfWDg2XzY0KQogCWtlcm5lbF9mcHVfYmVnaW4oKTsK
KyNlbGlmIGRlZmluZWQoQ09ORklHX1BQQzMyKSB8fCBkZWZpbmVkKENPTkZJR19QUEM2NCkKKwkJ
aWYgKGNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX1ZTWF9DT01QKSkgeworCQkJcHJlZW1wdF9kaXNh
YmxlKCk7CisJCQllbmFibGVfa2VybmVsX3ZzeCgpOworCQl9IGVsc2UgaWYgKGNwdV9oYXNfZmVh
dHVyZShDUFVfRlRSX0FMVElWRUNfQ09NUCkpIHsKKwkJCXByZWVtcHRfZGlzYWJsZSgpOworCQkJ
ZW5hYmxlX2tlcm5lbF9hbHRpdmVjKCk7CisJCX0gZWxzZSBpZiAoIWNwdV9oYXNfZmVhdHVyZShD
UFVfRlRSX0ZQVV9VTkFWQUlMQUJMRSkpIHsKKwkJCXByZWVtcHRfZGlzYWJsZSgpOworCQkJZW5h
YmxlX2tlcm5lbF9mcCgpOworCQl9CisjZW5kaWYKIAlpZiAoZGMtPmJiX292ZXJyaWRlcy5zcl9l
eGl0X3RpbWVfbnMpIHsKIAkJYmItPnNyX2V4aXRfdGltZV91cyA9IGRjLT5iYl9vdmVycmlkZXMu
c3JfZXhpdF90aW1lX25zIC8gMTAwMC4wOwogCX0KQEAgLTEwMzUsNyArMTA0OSwyMCBAQCBzdGF0
aWMgdm9pZCBwYXRjaF9ib3VuZGluZ19ib3goc3RydWN0IGRjICpkYywgc3RydWN0IF92Y3NfZHBp
X3NvY19ib3VuZGluZ19ib3hfcwogCQliYi0+ZHJhbV9jbG9ja19jaGFuZ2VfbGF0ZW5jeV91cyA9
CiAJCQkJZGMtPmJiX292ZXJyaWRlcy5kcmFtX2Nsb2NrX2NoYW5nZV9sYXRlbmN5X25zIC8gMTAw
MC4wOwogCX0KKyNpZiBkZWZpbmVkKENPTkZJR19YODZfNjQpCiAJa2VybmVsX2ZwdV9lbmQoKTsK
KyNlbGlmIGRlZmluZWQoQ09ORklHX1BQQzMyKSB8fCBkZWZpbmVkKENPTkZJR19QUEM2NCkKKwkJ
aWYgKGNwdV9oYXNfZmVhdHVyZShDUFVfRlRSX1ZTWF9DT01QKSkgeworCQkJZGlzYWJsZV9rZXJu
ZWxfdnN4KCk7CisJCQlwcmVlbXB0X2VuYWJsZSgpOworCQl9IGVsc2UgaWYgKGNwdV9oYXNfZmVh
dHVyZShDUFVfRlRSX0FMVElWRUNfQ09NUCkpIHsKKwkJCWRpc2FibGVfa2VybmVsX2FsdGl2ZWMo
KTsKKwkJCXByZWVtcHRfZW5hYmxlKCk7CisJCX0gZWxzZSBpZiAoIWNwdV9oYXNfZmVhdHVyZShD
UFVfRlRSX0ZQVV9VTkFWQUlMQUJMRSkpIHsKKwkJCWRpc2FibGVfa2VybmVsX2ZwKCk7CisJCQlw
cmVlbXB0X2VuYWJsZSgpOworCQl9CisjZW5kaWYKIH0KIAogdm9pZCBkY24yMV9jYWxjdWxhdGVf
d20oCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZG1sL01ha2Vm
aWxlIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RtbC9NYWtlZmlsZQppbmRleCA4
ZGYyNTE2MjZlMjIuLjE4NjkzNGU3ZTAzMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9kaXNwbGF5L2RjL2RtbC9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvZGMvZG1sL01ha2VmaWxlCkBAIC0xLDUgKzEsNiBAQAogIwogIyBDb3B5cmlnaHQgMjAxNyBB
ZHZhbmNlZCBNaWNybyBEZXZpY2VzLCBJbmMuCisjIENvcHlyaWdodCAyMDE5IFJhcHRvciBFbmdp
bmVlcmluZywgTExDCiAjCiAjIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2Yg
Y2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCiAjIGNvcHkgb2YgdGhpcyBzb2Z0d2Fy
ZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCkBA
IC0yNCw3ICsyNSw5IEBACiAjIEl0IHByb3ZpZGVzIHRoZSBnZW5lcmFsIGJhc2ljIHNlcnZpY2Vz
IHJlcXVpcmVkIGJ5IG90aGVyIERBTAogIyBzdWJjb21wb25lbnRzLgogCitpZmRlZiBDT05GSUdf
WDg2XzY0CiBkbWxfY2NmbGFncyA6PSAtbWhhcmQtZmxvYXQgLW1zc2UKK2VuZGlmCiAKIGlmZGVm
IENPTkZJR19DQ19JU19HQ0MKIGlmZXEgKCQoY2FsbCBjYy1pZnZlcnNpb24sIC1sdCwgMDcwMSwg
eSksIHkpCkBAIC0zMiw2ICszNSw3IEBAIElTX09MRF9HQ0MgPSAxCiBlbmRpZgogZW5kaWYKIAor
aWZkZWYgQ09ORklHX1g4Nl82NAogaWZkZWYgSVNfT0xEX0dDQwogIyBTdGFjayBhbGlnbm1lbnQg
bWlzbWF0Y2gsIHByb2NlZWQgd2l0aCBjYXV0aW9uLgogIyBHQ0MgPCA3LjEgY2Fubm90IGNvbXBp
bGUgY29kZSB1c2luZyBgZG91YmxlYCBhbmQgLW1wcmVmZXJyZWQtc3RhY2stYm91bmRhcnk9MwpA
QCAtNDAsNiArNDQsNyBAQCBkbWxfY2NmbGFncyArPSAtbXByZWZlcnJlZC1zdGFjay1ib3VuZGFy
eT00CiBlbHNlCiBkbWxfY2NmbGFncyArPSAtbXNzZTIKIGVuZGlmCitlbmRpZgogCiBDRkxBR1Nf
JChBTUREQUxQQVRIKS9kYy9kbWwvZGlzcGxheV9tb2RlX2xpYi5vIDo9ICQoZG1sX2NjZmxhZ3Mp
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kc2MvTWFrZWZp
bGUgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZHNjL01ha2VmaWxlCmluZGV4IDk3
MDczNzIxN2U1My4uYWY3Yjg4ZjlhZDRkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2Rpc3BsYXkvZGMvZHNjL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxh
eS9kYy9kc2MvTWFrZWZpbGUKQEAgLTEsNyArMSw5IEBACiAjCiAjIE1ha2VmaWxlIGZvciB0aGUg
J2RzYycgc3ViLWNvbXBvbmVudCBvZiBEQUwuCiAKK2lmZGVmIENPTkZJR19YODZfNjQKIGRzY19j
Y2ZsYWdzIDo9IC1taGFyZC1mbG9hdCAtbXNzZQorZW5kaWYKIAogaWZkZWYgQ09ORklHX0NDX0lT
X0dDQwogaWZlcSAoJChjYWxsIGNjLWlmdmVyc2lvbiwgLWx0LCAwNzAxLCB5KSwgeSkKQEAgLTks
NiArMTEsNyBAQCBJU19PTERfR0NDID0gMQogZW5kaWYKIGVuZGlmCiAKK2lmZGVmIENPTkZJR19Y
ODZfNjQKIGlmZGVmIElTX09MRF9HQ0MKICMgU3RhY2sgYWxpZ25tZW50IG1pc21hdGNoLCBwcm9j
ZWVkIHdpdGggY2F1dGlvbi4KICMgR0NDIDwgNy4xIGNhbm5vdCBjb21waWxlIGNvZGUgdXNpbmcg
YGRvdWJsZWAgYW5kIC1tcHJlZmVycmVkLXN0YWNrLWJvdW5kYXJ5PTMKQEAgLTE3LDYgKzIwLDcg
QEAgZHNjX2NjZmxhZ3MgKz0gLW1wcmVmZXJyZWQtc3RhY2stYm91bmRhcnk9NAogZWxzZQogZHNj
X2NjZmxhZ3MgKz0gLW1zc2UyCiBlbmRpZgorZW5kaWYKIAogQ0ZMQUdTXyQoQU1EREFMUEFUSCkv
ZGMvZHNjL3JjX2NhbGMubyA6PSAkKGRzY19jY2ZsYWdzKQogQ0ZMQUdTXyQoQU1EREFMUEFUSCkv
ZGMvZHNjL3JjX2NhbGNfZHBpLm8gOj0gJChkc2NfY2NmbGFncykKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9vc190eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9kaXNwbGF5L2RjL29zX3R5cGVzLmgKaW5kZXggMzBlYzgwYWM2ZmM4Li44MzRlNjliNDA5ZDEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9vc190eXBlcy5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9vc190eXBlcy5oCkBAIC0xLDUgKzEs
NiBAQAogLyoKICAqIENvcHlyaWdodCAyMDEyLTE2IEFkdmFuY2VkIE1pY3JvIERldmljZXMsIElu
Yy4KKyAqIENvcHlyaWdodCAyMDE5IFJhcHRvciBFbmdpbmVlcmluZywgTExDCiAgKgogICogUGVy
bWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24g
b2J0YWluaW5nIGEKICAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1
bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCkBAIC00OSw3ICs1MCwxMiBAQAogI2Rl
ZmluZSBkbV9lcnJvcihmbXQsIC4uLikgRFJNX0VSUk9SKGZtdCwgIyNfX1ZBX0FSR1NfXykKIAog
I2lmIGRlZmluZWQoQ09ORklHX0RSTV9BTURfRENfRENOMV8wKQorI2lmIGRlZmluZWQoQ09ORklH
X1g4Nl82NCkKICNpbmNsdWRlIDxhc20vZnB1L2FwaS5oPgorI2VsaWYgZGVmaW5lZChDT05GSUdf
UFBDMzIpIHx8IGRlZmluZWQoQ09ORklHX1BQQzY0KQorI2luY2x1ZGUgPGFzbS9zd2l0Y2hfdG8u
aD4KKyNpbmNsdWRlIDxhc20vY3B1dGFibGUuaD4KKyNlbmRpZgogI2VuZGlmCiAKIC8qCi0tIAoy
LjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFt
ZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
