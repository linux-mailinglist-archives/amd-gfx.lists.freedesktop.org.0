Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 97C0B9C810
	for <lists+amd-gfx@lfdr.de>; Mon, 26 Aug 2019 05:55:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1FAC46E162;
	Mon, 26 Aug 2019 03:55:26 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM05-DM3-obe.outbound.protection.outlook.com
 (mail-eopbgr730047.outbound.protection.outlook.com [40.107.73.47])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B0A616E162
 for <amd-gfx@lists.freedesktop.org>; Mon, 26 Aug 2019 03:55:24 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=DzfPk7Xg4nwwDECq9bWe2I7eMYjrdZqAjBDH9kyPpoY7gEx/Cy6BOY6oVtiP0NzrhzUIS/4AImek7MxI1ty+5TMuoHAlXKSIcGVOL+knB/6/DX/6SnJhQE/5qrBSHX9lz80EztJbrwXbNftagli0bwuKKPowd/Sj6M2cAUR44wS68Nk8A+6llv1xJUPoQ0a4p+gOLDTkoBIgEOFwCAJwoSqLvtKj4qyCd1sBaRPv1r7F07pHG8PQdHqjwXtXQ0I9U1fs0V0hoiTqTy6ItduBzI+KuH3t5RGsWRchvXe070Pbj9G3EJcUTg8q+53RSiCto3N/DSlPiHiaWxRWslrKeQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=jn6ni5x/eNzXgVj0hmpGIQJHBB0uq08NW+uKL1umVQk=;
 b=HXQCjTtG+dBOMKrIvQyDyNkXFAtS2Oc1ch26z297CnpcKV5hq7SHTagPlBBh4goRtU3eufuwB5jCoUHlE3e62/HX4xNFB9XJeYxKfyLtOtN9NdM5CWQqlhKtO93TdL0KeUcEE+NzhPEPXFjlu1ORgAxdSm14Q1b5XNzlyq2+E8SXO1WNfAhnY9TSInrJ8RE/E3ifw+mVgn9SppdQ/JFdumMJdeptt/7j//giQvKPu4ovciq58mA8G6vd+bMn+6vowP4lVCEuZLz7HOAWotkIamJ6FTliSIIdDgxu4Symv73sVj79lXB/mI0S7wv4wrDqUBsWSNAgAyTG6ZH9v3qV6Q==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from DM3PR12CA0126.namprd12.prod.outlook.com (2603:10b6:0:51::22) by
 MWHPR12MB1536.namprd12.prod.outlook.com (2603:10b6:301:6::23) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2199.20; Mon, 26 Aug 2019 03:55:22 +0000
Received: from DM3NAM03FT050.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e49::203) by DM3PR12CA0126.outlook.office365.com
 (2603:10b6:0:51::22) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id 15.20.2199.17 via Frontend
 Transport; Mon, 26 Aug 2019 03:55:21 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV01.amd.com (165.204.84.17) by
 DM3NAM03FT050.mail.protection.outlook.com (10.152.82.252) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2178.16 via Frontend Transport; Mon, 26 Aug 2019 03:55:21 +0000
Received: from hawzhang-All-Series.amd.com (10.34.1.3) by SATLEXCHOV01.amd.com
 (10.181.40.71) with Microsoft SMTP Server id 14.3.389.1;
 Sun, 25 Aug 2019 22:55:19 -0500
From: Hawking Zhang <Hawking.Zhang@amd.com>
To: <amd-gfx@lists.freedesktop.org>, Alex Deucher <alexander.deucher@amd.com>
Subject: [PATCH 2/8] drm/amdgpu: switch to new amdgpu_nbio structure
Date: Mon, 26 Aug 2019 11:54:54 +0800
Message-ID: <1566791700-1912-3-git-send-email-Hawking.Zhang@amd.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1566791700-1912-1-git-send-email-Hawking.Zhang@amd.com>
References: <1566791700-1912-1-git-send-email-Hawking.Zhang@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(396003)(39860400002)(136003)(346002)(376002)(2980300002)(428003)(199004)(189003)(336012)(478600001)(5660300002)(53936002)(426003)(305945005)(53416004)(30864003)(11346002)(4326008)(50466002)(6636002)(2616005)(48376002)(446003)(47776003)(36756003)(26005)(53946003)(486006)(86362001)(70206006)(50226002)(186003)(2906002)(126002)(476003)(110136005)(76176011)(7696005)(8676002)(6666004)(316002)(356004)(81156014)(81166006)(51416003)(70586007)(16586007)(14444005)(8936002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MWHPR12MB1536; H:SATLEXCHOV01.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; A:1; MX:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 19585bc6-caf8-42bd-22be-08d729d937a7
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(4618075)(2017052603328);
 SRVR:MWHPR12MB1536; 
X-MS-TrafficTypeDiagnostic: MWHPR12MB1536:
X-Microsoft-Antispam-PRVS: <MWHPR12MB153663243E5919E09FFA85A7FCA10@MWHPR12MB1536.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:361;
X-Forefront-PRVS: 01415BB535
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: 0/YlhETxa5fjT5L19tjKEPXMAjWhe3MxYcaxqD8vMNv3OJiJZsYq3g3GHPPi7GifGmDJx2yh6i3hZHFWL80LtQBYVcHCSrKobwRuwMT4ZYz4MaZe7Ho1pK6226wXwWuYyY85DOJ8xDvquI46RJzgKOI7WIlnTziU287DUwadU9ikugSxX8i+JFMBNb5qktynR1R1Xhcg7R6YSI6O2uYwhUo+H4IlYR7h6Xxr6ANuqlzfuAxm6Ge0970U98K+2UH2RYWy2P/ve3mMKZWQEfGrmgQ1XnSvMdMZ8YzCtMlYRJP7RkfyZbnP8fMme7jpXHqGDYh4TpX208C8hlr0RXVh1dekM16caQOCBJGnEG04mNfGiM/0ADzcoWa0cpo/pGssMalwh+FdHwVG/f3hxEhlO7VcpxgFvizcK07SsIqwrII=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 26 Aug 2019 03:55:21.2935 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 19585bc6-caf8-42bd-22be-08d729d937a7
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV01.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MWHPR12MB1536
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=jn6ni5x/eNzXgVj0hmpGIQJHBB0uq08NW+uKL1umVQk=;
 b=wfRfXxirnS1SZKTuS6Izd6+cL1SXueo/hWO+/iMlqG9UDrnWwwqwFquP9+mLrIQhos448CfvvadIfn5xol5PD7iZ0ezvG09TEvMRM2wqPP+Ja2tgaIGcIWh5JTbqeYR1Nt0hMlBaWYvFZ0openfCZbNY8OLh6/gC82ZR7pkHhlc=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

bm8gZnVuY3Rpb25hbCBjaGFuZ2UsIGp1c3Qgc3dpdGNoIHRvIG5ldyBzdHJ1Y3R1cmVzCgpTaWdu
ZWQtb2ZmLWJ5OiBIYXdraW5nIFpoYW5nIDxIYXdraW5nLlpoYW5nQGFtZC5jb20+ClJldmlld2Vk
LWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmggICAgICAgICAgICAgICAgfCA2MyArKy0tLS0t
LS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kZl92M182LmMgICAgICAg
ICAgICAgICB8IDE2ICsrLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjEwXzAu
YyAgICAgICAgICAgICB8IDE0ICsrLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhf
djlfMC5jICAgICAgICAgICAgICB8ICA2ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
bWNfdjEwXzAuYyAgICAgICAgICAgICB8ICA2ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9nbWNfdjlfMC5jICAgICAgICAgICAgICB8ICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9uYXZpMTBfaWguYyAgICAgICAgICAgICB8ICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9uYmlvX3YyXzMuYyAgICAgICAgICAgICB8ICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L25iaW9fdjJfMy5oICAgICAgICAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvbmJpb192Nl8xLmMgICAgICAgICAgICAgfCAgMyArLQogZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvbmJpb192Nl8xLmggICAgICAgICAgICAgfCAgMSArCiBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9uYmlvX3Y3XzAuYyAgICAgICAgICAgICB8ICAxIC0KIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L25iaW9fdjdfMC5oICAgICAgICAgICAgIHwgIDEgKwogZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192N180LmMgICAgICAgICAgICAgfCAgMyArLQogZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192N180LmggICAgICAgICAgICAgfCAgMSArCiBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9udi5jICAgICAgICAgICAgICAgICAgICB8IDM0ICsr
KysrKy0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zZG1hX3Y0XzAuYyAgICAgICAg
ICAgICB8ICA2ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zZG1hX3Y1XzAuYyAgICAg
ICAgICAgICB8ICA4ICstLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc29jMTUuYyAgICAg
ICAgICAgICAgICAgfCA3MSArKysrKysrKysrKystLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS92Y25fdjJfMC5jICAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS92Y25fdjJfNS5jICAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS92ZWdhMTBfaWguYyAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJz
L2dwdS9kcm0vYW1kL3Bvd2VycGxheS9hbWRncHVfc211LmMgICAgICAgICB8ICAyICstCiAuLi4v
Z3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdW1nci9zbXUxMF9zbXVtZ3IuYyAgICB8ICAyICstCiAu
Li4vZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdW1nci92ZWdhMTBfc211bWdyLmMgICB8ICAyICst
CiAuLi4vZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdW1nci92ZWdhMTJfc211bWdyLmMgICB8ICAy
ICstCiAuLi4vZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdW1nci92ZWdhMjBfc211bWdyLmMgICB8
ICA0ICstCiAyNyBmaWxlcyBjaGFuZ2VkLCAxMDggaW5zZXJ0aW9ucygrKSwgMTU0IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKaW5kZXggZjZhZTU2NS4uYmNmMTY5
ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKQEAgLTczLDYgKzczLDcgQEAKICNp
bmNsdWRlICJhbWRncHVfZ21jLmgiCiAjaW5jbHVkZSAiYW1kZ3B1X2dmeC5oIgogI2luY2x1ZGUg
ImFtZGdwdV9zZG1hLmgiCisjaW5jbHVkZSAiYW1kZ3B1X25iaW8uaCIKICNpbmNsdWRlICJhbWRn
cHVfZG0uaCIKICNpbmNsdWRlICJhbWRncHVfdmlydC5oIgogI2luY2x1ZGUgImFtZGdwdV9jc2Eu
aCIKQEAgLTY0Nyw2OSArNjQ4LDExIEBAIHR5cGVkZWYgdm9pZCAoKmFtZGdwdV93cmVnNjRfdCko
c3RydWN0IGFtZGdwdV9kZXZpY2UqLCB1aW50MzJfdCwgdWludDY0X3QpOwogdHlwZWRlZiB1aW50
MzJfdCAoKmFtZGdwdV9ibG9ja19ycmVnX3QpKHN0cnVjdCBhbWRncHVfZGV2aWNlKiwgdWludDMy
X3QsIHVpbnQzMl90KTsKIHR5cGVkZWYgdm9pZCAoKmFtZGdwdV9ibG9ja193cmVnX3QpKHN0cnVj
dCBhbWRncHVfZGV2aWNlKiwgdWludDMyX3QsIHVpbnQzMl90LCB1aW50MzJfdCk7CiAKLQotLyoK
LSAqIGFtZGdwdSBuYmlvIGZ1bmN0aW9ucwotICoKLSAqLwotc3RydWN0IG5iaW9faGRwX2ZsdXNo
X3JlZyB7Ci0JdTMyIHJlZl9hbmRfbWFza19jcDA7Ci0JdTMyIHJlZl9hbmRfbWFza19jcDE7Ci0J
dTMyIHJlZl9hbmRfbWFza19jcDI7Ci0JdTMyIHJlZl9hbmRfbWFza19jcDM7Ci0JdTMyIHJlZl9h
bmRfbWFza19jcDQ7Ci0JdTMyIHJlZl9hbmRfbWFza19jcDU7Ci0JdTMyIHJlZl9hbmRfbWFza19j
cDY7Ci0JdTMyIHJlZl9hbmRfbWFza19jcDc7Ci0JdTMyIHJlZl9hbmRfbWFza19jcDg7Ci0JdTMy
IHJlZl9hbmRfbWFza19jcDk7Ci0JdTMyIHJlZl9hbmRfbWFza19zZG1hMDsKLQl1MzIgcmVmX2Fu
ZF9tYXNrX3NkbWExOwotCXUzMiByZWZfYW5kX21hc2tfc2RtYTI7Ci0JdTMyIHJlZl9hbmRfbWFz
a19zZG1hMzsKLQl1MzIgcmVmX2FuZF9tYXNrX3NkbWE0OwotCXUzMiByZWZfYW5kX21hc2tfc2Rt
YTU7Ci0JdTMyIHJlZl9hbmRfbWFza19zZG1hNjsKLQl1MzIgcmVmX2FuZF9tYXNrX3NkbWE3Owot
fTsKLQogc3RydWN0IGFtZGdwdV9tbWlvX3JlbWFwIHsKIAl1MzIgcmVnX29mZnNldDsKIAlyZXNv
dXJjZV9zaXplX3QgYnVzX2FkZHI7CiB9OwogCi1zdHJ1Y3QgYW1kZ3B1X25iaW9fZnVuY3Mgewot
CWNvbnN0IHN0cnVjdCBuYmlvX2hkcF9mbHVzaF9yZWcgKmhkcF9mbHVzaF9yZWc7Ci0JdTMyICgq
Z2V0X2hkcF9mbHVzaF9yZXFfb2Zmc2V0KShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Ci0J
dTMyICgqZ2V0X2hkcF9mbHVzaF9kb25lX29mZnNldCkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpOwotCXUzMiAoKmdldF9wY2llX2luZGV4X29mZnNldCkoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpOwotCXUzMiAoKmdldF9wY2llX2RhdGFfb2Zmc2V0KShzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldik7Ci0JdTMyICgqZ2V0X3Jldl9pZCkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
OwotCXZvaWQgKCptY19hY2Nlc3NfZW5hYmxlKShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwg
Ym9vbCBlbmFibGUpOwotCXZvaWQgKCpoZHBfZmx1c2gpKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2LCBzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcpOwotCXUzMiAoKmdldF9tZW1zaXplKShzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Ci0Jdm9pZCAoKnNkbWFfZG9vcmJlbGxfcmFuZ2UpKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBpbnQgaW5zdGFuY2UsCi0JCQlib29sIHVzZV9kb29y
YmVsbCwgaW50IGRvb3JiZWxsX2luZGV4LCBpbnQgZG9vcmJlbGxfc2l6ZSk7Ci0Jdm9pZCAoKnZj
bl9kb29yYmVsbF9yYW5nZSkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIGJvb2wgdXNlX2Rv
b3JiZWxsLAotCQkJCSAgIGludCBkb29yYmVsbF9pbmRleCwgaW50IGluc3RhbmNlKTsKLQl2b2lk
ICgqZW5hYmxlX2Rvb3JiZWxsX2FwZXJ0dXJlKShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwK
LQkJCQkJIGJvb2wgZW5hYmxlKTsKLQl2b2lkICgqZW5hYmxlX2Rvb3JiZWxsX3NlbGZyaW5nX2Fw
ZXJ0dXJlKShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKLQkJCQkJCSAgYm9vbCBlbmFibGUp
OwotCXZvaWQgKCppaF9kb29yYmVsbF9yYW5nZSkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYs
Ci0JCQkJICBib29sIHVzZV9kb29yYmVsbCwgaW50IGRvb3JiZWxsX2luZGV4KTsKLQl2b2lkICgq
dXBkYXRlX21lZGl1bV9ncmFpbl9jbG9ja19nYXRpbmcpKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2LAotCQkJCQkJIGJvb2wgZW5hYmxlKTsKLQl2b2lkICgqdXBkYXRlX21lZGl1bV9ncmFpbl9s
aWdodF9zbGVlcCkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCi0JCQkJCQlib29sIGVuYWJs
ZSk7Ci0Jdm9pZCAoKmdldF9jbG9ja2dhdGluZ19zdGF0ZSkoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsCi0JCQkJICAgICAgdTMyICpmbGFncyk7Ci0Jdm9pZCAoKmloX2NvbnRyb2wpKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2KTsKLQl2b2lkICgqaW5pdF9yZWdpc3RlcnMpKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2KTsKLQl2b2lkICgqZGV0ZWN0X2h3X3ZpcnQpKHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2KTsKLQl2b2lkICgqcmVtYXBfaGRwX3JlZ2lzdGVycykoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpOwotfTsKLQogc3RydWN0IGFtZGdwdV9kZl9mdW5jcyB7CiAJdm9p
ZCAoKnN3X2luaXQpKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIAl2b2lkICgqZW5hYmxl
X2Jyb2FkY2FzdF9tb2RlKShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKQEAgLTkyNSw2ICs4
NjgsOSBAQCBzdHJ1Y3QgYW1kZ3B1X2RldmljZSB7CiAJdTMyCQkJCWNnX2ZsYWdzOwogCXUzMgkJ
CQlwZ19mbGFnczsKIAorCS8qIG5iaW8gKi8KKwlzdHJ1Y3QgYW1kZ3B1X25iaW8JCW5iaW87CisK
IAkvKiBnZnggKi8KIAlzdHJ1Y3QgYW1kZ3B1X2dmeAkJZ2Z4OwogCkBAIC05NzgsNyArOTI0LDYg
QEAgc3RydWN0IGFtZGdwdV9kZXZpY2UgewogCS8qIHNvYzE1IHJlZ2lzdGVyIG9mZnNldCBiYXNl
ZCBvbiBpcCwgaW5zdGFuY2UgYW5kICBzZWdtZW50ICovCiAJdWludDMyX3QgCQkqcmVnX29mZnNl
dFtNQVhfSFdJUF1bSFdJUF9NQVhfSU5TVEFOQ0VdOwogCi0JY29uc3Qgc3RydWN0IGFtZGdwdV9u
YmlvX2Z1bmNzCSpuYmlvX2Z1bmNzOwogCWNvbnN0IHN0cnVjdCBhbWRncHVfZGZfZnVuY3MJKmRm
X2Z1bmNzOwogCWNvbnN0IHN0cnVjdCBhbWRncHVfbW1odWJfZnVuY3MJKm1taHViX2Z1bmNzOwog
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kZl92M182LmMgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kZl92M182LmMKaW5kZXggNTg1MGM4ZS4uZGVlZTRmNCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGZfdjNfNi5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuYwpAQCAtOTksOCArOTksOCBAQCBzdGF0
aWMgdWludDY0X3QgZGZfdjNfNl9nZXRfZmljYShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwK
IAl1bnNpZ25lZCBsb25nIGZsYWdzLCBhZGRyZXNzLCBkYXRhOwogCXVpbnQzMl90IGZpY2FkbF92
YWwsIGZpY2FkaF92YWw7CiAKLQlhZGRyZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVf
aW5kZXhfb2Zmc2V0KGFkZXYpOwotCWRhdGEgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNpZV9k
YXRhX29mZnNldChhZGV2KTsKKwlhZGRyZXNzID0gYWRldi0+bmJpby5mdW5jcy0+Z2V0X3BjaWVf
aW5kZXhfb2Zmc2V0KGFkZXYpOworCWRhdGEgPSBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfcGNpZV9k
YXRhX29mZnNldChhZGV2KTsKIAogCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9s
b2NrLCBmbGFncyk7CiAJV1JFRzMyKGFkZHJlc3MsIHNtbkRGX1BJRV9BT05fRmFicmljSW5kaXJl
Y3RDb25maWdBY2Nlc3NBZGRyZXNzMyk7CkBAIC0xMjIsOCArMTIyLDggQEAgc3RhdGljIHZvaWQg
ZGZfdjNfNl9zZXRfZmljYShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgZmlj
YWFfdmFsLAogewogCXVuc2lnbmVkIGxvbmcgZmxhZ3MsIGFkZHJlc3MsIGRhdGE7CiAKLQlhZGRy
ZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFkZXYpOwotCWRh
dGEgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNpZV9kYXRhX29mZnNldChhZGV2KTsKKwlhZGRy
ZXNzID0gYWRldi0+bmJpby5mdW5jcy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFkZXYpOworCWRh
dGEgPSBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfcGNpZV9kYXRhX29mZnNldChhZGV2KTsKIAogCXNw
aW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7CiAJV1JFRzMyKGFk
ZHJlc3MsIHNtbkRGX1BJRV9BT05fRmFicmljSW5kaXJlY3RDb25maWdBY2Nlc3NBZGRyZXNzMyk7
CkBAIC0xNTAsOCArMTUwLDggQEAgc3RhdGljIHZvaWQgZGZfdjNfNl9wZXJmbW9uX3JyZWcoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiB7CiAJdW5zaWduZWQgbG9uZyBmbGFncywgYWRkcmVz
cywgZGF0YTsKIAotCWFkZHJlc3MgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNpZV9pbmRleF9v
ZmZzZXQoYWRldik7Ci0JZGF0YSA9IGFkZXYtPm5iaW9fZnVuY3MtPmdldF9wY2llX2RhdGFfb2Zm
c2V0KGFkZXYpOworCWFkZHJlc3MgPSBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfcGNpZV9pbmRleF9v
ZmZzZXQoYWRldik7CisJZGF0YSA9IGFkZXYtPm5iaW8uZnVuY3MtPmdldF9wY2llX2RhdGFfb2Zm
c2V0KGFkZXYpOwogCiAJc3Bpbl9sb2NrX2lycXNhdmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZs
YWdzKTsKIAlXUkVHMzIoYWRkcmVzcywgbG9fYWRkcik7CkBAIC0xNzIsOCArMTcyLDggQEAgc3Rh
dGljIHZvaWQgZGZfdjNfNl9wZXJmbW9uX3dyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYs
IHVpbnQzMl90IGxvX2FkZHIsCiB7CiAJdW5zaWduZWQgbG9uZyBmbGFncywgYWRkcmVzcywgZGF0
YTsKIAotCWFkZHJlc3MgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNpZV9pbmRleF9vZmZzZXQo
YWRldik7Ci0JZGF0YSA9IGFkZXYtPm5iaW9fZnVuY3MtPmdldF9wY2llX2RhdGFfb2Zmc2V0KGFk
ZXYpOworCWFkZHJlc3MgPSBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfcGNpZV9pbmRleF9vZmZzZXQo
YWRldik7CisJZGF0YSA9IGFkZXYtPm5iaW8uZnVuY3MtPmdldF9wY2llX2RhdGFfb2Zmc2V0KGFk
ZXYpOwogCiAJc3Bpbl9sb2NrX2lycXNhdmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsK
IAlXUkVHMzIoYWRkcmVzcywgbG9fYWRkcik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9nZnhfdjEwXzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92
MTBfMC5jCmluZGV4IDFhZGRlODUuLmY3MDg5MTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2dmeF92MTBfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2dmeF92MTBfMC5jCkBAIC0yNDA4LDcgKzI0MDgsNyBAQCBzdGF0aWMgaW50IGdmeF92MTBfMF9j
cF9nZnhfbG9hZF9wZnBfbWljcm9jb2RlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCX0K
IAogCWlmIChhbWRncHVfZW11X21vZGUgPT0gMSkKLQkJYWRldi0+bmJpb19mdW5jcy0+aGRwX2Zs
dXNoKGFkZXYsIE5VTEwpOworCQlhZGV2LT5uYmlvLmZ1bmNzLT5oZHBfZmx1c2goYWRldiwgTlVM
TCk7CiAKIAl0bXAgPSBSUkVHMzJfU09DMTUoR0MsIDAsIG1tQ1BfUEZQX0lDX0JBU0VfQ05UTCk7
CiAJdG1wID0gUkVHX1NFVF9GSUVMRCh0bXAsIENQX1BGUF9JQ19CQVNFX0NOVEwsIFZNSUQsIDAp
OwpAQCAtMjQ3OCw3ICsyNDc4LDcgQEAgc3RhdGljIGludCBnZnhfdjEwXzBfY3BfZ2Z4X2xvYWRf
Y2VfbWljcm9jb2RlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCX0KIAogCWlmIChhbWRn
cHVfZW11X21vZGUgPT0gMSkKLQkJYWRldi0+bmJpb19mdW5jcy0+aGRwX2ZsdXNoKGFkZXYsIE5V
TEwpOworCQlhZGV2LT5uYmlvLmZ1bmNzLT5oZHBfZmx1c2goYWRldiwgTlVMTCk7CiAKIAl0bXAg
PSBSUkVHMzJfU09DMTUoR0MsIDAsIG1tQ1BfQ0VfSUNfQkFTRV9DTlRMKTsKIAl0bXAgPSBSRUdf
U0VUX0ZJRUxEKHRtcCwgQ1BfQ0VfSUNfQkFTRV9DTlRMLCBWTUlELCAwKTsKQEAgLTI1NDcsNyAr
MjU0Nyw3IEBAIHN0YXRpYyBpbnQgZ2Z4X3YxMF8wX2NwX2dmeF9sb2FkX21lX21pY3JvY29kZShz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAl9CiAKIAlpZiAoYW1kZ3B1X2VtdV9tb2RlID09
IDEpCi0JCWFkZXYtPm5iaW9fZnVuY3MtPmhkcF9mbHVzaChhZGV2LCBOVUxMKTsKKwkJYWRldi0+
bmJpby5mdW5jcy0+aGRwX2ZsdXNoKGFkZXYsIE5VTEwpOwogCiAJdG1wID0gUlJFRzMyX1NPQzE1
KEdDLCAwLCBtbUNQX01FX0lDX0JBU0VfQ05UTCk7CiAJdG1wID0gUkVHX1NFVF9GSUVMRCh0bXAs
IENQX01FX0lDX0JBU0VfQ05UTCwgVk1JRCwgMCk7CkBAIC0yODY4LDcgKzI4NjgsNyBAQCBzdGF0
aWMgaW50IGdmeF92MTBfMF9jcF9jb21wdXRlX2xvYWRfbWljcm9jb2RlKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KQogICAgICAgICB9CiAKIAlpZiAoYW1kZ3B1X2VtdV9tb2RlID09IDEpCi0J
CWFkZXYtPm5iaW9fZnVuY3MtPmhkcF9mbHVzaChhZGV2LCBOVUxMKTsKKwkJYWRldi0+bmJpby5m
dW5jcy0+aGRwX2ZsdXNoKGFkZXYsIE5VTEwpOwogCiAJdG1wID0gUlJFRzMyX1NPQzE1KEdDLCAw
LCBtbUNQX0NQQ19JQ19CQVNFX0NOVEwpOwogCXRtcCA9IFJFR19TRVRfRklFTEQodG1wLCBDUF9D
UENfSUNfQkFTRV9DTlRMLCBDQUNIRV9QT0xJQ1ksIDApOwpAQCAtNDMzMCw3ICs0MzMwLDcgQEAg
c3RhdGljIHZvaWQgZ2Z4X3YxMF8wX3JpbmdfZW1pdF9oZHBfZmx1c2goc3RydWN0IGFtZGdwdV9y
aW5nICpyaW5nKQogewogCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gcmluZy0+YWRldjsK
IAl1MzIgcmVmX2FuZF9tYXNrLCByZWdfbWVtX2VuZ2luZTsKLQljb25zdCBzdHJ1Y3QgbmJpb19o
ZHBfZmx1c2hfcmVnICpuYmlvX2hmX3JlZyA9IGFkZXYtPm5iaW9fZnVuY3MtPmhkcF9mbHVzaF9y
ZWc7CisJY29uc3Qgc3RydWN0IG5iaW9faGRwX2ZsdXNoX3JlZyAqbmJpb19oZl9yZWcgPSBhZGV2
LT5uYmlvLmhkcF9mbHVzaF9yZWc7CiAKIAlpZiAocmluZy0+ZnVuY3MtPnR5cGUgPT0gQU1ER1BV
X1JJTkdfVFlQRV9DT01QVVRFKSB7CiAJCXN3aXRjaCAocmluZy0+bWUpIHsKQEAgLTQzNTAsOCAr
NDM1MCw4IEBAIHN0YXRpYyB2b2lkIGdmeF92MTBfMF9yaW5nX2VtaXRfaGRwX2ZsdXNoKHN0cnVj
dCBhbWRncHVfcmluZyAqcmluZykKIAl9CiAKIAlnZnhfdjEwXzBfd2FpdF9yZWdfbWVtKHJpbmcs
IHJlZ19tZW1fZW5naW5lLCAwLCAxLAotCQkJICAgICAgIGFkZXYtPm5iaW9fZnVuY3MtPmdldF9o
ZHBfZmx1c2hfcmVxX29mZnNldChhZGV2KSwKLQkJCSAgICAgICBhZGV2LT5uYmlvX2Z1bmNzLT5n
ZXRfaGRwX2ZsdXNoX2RvbmVfb2Zmc2V0KGFkZXYpLAorCQkJICAgICAgIGFkZXYtPm5iaW8uZnVu
Y3MtPmdldF9oZHBfZmx1c2hfcmVxX29mZnNldChhZGV2KSwKKwkJCSAgICAgICBhZGV2LT5uYmlv
LmZ1bmNzLT5nZXRfaGRwX2ZsdXNoX2RvbmVfb2Zmc2V0KGFkZXYpLAogCQkJICAgICAgIHJlZl9h
bmRfbWFzaywgcmVmX2FuZF9tYXNrLCAweDIwKTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2dmeF92OV8wLmMKaW5kZXggYmQ3Y2E4YS4uYTZiY2JkZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9nZnhfdjlfMC5jCkBAIC00OTU5LDcgKzQ5NTksNyBAQCBzdGF0aWMgdm9pZCBnZnhfdjlf
MF9yaW5nX2VtaXRfaGRwX2ZsdXNoKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZykKIHsKIAlzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHJpbmctPmFkZXY7CiAJdTMyIHJlZl9hbmRfbWFzaywg
cmVnX21lbV9lbmdpbmU7Ci0JY29uc3Qgc3RydWN0IG5iaW9faGRwX2ZsdXNoX3JlZyAqbmJpb19o
Zl9yZWcgPSBhZGV2LT5uYmlvX2Z1bmNzLT5oZHBfZmx1c2hfcmVnOworCWNvbnN0IHN0cnVjdCBu
YmlvX2hkcF9mbHVzaF9yZWcgKm5iaW9faGZfcmVnID0gYWRldi0+bmJpby5oZHBfZmx1c2hfcmVn
OwogCiAJaWYgKHJpbmctPmZ1bmNzLT50eXBlID09IEFNREdQVV9SSU5HX1RZUEVfQ09NUFVURSkg
ewogCQlzd2l0Y2ggKHJpbmctPm1lKSB7CkBAIC00OTc5LDggKzQ5NzksOCBAQCBzdGF0aWMgdm9p
ZCBnZnhfdjlfMF9yaW5nX2VtaXRfaGRwX2ZsdXNoKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZykK
IAl9CiAKIAlnZnhfdjlfMF93YWl0X3JlZ19tZW0ocmluZywgcmVnX21lbV9lbmdpbmUsIDAsIDEs
Ci0JCQkgICAgICBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfaGRwX2ZsdXNoX3JlcV9vZmZzZXQoYWRl
diksCi0JCQkgICAgICBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfaGRwX2ZsdXNoX2RvbmVfb2Zmc2V0
KGFkZXYpLAorCQkJICAgICAgYWRldi0+bmJpby5mdW5jcy0+Z2V0X2hkcF9mbHVzaF9yZXFfb2Zm
c2V0KGFkZXYpLAorCQkJICAgICAgYWRldi0+bmJpby5mdW5jcy0+Z2V0X2hkcF9mbHVzaF9kb25l
X29mZnNldChhZGV2KSwKIAkJCSAgICAgIHJlZl9hbmRfbWFzaywgcmVmX2FuZF9tYXNrLCAweDIw
KTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8w
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYwppbmRleCBkODNkOGE2
Li45NTA1NDZkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEw
XzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYwpAQCAtMjYy
LDcgKzI2Miw3IEBAIHN0YXRpYyB2b2lkIGdtY192MTBfMF9mbHVzaF9ncHVfdGxiKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LCB1aW50MzJfdCB2bWlkLAogCWludCByOwogCiAJLyogZmx1c2gg
aGRwIGNhY2hlICovCi0JYWRldi0+bmJpb19mdW5jcy0+aGRwX2ZsdXNoKGFkZXYsIE5VTEwpOwor
CWFkZXYtPm5iaW8uZnVuY3MtPmhkcF9mbHVzaChhZGV2LCBOVUxMKTsKIAogCW11dGV4X2xvY2so
JmFkZXYtPm1tYW4uZ3R0X3dpbmRvd19sb2NrKTsKIApAQCAtNTQyLDcgKzU0Miw3IEBAIHN0YXRp
YyBpbnQgZ21jX3YxMF8wX21jX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAKIAkv
KiBzaXplIGluIE1CIG9uIHNpICovCiAJYWRldi0+Z21jLm1jX3ZyYW1fc2l6ZSA9Ci0JCWFkZXYt
Pm5iaW9fZnVuY3MtPmdldF9tZW1zaXplKGFkZXYpICogMTAyNFVMTCAqIDEwMjRVTEw7CisJCWFk
ZXYtPm5iaW8uZnVuY3MtPmdldF9tZW1zaXplKGFkZXYpICogMTAyNFVMTCAqIDEwMjRVTEw7CiAJ
YWRldi0+Z21jLnJlYWxfdnJhbV9zaXplID0gYWRldi0+Z21jLm1jX3ZyYW1fc2l6ZTsKIAlhZGV2
LT5nbWMudmlzaWJsZV92cmFtX3NpemUgPSBhZGV2LT5nbWMuYXBlcl9zaXplOwogCkBAIC03OTYs
NyArNzk2LDcgQEAgc3RhdGljIGludCBnbWNfdjEwXzBfZ2FydF9lbmFibGUoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYpCiAJV1JFRzMyX1NPQzE1KEhEUCwgMCwgbW1IRFBfSE9TVF9QQVRIX0NO
VEwsIHRtcCk7CiAKIAkvKiBGbHVzaCBIRFAgYWZ0ZXIgaXQgaXMgaW5pdGlhbGl6ZWQgKi8KLQlh
ZGV2LT5uYmlvX2Z1bmNzLT5oZHBfZmx1c2goYWRldiwgTlVMTCk7CisJYWRldi0+bmJpby5mdW5j
cy0+aGRwX2ZsdXNoKGFkZXYsIE5VTEwpOwogCiAJdmFsdWUgPSAoYW1kZ3B1X3ZtX2ZhdWx0X3N0
b3AgPT0gQU1ER1BVX1ZNX0ZBVUxUX1NUT1BfQUxXQVlTKSA/CiAJCWZhbHNlIDogdHJ1ZTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jCmluZGV4IDZjZTI5NzcuLjU1ZGE2ZjUgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYwpAQCAtOTc2LDcgKzk3Niw3IEBAIHN0
YXRpYyBpbnQgZ21jX3Y5XzBfbWNfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAog
CS8qIHNpemUgaW4gTUIgb24gc2kgKi8KIAlhZGV2LT5nbWMubWNfdnJhbV9zaXplID0KLQkJYWRl
di0+bmJpb19mdW5jcy0+Z2V0X21lbXNpemUoYWRldikgKiAxMDI0VUxMICogMTAyNFVMTDsKKwkJ
YWRldi0+bmJpby5mdW5jcy0+Z2V0X21lbXNpemUoYWRldikgKiAxMDI0VUxMICogMTAyNFVMTDsK
IAlhZGV2LT5nbWMucmVhbF92cmFtX3NpemUgPSBhZGV2LT5nbWMubWNfdnJhbV9zaXplOwogCiAJ
aWYgKCEoYWRldi0+ZmxhZ3MgJiBBTURfSVNfQVBVKSkgewpAQCAtMTM1NCw3ICsxMzU0LDcgQEAg
c3RhdGljIGludCBnbWNfdjlfMF9nYXJ0X2VuYWJsZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
dikKIAlXUkVHMzJfU09DMTUoSERQLCAwLCBtbUhEUF9OT05TVVJGQUNFX0JBU0VfSEksIChhZGV2
LT5nbWMudnJhbV9zdGFydCA+PiA0MCkpOwogCiAJLyogQWZ0ZXIgSERQIGlzIGluaXRpYWxpemVk
LCBmbHVzaCBIRFAuKi8KLQlhZGV2LT5uYmlvX2Z1bmNzLT5oZHBfZmx1c2goYWRldiwgTlVMTCk7
CisJYWRldi0+bmJpby5mdW5jcy0+aGRwX2ZsdXNoKGFkZXYsIE5VTEwpOwogCiAJaWYgKGFtZGdw
dV92bV9mYXVsdF9zdG9wID09IEFNREdQVV9WTV9GQVVMVF9TVE9QX0FMV0FZUykKIAkJdmFsdWUg
PSBmYWxzZTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L25hdmkxMF9p
aC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmF2aTEwX2loLmMKaW5kZXggZTk2Mzc0
Ni4uN2RjOTRlNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmF2aTEw
X2loLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmF2aTEwX2loLmMKQEAgLTEx
Niw3ICsxMTYsNyBAQCBzdGF0aWMgaW50IG5hdmkxMF9paF9pcnFfaW5pdChzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldikKIAkvKiBkaXNhYmxlIGlycXMgKi8KIAluYXZpMTBfaWhfZGlzYWJsZV9p
bnRlcnJ1cHRzKGFkZXYpOwogCi0JYWRldi0+bmJpb19mdW5jcy0+aWhfY29udHJvbChhZGV2KTsK
KwlhZGV2LT5uYmlvLmZ1bmNzLT5paF9jb250cm9sKGFkZXYpOwogCiAJLyogUmluZyBCdWZmZXIg
YmFzZS4gWzM5OjhdIG9mIDQwLWJpdCBhZGRyZXNzIG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHJp
bmcgYnVmZmVyKi8KIAlXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0JBU0UsIGloLT5n
cHVfYWRkciA+PiA4KTsKQEAgLTE2MSw3ICsxNjEsNyBAQCBzdGF0aWMgaW50IG5hdmkxMF9paF9p
cnFfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAl9CiAJV1JFRzMyX1NPQzE1KE9T
U1NZUywgMCwgbW1JSF9ET09SQkVMTF9SUFRSLCBpaF9kb29yYmVsbF9ydHByKTsKIAotCWFkZXYt
Pm5iaW9fZnVuY3MtPmloX2Rvb3JiZWxsX3JhbmdlKGFkZXYsIGloLT51c2VfZG9vcmJlbGwsCisJ
YWRldi0+bmJpby5mdW5jcy0+aWhfZG9vcmJlbGxfcmFuZ2UoYWRldiwgaWgtPnVzZV9kb29yYmVs
bCwKIAkJCQkJICAgIGloLT5kb29yYmVsbF9pbmRleCk7CiAKIAl0bXAgPSBSUkVHMzJfU09DMTUo
T1NTU1lTLCAwLCBtbUlIX1NUT1JNX0NMSUVOVF9MSVNUX0NOVEwpOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192Ml8zLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9uYmlvX3YyXzMuYwppbmRleCBmNTYxMWM0Li5hNWZhNzQxIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9uYmlvX3YyXzMuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9uYmlvX3YyXzMuYwpAQCAtMzExLDcgKzMxMSw2IEBAIHN0YXRpYyB2b2lk
IG5iaW9fdjJfM19pbml0X3JlZ2lzdGVycyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIH0K
IAogY29uc3Qgc3RydWN0IGFtZGdwdV9uYmlvX2Z1bmNzIG5iaW9fdjJfM19mdW5jcyA9IHsKLQku
aGRwX2ZsdXNoX3JlZyA9ICZuYmlvX3YyXzNfaGRwX2ZsdXNoX3JlZywKIAkuZ2V0X2hkcF9mbHVz
aF9yZXFfb2Zmc2V0ID0gbmJpb192Ml8zX2dldF9oZHBfZmx1c2hfcmVxX29mZnNldCwKIAkuZ2V0
X2hkcF9mbHVzaF9kb25lX29mZnNldCA9IG5iaW9fdjJfM19nZXRfaGRwX2ZsdXNoX2RvbmVfb2Zm
c2V0LAogCS5nZXRfcGNpZV9pbmRleF9vZmZzZXQgPSBuYmlvX3YyXzNfZ2V0X3BjaWVfaW5kZXhf
b2Zmc2V0LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192Ml8z
LmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9uYmlvX3YyXzMuaAppbmRleCA1YWU1MjA4
Li5hNDNiNjBhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9uYmlvX3Yy
XzMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9uYmlvX3YyXzMuaApAQCAtMjYs
NiArMjYsNyBAQAogCiAjaW5jbHVkZSAic29jMTVfY29tbW9uLmgiCiAKK2V4dGVybiBjb25zdCBz
dHJ1Y3QgbmJpb19oZHBfZmx1c2hfcmVnIG5iaW9fdjJfM19oZHBfZmx1c2hfcmVnOwogZXh0ZXJu
IGNvbnN0IHN0cnVjdCBhbWRncHVfbmJpb19mdW5jcyBuYmlvX3YyXzNfZnVuY3M7CiAKICNlbmRp
ZgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192Nl8xLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9uYmlvX3Y2XzEuYwppbmRleCA2NTkwMTQzLi42MzVk
OWUxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9uYmlvX3Y2XzEuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9uYmlvX3Y2XzEuYwpAQCAtMjI2LDcgKzIy
Niw3IEBAIHN0YXRpYyB1MzIgbmJpb192Nl8xX2dldF9wY2llX2RhdGFfb2Zmc2V0KHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2KQogCXJldHVybiBTT0MxNV9SRUdfT0ZGU0VUKE5CSU8sIDAsIG1t
UENJRV9EQVRBMik7CiB9CiAKLXN0YXRpYyBjb25zdCBzdHJ1Y3QgbmJpb19oZHBfZmx1c2hfcmVn
IG5iaW9fdjZfMV9oZHBfZmx1c2hfcmVnID0geworY29uc3Qgc3RydWN0IG5iaW9faGRwX2ZsdXNo
X3JlZyBuYmlvX3Y2XzFfaGRwX2ZsdXNoX3JlZyA9IHsKIAkucmVmX2FuZF9tYXNrX2NwMCA9IEJJ
Rl9CWF9QRjBfR1BVX0hEUF9GTFVTSF9ET05FX19DUDBfTUFTSywKIAkucmVmX2FuZF9tYXNrX2Nw
MSA9IEJJRl9CWF9QRjBfR1BVX0hEUF9GTFVTSF9ET05FX19DUDFfTUFTSywKIAkucmVmX2FuZF9t
YXNrX2NwMiA9IEJJRl9CWF9QRjBfR1BVX0hEUF9GTFVTSF9ET05FX19DUDJfTUFTSywKQEAgLTI3
Nyw3ICsyNzcsNiBAQCBzdGF0aWMgdm9pZCBuYmlvX3Y2XzFfaW5pdF9yZWdpc3RlcnMoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiB9CiAKIGNvbnN0IHN0cnVjdCBhbWRncHVfbmJpb19mdW5j
cyBuYmlvX3Y2XzFfZnVuY3MgPSB7Ci0JLmhkcF9mbHVzaF9yZWcgPSAmbmJpb192Nl8xX2hkcF9m
bHVzaF9yZWcsCiAJLmdldF9oZHBfZmx1c2hfcmVxX29mZnNldCA9IG5iaW9fdjZfMV9nZXRfaGRw
X2ZsdXNoX3JlcV9vZmZzZXQsCiAJLmdldF9oZHBfZmx1c2hfZG9uZV9vZmZzZXQgPSBuYmlvX3Y2
XzFfZ2V0X2hkcF9mbHVzaF9kb25lX29mZnNldCwKIAkuZ2V0X3BjaWVfaW5kZXhfb2Zmc2V0ID0g
bmJpb192Nl8xX2dldF9wY2llX2luZGV4X29mZnNldCwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L25iaW9fdjZfMS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
bmJpb192Nl8xLmgKaW5kZXggMDc0M2E2Zi4uNmRjNzQzYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvbmJpb192Nl8xLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvbmJpb192Nl8xLmgKQEAgLTI2LDYgKzI2LDcgQEAKIAogI2luY2x1ZGUgInNvYzE1X2Nv
bW1vbi5oIgogCitleHRlcm4gY29uc3Qgc3RydWN0IG5iaW9faGRwX2ZsdXNoX3JlZyBuYmlvX3Y2
XzFfaGRwX2ZsdXNoX3JlZzsKIGV4dGVybiBjb25zdCBzdHJ1Y3QgYW1kZ3B1X25iaW9fZnVuY3Mg
bmJpb192Nl8xX2Z1bmNzOwogCiAjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L25iaW9fdjdfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192
N18wLmMKaW5kZXggNzRlZWNiNy4uZDZjYmYyNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvbmJpb192N18wLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
bmJpb192N18wLmMKQEAgLTI5Miw3ICsyOTIsNiBAQCBzdGF0aWMgdm9pZCBuYmlvX3Y3XzBfaW5p
dF9yZWdpc3RlcnMoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiB9CiAKIGNvbnN0IHN0cnVj
dCBhbWRncHVfbmJpb19mdW5jcyBuYmlvX3Y3XzBfZnVuY3MgPSB7Ci0JLmhkcF9mbHVzaF9yZWcg
PSAmbmJpb192N18wX2hkcF9mbHVzaF9yZWcsCiAJLmdldF9oZHBfZmx1c2hfcmVxX29mZnNldCA9
IG5iaW9fdjdfMF9nZXRfaGRwX2ZsdXNoX3JlcV9vZmZzZXQsCiAJLmdldF9oZHBfZmx1c2hfZG9u
ZV9vZmZzZXQgPSBuYmlvX3Y3XzBfZ2V0X2hkcF9mbHVzaF9kb25lX29mZnNldCwKIAkuZ2V0X3Bj
aWVfaW5kZXhfb2Zmc2V0ID0gbmJpb192N18wX2dldF9wY2llX2luZGV4X29mZnNldCwKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L25iaW9fdjdfMC5oIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvbmJpb192N18wLmgKaW5kZXggNTA4ZDU0OS4uZTdhZWZiMiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192N18wLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192N18wLmgKQEAgLTI2LDYgKzI2LDcgQEAKIAog
I2luY2x1ZGUgInNvYzE1X2NvbW1vbi5oIgogCitleHRlcm4gY29uc3Qgc3RydWN0IG5iaW9faGRw
X2ZsdXNoX3JlZyBuYmlvX3Y3XzBfaGRwX2ZsdXNoX3JlZzsKIGV4dGVybiBjb25zdCBzdHJ1Y3Qg
YW1kZ3B1X25iaW9fZnVuY3MgbmJpb192N18wX2Z1bmNzOwogCiAjZW5kaWYKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L25iaW9fdjdfNC5jIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvbmJpb192N180LmMKaW5kZXggOTEwZmZmYy4uYzQxNmFiOCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbmJpb192N180LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvbmJpb192N180LmMKQEAgLTI2Niw3ICsyNjYsNyBAQCBzdGF0aWMg
dTMyIG5iaW9fdjdfNF9nZXRfcGNpZV9kYXRhX29mZnNldChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikKIAlyZXR1cm4gU09DMTVfUkVHX09GRlNFVChOQklPLCAwLCBtbVBDSUVfREFUQTIpOwog
fQogCi1zdGF0aWMgY29uc3Qgc3RydWN0IG5iaW9faGRwX2ZsdXNoX3JlZyBuYmlvX3Y3XzRfaGRw
X2ZsdXNoX3JlZyA9IHsKK2NvbnN0IHN0cnVjdCBuYmlvX2hkcF9mbHVzaF9yZWcgbmJpb192N180
X2hkcF9mbHVzaF9yZWcgPSB7CiAJLnJlZl9hbmRfbWFza19jcDAgPSBHUFVfSERQX0ZMVVNIX0RP
TkVfX0NQMF9NQVNLLAogCS5yZWZfYW5kX21hc2tfY3AxID0gR1BVX0hEUF9GTFVTSF9ET05FX19D
UDFfTUFTSywKIAkucmVmX2FuZF9tYXNrX2NwMiA9IEdQVV9IRFBfRkxVU0hfRE9ORV9fQ1AyX01B
U0ssCkBAIC0zMTYsNyArMzE2LDYgQEAgc3RhdGljIHZvaWQgbmJpb192N180X2luaXRfcmVnaXN0
ZXJzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogfQogCiBjb25zdCBzdHJ1Y3QgYW1kZ3B1
X25iaW9fZnVuY3MgbmJpb192N180X2Z1bmNzID0gewotCS5oZHBfZmx1c2hfcmVnID0gJm5iaW9f
djdfNF9oZHBfZmx1c2hfcmVnLAogCS5nZXRfaGRwX2ZsdXNoX3JlcV9vZmZzZXQgPSBuYmlvX3Y3
XzRfZ2V0X2hkcF9mbHVzaF9yZXFfb2Zmc2V0LAogCS5nZXRfaGRwX2ZsdXNoX2RvbmVfb2Zmc2V0
ID0gbmJpb192N180X2dldF9oZHBfZmx1c2hfZG9uZV9vZmZzZXQsCiAJLmdldF9wY2llX2luZGV4
X29mZnNldCA9IG5iaW9fdjdfNF9nZXRfcGNpZV9pbmRleF9vZmZzZXQsCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9uYmlvX3Y3XzQuaCBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L25iaW9fdjdfNC5oCmluZGV4IGM0NDI4NjUuLmIxYWM4MjggMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L25iaW9fdjdfNC5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L25iaW9fdjdfNC5oCkBAIC0yNiw2ICsyNiw3IEBACiAKICNpbmNsdWRl
ICJzb2MxNV9jb21tb24uaCIKIAorZXh0ZXJuIGNvbnN0IHN0cnVjdCBuYmlvX2hkcF9mbHVzaF9y
ZWcgbmJpb192N180X2hkcF9mbHVzaF9yZWc7CiBleHRlcm4gY29uc3Qgc3RydWN0IGFtZGdwdV9u
YmlvX2Z1bmNzIG5iaW9fdjdfNF9mdW5jczsKIAogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9udi5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbnYu
YwppbmRleCBhM2Q5OWYyLi40YTY1MTc2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9udi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L252LmMKQEAgLTQ1
LDYgKzQ1LDcgQEAKICNpbmNsdWRlICJnbWNfdjEwXzAuaCIKICNpbmNsdWRlICJnZnhodWJfdjJf
MC5oIgogI2luY2x1ZGUgIm1taHViX3YyXzAuaCIKKyNpbmNsdWRlICJuYmlvX3YyXzMuaCIKICNp
bmNsdWRlICJudi5oIgogI2luY2x1ZGUgIm5hdmkxMF9paC5oIgogI2luY2x1ZGUgImdmeF92MTBf
MC5oIgpAQCAtNjIsOCArNjMsOCBAQCBzdGF0aWMgdTMyIG52X3BjaWVfcnJlZyhzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwgdTMyIHJlZykKIHsKIAl1bnNpZ25lZCBsb25nIGZsYWdzLCBhZGRy
ZXNzLCBkYXRhOwogCXUzMiByOwotCWFkZHJlc3MgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNp
ZV9pbmRleF9vZmZzZXQoYWRldik7Ci0JZGF0YSA9IGFkZXYtPm5iaW9fZnVuY3MtPmdldF9wY2ll
X2RhdGFfb2Zmc2V0KGFkZXYpOworCWFkZHJlc3MgPSBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfcGNp
ZV9pbmRleF9vZmZzZXQoYWRldik7CisJZGF0YSA9IGFkZXYtPm5iaW8uZnVuY3MtPmdldF9wY2ll
X2RhdGFfb2Zmc2V0KGFkZXYpOwogCiAJc3Bpbl9sb2NrX2lycXNhdmUoJmFkZXYtPnBjaWVfaWR4
X2xvY2ssIGZsYWdzKTsKIAlXUkVHMzIoYWRkcmVzcywgcmVnKTsKQEAgLTc3LDggKzc4LDggQEAg
c3RhdGljIHZvaWQgbnZfcGNpZV93cmVnKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1MzIg
cmVnLCB1MzIgdikKIHsKIAl1bnNpZ25lZCBsb25nIGZsYWdzLCBhZGRyZXNzLCBkYXRhOwogCi0J
YWRkcmVzcyA9IGFkZXYtPm5iaW9fZnVuY3MtPmdldF9wY2llX2luZGV4X29mZnNldChhZGV2KTsK
LQlkYXRhID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfZGF0YV9vZmZzZXQoYWRldik7CisJ
YWRkcmVzcyA9IGFkZXYtPm5iaW8uZnVuY3MtPmdldF9wY2llX2luZGV4X29mZnNldChhZGV2KTsK
KwlkYXRhID0gYWRldi0+bmJpby5mdW5jcy0+Z2V0X3BjaWVfZGF0YV9vZmZzZXQoYWRldik7CiAK
IAlzcGluX2xvY2tfaXJxc2F2ZSgmYWRldi0+cGNpZV9pZHhfbG9jaywgZmxhZ3MpOwogCVdSRUcz
MihhZGRyZXNzLCByZWcpOwpAQCAtMTE4LDcgKzExOSw3IEBAIHN0YXRpYyB2b2lkIG52X2RpZHRf
d3JlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdTMyIHJlZywgdTMyIHYpCiAKIHN0YXRp
YyB1MzIgbnZfZ2V0X2NvbmZpZ19tZW1zaXplKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQog
ewotCXJldHVybiBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfbWVtc2l6ZShhZGV2KTsKKwlyZXR1cm4g
YWRldi0+bmJpby5mdW5jcy0+Z2V0X21lbXNpemUoYWRldik7CiB9CiAKIHN0YXRpYyB1MzIgbnZf
Z2V0X3hjbGsoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCkBAIC0yNzgsNyArMjc5LDcgQEAg
c3RhdGljIGludCBudl9hc2ljX21vZGUxX3Jlc2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KQogCiAJLyogd2FpdCBmb3IgYXNpYyB0byBjb21lIG91dCBvZiByZXNldCAqLwogCWZvciAoaSA9
IDA7IGkgPCBhZGV2LT51c2VjX3RpbWVvdXQ7IGkrKykgewotCQl1MzIgbWVtc2l6ZSA9IGFkZXYt
Pm5iaW9fZnVuY3MtPmdldF9tZW1zaXplKGFkZXYpOworCQl1MzIgbWVtc2l6ZSA9IGFkZXYtPm5i
aW8uZnVuY3MtPmdldF9tZW1zaXplKGFkZXYpOwogCiAJCWlmIChtZW1zaXplICE9IDB4ZmZmZmZm
ZmYpCiAJCQlicmVhazsKQEAgLTM2Miw4ICszNjMsOCBAQCBzdGF0aWMgdm9pZCBudl9wcm9ncmFt
X2FzcG0oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiBzdGF0aWMgdm9pZCBudl9lbmFibGVf
ZG9vcmJlbGxfYXBlcnR1cmUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJCQkJCWJvb2wg
ZW5hYmxlKQogewotCWFkZXYtPm5iaW9fZnVuY3MtPmVuYWJsZV9kb29yYmVsbF9hcGVydHVyZShh
ZGV2LCBlbmFibGUpOwotCWFkZXYtPm5iaW9fZnVuY3MtPmVuYWJsZV9kb29yYmVsbF9zZWxmcmlu
Z19hcGVydHVyZShhZGV2LCBlbmFibGUpOworCWFkZXYtPm5iaW8uZnVuY3MtPmVuYWJsZV9kb29y
YmVsbF9hcGVydHVyZShhZGV2LCBlbmFibGUpOworCWFkZXYtPm5iaW8uZnVuY3MtPmVuYWJsZV9k
b29yYmVsbF9zZWxmcmluZ19hcGVydHVyZShhZGV2LCBlbmFibGUpOwogfQogCiBzdGF0aWMgY29u
c3Qgc3RydWN0IGFtZGdwdV9pcF9ibG9ja192ZXJzaW9uIG52X2NvbW1vbl9pcF9ibG9jayA9CkBA
IC00MTcsOSArNDE4LDEwIEBAIGludCBudl9zZXRfaXBfYmxvY2tzKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KQogCWlmIChyKQogCQlyZXR1cm4gcjsKIAotCWFkZXYtPm5iaW9fZnVuY3MgPSAm
bmJpb192Ml8zX2Z1bmNzOworCWFkZXYtPm5iaW8uZnVuY3MgPSAmbmJpb192Ml8zX2Z1bmNzOwor
CWFkZXYtPm5iaW8uaGRwX2ZsdXNoX3JlZyA9ICZuYmlvX3YyXzNfaGRwX2ZsdXNoX3JlZzsKIAot
CWFkZXYtPm5iaW9fZnVuY3MtPmRldGVjdF9od192aXJ0KGFkZXYpOworCWFkZXYtPm5iaW8uZnVu
Y3MtPmRldGVjdF9od192aXJ0KGFkZXYpOwogCiAJc3dpdGNoIChhZGV2LT5hc2ljX3R5cGUpIHsK
IAljYXNlIENISVBfTkFWSTEwOgpAQCAtNDc0LDEyICs0NzYsMTIgQEAgaW50IG52X3NldF9pcF9i
bG9ja3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAKIHN0YXRpYyB1aW50MzJfdCBudl9n
ZXRfcmV2X2lkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogewotCXJldHVybiBhZGV2LT5u
YmlvX2Z1bmNzLT5nZXRfcmV2X2lkKGFkZXYpOworCXJldHVybiBhZGV2LT5uYmlvLmZ1bmNzLT5n
ZXRfcmV2X2lkKGFkZXYpOwogfQogCiBzdGF0aWMgdm9pZCBudl9mbHVzaF9oZHAoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBhbWRncHVfcmluZyAqcmluZykKIHsKLQlhZGV2LT5u
YmlvX2Z1bmNzLT5oZHBfZmx1c2goYWRldiwgcmluZyk7CisJYWRldi0+bmJpby5mdW5jcy0+aGRw
X2ZsdXNoKGFkZXYsIHJpbmcpOwogfQogCiBzdGF0aWMgdm9pZCBudl9pbnZhbGlkYXRlX2hkcChz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKQEAgLTY4NCw3ICs2ODYsNyBAQCBzdGF0aWMgaW50
IG52X2NvbW1vbl9od19pbml0KHZvaWQgKmhhbmRsZSkKIAkvKiBlbmFibGUgYXNwbSAqLwogCW52
X3Byb2dyYW1fYXNwbShhZGV2KTsKIAkvKiBzZXR1cCBuYmlvIHJlZ2lzdGVycyAqLwotCWFkZXYt
Pm5iaW9fZnVuY3MtPmluaXRfcmVnaXN0ZXJzKGFkZXYpOworCWFkZXYtPm5iaW8uZnVuY3MtPmlu
aXRfcmVnaXN0ZXJzKGFkZXYpOwogCS8qIGVuYWJsZSB0aGUgZG9vcmJlbGwgYXBlcnR1cmUgKi8K
IAludl9lbmFibGVfZG9vcmJlbGxfYXBlcnR1cmUoYWRldiwgdHJ1ZSk7CiAKQEAgLTg0Niw5ICs4
NDgsOSBAQCBzdGF0aWMgaW50IG52X2NvbW1vbl9zZXRfY2xvY2tnYXRpbmdfc3RhdGUodm9pZCAq
aGFuZGxlLAogCWNhc2UgQ0hJUF9OQVZJMTA6CiAJY2FzZSBDSElQX05BVkkxNDoKIAljYXNlIENI
SVBfTkFWSTEyOgotCQlhZGV2LT5uYmlvX2Z1bmNzLT51cGRhdGVfbWVkaXVtX2dyYWluX2Nsb2Nr
X2dhdGluZyhhZGV2LAorCQlhZGV2LT5uYmlvLmZ1bmNzLT51cGRhdGVfbWVkaXVtX2dyYWluX2Ns
b2NrX2dhdGluZyhhZGV2LAogCQkJCXN0YXRlID09IEFNRF9DR19TVEFURV9HQVRFID8gdHJ1ZSA6
IGZhbHNlKTsKLQkJYWRldi0+bmJpb19mdW5jcy0+dXBkYXRlX21lZGl1bV9ncmFpbl9saWdodF9z
bGVlcChhZGV2LAorCQlhZGV2LT5uYmlvLmZ1bmNzLT51cGRhdGVfbWVkaXVtX2dyYWluX2xpZ2h0
X3NsZWVwKGFkZXYsCiAJCQkJc3RhdGUgPT0gQU1EX0NHX1NUQVRFX0dBVEUgPyB0cnVlIDogZmFs
c2UpOwogCQludl91cGRhdGVfaGRwX21lbV9wb3dlcl9nYXRpbmcoYWRldiwKIAkJCQkgICBzdGF0
ZSA9PSBBTURfQ0dfU1RBVEVfR0FURSA/IHRydWUgOiBmYWxzZSk7CkBAIC04NzYsNyArODc4LDcg
QEAgc3RhdGljIHZvaWQgbnZfY29tbW9uX2dldF9jbG9ja2dhdGluZ19zdGF0ZSh2b2lkICpoYW5k
bGUsIHUzMiAqZmxhZ3MpCiAJaWYgKGFtZGdwdV9zcmlvdl92ZihhZGV2KSkKIAkJKmZsYWdzID0g
MDsKIAotCWFkZXYtPm5iaW9fZnVuY3MtPmdldF9jbG9ja2dhdGluZ19zdGF0ZShhZGV2LCBmbGFn
cyk7CisJYWRldi0+bmJpby5mdW5jcy0+Z2V0X2Nsb2NrZ2F0aW5nX3N0YXRlKGFkZXYsIGZsYWdz
KTsKIAogCS8qIEFNRF9DR19TVVBQT1JUX0hEUF9NR0NHICovCiAJdG1wID0gUlJFRzMyX1NPQzE1
KEhEUCwgMCwgbW1IRFBfQ0xLX0NOVEwpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvc2RtYV92NF8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zZG1hX3Y0
XzAuYwppbmRleCBiM2IyYzIxLi5hZGVjMjFjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9zZG1hX3Y0XzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9z
ZG1hX3Y0XzAuYwpAQCAtNzQzLDEzICs3NDMsMTMgQEAgc3RhdGljIHZvaWQgc2RtYV92NF8wX3Jp
bmdfZW1pdF9oZHBfZmx1c2goc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nKQogewogCXN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2ID0gcmluZy0+YWRldjsKIAl1MzIgcmVmX2FuZF9tYXNrID0gMDsK
LQljb25zdCBzdHJ1Y3QgbmJpb19oZHBfZmx1c2hfcmVnICpuYmlvX2hmX3JlZyA9IGFkZXYtPm5i
aW9fZnVuY3MtPmhkcF9mbHVzaF9yZWc7CisJY29uc3Qgc3RydWN0IG5iaW9faGRwX2ZsdXNoX3Jl
ZyAqbmJpb19oZl9yZWcgPSBhZGV2LT5uYmlvLmhkcF9mbHVzaF9yZWc7CiAKIAlyZWZfYW5kX21h
c2sgPSBuYmlvX2hmX3JlZy0+cmVmX2FuZF9tYXNrX3NkbWEwIDw8IHJpbmctPm1lOwogCiAJc2Rt
YV92NF8wX3dhaXRfcmVnX21lbShyaW5nLCAwLCAxLAotCQkJICAgICAgIGFkZXYtPm5iaW9fZnVu
Y3MtPmdldF9oZHBfZmx1c2hfZG9uZV9vZmZzZXQoYWRldiksCi0JCQkgICAgICAgYWRldi0+bmJp
b19mdW5jcy0+Z2V0X2hkcF9mbHVzaF9yZXFfb2Zmc2V0KGFkZXYpLAorCQkJICAgICAgIGFkZXYt
Pm5iaW8uZnVuY3MtPmdldF9oZHBfZmx1c2hfZG9uZV9vZmZzZXQoYWRldiksCisJCQkgICAgICAg
YWRldi0+bmJpby5mdW5jcy0+Z2V0X2hkcF9mbHVzaF9yZXFfb2Zmc2V0KGFkZXYpLAogCQkJICAg
ICAgIHJlZl9hbmRfbWFzaywgcmVmX2FuZF9tYXNrLCAxMCk7CiB9CiAKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NkbWFfdjVfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvc2RtYV92NV8wLmMKaW5kZXggODkxNzRlNy4uYWQ1YzM1NiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc2RtYV92NV8wLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvc2RtYV92NV8wLmMKQEAgLTQwMyw3ICs0MDMsNyBAQCBzdGF0aWMgdm9p
ZCBzZG1hX3Y1XzBfcmluZ19lbWl0X2hkcF9mbHVzaChzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcp
CiB7CiAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSByaW5nLT5hZGV2OwogCXUzMiByZWZf
YW5kX21hc2sgPSAwOwotCWNvbnN0IHN0cnVjdCBuYmlvX2hkcF9mbHVzaF9yZWcgKm5iaW9faGZf
cmVnID0gYWRldi0+bmJpb19mdW5jcy0+aGRwX2ZsdXNoX3JlZzsKKwljb25zdCBzdHJ1Y3QgbmJp
b19oZHBfZmx1c2hfcmVnICpuYmlvX2hmX3JlZyA9IGFkZXYtPm5iaW8uaGRwX2ZsdXNoX3JlZzsK
IAogCWlmIChyaW5nLT5tZSA9PSAwKQogCQlyZWZfYW5kX21hc2sgPSBuYmlvX2hmX3JlZy0+cmVm
X2FuZF9tYXNrX3NkbWEwOwpAQCAtNDEzLDggKzQxMyw4IEBAIHN0YXRpYyB2b2lkIHNkbWFfdjVf
MF9yaW5nX2VtaXRfaGRwX2ZsdXNoKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZykKIAlhbWRncHVf
cmluZ193cml0ZShyaW5nLCBTRE1BX1BLVF9IRUFERVJfT1AoU0RNQV9PUF9QT0xMX1JFR01FTSkg
fAogCQkJICBTRE1BX1BLVF9QT0xMX1JFR01FTV9IRUFERVJfSERQX0ZMVVNIKDEpIHwKIAkJCSAg
U0RNQV9QS1RfUE9MTF9SRUdNRU1fSEVBREVSX0ZVTkMoMykpOyAvKiA9PSAqLwotCWFtZGdwdV9y
aW5nX3dyaXRlKHJpbmcsIChhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfaGRwX2ZsdXNoX2RvbmVfb2Zm
c2V0KGFkZXYpKSA8PCAyKTsKLQlhbWRncHVfcmluZ193cml0ZShyaW5nLCAoYWRldi0+bmJpb19m
dW5jcy0+Z2V0X2hkcF9mbHVzaF9yZXFfb2Zmc2V0KGFkZXYpKSA8PCAyKTsKKwlhbWRncHVfcmlu
Z193cml0ZShyaW5nLCAoYWRldi0+bmJpby5mdW5jcy0+Z2V0X2hkcF9mbHVzaF9kb25lX29mZnNl
dChhZGV2KSkgPDwgMik7CisJYW1kZ3B1X3Jpbmdfd3JpdGUocmluZywgKGFkZXYtPm5iaW8uZnVu
Y3MtPmdldF9oZHBfZmx1c2hfcmVxX29mZnNldChhZGV2KSkgPDwgMik7CiAJYW1kZ3B1X3Jpbmdf
d3JpdGUocmluZywgcmVmX2FuZF9tYXNrKTsgLyogcmVmZXJlbmNlICovCiAJYW1kZ3B1X3Jpbmdf
d3JpdGUocmluZywgcmVmX2FuZF9tYXNrKTsgLyogbWFzayAqLwogCWFtZGdwdV9yaW5nX3dyaXRl
KHJpbmcsIFNETUFfUEtUX1BPTExfUkVHTUVNX0RXNV9SRVRSWV9DT1VOVCgweGZmZikgfApAQCAt
NjgwLDcgKzY4MCw3IEBAIHN0YXRpYyBpbnQgc2RtYV92NV8wX2dmeF9yZXN1bWUoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCiAJCVdSRUczMihzZG1hX3Y1XzBfZ2V0X3JlZ19vZmZzZXQoYWRl
diwgaSwgbW1TRE1BMF9HRlhfRE9PUkJFTEwpLCBkb29yYmVsbCk7CiAJCVdSRUczMihzZG1hX3Y1
XzBfZ2V0X3JlZ19vZmZzZXQoYWRldiwgaSwgbW1TRE1BMF9HRlhfRE9PUkJFTExfT0ZGU0VUKSwg
ZG9vcmJlbGxfb2Zmc2V0KTsKIAotCQlhZGV2LT5uYmlvX2Z1bmNzLT5zZG1hX2Rvb3JiZWxsX3Jh
bmdlKGFkZXYsIGksIHJpbmctPnVzZV9kb29yYmVsbCwKKwkJYWRldi0+bmJpby5mdW5jcy0+c2Rt
YV9kb29yYmVsbF9yYW5nZShhZGV2LCBpLCByaW5nLT51c2VfZG9vcmJlbGwsCiAJCQkJCQkgICAg
ICByaW5nLT5kb29yYmVsbF9pbmRleCwgMjApOwogCiAJCWlmIChhbWRncHVfc3Jpb3ZfdmYoYWRl
dikpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5jIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc29jMTUuYwppbmRleCBmZTIyMTJkZi4uZTdmMjUzOSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc29jMTUuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5jCkBAIC01Nyw2ICs1Nyw5IEBACiAjaW5jbHVk
ZSAibW1odWJfdjFfMC5oIgogI2luY2x1ZGUgImRmX3YxXzcuaCIKICNpbmNsdWRlICJkZl92M182
LmgiCisjaW5jbHVkZSAibmJpb192Nl8xLmgiCisjaW5jbHVkZSAibmJpb192N18wLmgiCisjaW5j
bHVkZSAibmJpb192N180LmgiCiAjaW5jbHVkZSAidmVnYTEwX2loLmgiCiAjaW5jbHVkZSAic2Rt
YV92NF8wLmgiCiAjaW5jbHVkZSAidXZkX3Y3XzAuaCIKQEAgLTkwLDggKzkzLDggQEAgc3RhdGlj
IHUzMiBzb2MxNV9wY2llX3JyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHUzMiByZWcp
CiB7CiAJdW5zaWduZWQgbG9uZyBmbGFncywgYWRkcmVzcywgZGF0YTsKIAl1MzIgcjsKLQlhZGRy
ZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFkZXYpOwotCWRh
dGEgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNpZV9kYXRhX29mZnNldChhZGV2KTsKKwlhZGRy
ZXNzID0gYWRldi0+bmJpby5mdW5jcy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFkZXYpOworCWRh
dGEgPSBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfcGNpZV9kYXRhX29mZnNldChhZGV2KTsKIAogCXNw
aW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7CiAJV1JFRzMyKGFk
ZHJlc3MsIHJlZyk7CkBAIC0xMDUsOCArMTA4LDggQEAgc3RhdGljIHZvaWQgc29jMTVfcGNpZV93
cmVnKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1MzIgcmVnLCB1MzIgdikKIHsKIAl1bnNp
Z25lZCBsb25nIGZsYWdzLCBhZGRyZXNzLCBkYXRhOwogCi0JYWRkcmVzcyA9IGFkZXYtPm5iaW9f
ZnVuY3MtPmdldF9wY2llX2luZGV4X29mZnNldChhZGV2KTsKLQlkYXRhID0gYWRldi0+bmJpb19m
dW5jcy0+Z2V0X3BjaWVfZGF0YV9vZmZzZXQoYWRldik7CisJYWRkcmVzcyA9IGFkZXYtPm5iaW8u
ZnVuY3MtPmdldF9wY2llX2luZGV4X29mZnNldChhZGV2KTsKKwlkYXRhID0gYWRldi0+bmJpby5m
dW5jcy0+Z2V0X3BjaWVfZGF0YV9vZmZzZXQoYWRldik7CiAKIAlzcGluX2xvY2tfaXJxc2F2ZSgm
YWRldi0+cGNpZV9pZHhfbG9jaywgZmxhZ3MpOwogCVdSRUczMihhZGRyZXNzLCByZWcpOwpAQCAt
MTIwLDggKzEyMyw4IEBAIHN0YXRpYyB1NjQgc29jMTVfcGNpZV9ycmVnNjQoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYsIHUzMiByZWcpCiB7CiAJdW5zaWduZWQgbG9uZyBmbGFncywgYWRkcmVz
cywgZGF0YTsKIAl1NjQgcjsKLQlhZGRyZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVf
aW5kZXhfb2Zmc2V0KGFkZXYpOwotCWRhdGEgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNpZV9k
YXRhX29mZnNldChhZGV2KTsKKwlhZGRyZXNzID0gYWRldi0+bmJpby5mdW5jcy0+Z2V0X3BjaWVf
aW5kZXhfb2Zmc2V0KGFkZXYpOworCWRhdGEgPSBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfcGNpZV9k
YXRhX29mZnNldChhZGV2KTsKIAogCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9s
b2NrLCBmbGFncyk7CiAJLyogcmVhZCBsb3cgMzIgYml0ICovCkBAIC0xNDEsOCArMTQ0LDggQEAg
c3RhdGljIHZvaWQgc29jMTVfcGNpZV93cmVnNjQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYs
IHUzMiByZWcsIHU2NCB2KQogewogCXVuc2lnbmVkIGxvbmcgZmxhZ3MsIGFkZHJlc3MsIGRhdGE7
CiAKLQlhZGRyZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFk
ZXYpOwotCWRhdGEgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNpZV9kYXRhX29mZnNldChhZGV2
KTsKKwlhZGRyZXNzID0gYWRldi0+bmJpby5mdW5jcy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFk
ZXYpOworCWRhdGEgPSBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfcGNpZV9kYXRhX29mZnNldChhZGV2
KTsKIAogCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7CiAJ
Lyogd3JpdGUgbG93IDMyIGJpdCAqLwpAQCAtMjYxLDcgKzI2NCw3IEBAIHN0YXRpYyB2b2lkIHNv
YzE1X3NlX2NhY193cmVnKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1MzIgcmVnLCB1MzIg
dikKIAogc3RhdGljIHUzMiBzb2MxNV9nZXRfY29uZmlnX21lbXNpemUoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpCiB7Ci0JcmV0dXJuIGFkZXYtPm5iaW9fZnVuY3MtPmdldF9tZW1zaXplKGFk
ZXYpOworCXJldHVybiBhZGV2LT5uYmlvLmZ1bmNzLT5nZXRfbWVtc2l6ZShhZGV2KTsKIH0KIAog
c3RhdGljIHUzMiBzb2MxNV9nZXRfeGNsayhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKQEAg
LTQ2MCw3ICs0NjMsNyBAQCBzdGF0aWMgaW50IHNvYzE1X2FzaWNfbW9kZTFfcmVzZXQoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAKIAkvKiB3YWl0IGZvciBhc2ljIHRvIGNvbWUgb3V0IG9m
IHJlc2V0ICovCiAJZm9yIChpID0gMDsgaSA8IGFkZXYtPnVzZWNfdGltZW91dDsgaSsrKSB7Ci0J
CXUzMiBtZW1zaXplID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X21lbXNpemUoYWRldik7CisJCXUz
MiBtZW1zaXplID0gYWRldi0+bmJpby5mdW5jcy0+Z2V0X21lbXNpemUoYWRldik7CiAKIAkJaWYg
KG1lbXNpemUgIT0gMHhmZmZmZmZmZikKIAkJCWJyZWFrOwpAQCAtNjIxLDggKzYyNCw4IEBAIHN0
YXRpYyB2b2lkIHNvYzE1X3Byb2dyYW1fYXNwbShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikK
IHN0YXRpYyB2b2lkIHNvYzE1X2VuYWJsZV9kb29yYmVsbF9hcGVydHVyZShzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiwKIAkJCQkJICAgYm9vbCBlbmFibGUpCiB7Ci0JYWRldi0+bmJpb19mdW5j
cy0+ZW5hYmxlX2Rvb3JiZWxsX2FwZXJ0dXJlKGFkZXYsIGVuYWJsZSk7Ci0JYWRldi0+bmJpb19m
dW5jcy0+ZW5hYmxlX2Rvb3JiZWxsX3NlbGZyaW5nX2FwZXJ0dXJlKGFkZXYsIGVuYWJsZSk7CisJ
YWRldi0+bmJpby5mdW5jcy0+ZW5hYmxlX2Rvb3JiZWxsX2FwZXJ0dXJlKGFkZXYsIGVuYWJsZSk7
CisJYWRldi0+bmJpby5mdW5jcy0+ZW5hYmxlX2Rvb3JiZWxsX3NlbGZyaW5nX2FwZXJ0dXJlKGFk
ZXYsIGVuYWJsZSk7CiB9CiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYW1kZ3B1X2lwX2Jsb2NrX3Zl
cnNpb24gdmVnYTEwX2NvbW1vbl9pcF9ibG9jayA9CkBAIC02MzYsNyArNjM5LDcgQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBhbWRncHVfaXBfYmxvY2tfdmVyc2lvbiB2ZWdhMTBfY29tbW9uX2lwX2Js
b2NrID0KIAogc3RhdGljIHVpbnQzMl90IHNvYzE1X2dldF9yZXZfaWQoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpCiB7Ci0JcmV0dXJuIGFkZXYtPm5iaW9fZnVuY3MtPmdldF9yZXZfaWQoYWRl
dik7CisJcmV0dXJuIGFkZXYtPm5iaW8uZnVuY3MtPmdldF9yZXZfaWQoYWRldik7CiB9CiAKIGlu
dCBzb2MxNV9zZXRfaXBfYmxvY2tzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQpAQCAtNjYy
LDEzICs2NjUsMTcgQEAgaW50IHNvYzE1X3NldF9pcF9ibG9ja3Moc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpCiAJaWYgKGFkZXYtPmFzaWNfdHlwZSA9PSBDSElQX1ZFR0EyMCB8fCBhZGV2LT5h
c2ljX3R5cGUgPT0gQ0hJUF9BUkNUVVJVUykKIAkJYWRldi0+Z21jLnhnbWkuc3VwcG9ydGVkID0g
dHJ1ZTsKIAotCWlmIChhZGV2LT5mbGFncyAmIEFNRF9JU19BUFUpCi0JCWFkZXYtPm5iaW9fZnVu
Y3MgPSAmbmJpb192N18wX2Z1bmNzOwotCWVsc2UgaWYgKGFkZXYtPmFzaWNfdHlwZSA9PSBDSElQ
X1ZFR0EyMCB8fAotCQlhZGV2LT5hc2ljX3R5cGUgPT0gQ0hJUF9BUkNUVVJVUykKLQkJYWRldi0+
bmJpb19mdW5jcyA9ICZuYmlvX3Y3XzRfZnVuY3M7Ci0JZWxzZQotCQlhZGV2LT5uYmlvX2Z1bmNz
ID0gJm5iaW9fdjZfMV9mdW5jczsKKwlpZiAoYWRldi0+ZmxhZ3MgJiBBTURfSVNfQVBVKSB7CisJ
CWFkZXYtPm5iaW8uZnVuY3MgPSAmbmJpb192N18wX2Z1bmNzOworCQlhZGV2LT5uYmlvLmhkcF9m
bHVzaF9yZWcgPSAmbmJpb192N18wX2hkcF9mbHVzaF9yZWc7CisJfSBlbHNlIGlmIChhZGV2LT5h
c2ljX3R5cGUgPT0gQ0hJUF9WRUdBMjAgfHwKKwkJICAgYWRldi0+YXNpY190eXBlID09IENISVBf
QVJDVFVSVVMpIHsKKwkJYWRldi0+bmJpby5mdW5jcyA9ICZuYmlvX3Y3XzRfZnVuY3M7CisJCWFk
ZXYtPm5iaW8uaGRwX2ZsdXNoX3JlZyA9ICZuYmlvX3Y3XzRfaGRwX2ZsdXNoX3JlZzsKKwl9IGVs
c2UgeworCQlhZGV2LT5uYmlvLmZ1bmNzID0gJm5iaW9fdjZfMV9mdW5jczsKKwkJYWRldi0+bmJp
by5oZHBfZmx1c2hfcmVnID0gJm5iaW9fdjZfMV9oZHBfZmx1c2hfcmVnOworCX0KIAogCWlmIChh
ZGV2LT5hc2ljX3R5cGUgPT0gQ0hJUF9WRUdBMjAgfHwgYWRldi0+YXNpY190eXBlID09IENISVBf
QVJDVFVSVVMpCiAJCWFkZXYtPmRmX2Z1bmNzID0gJmRmX3YzXzZfZnVuY3M7CkBAIC02NzYsNyAr
NjgzLDcgQEAgaW50IHNvYzE1X3NldF9pcF9ibG9ja3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpCiAJCWFkZXYtPmRmX2Z1bmNzID0gJmRmX3YxXzdfZnVuY3M7CiAKIAlhZGV2LT5yZXZfaWQg
PSBzb2MxNV9nZXRfcmV2X2lkKGFkZXYpOwotCWFkZXYtPm5iaW9fZnVuY3MtPmRldGVjdF9od192
aXJ0KGFkZXYpOworCWFkZXYtPm5iaW8uZnVuY3MtPmRldGVjdF9od192aXJ0KGFkZXYpOwogCiAJ
aWYgKGFtZGdwdV9zcmlvdl92ZihhZGV2KSkKIAkJYWRldi0+dmlydC5vcHMgPSAmeGdwdV9haV92
aXJ0X29wczsKQEAgLTc3Niw3ICs3ODMsNyBAQCBpbnQgc29jMTVfc2V0X2lwX2Jsb2NrcyhzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAogc3RhdGljIHZvaWQgc29jMTVfZmx1c2hfaGRwKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcpCiB7Ci0J
YWRldi0+bmJpb19mdW5jcy0+aGRwX2ZsdXNoKGFkZXYsIHJpbmcpOworCWFkZXYtPm5iaW8uZnVu
Y3MtPmhkcF9mbHVzaChhZGV2LCByaW5nKTsKIH0KIAogc3RhdGljIHZvaWQgc29jMTVfaW52YWxp
ZGF0ZV9oZHAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCkBAIC0xMjMyLDEyICsxMjM5LDEy
IEBAIHN0YXRpYyB2b2lkIHNvYzE1X2Rvb3JiZWxsX3JhbmdlX2luaXQoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpCiAJaWYgKCFhbWRncHVfc3Jpb3ZfdmYoYWRldikpIHsKIAkJZm9yIChpID0g
MDsgaSA8IGFkZXYtPnNkbWEubnVtX2luc3RhbmNlczsgaSsrKSB7CiAJCQlyaW5nID0gJmFkZXYt
PnNkbWEuaW5zdGFuY2VbaV0ucmluZzsKLQkJCWFkZXYtPm5iaW9fZnVuY3MtPnNkbWFfZG9vcmJl
bGxfcmFuZ2UoYWRldiwgaSwKKwkJCWFkZXYtPm5iaW8uZnVuY3MtPnNkbWFfZG9vcmJlbGxfcmFu
Z2UoYWRldiwgaSwKIAkJCQlyaW5nLT51c2VfZG9vcmJlbGwsIHJpbmctPmRvb3JiZWxsX2luZGV4
LAogCQkJCWFkZXYtPmRvb3JiZWxsX2luZGV4LnNkbWFfZG9vcmJlbGxfcmFuZ2UpOwogCQl9CiAK
LQkJYWRldi0+bmJpb19mdW5jcy0+aWhfZG9vcmJlbGxfcmFuZ2UoYWRldiwgYWRldi0+aXJxLmlo
LnVzZV9kb29yYmVsbCwKKwkJYWRldi0+bmJpby5mdW5jcy0+aWhfZG9vcmJlbGxfcmFuZ2UoYWRl
diwgYWRldi0+aXJxLmloLnVzZV9kb29yYmVsbCwKIAkJCQkJCWFkZXYtPmlycS5paC5kb29yYmVs
bF9pbmRleCk7CiAJfQogfQpAQCAtMTI1MSwxMyArMTI1OCwxMyBAQCBzdGF0aWMgaW50IHNvYzE1
X2NvbW1vbl9od19pbml0KHZvaWQgKmhhbmRsZSkKIAkvKiBlbmFibGUgYXNwbSAqLwogCXNvYzE1
X3Byb2dyYW1fYXNwbShhZGV2KTsKIAkvKiBzZXR1cCBuYmlvIHJlZ2lzdGVycyAqLwotCWFkZXYt
Pm5iaW9fZnVuY3MtPmluaXRfcmVnaXN0ZXJzKGFkZXYpOworCWFkZXYtPm5iaW8uZnVuY3MtPmlu
aXRfcmVnaXN0ZXJzKGFkZXYpOwogCS8qIHJlbWFwIEhEUCByZWdpc3RlcnMgdG8gYSBob2xlIGlu
IG1taW8gc3BhY2UsCiAJICogZm9yIHRoZSBwdXJwb3NlIG9mIGV4cG9zZSB0aG9zZSByZWdpc3Rl
cnMKIAkgKiB0byBwcm9jZXNzIHNwYWNlCiAJICovCi0JaWYgKGFkZXYtPm5iaW9fZnVuY3MtPnJl
bWFwX2hkcF9yZWdpc3RlcnMpCi0JCWFkZXYtPm5iaW9fZnVuY3MtPnJlbWFwX2hkcF9yZWdpc3Rl
cnMoYWRldik7CisJaWYgKGFkZXYtPm5iaW8uZnVuY3MtPnJlbWFwX2hkcF9yZWdpc3RlcnMpCisJ
CWFkZXYtPm5iaW8uZnVuY3MtPnJlbWFwX2hkcF9yZWdpc3RlcnMoYWRldik7CiAKIAkvKiBlbmFi
bGUgdGhlIGRvb3JiZWxsIGFwZXJ0dXJlICovCiAJc29jMTVfZW5hYmxlX2Rvb3JiZWxsX2FwZXJ0
dXJlKGFkZXYsIHRydWUpOwpAQCAtMTQyMCw5ICsxNDI3LDkgQEAgc3RhdGljIGludCBzb2MxNV9j
b21tb25fc2V0X2Nsb2NrZ2F0aW5nX3N0YXRlKHZvaWQgKmhhbmRsZSwKIAljYXNlIENISVBfVkVH
QTEwOgogCWNhc2UgQ0hJUF9WRUdBMTI6CiAJY2FzZSBDSElQX1ZFR0EyMDoKLQkJYWRldi0+bmJp
b19mdW5jcy0+dXBkYXRlX21lZGl1bV9ncmFpbl9jbG9ja19nYXRpbmcoYWRldiwKKwkJYWRldi0+
bmJpby5mdW5jcy0+dXBkYXRlX21lZGl1bV9ncmFpbl9jbG9ja19nYXRpbmcoYWRldiwKIAkJCQlz
dGF0ZSA9PSBBTURfQ0dfU1RBVEVfR0FURSA/IHRydWUgOiBmYWxzZSk7Ci0JCWFkZXYtPm5iaW9f
ZnVuY3MtPnVwZGF0ZV9tZWRpdW1fZ3JhaW5fbGlnaHRfc2xlZXAoYWRldiwKKwkJYWRldi0+bmJp
by5mdW5jcy0+dXBkYXRlX21lZGl1bV9ncmFpbl9saWdodF9zbGVlcChhZGV2LAogCQkJCXN0YXRl
ID09IEFNRF9DR19TVEFURV9HQVRFID8gdHJ1ZSA6IGZhbHNlKTsKIAkJc29jMTVfdXBkYXRlX2hk
cF9saWdodF9zbGVlcChhZGV2LAogCQkJCXN0YXRlID09IEFNRF9DR19TVEFURV9HQVRFID8gdHJ1
ZSA6IGZhbHNlKTsKQEAgLTE0MzcsOSArMTQ0NCw5IEBAIHN0YXRpYyBpbnQgc29jMTVfY29tbW9u
X3NldF9jbG9ja2dhdGluZ19zdGF0ZSh2b2lkICpoYW5kbGUsCiAJCWJyZWFrOwogCWNhc2UgQ0hJ
UF9SQVZFTjoKIAljYXNlIENISVBfUkVOT0lSOgotCQlhZGV2LT5uYmlvX2Z1bmNzLT51cGRhdGVf
bWVkaXVtX2dyYWluX2Nsb2NrX2dhdGluZyhhZGV2LAorCQlhZGV2LT5uYmlvLmZ1bmNzLT51cGRh
dGVfbWVkaXVtX2dyYWluX2Nsb2NrX2dhdGluZyhhZGV2LAogCQkJCXN0YXRlID09IEFNRF9DR19T
VEFURV9HQVRFID8gdHJ1ZSA6IGZhbHNlKTsKLQkJYWRldi0+bmJpb19mdW5jcy0+dXBkYXRlX21l
ZGl1bV9ncmFpbl9saWdodF9zbGVlcChhZGV2LAorCQlhZGV2LT5uYmlvLmZ1bmNzLT51cGRhdGVf
bWVkaXVtX2dyYWluX2xpZ2h0X3NsZWVwKGFkZXYsCiAJCQkJc3RhdGUgPT0gQU1EX0NHX1NUQVRF
X0dBVEUgPyB0cnVlIDogZmFsc2UpOwogCQlzb2MxNV91cGRhdGVfaGRwX2xpZ2h0X3NsZWVwKGFk
ZXYsCiAJCQkJc3RhdGUgPT0gQU1EX0NHX1NUQVRFX0dBVEUgPyB0cnVlIDogZmFsc2UpOwpAQCAt
MTQ2OCw3ICsxNDc1LDcgQEAgc3RhdGljIHZvaWQgc29jMTVfY29tbW9uX2dldF9jbG9ja2dhdGlu
Z19zdGF0ZSh2b2lkICpoYW5kbGUsIHUzMiAqZmxhZ3MpCiAJaWYgKGFtZGdwdV9zcmlvdl92Zihh
ZGV2KSkKIAkJKmZsYWdzID0gMDsKIAotCWFkZXYtPm5iaW9fZnVuY3MtPmdldF9jbG9ja2dhdGlu
Z19zdGF0ZShhZGV2LCBmbGFncyk7CisJYWRldi0+bmJpby5mdW5jcy0+Z2V0X2Nsb2NrZ2F0aW5n
X3N0YXRlKGFkZXYsIGZsYWdzKTsKIAogCS8qIEFNRF9DR19TVVBQT1JUX0hEUF9MUyAqLwogCWRh
dGEgPSBSUkVHMzIoU09DMTVfUkVHX09GRlNFVChIRFAsIDAsIG1tSERQX01FTV9QT1dFUl9MUykp
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmNuX3YyXzAuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3Zjbl92Ml8wLmMKaW5kZXggNzUyOGIxYi4uNWE1OTAw
NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmNuX3YyXzAuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92Y25fdjJfMC5jCkBAIC0yNDQsNyArMjQ0LDcg
QEAgc3RhdGljIGludCB2Y25fdjJfMF9od19pbml0KHZvaWQgKmhhbmRsZSkKIAlzdHJ1Y3QgYW1k
Z3B1X3JpbmcgKnJpbmcgPSAmYWRldi0+dmNuLmluc3QtPnJpbmdfZGVjOwogCWludCBpLCByOwog
Ci0JYWRldi0+bmJpb19mdW5jcy0+dmNuX2Rvb3JiZWxsX3JhbmdlKGFkZXYsIHJpbmctPnVzZV9k
b29yYmVsbCwKKwlhZGV2LT5uYmlvLmZ1bmNzLT52Y25fZG9vcmJlbGxfcmFuZ2UoYWRldiwgcmlu
Zy0+dXNlX2Rvb3JiZWxsLAogCQkJCQkgICAgIHJpbmctPmRvb3JiZWxsX2luZGV4LCAwKTsKIAog
CXJpbmctPnNjaGVkLnJlYWR5ID0gdHJ1ZTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L3Zjbl92Ml81LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92Y25fdjJf
NS5jCmluZGV4IDBjODRkYmMuLjI0N2NmN2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L3Zjbl92Ml81LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmNu
X3YyXzUuYwpAQCAtMjU1LDcgKzI1NSw3IEBAIHN0YXRpYyBpbnQgdmNuX3YyXzVfaHdfaW5pdCh2
b2lkICpoYW5kbGUpCiAJCQljb250aW51ZTsKIAkJcmluZyA9ICZhZGV2LT52Y24uaW5zdFtqXS5y
aW5nX2RlYzsKIAotCQlhZGV2LT5uYmlvX2Z1bmNzLT52Y25fZG9vcmJlbGxfcmFuZ2UoYWRldiwg
cmluZy0+dXNlX2Rvb3JiZWxsLAorCQlhZGV2LT5uYmlvLmZ1bmNzLT52Y25fZG9vcmJlbGxfcmFu
Z2UoYWRldiwgcmluZy0+dXNlX2Rvb3JiZWxsLAogCQkJCQkJICAgICByaW5nLT5kb29yYmVsbF9p
bmRleCwgaik7CiAKIAkJciA9IGFtZGdwdV9yaW5nX3Rlc3RfcmluZyhyaW5nKTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZlZ2ExMF9paC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvdmVnYTEwX2loLmMKaW5kZXggZjE5MjY4YS4uZDkyZmYyNSAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmVnYTEwX2loLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvdmVnYTEwX2loLmMKQEAgLTIyNCw3ICsyMjQsNyBAQCBzdGF0
aWMgaW50IHZlZ2ExMF9paF9pcnFfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAkv
KiBkaXNhYmxlIGlycXMgKi8KIAl2ZWdhMTBfaWhfZGlzYWJsZV9pbnRlcnJ1cHRzKGFkZXYpOwog
Ci0JYWRldi0+bmJpb19mdW5jcy0+aWhfY29udHJvbChhZGV2KTsKKwlhZGV2LT5uYmlvLmZ1bmNz
LT5paF9jb250cm9sKGFkZXYpOwogCiAJaWggPSAmYWRldi0+aXJxLmloOwogCS8qIFJpbmcgQnVm
ZmVyIGJhc2UuIFszOTo4XSBvZiA0MC1iaXQgYWRkcmVzcyBvZiB0aGUgYmVnaW5uaW5nIG9mIHRo
ZSByaW5nIGJ1ZmZlciovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxh
eS9hbWRncHVfc211LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9hbWRncHVfc211
LmMKaW5kZXggNmY0MzVkNi4uNDY4NDVjMWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L2FtZGdwdV9zbXUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2Vy
cGxheS9hbWRncHVfc211LmMKQEAgLTQ4Niw3ICs0ODYsNyBAQCBpbnQgc211X3VwZGF0ZV90YWJs
ZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgZW51bSBzbXVfdGFibGVfaWQgdGFibGVfaW5kZXgs
IGludAogCQlyZXR1cm4gcmV0OwogCiAJLyogZmx1c2ggaGRwIGNhY2hlICovCi0JYWRldi0+bmJp
b19mdW5jcy0+aGRwX2ZsdXNoKGFkZXYsIE5VTEwpOworCWFkZXYtPm5iaW8uZnVuY3MtPmhkcF9m
bHVzaChhZGV2LCBOVUxMKTsKIAogCWlmICghZHJ2MnNtdSkKIAkJbWVtY3B5KHRhYmxlX2RhdGEs
IHRhYmxlLT5jcHVfYWRkciwgdGFibGUtPnNpemUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9wb3dlcnBsYXkvc211bWdyL3NtdTEwX3NtdW1nci5jIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9wb3dlcnBsYXkvc211bWdyL3NtdTEwX3NtdW1nci5jCmluZGV4IDU5YjExYWMuLmMyMTMx
ZTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdW1nci9zbXUx
MF9zbXVtZ3IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9zbXVtZ3Ivc211
MTBfc211bWdyLmMKQEAgLTEzNSw3ICsxMzUsNyBAQCBzdGF0aWMgaW50IHNtdTEwX2NvcHlfdGFi
bGVfZnJvbV9zbWMoc3RydWN0IHBwX2h3bWdyICpod21nciwKIAkJCXByaXYtPnNtdV90YWJsZXMu
ZW50cnlbdGFibGVfaWRdLnRhYmxlX2lkKTsKIAogCS8qIGZsdXNoIGhkcCBjYWNoZSAqLwotCWFk
ZXYtPm5iaW9fZnVuY3MtPmhkcF9mbHVzaChhZGV2LCBOVUxMKTsKKwlhZGV2LT5uYmlvLmZ1bmNz
LT5oZHBfZmx1c2goYWRldiwgTlVMTCk7CiAKIAltZW1jcHkodGFibGUsICh1aW50OF90ICopcHJp
di0+c211X3RhYmxlcy5lbnRyeVt0YWJsZV9pZF0udGFibGUsCiAJCQlwcml2LT5zbXVfdGFibGVz
LmVudHJ5W3RhYmxlX2lkXS5zaXplKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
cG93ZXJwbGF5L3NtdW1nci92ZWdhMTBfc211bWdyLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bv
d2VycGxheS9zbXVtZ3IvdmVnYTEwX3NtdW1nci5jCmluZGV4IDhlMDdmYzEuLmViMDI0ZmUgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdW1nci92ZWdhMTBfc211
bWdyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211bWdyL3ZlZ2ExMF9z
bXVtZ3IuYwpAQCAtNTYsNyArNTYsNyBAQCBzdGF0aWMgaW50IHZlZ2ExMF9jb3B5X3RhYmxlX2Zy
b21fc21jKHN0cnVjdCBwcF9od21nciAqaHdtZ3IsCiAJCQlwcml2LT5zbXVfdGFibGVzLmVudHJ5
W3RhYmxlX2lkXS50YWJsZV9pZCk7CiAKIAkvKiBmbHVzaCBoZHAgY2FjaGUgKi8KLQlhZGV2LT5u
YmlvX2Z1bmNzLT5oZHBfZmx1c2goYWRldiwgTlVMTCk7CisJYWRldi0+bmJpby5mdW5jcy0+aGRw
X2ZsdXNoKGFkZXYsIE5VTEwpOwogCiAJbWVtY3B5KHRhYmxlLCBwcml2LT5zbXVfdGFibGVzLmVu
dHJ5W3RhYmxlX2lkXS50YWJsZSwKIAkJCXByaXYtPnNtdV90YWJsZXMuZW50cnlbdGFibGVfaWRd
LnNpemUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211bWdy
L3ZlZ2ExMl9zbXVtZ3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdW1nci92
ZWdhMTJfc211bWdyLmMKaW5kZXggYzExZGFlNy4uY2Q3MDU4YiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211bWdyL3ZlZ2ExMl9zbXVtZ3IuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9zbXVtZ3IvdmVnYTEyX3NtdW1nci5jCkBAIC02Niw3
ICs2Niw3IEBAIHN0YXRpYyBpbnQgdmVnYTEyX2NvcHlfdGFibGVfZnJvbV9zbWMoc3RydWN0IHBw
X2h3bWdyICpod21nciwKIAkJCXJldHVybiAtRUlOVkFMKTsKIAogCS8qIGZsdXNoIGhkcCBjYWNo
ZSAqLwotCWFkZXYtPm5iaW9fZnVuY3MtPmhkcF9mbHVzaChhZGV2LCBOVUxMKTsKKwlhZGV2LT5u
YmlvLmZ1bmNzLT5oZHBfZmx1c2goYWRldiwgTlVMTCk7CiAKIAltZW1jcHkodGFibGUsIHByaXYt
PnNtdV90YWJsZXMuZW50cnlbdGFibGVfaWRdLnRhYmxlLAogCQkJcHJpdi0+c211X3RhYmxlcy5l
bnRyeVt0YWJsZV9pZF0uc2l6ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bv
d2VycGxheS9zbXVtZ3IvdmVnYTIwX3NtdW1nci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dl
cnBsYXkvc211bWdyL3ZlZ2EyMF9zbXVtZ3IuYwppbmRleCAzZTk3YjgzLi4zYjVhMThhIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9zbXVtZ3IvdmVnYTIwX3NtdW1n
ci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdW1nci92ZWdhMjBfc211
bWdyLmMKQEAgLTE4OSw3ICsxODksNyBAQCBzdGF0aWMgaW50IHZlZ2EyMF9jb3B5X3RhYmxlX2Zy
b21fc21jKHN0cnVjdCBwcF9od21nciAqaHdtZ3IsCiAJCQlyZXR1cm4gcmV0KTsKIAogCS8qIGZs
dXNoIGhkcCBjYWNoZSAqLwotCWFkZXYtPm5iaW9fZnVuY3MtPmhkcF9mbHVzaChhZGV2LCBOVUxM
KTsKKwlhZGV2LT5uYmlvLmZ1bmNzLT5oZHBfZmx1c2goYWRldiwgTlVMTCk7CiAKIAltZW1jcHko
dGFibGUsIHByaXYtPnNtdV90YWJsZXMuZW50cnlbdGFibGVfaWRdLnRhYmxlLAogCQkJcHJpdi0+
c211X3RhYmxlcy5lbnRyeVt0YWJsZV9pZF0uc2l6ZSk7CkBAIC0yOTAsNyArMjkwLDcgQEAgaW50
IHZlZ2EyMF9nZXRfYWN0aXZpdHlfbW9uaXRvcl9jb2VmZihzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdy
LAogCQkJcmV0dXJuIHJldCk7CiAKIAkvKiBmbHVzaCBoZHAgY2FjaGUgKi8KLQlhZGV2LT5uYmlv
X2Z1bmNzLT5oZHBfZmx1c2goYWRldiwgTlVMTCk7CisJYWRldi0+bmJpby5mdW5jcy0+aGRwX2Zs
dXNoKGFkZXYsIE5VTEwpOwogCiAJbWVtY3B5KHRhYmxlLCBwcml2LT5zbXVfdGFibGVzLmVudHJ5
W1RBQkxFX0FDVElWSVRZX01PTklUT1JfQ09FRkZdLnRhYmxlLAogCQkJcHJpdi0+c211X3RhYmxl
cy5lbnRyeVtUQUJMRV9BQ1RJVklUWV9NT05JVE9SX0NPRUZGXS5zaXplKTsKLS0gCjIuNy40Cgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1h
aWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
