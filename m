Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C2AB9146B27
	for <lists+amd-gfx@lfdr.de>; Thu, 23 Jan 2020 15:22:54 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 22D196FD1C;
	Thu, 23 Jan 2020 14:22:53 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM11-CO1-obe.outbound.protection.outlook.com
 (mail-co1nam11on2085.outbound.protection.outlook.com [40.107.220.85])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A1FC96FD1C
 for <amd-gfx@lists.freedesktop.org>; Thu, 23 Jan 2020 14:22:51 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=W6HH/EAzWd5vtfAg/xGPAOkH1OPFNHpE63FfEzCRSjRMcfxbhA6eDL+14JMmWCsbn/1pfibkMMZ/9zNUUKT46j1R57/p0e6hz70H3kSylEJ+b6e7TLeJuc/+pbFeMRisoiMvX7DjjD1tbOZn9ogkeNt2FCK2W5E6mcOYixl4G4x8qX71aqRQmUx5Nw9FPc2lbQMMNcpmh4nS/735MLoWdsMEuPrsTufB8HHKfgRu64RnLNTROmur4052zGw2eYmeCUYrZ+h3rHu9i0srwtUWXU/gFrhSiNOX1P8YkZTogGvX76ybK0hNn5YoDJ0xe0dRLZ4xqv4ndMbjHeMyxiMn/g==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=gl0FKRuXSGz6wigd3V4uuod92PKXEn2O0+uW6muQtLg=;
 b=N5gcnguJyDF/TAFGcKzRV//Wg+dxe0Z7Ne1IN/zSEP7BLPkYFEN7vZgkXT5yBiV4nkiJXugRWWm2Ulq4LZ7zIPIBcrafdLKoYuA7MJDukncHqWR0xLXarMuC1qbofZKqZLBD5/t74noS9Fmc6YJ3FFV8DwDb05l7koSLtKzxTZvjEG0iPs5RpvElrXpnOhSeoVA1o/x6bNgIGXv1SEDT+NDH/b+UBPVBjsllR3nd0S4dfAXCA79SBrREj6GLmLwIjmj5sP6zSsN/LbPBYhooOR3CBYZKlsBDmtDq407yHUSwgJfQ+OM4fWzOAZLIzDUx07e4kENLfQP33V4niPUB/Q==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=gl0FKRuXSGz6wigd3V4uuod92PKXEn2O0+uW6muQtLg=;
 b=eZTFRVUXMDqnIu55YrOvoDraVkn0xttM5Du3DtcpAKGmBwMIk5+nVVHZwMMgeUueP832QNFj1921AeXELttObzttKW59LKbBuUrm7z9Sr93f+o3q7CQqf6h9MTOy37wqA/k/wvpcN/VQtEQ+NsocqcLywiL5Wdst80ba7AKzMbg=
Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Tom.StDenis@amd.com; 
Received: from MN2PR12MB3935.namprd12.prod.outlook.com (10.255.237.223) by
 MN2PR12MB3760.namprd12.prod.outlook.com (10.255.239.225) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2644.23; Thu, 23 Jan 2020 14:22:48 +0000
Received: from MN2PR12MB3935.namprd12.prod.outlook.com
 ([fe80::4de1:e7cb:7d68:b666]) by MN2PR12MB3935.namprd12.prod.outlook.com
 ([fe80::4de1:e7cb:7d68:b666%7]) with mapi id 15.20.2644.028; Thu, 23 Jan 2020
 14:22:48 +0000
Subject: Re: [PATCH 4/4] drm/amdgpu: rework synchronization of VM updates v3
To: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>,
 amd-gfx@lists.freedesktop.org, Felix.Kuehling@amd.com
References: <20200123142122.4084-1-christian.koenig@amd.com>
 <20200123142122.4084-4-christian.koenig@amd.com>
From: Tom St Denis <tom.stdenis@amd.com>
Message-ID: <ccc77bac-eb06-5060-f38a-c8fd9fec5a6e@amd.com>
Date: Thu, 23 Jan 2020 09:22:46 -0500
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.4.1
In-Reply-To: <20200123142122.4084-4-christian.koenig@amd.com>
Content-Language: en-US
X-ClientProxiedBy: MN2PR15CA0063.namprd15.prod.outlook.com
 (2603:10b6:208:237::32) To MN2PR12MB3935.namprd12.prod.outlook.com
 (2603:10b6:208:168::31)
MIME-Version: 1.0
Received: from localhost.localdomain (165.204.84.11) by
 MN2PR15CA0063.namprd15.prod.outlook.com (2603:10b6:208:237::32) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2665.19 via Frontend
 Transport; Thu, 23 Jan 2020 14:22:48 +0000
X-Originating-IP: [165.204.84.11]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: ed5b2678-f52d-45ab-6cb2-08d7a00fb8ee
X-MS-TrafficTypeDiagnostic: MN2PR12MB3760:|MN2PR12MB3760:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <MN2PR12MB37602F9F86E6C7555133B18BF70F0@MN2PR12MB3760.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:9508;
X-Forefront-PRVS: 029174C036
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(366004)(136003)(376002)(346002)(396003)(199004)(189003)(66556008)(66476007)(66946007)(6506007)(2906002)(15650500001)(6486002)(478600001)(66574012)(5660300002)(30864003)(53546011)(8936002)(316002)(26005)(6512007)(8676002)(16526019)(186003)(2616005)(81166006)(81156014)(36756003)(956004)(86362001)(31686004)(52116002)(31696002)(6636002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3760;
 H:MN2PR12MB3935.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 3LQBU8CSNgQvyP+sI9+t7+7fu3p3JnsbBex9q9d4nEUtG1Cda3aKWkqIEnkUCExU/VI8v8HDpnvSJ6BdfgqcSPMHI66QJENHePCAWIhuntxyqGQJ21qESn1bXse6whjK4LtaDOii5Yz7hEQMEb6Vws6H8e3j51IXKvtu+UN5HDPFupzQfhtPL1mjzC0egRML2sOsbqc/QPJGACseFHeg+I41jjoEvYc9p6FycHwbahHT5sT0s09OSq0MkLbPhVK1ftSMpTRPjfPMYXwZUlFB0LwaDzH5tuqrCa+ljCBKoaQX1lYnsLlGXht/VlMgVoZ6+TNlvNDrIoBem34ZZUYyfnPMYgWJQu+vnafgID0WhQMDrOHFSExfJY1Cs6p187IObsRC6C0q5Zx/Phqs9ON12Z82o8ZxvvstJyIzPcaeElNxE6Oq/55lBaIA7FUyf3Wy
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: ed5b2678-f52d-45ab-6cb2-08d7a00fb8ee
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 23 Jan 2020 14:22:48.6539 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: Fm3Crs8DbxY0iDhlff6ofjvB3Kr3GczoJVL7Osp3Zk71NCAiMF0axPS8hBzZCrNXhH8URIqnpUEbY36ySNCuQQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3760
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

SnVzdCBhcHBsaWVkIHRoZXNlIG5vdywgdHJ5aW5nIHRoZW0gb3V0IHdpbGwgcmVwb3J0IGJhY2sg
aW4gfjIwIG1pbnMuCgpPbiAyMDIwLTAxLTIzIDk6MjEgYS5tLiwgQ2hyaXN0aWFuIEvDtm5pZyB3
cm90ZToKPiBJZiBwcm92aWRlZCB3ZSBvbmx5IHN5bmMgdG8gdGhlIEJPcyByZXNlcnZhdGlvbgo+
IG9iamVjdCBhbmQgbm8gbG9uZ2VyIHRvIHRoZSByb290IFBELgo+Cj4gdjI6IHVwZGF0ZSBjb21t
ZW50LCBjbGVhbnVwIGFtZGdwdV9ib19zeW5jX3dhaXRfcmVzdgo+IHYzOiB1c2UgY29ycmVjdCBy
ZXNlcnZhdGlvbiBvYmplY3Qgd2hpbGUgY2xlYXJpbmcKPgo+IFNpZ25lZC1vZmYtYnk6IENocmlz
dGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KPiAtLS0KPiAgIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYyAgfCAzNyArKysrKysrKysrKysrKysr
KysrKy0tLS0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5o
ICB8ICAzICsrKwo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuYyAg
ICB8ICA3IC0tLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYyAg
ICAgIHwgNDEgKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0KPiAgIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5oICAgICAgfCAgNCArLS0KPiAgIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV92bV9jcHUuYyAgfCAyMiArKysrLS0tLS0tLS0tLS0tCj4gICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm1fc2RtYS5jIHwgMTUgKysrLS0tLS0t
LS0KPiAgIDcgZmlsZXMgY2hhbmdlZCwgNjcgaW5zZXJ0aW9ucygrKSwgNjIgZGVsZXRpb25zKC0p
Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVj
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jCj4gaW5kZXgg
NDZjNzZlMmUxMjgxLi5jNzBiYmRkYTA3OGMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X29iamVjdC5jCj4gQEAgLTE0MDMsMzAgKzE0MDMsNTEgQEAgdm9pZCBhbWRn
cHVfYm9fZmVuY2Uoc3RydWN0IGFtZGdwdV9ibyAqYm8sIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNl
LAo+ICAgfQo+ICAgCj4gICAvKioKPiAtICogYW1kZ3B1X3N5bmNfd2FpdF9yZXN2IC0gV2FpdCBm
b3IgQk8gcmVzZXJ2YXRpb24gZmVuY2VzCj4gKyAqIGFtZGdwdV9ib19zeW5jX3dhaXRfcmVzdiAt
IFdhaXQgZm9yIEJPIHJlc2VydmF0aW9uIGZlbmNlcwo+ICAgICoKPiAtICogQGJvOiBidWZmZXIg
b2JqZWN0Cj4gKyAqIEBhZGV2OiBhbWRncHUgZGV2aWNlIHBvaW50ZXIKPiArICogQHJlc3Y6IHJl
c2VydmF0aW9uIG9iamVjdCB0byBzeW5jIHRvCj4gKyAqIEBzeW5jX21vZGU6IHN5bmNocm9uaXph
dGlvbiBtb2RlCj4gICAgKiBAb3duZXI6IGZlbmNlIG93bmVyCj4gICAgKiBAaW50cjogV2hldGhl
ciB0aGUgd2FpdCBpcyBpbnRlcnJ1cHRpYmxlCj4gICAgKgo+ICsgKiBFeHRyYWN0IHRoZSBmZW5j
ZXMgZnJvbSB0aGUgcmVzZXJ2YXRpb24gb2JqZWN0IGFuZCB3YWl0cyBmb3IgdGhlbSB0byBmaW5p
c2guCj4gKyAqCj4gICAgKiBSZXR1cm5zOgo+ICAgICogMCBvbiBzdWNjZXNzLCBlcnJubyBvdGhl
cndpc2UuCj4gICAgKi8KPiAtaW50IGFtZGdwdV9ib19zeW5jX3dhaXQoc3RydWN0IGFtZGdwdV9i
byAqYm8sIHZvaWQgKm93bmVyLCBib29sIGludHIpCj4gK2ludCBhbWRncHVfYm9fc3luY193YWl0
X3Jlc3Yoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBkbWFfcmVzdiAqcmVzdiwK
PiArCQkJICAgICBlbnVtIGFtZGdwdV9zeW5jX21vZGUgc3luY19tb2RlLCB2b2lkICpvd25lciwK
PiArCQkJICAgICBib29sIGludHIpCj4gICB7Cj4gLQlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
diA9IGFtZGdwdV90dG1fYWRldihiby0+dGJvLmJkZXYpOwo+ICAgCXN0cnVjdCBhbWRncHVfc3lu
YyBzeW5jOwo+ICAgCWludCByOwo+ICAgCj4gICAJYW1kZ3B1X3N5bmNfY3JlYXRlKCZzeW5jKTsK
PiAtCWFtZGdwdV9zeW5jX3Jlc3YoYWRldiwgJnN5bmMsIGJvLT50Ym8uYmFzZS5yZXN2LAo+IC0J
CQkgQU1ER1BVX1NZTkNfTkVfT1dORVIsIG93bmVyKTsKPiAtCXIgPSBhbWRncHVfc3luY193YWl0
KCZzeW5jLCBpbnRyKTsKPiArCWFtZGdwdV9zeW5jX3Jlc3YoYWRldiwgJnN5bmMsIHJlc3YsIHN5
bmNfbW9kZSwgb3duZXIpOwo+ICsJciA9IGFtZGdwdV9zeW5jX3dhaXQoJnN5bmMsIHRydWUpOwo+
ICAgCWFtZGdwdV9zeW5jX2ZyZWUoJnN5bmMpOwo+IC0KPiAgIAlyZXR1cm4gcjsKPiAgIH0KPiAg
IAo+ICsvKioKPiArICogYW1kZ3B1X2JvX3N5bmNfd2FpdCAtIFdyYXBwZXIgZm9yIGFtZGdwdV9i
b19zeW5jX3dhaXRfcmVzdgo+ICsgKiBAYm86IGJ1ZmZlciBvYmplY3QgdG8gd2FpdCBmb3IKPiAr
ICogQG93bmVyOiBmZW5jZSBvd25lcgo+ICsgKiBAaW50cjogV2hldGhlciB0aGUgd2FpdCBpcyBp
bnRlcnJ1cHRpYmxlCj4gKyAqCj4gKyAqIFdyYXBwZXIgdG8gd2FpdCBmb3IgZmVuY2VzIGluIGEg
Qk8uCj4gKyAqIFJldHVybnM6Cj4gKyAqIDAgb24gc3VjY2VzcywgZXJybm8gb3RoZXJ3aXNlLgo+
ICsgKi8KPiAraW50IGFtZGdwdV9ib19zeW5jX3dhaXQoc3RydWN0IGFtZGdwdV9ibyAqYm8sIHZv
aWQgKm93bmVyLCBib29sIGludHIpCj4gK3sKPiArCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
ID0gYW1kZ3B1X3R0bV9hZGV2KGJvLT50Ym8uYmRldik7Cj4gKwo+ICsJcmV0dXJuIGFtZGdwdV9i
b19zeW5jX3dhaXRfcmVzdihhZGV2LCBiby0+dGJvLmJhc2UucmVzdiwKPiArCQkJCQlBTURHUFVf
U1lOQ19ORV9PV05FUiwgb3duZXIsIGludHIpOwo+ICt9Cj4gKwo+ICAgLyoqCj4gICAgKiBhbWRn
cHVfYm9fZ3B1X29mZnNldCAtIHJldHVybiBHUFUgb2Zmc2V0IG9mIGJvCj4gICAgKiBAYm86CWFt
ZGdwdSBvYmplY3QgZm9yIHdoaWNoIHdlIHF1ZXJ5IHRoZSBvZmZzZXQKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5oIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5oCj4gaW5kZXggMmVlYWZjNzdjOWMxLi45NmQ4
MDU4ODllOGQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X29iamVjdC5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVj
dC5oCj4gQEAgLTI4Myw2ICsyODMsOSBAQCB2b2lkIGFtZGdwdV9ib19yZWxlYXNlX25vdGlmeShz
dHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvKTsKPiAgIGludCBhbWRncHVfYm9fZmF1bHRfcmVz
ZXJ2ZV9ub3RpZnkoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibyk7Cj4gICB2b2lkIGFtZGdw
dV9ib19mZW5jZShzdHJ1Y3QgYW1kZ3B1X2JvICpibywgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2Us
Cj4gICAJCSAgICAgYm9vbCBzaGFyZWQpOwo+ICtpbnQgYW1kZ3B1X2JvX3N5bmNfd2FpdF9yZXN2
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgZG1hX3Jlc3YgKnJlc3YsCj4gKwkJ
CSAgICAgZW51bSBhbWRncHVfc3luY19tb2RlIHN5bmNfbW9kZSwgdm9pZCAqb3duZXIsCj4gKwkJ
CSAgICAgYm9vbCBpbnRyKTsKPiAgIGludCBhbWRncHVfYm9fc3luY193YWl0KHN0cnVjdCBhbWRn
cHVfYm8gKmJvLCB2b2lkICpvd25lciwgYm9vbCBpbnRyKTsKPiAgIHU2NCBhbWRncHVfYm9fZ3B1
X29mZnNldChzdHJ1Y3QgYW1kZ3B1X2JvICpibyk7Cj4gICBpbnQgYW1kZ3B1X2JvX3ZhbGlkYXRl
KHN0cnVjdCBhbWRncHVfYm8gKmJvKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3N5bmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9zeW5jLmMKPiBpbmRleCA5ZjQyMDMyNjc2ZGEuLmI4NjM5MjI1MzY5NiAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfc3luYy5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuYwo+IEBAIC0yNDksMTMgKzI0OSw2IEBA
IGludCBhbWRncHVfc3luY19yZXN2KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3Qg
YW1kZ3B1X3N5bmMgKnN5bmMsCj4gICAJCSAgICBvd25lciAhPSBBTURHUFVfRkVOQ0VfT1dORVJf
VU5ERUZJTkVEKQo+ICAgCQkJY29udGludWU7Cj4gICAKPiAtCQkvKiBWTSB1cGRhdGVzIG9ubHkg
c3luYyB3aXRoIG1vdmVzIGJ1dCBub3Qgd2l0aCB1c2VyCj4gLQkJICogY29tbWFuZCBzdWJtaXNz
aW9ucyBvciBLRkQgZXZpY3Rpb25zIGZlbmNlcwo+IC0JCSAqLwo+IC0JCWlmIChmZW5jZV9vd25l
ciAhPSBBTURHUFVfRkVOQ0VfT1dORVJfVU5ERUZJTkVEICYmCj4gLQkJICAgIG93bmVyID09IEFN
REdQVV9GRU5DRV9PV05FUl9WTSkKPiAtCQkJY29udGludWU7Cj4gLQo+ICAgCQkvKiBJZ25vcmUg
ZmVuY2VzIGRlcGVuZGluZyBvbiB0aGUgc3luYyBtb2RlICovCj4gICAJCXN3aXRjaCAobW9kZSkg
ewo+ICAgCQljYXNlIEFNREdQVV9TWU5DX0FMV0FZUzoKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfdm0uYwo+IGluZGV4IDBmNzljMTcxMThiZi4uYzI2OGFhMTQzODFlIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMKPiBAQCAtNzk3LDcgKzc5Nyw3IEBA
IHN0YXRpYyBpbnQgYW1kZ3B1X3ZtX2NsZWFyX2JvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LAo+ICAgCXBhcmFtcy52bSA9IHZtOwo+ICAgCXBhcmFtcy5kaXJlY3QgPSBkaXJlY3Q7Cj4gICAK
PiAtCXIgPSB2bS0+dXBkYXRlX2Z1bmNzLT5wcmVwYXJlKCZwYXJhbXMsIEFNREdQVV9GRU5DRV9P
V05FUl9LRkQsIE5VTEwpOwo+ICsJciA9IHZtLT51cGRhdGVfZnVuY3MtPnByZXBhcmUoJnBhcmFt
cywgTlVMTCwgQU1ER1BVX1NZTkNfRVhQTElDSVQpOwo+ICAgCWlmIChyKQo+ICAgCQlyZXR1cm4g
cjsKPiAgIAo+IEBAIC0xMjkzLDcgKzEyOTMsNyBAQCBpbnQgYW1kZ3B1X3ZtX3VwZGF0ZV9wZGVz
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgCXBhcmFtcy52bSA9IHZtOwo+ICAgCXBh
cmFtcy5kaXJlY3QgPSBkaXJlY3Q7Cj4gICAKPiAtCXIgPSB2bS0+dXBkYXRlX2Z1bmNzLT5wcmVw
YXJlKCZwYXJhbXMsIEFNREdQVV9GRU5DRV9PV05FUl9WTSwgTlVMTCk7Cj4gKwlyID0gdm0tPnVw
ZGF0ZV9mdW5jcy0+cHJlcGFyZSgmcGFyYW1zLCBOVUxMLCBBTURHUFVfU1lOQ19FWFBMSUNJVCk7
Cj4gICAJaWYgKHIpCj4gICAJCXJldHVybiByOwo+ICAgCj4gQEAgLTE1NTIsNyArMTU1Miw3IEBA
IHN0YXRpYyBpbnQgYW1kZ3B1X3ZtX3VwZGF0ZV9wdGVzKHN0cnVjdCBhbWRncHVfdm1fdXBkYXRl
X3BhcmFtcyAqcGFyYW1zLAo+ICAgICogQGFkZXY6IGFtZGdwdV9kZXZpY2UgcG9pbnRlcgo+ICAg
ICogQHZtOiByZXF1ZXN0ZWQgdm0KPiAgICAqIEBkaXJlY3Q6IGRpcmVjdCBzdWJtaXNzaW9uIGlu
IGEgcGFnZSBmYXVsdAo+IC0gKiBAZXhjbHVzaXZlOiBmZW5jZSB3ZSBuZWVkIHRvIHN5bmMgdG8K
PiArICogQHJlc3Y6IGZlbmNlcyB3ZSBuZWVkIHRvIHN5bmMgdG8KPiAgICAqIEBzdGFydDogc3Rh
cnQgb2YgbWFwcGVkIHJhbmdlCj4gICAgKiBAbGFzdDogbGFzdCBtYXBwZWQgZW50cnkKPiAgICAq
IEBmbGFnczogZmxhZ3MgZm9yIHRoZSBlbnRyaWVzCj4gQEAgLTE1NjcsMTQgKzE1NjcsMTQgQEAg
c3RhdGljIGludCBhbWRncHVfdm1fdXBkYXRlX3B0ZXMoc3RydWN0IGFtZGdwdV92bV91cGRhdGVf
cGFyYW1zICpwYXJhbXMsCj4gICAgKi8KPiAgIHN0YXRpYyBpbnQgYW1kZ3B1X3ZtX2JvX3VwZGF0
ZV9tYXBwaW5nKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgCQkJCSAgICAgICBzdHJ1
Y3QgYW1kZ3B1X3ZtICp2bSwgYm9vbCBkaXJlY3QsCj4gLQkJCQkgICAgICAgc3RydWN0IGRtYV9m
ZW5jZSAqZXhjbHVzaXZlLAo+ICsJCQkJICAgICAgIHN0cnVjdCBkbWFfcmVzdiAqcmVzdiwKPiAg
IAkJCQkgICAgICAgdWludDY0X3Qgc3RhcnQsIHVpbnQ2NF90IGxhc3QsCj4gICAJCQkJICAgICAg
IHVpbnQ2NF90IGZsYWdzLCB1aW50NjRfdCBhZGRyLAo+ICAgCQkJCSAgICAgICBkbWFfYWRkcl90
ICpwYWdlc19hZGRyLAo+ICAgCQkJCSAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVuY2UpCj4g
ICB7Cj4gICAJc3RydWN0IGFtZGdwdV92bV91cGRhdGVfcGFyYW1zIHBhcmFtczsKPiAtCXZvaWQg
Km93bmVyID0gQU1ER1BVX0ZFTkNFX09XTkVSX1ZNOwo+ICsJZW51bSBhbWRncHVfc3luY19tb2Rl
IHN5bmNfbW9kZTsKPiAgIAlpbnQgcjsKPiAgIAo+ICAgCW1lbXNldCgmcGFyYW1zLCAwLCBzaXpl
b2YocGFyYW1zKSk7Cj4gQEAgLTE1ODMsOSArMTU4MywxMyBAQCBzdGF0aWMgaW50IGFtZGdwdV92
bV9ib191cGRhdGVfbWFwcGluZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgIAlwYXJh
bXMuZGlyZWN0ID0gZGlyZWN0Owo+ICAgCXBhcmFtcy5wYWdlc19hZGRyID0gcGFnZXNfYWRkcjsK
PiAgIAo+IC0JLyogc3luYyB0byBldmVyeXRoaW5nIGV4Y2VwdCBldmljdGlvbiBmZW5jZXMgb24g
dW5tYXBwaW5nICovCj4gKwkvKiBJbXBsaWNpdGx5IHN5bmMgdG8gY29tbWFuZCBzdWJtaXNzaW9u
cyBpbiB0aGUgc2FtZSBWTSBiZWZvcmUKPiArCSAqIHVubWFwcGluZy4gU3luYyB0byBtb3Zpbmcg
ZmVuY2VzIGJlZm9yZSBtYXBwaW5nLgo+ICsJICovCj4gICAJaWYgKCEoZmxhZ3MgJiBBTURHUFVf
UFRFX1ZBTElEKSkKPiAtCQlvd25lciA9IEFNREdQVV9GRU5DRV9PV05FUl9LRkQ7Cj4gKwkJc3lu
Y19tb2RlID0gQU1ER1BVX1NZTkNfRVFfT1dORVI7Cj4gKwllbHNlCj4gKwkJc3luY19tb2RlID0g
QU1ER1BVX1NZTkNfRVhQTElDSVQ7Cj4gICAKPiAgIAlhbWRncHVfdm1fZXZpY3Rpb25fbG9jayh2
bSk7Cj4gICAJaWYgKHZtLT5ldmljdGluZykgewo+IEBAIC0xNTkzLDcgKzE1OTcsNyBAQCBzdGF0
aWMgaW50IGFtZGdwdV92bV9ib191cGRhdGVfbWFwcGluZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiwKPiAgIAkJZ290byBlcnJvcl91bmxvY2s7Cj4gICAJfQo+ICAgCj4gLQlyID0gdm0tPnVw
ZGF0ZV9mdW5jcy0+cHJlcGFyZSgmcGFyYW1zLCBvd25lciwgZXhjbHVzaXZlKTsKPiArCXIgPSB2
bS0+dXBkYXRlX2Z1bmNzLT5wcmVwYXJlKCZwYXJhbXMsIHJlc3YsIHN5bmNfbW9kZSk7Cj4gICAJ
aWYgKHIpCj4gICAJCWdvdG8gZXJyb3JfdW5sb2NrOwo+ICAgCj4gQEAgLTE2MTIsNyArMTYxNiw3
IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3ZtX2JvX3VwZGF0ZV9tYXBwaW5nKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LAo+ICAgICogYW1kZ3B1X3ZtX2JvX3NwbGl0X21hcHBpbmcgLSBzcGxpdCBh
IG1hcHBpbmcgaW50byBzbWFsbGVyIGNodW5rcwo+ICAgICoKPiAgICAqIEBhZGV2OiBhbWRncHVf
ZGV2aWNlIHBvaW50ZXIKPiAtICogQGV4Y2x1c2l2ZTogZmVuY2Ugd2UgbmVlZCB0byBzeW5jIHRv
Cj4gKyAqIEByZXN2OiBmZW5jZXMgd2UgbmVlZCB0byBzeW5jIHRvCj4gICAgKiBAcGFnZXNfYWRk
cjogRE1BIGFkZHJlc3NlcyB0byB1c2UgZm9yIG1hcHBpbmcKPiAgICAqIEB2bTogcmVxdWVzdGVk
IHZtCj4gICAgKiBAbWFwcGluZzogbWFwcGVkIHJhbmdlIGFuZCBmbGFncyB0byB1c2UgZm9yIHRo
ZSB1cGRhdGUKPiBAQCAtMTYyOCw3ICsxNjMyLDcgQEAgc3RhdGljIGludCBhbWRncHVfdm1fYm9f
dXBkYXRlX21hcHBpbmcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAgKiAwIGZvciBz
dWNjZXNzLCAtRUlOVkFMIGZvciBmYWlsdXJlLgo+ICAgICovCj4gICBzdGF0aWMgaW50IGFtZGdw
dV92bV9ib19zcGxpdF9tYXBwaW5nKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+IC0JCQkJ
ICAgICAgc3RydWN0IGRtYV9mZW5jZSAqZXhjbHVzaXZlLAo+ICsJCQkJICAgICAgc3RydWN0IGRt
YV9yZXN2ICpyZXN2LAo+ICAgCQkJCSAgICAgIGRtYV9hZGRyX3QgKnBhZ2VzX2FkZHIsCj4gICAJ
CQkJICAgICAgc3RydWN0IGFtZGdwdV92bSAqdm0sCj4gICAJCQkJICAgICAgc3RydWN0IGFtZGdw
dV9ib192YV9tYXBwaW5nICptYXBwaW5nLAo+IEBAIC0xNzA0LDcgKzE3MDgsNyBAQCBzdGF0aWMg
aW50IGFtZGdwdV92bV9ib19zcGxpdF9tYXBwaW5nKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LAo+ICAgCQl9Cj4gICAKPiAgIAkJbGFzdCA9IG1pbigodWludDY0X3QpbWFwcGluZy0+bGFzdCwg
c3RhcnQgKyBtYXhfZW50cmllcyAtIDEpOwo+IC0JCXIgPSBhbWRncHVfdm1fYm9fdXBkYXRlX21h
cHBpbmcoYWRldiwgdm0sIGZhbHNlLCBleGNsdXNpdmUsCj4gKwkJciA9IGFtZGdwdV92bV9ib191
cGRhdGVfbWFwcGluZyhhZGV2LCB2bSwgZmFsc2UsIHJlc3YsCj4gICAJCQkJCQlzdGFydCwgbGFz
dCwgZmxhZ3MsIGFkZHIsCj4gICAJCQkJCQlkbWFfYWRkciwgZmVuY2UpOwo+ICAgCQlpZiAocikK
PiBAQCAtMTc0Myw3ICsxNzQ3LDggQEAgaW50IGFtZGdwdV92bV9ib191cGRhdGUoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBhbWRncHVfYm9fdmEgKmJvX3ZhLAo+ICAgCWRtYV9h
ZGRyX3QgKnBhZ2VzX2FkZHIgPSBOVUxMOwo+ICAgCXN0cnVjdCB0dG1fbWVtX3JlZyAqbWVtOwo+
ICAgCXN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZXM7Cj4gLQlzdHJ1Y3QgZG1hX2ZlbmNlICpleGNs
dXNpdmUsICoqbGFzdF91cGRhdGU7Cj4gKwlzdHJ1Y3QgZG1hX2ZlbmNlICoqbGFzdF91cGRhdGU7
Cj4gKwlzdHJ1Y3QgZG1hX3Jlc3YgKnJlc3Y7Cj4gICAJdWludDY0X3QgZmxhZ3M7Cj4gICAJc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmJvX2FkZXYgPSBhZGV2Owo+ICAgCWludCByOwo+IEBAIC0xNzUx
LDcgKzE3NTYsNyBAQCBpbnQgYW1kZ3B1X3ZtX2JvX3VwZGF0ZShzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwgc3RydWN0IGFtZGdwdV9ib192YSAqYm9fdmEsCj4gICAJaWYgKGNsZWFyIHx8ICFi
bykgewo+ICAgCQltZW0gPSBOVUxMOwo+ICAgCQlub2RlcyA9IE5VTEw7Cj4gLQkJZXhjbHVzaXZl
ID0gTlVMTDsKPiArCQlyZXN2ID0gdm0tPnJvb3QuYmFzZS5iby0+dGJvLmJhc2UucmVzdjsKPiAg
IAl9IGVsc2Ugewo+ICAgCQlzdHJ1Y3QgdHRtX2RtYV90dCAqdHRtOwo+ICAgCj4gQEAgLTE3NjEs
NyArMTc2Niw3IEBAIGludCBhbWRncHVfdm1fYm9fdXBkYXRlKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LCBzdHJ1Y3QgYW1kZ3B1X2JvX3ZhICpib192YSwKPiAgIAkJCXR0bSA9IGNvbnRhaW5l
cl9vZihiby0+dGJvLnR0bSwgc3RydWN0IHR0bV9kbWFfdHQsIHR0bSk7Cj4gICAJCQlwYWdlc19h
ZGRyID0gdHRtLT5kbWFfYWRkcmVzczsKPiAgIAkJfQo+IC0JCWV4Y2x1c2l2ZSA9IGJvLT50Ym8u
bW92aW5nOwo+ICsJCXJlc3YgPSBiby0+dGJvLmJhc2UucmVzdjsKPiAgIAl9Cj4gICAKPiAgIAlp
ZiAoYm8pIHsKPiBAQCAtMTc3NSw3ICsxNzgwLDggQEAgaW50IGFtZGdwdV92bV9ib191cGRhdGUo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBhbWRncHVfYm9fdmEgKmJvX3ZhLAo+
ICAgCQlmbGFncyA9IDB4MDsKPiAgIAl9Cj4gICAKPiAtCWlmIChjbGVhciB8fCAoYm8gJiYgYm8t
PnRiby5iYXNlLnJlc3YgPT0gdm0tPnJvb3QuYmFzZS5iby0+dGJvLmJhc2UucmVzdikpCj4gKwlp
ZiAoY2xlYXIgfHwgKGJvICYmIGJvLT50Ym8uYmFzZS5yZXN2ID09Cj4gKwkJICAgICAgdm0tPnJv
b3QuYmFzZS5iby0+dGJvLmJhc2UucmVzdikpCj4gICAJCWxhc3RfdXBkYXRlID0gJnZtLT5sYXN0
X3VwZGF0ZTsKPiAgIAllbHNlCj4gICAJCWxhc3RfdXBkYXRlID0gJmJvX3ZhLT5sYXN0X3B0X3Vw
ZGF0ZTsKPiBAQCAtMTc4OSw3ICsxNzk1LDcgQEAgaW50IGFtZGdwdV92bV9ib191cGRhdGUoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBhbWRncHVfYm9fdmEgKmJvX3ZhLAo+ICAg
CX0KPiAgIAo+ICAgCWxpc3RfZm9yX2VhY2hfZW50cnkobWFwcGluZywgJmJvX3ZhLT5pbnZhbGlk
cywgbGlzdCkgewo+IC0JCXIgPSBhbWRncHVfdm1fYm9fc3BsaXRfbWFwcGluZyhhZGV2LCBleGNs
dXNpdmUsIHBhZ2VzX2FkZHIsIHZtLAo+ICsJCXIgPSBhbWRncHVfdm1fYm9fc3BsaXRfbWFwcGlu
ZyhhZGV2LCByZXN2LCBwYWdlc19hZGRyLCB2bSwKPiAgIAkJCQkJICAgICAgIG1hcHBpbmcsIGZs
YWdzLCBib19hZGV2LCBub2RlcywKPiAgIAkJCQkJICAgICAgIGxhc3RfdXBkYXRlKTsKPiAgIAkJ
aWYgKHIpCj4gQEAgLTE5ODQsNiArMTk5MCw3IEBAIGludCBhbWRncHVfdm1fY2xlYXJfZnJlZWQo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAJCQkgIHN0cnVjdCBhbWRncHVfdm0gKnZt
LAo+ICAgCQkJICBzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVuY2UpCj4gICB7Cj4gKwlzdHJ1Y3QgZG1h
X3Jlc3YgKnJlc3YgPSB2bS0+cm9vdC5iYXNlLmJvLT50Ym8uYmFzZS5yZXN2Owo+ICAgCXN0cnVj
dCBhbWRncHVfYm9fdmFfbWFwcGluZyAqbWFwcGluZzsKPiAgIAl1aW50NjRfdCBpbml0X3B0ZV92
YWx1ZSA9IDA7Cj4gICAJc3RydWN0IGRtYV9mZW5jZSAqZiA9IE5VTEw7Cj4gQEAgLTE5OTgsNyAr
MjAwNSw3IEBAIGludCBhbWRncHVfdm1fY2xlYXJfZnJlZWQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsCj4gICAJCSAgICBtYXBwaW5nLT5zdGFydCA8IEFNREdQVV9HTUNfSE9MRV9TVEFSVCkK
PiAgIAkJCWluaXRfcHRlX3ZhbHVlID0gQU1ER1BVX1BURV9ERUZBVUxUX0FUQzsKPiAgIAo+IC0J
CXIgPSBhbWRncHVfdm1fYm9fdXBkYXRlX21hcHBpbmcoYWRldiwgdm0sIGZhbHNlLCBOVUxMLAo+
ICsJCXIgPSBhbWRncHVfdm1fYm9fdXBkYXRlX21hcHBpbmcoYWRldiwgdm0sIGZhbHNlLCByZXN2
LAo+ICAgCQkJCQkJbWFwcGluZy0+c3RhcnQsIG1hcHBpbmctPmxhc3QsCj4gICAJCQkJCQlpbml0
X3B0ZV92YWx1ZSwgMCwgTlVMTCwgJmYpOwo+ICAgCQlhbWRncHVfdm1fZnJlZV9tYXBwaW5nKGFk
ZXYsIHZtLCBtYXBwaW5nLCBmKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3ZtLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0u
aAo+IGluZGV4IGMyMWEzNmJlYmMwYy4uYjU3MDVmY2ZjOTM1IDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmgKPiBAQCAtMjMwLDggKzIzMCw4IEBAIHN0cnVjdCBhbWRn
cHVfdm1fdXBkYXRlX3BhcmFtcyB7Cj4gICAKPiAgIHN0cnVjdCBhbWRncHVfdm1fdXBkYXRlX2Z1
bmNzIHsKPiAgIAlpbnQgKCptYXBfdGFibGUpKHN0cnVjdCBhbWRncHVfYm8gKmJvKTsKPiAtCWlu
dCAoKnByZXBhcmUpKHN0cnVjdCBhbWRncHVfdm1fdXBkYXRlX3BhcmFtcyAqcCwgdm9pZCAqIG93
bmVyLAo+IC0JCSAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpleGNsdXNpdmUpOwo+ICsJaW50ICgq
cHJlcGFyZSkoc3RydWN0IGFtZGdwdV92bV91cGRhdGVfcGFyYW1zICpwLCBzdHJ1Y3QgZG1hX3Jl
c3YgKnJlc3YsCj4gKwkJICAgICAgIGVudW0gYW1kZ3B1X3N5bmNfbW9kZSBzeW5jX21vZGUpOwo+
ICAgCWludCAoKnVwZGF0ZSkoc3RydWN0IGFtZGdwdV92bV91cGRhdGVfcGFyYW1zICpwLAo+ICAg
CQkgICAgICBzdHJ1Y3QgYW1kZ3B1X2JvICpibywgdWludDY0X3QgcGUsIHVpbnQ2NF90IGFkZHIs
Cj4gICAJCSAgICAgIHVuc2lnbmVkIGNvdW50LCB1aW50MzJfdCBpbmNyLCB1aW50NjRfdCBmbGFn
cyk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bV9j
cHUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bV9jcHUuYwo+IGluZGV4
IDY4YjAxM2JlMzgzNy4uZTM4NTE2MzA0MDcwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV92bV9jcHUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV92bV9jcHUuYwo+IEBAIC00NCwyNiArNDQsMTQgQEAgc3RhdGljIGludCBh
bWRncHVfdm1fY3B1X21hcF90YWJsZShzdHJ1Y3QgYW1kZ3B1X2JvICp0YWJsZSkKPiAgICAqIFJl
dHVybnM6Cj4gICAgKiBOZWdhdGl2IGVycm5vLCAwIGZvciBzdWNjZXNzLgo+ICAgICovCj4gLXN0
YXRpYyBpbnQgYW1kZ3B1X3ZtX2NwdV9wcmVwYXJlKHN0cnVjdCBhbWRncHVfdm1fdXBkYXRlX3Bh
cmFtcyAqcCwgdm9pZCAqb3duZXIsCj4gLQkJCQkgc3RydWN0IGRtYV9mZW5jZSAqZXhjbHVzaXZl
KQo+ICtzdGF0aWMgaW50IGFtZGdwdV92bV9jcHVfcHJlcGFyZShzdHJ1Y3QgYW1kZ3B1X3ZtX3Vw
ZGF0ZV9wYXJhbXMgKnAsCj4gKwkJCQkgc3RydWN0IGRtYV9yZXN2ICpyZXN2LAo+ICsJCQkJIGVu
dW0gYW1kZ3B1X3N5bmNfbW9kZSBzeW5jX21vZGUpCj4gICB7Cj4gLQlpbnQgcjsKPiAtCj4gLQkv
KiBXYWl0IGZvciBhbnkgQk8gbW92ZSB0byBiZSBjb21wbGV0ZWQgKi8KPiAtCWlmIChleGNsdXNp
dmUpIHsKPiAtCQlyID0gZG1hX2ZlbmNlX3dhaXQoZXhjbHVzaXZlLCB0cnVlKTsKPiAtCQlpZiAo
dW5saWtlbHkocikpCj4gLQkJCXJldHVybiByOwo+IC0JfQo+IC0KPiAtCS8qIERvbid0IHdhaXQg
Zm9yIHN1Ym1pc3Npb25zIGR1cmluZyBwYWdlIGZhdWx0ICovCj4gLQlpZiAocC0+ZGlyZWN0KQo+
ICsJaWYgKCFyZXN2KQo+ICAgCQlyZXR1cm4gMDsKPiAgIAo+IC0JLyogV2FpdCBmb3IgUFQgQk9z
IHRvIGJlIGlkbGUuIFBUcyBzaGFyZSB0aGUgc2FtZSByZXN2LiBvYmplY3QKPiAtCSAqIGFzIHRo
ZSByb290IFBEIEJPCj4gLQkgKi8KPiAtCXJldHVybiBhbWRncHVfYm9fc3luY193YWl0KHAtPnZt
LT5yb290LmJhc2UuYm8sIG93bmVyLCB0cnVlKTsKPiArCXJldHVybiBhbWRncHVfYm9fc3luY193
YWl0X3Jlc3YocC0+YWRldiwgcmVzdiwgc3luY19tb2RlLCBwLT52bSwgdHJ1ZSk7Cj4gICB9Cj4g
ICAKPiAgIC8qKgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdm1fc2RtYS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtX3NkbWEu
Ywo+IGluZGV4IGFiNjQ4MTc1MTc2My4uNGNjNzg4MWY0MzhjIDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bV9zZG1hLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm1fc2RtYS5jCj4gQEAgLTU4LDkgKzU4LDkgQEAgc3Rh
dGljIGludCBhbWRncHVfdm1fc2RtYV9tYXBfdGFibGUoc3RydWN0IGFtZGdwdV9ibyAqdGFibGUp
Cj4gICAgKiBOZWdhdGl2IGVycm5vLCAwIGZvciBzdWNjZXNzLgo+ICAgICovCj4gICBzdGF0aWMg
aW50IGFtZGdwdV92bV9zZG1hX3ByZXBhcmUoc3RydWN0IGFtZGdwdV92bV91cGRhdGVfcGFyYW1z
ICpwLAo+IC0JCQkJICB2b2lkICpvd25lciwgc3RydWN0IGRtYV9mZW5jZSAqZXhjbHVzaXZlKQo+
ICsJCQkJICBzdHJ1Y3QgZG1hX3Jlc3YgKnJlc3YsCj4gKwkJCQkgIGVudW0gYW1kZ3B1X3N5bmNf
bW9kZSBzeW5jX21vZGUpCj4gICB7Cj4gLQlzdHJ1Y3QgYW1kZ3B1X2JvICpyb290ID0gcC0+dm0t
PnJvb3QuYmFzZS5ibzsKPiAgIAl1bnNpZ25lZCBpbnQgbmR3ID0gQU1ER1BVX1ZNX1NETUFfTUlO
X05VTV9EVzsKPiAgIAlpbnQgcjsKPiAgIAo+IEBAIC03MCwxNyArNzAsMTAgQEAgc3RhdGljIGlu
dCBhbWRncHVfdm1fc2RtYV9wcmVwYXJlKHN0cnVjdCBhbWRncHVfdm1fdXBkYXRlX3BhcmFtcyAq
cCwKPiAgIAo+ICAgCXAtPm51bV9kd19sZWZ0ID0gbmR3Owo+ICAgCj4gLQkvKiBXYWl0IGZvciBt
b3ZlcyB0byBiZSBjb21wbGV0ZWQgKi8KPiAtCXIgPSBhbWRncHVfc3luY19mZW5jZSgmcC0+am9i
LT5zeW5jLCBleGNsdXNpdmUsIGZhbHNlKTsKPiAtCWlmIChyKQo+IC0JCXJldHVybiByOwo+IC0K
PiAtCS8qIERvbid0IHdhaXQgZm9yIGFueSBzdWJtaXNzaW9ucyBkdXJpbmcgcGFnZSBmYXVsdCBo
YW5kbGluZyAqLwo+IC0JaWYgKHAtPmRpcmVjdCkKPiArCWlmICghcmVzdikKPiAgIAkJcmV0dXJu
IDA7Cj4gICAKPiAtCXJldHVybiBhbWRncHVfc3luY19yZXN2KHAtPmFkZXYsICZwLT5qb2ItPnN5
bmMsIHJvb3QtPnRiby5iYXNlLnJlc3YsCj4gLQkJCQlBTURHUFVfU1lOQ19ORV9PV05FUiwgb3du
ZXIpOwo+ICsJcmV0dXJuIGFtZGdwdV9zeW5jX3Jlc3YocC0+YWRldiwgJnAtPmpvYi0+c3luYywg
cmVzdiwgc3luY19tb2RlLCBwLT52bSk7Cj4gICB9Cj4gICAKPiAgIC8qKgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAph
bWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZngK
