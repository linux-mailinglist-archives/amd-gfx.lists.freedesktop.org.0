Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 137B731C146
	for <lists+amd-gfx@lfdr.de>; Mon, 15 Feb 2021 19:17:04 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7E07D89D61;
	Mon, 15 Feb 2021 18:17:02 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-CY1-obe.outbound.protection.outlook.com
 (mail-eopbgr760045.outbound.protection.outlook.com [40.107.76.45])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D126889D61
 for <amd-gfx@lists.freedesktop.org>; Mon, 15 Feb 2021 18:17:01 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=BRWkELM2aITla7GxEFrQ0f+uhUSPuxQe5UyBH4kq4hvql4NxPNzyRXic+pWIZyMwm+6o6JOdD4eVPnCG5ev9Z5yz+SHgHYI7yZmvgczFSqH/dHaSnMhTUDhaDgC8EaG2w1HFHNvQrf920eeLE18XMoMRdaSXnFMUbhdBFo9rGRSgWtB28FfOd758uRMmEUETu440bGdu7kp+gw4LM5X4N9cCh2XkyhTNzshp0Jiuo3MFO+Kayasi+6/Rt5aUKnW0PJUPCB7d3Tcg1miqVb2LnZA2syc6BA/t/Qv6rHc0XQXYZYBEC13ur+2VJcHQmfp06K8DVeCjXaLApmbMggi+gg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=PSQyFS3hIu4fTqTtyI/0Dhz66kdxNvDyrzyeMUd1Vjs=;
 b=H1Ym4/5jjns0H8XLp4ZWUd+1Rt6Yoeov+7ihKP5dBby9OIVL2o05S7gnym4qJHVFSccEStX8pLPO0WFi70juPivEhCCBmhEx5DBx0ZaRACUrH2B+tHDrjAv+RS5P2xgQtoy2WnMRU578CmGwzf3VvEvNpXIr5+cVn4JXF2ragIoJJ1ETPBJy6udYo8ZeS3CHAKwZIlxToErmln9OaMIjHNL65uerSy0nHo6knW8drsQ9ZbRCcdKUwe0Ysi7n80fg+FDy9gvN/AUW9eMEN7rhgpMqpFunAFrjiPXFO2iLKZ09xgZ9ZZphhn5UVnJ89gLtNFGPfVwSw6Ecn+BXCRs/NA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=PSQyFS3hIu4fTqTtyI/0Dhz66kdxNvDyrzyeMUd1Vjs=;
 b=K1dVx3mqeR7gPTwYWeKzeTBJKpO4r/FTj2EtcIpNQcIoDZduCMayiFcCDPzPY17+0w7uXiAVipZV9P0grxxQ0BCXuS1xiXIKe5Pu85w0fVnERLrQSOj9sEfG6qYBFQiqSbfjnnUbf8JTJFz0iDs7/eyCI+0vWagbp07y0Sp8Dmc=
Authentication-Results: amd.com; dkim=none (message not signed)
 header.d=none;amd.com; dmarc=none action=none header.from=amd.com;
Received: from DM6PR12MB3916.namprd12.prod.outlook.com (2603:10b6:5:1ca::21)
 by DM6PR12MB4911.namprd12.prod.outlook.com (2603:10b6:5:20e::22) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3846.27; Mon, 15 Feb
 2021 18:16:59 +0000
Received: from DM6PR12MB3916.namprd12.prod.outlook.com
 ([fe80::452c:77af:fea7:a633]) by DM6PR12MB3916.namprd12.prod.outlook.com
 ([fe80::452c:77af:fea7:a633%6]) with mapi id 15.20.3846.039; Mon, 15 Feb 2021
 18:16:59 +0000
From: Nirmoy Das <nirmoy.das@amd.com>
To: Christian.Koenig@amd.com
Subject: [PATCH 2/2] drm/radeon: do not use drm middle layer for debugfs
Date: Mon, 15 Feb 2021 19:16:19 +0100
Message-Id: <20210215181619.69377-2-nirmoy.das@amd.com>
X-Mailer: git-send-email 2.30.0
In-Reply-To: <20210215181619.69377-1-nirmoy.das@amd.com>
References: <20210215181619.69377-1-nirmoy.das@amd.com>
X-Originating-IP: [93.229.46.81]
X-ClientProxiedBy: FR2P281CA0004.DEUP281.PROD.OUTLOOK.COM
 (2603:10a6:d10:a::14) To DM6PR12MB3916.namprd12.prod.outlook.com
 (2603:10b6:5:1ca::21)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from brihaspati.fritz.box (93.229.46.81) by
 FR2P281CA0004.DEUP281.PROD.OUTLOOK.COM (2603:10a6:d10:a::14) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3868.11 via Frontend Transport; Mon, 15 Feb 2021 18:16:58 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: 25c7c4bc-1057-487b-23d1-08d8d1dde2c2
X-MS-TrafficTypeDiagnostic: DM6PR12MB4911:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <DM6PR12MB491120943468549BB8B0298A8B889@DM6PR12MB4911.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:3826;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 8pC+em3nPyuaRJF7/QmGFiny11vJ2d0NEWZ+Fg+3Ck/603u4a826lNkTdFBE/NUDDuKdT244Q5CPdbx4eDFsg8fTA2rb4J146MGR2Q5H+CjQpyL5s8pUTLPAoUuwLXvBACP8xAaWzS5CEBau7tumODGfyLYTdsiaUzN8ylzi/NW4YBj2TWQuY0dLchA/j87wlsYUgH9S1rB/QThkNVTmzRx4fHspYLITF0w9Vd5m0vbxzDG9SmK3edM3bf5AzAJZbeCtbAt866DIi5j8Wwl3Gsf03uP1cxNtbljU0EoKJKapi3fArgWYrJEHJwZMBjrbEUzpTyDY7RKrevMnLrT6NoVKRxqPJjiI0zmA1aRFAZIdAZfEym27eIMqaFS/VHhfO9U8YR6h/aGrzTv5JSS4cWhNulGrfNB3xWjx2B9FWXlzGaZYwzhRS9oqob6OUWejrleaxaDRxSyhnmAzmbRKCC8xzekBHHtafHxFPNY50SQKiB/JUHoJQv1Lc9joOknhcVKcisRf+oZiD3orEtd2bw==
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM6PR12MB3916.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(396003)(366004)(376002)(346002)(136003)(39860400002)(83380400001)(478600001)(37006003)(30864003)(6486002)(316002)(66574015)(6512007)(5660300002)(6666004)(66946007)(36756003)(66556008)(8676002)(1076003)(6506007)(26005)(44832011)(52116002)(4326008)(956004)(66476007)(34206002)(186003)(86362001)(2616005)(6636002)(16526019)(8936002)(2906002)(579004);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: =?utf-8?B?RjUrajQrcUJiZDd0WFV5Y2c1TmFzUng3RWNoVEluY3V2NXlzVW9NU3ovalFj?=
 =?utf-8?B?UWYwUENWK1NjR01uNzhwUEc0WWNkMHhZWkJEU2Y5MTFPZVdTYVJrb0FMOWZp?=
 =?utf-8?B?UUhnMTJQamQ5Y1kyM1liOVRwQVJzMUJ2WXdrT0xlTmZ0QkxtSzlRNTBDbkN0?=
 =?utf-8?B?WUlQNzNRbW5WZ2tUTHJkM2hEZkJ4OUpuNmdXN3FRbkZWOGJuMk4rbGpCcWtO?=
 =?utf-8?B?SXFVVmpKUG5hR1BrQ0kreDZCdlhCYkpIeHRncU1LaTZpRWR5WjQwdTgvYmhH?=
 =?utf-8?B?LzNmV2NQNkFlU3k4YWpXUkJrOWI2cncrMDduS21XYjhCUDlYa2oyKzZwRFl4?=
 =?utf-8?B?VXBlNHVIYmZNTlUwMzR6cFFtcG02OUYrT25ZaEU2aU5PSEJPbzFCaVNuY05T?=
 =?utf-8?B?NCtubS9Fa2tsUjd4NHY5VFBwdlJIRHN1NUxSSUo1bzVEZzRibkF6cHBnNVdJ?=
 =?utf-8?B?emZrWGs1czVmL3F6bVdNTEtZNE5QeU10KytTcjNtcEc3VjNDQklGZUFyTWV4?=
 =?utf-8?B?RkREazhwNUttd0pHeGpzYmYxQmFhVno5eUhLTGR4T1ZsZUhxVHZ5SkVJSFpS?=
 =?utf-8?B?Y2FGcDYwOVdXVEpoTVJaU1F3RGd2bStLYys3d2hLeWhJV3Y4Nk9lT2djcXVI?=
 =?utf-8?B?aC91UXdCN25OYm0wZERKdHlZT1JHUVFrRTdpYWNScEFJeHAydjRVNFZIcmo3?=
 =?utf-8?B?QkhTcmNWcEE5eVU4OVprUUpMRFNlbFdvaWNDcUgvRE52WkMwbDNTTDFHbXhK?=
 =?utf-8?B?aXNMdmFzVTRNL3U5UFFPU0kwb1pDbW9zcUpqa0FJSE4rL1RMTVlWY1FlZHZZ?=
 =?utf-8?B?OFZ2RWF6bXFBZ2ErSk0vdm9oSy81ZWdBZVNxNWp2NmEvRVEwLyt4Q1I1dStR?=
 =?utf-8?B?WXJrQk5mR3N2SEhlUjVia1AxVndYZG8yeUk3L05xRFpSaWthQWZCdEJlU1FD?=
 =?utf-8?B?Z0lOVFUycWJGVy9iSE1YVzZJc1U3c21JQWJtNHpPd09ZYlFONmtVNDBNZmEr?=
 =?utf-8?B?UVRONDdFVlhyeHN5SkkvS0tZaDZseHV2NzcvSExOMHlVdGdlME9hOTJWWCtu?=
 =?utf-8?B?WW55c3dSZWhOYXRndUVZckVpQlB0OWQ2M3FDejQ2S2QxMDVUbTNqQ0tyVzVl?=
 =?utf-8?B?Q0wrdVVHa0hNZmVTejdYTVc1SFN6WkVOMWVvWFFTWjkxWFh0bGhibys1b1RC?=
 =?utf-8?B?Ny8rbVhFa09EV21CcFAzZ04vMFZaTTA0alVTekszSjhETXVvd0tuME1DWGJp?=
 =?utf-8?B?cXhYNVBwS1Z6U0RoWk1wTW5IYlpqVGVIblBSWnFpVGtkZDM4VXRXcWpuUzM3?=
 =?utf-8?B?d2VJTEVVdjlWdjY4Y1pRT1pDVUMwY1ZvNm5rSUs5dllaYXF1c1FWRXJLdjJa?=
 =?utf-8?B?Uy85U1FrdHpJLzJiS250KzMzU0VYRGdlM3NvendsTTZxN2NlNFoxM24zdXRG?=
 =?utf-8?B?NzRBYUQyaHM3U05zR3VqS1o2VVFuVjdQcE5kYWZ0SFRYcjgvcUFSY2p6ZzJ4?=
 =?utf-8?B?UC9Ga080YUJhOG1xdUJVNUI2eDdzOTBKdGYwWjA3WHZEcVpvQ2QyS1ZiVnV5?=
 =?utf-8?B?QmhUK2hua1g3cFlTbzNoeVpxSHA4V3dPS1FDSVNNRHNyWnFXd3pCbjBTVFhu?=
 =?utf-8?B?VGxrT0JnVjJtWDJ3MGgwN1pPanI4bkpSY2FKdVNkRHgvZ1pBWHlQM0VoU2JV?=
 =?utf-8?B?bnozamhnNXN6RzZ3ZGJzRTU2UVVhNlBUUnRRY0N3NHZ1SlFlcDhCS1ZmQVNS?=
 =?utf-8?Q?w8XPAeQN+9B8X6gEzw23d2cakHRsB2jDOczhfed?=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 25c7c4bc-1057-487b-23d1-08d8d1dde2c2
X-MS-Exchange-CrossTenant-AuthSource: DM6PR12MB3916.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 15 Feb 2021 18:16:59.7665 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: pYLcz2a2L9BzxkqN6smOq5OV6XKVhNgYhw3uY09sflFQUZl9Y//im+6ndCQugkBxGKcG72igw+yKoP8bNx6ENA==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB4911
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Nirmoy Das <nirmoy.das@amd.com>, amd-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

VXNlIGRlYnVnZnMgQVBJIGRpcmVjdGx5IGluc3RlYWQgb2YgZHJtIG1pZGRsZSBsYXllci4KClNp
Z25lZC1vZmYtYnk6IE5pcm1veSBEYXMgPG5pcm1veS5kYXNAYW1kLmNvbT4KLS0tCiBkcml2ZXJz
L2dwdS9kcm0vcmFkZW9uL3IxMDAuYyAgICAgICAgICB8IDg0ICsrKysrKysrKy0tLS0tLS0tLS0t
LS0tLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yMzAwLmMgICAgICAgICAgfCAyNyArKysrLS0t
LQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yNDIwLmMgICAgICAgICAgfCAyOCArKystLS0tLQog
ZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yNjAwLmMgICAgICAgICAgfCAyNyArKysrLS0tLQogZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb24uaCAgICAgICAgfCAxNiArLS0tLQogZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yYWRlb25fYXNpYy5oICAgfCAgNiArLQogZHJpdmVycy9ncHUvZHJtL3Jh
ZGVvbi9yYWRlb25fZGV2aWNlLmMgfCA0NyArLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9yYWRlb25fZHBfbXN0LmMgfCAyMCArKystLS0KIGRyaXZlcnMvZ3B1L2RybS9yYWRl
b24vcmFkZW9uX2ZlbmNlLmMgIHwgNDIgKysrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl9nZW0uYyAgICB8IDIwICsrKy0tLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25faWIuYyAgICAgfCAyNiArKystLS0tLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fbW9kZS5oICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fcG0uYyAg
ICAgfCAzMiArKysrLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3JpbmcuYyAg
IHwgNzkgKysrKysrKysrKystLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fdHRtLmMgICAgfCA5MCArKysrKysrKysrKysrKysrLS0tLS0tLS0tLQogZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yczQwMC5jICAgICAgICAgfCAyNSArKystLS0tCiBkcml2ZXJzL2dwdS9kcm0v
cmFkZW9uL3JzNjAwLmMgICAgICAgICB8ICA4ICstLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
djUxNS5jICAgICAgICAgfCA1NiArKysrLS0tLS0tLS0tLS0tCiAxOCBmaWxlcyBjaGFuZ2VkLCAy
NDggaW5zZXJ0aW9ucygrKSwgMzg3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9yYWRlb24vcjEwMC5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yMTAwLmMKaW5k
ZXggYWVmNGVmYzY5MmIxLi44OTQwYWU5ZDYwYzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9yYWRlb24vcjEwMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcjEwMC5jCkBAIC0z
Miw3ICszMiw2IEBACiAjaW5jbHVkZSA8bGludXgvc2VxX2ZpbGUuaD4KICNpbmNsdWRlIDxsaW51
eC9zbGFiLmg+CiAKLSNpbmNsdWRlIDxkcm0vZHJtX2RlYnVnZnMuaD4KICNpbmNsdWRlIDxkcm0v
ZHJtX2RldmljZS5oPgogI2luY2x1ZGUgPGRybS9kcm1fZmlsZS5oPgogI2luY2x1ZGUgPGRybS9k
cm1fZm91cmNjLmg+CkBAIC0xMTIxLDkgKzExMjAsNyBAQCBpbnQgcjEwMF9jcF9pbml0KHN0cnVj
dCByYWRlb25fZGV2aWNlICpyZGV2LCB1bnNpZ25lZCByaW5nX3NpemUpCiAJdWludDMyX3QgdG1w
OwogCWludCByOwogCi0JaWYgKHIxMDBfZGVidWdmc19jcF9pbml0KHJkZXYpKSB7Ci0JCURSTV9F
UlJPUigiRmFpbGVkIHRvIHJlZ2lzdGVyIGRlYnVnZnMgZmlsZSBmb3IgQ1AgIVxuIik7Ci0JfQor
CXIxMDBfZGVidWdmc19jcF9pbml0KHJkZXYpOwogCWlmICghcmRldi0+bWVfZncpIHsKIAkJciA9
IHIxMDBfY3BfaW5pdF9taWNyb2NvZGUocmRldik7CiAJCWlmIChyKSB7CkBAIC0yOTIxLDExICsy
OTE4LDkgQEAgc3RhdGljIHZvaWQgcjEwMF9zZXRfc2FmZV9yZWdpc3RlcnMoc3RydWN0IHJhZGVv
bl9kZXZpY2UgKnJkZXYpCiAgKiBEZWJ1Z2ZzIGluZm8KICAqLwogI2lmIGRlZmluZWQoQ09ORklH
X0RFQlVHX0ZTKQotc3RhdGljIGludCByMTAwX2RlYnVnZnNfcmJibV9pbmZvKHN0cnVjdCBzZXFf
ZmlsZSAqbSwgdm9pZCAqZGF0YSkKK3N0YXRpYyBpbnQgcjEwMF9kZWJ1Z2ZzX3JiYm1faW5mb19z
aG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQogewotCXN0cnVjdCBkcm1faW5m
b19ub2RlICpub2RlID0gKHN0cnVjdCBkcm1faW5mb19ub2RlICopIG0tPnByaXZhdGU7Ci0Jc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiA9IG5vZGUtPm1pbm9yLT5kZXY7Ci0Jc3RydWN0IHJhZGVvbl9k
ZXZpY2UgKnJkZXYgPSBkZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCByYWRlb25fZGV2aWNlICpy
ZGV2ID0gKHN0cnVjdCByYWRlb25fZGV2aWNlICopbS0+cHJpdmF0ZTsKIAl1aW50MzJfdCByZWcs
IHZhbHVlOwogCXVuc2lnbmVkIGk7CiAKQEAgLTI5NDIsMTEgKzI5MzcsOSBAQCBzdGF0aWMgaW50
IHIxMDBfZGVidWdmc19yYmJtX2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQog
CXJldHVybiAwOwogfQogCi1zdGF0aWMgaW50IHIxMDBfZGVidWdmc19jcF9yaW5nX2luZm8oc3Ry
dWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQorc3RhdGljIGludCByMTAwX2RlYnVnZnNfY3Bf
cmluZ19pbmZvX3Nob3coc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiB7Ci0Jc3Ry
dWN0IGRybV9pbmZvX25vZGUgKm5vZGUgPSAoc3RydWN0IGRybV9pbmZvX25vZGUgKikgbS0+cHJp
dmF0ZTsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gbm9kZS0+bWlub3ItPmRldjsKLQlzdHJ1
Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9IGRldi0+ZGV2X3ByaXZhdGU7CisJc3RydWN0IHJhZGVv
bl9kZXZpY2UgKnJkZXYgPSAoc3RydWN0IHJhZGVvbl9kZXZpY2UgKiltLT5wcml2YXRlOwogCXN0
cnVjdCByYWRlb25fcmluZyAqcmluZyA9ICZyZGV2LT5yaW5nW1JBREVPTl9SSU5HX1RZUEVfR0ZY
X0lOREVYXTsKIAl1aW50MzJfdCByZHAsIHdkcDsKIAl1bnNpZ25lZCBjb3VudCwgaSwgajsKQEAg
LTI5NzAsMTEgKzI5NjMsOSBAQCBzdGF0aWMgaW50IHIxMDBfZGVidWdmc19jcF9yaW5nX2luZm8o
c3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQogfQogCiAKLXN0YXRpYyBpbnQgcjEwMF9k
ZWJ1Z2ZzX2NwX2NzcV9maWZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKK3N0YXRp
YyBpbnQgcjEwMF9kZWJ1Z2ZzX2NwX2NzcV9maWZvX3Nob3coc3RydWN0IHNlcV9maWxlICptLCB2
b2lkICp1bnVzZWQpCiB7Ci0Jc3RydWN0IGRybV9pbmZvX25vZGUgKm5vZGUgPSAoc3RydWN0IGRy
bV9pbmZvX25vZGUgKikgbS0+cHJpdmF0ZTsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gbm9k
ZS0+bWlub3ItPmRldjsKLQlzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9IGRldi0+ZGV2X3By
aXZhdGU7CisJc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYgPSAoc3RydWN0IHJhZGVvbl9kZXZp
Y2UgKiltLT5wcml2YXRlOwogCXVpbnQzMl90IGNzcV9zdGF0LCBjc3EyX3N0YXQsIHRtcDsKIAl1
bnNpZ25lZCByX3JwdHIsIHJfd3B0ciwgaWIxX3JwdHIsIGliMV93cHRyLCBpYjJfcnB0ciwgaWIy
X3dwdHI7CiAJdW5zaWduZWQgaTsKQEAgLTMwMjAsMTEgKzMwMTEsOSBAQCBzdGF0aWMgaW50IHIx
MDBfZGVidWdmc19jcF9jc3FfZmlmbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCiAJ
cmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQgcjEwMF9kZWJ1Z2ZzX21jX2luZm8oc3RydWN0IHNl
cV9maWxlICptLCB2b2lkICpkYXRhKQorc3RhdGljIGludCByMTAwX2RlYnVnZnNfbWNfaW5mb19z
aG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQogewotCXN0cnVjdCBkcm1faW5m
b19ub2RlICpub2RlID0gKHN0cnVjdCBkcm1faW5mb19ub2RlICopIG0tPnByaXZhdGU7Ci0Jc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiA9IG5vZGUtPm1pbm9yLT5kZXY7Ci0Jc3RydWN0IHJhZGVvbl9k
ZXZpY2UgKnJkZXYgPSBkZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCByYWRlb25fZGV2aWNlICpy
ZGV2ID0gKHN0cnVjdCByYWRlb25fZGV2aWNlICopbS0+cHJpdmF0ZTsKIAl1aW50MzJfdCB0bXA7
CiAKIAl0bXAgPSBSUkVHMzIoUkFERU9OX0NPTkZJR19NRU1TSVpFKTsKQEAgLTMwNTAsNDQgKzMw
MzksNDIgQEAgc3RhdGljIGludCByMTAwX2RlYnVnZnNfbWNfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUg
Km0sIHZvaWQgKmRhdGEpCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBzdHJ1Y3QgZHJtX2luZm9f
bGlzdCByMTAwX2RlYnVnZnNfcmJibV9saXN0W10gPSB7Ci0JeyJyMTAwX3JiYm1faW5mbyIsIHIx
MDBfZGVidWdmc19yYmJtX2luZm8sIDAsIE5VTEx9LAotfTsKLQotc3RhdGljIHN0cnVjdCBkcm1f
aW5mb19saXN0IHIxMDBfZGVidWdmc19jcF9saXN0W10gPSB7Ci0JeyJyMTAwX2NwX3JpbmdfaW5m
byIsIHIxMDBfZGVidWdmc19jcF9yaW5nX2luZm8sIDAsIE5VTEx9LAotCXsicjEwMF9jcF9jc3Ff
ZmlmbyIsIHIxMDBfZGVidWdmc19jcF9jc3FfZmlmbywgMCwgTlVMTH0sCi19OworREVGSU5FX1NI
T1dfQVRUUklCVVRFKHIxMDBfZGVidWdmc19yYmJtX2luZm8pOworREVGSU5FX1NIT1dfQVRUUklC
VVRFKHIxMDBfZGVidWdmc19jcF9yaW5nX2luZm8pOworREVGSU5FX1NIT1dfQVRUUklCVVRFKHIx
MDBfZGVidWdmc19jcF9jc3FfZmlmbyk7CitERUZJTkVfU0hPV19BVFRSSUJVVEUocjEwMF9kZWJ1
Z2ZzX21jX2luZm8pOwogCi1zdGF0aWMgc3RydWN0IGRybV9pbmZvX2xpc3QgcjEwMF9kZWJ1Z2Zz
X21jX2luZm9fbGlzdFtdID0gewotCXsicjEwMF9tY19pbmZvIiwgcjEwMF9kZWJ1Z2ZzX21jX2lu
Zm8sIDAsIE5VTEx9LAotfTsKICNlbmRpZgogCi1pbnQgcjEwMF9kZWJ1Z2ZzX3JiYm1faW5pdChz
dHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKK3ZvaWQgIHIxMDBfZGVidWdmc19yYmJtX2luaXQo
c3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiB7CiAjaWYgZGVmaW5lZChDT05GSUdfREVCVUdf
RlMpCi0JcmV0dXJuIHJhZGVvbl9kZWJ1Z2ZzX2FkZF9maWxlcyhyZGV2LCByMTAwX2RlYnVnZnNf
cmJibV9saXN0LCAxKTsKLSNlbHNlCi0JcmV0dXJuIDA7CisJc3RydWN0IGRlbnRyeSAqcm9vdCA9
IHJkZXYtPmRkZXYtPnByaW1hcnktPmRlYnVnZnNfcm9vdDsKKworCWRlYnVnZnNfY3JlYXRlX2Zp
bGUoInIxMDBfcmJibV9pbmZvIiwgMDQ0NCwgcm9vdCwgcmRldiwKKwkJCSAgICAmcjEwMF9kZWJ1
Z2ZzX3JiYm1faW5mb19mb3BzKTsKICNlbmRpZgogfQogCi1pbnQgcjEwMF9kZWJ1Z2ZzX2NwX2lu
aXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCit2b2lkIHIxMDBfZGVidWdmc19jcF9pbml0
KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogewogI2lmIGRlZmluZWQoQ09ORklHX0RFQlVH
X0ZTKQotCXJldHVybiByYWRlb25fZGVidWdmc19hZGRfZmlsZXMocmRldiwgcjEwMF9kZWJ1Z2Zz
X2NwX2xpc3QsIDIpOwotI2Vsc2UKLQlyZXR1cm4gMDsKKwlzdHJ1Y3QgZGVudHJ5ICpyb290ID0g
cmRldi0+ZGRldi0+cHJpbWFyeS0+ZGVidWdmc19yb290OworCisJZGVidWdmc19jcmVhdGVfZmls
ZSgicjEwMF9jcF9yaW5nX2luZm8iLCAwNDQ0LCByb290LCByZGV2LAorCQkJICAgICZyMTAwX2Rl
YnVnZnNfY3BfcmluZ19pbmZvX2ZvcHMpOworCWRlYnVnZnNfY3JlYXRlX2ZpbGUoInIxMDBfY3Bf
Y3NxX2ZpZm8iLCAwNDQ0LCByb290LCByZGV2LAorCQkJICAgICZyMTAwX2RlYnVnZnNfY3BfY3Nx
X2ZpZm9fZm9wcyk7CiAjZW5kaWYKIH0KIAotaW50IHIxMDBfZGVidWdmc19tY19pbmZvX2luaXQo
c3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCit2b2lkICByMTAwX2RlYnVnZnNfbWNfaW5mb19p
bml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogewogI2lmIGRlZmluZWQoQ09ORklHX0RF
QlVHX0ZTKQotCXJldHVybiByYWRlb25fZGVidWdmc19hZGRfZmlsZXMocmRldiwgcjEwMF9kZWJ1
Z2ZzX21jX2luZm9fbGlzdCwgMSk7Ci0jZWxzZQotCXJldHVybiAwOworCXN0cnVjdCBkZW50cnkg
KnJvb3QgPSByZGV2LT5kZGV2LT5wcmltYXJ5LT5kZWJ1Z2ZzX3Jvb3Q7CisKKwlkZWJ1Z2ZzX2Ny
ZWF0ZV9maWxlKCJyMTAwX21jX2luZm8iLCAwNDQ0LCByb290LCByZGV2LAorCQkJICAgICZyMTAw
X2RlYnVnZnNfbWNfaW5mb19mb3BzKTsKICNlbmRpZgogfQogCkBAIC0zODM1LDE1ICszODIyLDYg
QEAgdm9pZCByMTAwX3ZnYV9yZW5kZXJfZGlzYWJsZShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRl
dikKIAlXUkVHOChSXzAwMDNDMl9HRU5NT19XVCwgQ18wMDAzQzJfVkdBX1JBTV9FTiAmIHRtcCk7
CiB9CiAKLXN0YXRpYyB2b2lkIHIxMDBfZGVidWdmcyhzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRl
dikKLXsKLQlpbnQgcjsKLQotCXIgPSByMTAwX2RlYnVnZnNfbWNfaW5mb19pbml0KHJkZXYpOwot
CWlmIChyKQotCQlkZXZfd2FybihyZGV2LT5kZXYsICJGYWlsZWQgdG8gY3JlYXRlIHIxMDBfbWMg
ZGVidWdmcyBmaWxlLlxuIik7Ci19Ci0KIHN0YXRpYyB2b2lkIHIxMDBfbWNfcHJvZ3JhbShzdHJ1
Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIHsKIAlzdHJ1Y3QgcjEwMF9tY19zYXZlIHNhdmU7CkBA
IC00MDMyLDcgKzQwMTAsNyBAQCBpbnQgcjEwMF9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpy
ZGV2KQogCWludCByOwogCiAJLyogUmVnaXN0ZXIgZGVidWdmcyBmaWxlIHNwZWNpZmljIHRvIHRo
aXMgZ3JvdXAgb2YgYXNpY3MgKi8KLQlyMTAwX2RlYnVnZnMocmRldik7CisJcjEwMF9kZWJ1Z2Zz
X21jX2luZm9faW5pdChyZGV2KTsKIAkvKiBEaXNhYmxlIFZHQSAqLwogCXIxMDBfdmdhX3JlbmRl
cl9kaXNhYmxlKHJkZXYpOwogCS8qIEluaXRpYWxpemUgc2NyYXRjaCByZWdpc3RlcnMgKi8KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcjMwMC5jIGIvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9yMzAwLmMKaW5kZXggMjEzZGM0OWI2MzIyLi4wM2IwZDRhODFmN2EgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcjMwMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9y
YWRlb24vcjMwMC5jCkBAIC0zMiw3ICszMiw2IEBACiAKICNpbmNsdWRlIDxkcm0vZHJtLmg+CiAj
aW5jbHVkZSA8ZHJtL2RybV9jcnRjX2hlbHBlci5oPgotI2luY2x1ZGUgPGRybS9kcm1fZGVidWdm
cy5oPgogI2luY2x1ZGUgPGRybS9kcm1fZGV2aWNlLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9maWxl
Lmg+CiAjaW5jbHVkZSA8ZHJtL3JhZGVvbl9kcm0uaD4KQEAgLTgzLDcgKzgyLDcgQEAgdm9pZCBy
djM3MF9wY2llX3dyZWcoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYsIHVpbnQzMl90IHJlZywg
dWludDMyX3QgdikKIC8qCiAgKiBydjM3MCxydjM4MCBQQ0lFIEdBUlQKICAqLwotc3RhdGljIGlu
dCBydjM3MF9kZWJ1Z2ZzX3BjaWVfZ2FydF9pbmZvX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2Ug
KnJkZXYpOworc3RhdGljIHZvaWQgcnYzNzBfZGVidWdmc19wY2llX2dhcnRfaW5mb19pbml0KHN0
cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKIAogdm9pZCBydjM3MF9wY2llX2dhcnRfdGxiX2Zs
dXNoKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogewpAQCAtMTQwLDkgKzEzOSw4IEBAIGlu
dCBydjM3MF9wY2llX2dhcnRfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIAlyID0g
cmFkZW9uX2dhcnRfaW5pdChyZGV2KTsKIAlpZiAocikKIAkJcmV0dXJuIHI7Ci0JciA9IHJ2Mzcw
X2RlYnVnZnNfcGNpZV9nYXJ0X2luZm9faW5pdChyZGV2KTsKLQlpZiAocikKLQkJRFJNX0VSUk9S
KCJGYWlsZWQgdG8gcmVnaXN0ZXIgZGVidWdmcyBmaWxlIGZvciBQQ0lFIGdhcnQgIVxuIik7CisJ
cnYzNzBfZGVidWdmc19wY2llX2dhcnRfaW5mb19pbml0KHJkZXYpOworCiAJcmRldi0+Z2FydC50
YWJsZV9zaXplID0gcmRldi0+Z2FydC5udW1fZ3B1X3BhZ2VzICogNDsKIAlyZGV2LT5hc2ljLT5n
YXJ0LnRsYl9mbHVzaCA9ICZydjM3MF9wY2llX2dhcnRfdGxiX2ZsdXNoOwogCXJkZXYtPmFzaWMt
PmdhcnQuZ2V0X3BhZ2VfZW50cnkgPSAmcnYzNzBfcGNpZV9nYXJ0X2dldF9wYWdlX2VudHJ5OwpA
QCAtNTkwLDExICs1ODgsOSBAQCBpbnQgcnYzNzBfZ2V0X3BjaWVfbGFuZXMoc3RydWN0IHJhZGVv
bl9kZXZpY2UgKnJkZXYpCiB9CiAKICNpZiBkZWZpbmVkKENPTkZJR19ERUJVR19GUykKLXN0YXRp
YyBpbnQgcnYzNzBfZGVidWdmc19wY2llX2dhcnRfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZv
aWQgKmRhdGEpCitzdGF0aWMgaW50IHJ2MzcwX2RlYnVnZnNfcGNpZV9nYXJ0X2luZm9fc2hvdyhz
dHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIHsKLQlzdHJ1Y3QgZHJtX2luZm9fbm9k
ZSAqbm9kZSA9IChzdHJ1Y3QgZHJtX2luZm9fbm9kZSAqKSBtLT5wcml2YXRlOwotCXN0cnVjdCBk
cm1fZGV2aWNlICpkZXYgPSBub2RlLT5taW5vci0+ZGV2OwotCXN0cnVjdCByYWRlb25fZGV2aWNl
ICpyZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwlzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9
IChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqKW0tPnByaXZhdGU7CiAJdWludDMyX3QgdG1wOwogCiAJ
dG1wID0gUlJFRzMyX1BDSUUoUkFERU9OX1BDSUVfVFhfR0FSVF9DTlRMKTsKQEAgLTYxNCwxNyAr
NjEwLDE2IEBAIHN0YXRpYyBpbnQgcnYzNzBfZGVidWdmc19wY2llX2dhcnRfaW5mbyhzdHJ1Y3Qg
c2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBzdHJ1Y3Qg
ZHJtX2luZm9fbGlzdCBydjM3MF9wY2llX2dhcnRfaW5mb19saXN0W10gPSB7Ci0JeyJydjM3MF9w
Y2llX2dhcnRfaW5mbyIsIHJ2MzcwX2RlYnVnZnNfcGNpZV9nYXJ0X2luZm8sIDAsIE5VTEx9LAot
fTsKK0RFRklORV9TSE9XX0FUVFJJQlVURShydjM3MF9kZWJ1Z2ZzX3BjaWVfZ2FydF9pbmZvKTsK
ICNlbmRpZgogCi1zdGF0aWMgaW50IHJ2MzcwX2RlYnVnZnNfcGNpZV9nYXJ0X2luZm9faW5pdChz
dHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKK3N0YXRpYyB2b2lkIHJ2MzcwX2RlYnVnZnNfcGNp
ZV9nYXJ0X2luZm9faW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIHsKICNpZiBkZWZp
bmVkKENPTkZJR19ERUJVR19GUykKLQlyZXR1cm4gcmFkZW9uX2RlYnVnZnNfYWRkX2ZpbGVzKHJk
ZXYsIHJ2MzcwX3BjaWVfZ2FydF9pbmZvX2xpc3QsIDEpOwotI2Vsc2UKLQlyZXR1cm4gMDsKKwlz
dHJ1Y3QgZGVudHJ5ICpyb290ID0gcmRldi0+ZGRldi0+cHJpbWFyeS0+ZGVidWdmc19yb290Owor
CisJZGVidWdmc19jcmVhdGVfZmlsZSgicnYzNzBfcGNpZV9nYXJ0X2luZm8iLCAwNDQ0LCByb290
LCByZGV2LAorCQkJICAgICZydjM3MF9kZWJ1Z2ZzX3BjaWVfZ2FydF9pbmZvX2ZvcHMpOwogI2Vu
ZGlmCiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcjQyMC5jIGIvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yNDIwLmMKaW5kZXggNTBiODliNmQ5YTZjLi4xZWQ0NDA3Yjkx
YWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcjQyMC5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcjQyMC5jCkBAIC0zMCw3ICszMCw2IEBACiAjaW5jbHVkZSA8bGlu
dXgvc2VxX2ZpbGUuaD4KICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+CiAKLSNpbmNsdWRlIDxkcm0v
ZHJtX2RlYnVnZnMuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2RldmljZS5oPgogI2luY2x1ZGUgPGRy
bS9kcm1fZmlsZS5oPgogCkBAIC0xODcsMTIgKzE4Niw4IEBAIHZvaWQgcjQyMF9tY193cmVnKHN0
cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LCB1MzIgcmVnLCB1MzIgdikKIAogc3RhdGljIHZvaWQg
cjQyMF9kZWJ1Z2ZzKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogewotCWlmIChyMTAwX2Rl
YnVnZnNfcmJibV9pbml0KHJkZXYpKSB7Ci0JCURSTV9FUlJPUigiRmFpbGVkIHRvIHJlZ2lzdGVy
IGRlYnVnZnMgZmlsZSBmb3IgUkJCTSAhXG4iKTsKLQl9Ci0JaWYgKHI0MjBfZGVidWdmc19waXBl
c19pbmZvX2luaXQocmRldikpIHsKLQkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gcmVnaXN0ZXIgZGVi
dWdmcyBmaWxlIGZvciBwaXBlcyAhXG4iKTsKLQl9CisJcjEwMF9kZWJ1Z2ZzX3JiYm1faW5pdChy
ZGV2KTsKKwlyNDIwX2RlYnVnZnNfcGlwZXNfaW5mb19pbml0KHJkZXYpOwogfQogCiBzdGF0aWMg
dm9pZCByNDIwX2Nsb2NrX3Jlc3VtZShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKQEAgLTQ4
MCwxMSArNDc1LDkgQEAgaW50IHI0MjBfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikK
ICAqIERlYnVnZnMgaW5mbwogICovCiAjaWYgZGVmaW5lZChDT05GSUdfREVCVUdfRlMpCi1zdGF0
aWMgaW50IHI0MjBfZGVidWdmc19waXBlc19pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAq
ZGF0YSkKK3N0YXRpYyBpbnQgcjQyMF9kZWJ1Z2ZzX3BpcGVzX2luZm9fc2hvdyhzdHJ1Y3Qgc2Vx
X2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIHsKLQlzdHJ1Y3QgZHJtX2luZm9fbm9kZSAqbm9kZSA9
IChzdHJ1Y3QgZHJtX2luZm9fbm9kZSAqKSBtLT5wcml2YXRlOwotCXN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYgPSBub2RlLT5taW5vci0+ZGV2OwotCXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0g
ZGV2LT5kZXZfcHJpdmF0ZTsKKwlzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9IChzdHJ1Y3Qg
cmFkZW9uX2RldmljZSAqKW0tPnByaXZhdGU7CiAJdWludDMyX3QgdG1wOwogCiAJdG1wID0gUlJF
RzMyKFI0MDBfR0JfUElQRV9TRUxFQ1QpOwpAQCAtNDk2LDE2ICs0ODksMTUgQEAgc3RhdGljIGlu
dCByNDIwX2RlYnVnZnNfcGlwZXNfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEp
CiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBzdHJ1Y3QgZHJtX2luZm9fbGlzdCByNDIwX3BpcGVz
X2luZm9fbGlzdFtdID0gewotCXsicjQyMF9waXBlc19pbmZvIiwgcjQyMF9kZWJ1Z2ZzX3BpcGVz
X2luZm8sIDAsIE5VTEx9LAotfTsKK0RFRklORV9TSE9XX0FUVFJJQlVURShyNDIwX2RlYnVnZnNf
cGlwZXNfaW5mbyk7CiAjZW5kaWYKIAotaW50IHI0MjBfZGVidWdmc19waXBlc19pbmZvX2luaXQo
c3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCit2b2lkIHI0MjBfZGVidWdmc19waXBlc19pbmZv
X2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiB7CiAjaWYgZGVmaW5lZChDT05GSUdf
REVCVUdfRlMpCi0JcmV0dXJuIHJhZGVvbl9kZWJ1Z2ZzX2FkZF9maWxlcyhyZGV2LCByNDIwX3Bp
cGVzX2luZm9fbGlzdCwgMSk7Ci0jZWxzZQotCXJldHVybiAwOworCXN0cnVjdCBkZW50cnkgKnJv
b3QgPSByZGV2LT5kZGV2LT5wcmltYXJ5LT5kZWJ1Z2ZzX3Jvb3Q7CisKKwlkZWJ1Z2ZzX2NyZWF0
ZV9maWxlKCJyNDIwX3BpcGVzX2luZm8iLCAwNDQ0LCByb290LCByZGV2LAorCQkJICAgICZyNDIw
X2RlYnVnZnNfcGlwZXNfaW5mb19mb3BzKTsKICNlbmRpZgogfQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL3JhZGVvbi9yNjAwLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3I2MDAuYwpp
bmRleCBiNDRlMGM2MDdiMWIuLmEwNDU5YjE2OGQ1MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yNjAwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yNjAwLmMKQEAg
LTMyLDcgKzMyLDYgQEAKICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+CiAjaW5jbHVkZSA8bGludXgv
c2VxX2ZpbGUuaD4KIAotI2luY2x1ZGUgPGRybS9kcm1fZGVidWdmcy5oPgogI2luY2x1ZGUgPGRy
bS9kcm1fZGV2aWNlLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV92YmxhbmsuaD4KICNpbmNsdWRlIDxk
cm0vcmFkZW9uX2RybS5oPgpAQCAtMTA2LDcgKzEwNSw3IEBAIHN0YXRpYyBjb25zdCB1MzIgY3J0
Y19vZmZzZXRzWzJdID0KIAlBVklWT19EMkNSVENfSF9UT1RBTCAtIEFWSVZPX0QxQ1JUQ19IX1RP
VEFMCiB9OwogCi1pbnQgcjYwMF9kZWJ1Z2ZzX21jX2luZm9faW5pdChzdHJ1Y3QgcmFkZW9uX2Rl
dmljZSAqcmRldik7CitzdGF0aWMgdm9pZCByNjAwX2RlYnVnZnNfbWNfaW5mb19pbml0KHN0cnVj
dCByYWRlb25fZGV2aWNlICpyZGV2KTsKIAogLyogcjYwMCxydjYxMCxydjYzMCxydjYyMCxydjYz
NSxydjY3MCAqLwogaW50IHI2MDBfbWNfd2FpdF9mb3JfaWRsZShzdHJ1Y3QgcmFkZW9uX2Rldmlj
ZSAqcmRldik7CkBAIC0zMjUxLDkgKzMyNTAsNyBAQCBpbnQgcjYwMF9pbml0KHN0cnVjdCByYWRl
b25fZGV2aWNlICpyZGV2KQogewogCWludCByOwogCi0JaWYgKHI2MDBfZGVidWdmc19tY19pbmZv
X2luaXQocmRldikpIHsKLQkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gcmVnaXN0ZXIgZGVidWdmcyBm
aWxlIGZvciBtYyAhXG4iKTsKLQl9CisJcjYwMF9kZWJ1Z2ZzX21jX2luZm9faW5pdChyZGV2KTsK
IAkvKiBSZWFkIEJJT1MgKi8KIAlpZiAoIXJhZGVvbl9nZXRfYmlvcyhyZGV2KSkgewogCQlpZiAo
QVNJQ19JU19BVklWTyhyZGV2KSkKQEAgLTQzNDYsMjggKzQzNDMsMjYgQEAgaW50IHI2MDBfaXJx
X3Byb2Nlc3Moc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAgKi8KICNpZiBkZWZpbmVkKENP
TkZJR19ERUJVR19GUykKIAotc3RhdGljIGludCByNjAwX2RlYnVnZnNfbWNfaW5mbyhzdHJ1Y3Qg
c2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCitzdGF0aWMgaW50IHI2MDBfZGVidWdmc19tY19pbmZv
X3Nob3coc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiB7Ci0Jc3RydWN0IGRybV9p
bmZvX25vZGUgKm5vZGUgPSAoc3RydWN0IGRybV9pbmZvX25vZGUgKikgbS0+cHJpdmF0ZTsKLQlz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gbm9kZS0+bWlub3ItPmRldjsKLQlzdHJ1Y3QgcmFkZW9u
X2RldmljZSAqcmRldiA9IGRldi0+ZGV2X3ByaXZhdGU7CisJc3RydWN0IHJhZGVvbl9kZXZpY2Ug
KnJkZXYgPSAoc3RydWN0IHJhZGVvbl9kZXZpY2UgKiltLT5wcml2YXRlOwogCiAJRFJFRzMyX1NZ
UyhtLCByZGV2LCBSXzAwMEU1MF9TUkJNX1NUQVRVUyk7CiAJRFJFRzMyX1NZUyhtLCByZGV2LCBW
TV9MMl9TVEFUVVMpOwogCXJldHVybiAwOwogfQogCi1zdGF0aWMgc3RydWN0IGRybV9pbmZvX2xp
c3QgcjYwMF9tY19pbmZvX2xpc3RbXSA9IHsKLQl7InI2MDBfbWNfaW5mbyIsIHI2MDBfZGVidWdm
c19tY19pbmZvLCAwLCBOVUxMfSwKLX07CitERUZJTkVfU0hPV19BVFRSSUJVVEUocjYwMF9kZWJ1
Z2ZzX21jX2luZm8pOwogI2VuZGlmCiAKLWludCByNjAwX2RlYnVnZnNfbWNfaW5mb19pbml0KHN0
cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQorc3RhdGljIHZvaWQgcjYwMF9kZWJ1Z2ZzX21jX2lu
Zm9faW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIHsKICNpZiBkZWZpbmVkKENPTkZJ
R19ERUJVR19GUykKLQlyZXR1cm4gcmFkZW9uX2RlYnVnZnNfYWRkX2ZpbGVzKHJkZXYsIHI2MDBf
bWNfaW5mb19saXN0LCBBUlJBWV9TSVpFKHI2MDBfbWNfaW5mb19saXN0KSk7Ci0jZWxzZQotCXJl
dHVybiAwOworCXN0cnVjdCBkZW50cnkgKnJvb3QgPSByZGV2LT5kZGV2LT5wcmltYXJ5LT5kZWJ1
Z2ZzX3Jvb3Q7CisKKwlkZWJ1Z2ZzX2NyZWF0ZV9maWxlKCJyNjAwX21jX2luZm8iLCAwNDQ0LCBy
b290LCByZGV2LAorCQkJICAgICZyNjAwX2RlYnVnZnNfbWNfaW5mb19mb3BzKTsKKwogI2VuZGlm
CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uLmggYi9kcml2
ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbi5oCmluZGV4IGVhYTkyMjNkNmY1Mi4uMDYyYWQ5MmM1
MTUxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbi5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uLmgKQEAgLTUxNCw4ICs1MTQsNiBAQCBzdHJ1Y3Qg
cmFkZW9uX2JvIHsKIH07CiAjZGVmaW5lIGdlbV90b19yYWRlb25fYm8oZ29iaikgY29udGFpbmVy
X29mKChnb2JqKSwgc3RydWN0IHJhZGVvbl9ibywgdGJvLmJhc2UpCiAKLWludCByYWRlb25fZ2Vt
X2RlYnVnZnNfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7Ci0KIC8qIHN1Yi1hbGxv
Y2F0aW9uIG1hbmFnZXIsIGl0IGhhcyB0byBiZSBwcm90ZWN0ZWQgYnkgYW5vdGhlciBsb2NrLgog
ICogQnkgY29uY2VwdGlvbiB0aGlzIGlzIGFuIGhlbHBlciBmb3Igb3RoZXIgcGFydCBvZiB0aGUg
ZHJpdmVyCiAgKiBsaWtlIHRoZSBpbmRpcmVjdCBidWZmZXIgb3Igc2VtYXBob3JlLCB3aGljaCBi
b3RoIGhhdmUgdGhlaXIKQEAgLTE3OTUsMTUgKzE3OTMsOCBAQCBzdGF0aWMgaW5saW5lIHZvaWQg
cmFkZW9uX21uX3VucmVnaXN0ZXIoc3RydWN0IHJhZGVvbl9ibyAqYm8pIHt9CiAvKgogICogRGVi
dWdmcwogICovCi1zdHJ1Y3QgcmFkZW9uX2RlYnVnZnMgewotCXN0cnVjdCBkcm1faW5mb19saXN0
CSpmaWxlczsKLQl1bnNpZ25lZAkJbnVtX2ZpbGVzOwotfTsKLQotaW50IHJhZGVvbl9kZWJ1Z2Zz
X2FkZF9maWxlcyhzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwKLQkJCSAgICAgc3RydWN0IGRy
bV9pbmZvX2xpc3QgKmZpbGVzLAotCQkJICAgICB1bnNpZ25lZCBuZmlsZXMpOwotaW50IHJhZGVv
bl9kZWJ1Z2ZzX2ZlbmNlX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwordm9pZCBy
YWRlb25fZGVidWdmc19mZW5jZV9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKK3Zv
aWQgcmFkZW9uX2dlbV9kZWJ1Z2ZzX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwog
CiAvKgogICogQVNJQyByaW5nIHNwZWNpZmljIGZ1bmN0aW9ucy4KQEAgLTI0MjQsOSArMjQxNSw2
IEBAIHN0cnVjdCByYWRlb25fZGV2aWNlIHsKIAlzdHJ1Y3QgZHJtX2ZpbGUgKmNtYXNrX2ZpbHA7
CiAJLyogaTJjIGJ1c2VzICovCiAJc3RydWN0IHJhZGVvbl9pMmNfY2hhbiAqaTJjX2J1c1tSQURF
T05fTUFYX0kyQ19CVVNdOwotCS8qIGRlYnVnZnMgKi8KLQlzdHJ1Y3QgcmFkZW9uX2RlYnVnZnMJ
ZGVidWdmc1tSQURFT05fREVCVUdGU19NQVhfQ09NUE9ORU5UU107Ci0JdW5zaWduZWQgCQlkZWJ1
Z2ZzX2NvdW50OwogCS8qIHZpcnR1YWwgbWVtb3J5ICovCiAJc3RydWN0IHJhZGVvbl92bV9tYW5h
Z2VyCXZtX21hbmFnZXI7CiAJc3RydWN0IG11dGV4CQkJZ3B1X2Nsb2NrX211dGV4OwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fYXNpYy5oIGIvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yYWRlb25fYXNpYy5oCmluZGV4IDI0NjQ0ZGFlYWQ1My4uMmM3N2YxNTFlZjYy
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9hc2ljLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fYXNpYy5oCkBAIC05OSw4ICs5OSw4IEBAIHZv
aWQgcjEwMF9ocGRfZmluaShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7CiBib29sIHIxMDBf
aHBkX3NlbnNlKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LCBlbnVtIHJhZGVvbl9ocGRfaWQg
aHBkKTsKIHZvaWQgcjEwMF9ocGRfc2V0X3BvbGFyaXR5KHN0cnVjdCByYWRlb25fZGV2aWNlICpy
ZGV2LAogCQkJICAgZW51bSByYWRlb25faHBkX2lkIGhwZCk7Ci1pbnQgcjEwMF9kZWJ1Z2ZzX3Ji
Ym1faW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7Ci1pbnQgcjEwMF9kZWJ1Z2ZzX2Nw
X2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwordm9pZCByMTAwX2RlYnVnZnNfcmJi
bV9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKK3ZvaWQgcjEwMF9kZWJ1Z2ZzX2Nw
X2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwogdm9pZCByMTAwX2NwX2Rpc2FibGUo
c3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwogaW50IHIxMDBfY3BfaW5pdChzdHJ1Y3QgcmFk
ZW9uX2RldmljZSAqcmRldiwgdW5zaWduZWQgcmluZ19zaXplKTsKIHZvaWQgcjEwMF9jcF9maW5p
KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKQEAgLTE5OSw3ICsxOTksNyBAQCBleHRlcm4g
aW50IHI0MjBfcmVzdW1lKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKIGV4dGVybiB2b2lk
IHI0MjBfcG1faW5pdF9wcm9maWxlKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKIGV4dGVy
biB1MzIgcjQyMF9tY19ycmVnKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LCB1MzIgcmVnKTsK
IGV4dGVybiB2b2lkIHI0MjBfbWNfd3JlZyhzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwgdTMy
IHJlZywgdTMyIHYpOwotZXh0ZXJuIGludCByNDIwX2RlYnVnZnNfcGlwZXNfaW5mb19pbml0KHN0
cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKK2V4dGVybiB2b2lkIHI0MjBfZGVidWdmc19waXBl
c19pbmZvX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwogZXh0ZXJuIHZvaWQgcjQy
MF9waXBlc19pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKIAogLyoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2RldmljZS5jIGIvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yYWRlb25fZGV2aWNlLmMKaW5kZXggZWJjY2FhNWIyZDBlLi5iYTU0NDA4YzJl
MTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2RldmljZS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2RldmljZS5jCkBAIC0zNiw3ICszNiw2
IEBACiAKICNpbmNsdWRlIDxkcm0vZHJtX2NhY2hlLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9jcnRj
X2hlbHBlci5oPgotI2luY2x1ZGUgPGRybS9kcm1fZGVidWdmcy5oPgogI2luY2x1ZGUgPGRybS9k
cm1fZGV2aWNlLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9maWxlLmg+CiAjaW5jbHVkZSA8ZHJtL2Ry
bV9wcm9iZV9oZWxwZXIuaD4KQEAgLTE0NDgsMTUgKzE0NDcsOCBAQCBpbnQgcmFkZW9uX2Rldmlj
ZV9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LAogCWlmIChyKQogCQlnb3RvIGZhaWxl
ZDsKIAotCXIgPSByYWRlb25fZ2VtX2RlYnVnZnNfaW5pdChyZGV2KTsKLQlpZiAocikgewotCQlE
Uk1fRVJST1IoInJlZ2lzdGVyaW5nIGdlbSBkZWJ1Z2ZzIGZhaWxlZCAoJWQpLlxuIiwgcik7Ci0J
fQotCi0JciA9IHJhZGVvbl9tc3RfZGVidWdmc19pbml0KHJkZXYpOwotCWlmIChyKSB7Ci0JCURS
TV9FUlJPUigicmVnaXN0ZXJpbmcgbXN0IGRlYnVnZnMgZmFpbGVkICglZCkuXG4iLCByKTsKLQl9
CisJcmFkZW9uX2dlbV9kZWJ1Z2ZzX2luaXQocmRldik7CisJcmFkZW9uX21zdF9kZWJ1Z2ZzX2lu
aXQocmRldik7CiAKIAlpZiAocmRldi0+ZmxhZ3MgJiBSQURFT05fSVNfQUdQICYmICFyZGV2LT5h
Y2NlbF93b3JraW5nKSB7CiAJCS8qIEFjY2VsZXJhdGlvbiBub3Qgd29ya2luZyBvbiBBR1AgY2Fy
ZCB0cnkgYWdhaW4KQEAgLTE4ODEsMzggKzE4NzMsMyBAQCBpbnQgcmFkZW9uX2dwdV9yZXNldChz
dHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIAl1cF9yZWFkKCZyZGV2LT5leGNsdXNpdmVfbG9j
ayk7CiAJcmV0dXJuIHI7CiB9Ci0KLQotLyoKLSAqIERlYnVnZnMKLSAqLwotaW50IHJhZGVvbl9k
ZWJ1Z2ZzX2FkZF9maWxlcyhzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwKLQkJCSAgICAgc3Ry
dWN0IGRybV9pbmZvX2xpc3QgKmZpbGVzLAotCQkJICAgICB1bnNpZ25lZCBuZmlsZXMpCi17Ci0J
dW5zaWduZWQgaTsKLQotCWZvciAoaSA9IDA7IGkgPCByZGV2LT5kZWJ1Z2ZzX2NvdW50OyBpKysp
IHsKLQkJaWYgKHJkZXYtPmRlYnVnZnNbaV0uZmlsZXMgPT0gZmlsZXMpIHsKLQkJCS8qIEFscmVh
ZHkgcmVnaXN0ZXJlZCAqLwotCQkJcmV0dXJuIDA7Ci0JCX0KLQl9Ci0KLQlpID0gcmRldi0+ZGVi
dWdmc19jb3VudCArIDE7Ci0JaWYgKGkgPiBSQURFT05fREVCVUdGU19NQVhfQ09NUE9ORU5UUykg
ewotCQlEUk1fRVJST1IoIlJlYWNoZWQgbWF4aW11bSBudW1iZXIgb2YgZGVidWdmcyBjb21wb25l
bnRzLlxuIik7Ci0JCURSTV9FUlJPUigiUmVwb3J0IHNvIHdlIGluY3JlYXNlICIKLQkJCSAgIlJB
REVPTl9ERUJVR0ZTX01BWF9DT01QT05FTlRTLlxuIik7Ci0JCXJldHVybiAtRUlOVkFMOwotCX0K
LQlyZGV2LT5kZWJ1Z2ZzW3JkZXYtPmRlYnVnZnNfY291bnRdLmZpbGVzID0gZmlsZXM7Ci0JcmRl
di0+ZGVidWdmc1tyZGV2LT5kZWJ1Z2ZzX2NvdW50XS5udW1fZmlsZXMgPSBuZmlsZXM7Ci0JcmRl
di0+ZGVidWdmc19jb3VudCA9IGk7Ci0jaWYgZGVmaW5lZChDT05GSUdfREVCVUdfRlMpCi0JZHJt
X2RlYnVnZnNfY3JlYXRlX2ZpbGVzKGZpbGVzLCBuZmlsZXMsCi0JCQkJIHJkZXYtPmRkZXYtPnBy
aW1hcnktPmRlYnVnZnNfcm9vdCwKLQkJCQkgcmRldi0+ZGRldi0+cHJpbWFyeSk7Ci0jZW5kaWYK
LQlyZXR1cm4gMDsKLX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9u
X2RwX21zdC5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fZHBfbXN0LmMKaW5kZXgg
MmMzMjE4NmM0YWNkLi42NmEwZTczNmNjNGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9y
YWRlb24vcmFkZW9uX2RwX21zdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9u
X2RwX21zdC5jCkBAIC0xLDYgKzEsNSBAQAogLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1J
VAogCi0jaW5jbHVkZSA8ZHJtL2RybV9kZWJ1Z2ZzLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kcF9t
c3RfaGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9mYl9oZWxwZXIuaD4KICNpbmNsdWRlIDxk
cm0vZHJtX2ZpbGUuaD4KQEAgLTcyMywxMCArNzIyLDEwIEBAIHJhZGVvbl9kcF9tc3RfY2hlY2tf
c3RhdHVzKHN0cnVjdCByYWRlb25fY29ubmVjdG9yICpyYWRlb25fY29ubmVjdG9yKQogCiAjaWYg
ZGVmaW5lZChDT05GSUdfREVCVUdfRlMpCiAKLXN0YXRpYyBpbnQgcmFkZW9uX2RlYnVnZnNfbXN0
X2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQorc3RhdGljIGludCByYWRlb25f
ZGVidWdmc19tc3RfaW5mb19zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQog
ewotCXN0cnVjdCBkcm1faW5mb19ub2RlICpub2RlID0gKHN0cnVjdCBkcm1faW5mb19ub2RlICop
bS0+cHJpdmF0ZTsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gbm9kZS0+bWlub3ItPmRldjsK
KwlzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9IChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqKW0t
PnByaXZhdGU7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IHJkZXYtPmRkZXY7CiAJc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKIAlzdHJ1Y3QgcmFkZW9uX2Nvbm5lY3RvciAqcmFk
ZW9uX2Nvbm5lY3RvcjsKIAlzdHJ1Y3QgcmFkZW9uX2Nvbm5lY3Rvcl9hdG9tX2RpZyAqZGlnX2Nv
bm5lY3RvcjsKQEAgLTc1NCwxNSArNzUzLDE2IEBAIHN0YXRpYyBpbnQgcmFkZW9uX2RlYnVnZnNf
bXN0X2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQogCXJldHVybiAwOwogfQog
Ci1zdGF0aWMgc3RydWN0IGRybV9pbmZvX2xpc3QgcmFkZW9uX2RlYnVnZnNfbXN0X2xpc3RbXSA9
IHsKLQl7InJhZGVvbl9tc3RfaW5mbyIsICZyYWRlb25fZGVidWdmc19tc3RfaW5mbywgMCwgTlVM
TH0sCi19OworREVGSU5FX1NIT1dfQVRUUklCVVRFKHJhZGVvbl9kZWJ1Z2ZzX21zdF9pbmZvKTsK
ICNlbmRpZgogCi1pbnQgcmFkZW9uX21zdF9kZWJ1Z2ZzX2luaXQoc3RydWN0IHJhZGVvbl9kZXZp
Y2UgKnJkZXYpCit2b2lkIHJhZGVvbl9tc3RfZGVidWdmc19pbml0KHN0cnVjdCByYWRlb25fZGV2
aWNlICpyZGV2KQogewogI2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQotCXJldHVybiByYWRl
b25fZGVidWdmc19hZGRfZmlsZXMocmRldiwgcmFkZW9uX2RlYnVnZnNfbXN0X2xpc3QsIDEpOwor
CXN0cnVjdCBkZW50cnkgKnJvb3QgPSByZGV2LT5kZGV2LT5wcmltYXJ5LT5kZWJ1Z2ZzX3Jvb3Q7
CisKKwlkZWJ1Z2ZzX2NyZWF0ZV9maWxlKCJyYWRlb25fbXN0X2luZm8iLCAwNDQ0LCByb290LCBy
ZGV2LAorCQkJICAgICZyYWRlb25fZGVidWdmc19tc3RfaW5mb19mb3BzKTsKKwogI2VuZGlmCi0J
cmV0dXJuIDA7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9m
ZW5jZS5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fZmVuY2UuYwppbmRleCA5ZWU2
ZTU5OWVmODMuLjBkOGVmMjM2OGFkZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVv
bi9yYWRlb25fZmVuY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9mZW5j
ZS5jCkBAIC0zNyw3ICszNyw2IEBACiAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgogI2luY2x1ZGUg
PGxpbnV4L3dhaXQuaD4KIAotI2luY2x1ZGUgPGRybS9kcm1fZGVidWdmcy5oPgogI2luY2x1ZGUg
PGRybS9kcm1fZGV2aWNlLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9maWxlLmg+CiAKQEAgLTkxNiw5
ICs5MTUsOSBAQCBpbnQgcmFkZW9uX2ZlbmNlX2RyaXZlcl9pbml0KHN0cnVjdCByYWRlb25fZGV2
aWNlICpyZGV2KQogCWZvciAocmluZyA9IDA7IHJpbmcgPCBSQURFT05fTlVNX1JJTkdTOyByaW5n
KyspIHsKIAkJcmFkZW9uX2ZlbmNlX2RyaXZlcl9pbml0X3JpbmcocmRldiwgcmluZyk7CiAJfQot
CWlmIChyYWRlb25fZGVidWdmc19mZW5jZV9pbml0KHJkZXYpKSB7Ci0JCWRldl9lcnIocmRldi0+
ZGV2LCAiZmVuY2UgZGVidWdmcyBmaWxlIGNyZWF0aW9uIGZhaWxlZFxuIik7Ci0JfQorCisJcmFk
ZW9uX2RlYnVnZnNfZmVuY2VfaW5pdChyZGV2KTsKKwogCXJldHVybiAwOwogfQogCkBAIC05NzMs
MTEgKzk3Miw5IEBAIHZvaWQgcmFkZW9uX2ZlbmNlX2RyaXZlcl9mb3JjZV9jb21wbGV0aW9uKHN0
cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LCBpbnQgcmluZykKICAqIEZlbmNlIGRlYnVnZnMKICAq
LwogI2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQotc3RhdGljIGludCByYWRlb25fZGVidWdm
c19mZW5jZV9pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKK3N0YXRpYyBpbnQg
cmFkZW9uX2RlYnVnZnNfZmVuY2VfaW5mb19zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAq
ZGF0YSkKIHsKLQlzdHJ1Y3QgZHJtX2luZm9fbm9kZSAqbm9kZSA9IChzdHJ1Y3QgZHJtX2luZm9f
bm9kZSAqKW0tPnByaXZhdGU7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IG5vZGUtPm1pbm9y
LT5kZXY7Ci0Jc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYgPSBkZXYtPmRldl9wcml2YXRlOwor
CXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0gKHN0cnVjdCByYWRlb25fZGV2aWNlICopbS0+
cHJpdmF0ZTsKIAlpbnQgaSwgajsKIAogCWZvciAoaSA9IDA7IGkgPCBSQURFT05fTlVNX1JJTkdT
OyArK2kpIHsKQEAgLTEwMDYsMzMgKzEwMDMsMzQgQEAgc3RhdGljIGludCByYWRlb25fZGVidWdm
c19mZW5jZV9pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKICAqCiAgKiBNYW51
YWxseSB0cmlnZ2VyIGEgZ3B1IHJlc2V0IGF0IHRoZSBuZXh0IGZlbmNlIHdhaXQuCiAgKi8KLXN0
YXRpYyBpbnQgcmFkZW9uX2RlYnVnZnNfZ3B1X3Jlc2V0KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9p
ZCAqZGF0YSkKK3N0YXRpYyBpbnQgcmFkZW9uX2RlYnVnZnNfZ3B1X3Jlc2V0KHZvaWQgKmRhdGEs
IHU2NCAqdmFsKQogewotCXN0cnVjdCBkcm1faW5mb19ub2RlICpub2RlID0gKHN0cnVjdCBkcm1f
aW5mb19ub2RlICopIG0tPnByaXZhdGU7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IG5vZGUt
Pm1pbm9yLT5kZXY7Ci0Jc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYgPSBkZXYtPmRldl9wcml2
YXRlOworCXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0gKHN0cnVjdCByYWRlb25fZGV2aWNl
ICopZGF0YTsKIAogCWRvd25fcmVhZCgmcmRldi0+ZXhjbHVzaXZlX2xvY2spOwotCXNlcV9wcmlu
dGYobSwgIiVkXG4iLCByZGV2LT5uZWVkc19yZXNldCk7CisJKnZhbCA9IHJkZXYtPm5lZWRzX3Jl
c2V0OwogCXJkZXYtPm5lZWRzX3Jlc2V0ID0gdHJ1ZTsKIAl3YWtlX3VwX2FsbCgmcmRldi0+ZmVu
Y2VfcXVldWUpOwogCXVwX3JlYWQoJnJkZXYtPmV4Y2x1c2l2ZV9sb2NrKTsKIAogCXJldHVybiAw
OwogfQotCi1zdGF0aWMgc3RydWN0IGRybV9pbmZvX2xpc3QgcmFkZW9uX2RlYnVnZnNfZmVuY2Vf
bGlzdFtdID0gewotCXsicmFkZW9uX2ZlbmNlX2luZm8iLCAmcmFkZW9uX2RlYnVnZnNfZmVuY2Vf
aW5mbywgMCwgTlVMTH0sCi0JeyJyYWRlb25fZ3B1X3Jlc2V0IiwgJnJhZGVvbl9kZWJ1Z2ZzX2dw
dV9yZXNldCwgMCwgTlVMTH0KLX07CitERUZJTkVfU0hPV19BVFRSSUJVVEUocmFkZW9uX2RlYnVn
ZnNfZmVuY2VfaW5mbyk7CitERUZJTkVfREVCVUdGU19BVFRSSUJVVEUocmFkZW9uX2RlYnVnZnNf
Z3B1X3Jlc2V0X2ZvcHMsCisJCQkgcmFkZW9uX2RlYnVnZnNfZ3B1X3Jlc2V0LCBOVUxMLCAiJWxs
ZFxuIik7CiAjZW5kaWYKIAotaW50IHJhZGVvbl9kZWJ1Z2ZzX2ZlbmNlX2luaXQoc3RydWN0IHJh
ZGVvbl9kZXZpY2UgKnJkZXYpCit2b2lkIHJhZGVvbl9kZWJ1Z2ZzX2ZlbmNlX2luaXQoc3RydWN0
IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiB7CiAjaWYgZGVmaW5lZChDT05GSUdfREVCVUdfRlMpCi0J
cmV0dXJuIHJhZGVvbl9kZWJ1Z2ZzX2FkZF9maWxlcyhyZGV2LCByYWRlb25fZGVidWdmc19mZW5j
ZV9saXN0LCAyKTsKLSNlbHNlCi0JcmV0dXJuIDA7CisJc3RydWN0IGRlbnRyeSAqcm9vdCA9IHJk
ZXYtPmRkZXYtPnByaW1hcnktPmRlYnVnZnNfcm9vdDsKKworCWRlYnVnZnNfY3JlYXRlX2ZpbGUo
InJhZGVvbl9ncHVfcmVzZXQiLCAwNDQ0LCByb290LCByZGV2LAorCQkJICAgICZyYWRlb25fZGVi
dWdmc19ncHVfcmVzZXRfZm9wcyk7CisJZGVidWdmc19jcmVhdGVfZmlsZSgicmFkZW9uX2ZlbmNl
X2luZm8iLCAwNDQ0LCByb290LCByZGV2LAorCQkJICAgICZyYWRlb25fZGVidWdmc19mZW5jZV9p
bmZvX2ZvcHMpOworCisKICNlbmRpZgogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
cmFkZW9uL3JhZGVvbl9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2dlbS5j
CmluZGV4IGUzYWQyN2U2OTc4Ny4uZDcxOWIyYmI3YTE2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vcmFkZW9uL3JhZGVvbl9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbl9nZW0uYwpAQCAtMjgsNyArMjgsNiBAQAogCiAjaW5jbHVkZSA8bGludXgvcGNpLmg+CiAK
LSNpbmNsdWRlIDxkcm0vZHJtX2RlYnVnZnMuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2RldmljZS5o
PgogI2luY2x1ZGUgPGRybS9kcm1fZmlsZS5oPgogI2luY2x1ZGUgPGRybS9yYWRlb25fZHJtLmg+
CkBAIC03NzksMTEgKzc3OCw5IEBAIGludCByYWRlb25fbW9kZV9kdW1iX2NyZWF0ZShzdHJ1Y3Qg
ZHJtX2ZpbGUgKmZpbGVfcHJpdiwKIH0KIAogI2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQot
c3RhdGljIGludCByYWRlb25fZGVidWdmc19nZW1faW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZv
aWQgKmRhdGEpCitzdGF0aWMgaW50IHJhZGVvbl9kZWJ1Z2ZzX2dlbV9pbmZvX3Nob3coc3RydWN0
IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiB7Ci0Jc3RydWN0IGRybV9pbmZvX25vZGUgKm5v
ZGUgPSAoc3RydWN0IGRybV9pbmZvX25vZGUgKiltLT5wcml2YXRlOwotCXN0cnVjdCBkcm1fZGV2
aWNlICpkZXYgPSBub2RlLT5taW5vci0+ZGV2OwotCXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2
ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwlzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9IChzdHJ1
Y3QgcmFkZW9uX2RldmljZSAqKW0tPnByaXZhdGU7CiAJc3RydWN0IHJhZGVvbl9ibyAqcmJvOwog
CXVuc2lnbmVkIGkgPSAwOwogCkBAIC04MTQsMTUgKzgxMSwxNiBAQCBzdGF0aWMgaW50IHJhZGVv
bl9kZWJ1Z2ZzX2dlbV9pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKIAlyZXR1
cm4gMDsKIH0KIAotc3RhdGljIHN0cnVjdCBkcm1faW5mb19saXN0IHJhZGVvbl9kZWJ1Z2ZzX2dl
bV9saXN0W10gPSB7Ci0JeyJyYWRlb25fZ2VtX2luZm8iLCAmcmFkZW9uX2RlYnVnZnNfZ2VtX2lu
Zm8sIDAsIE5VTEx9LAotfTsKK0RFRklORV9TSE9XX0FUVFJJQlVURShyYWRlb25fZGVidWdmc19n
ZW1faW5mbyk7CiAjZW5kaWYKIAotaW50IHJhZGVvbl9nZW1fZGVidWdmc19pbml0KHN0cnVjdCBy
YWRlb25fZGV2aWNlICpyZGV2KQordm9pZCByYWRlb25fZ2VtX2RlYnVnZnNfaW5pdChzdHJ1Y3Qg
cmFkZW9uX2RldmljZSAqcmRldikKIHsKICNpZiBkZWZpbmVkKENPTkZJR19ERUJVR19GUykKLQly
ZXR1cm4gcmFkZW9uX2RlYnVnZnNfYWRkX2ZpbGVzKHJkZXYsIHJhZGVvbl9kZWJ1Z2ZzX2dlbV9s
aXN0LCAxKTsKKwlzdHJ1Y3QgZGVudHJ5ICpyb290ID0gcmRldi0+ZGRldi0+cHJpbWFyeS0+ZGVi
dWdmc19yb290OworCisJZGVidWdmc19jcmVhdGVfZmlsZSgicmFkZW9uX2dlbV9pbmZvIiwgMDQ0
NCwgcm9vdCwgcmRldiwKKwkJCSAgICAmcmFkZW9uX2RlYnVnZnNfZ2VtX2luZm9fZm9wcyk7CisK
ICNlbmRpZgotCXJldHVybiAwOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVv
bi9yYWRlb25faWIuYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2liLmMKaW5kZXgg
YzFmY2EyYmE0NDNjLi42MmIxMTY3MjdiNGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9y
YWRlb24vcmFkZW9uX2liLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25faWIu
YwpAQCAtMjcsNyArMjcsNiBAQAogICogICAgICAgICAgQ2hyaXN0aWFuIEvDtm5pZwogICovCiAK
LSNpbmNsdWRlIDxkcm0vZHJtX2RlYnVnZnMuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2ZpbGUuaD4K
IAogI2luY2x1ZGUgInJhZGVvbi5oIgpAQCAtNDEsNyArNDAsNyBAQAogICogcHJvZHVjZSBjb21t
YW5kIGJ1ZmZlcnMgd2hpY2ggYXJlIHNlbmQgdG8gdGhlIGtlcm5lbCBhbmQKICAqIHB1dCBpbiBJ
QnMgZm9yIGV4ZWN1dGlvbiBieSB0aGUgcmVxdWVzdGVkIHJpbmcuCiAgKi8KLXN0YXRpYyBpbnQg
cmFkZW9uX2RlYnVnZnNfc2FfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7CitzdGF0
aWMgdm9pZCByYWRlb25fZGVidWdmc19zYV9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2
KTsKIAogLyoqCiAgKiByYWRlb25faWJfZ2V0IC0gcmVxdWVzdCBhbiBJQiAoSW5kaXJlY3QgQnVm
ZmVyKQpAQCAtMjI1LDkgKzIyNCw3IEBAIGludCByYWRlb25faWJfcG9vbF9pbml0KHN0cnVjdCBy
YWRlb25fZGV2aWNlICpyZGV2KQogCX0KIAogCXJkZXYtPmliX3Bvb2xfcmVhZHkgPSB0cnVlOwot
CWlmIChyYWRlb25fZGVidWdmc19zYV9pbml0KHJkZXYpKSB7Ci0JCWRldl9lcnIocmRldi0+ZGV2
LCAiZmFpbGVkIHRvIHJlZ2lzdGVyIGRlYnVnZnMgZmlsZSBmb3IgU0FcbiIpOwotCX0KKwlyYWRl
b25fZGVidWdmc19zYV9pbml0KHJkZXYpOwogCXJldHVybiAwOwogfQogCkBAIC0yOTUsMTEgKzI5
Miw5IEBAIGludCByYWRlb25faWJfcmluZ190ZXN0cyhzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRl
dikKICAqLwogI2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQogCi1zdGF0aWMgaW50IHJhZGVv
bl9kZWJ1Z2ZzX3NhX2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQorc3RhdGlj
IGludCByYWRlb25fZGVidWdmc19zYV9pbmZvX3Nob3coc3RydWN0IHNlcV9maWxlICptLCB2b2lk
ICp1bnVzZWQpCiB7Ci0Jc3RydWN0IGRybV9pbmZvX25vZGUgKm5vZGUgPSAoc3RydWN0IGRybV9p
bmZvX25vZGUgKikgbS0+cHJpdmF0ZTsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gbm9kZS0+
bWlub3ItPmRldjsKLQlzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9IGRldi0+ZGV2X3ByaXZh
dGU7CisJc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYgPSAoc3RydWN0IHJhZGVvbl9kZXZpY2Ug
KiltLT5wcml2YXRlOwogCiAJcmFkZW9uX3NhX2JvX2R1bXBfZGVidWdfaW5mbygmcmRldi0+cmlu
Z190bXBfYm8sIG0pOwogCkBAIC0zMDcsMTcgKzMwMiwxNiBAQCBzdGF0aWMgaW50IHJhZGVvbl9k
ZWJ1Z2ZzX3NhX2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQogCiB9CiAKLXN0
YXRpYyBzdHJ1Y3QgZHJtX2luZm9fbGlzdCByYWRlb25fZGVidWdmc19zYV9saXN0W10gPSB7Ci0J
eyJyYWRlb25fc2FfaW5mbyIsICZyYWRlb25fZGVidWdmc19zYV9pbmZvLCAwLCBOVUxMfSwKLX07
CitERUZJTkVfU0hPV19BVFRSSUJVVEUocmFkZW9uX2RlYnVnZnNfc2FfaW5mbyk7CiAKICNlbmRp
ZgogCi1zdGF0aWMgaW50IHJhZGVvbl9kZWJ1Z2ZzX3NhX2luaXQoc3RydWN0IHJhZGVvbl9kZXZp
Y2UgKnJkZXYpCitzdGF0aWMgdm9pZCByYWRlb25fZGVidWdmc19zYV9pbml0KHN0cnVjdCByYWRl
b25fZGV2aWNlICpyZGV2KQogewogI2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQotCXJldHVy
biByYWRlb25fZGVidWdmc19hZGRfZmlsZXMocmRldiwgcmFkZW9uX2RlYnVnZnNfc2FfbGlzdCwg
MSk7Ci0jZWxzZQotCXJldHVybiAwOworCXN0cnVjdCBkZW50cnkgKnJvb3QgPSByZGV2LT5kZGV2
LT5wcmltYXJ5LT5kZWJ1Z2ZzX3Jvb3Q7CisKKwlkZWJ1Z2ZzX2NyZWF0ZV9maWxlKCJyYWRlb25f
c2FfaW5mbyIsIDA0NDQsIHJvb3QsIHJkZXYsCisJCQkgICAgJnJhZGVvbl9kZWJ1Z2ZzX3NhX2lu
Zm9fZm9wcyk7CiAjZW5kaWYKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24v
cmFkZW9uX21vZGUuaCBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX21vZGUuaAppbmRl
eCBjN2YyMjM3NDNkNDYuLmZlMTZmMTQwYTZiNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9yYWRlb25fbW9kZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9u
X21vZGUuaApAQCAtOTk0LDcgKzk5NCw3IEBAIGludCByYWRlb25fYWxpZ25fcGl0Y2goc3RydWN0
IHJhZGVvbl9kZXZpY2UgKnJkZXYsIGludCB3aWR0aCwgaW50IGJwcCwgYm9vbCB0aWxlCiBpbnQg
cmFkZW9uX2RwX21zdF9pbml0KHN0cnVjdCByYWRlb25fY29ubmVjdG9yICpyYWRlb25fY29ubmVj
dG9yKTsKIGludCByYWRlb25fZHBfbXN0X3Byb2JlKHN0cnVjdCByYWRlb25fY29ubmVjdG9yICpy
YWRlb25fY29ubmVjdG9yKTsKIGludCByYWRlb25fZHBfbXN0X2NoZWNrX3N0YXR1cyhzdHJ1Y3Qg
cmFkZW9uX2Nvbm5lY3RvciAqcmFkZW9uX2Nvbm5lY3Rvcik7Ci1pbnQgcmFkZW9uX21zdF9kZWJ1
Z2ZzX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwordm9pZCByYWRlb25fbXN0X2Rl
YnVnZnNfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7CiB2b2lkIHJhZGVvbl9kcF9t
c3RfcHJlcGFyZV9wbGwoc3RydWN0IGRybV9jcnRjICpjcnRjLCBzdHJ1Y3QgZHJtX2Rpc3BsYXlf
bW9kZSAqbW9kZSk7CiAKIHZvaWQgcmFkZW9uX3NldHVwX21zdF9jb25uZWN0b3Ioc3RydWN0IGRy
bV9kZXZpY2UgKmRldik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVv
bl9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fcG0uYwppbmRleCAxOTk1ZGFk
NTlkZDAuLmI2NzM3YmU5MTY1YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25fcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9wbS5jCkBAIC0y
Niw3ICsyNiw2IEBACiAjaW5jbHVkZSA8bGludXgvcGNpLmg+CiAjaW5jbHVkZSA8bGludXgvcG93
ZXJfc3VwcGx5Lmg+CiAKLSNpbmNsdWRlIDxkcm0vZHJtX2RlYnVnZnMuaD4KICNpbmNsdWRlIDxk
cm0vZHJtX3ZibGFuay5oPgogCiAjaW5jbHVkZSAiYXRvbS5oIgpAQCAtNDgsNyArNDcsNyBAQCBz
dGF0aWMgY29uc3QgY2hhciAqcmFkZW9uX3BtX3N0YXRlX3R5cGVfbmFtZVs1XSA9IHsKIH07CiAK
IHN0YXRpYyB2b2lkIHJhZGVvbl9keW5wbV9pZGxlX3dvcmtfaGFuZGxlcihzdHJ1Y3Qgd29ya19z
dHJ1Y3QgKndvcmspOwotc3RhdGljIGludCByYWRlb25fZGVidWdmc19wbV9pbml0KHN0cnVjdCBy
YWRlb25fZGV2aWNlICpyZGV2KTsKK3N0YXRpYyB2b2lkIHJhZGVvbl9kZWJ1Z2ZzX3BtX2luaXQo
c3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwogc3RhdGljIGJvb2wgcmFkZW9uX3BtX2luX3Zi
bChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7CiBzdGF0aWMgYm9vbCByYWRlb25fcG1fZGVi
dWdfY2hlY2tfaW5fdmJsKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LCBib29sIGZpbmlzaCk7
CiBzdGF0aWMgdm9pZCByYWRlb25fcG1fdXBkYXRlX3Byb2ZpbGUoc3RydWN0IHJhZGVvbl9kZXZp
Y2UgKnJkZXYpOwpAQCAtMTM5OSwxMCArMTM5OCw3IEBAIHN0YXRpYyBpbnQgcmFkZW9uX3BtX2lu
aXRfb2xkKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogCUlOSVRfREVMQVlFRF9XT1JLKCZy
ZGV2LT5wbS5keW5wbV9pZGxlX3dvcmssIHJhZGVvbl9keW5wbV9pZGxlX3dvcmtfaGFuZGxlcik7
CiAKIAlpZiAocmRldi0+cG0ubnVtX3Bvd2VyX3N0YXRlcyA+IDEpIHsKLQkJaWYgKHJhZGVvbl9k
ZWJ1Z2ZzX3BtX2luaXQocmRldikpIHsKLQkJCURSTV9FUlJPUigiRmFpbGVkIHRvIHJlZ2lzdGVy
IGRlYnVnZnMgZmlsZSBmb3IgUE0hXG4iKTsKLQkJfQotCisJCXJhZGVvbl9kZWJ1Z2ZzX3BtX2lu
aXQocmRldik7CiAJCURSTV9JTkZPKCJyYWRlb246IHBvd2VyIG1hbmFnZW1lbnQgaW5pdGlhbGl6
ZWRcbiIpOwogCX0KIApAQCAtMTQ1Niw5ICsxNDUyLDcgQEAgc3RhdGljIGludCByYWRlb25fcG1f
aW5pdF9kcG0oc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAJCWdvdG8gZHBtX2ZhaWxlZDsK
IAlyZGV2LT5wbS5kcG1fZW5hYmxlZCA9IHRydWU7CiAKLQlpZiAocmFkZW9uX2RlYnVnZnNfcG1f
aW5pdChyZGV2KSkgewotCQlEUk1fRVJST1IoIkZhaWxlZCB0byByZWdpc3RlciBkZWJ1Z2ZzIGZp
bGUgZm9yIGRwbSFcbiIpOwotCX0KKwlyYWRlb25fZGVidWdmc19wbV9pbml0KHJkZXYpOwogCiAJ
RFJNX0lORk8oInJhZGVvbjogZHBtIGluaXRpYWxpemVkXG4iKTsKIApAQCAtMTkxNiwxMSArMTkx
MCw5IEBAIHN0YXRpYyB2b2lkIHJhZGVvbl9keW5wbV9pZGxlX3dvcmtfaGFuZGxlcihzdHJ1Y3Qg
d29ya19zdHJ1Y3QgKndvcmspCiAgKi8KICNpZiBkZWZpbmVkKENPTkZJR19ERUJVR19GUykKIAot
c3RhdGljIGludCByYWRlb25fZGVidWdmc19wbV9pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9p
ZCAqZGF0YSkKK3N0YXRpYyBpbnQgcmFkZW9uX2RlYnVnZnNfcG1faW5mb19zaG93KHN0cnVjdCBz
ZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQogewotCXN0cnVjdCBkcm1faW5mb19ub2RlICpub2Rl
ID0gKHN0cnVjdCBkcm1faW5mb19ub2RlICopIG0tPnByaXZhdGU7Ci0Jc3RydWN0IGRybV9kZXZp
Y2UgKmRldiA9IG5vZGUtPm1pbm9yLT5kZXY7Ci0Jc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYg
PSBkZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0gKHN0cnVj
dCByYWRlb25fZGV2aWNlICopbS0+cHJpdmF0ZTsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiA9
IHJkZXYtPmRkZXY7CiAKIAlpZiAgKChyZGV2LT5mbGFncyAmIFJBREVPTl9JU19QWCkgJiYKQEAg
LTE5NTIsMTYgKzE5NDQsMTYgQEAgc3RhdGljIGludCByYWRlb25fZGVidWdmc19wbV9pbmZvKHN0
cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIHN0
cnVjdCBkcm1faW5mb19saXN0IHJhZGVvbl9wbV9pbmZvX2xpc3RbXSA9IHsKLQl7InJhZGVvbl9w
bV9pbmZvIiwgcmFkZW9uX2RlYnVnZnNfcG1faW5mbywgMCwgTlVMTH0sCi19OworREVGSU5FX1NI
T1dfQVRUUklCVVRFKHJhZGVvbl9kZWJ1Z2ZzX3BtX2luZm8pOwogI2VuZGlmCiAKLXN0YXRpYyBp
bnQgcmFkZW9uX2RlYnVnZnNfcG1faW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKK3N0
YXRpYyB2b2lkIHJhZGVvbl9kZWJ1Z2ZzX3BtX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJk
ZXYpCiB7CiAjaWYgZGVmaW5lZChDT05GSUdfREVCVUdfRlMpCi0JcmV0dXJuIHJhZGVvbl9kZWJ1
Z2ZzX2FkZF9maWxlcyhyZGV2LCByYWRlb25fcG1faW5mb19saXN0LCBBUlJBWV9TSVpFKHJhZGVv
bl9wbV9pbmZvX2xpc3QpKTsKLSNlbHNlCi0JcmV0dXJuIDA7CisJc3RydWN0IGRlbnRyeSAqcm9v
dCA9IHJkZXYtPmRkZXYtPnByaW1hcnktPmRlYnVnZnNfcm9vdDsKKworCWRlYnVnZnNfY3JlYXRl
X2ZpbGUoInJhZGVvbl9wbV9pbmZvIiwgMDQ0NCwgcm9vdCwgcmRldiwKKwkJCSAgICAmcmFkZW9u
X2RlYnVnZnNfcG1faW5mb19mb3BzKTsKKwogI2VuZGlmCiB9CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9yaW5nLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbl9yaW5nLmMKaW5kZXggNDFlZDhhYmExMzEzLi43ZTIwNzI3NmRmMzcgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3JpbmcuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vcmFkZW9uL3JhZGVvbl9yaW5nLmMKQEAgLTI3LDcgKzI3LDYgQEAKICAqICAgICAgICAgIENo
cmlzdGlhbiBLw7ZuaWcKICAqLwogCi0jaW5jbHVkZSA8ZHJtL2RybV9kZWJ1Z2ZzLmg+CiAjaW5j
bHVkZSA8ZHJtL2RybV9kZXZpY2UuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2ZpbGUuaD4KIApAQCAt
NDYsNyArNDUsNyBAQAogICogd3B0ci4gIFRoZSBHUFUgdGhlbiBzdGFydHMgZmV0Y2hpbmcgY29t
bWFuZHMgYW5kIGV4ZWN1dGVzCiAgKiB0aGVtIHVudGlsIHRoZSBwb2ludGVycyBhcmUgZXF1YWwg
YWdhaW4uCiAgKi8KLXN0YXRpYyBpbnQgcmFkZW9uX2RlYnVnZnNfcmluZ19pbml0KHN0cnVjdCBy
YWRlb25fZGV2aWNlICpyZGV2LCBzdHJ1Y3QgcmFkZW9uX3JpbmcgKnJpbmcpOworc3RhdGljIHZv
aWQgcmFkZW9uX2RlYnVnZnNfcmluZ19pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LCBz
dHJ1Y3QgcmFkZW9uX3JpbmcgKnJpbmcpOwogCiAvKioKICAqIHJhZGVvbl9yaW5nX3N1cHBvcnRz
X3NjcmF0Y2hfcmVnIC0gY2hlY2sgaWYgdGhlIHJpbmcgc3VwcG9ydHMKQEAgLTQyMiw5ICs0MjEs
NyBAQCBpbnQgcmFkZW9uX3JpbmdfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwgc3Ry
dWN0IHJhZGVvbl9yaW5nICpyaW5nLCB1bnNpZwogCQlyaW5nLT5uZXh0X3JwdHJfZ3B1X2FkZHIg
PSByZGV2LT53Yi5ncHVfYWRkciArIGluZGV4OwogCQlyaW5nLT5uZXh0X3JwdHJfY3B1X2FkZHIg
PSAmcmRldi0+d2Iud2JbaW5kZXgvNF07CiAJfQotCWlmIChyYWRlb25fZGVidWdmc19yaW5nX2lu
aXQocmRldiwgcmluZykpIHsKLQkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gcmVnaXN0ZXIgZGVidWdm
cyBmaWxlIGZvciByaW5ncyAhXG4iKTsKLQl9CisJcmFkZW9uX2RlYnVnZnNfcmluZ19pbml0KHJk
ZXYsIHJpbmcpOwogCXJhZGVvbl9yaW5nX2xvY2t1cF91cGRhdGUocmRldiwgcmluZyk7CiAJcmV0
dXJuIDA7CiB9CkBAIC00NjUsMTMgKzQ2MiwxMCBAQCB2b2lkIHJhZGVvbl9yaW5nX2Zpbmkoc3Ry
dWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYsIHN0cnVjdCByYWRlb25fcmluZyAqcmluZykKICAqLwog
I2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQogCi1zdGF0aWMgaW50IHJhZGVvbl9kZWJ1Z2Zz
X3JpbmdfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCitzdGF0aWMgaW50IHJh
ZGVvbl9kZWJ1Z2ZzX3JpbmdfaW5mb19zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51
c2VkKQogewotCXN0cnVjdCBkcm1faW5mb19ub2RlICpub2RlID0gKHN0cnVjdCBkcm1faW5mb19u
b2RlICopIG0tPnByaXZhdGU7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IG5vZGUtPm1pbm9y
LT5kZXY7Ci0Jc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYgPSBkZXYtPmRldl9wcml2YXRlOwot
CWludCByaWR4ID0gKihpbnQqKW5vZGUtPmluZm9fZW50LT5kYXRhOwotCXN0cnVjdCByYWRlb25f
cmluZyAqcmluZyA9ICZyZGV2LT5yaW5nW3JpZHhdOworCXN0cnVjdCByYWRlb25fcmluZyAqcmlu
ZyA9IChzdHJ1Y3QgcmFkZW9uX3JpbmcgKikgbS0+cHJpdmF0ZTsKKwlzdHJ1Y3QgcmFkZW9uX2Rl
dmljZSAqcmRldiA9IHJpbmctPnJkZXY7CiAKIAl1aW50MzJfdCBycHRyLCB3cHRyLCBycHRyX25l
eHQ7CiAJdW5zaWduZWQgY291bnQsIGksIGo7CkBAIC01MjIsNDQgKzUxNiw0MyBAQCBzdGF0aWMg
aW50IHJhZGVvbl9kZWJ1Z2ZzX3JpbmdfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRh
dGEpCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQgcmFkZW9uX2dmeF9pbmRleCA9IFJBREVP
Tl9SSU5HX1RZUEVfR0ZYX0lOREVYOwotc3RhdGljIGludCBjYXltYW5fY3AxX2luZGV4ID0gQ0FZ
TUFOX1JJTkdfVFlQRV9DUDFfSU5ERVg7Ci1zdGF0aWMgaW50IGNheW1hbl9jcDJfaW5kZXggPSBD
QVlNQU5fUklOR19UWVBFX0NQMl9JTkRFWDsKLXN0YXRpYyBpbnQgcmFkZW9uX2RtYTFfaW5kZXgg
PSBSNjAwX1JJTkdfVFlQRV9ETUFfSU5ERVg7Ci1zdGF0aWMgaW50IHJhZGVvbl9kbWEyX2luZGV4
ID0gQ0FZTUFOX1JJTkdfVFlQRV9ETUExX0lOREVYOwotc3RhdGljIGludCByNjAwX3V2ZF9pbmRl
eCA9IFI2MDBfUklOR19UWVBFX1VWRF9JTkRFWDsKLXN0YXRpYyBpbnQgc2lfdmNlMV9pbmRleCA9
IFROX1JJTkdfVFlQRV9WQ0UxX0lOREVYOwotc3RhdGljIGludCBzaV92Y2UyX2luZGV4ID0gVE5f
UklOR19UWVBFX1ZDRTJfSU5ERVg7Ci0KLXN0YXRpYyBzdHJ1Y3QgZHJtX2luZm9fbGlzdCByYWRl
b25fZGVidWdmc19yaW5nX2luZm9fbGlzdFtdID0gewotCXsicmFkZW9uX3JpbmdfZ2Z4IiwgcmFk
ZW9uX2RlYnVnZnNfcmluZ19pbmZvLCAwLCAmcmFkZW9uX2dmeF9pbmRleH0sCi0JeyJyYWRlb25f
cmluZ19jcDEiLCByYWRlb25fZGVidWdmc19yaW5nX2luZm8sIDAsICZjYXltYW5fY3AxX2luZGV4
fSwKLQl7InJhZGVvbl9yaW5nX2NwMiIsIHJhZGVvbl9kZWJ1Z2ZzX3JpbmdfaW5mbywgMCwgJmNh
eW1hbl9jcDJfaW5kZXh9LAotCXsicmFkZW9uX3JpbmdfZG1hMSIsIHJhZGVvbl9kZWJ1Z2ZzX3Jp
bmdfaW5mbywgMCwgJnJhZGVvbl9kbWExX2luZGV4fSwKLQl7InJhZGVvbl9yaW5nX2RtYTIiLCBy
YWRlb25fZGVidWdmc19yaW5nX2luZm8sIDAsICZyYWRlb25fZG1hMl9pbmRleH0sCi0JeyJyYWRl
b25fcmluZ191dmQiLCByYWRlb25fZGVidWdmc19yaW5nX2luZm8sIDAsICZyNjAwX3V2ZF9pbmRl
eH0sCi0JeyJyYWRlb25fcmluZ192Y2UxIiwgcmFkZW9uX2RlYnVnZnNfcmluZ19pbmZvLCAwLCAm
c2lfdmNlMV9pbmRleH0sCi0JeyJyYWRlb25fcmluZ192Y2UyIiwgcmFkZW9uX2RlYnVnZnNfcmlu
Z19pbmZvLCAwLCAmc2lfdmNlMl9pbmRleH0sCi19OworREVGSU5FX1NIT1dfQVRUUklCVVRFKHJh
ZGVvbl9kZWJ1Z2ZzX3JpbmdfaW5mbyk7CisKK3N0YXRpYyBjb25zdCBjaGFyICpyYWRlb25fZGVi
dWdmc19yaW5nX2lkeF90b19uYW1lKHVpbnQzMl90IHJpZHgpCit7CisJc3dpdGNoIChyaWR4KSB7
CisJY2FzZSBSQURFT05fUklOR19UWVBFX0dGWF9JTkRFWDoKKwkJcmV0dXJuICJyYWRlb25fcmlu
Z19nZngiOworCWNhc2UgQ0FZTUFOX1JJTkdfVFlQRV9DUDFfSU5ERVg6CisJCXJldHVybiAicmFk
ZW9uX3JpbmdfY3AxIjsKKwljYXNlIENBWU1BTl9SSU5HX1RZUEVfQ1AyX0lOREVYOgorCQlyZXR1
cm4gInJhZGVvbl9yaW5nX2NwMiI7CisJY2FzZSBSNjAwX1JJTkdfVFlQRV9ETUFfSU5ERVg6CisJ
CXJldHVybiAicmFkZW9uX3JpbmdfZG1hMSI7CisJY2FzZSBDQVlNQU5fUklOR19UWVBFX0RNQTFf
SU5ERVg6CisJCXJldHVybiAicmFkZW9uX3JpbmdfZG1hMiI7CisJY2FzZSBSNjAwX1JJTkdfVFlQ
RV9VVkRfSU5ERVg6CisJCXJldHVybiAicmFkZW9uX3JpbmdfdXZkIjsKKwljYXNlIFROX1JJTkdf
VFlQRV9WQ0UxX0lOREVYOgorCQlyZXR1cm4gInJhZGVvbl9yaW5nX3ZjZTEiOworCWNhc2UgVE5f
UklOR19UWVBFX1ZDRTJfSU5ERVg6CisJCXJldHVybiAicmFkZW9uX3JpbmdfdmNlMiI7CisJZGVm
YXVsdDoKKwkJcmV0dXJuIE5VTEw7CiAKKwl9Cit9CiAjZW5kaWYKIAotc3RhdGljIGludCByYWRl
b25fZGVidWdmc19yaW5nX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYsIHN0cnVjdCBy
YWRlb25fcmluZyAqcmluZykKK3N0YXRpYyB2b2lkIHJhZGVvbl9kZWJ1Z2ZzX3JpbmdfaW5pdChz
dHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwgc3RydWN0IHJhZGVvbl9yaW5nICpyaW5nKQogewog
I2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQotCXVuc2lnbmVkIGk7Ci0JZm9yIChpID0gMDsg
aSA8IEFSUkFZX1NJWkUocmFkZW9uX2RlYnVnZnNfcmluZ19pbmZvX2xpc3QpOyArK2kpIHsKLQkJ
c3RydWN0IGRybV9pbmZvX2xpc3QgKmluZm8gPSAmcmFkZW9uX2RlYnVnZnNfcmluZ19pbmZvX2xp
c3RbaV07Ci0JCWludCByaWR4ID0gKihpbnQqKXJhZGVvbl9kZWJ1Z2ZzX3JpbmdfaW5mb19saXN0
W2ldLmRhdGE7Ci0JCXVuc2lnbmVkIHI7CisJY29uc3QgY2hhciAqcmluZ19uYW1lID0gcmFkZW9u
X2RlYnVnZnNfcmluZ19pZHhfdG9fbmFtZShyaW5nLT5pZHgpOworCXN0cnVjdCBkZW50cnkgKnJv
b3QgPSByZGV2LT5kZGV2LT5wcmltYXJ5LT5kZWJ1Z2ZzX3Jvb3Q7CiAKLQkJaWYgKCZyZGV2LT5y
aW5nW3JpZHhdICE9IHJpbmcpCi0JCQljb250aW51ZTsKKwlpZiAocmluZ19uYW1lKQorCQlkZWJ1
Z2ZzX2NyZWF0ZV9maWxlKHJpbmdfbmFtZSwgMDQ0NCwgcm9vdCwgcmluZywKKwkJCQkgICAgJnJh
ZGVvbl9kZWJ1Z2ZzX3JpbmdfaW5mb19mb3BzKTsKIAotCQlyID0gcmFkZW9uX2RlYnVnZnNfYWRk
X2ZpbGVzKHJkZXYsIGluZm8sIDEpOwotCQlpZiAocikKLQkJCXJldHVybiByOwotCX0KICNlbmRp
ZgotCXJldHVybiAwOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYwppbmRleCA5ZDE1
NmIxMmQyNGMuLjBjYmYwNWIyZjYzNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVv
bi9yYWRlb25fdHRtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMK
QEAgLTM5LDcgKzM5LDYgQEAKICNpbmNsdWRlIDxsaW51eC9zd2lvdGxiLmg+CiAKICNpbmNsdWRl
IDxkcm0vZHJtX2FncHN1cHBvcnQuaD4KLSNpbmNsdWRlIDxkcm0vZHJtX2RlYnVnZnMuaD4KICNp
bmNsdWRlIDxkcm0vZHJtX2RldmljZS5oPgogI2luY2x1ZGUgPGRybS9kcm1fZmlsZS5oPgogI2lu
Y2x1ZGUgPGRybS9kcm1fcHJpbWUuaD4KQEAgLTU0LDcgKzUzLDcgQEAKICNpbmNsdWRlICJyYWRl
b24uaCIKICNpbmNsdWRlICJyYWRlb25fdHRtLmgiCiAKLXN0YXRpYyBpbnQgcmFkZW9uX3R0bV9k
ZWJ1Z2ZzX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOworc3RhdGljIHZvaWQgcmFk
ZW9uX3R0bV9kZWJ1Z2ZzX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwogCiBzdHJ1
Y3QgcmFkZW9uX2RldmljZSAqcmFkZW9uX2dldF9yZGV2KHN0cnVjdCB0dG1fYm9fZGV2aWNlICpi
ZGV2KQogewpAQCAtNzc4LDExICs3NzcsOCBAQCBpbnQgcmFkZW9uX3R0bV9pbml0KHN0cnVjdCBy
YWRlb25fZGV2aWNlICpyZGV2KQogCURSTV9JTkZPKCJyYWRlb246ICV1TSBvZiBHVFQgbWVtb3J5
IHJlYWR5LlxuIiwKIAkJICh1bnNpZ25lZCkocmRldi0+bWMuZ3R0X3NpemUgLyAoMTAyNCAqIDEw
MjQpKSk7CiAKLQlyID0gcmFkZW9uX3R0bV9kZWJ1Z2ZzX2luaXQocmRldik7Ci0JaWYgKHIpIHsK
LQkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gaW5pdCBkZWJ1Z2ZzXG4iKTsKLQkJcmV0dXJuIHI7Ci0J
fQorCXJhZGVvbl90dG1fZGVidWdmc19pbml0KHJkZXYpOworCiAJcmV0dXJuIDA7CiB9CiAKQEAg
LTg2NiwzMSArODYyLDU4IEBAIGludCByYWRlb25fbW1hcChzdHJ1Y3QgZmlsZSAqZmlscCwgc3Ry
dWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpCiAKICNpZiBkZWZpbmVkKENPTkZJR19ERUJVR19GUykK
IAotc3RhdGljIGludCByYWRlb25fbW1fZHVtcF90YWJsZShzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZv
aWQgKmRhdGEpCitzdGF0aWMgaW50IHJhZGVvbl9tbV92cmFtX2R1bXBfdGFibGVfc2hvdyhzdHJ1
Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIHsKLQlzdHJ1Y3QgZHJtX2luZm9fbm9kZSAq
bm9kZSA9IChzdHJ1Y3QgZHJtX2luZm9fbm9kZSAqKW0tPnByaXZhdGU7Ci0JdW5zaWduZWQgdHRt
X3BsID0gKihpbnQqKW5vZGUtPmluZm9fZW50LT5kYXRhOwotCXN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYgPSBub2RlLT5taW5vci0+ZGV2OwotCXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0gZGV2
LT5kZXZfcHJpdmF0ZTsKLQlzdHJ1Y3QgdHRtX3Jlc291cmNlX21hbmFnZXIgKm1hbiA9IHR0bV9t
YW5hZ2VyX3R5cGUoJnJkZXYtPm1tYW4uYmRldiwgdHRtX3BsKTsKKwlzdHJ1Y3QgcmFkZW9uX2Rl
dmljZSAqcmRldiA9IChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqKW0tPnByaXZhdGU7CisJc3RydWN0
IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICptYW4gPSB0dG1fbWFuYWdlcl90eXBlKCZyZGV2LT5tbWFu
LmJkZXYsCisJCQkJCQkJICAgIFRUTV9QTF9WUkFNKTsKIAlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9
IGRybV9zZXFfZmlsZV9wcmludGVyKG0pOwogCiAJbWFuLT5mdW5jLT5kZWJ1ZyhtYW4sICZwKTsK
IAlyZXR1cm4gMDsKIH0KIAorc3RhdGljIGludCByYWRlb25fbW1fZ3R0X2R1bXBfdGFibGVfc2hv
dyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKK3sKKwlzdHJ1Y3QgcmFkZW9uX2Rl
dmljZSAqcmRldiA9IChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqKW0tPnByaXZhdGU7CisJc3RydWN0
IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICptYW4gPSB0dG1fbWFuYWdlcl90eXBlKCZyZGV2LT5tbWFu
LmJkZXYsCisJCQkJCQkJICAgIFRUTV9QTF9UVCk7CisJc3RydWN0IGRybV9wcmludGVyIHAgPSBk
cm1fc2VxX2ZpbGVfcHJpbnRlcihtKTsKKworCW1hbi0+ZnVuYy0+ZGVidWcobWFuLCAmcCk7CisJ
cmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgcmFkZW9uX3R0bV9wYWdlX2RlYnVnZnNfb3Blbihz
dHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZSkKK3sKKwlyZXR1cm4gc2luZ2xl
X29wZW4oZmlsZSwgdHRtX3BhZ2VfYWxsb2NfZGVidWdmcywgaW5vZGUtPmlfcHJpdmF0ZSk7Cit9
CiAKLXN0YXRpYyBpbnQgdHRtX3BsX3ZyYW0gPSBUVE1fUExfVlJBTTsKLXN0YXRpYyBpbnQgdHRt
X3BsX3R0ID0gVFRNX1BMX1RUOworc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMg
cmFkZW9uX3R0bV9wYWdlX2RlYnVnZnNfZm9wcyA9IHsKKwkub3duZXIgPSBUSElTX01PRFVMRSwK
Kwkub3BlbiA9IHJhZGVvbl90dG1fcGFnZV9kZWJ1Z2ZzX29wZW4sCisJLnJlYWQgPSBzZXFfcmVh
ZCwKKwkubGxzZWVrID0gc2VxX2xzZWVrLAorCS5yZWxlYXNlID0gc2luZ2xlX3JlbGVhc2UsCit9
OwogCi1zdGF0aWMgc3RydWN0IGRybV9pbmZvX2xpc3QgcmFkZW9uX3R0bV9kZWJ1Z2ZzX2xpc3Rb
XSA9IHsKLQl7InJhZGVvbl92cmFtX21tIiwgcmFkZW9uX21tX2R1bXBfdGFibGUsIDAsICZ0dG1f
cGxfdnJhbX0sCi0JeyJyYWRlb25fZ3R0X21tIiwgcmFkZW9uX21tX2R1bXBfdGFibGUsIDAsICZ0
dG1fcGxfdHR9LAotCXsidHRtX3BhZ2VfcG9vbCIsIHR0bV9wYWdlX2FsbG9jX2RlYnVnZnMsIDAs
IE5VTEx9LAogI2lmZGVmIENPTkZJR19TV0lPVExCCi0JeyJ0dG1fZG1hX3BhZ2VfcG9vbCIsIHR0
bV9kbWFfcGFnZV9hbGxvY19kZWJ1Z2ZzLCAwLCBOVUxMfQotI2VuZGlmCitzdGF0aWMgaW50IHJh
ZGVvbl90dG1fZG1hX3BhZ2VfZGVidWdmc19vcGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVj
dCBmaWxlICpmaWxlKQoreworCXJldHVybiBzaW5nbGVfb3BlbihmaWxlLCB0dG1fZG1hX3BhZ2Vf
YWxsb2NfZGVidWdmcywgaW5vZGUtPmlfcHJpdmF0ZSk7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgZmlsZV9vcGVyYXRpb25zIHJhZGVvbl90dG1fZG1hX3BhZ2VfZGVidWdmc19mb3BzID0gewor
CS5vd25lciA9IFRISVNfTU9EVUxFLAorCS5vcGVuID0gcmFkZW9uX3R0bV9kbWFfcGFnZV9kZWJ1
Z2ZzX29wZW4sCisJLnJlYWQgPSBzZXFfcmVhZCwKKwkubGxzZWVrID0gc2VxX2xzZWVrLAorCS5y
ZWxlYXNlID0gc2luZ2xlX3JlbGVhc2UsCiB9OworI2VuZGlmCisKK0RFRklORV9TSE9XX0FUVFJJ
QlVURShyYWRlb25fbW1fdnJhbV9kdW1wX3RhYmxlKTsKK0RFRklORV9TSE9XX0FUVFJJQlVURShy
YWRlb25fbW1fZ3R0X2R1bXBfdGFibGUpOwogCiBzdGF0aWMgaW50IHJhZGVvbl90dG1fdnJhbV9v
cGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxlICpmaWxlcCkKIHsKQEAgLTEwMDAs
MzAgKzEwMjMsMjkgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgcmFkZW9u
X3R0bV9ndHRfZm9wcyA9IHsKIAogI2VuZGlmCiAKLXN0YXRpYyBpbnQgcmFkZW9uX3R0bV9kZWJ1
Z2ZzX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCitzdGF0aWMgdm9pZCByYWRlb25f
dHRtX2RlYnVnZnNfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIHsKICNpZiBkZWZp
bmVkKENPTkZJR19ERUJVR19GUykKLQl1bnNpZ25lZCBjb3VudDsKLQogCXN0cnVjdCBkcm1fbWlu
b3IgKm1pbm9yID0gcmRldi0+ZGRldi0+cHJpbWFyeTsKIAlzdHJ1Y3QgZGVudHJ5ICpyb290ID0g
bWlub3ItPmRlYnVnZnNfcm9vdDsKIAotCWRlYnVnZnNfY3JlYXRlX2ZpbGUoInJhZGVvbl92cmFt
IiwgU19JRlJFRyB8IFNfSVJVR08sIHJvb3QsIHJkZXYsCisJZGVidWdmc19jcmVhdGVfZmlsZSgi
cmFkZW9uX3ZyYW0iLCAwNDQ0LCByb290LCByZGV2LAogCQkJICAgICZyYWRlb25fdHRtX3ZyYW1f
Zm9wcyk7CiAKLQlkZWJ1Z2ZzX2NyZWF0ZV9maWxlKCJyYWRlb25fZ3R0IiwgU19JRlJFRyB8IFNf
SVJVR08sIHJvb3QsIHJkZXYsCisJZGVidWdmc19jcmVhdGVfZmlsZSgicmFkZW9uX2d0dCIsIDA0
NDQsIHJvb3QsIHJkZXYsCiAJCQkgICAgJnJhZGVvbl90dG1fZ3R0X2ZvcHMpOwogCi0JY291bnQg
PSBBUlJBWV9TSVpFKHJhZGVvbl90dG1fZGVidWdmc19saXN0KTsKKwlkZWJ1Z2ZzX2NyZWF0ZV9m
aWxlKCJyYWRlb25fdnJhbV9tbSIsIDA0NDQsIHJvb3QsIHJkZXYsCisJCQkgICAgJnJhZGVvbl9t
bV92cmFtX2R1bXBfdGFibGVfZm9wcyk7CisJZGVidWdmc19jcmVhdGVfZmlsZSgicmFkZW9uX2d0
dF9tbSIsIDA0NDQsIHJvb3QsIHJkZXYsCisJCQkgICAgJnJhZGVvbl9tbV9ndHRfZHVtcF90YWJs
ZV9mb3BzKTsKKwlkZWJ1Z2ZzX2NyZWF0ZV9maWxlKCJ0dG1fcGFnZV9wb29sIiwgMDQ0NCwgcm9v
dCwgcmRldiwKKwkJCSAgICAmcmFkZW9uX3R0bV9wYWdlX2RlYnVnZnNfZm9wcyk7CiAKICNpZmRl
ZiBDT05GSUdfU1dJT1RMQgotCWlmICghKHJkZXYtPm5lZWRfc3dpb3RsYiAmJiBzd2lvdGxiX25y
X3RibCgpKSkKLQkJLS1jb3VudDsKKwlpZiAoKHJkZXYtPm5lZWRfc3dpb3RsYiAmJiBzd2lvdGxi
X25yX3RibCgpKSkKKwkJZGVidWdmc19jcmVhdGVfZmlsZSgidHRtX2RtYV9wYWdlX3Bvb2wiLCAw
NDQ0LCByb290LCByZGV2LAorCQkJCSAgICAmcmFkZW9uX3R0bV9kbWFfcGFnZV9kZWJ1Z2ZzX2Zv
cHMpOwogI2VuZGlmCi0KLQlyZXR1cm4gcmFkZW9uX2RlYnVnZnNfYWRkX2ZpbGVzKHJkZXYsIHJh
ZGVvbl90dG1fZGVidWdmc19saXN0LCBjb3VudCk7Ci0jZWxzZQotCi0JcmV0dXJuIDA7CiAjZW5k
aWYKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcnM0MDAuYyBiL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcnM0MDAuYwppbmRleCAxMTdmNjBhZjFlZTQuLjg0MjNiY2MzMzAy
YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yczQwMC5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcnM0MDAuYwpAQCAtMjksNyArMjksNiBAQAogI2luY2x1ZGUgPGxp
bnV4L3NlcV9maWxlLmg+CiAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgogCi0jaW5jbHVkZSA8ZHJt
L2RybV9kZWJ1Z2ZzLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kZXZpY2UuaD4KICNpbmNsdWRlIDxk
cm0vZHJtX2ZpbGUuaD4KIApAQCAtMzgsNyArMzcsNyBAQAogI2luY2x1ZGUgInJzNDAwZC5oIgog
CiAvKiBUaGlzIGZpbGVzIGdhdGhlciBmdW5jdGlvbnMgc3BlY2lmaWNzIHRvIDogcnM0MDAscnM0
ODAgKi8KLXN0YXRpYyBpbnQgcnM0MDBfZGVidWdmc19wY2llX2dhcnRfaW5mb19pbml0KHN0cnVj
dCByYWRlb25fZGV2aWNlICpyZGV2KTsKK3N0YXRpYyB2b2lkIHJzNDAwX2RlYnVnZnNfcGNpZV9n
YXJ0X2luZm9faW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7CiAKIHZvaWQgcnM0MDBf
Z2FydF9hZGp1c3Rfc2l6ZShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIHsKQEAgLTEwMyw4
ICsxMDIsNyBAQCBpbnQgcnM0MDBfZ2FydF9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2
KQogCXIgPSByYWRlb25fZ2FydF9pbml0KHJkZXYpOwogCWlmIChyKQogCQlyZXR1cm4gcjsKLQlp
ZiAocnM0MDBfZGVidWdmc19wY2llX2dhcnRfaW5mb19pbml0KHJkZXYpKQotCQlEUk1fRVJST1Io
IkZhaWxlZCB0byByZWdpc3RlciBkZWJ1Z2ZzIGZpbGUgZm9yIFJTNDAwIEdBUlQgIVxuIik7CisJ
cnM0MDBfZGVidWdmc19wY2llX2dhcnRfaW5mb19pbml0KHJkZXYpOwogCXJkZXYtPmdhcnQudGFi
bGVfc2l6ZSA9IHJkZXYtPmdhcnQubnVtX2dwdV9wYWdlcyAqIDQ7CiAJcmV0dXJuIHJhZGVvbl9n
YXJ0X3RhYmxlX3JhbV9hbGxvYyhyZGV2KTsKIH0KQEAgLTMwNywxMSArMzA1LDkgQEAgdm9pZCBy
czQwMF9tY193cmVnKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LCB1aW50MzJfdCByZWcsIHVp
bnQzMl90IHYpCiB9CiAKICNpZiBkZWZpbmVkKENPTkZJR19ERUJVR19GUykKLXN0YXRpYyBpbnQg
cnM0MDBfZGVidWdmc19nYXJ0X2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQor
c3RhdGljIGludCByczQwMF9kZWJ1Z2ZzX2dhcnRfaW5mb19zaG93KHN0cnVjdCBzZXFfZmlsZSAq
bSwgdm9pZCAqdW51c2VkKQogewotCXN0cnVjdCBkcm1faW5mb19ub2RlICpub2RlID0gKHN0cnVj
dCBkcm1faW5mb19ub2RlICopIG0tPnByaXZhdGU7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9
IG5vZGUtPm1pbm9yLT5kZXY7Ci0Jc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYgPSBkZXYtPmRl
dl9wcml2YXRlOworCXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0gKHN0cnVjdCByYWRlb25f
ZGV2aWNlICopbS0+cHJpdmF0ZTsKIAl1aW50MzJfdCB0bXA7CiAKIAl0bXAgPSBSUkVHMzIoUkFE
RU9OX0hPU1RfUEFUSF9DTlRMKTsKQEAgLTM3NiwxNyArMzcyLDE2IEBAIHN0YXRpYyBpbnQgcnM0
MDBfZGVidWdmc19nYXJ0X2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQogCXJl
dHVybiAwOwogfQogCi1zdGF0aWMgc3RydWN0IGRybV9pbmZvX2xpc3QgcnM0MDBfZ2FydF9pbmZv
X2xpc3RbXSA9IHsKLQl7InJzNDAwX2dhcnRfaW5mbyIsIHJzNDAwX2RlYnVnZnNfZ2FydF9pbmZv
LCAwLCBOVUxMfSwKLX07CitERUZJTkVfU0hPV19BVFRSSUJVVEUocnM0MDBfZGVidWdmc19nYXJ0
X2luZm8pOwogI2VuZGlmCiAKLXN0YXRpYyBpbnQgcnM0MDBfZGVidWdmc19wY2llX2dhcnRfaW5m
b19pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQorc3RhdGljIHZvaWQgcnM0MDBfZGVi
dWdmc19wY2llX2dhcnRfaW5mb19pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogewog
I2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQotCXJldHVybiByYWRlb25fZGVidWdmc19hZGRf
ZmlsZXMocmRldiwgcnM0MDBfZ2FydF9pbmZvX2xpc3QsIDEpOwotI2Vsc2UKLQlyZXR1cm4gMDsK
KwlzdHJ1Y3QgZGVudHJ5ICpyb290ID0gcmRldi0+ZGRldi0+cHJpbWFyeS0+ZGVidWdmc19yb290
OworCisJZGVidWdmc19jcmVhdGVfZmlsZSgicnM0MDBfZ2FydF9pbmZvIiwgMDQ0NCwgcm9vdCwg
cmRldiwKKwkJCSAgICAmcnM0MDBfZGVidWdmc19nYXJ0X2luZm9fZm9wcyk7CiAjZW5kaWYKIH0K
IApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yczYwMC5jIGIvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yczYwMC5jCmluZGV4IGM4OGI0OTA2ZjdiYy4uNWJmMjYwNThlZWMwIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JzNjAwLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yczYwMC5jCkBAIC05NDUsMTIgKzk0NSw2IEBAIHZvaWQgcnM2MDBfbWNf
d3JlZyhzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwgdWludDMyX3QgcmVnLCB1aW50MzJfdCB2
KQogCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJnJkZXYtPm1jX2lkeF9sb2NrLCBmbGFncyk7CiB9
CiAKLXN0YXRpYyB2b2lkIHJzNjAwX2RlYnVnZnMoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYp
Ci17Ci0JaWYgKHIxMDBfZGVidWdmc19yYmJtX2luaXQocmRldikpCi0JCURSTV9FUlJPUigiRmFp
bGVkIHRvIHJlZ2lzdGVyIGRlYnVnZnMgZmlsZSBmb3IgUkJCTSAhXG4iKTsKLX0KLQogdm9pZCBy
czYwMF9zZXRfc2FmZV9yZWdpc3RlcnMoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiB7CiAJ
cmRldi0+Y29uZmlnLnIzMDAucmVnX3NhZmVfYm0gPSByczYwMF9yZWdfc2FmZV9ibTsKQEAgLTEx
MzYsNyArMTEzMCw3IEBAIGludCByczYwMF9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2
KQogCXJhZGVvbl9nZXRfY2xvY2tfaW5mbyhyZGV2LT5kZGV2KTsKIAkvKiBpbml0aWFsaXplIG1l
bW9yeSBjb250cm9sbGVyICovCiAJcnM2MDBfbWNfaW5pdChyZGV2KTsKLQlyczYwMF9kZWJ1Z2Zz
KHJkZXYpOworCXIxMDBfZGVidWdmc19yYmJtX2luaXQocmRldik7CiAJLyogRmVuY2UgZHJpdmVy
ICovCiAJciA9IHJhZGVvbl9mZW5jZV9kcml2ZXJfaW5pdChyZGV2KTsKIAlpZiAocikKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcnY1MTUuYyBiL2RyaXZlcnMvZ3B1L2RybS9y
YWRlb24vcnY1MTUuYwppbmRleCAxNDdlNWNmODM0OGQuLjQ2YTUzZGQzODA3OSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9ydjUxNS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9y
YWRlb24vcnY1MTUuYwpAQCAtMjksNyArMjksNiBAQAogI2luY2x1ZGUgPGxpbnV4L3NlcV9maWxl
Lmg+CiAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgogCi0jaW5jbHVkZSA8ZHJtL2RybV9kZWJ1Z2Zz
Lmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kZXZpY2UuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2ZpbGUu
aD4KIApAQCAtNDAsOCArMzksNiBAQAogI2luY2x1ZGUgInJ2NTE1ZC5oIgogCiAvKiBUaGlzIGZp
bGVzIGdhdGhlciBmdW5jdGlvbnMgc3BlY2lmaWNzIHRvOiBydjUxNSAqLwotc3RhdGljIGludCBy
djUxNV9kZWJ1Z2ZzX3BpcGVzX2luZm9faW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7
Ci1zdGF0aWMgaW50IHJ2NTE1X2RlYnVnZnNfZ2FfaW5mb19pbml0KHN0cnVjdCByYWRlb25fZGV2
aWNlICpyZGV2KTsKIHN0YXRpYyB2b2lkIHJ2NTE1X2dwdV9pbml0KHN0cnVjdCByYWRlb25fZGV2
aWNlICpyZGV2KTsKIGludCBydjUxNV9tY193YWl0X2Zvcl9pZGxlKHN0cnVjdCByYWRlb25fZGV2
aWNlICpyZGV2KTsKIApAQCAtNTEsMTkgKzQ4LDYgQEAgc3RhdGljIGNvbnN0IHUzMiBjcnRjX29m
ZnNldHNbMl0gPQogCUFWSVZPX0QyQ1JUQ19IX1RPVEFMIC0gQVZJVk9fRDFDUlRDX0hfVE9UQUwK
IH07CiAKLXZvaWQgcnY1MTVfZGVidWdmcyhzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKLXsK
LQlpZiAocjEwMF9kZWJ1Z2ZzX3JiYm1faW5pdChyZGV2KSkgewotCQlEUk1fRVJST1IoIkZhaWxl
ZCB0byByZWdpc3RlciBkZWJ1Z2ZzIGZpbGUgZm9yIFJCQk0gIVxuIik7Ci0JfQotCWlmIChydjUx
NV9kZWJ1Z2ZzX3BpcGVzX2luZm9faW5pdChyZGV2KSkgewotCQlEUk1fRVJST1IoIkZhaWxlZCB0
byByZWdpc3RlciBkZWJ1Z2ZzIGZpbGUgZm9yIHBpcGVzICFcbiIpOwotCX0KLQlpZiAocnY1MTVf
ZGVidWdmc19nYV9pbmZvX2luaXQocmRldikpIHsKLQkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gcmVn
aXN0ZXIgZGVidWdmcyBmaWxlIGZvciBwaXBlcyAhXG4iKTsKLQl9Ci19Ci0KIHZvaWQgcnY1MTVf
cmluZ19zdGFydChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwgc3RydWN0IHJhZGVvbl9yaW5n
ICpyaW5nKQogewogCWludCByOwpAQCAtMjM1LDExICsyMTksOSBAQCB2b2lkIHJ2NTE1X21jX3dy
ZWcoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYsIHVpbnQzMl90IHJlZywgdWludDMyX3QgdikK
IH0KIAogI2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQotc3RhdGljIGludCBydjUxNV9kZWJ1
Z2ZzX3BpcGVzX2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQorc3RhdGljIGlu
dCBydjUxNV9kZWJ1Z2ZzX3BpcGVzX2luZm9fc2hvdyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQg
KnVudXNlZCkKIHsKLQlzdHJ1Y3QgZHJtX2luZm9fbm9kZSAqbm9kZSA9IChzdHJ1Y3QgZHJtX2lu
Zm9fbm9kZSAqKSBtLT5wcml2YXRlOwotCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBub2RlLT5t
aW5vci0+ZGV2OwotCXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0gZGV2LT5kZXZfcHJpdmF0
ZTsKKwlzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9IChzdHJ1Y3QgcmFkZW9uX2RldmljZSAq
KW0tPnByaXZhdGU7CiAJdWludDMyX3QgdG1wOwogCiAJdG1wID0gUlJFRzMyKEdCX1BJUEVfU0VM
RUNUKTsKQEAgLTI1MywxMSArMjM1LDkgQEAgc3RhdGljIGludCBydjUxNV9kZWJ1Z2ZzX3BpcGVz
X2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQogCXJldHVybiAwOwogfQogCi1z
dGF0aWMgaW50IHJ2NTE1X2RlYnVnZnNfZ2FfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQg
KmRhdGEpCitzdGF0aWMgaW50IHJ2NTE1X2RlYnVnZnNfZ2FfaW5mb19zaG93KHN0cnVjdCBzZXFf
ZmlsZSAqbSwgdm9pZCAqdW51c2VkKQogewotCXN0cnVjdCBkcm1faW5mb19ub2RlICpub2RlID0g
KHN0cnVjdCBkcm1faW5mb19ub2RlICopIG0tPnByaXZhdGU7Ci0Jc3RydWN0IGRybV9kZXZpY2Ug
KmRldiA9IG5vZGUtPm1pbm9yLT5kZXY7Ci0Jc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYgPSBk
ZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0gKHN0cnVjdCBy
YWRlb25fZGV2aWNlICopbS0+cHJpdmF0ZTsKIAl1aW50MzJfdCB0bXA7CiAKIAl0bXAgPSBSUkVH
MzIoMHgyMTQwKTsKQEAgLTI2OCwzMSArMjQ4LDIxIEBAIHN0YXRpYyBpbnQgcnY1MTVfZGVidWdm
c19nYV9pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKIAlyZXR1cm4gMDsKIH0K
IAotc3RhdGljIHN0cnVjdCBkcm1faW5mb19saXN0IHJ2NTE1X3BpcGVzX2luZm9fbGlzdFtdID0g
ewotCXsicnY1MTVfcGlwZXNfaW5mbyIsIHJ2NTE1X2RlYnVnZnNfcGlwZXNfaW5mbywgMCwgTlVM
TH0sCi19OwotCi1zdGF0aWMgc3RydWN0IGRybV9pbmZvX2xpc3QgcnY1MTVfZ2FfaW5mb19saXN0
W10gPSB7Ci0JeyJydjUxNV9nYV9pbmZvIiwgcnY1MTVfZGVidWdmc19nYV9pbmZvLCAwLCBOVUxM
fSwKLX07CitERUZJTkVfU0hPV19BVFRSSUJVVEUocnY1MTVfZGVidWdmc19waXBlc19pbmZvKTsK
K0RFRklORV9TSE9XX0FUVFJJQlVURShydjUxNV9kZWJ1Z2ZzX2dhX2luZm8pOwogI2VuZGlmCiAK
LXN0YXRpYyBpbnQgcnY1MTVfZGVidWdmc19waXBlc19pbmZvX2luaXQoc3RydWN0IHJhZGVvbl9k
ZXZpY2UgKnJkZXYpCit2b2lkIHJ2NTE1X2RlYnVnZnMoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJk
ZXYpCiB7CiAjaWYgZGVmaW5lZChDT05GSUdfREVCVUdfRlMpCi0JcmV0dXJuIHJhZGVvbl9kZWJ1
Z2ZzX2FkZF9maWxlcyhyZGV2LCBydjUxNV9waXBlc19pbmZvX2xpc3QsIDEpOwotI2Vsc2UKLQly
ZXR1cm4gMDsKLSNlbmRpZgotfQorCXN0cnVjdCBkZW50cnkgKnJvb3QgPSByZGV2LT5kZGV2LT5w
cmltYXJ5LT5kZWJ1Z2ZzX3Jvb3Q7CiAKLXN0YXRpYyBpbnQgcnY1MTVfZGVidWdmc19nYV9pbmZv
X2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCi17Ci0jaWYgZGVmaW5lZChDT05GSUdf
REVCVUdfRlMpCi0JcmV0dXJuIHJhZGVvbl9kZWJ1Z2ZzX2FkZF9maWxlcyhyZGV2LCBydjUxNV9n
YV9pbmZvX2xpc3QsIDEpOwotI2Vsc2UKLQlyZXR1cm4gMDsKKwlkZWJ1Z2ZzX2NyZWF0ZV9maWxl
KCJydjUxNV9waXBlc19pbmZvIiwgMDQ0NCwgcm9vdCwgcmRldiwKKwkJCSAgICAmcnY1MTVfZGVi
dWdmc19waXBlc19pbmZvX2ZvcHMpOworCWRlYnVnZnNfY3JlYXRlX2ZpbGUoInJ2NTE1X2dhX2lu
Zm8iLCAwNDQ0LCByb290LCByZGV2LAorCQkJICAgICZydjUxNV9kZWJ1Z2ZzX2dhX2luZm9fZm9w
cyk7CiAjZW5kaWYKKwlyMTAwX2RlYnVnZnNfcmJibV9pbml0KHJkZXYpOwogfQogCiB2b2lkIHJ2
NTE1X21jX3N0b3Aoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYsIHN0cnVjdCBydjUxNV9tY19z
YXZlICpzYXZlKQotLSAKMi4zMC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ft
ZC1nZngK
