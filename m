Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 584D5493BE4
	for <lists+amd-gfx@lfdr.de>; Wed, 19 Jan 2022 15:24:56 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9C3C710EAC2;
	Wed, 19 Jan 2022 14:24:54 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM10-MW2-obe.outbound.protection.outlook.com
 (mail-mw2nam10on2048.outbound.protection.outlook.com [40.107.94.48])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DA02810EACB
 for <amd-gfx@lists.freedesktop.org>; Wed, 19 Jan 2022 14:24:52 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=NVYAGdBzo7TdsM1nekDuQSknjrjmFY1zyPFHT8E5AbCBqf/mnwYspJ/vLt/ONmd1JABaddcQMJ89Dzg1UAa30r+hXUxWtKkE3vucOtCoLFZTz6cYNMQuwmYxPEZ82xPgNss1YtkeF5AnaztOI+xWeUr6KRVyRL5RZEQtLO9J+8avC4yzuMudpu73riTSZAZJxzOd9ZpSpVAOBGhSjukmE2GpivexadNWRKM/dP+v1QFRLvAa6QBDZTUhKOGoF9hlILsqswEzj7GZGuiLGSUx8RdCzCSHVYJIkO4KluSB3tO7ZqlJ660dPr/C5rrsT/aQ04eAsqNQmZGd4TejkBWx5Q==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=0UDYdnAvoQqjxMjjgvE2RETACbWpbmk07Q2hrQCPU44=;
 b=hgp87cfw0b9rHhYTANonLFHWubQFtCAWJ2dhEarUgijzZnNDW/fe0LCwQXomdsleQ3gx7LUvECLrsmGi/aJbuCQW6G6GPfl3Mp616i8RD3nGuGiUm4jNiBPn2JRVpfYAkbT7uyD86bUq2VEYk0eW+N9tK2GjzxaL1tA53DD16L4m4WLsxYarCKNWONxxFo4vxWTN0MZDpDYdlGZAtKrb6F1WTQ/PaBKNMP0q7358rFI66LdJiwFIDRkaVEPURFMM1Q8pRF2grebjNH3AHT+RAb4UitTVG+7MDaeeCPcsiznbdaaoBFLU6B+/yDhY7tTQRbIOyx3PPb92zjZh1jRAWw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none; dmarc=none;
 dkim=none; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=0UDYdnAvoQqjxMjjgvE2RETACbWpbmk07Q2hrQCPU44=;
 b=KjZw6kx6H6nBqapeQgTVGC3GaEphch7TEtlfKnQLE3nsT6WpI/scipWVUt7mmqeClKpj5JgxbGB0Xt9dkJvnpCyjd4WrkzmIUdbBcoyOPZW9cNsgjTtdOu5R74iW00dob/p5nEVF+vaILF6R6cWFmIlRe6VtUzj9nSjhUHJZyCU=
Received: from DM5PR12MB2469.namprd12.prod.outlook.com (2603:10b6:4:af::38) by
 BN8PR12MB3345.namprd12.prod.outlook.com (2603:10b6:408:64::30) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.4909.8; Wed, 19 Jan 2022 14:24:41 +0000
Received: from DM5PR12MB2469.namprd12.prod.outlook.com
 ([fe80::1500:4b8c:efd6:672]) by DM5PR12MB2469.namprd12.prod.outlook.com
 ([fe80::1500:4b8c:efd6:672%4]) with mapi id 15.20.4888.014; Wed, 19 Jan 2022
 14:24:41 +0000
From: "Chen, Guchun" <Guchun.Chen@amd.com>
To: =?utf-8?B?Q2hyaXN0aWFuIEvDtm5pZw==?= <ckoenig.leichtzumerken@gmail.com>,
 "Kim, Jonathan" <Jonathan.Kim@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>, "Koenig, Christian"
 <Christian.Koenig@amd.com>
Subject: RE: [PATCH] drm/amdgpu: remove gart.ready flag
Thread-Topic: [PATCH] drm/amdgpu: remove gart.ready flag
Thread-Index: AQHYDGM1kc+gUlunZUevt+wJC/4OfqxoxTuQgAAMO4CAAAMtoIABkuJw
Date: Wed, 19 Jan 2022 14:24:40 +0000
Message-ID: <DM5PR12MB24693B64F61260F9F28B326DF1599@DM5PR12MB2469.namprd12.prod.outlook.com>
References: <20220118120157.102453-1-christian.koenig@amd.com>
 <DM5PR12MB24692C6D246264672211B712F1589@DM5PR12MB2469.namprd12.prod.outlook.com>
 <99b919b4-97df-16bc-46c2-682bc03117f4@gmail.com>
 <DM5PR12MB2469F71C6D7237AA6CC28B37F1589@DM5PR12MB2469.namprd12.prod.outlook.com>
In-Reply-To: <DM5PR12MB2469F71C6D7237AA6CC28B37F1589@DM5PR12MB2469.namprd12.prod.outlook.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_d4243a53-6221-4f75-8154-e4b33a5707a1_Enabled=true;
 MSIP_Label_d4243a53-6221-4f75-8154-e4b33a5707a1_SetDate=2022-01-18T14:22:21Z; 
 MSIP_Label_d4243a53-6221-4f75-8154-e4b33a5707a1_Method=Privileged;
 MSIP_Label_d4243a53-6221-4f75-8154-e4b33a5707a1_Name=Public-AIP 2.0;
 MSIP_Label_d4243a53-6221-4f75-8154-e4b33a5707a1_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_d4243a53-6221-4f75-8154-e4b33a5707a1_ActionId=daa94620-0e83-455f-9fa0-187b77fcddae;
 MSIP_Label_d4243a53-6221-4f75-8154-e4b33a5707a1_ContentBits=1
msip_label_d4243a53-6221-4f75-8154-e4b33a5707a1_enabled: true
msip_label_d4243a53-6221-4f75-8154-e4b33a5707a1_setdate: 2022-01-19T14:24:37Z
msip_label_d4243a53-6221-4f75-8154-e4b33a5707a1_method: Privileged
msip_label_d4243a53-6221-4f75-8154-e4b33a5707a1_name: Public-AIP 2.0
msip_label_d4243a53-6221-4f75-8154-e4b33a5707a1_siteid: 3dd8961f-e488-4e60-8e11-a82d994e183d
msip_label_d4243a53-6221-4f75-8154-e4b33a5707a1_actionid: 902f120f-f61d-43df-a7c2-0cc1d236064f
msip_label_d4243a53-6221-4f75-8154-e4b33a5707a1_contentbits: 0
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=amd.com;
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 1bc8f3f3-09df-4be1-244a-08d9db576e60
x-ms-traffictypediagnostic: BN8PR12MB3345:EE_
x-microsoft-antispam-prvs: <BN8PR12MB3345EED137184E6A0BB1432AF1599@BN8PR12MB3345.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:8882;
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: AOYWhknuM+aslQLdvkzl0Es/I/GgAeLJj5vSR4UagT4w4OwCMVjsb2SMZ7k3e7VMkpfelrmM4arKYKbbUpAZmeQORVtXmxQNZpaEE2x8fskl+3J9VmYjhR4T5dLFC4dWfrirmyq91OMyK+dDJhx+9I5mqSVDjRl0kowxmrAenJIDOc/+xI7Qtlu4U8gyDjyC9Ijs1SaYxiYtR3W7idp92KQqjtIMNRxFM0ehUhKrPH+ywIjAxRn8eAhuRbQHY+COVdeHVs5e8Ly/rJlCViuXnNq4aNBZZKRFUa68Wwaml7o7cVb1shr4rzyNwGohtynChwxxctrJMgfK5kLA8OXR+3/85N+HxEnbQLCNaKt/09onxnvmAYMZEzZz+jEj9BrgWrXSklOw7+yQYoREceoRoFL86MVRdOA1RC4eYypL+W3TFlZ70OCGdimYtv2S0DpGFsYWwq8Pg0sIqjuiOVHNp1MfmAtZHzpl0TvAfanNplQEc6J8dpBu8c4IuRda90Af+TB/X7LYIJ1t2N0pxAinmFXgHFpS1j2ENqp93CcG8JuTPvsTgL3AXjeuSYekI3q9tGMkLLTdrc0a4M048ZaVoRyCTp9oWg54nvuzdwH3IP4x7u+CdjMjWjdvRp0F/XTmONVl6wpm+91m4tT7tBXmYqfB28wFJJzwWFavTkPimxnIDEeJCdtjSYSUlEbXufd1nS/xZZCAxUxeGPl3GGEytQ==
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM5PR12MB2469.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(366004)(6636002)(83380400001)(66574015)(30864003)(38100700002)(122000001)(5660300002)(508600001)(110136005)(71200400001)(2906002)(8676002)(7696005)(8936002)(66446008)(55016003)(9686003)(316002)(38070700005)(66946007)(52536014)(186003)(26005)(86362001)(53546011)(76116006)(33656002)(6506007)(64756008)(66476007)(66556008)(579004);
 DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?RjdaenkxTjNPVHZicVE3NnQwYlRHTzU2Y25GUzVOOTdmbS91MURNb2oxQnFJ?=
 =?utf-8?B?azBHV1F1TllzVFpPVEUxTjIycVRveFZuejBna0NSY1JrOHpCNXRYdEo5aTF6?=
 =?utf-8?B?eElKT0RSLzR6WFRUODNxeVBQTE82UjdaUnlFWms3RUtwUUFqcm1VL3A1Y010?=
 =?utf-8?B?UFhuS2ZjNnF2VEo2U3h1R0xNblRtbklqUm9WVnJGVU1FWHBqQVJ6Ky9BL2Vs?=
 =?utf-8?B?U1EzYUFEMHdaTWxIUm5ucGljWXd2MHVmMStsUFdQQnh5VmlvTUxFdmsvVzFa?=
 =?utf-8?B?N0ZqMUFNb1ZKeUlrQWdCS1Zld0hIaFF1UkZnZDFIZm9seWVHVlFOSFRSL1pq?=
 =?utf-8?B?NEdxK0dmZUlLZ0lub0oyeGZKc0hKcVVvQncwOWl1dkZQSE1QMU0yNHlISk9V?=
 =?utf-8?B?aDJKRHh2Y3NnMTk3TzE0bHhZQ2dsaEJib2VrU2xBQnNvcTJhM1MxSmtpWjhM?=
 =?utf-8?B?RWdGcXF2T1VzOWkvYk9NTVpKSEwvOUQvdVZocXU3RFc3TUwyRjBpS3U0OUtJ?=
 =?utf-8?B?TVIrRXZKeUNVZnZtNTVMeHdNYlhGUmMzRWFxLy9aWEpNUHUwMGJ0QXNSczFW?=
 =?utf-8?B?UXhoQ1NkVmFqb3MrQUVxdUE1c283eFk0WGx4QTRRWVgrSUNBNzdYWFhhN1JW?=
 =?utf-8?B?ZU1UbHY1ekFRdGZIemZ5cjFxSkUxOWpxekNRNE5IYlRCUWlvVUJwRTZuTUxK?=
 =?utf-8?B?eU1WODZqRkYzQkJhKzVwNDR2ckE2djBQM0puWnIwR2dsMFphK2V6RHlaaVQ2?=
 =?utf-8?B?LzZZK1YvM2FFaEp4V0xDa0M0QWFmaW5ZbmN4Z3JndGZ1N0hYRUhFVkRIaFVh?=
 =?utf-8?B?dmxtRTFRR044bkpkWGxsRSttRXErSFEyaHhFaVBjdGRoQVVSMzdZOG81ZnVP?=
 =?utf-8?B?VG95SGxwcEZtUGFQWHZzL0dBL0dTZlFTL2x0ZnVwZUMxVENjU211T1hzdTQ4?=
 =?utf-8?B?YmV1Ly9sNURwRzY1eWpHSW5ua053RG5STjdtL3g3U2lSNXI4Q0JJUXluREdt?=
 =?utf-8?B?Ynl4ZVlxeVlaeXZ1ZVFGU01ZWXZCM3cyektiSCsvTk5Sa1J3ejU3KzBFVWZy?=
 =?utf-8?B?WVdQRnBVQ3VxM1ZGYWpMbExwV2xScTZWVXgrQWlVbU44SlV1L01hRm4rQ3BR?=
 =?utf-8?B?MjV4ZGEvS0kyUFpXSWVpOCtTb09mTXNoOGFnYXlWU0FVRUhYMHBYeURpaEpq?=
 =?utf-8?B?NWhJTDRJS2VadkF2UXpwQWtSSFFhb1JPeStWVzBaN2wrN2hFc09nQ05LUEFT?=
 =?utf-8?B?TSttVStHcmNWR28xTmxrUnYyQ0hMTk9DaFBaQUxzZ2x4bjg4RVB2Z3I3dTJX?=
 =?utf-8?B?M1JudjdIRml4TFVkNU9HTkZZdTl6bmYrSEN5dUN2SjJ4ZFFVZXRXTEFBdUxr?=
 =?utf-8?B?a3NYRjZyeFdUZVhYZkpYcDNDbmNxbU5RSEFwdE14S3F1R0diT0piYzU4Nlh2?=
 =?utf-8?B?dlhOejVPVXJQWTR5Uk5HdkMyZVJwNHZKTW9INkdXcW5LdXJPWnVlbW9ZM2Nw?=
 =?utf-8?B?bURId0ZCSlpPMXlsNzBiU3F5K3JhdWhsdjRTcWFlbCtjV0orWDB6b0lPMGZw?=
 =?utf-8?B?Q2FJMUhHa1NIMVhRK3Mxem1YSGpFcURJMjlUQmRrYUlsRDROTWdTeHEvVS9o?=
 =?utf-8?B?UThPaWhKeFlJUHhwdnYzQTYwUnA0cnhnTnRNYzlnV2gxTE1pWWxETWcxZXox?=
 =?utf-8?B?TWxHM0ZTdTNBTUhGNWdsdG1oTFVSTkR2cVR6d09jbTd0MEVmWTNjV21JWXZr?=
 =?utf-8?B?SHI5eko5RHBBK01kbER4N2I1RFY5RGNtYm1ZbUthSytDUC9VdDFXN2NHS1Iw?=
 =?utf-8?B?YkppQzRyMGMvK3dyRkNLSFZjQ0hMVUhHZ0ZNa3dodDlEV2dkUVQ4Q0lsSE1r?=
 =?utf-8?B?U1U3d25IY2RxOWx3NEJBV0V0UHl0R3JVb3lRczZrMHBRa2ZhK2VZekhKQ3Rs?=
 =?utf-8?B?NlBXc0tvUk5va1Z3ZFh4WlNLSjNBY2lpUlY3NEF0RE1zUk5CMDh5WW0rTFpQ?=
 =?utf-8?B?NTVOQkd5VHNaYitzUm91eWhWKzdsV0JiUFpHNGhSSkFla3UzOGlVWGRLRFg1?=
 =?utf-8?B?VElZODVLTFlVWXhKbmp3UHZ1Z2FyYVBWREppdmZ6WTNhUFE0MjVoTFQrVUtw?=
 =?utf-8?B?Tk1BYi9ab000Qk9hMXNuUUM2Y2Q5RkJoenRSczZxTFRzSW12S2swSjFBV2hw?=
 =?utf-8?Q?pnZoEgGEBjdv4fuhlr+Y8jg=3D?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DM5PR12MB2469.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 1bc8f3f3-09df-4be1-244a-08d9db576e60
X-MS-Exchange-CrossTenant-originalarrivaltime: 19 Jan 2022 14:24:40.9130 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: szcmJQF0cEYYvLDzg+weB6VJVhv/tLktlkDz3/jL22ZlYJUNj9+gS1nk/CjUqWeZgQJ1sqp43V7C4hcaeLGxdw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN8PR12MB3345
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W1B1YmxpY10NCg0KSGVsbG8gQ2hyaXN0aWFuLA0KDQpEbyB5b3UgcGxhbiB0byBzdWJtaXQgeW91
ciBjb2RlIHRvIGRybS1uZXh0IGJyYW5jaD8NCg0KUmVnYXJkcywNCkd1Y2h1bg0KDQotLS0tLU9y
aWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogQ2hlbiwgR3VjaHVuIA0KU2VudDogVHVlc2RheSwg
SmFudWFyeSAxOCwgMjAyMiAxMDoyMiBQTQ0KVG86ICdDaHJpc3RpYW4gS8O2bmlnJyA8Y2tvZW5p
Zy5sZWljaHR6dW1lcmtlbkBnbWFpbC5jb20+OyBLaW0sIEpvbmF0aGFuIDxKb25hdGhhbi5LaW1A
YW1kLmNvbT47IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQpTdWJqZWN0OiBSRTogW1BB
VENIXSBkcm0vYW1kZ3B1OiByZW1vdmUgZ2FydC5yZWFkeSBmbGFnDQoNCltQdWJsaWNdDQoNClRo
YW5rcyBmb3IgdGhlIGNsYXJpZmljYXRpb24uIFRoZSBwYXRjaCBpczoNClJldmlld2VkLWJ5OiBH
dWNodW4gQ2hlbiA8Z3VjaHVuLmNoZW5AYW1kLmNvbT4NCg0KUmVnYXJkcywNCkd1Y2h1bg0KDQot
LS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2tvZW5p
Zy5sZWljaHR6dW1lcmtlbkBnbWFpbC5jb20+DQpTZW50OiBUdWVzZGF5LCBKYW51YXJ5IDE4LCAy
MDIyIDEwOjEwIFBNDQpUbzogQ2hlbiwgR3VjaHVuIDxHdWNodW4uQ2hlbkBhbWQuY29tPjsgS2lt
LCBKb25hdGhhbiA8Sm9uYXRoYW4uS2ltQGFtZC5jb20+OyBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZw0KU3ViamVjdDogUmU6IFtQQVRDSF0gZHJtL2FtZGdwdTogcmVtb3ZlIGdhcnQucmVh
ZHkgZmxhZw0KDQpBbSAxOC4wMS4yMiB1bSAxNDoyOCBzY2hyaWViIENoZW4sIEd1Y2h1bjoNCj4g
W1B1YmxpY10NCj4NCj4gLQlpZiAoYW1kZ3B1X3NyaW92X3ZmKGFkZXYpICYmIGFtZGdwdV9pbl9y
ZXNldChhZGV2KSkNCj4gLQkJZ290byBza2lwX3Bpbl9ibzsNCj4gLQ0KPiAtCXIgPSBhbWRncHVf
Z3R0X21ncl9yZWNvdmVyKCZhZGV2LT5tbWFuLmd0dF9tZ3IpOw0KPiAtCWlmIChyKQ0KPiAtCQly
ZXR1cm4gcjsNCj4gLQ0KPiAtc2tpcF9waW5fYm86DQo+DQo+IERvZXMgZGVsZXRpbmcgc2tpcF9w
aW5fYm8gcGF0aCBjYXVzZSBibyByZWR1bmRhbnQgcGluIGluIFNSSU9WIGNhc2U/DQoNClBpbm5p
bmcvdW5waW5uaW5nIHRoZSBCTyB3YXMgYWxyZWFkeSByZW1vdmVkIGFzIHdlbGwuDQoNClNlZSBO
aXJtb3kncyBwYXRjaGVzIGluIHRoZSBnaXQgbG9nLg0KDQpSZWdhcmRzLA0KQ2hyaXN0aWFuLg0K
DQo+DQo+IFJlZ2FyZHMsDQo+IEd1Y2h1bg0KPg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0t
LQ0KPiBGcm9tOiBDaHJpc3RpYW4gS8O2bmlnIDxja29lbmlnLmxlaWNodHp1bWVya2VuQGdtYWls
LmNvbT4NCj4gU2VudDogVHVlc2RheSwgSmFudWFyeSAxOCwgMjAyMiA4OjAyIFBNDQo+IFRvOiBD
aGVuLCBHdWNodW4gPEd1Y2h1bi5DaGVuQGFtZC5jb20+OyBLaW0sIEpvbmF0aGFuIA0KPiA8Sm9u
YXRoYW4uS2ltQGFtZC5jb20+OyBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KPiBTdWJq
ZWN0OiBbUEFUQ0hdIGRybS9hbWRncHU6IHJlbW92ZSBnYXJ0LnJlYWR5IGZsYWcNCj4NCj4gVGhh
dCdzIGp1c3QgYSBsZWZ0b3ZlciBmcm9tIG9sZCByYWRlb24gZGF5cyBhbmQgd2FzIHByZXZlbnRp
bmcgQ1MgYW5kIEdBUlQgYmluZGluZ3MgYmVmb3JlIHRoZSBoYXJkd2FyZSB3YXMgaW5pdGlhbGl6
ZWQuIEJ1dCBub3dkYXlzIHRoYXQgaXMgcGVyZmVjdGx5IHZhbGlkLg0KPg0KPiBUaGUgb25seSB0
aGluZyB3ZSBuZWVkIHRvIHdhcm4gYWJvdXQgYXJlIEdBUlQgYmluZGluZyBiZWZvcmUgdGhlIHRh
YmxlIGlzIGV2ZW4gYWxsb2NhdGVkLg0KPg0KPiBTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2
bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+DQo+IC0tLQ0KPiAgIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9nYXJ0LmMgICAgfCAzNSArKystLS0tLS0tDQo+ICAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dhcnQuaCAgICB8IDE1ICsrLS0NCj4gICBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ3R0X21nci5jIHwgIDkgKy0tDQo+ICAgZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jICAgICB8IDc3ICsrKysrKy0tLS0t
LS0tLS0tLS0tLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uaCAg
ICAgfCAgNCArLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192MTBfMC5jICAg
ICAgfCAxMSArLS0NCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjZfMC5jICAg
ICAgIHwgIDcgKy0NCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjdfMC5jICAg
ICAgIHwgIDggKy0tDQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y4XzAuYyAg
ICAgICB8ICA4ICstLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMg
ICAgICAgfCAxMCArLS0NCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfbWlncmF0
ZS5jICAgIHwgIDUgKy0NCj4gICAxMSBmaWxlcyBjaGFuZ2VkLCA1MiBpbnNlcnRpb25zKCspLCAx
MzcgZGVsZXRpb25zKC0pDQo+DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfZ2FydC5jDQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2dhcnQuYw0KPiBpbmRleCA2NDU5NTBhNjUzYTAuLjUzY2M4NDQzNDZmMCAxMDA2NDQNCj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dhcnQuYw0KPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2FydC5jDQo+IEBAIC0xNTAsNyArMTUwLDcg
QEAgdm9pZCBhbWRncHVfZ2FydF90YWJsZV92cmFtX2ZyZWUoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpDQo+ICAgICogcmVwbGFjZXMgdGhlbSB3aXRoIHRoZSBkdW1teSBwYWdlIChhbGwgYXNp
Y3MpLg0KPiAgICAqIFJldHVybnMgMCBmb3Igc3VjY2VzcywgLUVJTlZBTCBmb3IgZmFpbHVyZS4N
Cj4gICAgKi8NCj4gLWludCBhbWRncHVfZ2FydF91bmJpbmQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsIHVpbnQ2NF90IG9mZnNldCwNCj4gK3ZvaWQgYW1kZ3B1X2dhcnRfdW5iaW5kKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBvZmZzZXQsDQo+ICAgCQkJaW50IHBhZ2Vz
KQ0KPiAgIHsNCj4gICAJdW5zaWduZWQgdDsNCj4gQEAgLTE2MSwxMyArMTYxLDExIEBAIGludCBh
bWRncHVfZ2FydF91bmJpbmQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90IG9m
ZnNldCwNCj4gICAJdWludDY0X3QgZmxhZ3MgPSAwOw0KPiAgIAlpbnQgaWR4Ow0KPiAgIA0KPiAt
CWlmICghYWRldi0+Z2FydC5yZWFkeSkgew0KPiAtCQlXQVJOKDEsICJ0cnlpbmcgdG8gdW5iaW5k
IG1lbW9yeSBmcm9tIHVuaW5pdGlhbGl6ZWQgR0FSVCAhXG4iKTsNCj4gLQkJcmV0dXJuIC1FSU5W
QUw7DQo+IC0JfQ0KPiArCWlmIChXQVJOX09OKCFhZGV2LT5nYXJ0LnB0cikpDQo+ICsJCXJldHVy
bjsNCj4gICANCj4gICAJaWYgKCFkcm1fZGV2X2VudGVyKGFkZXZfdG9fZHJtKGFkZXYpLCAmaWR4
KSkNCj4gLQkJcmV0dXJuIDA7DQo+ICsJCXJldHVybjsNCj4gICANCj4gICAJdCA9IG9mZnNldCAv
IEFNREdQVV9HUFVfUEFHRV9TSVpFOw0KPiAgIAlwID0gdCAvIEFNREdQVV9HUFVfUEFHRVNfSU5f
Q1BVX1BBR0U7IEBAIC0xODgsNyArMTg2LDYgQEAgaW50IA0KPiBhbWRncHVfZ2FydF91bmJpbmQo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90IG9mZnNldCwNCj4gICAJCWFtZGdw
dV9nbWNfZmx1c2hfZ3B1X3RsYihhZGV2LCAwLCBpLCAwKTsNCj4gICANCj4gICAJZHJtX2Rldl9l
eGl0KGlkeCk7DQo+IC0JcmV0dXJuIDA7DQo+ICAgfQ0KPiAgIA0KPiAgIC8qKg0KPiBAQCAtMjA0
LDcgKzIwMSw3IEBAIGludCBhbWRncHVfZ2FydF91bmJpbmQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsIHVpbnQ2NF90IG9mZnNldCwNCj4gICAgKiBNYXAgdGhlIGRtYV9hZGRyZXNzZXMgaW50
byBHQVJUIGVudHJpZXMgKGFsbCBhc2ljcykuDQo+ICAgICogUmV0dXJucyAwIGZvciBzdWNjZXNz
LCAtRUlOVkFMIGZvciBmYWlsdXJlLg0KPiAgICAqLw0KPiAtaW50IGFtZGdwdV9nYXJ0X21hcChz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3Qgb2Zmc2V0LA0KPiArdm9pZCBhbWRn
cHVfZ2FydF9tYXAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90IG9mZnNldCwN
Cj4gICAJCSAgICBpbnQgcGFnZXMsIGRtYV9hZGRyX3QgKmRtYV9hZGRyLCB1aW50NjRfdCBmbGFn
cywNCj4gICAJCSAgICB2b2lkICpkc3QpDQo+ICAgew0KPiBAQCAtMjEyLDEzICsyMDksOCBAQCBp
bnQgYW1kZ3B1X2dhcnRfbWFwKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBv
ZmZzZXQsDQo+ICAgCXVuc2lnbmVkIGksIGosIHQ7DQo+ICAgCWludCBpZHg7DQo+ICAgDQo+IC0J
aWYgKCFhZGV2LT5nYXJ0LnJlYWR5KSB7DQo+IC0JCVdBUk4oMSwgInRyeWluZyB0byBiaW5kIG1l
bW9yeSB0byB1bmluaXRpYWxpemVkIEdBUlQgIVxuIik7DQo+IC0JCXJldHVybiAtRUlOVkFMOw0K
PiAtCX0NCj4gLQ0KPiAgIAlpZiAoIWRybV9kZXZfZW50ZXIoYWRldl90b19kcm0oYWRldiksICZp
ZHgpKQ0KPiAtCQlyZXR1cm4gMDsNCj4gKwkJcmV0dXJuOw0KPiAgIA0KPiAgIAl0ID0gb2Zmc2V0
IC8gQU1ER1BVX0dQVV9QQUdFX1NJWkU7DQo+ICAgDQo+IEBAIC0yMzAsNyArMjIyLDYgQEAgaW50
IGFtZGdwdV9nYXJ0X21hcChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3Qgb2Zm
c2V0LA0KPiAgIAkJfQ0KPiAgIAl9DQo+ICAgCWRybV9kZXZfZXhpdChpZHgpOw0KPiAtCXJldHVy
biAwOw0KPiAgIH0NCj4gICANCj4gICAvKioNCj4gQEAgLTI0NiwyMCArMjM3LDE0IEBAIGludCBh
bWRncHVfZ2FydF9tYXAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90IG9mZnNl
dCwNCj4gICAgKiAoYWxsIGFzaWNzKS4NCj4gICAgKiBSZXR1cm5zIDAgZm9yIHN1Y2Nlc3MsIC1F
SU5WQUwgZm9yIGZhaWx1cmUuDQo+ICAgICovDQo+IC1pbnQgYW1kZ3B1X2dhcnRfYmluZChzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3Qgb2Zmc2V0LA0KPiArdm9pZCBhbWRncHVf
Z2FydF9iaW5kKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBvZmZzZXQsDQo+
ICAgCQkgICAgIGludCBwYWdlcywgZG1hX2FkZHJfdCAqZG1hX2FkZHIsDQo+ICAgCQkgICAgIHVp
bnQ2NF90IGZsYWdzKQ0KPiAgIHsNCj4gLQlpZiAoIWFkZXYtPmdhcnQucmVhZHkpIHsNCj4gLQkJ
V0FSTigxLCAidHJ5aW5nIHRvIGJpbmQgbWVtb3J5IHRvIHVuaW5pdGlhbGl6ZWQgR0FSVCAhXG4i
KTsNCj4gLQkJcmV0dXJuIC1FSU5WQUw7DQo+IC0JfQ0KPiAtDQo+IC0JaWYgKCFhZGV2LT5nYXJ0
LnB0cikNCj4gLQkJcmV0dXJuIDA7DQo+ICsJaWYgKFdBUk5fT04oIWFkZXYtPmdhcnQucHRyKSkN
Cj4gKwkJcmV0dXJuOw0KPiAgIA0KPiAtCXJldHVybiBhbWRncHVfZ2FydF9tYXAoYWRldiwgb2Zm
c2V0LCBwYWdlcywgZG1hX2FkZHIsIGZsYWdzLA0KPiAtCQkJICAgICAgIGFkZXYtPmdhcnQucHRy
KTsNCj4gKwlhbWRncHVfZ2FydF9tYXAoYWRldiwgb2Zmc2V0LCBwYWdlcywgZG1hX2FkZHIsIGZs
YWdzLA0KPiArYWRldi0+Z2FydC5wdHIpOw0KPiAgIH0NCj4gICANCj4gICAvKioNCj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nYXJ0LmgNCj4gYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2FydC5oDQo+IGluZGV4IDc4ODk1NDEzY2Y5
Zi4uOGZlYTNlMDRlNDExIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZ2FydC5oDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9nYXJ0LmgNCj4gQEAgLTQ2LDcgKzQ2LDYgQEAgc3RydWN0IGFtZGdwdV9nYXJ0IHsNCj4gICAJ
dW5zaWduZWQJCQludW1fZ3B1X3BhZ2VzOw0KPiAgIAl1bnNpZ25lZAkJCW51bV9jcHVfcGFnZXM7
DQo+ICAgCXVuc2lnbmVkCQkJdGFibGVfc2l6ZTsNCj4gLQlib29sCQkJCXJlYWR5Ow0KPiAgIA0K
PiAgIAkvKiBBc2ljIGRlZmF1bHQgcHRlIGZsYWdzICovDQo+ICAgCXVpbnQ2NF90CQkJZ2FydF9w
dGVfZmxhZ3M7DQo+IEBAIC01OCwxMiArNTcsMTIgQEAgaW50IGFtZGdwdV9nYXJ0X3RhYmxlX3Zy
YW1fcGluKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsgIHZvaWQgYW1kZ3B1X2dhcnRfdGFi
bGVfdnJhbV91bnBpbihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7ICBpbnQgYW1kZ3B1X2dh
cnRfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7ICB2b2lkIGFtZGdwdV9nYXJ0X2R1
bW15X3BhZ2VfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7IC1pbnQgYW1kZ3B1X2dh
cnRfdW5iaW5kKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBvZmZzZXQsDQo+
IC0JCSAgICAgICBpbnQgcGFnZXMpOw0KPiAtaW50IGFtZGdwdV9nYXJ0X21hcChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwgdWludDY0X3Qgb2Zmc2V0LA0KPiAtCQkgICAgaW50IHBhZ2VzLCBk
bWFfYWRkcl90ICpkbWFfYWRkciwgdWludDY0X3QgZmxhZ3MsDQo+IC0JCSAgICB2b2lkICpkc3Qp
Ow0KPiAtaW50IGFtZGdwdV9nYXJ0X2JpbmQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVp
bnQ2NF90IG9mZnNldCwNCj4gLQkJICAgICBpbnQgcGFnZXMsIGRtYV9hZGRyX3QgKmRtYV9hZGRy
LCB1aW50NjRfdCBmbGFncyk7DQo+ICt2b2lkIGFtZGdwdV9nYXJ0X3VuYmluZChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwgdWludDY0X3Qgb2Zmc2V0LA0KPiArCQkJaW50IHBhZ2VzKTsNCj4g
K3ZvaWQgYW1kZ3B1X2dhcnRfbWFwKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRf
dCBvZmZzZXQsDQo+ICsJCSAgICAgaW50IHBhZ2VzLCBkbWFfYWRkcl90ICpkbWFfYWRkciwgdWlu
dDY0X3QgZmxhZ3MsDQo+ICsJCSAgICAgdm9pZCAqZHN0KTsNCj4gK3ZvaWQgYW1kZ3B1X2dhcnRf
YmluZChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3Qgb2Zmc2V0LA0KPiArCQkg
ICAgICBpbnQgcGFnZXMsIGRtYV9hZGRyX3QgKmRtYV9hZGRyLCB1aW50NjRfdCBmbGFncyk7DQo+
ICAgdm9pZCBhbWRncHVfZ2FydF9pbnZhbGlkYXRlX3RsYihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldik7ICAjZW5kaWYgDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZ3R0X21nci5jDQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2d0dF9tZ3IuYw0KPiBpbmRleCA5MTUxOTUwZTBjYzMuLmJhYmRkOTE1YzRjMyAxMDA2NDQNCj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2d0dF9tZ3IuYw0KPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ3R0X21nci5jDQo+IEBAIC0yMjQs
MjYgKzIyNCwyMSBAQCB1aW50NjRfdCBhbWRncHVfZ3R0X21ncl91c2FnZShzdHJ1Y3QgYW1kZ3B1
X2d0dF9tZ3IgKm1ncikNCj4gICAgKg0KPiAgICAqIFJlLWluaXQgdGhlIGdhcnQgZm9yIGVhY2gg
a25vd24gQk8gaW4gdGhlIEdUVC4NCj4gICAgKi8NCj4gLWludCBhbWRncHVfZ3R0X21ncl9yZWNv
dmVyKHN0cnVjdCBhbWRncHVfZ3R0X21nciAqbWdyKQ0KPiArdm9pZCBhbWRncHVfZ3R0X21ncl9y
ZWNvdmVyKHN0cnVjdCBhbWRncHVfZ3R0X21nciAqbWdyKQ0KPiAgIHsNCj4gICAJc3RydWN0IGFt
ZGdwdV9ndHRfbm9kZSAqbm9kZTsNCj4gICAJc3RydWN0IGRybV9tbV9ub2RlICptbV9ub2RlOw0K
PiAgIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldjsNCj4gLQlpbnQgciA9IDA7DQo+ICAgDQo+
ICAgCWFkZXYgPSBjb250YWluZXJfb2YobWdyLCB0eXBlb2YoKmFkZXYpLCBtbWFuLmd0dF9tZ3Ip
Ow0KPiAgIAlzcGluX2xvY2soJm1nci0+bG9jayk7DQo+ICAgCWRybV9tbV9mb3JfZWFjaF9ub2Rl
KG1tX25vZGUsICZtZ3ItPm1tKSB7DQo+ICAgCQlub2RlID0gY29udGFpbmVyX29mKG1tX25vZGUs
IHR5cGVvZigqbm9kZSksIGJhc2UubW1fbm9kZXNbMF0pOw0KPiAtCQlyID0gYW1kZ3B1X3R0bV9y
ZWNvdmVyX2dhcnQobm9kZS0+dGJvKTsNCj4gLQkJaWYgKHIpDQo+IC0JCQlicmVhazsNCj4gKwkJ
YW1kZ3B1X3R0bV9yZWNvdmVyX2dhcnQobm9kZS0+dGJvKTsNCj4gICAJfQ0KPiAgIAlzcGluX3Vu
bG9jaygmbWdyLT5sb2NrKTsNCj4gICANCj4gICAJYW1kZ3B1X2dhcnRfaW52YWxpZGF0ZV90bGIo
YWRldik7DQo+IC0NCj4gLQlyZXR1cm4gcjsNCj4gICB9DQo+ICAgDQo+ICAgLyoqDQo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMNCj4gYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMNCj4gaW5kZXggYjQ4OWNkOGFiZTMx
Li45Y2RiNjFlYzY2OWUgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV90dG0uYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
dHRtLmMNCj4gQEAgLTI0NiwxMCArMjQ2LDcgQEAgc3RhdGljIGludCBhbWRncHVfdHRtX21hcF9i
dWZmZXIoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywNCj4gICAJCWRtYV9hZGRyX3QgKmRt
YV9hZGRyOw0KPiAgIA0KPiAgIAkJZG1hX2FkZHIgPSAmYm8tPnR0bS0+ZG1hX2FkZHJlc3NbbW1f
Y3VyLT5zdGFydCA+PiBQQUdFX1NISUZUXTsNCj4gLQkJciA9IGFtZGdwdV9nYXJ0X21hcChhZGV2
LCAwLCBudW1fcGFnZXMsIGRtYV9hZGRyLCBmbGFncywNCj4gLQkJCQkgICAgY3B1X2FkZHIpOw0K
PiAtCQlpZiAocikNCj4gLQkJCWdvdG8gZXJyb3JfZnJlZTsNCj4gKwkJYW1kZ3B1X2dhcnRfbWFw
KGFkZXYsIDAsIG51bV9wYWdlcywgZG1hX2FkZHIsIGZsYWdzLCBjcHVfYWRkcik7DQo+ICAgCX0g
ZWxzZSB7DQo+ICAgCQlkbWFfYWRkcl90IGRtYV9hZGRyZXNzOw0KPiAgIA0KPiBAQCAtMjU3LDEx
ICsyNTQsOCBAQCBzdGF0aWMgaW50IGFtZGdwdV90dG1fbWFwX2J1ZmZlcihzdHJ1Y3QgdHRtX2J1
ZmZlcl9vYmplY3QgKmJvLA0KPiAgIAkJZG1hX2FkZHJlc3MgKz0gYWRldi0+dm1fbWFuYWdlci52
cmFtX2Jhc2Vfb2Zmc2V0Ow0KPiAgIA0KPiAgIAkJZm9yIChpID0gMDsgaSA8IG51bV9wYWdlczsg
KytpKSB7DQo+IC0JCQlyID0gYW1kZ3B1X2dhcnRfbWFwKGFkZXYsIGkgPDwgUEFHRV9TSElGVCwg
MSwNCj4gLQkJCQkJICAgICZkbWFfYWRkcmVzcywgZmxhZ3MsIGNwdV9hZGRyKTsNCj4gLQkJCWlm
IChyKQ0KPiAtCQkJCWdvdG8gZXJyb3JfZnJlZTsNCj4gLQ0KPiArCQkJYW1kZ3B1X2dhcnRfbWFw
KGFkZXYsIGkgPDwgUEFHRV9TSElGVCwgMSwgJmRtYV9hZGRyZXNzLA0KPiArCQkJCQlmbGFncywg
Y3B1X2FkZHIpOw0KPiAgIAkJCWRtYV9hZGRyZXNzICs9IFBBR0VfU0laRTsNCj4gICAJCX0NCj4g
ICAJfQ0KPiBAQCAtODI2LDE0ICs4MjAsMTMgQEAgc3RhdGljIHZvaWQgYW1kZ3B1X3R0bV90dF91
bnBpbl91c2VycHRyKHN0cnVjdA0KPiB0dG1fZGV2aWNlICpiZGV2LCAgI2VuZGlmICB9DQo+ICAg
DQo+IC1zdGF0aWMgaW50IGFtZGdwdV90dG1fZ2FydF9iaW5kKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LA0KPiAtCQkJCXN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqdGJvLA0KPiAtCQkJCXVp
bnQ2NF90IGZsYWdzKQ0KPiArc3RhdGljIHZvaWQgYW1kZ3B1X3R0bV9nYXJ0X2JpbmQoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+ICsJCQkJIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAq
dGJvLA0KPiArCQkJCSB1aW50NjRfdCBmbGFncykNCj4gICB7DQo+ICAgCXN0cnVjdCBhbWRncHVf
Ym8gKmFibyA9IHR0bV90b19hbWRncHVfYm8odGJvKTsNCj4gICAJc3RydWN0IHR0bV90dCAqdHRt
ID0gdGJvLT50dG07DQo+ICAgCXN0cnVjdCBhbWRncHVfdHRtX3R0ICpndHQgPSAodm9pZCAqKXR0
bTsNCj4gLQlpbnQgcjsNCj4gICANCj4gICAJaWYgKGFtZGdwdV9ib19lbmNyeXB0ZWQoYWJvKSkN
Cj4gICAJCWZsYWdzIHw9IEFNREdQVV9QVEVfVE1aOw0KPiBAQCAtODQxLDEwICs4MzQsOCBAQCBz
dGF0aWMgaW50IGFtZGdwdV90dG1fZ2FydF9iaW5kKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LA0KPiAgIAlpZiAoYWJvLT5mbGFncyAmIEFNREdQVV9HRU1fQ1JFQVRFX0NQX01RRF9HRlg5KSB7
DQo+ICAgCQl1aW50NjRfdCBwYWdlX2lkeCA9IDE7DQo+ICAgDQo+IC0JCXIgPSBhbWRncHVfZ2Fy
dF9iaW5kKGFkZXYsIGd0dC0+b2Zmc2V0LCBwYWdlX2lkeCwNCj4gLQkJCQlndHQtPnR0bS5kbWFf
YWRkcmVzcywgZmxhZ3MpOw0KPiAtCQlpZiAocikNCj4gLQkJCWdvdG8gZ2FydF9iaW5kX2ZhaWw7
DQo+ICsJCWFtZGdwdV9nYXJ0X2JpbmQoYWRldiwgZ3R0LT5vZmZzZXQsIHBhZ2VfaWR4LA0KPiAr
CQkJCSBndHQtPnR0bS5kbWFfYWRkcmVzcywgZmxhZ3MpOw0KPiAgIA0KPiAgIAkJLyogVGhlIG1l
bW9yeSB0eXBlIG9mIHRoZSBmaXJzdCBwYWdlIGRlZmF1bHRzIHRvIFVDLiBOb3cNCj4gICAJCSAq
IG1vZGlmeSB0aGUgbWVtb3J5IHR5cGUgdG8gTkMgZnJvbSB0aGUgc2Vjb25kIHBhZ2Ugb2YgQEAg
LTg1MywyMSArODQ0LDEzIEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3R0bV9nYXJ0X2JpbmQoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+ICAgCQlmbGFncyAmPSB+QU1ER1BVX1BURV9NVFlQRV9W
RzEwX01BU0s7DQo+ICAgCQlmbGFncyB8PSBBTURHUFVfUFRFX01UWVBFX1ZHMTAoQU1ER1BVX01U
WVBFX05DKTsNCj4gICANCj4gLQkJciA9IGFtZGdwdV9nYXJ0X2JpbmQoYWRldiwNCj4gLQkJCQln
dHQtPm9mZnNldCArIChwYWdlX2lkeCA8PCBQQUdFX1NISUZUKSwNCj4gLQkJCQl0dG0tPm51bV9w
YWdlcyAtIHBhZ2VfaWR4LA0KPiAtCQkJCSYoZ3R0LT50dG0uZG1hX2FkZHJlc3NbcGFnZV9pZHhd
KSwgZmxhZ3MpOw0KPiArCQlhbWRncHVfZ2FydF9iaW5kKGFkZXYsIGd0dC0+b2Zmc2V0ICsgKHBh
Z2VfaWR4IDw8IFBBR0VfU0hJRlQpLA0KPiArCQkJCSB0dG0tPm51bV9wYWdlcyAtIHBhZ2VfaWR4
LA0KPiArCQkJCSAmKGd0dC0+dHRtLmRtYV9hZGRyZXNzW3BhZ2VfaWR4XSksIGZsYWdzKTsNCj4g
ICAJfSBlbHNlIHsNCj4gLQkJciA9IGFtZGdwdV9nYXJ0X2JpbmQoYWRldiwgZ3R0LT5vZmZzZXQs
IHR0bS0+bnVtX3BhZ2VzLA0KPiAtCQkJCSAgICAgZ3R0LT50dG0uZG1hX2FkZHJlc3MsIGZsYWdz
KTsNCj4gKwkJYW1kZ3B1X2dhcnRfYmluZChhZGV2LCBndHQtPm9mZnNldCwgdHRtLT5udW1fcGFn
ZXMsDQo+ICsJCQkJIGd0dC0+dHRtLmRtYV9hZGRyZXNzLCBmbGFncyk7DQo+ICAgCX0NCj4gLQ0K
PiAtZ2FydF9iaW5kX2ZhaWw6DQo+IC0JaWYgKHIpDQo+IC0JCURSTV9FUlJPUigiZmFpbGVkIHRv
IGJpbmQgJXUgcGFnZXMgYXQgMHglMDhsbFhcbiIsDQo+IC0JCQkgIHR0bS0+bnVtX3BhZ2VzLCBn
dHQtPm9mZnNldCk7DQo+IC0NCj4gLQlyZXR1cm4gcjsNCj4gICB9DQo+ICAgDQo+ICAgLyoNCj4g
QEAgLTg4Myw3ICs4NjYsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV90dG1fYmFja2VuZF9iaW5kKHN0
cnVjdCB0dG1fZGV2aWNlICpiZGV2LA0KPiAgIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9
IGFtZGdwdV90dG1fYWRldihiZGV2KTsNCj4gICAJc3RydWN0IGFtZGdwdV90dG1fdHQgKmd0dCA9
ICh2b2lkKil0dG07DQo+ICAgCXVpbnQ2NF90IGZsYWdzOw0KPiAtCWludCByID0gMDsNCj4gKwlp
bnQgcjsNCj4gICANCj4gICAJaWYgKCFib19tZW0pDQo+ICAgCQlyZXR1cm4gLUVJTlZBTDsNCj4g
QEAgLTkzMCwxNCArOTEzLDEwIEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3R0bV9iYWNrZW5kX2JpbmQo
c3RydWN0IA0KPiB0dG1fZGV2aWNlICpiZGV2LA0KPiAgIA0KPiAgIAkvKiBiaW5kIHBhZ2VzIGlu
dG8gR0FSVCBwYWdlIHRhYmxlcyAqLw0KPiAgIAlndHQtPm9mZnNldCA9ICh1NjQpYm9fbWVtLT5z
dGFydCA8PCBQQUdFX1NISUZUOw0KPiAtCXIgPSBhbWRncHVfZ2FydF9iaW5kKGFkZXYsIGd0dC0+
b2Zmc2V0LCB0dG0tPm51bV9wYWdlcywNCj4gLQkJZ3R0LT50dG0uZG1hX2FkZHJlc3MsIGZsYWdz
KTsNCj4gLQ0KPiAtCWlmIChyKQ0KPiAtCQlEUk1fRVJST1IoImZhaWxlZCB0byBiaW5kICV1IHBh
Z2VzIGF0IDB4JTA4bGxYXG4iLA0KPiAtCQkJICB0dG0tPm51bV9wYWdlcywgZ3R0LT5vZmZzZXQp
Ow0KPiArCWFtZGdwdV9nYXJ0X2JpbmQoYWRldiwgZ3R0LT5vZmZzZXQsIHR0bS0+bnVtX3BhZ2Vz
LA0KPiArCQkJIGd0dC0+dHRtLmRtYV9hZGRyZXNzLCBmbGFncyk7DQo+ICAgCWd0dC0+Ym91bmQg
PSB0cnVlOw0KPiAtCXJldHVybiByOw0KPiArCXJldHVybiAwOw0KPiAgIH0NCj4gICANCj4gICAv
Kg0KPiBAQCAtOTg3LDEyICs5NjYsNyBAQCBpbnQgYW1kZ3B1X3R0bV9hbGxvY19nYXJ0KHN0cnVj
dCANCj4gdHRtX2J1ZmZlcl9vYmplY3QgKmJvKQ0KPiAgIA0KPiAgIAkvKiBCaW5kIHBhZ2VzICov
DQo+ICAgCWd0dC0+b2Zmc2V0ID0gKHU2NCl0bXAtPnN0YXJ0IDw8IFBBR0VfU0hJRlQ7DQo+IC0J
ciA9IGFtZGdwdV90dG1fZ2FydF9iaW5kKGFkZXYsIGJvLCBmbGFncyk7DQo+IC0JaWYgKHVubGlr
ZWx5KHIpKSB7DQo+IC0JCXR0bV9yZXNvdXJjZV9mcmVlKGJvLCAmdG1wKTsNCj4gLQkJcmV0dXJu
IHI7DQo+IC0JfQ0KPiAtDQo+ICsJYW1kZ3B1X3R0bV9nYXJ0X2JpbmQoYWRldiwgYm8sIGZsYWdz
KTsNCj4gICAJYW1kZ3B1X2dhcnRfaW52YWxpZGF0ZV90bGIoYWRldik7DQo+ICAgCXR0bV9yZXNv
dXJjZV9mcmVlKGJvLCAmYm8tPnJlc291cmNlKTsNCj4gICAJdHRtX2JvX2Fzc2lnbl9tZW0oYm8s
IHRtcCk7DQo+IEBAIC0xMDA2LDE5ICs5ODAsMTYgQEAgaW50IGFtZGdwdV90dG1fYWxsb2NfZ2Fy
dChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvKQ0KPiAgICAqIENhbGxlZCBieSBhbWRncHVf
Z3R0X21ncl9yZWNvdmVyKCkgZnJvbSBhbWRncHVfZGV2aWNlX3Jlc2V0KCkgdG8NCj4gICAgKiBy
ZWJpbmQgR1RUIHBhZ2VzIGR1cmluZyBhIEdQVSByZXNldC4NCj4gICAgKi8NCj4gLWludCBhbWRn
cHVfdHRtX3JlY292ZXJfZ2FydChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKnRibykNCj4gK3Zv
aWQgYW1kZ3B1X3R0bV9yZWNvdmVyX2dhcnQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICp0Ym8p
DQo+ICAgew0KPiAgIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGFtZGdwdV90dG1fYWRl
dih0Ym8tPmJkZXYpOw0KPiAgIAl1aW50NjRfdCBmbGFnczsNCj4gLQlpbnQgcjsNCj4gICANCj4g
ICAJaWYgKCF0Ym8tPnR0bSkNCj4gLQkJcmV0dXJuIDA7DQo+ICsJCXJldHVybjsNCj4gICANCj4g
ICAJZmxhZ3MgPSBhbWRncHVfdHRtX3R0X3B0ZV9mbGFncyhhZGV2LCB0Ym8tPnR0bSwgdGJvLT5y
ZXNvdXJjZSk7DQo+IC0JciA9IGFtZGdwdV90dG1fZ2FydF9iaW5kKGFkZXYsIHRibywgZmxhZ3Mp
Ow0KPiAtDQo+IC0JcmV0dXJuIHI7DQo+ICsJYW1kZ3B1X3R0bV9nYXJ0X2JpbmQoYWRldiwgdGJv
LCBmbGFncyk7DQo+ICAgfQ0KPiAgIA0KPiAgIC8qDQo+IEBAIC0xMDMyLDcgKzEwMDMsNiBAQCBz
dGF0aWMgdm9pZCBhbWRncHVfdHRtX2JhY2tlbmRfdW5iaW5kKHN0cnVjdCB0dG1fZGV2aWNlICpi
ZGV2LCAgew0KPiAgIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGFtZGdwdV90dG1fYWRl
dihiZGV2KTsNCj4gICAJc3RydWN0IGFtZGdwdV90dG1fdHQgKmd0dCA9ICh2b2lkICopdHRtOw0K
PiAtCWludCByOw0KPiAgIA0KPiAgIAkvKiBpZiB0aGUgcGFnZXMgaGF2ZSB1c2VycHRyIHBpbm5p
bmcgdGhlbiBjbGVhciB0aGF0IGZpcnN0ICovDQo+ICAgCWlmIChndHQtPnVzZXJwdHIpIHsNCj4g
QEAgLTEwNTIsMTAgKzEwMjIsNyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfdHRtX2JhY2tlbmRfdW5i
aW5kKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LA0KPiAgIAkJcmV0dXJuOw0KPiAgIA0KPiAgIAkv
KiB1bmJpbmQgc2hvdWxkbid0IGJlIGRvbmUgZm9yIEdEUy9HV1MvT0EgaW4gdHRtX2JvX2NsZWFu
X21tICovDQo+IC0JciA9IGFtZGdwdV9nYXJ0X3VuYmluZChhZGV2LCBndHQtPm9mZnNldCwgdHRt
LT5udW1fcGFnZXMpOw0KPiAtCWlmIChyKQ0KPiAtCQlEUk1fRVJST1IoImZhaWxlZCB0byB1bmJp
bmQgJXUgcGFnZXMgYXQgMHglMDhsbFhcbiIsDQo+IC0JCQkgIGd0dC0+dHRtLm51bV9wYWdlcywg
Z3R0LT5vZmZzZXQpOw0KPiArCWFtZGdwdV9nYXJ0X3VuYmluZChhZGV2LCBndHQtPm9mZnNldCwg
dHRtLT5udW1fcGFnZXMpOw0KPiAgIAlndHQtPmJvdW5kID0gZmFsc2U7DQo+ICAgfQ0KPiAgIA0K
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5oDQo+
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5oDQo+IGluZGV4IDA4NGFh
NDllNjI3ZC4uZDk2OTFmMjYyZjE2IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfdHRtLmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3R0bS5oDQo+IEBAIC0xMTksNyArMTE5LDcgQEAgdm9pZCBhbWRncHVfdnJhbV9tZ3Jf
ZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSANCj4gKmFkZXYpOw0KPiAgIA0KPiAgIGJvb2wgYW1k
Z3B1X2d0dF9tZ3JfaGFzX2dhcnRfYWRkcihzdHJ1Y3QgdHRtX3Jlc291cmNlICptZW0pOyANCj4g
dWludDY0X3QgYW1kZ3B1X2d0dF9tZ3JfdXNhZ2Uoc3RydWN0IGFtZGdwdV9ndHRfbWdyICptZ3Ip
OyAtaW50IA0KPiBhbWRncHVfZ3R0X21ncl9yZWNvdmVyKHN0cnVjdCBhbWRncHVfZ3R0X21nciAq
bWdyKTsNCj4gK3ZvaWQgYW1kZ3B1X2d0dF9tZ3JfcmVjb3ZlcihzdHJ1Y3QgYW1kZ3B1X2d0dF9t
Z3IgKm1ncik7DQo+ICAgDQo+ICAgdWludDY0X3QgYW1kZ3B1X3ByZWVtcHRfbWdyX3VzYWdlKHN0
cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuKTsNCj4gICANCj4gQEAgLTE2Miw3ICsxNjIs
NyBAQCBpbnQgYW1kZ3B1X2ZpbGxfYnVmZmVyKHN0cnVjdCBhbWRncHVfYm8gKmJvLA0KPiAgIAkJ
CXN0cnVjdCBkbWFfZmVuY2UgKipmZW5jZSk7DQo+ICAgDQo+ICAgaW50IGFtZGdwdV90dG1fYWxs
b2NfZ2FydChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvKTsgLWludCANCj4gYW1kZ3B1X3R0
bV9yZWNvdmVyX2dhcnQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICp0Ym8pOw0KPiArdm9pZCBh
bWRncHVfdHRtX3JlY292ZXJfZ2FydChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKnRibyk7DQo+
ICAgdWludDY0X3QgYW1kZ3B1X3R0bV9kb21haW5fc3RhcnQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsIA0KPiB1aW50MzJfdCB0eXBlKTsNCj4gICANCj4gICAjaWYgSVNfRU5BQkxFRChDT05G
SUdfRFJNX0FNREdQVV9VU0VSUFRSKQ0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvZ21jX3YxMF8wLmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNf
djEwXzAuYw0KPiBpbmRleCA0ZjhkMzU2Zjg0MzIuLjg2N2M5NGExYTgxYSAxMDA2NDQNCj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMNCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMNCj4gQEAgLTEwMDAsMTQgKzEwMDAsNyBA
QCBzdGF0aWMgaW50IGdtY192MTBfMF9nYXJ0X2VuYWJsZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikNCj4gICAJCXJldHVybiAtRUlOVkFMOw0KPiAgIAl9DQo+ICAgDQo+IC0JaWYgKGFtZGdw
dV9zcmlvdl92ZihhZGV2KSAmJiBhbWRncHVfaW5fcmVzZXQoYWRldikpDQo+IC0JCWdvdG8gc2tp
cF9waW5fYm87DQo+IC0NCj4gLQlyID0gYW1kZ3B1X2d0dF9tZ3JfcmVjb3ZlcigmYWRldi0+bW1h
bi5ndHRfbWdyKTsNCj4gLQlpZiAocikNCj4gLQkJcmV0dXJuIHI7DQo+IC0NCj4gLXNraXBfcGlu
X2JvOg0KPiArCWFtZGdwdV9ndHRfbWdyX3JlY292ZXIoJmFkZXYtPm1tYW4uZ3R0X21ncik7DQo+
ICAgCXIgPSBhZGV2LT5nZnhodWIuZnVuY3MtPmdhcnRfZW5hYmxlKGFkZXYpOw0KPiAgIAlpZiAo
cikNCj4gICAJCXJldHVybiByOw0KPiBAQCAtMTAzMyw4ICsxMDI2LDYgQEAgc3RhdGljIGludCBn
bWNfdjEwXzBfZ2FydF9lbmFibGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+ICAgCQkg
KHVuc2lnbmVkKShhZGV2LT5nbWMuZ2FydF9zaXplID4+IDIwKSwNCj4gICAJCSAodW5zaWduZWQg
bG9uZyBsb25nKWFtZGdwdV9ib19ncHVfb2Zmc2V0KGFkZXYtPmdhcnQuYm8pKTsNCj4gICANCj4g
LQlhZGV2LT5nYXJ0LnJlYWR5ID0gdHJ1ZTsNCj4gLQ0KPiAgIAlyZXR1cm4gMDsNCj4gICB9DQo+
ICAgDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjZfMC5j
DQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y2XzAuYw0KPiBpbmRleCBjZDZj
MzhlMDgzZDAuLjNiYWVjZTExZDc0ZSAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvZ21jX3Y2XzAuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
bWNfdjZfMC5jDQo+IEBAIC00NjksMTYgKzQ2OSwxNCBAQCBzdGF0aWMgdm9pZCBnbWNfdjZfMF9z
ZXRfcHJ0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBib29sIGVuYWJsZSkgIHN0YXRpYyBp
bnQgZ21jX3Y2XzBfZ2FydF9lbmFibGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpICB7DQo+
ICAgCXVpbnQ2NF90IHRhYmxlX2FkZHI7DQo+IC0JaW50IHIsIGk7DQo+ICAgCXUzMiBmaWVsZDsN
Cj4gKwlpbnQgaTsNCj4gICANCj4gICAJaWYgKGFkZXYtPmdhcnQuYm8gPT0gTlVMTCkgew0KPiAg
IAkJZGV2X2VycihhZGV2LT5kZXYsICJObyBWUkFNIG9iamVjdCBmb3IgUENJRSBHQVJULlxuIik7
DQo+ICAgCQlyZXR1cm4gLUVJTlZBTDsNCj4gICAJfQ0KPiAtCXIgPSBhbWRncHVfZ3R0X21ncl9y
ZWNvdmVyKCZhZGV2LT5tbWFuLmd0dF9tZ3IpOw0KPiAtCWlmIChyKQ0KPiAtCQlyZXR1cm4gcjsN
Cj4gKwlhbWRncHVfZ3R0X21ncl9yZWNvdmVyKCZhZGV2LT5tbWFuLmd0dF9tZ3IpOw0KPiAgIA0K
PiAgIAl0YWJsZV9hZGRyID0gYW1kZ3B1X2JvX2dwdV9vZmZzZXQoYWRldi0+Z2FydC5ibyk7DQo+
ICAgDQo+IEBAIC01NTgsNyArNTU2LDYgQEAgc3RhdGljIGludCBnbWNfdjZfMF9nYXJ0X2VuYWJs
ZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4gICAJZGV2X2luZm8oYWRldi0+ZGV2LCAi
UENJRSBHQVJUIG9mICV1TSBlbmFibGVkICh0YWJsZSBhdCAweCUwMTZsbFgpLlxuIiwNCj4gICAJ
CSAodW5zaWduZWQpKGFkZXYtPmdtYy5nYXJ0X3NpemUgPj4gMjApLA0KPiAgIAkJICh1bnNpZ25l
ZCBsb25nIGxvbmcpdGFibGVfYWRkcik7DQo+IC0JYWRldi0+Z2FydC5yZWFkeSA9IHRydWU7DQo+
ICAgCXJldHVybiAwOw0KPiAgIH0NCj4gICANCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2dtY192N18wLmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
bWNfdjdfMC5jDQo+IGluZGV4IGFiOGFkYmZmOWUyZC4uY2Y4M2Y4YzI1OGY0IDEwMDY0NA0KPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjdfMC5jDQo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192N18wLmMNCj4gQEAgLTYxMywxNyArNjEzLDE0IEBA
IHN0YXRpYyB2b2lkIGdtY192N18wX3NldF9wcnQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYs
IGJvb2wgZW5hYmxlKSAgc3RhdGljIGludCBnbWNfdjdfMF9nYXJ0X2VuYWJsZShzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldikgIHsNCj4gICAJdWludDY0X3QgdGFibGVfYWRkcjsNCj4gLQlpbnQg
ciwgaTsNCj4gICAJdTMyIHRtcCwgZmllbGQ7DQo+ICsJaW50IGk7DQo+ICAgDQo+ICAgCWlmIChh
ZGV2LT5nYXJ0LmJvID09IE5VTEwpIHsNCj4gICAJCWRldl9lcnIoYWRldi0+ZGV2LCAiTm8gVlJB
TSBvYmplY3QgZm9yIFBDSUUgR0FSVC5cbiIpOw0KPiAgIAkJcmV0dXJuIC1FSU5WQUw7DQo+ICAg
CX0NCj4gLQlyID0gYW1kZ3B1X2d0dF9tZ3JfcmVjb3ZlcigmYWRldi0+bW1hbi5ndHRfbWdyKTsN
Cj4gLQlpZiAocikNCj4gLQkJcmV0dXJuIHI7DQo+IC0NCj4gKwlhbWRncHVfZ3R0X21ncl9yZWNv
dmVyKCZhZGV2LT5tbWFuLmd0dF9tZ3IpOw0KPiAgIAl0YWJsZV9hZGRyID0gYW1kZ3B1X2JvX2dw
dV9vZmZzZXQoYWRldi0+Z2FydC5ibyk7DQo+ICAgDQo+ICAgCS8qIFNldHVwIFRMQiBjb250cm9s
ICovDQo+IEBAIC03MTIsNyArNzA5LDYgQEAgc3RhdGljIGludCBnbWNfdjdfMF9nYXJ0X2VuYWJs
ZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4gICAJRFJNX0lORk8oIlBDSUUgR0FSVCBv
ZiAldU0gZW5hYmxlZCAodGFibGUgYXQgMHglMDE2bGxYKS5cbiIsDQo+ICAgCQkgKHVuc2lnbmVk
KShhZGV2LT5nbWMuZ2FydF9zaXplID4+IDIwKSwNCj4gICAJCSAodW5zaWduZWQgbG9uZyBsb25n
KXRhYmxlX2FkZHIpOw0KPiAtCWFkZXYtPmdhcnQucmVhZHkgPSB0cnVlOw0KPiAgIAlyZXR1cm4g
MDsNCj4gICB9DQo+ICAgDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9nbWNfdjhfMC5jDQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y4XzAuYw0K
PiBpbmRleCAwNTQ3MzM4MzgyOTIuLjdjYzdjODAwMTczNCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y4XzAuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9nbWNfdjhfMC5jDQo+IEBAIC04MzcsMTcgKzgzNywxNCBAQCBzdGF0aWMgdm9p
ZCBnbWNfdjhfMF9zZXRfcHJ0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBib29sIGVuYWJs
ZSkgIHN0YXRpYyBpbnQgZ21jX3Y4XzBfZ2FydF9lbmFibGUoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpICB7DQo+ICAgCXVpbnQ2NF90IHRhYmxlX2FkZHI7DQo+IC0JaW50IHIsIGk7DQo+ICAg
CXUzMiB0bXAsIGZpZWxkOw0KPiArCWludCBpOw0KPiAgIA0KPiAgIAlpZiAoYWRldi0+Z2FydC5i
byA9PSBOVUxMKSB7DQo+ICAgCQlkZXZfZXJyKGFkZXYtPmRldiwgIk5vIFZSQU0gb2JqZWN0IGZv
ciBQQ0lFIEdBUlQuXG4iKTsNCj4gICAJCXJldHVybiAtRUlOVkFMOw0KPiAgIAl9DQo+IC0JciA9
IGFtZGdwdV9ndHRfbWdyX3JlY292ZXIoJmFkZXYtPm1tYW4uZ3R0X21ncik7DQo+IC0JaWYgKHIp
DQo+IC0JCXJldHVybiByOw0KPiAtDQo+ICsJYW1kZ3B1X2d0dF9tZ3JfcmVjb3ZlcigmYWRldi0+
bW1hbi5ndHRfbWdyKTsNCj4gICAJdGFibGVfYWRkciA9IGFtZGdwdV9ib19ncHVfb2Zmc2V0KGFk
ZXYtPmdhcnQuYm8pOw0KPiAgIA0KPiAgIAkvKiBTZXR1cCBUTEIgY29udHJvbCAqLw0KPiBAQCAt
OTUzLDcgKzk1MCw2IEBAIHN0YXRpYyBpbnQgZ21jX3Y4XzBfZ2FydF9lbmFibGUoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpDQo+ICAgCURSTV9JTkZPKCJQQ0lFIEdBUlQgb2YgJXVNIGVuYWJs
ZWQgKHRhYmxlIGF0IDB4JTAxNmxsWCkuXG4iLA0KPiAgIAkJICh1bnNpZ25lZCkoYWRldi0+Z21j
LmdhcnRfc2l6ZSA+PiAyMCksDQo+ICAgCQkgKHVuc2lnbmVkIGxvbmcgbG9uZyl0YWJsZV9hZGRy
KTsNCj4gLQlhZGV2LT5nYXJ0LnJlYWR5ID0gdHJ1ZTsNCj4gICAJcmV0dXJuIDA7DQo+ICAgfQ0K
PiAgIA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAu
Yw0KPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMNCj4gaW5kZXggYzc2
ZmZkMWE3MGNkLi45ZjcxZjgxMGMyZjggMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2dtY192OV8wLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
Z21jX3Y5XzAuYw0KPiBAQCAtMTc4MywxNCArMTc4Myw3IEBAIHN0YXRpYyBpbnQgZ21jX3Y5XzBf
Z2FydF9lbmFibGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+ICAgCQlyZXR1cm4gLUVJ
TlZBTDsNCj4gICAJfQ0KPiAgIA0KPiAtCWlmIChhbWRncHVfc3Jpb3ZfdmYoYWRldikgJiYgYW1k
Z3B1X2luX3Jlc2V0KGFkZXYpKQ0KPiAtCQlnb3RvIHNraXBfcGluX2JvOw0KPiAtDQo+IC0JciA9
IGFtZGdwdV9ndHRfbWdyX3JlY292ZXIoJmFkZXYtPm1tYW4uZ3R0X21ncik7DQo+IC0JaWYgKHIp
DQo+IC0JCXJldHVybiByOw0KPiAtDQo+IC1za2lwX3Bpbl9ibzoNCj4gKwlhbWRncHVfZ3R0X21n
cl9yZWNvdmVyKCZhZGV2LT5tbWFuLmd0dF9tZ3IpOw0KPiAgIAlyID0gYWRldi0+Z2Z4aHViLmZ1
bmNzLT5nYXJ0X2VuYWJsZShhZGV2KTsNCj4gICAJaWYgKHIpDQo+ICAgCQlyZXR1cm4gcjsNCj4g
QEAgLTE4MDcsNyArMTgwMCw2IEBAIHN0YXRpYyBpbnQgZ21jX3Y5XzBfZ2FydF9lbmFibGUoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+ICAgCURSTV9JTkZPKCJQVEIgbG9jYXRlZCBhdCAw
eCUwMTZsbFhcbiIsDQo+ICAgCQkJKHVuc2lnbmVkIGxvbmcgbG9uZylhbWRncHVfYm9fZ3B1X29m
ZnNldChhZGV2LT5nYXJ0LmJvKSk7DQo+ICAgDQo+IC0JYWRldi0+Z2FydC5yZWFkeSA9IHRydWU7
DQo+ICAgCXJldHVybiAwOw0KPiAgIH0NCj4gICANCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1ka2ZkL2tmZF9taWdyYXRlLmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfbWlncmF0ZS5jDQo+IGluZGV4IGQ1ZDJjZjJlZTc4OC4uODhkYjgyYjNkNDQzIDEw
MDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfbWlncmF0ZS5jDQo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9taWdyYXRlLmMNCj4gQEAgLTg2
LDEwICs4Niw3IEBAIHN2bV9taWdyYXRlX2dhcnRfbWFwKHN0cnVjdCBhbWRncHVfcmluZyAqcmlu
ZywgDQo+IHVpbnQ2NF90IG5wYWdlcywNCj4gICANCj4gICAJY3B1X2FkZHIgPSAmam9iLT5pYnNb
MF0ucHRyW251bV9kd107DQo+ICAgDQo+IC0JciA9IGFtZGdwdV9nYXJ0X21hcChhZGV2LCAwLCBu
cGFnZXMsIGFkZHIsIHB0ZV9mbGFncywgY3B1X2FkZHIpOw0KPiAtCWlmIChyKQ0KPiAtCQlnb3Rv
IGVycm9yX2ZyZWU7DQo+IC0NCj4gKwlhbWRncHVfZ2FydF9tYXAoYWRldiwgMCwgbnBhZ2VzLCBh
ZGRyLCBwdGVfZmxhZ3MsIGNwdV9hZGRyKTsNCj4gICAJciA9IGFtZGdwdV9qb2Jfc3VibWl0KGpv
YiwgJmFkZXYtPm1tYW4uZW50aXR5LA0KPiAgIAkJCSAgICAgIEFNREdQVV9GRU5DRV9PV05FUl9V
TkRFRklORUQsICZmZW5jZSk7DQo+ICAgCWlmIChyKQ0KPiAtLQ0KPiAyLjI1LjENCg==
