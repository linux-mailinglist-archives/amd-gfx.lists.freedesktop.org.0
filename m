Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 320FA926DC
	for <lists+amd-gfx@lfdr.de>; Mon, 19 Aug 2019 16:35:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 433826E14E;
	Mon, 19 Aug 2019 14:35:43 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-CY1-obe.outbound.protection.outlook.com
 (mail-cys01nam02on0623.outbound.protection.outlook.com
 [IPv6:2a01:111:f400:fe45::623])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 134D06E14C
 for <amd-gfx@lists.freedesktop.org>; Mon, 19 Aug 2019 14:35:42 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=ETQHKX4WCFx/O6V27j7f7tBXF+3C3baZPoGPWWOdxcQEjaIndsubMxQH7xk96CqfIN+hH9M4Th4zUmO3EjPMa9LpYPvG5EuvW3qLjnWmBOgJIlBV4PTcRgRbdQWkztubRxpHRhsPye5W1k0gOOirrkFklnGGmlPymyP5LggI37OHIp318v/UDXyKxVtWYARyY6RBQzjQMWHz3nUaizIH/e+DjVgenHoNjQ8AwZxkVhpPjkKFt8r9LucJRZDmGfeGwG+tlec8uyznYGslvqyd8lT7elVALedCygIWeXIGQaUYVSuhjoe7rpqh32TS6VEcpnZXJt6ojFC7efwEiZxScQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bWXh9dFgNE1RGPdE9ZVFmzPy8Ee5dNJZNGea7c6alOs=;
 b=RALyvxP36FVc/ViZFCzwaAMIO+wp0K55PZ5JYpTTVzHwsGKvvQ8H7++gcCnwo2Uo34P7otVbu2V4T1dmPc0P7xOZyjdfoDuKNzzLaHdKazUDk3GNfdNhlSXQnE27fpbjbFr2yAmHZBl1vfZX82FMSG2zUlSPB6d8TxDinhSy2tO5w6aGRLDMNrkkq9RhR/7+E0gCkl0lkJvhbGvVEOyLxuPBEcNBR1yXvoqGAtXP2jKn3uvANB4OYvTxZkDnt9d3S+yGUpEaQykqfjv14rFfBWOm4jDJ6UGyDFCrIvZ8TP88kJO4b+OBzy22Ch0BJMZZFxHDL+NE8Qz/UO1KgpluAA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from DM5PR12CA0004.namprd12.prod.outlook.com (2603:10b6:4:1::14) by
 DM6PR12MB2714.namprd12.prod.outlook.com (2603:10b6:5:49::23) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2178.18; Mon, 19 Aug 2019 14:35:40 +0000
Received: from BY2NAM03FT048.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e4a::201) by DM5PR12CA0004.outlook.office365.com
 (2603:10b6:4:1::14) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id 15.20.2178.16 via Frontend
 Transport; Mon, 19 Aug 2019 14:35:40 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV02.amd.com (165.204.84.17) by
 BY2NAM03FT048.mail.protection.outlook.com (10.152.85.64) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2178.16 via Frontend Transport; Mon, 19 Aug 2019 14:35:39 +0000
Received: from blakha.amd.com (10.180.168.240) by SATLEXCHOV02.amd.com
 (10.181.40.72) with Microsoft SMTP Server id 14.3.389.1; Mon, 19 Aug 2019
 09:35:38 -0500
From: Bhawanpreet Lakha <Bhawanpreet.Lakha@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 01/36] drm/amd/display: re structure odm to allow 4 to 1
 support
Date: Mon, 19 Aug 2019 10:34:40 -0400
Message-ID: <20190819143515.21653-2-Bhawanpreet.Lakha@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190819143515.21653-1-Bhawanpreet.Lakha@amd.com>
References: <20190819143515.21653-1-Bhawanpreet.Lakha@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(136003)(396003)(346002)(376002)(2980300002)(428003)(189003)(199004)(81166006)(8676002)(8936002)(48376002)(76176011)(81156014)(478600001)(5024004)(53936002)(14444005)(50226002)(16586007)(186003)(53946003)(36756003)(50466002)(6916009)(26005)(7696005)(51416003)(70586007)(476003)(446003)(6666004)(356004)(486006)(11346002)(126002)(2616005)(4326008)(336012)(426003)(316002)(2906002)(305945005)(47776003)(70206006)(86362001)(30864003)(5660300002)(53416004)(2351001)(1076003)(579004);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB2714; H:SATLEXCHOV02.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: b95db266-8212-4096-0368-08d724b28207
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328);
 SRVR:DM6PR12MB2714; 
X-MS-TrafficTypeDiagnostic: DM6PR12MB2714:
X-Microsoft-Antispam-PRVS: <DM6PR12MB2714D363131D4CD0A93A8574F9A80@DM6PR12MB2714.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:510;
X-Forefront-PRVS: 0134AD334F
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: eDjNljP6FwIn2CxntvMOATQFxss0lMhk6P67sgPF2f2xItUiHy/aPT+P/ulgvwLxSrTTSp0bKy0U1DBb0/o4/CBD9XxxsciXjQEismlOC+/3nimpHH/nMRtQYArRXC4DxpxMVHnkGQvUeRAp0pXH8CPVihVANn//SCLjZaoTOag79mh9q8oYVgdx3zB7hGbV5akj14wJTlua2e7seatu3oP3O2o0ZE5gpJsAsKxPK5/qf4hZk5btiQtnY6zp5WrJa4X9+tMBJfOPUIxHR3+FDWQsEsaEUHI9003608FVpFOvndkcfQufRTCpgHshPVxaE4FH8fCNChddff4Tvbunlcevbuja44pc/0es1KDNXqJAsEL5tiEnMgodhQzrFyqZO14ynwAprdgSijj+Ro/nG5LKpqFjaP9yNbNKlS0ztbs=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 19 Aug 2019 14:35:39.8309 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: b95db266-8212-4096-0368-08d724b28207
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV02.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB2714
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bWXh9dFgNE1RGPdE9ZVFmzPy8Ee5dNJZNGea7c6alOs=;
 b=vDM40AUXblw8KYmvbsDZvpxotlEOkha7v19JsLdobAbiAjK32NZw3E9cZEOBJFqqBEtNWRHqquDaPtsnMUFQCVDQeSQujLAXBNKmbLj5Q5H3w9P161MNLu9hFNbNnOfKLbiMJw5+34x9D6yE751P32U6qLxMJtDkKe4q8ZOto4E=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Dmytro Laktyushkin <Dmytro.Laktyushkin@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogRG15dHJvIExha3R5dXNoa2luIDxEbXl0cm8uTGFrdHl1c2hraW5AYW1kLmNvbT4KCkN1
cnJlbnRseSBvZG0gaXMgaGFuZGxlZCB1c2luZyB0b3BfYm90dG9tIHBpcGUgYnkgc3BlY2lhbCBj
YXNpbmcKdGhlIGRpZmZlcmluZyBvcHBzIHRvIGRpZmZlcmVudGlhdGUgZnJvbSBtcGMgY29tYmlu
ZS4KClNpbmNlIHRvcC9ib3R0b20gcGlwZSBsaXN0IHdhcyBtYWRlIHRvIHRyYWNrIG1wYyBtdXhp
bmcgdGhpcyBjcmVhdGVzCmRpZmZpY3VsdGllcyBpbiBhZGRpbmcgYSA0IHBpcGUgb2RtIGNhc2Ug
c3VwcG9ydC4KClJhdGhlciB0aGFuIGNvbnRpbnVlIHVzaW5nIG1wYyBjb21iaW5lIGxpc3QsIHRo
aXMgY2hhbmdlIHJld29ya3Mgb2RtCnRvIHVzZSBpdCdzIG93biBsaW5rZWQgbGlzdCB0byBrZWVw
IHRyYWNrIG9mIG9kbSBjb21iaW5lIHBpcGVzLiBUaGlzCmFsc28gb3BlbnMgdXAgb3B0aW9ucyBm
b3IgdXNpbmcgbXBvIHdpdGggb2RtLCBpZiBhIHByYWN0aWNhbCB1c2UgY2FzZQppcyBldmVyIGZv
dW5kLgoKU2lnbmVkLW9mZi1ieTogRG15dHJvIExha3R5dXNoa2luIDxEbXl0cm8uTGFrdHl1c2hr
aW5AYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IENoYXJsZW5lIExpdSA8Q2hhcmxlbmUuTGl1QGFtZC5j
b20+CkFja2VkLWJ5OiBMZW8gTGkgPHN1bnBlbmcubGlAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dw
dS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kYy5jICAgICAgfCAgMTAgKy0KIC4uLi9ncHUvZHJt
L2FtZC9kaXNwbGF5L2RjL2NvcmUvZGNfbGlua19kcC5jICB8ICAzMyArKy0KIC4uLi9kcm0vYW1k
L2Rpc3BsYXkvZGMvY29yZS9kY19saW5rX2h3c3MuYyAgICB8ICAzNiArLS0KIC4uLi9ncHUvZHJt
L2FtZC9kaXNwbGF5L2RjL2NvcmUvZGNfcmVzb3VyY2UuYyB8IDE1MCArKysrLS0tLS0tLQogLi4u
L2Rpc3BsYXkvZGMvZGNlMTEwL2RjZTExMF9od19zZXF1ZW5jZXIuYyAgIHwgICA3ICstCiAuLi4v
YW1kL2Rpc3BsYXkvZGMvZGNuMTAvZGNuMTBfaHdfc2VxdWVuY2VyLmMgfCAgIDIgKy0KIC4uLi9k
cm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfaHdzZXEuYyAgICB8ICA5MCArKysrLS0tCiAu
Li4vZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX3Jlc291cmNlLmMgfCAyNDQgKysrKysr
KysrKysrLS0tLS0tCiAuLi4vZGlzcGxheS9kYy9kY24yMC9kY24yMF9zdHJlYW1fZW5jb2Rlci5j
ICAgfCAgIDIgKy0KIC4uLi9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2luYy9jb3JlX3R5cGVzLmgg
ICB8ICAgMiArCiAuLi4vYW1kL2Rpc3BsYXkvZGMvaW5jL2h3L3N0cmVhbV9lbmNvZGVyLmggICAg
fCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9pbmMvcmVzb3VyY2UuaCB8
ICAgMyAtCiAxMiBmaWxlcyBjaGFuZ2VkLCAzMTYgaW5zZXJ0aW9ucygrKSwgMjY1IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9jb3JlL2Rj
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kYy5jCmluZGV4IDc3YWM3
ZjcwN2VjNS4uNjJkNWY0NTRmODI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rp
c3BsYXkvZGMvY29yZS9kYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9j
b3JlL2RjLmMKQEAgLTE4NTcsOSArMTg1Nyw3IEBAIHN0YXRpYyB2b2lkIGNvbW1pdF9wbGFuZXNf
ZG9fc3RyZWFtX3VwZGF0ZShzdHJ1Y3QgZGMgKmRjLAogCWZvciAoaiA9IDA7IGogPCBkYy0+cmVz
X3Bvb2wtPnBpcGVfY291bnQ7IGorKykgewogCQlzdHJ1Y3QgcGlwZV9jdHggKnBpcGVfY3R4ID0g
JmNvbnRleHQtPnJlc19jdHgucGlwZV9jdHhbal07CiAKLQkJaWYgKCFwaXBlX2N0eC0+dG9wX3Bp
cGUgJiYKLQkJCXBpcGVfY3R4LT5zdHJlYW0gJiYKLQkJCXBpcGVfY3R4LT5zdHJlYW0gPT0gc3Ry
ZWFtKSB7CisJCWlmICghcGlwZV9jdHgtPnRvcF9waXBlICYmICAhcGlwZV9jdHgtPnByZXZfb2Rt
X3BpcGUgJiYgcGlwZV9jdHgtPnN0cmVhbSA9PSBzdHJlYW0pIHsKIAogCQkJaWYgKHN0cmVhbV91
cGRhdGUtPnBlcmlvZGljX2ludGVycnVwdDAgJiYKIAkJCQkJZGMtPmh3c3Muc2V0dXBfcGVyaW9k
aWNfaW50ZXJydXB0KQpAQCAtMTg4NSw3ICsxODgzLDcgQEAgc3RhdGljIHZvaWQgY29tbWl0X3Bs
YW5lc19kb19zdHJlYW1fdXBkYXRlKHN0cnVjdCBkYyAqZGMsCiAKIAkJCWlmIChzdHJlYW1fdXBk
YXRlLT5kaXRoZXJfb3B0aW9uKSB7CiAjaWYgZGVmaW5lZChDT05GSUdfRFJNX0FNRF9EQ19EQ04y
XzApCi0JCQkJc3RydWN0IHBpcGVfY3R4ICpvZG1fcGlwZSA9IGRjX3Jlc19nZXRfb2RtX2JvdHRv
bV9waXBlKHBpcGVfY3R4KTsKKwkJCQlzdHJ1Y3QgcGlwZV9jdHggKm9kbV9waXBlID0gcGlwZV9j
dHgtPm5leHRfb2RtX3BpcGU7CiAjZW5kaWYKIAkJCQlyZXNvdXJjZV9idWlsZF9iaXRfZGVwdGhf
cmVkdWN0aW9uX3BhcmFtcyhwaXBlX2N0eC0+c3RyZWFtLAogCQkJCQkJCQkJJnBpcGVfY3R4LT5z
dHJlYW0tPmJpdF9kZXB0aF9wYXJhbXMpOwpAQCAtMTg5MywxMCArMTg5MSwxMiBAQCBzdGF0aWMg
dm9pZCBjb21taXRfcGxhbmVzX2RvX3N0cmVhbV91cGRhdGUoc3RydWN0IGRjICpkYywKIAkJCQkJ
CSZzdHJlYW0tPmJpdF9kZXB0aF9wYXJhbXMsCiAJCQkJCQkmc3RyZWFtLT5jbGFtcGluZyk7CiAj
aWYgZGVmaW5lZChDT05GSUdfRFJNX0FNRF9EQ19EQ04yXzApCi0JCQkJaWYgKG9kbV9waXBlKQor
CQkJCXdoaWxlIChvZG1fcGlwZSkgewogCQkJCQlvZG1fcGlwZS0+c3RyZWFtX3Jlcy5vcHAtPmZ1
bmNzLT5vcHBfcHJvZ3JhbV9mbXQob2RtX3BpcGUtPnN0cmVhbV9yZXMub3BwLAogCQkJCQkJCSZz
dHJlYW0tPmJpdF9kZXB0aF9wYXJhbXMsCiAJCQkJCQkJJnN0cmVhbS0+Y2xhbXBpbmcpOworCQkJ
CQlvZG1fcGlwZSA9IG9kbV9waXBlLT5uZXh0X29kbV9waXBlOworCQkJCX0KICNlbmRpZgogCQkJ
fQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kY19s
aW5rX2RwLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kY19saW5rX2Rw
LmMKaW5kZXggMmU4Nzk0MmIzZTljLi4yYWE0NGIyOGI2NzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvZGlzcGxheS9kYy9jb3JlL2RjX2xpbmtfZHAuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kY19saW5rX2RwLmMKQEAgLTMwOTUsMTQgKzMwOTUs
MTkgQEAgc3RhdGljIHZvaWQgc2V0X2NydGNfdGVzdF9wYXR0ZXJuKHN0cnVjdCBkY19saW5rICps
aW5rLAogCQkJCWNvbnRyb2xsZXJfdGVzdF9wYXR0ZXJuLCBjb2xvcl9kZXB0aCk7CiAjaWYgZGVm
aW5lZChDT05GSUdfRFJNX0FNRF9EQ19EQ04yXzApCiAJCWVsc2UgaWYgKG9wcC0+ZnVuY3MtPm9w
cF9zZXRfZGlzcF9wYXR0ZXJuX2dlbmVyYXRvcikgewotCQkJc3RydWN0IHBpcGVfY3R4ICpib3Rf
b2RtX3BpcGUgPSBkY19yZXNfZ2V0X29kbV9ib3R0b21fcGlwZShwaXBlX2N0eCk7CisJCQlzdHJ1
Y3QgcGlwZV9jdHggKm9kbV9waXBlOworCQkJaW50IG9wcF9jbnQgPSAxOwogCi0JCQlpZiAoYm90
X29kbV9waXBlKSB7Ci0JCQkJc3RydWN0IG91dHB1dF9waXhlbF9wcm9jZXNzb3IgKmJvdF9vcHAg
PSBib3Rfb2RtX3BpcGUtPnN0cmVhbV9yZXMub3BwOworCQkJZm9yIChvZG1fcGlwZSA9IHBpcGVf
Y3R4LT5uZXh0X29kbV9waXBlOyBvZG1fcGlwZTsgb2RtX3BpcGUgPSBvZG1fcGlwZS0+bmV4dF9v
ZG1fcGlwZSkKKwkJCQlvcHBfY250Kys7CiAKLQkJCQlib3Rfb3BwLT5mdW5jcy0+b3BwX3Byb2dy
YW1fYml0X2RlcHRoX3JlZHVjdGlvbihib3Rfb3BwLCAmcGFyYW1zKTsKLQkJCQl3aWR0aCAvPSAy
OwotCQkJCWJvdF9vcHAtPmZ1bmNzLT5vcHBfc2V0X2Rpc3BfcGF0dGVybl9nZW5lcmF0b3IoYm90
X29wcCwKKwkJCXdpZHRoIC89IG9wcF9jbnQ7CisKKwkJCWZvciAob2RtX3BpcGUgPSBwaXBlX2N0
eC0+bmV4dF9vZG1fcGlwZTsgb2RtX3BpcGU7IG9kbV9waXBlID0gb2RtX3BpcGUtPm5leHRfb2Rt
X3BpcGUpIHsKKwkJCQlzdHJ1Y3Qgb3V0cHV0X3BpeGVsX3Byb2Nlc3NvciAqb2RtX29wcCA9IG9k
bV9waXBlLT5zdHJlYW1fcmVzLm9wcDsKKworCQkJCW9kbV9vcHAtPmZ1bmNzLT5vcHBfcHJvZ3Jh
bV9iaXRfZGVwdGhfcmVkdWN0aW9uKG9kbV9vcHAsICZwYXJhbXMpOworCQkJCW9kbV9vcHAtPmZ1
bmNzLT5vcHBfc2V0X2Rpc3BfcGF0dGVybl9nZW5lcmF0b3Iob2RtX29wcCwKIAkJCQkJY29udHJv
bGxlcl90ZXN0X3BhdHRlcm4sCiAJCQkJCWNvbG9yX2RlcHRoLAogCQkJCQlOVUxMLApAQCAtMzEz
MSwxNCArMzEzNiwxOCBAQCBzdGF0aWMgdm9pZCBzZXRfY3J0Y190ZXN0X3BhdHRlcm4oc3RydWN0
IGRjX2xpbmsgKmxpbmssCiAJCQkJY29sb3JfZGVwdGgpOwogI2lmIGRlZmluZWQoQ09ORklHX0RS
TV9BTURfRENfRENOMl8wKQogCQllbHNlIGlmIChvcHAtPmZ1bmNzLT5vcHBfc2V0X2Rpc3BfcGF0
dGVybl9nZW5lcmF0b3IpIHsKLQkJCXN0cnVjdCBwaXBlX2N0eCAqYm90X29kbV9waXBlID0gZGNf
cmVzX2dldF9vZG1fYm90dG9tX3BpcGUocGlwZV9jdHgpOworCQkJc3RydWN0IHBpcGVfY3R4ICpv
ZG1fcGlwZTsKKwkJCWludCBvcHBfY250ID0gMTsKKworCQkJZm9yIChvZG1fcGlwZSA9IHBpcGVf
Y3R4LT5uZXh0X29kbV9waXBlOyBvZG1fcGlwZTsgb2RtX3BpcGUgPSBvZG1fcGlwZS0+bmV4dF9v
ZG1fcGlwZSkKKwkJCQlvcHBfY250Kys7CiAKLQkJCWlmIChib3Rfb2RtX3BpcGUpIHsKLQkJCQlz
dHJ1Y3Qgb3V0cHV0X3BpeGVsX3Byb2Nlc3NvciAqYm90X29wcCA9IGJvdF9vZG1fcGlwZS0+c3Ry
ZWFtX3Jlcy5vcHA7CisJCQl3aWR0aCAvPSBvcHBfY250OworCQkJZm9yIChvZG1fcGlwZSA9IHBp
cGVfY3R4LT5uZXh0X29kbV9waXBlOyBvZG1fcGlwZTsgb2RtX3BpcGUgPSBvZG1fcGlwZS0+bmV4
dF9vZG1fcGlwZSkgeworCQkJCXN0cnVjdCBvdXRwdXRfcGl4ZWxfcHJvY2Vzc29yICpvZG1fb3Bw
ID0gb2RtX3BpcGUtPnN0cmVhbV9yZXMub3BwOwogCi0JCQkJYm90X29wcC0+ZnVuY3MtPm9wcF9w
cm9ncmFtX2JpdF9kZXB0aF9yZWR1Y3Rpb24oYm90X29wcCwgJnBhcmFtcyk7Ci0JCQkJd2lkdGgg
Lz0gMjsKLQkJCQlib3Rfb3BwLT5mdW5jcy0+b3BwX3NldF9kaXNwX3BhdHRlcm5fZ2VuZXJhdG9y
KGJvdF9vcHAsCisJCQkJb2RtX29wcC0+ZnVuY3MtPm9wcF9wcm9ncmFtX2JpdF9kZXB0aF9yZWR1
Y3Rpb24ob2RtX29wcCwgJnBhcmFtcyk7CisJCQkJb2RtX29wcC0+ZnVuY3MtPm9wcF9zZXRfZGlz
cF9wYXR0ZXJuX2dlbmVyYXRvcihvZG1fb3BwLAogCQkJCQlDT05UUk9MTEVSX0RQX1RFU1RfUEFU
VEVSTl9WSURFT01PREUsCiAJCQkJCWNvbG9yX2RlcHRoLAogCQkJCQlOVUxMLApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2NvcmUvZGNfbGlua19od3NzLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kY19saW5rX2h3c3MuYwppbmRleCAz
NWM1NDY3ZTYwZTguLmZlOWE0ZTRiOWQxZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9kaXNwbGF5L2RjL2NvcmUvZGNfbGlua19od3NzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9kaXNwbGF5L2RjL2NvcmUvZGNfbGlua19od3NzLmMKQEAgLTI3NSw3ICsyNzUsNyBAQCB2b2lk
IGRwX3JldHJhaW5fbGlua19kcF90ZXN0KHN0cnVjdCBkY19saW5rICpsaW5rLAogCiAJZm9yIChp
ID0gMDsgaSA8IE1BWF9QSVBFUzsgaSsrKSB7CiAJCWlmIChwaXBlc1tpXS5zdHJlYW0gIT0gTlVM
TCAmJgotCQkJIXBpcGVzW2ldLnRvcF9waXBlICYmCisJCQkhcGlwZXNbaV0udG9wX3BpcGUgJiYg
IXBpcGVzW2ldLnByZXZfb2RtX3BpcGUgJiYKIAkJCXBpcGVzW2ldLnN0cmVhbS0+bGluayAhPSBO
VUxMICYmCiAJCQlwaXBlc1tpXS5zdHJlYW1fcmVzLnN0cmVhbV9lbmMgIT0gTlVMTCkgewogCQkJ
dWRlbGF5KDEwMCk7CkBAIC0zODEsNyArMzgxLDExIEBAIHZvaWQgZHBfc2V0X2RzY19vbl9zdHJl
YW0oc3RydWN0IHBpcGVfY3R4ICpwaXBlX2N0eCwgYm9vbCBlbmFibGUpCiAJc3RydWN0IGRpc3Bs
YXlfc3RyZWFtX2NvbXByZXNzb3IgKmRzYyA9IHBpcGVfY3R4LT5zdHJlYW1fcmVzLmRzYzsKIAlz
dHJ1Y3QgZGMgKmNvcmVfZGMgPSBwaXBlX2N0eC0+c3RyZWFtLT5jdHgtPmRjOwogCXN0cnVjdCBk
Y19zdHJlYW1fc3RhdGUgKnN0cmVhbSA9IHBpcGVfY3R4LT5zdHJlYW07Ci0Jc3RydWN0IHBpcGVf
Y3R4ICpvZG1fcGlwZSA9IGRjX3Jlc19nZXRfb2RtX2JvdHRvbV9waXBlKHBpcGVfY3R4KTsKKwlz
dHJ1Y3QgcGlwZV9jdHggKm9kbV9waXBlOworCWludCBvcHBfY250ID0gMTsKKworCWZvciAob2Rt
X3BpcGUgPSBwaXBlX2N0eC0+bmV4dF9vZG1fcGlwZTsgb2RtX3BpcGU7IG9kbV9waXBlID0gb2Rt
X3BpcGUtPm5leHRfb2RtX3BpcGUpCisJCW9wcF9jbnQrKzsKIAogCWlmIChlbmFibGUpIHsKIAkJ
c3RydWN0IGRzY19jb25maWcgZHNjX2NmZzsKQEAgLTM4OSwyNiArMzkzLDI0IEBAIHZvaWQgZHBf
c2V0X2RzY19vbl9zdHJlYW0oc3RydWN0IHBpcGVfY3R4ICpwaXBlX2N0eCwgYm9vbCBlbmFibGUp
CiAJCWVudW0gb3B0Y19kc2NfbW9kZSBvcHRjX2RzY19tb2RlOwogCiAJCS8qIEVuYWJsZSBEU0Mg
aHcgYmxvY2sgKi8KLQkJZHNjX2NmZy5waWNfd2lkdGggPSBzdHJlYW0tPnRpbWluZy5oX2FkZHJl
c3NhYmxlICsgc3RyZWFtLT50aW1pbmcuaF9ib3JkZXJfbGVmdCArIHN0cmVhbS0+dGltaW5nLmhf
Ym9yZGVyX3JpZ2h0OworCQlkc2NfY2ZnLnBpY193aWR0aCA9IChzdHJlYW0tPnRpbWluZy5oX2Fk
ZHJlc3NhYmxlICsgc3RyZWFtLT50aW1pbmcuaF9ib3JkZXJfbGVmdCArIHN0cmVhbS0+dGltaW5n
LmhfYm9yZGVyX3JpZ2h0KSAvIG9wcF9jbnQ7CiAJCWRzY19jZmcucGljX2hlaWdodCA9IHN0cmVh
bS0+dGltaW5nLnZfYWRkcmVzc2FibGUgKyBzdHJlYW0tPnRpbWluZy52X2JvcmRlcl90b3AgKyBz
dHJlYW0tPnRpbWluZy52X2JvcmRlcl9ib3R0b207CiAJCWRzY19jZmcucGl4ZWxfZW5jb2Rpbmcg
PSBzdHJlYW0tPnRpbWluZy5waXhlbF9lbmNvZGluZzsKIAkJZHNjX2NmZy5jb2xvcl9kZXB0aCA9
IHN0cmVhbS0+dGltaW5nLmRpc3BsYXlfY29sb3JfZGVwdGg7CiAJCWRzY19jZmcuZGNfZHNjX2Nm
ZyA9IHN0cmVhbS0+dGltaW5nLmRzY19jZmc7CisJCUFTU0VSVChkc2NfY2ZnLmRjX2RzY19jZmcu
bnVtX3NsaWNlc19oICUgb3BwX2NudCA9PSAwKTsKKwkJZHNjX2NmZy5kY19kc2NfY2ZnLm51bV9z
bGljZXNfaCAvPSBvcHBfY250OworCisJCWRzYy0+ZnVuY3MtPmRzY19zZXRfY29uZmlnKGRzYywg
JmRzY19jZmcsICZkc2Nfb3B0Y19jZmcpOworCQlkc2MtPmZ1bmNzLT5kc2NfZW5hYmxlKGRzYywg
cGlwZV9jdHgtPnN0cmVhbV9yZXMub3BwLT5pbnN0KTsKKwkJZm9yIChvZG1fcGlwZSA9IHBpcGVf
Y3R4LT5uZXh0X29kbV9waXBlOyBvZG1fcGlwZTsgb2RtX3BpcGUgPSBvZG1fcGlwZS0+bmV4dF9v
ZG1fcGlwZSkgeworCQkJc3RydWN0IGRpc3BsYXlfc3RyZWFtX2NvbXByZXNzb3IgKm9kbV9kc2Mg
PSBvZG1fcGlwZS0+c3RyZWFtX3Jlcy5kc2M7CiAKLQkJaWYgKG9kbV9waXBlKSB7Ci0JCQlzdHJ1
Y3QgZGlzcGxheV9zdHJlYW1fY29tcHJlc3NvciAqYm90X2RzYyA9IG9kbV9waXBlLT5zdHJlYW1f
cmVzLmRzYzsKLQotCQkJZHNjX2NmZy5waWNfd2lkdGggLz0gMjsKLQkJCUFTU0VSVChkc2NfY2Zn
LmRjX2RzY19jZmcubnVtX3NsaWNlc19oICUgMiA9PSAwKTsKLQkJCWRzY19jZmcuZGNfZHNjX2Nm
Zy5udW1fc2xpY2VzX2ggLz0gMjsKLQkJCWRzYy0+ZnVuY3MtPmRzY19zZXRfY29uZmlnKGRzYywg
JmRzY19jZmcsICZkc2Nfb3B0Y19jZmcpOwotCQkJYm90X2RzYy0+ZnVuY3MtPmRzY19zZXRfY29u
ZmlnKGJvdF9kc2MsICZkc2NfY2ZnLCAmZHNjX29wdGNfY2ZnKTsKLQkJCWRzYy0+ZnVuY3MtPmRz
Y19lbmFibGUoZHNjLCBwaXBlX2N0eC0+c3RyZWFtX3Jlcy5vcHAtPmluc3QpOwotCQkJYm90X2Rz
Yy0+ZnVuY3MtPmRzY19lbmFibGUoYm90X2RzYywgb2RtX3BpcGUtPnN0cmVhbV9yZXMub3BwLT5p
bnN0KTsKLQkJfSBlbHNlIHsKLQkJCWRzYy0+ZnVuY3MtPmRzY19zZXRfY29uZmlnKGRzYywgJmRz
Y19jZmcsICZkc2Nfb3B0Y19jZmcpOwotCQkJZHNjLT5mdW5jcy0+ZHNjX2VuYWJsZShkc2MsIHBp
cGVfY3R4LT5zdHJlYW1fcmVzLm9wcC0+aW5zdCk7CisJCQlvZG1fZHNjLT5mdW5jcy0+ZHNjX3Nl
dF9jb25maWcob2RtX2RzYywgJmRzY19jZmcsICZkc2Nfb3B0Y19jZmcpOworCQkJb2RtX2RzYy0+
ZnVuY3MtPmRzY19lbmFibGUob2RtX2RzYywgb2RtX3BpcGUtPnN0cmVhbV9yZXMub3BwLT5pbnN0
KTsKIAkJfQorCQlkc2NfY2ZnLmRjX2RzY19jZmcubnVtX3NsaWNlc19oICo9IG9wcF9jbnQ7CisJ
CWRzY19jZmcucGljX3dpZHRoICo9IG9wcF9jbnQ7CiAKIAkJb3B0Y19kc2NfbW9kZSA9IGRzY19v
cHRjX2NmZy5pc19waXhlbF9mb3JtYXRfNDQ0ID8gT1BUQ19EU0NfRU5BQkxFRF80NDQgOiBPUFRD
X0RTQ19FTkFCTEVEX05BVElWRV9TVUJTQU1QTEVEOwogCkBAIC00NDksNyArNDUxLDcgQEAgdm9p
ZCBkcF9zZXRfZHNjX29uX3N0cmVhbShzdHJ1Y3QgcGlwZV9jdHggKnBpcGVfY3R4LCBib29sIGVu
YWJsZSkKIAogCQkvKiBkaXNhYmxlIERTQyBibG9jayAqLwogCQlwaXBlX2N0eC0+c3RyZWFtX3Jl
cy5kc2MtPmZ1bmNzLT5kc2NfZGlzYWJsZShwaXBlX2N0eC0+c3RyZWFtX3Jlcy5kc2MpOwotCQlp
ZiAob2RtX3BpcGUpCisJCWZvciAob2RtX3BpcGUgPSBwaXBlX2N0eC0+bmV4dF9vZG1fcGlwZTsg
b2RtX3BpcGU7IG9kbV9waXBlID0gb2RtX3BpcGUtPm5leHRfb2RtX3BpcGUpCiAJCQlvZG1fcGlw
ZS0+c3RyZWFtX3Jlcy5kc2MtPmZ1bmNzLT5kc2NfZGlzYWJsZShvZG1fcGlwZS0+c3RyZWFtX3Jl
cy5kc2MpOwogCX0KIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9k
Yy9jb3JlL2RjX3Jlc291cmNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29y
ZS9kY19yZXNvdXJjZS5jCmluZGV4IGZhOTRkZmMwNGRjZS4uMTQ2NGY0YzYwMDg5IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kY19yZXNvdXJjZS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9jb3JlL2RjX3Jlc291cmNlLmMKQEAg
LTExMTQsOCArMTExNCw5IEBAIHN0cnVjdCBwaXBlX2N0eCAqcmVzb3VyY2VfZ2V0X2hlYWRfcGlw
ZV9mb3Jfc3RyZWFtKAogewogCWludCBpOwogCWZvciAoaSA9IDA7IGkgPCBNQVhfUElQRVM7IGkr
KykgewotCQlpZiAocmVzX2N0eC0+cGlwZV9jdHhbaV0uc3RyZWFtID09IHN0cmVhbSAmJgotCQkJ
CSFyZXNfY3R4LT5waXBlX2N0eFtpXS50b3BfcGlwZSkgeworCQlpZiAocmVzX2N0eC0+cGlwZV9j
dHhbaV0uc3RyZWFtID09IHN0cmVhbQorCQkJCSYmICFyZXNfY3R4LT5waXBlX2N0eFtpXS50b3Bf
cGlwZQorCQkJCSYmICFyZXNfY3R4LT5waXBlX2N0eFtpXS5wcmV2X29kbV9waXBlKSB7CiAJCQly
ZXR1cm4gJnJlc19jdHgtPnBpcGVfY3R4W2ldOwogCQkJYnJlYWs7CiAJCX0KQEAgLTExMjMsMTUg
KzExMjQsMTEgQEAgc3RydWN0IHBpcGVfY3R4ICpyZXNvdXJjZV9nZXRfaGVhZF9waXBlX2Zvcl9z
dHJlYW0oCiAJcmV0dXJuIE5VTEw7CiB9CiAKLXN0YXRpYyBzdHJ1Y3QgcGlwZV9jdHggKnJlc291
cmNlX2dldF90YWlsX3BpcGVfZm9yX3N0cmVhbSgKK3N0YXRpYyBzdHJ1Y3QgcGlwZV9jdHggKnJl
c291cmNlX2dldF90YWlsX3BpcGUoCiAJCXN0cnVjdCByZXNvdXJjZV9jb250ZXh0ICpyZXNfY3R4
LAotCQlzdHJ1Y3QgZGNfc3RyZWFtX3N0YXRlICpzdHJlYW0pCisJCXN0cnVjdCBwaXBlX2N0eCAq
aGVhZF9waXBlKQogewotCXN0cnVjdCBwaXBlX2N0eCAqaGVhZF9waXBlLCAqdGFpbF9waXBlOwot
CWhlYWRfcGlwZSA9IHJlc291cmNlX2dldF9oZWFkX3BpcGVfZm9yX3N0cmVhbShyZXNfY3R4LCBz
dHJlYW0pOwotCi0JaWYgKCFoZWFkX3BpcGUpCi0JCXJldHVybiBOVUxMOworCXN0cnVjdCBwaXBl
X2N0eCAqdGFpbF9waXBlOwogCiAJdGFpbF9waXBlID0gaGVhZF9waXBlLT5ib3R0b21fcGlwZTsK
IApAQCAtMTE0NywzMSArMTE0NCwyMCBAQCBzdGF0aWMgc3RydWN0IHBpcGVfY3R4ICpyZXNvdXJj
ZV9nZXRfdGFpbF9waXBlX2Zvcl9zdHJlYW0oCiAgKiBBIGZyZWVfcGlwZSBmb3IgYSBzdHJlYW0g
aXMgZGVmaW5lZCBoZXJlIGFzIGEgcGlwZQogICogdGhhdCBoYXMgbm8gc3VyZmFjZSBhdHRhY2hl
ZCB5ZXQKICAqLwotc3RhdGljIHN0cnVjdCBwaXBlX2N0eCAqYWNxdWlyZV9mcmVlX3BpcGVfZm9y
X3N0cmVhbSgKK3N0YXRpYyBzdHJ1Y3QgcGlwZV9jdHggKmFjcXVpcmVfZnJlZV9waXBlX2Zvcl9o
ZWFkKAogCQlzdHJ1Y3QgZGNfc3RhdGUgKmNvbnRleHQsCiAJCWNvbnN0IHN0cnVjdCByZXNvdXJj
ZV9wb29sICpwb29sLAotCQlzdHJ1Y3QgZGNfc3RyZWFtX3N0YXRlICpzdHJlYW0pCisJCXN0cnVj
dCBwaXBlX2N0eCAqaGVhZF9waXBlKQogewogCWludCBpOwogCXN0cnVjdCByZXNvdXJjZV9jb250
ZXh0ICpyZXNfY3R4ID0gJmNvbnRleHQtPnJlc19jdHg7CiAKLQlzdHJ1Y3QgcGlwZV9jdHggKmhl
YWRfcGlwZSA9IE5VTEw7Ci0KLQkvKiBGaW5kIGhlYWQgcGlwZSwgd2hpY2ggaGFzIHRoZSBiYWNr
IGVuZCBzZXQgdXAqLwotCi0JaGVhZF9waXBlID0gcmVzb3VyY2VfZ2V0X2hlYWRfcGlwZV9mb3Jf
c3RyZWFtKHJlc19jdHgsIHN0cmVhbSk7Ci0KLQlpZiAoIWhlYWRfcGlwZSkgewotCQlBU1NFUlQo
MCk7Ci0JCXJldHVybiBOVUxMOwotCX0KLQogCWlmICghaGVhZF9waXBlLT5wbGFuZV9zdGF0ZSkK
IAkJcmV0dXJuIGhlYWRfcGlwZTsKIAogCS8qIFJlLXVzZSBwaXBlIGFscmVhZHkgYWNxdWlyZWQg
Zm9yIHRoaXMgc3RyZWFtIGlmIGF2YWlsYWJsZSovCiAJZm9yIChpID0gcG9vbC0+cGlwZV9jb3Vu
dCAtIDE7IGkgPj0gMDsgaS0tKSB7Ci0JCWlmIChyZXNfY3R4LT5waXBlX2N0eFtpXS5zdHJlYW0g
PT0gc3RyZWFtICYmCisJCWlmIChyZXNfY3R4LT5waXBlX2N0eFtpXS5zdHJlYW0gPT0gaGVhZF9w
aXBlLT5zdHJlYW0gJiYKIAkJCQkhcmVzX2N0eC0+cGlwZV9jdHhbaV0ucGxhbmVfc3RhdGUpIHsK
IAkJCXJldHVybiAmcmVzX2N0eC0+cGlwZV9jdHhbaV07CiAJCX0KQEAgLTExODUsOCArMTE3MSw3
IEBAIHN0YXRpYyBzdHJ1Y3QgcGlwZV9jdHggKmFjcXVpcmVfZnJlZV9waXBlX2Zvcl9zdHJlYW0o
CiAJaWYgKCFwb29sLT5mdW5jcy0+YWNxdWlyZV9pZGxlX3BpcGVfZm9yX2xheWVyKQogCQlyZXR1
cm4gTlVMTDsKIAotCXJldHVybiBwb29sLT5mdW5jcy0+YWNxdWlyZV9pZGxlX3BpcGVfZm9yX2xh
eWVyKGNvbnRleHQsIHBvb2wsIHN0cmVhbSk7Ci0KKwlyZXR1cm4gcG9vbC0+ZnVuY3MtPmFjcXVp
cmVfaWRsZV9waXBlX2Zvcl9sYXllcihjb250ZXh0LCBwb29sLCBoZWFkX3BpcGUtPnN0cmVhbSk7
CiB9CiAKICNpZiBkZWZpbmVkKENPTkZJR19EUk1fQU1EX0RDX0RDTjFfMCkKQEAgLTEyMDAsNyAr
MTE4NSw3IEBAIHN0YXRpYyBpbnQgYWNxdWlyZV9maXJzdF9zcGxpdF9waXBlKAogCWZvciAoaSA9
IDA7IGkgPCBwb29sLT5waXBlX2NvdW50OyBpKyspIHsKIAkJc3RydWN0IHBpcGVfY3R4ICpzcGxp
dF9waXBlID0gJnJlc19jdHgtPnBpcGVfY3R4W2ldOwogCi0JCWlmIChzcGxpdF9waXBlLT50b3Bf
cGlwZSAmJiAhZGNfcmVzX2lzX29kbV9oZWFkX3BpcGUoc3BsaXRfcGlwZSkgJiYKKwkJaWYgKHNw
bGl0X3BpcGUtPnRvcF9waXBlICYmCiAJCQkJc3BsaXRfcGlwZS0+dG9wX3BpcGUtPnBsYW5lX3N0
YXRlID09IHNwbGl0X3BpcGUtPnBsYW5lX3N0YXRlKSB7CiAJCQlzcGxpdF9waXBlLT50b3BfcGlw
ZS0+Ym90dG9tX3BpcGUgPSBzcGxpdF9waXBlLT5ib3R0b21fcGlwZTsKIAkJCWlmIChzcGxpdF9w
aXBlLT5ib3R0b21fcGlwZSkKQEAgLTEyNjEsMzkgKzEyNDYsNDEgQEAgYm9vbCBkY19hZGRfcGxh
bmVfdG9fY29udGV4dCgKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAotCXRhaWxfcGlwZSA9IHJlc291
cmNlX2dldF90YWlsX3BpcGVfZm9yX3N0cmVhbSgmY29udGV4dC0+cmVzX2N0eCwgc3RyZWFtKTsK
LQlBU1NFUlQodGFpbF9waXBlKTsKKwkvKiByZXRhaW4gbmV3IHN1cmZhY2UsIGJ1dCBvbmx5IG9u
Y2UgcGVyIHN0cmVhbSAqLworCWRjX3BsYW5lX3N0YXRlX3JldGFpbihwbGFuZV9zdGF0ZSk7CiAK
LQlmcmVlX3BpcGUgPSBhY3F1aXJlX2ZyZWVfcGlwZV9mb3Jfc3RyZWFtKGNvbnRleHQsIHBvb2ws
IHN0cmVhbSk7CisJd2hpbGUgKGhlYWRfcGlwZSkgeworCQl0YWlsX3BpcGUgPSByZXNvdXJjZV9n
ZXRfdGFpbF9waXBlKCZjb250ZXh0LT5yZXNfY3R4LCBoZWFkX3BpcGUpOworCQlBU1NFUlQodGFp
bF9waXBlKTsKIAotI2lmIGRlZmluZWQoQ09ORklHX0RSTV9BTURfRENfRENOMV8wKQotCWlmICgh
ZnJlZV9waXBlKSB7Ci0JCWludCBwaXBlX2lkeCA9IGFjcXVpcmVfZmlyc3Rfc3BsaXRfcGlwZSgm
Y29udGV4dC0+cmVzX2N0eCwgcG9vbCwgc3RyZWFtKTsKLQkJaWYgKHBpcGVfaWR4ID49IDApCi0J
CQlmcmVlX3BpcGUgPSAmY29udGV4dC0+cmVzX2N0eC5waXBlX2N0eFtwaXBlX2lkeF07Ci0JfQot
I2VuZGlmCi0JaWYgKCFmcmVlX3BpcGUpCi0JCXJldHVybiBmYWxzZTsKKwkJZnJlZV9waXBlID0g
YWNxdWlyZV9mcmVlX3BpcGVfZm9yX2hlYWQoY29udGV4dCwgcG9vbCwgaGVhZF9waXBlKTsKIAot
CS8qIHJldGFpbiBuZXcgc3VyZmFjZXMgKi8KLQlkY19wbGFuZV9zdGF0ZV9yZXRhaW4ocGxhbmVf
c3RhdGUpOwotCWZyZWVfcGlwZS0+cGxhbmVfc3RhdGUgPSBwbGFuZV9zdGF0ZTsKLQotCWlmICho
ZWFkX3BpcGUgIT0gZnJlZV9waXBlKSB7Ci0JCWZyZWVfcGlwZS0+c3RyZWFtX3Jlcy50ZyA9IHRh
aWxfcGlwZS0+c3RyZWFtX3Jlcy50ZzsKLQkJZnJlZV9waXBlLT5zdHJlYW1fcmVzLmFibSA9IHRh
aWxfcGlwZS0+c3RyZWFtX3Jlcy5hYm07Ci0JCWZyZWVfcGlwZS0+c3RyZWFtX3Jlcy5vcHAgPSB0
YWlsX3BpcGUtPnN0cmVhbV9yZXMub3BwOwotCQlmcmVlX3BpcGUtPnN0cmVhbV9yZXMuc3RyZWFt
X2VuYyA9IHRhaWxfcGlwZS0+c3RyZWFtX3Jlcy5zdHJlYW1fZW5jOwotCQlmcmVlX3BpcGUtPnN0
cmVhbV9yZXMuYXVkaW8gPSB0YWlsX3BpcGUtPnN0cmVhbV9yZXMuYXVkaW87Ci0JCWZyZWVfcGlw
ZS0+Y2xvY2tfc291cmNlID0gdGFpbF9waXBlLT5jbG9ja19zb3VyY2U7Ci0JCWZyZWVfcGlwZS0+
dG9wX3BpcGUgPSB0YWlsX3BpcGU7Ci0JCXRhaWxfcGlwZS0+Ym90dG9tX3BpcGUgPSBmcmVlX3Bp
cGU7Ci0JfSBlbHNlIGlmIChmcmVlX3BpcGUtPmJvdHRvbV9waXBlICYmIGZyZWVfcGlwZS0+Ym90
dG9tX3BpcGUtPnBsYW5lX3N0YXRlID09IE5VTEwpIHsKLQkJQVNTRVJUKGZyZWVfcGlwZS0+Ym90
dG9tX3BpcGUtPnN0cmVhbV9yZXMub3BwICE9IGZyZWVfcGlwZS0+c3RyZWFtX3Jlcy5vcHApOwot
CQlmcmVlX3BpcGUtPmJvdHRvbV9waXBlLT5wbGFuZV9zdGF0ZSA9IHBsYW5lX3N0YXRlOwotCX0K
KwkjaWYgZGVmaW5lZChDT05GSUdfRFJNX0FNRF9EQ19EQ04xXzApCisJCWlmICghZnJlZV9waXBl
KSB7CisJCQlpbnQgcGlwZV9pZHggPSBhY3F1aXJlX2ZpcnN0X3NwbGl0X3BpcGUoJmNvbnRleHQt
PnJlc19jdHgsIHBvb2wsIHN0cmVhbSk7CisJCQlpZiAocGlwZV9pZHggPj0gMCkKKwkJCQlmcmVl
X3BpcGUgPSAmY29udGV4dC0+cmVzX2N0eC5waXBlX2N0eFtwaXBlX2lkeF07CisJCX0KKwkjZW5k
aWYKKwkJaWYgKCFmcmVlX3BpcGUpIHsKKwkJCWRjX3BsYW5lX3N0YXRlX3JlbGVhc2UocGxhbmVf
c3RhdGUpOworCQkJcmV0dXJuIGZhbHNlOworCQl9CiAKKwkJZnJlZV9waXBlLT5wbGFuZV9zdGF0
ZSA9IHBsYW5lX3N0YXRlOworCisJCWlmIChoZWFkX3BpcGUgIT0gZnJlZV9waXBlKSB7CisJCQlm
cmVlX3BpcGUtPnN0cmVhbV9yZXMudGcgPSB0YWlsX3BpcGUtPnN0cmVhbV9yZXMudGc7CisJCQlm
cmVlX3BpcGUtPnN0cmVhbV9yZXMuYWJtID0gdGFpbF9waXBlLT5zdHJlYW1fcmVzLmFibTsKKwkJ
CWZyZWVfcGlwZS0+c3RyZWFtX3Jlcy5vcHAgPSB0YWlsX3BpcGUtPnN0cmVhbV9yZXMub3BwOwor
CQkJZnJlZV9waXBlLT5zdHJlYW1fcmVzLnN0cmVhbV9lbmMgPSB0YWlsX3BpcGUtPnN0cmVhbV9y
ZXMuc3RyZWFtX2VuYzsKKwkJCWZyZWVfcGlwZS0+c3RyZWFtX3Jlcy5hdWRpbyA9IHRhaWxfcGlw
ZS0+c3RyZWFtX3Jlcy5hdWRpbzsKKwkJCWZyZWVfcGlwZS0+Y2xvY2tfc291cmNlID0gdGFpbF9w
aXBlLT5jbG9ja19zb3VyY2U7CisJCQlmcmVlX3BpcGUtPnRvcF9waXBlID0gdGFpbF9waXBlOwor
CQkJdGFpbF9waXBlLT5ib3R0b21fcGlwZSA9IGZyZWVfcGlwZTsKKwkJfQorCQloZWFkX3BpcGUg
PSBoZWFkX3BpcGUtPm5leHRfb2RtX3BpcGU7CisJfQogCS8qIGFzc2lnbiBuZXcgc3VyZmFjZXMq
LwogCXN0cmVhbV9zdGF0dXMtPnBsYW5lX3N0YXRlc1tzdHJlYW1fc3RhdHVzLT5wbGFuZV9jb3Vu
dF0gPSBwbGFuZV9zdGF0ZTsKIApAQCAtMTMwMiwzNSArMTI4OSw2IEBAIGJvb2wgZGNfYWRkX3Bs
YW5lX3RvX2NvbnRleHQoCiAJcmV0dXJuIHRydWU7CiB9CiAKLXN0cnVjdCBwaXBlX2N0eCAqZGNf
cmVzX2dldF9vZG1fYm90dG9tX3BpcGUoc3RydWN0IHBpcGVfY3R4ICpwaXBlX2N0eCkKLXsKLQlz
dHJ1Y3QgcGlwZV9jdHggKmJvdHRvbV9waXBlID0gcGlwZV9jdHgtPmJvdHRvbV9waXBlOwotCi0J
LyogT0RNIHNob3VsZCBvbmx5IGJlIHVwZGF0ZWQgb25jZSBwZXIgb3RnICovCi0JaWYgKHBpcGVf
Y3R4LT50b3BfcGlwZSkKLQkJcmV0dXJuIE5VTEw7Ci0KLQl3aGlsZSAoYm90dG9tX3BpcGUpIHsK
LQkJaWYgKGJvdHRvbV9waXBlLT5zdHJlYW1fcmVzLm9wcCAhPSBwaXBlX2N0eC0+c3RyZWFtX3Jl
cy5vcHApCi0JCQlicmVhazsKLQkJYm90dG9tX3BpcGUgPSBib3R0b21fcGlwZS0+Ym90dG9tX3Bp
cGU7Ci0JfQotCi0JcmV0dXJuIGJvdHRvbV9waXBlOwotfQotCi1ib29sIGRjX3Jlc19pc19vZG1f
aGVhZF9waXBlKHN0cnVjdCBwaXBlX2N0eCAqcGlwZV9jdHgpCi17Ci0Jc3RydWN0IHBpcGVfY3R4
ICp0b3BfcGlwZSA9IHBpcGVfY3R4LT50b3BfcGlwZTsKLQotCWlmICghdG9wX3BpcGUpCi0JCXJl
dHVybiBmYWxzZTsKLQlpZiAodG9wX3BpcGUgJiYgdG9wX3BpcGUtPnN0cmVhbV9yZXMub3BwID09
IHBpcGVfY3R4LT5zdHJlYW1fcmVzLm9wcCkKLQkJcmV0dXJuIGZhbHNlOwotCi0JcmV0dXJuIHRy
dWU7Ci19Ci0KIGJvb2wgZGNfcmVtb3ZlX3BsYW5lX2Zyb21fY29udGV4dCgKIAkJY29uc3Qgc3Ry
dWN0IGRjICpkYywKIAkJc3RydWN0IGRjX3N0cmVhbV9zdGF0ZSAqc3RyZWFtLApAQCAtMTM1Nywx
MiArMTMxNSw2IEBAIGJvb2wgZGNfcmVtb3ZlX3BsYW5lX2Zyb21fY29udGV4dCgKIAkJc3RydWN0
IHBpcGVfY3R4ICpwaXBlX2N0eCA9ICZjb250ZXh0LT5yZXNfY3R4LnBpcGVfY3R4W2ldOwogCiAJ
CWlmIChwaXBlX2N0eC0+cGxhbmVfc3RhdGUgPT0gcGxhbmVfc3RhdGUpIHsKLQkJCWlmIChkY19y
ZXNfaXNfb2RtX2hlYWRfcGlwZShwaXBlX2N0eCkpIHsKLQkJCQlwaXBlX2N0eC0+cGxhbmVfc3Rh
dGUgPSBOVUxMOwotCQkJCXBpcGVfY3R4LT5ib3R0b21fcGlwZSA9IE5VTEw7Ci0JCQkJY29udGlu
dWU7Ci0JCQl9Ci0KIAkJCWlmIChwaXBlX2N0eC0+dG9wX3BpcGUpCiAJCQkJcGlwZV9jdHgtPnRv
cF9waXBlLT5ib3R0b21fcGlwZSA9IHBpcGVfY3R4LT5ib3R0b21fcGlwZTsKIApAQCAtMTM3Nywx
MyArMTMyOSwxMCBAQCBib29sIGRjX3JlbW92ZV9wbGFuZV9mcm9tX2NvbnRleHQoCiAJCQkgKiBG
b3IgaGVhZCBwaXBlIGRldGFjaCBzdXJmYWNlcyBmcm9tIHBpcGUgZm9yIHRhaWwKIAkJCSAqIHBp
cGUganVzdCB6ZXJvIGl0IG91dAogCQkJICovCi0JCQlpZiAoIXBpcGVfY3R4LT50b3BfcGlwZSkg
eworCQkJaWYgKCFwaXBlX2N0eC0+dG9wX3BpcGUpCiAJCQkJcGlwZV9jdHgtPnBsYW5lX3N0YXRl
ID0gTlVMTDsKLQkJCQlpZiAoIWRjX3Jlc19nZXRfb2RtX2JvdHRvbV9waXBlKHBpcGVfY3R4KSkK
LQkJCQkJcGlwZV9jdHgtPmJvdHRvbV9waXBlID0gTlVMTDsKLQkJCX0gZWxzZSB7CisJCQllbHNl
CiAJCQkJbWVtc2V0KHBpcGVfY3R4LCAwLCBzaXplb2YoKnBpcGVfY3R4KSk7Ci0JCQl9CiAJCX0K
IAl9CiAKQEAgLTE3NTIsOSArMTcwMSw2IEBAIGVudW0gZGNfc3RhdHVzIGRjX3JlbW92ZV9zdHJl
YW1fZnJvbV9jdHgoCiAJZm9yIChpID0gMDsgaSA8IE1BWF9QSVBFUzsgaSsrKSB7CiAJCWlmIChu
ZXdfY3R4LT5yZXNfY3R4LnBpcGVfY3R4W2ldLnN0cmVhbSA9PSBzdHJlYW0gJiYKIAkJCQkhbmV3
X2N0eC0+cmVzX2N0eC5waXBlX2N0eFtpXS50b3BfcGlwZSkgewotCQkJc3RydWN0IHBpcGVfY3R4
ICpvZG1fcGlwZSA9Ci0JCQkJCWRjX3Jlc19nZXRfb2RtX2JvdHRvbV9waXBlKCZuZXdfY3R4LT5y
ZXNfY3R4LnBpcGVfY3R4W2ldKTsKLQogCQkJZGVsX3BpcGUgPSAmbmV3X2N0eC0+cmVzX2N0eC5w
aXBlX2N0eFtpXTsKIAogCQkJQVNTRVJUKGRlbF9waXBlLT5zdHJlYW1fcmVzLnN0cmVhbV9lbmMp
OwpAQCAtMTc3OSw4ICsxNzI1LDYgQEAgZW51bSBkY19zdGF0dXMgZGNfcmVtb3ZlX3N0cmVhbV9m
cm9tX2N0eCgKIAkJCQlkYy0+cmVzX3Bvb2wtPmZ1bmNzLT5yZW1vdmVfc3RyZWFtX2Zyb21fY3R4
KGRjLCBuZXdfY3R4LCBzdHJlYW0pOwogCiAJCQltZW1zZXQoZGVsX3BpcGUsIDAsIHNpemVvZigq
ZGVsX3BpcGUpKTsKLQkJCWlmIChvZG1fcGlwZSkKLQkJCQltZW1zZXQob2RtX3BpcGUsIDAsIHNp
emVvZigqb2RtX3BpcGUpKTsKIAogCQkJYnJlYWs7CiAJCX0KQEAgLTI0OTQsNiArMjQzOCwxMiBA
QCB2b2lkIGRjX3Jlc291cmNlX3N0YXRlX2NvcHlfY29uc3RydWN0KAogCiAJCWlmIChjdXJfcGlw
ZS0+Ym90dG9tX3BpcGUpCiAJCQljdXJfcGlwZS0+Ym90dG9tX3BpcGUgPSAmZHN0X2N0eC0+cmVz
X2N0eC5waXBlX2N0eFtjdXJfcGlwZS0+Ym90dG9tX3BpcGUtPnBpcGVfaWR4XTsKKworCQlpZiAo
Y3VyX3BpcGUtPm5leHRfb2RtX3BpcGUpCisJCQljdXJfcGlwZS0+bmV4dF9vZG1fcGlwZSA9ICAm
ZHN0X2N0eC0+cmVzX2N0eC5waXBlX2N0eFtjdXJfcGlwZS0+bmV4dF9vZG1fcGlwZS0+cGlwZV9p
ZHhdOworCisJCWlmIChjdXJfcGlwZS0+cHJldl9vZG1fcGlwZSkKKwkJCWN1cl9waXBlLT5wcmV2
X29kbV9waXBlID0gJmRzdF9jdHgtPnJlc19jdHgucGlwZV9jdHhbY3VyX3BpcGUtPnByZXZfb2Rt
X3BpcGUtPnBpcGVfaWR4XTsKIAl9CiAKIAlmb3IgKGkgPSAwOyBpIDwgZHN0X2N0eC0+c3RyZWFt
X2NvdW50OyBpKyspIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9k
Yy9kY2UxMTAvZGNlMTEwX2h3X3NlcXVlbmNlci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2RjL2RjZTExMC9kY2UxMTBfaHdfc2VxdWVuY2VyLmMKaW5kZXggNWEwNDZlNWJjNzU2Li4y
NjkzNDA0Y2FiMWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9k
Y2UxMTAvZGNlMTEwX2h3X3NlcXVlbmNlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlz
cGxheS9kYy9kY2UxMTAvZGNlMTEwX2h3X3NlcXVlbmNlci5jCkBAIC0xMzM4LDcgKzEzMzgsNyBA
QCBzdGF0aWMgZW51bSBkY19zdGF0dXMgYXBwbHlfc2luZ2xlX2NvbnRyb2xsZXJfY3R4X3RvX2h3
KAogCXN0cnVjdCBkcnJfcGFyYW1zIHBhcmFtcyA9IHswfTsKIAl1bnNpZ25lZCBpbnQgZXZlbnRf
dHJpZ2dlcnMgPSAwOwogI2lmIGRlZmluZWQoQ09ORklHX0RSTV9BTURfRENfRENOMl8wKQotCXN0
cnVjdCBwaXBlX2N0eCAqb2RtX3BpcGUgPSBkY19yZXNfZ2V0X29kbV9ib3R0b21fcGlwZShwaXBl
X2N0eCk7CisJc3RydWN0IHBpcGVfY3R4ICpvZG1fcGlwZSA9IHBpcGVfY3R4LT5uZXh0X29kbV9w
aXBlOwogI2VuZGlmCiAKIAlpZiAoZGMtPmh3c3MuZGlzYWJsZV9zdHJlYW1fZ2F0aW5nKSB7CkBA
IC0xNDA2LDcgKzE0MDYsNyBAQCBzdGF0aWMgZW51bSBkY19zdGF0dXMgYXBwbHlfc2luZ2xlX2Nv
bnRyb2xsZXJfY3R4X3RvX2h3KAogCQkmc3RyZWFtLT5iaXRfZGVwdGhfcGFyYW1zLAogCQkmc3Ry
ZWFtLT5jbGFtcGluZyk7CiAjaWYgZGVmaW5lZChDT05GSUdfRFJNX0FNRF9EQ19EQ04yXzApCi0J
aWYgKG9kbV9waXBlKSB7CisJd2hpbGUgKG9kbV9waXBlKSB7CiAJCW9kbV9waXBlLT5zdHJlYW1f
cmVzLm9wcC0+ZnVuY3MtPm9wcF9zZXRfZHluX2V4cGFuc2lvbigKIAkJCQlvZG1fcGlwZS0+c3Ry
ZWFtX3Jlcy5vcHAsCiAJCQkJQ09MT1JfU1BBQ0VfWUNCQ1I2MDEsCkBAIC0xNDE3LDYgKzE0MTcs
NyBAQCBzdGF0aWMgZW51bSBkY19zdGF0dXMgYXBwbHlfc2luZ2xlX2NvbnRyb2xsZXJfY3R4X3Rv
X2h3KAogCQkJCW9kbV9waXBlLT5zdHJlYW1fcmVzLm9wcCwKIAkJCQkmc3RyZWFtLT5iaXRfZGVw
dGhfcGFyYW1zLAogCQkJCSZzdHJlYW0tPmNsYW1waW5nKTsKKwkJb2RtX3BpcGUgPSBvZG1fcGlw
ZS0+bmV4dF9vZG1fcGlwZTsKIAl9CiAjZW5kaWYKIApAQCAtMjA3Niw3ICsyMDc3LDcgQEAgZW51
bSBkY19zdGF0dXMgZGNlMTEwX2FwcGx5X2N0eF90b19odygKIAkJaWYgKHBpcGVfY3R4X29sZC0+
c3RyZWFtICYmICFwaXBlX25lZWRfcmVwcm9ncmFtKHBpcGVfY3R4X29sZCwgcGlwZV9jdHgpKQog
CQkJY29udGludWU7CiAKLQkJaWYgKHBpcGVfY3R4LT50b3BfcGlwZSkKKwkJaWYgKHBpcGVfY3R4
LT50b3BfcGlwZSB8fCBwaXBlX2N0eC0+cHJldl9vZG1fcGlwZSkKIAkJCWNvbnRpbnVlOwogCiAJ
CXN0YXR1cyA9IGFwcGx5X3NpbmdsZV9jb250cm9sbGVyX2N0eF90b19odygKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24xMC9kY24xMF9od19zZXF1ZW5jZXIu
YyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24xMC9kY24xMF9od19zZXF1ZW5j
ZXIuYwppbmRleCA5ZmUyZmZmNjdkYzUuLjhiZGRhNjRiMDUyNSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjEwL2RjbjEwX2h3X3NlcXVlbmNlci5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24xMC9kY24xMF9od19zZXF1ZW5jZXIu
YwpAQCAtMjUzNiw3ICsyNTM2LDcgQEAgc3RydWN0IHBpcGVfY3R4ICpmaW5kX3RvcF9waXBlX2Zv
cl9zdHJlYW0oCiAJCWlmIChwaXBlX2N0eC0+c3RyZWFtICE9IHN0cmVhbSkKIAkJCWNvbnRpbnVl
OwogCi0JCWlmICghcGlwZV9jdHgtPnRvcF9waXBlKQorCQlpZiAoIXBpcGVfY3R4LT50b3BfcGlw
ZSAmJiAhcGlwZV9jdHgtPnByZXZfb2RtX3BpcGUpCiAJCQlyZXR1cm4gcGlwZV9jdHg7CiAJfQog
CXJldHVybiBOVUxMOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2Rj
L2RjbjIwL2RjbjIwX2h3c2VxLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNu
MjAvZGNuMjBfaHdzZXEuYwppbmRleCBmYThhNzNmNmM4ZTMuLjAzM2E2YWM2OGVjZiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX2h3c2VxLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX2h3c2VxLmMK
QEAgLTUyOSwxMSArNTI5LDkgQEAgZW51bSBkY19zdGF0dXMgZGNuMjBfZW5hYmxlX3N0cmVhbV90
aW1pbmcoCiAJc3RydWN0IGRjX3N0cmVhbV9zdGF0ZSAqc3RyZWFtID0gcGlwZV9jdHgtPnN0cmVh
bTsKIAlzdHJ1Y3QgZHJyX3BhcmFtcyBwYXJhbXMgPSB7MH07CiAJdW5zaWduZWQgaW50IGV2ZW50
X3RyaWdnZXJzID0gMDsKLQotCi0jaWYgZGVmaW5lZChDT05GSUdfRFJNX0FNRF9EQ19EQ04yXzAp
Ci0Jc3RydWN0IHBpcGVfY3R4ICpvZG1fcGlwZSA9IGRjX3Jlc19nZXRfb2RtX2JvdHRvbV9waXBl
KHBpcGVfY3R4KTsKLSNlbmRpZgorCXN0cnVjdCBwaXBlX2N0eCAqb2RtX3BpcGU7CisJaW50IG9w
cF9jbnQgPSAxOworCWludCBvcHBfaW5zdFtNQVhfUElQRVNdID0geyBwaXBlX2N0eC0+c3RyZWFt
X3Jlcy5vcHAtPmluc3QgfTsKIAogCS8qIGJ5IHVwcGVyIGNhbGxlciBsb29wLCBwaXBlMCBpcyBw
YXJlbnQgcGlwZSBhbmQgYmUgY2FsbGVkIGZpcnN0LgogCSAqIGJhY2sgZW5kIGlzIHNldCB1cCBi
eSBmb3IgcGlwZTAuIE90aGVyIGNoaWxkcmVuIHBpcGUgc2hhcmUgYmFjayBlbmQKQEAgLTU0NCwx
NCArNTQyLDE3IEBAIGVudW0gZGNfc3RhdHVzIGRjbjIwX2VuYWJsZV9zdHJlYW1fdGltaW5nKAog
CiAJLyogVE9ETyBjaGVjayBpZiB0aW1pbmdfY2hhbmdlZCwgZGlzYWJsZSBzdHJlYW0gaWYgdGlt
aW5nIGNoYW5nZWQgKi8KIAotCWlmIChvZG1fcGlwZSkgewotCQlpbnQgb3BwX2luc3RbMl0gPSB7
IHBpcGVfY3R4LT5zdHJlYW1fcmVzLm9wcC0+aW5zdCwgb2RtX3BpcGUtPnN0cmVhbV9yZXMub3Bw
LT5pbnN0IH07CisJZm9yIChvZG1fcGlwZSA9IHBpcGVfY3R4LT5uZXh0X29kbV9waXBlOyBvZG1f
cGlwZTsgb2RtX3BpcGUgPSBvZG1fcGlwZS0+bmV4dF9vZG1fcGlwZSkgeworCQlvcHBfaW5zdFtv
cHBfY250XSA9IG9kbV9waXBlLT5zdHJlYW1fcmVzLm9wcC0+aW5zdDsKKwkJb3BwX2NudCsrOwor
CX0KIAorCWlmIChvcHBfY250ID4gMSkKIAkJcGlwZV9jdHgtPnN0cmVhbV9yZXMudGctPmZ1bmNz
LT5zZXRfb2RtX2NvbWJpbmUoCiAJCQkJcGlwZV9jdHgtPnN0cmVhbV9yZXMudGcsCi0JCQkJb3Bw
X2luc3QsIDIsCisJCQkJb3BwX2luc3QsIG9wcF9jbnQsCiAJCQkJJnBpcGVfY3R4LT5zdHJlYW0t
PnRpbWluZyk7Ci0JfQorCiAJLyogSFcgcHJvZ3JhbSBndWlkZSBhc3N1bWUgZGlzcGxheSBhbHJl
YWR5IGRpc2FibGUKIAkgKiBieSB1bnBsdWcgc2VxdWVuY2UuIE9URyBhc3N1bWUgc3RvcC4KIAkg
Ki8KQEAgLTU3OSw3ICs1ODAsNyBAQCBlbnVtIGRjX3N0YXR1cyBkY24yMF9lbmFibGVfc3RyZWFt
X3RpbWluZygKIAkJcGlwZV9jdHgtPnN0cmVhbV9yZXMudGctPmZ1bmNzLT5zZXR1cF9nbG9iYWxf
bG9jaygKIAkJCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy50Zyk7CiAKLQlpZiAob2RtX3BpcGUpCisJ
Zm9yIChvZG1fcGlwZSA9IHBpcGVfY3R4LT5uZXh0X29kbV9waXBlOyBvZG1fcGlwZTsgb2RtX3Bp
cGUgPSBvZG1fcGlwZS0+bmV4dF9vZG1fcGlwZSkKIAkJb2RtX3BpcGUtPnN0cmVhbV9yZXMub3Bw
LT5mdW5jcy0+b3BwX3BpcGVfY2xvY2tfY29udHJvbCgKIAkJCQlvZG1fcGlwZS0+c3RyZWFtX3Jl
cy5vcHAsCiAJCQkJdHJ1ZSk7CkBAIC02NjUsNyArNjY2LDcgQEAgYm9vbCBkY24yMF9zZXRfb3V0
cHV0X3RyYW5zZmVyX2Z1bmMoc3RydWN0IHBpcGVfY3R4ICpwaXBlX2N0eCwKIAkgKi8KIAlpZiAo
bXBjLT5mdW5jcy0+cG93ZXJfb25fbXBjX21lbV9wd3IpCiAJCW1wYy0+ZnVuY3MtPnBvd2VyX29u
X21wY19tZW1fcHdyKG1wYywgbXBjY19pZCwgdHJ1ZSk7Ci0JaWYgKChwaXBlX2N0eC0+dG9wX3Bp
cGUgPT0gTlVMTCB8fCBkY19yZXNfaXNfb2RtX2hlYWRfcGlwZShwaXBlX2N0eCkpCisJaWYgKHBp
cGVfY3R4LT50b3BfcGlwZSA9PSBOVUxMCiAJCQkmJiBtcGMtPmZ1bmNzLT5zZXRfb3V0cHV0X2dh
bW1hICYmIHN0cmVhbS0+b3V0X3RyYW5zZmVyX2Z1bmMpIHsKIAkJaWYgKHN0cmVhbS0+b3V0X3Ry
YW5zZmVyX2Z1bmMtPnR5cGUgPT0gVEZfVFlQRV9IV1BXTCkKIAkJCXBhcmFtcyA9ICZzdHJlYW0t
Pm91dF90cmFuc2Zlcl9mdW5jLT5wd2w7CkBAIC04MjcsMTcgKzgyOCwyMSBAQCBib29sIGRjbjIw
X3NldF9pbnB1dF90cmFuc2Zlcl9mdW5jKHN0cnVjdCBwaXBlX2N0eCAqcGlwZV9jdHgsCiAKIHN0
YXRpYyB2b2lkIGRjbjIwX3VwZGF0ZV9vZG0oc3RydWN0IGRjICpkYywgc3RydWN0IGRjX3N0YXRl
ICpjb250ZXh0LCBzdHJ1Y3QgcGlwZV9jdHggKnBpcGVfY3R4KQogewotCXN0cnVjdCBwaXBlX2N0
eCAqY29tYmluZV9waXBlID0gZGNfcmVzX2dldF9vZG1fYm90dG9tX3BpcGUocGlwZV9jdHgpOwor
CXN0cnVjdCBwaXBlX2N0eCAqb2RtX3BpcGU7CisJaW50IG9wcF9jbnQgPSAxOworCWludCBvcHBf
aW5zdFtNQVhfUElQRVNdID0geyBwaXBlX2N0eC0+c3RyZWFtX3Jlcy5vcHAtPmluc3QgfTsKIAot
CWlmIChjb21iaW5lX3BpcGUpIHsKLQkJaW50IG9wcF9pbnN0WzJdID0geyBwaXBlX2N0eC0+c3Ry
ZWFtX3Jlcy5vcHAtPmluc3QsCi0JCQkJY29tYmluZV9waXBlLT5zdHJlYW1fcmVzLm9wcC0+aW5z
dCB9OworCWZvciAob2RtX3BpcGUgPSBwaXBlX2N0eC0+bmV4dF9vZG1fcGlwZTsgb2RtX3BpcGU7
IG9kbV9waXBlID0gb2RtX3BpcGUtPm5leHRfb2RtX3BpcGUpIHsKKwkJb3BwX2luc3Rbb3BwX2Nu
dF0gPSBvZG1fcGlwZS0+c3RyZWFtX3Jlcy5vcHAtPmluc3Q7CisJCW9wcF9jbnQrKzsKKwl9CiAK
KwlpZiAob3BwX2NudCA+IDEpCiAJCXBpcGVfY3R4LT5zdHJlYW1fcmVzLnRnLT5mdW5jcy0+c2V0
X29kbV9jb21iaW5lKAogCQkJCXBpcGVfY3R4LT5zdHJlYW1fcmVzLnRnLAotCQkJCW9wcF9pbnN0
LCAyLAorCQkJCW9wcF9pbnN0LCBvcHBfY250LAogCQkJCSZwaXBlX2N0eC0+c3RyZWFtLT50aW1p
bmcpOwotCX0gZWxzZQorCWVsc2UKIAkJcGlwZV9jdHgtPnN0cmVhbV9yZXMudGctPmZ1bmNzLT5z
ZXRfb2RtX2J5cGFzcygKIAkJCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy50ZywgJnBpcGVfY3R4LT5z
dHJlYW0tPnRpbWluZyk7CiB9CkBAIC04NTIsNyArODU3LDggQEAgdm9pZCBkY24yMF9ibGFua19w
aXhlbF9kYXRhKAogCXN0cnVjdCBkY19zdHJlYW1fc3RhdGUgKnN0cmVhbSA9IHBpcGVfY3R4LT5z
dHJlYW07CiAJZW51bSBkY19jb2xvcl9zcGFjZSBjb2xvcl9zcGFjZSA9IHN0cmVhbS0+b3V0cHV0
X2NvbG9yX3NwYWNlOwogCWVudW0gY29udHJvbGxlcl9kcF90ZXN0X3BhdHRlcm4gdGVzdF9wYXR0
ZXJuID0gQ09OVFJPTExFUl9EUF9URVNUX1BBVFRFUk5fU09MSURfQ09MT1I7Ci0Jc3RydWN0IHBp
cGVfY3R4ICpib3Rfb2RtX3BpcGUgPSBkY19yZXNfZ2V0X29kbV9ib3R0b21fcGlwZShwaXBlX2N0
eCk7CisJc3RydWN0IHBpcGVfY3R4ICpvZG1fcGlwZTsKKwlpbnQgb2RtX2NudCA9IDE7CiAKIAlp
bnQgd2lkdGggPSBzdHJlYW0tPnRpbWluZy5oX2FkZHJlc3NhYmxlICsgc3RyZWFtLT50aW1pbmcu
aF9ib3JkZXJfbGVmdCArIHN0cmVhbS0+dGltaW5nLmhfYm9yZGVyX3JpZ2h0OwogCWludCBoZWln
aHQgPSBzdHJlYW0tPnRpbWluZy52X2FkZHJlc3NhYmxlICsgc3RyZWFtLT50aW1pbmcudl9ib3Jk
ZXJfYm90dG9tICsgc3RyZWFtLT50aW1pbmcudl9ib3JkZXJfdG9wOwpAQCAtODYwLDggKzg2Niwx
MCBAQCB2b2lkIGRjbjIwX2JsYW5rX3BpeGVsX2RhdGEoCiAJLyogZ2V0IG9wcCBkcGcgYmxhbmsg
Y29sb3IgKi8KIAljb2xvcl9zcGFjZV90b19ibGFja19jb2xvcihkYywgY29sb3Jfc3BhY2UsICZi
bGFja19jb2xvcik7CiAKLQlpZiAoYm90X29kbV9waXBlKQotCQl3aWR0aCA9IHdpZHRoIC8gMjsK
Kwlmb3IgKG9kbV9waXBlID0gcGlwZV9jdHgtPm5leHRfb2RtX3BpcGU7IG9kbV9waXBlOyBvZG1f
cGlwZSA9IG9kbV9waXBlLT5uZXh0X29kbV9waXBlKQorCQlvZG1fY250Kys7CisKKwl3aWR0aCA9
IHdpZHRoIC8gb2RtX2NudDsKIAogCWlmIChibGFuaykgewogCQlpZiAoc3RyZWFtX3Jlcy0+YWJt
KQpAQCAtODgxLDkgKzg4OSw5IEBAIHZvaWQgZGNuMjBfYmxhbmtfcGl4ZWxfZGF0YSgKIAkJCXdp
ZHRoLAogCQkJaGVpZ2h0KTsKIAotCWlmIChib3Rfb2RtX3BpcGUpIHsKLQkJYm90X29kbV9waXBl
LT5zdHJlYW1fcmVzLm9wcC0+ZnVuY3MtPm9wcF9zZXRfZGlzcF9wYXR0ZXJuX2dlbmVyYXRvcigK
LQkJCQlib3Rfb2RtX3BpcGUtPnN0cmVhbV9yZXMub3BwLAorCWZvciAob2RtX3BpcGUgPSBwaXBl
X2N0eC0+bmV4dF9vZG1fcGlwZTsgb2RtX3BpcGU7IG9kbV9waXBlID0gb2RtX3BpcGUtPm5leHRf
b2RtX3BpcGUpIHsKKwkJb2RtX3BpcGUtPnN0cmVhbV9yZXMub3BwLT5mdW5jcy0+b3BwX3NldF9k
aXNwX3BhdHRlcm5fZ2VuZXJhdG9yKAorCQkJCW9kbV9waXBlLT5zdHJlYW1fcmVzLm9wcCwKIAkJ
CQlkYy0+ZGVidWcudmlzdWFsX2NvbmZpcm0gIT0gVklTVUFMX0NPTkZJUk1fRElTQUJMRSA/CiAJ
CQkJCQlDT05UUk9MTEVSX0RQX1RFU1RfUEFUVEVSTl9DT0xPUlJBTVAgOiB0ZXN0X3BhdHRlcm4s
CiAJCQkJc3RyZWFtLT50aW1pbmcuZGlzcGxheV9jb2xvcl9kZXB0aCwKQEAgLTEwMjUsNyArMTAz
Myw3IEBAIHN0YXRpYyB2b2lkIGRjbjIwX3Byb2dyYW1fYWxsX3BpcGVfaW5fdHJlZSgKIAkJc3Ry
dWN0IHBpcGVfY3R4ICpwaXBlX2N0eCwKIAkJc3RydWN0IGRjX3N0YXRlICpjb250ZXh0KQogewot
CWlmIChwaXBlX2N0eC0+dG9wX3BpcGUgPT0gTlVMTCkgeworCWlmIChwaXBlX2N0eC0+dG9wX3Bp
cGUgPT0gTlVMTCAmJiAhcGlwZV9jdHgtPnByZXZfb2RtX3BpcGUpIHsKIAkJYm9vbCBibGFuayA9
ICFpc19waXBlX3RyZWVfdmlzaWJsZShwaXBlX2N0eCk7CiAKIAkJcGlwZV9jdHgtPnN0cmVhbV9y
ZXMudGctPmZ1bmNzLT5wcm9ncmFtX2dsb2JhbF9zeW5jKApAQCAtMTMxNiw4ICsxMzI0LDggQEAg
Ym9vbCBkY24yMF91cGRhdGVfYmFuZHdpZHRoKAogCiAJCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy50
Zy0+ZnVuY3MtPnNldF92dGdfcGFyYW1zKAogCQkJCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy50Zywg
JnBpcGVfY3R4LT5zdHJlYW0tPnRpbWluZyk7Ci0KLQkJCWRjLT5od3NzLmJsYW5rX3BpeGVsX2Rh
dGEoZGMsIHBpcGVfY3R4LCBibGFuayk7CisJCQlpZiAocGlwZV9jdHgtPnByZXZfb2RtX3BpcGUg
PT0gTlVMTCkKKwkJCQlkYy0+aHdzcy5ibGFua19waXhlbF9kYXRhKGRjLCBwaXBlX2N0eCwgYmxh
bmspOwogCQl9CiAKIAkJcGlwZV9jdHgtPnBsYW5lX3Jlcy5odWJwLT5mdW5jcy0+aHVicF9zZXR1
cCgKQEAgLTE0MDcsMTIgKzE0MTUsMTUgQEAgc3RhdGljIHZvaWQgZGNuMjBfZGlzYWJsZV9zdHJl
YW1fZ2F0aW5nKHN0cnVjdCBkYyAqZGMsIHN0cnVjdCBwaXBlX2N0eCAqcGlwZV9jdHgKIHsKICNp
ZmRlZiBDT05GSUdfRFJNX0FNRF9EQ19EU0NfU1VQUE9SVAogCXN0cnVjdCBkY2VfaHdzZXEgKmh3
cyA9IGRjLT5od3NlcTsKLQlzdHJ1Y3QgcGlwZV9jdHggKmJvdF9vZG1fcGlwZSA9IGRjX3Jlc19n
ZXRfb2RtX2JvdHRvbV9waXBlKHBpcGVfY3R4KTsKIAogCWlmIChwaXBlX2N0eC0+c3RyZWFtX3Jl
cy5kc2MpIHsKKwkJc3RydWN0IHBpcGVfY3R4ICpvZG1fcGlwZSA9IHBpcGVfY3R4LT5uZXh0X29k
bV9waXBlOworCiAJCWRjbjIwX2RzY19wZ19jb250cm9sKGh3cywgcGlwZV9jdHgtPnN0cmVhbV9y
ZXMuZHNjLT5pbnN0LCB0cnVlKTsKLQkJaWYgKGJvdF9vZG1fcGlwZSkKLQkJCWRjbjIwX2RzY19w
Z19jb250cm9sKGh3cywgYm90X29kbV9waXBlLT5zdHJlYW1fcmVzLmRzYy0+aW5zdCwgdHJ1ZSk7
CisJCXdoaWxlIChvZG1fcGlwZSkgeworCQkJZGNuMjBfZHNjX3BnX2NvbnRyb2woaHdzLCBvZG1f
cGlwZS0+c3RyZWFtX3Jlcy5kc2MtPmluc3QsIHRydWUpOworCQkJb2RtX3BpcGUgPSBvZG1fcGlw
ZS0+bmV4dF9vZG1fcGlwZTsKKwkJfQogCX0KICNlbmRpZgogfQpAQCAtMTQyMSwxMiArMTQzMiwx
NSBAQCBzdGF0aWMgdm9pZCBkY24yMF9lbmFibGVfc3RyZWFtX2dhdGluZyhzdHJ1Y3QgZGMgKmRj
LCBzdHJ1Y3QgcGlwZV9jdHggKnBpcGVfY3R4KQogewogI2lmZGVmIENPTkZJR19EUk1fQU1EX0RD
X0RTQ19TVVBQT1JUCiAJc3RydWN0IGRjZV9od3NlcSAqaHdzID0gZGMtPmh3c2VxOwotCXN0cnVj
dCBwaXBlX2N0eCAqYm90X29kbV9waXBlID0gZGNfcmVzX2dldF9vZG1fYm90dG9tX3BpcGUocGlw
ZV9jdHgpOwogCiAJaWYgKHBpcGVfY3R4LT5zdHJlYW1fcmVzLmRzYykgeworCQlzdHJ1Y3QgcGlw
ZV9jdHggKm9kbV9waXBlID0gcGlwZV9jdHgtPm5leHRfb2RtX3BpcGU7CisKIAkJZGNuMjBfZHNj
X3BnX2NvbnRyb2woaHdzLCBwaXBlX2N0eC0+c3RyZWFtX3Jlcy5kc2MtPmluc3QsIGZhbHNlKTsK
LQkJaWYgKGJvdF9vZG1fcGlwZSkKLQkJCWRjbjIwX2RzY19wZ19jb250cm9sKGh3cywgYm90X29k
bV9waXBlLT5zdHJlYW1fcmVzLmRzYy0+aW5zdCwgZmFsc2UpOworCQl3aGlsZSAob2RtX3BpcGUp
IHsKKwkJCWRjbjIwX2RzY19wZ19jb250cm9sKGh3cywgb2RtX3BpcGUtPnN0cmVhbV9yZXMuZHNj
LT5pbnN0LCBmYWxzZSk7CisJCQlvZG1fcGlwZSA9IG9kbV9waXBlLT5uZXh0X29kbV9waXBlOwor
CQl9CiAJfQogI2VuZGlmCiB9CkBAIC0xNTU2LDE4ICsxNTcwLDIyIEBAIHZvaWQgZGNuMjBfdW5i
bGFua19zdHJlYW0oc3RydWN0IHBpcGVfY3R4ICpwaXBlX2N0eCwKIAlzdHJ1Y3QgZW5jb2Rlcl91
bmJsYW5rX3BhcmFtIHBhcmFtcyA9IHsgeyAwIH0gfTsKIAlzdHJ1Y3QgZGNfc3RyZWFtX3N0YXRl
ICpzdHJlYW0gPSBwaXBlX2N0eC0+c3RyZWFtOwogCXN0cnVjdCBkY19saW5rICpsaW5rID0gc3Ry
ZWFtLT5saW5rOwotCXBhcmFtcy5vZG0gPSBkY19yZXNfZ2V0X29kbV9ib3R0b21fcGlwZShwaXBl
X2N0eCk7CisJc3RydWN0IHBpcGVfY3R4ICpvZG1fcGlwZTsKIAorCXBhcmFtcy5vcHBfY250ID0g
MTsKKwlmb3IgKG9kbV9waXBlID0gcGlwZV9jdHgtPm5leHRfb2RtX3BpcGU7IG9kbV9waXBlOyBv
ZG1fcGlwZSA9IG9kbV9waXBlLT5uZXh0X29kbV9waXBlKSB7CisJCXBhcmFtcy5vcHBfY250Kys7
CisJfQogCS8qIG9ubHkgMyBpdGVtcyBiZWxvdyBhcmUgdXNlZCBieSB1bmJsYW5rICovCiAJcGFy
YW1zLnRpbWluZyA9IHBpcGVfY3R4LT5zdHJlYW0tPnRpbWluZzsKIAogCXBhcmFtcy5saW5rX3Nl
dHRpbmdzLmxpbmtfcmF0ZSA9IGxpbmtfc2V0dGluZ3MtPmxpbmtfcmF0ZTsKIAogCWlmIChkY19p
c19kcF9zaWduYWwocGlwZV9jdHgtPnN0cmVhbS0+c2lnbmFsKSkgewotCQlpZiAob3B0YzFfaXNf
dHdvX3BpeGVsc19wZXJfY29udGFpbnRlcigmc3RyZWFtLT50aW1pbmcpIHx8IHBhcmFtcy5vZG0p
CisJCWlmIChvcHRjMV9pc190d29fcGl4ZWxzX3Blcl9jb250YWludGVyKCZzdHJlYW0tPnRpbWlu
ZykgfHwgcGFyYW1zLm9wcF9jbnQpCiAJCQlwYXJhbXMudGltaW5nLnBpeF9jbGtfMTAwaHogLz0g
MjsKIAkJcGlwZV9jdHgtPnN0cmVhbV9yZXMuc3RyZWFtX2VuYy0+ZnVuY3MtPmRwX3NldF9vZG1f
Y29tYmluZSgKLQkJCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy5zdHJlYW1fZW5jLCBwYXJhbXMub2Rt
KTsKKwkJCQlwaXBlX2N0eC0+c3RyZWFtX3Jlcy5zdHJlYW1fZW5jLCBwYXJhbXMub3BwX2NudCk7
CiAJCXBpcGVfY3R4LT5zdHJlYW1fcmVzLnN0cmVhbV9lbmMtPmZ1bmNzLT5kcF91bmJsYW5rKHBp
cGVfY3R4LT5zdHJlYW1fcmVzLnN0cmVhbV9lbmMsICZwYXJhbXMpOwogCX0KIApAQCAtMTY1OCw3
ICsxNjc2LDcgQEAgc3RhdGljIHZvaWQgZGNuMjBfcmVzZXRfaHdfY3R4X3dyYXAoCiAJCWlmICgh
cGlwZV9jdHhfb2xkLT5zdHJlYW0pCiAJCQljb250aW51ZTsKIAotCQlpZiAocGlwZV9jdHhfb2xk
LT50b3BfcGlwZSkKKwkJaWYgKHBpcGVfY3R4X29sZC0+dG9wX3BpcGUgfHwgcGlwZV9jdHhfb2xk
LT5wcmV2X29kbV9waXBlKQogCQkJY29udGludWU7CiAKIAkJaWYgKCFwaXBlX2N0eC0+c3RyZWFt
IHx8CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNu
MjBfcmVzb3VyY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24y
MF9yZXNvdXJjZS5jCmluZGV4IGM1OWYzMWRjZGMwZC4uYWExMzQyY2NmOGI0IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfcmVzb3VyY2UuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfcmVzb3VyY2Uu
YwpAQCAtMTMxNyw3ICsxMzE3LDExIEBAIHN0YXRpYyB2b2lkIGdldF9waXhlbF9jbG9ja19wYXJh
bWV0ZXJzKAogCXN0cnVjdCBwaXhlbF9jbGtfcGFyYW1zICpwaXhlbF9jbGtfcGFyYW1zKQogewog
CWNvbnN0IHN0cnVjdCBkY19zdHJlYW1fc3RhdGUgKnN0cmVhbSA9IHBpcGVfY3R4LT5zdHJlYW07
Ci0JYm9vbCBvZG1fY29tYmluZSA9IGRjX3Jlc19nZXRfb2RtX2JvdHRvbV9waXBlKHBpcGVfY3R4
KSAhPSBOVUxMOworCXN0cnVjdCBwaXBlX2N0eCAqb2RtX3BpcGU7CisJaW50IG9wcF9jbnQgPSAx
OworCisJZm9yIChvZG1fcGlwZSA9IHBpcGVfY3R4LT5uZXh0X29kbV9waXBlOyBvZG1fcGlwZTsg
b2RtX3BpcGUgPSBvZG1fcGlwZS0+bmV4dF9vZG1fcGlwZSkKKwkJb3BwX2NudCsrOwogCiAJcGl4
ZWxfY2xrX3BhcmFtcy0+cmVxdWVzdGVkX3BpeF9jbGtfMTAwaHogPSBzdHJlYW0tPnRpbWluZy5w
aXhfY2xrXzEwMGh6OwogCXBpeGVsX2Nsa19wYXJhbXMtPmVuY29kZXJfb2JqZWN0X2lkID0gc3Ry
ZWFtLT5saW5rLT5saW5rX2VuYy0+aWQ7CkBAIC0xMzM1LDcgKzEzMzksOSBAQCBzdGF0aWMgdm9p
ZCBnZXRfcGl4ZWxfY2xvY2tfcGFyYW1ldGVycygKIAlpZiAoc3RyZWFtLT50aW1pbmcucGl4ZWxf
ZW5jb2RpbmcgPT0gUElYRUxfRU5DT0RJTkdfWUNCQ1I0MjIpCiAJCXBpeGVsX2Nsa19wYXJhbXMt
PmNvbG9yX2RlcHRoID0gQ09MT1JfREVQVEhfODg4OwogCi0JaWYgKG9wdGMxX2lzX3R3b19waXhl
bHNfcGVyX2NvbnRhaW50ZXIoJnN0cmVhbS0+dGltaW5nKSB8fCBvZG1fY29tYmluZSkKKwlpZiAo
b3BwX2NudCA9PSA0KQorCQlwaXhlbF9jbGtfcGFyYW1zLT5yZXF1ZXN0ZWRfcGl4X2Nsa18xMDBo
eiAvPSA0OworCWVsc2UgaWYgKG9wdGMxX2lzX3R3b19waXhlbHNfcGVyX2NvbnRhaW50ZXIoJnN0
cmVhbS0+dGltaW5nKSB8fCBvcHBfY250ID09IDIpCiAJCXBpeGVsX2Nsa19wYXJhbXMtPnJlcXVl
c3RlZF9waXhfY2xrXzEwMGh6IC89IDI7CiAKIAlpZiAoc3RyZWFtLT50aW1pbmcudGltaW5nXzNk
X2Zvcm1hdCA9PSBUSU1JTkdfM0RfRk9STUFUX0hXX0ZSQU1FX1BBQ0tJTkcpCkBAIC0xNDc5LDIy
ICsxNDg1LDE2IEBAIHN0YXRpYyBlbnVtIGRjX3N0YXR1cyByZW1vdmVfZHNjX2Zyb21fc3RyZWFt
X3Jlc291cmNlKHN0cnVjdCBkYyAqZGMsCiAJZm9yIChpID0gMDsgaSA8IE1BWF9QSVBFUzsgaSsr
KSB7CiAJCWlmIChuZXdfY3R4LT5yZXNfY3R4LnBpcGVfY3R4W2ldLnN0cmVhbSA9PSBkY19zdHJl
YW0gJiYgIW5ld19jdHgtPnJlc19jdHgucGlwZV9jdHhbaV0udG9wX3BpcGUpIHsKIAkJCXBpcGVf
Y3R4ID0gJm5ld19jdHgtPnJlc19jdHgucGlwZV9jdHhbaV07Ci0JCQlicmVhazsKKworCQkJaWYg
KHBpcGVfY3R4LT5zdHJlYW1fcmVzLmRzYykKKwkJCQlyZWxlYXNlX2RzYygmbmV3X2N0eC0+cmVz
X2N0eCwgZGMtPnJlc19wb29sLCAmcGlwZV9jdHgtPnN0cmVhbV9yZXMuZHNjKTsKIAkJfQogCX0K
IAogCWlmICghcGlwZV9jdHgpCiAJCXJldHVybiBEQ19FUlJPUl9VTkVYUEVDVEVEOwotCi0JaWYg
KHBpcGVfY3R4LT5zdHJlYW1fcmVzLmRzYykgewotCQlzdHJ1Y3QgcGlwZV9jdHggKm9kbV9waXBl
ID0gZGNfcmVzX2dldF9vZG1fYm90dG9tX3BpcGUocGlwZV9jdHgpOwotCi0JCXJlbGVhc2VfZHNj
KCZuZXdfY3R4LT5yZXNfY3R4LCBkYy0+cmVzX3Bvb2wsICZwaXBlX2N0eC0+c3RyZWFtX3Jlcy5k
c2MpOwotCQlpZiAob2RtX3BpcGUpCi0JCQlyZWxlYXNlX2RzYygmbmV3X2N0eC0+cmVzX2N0eCwg
ZGMtPnJlc19wb29sLCAmb2RtX3BpcGUtPnN0cmVhbV9yZXMuZHNjKTsKLQl9Ci0KLQlyZXR1cm4g
RENfT0s7CisJZWxzZQorCQlyZXR1cm4gRENfT0s7CiB9CiAjZW5kaWYKIApAQCAtMTU5MywxNyAr
MTU5Myw5NCBAQCBzdGF0aWMgdm9pZCBzd2l6emxlX3RvX2RtbF9wYXJhbXMoCiAJfQogfQogCi1z
dGF0aWMgYm9vbCBkY24yMF9zcGxpdF9zdHJlYW1fZm9yX2NvbWJpbmUoCitzdGF0aWMgYm9vbCBk
Y24yMF9zcGxpdF9zdHJlYW1fZm9yX29kbSgKKwkJc3RydWN0IHJlc291cmNlX2NvbnRleHQgKnJl
c19jdHgsCisJCWNvbnN0IHN0cnVjdCByZXNvdXJjZV9wb29sICpwb29sLAorCQlzdHJ1Y3QgcGlw
ZV9jdHggKnByZXZfb2RtX3BpcGUsCisJCXN0cnVjdCBwaXBlX2N0eCAqbmV4dF9vZG1fcGlwZSkK
K3sKKwlpbnQgcGlwZV9pZHggPSBuZXh0X29kbV9waXBlLT5waXBlX2lkeDsKKwlzdHJ1Y3Qgc2Nh
bGVyX2RhdGEgKnNkID0gJnByZXZfb2RtX3BpcGUtPnBsYW5lX3Jlcy5zY2xfZGF0YTsKKwlzdHJ1
Y3QgcGlwZV9jdHggKnNlY19uZXh0X3BpcGUgPSBuZXh0X29kbV9waXBlLT5uZXh0X29kbV9waXBl
OworCWludCBuZXdfd2lkdGg7CisKKwkqbmV4dF9vZG1fcGlwZSA9ICpwcmV2X29kbV9waXBlOwor
CW5leHRfb2RtX3BpcGUtPm5leHRfb2RtX3BpcGUgPSBzZWNfbmV4dF9waXBlOworCisJbmV4dF9v
ZG1fcGlwZS0+cGlwZV9pZHggPSBwaXBlX2lkeDsKKwluZXh0X29kbV9waXBlLT5wbGFuZV9yZXMu
bWkgPSBwb29sLT5taXNbbmV4dF9vZG1fcGlwZS0+cGlwZV9pZHhdOworCW5leHRfb2RtX3BpcGUt
PnBsYW5lX3Jlcy5odWJwID0gcG9vbC0+aHVicHNbbmV4dF9vZG1fcGlwZS0+cGlwZV9pZHhdOwor
CW5leHRfb2RtX3BpcGUtPnBsYW5lX3Jlcy5pcHAgPSBwb29sLT5pcHBzW25leHRfb2RtX3BpcGUt
PnBpcGVfaWR4XTsKKwluZXh0X29kbV9waXBlLT5wbGFuZV9yZXMueGZtID0gcG9vbC0+dHJhbnNm
b3Jtc1tuZXh0X29kbV9waXBlLT5waXBlX2lkeF07CisJbmV4dF9vZG1fcGlwZS0+cGxhbmVfcmVz
LmRwcCA9IHBvb2wtPmRwcHNbbmV4dF9vZG1fcGlwZS0+cGlwZV9pZHhdOworCW5leHRfb2RtX3Bp
cGUtPnBsYW5lX3Jlcy5tcGNjX2luc3QgPSBwb29sLT5kcHBzW25leHRfb2RtX3BpcGUtPnBpcGVf
aWR4XS0+aW5zdDsKKyNpZmRlZiBDT05GSUdfRFJNX0FNRF9EQ19EU0NfU1VQUE9SVAorCW5leHRf
b2RtX3BpcGUtPnN0cmVhbV9yZXMuZHNjID0gTlVMTDsKKyNlbmRpZgorCWlmIChwcmV2X29kbV9w
aXBlLT5uZXh0X29kbV9waXBlICYmIHByZXZfb2RtX3BpcGUtPm5leHRfb2RtX3BpcGUgIT0gbmV4
dF9vZG1fcGlwZSkgeworCQlBU1NFUlQoIW5leHRfb2RtX3BpcGUtPm5leHRfb2RtX3BpcGUpOwor
CQluZXh0X29kbV9waXBlLT5uZXh0X29kbV9waXBlID0gcHJldl9vZG1fcGlwZS0+bmV4dF9vZG1f
cGlwZTsKKwkJbmV4dF9vZG1fcGlwZS0+bmV4dF9vZG1fcGlwZS0+cHJldl9vZG1fcGlwZSA9IG5l
eHRfb2RtX3BpcGU7CisJfQorCXByZXZfb2RtX3BpcGUtPm5leHRfb2RtX3BpcGUgPSBuZXh0X29k
bV9waXBlOworCW5leHRfb2RtX3BpcGUtPnByZXZfb2RtX3BpcGUgPSBwcmV2X29kbV9waXBlOwor
CUFTU0VSVChuZXh0X29kbV9waXBlLT50b3BfcGlwZSA9PSBOVUxMKTsKKworCWlmIChwcmV2X29k
bV9waXBlLT5wbGFuZV9zdGF0ZSkgeworCQkvKiBIQUNUSVZFIGhhbHZlZCBmb3Igb2RtIGNvbWJp
bmUgKi8KKwkJc2QtPmhfYWN0aXZlIC89IDI7CisJCS8qIENvcHkgc2NsX2RhdGEgdG8gc2Vjb25k
YXJ5IHBpcGUgKi8KKwkJbmV4dF9vZG1fcGlwZS0+cGxhbmVfcmVzLnNjbF9kYXRhID0gKnNkOwor
CisJCS8qIENhbGN1bGF0ZSBuZXcgdnAgYW5kIHJlY291dCBmb3IgbGVmdCBwaXBlICovCisJCS8q
IE5lZWQgYXQgbGVhc3QgMTYgcGl4ZWxzIHdpZHRoIHBlciBzaWRlICovCisJCWlmIChzZC0+cmVj
b3V0LnggKyAxNiA+PSBzZC0+aF9hY3RpdmUpCisJCQlyZXR1cm4gZmFsc2U7CisJCW5ld193aWR0
aCA9IHNkLT5oX2FjdGl2ZSAtIHNkLT5yZWNvdXQueDsKKwkJc2QtPnZpZXdwb3J0LndpZHRoIC09
IGRjX2ZpeHB0X2Zsb29yKGRjX2ZpeHB0X211bF9pbnQoCisJCQkJc2QtPnJhdGlvcy5ob3J6LCBz
ZC0+cmVjb3V0LndpZHRoIC0gbmV3X3dpZHRoKSk7CisJCXNkLT52aWV3cG9ydF9jLndpZHRoIC09
IGRjX2ZpeHB0X2Zsb29yKGRjX2ZpeHB0X211bF9pbnQoCisJCQkJc2QtPnJhdGlvcy5ob3J6X2Ms
IHNkLT5yZWNvdXQud2lkdGggLSBuZXdfd2lkdGgpKTsKKwkJc2QtPnJlY291dC53aWR0aCA9IG5l
d193aWR0aDsKKworCQkvKiBDYWxjdWxhdGUgbmV3IHZwIGFuZCByZWNvdXQgZm9yIHJpZ2h0IHBp
cGUgKi8KKwkJc2QgPSAmbmV4dF9vZG1fcGlwZS0+cGxhbmVfcmVzLnNjbF9kYXRhOworCQluZXdf
d2lkdGggPSBzZC0+cmVjb3V0LndpZHRoICsgc2QtPnJlY291dC54IC0gc2QtPmhfYWN0aXZlOwor
CQkvKiBOZWVkIGF0IGxlYXN0IDE2IHBpeGVscyB3aWR0aCBwZXIgc2lkZSAqLworCQlpZiAobmV3
X3dpZHRoIDw9IDE2KQorCQkJcmV0dXJuIGZhbHNlOworCQlzZC0+dmlld3BvcnQud2lkdGggLT0g
ZGNfZml4cHRfZmxvb3IoZGNfZml4cHRfbXVsX2ludCgKKwkJCQlzZC0+cmF0aW9zLmhvcnosIHNk
LT5yZWNvdXQud2lkdGggLSBuZXdfd2lkdGgpKTsKKwkJc2QtPnZpZXdwb3J0X2Mud2lkdGggLT0g
ZGNfZml4cHRfZmxvb3IoZGNfZml4cHRfbXVsX2ludCgKKwkJCQlzZC0+cmF0aW9zLmhvcnpfYywg
c2QtPnJlY291dC53aWR0aCAtIG5ld193aWR0aCkpOworCQlzZC0+cmVjb3V0LndpZHRoID0gbmV3
X3dpZHRoOworCQlzZC0+dmlld3BvcnQueCArPSBkY19maXhwdF9mbG9vcihkY19maXhwdF9tdWxf
aW50KAorCQkJCXNkLT5yYXRpb3MuaG9yeiwgc2QtPmhfYWN0aXZlIC0gc2QtPnJlY291dC54KSk7
CisJCXNkLT52aWV3cG9ydF9jLnggKz0gZGNfZml4cHRfZmxvb3IoZGNfZml4cHRfbXVsX2ludCgK
KwkJCQlzZC0+cmF0aW9zLmhvcnpfYywgc2QtPmhfYWN0aXZlIC0gc2QtPnJlY291dC54KSk7CisJ
CXNkLT5yZWNvdXQueCA9IDA7CisJfQorCW5leHRfb2RtX3BpcGUtPnN0cmVhbV9yZXMub3BwID0g
cG9vbC0+b3Bwc1tuZXh0X29kbV9waXBlLT5waXBlX2lkeF07CisjaWZkZWYgQ09ORklHX0RSTV9B
TURfRENfRFNDX1NVUFBPUlQKKwlpZiAobmV4dF9vZG1fcGlwZS0+c3RyZWFtLT50aW1pbmcuZmxh
Z3MuRFNDID09IDEpIHsKKwkJYWNxdWlyZV9kc2MocmVzX2N0eCwgcG9vbCwgJm5leHRfb2RtX3Bp
cGUtPnN0cmVhbV9yZXMuZHNjKTsKKwkJQVNTRVJUKG5leHRfb2RtX3BpcGUtPnN0cmVhbV9yZXMu
ZHNjKTsKKwkJaWYgKG5leHRfb2RtX3BpcGUtPnN0cmVhbV9yZXMuZHNjID09IE5VTEwpCisJCQly
ZXR1cm4gZmFsc2U7CisJfQorI2VuZGlmCisKKwlyZXR1cm4gdHJ1ZTsKK30KKworc3RhdGljIHZv
aWQgZGNuMjBfc3BsaXRfc3RyZWFtX2Zvcl9tcGMoCiAJCXN0cnVjdCByZXNvdXJjZV9jb250ZXh0
ICpyZXNfY3R4LAogCQljb25zdCBzdHJ1Y3QgcmVzb3VyY2VfcG9vbCAqcG9vbCwKIAkJc3RydWN0
IHBpcGVfY3R4ICpwcmltYXJ5X3BpcGUsCi0JCXN0cnVjdCBwaXBlX2N0eCAqc2Vjb25kYXJ5X3Bp
cGUsCi0JCWJvb2wgaXNfb2RtX2NvbWJpbmUpCisJCXN0cnVjdCBwaXBlX2N0eCAqc2Vjb25kYXJ5
X3BpcGUpCiB7CiAJaW50IHBpcGVfaWR4ID0gc2Vjb25kYXJ5X3BpcGUtPnBpcGVfaWR4OwotCXN0
cnVjdCBzY2FsZXJfZGF0YSAqc2QgPSAmcHJpbWFyeV9waXBlLT5wbGFuZV9yZXMuc2NsX2RhdGE7
CiAJc3RydWN0IHBpcGVfY3R4ICpzZWNfYm90X3BpcGUgPSBzZWNvbmRhcnlfcGlwZS0+Ym90dG9t
X3BpcGU7Ci0JaW50IG5ld193aWR0aDsKIAogCSpzZWNvbmRhcnlfcGlwZSA9ICpwcmltYXJ5X3Bp
cGU7CiAJc2Vjb25kYXJ5X3BpcGUtPmJvdHRvbV9waXBlID0gc2VjX2JvdF9waXBlOwpAQCAtMTYy
Niw1NyArMTcwMyw5IEBAIHN0YXRpYyBib29sIGRjbjIwX3NwbGl0X3N0cmVhbV9mb3JfY29tYmlu
ZSgKIAlwcmltYXJ5X3BpcGUtPmJvdHRvbV9waXBlID0gc2Vjb25kYXJ5X3BpcGU7CiAJc2Vjb25k
YXJ5X3BpcGUtPnRvcF9waXBlID0gcHJpbWFyeV9waXBlOwogCi0JaWYgKGlzX29kbV9jb21iaW5l
KSB7Ci0JCWlmIChwcmltYXJ5X3BpcGUtPnBsYW5lX3N0YXRlKSB7Ci0JCQkvKiBIQUNUSVZFIGhh
bHZlZCBmb3Igb2RtIGNvbWJpbmUgKi8KLQkJCXNkLT5oX2FjdGl2ZSAvPSAyOwotCQkJLyogQ29w
eSBzY2xfZGF0YSB0byBzZWNvbmRhcnkgcGlwZSAqLwotCQkJc2Vjb25kYXJ5X3BpcGUtPnBsYW5l
X3Jlcy5zY2xfZGF0YSA9ICpzZDsKLQotCQkJLyogQ2FsY3VsYXRlIG5ldyB2cCBhbmQgcmVjb3V0
IGZvciBsZWZ0IHBpcGUgKi8KLQkJCS8qIE5lZWQgYXQgbGVhc3QgMTYgcGl4ZWxzIHdpZHRoIHBl
ciBzaWRlICovCi0JCQlpZiAoc2QtPnJlY291dC54ICsgMTYgPj0gc2QtPmhfYWN0aXZlKQotCQkJ
CXJldHVybiBmYWxzZTsKLQkJCW5ld193aWR0aCA9IHNkLT5oX2FjdGl2ZSAtIHNkLT5yZWNvdXQu
eDsKLQkJCXNkLT52aWV3cG9ydC53aWR0aCAtPSBkY19maXhwdF9mbG9vcihkY19maXhwdF9tdWxf
aW50KAotCQkJCQlzZC0+cmF0aW9zLmhvcnosIHNkLT5yZWNvdXQud2lkdGggLSBuZXdfd2lkdGgp
KTsKLQkJCXNkLT52aWV3cG9ydF9jLndpZHRoIC09IGRjX2ZpeHB0X2Zsb29yKGRjX2ZpeHB0X211
bF9pbnQoCi0JCQkJCXNkLT5yYXRpb3MuaG9yel9jLCBzZC0+cmVjb3V0LndpZHRoIC0gbmV3X3dp
ZHRoKSk7Ci0JCQlzZC0+cmVjb3V0LndpZHRoID0gbmV3X3dpZHRoOwotCi0JCQkvKiBDYWxjdWxh
dGUgbmV3IHZwIGFuZCByZWNvdXQgZm9yIHJpZ2h0IHBpcGUgKi8KLQkJCXNkID0gJnNlY29uZGFy
eV9waXBlLT5wbGFuZV9yZXMuc2NsX2RhdGE7Ci0JCQluZXdfd2lkdGggPSBzZC0+cmVjb3V0Lndp
ZHRoICsgc2QtPnJlY291dC54IC0gc2QtPmhfYWN0aXZlOwotCQkJLyogTmVlZCBhdCBsZWFzdCAx
NiBwaXhlbHMgd2lkdGggcGVyIHNpZGUgKi8KLQkJCWlmIChuZXdfd2lkdGggPD0gMTYpCi0JCQkJ
cmV0dXJuIGZhbHNlOwotCQkJc2QtPnZpZXdwb3J0LndpZHRoIC09IGRjX2ZpeHB0X2Zsb29yKGRj
X2ZpeHB0X211bF9pbnQoCi0JCQkJCXNkLT5yYXRpb3MuaG9yeiwgc2QtPnJlY291dC53aWR0aCAt
IG5ld193aWR0aCkpOwotCQkJc2QtPnZpZXdwb3J0X2Mud2lkdGggLT0gZGNfZml4cHRfZmxvb3Io
ZGNfZml4cHRfbXVsX2ludCgKLQkJCQkJc2QtPnJhdGlvcy5ob3J6X2MsIHNkLT5yZWNvdXQud2lk
dGggLSBuZXdfd2lkdGgpKTsKLQkJCXNkLT5yZWNvdXQud2lkdGggPSBuZXdfd2lkdGg7Ci0JCQlz
ZC0+dmlld3BvcnQueCArPSBkY19maXhwdF9mbG9vcihkY19maXhwdF9tdWxfaW50KAotCQkJCQlz
ZC0+cmF0aW9zLmhvcnosIHNkLT5oX2FjdGl2ZSAtIHNkLT5yZWNvdXQueCkpOwotCQkJc2QtPnZp
ZXdwb3J0X2MueCArPSBkY19maXhwdF9mbG9vcihkY19maXhwdF9tdWxfaW50KAotCQkJCQlzZC0+
cmF0aW9zLmhvcnpfYywgc2QtPmhfYWN0aXZlIC0gc2QtPnJlY291dC54KSk7Ci0JCQlzZC0+cmVj
b3V0LnggPSAwOwotCQl9Ci0JCXNlY29uZGFyeV9waXBlLT5zdHJlYW1fcmVzLm9wcCA9IHBvb2wt
Pm9wcHNbc2Vjb25kYXJ5X3BpcGUtPnBpcGVfaWR4XTsKLSNpZmRlZiBDT05GSUdfRFJNX0FNRF9E
Q19EU0NfU1VQUE9SVAotCQlpZiAoc2Vjb25kYXJ5X3BpcGUtPnN0cmVhbS0+dGltaW5nLmZsYWdz
LkRTQyA9PSAxKSB7Ci0JCQlhY3F1aXJlX2RzYyhyZXNfY3R4LCBwb29sLCAmc2Vjb25kYXJ5X3Bp
cGUtPnN0cmVhbV9yZXMuZHNjKTsKLQkJCUFTU0VSVChzZWNvbmRhcnlfcGlwZS0+c3RyZWFtX3Jl
cy5kc2MpOwotCQkJaWYgKHNlY29uZGFyeV9waXBlLT5zdHJlYW1fcmVzLmRzYyA9PSBOVUxMKQot
CQkJCXJldHVybiBmYWxzZTsKLQkJfQotI2VuZGlmCi0JfSBlbHNlIHsKLQkJQVNTRVJUKHByaW1h
cnlfcGlwZS0+cGxhbmVfc3RhdGUpOwotCQlyZXNvdXJjZV9idWlsZF9zY2FsaW5nX3BhcmFtcyhw
cmltYXJ5X3BpcGUpOwotCQlyZXNvdXJjZV9idWlsZF9zY2FsaW5nX3BhcmFtcyhzZWNvbmRhcnlf
cGlwZSk7Ci0JfQotCi0JcmV0dXJuIHRydWU7CisJQVNTRVJUKHByaW1hcnlfcGlwZS0+cGxhbmVf
c3RhdGUpOworCXJlc291cmNlX2J1aWxkX3NjYWxpbmdfcGFyYW1zKHByaW1hcnlfcGlwZSk7CisJ
cmVzb3VyY2VfYnVpbGRfc2NhbGluZ19wYXJhbXMoc2Vjb25kYXJ5X3BpcGUpOwogfQogCiB2b2lk
IGRjbjIwX3BvcHVsYXRlX2RtbF93cml0ZWJhY2tfZnJvbV9jb250ZXh0KApAQCAtMjEwNiwyMCAr
MjEzNSwyNCBAQCBzdGF0aWMgYm9vbCBkY24yMF92YWxpZGF0ZV9kc2Moc3RydWN0IGRjICpkYywg
c3RydWN0IGRjX3N0YXRlICpuZXdfY3R4KQogCQlzdHJ1Y3QgcGlwZV9jdHggKnBpcGVfY3R4ID0g
Jm5ld19jdHgtPnJlc19jdHgucGlwZV9jdHhbaV07CiAJCXN0cnVjdCBkY19zdHJlYW1fc3RhdGUg
KnN0cmVhbSA9IHBpcGVfY3R4LT5zdHJlYW07CiAJCXN0cnVjdCBkc2NfY29uZmlnIGRzY19jZmc7
CisJCXN0cnVjdCBwaXBlX2N0eCAqb2RtX3BpcGU7CisJCWludCBvcHBfY250ID0gMTsKKworCQlm
b3IgKG9kbV9waXBlID0gcGlwZV9jdHgtPm5leHRfb2RtX3BpcGU7IG9kbV9waXBlOyBvZG1fcGlw
ZSA9IG9kbV9waXBlLT5uZXh0X29kbV9waXBlKQorCQkJb3BwX2NudCsrOwogCiAJCS8qIE9ubHkg
bmVlZCB0byB2YWxpZGF0ZSB0b3AgcGlwZSAqLwotCQlpZiAocGlwZV9jdHgtPnRvcF9waXBlIHx8
ICFzdHJlYW0gfHwgIXN0cmVhbS0+dGltaW5nLmZsYWdzLkRTQykKKwkJaWYgKHBpcGVfY3R4LT50
b3BfcGlwZSB8fCBwaXBlX2N0eC0+cHJldl9vZG1fcGlwZSB8fCAhc3RyZWFtIHx8ICFzdHJlYW0t
PnRpbWluZy5mbGFncy5EU0MpCiAJCQljb250aW51ZTsKIAotCQlkc2NfY2ZnLnBpY193aWR0aCA9
IHN0cmVhbS0+dGltaW5nLmhfYWRkcmVzc2FibGUgKyBzdHJlYW0tPnRpbWluZy5oX2JvcmRlcl9s
ZWZ0Ci0JCQkJKyBzdHJlYW0tPnRpbWluZy5oX2JvcmRlcl9yaWdodDsKKwkJZHNjX2NmZy5waWNf
d2lkdGggPSAoc3RyZWFtLT50aW1pbmcuaF9hZGRyZXNzYWJsZSArIHN0cmVhbS0+dGltaW5nLmhf
Ym9yZGVyX2xlZnQKKwkJCQkrIHN0cmVhbS0+dGltaW5nLmhfYm9yZGVyX3JpZ2h0KSAvIG9wcF9j
bnQ7CiAJCWRzY19jZmcucGljX2hlaWdodCA9IHN0cmVhbS0+dGltaW5nLnZfYWRkcmVzc2FibGUg
KyBzdHJlYW0tPnRpbWluZy52X2JvcmRlcl90b3AKIAkJCQkrIHN0cmVhbS0+dGltaW5nLnZfYm9y
ZGVyX2JvdHRvbTsKLQkJaWYgKGRjX3Jlc19nZXRfb2RtX2JvdHRvbV9waXBlKHBpcGVfY3R4KSkK
LQkJCWRzY19jZmcucGljX3dpZHRoIC89IDI7CiAJCWRzY19jZmcucGl4ZWxfZW5jb2RpbmcgPSBz
dHJlYW0tPnRpbWluZy5waXhlbF9lbmNvZGluZzsKIAkJZHNjX2NmZy5jb2xvcl9kZXB0aCA9IHN0
cmVhbS0+dGltaW5nLmRpc3BsYXlfY29sb3JfZGVwdGg7CiAJCWRzY19jZmcuZGNfZHNjX2NmZyA9
IHN0cmVhbS0+dGltaW5nLmRzY19jZmc7CisJCWRzY19jZmcuZGNfZHNjX2NmZy5udW1fc2xpY2Vz
X2ggLz0gb3BwX2NudDsKIAogCQlpZiAoIXBpcGVfY3R4LT5zdHJlYW1fcmVzLmRzYy0+ZnVuY3Mt
PmRzY192YWxpZGF0ZV9zdHJlYW0ocGlwZV9jdHgtPnN0cmVhbV9yZXMuZHNjLCAmZHNjX2NmZykp
CiAJCQlyZXR1cm4gZmFsc2U7CkBAIC0yMTQzLDYgKzIxNzYsOCBAQCBzdGF0aWMgc3RydWN0IHBp
cGVfY3R4ICpkY24yMF9maW5kX3NlY29uZGFyeV9waXBlKHN0cnVjdCBkYyAqZGMsCiAJCSAqIGlm
IHRoaXMgcHJpbWFyeSBwaXBlIGhhcyBhIGJvdHRvbSBwaXBlIGluIHByZXYuIHN0YXRlCiAJCSAq
IGFuZCBpZiB0aGUgYm90dG9tIHBpcGUgaXMgc3RpbGwgYXZhaWxhYmxlICh3aGljaCBpdCBzaG91
bGQgYmUpLAogCQkgKiBwaWNrIHRoYXQgcGlwZSBhcyBzZWNvbmRhcnkKKwkJICogU2FtZSBsb2dp
YyBhcHBsaWVzIGZvciBPRE0gcGlwZXMuIFNpbmNlIG1wbyBpcyBub3QgYWxsb3dlZCB3aXRoIG9k
bQorCQkgKiBjaGVjayBpbiBlbHNlIGNhc2UuCiAJCSAqLwogCQlpZiAoZGMtPmN1cnJlbnRfc3Rh
dGUtPnJlc19jdHgucGlwZV9jdHhbcHJpbWFyeV9waXBlLT5waXBlX2lkeF0uYm90dG9tX3BpcGUp
IHsKIAkJCXByZWZlcnJlZF9waXBlX2lkeCA9IGRjLT5jdXJyZW50X3N0YXRlLT5yZXNfY3R4LnBp
cGVfY3R4W3ByaW1hcnlfcGlwZS0+cGlwZV9pZHhdLmJvdHRvbV9waXBlLT5waXBlX2lkeDsKQEAg
LTIxNTAsNiArMjE4NSwxMiBAQCBzdGF0aWMgc3RydWN0IHBpcGVfY3R4ICpkY24yMF9maW5kX3Nl
Y29uZGFyeV9waXBlKHN0cnVjdCBkYyAqZGMsCiAJCQkJc2Vjb25kYXJ5X3BpcGUgPSAmcmVzX2N0
eC0+cGlwZV9jdHhbcHJlZmVycmVkX3BpcGVfaWR4XTsKIAkJCQlzZWNvbmRhcnlfcGlwZS0+cGlw
ZV9pZHggPSBwcmVmZXJyZWRfcGlwZV9pZHg7CiAJCQl9CisJCX0gZWxzZSBpZiAoZGMtPmN1cnJl
bnRfc3RhdGUtPnJlc19jdHgucGlwZV9jdHhbcHJpbWFyeV9waXBlLT5waXBlX2lkeF0ubmV4dF9v
ZG1fcGlwZSkgeworCQkJcHJlZmVycmVkX3BpcGVfaWR4ID0gZGMtPmN1cnJlbnRfc3RhdGUtPnJl
c19jdHgucGlwZV9jdHhbcHJpbWFyeV9waXBlLT5waXBlX2lkeF0ubmV4dF9vZG1fcGlwZS0+cGlw
ZV9pZHg7CisJCQlpZiAocmVzX2N0eC0+cGlwZV9jdHhbcHJlZmVycmVkX3BpcGVfaWR4XS5zdHJl
YW0gPT0gTlVMTCkgeworCQkJCXNlY29uZGFyeV9waXBlID0gJnJlc19jdHgtPnBpcGVfY3R4W3By
ZWZlcnJlZF9waXBlX2lkeF07CisJCQkJc2Vjb25kYXJ5X3BpcGUtPnBpcGVfaWR4ID0gcHJlZmVy
cmVkX3BpcGVfaWR4OworCQkJfQogCQl9CiAKIAkJLyoKQEAgLTIyMjAsNiArMjI2MSwzOCBAQCBi
b29sIGRjbjIwX2Zhc3RfdmFsaWRhdGVfYncoCiAJaWYgKCFwaXBlcykKIAkJcmV0dXJuIGZhbHNl
OwogCisJLyogbWVyZ2UgcHJldmlvdXNseSBzcGxpdCBvZG0gcGlwZXMgc2luY2UgbW9kZSBzdXBw
b3J0IG5lZWRzIHRvIG1ha2UgdGhlIGRlY2lzaW9uICovCisJZm9yIChpID0gMDsgaSA8IGRjLT5y
ZXNfcG9vbC0+cGlwZV9jb3VudDsgaSsrKSB7CisJCXN0cnVjdCBwaXBlX2N0eCAqcGlwZSA9ICZj
b250ZXh0LT5yZXNfY3R4LnBpcGVfY3R4W2ldOworCQlzdHJ1Y3QgcGlwZV9jdHggKm9kbV9waXBl
ID0gcGlwZS0+bmV4dF9vZG1fcGlwZTsKKworCQlpZiAocGlwZS0+cHJldl9vZG1fcGlwZSkKKwkJ
CWNvbnRpbnVlOworCisJCXBpcGUtPm5leHRfb2RtX3BpcGUgPSBOVUxMOworCQl3aGlsZSAob2Rt
X3BpcGUpIHsKKwkJCXN0cnVjdCBwaXBlX2N0eCAqbmV4dF9vZG1fcGlwZSA9IG9kbV9waXBlLT5u
ZXh0X29kbV9waXBlOworCisJCQlvZG1fcGlwZS0+cGxhbmVfc3RhdGUgPSBOVUxMOworCQkJb2Rt
X3BpcGUtPnN0cmVhbSA9IE5VTEw7CisJCQlvZG1fcGlwZS0+dG9wX3BpcGUgPSBOVUxMOworCQkJ
b2RtX3BpcGUtPmJvdHRvbV9waXBlID0gTlVMTDsKKwkJCW9kbV9waXBlLT5wcmV2X29kbV9waXBl
ID0gTlVMTDsKKwkJCW9kbV9waXBlLT5uZXh0X29kbV9waXBlID0gTlVMTDsKKyNpZmRlZiBDT05G
SUdfRFJNX0FNRF9EQ19EU0NfU1VQUE9SVAorCQkJaWYgKG9kbV9waXBlLT5zdHJlYW1fcmVzLmRz
YykKKwkJCQlyZWxlYXNlX2RzYygmY29udGV4dC0+cmVzX2N0eCwgZGMtPnJlc19wb29sLCAmb2Rt
X3BpcGUtPnN0cmVhbV9yZXMuZHNjKTsKKyNlbmRpZgorCQkJLyogQ2xlYXIgcGxhbmVfcmVzIGFu
ZCBzdHJlYW1fcmVzICovCisJCQltZW1zZXQoJm9kbV9waXBlLT5wbGFuZV9yZXMsIDAsIHNpemVv
ZihvZG1fcGlwZS0+cGxhbmVfcmVzKSk7CisJCQltZW1zZXQoJm9kbV9waXBlLT5zdHJlYW1fcmVz
LCAwLCBzaXplb2Yob2RtX3BpcGUtPnN0cmVhbV9yZXMpKTsKKwkJCW9kbV9waXBlID0gbmV4dF9v
ZG1fcGlwZTsKKwkJfQorCQlpZiAocGlwZS0+cGxhbmVfc3RhdGUpCisJCQlyZXNvdXJjZV9idWls
ZF9zY2FsaW5nX3BhcmFtcyhwaXBlKTsKKwl9CisKKwkvKiBtZXJnZSBwcmV2aW91c2x5IG1wYyBz
cGxpdCBwaXBlcyBzaW5jZSBtb2RlIHN1cHBvcnQgbmVlZHMgdG8gbWFrZSB0aGUgZGVjaXNpb24g
Ki8KIAlmb3IgKGkgPSAwOyBpIDwgZGMtPnJlc19wb29sLT5waXBlX2NvdW50OyBpKyspIHsKIAkJ
c3RydWN0IHBpcGVfY3R4ICpwaXBlID0gJmNvbnRleHQtPnJlc19jdHgucGlwZV9jdHhbaV07CiAJ
CXN0cnVjdCBwaXBlX2N0eCAqaHNwbGl0X3BpcGUgPSBwaXBlLT5ib3R0b21fcGlwZTsKQEAgLTIy
MjcsNyArMjMwMCw2IEBAIGJvb2wgZGNuMjBfZmFzdF92YWxpZGF0ZV9idygKIAkJaWYgKCFoc3Bs
aXRfcGlwZSB8fCBoc3BsaXRfcGlwZS0+cGxhbmVfc3RhdGUgIT0gcGlwZS0+cGxhbmVfc3RhdGUp
CiAJCQljb250aW51ZTsKIAotCQkvKiBtZXJnZSBwcmV2aW91c2x5IHNwbGl0IHBpcGUgc2luY2Ug
bW9kZSBzdXBwb3J0IG5lZWRzIHRvIG1ha2UgdGhlIGRlY2lzaW9uICovCiAJCXBpcGUtPmJvdHRv
bV9waXBlID0gaHNwbGl0X3BpcGUtPmJvdHRvbV9waXBlOwogCQlpZiAoaHNwbGl0X3BpcGUtPmJv
dHRvbV9waXBlKQogCQkJaHNwbGl0X3BpcGUtPmJvdHRvbV9waXBlLT50b3BfcGlwZSA9IHBpcGU7
CkBAIC0yMjM1LDEwICsyMzA3LDcgQEAgYm9vbCBkY24yMF9mYXN0X3ZhbGlkYXRlX2J3KAogCQlo
c3BsaXRfcGlwZS0+c3RyZWFtID0gTlVMTDsKIAkJaHNwbGl0X3BpcGUtPnRvcF9waXBlID0gTlVM
TDsKIAkJaHNwbGl0X3BpcGUtPmJvdHRvbV9waXBlID0gTlVMTDsKLSNpZmRlZiBDT05GSUdfRFJN
X0FNRF9EQ19EU0NfU1VQUE9SVAotCQlpZiAoaHNwbGl0X3BpcGUtPnN0cmVhbV9yZXMuZHNjICYm
IGhzcGxpdF9waXBlLT5zdHJlYW1fcmVzLmRzYyAhPSBwaXBlLT5zdHJlYW1fcmVzLmRzYykKLQkJ
CXJlbGVhc2VfZHNjKCZjb250ZXh0LT5yZXNfY3R4LCBkYy0+cmVzX3Bvb2wsICZoc3BsaXRfcGlw
ZS0+c3RyZWFtX3Jlcy5kc2MpOwotI2VuZGlmCisKIAkJLyogQ2xlYXIgcGxhbmVfcmVzIGFuZCBz
dHJlYW1fcmVzICovCiAJCW1lbXNldCgmaHNwbGl0X3BpcGUtPnBsYW5lX3JlcywgMCwgc2l6ZW9m
KGhzcGxpdF9waXBlLT5wbGFuZV9yZXMpKTsKIAkJbWVtc2V0KCZoc3BsaXRfcGlwZS0+c3RyZWFt
X3JlcywgMCwgc2l6ZW9mKGhzcGxpdF9waXBlLT5zdHJlYW1fcmVzKSk7CkBAIC0yMzUxLDEwICsy
NDIwLDkgQEAgYm9vbCBkY24yMF9mYXN0X3ZhbGlkYXRlX2J3KAogCQlpZiAoIXBpcGUtPnRvcF9w
aXBlICYmICFwaXBlLT5wbGFuZV9zdGF0ZSAmJiBjb250ZXh0LT5id19jdHguZG1sLnZiYS5PRE1D
b21iaW5lRW5hYmxlZFtwaXBlX2lkeF0pIHsKIAkJCWhzcGxpdF9waXBlID0gZGNuMjBfZmluZF9z
ZWNvbmRhcnlfcGlwZShkYywgJmNvbnRleHQtPnJlc19jdHgsIGRjLT5yZXNfcG9vbCwgcGlwZSk7
CiAJCQlBU1NFUlQoaHNwbGl0X3BpcGUpOwotCQkJaWYgKCFkY24yMF9zcGxpdF9zdHJlYW1fZm9y
X2NvbWJpbmUoCisJCQlpZiAoIWRjbjIwX3NwbGl0X3N0cmVhbV9mb3Jfb2RtKAogCQkJCQkmY29u
dGV4dC0+cmVzX2N0eCwgZGMtPnJlc19wb29sLAotCQkJCQlwaXBlLCBoc3BsaXRfcGlwZSwKLQkJ
CQkJdHJ1ZSkpCisJCQkJCXBpcGUsIGhzcGxpdF9waXBlKSkKIAkJCQlnb3RvIHZhbGlkYXRlX2Zh
aWw7CiAJCQlwaXBlX3NwbGl0X2Zyb21baHNwbGl0X3BpcGUtPnBpcGVfaWR4XSA9IHBpcGVfaWR4
OwogCQkJZGNuMjBfYnVpbGRfbWFwcGVkX3Jlc291cmNlKGRjLCBjb250ZXh0LCBwaXBlLT5zdHJl
YW0pOwpAQCAtMjM5NSwxMSArMjQ2MywxNSBAQCBib29sIGRjbjIwX2Zhc3RfdmFsaWRhdGVfYnco
CiAJCQkJaWYgKCFoc3BsaXRfcGlwZSkKIAkJCQkJY29udGludWU7CiAKLQkJCQlpZiAoIWRjbjIw
X3NwbGl0X3N0cmVhbV9mb3JfY29tYmluZSgKKwkJCQlpZiAoY29udGV4dC0+YndfY3R4LmRtbC52
YmEuT0RNQ29tYmluZUVuYWJsZWRbcGlwZV9pZHhdKSB7CisJCQkJCWlmICghZGNuMjBfc3BsaXRf
c3RyZWFtX2Zvcl9vZG0oCisJCQkJCQkJJmNvbnRleHQtPnJlc19jdHgsIGRjLT5yZXNfcG9vbCwK
KwkJCQkJCQlwaXBlLCBoc3BsaXRfcGlwZSkpCisJCQkJCQlnb3RvIHZhbGlkYXRlX2ZhaWw7CisJ
CQkJfSBlbHNlCisJCQkJCWRjbjIwX3NwbGl0X3N0cmVhbV9mb3JfbXBjKAogCQkJCQkJJmNvbnRl
eHQtPnJlc19jdHgsIGRjLT5yZXNfcG9vbCwKLQkJCQkJCXBpcGUsIGhzcGxpdF9waXBlLAotCQkJ
CQkJY29udGV4dC0+YndfY3R4LmRtbC52YmEuT0RNQ29tYmluZUVuYWJsZWRbcGlwZV9pZHhdKSkK
LQkJCQkJZ290byB2YWxpZGF0ZV9mYWlsOworCQkJCQkJcGlwZSwgaHNwbGl0X3BpcGUpOwogCQkJ
CXBpcGVfc3BsaXRfZnJvbVtoc3BsaXRfcGlwZS0+cGlwZV9pZHhdID0gcGlwZV9pZHg7CiAJCQl9
CiAJCX0gZWxzZSBpZiAoaHNwbGl0X3BpcGUgJiYgaHNwbGl0X3BpcGUtPnBsYW5lX3N0YXRlID09
IHBpcGUtPnBsYW5lX3N0YXRlKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rp
c3BsYXkvZGMvZGNuMjAvZGNuMjBfc3RyZWFtX2VuY29kZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9zdHJlYW1fZW5jb2Rlci5jCmluZGV4IDZkNTQ5NDJh
Yjk4Yi4uNDg4ZmI1YzcxZGQwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvZGMvZGNuMjAvZGNuMjBfc3RyZWFtX2VuY29kZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfc3RyZWFtX2VuY29kZXIuYwpAQCAtNDY2LDcgKzQ2
Niw3IEBAIHZvaWQgZW5jMl9zdHJlYW1fZW5jb2Rlcl9kcF91bmJsYW5rKAogCQl1aW50NjRfdCBt
X3ZpZF9sID0gbl92aWQ7CiAKIAkJLyogWUNiQ3IgNDoyOjAgOiBDb21wdXRlZCBWSURfTSB3aWxs
IGJlIDJYIHRoZSBpbnB1dCByYXRlICovCi0JCWlmIChpc190d29fcGl4ZWxzX3Blcl9jb250YWlu
dGVyKCZwYXJhbS0+dGltaW5nKSB8fCBwYXJhbS0+b2RtKSB7CisJCWlmIChpc190d29fcGl4ZWxz
X3Blcl9jb250YWludGVyKCZwYXJhbS0+dGltaW5nKSB8fCBwYXJhbS0+b3BwX2NudCkgewogCQkJ
Lyp0aGlzIGxvZ2ljIHNob3VsZCBiZSB0aGUgc2FtZSBpbiBnZXRfcGl4ZWxfY2xvY2tfcGFyYW1l
dGVycygpICovCiAJCQluX211bHRpcGx5ID0gMTsKIAkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9kaXNwbGF5L2RjL2luYy9jb3JlX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2Rpc3BsYXkvZGMvaW5jL2NvcmVfdHlwZXMuaAppbmRleCA3NDE4NmNmMWMyODUuLmJmZTBk
MDZkMWMyMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2luYy9j
b3JlX3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2luYy9jb3Jl
X3R5cGVzLmgKQEAgLTI5Nyw2ICsyOTcsOCBAQCBzdHJ1Y3QgcGlwZV9jdHggewogCiAJc3RydWN0
IHBpcGVfY3R4ICp0b3BfcGlwZTsKIAlzdHJ1Y3QgcGlwZV9jdHggKmJvdHRvbV9waXBlOworCXN0
cnVjdCBwaXBlX2N0eCAqbmV4dF9vZG1fcGlwZTsKKwlzdHJ1Y3QgcGlwZV9jdHggKnByZXZfb2Rt
X3BpcGU7CiAKICNpZmRlZiBDT05GSUdfRFJNX0FNRF9EQ19EQ04xXzAKIAlzdHJ1Y3QgX3Zjc19k
cGlfZGlzcGxheV9kbGdfcmVnc19zdCBkbGdfcmVnczsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvZGlzcGxheS9kYy9pbmMvaHcvc3RyZWFtX2VuY29kZXIuaCBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvZGlzcGxheS9kYy9pbmMvaHcvc3RyZWFtX2VuY29kZXIuaAppbmRleCA4YmIzZTNk
NTZhYzkuLmZlOWI3YTEwYTFjMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2RjL2luYy9ody9zdHJlYW1fZW5jb2Rlci5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
ZGlzcGxheS9kYy9pbmMvaHcvc3RyZWFtX2VuY29kZXIuaApAQCAtOTEsNyArOTEsNyBAQCBzdHJ1
Y3QgZW5jb2Rlcl91bmJsYW5rX3BhcmFtIHsKIAlzdHJ1Y3QgZGNfbGlua19zZXR0aW5ncyBsaW5r
X3NldHRpbmdzOwogCXN0cnVjdCBkY19jcnRjX3RpbWluZyB0aW1pbmc7CiAjaWZkZWYgQ09ORklH
X0RSTV9BTURfRENfRENOMl8wCi0JYm9vbCBvZG07CisJaW50IG9wcF9jbnQ7CiAjZW5kaWYKIH07
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9pbmMvcmVzb3Vy
Y2UuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9pbmMvcmVzb3VyY2UuaAppbmRl
eCA0N2Y4MTA3MmQ3ZTkuLjFjYzFjOGNlNjMzYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9kaXNwbGF5L2RjL2luYy9yZXNvdXJjZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
ZGlzcGxheS9kYy9pbmMvcmVzb3VyY2UuaApAQCAtMTc5LDcgKzE3OSw0IEBAIHZvaWQgdXBkYXRl
X2F1ZGlvX3VzYWdlKAogCiB1bnNpZ25lZCBpbnQgcmVzb3VyY2VfcGl4ZWxfZm9ybWF0X3RvX2Jw
cChlbnVtIHN1cmZhY2VfcGl4ZWxfZm9ybWF0IGZvcm1hdCk7CiAKLXN0cnVjdCBwaXBlX2N0eCAq
ZGNfcmVzX2dldF9vZG1fYm90dG9tX3BpcGUoc3RydWN0IHBpcGVfY3R4ICpwaXBlX2N0eCk7Ci1i
b29sIGRjX3Jlc19pc19vZG1faGVhZF9waXBlKHN0cnVjdCBwaXBlX2N0eCAqcGlwZV9jdHgpOwot
CiAjZW5kaWYgLyogRFJJVkVSU19HUFVfRFJNX0FNRF9EQ19ERVZfRENfSU5DX1JFU09VUkNFX0hf
ICovCi0tIAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
