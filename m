Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 75F321A285
	for <lists+amd-gfx@lfdr.de>; Fri, 10 May 2019 19:41:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F3FF06E795;
	Fri, 10 May 2019 17:41:57 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x344.google.com (mail-wm1-x344.google.com
 [IPv6:2a00:1450:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B45F96E795
 for <amd-gfx@lists.freedesktop.org>; Fri, 10 May 2019 17:41:56 +0000 (UTC)
Received: by mail-wm1-x344.google.com with SMTP id y2so8373492wmi.5
 for <amd-gfx@lists.freedesktop.org>; Fri, 10 May 2019 10:41:56 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:cc:references:from
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-transfer-encoding:content-language;
 bh=D2OIY9MGzhGAlW4vkoluIIfHn0KBz2NHVlkfckksf+4=;
 b=s991PofnkGNR/6lGvohU98UE/9WqldULEziODBfBHAsUMlWmUNYkslE59KkNYqndhq
 Jf30y5Xqzi4SgF5AmdTHQr/rLVAOxxpK/5AzhgJv64QwKgVVdQYthHPr0EZt0pbV0C/o
 Rl48tWXiSiQVxr3cCvcdtl/eBuDLo+N0qeszZO/ynQEN1++O+om3+w+6U6PmddZuKito
 47Z1lL89PXxcOcTIMA6GUhmoLzDAkQNIsdr00Y6uuDkk19YPvRxcMrI0g5OHYczy0sl7
 Su4wHd+dGGKhz97c4TtU4Reu5LM0oJpXcQPIfEljdt/0AaDkkK3ppNHXkOXUZLwnyHSS
 7Epw==
X-Gm-Message-State: APjAAAUcJSXj71qdSbYJqFWNkFgcDzfZS9Nz/5JTnFKwcg37IV7qMZA1
 HQVPv69t1hfrtVa3TUCKfQg=
X-Google-Smtp-Source: APXvYqy4oR49dLJyPoKPnizdKXOfLvNIHxdU50QcAsgAOjddvE6HviHh6HYPhIdHlMIkTKRq1sIU7Q==
X-Received: by 2002:a1c:c144:: with SMTP id r65mr3168703wmf.24.1557510115323; 
 Fri, 10 May 2019 10:41:55 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id c9sm3752675wrv.62.2019.05.10.10.41.54
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Fri, 10 May 2019 10:41:54 -0700 (PDT)
Subject: Re: [PATCH 2/8] drm/amdgpu: Remove GWS barriers pre-reservation for
 gfx
To: "Zeng, Oak" <Oak.Zeng@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
References: <1557504063-1559-1-git-send-email-Oak.Zeng@amd.com>
 <1557504063-1559-2-git-send-email-Oak.Zeng@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <03cdbff1-c757-4831-01f0-354e390a55a1@gmail.com>
Date: Fri, 10 May 2019 19:41:53 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <1557504063-1559-2-git-send-email-Oak.Zeng@amd.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=reply-to:subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=D2OIY9MGzhGAlW4vkoluIIfHn0KBz2NHVlkfckksf+4=;
 b=AVLtJixIQQh6dq/VSJSXXJONFSpYrc9XhdelemTxxDBE8V+n9+f9hfTjtc8+R+BGYR
 FnTkn3l+cpHd6aN01nGrUVhKRvi6FQt5JL5wM57Du2k4SCmRJdVUujU8OlkhK7eB+34g
 PKR48KF8SZOLA44MfrFShItLeh6qPgSIpOzAxTJwVNd132HbDeFI6tpEGYuu0Jl2ca0v
 vi5FIin9gyMOZo6lcutcq0VBHe/0xrGAMMy+z4kdYVFHedtIsFkBBmgAVlQfeJhmKxWI
 8EKm2GdPPY0X8XSAwl8FRj6hTxMILFqbPjSqfMjofaBA9sL5NlIoIoAb1bI3CGOJqVxa
 c6WQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Cc: "Kuehling, Felix" <Felix.Kuehling@amd.com>, "Keely,
 Sean" <Sean.Keely@amd.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMTAuMDUuMTkgdW0gMTg6MDEgc2NocmllYiBaZW5nLCBPYWs6Cj4gVXNlciBzcGFjZSBhbGxv
Y2F0ZWQgR1dTIGJhcnJpZXJzIGFyZSB1c2VkLiBUaGUga2VybmVsCj4gcHJlLWFsbG9jYXRlZCBH
V1MgYmFycmllcnMgYXJlIHVudXNlZC4KCkkgaGF2ZSBhIHBhdGNoIHdoaWNoIGdvZXMgYSBzdGVw
IGZ1cnRoZXIgYW5kIGFsc28gcmVtb3ZlcyB0aGUgR0RTIGFuZCBPQSAKc3R1ZmYgYXMgd2VsbCBh
bmQgYWxzbyBjbGVhbnMgdXAgdGhlIGludGVybmFsIHZhcmlhYmxlcy4KCkdpdmUgbWUgYSBtb21l
bnQgdG8gZGlnIHRoYXQgdXAsCkNocmlzdGlhbi4KCj4KPiBDaGFuZ2UtSWQ6IEk3YWFjMjU5ZDFm
NmI3MDY0ZDAyYWZmMjMxMjc5ZmY2MDVjMjllYTM0Cj4gU2lnbmVkLW9mZi1ieTogT2FrIFplbmcg
PE9hay5aZW5nQGFtZC5jb20+Cj4gLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfYm9fbGlzdC5jIHwgMiArLQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2dkcy5oICAgICB8IDMgKy0tCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdHRtLmMgICAgIHwgNiAtLS0tLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dm
eF92N18wLmMgICAgICAgfCAxIC0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92
OF8wLmMgICAgICAgfCAxIC0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8w
LmMgICAgICAgfCAxIC0KPiAgIDYgZmlsZXMgY2hhbmdlZCwgMiBpbnNlcnRpb25zKCspLCAxMiBk
ZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfYm9fbGlzdC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2JvX2xp
c3QuYwo+IGluZGV4IDVjNzlkYTguLjI3M2MxNmIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2JvX2xpc3QuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9ib19saXN0LmMKPiBAQCAtODIsNyArODIsNyBAQCBpbnQgYW1kZ3B1
X2JvX2xpc3RfY3JlYXRlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgZHJtX2Zp
bGUgKmZpbHAsCj4gICAKPiAgIAlrcmVmX2luaXQoJmxpc3QtPnJlZmNvdW50KTsKPiAgIAlsaXN0
LT5nZHNfb2JqID0gYWRldi0+Z2RzLmdkc19nZnhfYm87Cj4gLQlsaXN0LT5nd3Nfb2JqID0gYWRl
di0+Z2RzLmd3c19nZnhfYm87Cj4gKwlsaXN0LT5nd3Nfb2JqID0gTlVMTDsKPiAgIAlsaXN0LT5v
YV9vYmogPSBhZGV2LT5nZHMub2FfZ2Z4X2JvOwo+ICAgCj4gICAJYXJyYXkgPSBhbWRncHVfYm9f
bGlzdF9hcnJheV9lbnRyeShsaXN0LCAwKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X2dkcy5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2dkcy5oCj4gaW5kZXggZjg5ZjU3My4uN2U1YjRiYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2RzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfZ2RzLmgKPiBAQCAtMzksMTMgKzM5LDEyIEBAIHN0cnVjdCBhbWRn
cHVfZ2RzIHsKPiAgIAlzdHJ1Y3QgYW1kZ3B1X2dkc19hc2ljX2luZm8Jb2E7Cj4gICAJdWludDMy
X3QJCQlnZHNfY29tcHV0ZV9tYXhfd2F2ZV9pZDsKPiAgIAo+IC0JLyogQXQgcHJlc2VudCwgR0RT
LCBHV1MgYW5kIE9BIHJlc291cmNlcyBmb3IgZ2Z4IChncmFwaGljcykKPiArCS8qIEF0IHByZXNl
bnQsIEdEUyBhbmQgT0EgcmVzb3VyY2VzIGZvciBnZnggKGdyYXBoaWNzKQo+ICAgCSAqIGlzIGFs
d2F5cyBwcmUtYWxsb2NhdGVkIGFuZCBhdmFpbGFibGUgZm9yIGdyYXBoaWNzIG9wZXJhdGlvbi4K
PiAgIAkgKiBTdWNoIHJlc291cmNlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBnZnggY2xpZW50cy4K
PiAgIAkgKiBUT0RPOiBtb3ZlIHRoaXMgb3BlcmF0aW9uIHRvIHVzZXIgc3BhY2UKPiAgIAkgKiAq
Lwo+ICAgCXN0cnVjdCBhbWRncHVfYm8qCQlnZHNfZ2Z4X2JvOwo+IC0Jc3RydWN0IGFtZGdwdV9i
byoJCWd3c19nZnhfYm87Cj4gICAJc3RydWN0IGFtZGdwdV9ibyoJCW9hX2dmeF9ibzsKPiAgIH07
Cj4gICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0
bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCj4gaW5kZXggMzhj
ZTExZS4uYjBlNTFlNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdHRtLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRt
LmMKPiBAQCAtMTc5MSwxMiArMTc5MSw2IEBAIGludCBhbWRncHVfdHRtX2luaXQoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAJCXJldHVybiByOwo+ICAgCX0KPiAgIAo+IC0JciA9IGFt
ZGdwdV9ib19jcmVhdGVfa2VybmVsKGFkZXYsIGFkZXYtPmdkcy5nd3MuZ2Z4X3BhcnRpdGlvbl9z
aXplLAo+IC0JCQkJICAgIDEsIEFNREdQVV9HRU1fRE9NQUlOX0dXUywKPiAtCQkJCSAgICAmYWRl
di0+Z2RzLmd3c19nZnhfYm8sIE5VTEwsIE5VTEwpOwo+IC0JaWYgKHIpCj4gLQkJcmV0dXJuIHI7
Cj4gLQo+ICAgCXIgPSB0dG1fYm9faW5pdF9tbSgmYWRldi0+bW1hbi5iZGV2LCBBTURHUFVfUExf
T0EsCj4gICAJCQkgICBhZGV2LT5nZHMub2EudG90YWxfc2l6ZSk7Cj4gICAJaWYgKHIpIHsKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y3XzAuYyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92N18wLmMKPiBpbmRleCBhNTllMGZkLi40ZDczNDU2
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92N18wLmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjdfMC5jCj4gQEAgLTQ0OTcsNyAr
NDQ5Nyw2IEBAIHN0YXRpYyBpbnQgZ2Z4X3Y3XzBfc3dfZmluaSh2b2lkICpoYW5kbGUpCj4gICAJ
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5k
bGU7Cj4gICAKPiAgIAlhbWRncHVfYm9fZnJlZV9rZXJuZWwoJmFkZXYtPmdkcy5vYV9nZnhfYm8s
IE5VTEwsIE5VTEwpOwo+IC0JYW1kZ3B1X2JvX2ZyZWVfa2VybmVsKCZhZGV2LT5nZHMuZ3dzX2dm
eF9ibywgTlVMTCwgTlVMTCk7Cj4gICAJYW1kZ3B1X2JvX2ZyZWVfa2VybmVsKCZhZGV2LT5nZHMu
Z2RzX2dmeF9ibywgTlVMTCwgTlVMTCk7Cj4gICAKPiAgIAlmb3IgKGkgPSAwOyBpIDwgYWRldi0+
Z2Z4Lm51bV9nZnhfcmluZ3M7IGkrKykKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvZ2Z4X3Y4XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OF8w
LmMKPiBpbmRleCAwMjk1NWU2Li5lMjU1NzU0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2dmeF92OF8wLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9nZnhfdjhfMC5jCj4gQEAgLTIwNjEsNyArMjA2MSw2IEBAIHN0YXRpYyBpbnQgZ2Z4X3Y4XzBf
c3dfZmluaSh2b2lkICpoYW5kbGUpCj4gICAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7Cj4gICAKPiAgIAlhbWRncHVfYm9fZnJlZV9r
ZXJuZWwoJmFkZXYtPmdkcy5vYV9nZnhfYm8sIE5VTEwsIE5VTEwpOwo+IC0JYW1kZ3B1X2JvX2Zy
ZWVfa2VybmVsKCZhZGV2LT5nZHMuZ3dzX2dmeF9ibywgTlVMTCwgTlVMTCk7Cj4gICAJYW1kZ3B1
X2JvX2ZyZWVfa2VybmVsKCZhZGV2LT5nZHMuZ2RzX2dmeF9ibywgTlVMTCwgTlVMTCk7Cj4gICAK
PiAgIAlmb3IgKGkgPSAwOyBpIDwgYWRldi0+Z2Z4Lm51bV9nZnhfcmluZ3M7IGkrKykKPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMKPiBpbmRleCA3ZDdkMjg3Li40MWQxZmMzIDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjlfMC5jCj4gQEAgLTE3ODUsNyArMTc4
NSw2IEBAIHN0YXRpYyBpbnQgZ2Z4X3Y5XzBfc3dfZmluaSh2b2lkICpoYW5kbGUpCj4gICAJfQo+
ICAgCj4gICAJYW1kZ3B1X2JvX2ZyZWVfa2VybmVsKCZhZGV2LT5nZHMub2FfZ2Z4X2JvLCBOVUxM
LCBOVUxMKTsKPiAtCWFtZGdwdV9ib19mcmVlX2tlcm5lbCgmYWRldi0+Z2RzLmd3c19nZnhfYm8s
IE5VTEwsIE5VTEwpOwo+ICAgCWFtZGdwdV9ib19mcmVlX2tlcm5lbCgmYWRldi0+Z2RzLmdkc19n
ZnhfYm8sIE5VTEwsIE5VTEwpOwo+ICAgCj4gICAJZm9yIChpID0gMDsgaSA8IGFkZXYtPmdmeC5u
dW1fZ2Z4X3JpbmdzOyBpKyspCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1n
Zng=
