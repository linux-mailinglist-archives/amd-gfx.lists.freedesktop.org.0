Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B190A18CE6
	for <lists+amd-gfx@lfdr.de>; Thu,  9 May 2019 17:24:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1C4B9892EF;
	Thu,  9 May 2019 15:24:26 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EA3FA892EF
 for <amd-gfx@lists.freedesktop.org>; Thu,  9 May 2019 15:24:24 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id w12so3660950wrp.2
 for <amd-gfx@lists.freedesktop.org>; Thu, 09 May 2019 08:24:24 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=AxkD6h36iU/2y4SW7USPYiCbCh8N18TvfsMMjeI6R58=;
 b=OtmiGgjVIhFyRY02hmNPAXXNJDZYfuX+BO/PUNwJha8+s1QQuCTZHN59dy+huGhXk/
 qvLZN8YwBHjntS4dJQYwPOIgUYyj/gRzwWJPqwSmxcltc/Hge6M0ZHMKHdWyx974zyAg
 VabFc3Wh+agdHaQNWvs9LEX3ZlFt69yH5faFsFgsfCbeetaQlxPKXZ8IpeMVMrTmxYdA
 i78c5z8rzEcPJuRx3WouvUPBeSN5pGxmuBcYasae2jL9/jcXfAqUW0OXcfOLdnFEppv1
 FNUJPM2XFa2KciIskUpJj3kHyUcI5bbHVibgBy14bouevjLZArPgQ0y+5UoakAmvtxIA
 o2bg==
X-Gm-Message-State: APjAAAVRUS7zEwVdZsPhlLYrUsq0g4hu0jHBJ6KNjUG9rjqMVdZ/17vd
 1ro9flAja0+C9BdQYxF1ANwENQ2tKZ2IEX6aoFQ=
X-Google-Smtp-Source: APXvYqwtHQA/Z5GjqdHQWyIE0+t4GunkQGJIjst6UIGQsBWJfe7wm/5KB9b/oPwdSe8r6pgqB6ju1mKWi+SbzK8r/qc=
X-Received: by 2002:adf:eb02:: with SMTP id s2mr3620938wrn.29.1557415463435;
 Thu, 09 May 2019 08:24:23 -0700 (PDT)
MIME-Version: 1.0
References: <SN6PR12MB280055871BC84DB8396BDAFB87330@SN6PR12MB2800.namprd12.prod.outlook.com>
In-Reply-To: <SN6PR12MB280055871BC84DB8396BDAFB87330@SN6PR12MB2800.namprd12.prod.outlook.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Thu, 9 May 2019 11:24:11 -0400
Message-ID: <CADnq5_MF_MQw=4aA2hW_agDhfwcsZX-BrW0TEO2Q7Bh9N2Z+7Q@mail.gmail.com>
Subject: Re: [PATCH v3] drm/amdgpu: add badpages sysfs interafce
To: "Pan, Xinhui" <Xinhui.Pan@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=AxkD6h36iU/2y4SW7USPYiCbCh8N18TvfsMMjeI6R58=;
 b=QTvcL6gDUFJaieFLdJEYg1COD2SodpgIm8udk7qCNOvPLV4aQRZzmaOk7b/ULf6ACY
 EELMpO6Obdd5O6ux3ogxYZpfZVyP70ZMmUYs8Xxc206rRrpgrgms1HIbLIJM8PZcYqp8
 0+uhOlBu3zabEV96v7UTzraCPiZM9tQ63n5fpgWVgJwVheacHxUgHA1kKIVvq/zfxFet
 qSTec5YdcT3zPrifclw9rey/NWAWuu7kweGx7f5W3scTcDdorrmy+GVgEQg7nq6ZAr5K
 yjRMg8q9cl0Cg26B5hT7Q3EVxiH1zCETpjs3gegh8LQc09QkT9c2px0HlCPH019nab5j
 r6hg==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBNYXkgOSwgMjAxOSBhdCA2OjMxIEFNIFBhbiwgWGluaHVpIDxYaW5odWkuUGFuQGFt
ZC5jb20+IHdyb3RlOgo+Cj4gYWRkIGJhZHBhZ2VzIG5vZGUuCj4gaXQgd2lsbCBvdXRwdXQgYmFk
cGFnZXMgbGlzdCBpbiBmb3JtYXQKPiBncHUgcGZuIDogZ3B1IHBhZ2Ugc2l6ZSA6IGZsYWdzCj4K
PiBleGFtcGxlCj4gMHgwMDAwMDAwMCA6IDB4MDAwMDEwMDAgOiBSCj4gMHgwMDAwMDAwMSA6IDB4
MDAwMDEwMDAgOiBSCj4gMHgwMDAwMDAwMiA6IDB4MDAwMDEwMDAgOiBSCj4gMHgwMDAwMDAwMyA6
IDB4MDAwMDEwMDAgOiBSCj4gMHgwMDAwMDAwNCA6IDB4MDAwMDEwMDAgOiBSCj4gMHgwMDAwMDAw
NSA6IDB4MDAwMDEwMDAgOiBSCj4gMHgwMDAwMDAwNiA6IDB4MDAwMDEwMDAgOiBSCj4gMHgwMDAw
MDAwNyA6IDB4MDAwMDEwMDAgOiBQCj4gMHgwMDAwMDAwOCA6IDB4MDAwMDEwMDAgOiBQCj4gMHgw
MDAwMDAwOSA6IDB4MDAwMDEwMDAgOiBQCj4KPiBmbGFncyBjYW4gYmUgb25lIG9mIGJlbG93IGNo
YXJhY3RlcnMKPiBSOiByZXNlcnZlZC4KPiBQOiBwZW5kaW5nIGZvciByZXNlcnZlLgo+IEY6IGZh
aWxlZCB0byByZXNlcnZlIGZvciBzb21lIHJlYXNvbnMuCj4KPiBTaWduZWQtb2ZmLWJ5OiB4aW5o
dWkgcGFuIDx4aW5odWkucGFuQGFtZC5jb20+CgpSZXZpZXdlZC1ieTogQWxleCBEZXVjaGVyIDxh
bGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgoKPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3Jhcy5jIHwgMTQ2ICsrKysrKysrKysrKysrKysrKysrKysrKwo+ICBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzLmggfCAgIDEgKwo+ICAyIGZpbGVzIGNo
YW5nZWQsIDE0NyBpbnNlcnRpb25zKCspCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3Jhcy5jCj4gaW5kZXggYzYwZDVmODEzODAxLi5jOWUyNGY2MDkzOGUgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5jCj4gQEAgLTkwLDYgKzkwLDEyIEBAIHN0
cnVjdCByYXNfbWFuYWdlciB7Cj4gICAgICAgICBzdHJ1Y3QgcmFzX2Vycl9kYXRhIGVycl9kYXRh
Owo+ICB9Owo+Cj4gK3N0cnVjdCByYXNfYmFkcGFnZSB7Cj4gKyAgICAgICB1bnNpZ25lZCBpbnQg
YnA7Cj4gKyAgICAgICB1bnNpZ25lZCBpbnQgc2l6ZTsKPiArICAgICAgIHVuc2lnbmVkIGludCBm
bGFnczsKPiArfTsKPiArCj4gIGNvbnN0IGNoYXIgKnJhc19lcnJvcl9zdHJpbmdbXSA9IHsKPiAg
ICAgICAgICJub25lIiwKPiAgICAgICAgICJwYXJpdHkiLAo+IEBAIC03MTAsNiArNzE2LDc3IEBA
IGludCBhbWRncHVfcmFzX3F1ZXJ5X2Vycm9yX2NvdW50KHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2LAo+Cj4gIC8qIHN5c2ZzIGJlZ2luICovCj4KPiArc3RhdGljIGludCBhbWRncHVfcmFzX2Jh
ZHBhZ2VzX3JlYWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gKyAgICAgICAgICAgICAg
IHN0cnVjdCByYXNfYmFkcGFnZSAqKmJwcywgdW5zaWduZWQgaW50ICpjb3VudCk7Cj4gKwo+ICtz
dGF0aWMgY2hhciAqYW1kZ3B1X3Jhc19iYWRwYWdlX2ZsYWdzX3N0cih1bnNpZ25lZCBpbnQgZmxh
Z3MpCj4gK3sKPiArICAgICAgIHN3aXRjaCAoZmxhZ3MpIHsKPiArICAgICAgIGNhc2UgMDoKPiAr
ICAgICAgICAgICAgICAgcmV0dXJuICJSIjsKPiArICAgICAgIGNhc2UgMToKPiArICAgICAgICAg
ICAgICAgcmV0dXJuICJQIjsKPiArICAgICAgIGNhc2UgMjoKPiArICAgICAgIGRlZmF1bHQ6Cj4g
KyAgICAgICAgICAgICAgIHJldHVybiAiRiI7Cj4gKyAgICAgICB9Owo+ICt9Cj4gKwo+ICsvKgo+
ICsgKiBET0M6IHJhcyBzeXNmcyBncHVfdnJhbV9iYWRfcGFnZXMgaW50ZXJmYWNlCj4gKyAqCj4g
KyAqIEl0IGFsbG93cyB1c2VyIHRvIHJlYWQgdGhlIGJhZCBwYWdlcyBvZiB2cmFtIG9uIHRoZSBn
cHUgdGhyb3VnaAo+ICsgKiAvc3lzL2NsYXNzL2RybS9jYXJkWzAvMS8yLi4uXS9kZXZpY2UvcmFz
L2dwdV92cmFtX2JhZF9wYWdlcwo+ICsgKgo+ICsgKiBJdCBvdXRwdXRzIG11bHRpcGxlIGxpbmVz
LCBhbmQgZWFjaCBsaW5lIHN0YW5kcyBmb3Igb25lIGdwdSBwYWdlLgo+ICsgKgo+ICsgKiBUaGUg
Zm9ybWF0IG9mIG9uZSBsaW5lIGlzIGJlbG93LAo+ICsgKiBncHUgcGZuIDogZ3B1IHBhZ2Ugc2l6
ZSA6IGZsYWdzCj4gKyAqCj4gKyAqIGdwdSBwZm4gYW5kIGdwdSBwYWdlIHNpemUgYXJlIHByaW50
ZWQgaW4gaGV4IGZvcm1hdC4KPiArICogZmxhZ3MgY2FuIGJlIG9uZSBvZiBiZWxvdyBjaGFyYWN0
ZXIsCj4gKyAqIFI6IHJlc2VydmVkLCB0aGlzIGdwdSBwYWdlIGlzIHJlc2VydmVkIGFuZCBub3Qg
YWJsZSB0byB1c2UuCj4gKyAqIFA6IHBlbmRpbmcgZm9yIHJlc2VydmUsIHRoaXMgZ3B1IHBhZ2Ug
aXMgbWFya2VkIGFzIGJhZCwgd2lsbCBiZSByZXNlcnZlZAo+ICsgKiAgICBpbiBuZXh0IHdpbmRv
dyBvZiBwYWdlX3Jlc2VydmUuCj4gKyAqIEY6IHVuYWJsZSB0byByZXNlcnZlLiB0aGlzIGdwdSBw
YWdlIGNhbid0IGJlIHJlc2VydmVkIGR1ZSB0byBzb21lIHJlYXNvbnMuCj4gKyAqCj4gKyAqIGV4
YW1wbGVzOgo+ICsgKiAweDAwMDAwMDAxIDogMHgwMDAwMTAwMCA6IFIKPiArICogMHgwMDAwMDAw
MiA6IDB4MDAwMDEwMDAgOiBQCj4gKyAqLwo+ICsKPiArc3RhdGljIHNzaXplX3QgYW1kZ3B1X3Jh
c19zeXNmc19iYWRwYWdlc19yZWFkKHN0cnVjdCBmaWxlICpmLAo+ICsgICAgICAgICAgICAgICBz
dHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IGJpbl9hdHRyaWJ1dGUgKmF0dHIsCj4gKyAgICAg
ICAgICAgICAgIGNoYXIgKmJ1ZiwgbG9mZl90IHBwb3MsIHNpemVfdCBjb3VudCkKPiArewo+ICsg
ICAgICAgc3RydWN0IGFtZGdwdV9yYXMgKmNvbiA9Cj4gKyAgICAgICAgICAgICAgIGNvbnRhaW5l
cl9vZihhdHRyLCBzdHJ1Y3QgYW1kZ3B1X3JhcywgYmFkcGFnZXNfYXR0cik7Cj4gKyAgICAgICBz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGNvbi0+YWRldjsKPiArICAgICAgIGNvbnN0IHVu
c2lnbmVkIGludCBlbGVtZW50X3NpemUgPQo+ICsgICAgICAgICAgICAgICBzaXplb2YoIjB4YWJj
ZGFiY2QgOiAweDEyMzQ1Njc4IDogUlxuIikgLSAxOwo+ICsgICAgICAgdW5zaWduZWQgaW50IHN0
YXJ0ID0gKHBwb3MgKyBlbGVtZW50X3NpemUgLSAxKSAvIGVsZW1lbnRfc2l6ZTsKPiArICAgICAg
IHVuc2lnbmVkIGludCBlbmQgPSAocHBvcyArIGNvdW50IC0gMSkgLyBlbGVtZW50X3NpemU7Cj4g
KyAgICAgICBzc2l6ZV90IHMgPSAwOwo+ICsgICAgICAgc3RydWN0IHJhc19iYWRwYWdlICpicHMg
PSBOVUxMOwo+ICsgICAgICAgdW5zaWduZWQgaW50IGJwc19jb3VudCA9IDA7Cj4gKwo+ICsgICAg
ICAgbWVtc2V0KGJ1ZiwgMCwgY291bnQpOwo+ICsKPiArICAgICAgIGlmIChhbWRncHVfcmFzX2Jh
ZHBhZ2VzX3JlYWQoYWRldiwgJmJwcywgJmJwc19jb3VudCkpCj4gKyAgICAgICAgICAgICAgIHJl
dHVybiAwOwo+ICsKPiArICAgICAgIGZvciAoOyBzdGFydCA8IGVuZCAmJiBzdGFydCA8IGJwc19j
b3VudDsgc3RhcnQrKykKPiArICAgICAgICAgICAgICAgcyArPSBzY25wcmludGYoJmJ1ZltzXSwg
ZWxlbWVudF9zaXplICsgMSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIweCUw
OHggOiAweCUwOHggOiAlMXNcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBi
cHNbc3RhcnRdLmJwLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnBzW3N0YXJ0
XS5zaXplLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X3Jhc19iYWRw
YWdlX2ZsYWdzX3N0cihicHNbc3RhcnRdLmZsYWdzKSk7Cj4gKwo+ICsgICAgICAga2ZyZWUoYnBz
KTsKPiArCj4gKyAgICAgICByZXR1cm4gczsKPiArfQo+ICsKPiAgc3RhdGljIHNzaXplX3QgYW1k
Z3B1X3Jhc19zeXNmc19mZWF0dXJlc19yZWFkKHN0cnVjdCBkZXZpY2UgKmRldiwKPiAgICAgICAg
ICAgICAgICAgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKPiAgewo+
IEBAIC03NTAsOSArODI3LDE0IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3Jhc19zeXNmc19jcmVhdGVf
ZmVhdHVyZV9ub2RlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgICAgICAgICAgICAg
ICAmY29uLT5mZWF0dXJlc19hdHRyLmF0dHIsCj4gICAgICAgICAgICAgICAgIE5VTEwKPiAgICAg
ICAgIH07Cj4gKyAgICAgICBzdHJ1Y3QgYmluX2F0dHJpYnV0ZSAqYmluX2F0dHJzW10gPSB7Cj4g
KyAgICAgICAgICAgICAgICZjb24tPmJhZHBhZ2VzX2F0dHIsCj4gKyAgICAgICAgICAgICAgIE5V
TEwKPiArICAgICAgIH07Cj4gICAgICAgICBzdHJ1Y3QgYXR0cmlidXRlX2dyb3VwIGdyb3VwID0g
ewo+ICAgICAgICAgICAgICAgICAubmFtZSA9ICJyYXMiLAo+ICAgICAgICAgICAgICAgICAuYXR0
cnMgPSBhdHRycywKPiArICAgICAgICAgICAgICAgLmJpbl9hdHRycyA9IGJpbl9hdHRycywKPiAg
ICAgICAgIH07Cj4KPiAgICAgICAgIGNvbi0+ZmVhdHVyZXNfYXR0ciA9IChzdHJ1Y3QgZGV2aWNl
X2F0dHJpYnV0ZSkgewo+IEBAIC03NjIsNyArODQ0LDE5IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3Jh
c19zeXNmc19jcmVhdGVfZmVhdHVyZV9ub2RlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+
ICAgICAgICAgICAgICAgICB9LAo+ICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93ID0gYW1k
Z3B1X3Jhc19zeXNmc19mZWF0dXJlc19yZWFkLAo+ICAgICAgICAgfTsKPiArCj4gKyAgICAgICBj
b24tPmJhZHBhZ2VzX2F0dHIgPSAoc3RydWN0IGJpbl9hdHRyaWJ1dGUpIHsKPiArICAgICAgICAg
ICAgICAgLmF0dHIgPSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgLm5hbWUgPSAiZ3B1X3Zy
YW1fYmFkX3BhZ2VzIiwKPiArICAgICAgICAgICAgICAgICAgICAgICAubW9kZSA9IFNfSVJVR08s
Cj4gKyAgICAgICAgICAgICAgIH0sCj4gKyAgICAgICAgICAgICAgIC5zaXplID0gMCwKPiArICAg
ICAgICAgICAgICAgLnByaXZhdGUgPSBOVUxMLAo+ICsgICAgICAgICAgICAgICAucmVhZCA9IGFt
ZGdwdV9yYXNfc3lzZnNfYmFkcGFnZXNfcmVhZCwKPiArICAgICAgIH07Cj4gKwo+ICAgICAgICAg
c3lzZnNfYXR0cl9pbml0KGF0dHJzWzBdKTsKPiArICAgICAgIHN5c2ZzX2Jpbl9hdHRyX2luaXQo
YmluX2F0dHJzWzBdKTsKPgo+ICAgICAgICAgcmV0dXJuIHN5c2ZzX2NyZWF0ZV9ncm91cCgmYWRl
di0+ZGV2LT5rb2JqLCAmZ3JvdXApOwo+ICB9Cj4gQEAgLTc3NCw5ICs4NjgsMTQgQEAgc3RhdGlj
IGludCBhbWRncHVfcmFzX3N5c2ZzX3JlbW92ZV9mZWF0dXJlX25vZGUoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpCj4gICAgICAgICAgICAgICAgICZjb24tPmZlYXR1cmVzX2F0dHIuYXR0ciwK
PiAgICAgICAgICAgICAgICAgTlVMTAo+ICAgICAgICAgfTsKPiArICAgICAgIHN0cnVjdCBiaW5f
YXR0cmlidXRlICpiaW5fYXR0cnNbXSA9IHsKPiArICAgICAgICAgICAgICAgJmNvbi0+YmFkcGFn
ZXNfYXR0ciwKPiArICAgICAgICAgICAgICAgTlVMTAo+ICsgICAgICAgfTsKPiAgICAgICAgIHN0
cnVjdCBhdHRyaWJ1dGVfZ3JvdXAgZ3JvdXAgPSB7Cj4gICAgICAgICAgICAgICAgIC5uYW1lID0g
InJhcyIsCj4gICAgICAgICAgICAgICAgIC5hdHRycyA9IGF0dHJzLAo+ICsgICAgICAgICAgICAg
ICAuYmluX2F0dHJzID0gYmluX2F0dHJzLAo+ICAgICAgICAgfTsKPgo+ICAgICAgICAgc3lzZnNf
cmVtb3ZlX2dyb3VwKCZhZGV2LT5kZXYtPmtvYmosICZncm91cCk7Cj4gQEAgLTExMDgsNiArMTIw
Nyw1MyBAQCBzdGF0aWMgaW50IGFtZGdwdV9yYXNfaW50ZXJydXB0X3JlbW92ZV9hbGwoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gIC8qIGloIGVuZCAqLwo+Cj4gIC8qIHJlY292ZXJ5IGJl
Z2luICovCj4gKwo+ICsvKiByZXR1cm4gMCBvbiBzdWNjZXNzLgo+ICsgKiBjYWxsZXIgbmVlZCBm
cmVlIGJwcy4KPiArICovCj4gK3N0YXRpYyBpbnQgYW1kZ3B1X3Jhc19iYWRwYWdlc19yZWFkKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgcmFzX2Jh
ZHBhZ2UgKipicHMsIHVuc2lnbmVkIGludCAqY291bnQpCj4gK3sKPiArICAgICAgIHN0cnVjdCBh
bWRncHVfcmFzICpjb24gPSBhbWRncHVfcmFzX2dldF9jb250ZXh0KGFkZXYpOwo+ICsgICAgICAg
c3RydWN0IHJhc19lcnJfaGFuZGxlcl9kYXRhICpkYXRhOwo+ICsgICAgICAgaW50IGkgPSAwOwo+
ICsgICAgICAgaW50IHJldCA9IDA7Cj4gKwo+ICsgICAgICAgaWYgKCFjb24gfHwgIWNvbi0+ZWhf
ZGF0YSB8fCAhYnBzIHx8ICFjb3VudCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7
Cj4gKwo+ICsgICAgICAgbXV0ZXhfbG9jaygmY29uLT5yZWNvdmVyeV9sb2NrKTsKPiArICAgICAg
IGRhdGEgPSBjb24tPmVoX2RhdGE7Cj4gKyAgICAgICBpZiAoIWRhdGEgfHwgZGF0YS0+Y291bnQg
PT0gMCkgewo+ICsgICAgICAgICAgICAgICAqYnBzID0gTlVMTDsKPiArICAgICAgICAgICAgICAg
Z290byBvdXQ7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgKmJwcyA9IGttYWxsb2Moc2l6ZW9m
KHN0cnVjdCByYXNfYmFkcGFnZSkgKiBkYXRhLT5jb3VudCwgR0ZQX0tFUk5FTCk7Cj4gKyAgICAg
ICBpZiAoISpicHMpIHsKPiArICAgICAgICAgICAgICAgcmV0ID0gLUVOT01FTTsKPiArICAgICAg
ICAgICAgICAgZ290byBvdXQ7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgZm9yICg7IGkgPCBk
YXRhLT5jb3VudDsgaSsrKSB7Cj4gKyAgICAgICAgICAgICAgICgqYnBzKVtpXSA9IChzdHJ1Y3Qg
cmFzX2JhZHBhZ2Upewo+ICsgICAgICAgICAgICAgICAgICAgICAgIC5icCA9IGRhdGEtPmJwc1tp
XS5icCwKPiArICAgICAgICAgICAgICAgICAgICAgICAuc2l6ZSA9IEFNREdQVV9HUFVfUEFHRV9T
SVpFLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIC5mbGFncyA9IDAsCj4gKyAgICAgICAgICAg
ICAgIH07Cj4gKwo+ICsgICAgICAgICAgICAgICBpZiAoZGF0YS0+bGFzdF9yZXNlcnZlZCA8PSBp
KQo+ICsgICAgICAgICAgICAgICAgICAgICAgICgqYnBzKVtpXS5mbGFncyA9IDE7Cj4gKyAgICAg
ICAgICAgICAgIGVsc2UgaWYgKGRhdGEtPmJwc1tpXS5ibyA9PSBOVUxMKQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICgqYnBzKVtpXS5mbGFncyA9IDI7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAg
ICAgKmNvdW50ID0gZGF0YS0+Y291bnQ7Cj4gK291dDoKPiArICAgICAgIG11dGV4X3VubG9jaygm
Y29uLT5yZWNvdmVyeV9sb2NrKTsKPiArICAgICAgIHJldHVybiByZXQ7Cj4gK30KPiArCj4gIHN0
YXRpYyB2b2lkIGFtZGdwdV9yYXNfZG9fcmVjb3Zlcnkoc3RydWN0IHdvcmtfc3RydWN0ICp3b3Jr
KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X3JhcyAqcmFzID0KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oCj4gaW5kZXggMDY1YzY2YmFmOTQ3Li5lMmRmZjAwYjhk
MWMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5o
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oCj4gQEAgLTkz
LDYgKzkzLDcgQEAgc3RydWN0IGFtZGdwdV9yYXMgewo+ICAgICAgICAgc3RydWN0IGRlbnRyeSAq
ZW50Owo+ICAgICAgICAgLyogc3lzZnMgKi8KPiAgICAgICAgIHN0cnVjdCBkZXZpY2VfYXR0cmli
dXRlIGZlYXR1cmVzX2F0dHI7Cj4gKyAgICAgICBzdHJ1Y3QgYmluX2F0dHJpYnV0ZSBiYWRwYWdl
c19hdHRyOwo+ICAgICAgICAgLyogYmxvY2sgYXJyYXkgKi8KPiAgICAgICAgIHN0cnVjdCByYXNf
bWFuYWdlciAqb2JqczsKPgo+IC0tCj4gMi4xNy4xCj4KPiBfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwo+IGFtZC1nZnggbWFpbGluZyBsaXN0Cj4gYW1kLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2FtZC1nZngKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9h
bWQtZ2Z4
