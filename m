Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 50A6BE5682
	for <lists+amd-gfx@lfdr.de>; Sat, 26 Oct 2019 00:32:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 692C06EBB7;
	Fri, 25 Oct 2019 22:32:50 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4199D6EBB7
 for <amd-gfx@lists.freedesktop.org>; Fri, 25 Oct 2019 22:32:48 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id s1so4043381wro.0
 for <amd-gfx@lists.freedesktop.org>; Fri, 25 Oct 2019 15:32:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=m3vMRJMbLOWhHFk7PSlhSmePw2QBTF7AKqwznMHjTWo=;
 b=GrILq41cfazPqwLUGkP9y3Q5CW+K6sOYRDeEyrHtqHPDQJkPfjtnpPZnKEhCeI03n5
 mO/szSjVhROCfO8sbNs7HfplOPMy/Kz6mdRf6Buk5SY0okRfenlasLrtGezJE2qWeLsP
 Y4M8teuTiCjuuA2vRq26930wWCZ8C8sK8YZehwaXIcZi2WUjQZvt/UDncWdlbI6LMJbB
 ZvtjGNGML9q+5ivBhhQbhKEOPM6Whe0wrgs13YkiqfMwZroWg/1AK+SiEWpliFx7r2Gi
 zjiGUxe5dyYB/sHZ+IipbYr3xhxEMJRoM7jMpNLUq0zDGd3QpK1rnKhhd53ma1KYEL7R
 Aaeg==
X-Gm-Message-State: APjAAAUC+jmmrds1snRzywNP9BlUZE0wChx+vXLUR5vo4idygf7irif0
 X9W5WSRSjORoQWm5a/gFMZ1ecayOQ99xU9sLDok=
X-Google-Smtp-Source: APXvYqwLwLeLZCIOU4MD6n+JMDUnxRl5PzgBqmUHjfqxCNinzTU/vsQRR0fNpgzqw/VAsvDA9/1M0NX9+L2W0/aUr40=
X-Received: by 2002:adf:ed02:: with SMTP id a2mr4856779wro.11.1572042766555;
 Fri, 25 Oct 2019 15:32:46 -0700 (PDT)
MIME-Version: 1.0
References: <20191025121603.51204-1-christian.koenig@amd.com>
In-Reply-To: <20191025121603.51204-1-christian.koenig@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Fri, 25 Oct 2019 18:32:34 -0400
Message-ID: <CADnq5_Mk2_1hOgrDTGLZOH7gh2Rb3LDtSL8buiVtwbum0=p+LQ@mail.gmail.com>
Subject: Re: [PATCH 1/2] drm/amdgpu: add independent DMA-buf export v7
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <ckoenig.leichtzumerken@gmail.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=m3vMRJMbLOWhHFk7PSlhSmePw2QBTF7AKqwznMHjTWo=;
 b=Ei7PRV7/9l2UJBon3PHQ+ZSH5Cq522YcZk+8jDlRZ4exnR8fw5wkhePq3PZK60ThmB
 aQ1CpkMlgXg6Fb8zUxf27FNVC3aOCbbW+KoZQj4poRVZeHB1lPwq2TYlrJ9sMi5RyCUG
 DdT9t+4kWIuZVZGKPvIG7ILlpPY0Hf6+eFs8ax1Sb73WTlqW6UvUFlcWI5w8Q/0ilI6l
 cjj4mCH3nMNBLlZsEdhgM5Z5LFS59e28Af6ADjOtBLwmRCy3FesalsfxCVffY3HxUq7I
 wDa0JSe6T5Rz0Eys+Be+10QqAoIMWVTez2g18KS0KVppZw4b5dmv+nl/WzQBjGQezY4D
 VUUw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBPY3QgMjUsIDIwMTkgYXQgODoxNiBBTSBDaHJpc3RpYW4gS8O2bmlnCjxja29lbmln
LmxlaWNodHp1bWVya2VuQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBBZGQgYW4gRE1BLWJ1ZiBleHBv
cnQgaW1wbGVtZW50YXRpb24gaW5kZXBlbmRlbnQgb2YgdGhlIERSTSBoZWxwZXJzLgo+Cj4gVGhp
cyBub3Qgb25seSBhdm9pZHMgdGhlIGNhY2hpbmcgb2YgRE1BLWJ1ZiBtYXBwaW5ncywgYnV0IGFs
c28KPiBhbGxvd3MgdXMgdG8gdXNlIHRoZSBuZXcgZHluYW1pYyBsb2NraW5nIGFwcHJvYWNoLgo+
Cj4gVGhpcyBpcyBhbHNvIGEgcHJlcmVxdWlzaXRlIG9mIHVucGlubmVkIERNQS1idWYgaGFuZGxp
bmcuCj4KPiB2MjogZml4IHVuaW50ZW5kZWQgcmVjdXJzaW9uLCByZW1vdmUgZGVidWdnaW5nIGxl
ZnRvdmVycwo+IHYzOiBzcGxpdCBvdXQgZnJvbSB1bnBpbm5lZCBETUEtYnVmIHdvcmsKPiB2NDog
cmViYXNlIG9uIHRvcCBvZiBuZXcgbm9fc2d0X2NhY2hlIGZsYWcKPiB2NTogZml4IHNvbWUgd2Fy
bmluZ3MgYnkgaW5jbHVkaW5nIGFtZGdwdV9kbWFfYnVmLmgKPiB2NjogZml4IGxvY2tpbmcgZm9y
IG5vbiBhbWRncHUgZXhwb3J0cwo+IHY3OiByZWJhc2VkIG9uIG5ldyBETUEtYnVmIGxvY2tpbmcg
cGF0Y2gKPgo+IFNpZ25lZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2Vu
aWdAYW1kLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rt
YV9idWYuYyB8IDE3MiArKysrKysrKysrKy0tLS0tLS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5oIHwgICAxIC0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2Rydi5jICAgICB8ICAgMSAtCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9vYmplY3QuYyAgfCAgIDEgKwo+ICA0IGZpbGVzIGNoYW5nZWQsIDk3IGluc2Vy
dGlvbnMoKyksIDc4IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZG1hX2J1Zi5jCj4gaW5kZXggNjFmMTA4ZWMyYjVjLi5mMTRiNTJjYzcyMDUgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMKPiBAQCAt
MzQsMjYgKzM0LDExIEBACj4gICNpbmNsdWRlICJhbWRncHUuaCIKPiAgI2luY2x1ZGUgImFtZGdw
dV9kaXNwbGF5LmgiCj4gICNpbmNsdWRlICJhbWRncHVfZ2VtLmgiCj4gKyNpbmNsdWRlICJhbWRn
cHVfZG1hX2J1Zi5oIgo+ICAjaW5jbHVkZSA8ZHJtL2FtZGdwdV9kcm0uaD4KPiAgI2luY2x1ZGUg
PGxpbnV4L2RtYS1idWYuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L2RtYS1mZW5jZS1hcnJheS5oPgo+
Cj4gLS8qKgo+IC0gKiBhbWRncHVfZ2VtX3ByaW1lX2dldF9zZ190YWJsZSAtICZkcm1fZHJpdmVy
LmdlbV9wcmltZV9nZXRfc2dfdGFibGUKPiAtICogaW1wbGVtZW50YXRpb24KPiAtICogQG9iajog
R0VNIGJ1ZmZlciBvYmplY3QgKEJPKQo+IC0gKgo+IC0gKiBSZXR1cm5zOgo+IC0gKiBBIHNjYXR0
ZXIvZ2F0aGVyIHRhYmxlIGZvciB0aGUgcGlubmVkIHBhZ2VzIG9mIHRoZSBCTydzIG1lbW9yeS4K
PiAtICovCj4gLXN0cnVjdCBzZ190YWJsZSAqYW1kZ3B1X2dlbV9wcmltZV9nZXRfc2dfdGFibGUo
c3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gLXsKPiAtICAgICAgIHN0cnVjdCBhbWRncHVf
Ym8gKmJvID0gZ2VtX3RvX2FtZGdwdV9ibyhvYmopOwo+IC0gICAgICAgaW50IG5wYWdlcyA9IGJv
LT50Ym8ubnVtX3BhZ2VzOwo+IC0KPiAtICAgICAgIHJldHVybiBkcm1fcHJpbWVfcGFnZXNfdG9f
c2coYm8tPnRiby50dG0tPnBhZ2VzLCBucGFnZXMpOwo+IC19Cj4gLQo+ICAvKioKPiAgICogYW1k
Z3B1X2dlbV9wcmltZV92bWFwIC0gJmRtYV9idWZfb3BzLnZtYXAgaW1wbGVtZW50YXRpb24KPiAg
ICogQG9iajogR0VNIEJPCj4gQEAgLTE3OSw5MiArMTY0LDEyNiBAQCBfX2RtYV9yZXN2X21ha2Vf
ZXhjbHVzaXZlKHN0cnVjdCBkbWFfcmVzdiAqb2JqKQo+ICB9Cj4KPiAgLyoqCj4gLSAqIGFtZGdw
dV9kbWFfYnVmX21hcF9hdHRhY2ggLSAmZG1hX2J1Zl9vcHMuYXR0YWNoIGltcGxlbWVudGF0aW9u
Cj4gLSAqIEBkbWFfYnVmOiBTaGFyZWQgRE1BIGJ1ZmZlcgo+ICsgKiBhbWRncHVfZG1hX2J1Zl9h
dHRhY2ggLSAmZG1hX2J1Zl9vcHMuYXR0YWNoIGltcGxlbWVudGF0aW9uCj4gKyAqCj4gKyAqIEBk
bWFidWY6IERNQS1idWYgd2hlcmUgd2UgYXR0YWNoIHRvCj4gKyAqIEBhdHRhY2g6IGF0dGFjaG1l
bnQgdG8gYWRkCj4gKyAqCj4gKyAqIEFkZCB0aGUgYXR0YWNobWVudCBhcyB1c2VyIHRvIHRoZSBl
eHBvcnRlZCBETUEtYnVmLgo+ICsgKi8KPiArc3RhdGljIGludCBhbWRncHVfZG1hX2J1Zl9hdHRh
Y2goc3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpCj4gK3sKPiArICAgICAgIHN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqID0gZG1hYnVmLT5wcml2Owo+ICsgICAgICAgc3RydWN0
IGFtZGdwdV9ibyAqYm8gPSBnZW1fdG9fYW1kZ3B1X2JvKG9iaik7Cj4gKyAgICAgICBzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiA9IGFtZGdwdV90dG1fYWRldihiby0+dGJvLmJkZXYpOwo+ICsg
ICAgICAgaW50IHI7Cj4gKwo+ICsgICAgICAgaWYgKGF0dGFjaC0+ZGV2LT5kcml2ZXIgPT0gYWRl
di0+ZGV2LT5kcml2ZXIpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsKPiArICAgICAg
IHIgPSBhbWRncHVfYm9fcmVzZXJ2ZShibywgZmFsc2UpOwo+ICsgICAgICAgaWYgKHVubGlrZWx5
KHIgIT0gMCkpCj4gKyAgICAgICAgICAgICAgIHJldHVybiByOwo+ICsKPiArICAgICAgIC8qCj4g
KyAgICAgICAgKiBXZSBvbmx5IGNyZWF0ZSBzaGFyZWQgZmVuY2VzIGZvciBpbnRlcm5hbCB1c2Us
IGJ1dCBpbXBvcnRlcnMKPiArICAgICAgICAqIG9mIHRoZSBkbWFidWYgcmVseSBvbiBleGNsdXNp
dmUgZmVuY2VzIGZvciBpbXBsaWNpdGx5Cj4gKyAgICAgICAgKiB0cmFja2luZyB3cml0ZSBoYXph
cmRzLiBBcyBhbnkgb2YgdGhlIGN1cnJlbnQgZmVuY2VzIG1heQo+ICsgICAgICAgICogY29ycmVz
cG9uZCB0byBhIHdyaXRlLCB3ZSBuZWVkIHRvIGNvbnZlcnQgYWxsIGV4aXN0aW5nCj4gKyAgICAg
ICAgKiBmZW5jZXMgb24gdGhlIHJlc2VydmF0aW9uIG9iamVjdCBpbnRvIGEgc2luZ2xlIGV4Y2x1
c2l2ZQo+ICsgICAgICAgICogZmVuY2UuCj4gKyAgICAgICAgKi8KPiArICAgICAgIHIgPSBfX2Rt
YV9yZXN2X21ha2VfZXhjbHVzaXZlKGJvLT50Ym8uYmFzZS5yZXN2KTsKPiArICAgICAgIGlmIChy
KQo+ICsgICAgICAgICAgICAgICByZXR1cm4gcjsKPiArCj4gKyAgICAgICBiby0+cHJpbWVfc2hh
cmVkX2NvdW50Kys7Cj4gKyAgICAgICBhbWRncHVfYm9fdW5yZXNlcnZlKGJvKTsKPiArICAgICAg
IHJldHVybiAwOwo+ICt9Cj4gKwo+ICsvKioKPiArICogYW1kZ3B1X2RtYV9idWZfZGV0YWNoIC0g
JmRtYV9idWZfb3BzLmRldGFjaCBpbXBsZW1lbnRhdGlvbgo+ICsgKgo+ICsgKiBAZG1hYnVmOiBE
TUEtYnVmIHdoZXJlIHdlIHJlbW92ZSB0aGUgYXR0YWNobWVudCBmcm9tCj4gKyAqIEBhdHRhY2g6
IHRoZSBhdHRhY2htZW50IHRvIHJlbW92ZQo+ICsgKgo+ICsgKiBDYWxsZWQgd2hlbiBhbiBhdHRh
Y2htZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE1BLWJ1Zi4KPiArICovCj4gK3N0YXRpYyB2b2lk
IGFtZGdwdV9kbWFfYnVmX2RldGFjaChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRh
Y2gpCj4gK3sKPiArICAgICAgIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqID0gZG1hYnVmLT5w
cml2Owo+ICsgICAgICAgc3RydWN0IGFtZGdwdV9ibyAqYm8gPSBnZW1fdG9fYW1kZ3B1X2JvKG9i
aik7Cj4gKyAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGFtZGdwdV90dG1fYWRl
dihiby0+dGJvLmJkZXYpOwo+ICsKPiArICAgICAgIGlmIChhdHRhY2gtPmRldi0+ZHJpdmVyICE9
IGFkZXYtPmRldi0+ZHJpdmVyICYmIGJvLT5wcmltZV9zaGFyZWRfY291bnQpCj4gKyAgICAgICAg
ICAgICAgIGJvLT5wcmltZV9zaGFyZWRfY291bnQtLTsKPiArfQo+ICsKPiArLyoqCj4gKyAqIGFt
ZGdwdV9kbWFfYnVmX21hcCAtICZkbWFfYnVmX29wcy5tYXBfZG1hX2J1ZiBpbXBsZW1lbnRhdGlv
bgo+ICAgKiBAYXR0YWNoOiBETUEtYnVmIGF0dGFjaG1lbnQKPiArICogQGRpcjogRE1BIGRpcmVj
dGlvbgo+ICAgKgo+ICAgKiBNYWtlcyBzdXJlIHRoYXQgdGhlIHNoYXJlZCBETUEgYnVmZmVyIGNh
biBiZSBhY2Nlc3NlZCBieSB0aGUgdGFyZ2V0IGRldmljZS4KPiAgICogRm9yIG5vdywgc2ltcGx5
IHBpbnMgaXQgdG8gdGhlIEdUVCBkb21haW4sIHdoZXJlIGl0IHNob3VsZCBiZSBhY2Nlc3NpYmxl
IGJ5Cj4gICAqIGFsbCBETUEgZGV2aWNlcy4KPiAgICoKPiAgICogUmV0dXJuczoKPiAtICogMCBv
biBzdWNjZXNzIG9yIGEgbmVnYXRpdmUgZXJyb3IgY29kZSBvbiBmYWlsdXJlLgo+ICsgKiBzZ190
YWJsZSBmaWxsZWQgd2l0aCB0aGUgRE1BIGFkZHJlc3NlcyB0byB1c2Ugb3IgRVJSX1BSVCB3aXRo
IG5lZ2F0aXZlIGVycm9yCj4gKyAqIGNvZGUuCj4gICAqLwo+IC1zdGF0aWMgaW50IGFtZGdwdV9k
bWFfYnVmX21hcF9hdHRhY2goc3RydWN0IGRtYV9idWYgKmRtYV9idWYsCj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFj
aCkKPiArc3RhdGljIHN0cnVjdCBzZ190YWJsZSAqYW1kZ3B1X2RtYV9idWZfbWFwKHN0cnVjdCBk
bWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyKQo+ICB7Cj4gKyAgICAg
ICBzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1ZiA9IGF0dGFjaC0+ZG1hYnVmOwo+ICAgICAgICAgc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmogPSBkbWFfYnVmLT5wcml2Owo+ICAgICAgICAgc3RydWN0
IGFtZGdwdV9ibyAqYm8gPSBnZW1fdG9fYW1kZ3B1X2JvKG9iaik7Cj4gLSAgICAgICBzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiA9IGFtZGdwdV90dG1fYWRldihiby0+dGJvLmJkZXYpOwo+ICsg
ICAgICAgc3RydWN0IHNnX3RhYmxlICpzZ3Q7Cj4gICAgICAgICBsb25nIHI7Cj4KPiAtICAgICAg
IHIgPSBkcm1fZ2VtX21hcF9hdHRhY2goZG1hX2J1ZiwgYXR0YWNoKTsKPiAtICAgICAgIGlmIChy
KQo+IC0gICAgICAgICAgICAgICByZXR1cm4gcjsKPiAtCj4gLSAgICAgICByID0gYW1kZ3B1X2Jv
X3Jlc2VydmUoYm8sIGZhbHNlKTsKPiAtICAgICAgIGlmICh1bmxpa2VseShyICE9IDApKQo+IC0g
ICAgICAgICAgICAgICBnb3RvIGVycm9yX2RldGFjaDsKPiAtCj4gLQo+IC0gICAgICAgaWYgKGF0
dGFjaC0+ZGV2LT5kcml2ZXIgIT0gYWRldi0+ZGV2LT5kcml2ZXIpIHsKPiAtICAgICAgICAgICAg
ICAgLyoKPiAtICAgICAgICAgICAgICAgICogV2Ugb25seSBjcmVhdGUgc2hhcmVkIGZlbmNlcyBm
b3IgaW50ZXJuYWwgdXNlLCBidXQgaW1wb3J0ZXJzCj4gLSAgICAgICAgICAgICAgICAqIG9mIHRo
ZSBkbWFidWYgcmVseSBvbiBleGNsdXNpdmUgZmVuY2VzIGZvciBpbXBsaWNpdGx5Cj4gLSAgICAg
ICAgICAgICAgICAqIHRyYWNraW5nIHdyaXRlIGhhemFyZHMuIEFzIGFueSBvZiB0aGUgY3VycmVu
dCBmZW5jZXMgbWF5Cj4gLSAgICAgICAgICAgICAgICAqIGNvcnJlc3BvbmQgdG8gYSB3cml0ZSwg
d2UgbmVlZCB0byBjb252ZXJ0IGFsbCBleGlzdGluZwo+IC0gICAgICAgICAgICAgICAgKiBmZW5j
ZXMgb24gdGhlIHJlc2VydmF0aW9uIG9iamVjdCBpbnRvIGEgc2luZ2xlIGV4Y2x1c2l2ZQo+IC0g
ICAgICAgICAgICAgICAgKiBmZW5jZS4KPiAtICAgICAgICAgICAgICAgICovCj4gLSAgICAgICAg
ICAgICAgIHIgPSBfX2RtYV9yZXN2X21ha2VfZXhjbHVzaXZlKGJvLT50Ym8uYmFzZS5yZXN2KTsK
PiAtICAgICAgICAgICAgICAgaWYgKHIpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgZ290byBl
cnJvcl91bnJlc2VydmU7Cj4gLSAgICAgICB9Cj4gLQo+IC0gICAgICAgLyogcGluIGJ1ZmZlciBp
bnRvIEdUVCAqLwo+ICAgICAgICAgciA9IGFtZGdwdV9ib19waW4oYm8sIEFNREdQVV9HRU1fRE9N
QUlOX0dUVCk7Cj4gICAgICAgICBpZiAocikKPiAtICAgICAgICAgICAgICAgZ290byBlcnJvcl91
bnJlc2VydmU7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiBFUlJfUFRSKHIpOwo+Cj4gLSAgICAg
ICBpZiAoYXR0YWNoLT5kZXYtPmRyaXZlciAhPSBhZGV2LT5kZXYtPmRyaXZlcikKPiAtICAgICAg
ICAgICAgICAgYm8tPnByaW1lX3NoYXJlZF9jb3VudCsrOwo+ICsgICAgICAgc2d0ID0gZHJtX3By
aW1lX3BhZ2VzX3RvX3NnKGJvLT50Ym8udHRtLT5wYWdlcywgYm8tPnRiby5udW1fcGFnZXMpOwo+
ICsgICAgICAgaWYgKElTX0VSUihzZ3QpKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gc2d0Owo+
Cj4gLWVycm9yX3VucmVzZXJ2ZToKPiAtICAgICAgIGFtZGdwdV9ib191bnJlc2VydmUoYm8pOwo+
ICsgICAgICAgaWYgKCFkbWFfbWFwX3NnX2F0dHJzKGF0dGFjaC0+ZGV2LCBzZ3QtPnNnbCwgc2d0
LT5uZW50cywgZGlyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERNQV9BVFRSX1NL
SVBfQ1BVX1NZTkMpKQo+ICsgICAgICAgICAgICAgICBnb3RvIGVycm9yX2ZyZWU7Cj4KPiAtZXJy
b3JfZGV0YWNoOgo+IC0gICAgICAgaWYgKHIpCj4gLSAgICAgICAgICAgICAgIGRybV9nZW1fbWFw
X2RldGFjaChkbWFfYnVmLCBhdHRhY2gpOwo+IC0gICAgICAgcmV0dXJuIHI7Cj4gKyAgICAgICBy
ZXR1cm4gc2d0Owo+ICsKPiArZXJyb3JfZnJlZToKPiArICAgICAgIHNnX2ZyZWVfdGFibGUoc2d0
KTsKPiArICAgICAgIGtmcmVlKHNndCk7Cj4gKyAgICAgICByZXR1cm4gRVJSX1BUUigtRU5PTUVN
KTsKPiAgfQo+Cj4gIC8qKgo+IC0gKiBhbWRncHVfZG1hX2J1Zl9tYXBfZGV0YWNoIC0gJmRtYV9i
dWZfb3BzLmRldGFjaCBpbXBsZW1lbnRhdGlvbgo+IC0gKiBAZG1hX2J1ZjogU2hhcmVkIERNQSBi
dWZmZXIKPiArICogYW1kZ3B1X2RtYV9idWZfdW5tYXAgLSAmZG1hX2J1Zl9vcHMudW5tYXBfZG1h
X2J1ZiBpbXBsZW1lbnRhdGlvbgo+ICAgKiBAYXR0YWNoOiBETUEtYnVmIGF0dGFjaG1lbnQKPiAr
ICogQHNndDogc2dfdGFibGUgdG8gdW5tYXAKPiArICogQGRpcjogRE1BIGRpcmVjdGlvbgo+ICAg
Kgo+ICAgKiBUaGlzIGlzIGNhbGxlZCB3aGVuIGEgc2hhcmVkIERNQSBidWZmZXIgbm8gbG9uZ2Vy
IG5lZWRzIHRvIGJlIGFjY2Vzc2libGUgYnkKPiAgICogYW5vdGhlciBkZXZpY2UuIEZvciBub3cs
IHNpbXBseSB1bnBpbnMgdGhlIGJ1ZmZlciBmcm9tIEdUVC4KPiAgICovCj4gLXN0YXRpYyB2b2lk
IGFtZGdwdV9kbWFfYnVmX21hcF9kZXRhY2goc3RydWN0IGRtYV9idWYgKmRtYV9idWYsCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2ht
ZW50ICphdHRhY2gpCj4gK3N0YXRpYyB2b2lkIGFtZGdwdV9kbWFfYnVmX3VubWFwKHN0cnVjdCBk
bWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzdHJ1Y3Qgc2dfdGFibGUgKnNndCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpCj4gIHsKPiAtICAgICAgIHN0cnVjdCBk
cm1fZ2VtX29iamVjdCAqb2JqID0gZG1hX2J1Zi0+cHJpdjsKPiArICAgICAgIHN0cnVjdCBkcm1f
Z2VtX29iamVjdCAqb2JqID0gYXR0YWNoLT5kbWFidWYtPnByaXY7Cj4gICAgICAgICBzdHJ1Y3Qg
YW1kZ3B1X2JvICpibyA9IGdlbV90b19hbWRncHVfYm8ob2JqKTsKPiAtICAgICAgIHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2ID0gYW1kZ3B1X3R0bV9hZGV2KGJvLT50Ym8uYmRldik7Cj4gLSAg
ICAgICBpbnQgcmV0ID0gMDsKPiAtCj4gLSAgICAgICByZXQgPSBhbWRncHVfYm9fcmVzZXJ2ZShi
bywgdHJ1ZSk7Cj4gLSAgICAgICBpZiAodW5saWtlbHkocmV0ICE9IDApKQo+IC0gICAgICAgICAg
ICAgICBnb3RvIGVycm9yOwo+Cj4gKyAgICAgICBkbWFfdW5tYXBfc2coYXR0YWNoLT5kZXYsIHNn
dC0+c2dsLCBzZ3QtPm5lbnRzLCBkaXIpOwo+ICsgICAgICAgc2dfZnJlZV90YWJsZShzZ3QpOwo+
ICsgICAgICAga2ZyZWUoc2d0KTsKPiAgICAgICAgIGFtZGdwdV9ib191bnBpbihibyk7Cj4gLSAg
ICAgICBpZiAoYXR0YWNoLT5kZXYtPmRyaXZlciAhPSBhZGV2LT5kZXYtPmRyaXZlciAmJiBiby0+
cHJpbWVfc2hhcmVkX2NvdW50KQo+IC0gICAgICAgICAgICAgICBiby0+cHJpbWVfc2hhcmVkX2Nv
dW50LS07Cj4gLSAgICAgICBhbWRncHVfYm9fdW5yZXNlcnZlKGJvKTsKPiAtCj4gLWVycm9yOgo+
IC0gICAgICAgZHJtX2dlbV9tYXBfZGV0YWNoKGRtYV9idWYsIGF0dGFjaCk7Cj4gIH0KPgo+ICAv
KioKPiBAQCAtMzA4LDEwICszMjcsMTEgQEAgc3RhdGljIGludCBhbWRncHVfZG1hX2J1Zl9iZWdp
bl9jcHVfYWNjZXNzKHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmLAo+ICB9Cj4KPiAgY29uc3Qgc3Ry
dWN0IGRtYV9idWZfb3BzIGFtZGdwdV9kbWFidWZfb3BzID0gewo+IC0gICAgICAgLmF0dGFjaCA9
IGFtZGdwdV9kbWFfYnVmX21hcF9hdHRhY2gsCj4gLSAgICAgICAuZGV0YWNoID0gYW1kZ3B1X2Rt
YV9idWZfbWFwX2RldGFjaCwKPiAtICAgICAgIC5tYXBfZG1hX2J1ZiA9IGRybV9nZW1fbWFwX2Rt
YV9idWYsCj4gLSAgICAgICAudW5tYXBfZG1hX2J1ZiA9IGRybV9nZW1fdW5tYXBfZG1hX2J1ZiwK
PiArICAgICAgIC5keW5hbWljX21hcHBpbmcgPSB0cnVlLAo+ICsgICAgICAgLmF0dGFjaCA9IGFt
ZGdwdV9kbWFfYnVmX2F0dGFjaCwKPiArICAgICAgIC5kZXRhY2ggPSBhbWRncHVfZG1hX2J1Zl9k
ZXRhY2gsCj4gKyAgICAgICAubWFwX2RtYV9idWYgPSBhbWRncHVfZG1hX2J1Zl9tYXAsCj4gKyAg
ICAgICAudW5tYXBfZG1hX2J1ZiA9IGFtZGdwdV9kbWFfYnVmX3VubWFwLAo+ICAgICAgICAgLnJl
bGVhc2UgPSBkcm1fZ2VtX2RtYWJ1Zl9yZWxlYXNlLAo+ICAgICAgICAgLmJlZ2luX2NwdV9hY2Nl
c3MgPSBhbWRncHVfZG1hX2J1Zl9iZWdpbl9jcHVfYWNjZXNzLAo+ICAgICAgICAgLm1tYXAgPSBk
cm1fZ2VtX2RtYWJ1Zl9tbWFwLAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfZG1hX2J1Zi5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2RtYV9idWYuaAo+IGluZGV4IDUwMTJlNmFiNThmMS4uY2UxYjNmMDE3NDUxIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmgKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5oCj4gQEAgLTI1LDcgKzI1
LDYgQEAKPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9nZW0uaD4KPgo+IC1zdHJ1Y3Qgc2dfdGFibGUg
KmFtZGdwdV9nZW1fcHJpbWVfZ2V0X3NnX3RhYmxlKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2Jq
KTsKPiAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICoKPiAgYW1kZ3B1X2dlbV9wcmltZV9pbXBvcnRf
c2dfdGFibGUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYwo+IGluZGV4IDRkYTFkN2ZiMTBmNC4uODgwNTc3
NmM4YzUyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9k
cnYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYwo+IEBA
IC0xNDQ1LDcgKzE0NDUsNiBAQCBzdGF0aWMgc3RydWN0IGRybV9kcml2ZXIga21zX2RyaXZlciA9
IHsKPiAgICAgICAgIC5wcmltZV9mZF90b19oYW5kbGUgPSBkcm1fZ2VtX3ByaW1lX2ZkX3RvX2hh
bmRsZSwKPiAgICAgICAgIC5nZW1fcHJpbWVfZXhwb3J0ID0gYW1kZ3B1X2dlbV9wcmltZV9leHBv
cnQsCj4gICAgICAgICAuZ2VtX3ByaW1lX2ltcG9ydCA9IGFtZGdwdV9nZW1fcHJpbWVfaW1wb3J0
LAo+IC0gICAgICAgLmdlbV9wcmltZV9nZXRfc2dfdGFibGUgPSBhbWRncHVfZ2VtX3ByaW1lX2dl
dF9zZ190YWJsZSwKPiAgICAgICAgIC5nZW1fcHJpbWVfaW1wb3J0X3NnX3RhYmxlID0gYW1kZ3B1
X2dlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUsCj4gICAgICAgICAuZ2VtX3ByaW1lX3ZtYXAgPSBh
bWRncHVfZ2VtX3ByaW1lX3ZtYXAsCj4gICAgICAgICAuZ2VtX3ByaW1lX3Z1bm1hcCA9IGFtZGdw
dV9nZW1fcHJpbWVfdnVubWFwLAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfb2JqZWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
b2JqZWN0LmMKPiBpbmRleCA2ZjBiNzg5YTBiNDkuLmIzMTkyNTQ1MzdiOCAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMKPiBAQCAtMzEsNiArMzEsNyBA
QAo+ICAgKi8KPiAgI2luY2x1ZGUgPGxpbnV4L2xpc3QuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L3Ns
YWIuaD4KPiArI2luY2x1ZGUgPGxpbnV4L2RtYS1idWYuaD4KCklzIHRoaXMgY2hhbmdlIGludGVu
ZGVkPwoKQWxleAoKPgo+ICAjaW5jbHVkZSA8ZHJtL2FtZGdwdV9kcm0uaD4KPiAgI2luY2x1ZGUg
PGRybS9kcm1fY2FjaGUuaD4KPiAtLQo+IDIuMTcuMQo+Cj4gX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KPiBhbWQtZ2Z4IG1haWxpbmcgbGlzdAo+IGFtZC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
YW1kLWdmeA==
