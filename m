Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 162F757CBF
	for <lists+amd-gfx@lfdr.de>; Thu, 27 Jun 2019 09:06:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 936726E5B3;
	Thu, 27 Jun 2019 07:06:42 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8C4936E5B3
 for <amd-gfx@lists.freedesktop.org>; Thu, 27 Jun 2019 07:06:41 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id f17so4482696wme.2
 for <amd-gfx@lists.freedesktop.org>; Thu, 27 Jun 2019 00:06:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:references:from:message-id
 :date:user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=zbkkuvibxveZeCNQnDWBDBe8eoxr4im2z58hwY3aM/E=;
 b=cOvkhyTKbYCyY3KmBnuW62UmDwf8vXYiYbKJTyLk6zX3pTUzr/f6jgmthgi6xq68/x
 ZALjbZO2veRxPOjCjKMKchCAXpKCWhGDzAUt+xPem7gd3miZPGaKTDxrq2/ahNCgR1+F
 y1RYURTuZIVohAkO/ilgl1zSPsJbi/NGXS2dqxUzyqN+JNhclk5opYxl8NDXpx1xFb2W
 XzPm87qK4eQXzqDzukmbKozI90YKl+2PvA4516yXAEfzEh59FCO4y6WyTrITGZTaGkVs
 x7RKwCfcoK9Rt2834OHF5C89OCXN5Dx5OiaR5rGy7LLvysaVG2MeFveR4cSvnMmS8L4f
 MT4Q==
X-Gm-Message-State: APjAAAUimabqVj4TMz0OS3j62nXbjQPsckvgQpo82Qd91Kuu/dSbptyK
 uWDg+ito6W47Lox6Ojj9IwZAza6H
X-Google-Smtp-Source: APXvYqwO/hRWZ8srHsQvYh6FrLBIuTV5F28Kjs6git7kSF+sn6ZWB24KBay5N1caiGv3mRilgE90/Q==
X-Received: by 2002:a1c:6c14:: with SMTP id h20mr2088607wmc.168.1561619200058; 
 Thu, 27 Jun 2019 00:06:40 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id o126sm5005919wmo.1.2019.06.27.00.06.39
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Thu, 27 Jun 2019 00:06:39 -0700 (PDT)
Subject: Re: [PATCH 1/2] drm/amdgpu: fix transform feedback GDS hang on gfx10
 (v2)
To: =?UTF-8?B?TWFyZWsgT2zFocOhaw==?= <maraeo@gmail.com>,
 amd-gfx@lists.freedesktop.org
References: <20190626223521.14347-1-maraeo@gmail.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <f53ab6c0-637c-86de-8349-16a93ac87384@gmail.com>
Date: Thu, 27 Jun 2019 09:06:38 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.1
MIME-Version: 1.0
In-Reply-To: <20190626223521.14347-1-maraeo@gmail.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=reply-to:subject:to:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=zbkkuvibxveZeCNQnDWBDBe8eoxr4im2z58hwY3aM/E=;
 b=QdhQbf1JMjb0fitFJlWrxdLhgTa/7RrFoJQBoLJEn+a79gQ5gLkHSUoyqbrsPWwFft
 PgTUSLRb/rKihGUi5z/u6PfwmUGrOk+IjyIX/nDWDhwd4sEOihKZ3pJxfj5gc9fFMmWP
 Yj2PHPNn9OlzDF/J7ArCVic41tB7kkiI3sQN3N1E3x2TdXnsz4qywJOGiMdZmgqv5Kj8
 cPbFjUIFYdmz7yzUmttkZMN8TVmAytamZGsJBZNQfscoclo2X8CS3sTRvUpANf5FsVO9
 Xy+1P6phsuwyxDBA2FGQ2/VMFGdwtm0IXz7Ryl9Ok8Y7KijqVyGalDsbaLmonYAG1U2K
 ysuA==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMjcuMDYuMTkgdW0gMDA6MzUgc2NocmllYiBNYXJlayBPbMWhw6FrOgo+IEZyb206IE1hcmVr
IE9sxaHDoWsgPG1hcmVrLm9sc2FrQGFtZC5jb20+Cj4KPiB2MjogdXBkYXRlIGVtaXRfaWJfc2l6
ZQo+ICh0aG91Z2ggaXQncyBzdGlsbCB3cm9uZyBiZWNhdXNlIGl0IHdhcyB3cm9uZyBiZWZvcmUp
Cj4KPiBTaWduZWQtb2ZmLWJ5OiBNYXJlayBPbMWhw6FrIDxtYXJlay5vbHNha0BhbWQuY29tPgoK
Q2FuJ3QganVkZ2UgaWYgdGhpcyBpcyByZWFsbHkgdGhlIHJpZ2h0IHRoaW5nIHRvIGRvIGJlY2F1
c2UgSSBkb24ndCBrbm93IAp0aGUgZGV0YWlscyBvZiB0aGUgaHcgYnVnLgoKQnV0IGF0IGxlYXN0
IG9mIGhhbmQgSSBjYW4ndCBzZWUgYW55IG9idmlvdXMgcHJvYmxlbXMgd2l0aCBpdCwgc28gZmVl
bCAKZnJlZSB0byBhZGQgYW4gQWNrZWQtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5r
b2VuaWdAYW1kLmNvbT4gdG8gCnRoZSBzZXJpZXMuCgpSZWdhcmRzLApDaHJpc3RpYW4uCgo+IC0t
LQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dkcy5oIHwgIDMgKystCj4g
ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjEwXzAuYyAgfCAxNCArKysrKysrKysr
Ky0tLQo+ICAgMiBmaWxlcyBjaGFuZ2VkLCAxMyBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygt
KQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nZHMu
aCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nZHMuaAo+IGluZGV4IGRhZDIx
ODZmNGVkNS4uZGY4YTIzNTU0ODMxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9nZHMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9nZHMuaAo+IEBAIC0yNCwyMSArMjQsMjIgQEAKPiAgICNpZm5kZWYgX19BTURHUFVfR0RT
X0hfXwo+ICAgI2RlZmluZSBfX0FNREdQVV9HRFNfSF9fCj4gICAKPiAgIHN0cnVjdCBhbWRncHVf
cmluZzsKPiAgIHN0cnVjdCBhbWRncHVfYm87Cj4gICAKPiAgIHN0cnVjdCBhbWRncHVfZ2RzIHsK
PiAgIAl1aW50MzJfdCBnZHNfc2l6ZTsKPiAgIAl1aW50MzJfdCBnd3Nfc2l6ZTsKPiAgIAl1aW50
MzJfdCBvYV9zaXplOwo+IC0JdWludDMyX3QJCQlnZHNfY29tcHV0ZV9tYXhfd2F2ZV9pZDsKPiAr
CXVpbnQzMl90IGdkc19jb21wdXRlX21heF93YXZlX2lkOwo+ICsJdWludDMyX3Qgdmd0X2dzX21h
eF93YXZlX2lkOwo+ICAgfTsKPiAgIAo+ICAgc3RydWN0IGFtZGdwdV9nZHNfcmVnX29mZnNldCB7
Cj4gICAJdWludDMyX3QJbWVtX2Jhc2U7Cj4gICAJdWludDMyX3QJbWVtX3NpemU7Cj4gICAJdWlu
dDMyX3QJZ3dzOwo+ICAgCXVpbnQzMl90CW9hOwo+ICAgfTsKPiAgIAo+ICAgI2VuZGlmIC8qIF9f
QU1ER1BVX0dEU19IX18gKi8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvZ2Z4X3YxMF8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjEwXzAuYwo+
IGluZGV4IDE2YjJiY2M1OTBlNy4uNmJhYWE2NWExZGFhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92MTBfMC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvZ2Z4X3YxMF8wLmMKPiBAQCAtNDIxMSwyMCArNDIxMSwyOSBAQCBzdGF0aWMgdm9p
ZCBnZnhfdjEwXzBfcmluZ19lbWl0X2hkcF9mbHVzaChzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcp
Cj4gICB9Cj4gICAKPiAgIHN0YXRpYyB2b2lkIGdmeF92MTBfMF9yaW5nX2VtaXRfaWJfZ2Z4KHN0
cnVjdCBhbWRncHVfcmluZyAqcmluZywKPiAgIAkJCQkgICAgICAgc3RydWN0IGFtZGdwdV9qb2Ig
KmpvYiwKPiAgIAkJCQkgICAgICAgc3RydWN0IGFtZGdwdV9pYiAqaWIsCj4gICAJCQkJICAgICAg
IHVpbnQzMl90IGZsYWdzKQo+ICAgewo+ICAgCXVuc2lnbmVkIHZtaWQgPSBBTURHUFVfSk9CX0dF
VF9WTUlEKGpvYik7Cj4gICAJdTMyIGhlYWRlciwgY29udHJvbCA9IDA7Cj4gICAKPiArCS8qIFBy
ZXZlbnQgYSBodyBkZWFkbG9jayBkdWUgdG8gYSB3YXZlIElEIG1pc21hdGNoIGJldHdlZW4gTUUg
YW5kIEdEUy4KPiArCSAqIFRoaXMgcmVzZXRzIHRoZSB3YXZlIElEIGNvdW50ZXJzLiAobmVlZGVk
IGJ5IHRyYW5zZm9ybSBmZWVkYmFjaykKPiArCSAqIFRPRE86IFRoaXMgbWlnaHQgb25seSBiZSBu
ZWVkZWQgb24gYSBWTUlEIHN3aXRjaCB3aGVuIHdlIGNoYW5nZQo+ICsJICogICAgICAgdGhlIEdE
UyBPQSBtYXBwaW5nLCBub3Qgc3VyZS4KPiArCSAqLwo+ICsJYW1kZ3B1X3Jpbmdfd3JpdGUocmlu
ZywgUEFDS0VUMyhQQUNLRVQzX1NFVF9DT05GSUdfUkVHLCAxKSk7Cj4gKwlhbWRncHVfcmluZ193
cml0ZShyaW5nLCBtbVZHVF9HU19NQVhfV0FWRV9JRCk7Cj4gKwlhbWRncHVfcmluZ193cml0ZShy
aW5nLCByaW5nLT5hZGV2LT5nZHMudmd0X2dzX21heF93YXZlX2lkKTsKPiArCj4gICAJaWYgKGli
LT5mbGFncyAmIEFNREdQVV9JQl9GTEFHX0NFKQo+ICAgCQloZWFkZXIgPSBQQUNLRVQzKFBBQ0tF
VDNfSU5ESVJFQ1RfQlVGRkVSX0NOU1QsIDIpOwo+ICAgCWVsc2UKPiAgIAkJaGVhZGVyID0gUEFD
S0VUMyhQQUNLRVQzX0lORElSRUNUX0JVRkZFUiwgMik7Cj4gICAKPiAgIAljb250cm9sIHw9IGli
LT5sZW5ndGhfZHcgfCAodm1pZCA8PCAyNCk7Cj4gICAKPiAgIAlpZiAoYW1kZ3B1X21jYnAgJiYg
KGliLT5mbGFncyAmIEFNREdQVV9JQl9GTEFHX1BSRUVNUFQpKSB7Cj4gICAJCWNvbnRyb2wgfD0g
SU5ESVJFQ1RfQlVGRkVSX1BSRV9FTkIoMSk7Cj4gICAKPiBAQCAtNDk0NCwyMSArNDk1MywyMSBA
QCBzdGF0aWMgY29uc3Qgc3RydWN0IGFtZGdwdV9yaW5nX2Z1bmNzIGdmeF92MTBfMF9yaW5nX2Z1
bmNzX2dmeCA9IHsKPiAgIAkJICAgICAqLwo+ICAgCQk1ICsgLyogQ09ORF9FWEVDICovCj4gICAJ
CTcgKyAvKiBIRFBfZmx1c2ggKi8KPiAgIAkJNCArIC8qIFZHVF9mbHVzaCAqLwo+ICAgCQkxNCAr
IC8qCUNFX01FVEEgKi8KPiAgIAkJMzEgKyAvKglERV9NRVRBICovCj4gICAJCTMgKyAvKiBDTlRY
X0NUUkwgKi8KPiAgIAkJNSArIC8qIEhEUF9JTlZMICovCj4gICAJCTggKyA4ICsgLyogRkVOQ0Ug
eDIgKi8KPiAgIAkJMiwgLyogU1dJVENIX0JVRkZFUiAqLwo+IC0JLmVtaXRfaWJfc2l6ZSA9CTQs
IC8qIGdmeF92MTBfMF9yaW5nX2VtaXRfaWJfZ2Z4ICovCj4gKwkuZW1pdF9pYl9zaXplID0JNywg
LyogZ2Z4X3YxMF8wX3JpbmdfZW1pdF9pYl9nZnggKi8KPiAgIAkuZW1pdF9pYiA9IGdmeF92MTBf
MF9yaW5nX2VtaXRfaWJfZ2Z4LAo+ICAgCS5lbWl0X2ZlbmNlID0gZ2Z4X3YxMF8wX3JpbmdfZW1p
dF9mZW5jZSwKPiAgIAkuZW1pdF9waXBlbGluZV9zeW5jID0gZ2Z4X3YxMF8wX3JpbmdfZW1pdF9w
aXBlbGluZV9zeW5jLAo+ICAgCS5lbWl0X3ZtX2ZsdXNoID0gZ2Z4X3YxMF8wX3JpbmdfZW1pdF92
bV9mbHVzaCwKPiAgIAkuZW1pdF9nZHNfc3dpdGNoID0gZ2Z4X3YxMF8wX3JpbmdfZW1pdF9nZHNf
c3dpdGNoLAo+ICAgCS5lbWl0X2hkcF9mbHVzaCA9IGdmeF92MTBfMF9yaW5nX2VtaXRfaGRwX2Zs
dXNoLAo+ICAgCS50ZXN0X3JpbmcgPSBnZnhfdjEwXzBfcmluZ190ZXN0X3JpbmcsCj4gICAJLnRl
c3RfaWIgPSBnZnhfdjEwXzBfcmluZ190ZXN0X2liLAo+ICAgCS5pbnNlcnRfbm9wID0gYW1kZ3B1
X3JpbmdfaW5zZXJ0X25vcCwKPiAgIAkucGFkX2liID0gYW1kZ3B1X3JpbmdfZ2VuZXJpY19wYWRf
aWIsCj4gQEAgLTUwOTIsMjQgKzUxMDEsMjMgQEAgc3RhdGljIHZvaWQgZ2Z4X3YxMF8wX3NldF9y
bGNfZnVuY3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAJZGVmYXVsdDoKPiAgIAkJ
YnJlYWs7Cj4gICAJfQo+ICAgfQo+ICAgCj4gICBzdGF0aWMgdm9pZCBnZnhfdjEwXzBfc2V0X2dk
c19pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgewo+ICAgCS8qIGluaXQgYXNp
YyBnZHMgaW5mbyAqLwo+ICAgCXN3aXRjaCAoYWRldi0+YXNpY190eXBlKSB7Cj4gICAJY2FzZSBD
SElQX05BVkkxMDoKPiAtCQlhZGV2LT5nZHMuZ2RzX3NpemUgPSAweDEwMDAwOwo+IC0JCWJyZWFr
Owo+ICAgCWRlZmF1bHQ6Cj4gICAJCWFkZXYtPmdkcy5nZHNfc2l6ZSA9IDB4MTAwMDA7Cj4gKwkJ
YWRldi0+Z2RzLnZndF9nc19tYXhfd2F2ZV9pZCA9IDB4M2ZmOwo+ICAgCQlicmVhazsKPiAgIAl9
Cj4gICAKPiAgIAlhZGV2LT5nZHMuZ3dzX3NpemUgPSA2NDsKPiAgIAlhZGV2LT5nZHMub2Ffc2l6
ZSA9IDE2Owo+ICAgfQo+ICAgCj4gICBzdGF0aWMgdm9pZCBnZnhfdjEwXzBfc2V0X3VzZXJfd2dw
X2luYWN0aXZlX2JpdG1hcF9wZXJfc2goc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAJ
CQkJCQkJICB1MzIgYml0bWFwKQo+ICAgewoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9hbWQtZ2Z4
