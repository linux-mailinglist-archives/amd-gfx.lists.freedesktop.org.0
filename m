Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5C55F48EED
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:28:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3EF3A89AB5;
	Mon, 17 Jun 2019 19:28:29 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x841.google.com (mail-qt1-x841.google.com
 [IPv6:2607:f8b0:4864:20::841])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AAFBA89A32
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:28:20 +0000 (UTC)
Received: by mail-qt1-x841.google.com with SMTP id m29so12251541qtu.1
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:28:20 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=0o8Lw5nqDYzj/t7p0ffQozUfdVkiBmiOkapndZ/DatY=;
 b=WPg9E7c6CtjPHwjfMF4ph8fkcZdrXrhYRCkhZQeLuFzEbioow3GA4yvVvGra6lh2YA
 T6lwDymYmO+VVQec2S5updkAmClMjWYAgY+3/7dgSeBeoY3qT0aaWVaiSavaTYLiMUIA
 OJwNuNfBobRowMY4AOnOIhfF4LuM2pFjpww27oTfC3bCeWH8Y/Vw0NQExf3BBzslLMm6
 CHNZJXhKJC8TzBHzqtOVj3XgMSRbPpifVxmp9+GbBkOaApXwNNu+UyL1f10CzDv7+7Xv
 e0+xfBl9uHgfIMFK/BxsjiDg3Jq92/6R9f87EAqOYUpLOr/5sZAZvJANCaWxXGnrbs4F
 2qbA==
X-Gm-Message-State: APjAAAWlTFxc7/Wwb87ctSQCCZ7F6JautNbgK2rbnZli01hbK1ysZ6qe
 Wt+EIp+78+hFWNxRfZDZA33fgqn/oRc=
X-Google-Smtp-Source: APXvYqxssg/+/Y0rfh3YxgO4B61CIsEZXOfUMPHIdc6yYNQBRDjPZ2oUJay+9fmuhcqQrg+ip0YftQ==
X-Received: by 2002:a0c:eecd:: with SMTP id h13mr23033821qvs.46.1560799699585; 
 Mon, 17 Jun 2019 12:28:19 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id p37sm7715622qtc.35.2019.06.17.12.28.18
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:28:19 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 172/459] drm/amd/powerplay: introduce smu clk type to handle
 ppclk for each asic
Date: Mon, 17 Jun 2019 14:26:37 -0500
Message-Id: <20190617192704.18038-73-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617192704.18038-1-alexander.deucher@amd.com>
References: <20190617192704.18038-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=0o8Lw5nqDYzj/t7p0ffQozUfdVkiBmiOkapndZ/DatY=;
 b=jKODfu0z/07aYw+7WvB4zZ2LpDM6PCDezJtMqMF+JP1tofYiNcJRqSb52lFDVS1neg
 EWckKqDBUD5/l5wNwg8EYJOwABOIZ9uZ+JfnsP0qxgAAOKMo2eZt54KC+p7sMUSkD56M
 5CblZlWcNKXai7OcC1yYn1XD3ecnd4n0JG8St1jik0WPdsX529VmiopRjVApS8o28kjv
 TPJgEmM9U3kSZ7HMKRQbMxV+JJCCaGNZvAOC9R574syXiCilgTWNR+utTTnytuVvcmlF
 A0D36lC/oUnqHPMJzlJJ0L1Mw/XUf97AulcTbnJRnknKzE8aa9mCVwQ/gWVW7gxoZfaj
 eidg==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>, Huang Rui <ray.huang@amd.com>,
 Kevin Wang <kevin1.wang@amd.com>, Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogSHVhbmcgUnVpIDxyYXkuaHVhbmdAYW1kLmNvbT4KClRoaXMgcGF0Y2ggaW50cm9kdWNl
cyBuZXcgc211IGNsayB0eXBlLCBpdCdzIHRvIGhhbmRsZSB0aGUgZGlmZmVyZW50IHBwY2xrCmRl
ZmluZXMgZm9yIGVhY2ggYXNpYyB3aXRoIHRoZSBzYW1lIHNtdSBpcC4KClNpZ25lZC1vZmYtYnk6
IEh1YW5nIFJ1aSA8cmF5Lmh1YW5nQGFtZC5jb20+ClJldmlld2VkLWJ5OiBLZXZpbiBXYW5nIDxr
ZXZpbjEud2FuZ0BhbWQuY29tPgpSZXZpZXdlZC1ieTogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIu
ZGV1Y2hlckBhbWQuY29tPgpSZXZpZXdlZC1ieTogSGF3a2luZyBaaGFuZyA8SGF3a2luZy5aaGFu
Z0BhbWQuY29tPgpTaWduZWQtb2ZmLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVy
QGFtZC5jb20+Ci0tLQogLi4uL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvYW1kZ3B1X3NtdS5o
ICAgIHwgMjEgKysrKystCiBkcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvc211X3Yx
MV8wLmggfCAgMyArCiBkcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmMg
ICAgfCAyNiArKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211X3YxMV8w
LmMgICAgIHwgNjYgKysrKysrKysrKy0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dl
cnBsYXkvdmVnYTIwX3BwdC5jICAgIHwgMzIgKysrKysrKystCiA1IGZpbGVzIGNoYW5nZWQsIDEx
MyBpbnNlcnRpb25zKCspLCAzNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvYW1kZ3B1X3NtdS5oIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9wb3dlcnBsYXkvaW5jL2FtZGdwdV9zbXUuaAppbmRleCAyMzM2NTk3YzA5ZTAuLjY1OTkwZGQ3
MDBmMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2FtZGdw
dV9zbXUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvYW1kZ3B1X3Nt
dS5oCkBAIC0yMjcsNiArMjI3LDIyIEBAIGVudW0gc211X21lc3NhZ2VfdHlwZQogCVNNVV9NU0df
TUFYX0NPVU5ULAogfTsKIAorZW51bSBzbXVfY2xrX3R5cGUKK3sKKwlTTVVfR0ZYQ0xLLAorCVNN
VV9WQ0xLLAorCVNNVV9EQ0xLLAorCVNNVV9FQ0xLLAorCVNNVV9TT0NDTEssCisJU01VX1VDTEss
CisJU01VX0RDRUZDTEssCisJU01VX0RJU1BDTEssCisJU01VX1BJWENMSywKKwlTTVVfUEhZQ0xL
LAorCVNNVV9GQ0xLLAorCVNNVV9DTEtfQ09VTlQsCit9OworCiBlbnVtIHNtdV9tZW1vcnlfcG9v
bF9zaXplCiB7CiAgICAgU01VX01FTU9SWV9QT09MX1NJWkVfWkVSTyAgID0gMCwKQEAgLTQyMCw2
ICs0MzYsNyBAQCBzdHJ1Y3QgcHB0YWJsZV9mdW5jcyB7CiAJaW50ICgqY2hlY2tfcG93ZXJwbGF5
X3RhYmxlKShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSk7CiAJaW50ICgqYXBwZW5kX3Bvd2VycGxh
eV90YWJsZSkoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpOwogCWludCAoKmdldF9zbXVfbXNnX2lu
ZGV4KShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgdWludDMyX3QgaW5kZXgpOworCWludCAoKmdl
dF9zbXVfY2xrX2luZGV4KShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgdWludDMyX3QgaW5kZXgp
OwogCWludCAoKnJ1bl9hZmxsX2J0Yykoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpOwogCWludCAo
KmdldF9hbGxvd2VkX2ZlYXR1cmVfbWFzaykoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHVpbnQz
Ml90ICpmZWF0dXJlX21hc2ssIHVpbnQzMl90IG51bSk7CiAJZW51bSBhbWRfcG1fc3RhdGVfdHlw
ZSAoKmdldF9jdXJyZW50X3Bvd2VyX3N0YXRlKShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSk7CkBA
IC01MTAsNyArNTI3LDcgQEAgc3RydWN0IHNtdV9mdW5jcwogCWludCAoKm5vdGlmeV9kaXNwbGF5
X2NoYW5nZSkoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpOwogCWludCAoKmdldF9wb3dlcl9saW1p
dCkoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHVpbnQzMl90ICpsaW1pdCwgYm9vbCBkZWYpOwog
CWludCAoKnNldF9wb3dlcl9saW1pdCkoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHVpbnQzMl90
IG4pOwotCWludCAoKmdldF9jdXJyZW50X2Nsa19mcmVxKShzdHJ1Y3Qgc211X2NvbnRleHQgKnNt
dSwgdWludDMyX3QgY2xrX2lkLCB1aW50MzJfdCAqdmFsdWUpOworCWludCAoKmdldF9jdXJyZW50
X2Nsa19mcmVxKShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgZW51bSBzbXVfY2xrX3R5cGUgY2xr
X2lkLCB1aW50MzJfdCAqdmFsdWUpOwogCWludCAoKmluaXRfbWF4X3N1c3RhaW5hYmxlX2Nsb2Nr
cykoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpOwogCWludCAoKnN0YXJ0X3RoZXJtYWxfY29udHJv
bCkoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpOwogCWludCAoKnJlYWRfc2Vuc29yKShzdHJ1Y3Qg
c211X2NvbnRleHQgKnNtdSwgZW51bSBhbWRfcHBfc2Vuc29ycyBzZW5zb3IsCkBAIC03MDQsNiAr
NzIxLDggQEAgc3RydWN0IHNtdV9mdW5jcwogCiAjZGVmaW5lIHNtdV9tc2dfZ2V0X2luZGV4KHNt
dSwgbXNnKSBcCiAJKChzbXUpLT5wcHRfZnVuY3M/ICgoc211KS0+cHB0X2Z1bmNzLT5nZXRfc211
X21zZ19pbmRleD8gKHNtdSktPnBwdF9mdW5jcy0+Z2V0X3NtdV9tc2dfaW5kZXgoKHNtdSksICht
c2cpKSA6IC1FSU5WQUwpIDogLUVJTlZBTCkKKyNkZWZpbmUgc211X2Nsa19nZXRfaW5kZXgoc211
LCBtc2cpIFwKKwkoKHNtdSktPnBwdF9mdW5jcz8gKChzbXUpLT5wcHRfZnVuY3MtPmdldF9zbXVf
Y2xrX2luZGV4PyAoc211KS0+cHB0X2Z1bmNzLT5nZXRfc211X2Nsa19pbmRleCgoc211KSwgKG1z
ZykpIDogLUVJTlZBTCkgOiAtRUlOVkFMKQogI2RlZmluZSBzbXVfcnVuX2FmbGxfYnRjKHNtdSkg
XAogCSgoc211KS0+cHB0X2Z1bmNzPyAoKHNtdSktPnBwdF9mdW5jcy0+cnVuX2FmbGxfYnRjPyAo
c211KS0+cHB0X2Z1bmNzLT5ydW5fYWZsbF9idGMoKHNtdSkpIDogMCkgOiAwKQogI2RlZmluZSBz
bXVfZ2V0X2FsbG93ZWRfZmVhdHVyZV9tYXNrKHNtdSwgZmVhdHVyZV9tYXNrLCBudW0pIFwKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9zbXVfdjExXzAuaCBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9zbXVfdjExXzAuaAppbmRleCBjZDVl
NjZiODJjZTEuLmNhZTY2MTlkMmRmNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9w
b3dlcnBsYXkvaW5jL3NtdV92MTFfMC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJw
bGF5L2luYy9zbXVfdjExXzAuaApAQCAtNDAsNiArNDAsOSBAQAogI2RlZmluZSBURU1QX1JBTkdF
X01JTgkJCSgwKQogI2RlZmluZSBURU1QX1JBTkdFX01BWAkJCSg4MCAqIDEwMDApCiAKKyNkZWZp
bmUgQ0xLX01BUChjbGssIGluZGV4KSBcCisJW1NNVV8jI2Nsa10gPSBpbmRleAorCiBzdHJ1Y3Qg
c211XzExXzBfbWF4X3N1c3RhaW5hYmxlX2Nsb2NrcyB7CiAJdWludDMyX3QgZGlzcGxheV9jbG9j
azsKIAl1aW50MzJfdCBwaHlfY2xvY2s7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L3Bvd2VycGxheS9uYXZpMTBfcHB0LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9u
YXZpMTBfcHB0LmMKaW5kZXggOTYxZjQ0ZTU1ZjM1Li5mNDVkZjI0NDAxM2YgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L25hdmkxMF9wcHQuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmMKQEAgLTk5LDYgKzk5LDE4IEBAIHN0
YXRpYyBpbnQgbmF2aTEwX21lc3NhZ2VfbWFwW1NNVV9NU0dfTUFYX0NPVU5UXSA9IHsKIAlNU0df
TUFQKFByZXBhcmVNcDFGb3JTaHV0ZG93biwJCVBQU01DX01TR19QcmVwYXJlTXAxRm9yU2h1dGRv
d24pLAogfTsKIAorc3RhdGljIGludCBuYXZpMTBfY2xrX21hcFtTTVVfQ0xLX0NPVU5UXSA9IHsK
KwlDTEtfTUFQKEdGWENMSywgUFBDTEtfR0ZYQ0xLKSwKKwlDTEtfTUFQKFNPQ0NMSywgUFBDTEtf
U09DQ0xLKSwKKwlDTEtfTUFQKFVDTEssIFBQQ0xLX1VDTEspLAorCUNMS19NQVAoRENMSywgUFBD
TEtfRENMSyksCisJQ0xLX01BUChWQ0xLLCBQUENMS19WQ0xLKSwKKwlDTEtfTUFQKERDRUZDTEss
IFBQQ0xLX0RDRUZDTEspLAorCUNMS19NQVAoRElTUENMSywgUFBDTEtfRElTUENMSyksCisJQ0xL
X01BUChQSVhDTEssIFBQQ0xLX1BJWENMSyksCisJQ0xLX01BUChQSFlDTEssIFBQQ0xLX1BIWUNM
SyksCit9OworCiBzdGF0aWMgaW50IG5hdmkxMF9nZXRfc211X21zZ19pbmRleChzdHJ1Y3Qgc211
X2NvbnRleHQgKnNtYywgdWludDMyX3QgaW5kZXgpCiB7CiAJaW50IHZhbDsKQEAgLTExMiw2ICsx
MjQsMTkgQEAgc3RhdGljIGludCBuYXZpMTBfZ2V0X3NtdV9tc2dfaW5kZXgoc3RydWN0IHNtdV9j
b250ZXh0ICpzbWMsIHVpbnQzMl90IGluZGV4KQogCXJldHVybiB2YWw7CiB9CiAKK3N0YXRpYyBp
bnQgbmF2aTEwX2dldF9zbXVfY2xrX2luZGV4KHN0cnVjdCBzbXVfY29udGV4dCAqc21jLCB1aW50
MzJfdCBpbmRleCkKK3sKKwlpbnQgdmFsOworCWlmIChpbmRleCA+PSBTTVVfQ0xLX0NPVU5UKQor
CQlyZXR1cm4gLUVJTlZBTDsKKworCXZhbCA9IG5hdmkxMF9jbGtfbWFwW2luZGV4XTsKKwlpZiAo
dmFsID49IFBQQ0xLX0NPVU5UKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCXJldHVybiB2YWw7Cit9
CisKICNkZWZpbmUgRkVBVFVSRV9NQVNLKGZlYXR1cmUpICgxVUwgPDwgZmVhdHVyZSkKIHN0YXRp
YyBpbnQKIG5hdmkxMF9nZXRfYWxsb3dlZF9mZWF0dXJlX21hc2soc3RydWN0IHNtdV9jb250ZXh0
ICpzbXUsCkBAIC0zMjcsNiArMzUyLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwcHRhYmxlX2Z1
bmNzIG5hdmkxMF9wcHRfZnVuY3MgPSB7CiAJLmNoZWNrX3Bvd2VycGxheV90YWJsZSA9IG5hdmkx
MF9jaGVja19wb3dlcnBsYXlfdGFibGUsCiAJLmFwcGVuZF9wb3dlcnBsYXlfdGFibGUgPSBuYXZp
MTBfYXBwZW5kX3Bvd2VycGxheV90YWJsZSwKIAkuZ2V0X3NtdV9tc2dfaW5kZXggPSBuYXZpMTBf
Z2V0X3NtdV9tc2dfaW5kZXgsCisJLmdldF9zbXVfY2xrX2luZGV4ID0gbmF2aTEwX2dldF9zbXVf
Y2xrX2luZGV4LAogCS5nZXRfYWxsb3dlZF9mZWF0dXJlX21hc2sgPSBuYXZpMTBfZ2V0X2FsbG93
ZWRfZmVhdHVyZV9tYXNrLAogCS5zZXRfZGVmYXVsdF9kcG1fdGFibGUgPSBuYXZpMTBfc2V0X2Rl
ZmF1bHRfZHBtX3RhYmxlLAogfTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93
ZXJwbGF5L3NtdV92MTFfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211X3Yx
MV8wLmMKaW5kZXggZDAwMTliOGE2OGYzLi4zNjdjOTc5NTk4NWMgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jCkBAIC05MjAsMTQgKzkyMCwxNCBAQCBzdGF0aWMg
aW50IHNtdV92MTFfMF9ub3RpZnlfZGlzcGxheV9jaGFuZ2Uoc3RydWN0IHNtdV9jb250ZXh0ICpz
bXUpCiAKIHN0YXRpYyBpbnQKIHNtdV92MTFfMF9nZXRfbWF4X3N1c3RhaW5hYmxlX2Nsb2NrKHN0
cnVjdCBzbXVfY29udGV4dCAqc211LCB1aW50MzJfdCAqY2xvY2ssCi0JCQkJICAgIFBQQ0xLX2Ug
Y2xvY2tfc2VsZWN0KQorCQkJCSAgICBlbnVtIHNtdV9jbGtfdHlwZSBjbG9ja19zZWxlY3QpCiB7
CiAJaW50IHJldCA9IDA7CiAKIAlpZiAoIXNtdS0+cG1fZW5hYmxlZCkKIAkJcmV0dXJuIHJldDsK
IAlyZXQgPSBzbXVfc2VuZF9zbWNfbXNnX3dpdGhfcGFyYW0oc211LCBTTVVfTVNHX0dldERjTW9k
ZU1heERwbUZyZXEsCi0JCQkJCSAgY2xvY2tfc2VsZWN0IDw8IDE2KTsKKwkJCQkJICBzbXVfY2xr
X2dldF9pbmRleChzbXUsIGNsb2NrX3NlbGVjdCkgPDwgMTYpOwogCWlmIChyZXQpIHsKIAkJcHJf
ZXJyKCJbR2V0TWF4U3VzdGFpbmFibGVDbG9ja10gRmFpbGVkIHRvIGdldCBtYXggREMgY2xvY2sg
ZnJvbSBTTUMhIik7CiAJCXJldHVybiByZXQ7CkBAIC05NDIsNyArOTQyLDcgQEAgc211X3YxMV8w
X2dldF9tYXhfc3VzdGFpbmFibGVfY2xvY2soc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHVpbnQz
Ml90ICpjbG9jaywKIAogCS8qIGlmIERDIGxpbWl0IGlzIHplcm8sIHJldHVybiBBQyBsaW1pdCAq
LwogCXJldCA9IHNtdV9zZW5kX3NtY19tc2dfd2l0aF9wYXJhbShzbXUsIFNNVV9NU0dfR2V0TWF4
RHBtRnJlcSwKLQkJCQkJICBjbG9ja19zZWxlY3QgPDwgMTYpOworCQkJCQkgIHNtdV9jbGtfZ2V0
X2luZGV4KHNtdSwgY2xvY2tfc2VsZWN0KSA8PCAxNik7CiAJaWYgKHJldCkgewogCQlwcl9lcnIo
IltHZXRNYXhTdXN0YWluYWJsZUNsb2NrXSBmYWlsZWQgdG8gZ2V0IG1heCBBQyBjbG9jayBmcm9t
IFNNQyEiKTsKIAkJcmV0dXJuIHJldDsKQEAgLTk3Miw3ICs5NzIsNyBAQCBzdGF0aWMgaW50IHNt
dV92MTFfMF9pbml0X21heF9zdXN0YWluYWJsZV9jbG9ja3Moc3RydWN0IHNtdV9jb250ZXh0ICpz
bXUpCiAJaWYgKHNtdV9mZWF0dXJlX2lzX2VuYWJsZWQoc211LCBGRUFUVVJFX0RQTV9VQ0xLX0JJ
VCkpIHsKIAkJcmV0ID0gc211X3YxMV8wX2dldF9tYXhfc3VzdGFpbmFibGVfY2xvY2soc211LAog
CQkJCQkJCSAgJihtYXhfc3VzdGFpbmFibGVfY2xvY2tzLT51Y2xvY2spLAotCQkJCQkJCSAgUFBD
TEtfVUNMSyk7CisJCQkJCQkJICBTTVVfVUNMSyk7CiAJCWlmIChyZXQpIHsKIAkJCXByX2Vycigi
WyVzXSBmYWlsZWQgdG8gZ2V0IG1heCBVQ0xLIGZyb20gU01DISIsCiAJCQkgICAgICAgX19mdW5j
X18pOwpAQCAtOTgzLDcgKzk4Myw3IEBAIHN0YXRpYyBpbnQgc211X3YxMV8wX2luaXRfbWF4X3N1
c3RhaW5hYmxlX2Nsb2NrcyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkKIAlpZiAoc211X2ZlYXR1
cmVfaXNfZW5hYmxlZChzbXUsIEZFQVRVUkVfRFBNX1NPQ0NMS19CSVQpKSB7CiAJCXJldCA9IHNt
dV92MTFfMF9nZXRfbWF4X3N1c3RhaW5hYmxlX2Nsb2NrKHNtdSwKIAkJCQkJCQkgICYobWF4X3N1
c3RhaW5hYmxlX2Nsb2Nrcy0+c29jX2Nsb2NrKSwKLQkJCQkJCQkgIFBQQ0xLX1NPQ0NMSyk7CisJ
CQkJCQkJICBTTVVfU09DQ0xLKTsKIAkJaWYgKHJldCkgewogCQkJcHJfZXJyKCJbJXNdIGZhaWxl
ZCB0byBnZXQgbWF4IFNPQ0NMSyBmcm9tIFNNQyEiLAogCQkJICAgICAgIF9fZnVuY19fKTsKQEAg
LTk5NCw3ICs5OTQsNyBAQCBzdGF0aWMgaW50IHNtdV92MTFfMF9pbml0X21heF9zdXN0YWluYWJs
ZV9jbG9ja3Moc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpCiAJaWYgKHNtdV9mZWF0dXJlX2lzX2Vu
YWJsZWQoc211LCBGRUFUVVJFX0RQTV9EQ0VGQ0xLX0JJVCkpIHsKIAkJcmV0ID0gc211X3YxMV8w
X2dldF9tYXhfc3VzdGFpbmFibGVfY2xvY2soc211LAogCQkJCQkJCSAgJihtYXhfc3VzdGFpbmFi
bGVfY2xvY2tzLT5kY2VmX2Nsb2NrKSwKLQkJCQkJCQkgIFBQQ0xLX0RDRUZDTEspOworCQkJCQkJ
CSAgU01VX0RDRUZDTEspOwogCQlpZiAocmV0KSB7CiAJCQlwcl9lcnIoIlslc10gZmFpbGVkIHRv
IGdldCBtYXggRENFRkNMSyBmcm9tIFNNQyEiLAogCQkJICAgICAgIF9fZnVuY19fKTsKQEAgLTEw
MDMsNyArMTAwMyw3IEBAIHN0YXRpYyBpbnQgc211X3YxMV8wX2luaXRfbWF4X3N1c3RhaW5hYmxl
X2Nsb2NrcyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkKIAogCQlyZXQgPSBzbXVfdjExXzBfZ2V0
X21heF9zdXN0YWluYWJsZV9jbG9jayhzbXUsCiAJCQkJCQkJICAmKG1heF9zdXN0YWluYWJsZV9j
bG9ja3MtPmRpc3BsYXlfY2xvY2spLAotCQkJCQkJCSAgUFBDTEtfRElTUENMSyk7CisJCQkJCQkJ
ICBTTVVfRElTUENMSyk7CiAJCWlmIChyZXQpIHsKIAkJCXByX2VycigiWyVzXSBmYWlsZWQgdG8g
Z2V0IG1heCBESVNQQ0xLIGZyb20gU01DISIsCiAJCQkgICAgICAgX19mdW5jX18pOwpAQCAtMTAx
MSw3ICsxMDExLDcgQEAgc3RhdGljIGludCBzbXVfdjExXzBfaW5pdF9tYXhfc3VzdGFpbmFibGVf
Y2xvY2tzKHN0cnVjdCBzbXVfY29udGV4dCAqc211KQogCQl9CiAJCXJldCA9IHNtdV92MTFfMF9n
ZXRfbWF4X3N1c3RhaW5hYmxlX2Nsb2NrKHNtdSwKIAkJCQkJCQkgICYobWF4X3N1c3RhaW5hYmxl
X2Nsb2Nrcy0+cGh5X2Nsb2NrKSwKLQkJCQkJCQkgIFBQQ0xLX1BIWUNMSyk7CisJCQkJCQkJICBT
TVVfUEhZQ0xLKTsKIAkJaWYgKHJldCkgewogCQkJcHJfZXJyKCJbJXNdIGZhaWxlZCB0byBnZXQg
bWF4IFBIWUNMSyBmcm9tIFNNQyEiLAogCQkJICAgICAgIF9fZnVuY19fKTsKQEAgLTEwMTksNyAr
MTAxOSw3IEBAIHN0YXRpYyBpbnQgc211X3YxMV8wX2luaXRfbWF4X3N1c3RhaW5hYmxlX2Nsb2Nr
cyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkKIAkJfQogCQlyZXQgPSBzbXVfdjExXzBfZ2V0X21h
eF9zdXN0YWluYWJsZV9jbG9jayhzbXUsCiAJCQkJCQkJICAmKG1heF9zdXN0YWluYWJsZV9jbG9j
a3MtPnBpeGVsX2Nsb2NrKSwKLQkJCQkJCQkgIFBQQ0xLX1BJWENMSyk7CisJCQkJCQkJICBTTVVf
UElYQ0xLKTsKIAkJaWYgKHJldCkgewogCQkJcHJfZXJyKCJbJXNdIGZhaWxlZCB0byBnZXQgbWF4
IFBJWENMSyBmcm9tIFNNQyEiLAogCQkJICAgICAgIF9fZnVuY19fKTsKQEAgLTEwODYsMTYgKzEw
ODYsMTggQEAgc3RhdGljIGludCBzbXVfdjExXzBfc2V0X3Bvd2VyX2xpbWl0KHN0cnVjdCBzbXVf
Y29udGV4dCAqc211LCB1aW50MzJfdCBuKQogCXJldHVybiByZXQ7CiB9CiAKLXN0YXRpYyBpbnQg
c211X3YxMV8wX2dldF9jdXJyZW50X2Nsa19mcmVxKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCB1
aW50MzJfdCBjbGtfaWQsIHVpbnQzMl90ICp2YWx1ZSkKK3N0YXRpYyBpbnQgc211X3YxMV8wX2dl
dF9jdXJyZW50X2Nsa19mcmVxKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAorCQkJCQkgIGVudW0g
c211X2Nsa190eXBlIGNsa19pZCwKKwkJCQkJICB1aW50MzJfdCAqdmFsdWUpCiB7CiAJaW50IHJl
dCA9IDA7CiAJdWludDMyX3QgZnJlcTsKIAotCWlmIChjbGtfaWQgPj0gUFBDTEtfQ09VTlQgfHwg
IXZhbHVlKQorCWlmIChjbGtfaWQgPj0gU01VX0NMS19DT1VOVCB8fCAhdmFsdWUpCiAJCXJldHVy
biAtRUlOVkFMOwogCi0JcmV0ID0gc211X3NlbmRfc21jX21zZ193aXRoX3BhcmFtKHNtdSwKLQkJ
CVNNVV9NU0dfR2V0RHBtQ2xvY2tGcmVxLCAoY2xrX2lkIDw8IDE2KSk7CisJcmV0ID0gc211X3Nl
bmRfc21jX21zZ193aXRoX3BhcmFtKHNtdSwgU01VX01TR19HZXREcG1DbG9ja0ZyZXEsCisJCQkJ
CSAgKHNtdV9jbGtfZ2V0X2luZGV4KHNtdSwgY2xrX2lkKSA8PCAxNikpOwogCWlmIChyZXQpCiAJ
CXJldHVybiByZXQ7CiAKQEAgLTEzODEsMTEgKzEzODMsMTEgQEAgc3RhdGljIGludCBzbXVfdjEx
XzBfcmVhZF9zZW5zb3Ioc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCiAJCSpzaXplID0gNDsKIAkJ
YnJlYWs7CiAJY2FzZSBBTURHUFVfUFBfU0VOU09SX0dGWF9NQ0xLOgotCQlyZXQgPSBzbXVfZ2V0
X2N1cnJlbnRfY2xrX2ZyZXEoc211LCBQUENMS19VQ0xLLCAodWludDMyX3QgKilkYXRhKTsKKwkJ
cmV0ID0gc211X2dldF9jdXJyZW50X2Nsa19mcmVxKHNtdSwgU01VX1VDTEssICh1aW50MzJfdCAq
KWRhdGEpOwogCQkqc2l6ZSA9IDQ7CiAJCWJyZWFrOwogCWNhc2UgQU1ER1BVX1BQX1NFTlNPUl9H
RlhfU0NMSzoKLQkJcmV0ID0gc211X2dldF9jdXJyZW50X2Nsa19mcmVxKHNtdSwgUFBDTEtfR0ZY
Q0xLLCAodWludDMyX3QgKilkYXRhKTsKKwkJcmV0ID0gc211X2dldF9jdXJyZW50X2Nsa19mcmVx
KHNtdSwgU01VX0dGWENMSywgKHVpbnQzMl90ICopZGF0YSk7CiAJCSpzaXplID0gNDsKIAkJYnJl
YWs7CiAJY2FzZSBBTURHUFVfUFBfU0VOU09SX0hPVFNQT1RfVEVNUDoKQEAgLTE0MzIsNyArMTQz
NCw3IEBAIHNtdV92MTFfMF9kaXNwbGF5X2Nsb2NrX3ZvbHRhZ2VfcmVxdWVzdChzdHJ1Y3Qgc211
X2NvbnRleHQgKnNtdSwKIHsKIAllbnVtIGFtZF9wcF9jbG9ja190eXBlIGNsa190eXBlID0gY2xv
Y2tfcmVxLT5jbG9ja190eXBlOwogCWludCByZXQgPSAwOwotCVBQQ0xLX2UgY2xrX3NlbGVjdCA9
IDA7CisJZW51bSBzbXVfY2xrX3R5cGUgY2xrX3NlbGVjdCA9IDA7CiAJdWludDMyX3QgY2xrX2Zy
ZXEgPSBjbG9ja19yZXEtPmNsb2NrX2ZyZXFfaW5fa2h6IC8gMTAwMDsKIAogCWlmICghc211LT5w
bV9lbmFibGVkKQpAQCAtMTQ0MCwxNiArMTQ0MiwxNiBAQCBzbXVfdjExXzBfZGlzcGxheV9jbG9j
a192b2x0YWdlX3JlcXVlc3Qoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCiAJaWYgKHNtdV9mZWF0
dXJlX2lzX2VuYWJsZWQoc211LCBGRUFUVVJFX0RQTV9EQ0VGQ0xLX0JJVCkpIHsKIAkJc3dpdGNo
IChjbGtfdHlwZSkgewogCQljYXNlIGFtZF9wcF9kY2VmX2Nsb2NrOgotCQkJY2xrX3NlbGVjdCA9
IFBQQ0xLX0RDRUZDTEs7CisJCQljbGtfc2VsZWN0ID0gU01VX0RDRUZDTEs7CiAJCQlicmVhazsK
IAkJY2FzZSBhbWRfcHBfZGlzcF9jbG9jazoKLQkJCWNsa19zZWxlY3QgPSBQUENMS19ESVNQQ0xL
OworCQkJY2xrX3NlbGVjdCA9IFNNVV9ESVNQQ0xLOwogCQkJYnJlYWs7CiAJCWNhc2UgYW1kX3Bw
X3BpeGVsX2Nsb2NrOgotCQkJY2xrX3NlbGVjdCA9IFBQQ0xLX1BJWENMSzsKKwkJCWNsa19zZWxl
Y3QgPSBTTVVfUElYQ0xLOwogCQkJYnJlYWs7CiAJCWNhc2UgYW1kX3BwX3BoeV9jbG9jazoKLQkJ
CWNsa19zZWxlY3QgPSBQUENMS19QSFlDTEs7CisJCQljbGtfc2VsZWN0ID0gU01VX1BIWUNMSzsK
IAkJCWJyZWFrOwogCQlkZWZhdWx0OgogCQkJcHJfaW5mbygiWyVzXSBJbnZhbGlkIENsb2NrIFR5
cGUhIiwgX19mdW5jX18pOwpAQCAtMTQ2MSw3ICsxNDYzLDcgQEAgc211X3YxMV8wX2Rpc3BsYXlf
Y2xvY2tfdm9sdGFnZV9yZXF1ZXN0KHN0cnVjdCBzbXVfY29udGV4dCAqc211LAogCQkJZ290byBm
YWlsZWQ7CiAKIAkJcmV0ID0gc211X3NlbmRfc21jX21zZ193aXRoX3BhcmFtKHNtdSwgU01VX01T
R19TZXRIYXJkTWluQnlGcmVxLAotCQkJCQkJICAoY2xrX3NlbGVjdCA8PCAxNikgfCBjbGtfZnJl
cSk7CisJCQkoc211X2Nsa19nZXRfaW5kZXgoc211LCBjbGtfc2VsZWN0KSA8PCAxNikgfCBjbGtf
ZnJlcSk7CiAJfQogCiBmYWlsZWQ6CkBAIC0xNTc1LDE0ICsxNTc3LDE0IEBAIHN0YXRpYyBpbnQg
c211X3YxMV8wX2dmeF9vZmZfY29udHJvbChzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgYm9vbCBl
bmFibGUpCiAKIHN0YXRpYyBpbnQgc211X3YxMV8wX2dldF9jbG9ja19yYW5nZXMoc3RydWN0IHNt
dV9jb250ZXh0ICpzbXUsCiAJCQkJICAgICAgdWludDMyX3QgKmNsb2NrLAotCQkJCSAgICAgIFBQ
Q0xLX2UgY2xvY2tfc2VsZWN0LAorCQkJCSAgICAgIGVudW0gc211X2Nsa190eXBlIGNsb2NrX3Nl
bGVjdCwKIAkJCQkgICAgICBib29sIG1heCkKIHsKIAlpbnQgcmV0OwogCSpjbG9jayA9IDA7CiAJ
aWYgKG1heCkgewogCQlyZXQgPSBzbXVfc2VuZF9zbWNfbXNnX3dpdGhfcGFyYW0oc211LCBTTVVf
TVNHX0dldE1heERwbUZyZXEsCi0JCQkJCSAgICAoY2xvY2tfc2VsZWN0IDw8IDE2KSk7CisJCQkJ
c211X2Nsa19nZXRfaW5kZXgoc211LCBjbG9ja19zZWxlY3QpIDw8IDE2KTsKIAkJaWYgKHJldCkg
ewogCQkJcHJfZXJyKCJbR2V0Q2xvY2tSYW5nZXNdIEZhaWxlZCB0byBnZXQgbWF4IGNsb2NrIGZy
b20gU01DIVxuIik7CiAJCQlyZXR1cm4gcmV0OwpAQCAtMTU5MCw3ICsxNTkyLDcgQEAgc3RhdGlj
IGludCBzbXVfdjExXzBfZ2V0X2Nsb2NrX3JhbmdlcyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwK
IAkJc211X3JlYWRfc21jX2FyZyhzbXUsIGNsb2NrKTsKIAl9IGVsc2UgewogCQlyZXQgPSBzbXVf
c2VuZF9zbWNfbXNnX3dpdGhfcGFyYW0oc211LCBTTVVfTVNHX0dldE1pbkRwbUZyZXEsCi0JCQkJ
CSAgICAoY2xvY2tfc2VsZWN0IDw8IDE2KSk7CisJCQkJc211X2Nsa19nZXRfaW5kZXgoc211LCBj
bG9ja19zZWxlY3QpIDw8IDE2KTsKIAkJaWYgKHJldCkgewogCQkJcHJfZXJyKCJbR2V0Q2xvY2tS
YW5nZXNdIEZhaWxlZCB0byBnZXQgbWluIGNsb2NrIGZyb20gU01DIVxuIik7CiAJCQlyZXR1cm4g
cmV0OwpAQCAtMTYxMiwxNSArMTYxNCwxNSBAQCBzdGF0aWMgdWludDMyX3Qgc211X3YxMV8wX2Rw
bV9nZXRfc2NsayhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgYm9vbCBsb3cpCiAJfQogCiAJaWYg
KGxvdykgewotCQlyZXQgPSBzbXVfdjExXzBfZ2V0X2Nsb2NrX3JhbmdlcyhzbXUsICZnZnhfY2xr
LCBQUENMS19HRlhDTEssIGZhbHNlKTsKKwkJcmV0ID0gc211X3YxMV8wX2dldF9jbG9ja19yYW5n
ZXMoc211LCAmZ2Z4X2NsaywgU01VX0dGWENMSywgZmFsc2UpOwogCQlpZiAocmV0KSB7Ci0JCQlw
cl9lcnIoIltHZXRTY2xrc106IGZhaWwgdG8gZ2V0IG1pbiBQUENMS19HRlhDTEtcbiIpOworCQkJ
cHJfZXJyKCJbR2V0U2Nsa3NdOiBmYWlsIHRvIGdldCBtaW4gU01VX0dGWENMS1xuIik7CiAJCQly
ZXR1cm4gcmV0OwogCQl9CiAJfSBlbHNlIHsKLQkJcmV0ID0gc211X3YxMV8wX2dldF9jbG9ja19y
YW5nZXMoc211LCAmZ2Z4X2NsaywgUFBDTEtfR0ZYQ0xLLCB0cnVlKTsKKwkJcmV0ID0gc211X3Yx
MV8wX2dldF9jbG9ja19yYW5nZXMoc211LCAmZ2Z4X2NsaywgU01VX0dGWENMSywgdHJ1ZSk7CiAJ
CWlmIChyZXQpIHsKLQkJCXByX2VycigiW0dldFNjbGtzXTogZmFpbCB0byBnZXQgbWF4IFBQQ0xL
X0dGWENMS1xuIik7CisJCQlwcl9lcnIoIltHZXRTY2xrc106IGZhaWwgdG8gZ2V0IG1heCBTTVVf
R0ZYQ0xLXG4iKTsKIAkJCXJldHVybiByZXQ7CiAJCX0KIAl9CkBAIC0xNjM5LDE1ICsxNjQxLDE1
IEBAIHN0YXRpYyB1aW50MzJfdCBzbXVfdjExXzBfZHBtX2dldF9tY2xrKHN0cnVjdCBzbXVfY29u
dGV4dCAqc211LCBib29sIGxvdykKIAl9CiAKIAlpZiAobG93KSB7Ci0JCXJldCA9IHNtdV92MTFf
MF9nZXRfY2xvY2tfcmFuZ2VzKHNtdSwgJm1lbV9jbGssIFBQQ0xLX1VDTEssIGZhbHNlKTsKKwkJ
cmV0ID0gc211X3YxMV8wX2dldF9jbG9ja19yYW5nZXMoc211LCAmbWVtX2NsaywgU01VX1VDTEss
IGZhbHNlKTsKIAkJaWYgKHJldCkgewotCQkJcHJfZXJyKCJbR2V0TWNsa3NdOiBmYWlsIHRvIGdl
dCBtaW4gUFBDTEtfVUNMS1xuIik7CisJCQlwcl9lcnIoIltHZXRNY2xrc106IGZhaWwgdG8gZ2V0
IG1pbiBTTVVfVUNMS1xuIik7CiAJCQlyZXR1cm4gcmV0OwogCQl9CiAJfSBlbHNlIHsKLQkJcmV0
ID0gc211X3YxMV8wX2dldF9jbG9ja19yYW5nZXMoc211LCAmbWVtX2NsaywgUFBDTEtfR0ZYQ0xL
LCB0cnVlKTsKKwkJcmV0ID0gc211X3YxMV8wX2dldF9jbG9ja19yYW5nZXMoc211LCAmbWVtX2Ns
aywgU01VX0dGWENMSywgdHJ1ZSk7CiAJCWlmIChyZXQpIHsKLQkJCXByX2VycigiW0dldE1jbGtz
XTogZmFpbCB0byBnZXQgbWF4IFBQQ0xLX1VDTEtcbiIpOworCQkJcHJfZXJyKCJbR2V0TWNsa3Nd
OiBmYWlsIHRvIGdldCBtYXggU01VX1VDTEtcbiIpOwogCQkJcmV0dXJuIHJldDsKIAkJfQogCX0K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3ZlZ2EyMF9wcHQuYyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3ZlZ2EyMF9wcHQuYwppbmRleCA3ZTYxNDhh
YjEzNGIuLmIzZmM5YzAzNGFhMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dl
cnBsYXkvdmVnYTIwX3BwdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3Zl
Z2EyMF9wcHQuYwpAQCAtMTM5LDYgKzEzOSwzMyBAQCBzdGF0aWMgaW50IHZlZ2EyMF9tZXNzYWdl
X21hcFtTTVVfTVNHX01BWF9DT1VOVF0gPSB7CiAJTVNHX01BUChHZXRBVkZTVm9sdGFnZUJ5RHBt
KSwKIH07CiAKK3N0YXRpYyBpbnQgdmVnYTIwX2Nsa19tYXBbU01VX0NMS19DT1VOVF0gPSB7CisJ
Q0xLX01BUChHRlhDTEssIFBQQ0xLX0dGWENMSyksCisJQ0xLX01BUChWQ0xLLCBQUENMS19WQ0xL
KSwKKwlDTEtfTUFQKERDTEssIFBQQ0xLX0RDTEspLAorCUNMS19NQVAoRUNMSywgUFBDTEtfRUNM
SyksCisJQ0xLX01BUChTT0NDTEssIFBQQ0xLX1NPQ0NMSyksCisJQ0xLX01BUChVQ0xLLCBQUENM
S19VQ0xLKSwKKwlDTEtfTUFQKERDRUZDTEssIFBQQ0xLX0RDRUZDTEspLAorCUNMS19NQVAoRElT
UENMSywgUFBDTEtfRElTUENMSyksCisJQ0xLX01BUChQSVhDTEssIFBQQ0xLX1BJWENMSyksCisJ
Q0xLX01BUChQSFlDTEssIFBQQ0xLX1BIWUNMSyksCisJQ0xLX01BUChGQ0xLLCBQUENMS19GQ0xL
KSwKK307CisKK3N0YXRpYyBpbnQgdmVnYTIwX2dldF9zbXVfY2xrX2luZGV4KHN0cnVjdCBzbXVf
Y29udGV4dCAqc21jLCB1aW50MzJfdCBpbmRleCkKK3sKKwlpbnQgdmFsOworCWlmIChpbmRleCA+
PSBTTVVfQ0xLX0NPVU5UKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCXZhbCA9IHZlZ2EyMF9jbGtf
bWFwW2luZGV4XTsKKwlpZiAodmFsID49IFBQQ0xLX0NPVU5UKQorCQlyZXR1cm4gLUVJTlZBTDsK
KworCXJldHVybiB2YWw7Cit9CisKIHN0YXRpYyBpbnQgdmVnYTIwX2dldF9zbXVfbXNnX2luZGV4
KHN0cnVjdCBzbXVfY29udGV4dCAqc21jLCB1aW50MzJfdCBpbmRleCkKIHsKIAlpbnQgdmFsOwpA
QCAtNzc2LDcgKzgwMyw3IEBAIHN0YXRpYyBpbnQgdmVnYTIwX3ByaW50X2Nsa19sZXZlbHMoc3Ry
dWN0IHNtdV9jb250ZXh0ICpzbXUsCiAKIAlzd2l0Y2ggKHR5cGUpIHsKIAljYXNlIFBQX1NDTEs6
Ci0JCXJldCA9IHNtdV9nZXRfY3VycmVudF9jbGtfZnJlcShzbXUsIFBQQ0xLX0dGWENMSywgJm5v
dyk7CisJCXJldCA9IHNtdV9nZXRfY3VycmVudF9jbGtfZnJlcShzbXUsIFNNVV9HRlhDTEssICZu
b3cpOwogCQlpZiAocmV0KSB7CiAJCQlwcl9lcnIoIkF0dGVtcHQgdG8gZ2V0IGN1cnJlbnQgZ2Z4
IGNsayBGYWlsZWQhIik7CiAJCQlyZXR1cm4gcmV0OwpAQCAtNzk3LDcgKzgyNCw3IEBAIHN0YXRp
YyBpbnQgdmVnYTIwX3ByaW50X2Nsa19sZXZlbHMoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCiAJ
CWJyZWFrOwogCiAJY2FzZSBQUF9NQ0xLOgotCQlyZXQgPSBzbXVfZ2V0X2N1cnJlbnRfY2xrX2Zy
ZXEoc211LCBQUENMS19VQ0xLLCAmbm93KTsKKwkJcmV0ID0gc211X2dldF9jdXJyZW50X2Nsa19m
cmVxKHNtdSwgU01VX1VDTEssICZub3cpOwogCQlpZiAocmV0KSB7CiAJCQlwcl9lcnIoIkF0dGVt
cHQgdG8gZ2V0IGN1cnJlbnQgbWNsayBGYWlsZWQhIik7CiAJCQlyZXR1cm4gcmV0OwpAQCAtMjg0
Nyw2ICsyODc0LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwcHRhYmxlX2Z1bmNzIHZlZ2EyMF9w
cHRfZnVuY3MgPSB7CiAJLmNoZWNrX3Bvd2VycGxheV90YWJsZSA9IHZlZ2EyMF9jaGVja19wb3dl
cnBsYXlfdGFibGUsCiAJLmFwcGVuZF9wb3dlcnBsYXlfdGFibGUgPSB2ZWdhMjBfYXBwZW5kX3Bv
d2VycGxheV90YWJsZSwKIAkuZ2V0X3NtdV9tc2dfaW5kZXggPSB2ZWdhMjBfZ2V0X3NtdV9tc2df
aW5kZXgsCisJLmdldF9zbXVfY2xrX2luZGV4ID0gdmVnYTIwX2dldF9zbXVfY2xrX2luZGV4LAog
CS5ydW5fYWZsbF9idGMgPSB2ZWdhMjBfcnVuX2J0Y19hZmxsLAogCS5nZXRfYWxsb3dlZF9mZWF0
dXJlX21hc2sgPSB2ZWdhMjBfZ2V0X2FsbG93ZWRfZmVhdHVyZV9tYXNrLAogCS5nZXRfY3VycmVu
dF9wb3dlcl9zdGF0ZSA9IHZlZ2EyMF9nZXRfY3VycmVudF9wb3dlcl9zdGF0ZSwKLS0gCjIuMjAu
MQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdm
eCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
