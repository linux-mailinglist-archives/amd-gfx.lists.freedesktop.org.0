Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 61D84B3978E
	for <lists+amd-gfx@lfdr.de>; Thu, 28 Aug 2025 10:54:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9C2DA10E895;
	Thu, 28 Aug 2025 08:54:53 +0000 (UTC)
Authentication-Results: gabe.freedesktop.org;
	dkim=pass (1024-bit key; unprotected) header.d=amd.com header.i=@amd.com header.b="ii1ReeFJ";
	dkim-atps=neutral
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM11-BN8-obe.outbound.protection.outlook.com
 (mail-bn8nam11on2046.outbound.protection.outlook.com [40.107.236.46])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4C6F510E895
 for <amd-gfx@lists.freedesktop.org>; Thu, 28 Aug 2025 08:54:52 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector10001; d=microsoft.com; cv=none;
 b=JCdFi4Mz5CDZiypF2YlhNLrFzzQVHpRiR0kR927HQPsoH++IvwUf6zDDO2a6oUHYNa1AAt4PCMWH4H5jhiRKj7safga5mAfi31z4K91nbg/SXnT3GSPB1oB7v2WfROsINxWuzoplT6ZHe4Jg3Dr77906tpH+w7oDRtWbVsdbF//14JjV/asD7UTCB3qO3/NfZje4v5HD9VLf/wQfxbDpG10zuvaTnGXY+A162EZkJMpelaSeKfZVYRLiueEOHFgkXAmq/CFxQaZ+PVJebABYl4uK9fR7285v7t+ubdS9IwVyPDSew73btl+Zl4LyRFPWKkjRYkZXaNVnfZ8YBG5ihA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector10001;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=F7ua1ANY8DrDNcFnxMTxaxGinCQNMM7a1uX4au6Znyc=;
 b=OyKGj+y66NRRT3Cco5aHpy/EG8w2BHuUOIKqlt5dw2P6XHFXTkKevuprV1kOXqqgLbCHFgsd/pivC211D6N95kVqGUhytEwHknr0hFkJZ772diKreLnFL2Mevq+ghPTIwubSocqh5zConbpOxGfrSE4F/CQ9mp0aEnt3/a63128U0tESwl2EihxorW072ySZgwrLLZb+UBe4b5ugC+Uc/vxLivfzhvhk+YPnzJbe44dUQ1+NixDel7g9GB+0M59dcX/ahFxhNU6qoP49fl5EyqEannbfNWnpfZmmxTPancoZTNbFvWhmbKJeX5l/vmiRTfHX07A29JQTkvCaoTI4/Q==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=F7ua1ANY8DrDNcFnxMTxaxGinCQNMM7a1uX4au6Znyc=;
 b=ii1ReeFJJCyx13FDQNu5fnF8s3SS8r9PzakrNzn2V2E1g0Y/+3HQjLQ342YeHMwsg0+JE70UootBw/OiSXLmqty6kTsP208MMuEkVjCdHfL7Pu9SG2/8E2bG1hZa0b+2Nfz/9oZLvGXlV2OaJ3p7TZNJt6cDEI+DvOsPKXZhjzw=
Received: from DM4PR12MB5152.namprd12.prod.outlook.com (2603:10b6:5:393::16)
 by MW3PR12MB4474.namprd12.prod.outlook.com (2603:10b6:303:2e::7) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.9073.13; Thu, 28 Aug
 2025 08:54:45 +0000
Received: from DM4PR12MB5152.namprd12.prod.outlook.com
 ([fe80::d4b5:6a30:96d5:e3ed]) by DM4PR12MB5152.namprd12.prod.outlook.com
 ([fe80::d4b5:6a30:96d5:e3ed%7]) with mapi id 15.20.9009.016; Thu, 28 Aug 2025
 08:54:45 +0000
From: "Zhang, Jesse(Jie)" <Jesse.Zhang@amd.com>
To: "Zhang, Jesse(Jie)" <Jesse.Zhang@amd.com>, Alex Deucher
 <alexdeucher@gmail.com>
CC: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Deucher, 
 Alexander" <Alexander.Deucher@amd.com>, "Koenig, Christian"
 <Christian.Koenig@amd.com>
Subject: RE: [v12 11/11] drm/amdgpu: Implement user queue reset functionality
Thread-Topic: [v12 11/11] drm/amdgpu: Implement user queue reset functionality
Thread-Index: AQHcFiuAPBkkxJTdC0yf2xvoR/+zo7R1BMEAgAKxyACAAA5ecA==
Date: Thu, 28 Aug 2025 08:54:44 +0000
Message-ID: <DM4PR12MB5152BAD955B5FC2B0C3FAD43E33BA@DM4PR12MB5152.namprd12.prod.outlook.com>
References: <20250826014648.1711926-1-Jesse.Zhang@amd.com>
 <20250826014648.1711926-11-Jesse.Zhang@amd.com>
 <CADnq5_N6EyJ-sk6DUjiAF=DoujCM1Bg-Pce58w7=w3UQZ9zo2A@mail.gmail.com>
 <DM4PR12MB51528395FF9873F98604F5C1E33BA@DM4PR12MB5152.namprd12.prod.outlook.com>
In-Reply-To: <DM4PR12MB51528395FF9873F98604F5C1E33BA@DM4PR12MB5152.namprd12.prod.outlook.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_Enabled=True;
 MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_SetDate=2025-08-28T07:57:45.0000000Z;
 MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_Name=AMD
 Internal Distribution
 Only; MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_ContentBits=3;
 MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_Method=Standard
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=amd.com;
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: DM4PR12MB5152:EE_|MW3PR12MB4474:EE_
x-ms-office365-filtering-correlation-id: e65c0346-a28a-4c1c-d639-08dde610890d
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0; ARA:13230040|1800799024|366016|376014|38070700018;
x-microsoft-antispam-message-info: =?utf-8?B?WWtLbjE4ODU4cWY3aERSYmRzSFUxd0RqbWZ4VTZZU3gzZ0NldmFrU2gzeDE2?=
 =?utf-8?B?Rzd1c2ZiKy9SVHh6YW5NK0YvUUt6R2lGeVhRNG1Mc1VvTFlyVTZILy9jYllJ?=
 =?utf-8?B?MXNBOHA2R0ZBVzAzZ3RkZDlDeENVZXZxS1QxWDhMU3FQN1VKUGxyQU5GOVlm?=
 =?utf-8?B?VVUrelBmK0dVTW5zdFFwdVpQNWhrTno3R1RPM1ovZExHVXhBbGo4WTMzOFly?=
 =?utf-8?B?dkpEOW8zcCtaOU9PZDNrZDdjb3Y3R0RnTmFPNm5YcU5CS245K1IwVlc3Mkk5?=
 =?utf-8?B?QnBVZm1yNENxenE5WWgzL2JGaGV1OVBsVXd3cmo4ZWJORXFaUHJFcHpjbzE4?=
 =?utf-8?B?d3pZMWpnSkhQUWk3em9Ka21KWUxDVk9oci9adGJ0NDBxMWYrV1J5Nlh1Rjgx?=
 =?utf-8?B?bnU5Qmp2UTZlZk9Kdml3MmhCeU1EbVRmanZob3ZQdVJOZndHWHFCWW9GeUVH?=
 =?utf-8?B?SVJXWnNvbWU2Q3k5V29XV1lNcGMwNG5CT3lZUG1CREJvL2QycU8xZFBVcTd6?=
 =?utf-8?B?bTdnV0ZidTZ3dkpJTGZ1N1YreUdJQmVDK1RMYUNQN0h3NEFucWZBOERidWZC?=
 =?utf-8?B?eTVHaklIU1BiWFMxdDJPekpIaEtOWGpLSVF5WE95dkM1TXlTME1NYjNqc0NX?=
 =?utf-8?B?Z01mRlZVTjdQMDR1WTZ4Ylc3bzRDSnFZVk9nckZBNFR2UXVlRG41UVlWaitL?=
 =?utf-8?B?MFFmNjZHVXozSWU2dWQ4cHgvR3Q1MGZJREo1NG1xbHIwYVU3eUNPaUtnSkR1?=
 =?utf-8?B?bHhKZ1ZYdXpMU3BES1ZxZjQzSnpRejdsWTZKcEFBOFB6SzFQZVBLZkE2YnU1?=
 =?utf-8?B?cHRnaXhNNDFwcUYvUmI4RnR4SUtNb3QrZHQyUGRTSkZ2MzRLRVRmZnBscEZs?=
 =?utf-8?B?dnJ5R0oyQWZOTnBBZDBCRHh5MkxGNzl2Zm1DbTBTZjNNYklJM1lJYXQwRTcv?=
 =?utf-8?B?bm9IVzFLMmdCNDVKazBKZWZKRHc4dzFGS3ZCSTgzZ0Z1SGdWL3lrS3pvVDZm?=
 =?utf-8?B?VEkxbDZzTkZGbFl4T29vblZoZjk3SllRTEJqcGpwcGxHUWRFL01LQitrN3B0?=
 =?utf-8?B?c0h0L3RDTVEzTjJ4VXRMVVY2VnpOMWVFZnpwTHNOWm9Sbm11ME9SeC9KeW9o?=
 =?utf-8?B?cDJHWnEycktRdjRZTTdSWFFod0lWem9YM2llYnVERityODg2UkpiTGtlWXVQ?=
 =?utf-8?B?c0pTQ3l1dzFzUldqM1htRDZIUUYvaXNFQmpkbGxvYlp4SjkvT2djWmVtSEVa?=
 =?utf-8?B?THMzbVF1eEF5WUZUZ1h5c1dsTmV3QytJL2k4bHUwMHY4OXB6WGxlU3kyQ0Jj?=
 =?utf-8?B?b2NPSUx0T29PZnhmK0xJbndIbzBtLzU0ZUx2WUJZenJ3RSt3d1BvcFhLQUgv?=
 =?utf-8?B?TUYxbWZ6QTZWK3RRNjVlcVNUbytGMy9FRUJVWlNMSmVNaEthZDFvR0FPU29J?=
 =?utf-8?B?ZWg5REZYQzFvakNCZmM0cG5KMXRJZXdHZ1ZrMVdXSloyc3NJZHZQQk91b3ZR?=
 =?utf-8?B?eS83bENUSVFuWDV0bDBOM1Q1STlmeTRJRERqcmFpNFhOUHVNOUt0WkJhMUdO?=
 =?utf-8?B?UlpHb1FlbHBzNnhYUUsxZGpKeW1VeVE3RDhzK01ZbWNQZUgvM0JNay93VGNv?=
 =?utf-8?B?Rll0cUNzdUlMYWdzNDhyN3VpSitLQWZEblhXcEFwaGJXV1VKZTdLZncvYzVJ?=
 =?utf-8?B?bnlJektEL001ZWExcFFCVkZrcUpsRm0zZU9RbE9SWHhEdWMvdGxtSnNEbksz?=
 =?utf-8?B?c2o2a3BPR1dPWURPemdPUkZwaGdnbkU4dFlMb1FRK1duMDZFeGJ0R3NXRGgw?=
 =?utf-8?B?akhDMUp0dHU1dUIyT3lZYjZCY0NwT3dqSEh4QWg1dktzLzlmVnl4NU41TEZn?=
 =?utf-8?B?N1ovaURzaXMzTWUwMkhqNTIycWtlclJWVUFHd05zNEFxTW1mdkpDVDNJWTZQ?=
 =?utf-8?B?Tzc5R2VEdkVtOTQ3TlhyV0JzblZqZ3k4SFUzeEp1VEhaMlFpbTk5dGhWZ01B?=
 =?utf-8?Q?+uM0RsVrdG4xEPevHpnzdduFa8Vz0A=3D?=
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM4PR12MB5152.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(13230040)(1800799024)(366016)(376014)(38070700018); DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?aE13UHRxRWZQZlRjL1hEMXZHL2xPVGhPSlJSTFFINUZKTVdTcGlJbi91TWtk?=
 =?utf-8?B?emhwVXcwcnRiNDN4UmlCZFQybVNLbVdSSE83d0k0eGtFNUpqelZmUjEvbytO?=
 =?utf-8?B?eWNLMFRLYVRMZjNPZGN0VHNobk11M0hXOU9MUXorSDhYWWJPczg3RkJScXRH?=
 =?utf-8?B?NGg4bStLeUxNOHMvZUJhZk1uVEl4T3haVCsyY0xpbk9hV1FUVElSeWdYUmsv?=
 =?utf-8?B?bWZRcjhvRithV2Vkb1hNYmVEMU43YjJNUkV5R1JYbFArSzU0b3dMS1NabkJC?=
 =?utf-8?B?ckxaRUwrTGdVRlFGTGJDQVFiclR6Y1UzOXZEOGlTUjBrOXlnaTlzT21uT3ZE?=
 =?utf-8?B?Q1N5M0ZBVytqNk5IelhpOVVXNWJ5RnZhbGtLNWIyRzk1TnpmSjNHZlpFajVU?=
 =?utf-8?B?aStrNkcvSU9ORm9RWkRHVTRqZGdNaGlJRW1GaTg1T2VZdUNjeEZ5WS9VcDB5?=
 =?utf-8?B?ejZjQ3ZzSnJqaEJpSnAveGRwVTdQenJ4Ty9pV2ZCNHNMVS91MFFyTllkN2p6?=
 =?utf-8?B?ZVdocVB3bUtFR1VyRFpZZnRRR1hjM2paM0tkWGlKcHRKNUxQREp0aitVdlBj?=
 =?utf-8?B?d3VFZDNRblUrRjEwcHl3ZkI4cHU3NkNqK0xsbUFWOXNRNzhHditsbjBHNmZE?=
 =?utf-8?B?YitLcjN3SnIrUXRrQXVjdGpyRUZFbHBkYkJmWG8zNEZzM1VESkREbkd1aFFr?=
 =?utf-8?B?OWlZOHpYNGIwSXp1cVRWSEJoK0NwVlphWVhkTHZGT3QvVnNmVXIvbVlqS2du?=
 =?utf-8?B?UTJtQmh4TmlVRmFaN05VUVBjWE5jR29rRVJWeGpYajJsOWFvbkFkbFF6S1Mr?=
 =?utf-8?B?aFpsL0tWZm1Fc0dwRUxOTEY3SFBtcUQvczlwR3hNNSt6cEpuYWoxY1lmNE9q?=
 =?utf-8?B?bW5SZG9XNzNhRjNyUEZhbEpLRWczSG5WbC9CUFU2R05OVkN5WXFLa2drMU05?=
 =?utf-8?B?RkNLTmNJUXVobXVCRjVGWlNrOGIyTlhoRFUyYVFNRjFjc3o2OFhDMFU0blNs?=
 =?utf-8?B?VlNtdHV3YmZmaHk1VFMveXROMVFsQjNVQzRXWEZFcXJFdm5LR1NFazlDQ0hR?=
 =?utf-8?B?bzRWQlhWY0phRlhQb2Irdk9xdmF6ZTVPei9qblM5R2lxazBWRWxwbHFQQ1Vp?=
 =?utf-8?B?TTZGNVlVclpnQ2JSNnZ1M2JJb05KQ21DQU1DMTdDY05RbDNDV3hGTHA1L1pq?=
 =?utf-8?B?NllJQmx4dGViR3RkRnVpMVFaV0xVeUtZSzJ1VFNRTEV0U2JXL2pHRE1OaEpX?=
 =?utf-8?B?WktUclBzY1MxeUU2WStnc1pRSlphYUxZNGpsVGtKWThoUWh6bndSTktDL0FP?=
 =?utf-8?B?ZHlyYXVhTFBXOXpCQ0hDU1BoY285Y1MwNFlrR1ptT0FIbzVVYVBydjN5WkVz?=
 =?utf-8?B?Ynd2UFVUVVRoRmk5c1JBcXdUb2orbFlGZ1MyU3VNNXJlM0hEVnVnb2pvOFV3?=
 =?utf-8?B?VnpmMHN5VXFFbmJmcUxNZ0FpU285K2ZJeERvVGlpWVhFcU1iWEExajRxbGxW?=
 =?utf-8?B?YWR5OFM0RTJKTzI0OGttdmJvajQwd1BqSGtlOTNwWnM4Znl5MXh0TE9Vd1hs?=
 =?utf-8?B?cmdNbU4yNjN6MHY0T01HWStRRHFDTmRRMGZWZlZsM0NvTnFXOWU2VXNEd0tS?=
 =?utf-8?B?ekovbmlpQTRYM0lacjZMc0xxNkNSQnRnK0cyVDdRMFVLb0l6TVpycjJNNFpH?=
 =?utf-8?B?WklMY0xoc3plam55OEtNZXVOTzgxakpnaWROL0UvQWJPbkNPdWJiUUM2Y3pt?=
 =?utf-8?B?UDVwOTE4TURsQzdIcSt4WGpBR21BZk9QdWZvWXRZVkh4OGF5cCtpU09LbmpD?=
 =?utf-8?B?TU9mc0dUdmVqYVZIZ0xSbW9QQkZZd3dybXIxdGRSOVp3ZjdBejNWd05yV1hX?=
 =?utf-8?B?Q2Z1RFIxTWpVbkRkL0tuYytBakNRU241NjJCZ255MW5Wbmk0enAyN1NFY0JK?=
 =?utf-8?B?em1NL2loanJvOWJCamlUZ0FUZndacjBrSHJOOHN1bDA0VDZaTE8rOUtYVkwv?=
 =?utf-8?B?WmRVYUJ6dC9kcnJLTjZYUmFZOERwUmtoUGo5WnlTdGE4TGRjSFM0UlNRbFBv?=
 =?utf-8?B?dURpekRlaFVSS1Y4eTdWTkhhUnZhVmJ1aEVDMW9xbFhyTDRaVkp6M0JNT3ZQ?=
 =?utf-8?Q?g0vY=3D?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DM4PR12MB5152.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: e65c0346-a28a-4c1c-d639-08dde610890d
X-MS-Exchange-CrossTenant-originalarrivaltime: 28 Aug 2025 08:54:44.9142 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: iSkGjmLoPhiJStkRETmMw/C2UCDBFOTc72Nm1LSNs2B2LEO9fSbfHHNSudgV40bJ+MZmZdOvIGwymqbsyU8lig==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MW3PR12MB4474
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seSAtIEFNRCBJbnRlcm5hbCBEaXN0cmlidXRpb24gT25seV0N
Cg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IGFtZC1nZnggPGFtZC1nZngtYm91
bmNlc0BsaXN0cy5mcmVlZGVza3RvcC5vcmc+IE9uIEJlaGFsZiBPZiBaaGFuZywgSmVzc2UoSmll
KQ0KU2VudDogVGh1cnNkYXksIEF1Z3VzdCAyOCwgMjAyNSA0OjE2IFBNDQpUbzogQWxleCBEZXVj
aGVyIDxhbGV4ZGV1Y2hlckBnbWFpbC5jb20+DQpDYzogYW1kLWdmeEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmc7IERldWNoZXIsIEFsZXhhbmRlciA8QWxleGFuZGVyLkRldWNoZXJAYW1kLmNvbT47IEtv
ZW5pZywgQ2hyaXN0aWFuIDxDaHJpc3RpYW4uS29lbmlnQGFtZC5jb20+DQpTdWJqZWN0OiBSRTog
W3YxMiAxMS8xMV0gZHJtL2FtZGdwdTogSW1wbGVtZW50IHVzZXIgcXVldWUgcmVzZXQgZnVuY3Rp
b25hbGl0eQ0KDQpbQU1EIE9mZmljaWFsIFVzZSBPbmx5IC0gQU1EIEludGVybmFsIERpc3RyaWJ1
dGlvbiBPbmx5XQ0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogQWxleCBEZXVj
aGVyIDxhbGV4ZGV1Y2hlckBnbWFpbC5jb20+DQpTZW50OiBUdWVzZGF5LCBBdWd1c3QgMjYsIDIw
MjUgMTA6NDkgUE0NClRvOiBaaGFuZywgSmVzc2UoSmllKSA8SmVzc2UuWmhhbmdAYW1kLmNvbT4N
CkNjOiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZzsgRGV1Y2hlciwgQWxleGFuZGVyIDxB
bGV4YW5kZXIuRGV1Y2hlckBhbWQuY29tPjsgS29lbmlnLCBDaHJpc3RpYW4gPENocmlzdGlhbi5L
b2VuaWdAYW1kLmNvbT4NClN1YmplY3Q6IFJlOiBbdjEyIDExLzExXSBkcm0vYW1kZ3B1OiBJbXBs
ZW1lbnQgdXNlciBxdWV1ZSByZXNldCBmdW5jdGlvbmFsaXR5DQoNCk9uIE1vbiwgQXVnIDI1LCAy
MDI1IGF0IDEwOjQz4oCvUE0gSmVzc2UuWmhhbmcgPEplc3NlLlpoYW5nQGFtZC5jb20+IHdyb3Rl
Og0KPg0KPiBGcm9tOiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+DQo+
DQo+IFRoaXMgcGF0Y2ggYWRkcyByb2J1c3QgcmVzZXQgaGFuZGxpbmcgZm9yIHVzZXIgcXVldWVz
ICh1c2VycSkgdG8NCj4gaW1wcm92ZSByZWNvdmVyeSBmcm9tIHF1ZXVlIGZhaWx1cmVzLiBUaGUg
a2V5IGNvbXBvbmVudHMgaW5jbHVkZToNCj4NCj4gMS4gUXVldWUgZGV0ZWN0aW9uIGFuZCByZXNl
dCBsb2dpYzoNCj4gICAgLSBhbWRncHVfdXNlcnFfZGV0ZWN0X2FuZF9yZXNldF9xdWV1ZXMoKSBp
ZGVudGlmaWVzIGZhaWxlZCBxdWV1ZXMNCj4gICAgLSBQZXItSVAgZGV0ZWN0X2FuZF9yZXNldCBj
YWxsYmFja3MgZm9yIHRhcmdldGVkIHJlY292ZXJ5DQo+ICAgIC0gRmFsbHMgYmFjayB0byBmdWxs
IEdQVSByZXNldCB3aGVuIG5lZWRlZA0KPg0KPiAyLiBSZXNldCBpbmZyYXN0cnVjdHVyZToNCj4g
ICAgLSBBZGRzIHVzZXJxX3Jlc2V0X3dvcmsgd29ya3F1ZXVlIGZvciBhc3luYyByZXNldCBoYW5k
bGluZw0KPiAgICAtIEltcGxlbWVudHMgcHJlL3Bvc3QgcmVzZXQgaGFuZGxlcnMgZm9yIHF1ZXVl
IHN0YXRlIG1hbmFnZW1lbnQNCj4gICAgLSBJbnRlZ3JhdGVzIHdpdGggZXhpc3RpbmcgR1BVIHJl
c2V0IGZyYW1ld29yaw0KPg0KPiAzLiBFcnJvciBoYW5kbGluZyBpbXByb3ZlbWVudHM6DQo+ICAg
IC0gRW5oYW5jZWQgc3RhdGUgdHJhY2tpbmcgd2l0aCBIVU5HIHN0YXRlDQo+ICAgIC0gQXV0b21h
dGljIHJlc2V0IHRyaWdnZXJpbmcgb24gY3JpdGljYWwgZmFpbHVyZXMNCj4gICAgLSBWUkFNIGxv
c3MgaGFuZGxpbmcgZHVyaW5nIHJlY292ZXJ5DQo+DQo+IDQuIEludGVncmF0aW9uIHBvaW50czoN
Cj4gICAgLSBBZGRlZCB0byBkZXZpY2UgaW5pdC9yZXNldCBwYXRocw0KPiAgICAtIENhbGxlZCBk
dXJpbmcgcXVldWUgZGVzdHJveSwgc3VzcGVuZCwgYW5kIGlzb2xhdGlvbiBldmVudHMNCj4gICAg
LSBIYW5kbGVzIGJvdGggaW5kaXZpZHVhbCBxdWV1ZSBhbmQgZnVsbCBHUFUgcmVzZXRzDQo+DQo+
IFRoZSByZXNldCBmdW5jdGlvbmFsaXR5IHdvcmtzIHdpdGggYm90aCBjb21wdXRlIGFuZCBncmFw
aGljcyBxdWV1ZXMsDQo+IHByb3ZpZGluZyBiZXR0ZXIgcmVzaWxpZW5jZSBhZ2FpbnN0IHF1ZXVl
IGZhaWx1cmVzIHdoaWxlIG1pbmltaXppbmcNCj4gZGlzcnVwdGlvbiB0byB1bmFmZmVjdGVkIHF1
ZXVlcy4NCj4NCj4gdjI6IFNlcGFyYXRlIFNETUEgYW5kIEdGWC9DT01QVVRFIHF1ZXVlIHJlc2V0
IGhhbmRsaW5nDQo+DQo+IFNpZ25lZC1vZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRl
dWNoZXJAYW1kLmNvbT4NCj4gU2lnbmVkLW9mZi1ieTogSmVzc2UgWmhhbmcgPEplc3NlLlpoYW5n
QGFtZC5jb20+DQo+IC0tLQ0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1Lmgg
ICAgICAgIHwgICAxICsNCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZp
Y2UuYyB8ICAgOCArDQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdXNlcnEu
YyAgfCAyMTUgKysrKysrKysrKysrKysrKysrKy0tDQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfdXNlcnEuaCAgfCAgIDUgKw0KPiAgNCBmaWxlcyBjaGFuZ2VkLCAyMTYgaW5z
ZXJ0aW9ucygrKSwgMTMgZGVsZXRpb25zKC0pDQo+DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaA0KPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdS5oDQo+IGluZGV4IGVmM2FmMTcwZGRhNC4uOWRiMDVjZGM3MzA0IDEwMDY0NA0KPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaA0KPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaA0KPiBAQCAtMTMwMiw2ICsxMzAyLDcgQEAgc3Ry
dWN0IGFtZGdwdV9kZXZpY2Ugew0KPiAgICAgICAgIHN0cnVjdCBsaXN0X2hlYWQgICAgICAgICAg
ICAgICAgdXNlcnFfbWdyX2xpc3Q7DQo+ICAgICAgICAgc3RydWN0IG11dGV4ICAgICAgICAgICAg
ICAgICAgICB1c2VycV9tdXRleDsNCj4gICAgICAgICBib29sICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHVzZXJxX2hhbHRfZm9yX2VuZm9yY2VfaXNvbGF0aW9uOw0KPiArICAgICAgIHN0cnVj
dCB3b3JrX3N0cnVjdCAgICAgICAgICAgICAgdXNlcnFfcmVzZXRfd29yazsNCj4gIH07DQo+DQo+
ICBzdGF0aWMgaW5saW5lIHVpbnQzMl90IGFtZGdwdV9pcF92ZXJzaW9uKGNvbnN0IHN0cnVjdCBh
bWRncHVfZGV2aWNlDQo+ICphZGV2LCBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2RldmljZS5jDQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2RldmljZS5jDQo+IGluZGV4IDM3NTc2MzQ2MTNjMy4uMWRjODhiMDA1NWRkIDEwMDY0NA0K
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMNCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jDQo+IEBAIC00NDc1
LDYgKzQ0NzUsNyBAQCBpbnQgYW1kZ3B1X2RldmljZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LA0KPiAgICAgICAgIH0NCj4NCj4gICAgICAgICBJTklUX1dPUksoJmFkZXYtPnhnbWlf
cmVzZXRfd29yaywNCj4gYW1kZ3B1X2RldmljZV94Z21pX3Jlc2V0X2Z1bmMpOw0KPiArICAgICAg
IElOSVRfV09SSygmYWRldi0+dXNlcnFfcmVzZXRfd29yaywgYW1kZ3B1X3VzZXJxX3Jlc2V0X3dv
cmspOw0KPg0KPiAgICAgICAgIGFkZXYtPmdmeC5nZnhfb2ZmX3JlcV9jb3VudCA9IDE7DQo+ICAg
ICAgICAgYWRldi0+Z2Z4LmdmeF9vZmZfcmVzaWRlbmN5ID0gMDsgQEAgLTU4ODAsNiArNTg4MSwx
MCBAQCBpbnQNCj4gYW1kZ3B1X2RldmljZV9yZWluaXRfYWZ0ZXJfcmVzZXQoc3RydWN0IGFtZGdw
dV9yZXNldF9jb250ZXh0ICpyZXNldF9jb250ZXh0KQ0KPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGlmIChyKQ0KPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZ290byBvdXQ7DQo+DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGFt
ZGdwdV91c2VycV9wb3N0X3Jlc2V0KHRtcF9hZGV2LCB2cmFtX2xvc3QpOw0KPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIChyKQ0KPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZ290byBvdXQ7DQo+ICsNCj4NCj4gZHJtX2NsaWVudF9kZXZfcmVzdW1l
KGFkZXZfdG9fZHJtKHRtcF9hZGV2KSwgZmFsc2UpOw0KPg0KPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIC8qDQo+IEBAIC02MTAyLDYgKzYxMDcsNyBAQCBzdGF0aWMgaW5saW5lIHZv
aWQgYW1kZ3B1X2RldmljZV9zdG9wX3BlbmRpbmdfcmVzZXRzKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2KQ0KPiAgICAgICAgIGlmICghYW1kZ3B1X3NyaW92X3ZmKGFkZXYpKQ0KPiAgICAgICAg
ICAgICAgICAgY2FuY2VsX3dvcmsoJmFkZXYtPnJlc2V0X3dvcmspOyAgI2VuZGlmDQo+ICsgICAg
ICAgY2FuY2VsX3dvcmsoJmFkZXYtPnVzZXJxX3Jlc2V0X3dvcmspOw0KPg0KPiAgICAgICAgIGlm
IChhZGV2LT5rZmQuZGV2KQ0KPiAgICAgICAgICAgICAgICAgY2FuY2VsX3dvcmsoJmFkZXYtPmtm
ZC5yZXNldF93b3JrKTsNCj4gQEAgLTYyMzIsNiArNjIzOCw4IEBAIHN0YXRpYyB2b2lkIGFtZGdw
dV9kZXZpY2VfaGFsdF9hY3Rpdml0aWVzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KPiAg
ICAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X2RldmljZV9pcF9uZWVkX2Z1bGxfcmVzZXQodG1w
X2FkZXYpKQ0KPiAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfcmFzX3N1c3BlbmQodG1w
X2FkZXYpOw0KPg0KPiArICAgICAgICAgICAgICAgYW1kZ3B1X3VzZXJxX3ByZV9yZXNldCh0bXBf
YWRldik7DQo+ICsNCj4gICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBBTURHUFVfTUFY
X1JJTkdTOyArK2kpIHsNCj4gICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGFtZGdwdV9y
aW5nICpyaW5nID0gdG1wX2FkZXYtPnJpbmdzW2ldOw0KPg0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3VzZXJxLmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdXNlcnEuYw0KPiBpbmRleCBkZWNlZGY4MDU3YWMuLjk5NmM3Mzk3
YTU3ZiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Vz
ZXJxLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3VzZXJxLmMN
Cj4gQEAgLTI1LDggKzI1LDEwIEBADQo+ICAjaW5jbHVkZSA8ZHJtL2RybV9hdXRoLmg+DQo+ICAj
aW5jbHVkZSA8ZHJtL2RybV9leGVjLmg+DQo+ICAjaW5jbHVkZSA8bGludXgvcG1fcnVudGltZS5o
Pg0KPiArI2luY2x1ZGUgPGRybS9kcm1fZHJ2Lmg+DQo+DQo+ICAjaW5jbHVkZSAiYW1kZ3B1Lmgi
DQo+ICsjaW5jbHVkZSAiYW1kZ3B1X3Jlc2V0LmgiDQo+ICAjaW5jbHVkZSAiYW1kZ3B1X3ZtLmgi
DQo+ICAjaW5jbHVkZSAiYW1kZ3B1X3VzZXJxLmgiDQo+ICAjaW5jbHVkZSAiYW1kZ3B1X3VzZXJx
X2ZlbmNlLmgiDQo+IEBAIC00NCw2ICs0NiwxMDIgQEAgdTMyIGFtZGdwdV91c2VycV9nZXRfc3Vw
cG9ydGVkX2lwX21hc2soc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+ICAgICAgICAgcmV0
dXJuIHVzZXJxX2lwX21hc2s7DQo+ICB9DQo+DQo+ICtzdGF0aWMgdm9pZCBhbWRncHVfdXNlcnFf
Z3B1X3Jlc2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KSB7DQo+ICsNCj4gKyAgICAgICBp
ZiAoYW1kZ3B1X2RldmljZV9zaG91bGRfcmVjb3Zlcl9ncHUoYWRldikpIHsNCj4gKyAgICAgICAg
ICAgICAgIGFtZGdwdV9yZXNldF9kb21haW5fc2NoZWR1bGUoYWRldi0+cmVzZXRfZG9tYWluLA0K
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmYWRldi0+dXNl
cnFfcmVzZXRfd29yayk7DQo+ICsgICAgICAgICAgICAgICAvKiBXYWl0IGZvciB0aGUgcmVzZXQg
am9iIHRvIGNvbXBsZXRlICovDQo+ICsgICAgICAgICAgICAgICBmbHVzaF93b3JrKCZhZGV2LT51
c2VycV9yZXNldF93b3JrKTsNCj4gKyAgICAgICB9DQo+ICt9DQo+ICsNCj4gK3N0YXRpYyBpbnQN
Cj4gK2FtZGdwdV91c2VycV9kZXRlY3RfYW5kX3Jlc2V0X3NkbWEoc3RydWN0IGFtZGdwdV91c2Vy
cV9tZ3IgKnVxX21ncikgew0KPiArICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0g
dXFfbWdyLT5hZGV2Ow0KPiArICAgICAgIGNvbnN0IHN0cnVjdCBhbWRncHVfdXNlcnFfZnVuY3Mg
KnVzZXJxX3NkbWFfZnVuY3MgPQ0KPiArICAgICAgICAgICAgICAgICAgICAgICBhZGV2LT51c2Vy
cV9mdW5jc1tBTURHUFVfUklOR19UWVBFX1NETUFdOw0KPiArICAgICAgIHN0cnVjdCBhbWRncHVf
dXNlcm1vZGVfcXVldWUgKnVzZXJxOw0KPiArICAgICAgIGJvb2wgaGFzX3NkbWEgPSBmYWxzZTsN
Cj4gKyAgICAgICBib29sIGdwdV9yZXNldCA9IGZhbHNlOw0KPiArICAgICAgIGludCBpZCwgciA9
IDA7DQo+ICsNCj4gKyAgICAgICAvKiBEZXRlY3QgaWYgU0RNQSBxdWV1ZXMgYXJlIHByZXNlbnQg
Ki8NCj4gKyAgICAgICBpZHJfZm9yX2VhY2hfZW50cnkoJnVxX21nci0+dXNlcnFfaWRyLCB1c2Vy
cSwgaWQpIHsNCj4gKyAgICAgICAgICAgICAgIGlmICh1c2VycS0+cXVldWVfdHlwZSA9PSBBTURH
UFVfUklOR19UWVBFX1NETUEpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgaGFzX3NkbWEg
PSB0cnVlOw0KPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCj4gKyAgICAgICAgICAg
ICAgIH0NCj4gKyAgICAgICB9DQo+ICsNCj4gKyAgICAgICBpZiAoaGFzX3NkbWEgJiYgdXNlcnFf
c2RtYV9mdW5jcyAmJiB1c2VycV9zZG1hX2Z1bmNzLT5kZXRlY3RfYW5kX3Jlc2V0KSB7DQo+ICsg
ICAgICAgICAgICAgICByID0gdXNlcnFfc2RtYV9mdW5jcy0+ZGV0ZWN0X2FuZF9yZXNldChhZGV2
LCBBTURHUFVfUklOR19UWVBFX1NETUEpOw0KPiArICAgICAgICAgICAgICAgaWYgKHIpDQo+ICsg
ICAgICAgICAgICAgICAgICAgICAgIGdwdV9yZXNldCA9IHRydWU7DQo+ICsgICAgICAgfQ0KPiAr
DQo+ICsgICAgICAgaWYgKGdwdV9yZXNldCkNCj4gKyAgICAgICAgICAgICAgIGFtZGdwdV91c2Vy
cV9ncHVfcmVzZXQoYWRldik7DQo+ICsNCj4gKyAgICAgICByZXR1cm4gcjsNCj4gK30NCj4gKw0K
PiArc3RhdGljIGludA0KPiArYW1kZ3B1X3VzZXJxX2RldGVjdF9hbmRfcmVzZXRfZ2Z4X2NvbXB1
dGUoc3RydWN0IGFtZGdwdV91c2VycV9tZ3INCj4gKyp1cV9tZ3IpIHsNCj4gKyAgICAgICBzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHVxX21nci0+YWRldjsNCj4gKyAgICAgICBjb25zdCBz
dHJ1Y3QgYW1kZ3B1X3VzZXJxX2Z1bmNzICp1c2VycV9nZnhfZnVuY3MgPQ0KPiArICAgICAgICAg
ICAgICAgICAgICAgICBhZGV2LT51c2VycV9mdW5jc1tBTURHUFVfUklOR19UWVBFX0dGWF07DQo+
ICsgICAgICAgY29uc3Qgc3RydWN0IGFtZGdwdV91c2VycV9mdW5jcyAqdXNlcnFfY29tcHV0ZV9m
dW5jcyA9DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGFkZXYtPnVzZXJxX2Z1bmNzW0FNREdQ
VV9SSU5HX1RZUEVfQ09NUFVURV07DQo+ICsgICAgICAgc3RydWN0IGFtZGdwdV91c2VybW9kZV9x
dWV1ZSAqdXNlcnE7DQo+ICsgICAgICAgYm9vbCBoYXNfZ2Z4ID0gZmFsc2UsIGhhc19jb21wdXRl
ID0gZmFsc2U7DQo+ICsgICAgICAgYm9vbCBncHVfcmVzZXQgPSBmYWxzZTsNCj4gKyAgICAgICBp
bnQgaWQsIHIgPSAwOw0KPiArDQo+ICsgICAgICAgLyogRGV0ZWN0IHdoaWNoIHR5cGVzIG9mIHF1
ZXVlcyBhcmUgcHJlc2VudCAoZXhjbHVkaW5nIFNETUEpICovDQo+ICsgICAgICAgaWRyX2Zvcl9l
YWNoX2VudHJ5KCZ1cV9tZ3ItPnVzZXJxX2lkciwgdXNlcnEsIGlkKSB7DQo+ICsgICAgICAgICAg
ICAgICBzd2l0Y2ggKHVzZXJxLT5xdWV1ZV90eXBlKSB7DQo+ICsgICAgICAgICAgICAgICBjYXNl
IEFNREdQVV9SSU5HX1RZUEVfR0ZYOg0KPiArICAgICAgICAgICAgICAgICAgICAgICBoYXNfZ2Z4
ID0gdHJ1ZTsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+ICsgICAgICAgICAg
ICAgICBjYXNlIEFNREdQVV9SSU5HX1RZUEVfQ09NUFVURToNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgaGFzX2NvbXB1dGUgPSB0cnVlOw0KPiArICAgICAgICAgICAgICAgICAgICAgICBicmVh
azsNCj4gKyAgICAgICAgICAgICAgIGRlZmF1bHQ6DQo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGJyZWFrOw0KPiArICAgICAgICAgICAgICAgfQ0KPiArICAgICAgIH0NCj4gKw0KPiArICAgICAg
IGlmICh1bmxpa2VseShhZGV2LT5kZWJ1Z19kaXNhYmxlX2dwdV9yaW5nX3Jlc2V0KSkgew0KPiAr
ICAgICAgICAgICAgICAgZGV2X2VycihhZGV2LT5kZXYsICJ1c2VycSByZXNldCBkaXNhYmxlZCBi
eSBkZWJ1ZyBtYXNrXG4iKTsNCj4gKyAgICAgICB9IGVsc2UgaWYgKGFtZGdwdV9ncHVfcmVjb3Zl
cnkpIHsNCj4gKyAgICAgICAgICAgICAgIGlmIChoYXNfY29tcHV0ZSAmJiB1c2VycV9jb21wdXRl
X2Z1bmNzLT5kZXRlY3RfYW5kX3Jlc2V0KSB7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHIg
PSB1c2VycV9jb21wdXRlX2Z1bmNzLT5kZXRlY3RfYW5kX3Jlc2V0KGFkZXYsIEFNREdQVV9SSU5H
X1RZUEVfQ09NUFVURSk7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKSB7DQo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3B1X3Jlc2V0ID0gdHJ1ZTsNCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGdwdV9yZXNldDsNCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgfQ0KPiArICAgICAgICAgICAgICAgfQ0KPiArDQo+ICsgICAgICAgICAgICAg
ICBpZiAoaGFzX2dmeCAmJiB1c2VycV9nZnhfZnVuY3MtPmRldGVjdF9hbmRfcmVzZXQpIHsNCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgciA9IHVzZXJxX2dmeF9mdW5jcy0+ZGV0ZWN0X2FuZF9y
ZXNldChhZGV2LCBBTURHUFVfUklOR19UWVBFX0dGWCk7DQo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGlmIChyKSB7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3B1X3Jlc2V0
ID0gdHJ1ZTsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGdwdV9yZXNl
dDsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQ0KPiArICAgICAgICAgICAgICAgfQ0KPiAr
ICAgICAgIH0NCj4gKw0KPiArZ3B1X3Jlc2V0Og0KPiArICAgICAgIGlmIChncHVfcmVzZXQpDQo+
ICsgICAgICAgICAgICAgICBhbWRncHVfdXNlcnFfZ3B1X3Jlc2V0KGFkZXYpOw0KPiArDQo+ICsg
ICAgICAgcmV0dXJuIHI7DQo+ICt9DQoNCj4gV2h5IHNwbGl0IHRoZXNlIGludG8gdHdvIGZ1bmN0
aW9ucz8gIEkgdGhpbmsgaXQgd291bGQgYmUgbW9yZQ0KZWZmaWNpZW50IHRvIGp1c3QgaGF2ZSBh
IHNpbmdsZSBmdW5jdGlvbg0KKGFtZGdwdV91c2VycV9kZXRlY3RfYW5kX3Jlc2V0KCkpIHRoYXQg
d29ya3MgYXQgdGhlIGRldmljZSBsZXZlbCBhbmQgY2hlY2tzIHRvIHNlZSB3aGF0IHR5cGVzIG9m
IHVzZXIgcXVldWVzIGFyZSBwcmVzZW50IGFuZCB0aGVuIGNhbGxzDQpkZXRlY3RfYW5kX3Jlc2V0
KCkgZm9yIGVhY2ggcXVldWUgdHlwZSB0aGF0IGlzIHByZXNlbnQgYW5kIHRoZW4gaGF2ZSB0aGF0
IGZ1bmN0aW9uIHVwZGF0ZSB0aGUgcXVldWUgc3RhdGUgb2YgYWxsIHF1ZXVlcyB0aGF0IGFyZSBo
dW5nLg0KVGhlbiBqdXN0IGNhbGwgdGhpcyBmdW5jdGlvbiBpbiBhbGwgdGhlIHBsYWNlcyB3ZSBj
YWxsIHByZWVtcHQgb3IgdW5tYXAuICBFLmcuLA0KDQo+IGFtZGdwdV91c2VycV9kZXRlY3RfYW5k
X3Jlc2V0KCkNCmlkcl9mb3JfZWFjaF9lbnRyeSgmdXFfbWdyLT51c2VycV9pZHIsIHF1ZXVlLCBx
dWV1ZV9pZCkgew0KICAgIC8qIGV2aWN0LCB1bm1hcCwgKi8NCn0NCg0KPiBXZSBwcm9iYWJseSBh
bHNvIG5lZWQgc29tZSB3YXkgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHF1ZXVlIHJlc2V0DQp3
YXMgc3VjY2Vzc2Z1bCBvciBub3QgYmVjYXVzZSB3ZSB1bHRpbWF0ZWx5IG5lZWQgdG8gZGVjaWRl
IHdoZW4gdG8gZG8gYSBmdWxsIGFkYXB0ZXIgcmVzZXQuDQoNClRoYW5rcyBBbGV4Lg0KWW91IGFy
ZSByaWdodCwgSSB3b3VsZCByZXZlcnQgdGhlIGNoYW5nZXMgYW5kIGNhbGwgaXQgZXZlcnl3aGVy
ZSB3ZSBjYWxsIHByZWVtcHQgYW5kIHVubWFwLCBpbmNsdWRpbmcgd2hlbiBwcmVlbXB0L3VubWFw
IGZhaWxzLg0KDQpKZXNzZQ0KDQo+SGkgQWxleCwNCg0KRm9yIFNETUEsIHByZWVtcHRpb24gb24g
dGhlIEdGWDEyIGFsd2F5cyBzdWNjZWVkcyBldmVuIGlmIHRoZSBTRE1BIHF1ZXVlIGlzIHBlbmRp
bmcuIFRoZXJlZm9yZSwgd2UgbXVzdCBkZXRlY3QgdGhlIGh1bmcgcXVldWVzIGJlZm9yZSBwcmVl
bXB0aW5nL3VubWFwcGluZy4NCg0KRm9yIGNvbXB1dGUvR0ZYIHF1ZXVlcywgdGhlIEFQSSBkb2Vz
IG5vdCBkZXRlY3QgdGhlIGh1bmcgcXVldWVzIGJlZm9yZSBwcmVlbXB0aW5nL3VubWFwcGluZy4N
Ckhvd2V2ZXIsIGlmIGEgR0ZYL2NvbXB1dGUgcXVldWUgaXMgaHVuZywgcHJlZW1wdGlvbiB3aWxs
IGZhaWwuIEFmdGVyIHByZWVtcHRpb24vdW5tYXBwaW5nIGZhaWxzLCB3ZSBjYWxsIHRoZSBkZXRl
Y3Rpb24gYW5kIHJlc2V0IEFQSSwgYW5kIE1FUyByZXNldHMgdGhlIHVubWFwcGVkIHF1ZXVlLg0K
DQpGb3IgdGhpcyByZWFzb24sIEkndmUgc3BsaXQgdGhlc2UgaW50byB0d28gZnVuY3Rpb25zLg0K
DQpUaGFua3MNCkplc3NlDQoNCg0KQWxleA0KDQo+ICsNCj4gIHN0YXRpYyBpbnQNCj4gIGFtZGdw
dV91c2VycXVldWVfcHJlZW1wdF9oZWxwZXIoc3RydWN0IGFtZGdwdV91c2VycV9tZ3IgKnVxX21n
ciwNCj4gICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgYW1kZ3B1X3VzZXJtb2RlX3F1
ZXVlICpxdWV1ZSkgQEANCj4gLTU2LDYgKzE1NCw3IEBAIGFtZGdwdV91c2VycXVldWVfcHJlZW1w
dF9oZWxwZXIoc3RydWN0IGFtZGdwdV91c2VycV9tZ3IgKnVxX21nciwNCj4gICAgICAgICBpZiAo
cXVldWUtPnN0YXRlID09IEFNREdQVV9VU0VSUV9TVEFURV9NQVBQRUQpIHsNCj4gICAgICAgICAg
ICAgICAgIHIgPSB1c2VycV9mdW5jcy0+cHJlZW1wdCh1cV9tZ3IsIHF1ZXVlKTsNCj4gICAgICAg
ICAgICAgICAgIGlmIChyKSB7DQo+ICsNCj4gKyBhbWRncHVfdXNlcnFfZGV0ZWN0X2FuZF9yZXNl
dF9nZnhfY29tcHV0ZSh1cV9tZ3IpOw0KPiAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZS0+
c3RhdGUgPSBBTURHUFVfVVNFUlFfU1RBVEVfSFVORzsNCj4gICAgICAgICAgICAgICAgIH0gZWxz
ZSB7DQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLT5zdGF0ZSA9IEFNREdQVV9VU0VS
UV9TVEFURV9QUkVFTVBURUQ7DQo+IEBAIC03MiwxNyArMTcxLDIxIEBAIGFtZGdwdV91c2VycXVl
dWVfcmVzdG9yZV9oZWxwZXIoc3RydWN0IGFtZGdwdV91c2VycV9tZ3IgKnVxX21nciwNCj4gICAg
ICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHVxX21nci0+YWRldjsNCj4gICAgICAg
ICBjb25zdCBzdHJ1Y3QgYW1kZ3B1X3VzZXJxX2Z1bmNzICp1c2VycV9mdW5jcyA9DQo+ICAgICAg
ICAgICAgICAgICBhZGV2LT51c2VycV9mdW5jc1txdWV1ZS0+cXVldWVfdHlwZV07DQo+ICsgICAg
ICAgYm9vbCBncHVfcmVzZXQgPSBmYWxzZTsNCj4gICAgICAgICBpbnQgciA9IDA7DQo+DQo+ICAg
ICAgICAgaWYgKHF1ZXVlLT5zdGF0ZSA9PSBBTURHUFVfVVNFUlFfU1RBVEVfUFJFRU1QVEVEKSB7
DQo+ICAgICAgICAgICAgICAgICByID0gdXNlcnFfZnVuY3MtPnJlc3RvcmUodXFfbWdyLCBxdWV1
ZSk7DQo+ICAgICAgICAgICAgICAgICBpZiAocikgew0KPiAgICAgICAgICAgICAgICAgICAgICAg
ICBxdWV1ZS0+c3RhdGUgPSBBTURHUFVfVVNFUlFfU1RBVEVfSFVORzsNCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgZ3B1X3Jlc2V0ID0gdHJ1ZTsNCj4gICAgICAgICAgICAgICAgIH0gZWxzZSB7
DQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLT5zdGF0ZSA9IEFNREdQVV9VU0VSUV9T
VEFURV9NQVBQRUQ7DQo+ICAgICAgICAgICAgICAgICB9DQo+ICAgICAgICAgfQ0KPg0KPiArICAg
ICAgIGlmIChncHVfcmVzZXQpDQo+ICsgICAgICAgICAgICAgICBhbWRncHVfdXNlcnFfZ3B1X3Jl
c2V0KGFkZXYpOw0KPiAgICAgICAgIHJldHVybiByOw0KPiAgfQ0KPg0KPiBAQCAtOTgsMTEgKzIw
MSwxNCBAQCBhbWRncHVfdXNlcnFfdW5tYXBfaGVscGVyKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdy
ICp1cV9tZ3IsDQo+ICAgICAgICAgaWYgKChxdWV1ZS0+c3RhdGUgPT0gQU1ER1BVX1VTRVJRX1NU
QVRFX01BUFBFRCkgfHwNCj4gICAgICAgICAgICAgICAgIChxdWV1ZS0+c3RhdGUgPT0gQU1ER1BV
X1VTRVJRX1NUQVRFX1BSRUVNUFRFRCkpIHsNCj4gICAgICAgICAgICAgICAgIHIgPSB1c2VycV9m
dW5jcy0+dW5tYXAodXFfbWdyLCBxdWV1ZSk7DQo+IC0gICAgICAgICAgICAgICBpZiAocikNCj4g
KyAgICAgICAgICAgICAgIGlmIChyKSB7DQo+ICsNCj4gKyBhbWRncHVfdXNlcnFfZGV0ZWN0X2Fu
ZF9yZXNldF9nZnhfY29tcHV0ZSh1cV9tZ3IpOw0KPiAgICAgICAgICAgICAgICAgICAgICAgICBx
dWV1ZS0+c3RhdGUgPSBBTURHUFVfVVNFUlFfU1RBVEVfSFVORzsNCj4gLSAgICAgICAgICAgICAg
IGVsc2UNCj4gKyAgICAgICAgICAgICAgIH0gZWxzZSB7DQo+ICAgICAgICAgICAgICAgICAgICAg
ICAgIHF1ZXVlLT5zdGF0ZSA9IEFNREdQVV9VU0VSUV9TVEFURV9VTk1BUFBFRDsNCj4gKyAgICAg
ICAgICAgICAgIH0NCj4gICAgICAgICB9DQo+ICsNCj4gICAgICAgICByZXR1cm4gcjsNCj4gIH0N
Cj4NCj4gQEAgLTExMywxNiArMjE5LDIyIEBAIGFtZGdwdV91c2VycV9tYXBfaGVscGVyKHN0cnVj
dCBhbWRncHVfdXNlcnFfbWdyICp1cV9tZ3IsDQo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYgPSB1cV9tZ3ItPmFkZXY7DQo+ICAgICAgICAgY29uc3Qgc3RydWN0IGFtZGdwdV91
c2VycV9mdW5jcyAqdXNlcnFfZnVuY3MgPQ0KPiAgICAgICAgICAgICAgICAgYWRldi0+dXNlcnFf
ZnVuY3NbcXVldWUtPnF1ZXVlX3R5cGVdOw0KPiArICAgICAgIGJvb2wgZ3B1X3Jlc2V0ID0gZmFs
c2U7DQo+ICAgICAgICAgaW50IHIgPSAwOw0KPg0KPiAgICAgICAgIGlmIChxdWV1ZS0+c3RhdGUg
PT0gQU1ER1BVX1VTRVJRX1NUQVRFX1VOTUFQUEVEKSB7DQo+ICAgICAgICAgICAgICAgICByID0g
dXNlcnFfZnVuY3MtPm1hcCh1cV9tZ3IsIHF1ZXVlKTsNCj4gICAgICAgICAgICAgICAgIGlmIChy
KSB7DQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLT5zdGF0ZSA9IEFNREdQVV9VU0VS
UV9TVEFURV9IVU5HOw0KPiArICAgICAgICAgICAgICAgICAgICAgICBncHVfcmVzZXQgPSB0cnVl
Ow0KPiAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCj4gICAgICAgICAgICAgICAgICAgICAgICAg
cXVldWUtPnN0YXRlID0gQU1ER1BVX1VTRVJRX1NUQVRFX01BUFBFRDsNCj4gICAgICAgICAgICAg
ICAgIH0NCj4gICAgICAgICB9DQo+ICsNCj4gKyAgICAgICBpZiAoZ3B1X3Jlc2V0KQ0KPiArICAg
ICAgICAgICAgICAgYW1kZ3B1X3VzZXJxX2dwdV9yZXNldChhZGV2KTsNCj4gKw0KPiAgICAgICAg
IHJldHVybiByOw0KPiAgfQ0KPg0KPiBAQCAtMzYxLDYgKzQ3Myw3IEBAIGFtZGdwdV91c2VycV9k
ZXN0cm95KHN0cnVjdCBkcm1fZmlsZSAqZmlscCwgaW50IHF1ZXVlX2lkKQ0KPiAgICAgICAgICAg
ICAgICAgYW1kZ3B1X2JvX3VucmVzZXJ2ZShxdWV1ZS0+ZGJfb2JqLm9iaik7DQo+ICAgICAgICAg
fQ0KPiAgICAgICAgIGFtZGdwdV9ib191bnJlZigmcXVldWUtPmRiX29iai5vYmopOw0KPiArICAg
ICAgIGFtZGdwdV91c2VycV9kZXRlY3RfYW5kX3Jlc2V0X3NkbWEodXFfbWdyKTsNCj4gICAgICAg
ICByID0gYW1kZ3B1X3VzZXJxX3VubWFwX2hlbHBlcih1cV9tZ3IsIHF1ZXVlKTsNCj4gICAgICAg
ICBhbWRncHVfdXNlcnFfY2xlYW51cCh1cV9tZ3IsIHF1ZXVlLCBxdWV1ZV9pZCk7DQo+ICAgICAg
ICAgbXV0ZXhfdW5sb2NrKCZ1cV9tZ3ItPnVzZXJxX211dGV4KTsNCj4gQEAgLTczNCw2ICs4NDcs
NyBAQCBhbWRncHVfdXNlcnFfZXZpY3RfYWxsKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyICp1cV9t
Z3IpDQo+ICAgICAgICAgaW50IHF1ZXVlX2lkOw0KPiAgICAgICAgIGludCByZXQgPSAwLCByOw0K
Pg0KPiArICAgICAgIGFtZGdwdV91c2VycV9kZXRlY3RfYW5kX3Jlc2V0X3NkbWEgKHVxX21ncik7
DQo+ICAgICAgICAgLyogVHJ5IHRvIHVubWFwIGFsbCB0aGUgcXVldWVzIGluIHRoaXMgcHJvY2Vz
cyBjdHggKi8NCj4gICAgICAgICBpZHJfZm9yX2VhY2hfZW50cnkoJnVxX21nci0+dXNlcnFfaWRy
LCBxdWV1ZSwgcXVldWVfaWQpIHsNCj4gICAgICAgICAgICAgICAgIHIgPSBhbWRncHVfdXNlcnF1
ZXVlX3ByZWVtcHRfaGVscGVyKHVxX21nciwgcXVldWUpOyBAQA0KPiAtNzQ2LDYgKzg2MCwyMyBA
QCBhbWRncHVfdXNlcnFfZXZpY3RfYWxsKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyICp1cV9tZ3Ip
DQo+ICAgICAgICAgcmV0dXJuIHJldDsNCj4gIH0NCj4NCj4gK3ZvaWQgYW1kZ3B1X3VzZXJxX3Jl
c2V0X3dvcmsoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKSB7DQo+ICsgICAgICAgc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYgPSBjb250YWluZXJfb2Yod29yaywgc3RydWN0IGFtZGdwdV9kZXZp
Y2UsDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dXNlcnFfcmVzZXRfd29yayk7DQo+ICsgICAgICAgc3RydWN0IGFtZGdwdV9yZXNldF9jb250ZXh0
IHJlc2V0X2NvbnRleHQ7DQo+ICsNCj4gKyAgICAgICBtZW1zZXQoJnJlc2V0X2NvbnRleHQsIDAs
IHNpemVvZihyZXNldF9jb250ZXh0KSk7DQo+ICsNCj4gKyAgICAgICByZXNldF9jb250ZXh0Lm1l
dGhvZCA9IEFNRF9SRVNFVF9NRVRIT0RfTk9ORTsNCj4gKyAgICAgICByZXNldF9jb250ZXh0LnJl
c2V0X3JlcV9kZXYgPSBhZGV2Ow0KPiArICAgICAgIHJlc2V0X2NvbnRleHQuc3JjID0gQU1ER1BV
X1JFU0VUX1NSQ19VU0VSUTsNCj4gKyAgICAgICBzZXRfYml0KEFNREdQVV9ORUVEX0ZVTExfUkVT
RVQsICZyZXNldF9jb250ZXh0LmZsYWdzKTsNCj4gKyAgICAgICAvKnNldF9iaXQoQU1ER1BVX1NL
SVBfQ09SRURVTVAsICZyZXNldF9jb250ZXh0LmZsYWdzKTsqLw0KPiArDQo+ICsgICAgICAgYW1k
Z3B1X2RldmljZV9ncHVfcmVjb3ZlcihhZGV2LCBOVUxMLCAmcmVzZXRfY29udGV4dCk7IH0NCj4g
Kw0KPiAgc3RhdGljIGludA0KPiAgYW1kZ3B1X3VzZXJxX3dhaXRfZm9yX3NpZ25hbChzdHJ1Y3Qg
YW1kZ3B1X3VzZXJxX21nciAqdXFfbWdyKSAgeyBAQA0KPiAtNzcyLDIyICs5MDMsMTkgQEAgdm9p
ZCAgYW1kZ3B1X3VzZXJxX2V2aWN0KHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyDQo+ICp1cV9tZ3Is
DQo+ICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2V2aWN0aW9uX2ZlbmNlICpldl9m
ZW5jZSkgIHsNCj4gLSAgICAgICBpbnQgcmV0Ow0KPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZnBy
aXYgKmZwcml2ID0gdXFfbWdyX3RvX2Zwcml2KHVxX21ncik7DQo+ICAgICAgICAgc3RydWN0IGFt
ZGdwdV9ldmljdGlvbl9mZW5jZV9tZ3IgKmV2Zl9tZ3IgPSAmZnByaXYtPmV2Zl9tZ3I7DQo+ICsg
ICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSB1cV9tZ3ItPmFkZXY7DQo+ICsgICAg
ICAgaW50IHJldDsNCj4NCj4gICAgICAgICAvKiBXYWl0IGZvciBhbnkgcGVuZGluZyB1c2VycXVl
dWUgZmVuY2Ugd29yayB0byBmaW5pc2ggKi8NCj4gICAgICAgICByZXQgPSBhbWRncHVfdXNlcnFf
d2FpdF9mb3Jfc2lnbmFsKHVxX21ncik7DQo+IC0gICAgICAgaWYgKHJldCkgew0KPiAtICAgICAg
ICAgICAgICAgZHJtX2ZpbGVfZXJyKHVxX21nci0+ZmlsZSwgIk5vdCBldmljdGluZyB1c2VycXVl
dWUsIHRpbWVvdXQgd2FpdGluZyBmb3Igd29ya1xuIik7DQo+IC0gICAgICAgICAgICAgICByZXR1
cm47DQo+IC0gICAgICAgfQ0KPiArICAgICAgIGlmIChyZXQpDQo+ICsgICAgICAgICAgICAgICBk
ZXZfZXJyKGFkZXYtPmRldiwgIk5vdCBldmljdGluZyB1c2VycXVldWUsIHRpbWVvdXQNCj4gKyB3
YWl0aW5nIGZvciB3b3JrXG4iKTsNCj4NCj4gICAgICAgICByZXQgPSBhbWRncHVfdXNlcnFfZXZp
Y3RfYWxsKHVxX21ncik7DQo+IC0gICAgICAgaWYgKHJldCkgew0KPiAtICAgICAgICAgICAgICAg
ZHJtX2ZpbGVfZXJyKHVxX21nci0+ZmlsZSwgIkZhaWxlZCB0byBldmljdCB1c2VycXVldWVcbiIp
Ow0KPiAtICAgICAgICAgICAgICAgcmV0dXJuOw0KPiAtICAgICAgIH0NCj4gKyAgICAgICBpZiAo
cmV0KQ0KPiArICAgICAgICAgICAgICAgZGV2X2VycihhZGV2LT5kZXYsICJGYWlsZWQgdG8gZXZp
Y3QgdXNlcnF1ZXVlXG4iKTsNCj4NCj4gICAgICAgICAvKiBTaWduYWwgY3VycmVudCBldmljdGlv
biBmZW5jZSAqLw0KPiAgICAgICAgIGFtZGdwdV9ldmljdGlvbl9mZW5jZV9zaWduYWwoZXZmX21n
ciwgZXZfZmVuY2UpOyBAQCAtODI4LDYNCj4gKzk1Niw3IEBAIHZvaWQgYW1kZ3B1X3VzZXJxX21n
cl9maW5pKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyDQo+ICp1c2VycV9tZ3IpDQo+DQo+ICAgICAg
ICAgbXV0ZXhfbG9jaygmYWRldi0+dXNlcnFfbXV0ZXgpOw0KPiAgICAgICAgIG11dGV4X2xvY2so
JnVzZXJxX21nci0+dXNlcnFfbXV0ZXgpOw0KPiArICAgICAgIGFtZGdwdV91c2VycV9kZXRlY3Rf
YW5kX3Jlc2V0X3NkbWEodXNlcnFfbWdyKTsNCj4gICAgICAgICBpZHJfZm9yX2VhY2hfZW50cnko
JnVzZXJxX21nci0+dXNlcnFfaWRyLCBxdWV1ZSwgcXVldWVfaWQpIHsNCj4gICAgICAgICAgICAg
ICAgIGFtZGdwdV91c2VycV93YWl0X2Zvcl9sYXN0X2ZlbmNlKHVzZXJxX21nciwgcXVldWUpOw0K
PiAgICAgICAgICAgICAgICAgYW1kZ3B1X3VzZXJxX3VubWFwX2hlbHBlcih1c2VycV9tZ3IsIHF1
ZXVlKTsgQEANCj4gLTg2MSwxMCArOTkwLDEzIEBAIGludCBhbWRncHVfdXNlcnFfc3VzcGVuZChz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4gICAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5
X3NhZmUodXFtLCB0bXAsICZhZGV2LT51c2VycV9tZ3JfbGlzdCwgbGlzdCkgew0KPiAgICAgICAg
ICAgICAgICAgY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCZ1cW0tPnJlc3VtZV93b3JrKTsNCj4g
ICAgICAgICAgICAgICAgIG11dGV4X2xvY2soJnVxbS0+dXNlcnFfbXV0ZXgpOw0KPiArICAgICAg
ICAgICAgICAgYW1kZ3B1X3VzZXJxX2RldGVjdF9hbmRfcmVzZXRfc2RtYSh1cW0pOw0KPiAgICAg
ICAgICAgICAgICAgaWRyX2Zvcl9lYWNoX2VudHJ5KCZ1cW0tPnVzZXJxX2lkciwgcXVldWUsIHF1
ZXVlX2lkKSB7DQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBhbWRncHVfdXNlcnFfdW5t
YXBfaGVscGVyKHVxbSwgcXVldWUpOw0KPiAtICAgICAgICAgICAgICAgICAgICAgICBpZiAocikN
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsNCj4gKw0KPiArIGFtZGdwdV91c2Vy
cV9kZXRlY3RfYW5kX3Jlc2V0X2dmeF9jb21wdXRlKHVxbSk7DQo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcmV0ID0gcjsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQ0KPiAg
ICAgICAgICAgICAgICAgfQ0KPiAgICAgICAgICAgICAgICAgbXV0ZXhfdW5sb2NrKCZ1cW0tPnVz
ZXJxX211dGV4KTsNCj4gICAgICAgICB9DQo+IEBAIC05MTcsMTMgKzEwNDksMTYgQEAgaW50IGFt
ZGdwdV91c2VycV9zdG9wX3NjaGVkX2Zvcl9lbmZvcmNlX2lzb2xhdGlvbihzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiwNCj4gICAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUodXFtLCB0
bXAsICZhZGV2LT51c2VycV9tZ3JfbGlzdCwgbGlzdCkgew0KPiAgICAgICAgICAgICAgICAgY2Fu
Y2VsX2RlbGF5ZWRfd29ya19zeW5jKCZ1cW0tPnJlc3VtZV93b3JrKTsNCj4gICAgICAgICAgICAg
ICAgIG11dGV4X2xvY2soJnVxbS0+dXNlcnFfbXV0ZXgpOw0KPiArICAgICAgICAgICAgICAgYW1k
Z3B1X3VzZXJxX2RldGVjdF9hbmRfcmVzZXRfc2RtYSh1cW0pOw0KPiAgICAgICAgICAgICAgICAg
aWRyX2Zvcl9lYWNoX2VudHJ5KCZ1cW0tPnVzZXJxX2lkciwgcXVldWUsIHF1ZXVlX2lkKSB7DQo+
ICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKHF1ZXVlLT5xdWV1ZV90eXBlID09IEFNREdQ
VV9IV19JUF9HRlgpIHx8DQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHF1ZXVlLT5x
dWV1ZV90eXBlID09IEFNREdQVV9IV19JUF9DT01QVVRFKSkgJiYNCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIChxdWV1ZS0+eGNwX2lkID09IGlkeCkpIHsNCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICByID0gYW1kZ3B1X3VzZXJxX3VubWFwX2hlbHBlcih1cW0sIHF1ZXVl
KTsNCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocikNCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBpZiAocikgew0KPiArDQo+ICsgYW1kZ3B1X3VzZXJxX2Rl
dGVjdF9hbmRfcmVzZXRfZ2Z4X2NvbXB1dGUodXFtKTsNCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHJldCA9IHI7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgfQ0KPiAgICAgICAgICAgICAgICAgICAgICAgICB9DQo+ICAgICAgICAgICAgICAgICB9
DQo+ICAgICAgICAgICAgICAgICBtdXRleF91bmxvY2soJnVxbS0+dXNlcnFfbXV0ZXgpOyBAQCAt
OTY1LDMgKzExMDAsNTcgQEANCj4gaW50IGFtZGdwdV91c2VycV9zdGFydF9zY2hlZF9mb3JfZW5m
b3JjZV9pc29sYXRpb24oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+ICAgICAgICAgbXV0
ZXhfdW5sb2NrKCZhZGV2LT51c2VycV9tdXRleCk7DQo+ICAgICAgICAgcmV0dXJuIHJldDsNCj4g
IH0NCj4gKw0KPiArdm9pZCBhbWRncHVfdXNlcnFfcHJlX3Jlc2V0KHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KSB7DQo+ICsgICAgICAgY29uc3Qgc3RydWN0IGFtZGdwdV91c2VycV9mdW5jcyAq
dXNlcnFfZnVuY3M7DQo+ICsgICAgICAgc3RydWN0IGFtZGdwdV91c2VybW9kZV9xdWV1ZSAqcXVl
dWU7DQo+ICsgICAgICAgc3RydWN0IGFtZGdwdV91c2VycV9tZ3IgKnVxbSwgKnRtcDsNCj4gKyAg
ICAgICBpbnQgcXVldWVfaWQ7DQo+ICsNCj4gKyAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5X3Nh
ZmUodXFtLCB0bXAsICZhZGV2LT51c2VycV9tZ3JfbGlzdCwgbGlzdCkgew0KPiArICAgICAgICAg
ICAgICAgY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCZ1cW0tPnJlc3VtZV93b3JrKTsNCj4gKyAg
ICAgICAgICAgICAgIGlkcl9mb3JfZWFjaF9lbnRyeSgmdXFtLT51c2VycV9pZHIsIHF1ZXVlLCBx
dWV1ZV9pZCkgew0KPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAocXVldWUtPnN0YXRlID09
IEFNREdQVV9VU0VSUV9TVEFURV9NQVBQRUQpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBhbWRncHVfdXNlcnFfd2FpdF9mb3JfbGFzdF9mZW5jZSh1cW0sIHF1ZXVlKTsNCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VycV9mdW5jcyA9IGFkZXYtPnVzZXJx
X2Z1bmNzW3F1ZXVlLT5xdWV1ZV90eXBlXTsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB1c2VycV9mdW5jcy0+dW5tYXAodXFtLCBxdWV1ZSk7DQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgLyoganVzdCBtYXJrIGFsbCBxdWV1ZXMgYXMgaHVuZyBhdCB0aGlzIHBv
aW50Lg0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGlmIHVubWFwIHN1Y2Nl
ZWRzLCB3ZSBjb3VsZCBtYXAgYWdhaW4NCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgKiBpbiBhbWRncHVfdXNlcnFfcG9zdF9yZXNldCgpIGlmIHZyYW0gaXMgbm90IGxvc3QNCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi8NCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBxdWV1ZS0+c3RhdGUgPSBBTURHUFVfVVNFUlFfU1RBVEVfSFVORzsNCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfdXNlcnFfZmVuY2VfZHJpdmVy
X2ZvcmNlX2NvbXBsZXRpb24ocXVldWUpOw0KPiArICAgICAgICAgICAgICAgICAgICAgICB9DQo+
ICsgICAgICAgICAgICAgICB9DQo+ICsgICAgICAgfQ0KPiArfQ0KPiArDQo+ICtpbnQgYW1kZ3B1
X3VzZXJxX3Bvc3RfcmVzZXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIGJvb2wNCj4gK3Zy
YW1fbG9zdCkgew0KPiArICAgICAgIC8qIGlmIGFueSBxdWV1ZSBzdGF0ZSBpcyBBTURHUFVfVVNF
UlFfU1RBVEVfVU5NQVBQRUQNCj4gKyAgICAgICAgKiBhdCB0aGlzIHBvaW50LCB3ZSBzaG91bGQg
YmUgYWJsZSB0byBtYXAgaXQgYWdhaW4NCj4gKyAgICAgICAgKiBhbmQgY29udGludWUgaWYgdnJh
bSBpcyBub3QgbG9zdC4NCj4gKyAgICAgICAgKi8NCj4gKyAgICAgICBzdHJ1Y3QgYW1kZ3B1X3Vz
ZXJxX21nciAqdXFtOw0KPiArICAgICAgIHN0cnVjdCBhbWRncHVfdXNlcm1vZGVfcXVldWUgKnF1
ZXVlOw0KPiArICAgICAgIGNvbnN0IHN0cnVjdCBhbWRncHVfdXNlcnFfZnVuY3MgKnVzZXJxX2Z1
bmNzOw0KPiArICAgICAgIGludCBxdWV1ZV9pZCwgciA9IDA7DQo+ICsNCj4gKyAgICAgICBsaXN0
X2Zvcl9lYWNoX2VudHJ5KHVxbSwgJmFkZXYtPnVzZXJxX21ncl9saXN0LCBsaXN0KSB7DQo+ICsg
ICAgICAgICAgICAgICBpZHJfZm9yX2VhY2hfZW50cnkoJnVxbS0+dXNlcnFfaWRyLCBxdWV1ZSwg
cXVldWVfaWQpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXVlLT5zdGF0ZSA9
PSBBTURHUFVfVVNFUlFfU1RBVEVfSFVORyAmJiAhdnJhbV9sb3N0KSB7DQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdXNlcnFfZnVuY3MgPSBhZGV2LT51c2VycV9mdW5jc1txdWV1
ZS0+cXVldWVfdHlwZV07DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogcmUt
bWFwIHF1ZXVlICovDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHVzZXJx
X2Z1bmNzLT5tYXAodXFtLCBxdWV1ZSk7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgKHIpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRl
dl9lcnIoYWRldi0+ZGV2LCAiRmFpbGVkIHRvIHJlbWFwIHF1ZXVlICVkXG4iLCBxdWV1ZV9pZCk7
DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcXVldWUtPnN0YXRlID0gQU1ER1BVX1VTRVJRX1NUQVRFX01BUFBFRDsNCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgfQ0KPiArICAgICAgICAgICAgICAgfQ0KPiArICAgICAg
IH0NCj4gKw0KPiArICAgICAgIHJldHVybiByOw0KPiArfQ0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3VzZXJxLmgNCj4gYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdXNlcnEuaA0KPiBpbmRleCA5ZmEwZDFhODhkNzEuLmU2OGJiMTQ0
YjI2ZiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Vz
ZXJxLmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3VzZXJxLmgN
Cj4gQEAgLTEzOCw0ICsxMzgsOSBAQCBpbnQNCj4gYW1kZ3B1X3VzZXJxX3N0b3Bfc2NoZWRfZm9y
X2VuZm9yY2VfaXNvbGF0aW9uKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCAgaW50IGFtZGdw
dV91c2VycV9zdGFydF9zY2hlZF9mb3JfZW5mb3JjZV9pc29sYXRpb24oc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsDQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHUzMiBpZHgpOw0KPg0KPiArdm9pZCBhbWRncHVfdXNlcnFfcmVzZXRfd29yayhz
dHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspOw0KPiArDQo+ICt2b2lkIGFtZGdwdV91c2VycV9wcmVf
cmVzZXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOyBpbnQNCj4gK2FtZGdwdV91c2VycV9w
b3N0X3Jlc2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBib29sIHZyYW1fbG9zdCk7DQo+
ICsNCj4gICNlbmRpZg0KPiAtLQ0KPiAyLjQ5LjANCj4NCg==
