Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7187BB41865
	for <lists+amd-gfx@lfdr.de>; Wed,  3 Sep 2025 10:27:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D4BBE10E498;
	Wed,  3 Sep 2025 08:27:06 +0000 (UTC)
Authentication-Results: gabe.freedesktop.org;
	dkim=pass (1024-bit key; unprotected) header.d=amd.com header.i=@amd.com header.b="x7DEf2Kg";
	dkim-atps=neutral
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM10-DM6-obe.outbound.protection.outlook.com
 (mail-dm6nam10on2055.outbound.protection.outlook.com [40.107.93.55])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A26C310E498
 for <amd-gfx@lists.freedesktop.org>; Wed,  3 Sep 2025 08:27:05 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector10001; d=microsoft.com; cv=none;
 b=HQMXIAct2hWOM3172bxnnG++F/mGLhDJaq6TjgbgRki7RAGCHfxe2MN7zCKzzUuNbWHN1gsVurdvHr1U9kBOBumTHccq8lv+mfyCpoq069X95fyrLWE66pLjiuyw8uHH9VQa0KXRIdncVLm7TmIwtYpxxqNHV6G+FiM1btSgGSMb0N5HVU7FQ/++0LeRNkWea8eBI8zijp5K0ZetMGzbJWFQ3AdhBrqKH7P+oteXj5qbrTVtRUmsw8zu0lFbGzJPijl2X998lsJK18KecsOmQYilLo0S3jyIty6HsWxU3TmhC03yg8HJYo2NDZgytaOt/NcDcld4X7UpVTpzIPCwbA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector10001;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=Ia0PALsHoJMrMmFNcevAWQKzwm2PJ9PFZHVZMe5GM18=;
 b=YJZFyaBUOuZtQc4pXCYwd/CrLnkrZrt5YagttqWU0jBf2CtvhM+LFvSAJWo8AD6lOkCYHKUxQk4as10NYioGgIaOE9oGVlhwNBU7TosIXYKgOT5g0WntmMDAApk9+i2ToVPp8b4j5YUXuLlLaYLolDuoG0tgr+CjDOlp0El9RjWagBZlOhdnLW23odrq0WzjY92nurx75uiK7y6UmHBWWPDxSjs7UyM+zLD5UAhHqFMiOAG4rAQzeqFqE8ETkBzH0q/+7pjazBFcg4bT7jSh9EoxXghLNucGcPSzxyqqMXWC7//5njy9JTldjqxK3zwDvECvmykFv4cBeo60DyAyoQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Ia0PALsHoJMrMmFNcevAWQKzwm2PJ9PFZHVZMe5GM18=;
 b=x7DEf2Kgd6N6vgv2f/s0RKqVGD5wR/jeUAdKMyYrd1F4dzGfQd9Fvve5AhEWMUCg909Aau8M2rYlpyGMxmZMLyNk1nuB51bA6Z8810CDK7tnBe999ohEiRgmLES+4uY6DNPkI0qCjO4jEPUaKnGRjUabWJn4Z5tDrBXOe4JCHPA=
Received: from DM4PR12MB5152.namprd12.prod.outlook.com (2603:10b6:5:393::16)
 by MW4PR12MB6684.namprd12.prod.outlook.com (2603:10b6:303:1ee::22) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.9073.27; Wed, 3 Sep
 2025 08:27:00 +0000
Received: from DM4PR12MB5152.namprd12.prod.outlook.com
 ([fe80::d4b5:6a30:96d5:e3ed]) by DM4PR12MB5152.namprd12.prod.outlook.com
 ([fe80::d4b5:6a30:96d5:e3ed%7]) with mapi id 15.20.9073.026; Wed, 3 Sep 2025
 08:27:00 +0000
From: "Zhang, Jesse(Jie)" <Jesse.Zhang@amd.com>
To: Alex Deucher <alexdeucher@gmail.com>
CC: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Deucher, 
 Alexander" <Alexander.Deucher@amd.com>, "Koenig, Christian"
 <Christian.Koenig@amd.com>
Subject: RE: [v13 11/11] drm/amdgpu: Implement user queue reset functionality
Thread-Topic: [v13 11/11] drm/amdgpu: Implement user queue reset functionality
Thread-Index: AQHcG+DLzHlXC6hH9UKlPjyYVBRRTrSAbD8AgACzGoA=
Date: Wed, 3 Sep 2025 08:26:59 +0000
Message-ID: <DM4PR12MB5152736ABD8BCBA3D64C65D9E301A@DM4PR12MB5152.namprd12.prod.outlook.com>
References: <20250902080712.2515811-1-Jesse.Zhang@amd.com>
 <20250902080712.2515811-11-Jesse.Zhang@amd.com>
 <CADnq5_MpYB2vZUBJEoXd3kL9EuH6PjX+Ey=bon0daXbptkwQ2g@mail.gmail.com>
In-Reply-To: <CADnq5_MpYB2vZUBJEoXd3kL9EuH6PjX+Ey=bon0daXbptkwQ2g@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_Enabled=True;
 MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_SetDate=2025-09-03T08:20:05.0000000Z;
 MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_Name=AMD
 Internal Distribution
 Only; MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_ContentBits=3;
 MSIP_Label_dce362fe-1558-4fb5-9f64-8a6240d76441_Method=Standard
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=amd.com;
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: DM4PR12MB5152:EE_|MW4PR12MB6684:EE_
x-ms-office365-filtering-correlation-id: 404118ef-fb27-4576-b188-08ddeac3a70f
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0; ARA:13230040|376014|1800799024|366016|38070700018;
x-microsoft-antispam-message-info: =?utf-8?B?L095NkVWdjllOFROMzJkZjRudzVGcXJNNldPNGw1YzlQRWVpamFJQlYrUW5X?=
 =?utf-8?B?ZFVyT2dmUDZVa2ljZVRFeUs5Rk5JdUNyKzBZSFRpcHZjN3V4R2xqajFma05i?=
 =?utf-8?B?b0xnbkprcjk0YnQ2ZVlKNENWR09jamVCcXdJSEcrb0VGUHFCbDFYbjBNU3Ja?=
 =?utf-8?B?bHA1UXh2ZTB5ek9LeXUxUXgvUkl1UU9GZ0tsYmMzSmQyR1Z4bUxnZy9vMGZU?=
 =?utf-8?B?ZlZKcHVQaCtlcEIvOUxnRFExK1cxRXNTTDFJQy8rajhRZjl6c2Y5cjZ0a2Rk?=
 =?utf-8?B?Zms3U2ZLRlpQakNnVG00bm50NGVHelc5bmtoMjVnYjhNdkdQMGMrVE82Ukg5?=
 =?utf-8?B?K1Y5ZUZseTVSMVVTdFBMdWkxSnlHMFZ2Z1MwRjFiZk9CZU9TWmgxOEY4UStH?=
 =?utf-8?B?VVFwZWFvQ0R4QnBad3lIL05xdXVIKzRTNmJjSlQ3SFY2ei9uS2EweDZOeDlv?=
 =?utf-8?B?M3hkVU5xZUx4T0FZd3BMeERlenlxekRTNEJmUHRFak81QWNPU3hKNHFEQzAw?=
 =?utf-8?B?ZXZ0Q095K3J3L0piWUFkYXFnc25XNXJhSlB5aW4yN1E0M2tHWi85YlhsbC9Y?=
 =?utf-8?B?cG8zSE8xNnNUQlU4ZlNnMjR1Sjd2aTMrZlZ4TUF4TXJIUmNjaHNnZCtJQzN3?=
 =?utf-8?B?aVNVbTdNNTQ4T0lSVG1RbXFlODBZN0dadGFnZ1pPbURvZThPNEZvTnR5cklw?=
 =?utf-8?B?TXk5OVVuODZ2c08rL21JQi9uU3lsVFhva1pXV0krSnlweVNDZVh0dXBSRXFL?=
 =?utf-8?B?VHJpOW9IZ0FzalJxTEdDZm5KV0N6a3F2T2hmL0FMeXErZmRWVXJqNlFTMWh2?=
 =?utf-8?B?QXRUb2MwRXFTZWV4QVFEWlNtSStvb0psNEhmZ2xvWVJnOTVmOHl5d3pZbTJU?=
 =?utf-8?B?NWtjeHRRTURiM0g1M3ExYWpjWXlFY2lLangvK3YxVENKTlZSUjdxYWd0NEdX?=
 =?utf-8?B?SmtuVTROSXAzNS92TWJKZ3kzd3pHTHJDdXZVdm0vZm5qMXplaDZkZFFweFIv?=
 =?utf-8?B?ZitybDc2SnVPVGRCanpPaFlFNy9YR2hiNnVZMU9VT29ZQm1mSWpDTjhoaVlk?=
 =?utf-8?B?VXlicUw0SXQyZlltMS9IRk1nVFBrOUIrVDNDQ0dqMlpmcHNEeDNSN1h1VnR4?=
 =?utf-8?B?OS84R3plSC9UZitYMmoyY2E1b2J0c1hXaDRpd3FPQ0czTFNHQzRuYXN2cURL?=
 =?utf-8?B?UkNTZWo2V3A4Mml3bDVZMjJVWlA2Z25QTXNidWRjYmtuS25HNGVjRHphcCtS?=
 =?utf-8?B?Nk9UT2ppalpRT2ZNYjUwTjhocWVjcTBPSnZNVHFOSlJuSVRWejNqcU9OQTdX?=
 =?utf-8?B?ME1UZUN1akRWWXVLV3pOdjhKVlFsc0dNRDgzRU9yaDEyZkFvQmx6M2dSM3Ni?=
 =?utf-8?B?ODlBQ1FPSlY4VlBTd3B2a1RwQVNWU0g3S3hBM1gxOURpeHBOaThXRjduSHAx?=
 =?utf-8?B?YmdERVgrZjhkeU1QZ0ZKNTNUbStxWWJHbHg5aW5la09LaFVvN3RaVGtEZHJE?=
 =?utf-8?B?QnBuTFdjK0hyVlhJbGxYY1djTVBIMC9iWTl6V1VSWmxVaUVUY3JKRmExWDd1?=
 =?utf-8?B?VGZLSmpzdHZQVGU4Yll1ZDhuNzE5cHV1UGxBaG41NFlmRWdUdGU1YzN3aWRM?=
 =?utf-8?B?Z1ZROXZjOERuTStjbThaYTVNOVZQdXVLYXdRVFJaVWtuWFhLcVZpcnpyd0Rn?=
 =?utf-8?B?cmtkL0NHRk1jd1VMS0pMMk9oNUovRVQ0L3gwZHQ1eFh6a3ptZG5MT2RtdFNz?=
 =?utf-8?B?WGg1NkUraGdKOEtvdldOVno1K0dQd21UMUFDOCtGUlFVYk5sdEdXcHhsdHdq?=
 =?utf-8?B?K3NhbGNwL05la3BGbHdpaXptZFBMTDVtY1FmLzh1NUx5RUUzbEREeHlVUUJU?=
 =?utf-8?B?Mmw4RlBwUEV1QU5PTDh4UWFqVGcrdXRnK1hOQTQvT2hJb1IzWDFMZVEvYmx5?=
 =?utf-8?B?aEllRkg5aC9PZlAzYWUwS2libVUzWmhFSllMWWJwZEw5UFdhUmNLQy9DeTk2?=
 =?utf-8?Q?ipC3HDBXgf4KwZUyiRcmYkGdjhfXmI=3D?=
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM4PR12MB5152.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(13230040)(376014)(1800799024)(366016)(38070700018); DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?MGlsYjJDYTBFdXphN1paWUNkK1kzNWxaSjBJMHVCOGVia0pKSzh1bEtwTnQz?=
 =?utf-8?B?VllNa0txU1FYZU5lKzZCTEd2MW9aOThTK0ZuaVZtZ1d2V29IdWtISWtMUjN4?=
 =?utf-8?B?S0U5TEsxc1dZTFpSOWpqSUVPNzFreDhJUHVwQ3JJb2xqcHN0VnpPR3Vqc0tu?=
 =?utf-8?B?Umloam11TGMwWUxyWUorZzVjd3M1dkthamRnMVVaQStGanU0SlFJZ1o1ajZj?=
 =?utf-8?B?RUV5SFZxVDB5VHVVMjRTL1BrQUw0Tk5iSTJPM0hiWEJ5TW1NekNpN1NuSDJ2?=
 =?utf-8?B?ZjZiNk1GMkhQbVRYSk9FYW9mVlp0UUVFNVhlcXZXcngvMEQ3MUhPdXp6cWox?=
 =?utf-8?B?UG9JcCtUY1F3WFVqdmNiN3pRL2JYLzF1aUZWSmtOdGlONXp3SE9QNUd6cVlZ?=
 =?utf-8?B?WTlTOHJIaWttNXJpUG8vVjlUT1lhWmtldERWb3VDdVpYWjl5ck5zeWVpTjRT?=
 =?utf-8?B?U2ZYMTNHeDYxSE9rd3F5VnM2VHl4UndEVGFPMktyUENkRkFrekVxTkkvQ1Z2?=
 =?utf-8?B?Y2E2MEk5TUwyeHErN2xKem5pZ3dtZlZUQk81djVzb2ZnU1ZtL1pUMmlYcHQw?=
 =?utf-8?B?Zi9IMFVJQThDYXNCYzRUNld6MElSaUY4WHQ1UkFlUkszOW1ENFpEWXNhMXdJ?=
 =?utf-8?B?NEZQbE14Z01GaGViSTdHL1F6THJLOXV4L3ZQR3c0Y1N5aVFEUkIvZnZQL1ox?=
 =?utf-8?B?cG1QbDJ5NXlSbFYwNUZoMXEzbWN5djRCWXY0SmJwNkJZcDJtUS9IMFJYcldX?=
 =?utf-8?B?OVpaSS9hdkxNbkNmTUhQeDcxelY5RkR6ak9GWGFxTVQ5d0k4YXpWck4zM3hi?=
 =?utf-8?B?ZW55L0FKMm9zL2xFVlpIQ01qRHl1aHhKTEczdmVaZEVnZnVETmJ1a1Npa3pP?=
 =?utf-8?B?MjBlNEczRCs0QjVCQzB6bEE5MlRUZ2g5U0M1L0I0OTliUDRZSW9YQithRkNN?=
 =?utf-8?B?aFUwY3VtaDNaL2RXYzRldzl3QmpKQy96UWl5QlI2YXFWY25EQTFTaW96ZkU0?=
 =?utf-8?B?eHl0Uk5BemhUOU1OeEFtay9SR2tGQ1J1RHcvU245ZVNGV2dEVjdxakVRbkQ5?=
 =?utf-8?B?VktGenpycXhWVUZDN3NvdDh1ZjZyZWwrV1pzQi9yYys2SlNUNzNHMWJsMFhs?=
 =?utf-8?B?bG50SW92VFZueXloUFNnU0o5Q2ZHQXliVkNaSU5KSmZ5QnFrTVM2bXVrcDNr?=
 =?utf-8?B?cFUvUkltaWFFVU9jVGk3THdkb1NmM2NlL2gvR3hYMEFCbjFpTUxHOTIrL284?=
 =?utf-8?B?dW0xeU1OUGlNUDYrdGs4UDRNSTFaOGY5RHlkN0V2akh4MEw4T3IrdHJqZlVh?=
 =?utf-8?B?WXlqeVBaSFBWY3VVdWU0VFVEV0xLekZ6NHk2dEZBUUFhY3JHNittK2Nob3o4?=
 =?utf-8?B?aUhaM3Q2MEhicFNibURkNm9QRVR6YkxvMWVNelNvblZxcGZ2VVZMaU8yT0dy?=
 =?utf-8?B?TkRWdXBpanRkLzdWaFJlTnJxZklOeXFnM2swV1ZOc3hrYWprRkh6OHpvb0xl?=
 =?utf-8?B?YzJMdnJOTFdzRzVMaExNNmY1OVJwY3B1dnM2WS90SUF1QUdVVmljRnNXTzU4?=
 =?utf-8?B?THdMNll4K0RNZFE2ZWhNaFkvdHlid3NKdDRwOHlTV014MHpnN0pTWmRnTk5W?=
 =?utf-8?B?SDdZd2hXUzE5SE5JcDM5ZE96Y3VCYjYzcEVwYUdtczJ0Ty9HOU9SK0oxN2V5?=
 =?utf-8?B?dHB5RHZEc29UYnFTSWNsVFBmSFlVSmZPbUlCNjd2ZjlyT2w4VFVmUnBENllK?=
 =?utf-8?B?MHplVFVuWmFKQTBDTldEL1J5UEtCQTZPUytid0p5ek5NbUJETHBQYWN5YXo5?=
 =?utf-8?B?MUhXUjJJOTJHRDFRa1pSdkZqZzNYbGJKeWZCYlVYNGE0TFhsVW11cFdYUHRs?=
 =?utf-8?B?b0hiQ0NsVnBQTXNTYzdMSmdHWm9XL1g2NTJ0TDVGVkRSU3dnVDB1aVU5UlNF?=
 =?utf-8?B?eDA5U28zTWhSUmUwaS9KenRFTzBpbXZpZEM0UmZtUitoVGZjUEh6R3FkdlRm?=
 =?utf-8?B?QUI2T1RFTFV4SzMvYlZ4TWZ3SmdzUEkwdTV5Vm02NjNwU0tibVRRQVAzdm50?=
 =?utf-8?B?ekZra0F2YXpaR3BnQ2F6b3pCdkY3UUlqWlI2VU1BQWxiNmYzMW9zYXBKcDhE?=
 =?utf-8?Q?BYX4=3D?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DM4PR12MB5152.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 404118ef-fb27-4576-b188-08ddeac3a70f
X-MS-Exchange-CrossTenant-originalarrivaltime: 03 Sep 2025 08:26:59.8395 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: egssDDKWNtRR+gQFZO75HNtdGAgIt/OyvHMbZUy7peBzwotyPZsB1dBIsJD4dN95XcXWbJU5SBpObYESKa2Z9A==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MW4PR12MB6684
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seSAtIEFNRCBJbnRlcm5hbCBEaXN0cmlidXRpb24gT25seV0N
Cg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IGFtZC1nZnggPGFtZC1nZngtYm91
bmNlc0BsaXN0cy5mcmVlZGVza3RvcC5vcmc+IE9uIEJlaGFsZiBPZiBBbGV4IERldWNoZXINClNl
bnQ6IFdlZG5lc2RheSwgU2VwdGVtYmVyIDMsIDIwMjUgNTozOSBBTQ0KVG86IFpoYW5nLCBKZXNz
ZShKaWUpIDxKZXNzZS5aaGFuZ0BhbWQuY29tPg0KQ2M6IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnOyBEZXVjaGVyLCBBbGV4YW5kZXIgPEFsZXhhbmRlci5EZXVjaGVyQGFtZC5jb20+OyBL
b2VuaWcsIENocmlzdGlhbiA8Q2hyaXN0aWFuLktvZW5pZ0BhbWQuY29tPg0KU3ViamVjdDogUmU6
IFt2MTMgMTEvMTFdIGRybS9hbWRncHU6IEltcGxlbWVudCB1c2VyIHF1ZXVlIHJlc2V0IGZ1bmN0
aW9uYWxpdHkNCg0KT24gVHVlLCBTZXAgMiwgMjAyNSBhdCA0OjDigK9BTSBKZXNzZS5aaGFuZyA8
SmVzc2UuWmhhbmdAYW1kLmNvbT4gd3JvdGU6DQo+DQo+IEZyb206IEFsZXggRGV1Y2hlciA8YWxl
eGFuZGVyLmRldWNoZXJAYW1kLmNvbT4NCj4NCj4gVGhpcyBwYXRjaCBhZGRzIHJvYnVzdCByZXNl
dCBoYW5kbGluZyBmb3IgdXNlciBxdWV1ZXMgKHVzZXJxKSB0bw0KPiBpbXByb3ZlIHJlY292ZXJ5
IGZyb20gcXVldWUgZmFpbHVyZXMuIFRoZSBrZXkgY29tcG9uZW50cyBpbmNsdWRlOg0KPg0KPiAx
LiBRdWV1ZSBkZXRlY3Rpb24gYW5kIHJlc2V0IGxvZ2ljOg0KPiAgICAtIGFtZGdwdV91c2VycV9k
ZXRlY3RfYW5kX3Jlc2V0X3F1ZXVlcygpIGlkZW50aWZpZXMgZmFpbGVkIHF1ZXVlcw0KPiAgICAt
IFBlci1JUCBkZXRlY3RfYW5kX3Jlc2V0IGNhbGxiYWNrcyBmb3IgdGFyZ2V0ZWQgcmVjb3ZlcnkN
Cj4gICAgLSBGYWxscyBiYWNrIHRvIGZ1bGwgR1BVIHJlc2V0IHdoZW4gbmVlZGVkDQo+DQo+IDIu
IFJlc2V0IGluZnJhc3RydWN0dXJlOg0KPiAgICAtIEFkZHMgdXNlcnFfcmVzZXRfd29yayB3b3Jr
cXVldWUgZm9yIGFzeW5jIHJlc2V0IGhhbmRsaW5nDQo+ICAgIC0gSW1wbGVtZW50cyBwcmUvcG9z
dCByZXNldCBoYW5kbGVycyBmb3IgcXVldWUgc3RhdGUgbWFuYWdlbWVudA0KPiAgICAtIEludGVn
cmF0ZXMgd2l0aCBleGlzdGluZyBHUFUgcmVzZXQgZnJhbWV3b3JrDQo+DQo+IDMuIEVycm9yIGhh
bmRsaW5nIGltcHJvdmVtZW50czoNCj4gICAgLSBFbmhhbmNlZCBzdGF0ZSB0cmFja2luZyB3aXRo
IEhVTkcgc3RhdGUNCj4gICAgLSBBdXRvbWF0aWMgcmVzZXQgdHJpZ2dlcmluZyBvbiBjcml0aWNh
bCBmYWlsdXJlcw0KPiAgICAtIFZSQU0gbG9zcyBoYW5kbGluZyBkdXJpbmcgcmVjb3ZlcnkNCj4N
Cj4gNC4gSW50ZWdyYXRpb24gcG9pbnRzOg0KPiAgICAtIEFkZGVkIHRvIGRldmljZSBpbml0L3Jl
c2V0IHBhdGhzDQo+ICAgIC0gQ2FsbGVkIGR1cmluZyBxdWV1ZSBkZXN0cm95LCBzdXNwZW5kLCBh
bmQgaXNvbGF0aW9uIGV2ZW50cw0KPiAgICAtIEhhbmRsZXMgYm90aCBpbmRpdmlkdWFsIHF1ZXVl
IGFuZCBmdWxsIEdQVSByZXNldHMNCj4NCj4gVGhlIHJlc2V0IGZ1bmN0aW9uYWxpdHkgd29ya3Mg
d2l0aCBib3RoIGNvbXB1dGUgYW5kIGdyYXBoaWNzIHF1ZXVlcywNCj4gcHJvdmlkaW5nIGJldHRl
ciByZXNpbGllbmNlIGFnYWluc3QgcXVldWUgZmFpbHVyZXMgd2hpbGUgbWluaW1pemluZw0KPiBk
aXNydXB0aW9uIHRvIHVuYWZmZWN0ZWQgcXVldWVzLg0KPg0KPiB2MjogYWRkIGRldGVjdGlvbiBh
bmQgcmVzZXQgY2FsbHMgd2hlbiBwcmVlbXB0aW9uL3VubWFwZWQgZmFpbHMuDQo+ICAgICBhZGQg
YSBwZXIgZGV2aWNlIHVzZXJxIGNvdW50ZXIgZm9yIGVhY2ggdXNlciBxdWV1ZSB0eXBlLihBbGV4
KQ0KPg0KPiBTaWduZWQtb2ZmLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFt
ZC5jb20+DQo+IFNpZ25lZC1vZmYtYnk6IEplc3NlIFpoYW5nIDxKZXNzZS5aaGFuZ0BhbWQuY29t
Pg0KPiAtLS0NCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oICAgICAgICB8
ICAgMSArDQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMgfCAg
IDggKw0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3VzZXJxLmMgIHwgMjAz
ICsrKysrKysrKysrKysrKysrKystLQ0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3VzZXJxLmggIHwgICA4ICsNCj4gIDQgZmlsZXMgY2hhbmdlZCwgMjA5IGluc2VydGlvbnMo
KyksIDExIGRlbGV0aW9ucygtKQ0KPg0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1LmgNCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUu
aA0KPiBpbmRleCBlZjNhZjE3MGRkYTQuLjlkYjA1Y2RjNzMwNCAxMDA2NDQNCj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1LmgNCj4gQEAgLTEzMDIsNiArMTMwMiw3IEBAIHN0cnVjdCBhbWRn
cHVfZGV2aWNlIHsNCj4gICAgICAgICBzdHJ1Y3QgbGlzdF9oZWFkICAgICAgICAgICAgICAgIHVz
ZXJxX21ncl9saXN0Ow0KPiAgICAgICAgIHN0cnVjdCBtdXRleCAgICAgICAgICAgICAgICAgICAg
dXNlcnFfbXV0ZXg7DQo+ICAgICAgICAgYm9vbCAgICAgICAgICAgICAgICAgICAgICAgICAgICB1
c2VycV9oYWx0X2Zvcl9lbmZvcmNlX2lzb2xhdGlvbjsNCj4gKyAgICAgICBzdHJ1Y3Qgd29ya19z
dHJ1Y3QgICAgICAgICAgICAgIHVzZXJxX3Jlc2V0X3dvcms7DQo+ICB9Ow0KPg0KPiAgc3RhdGlj
IGlubGluZSB1aW50MzJfdCBhbWRncHVfaXBfdmVyc2lvbihjb25zdCBzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZQ0KPiAqYWRldiwgZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9kZXZpY2UuYw0KPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZp
Y2UuYw0KPiBpbmRleCAzNzU3NjM0NjEzYzMuLjFkYzg4YjAwNTVkZCAxMDA2NDQNCj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jDQo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiBAQCAtNDQ3NSw2ICs0NDc1
LDcgQEAgaW50IGFtZGdwdV9kZXZpY2VfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwN
Cj4gICAgICAgICB9DQo+DQo+ICAgICAgICAgSU5JVF9XT1JLKCZhZGV2LT54Z21pX3Jlc2V0X3dv
cmssDQo+IGFtZGdwdV9kZXZpY2VfeGdtaV9yZXNldF9mdW5jKTsNCj4gKyAgICAgICBJTklUX1dP
UksoJmFkZXYtPnVzZXJxX3Jlc2V0X3dvcmssIGFtZGdwdV91c2VycV9yZXNldF93b3JrKTsNCj4N
Cj4gICAgICAgICBhZGV2LT5nZnguZ2Z4X29mZl9yZXFfY291bnQgPSAxOw0KPiAgICAgICAgIGFk
ZXYtPmdmeC5nZnhfb2ZmX3Jlc2lkZW5jeSA9IDA7IEBAIC01ODgwLDYgKzU4ODEsMTAgQEAgaW50
DQo+IGFtZGdwdV9kZXZpY2VfcmVpbml0X2FmdGVyX3Jlc2V0KHN0cnVjdCBhbWRncHVfcmVzZXRf
Y29udGV4dCAqcmVzZXRfY29udGV4dCkNCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZiAocikNCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8g
b3V0Ow0KPg0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBhbWRncHVfdXNl
cnFfcG9zdF9yZXNldCh0bXBfYWRldiwgdnJhbV9sb3N0KTsNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBpZiAocikNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGdvdG8gb3V0Ow0KPiArDQo+DQo+IGRybV9jbGllbnRfZGV2X3Jlc3VtZShhZGV2X3Rv
X2RybSh0bXBfYWRldiksIGZhbHNlKTsNCj4NCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAvKg0KPiBAQCAtNjEwMiw2ICs2MTA3LDcgQEAgc3RhdGljIGlubGluZSB2b2lkIGFtZGdw
dV9kZXZpY2Vfc3RvcF9wZW5kaW5nX3Jlc2V0cyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikN
Cj4gICAgICAgICBpZiAoIWFtZGdwdV9zcmlvdl92ZihhZGV2KSkNCj4gICAgICAgICAgICAgICAg
IGNhbmNlbF93b3JrKCZhZGV2LT5yZXNldF93b3JrKTsgICNlbmRpZg0KPiArICAgICAgIGNhbmNl
bF93b3JrKCZhZGV2LT51c2VycV9yZXNldF93b3JrKTsNCj4NCj4gICAgICAgICBpZiAoYWRldi0+
a2ZkLmRldikNCj4gICAgICAgICAgICAgICAgIGNhbmNlbF93b3JrKCZhZGV2LT5rZmQucmVzZXRf
d29yayk7DQo+IEBAIC02MjMyLDYgKzYyMzgsOCBAQCBzdGF0aWMgdm9pZCBhbWRncHVfZGV2aWNl
X2hhbHRfYWN0aXZpdGllcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4gICAgICAgICAg
ICAgICAgICAgICAgIGFtZGdwdV9kZXZpY2VfaXBfbmVlZF9mdWxsX3Jlc2V0KHRtcF9hZGV2KSkN
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X3Jhc19zdXNwZW5kKHRtcF9hZGV2KTsN
Cj4NCj4gKyAgICAgICAgICAgICAgIGFtZGdwdV91c2VycV9wcmVfcmVzZXQodG1wX2FkZXYpOw0K
PiArDQo+ICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgQU1ER1BVX01BWF9SSU5HUzsg
KytpKSB7DQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBhbWRncHVfcmluZyAqcmlu
ZyA9IHRtcF9hZGV2LT5yaW5nc1tpXTsNCj4NCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV91c2VycS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3VzZXJxLmMNCj4gaW5kZXggNTQ4NTFiYTg3NTZhLi44NzY3MmIzMzEwMmUgMTAwNjQ0
DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91c2VycS5jDQo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91c2VycS5jDQo+IEBAIC0yNSw4
ICsyNSwxMCBAQA0KPiAgI2luY2x1ZGUgPGRybS9kcm1fYXV0aC5oPg0KPiAgI2luY2x1ZGUgPGRy
bS9kcm1fZXhlYy5oPg0KPiAgI2luY2x1ZGUgPGxpbnV4L3BtX3J1bnRpbWUuaD4NCj4gKyNpbmNs
dWRlIDxkcm0vZHJtX2Rydi5oPg0KPg0KPiAgI2luY2x1ZGUgImFtZGdwdS5oIg0KPiArI2luY2x1
ZGUgImFtZGdwdV9yZXNldC5oIg0KPiAgI2luY2x1ZGUgImFtZGdwdV92bS5oIg0KPiAgI2luY2x1
ZGUgImFtZGdwdV91c2VycS5oIg0KPiAgI2luY2x1ZGUgImFtZGdwdV91c2VycV9mZW5jZS5oIg0K
PiBAQCAtNDQsNiArNDYsNjQgQEAgdTMyIGFtZGdwdV91c2VycV9nZXRfc3VwcG9ydGVkX2lwX21h
c2soc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+ICAgICAgICAgcmV0dXJuIHVzZXJxX2lw
X21hc2s7DQo+ICB9DQo+DQo+ICtzdGF0aWMgdm9pZCBhbWRncHVfdXNlcnFfZ3B1X3Jlc2V0KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KPiArew0KPiArICAgICAgIGlmIChhbWRncHVfZGV2
aWNlX3Nob3VsZF9yZWNvdmVyX2dwdShhZGV2KSkgew0KPiArICAgICAgICAgICAgICAgYW1kZ3B1
X3Jlc2V0X2RvbWFpbl9zY2hlZHVsZShhZGV2LT5yZXNldF9kb21haW4sDQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZhZGV2LT51c2VycV9yZXNldF93b3Jr
KTsNCj4gKyAgICAgICAgICAgICAgIC8qIFdhaXQgZm9yIHRoZSByZXNldCBqb2IgdG8gY29tcGxl
dGUgKi8NCj4gKyAgICAgICAgICAgICAgIGZsdXNoX3dvcmsoJmFkZXYtPnVzZXJxX3Jlc2V0X3dv
cmspOw0KPiArICAgICAgIH0NCj4gK30NCj4gKw0KPiArc3RhdGljIGludA0KPiArYW1kZ3B1X3Vz
ZXJxX2RldGVjdF9hbmRfcmVzZXRfcXVldWVzKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyICp1cV9t
Z3IpDQoNCj4gV2UgbmVlZCB0byBtYWtlIHN1cmUgd2UgaG9sZCB0aGUgYWRldi0+dXNlcnFfbXV0
ZXggYXMgd2VsbCBhcyB0aGUgcGVyDQo+cHJvY2VzcyB1c2VyIHF1ZXVlIG11dGV4ZXMgd2hlbiB3
ZSBjYWxsIHRoaXMgZnVuY3Rpb24gYmVjYXVzZSB0aGUNCj5kZXRlY3RfYW5kX3Jlc2V0KCkgZnVu
Y3Rpb25zIGNhbiBtZXNzIHdpdGggcXVldWVzIGZyb20gYW55IHByb2Nlc3MuDQo+V2UgbWF5IHdh
bnQgdG8gZ2V0IHJpZCBvZiB0aGUgcGVyIHByb2Nlc3MgdXNlcnEgbXV0ZXggYW5kIGp1c3QgdXNl
IHRoZQ0KPmdsb2JhbCBvbmUgZm9yIGFsbCBvZiB0aGVzZSBjYXNlcy4NCg0KVGhhbmtzLCBBbGV4
LiBJJ2xsIHVwZGF0ZSB0aGUgcGF0Y2ggYW5kIGVuc3VyZSBhbGwgY2FsbGVycyBob2xkIGFkZXYt
PnVzZXJxX211dGV4Lg0KQWxzbywgd2UnbGwgY2hlY2sgZm9yIGEgZ2xvYmFsIGxvY2sgaW4gdGhp
cyBmdW5jdGlvbi4gTGlrZSB0aGlzOg0KV0FSTl9PTighbXV0ZXhfaXNfbG9ja2VkKCZhZGV2LT51
c2VycV9tdXRleCkpOw0KDQpSZWdhcmRzDQpKZXNzZQ0KDQoNCj4gQWxleA0KDQo+ICt7DQo+ICsg
ICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSB1cV9tZ3ItPmFkZXY7DQo+ICsgICAg
ICAgY29uc3Qgc3RydWN0IGFtZGdwdV91c2VycV9mdW5jcyAqdXNlcnFfZ2Z4X2Z1bmNzID0NCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgYWRldi0+dXNlcnFfZnVuY3NbQU1ER1BVX1JJTkdfVFlQ
RV9HRlhdOw0KPiArICAgICAgIGNvbnN0IHN0cnVjdCBhbWRncHVfdXNlcnFfZnVuY3MgKnVzZXJx
X2NvbXB1dGVfZnVuY3MgPQ0KPiArICAgICAgICAgICAgICAgICAgICAgICBhZGV2LT51c2VycV9m
dW5jc1tBTURHUFVfUklOR19UWVBFX0NPTVBVVEVdOw0KPiArICAgICAgIGNvbnN0IHN0cnVjdCBh
bWRncHVfdXNlcnFfZnVuY3MgKnVzZXJxX3NkbWFfZnVuY3MgPQ0KPiArICAgICAgICAgICAgICAg
ICAgICAgICBhZGV2LT51c2VycV9mdW5jc1tBTURHUFVfUklOR19UWVBFX1NETUFdOw0KPiArICAg
ICAgIGJvb2wgZ3B1X3Jlc2V0ID0gZmFsc2U7DQo+ICsgICAgICAgaW50IHIgPSAwOw0KPiArDQo+
ICsgICAgICAgaWYgKHVubGlrZWx5KGFkZXYtPmRlYnVnX2Rpc2FibGVfZ3B1X3JpbmdfcmVzZXQp
KSB7DQo+ICsgICAgICAgICAgICAgICBkZXZfZXJyKGFkZXYtPmRldiwgInVzZXJxIHJlc2V0IGRp
c2FibGVkIGJ5IGRlYnVnIG1hc2tcbiIpOw0KPiArICAgICAgIH0gZWxzZSBpZiAoYW1kZ3B1X2dw
dV9yZWNvdmVyeSkgew0KPiArICAgICAgICAgICAgICAgaWYgKChhdG9taWNfcmVhZCgmdXFfbWdy
LT51c2VycV9jb21wdXRlX2NvdW50KSA+IDApICYmIHVzZXJxX2NvbXB1dGVfZnVuY3MtPmRldGVj
dF9hbmRfcmVzZXQpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgciA9IHVzZXJxX2NvbXB1
dGVfZnVuY3MtPmRldGVjdF9hbmRfcmVzZXQoYWRldiwgQU1ER1BVX1JJTkdfVFlQRV9DT01QVVRF
KTsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsNCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBncHVfcmVzZXQgPSB0cnVlOw0KPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gZ3B1X3Jlc2V0Ow0KPiArICAgICAgICAgICAgICAgICAgICAgICB9
DQo+ICsgICAgICAgICAgICAgICB9DQo+ICsNCj4gKyAgICAgICAgICAgICAgIGlmICgoYXRvbWlj
X3JlYWQoJnVxX21nci0+dXNlcnFfZ2Z4X2NvdW50KSA+IDApICYmIHVzZXJxX2dmeF9mdW5jcy0+
ZGV0ZWN0X2FuZF9yZXNldCkgew0KPiArICAgICAgICAgICAgICAgICAgICAgICByID0gdXNlcnFf
Z2Z4X2Z1bmNzLT5kZXRlY3RfYW5kX3Jlc2V0KGFkZXYsIEFNREdQVV9SSU5HX1RZUEVfR0ZYKTsN
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBncHVfcmVzZXQgPSB0cnVlOw0KPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGdvdG8gZ3B1X3Jlc2V0Ow0KPiArICAgICAgICAgICAgICAgICAgICAgICB9DQo+
ICsgICAgICAgICAgICAgICB9DQo+ICsNCj4gKyAgICAgICAgICAgICAgIGlmICgoYXRvbWljX3Jl
YWQoJnVxX21nci0+dXNlcnFfc2RtYV9jb3VudCkgPiAwKSAmJiB1c2VycV9zZG1hX2Z1bmNzLT5k
ZXRlY3RfYW5kX3Jlc2V0KSB7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHIgPSB1c2VycV9z
ZG1hX2Z1bmNzLT5kZXRlY3RfYW5kX3Jlc2V0KGFkZXYsIEFNREdQVV9SSU5HX1RZUEVfU0RNQSk7
DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKSB7DQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZ3B1X3Jlc2V0ID0gdHJ1ZTsNCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBnb3RvIGdwdV9yZXNldDsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQ0K
PiArICAgICAgICAgICAgICAgfQ0KPiArICAgICAgIH0NCj4gKw0KPiArZ3B1X3Jlc2V0Og0KPiAr
ICAgICAgIGlmIChncHVfcmVzZXQpDQo+ICsgICAgICAgICAgICAgICBhbWRncHVfdXNlcnFfZ3B1
X3Jlc2V0KGFkZXYpOw0KPiArDQo+ICsgICAgICAgcmV0dXJuIHI7DQo+ICt9DQo+ICsNCj4gIHN0
YXRpYyBpbnQNCj4gIGFtZGdwdV91c2VycV9wcmVlbXB0X2hlbHBlcihzdHJ1Y3QgYW1kZ3B1X3Vz
ZXJxX21nciAqdXFfbWdyLA0KPiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBhbWRn
cHVfdXNlcm1vZGVfcXVldWUgKnF1ZXVlKQ0KPiBAQCAtNTEsMTcgKzExMSwyMiBAQCBhbWRncHVf
dXNlcnFfcHJlZW1wdF9oZWxwZXIoc3RydWN0IGFtZGdwdV91c2VycV9tZ3IgKnVxX21nciwNCj4g
ICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHVxX21nci0+YWRldjsNCj4gICAg
ICAgICBjb25zdCBzdHJ1Y3QgYW1kZ3B1X3VzZXJxX2Z1bmNzICp1c2VycV9mdW5jcyA9DQo+ICAg
ICAgICAgICAgICAgICBhZGV2LT51c2VycV9mdW5jc1txdWV1ZS0+cXVldWVfdHlwZV07DQo+ICsg
ICAgICAgYm9vbCBmb3VuZF9odW5nX3F1ZXVlID0gZmFsc2U7DQo+ICAgICAgICAgaW50IHIgPSAw
Ow0KPg0KPiAgICAgICAgIGlmIChxdWV1ZS0+c3RhdGUgPT0gQU1ER1BVX1VTRVJRX1NUQVRFX01B
UFBFRCkgew0KPiAgICAgICAgICAgICAgICAgciA9IHVzZXJxX2Z1bmNzLT5wcmVlbXB0KHVxX21n
ciwgcXVldWUpOw0KPiAgICAgICAgICAgICAgICAgaWYgKHIpIHsNCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgcXVldWUtPnN0YXRlID0gQU1ER1BVX1VTRVJRX1NUQVRFX0hVTkc7DQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIGZvdW5kX2h1bmdfcXVldWUgPSB0cnVlOw0KPiAgICAgICAgICAg
ICAgICAgfSBlbHNlIHsNCj4gICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUtPnN0YXRlID0g
QU1ER1BVX1VTRVJRX1NUQVRFX1BSRUVNUFRFRDsNCj4gICAgICAgICAgICAgICAgIH0NCj4gICAg
ICAgICB9DQo+DQo+ICsgICAgICAgaWYgKGZvdW5kX2h1bmdfcXVldWUpDQo+ICsgICAgICAgICAg
ICAgICBhbWRncHVfdXNlcnFfZGV0ZWN0X2FuZF9yZXNldF9xdWV1ZXModXFfbWdyKTsNCj4gKw0K
PiAgICAgICAgIHJldHVybiByOw0KPiAgfQ0KPg0KPiBAQCAtOTMsMTYgKzE1OCwyMyBAQCBhbWRn
cHVfdXNlcnFfdW5tYXBfaGVscGVyKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyICp1cV9tZ3IsDQo+
ICAgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSB1cV9tZ3ItPmFkZXY7DQo+ICAg
ICAgICAgY29uc3Qgc3RydWN0IGFtZGdwdV91c2VycV9mdW5jcyAqdXNlcnFfZnVuY3MgPQ0KPiAg
ICAgICAgICAgICAgICAgYWRldi0+dXNlcnFfZnVuY3NbcXVldWUtPnF1ZXVlX3R5cGVdOw0KPiAr
ICAgICAgIGJvb2wgZm91bmRfaHVuZ19xdWV1ZSA9IGZhbHNlOw0KPiAgICAgICAgIGludCByID0g
MDsNCj4NCj4gICAgICAgICBpZiAoKHF1ZXVlLT5zdGF0ZSA9PSBBTURHUFVfVVNFUlFfU1RBVEVf
TUFQUEVEKSB8fA0KPiAgICAgICAgICAgICAgICAgKHF1ZXVlLT5zdGF0ZSA9PSBBTURHUFVfVVNF
UlFfU1RBVEVfUFJFRU1QVEVEKSkgew0KPiAgICAgICAgICAgICAgICAgciA9IHVzZXJxX2Z1bmNz
LT51bm1hcCh1cV9tZ3IsIHF1ZXVlKTsNCj4gLSAgICAgICAgICAgICAgIGlmIChyKQ0KPiArICAg
ICAgICAgICAgICAgaWYgKHIpIHsNCj4gICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUtPnN0
YXRlID0gQU1ER1BVX1VTRVJRX1NUQVRFX0hVTkc7DQo+IC0gICAgICAgICAgICAgICBlbHNlDQo+
ICsgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kX2h1bmdfcXVldWUgPSB0cnVlOw0KPiArICAg
ICAgICAgICAgICAgfSBlbHNlIHsNCj4gICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUtPnN0
YXRlID0gQU1ER1BVX1VTRVJRX1NUQVRFX1VOTUFQUEVEOw0KPiArICAgICAgICAgICAgICAgfQ0K
PiAgICAgICAgIH0NCj4gKw0KPiArICAgICAgIGlmIChmb3VuZF9odW5nX3F1ZXVlKQ0KPiArICAg
ICAgICAgICAgICAgYW1kZ3B1X3VzZXJxX2RldGVjdF9hbmRfcmVzZXRfcXVldWVzKHVxX21ncik7
DQo+ICsNCj4gICAgICAgICByZXR1cm4gcjsNCj4gIH0NCj4NCj4gQEAgLTExMywxNiArMTg1LDIy
IEBAIGFtZGdwdV91c2VycV9tYXBfaGVscGVyKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyICp1cV9t
Z3IsDQo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSB1cV9tZ3ItPmFkZXY7
DQo+ICAgICAgICAgY29uc3Qgc3RydWN0IGFtZGdwdV91c2VycV9mdW5jcyAqdXNlcnFfZnVuY3Mg
PQ0KPiAgICAgICAgICAgICAgICAgYWRldi0+dXNlcnFfZnVuY3NbcXVldWUtPnF1ZXVlX3R5cGVd
Ow0KPiArICAgICAgIGJvb2wgZ3B1X3Jlc2V0ID0gZmFsc2U7DQo+ICAgICAgICAgaW50IHIgPSAw
Ow0KPg0KPiAgICAgICAgIGlmIChxdWV1ZS0+c3RhdGUgPT0gQU1ER1BVX1VTRVJRX1NUQVRFX1VO
TUFQUEVEKSB7DQo+ICAgICAgICAgICAgICAgICByID0gdXNlcnFfZnVuY3MtPm1hcCh1cV9tZ3Is
IHF1ZXVlKTsNCj4gICAgICAgICAgICAgICAgIGlmIChyKSB7DQo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIHF1ZXVlLT5zdGF0ZSA9IEFNREdQVV9VU0VSUV9TVEFURV9IVU5HOw0KPiArICAgICAg
ICAgICAgICAgICAgICAgICBncHVfcmVzZXQgPSB0cnVlOw0KPiAgICAgICAgICAgICAgICAgfSBl
bHNlIHsNCj4gICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUtPnN0YXRlID0gQU1ER1BVX1VT
RVJRX1NUQVRFX01BUFBFRDsNCj4gICAgICAgICAgICAgICAgIH0NCj4gICAgICAgICB9DQo+ICsN
Cj4gKyAgICAgICBpZiAoZ3B1X3Jlc2V0KQ0KPiArICAgICAgICAgICAgICAgYW1kZ3B1X3VzZXJx
X2dwdV9yZXNldChhZGV2KTsNCj4gKw0KPiAgICAgICAgIHJldHVybiByOw0KPiAgfQ0KPg0KPiBA
QCAtMzYxLDYgKzQzOSwxOCBAQCBhbWRncHVfdXNlcnFfZGVzdHJveShzdHJ1Y3QgZHJtX2ZpbGUg
KmZpbHAsIGludCBxdWV1ZV9pZCkNCj4gICAgICAgICAgICAgICAgIGFtZGdwdV9ib191bnJlc2Vy
dmUocXVldWUtPmRiX29iai5vYmopOw0KPiAgICAgICAgIH0NCj4gICAgICAgICBhbWRncHVfYm9f
dW5yZWYoJnF1ZXVlLT5kYl9vYmoub2JqKTsNCj4gKyAgICAgICBzd2l0Y2ggKHF1ZXVlLT5xdWV1
ZV90eXBlKSB7DQo+ICsgICAgICAgY2FzZSBBTURHUFVfUklOR19UWVBFX0dGWDoNCj4gKyAgICAg
ICAgICAgICAgIGF0b21pY19kZWMoJnVxX21nci0+dXNlcnFfZ2Z4X2NvdW50KTsNCj4gKyAgICAg
ICBicmVhazsNCj4gKyAgICAgICBjYXNlIEFNREdQVV9SSU5HX1RZUEVfQ09NUFVURToNCj4gKyAg
ICAgICAgICAgICAgIGF0b21pY19kZWMoJnVxX21nci0+dXNlcnFfY29tcHV0ZV9jb3VudCk7DQo+
ICsgICAgICAgYnJlYWs7DQo+ICsgICAgICAgY2FzZSBBTURHUFVfUklOR19UWVBFX1NETUE6DQo+
ICsgICAgICAgICAgICAgICBhdG9taWNfZGVjKCZ1cV9tZ3ItPnVzZXJxX3NkbWFfY291bnQpOw0K
PiArICAgICAgIGJyZWFrOw0KPiArICAgICAgIH0NCj4gKyAgICAgICBhbWRncHVfdXNlcnFfZGV0
ZWN0X2FuZF9yZXNldF9xdWV1ZXModXFfbWdyKTsNCj4gICAgICAgICByID0gYW1kZ3B1X3VzZXJx
X3VubWFwX2hlbHBlcih1cV9tZ3IsIHF1ZXVlKTsNCj4gICAgICAgICBhbWRncHVfdXNlcnFfY2xl
YW51cCh1cV9tZ3IsIHF1ZXVlLCBxdWV1ZV9pZCk7DQo+ICAgICAgICAgbXV0ZXhfdW5sb2NrKCZ1
cV9tZ3ItPnVzZXJxX211dGV4KTsNCj4gQEAgLTUyMCw2ICs2MTAsMTkgQEAgYW1kZ3B1X3VzZXJx
X2NyZWF0ZShzdHJ1Y3QgZHJtX2ZpbGUgKmZpbHAsIHVuaW9uIGRybV9hbWRncHVfdXNlcnEgKmFy
Z3MpDQo+DQo+DQo+ICAgICAgICAgYXJncy0+b3V0LnF1ZXVlX2lkID0gcWlkOw0KPiArICAgICAg
IHN3aXRjaCAocXVldWUtPnF1ZXVlX3R5cGUpIHsNCj4gKyAgICAgICBjYXNlIEFNREdQVV9SSU5H
X1RZUEVfR0ZYOg0KPiArICAgICAgICAgICAgICAgYXRvbWljX2luYygmdXFfbWdyLT51c2VycV9n
ZnhfY291bnQpOw0KPiArICAgICAgIGJyZWFrOw0KPiArICAgICAgIGNhc2UgQU1ER1BVX1JJTkdf
VFlQRV9DT01QVVRFOg0KPiArICAgICAgICAgICAgICAgYXRvbWljX2luYygmdXFfbWdyLT51c2Vy
cV9jb21wdXRlX2NvdW50KTsNCj4gKyAgICAgICBicmVhazsNCj4gKyAgICAgICBjYXNlIEFNREdQ
VV9SSU5HX1RZUEVfU0RNQToNCj4gKyAgICAgICAgICAgICAgIGF0b21pY19pbmMoJnVxX21nci0+
dXNlcnFfc2RtYV9jb3VudCk7DQo+ICsgICAgICAgYnJlYWs7DQo+ICsgICAgICAgZGVmYXVsdDoN
Cj4gKyAgICAgICBicmVhazsNCj4gKyAgICAgICB9DQo+DQo+ICB1bmxvY2s6DQo+ICAgICAgICAg
bXV0ZXhfdW5sb2NrKCZ1cV9tZ3ItPnVzZXJxX211dGV4KTsNCj4gQEAgLTczNCw2ICs4MzcsNyBA
QCBhbWRncHVfdXNlcnFfZXZpY3RfYWxsKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyICp1cV9tZ3Ip
DQo+ICAgICAgICAgaW50IHF1ZXVlX2lkOw0KPiAgICAgICAgIGludCByZXQgPSAwLCByOw0KPg0K
PiArICAgICAgIGFtZGdwdV91c2VycV9kZXRlY3RfYW5kX3Jlc2V0X3F1ZXVlcyh1cV9tZ3IpOw0K
PiAgICAgICAgIC8qIFRyeSB0byB1bm1hcCBhbGwgdGhlIHF1ZXVlcyBpbiB0aGlzIHByb2Nlc3Mg
Y3R4ICovDQo+ICAgICAgICAgaWRyX2Zvcl9lYWNoX2VudHJ5KCZ1cV9tZ3ItPnVzZXJxX2lkciwg
cXVldWUsIHF1ZXVlX2lkKSB7DQo+ICAgICAgICAgICAgICAgICByID0gYW1kZ3B1X3VzZXJxX3By
ZWVtcHRfaGVscGVyKHVxX21nciwgcXVldWUpOw0KPiBAQCAtNzQ2LDYgKzg1MCwyMyBAQCBhbWRn
cHVfdXNlcnFfZXZpY3RfYWxsKHN0cnVjdCBhbWRncHVfdXNlcnFfbWdyICp1cV9tZ3IpDQo+ICAg
ICAgICAgcmV0dXJuIHJldDsNCj4gIH0NCj4NCj4gK3ZvaWQgYW1kZ3B1X3VzZXJxX3Jlc2V0X3dv
cmsoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQ0KPiArew0KPiArICAgICAgIHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2ID0gY29udGFpbmVyX29mKHdvcmssIHN0cnVjdCBhbWRncHVfZGV2aWNl
LA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVz
ZXJxX3Jlc2V0X3dvcmspOw0KPiArICAgICAgIHN0cnVjdCBhbWRncHVfcmVzZXRfY29udGV4dCBy
ZXNldF9jb250ZXh0Ow0KPiArDQo+ICsgICAgICAgbWVtc2V0KCZyZXNldF9jb250ZXh0LCAwLCBz
aXplb2YocmVzZXRfY29udGV4dCkpOw0KPiArDQo+ICsgICAgICAgcmVzZXRfY29udGV4dC5tZXRo
b2QgPSBBTURfUkVTRVRfTUVUSE9EX05PTkU7DQo+ICsgICAgICAgcmVzZXRfY29udGV4dC5yZXNl
dF9yZXFfZGV2ID0gYWRldjsNCj4gKyAgICAgICByZXNldF9jb250ZXh0LnNyYyA9IEFNREdQVV9S
RVNFVF9TUkNfVVNFUlE7DQo+ICsgICAgICAgc2V0X2JpdChBTURHUFVfTkVFRF9GVUxMX1JFU0VU
LCAmcmVzZXRfY29udGV4dC5mbGFncyk7DQo+ICsgICAgICAgLypzZXRfYml0KEFNREdQVV9TS0lQ
X0NPUkVEVU1QLCAmcmVzZXRfY29udGV4dC5mbGFncyk7Ki8NCj4gKw0KPiArICAgICAgIGFtZGdw
dV9kZXZpY2VfZ3B1X3JlY292ZXIoYWRldiwgTlVMTCwgJnJlc2V0X2NvbnRleHQpOw0KPiArfQ0K
PiArDQo+ICBzdGF0aWMgaW50DQo+ICBhbWRncHVfdXNlcnFfd2FpdF9mb3Jfc2lnbmFsKHN0cnVj
dCBhbWRncHVfdXNlcnFfbWdyICp1cV9tZ3IpDQo+ICB7DQo+IEBAIC03NzIsMjIgKzg5MywxOSBA
QCB2b2lkDQo+ICBhbWRncHVfdXNlcnFfZXZpY3Qoc3RydWN0IGFtZGdwdV91c2VycV9tZ3IgKnVx
X21nciwNCj4gICAgICAgICAgICAgICAgICAgIHN0cnVjdCBhbWRncHVfZXZpY3Rpb25fZmVuY2Ug
KmV2X2ZlbmNlKQ0KPiAgew0KPiAtICAgICAgIGludCByZXQ7DQo+ICAgICAgICAgc3RydWN0IGFt
ZGdwdV9mcHJpdiAqZnByaXYgPSB1cV9tZ3JfdG9fZnByaXYodXFfbWdyKTsNCj4gICAgICAgICBz
dHJ1Y3QgYW1kZ3B1X2V2aWN0aW9uX2ZlbmNlX21nciAqZXZmX21nciA9ICZmcHJpdi0+ZXZmX21n
cjsNCj4gKyAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHVxX21nci0+YWRldjsN
Cj4gKyAgICAgICBpbnQgcmV0Ow0KPg0KPiAgICAgICAgIC8qIFdhaXQgZm9yIGFueSBwZW5kaW5n
IHVzZXJxdWV1ZSBmZW5jZSB3b3JrIHRvIGZpbmlzaCAqLw0KPiAgICAgICAgIHJldCA9IGFtZGdw
dV91c2VycV93YWl0X2Zvcl9zaWduYWwodXFfbWdyKTsNCj4gLSAgICAgICBpZiAocmV0KSB7DQo+
IC0gICAgICAgICAgICAgICBkcm1fZmlsZV9lcnIodXFfbWdyLT5maWxlLCAiTm90IGV2aWN0aW5n
IHVzZXJxdWV1ZSwgdGltZW91dCB3YWl0aW5nIGZvciB3b3JrXG4iKTsNCj4gLSAgICAgICAgICAg
ICAgIHJldHVybjsNCj4gLSAgICAgICB9DQo+ICsgICAgICAgaWYgKHJldCkNCj4gKyAgICAgICAg
ICAgICAgIGRldl9lcnIoYWRldi0+ZGV2LCAiTm90IGV2aWN0aW5nIHVzZXJxdWV1ZSwgdGltZW91
dCB3YWl0aW5nIGZvciB3b3JrXG4iKTsNCj4NCj4gICAgICAgICByZXQgPSBhbWRncHVfdXNlcnFf
ZXZpY3RfYWxsKHVxX21ncik7DQo+IC0gICAgICAgaWYgKHJldCkgew0KPiAtICAgICAgICAgICAg
ICAgZHJtX2ZpbGVfZXJyKHVxX21nci0+ZmlsZSwgIkZhaWxlZCB0byBldmljdCB1c2VycXVldWVc
biIpOw0KPiAtICAgICAgICAgICAgICAgcmV0dXJuOw0KPiAtICAgICAgIH0NCj4gKyAgICAgICBp
ZiAocmV0KQ0KPiArICAgICAgICAgICAgICAgZGV2X2VycihhZGV2LT5kZXYsICJGYWlsZWQgdG8g
ZXZpY3QgdXNlcnF1ZXVlXG4iKTsNCj4NCj4gICAgICAgICAvKiBTaWduYWwgY3VycmVudCBldmlj
dGlvbiBmZW5jZSAqLw0KPiAgICAgICAgIGFtZGdwdV9ldmljdGlvbl9mZW5jZV9zaWduYWwoZXZm
X21nciwgZXZfZmVuY2UpOw0KPiBAQCAtODExLDYgKzkyOSw5IEBAIGludCBhbWRncHVfdXNlcnFf
bWdyX2luaXQoc3RydWN0IGFtZGdwdV91c2VycV9tZ3IgKnVzZXJxX21nciwgc3RydWN0IGRybV9m
aWxlICpmDQo+DQo+ICAgICAgICAgbXV0ZXhfbG9jaygmYWRldi0+dXNlcnFfbXV0ZXgpOw0KPiAg
ICAgICAgIGxpc3RfYWRkKCZ1c2VycV9tZ3ItPmxpc3QsICZhZGV2LT51c2VycV9tZ3JfbGlzdCk7
DQo+ICsgICAgICAgYXRvbWljX3NldCgmdXNlcnFfbWdyLT51c2VycV9nZnhfY291bnQsIDApOw0K
PiArICAgICAgIGF0b21pY19zZXQoJnVzZXJxX21nci0+dXNlcnFfY29tcHV0ZV9jb3VudCwgMCk7
DQo+ICsgICAgICAgYXRvbWljX3NldCgmdXNlcnFfbWdyLT51c2VycV9zZG1hX2NvdW50LCAwKTsN
Cj4gICAgICAgICBtdXRleF91bmxvY2soJmFkZXYtPnVzZXJxX211dGV4KTsNCj4NCj4gICAgICAg
ICBJTklUX0RFTEFZRURfV09SSygmdXNlcnFfbWdyLT5yZXN1bWVfd29yaywgYW1kZ3B1X3VzZXJx
X3Jlc3RvcmVfd29ya2VyKTsNCj4gQEAgLTgyOCw2ICs5NDksNyBAQCB2b2lkIGFtZGdwdV91c2Vy
cV9tZ3JfZmluaShzdHJ1Y3QgYW1kZ3B1X3VzZXJxX21nciAqdXNlcnFfbWdyKQ0KPg0KPiAgICAg
ICAgIG11dGV4X2xvY2soJmFkZXYtPnVzZXJxX211dGV4KTsNCj4gICAgICAgICBtdXRleF9sb2Nr
KCZ1c2VycV9tZ3ItPnVzZXJxX211dGV4KTsNCj4gKyAgICAgICBhbWRncHVfdXNlcnFfZGV0ZWN0
X2FuZF9yZXNldF9xdWV1ZXModXNlcnFfbWdyKTsNCj4gICAgICAgICBpZHJfZm9yX2VhY2hfZW50
cnkoJnVzZXJxX21nci0+dXNlcnFfaWRyLCBxdWV1ZSwgcXVldWVfaWQpIHsNCj4gICAgICAgICAg
ICAgICAgIGFtZGdwdV91c2VycV93YWl0X2Zvcl9sYXN0X2ZlbmNlKHVzZXJxX21nciwgcXVldWUp
Ow0KPiAgICAgICAgICAgICAgICAgYW1kZ3B1X3VzZXJxX3VubWFwX2hlbHBlcih1c2VycV9tZ3Is
IHF1ZXVlKTsNCj4gQEAgLTg2MSw2ICs5ODMsNyBAQCBpbnQgYW1kZ3B1X3VzZXJxX3N1c3BlbmQo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+ICAgICAgICAgbGlzdF9mb3JfZWFjaF9lbnRy
eV9zYWZlKHVxbSwgdG1wLCAmYWRldi0+dXNlcnFfbWdyX2xpc3QsIGxpc3QpIHsNCj4gICAgICAg
ICAgICAgICAgIGNhbmNlbF9kZWxheWVkX3dvcmtfc3luYygmdXFtLT5yZXN1bWVfd29yayk7DQo+
ICAgICAgICAgICAgICAgICBtdXRleF9sb2NrKCZ1cW0tPnVzZXJxX211dGV4KTsNCj4gKyAgICAg
ICAgICAgICAgIGFtZGdwdV91c2VycV9kZXRlY3RfYW5kX3Jlc2V0X3F1ZXVlcyh1cW0pOw0KPiAg
ICAgICAgICAgICAgICAgaWRyX2Zvcl9lYWNoX2VudHJ5KCZ1cW0tPnVzZXJxX2lkciwgcXVldWUs
IHF1ZXVlX2lkKSB7DQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBhbWRncHVfdXNlcnFf
dW5tYXBfaGVscGVyKHVxbSwgcXVldWUpOw0KPiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo
cikNCj4gQEAgLTkxNyw2ICsxMDQwLDcgQEAgaW50IGFtZGdwdV91c2VycV9zdG9wX3NjaGVkX2Zv
cl9lbmZvcmNlX2lzb2xhdGlvbihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4gICAgICAg
ICBsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUodXFtLCB0bXAsICZhZGV2LT51c2VycV9tZ3JfbGlz
dCwgbGlzdCkgew0KPiAgICAgICAgICAgICAgICAgY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCZ1
cW0tPnJlc3VtZV93b3JrKTsNCj4gICAgICAgICAgICAgICAgIG11dGV4X2xvY2soJnVxbS0+dXNl
cnFfbXV0ZXgpOw0KPiArICAgICAgICAgICAgICAgYW1kZ3B1X3VzZXJxX2RldGVjdF9hbmRfcmVz
ZXRfcXVldWVzKHVxbSk7DQo+ICAgICAgICAgICAgICAgICBpZHJfZm9yX2VhY2hfZW50cnkoJnVx
bS0+dXNlcnFfaWRyLCBxdWV1ZSwgcXVldWVfaWQpIHsNCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgKCgocXVldWUtPnF1ZXVlX3R5cGUgPT0gQU1ER1BVX0hXX0lQX0dGWCkgfHwNCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAocXVldWUtPnF1ZXVlX3R5cGUgPT0gQU1ER1BVX0hX
X0lQX0NPTVBVVEUpKSAmJg0KPiBAQCAtOTY1LDMgKzEwODksNjAgQEAgaW50IGFtZGdwdV91c2Vy
cV9zdGFydF9zY2hlZF9mb3JfZW5mb3JjZV9pc29sYXRpb24oc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsDQo+ICAgICAgICAgbXV0ZXhfdW5sb2NrKCZhZGV2LT51c2VycV9tdXRleCk7DQo+ICAg
ICAgICAgcmV0dXJuIHJldDsNCj4gIH0NCj4gKw0KPiArdm9pZCBhbWRncHVfdXNlcnFfcHJlX3Jl
c2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KPiArew0KPiArICAgICAgIGNvbnN0IHN0
cnVjdCBhbWRncHVfdXNlcnFfZnVuY3MgKnVzZXJxX2Z1bmNzOw0KPiArICAgICAgIHN0cnVjdCBh
bWRncHVfdXNlcm1vZGVfcXVldWUgKnF1ZXVlOw0KPiArICAgICAgIHN0cnVjdCBhbWRncHVfdXNl
cnFfbWdyICp1cW0sICp0bXA7DQo+ICsgICAgICAgaW50IHF1ZXVlX2lkOw0KPiArDQo+ICsgICAg
ICAgbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKHVxbSwgdG1wLCAmYWRldi0+dXNlcnFfbWdyX2xp
c3QsIGxpc3QpIHsNCj4gKyAgICAgICAgICAgICAgIGNhbmNlbF9kZWxheWVkX3dvcmtfc3luYygm
dXFtLT5yZXN1bWVfd29yayk7DQo+ICsgICAgICAgICAgICAgICBpZHJfZm9yX2VhY2hfZW50cnko
JnVxbS0+dXNlcnFfaWRyLCBxdWV1ZSwgcXVldWVfaWQpIHsNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgaWYgKHF1ZXVlLT5zdGF0ZSA9PSBBTURHUFVfVVNFUlFfU1RBVEVfTUFQUEVEKSB7DQo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X3VzZXJxX3dhaXRfZm9yX2xh
c3RfZmVuY2UodXFtLCBxdWV1ZSk7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dXNlcnFfZnVuY3MgPSBhZGV2LT51c2VycV9mdW5jc1txdWV1ZS0+cXVldWVfdHlwZV07DQo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnFfZnVuY3MtPnVubWFwKHVxbSwgcXVl
dWUpOw0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGp1c3QgbWFyayBhbGwg
cXVldWVzIGFzIGh1bmcgYXQgdGhpcyBwb2ludC4NCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgKiBpZiB1bm1hcCBzdWNjZWVkcywgd2UgY291bGQgbWFwIGFnYWluDQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICogaW4gYW1kZ3B1X3VzZXJxX3Bvc3RfcmVzZXQo
KSBpZiB2cmFtIGlzIG5vdCBsb3N0DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICovDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUtPnN0YXRlID0gQU1E
R1BVX1VTRVJRX1NUQVRFX0hVTkc7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
YW1kZ3B1X3VzZXJxX2ZlbmNlX2RyaXZlcl9mb3JjZV9jb21wbGV0aW9uKHF1ZXVlKTsNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgfQ0KPiArICAgICAgICAgICAgICAgfQ0KPiArICAgICAgIH0N
Cj4gK30NCj4gKw0KPiAraW50IGFtZGdwdV91c2VycV9wb3N0X3Jlc2V0KHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LCBib29sIHZyYW1fbG9zdCkNCj4gK3sNCj4gKyAgICAgICAvKiBpZiBhbnkg
cXVldWUgc3RhdGUgaXMgQU1ER1BVX1VTRVJRX1NUQVRFX1VOTUFQUEVEDQo+ICsgICAgICAgICog
YXQgdGhpcyBwb2ludCwgd2Ugc2hvdWxkIGJlIGFibGUgdG8gbWFwIGl0IGFnYWluDQo+ICsgICAg
ICAgICogYW5kIGNvbnRpbnVlIGlmIHZyYW0gaXMgbm90IGxvc3QuDQo+ICsgICAgICAgICovDQo+
ICsgICAgICAgc3RydWN0IGFtZGdwdV91c2VycV9tZ3IgKnVxbTsNCj4gKyAgICAgICBzdHJ1Y3Qg
YW1kZ3B1X3VzZXJtb2RlX3F1ZXVlICpxdWV1ZTsNCj4gKyAgICAgICBjb25zdCBzdHJ1Y3QgYW1k
Z3B1X3VzZXJxX2Z1bmNzICp1c2VycV9mdW5jczsNCj4gKyAgICAgICBpbnQgcXVldWVfaWQsIHIg
PSAwOw0KPiArDQo+ICsgICAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeSh1cW0sICZhZGV2LT51c2Vy
cV9tZ3JfbGlzdCwgbGlzdCkgew0KPiArICAgICAgICAgICAgICAgaWRyX2Zvcl9lYWNoX2VudHJ5
KCZ1cW0tPnVzZXJxX2lkciwgcXVldWUsIHF1ZXVlX2lkKSB7DQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgIGlmIChxdWV1ZS0+c3RhdGUgPT0gQU1ER1BVX1VTRVJRX1NUQVRFX0hVTkcgJiYgIXZy
YW1fbG9zdCkgew0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJxX2Z1bmNz
ID0gYWRldi0+dXNlcnFfZnVuY3NbcXVldWUtPnF1ZXVlX3R5cGVdOw0KPiArDQo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgciA9IHVzZXJxX2Z1bmNzLT5tYXAodXFtLCBxdWV1ZSk7
ICAvLyBSZS1tYXAgcXVldWUNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo
cikgew0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2X2Vycihh
ZGV2LT5kZXYsICJGYWlsZWQgdG8gcmVtYXAgcXVldWUgJWRcbiIsIHF1ZXVlX2lkKTsNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIH0NCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBxdWV1ZS0+c3RhdGUgPSBBTURHUFVfVVNFUlFfU1RBVEVfTUFQUEVEOw0KPiArICAgICAg
ICAgICAgICAgICAgICAgICB9DQo+ICsgICAgICAgICAgICAgICB9DQo+ICsNCj4gKyAgICAgICAg
ICAgICAgIC8qIFJlc3RhcnQgcmVzdW1lIHdvcmsgYWZ0ZXIgcmVzZXQgKi8NCj4gKyAgICAgICAg
ICAgICAgIC8vcXVldWVfZGVsYXllZF93b3JrKHN5c3RlbV93cSwgJnVxbS0+cmVzdW1lX3dvcmss
IG1zZWNzX3RvX2ppZmZpZXMoMTAwKSk7DQo+ICsgICAgICAgfQ0KPiArDQo+ICsgICAgICAgcmV0
dXJuIHI7DQo+ICt9DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdXNlcnEuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91c2VycS5o
DQo+IGluZGV4IDlmYTBkMWE4OGQ3MS4uZmY5YWE0MWM0ZmY4IDEwMDY0NA0KPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdXNlcnEuaA0KPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdXNlcnEuaA0KPiBAQCAtOTMsNiArOTMsOSBAQCBzdHJ1
Y3QgYW1kZ3B1X3VzZXJxX21nciB7DQo+ICAgICAgICAgc3RydWN0IGRlbGF5ZWRfd29yayAgICAg
ICAgICAgICByZXN1bWVfd29yazsNCj4gICAgICAgICBzdHJ1Y3QgbGlzdF9oZWFkICAgICAgICAg
ICAgICAgIGxpc3Q7DQo+ICAgICAgICAgc3RydWN0IGRybV9maWxlICAgICAgICAgICAgICAgICAq
ZmlsZTsNCj4gKyAgICAgICBhdG9taWNfdCAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJxX2dm
eF9jb3VudDsNCj4gKyAgICAgICBhdG9taWNfdCAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJx
X2NvbXB1dGVfY291bnQ7DQo+ICsgICAgICAgYXRvbWljX3QgICAgICAgICAgICAgICAgICAgICAg
ICB1c2VycV9zZG1hX2NvdW50Ow0KPiAgfTsNCj4NCj4gIHN0cnVjdCBhbWRncHVfZGJfaW5mbyB7
DQo+IEBAIC0xMzgsNCArMTQxLDkgQEAgaW50IGFtZGdwdV91c2VycV9zdG9wX3NjaGVkX2Zvcl9l
bmZvcmNlX2lzb2xhdGlvbihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4gIGludCBhbWRn
cHVfdXNlcnFfc3RhcnRfc2NoZWRfZm9yX2VuZm9yY2VfaXNvbGF0aW9uKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LA0KPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1MzIgaWR4KTsNCj4NCj4gK3ZvaWQgYW1kZ3B1X3VzZXJxX3Jlc2V0X3dvcmso
c3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKTsNCj4gKw0KPiArdm9pZCBhbWRncHVfdXNlcnFfcHJl
X3Jlc2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsNCj4gK2ludCBhbWRncHVfdXNlcnFf
cG9zdF9yZXNldChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgYm9vbCB2cmFtX2xvc3QpOw0K
PiArDQo+ICAjZW5kaWYNCj4gLS0NCj4gMi40OS4wDQo+DQo=
