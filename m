Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 755C885F70
	for <lists+amd-gfx@lfdr.de>; Thu,  8 Aug 2019 12:22:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0705D6E815;
	Thu,  8 Aug 2019 10:22:12 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM01-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr820043.outbound.protection.outlook.com [40.107.82.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 47CE46E811
 for <amd-gfx@lists.freedesktop.org>; Thu,  8 Aug 2019 10:22:11 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=isvZUUGqbCwxueIBswXFa1QR2FUQjoWnlq+ZMnMrq8bz7sBNV8TICt0csBfmVf0vxJRMtTUjVun8lczxRrJ9sIchVmjinIHITrhJ9BxwpVfc4jLIFYnHEfdR8Fy6evqne5hvs5P4xoEelkQLD2+9JuPOYnAM7dyiFZ13VJaAZA9Rx1uqcb01y1XdRjzXIpJZhm6GnpuUA6iLobZNl5/JGyMwCGBX68zXF8gpQh6jt8mhshaUw9al7c8rlKk8RTox68os43HXvKv1xYC3IikrkPXuskSuxqWRxd1p0d3XTg2zTNEE4IPf1pR8Es79HUsx9cqeNE5oAE1keseA/yIkBA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=XRg3TWZ8tKe+n3PvsaV5brzhhSX04kZuTb2gQHhbnvw=;
 b=M9HmUla4xiw/dtT5JW3g1MBqDOzrgwe5TUY/zz/LHAuzSl6xjK7hgZO4KzhK/o3VssXHBke1xM37I83m2oCjfgIwxWl189kttZWcASym5/aCcxZ4DgM9YEpHm6ToGRviVn83rgtANyvn7M/bSjBvAaM1xo/NvVZ5AxuyQ+lXV29qPjxKVB6ti6gHb8xS5rG9wZbb2y2fK5IdIv4yEQsKdwMcEuH+OALNoHp6lHArY1RwnII7jykdcK8STkoYwPfcVohOs2iDth0A95jGVHk6HPP8lVHyW40m4a+otgVFnJrid5q2nYiGu9XcF/+9FvsPRbTe/tk6wu2jEECUjHXSkQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from DM5PR12CA0059.namprd12.prod.outlook.com (2603:10b6:3:103::21)
 by BN6PR12MB1268.namprd12.prod.outlook.com (2603:10b6:404:1a::13) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2157.15; Thu, 8 Aug
 2019 10:22:08 +0000
Received: from CO1NAM03FT057.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e48::200) by DM5PR12CA0059.outlook.office365.com
 (2603:10b6:3:103::21) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2136.17 via Frontend
 Transport; Thu, 8 Aug 2019 10:22:08 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV02.amd.com (165.204.84.17) by
 CO1NAM03FT057.mail.protection.outlook.com (10.152.81.124) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2157.15 via Frontend Transport; Thu, 8 Aug 2019 10:22:07 +0000
Received: from localhost.localdomain (10.34.1.3) by SATLEXCHOV02.amd.com
 (10.181.40.72) with Microsoft SMTP Server id 14.3.389.1; Thu, 8 Aug 2019
 05:22:06 -0500
From: Le Ma <le.ma@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 5/9] drm/amdgpu: support sdma clock gating for more instances
Date: Thu, 8 Aug 2019 18:21:52 +0800
Message-ID: <1565259714-30357-5-git-send-email-le.ma@amd.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1565259714-30357-1-git-send-email-le.ma@amd.com>
References: <1565259714-30357-1-git-send-email-le.ma@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(396003)(376002)(346002)(136003)(2980300002)(428003)(189003)(199004)(8936002)(86362001)(186003)(336012)(2906002)(50226002)(478600001)(16586007)(2351001)(44832011)(426003)(316002)(50466002)(49486002)(51416003)(48376002)(6916009)(76176011)(26005)(11346002)(2616005)(476003)(126002)(486006)(70586007)(70206006)(81166006)(81156014)(47776003)(305945005)(4326008)(8676002)(6666004)(356004)(14444005)(36756003)(5660300002)(53936002)(446003);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BN6PR12MB1268; H:SATLEXCHOV02.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 0139d0fb-956a-4a5a-0bf5-08d71bea4473
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328);
 SRVR:BN6PR12MB1268; 
X-MS-TrafficTypeDiagnostic: BN6PR12MB1268:
X-Microsoft-Antispam-PRVS: <BN6PR12MB1268E660E5919A8AEC185EDCF6D70@BN6PR12MB1268.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:2733;
X-Forefront-PRVS: 012349AD1C
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: 2R6Yok4XI9pFzGbyV33ht3JVumKJ++pbkRXjesyJlVIqMW4mLae7YP6+skO9vqGWGqVfvlZr9kcbx+fNvyIqFpx2cuMv6BhfOLY+hdaM5v0WtOKnGi4q0mDqOuSodOsK6489tupxGlAZu00GL0r5dZqYIa14mAD+blKtRE3EURcG9zHvrV2BAa16qEJ5Xu/o2hrPSeggg90LtCPoOCVY9la0tVCLqv/t8GyQXJus6rliO4FPnEYN8wZYtuObYDMjRzWWd/XD5T2klKikihr3ogAx6cYpMyKoftG9lChdtOUS8GblcHojrlKHxRYRcVMu3+UeUC8TTwEAoYfE2H8MJ8yvl6CTQUe/MXEQdua0eMLHJhKA3sdD0cvbGpvPqYnA5bqnnsb3qCQUXEjaiXh93NaKusYcx2sEs35Pi1RwyHM=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 08 Aug 2019 10:22:07.8990 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 0139d0fb-956a-4a5a-0bf5-08d71bea4473
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV02.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN6PR12MB1268
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=XRg3TWZ8tKe+n3PvsaV5brzhhSX04kZuTb2gQHhbnvw=;
 b=gFmL6SX5nJaziCp/rKbmFAJkmzAM7c1YavGSnH7bNF6JpKrMnSr/8o69TXh8WMHaPViYVgn6IowW6o5dmURJn6OetCAgbN3Vdils+BNNyxdpjH+baW6ZH+XhDFttUIL4DOkqf0lB2h3/KPbe9dq6xdzjsNobJcxMsBimvkct8vw=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Le Ma <le.ma@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U2hvcnRlbiB0aGUgY29kZSB3aXRoIFJSRUczMl9TRE1BL1dSRUczMl9TRE1BIG1hY3JvIGluIENH
IHBhcnQuCgpDaGFuZ2UtSWQ6IEljYmY5NDE2OWJiNzAzODc3YjEwNWEzMDdmMTRjNzA4NjA5ZmFh
YWU0ClNpZ25lZC1vZmYtYnk6IExlIE1hIDxsZS5tYUBhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L3NkbWFfdjRfMC5jIHwgMTA1ICsrKysrKysrKysrLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDM0IGluc2VydGlvbnMoKyksIDcxIGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NkbWFfdjRfMC5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc2RtYV92NF8wLmMKaW5kZXggN2FjZjk0Ny4u
OWUzYzYzYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc2RtYV92NF8w
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc2RtYV92NF8wLmMKQEAgLTIwODQs
NjEgKzIwODQsMzUgQEAgc3RhdGljIHZvaWQgc2RtYV92NF8wX3VwZGF0ZV9tZWRpdW1fZ3JhaW5f
Y2xvY2tfZ2F0aW5nKAogCQlib29sIGVuYWJsZSkKIHsKIAl1aW50MzJfdCBkYXRhLCBkZWY7CisJ
aW50IGk7CiAKIAlpZiAoZW5hYmxlICYmIChhZGV2LT5jZ19mbGFncyAmIEFNRF9DR19TVVBQT1JU
X1NETUFfTUdDRykpIHsKLQkJLyogZW5hYmxlIHNkbWEwIGNsb2NrIGdhdGluZyAqLwotCQlkZWYg
PSBkYXRhID0gUlJFRzMyKFNPQzE1X1JFR19PRkZTRVQoU0RNQTAsIDAsIG1tU0RNQTBfQ0xLX0NU
UkwpKTsKLQkJZGF0YSAmPSB+KFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFN19NQVNLIHwK
LQkJCSAgU0RNQTBfQ0xLX0NUUkxfX1NPRlRfT1ZFUlJJREU2X01BU0sgfAotCQkJICBTRE1BMF9D
TEtfQ1RSTF9fU09GVF9PVkVSUklERTVfTUFTSyB8Ci0JCQkgIFNETUEwX0NMS19DVFJMX19TT0ZU
X09WRVJSSURFNF9NQVNLIHwKLQkJCSAgU0RNQTBfQ0xLX0NUUkxfX1NPRlRfT1ZFUlJJREUzX01B
U0sgfAotCQkJICBTRE1BMF9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTJfTUFTSyB8Ci0JCQkgIFNE
TUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFMV9NQVNLIHwKLQkJCSAgU0RNQTBfQ0xLX0NUUkxf
X1NPRlRfT1ZFUlJJREUwX01BU0spOwotCQlpZiAoZGVmICE9IGRhdGEpCi0JCQlXUkVHMzIoU09D
MTVfUkVHX09GRlNFVChTRE1BMCwgMCwgbW1TRE1BMF9DTEtfQ1RSTCksIGRhdGEpOwotCi0JCWlm
IChhZGV2LT5zZG1hLm51bV9pbnN0YW5jZXMgPiAxKSB7Ci0JCQlkZWYgPSBkYXRhID0gUlJFRzMy
KFNPQzE1X1JFR19PRkZTRVQoU0RNQTEsIDAsIG1tU0RNQTFfQ0xLX0NUUkwpKTsKLQkJCWRhdGEg
Jj0gfihTRE1BMV9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTdfTUFTSyB8Ci0JCQkJICBTRE1BMV9D
TEtfQ1RSTF9fU09GVF9PVkVSUklERTZfTUFTSyB8Ci0JCQkJICBTRE1BMV9DTEtfQ1RSTF9fU09G
VF9PVkVSUklERTVfTUFTSyB8Ci0JCQkJICBTRE1BMV9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTRf
TUFTSyB8Ci0JCQkJICBTRE1BMV9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTNfTUFTSyB8Ci0JCQkJ
ICBTRE1BMV9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTJfTUFTSyB8Ci0JCQkJICBTRE1BMV9DTEtf
Q1RSTF9fU09GVF9PVkVSUklERTFfTUFTSyB8Ci0JCQkJICBTRE1BMV9DTEtfQ1RSTF9fU09GVF9P
VkVSUklERTBfTUFTSyk7CisJCWZvciAoaSA9IDA7IGkgPCBhZGV2LT5zZG1hLm51bV9pbnN0YW5j
ZXM7IGkrKykgeworCQkJZGVmID0gZGF0YSA9IFJSRUczMl9TRE1BKGksIG1tU0RNQTBfQ0xLX0NU
UkwpOworCQkJZGF0YSAmPSB+KFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFN19NQVNLIHwK
KwkJCQkgIFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFNl9NQVNLIHwKKwkJCQkgIFNETUEw
X0NMS19DVFJMX19TT0ZUX09WRVJSSURFNV9NQVNLIHwKKwkJCQkgIFNETUEwX0NMS19DVFJMX19T
T0ZUX09WRVJSSURFNF9NQVNLIHwKKwkJCQkgIFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURF
M19NQVNLIHwKKwkJCQkgIFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFMl9NQVNLIHwKKwkJ
CQkgIFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFMV9NQVNLIHwKKwkJCQkgIFNETUEwX0NM
S19DVFJMX19TT0ZUX09WRVJSSURFMF9NQVNLKTsKIAkJCWlmIChkZWYgIT0gZGF0YSkKLQkJCQlX
UkVHMzIoU09DMTVfUkVHX09GRlNFVChTRE1BMSwgMCwgbW1TRE1BMV9DTEtfQ1RSTCksIGRhdGEp
OworCQkJCVdSRUczMl9TRE1BKGksIG1tU0RNQTBfQ0xLX0NUUkwsIGRhdGEpOwogCQl9CiAJfSBl
bHNlIHsKLQkJLyogZGlzYWJsZSBzZG1hMCBjbG9jayBnYXRpbmcgKi8KLQkJZGVmID0gZGF0YSA9
IFJSRUczMihTT0MxNV9SRUdfT0ZGU0VUKFNETUEwLCAwLCBtbVNETUEwX0NMS19DVFJMKSk7Ci0J
CWRhdGEgfD0gKFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFN19NQVNLIHwKLQkJCSBTRE1B
MF9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTZfTUFTSyB8Ci0JCQkgU0RNQTBfQ0xLX0NUUkxfX1NP
RlRfT1ZFUlJJREU1X01BU0sgfAotCQkJIFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFNF9N
QVNLIHwKLQkJCSBTRE1BMF9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTNfTUFTSyB8Ci0JCQkgU0RN
QTBfQ0xLX0NUUkxfX1NPRlRfT1ZFUlJJREUyX01BU0sgfAotCQkJIFNETUEwX0NMS19DVFJMX19T
T0ZUX09WRVJSSURFMV9NQVNLIHwKLQkJCSBTRE1BMF9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTBf
TUFTSyk7Ci0KLQkJaWYgKGRlZiAhPSBkYXRhKQotCQkJV1JFRzMyKFNPQzE1X1JFR19PRkZTRVQo
U0RNQTAsIDAsIG1tU0RNQTBfQ0xLX0NUUkwpLCBkYXRhKTsKLQotCQlpZiAoYWRldi0+c2RtYS5u
dW1faW5zdGFuY2VzID4gMSkgewotCQkJZGVmID0gZGF0YSA9IFJSRUczMihTT0MxNV9SRUdfT0ZG
U0VUKFNETUExLCAwLCBtbVNETUExX0NMS19DVFJMKSk7Ci0JCQlkYXRhIHw9IChTRE1BMV9DTEtf
Q1RSTF9fU09GVF9PVkVSUklERTdfTUFTSyB8Ci0JCQkJIFNETUExX0NMS19DVFJMX19TT0ZUX09W
RVJSSURFNl9NQVNLIHwKLQkJCQkgU0RNQTFfQ0xLX0NUUkxfX1NPRlRfT1ZFUlJJREU1X01BU0sg
fAotCQkJCSBTRE1BMV9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTRfTUFTSyB8Ci0JCQkJIFNETUEx
X0NMS19DVFJMX19TT0ZUX09WRVJSSURFM19NQVNLIHwKLQkJCQkgU0RNQTFfQ0xLX0NUUkxfX1NP
RlRfT1ZFUlJJREUyX01BU0sgfAotCQkJCSBTRE1BMV9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTFf
TUFTSyB8Ci0JCQkJIFNETUExX0NMS19DVFJMX19TT0ZUX09WRVJSSURFMF9NQVNLKTsKKwkJZm9y
IChpID0gMDsgaSA8IGFkZXYtPnNkbWEubnVtX2luc3RhbmNlczsgaSsrKSB7CisJCQlkZWYgPSBk
YXRhID0gUlJFRzMyX1NETUEoaSwgbW1TRE1BMF9DTEtfQ1RSTCk7CisJCQlkYXRhIHw9IChTRE1B
MF9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTdfTUFTSyB8CisJCQkJIFNETUEwX0NMS19DVFJMX19T
T0ZUX09WRVJSSURFNl9NQVNLIHwKKwkJCQkgU0RNQTBfQ0xLX0NUUkxfX1NPRlRfT1ZFUlJJREU1
X01BU0sgfAorCQkJCSBTRE1BMF9DTEtfQ1RSTF9fU09GVF9PVkVSUklERTRfTUFTSyB8CisJCQkJ
IFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFM19NQVNLIHwKKwkJCQkgU0RNQTBfQ0xLX0NU
UkxfX1NPRlRfT1ZFUlJJREUyX01BU0sgfAorCQkJCSBTRE1BMF9DTEtfQ1RSTF9fU09GVF9PVkVS
UklERTFfTUFTSyB8CisJCQkJIFNETUEwX0NMS19DVFJMX19TT0ZUX09WRVJSSURFMF9NQVNLKTsK
IAkJCWlmIChkZWYgIT0gZGF0YSkKLQkJCQlXUkVHMzIoU09DMTVfUkVHX09GRlNFVChTRE1BMSwg
MCwgbW1TRE1BMV9DTEtfQ1RSTCksIGRhdGEpOworCQkJCVdSRUczMl9TRE1BKGksIG1tU0RNQTBf
Q0xLX0NUUkwsIGRhdGEpOwogCQl9CiAJfQogfQpAQCAtMjE0OSwzNCArMjEyMywyMyBAQCBzdGF0
aWMgdm9pZCBzZG1hX3Y0XzBfdXBkYXRlX21lZGl1bV9ncmFpbl9saWdodF9zbGVlcCgKIAkJYm9v
bCBlbmFibGUpCiB7CiAJdWludDMyX3QgZGF0YSwgZGVmOworCWludCBpOwogCiAJaWYgKGVuYWJs
ZSAmJiAoYWRldi0+Y2dfZmxhZ3MgJiBBTURfQ0dfU1VQUE9SVF9TRE1BX0xTKSkgewotCQkvKiAx
LW5vdCBvdmVycmlkZTogZW5hYmxlIHNkbWEwIG1lbSBsaWdodCBzbGVlcCAqLwotCQlkZWYgPSBk
YXRhID0gUlJFRzMyKFNPQzE1X1JFR19PRkZTRVQoU0RNQTAsIDAsIG1tU0RNQTBfUE9XRVJfQ05U
TCkpOwotCQlkYXRhIHw9IFNETUEwX1BPV0VSX0NOVExfX01FTV9QT1dFUl9PVkVSUklERV9NQVNL
OwotCQlpZiAoZGVmICE9IGRhdGEpCi0JCQlXUkVHMzIoU09DMTVfUkVHX09GRlNFVChTRE1BMCwg
MCwgbW1TRE1BMF9QT1dFUl9DTlRMKSwgZGF0YSk7Ci0KLQkJLyogMS1ub3Qgb3ZlcnJpZGU6IGVu
YWJsZSBzZG1hMSBtZW0gbGlnaHQgc2xlZXAgKi8KLQkJaWYgKGFkZXYtPnNkbWEubnVtX2luc3Rh
bmNlcyA+IDEpIHsKLQkJCWRlZiA9IGRhdGEgPSBSUkVHMzIoU09DMTVfUkVHX09GRlNFVChTRE1B
MSwgMCwgbW1TRE1BMV9QT1dFUl9DTlRMKSk7Ci0JCQlkYXRhIHw9IFNETUExX1BPV0VSX0NOVExf
X01FTV9QT1dFUl9PVkVSUklERV9NQVNLOworCQlmb3IgKGkgPSAwOyBpIDwgYWRldi0+c2RtYS5u
dW1faW5zdGFuY2VzOyBpKyspIHsKKwkJCS8qIDEtbm90IG92ZXJyaWRlOiBlbmFibGUgc2RtYSBt
ZW0gbGlnaHQgc2xlZXAgKi8KKwkJCWRlZiA9IGRhdGEgPSBSUkVHMzJfU0RNQSgwLCBtbVNETUEw
X1BPV0VSX0NOVEwpOworCQkJZGF0YSB8PSBTRE1BMF9QT1dFUl9DTlRMX19NRU1fUE9XRVJfT1ZF
UlJJREVfTUFTSzsKIAkJCWlmIChkZWYgIT0gZGF0YSkKLQkJCQlXUkVHMzIoU09DMTVfUkVHX09G
RlNFVChTRE1BMSwgMCwgbW1TRE1BMV9QT1dFUl9DTlRMKSwgZGF0YSk7CisJCQkJV1JFRzMyX1NE
TUEoMCwgbW1TRE1BMF9QT1dFUl9DTlRMLCBkYXRhKTsKIAkJfQogCX0gZWxzZSB7Ci0JCS8qIDAt
b3ZlcnJpZGU6ZGlzYWJsZSBzZG1hMCBtZW0gbGlnaHQgc2xlZXAgKi8KLQkJZGVmID0gZGF0YSA9
IFJSRUczMihTT0MxNV9SRUdfT0ZGU0VUKFNETUEwLCAwLCBtbVNETUEwX1BPV0VSX0NOVEwpKTsK
LQkJZGF0YSAmPSB+U0RNQTBfUE9XRVJfQ05UTF9fTUVNX1BPV0VSX09WRVJSSURFX01BU0s7Ci0J
CWlmIChkZWYgIT0gZGF0YSkKLQkJCVdSRUczMihTT0MxNV9SRUdfT0ZGU0VUKFNETUEwLCAwLCBt
bVNETUEwX1BPV0VSX0NOVEwpLCBkYXRhKTsKLQotCQkvKiAwLW92ZXJyaWRlOmRpc2FibGUgc2Rt
YTEgbWVtIGxpZ2h0IHNsZWVwICovCi0JCWlmIChhZGV2LT5zZG1hLm51bV9pbnN0YW5jZXMgPiAx
KSB7Ci0JCQlkZWYgPSBkYXRhID0gUlJFRzMyKFNPQzE1X1JFR19PRkZTRVQoU0RNQTEsIDAsIG1t
U0RNQTFfUE9XRVJfQ05UTCkpOwotCQkJZGF0YSAmPSB+U0RNQTFfUE9XRVJfQ05UTF9fTUVNX1BP
V0VSX09WRVJSSURFX01BU0s7CisJCWZvciAoaSA9IDA7IGkgPCBhZGV2LT5zZG1hLm51bV9pbnN0
YW5jZXM7IGkrKykgeworCQkvKiAwLW92ZXJyaWRlOmRpc2FibGUgc2RtYSBtZW0gbGlnaHQgc2xl
ZXAgKi8KKwkJCWRlZiA9IGRhdGEgPSBSUkVHMzJfU0RNQSgwLCBtbVNETUEwX1BPV0VSX0NOVEwp
OworCQkJZGF0YSAmPSB+U0RNQTBfUE9XRVJfQ05UTF9fTUVNX1BPV0VSX09WRVJSSURFX01BU0s7
CiAJCQlpZiAoZGVmICE9IGRhdGEpCi0JCQkJV1JFRzMyKFNPQzE1X1JFR19PRkZTRVQoU0RNQTEs
IDAsIG1tU0RNQTFfUE9XRVJfQ05UTCksIGRhdGEpOworCQkJCVdSRUczMl9TRE1BKDAsIG1tU0RN
QTBfUE9XRVJfQ05UTCwgZGF0YSk7CiAJCX0KIAl9CiB9Ci0tIAoyLjcuNAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QK
YW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
