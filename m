Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 097E87D3C7
	for <lists+amd-gfx@lfdr.de>; Thu,  1 Aug 2019 05:42:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 450DD89081;
	Thu,  1 Aug 2019 03:42:41 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr790071.outbound.protection.outlook.com [40.107.79.71])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9D69989081
 for <amd-gfx@lists.freedesktop.org>; Thu,  1 Aug 2019 03:42:39 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Tx8fEEEPFlPPc3XioamSBp/JLHyMoZAVoEOYKsQGMPPaIPBKi9xdKuECOARLLBQt+XP0ONK8Y/5XZaI9wZ69g4DqK3+qJUlkA3modYCXGLMMa1ErtENuxvCsYAG+eNVmZrFl5St4S1GZb4OAFcfuyEFenUrFFBQ/MH+yVk3afVLxm/d34BHa5srYt7kYmqQN8oeSzpuTio0aBGGxjxg1ZR0hao2vzkrPuMjmM8NavQIv8XCSDxWNQ4Z1rSumt74Sar0H4iKp2FguAz9YE0bMECtcq/vqRVBF1kCvDqBuorPNJaPfAwQRIveuNPRric7RzwNsbJ6zy7ody1MisAQ6qw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=MEXfpoFRYB8N3QbRp7cBNB5x89kwb4YLUqEekmf0TyQ=;
 b=FtrF+6RBvyxSITb0B6A01vLWeVIdTNEq/AUQ1G1xgTO6S4gMR9a1cWQb2ANpcRNDyDzIKl3xb9JIxbYkpXBAu/zM4yXy7bY5y6HMHAalYW5nKTmeaCtxnh4kseE3unvx/7K12Oddb9MvqMaRe8uV+mzNuK3ak5WdMoLl7C2NJElm+dLNHHMFoOo9yJggEHyXlDyXKHy/rZGhrZbwllk7SmqVgh6H7vUUCC6iR6Q2smmsVVtZ5lNJO5GUhfwrw01deKwdbx0Zpolz/O/96DLrrlNU+hhXCvj8QF7FBvhmaGMyA2YADWONvo/WhopkTqNGSmN6/oTOulNy6+ewGIXfaA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=amd.com;dmarc=pass action=none header.from=amd.com;dkim=pass
 header.d=amd.com;arc=none
Received: from MN2PR12MB3933.namprd12.prod.outlook.com (10.255.238.94) by
 MN2PR12MB3213.namprd12.prod.outlook.com (20.179.81.218) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2136.16; Thu, 1 Aug 2019 03:42:35 +0000
Received: from MN2PR12MB3933.namprd12.prod.outlook.com
 ([fe80::69c2:5f32:2f63:5c]) by MN2PR12MB3933.namprd12.prod.outlook.com
 ([fe80::69c2:5f32:2f63:5c%3]) with mapi id 15.20.2115.005; Thu, 1 Aug 2019
 03:42:35 +0000
From: "Liu, Monk" <Monk.Liu@amd.com>
To: "Deucher, Alexander" <Alexander.Deucher@amd.com>, "Koenig, Christian"
 <Christian.Koenig@amd.com>, "Zhang, Hawking" <Hawking.Zhang@amd.com>
Subject: RE: [PATCH] drm/amdgpu: fix double ucode load by PSP(v3)
Thread-Topic: [PATCH] drm/amdgpu: fix double ucode load by PSP(v3)
Thread-Index: AQHVR32Wc7o/yKlVkEq1/wXZcssqjabkbt+AgAE4TIA=
Date: Thu, 1 Aug 2019 03:42:35 +0000
Message-ID: <MN2PR12MB393397B3BE08ED66816E861684DE0@MN2PR12MB3933.namprd12.prod.outlook.com>
References: <1564563264-30902-1-git-send-email-Monk.Liu@amd.com>
 <MN2PR12MB2975165B4F9C506815EDAC798FDF0@MN2PR12MB2975.namprd12.prod.outlook.com>
In-Reply-To: <MN2PR12MB2975165B4F9C506815EDAC798FDF0@MN2PR12MB2975.namprd12.prod.outlook.com>
Accept-Language: en-US, zh-CN
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 269342ea-109c-487f-304a-08d716324b0d
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:MN2PR12MB3213; 
x-ms-traffictypediagnostic: MN2PR12MB3213:
x-ms-exchange-purlcount: 1
x-microsoft-antispam-prvs: <MN2PR12MB3213338A456559496E6401E384DE0@MN2PR12MB3213.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:1186;
x-forefront-prvs: 01165471DB
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(346002)(136003)(396003)(39860400002)(366004)(189003)(199004)(13464003)(54906003)(9686003)(86362001)(6306002)(7736002)(99286004)(7696005)(25786009)(8676002)(71190400001)(71200400001)(110136005)(316002)(305945005)(66066001)(6436002)(53546011)(6506007)(76176011)(186003)(14444005)(256004)(6636002)(6246003)(26005)(102836004)(6116002)(3846002)(55016002)(229853002)(74316002)(2906002)(64756008)(66556008)(66946007)(14454004)(66476007)(66446008)(53936002)(76116006)(52536014)(33656002)(5660300002)(446003)(11346002)(68736007)(476003)(8936002)(81156014)(81166006)(4326008)(478600001)(486006);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3213;
 H:MN2PR12MB3933.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: cyE36JzzuhSdft4k+/V10n0DoBwMMZz5cLxBCQWctrnl3oaNHDHiSg98uAXqp/UWNsCWmSr4Jjz7in5pQ5SkDdG3QqQPRhRnWXWTJvcK/Wnox1TIfa8WY1WAqBGgMLSHNdU4wAYkBhPrkSaNmaXfGY+pyUhMSB+KmFUguAxhHifVmKSv1sJrHRT9l7uUvaVIbuOsPqdPo3OLSu82JF+uoIxAON+fyJB8HKZnydOnIj4IOy4LNjvZRy35S+selPXtfAQFP9tE86VL+e+KKKX594WkSsxe8+IGUfS/fp0lQbRE4krRR1qZuzzWiBDb0WYKMyjOn022jc7nuXvC/iXcih2ylKxpfO6z0v1j09xR9f3ii8up/YccfewyWyPUCbcDGgtHs+7XEo24Oau/lQwPjPs15Yq2awMzLC6+oVVsRNM=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 269342ea-109c-487f-304a-08d716324b0d
X-MS-Exchange-CrossTenant-originalarrivaltime: 01 Aug 2019 03:42:35.8276 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: jyliu@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3213
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=MEXfpoFRYB8N3QbRp7cBNB5x89kwb4YLUqEekmf0TyQ=;
 b=X9ZZAQOFu/mknFY9f5Too07rivwHyV090cPOdBfdYdc0gusTr+GHzLQmJJNsECfsVyJ3wm4UQ1toyXcn/Zct3/AlO35TwJMjhoHj29aGAPvbeddsaRcbX4yt7vH/A4H9SEEmcklKGa3+TJuIrZs5bmCbukWnptjrfaP4LXexGXQ=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Monk.Liu@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deng, Emily" <Emily.Deng@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

SWYgbm8gb2JqZWN0aW9uIEkgd291bGQgc3VibWl0IHRob3NlIHRocmVlIHBhdGNoZXMsIHRoYW5r
cw0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQpNb25rIExpdXxHUFUg
VmlydHVhbGl6YXRpb24gVGVhbSB8QU1EDQoNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0N
CkZyb206IERlbmcsIEVtaWx5IDxFbWlseS5EZW5nQGFtZC5jb20+IA0KU2VudDogV2VkbmVzZGF5
LCBKdWx5IDMxLCAyMDE5IDU6MDQgUE0NClRvOiBMaXUsIE1vbmsgPE1vbmsuTGl1QGFtZC5jb20+
OyBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KQ2M6IExpdSwgTW9uayA8TW9uay5MaXVA
YW1kLmNvbT4NClN1YmplY3Q6IFJFOiBbUEFUQ0hdIGRybS9hbWRncHU6IGZpeCBkb3VibGUgdWNv
ZGUgbG9hZCBieSBQU1AodjMpDQoNCkFsbCBsb29rcyBnb29kIHRvIG1lLiBSZXZpZXdlZC1ieTog
RW1pbHkgRGVuZyA8RW1pbHkuRGVuZ0BhbWQuY29tPi4NCg0KPi0tLS0tT3JpZ2luYWwgTWVzc2Fn
ZS0tLS0tDQo+RnJvbTogYW1kLWdmeCA8YW1kLWdmeC1ib3VuY2VzQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZz4gT24gQmVoYWxmIE9mIE1vbmsgDQo+TGl1DQo+U2VudDogV2VkbmVzZGF5LCBKdWx5IDMx
LCAyMDE5IDQ6NTQgUE0NCj5UbzogYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcNCj5DYzog
TGl1LCBNb25rIDxNb25rLkxpdUBhbWQuY29tPg0KPlN1YmplY3Q6IFtQQVRDSF0gZHJtL2FtZGdw
dTogZml4IGRvdWJsZSB1Y29kZSBsb2FkIGJ5IFBTUCh2MykNCj4NCj5wcmV2aW91c2x5IHRoZSB1
Y29kZSBsb2FkaW5nIG9mIFBTUCB3YXMgcmVwcmVhdGVkLCBvbmUgZXhlY3V0ZWQgaW4NCj5waGFz
ZV8xIGluaXQvcmUtaW5pdC9yZXN1bWUgYW5kIHRoZSBvdGhlciBpbiBmd19sb2FkaW5nIHJvdXRp
bmUNCj4NCj5Bdm9pZCB0aGlzIGRvdWJsZSBsb2FkaW5nIGJ5IGNsZWFyaW5nIGlwX2Jsb2Nrcy5z
dGF0dXMuaHcgaW4gc3VzcGVuZCBvciANCj5yZXNldCBwcmlvciB0byB0aGUgRlcgbG9hZGluZyBh
bmQgYW55IGJsb2NrJ3MgaHdfaW5pdC9yZXN1bWUNCj4NCj52MjoNCj5zdGlsbCBkbyB0aGUgc211
IGZ3IGxvYWRpbmcgc2luY2UgaXQgaXMgbmVlZGVkIGJ5IGJhcmUtbWV0YWwNCj4NCj52MzoNCj5k
cm9wIHRoZSBjaGFuZ2UgaW4gcmVpbml0X2Vhcmx5X3NyaW92LCBqdXN0IGNsZWFyIGFsbCBibG9j
aydzIHN0YXR1cy5odyANCj5pbiB0aGUgaGVhZCBwbGFjZSBhbmQgc2V0IHRoZSBzdGF0dXMuaHcg
YWZ0ZXIgaHdfaW5pdCBkb25lIGlzIGVub3VnaA0KPg0KPlNpZ25lZC1vZmYtYnk6IE1vbmsgTGl1
IDxNb25rLkxpdUBhbWQuY29tPg0KPi0tLQ0KPiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfZGV2aWNlLmMgfCA1OQ0KPisrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLQ0KPiAx
IGZpbGUgY2hhbmdlZCwgMzggaW5zZXJ0aW9ucygrKSwgMjEgZGVsZXRpb25zKC0pDQo+DQo+ZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPmIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jDQo+aW5kZXggNmNiMzU4
Yy4uMzA0MzZiYSAxMDA2NDQNCj4tLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfZGV2aWNlLmMNCj4rKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2
aWNlLmMNCj5AQCAtMTY3MywyOCArMTY3MywzNCBAQCBzdGF0aWMgaW50IGFtZGdwdV9kZXZpY2Vf
ZndfbG9hZGluZyhzdHJ1Y3QgDQo+YW1kZ3B1X2RldmljZSAqYWRldikNCj4NCj4gCWlmIChhZGV2
LT5hc2ljX3R5cGUgPj0gQ0hJUF9WRUdBMTApIHsNCj4gCQlmb3IgKGkgPSAwOyBpIDwgYWRldi0+
bnVtX2lwX2Jsb2NrczsgaSsrKSB7DQo+LQkJCWlmIChhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lv
bi0+dHlwZSA9PQ0KPkFNRF9JUF9CTE9DS19UWVBFX1BTUCkgew0KPi0JCQkJaWYgKGFkZXYtPmlu
X2dwdV9yZXNldCB8fCBhZGV2LT5pbl9zdXNwZW5kKSB7DQo+LQkJCQkJaWYgKGFtZGdwdV9zcmlv
dl92ZihhZGV2KSAmJiBhZGV2LQ0KPj5pbl9ncHVfcmVzZXQpDQo+LQkJCQkJCWJyZWFrOyAvKiBz
cmlvdiBncHUgcmVzZXQsIHBzcA0KPm5lZWQgdG8gZG8gaHdfaW5pdCBiZWZvcmUgSUggYmVjYXVz
ZSBvZiBodyBsaW1pdCAqLw0KPi0JCQkJCXIgPSBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+
ZnVuY3MtDQo+PnJlc3VtZShhZGV2KTsNCj4tCQkJCQlpZiAocikgew0KPi0JCQkJCQlEUk1fRVJS
T1IoInJlc3VtZSBvZiBJUA0KPmJsb2NrIDwlcz4gZmFpbGVkICVkXG4iLA0KPisJCQlpZiAoYWRl
di0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPnR5cGUgIT0NCj5BTURfSVBfQkxPQ0tfVFlQRV9QU1Ap
DQo+KwkJCQljb250aW51ZTsNCj4rDQo+KwkJCS8qIG5vIG5lZWQgdG8gZG8gdGhlIGZ3IGxvYWRp
bmcgYWdhaW4gaWYgYWxyZWFkeQ0KPmRvbmUqLw0KPisJCQlpZiAoYWRldi0+aXBfYmxvY2tzW2ld
LnN0YXR1cy5odyA9PSB0cnVlKQ0KPisJCQkJYnJlYWs7DQo+Kw0KPisJCQlpZiAoYWRldi0+aW5f
Z3B1X3Jlc2V0IHx8IGFkZXYtPmluX3N1c3BlbmQpIHsNCj4rCQkJCXIgPSBhZGV2LT5pcF9ibG9j
a3NbaV0udmVyc2lvbi0+ZnVuY3MtDQo+PnJlc3VtZShhZGV2KTsNCj4rCQkJCWlmIChyKSB7DQo+
KwkJCQkJRFJNX0VSUk9SKCJyZXN1bWUgb2YgSVAgYmxvY2sgPCVzPg0KPmZhaWxlZCAlZFxuIiwN
Cj4gCQkJCQkJCSAgYWRldi0NCj4+aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLT5uYW1lLCBy
KTsNCj4tCQkJCQkJcmV0dXJuIHI7DQo+LQkJCQkJfQ0KPi0JCQkJfSBlbHNlIHsNCj4tCQkJCQly
ID0gYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLQ0KPj5od19pbml0KGFkZXYpOw0K
Pi0JCQkJCWlmIChyKSB7DQo+LQkJCQkJCURSTV9FUlJPUigiaHdfaW5pdCBvZiBJUA0KPmJsb2Nr
IDwlcz4gZmFpbGVkICVkXG4iLA0KPi0JCQkJCQkgIGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9u
LQ0KPj5mdW5jcy0+bmFtZSwgcik7DQo+LQkJCQkJCXJldHVybiByOw0KPi0JCQkJCX0NCj4rCQkJ
CQlyZXR1cm4gcjsNCj4rCQkJCX0NCj4rCQkJfSBlbHNlIHsNCj4rCQkJCXIgPSBhZGV2LT5pcF9i
bG9ja3NbaV0udmVyc2lvbi0+ZnVuY3MtDQo+Pmh3X2luaXQoYWRldik7DQo+KwkJCQlpZiAocikg
ew0KPisJCQkJCURSTV9FUlJPUigiaHdfaW5pdCBvZiBJUCBibG9jayA8JXM+DQo+ZmFpbGVkICVk
XG4iLA0KPisJCQkJCQkJICBhZGV2LQ0KPj5pcF9ibG9ja3NbaV0udmVyc2lvbi0+ZnVuY3MtPm5h
bWUsIHIpOw0KPisJCQkJCXJldHVybiByOw0KPiAJCQkJfQ0KPi0JCQkJYWRldi0+aXBfYmxvY2tz
W2ldLnN0YXR1cy5odyA9IHRydWU7DQo+IAkJCX0NCj4rDQo+KwkJCWFkZXYtPmlwX2Jsb2Nrc1tp
XS5zdGF0dXMuaHcgPSB0cnVlOw0KPisJCQlicmVhazsNCj4gCQl9DQo+IAl9DQo+Kw0KPiAJciA9
IGFtZGdwdV9wbV9sb2FkX3NtdV9maXJtd2FyZShhZGV2LCAmc211X3ZlcnNpb24pOw0KPg0KPiAJ
cmV0dXJuIHI7DQo+QEAgLTIxMzYsNyArMjE0Miw5IEBAIHN0YXRpYyBpbnQNCj5hbWRncHVfZGV2
aWNlX2lwX3N1c3BlbmRfcGhhc2UxKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KPiAJCQlp
ZiAocikgew0KPiAJCQkJRFJNX0VSUk9SKCJzdXNwZW5kIG9mIElQIGJsb2NrIDwlcz4gZmFpbGVk
ICVkXG4iLA0KPiAJCQkJCSAgYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLQ0KPj5u
YW1lLCByKTsNCj4rCQkJCXJldHVybiByOw0KPiAJCQl9DQo+KwkJCWFkZXYtPmlwX2Jsb2Nrc1tp
XS5zdGF0dXMuaHcgPSBmYWxzZTsNCj4gCQl9DQo+IAl9DQo+DQo+QEAgLTIxNzYsMTQgKzIxODQs
MTYgQEAgc3RhdGljIGludA0KPmFtZGdwdV9kZXZpY2VfaXBfc3VzcGVuZF9waGFzZTIoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+IAkJCWlmIChpc19zdXBwb3J0X3N3X3NtdShhZGV2KSkg
ew0KPiAJCQkJLyogdG9kbyAqLw0KPiAJCQl9IGVsc2UgaWYgKGFkZXYtPnBvd2VycGxheS5wcF9m
dW5jcyAmJg0KPi0JCQkJICAgYWRldi0+cG93ZXJwbGF5LnBwX2Z1bmNzLT5zZXRfbXAxX3N0YXRl
KQ0KPnsNCj4rCQkJCQkgICBhZGV2LT5wb3dlcnBsYXkucHBfZnVuY3MtDQo+PnNldF9tcDFfc3Rh
dGUpIHsNCj4gCQkJCXIgPSBhZGV2LT5wb3dlcnBsYXkucHBfZnVuY3MtDQo+PnNldF9tcDFfc3Rh
dGUoDQo+IAkJCQkJYWRldi0+cG93ZXJwbGF5LnBwX2hhbmRsZSwNCj4gCQkJCQlhZGV2LT5tcDFf
c3RhdGUpOw0KPiAJCQkJaWYgKHIpIHsNCj4gCQkJCQlEUk1fRVJST1IoIlNNQyBmYWlsZWQgdG8g
c2V0IG1wMQ0KPnN0YXRlICVkLCAlZFxuIiwNCj4gCQkJCQkJICBhZGV2LT5tcDFfc3RhdGUsIHIp
Ow0KPisJCQkJCXJldHVybiByOw0KPiAJCQkJfQ0KPisJCQkJYWRldi0+aXBfYmxvY2tzW2ldLnN0
YXR1cy5odyA9IGZhbHNlOw0KPiAJCQl9DQo+IAkJfQ0KPiAJfQ0KPkBAIC0yMjM4LDYgKzIyNDgs
NyBAQCBzdGF0aWMgaW50DQo+YW1kZ3B1X2RldmljZV9pcF9yZWluaXRfZWFybHlfc3Jpb3Yoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+IAkJZm9yIChqID0gMDsgaiA8IGFkZXYtPm51bV9p
cF9ibG9ja3M7IGorKykgew0KPiAJCQlibG9jayA9ICZhZGV2LT5pcF9ibG9ja3Nbal07DQo+DQo+
KwkJCWJsb2NrLT5zdGF0dXMuaHcgPSBmYWxzZTsNCj4gCQkJaWYgKGJsb2NrLT52ZXJzaW9uLT50
eXBlICE9IGlwX29yZGVyW2ldIHx8DQo+IAkJCQkhYmxvY2stPnN0YXR1cy52YWxpZCkNCj4gCQkJ
CWNvbnRpbnVlOw0KPkBAIC0yMjQ2LDYgKzIyNTcsNyBAQCBzdGF0aWMgaW50DQo+YW1kZ3B1X2Rl
dmljZV9pcF9yZWluaXRfZWFybHlfc3Jpb3Yoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+
IAkJCURSTV9JTkZPKCJSRS1JTklULWVhcmx5OiAlcyAlc1xuIiwgYmxvY2stPnZlcnNpb24tDQo+
PmZ1bmNzLT5uYW1lLCByPyJmYWlsZWQiOiJzdWNjZWVkZWQiKTsNCj4gCQkJaWYgKHIpDQo+IAkJ
CQlyZXR1cm4gcjsNCj4rCQkJYmxvY2stPnN0YXR1cy5odyA9IHRydWU7DQo+IAkJfQ0KPiAJfQ0K
Pg0KPkBAIC0yMjczLDEzICsyMjg1LDE1IEBAIHN0YXRpYyBpbnQNCj5hbWRncHVfZGV2aWNlX2lw
X3JlaW5pdF9sYXRlX3NyaW92KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KPiAJCQlibG9j
ayA9ICZhZGV2LT5pcF9ibG9ja3Nbal07DQo+DQo+IAkJCWlmIChibG9jay0+dmVyc2lvbi0+dHlw
ZSAhPSBpcF9vcmRlcltpXSB8fA0KPi0JCQkJIWJsb2NrLT5zdGF0dXMudmFsaWQpDQo+KwkJCQkh
YmxvY2stPnN0YXR1cy52YWxpZCB8fA0KPisJCQkJYmxvY2stPnN0YXR1cy5odykNCj4gCQkJCWNv
bnRpbnVlOw0KPg0KPiAJCQlyID0gYmxvY2stPnZlcnNpb24tPmZ1bmNzLT5od19pbml0KGFkZXYp
Ow0KPiAJCQlEUk1fSU5GTygiUkUtSU5JVC1sYXRlOiAlcyAlc1xuIiwgYmxvY2stPnZlcnNpb24t
DQo+PmZ1bmNzLT5uYW1lLCByPyJmYWlsZWQiOiJzdWNjZWVkZWQiKTsNCj4gCQkJaWYgKHIpDQo+
IAkJCQlyZXR1cm4gcjsNCj4rCQkJYmxvY2stPnN0YXR1cy5odyA9IHRydWU7DQo+IAkJfQ0KPiAJ
fQ0KPg0KPkBAIC0yMzAzLDE3ICsyMzE3LDE5IEBAIHN0YXRpYyBpbnQNCj5hbWRncHVfZGV2aWNl
X2lwX3Jlc3VtZV9waGFzZTEoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+IAlpbnQgaSwg
cjsNCj4NCj4gCWZvciAoaSA9IDA7IGkgPCBhZGV2LT5udW1faXBfYmxvY2tzOyBpKyspIHsNCj4t
CQlpZiAoIWFkZXYtPmlwX2Jsb2Nrc1tpXS5zdGF0dXMudmFsaWQpDQo+KwkJaWYgKCFhZGV2LT5p
cF9ibG9ja3NbaV0uc3RhdHVzLnZhbGlkIHx8IGFkZXYtDQo+PmlwX2Jsb2Nrc1tpXS5zdGF0dXMu
aHcpDQo+IAkJCWNvbnRpbnVlOw0KPiAJCWlmIChhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+
dHlwZSA9PSBBTURfSVBfQkxPQ0tfVFlQRV9DT01NT04gfHwNCj4gCQkgICAgYWRldi0+aXBfYmxv
Y2tzW2ldLnZlcnNpb24tPnR5cGUgPT0gQU1EX0lQX0JMT0NLX1RZUEVfR01DIHx8DQo+IAkJICAg
IGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT50eXBlID09DQo+QU1EX0lQX0JMT0NLX1RZUEVf
SUgpIHsNCj4rDQo+IAkJCXIgPSBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+ZnVuY3MtPnJl
c3VtZShhZGV2KTsNCj4gCQkJaWYgKHIpIHsNCj4gCQkJCURSTV9FUlJPUigicmVzdW1lIG9mIElQ
IGJsb2NrIDwlcz4gZmFpbGVkICVkXG4iLA0KPiAJCQkJCSAgYWRldi0+aXBfYmxvY2tzW2ldLnZl
cnNpb24tPmZ1bmNzLQ0KPj5uYW1lLCByKTsNCj4gCQkJCXJldHVybiByOw0KPiAJCQl9DQo+KwkJ
CWFkZXYtPmlwX2Jsb2Nrc1tpXS5zdGF0dXMuaHcgPSB0cnVlOw0KPiAJCX0NCj4gCX0NCj4NCj5A
QCAtMjMzOCw3ICsyMzU0LDcgQEAgc3RhdGljIGludCBhbWRncHVfZGV2aWNlX2lwX3Jlc3VtZV9w
aGFzZTIoc3RydWN0DQo+YW1kZ3B1X2RldmljZSAqYWRldikNCj4gCWludCBpLCByOw0KPg0KPiAJ
Zm9yIChpID0gMDsgaSA8IGFkZXYtPm51bV9pcF9ibG9ja3M7IGkrKykgew0KPi0JCWlmICghYWRl
di0+aXBfYmxvY2tzW2ldLnN0YXR1cy52YWxpZCkNCj4rCQlpZiAoIWFkZXYtPmlwX2Jsb2Nrc1tp
XS5zdGF0dXMudmFsaWQgfHwgYWRldi0NCj4+aXBfYmxvY2tzW2ldLnN0YXR1cy5odykNCj4gCQkJ
Y29udGludWU7DQo+IAkJaWYgKGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT50eXBlID09IEFN
RF9JUF9CTE9DS19UWVBFX0NPTU1PTiB8fA0KPiAJCSAgICBhZGV2LT5pcF9ibG9ja3NbaV0udmVy
c2lvbi0+dHlwZSA9PSBBTURfSVBfQkxPQ0tfVFlQRV9HTUMgfHwgQEAgDQo+LTIzNTEsNiArMjM2
Nyw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2RldmljZV9pcF9yZXN1bWVfcGhhc2UyKHN0cnVjdCAN
Cj5hbWRncHVfZGV2aWNlICphZGV2KQ0KPiAJCQkJICBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lv
bi0+ZnVuY3MtPm5hbWUsIHIpOw0KPiAJCQlyZXR1cm4gcjsNCj4gCQl9DQo+KwkJYWRldi0+aXBf
YmxvY2tzW2ldLnN0YXR1cy5odyA9IHRydWU7DQo+IAl9DQo+DQo+IAlyZXR1cm4gMDsNCj4tLQ0K
PjIuNy40DQo+DQo+X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18NCj5hbWQtZ2Z4IG1haWxpbmcgbGlzdA0KPmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
DQo+aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
DQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4
IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
