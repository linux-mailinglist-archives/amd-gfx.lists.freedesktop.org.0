Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 023F1BF440
	for <lists+amd-gfx@lfdr.de>; Thu, 26 Sep 2019 15:40:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7A8A16ED2D;
	Thu, 26 Sep 2019 13:40:55 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8B4386ED2D
 for <amd-gfx@lists.freedesktop.org>; Thu, 26 Sep 2019 13:40:54 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id b9so2844184wrs.0
 for <amd-gfx@lists.freedesktop.org>; Thu, 26 Sep 2019 06:40:54 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=pc7zhN6yGFI1belGxLsDseHb8jOULONZXmjZrpuicF8=;
 b=Boc9dJIahWlgcAu+vFBo47gDGw8KS52US/PlIUYLI1Gr6WunfjtjW9a7mLxLtN+t/S
 q4TLc7ntDWenrVVKYONvndFnOsobUPpfmc+08F3LZFPc/0qrx/68sKzT48BlNvtLdEnJ
 EGkiuFWgMyBZjOFOfPFwEkS4q+VxolFLFpO6FOMMSh7rroc31HrxQ1xVxxKdFmwt+RXq
 bpctCFmHXKvZ9E3ZvIQr4YrUABwF2IsqY7SQcCQBRJMHgvbOgzDrzBQwaIsH/Bkh6xNW
 435u7vGB1nEf2VMAu+yO7PHnVNDRTjQAckTuhM3afUfUZBbXsWn7j0Uuwhd/BEQ4Qnlv
 61Jw==
X-Gm-Message-State: APjAAAXW/WnohxH2lp7iDQiccM3h7jrCTEoZSd7i0UMXMiZ7l3WbHerr
 8e5eL4MwUUcfSbTpglOVW1YnLi76NoWHIseB6bx8CA30
X-Google-Smtp-Source: APXvYqyby3LqGhQxbInPNS+3UQDuDBZuuAKvbWJTw/ymT7KNnhn/Jj9+g2/tr27m3/kcEuosF8RSMrErFVdPtx7VJfE=
X-Received: by 2002:adf:f287:: with SMTP id k7mr3242031wro.206.1569505253028; 
 Thu, 26 Sep 2019 06:40:53 -0700 (PDT)
MIME-Version: 1.0
References: <20190926080746.20765-1-xiaojie.yuan@amd.com>
 <BN8PR12MB36027CA5662543E7F956657589860@BN8PR12MB3602.namprd12.prod.outlook.com>
 <BN6PR12MB1809591CB4102B70BEC82E93F7860@BN6PR12MB1809.namprd12.prod.outlook.com>
 <608f4e8a-ef35-6fbc-cda6-51c3803af014@gmail.com>
In-Reply-To: <608f4e8a-ef35-6fbc-cda6-51c3803af014@gmail.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Thu, 26 Sep 2019 09:40:40 -0400
Message-ID: <CADnq5_PdWnfB1knhdi_fre1gSeE5ibMXvCrzq-id36BbR63ZfQ@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu/gmc10: apply the 'invalidation from sdma'
 workaround for navi
To: Christian Koenig <christian.koenig@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=pc7zhN6yGFI1belGxLsDseHb8jOULONZXmjZrpuicF8=;
 b=CaAGIDifiljV5KVm/ZqBTSGwPv09FIc+NFFtPbu3NEiquqyD3vO3nnAutmb14Fe4Af
 Kh7y0/nNvbd/nK8gyI05xR9I0/39rN/uVKY1AB1u34fxy04JEldzGpvFB7b1BuqZRxtb
 fQawWwYZ4GxS38KlbGHHKjt0/5YFC5CGuOUw/42wyZ7F6SbCS62j/Ure533Cd3eRSS7x
 cCpBg3jXuABntQujsZrDLrVOPqJtMahzStaxIfSTkGIX8ggGPWUH1y3L2gLMrPBJDOtE
 jaio0BHyxnfJrnKtPbVC6JGIjwAio7qoB2iO1ubISvWbCnXmv0thQ52gZkn04yqmWZrK
 M/Dw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Yuan,
 Xiaojie" <Xiaojie.Yuan@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBTZXAgMjYsIDIwMTkgYXQgODoyOSBBTSBDaHJpc3RpYW4gS8O2bmlnCjxja29lbmln
LmxlaWNodHp1bWVya2VuQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBTdG9wLCB3YWl0IGEgc2Vjb25k
IGd1eXMhCj4KPiBUaGlzIHdpbGwgZGlzYWJsZSB0aGUgd29ya2Fyb3VuZCBmb3IgTmF2aTEwIGFu
ZCB0aGF0IGlzIGNlcnRhaW5seSBub3QgY29ycmVjdDoKPgo+ICEoYWRldi0+YXNpY190eXBlID49
IENISVBfTkFWSTEwICYmIGFkZXYtPmFzaWNfdHlwZSA8PSBDSElQX05BVkkxMikKPgoKQWN0dWFs
bHksIEkgdGhpbmsgaXQncyBjb3JyZWN0LiBXaGVuIEkgbWVyZ2VkIHRoZSBiYWNvIHBhdGNoLCBJ
CmFjY2lkZW50YWxseSBkcm9wcGVkIHRoZSBuYXZpIGNoZWNrcy4gIEUuZy4sCkBAIC0yNDUsOCAr
MjQ1LDkgQEAgc3RhdGljIHZvaWQgZ21jX3YxMF8wX2ZsdXNoX2dwdV90bGIoc3RydWN0CmFtZGdw
dV9kZXZpY2UgKmFkZXYsCiAgICAgICAgbXV0ZXhfbG9jaygmYWRldi0+bW1hbi5ndHRfd2luZG93
X2xvY2spOwoKICAgICAgICBnbWNfdjEwXzBfZmx1c2hfdm1faHViKGFkZXYsIHZtaWQsIEFNREdQ
VV9NTUhVQiwgMCk7Ci0gICAgICAgaWYgKCFhZGV2LT5tbWFuLmJ1ZmZlcl9mdW5jc19lbmFibGVk
IHx8ICFhZGV2LT5pYl9wb29sX3JlYWR5IHx8Ci0gICAgICAgICAgIGFkZXYtPmFzaWNfdHlwZSAh
PSBDSElQX05BVkkxMCkgeworICAgICAgIGlmICghYWRldi0+bW1hbi5idWZmZXJfZnVuY3NfZW5h
YmxlZCB8fAorICAgICAgICAgICAhYWRldi0+aWJfcG9vbF9yZWFkeSB8fAorICAgICAgICAgICBh
ZGV2LT5pbl9ncHVfcmVzZXQpIHsKICAgICAgICAgICAgICAgIGdtY192MTBfMF9mbHVzaF92bV9o
dWIoYWRldiwgdm1pZCwgQU1ER1BVX0dGWEhVQiwgMCk7CiAgICAgICAgICAgICAgICBtdXRleF91
bmxvY2soJmFkZXYtPm1tYW4uZ3R0X3dpbmRvd19sb2NrKTsKICAgICAgICAgICAgICAgIHJldHVy
bjsKSSB0aGluayBpdCBzaG91bGQgaGF2ZSBiZWVuCmFkZXYtPmFzaWNfdHlwZSAhPSBDSElQX05B
VkkxMCAmJiBhZGV2LT5hc2ljX3R5cGUgIT0gQ0hJUF9OQVZJMTQgJiYKYWRldi0+YXNpY190eXBl
ICE9IENISVBfTkFWSTEyCgpBbGV4Cgo+Cj4gQ2hyaXN0aWFuLgo+Cj4KPiBBbSAyNi4wOS4xOSB1
bSAxNDoyNiBzY2hyaWViIERldWNoZXIsIEFsZXhhbmRlcjoKPgo+IFBsZWFzZSBhZGQgYSBwYXRj
aCBkZXNjcmlwdGlvbi4gIFdpdGggdGhhdCBmaXhlZDoKPiBSZXZpZXdlZC1ieTogQWxleCBEZXVj
aGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgo+IF9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCj4gRnJvbTogYW1kLWdmeCA8YW1kLWdmeC1ib3VuY2VzQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZz4gb24gYmVoYWxmIG9mIFl1YW4sIFhpYW9qaWUgPFhpYW9qaWUuWXVhbkBhbWQuY29t
Pgo+IFNlbnQ6IFRodXJzZGF5LCBTZXB0ZW1iZXIgMjYsIDIwMTkgNDowOSBBTQo+IFRvOiBhbWQt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZyA8YW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmc+
Cj4gQ2M6IGFsZXhkZXVjaGVyQGdtYWlsLmNvbSA8YWxleGRldWNoZXJAZ21haWwuY29tPgo+IFN1
YmplY3Q6IFJlOiBbUEFUQ0hdIGRybS9hbWRncHUvZ21jMTA6IGFwcGx5IHRoZSAnaW52YWxpZGF0
aW9uIGZyb20gc2RtYScgd29ya2Fyb3VuZCBmb3IgbmF2aQo+Cj4gSGkgQWxleCwKPgo+IFRoaXMg
cGF0Y2ggaXMgdG8gYWRkIHRoZSBhc2ljX3R5cGUgY2hlY2sgd2hpY2ggaXMgbWlzc2luZyBhZnRl
ciBkcm0tbmV4dCBicmFuY2ggcmViYXNlLgo+Cj4gQlIsCj4gWGlhb2ppZQo+IF9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCj4gRnJvbTogWXVhbiwgWGlhb2ppZSA8WGlhb2ppZS5ZdWFu
QGFtZC5jb20+Cj4gU2VudDogVGh1cnNkYXksIFNlcHRlbWJlciAyNiwgMjAxOSA0OjA4IFBNCj4g
VG86IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnIDxhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZz4KPiBDYzogYWxleGRldWNoZXJAZ21haWwuY29tIDxhbGV4ZGV1Y2hlckBnbWFpbC5j
b20+OyBZdWFuLCBYaWFvamllIDxYaWFvamllLll1YW5AYW1kLmNvbT4KPiBTdWJqZWN0OiBbUEFU
Q0hdIGRybS9hbWRncHUvZ21jMTA6IGFwcGx5IHRoZSAnaW52YWxpZGF0aW9uIGZyb20gc2RtYScg
d29ya2Fyb3VuZCBmb3IgbmF2aQo+Cj4gRml4ZXM6IDc2N2FjYWJkYWM4MSAoImRybS9hbWQvcG93
ZXJwbGF5OiBhZGQgYmFjbyBzbXUgcmVzZXQgZnVuY3Rpb24gZm9yIHNtdTExIikKPiBTaWduZWQt
b2ZmLWJ5OiBYaWFvamllIFl1YW4gPHhpYW9qaWUueXVhbkBhbWQuY29tPgo+IC0tLQo+ICBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYyB8IDEgKwo+ICAxIGZpbGUgY2hhbmdl
ZCwgMSBpbnNlcnRpb24oKykKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9nbWNfdjEwXzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192MTBfMC5j
Cj4gaW5kZXggY2IzZjYxODczYmFhLi5kYzJlNjhlMDE5ZWIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9nbWNfdjEwXzAuYwo+IEBAIC0yOTIsNiArMjkyLDcgQEAgc3RhdGljIHZvaWQg
Z21jX3YxMF8wX2ZsdXNoX2dwdV90bGIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQz
Ml90IHZtaWQsCj4KPiAgICAgICAgICBpZiAoIWFkZXYtPm1tYW4uYnVmZmVyX2Z1bmNzX2VuYWJs
ZWQgfHwKPiAgICAgICAgICAgICAgIWFkZXYtPmliX3Bvb2xfcmVhZHkgfHwKPiArICAgICAgICAg
ICAhKGFkZXYtPmFzaWNfdHlwZSA+PSBDSElQX05BVkkxMCAmJiBhZGV2LT5hc2ljX3R5cGUgPD0g
Q0hJUF9OQVZJMTIpIHx8Cj4gICAgICAgICAgICAgIGFkZXYtPmluX2dwdV9yZXNldCkgewo+ICAg
ICAgICAgICAgICAgICAgZ21jX3YxMF8wX2ZsdXNoX3ZtX2h1YihhZGV2LCB2bWlkLCBBTURHUFVf
R0ZYSFVCXzAsIDApOwo+ICAgICAgICAgICAgICAgICAgbXV0ZXhfdW5sb2NrKCZhZGV2LT5tbWFu
Lmd0dF93aW5kb3dfbG9jayk7Cj4gLS0KPiAyLjIwLjEKPgo+Cj4gX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBhbWQtZ2Z4IG1haWxpbmcgbGlzdAo+IGFt
ZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cj4KPgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2FtZC1nZng=
