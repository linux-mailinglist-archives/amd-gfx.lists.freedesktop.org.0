Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0DB0DE0CCB
	for <lists+amd-gfx@lfdr.de>; Tue, 22 Oct 2019 21:52:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 969666E8E4;
	Tue, 22 Oct 2019 19:52:31 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-DM3-obe.outbound.protection.outlook.com
 (mail-eopbgr800084.outbound.protection.outlook.com [40.107.80.84])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AFA216E8E4
 for <amd-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 19:52:29 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=QAwFBetTB0+8OqEoNrRu/E3lZgxIv0pF5Ecvn3pCMMQYpGdbOQEtSOVbNCZWYmu7CdfDuN/4cME3W5FWl9ZSehPypQxmJUQ0RyrLt4Tl5TjPquNLMxObI92tj3TvhXPbfhlGapsQj333Jvppta7HcgixuUQI5ivWkZro+T79BWt24MMhja2hBvsRkxwtEb71T5hH4e0AC3SZoaPkYSs3QOvI+2ETBg79XE1kdiw6aPqFyfYrKBBuYpX9fSb5rE44QfQcS6LCidKp+2ogN0yCNIIKHHCTPFkApvq+5Qb7xZX7OllX6Md/cFNmTfnu3KkVBPbx9fSecMz3aNPo/5JayQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=a5H6g+C4qEBW00gfYBqQEgzEEmr/I1IuGis5fyJPVg4=;
 b=OlqMnhlDJtl/PCreIoZtAkplAOQPfaPBRH+/lp8sFGXn+le5AXjzKZMdBOyL5aqp//jLUF1rV6sqopzb7q+7WEUUsORS2FV09cTnKJl5uuYXClKc2EKh4lFY4Q9U1jN+ZPVRuK58H1Y+SOPkn4/89q4MJ7dm0U/N1WgqIr+WCjfrSwTWvydgIUh0cF2TMhBDKERs02qZvVLnAkVb0uat6SbtbkmVe5tfPqCzdvDPI5h+oLAX5jcffRnUYN6LctrQdPKsJRTmtd9pgt3g/Tyr2ts+RYioGHViw7P1mbJHvltiX3ggtXRpjh2iv+PDHHm3eQrNS0ykxz9j+UdE9lFvvQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB4030.namprd12.prod.outlook.com (10.255.86.25) by
 MN2PR12MB3069.namprd12.prod.outlook.com (20.178.241.23) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2367.21; Tue, 22 Oct 2019 19:52:27 +0000
Received: from MN2PR12MB4030.namprd12.prod.outlook.com
 ([fe80::1ee:c734:15e5:d8b9]) by MN2PR12MB4030.namprd12.prod.outlook.com
 ([fe80::1ee:c734:15e5:d8b9%5]) with mapi id 15.20.2367.022; Tue, 22 Oct 2019
 19:52:27 +0000
From: "Yang, Philip" <Philip.Yang@amd.com>
To: "Kuehling, Felix" <Felix.Kuehling@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: Re: [PATCH v2] drm/amdkfd: don't use dqm lock during device
 reset/suspend/resume
Thread-Topic: [PATCH v2] drm/amdkfd: don't use dqm lock during device
 reset/suspend/resume
Thread-Index: AQHViQZ4XzhiW2lzAk+tGGEmnkv7NKdm/4QAgAAS4wA=
Date: Tue, 22 Oct 2019 19:52:27 +0000
Message-ID: <18a9fdde-29c2-caa9-3638-61deea615dc5@amd.com>
References: <20191022182804.23845-1-Philip.Yang@amd.com>
 <558b2dd3-8095-81e0-547b-788b74c9b329@amd.com>
In-Reply-To: <558b2dd3-8095-81e0-547b-788b74c9b329@amd.com>
Accept-Language: en-ZA, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: YT1PR01CA0020.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01::33)
 To MN2PR12MB4030.namprd12.prod.outlook.com
 (2603:10b6:208:159::25)
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [165.204.55.251]
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: 159154fa-6efd-4215-34a7-08d757295db1
x-ms-traffictypediagnostic: MN2PR12MB3069:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <MN2PR12MB30691398605A353C62DB5B9CE6680@MN2PR12MB3069.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:8273;
x-forefront-prvs: 01986AE76B
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(136003)(346002)(396003)(39860400002)(366004)(199004)(189003)(6436002)(6246003)(66946007)(31696002)(6512007)(66556008)(66476007)(86362001)(71200400001)(71190400001)(6486002)(14444005)(256004)(36756003)(64756008)(66066001)(66446008)(14454004)(25786009)(476003)(229853002)(486006)(478600001)(3846002)(6116002)(26005)(316002)(2501003)(2616005)(8936002)(4001150100001)(5660300002)(15650500001)(8676002)(186003)(7736002)(110136005)(446003)(11346002)(81166006)(99286004)(2906002)(52116002)(386003)(6506007)(53546011)(305945005)(76176011)(31686004)(30864003)(81156014)(102836004);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3069;
 H:MN2PR12MB4030.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: m8L+5V85GSLDcRJXTGZ4BYcugUGVydaEpjX5JODOec/zc6SEbnk9in91Jyy3dUTa50RCOLS35vR77cCsQ33QKqYg82MpMfVhlGLDjmCSyDjM3pD3mlBLmvidQ/mClqzVN/taRxwsB1/gS7HpX8YJG/ckmboeFIPwptPDeiYp9I2a4s+tqdLF8SOzAL9BxZi55tfOYlkOshAUCunSuw596v+cAjeQ3VKcxdb/r/6VeNhBiOtdT6LNsAkfN81dHsPqkIxKucdlAk5l3o2+lpScI0kAoo707pPZrQoeIU2XoQUWAKK1vzWf66kDhCif3UoeFynSLCbNFRMcQ+GsaNeYHTcOoT+rAWUd8jyyRi21L76sAmFHR+9yTNOPmHvlM7sdB5FK6dA8GMCT7Bdj8vVZrhFC/ah913MyINZbs++uFvoOR6QgXKjMDm9hIMoTp0RV
Content-ID: <B989DFA5CD1AA848BF4E09938DBDE667@namprd12.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 159154fa-6efd-4215-34a7-08d757295db1
X-MS-Exchange-CrossTenant-originalarrivaltime: 22 Oct 2019 19:52:27.6232 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: u8wxMpGRq93Lp4dor9q7ywjlWjjF0dvebZ7JTY4uzjW+ot3XunmKMKj9JkYCkUk2
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3069
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=a5H6g+C4qEBW00gfYBqQEgzEEmr/I1IuGis5fyJPVg4=;
 b=HjYMAOF0bL7yx8813wh4iuIUDQjuB9rDeNOSFOZi9FTxqJQ5iRQoMZVeaw+hQlZ/YJT/bGuikPcgOQORSJe8ZM5GpUOABRnYmhPqUTZCVOl1/MbOfBPnsKVmS7055dYmzdFJ/bwPI4axPAnRMk/ybhPQPQCAvDL/dxqBauweWp8=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Philip.Yang@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gMjAxOS0xMC0yMiAyOjQ0IHAubS4sIEt1ZWhsaW5nLCBGZWxpeCB3cm90ZToNCj4gT24gMjAx
OS0xMC0yMiAxNDoyOCwgWWFuZywgUGhpbGlwIHdyb3RlOg0KPj4gSWYgZGV2aWNlIHJlc2V0L3N1
c3BlbmQvcmVzdW1lIGZhaWxlZCBmb3Igc29tZSByZWFzb24sIGRxbSBsb2NrIGlzDQo+PiBob2xk
IGZvcmV2ZXIgYW5kIHRoaXMgY2F1c2VzIGRlYWRsb2NrLiBCZWxvdyBpcyBhIGtlcm5lbCBiYWNr
dHJhY2Ugd2hlbg0KPj4gYXBwbGljYXRpb24gb3BlbiBrZmQgYWZ0ZXIgc3VzcGVuZC9yZXN1bWUg
ZmFpbGVkLg0KPj4NCj4+IEluc3RlYWQgb2YgaG9sZGluZyBkcW0gbG9jayBpbiBwcmVfcmVzZXQg
YW5kIHJlbGVhc2luZyBkcW0gbG9jayBpbg0KPj4gcG9zdF9yZXNldCwgYWRkIGRxbS0+ZGV2aWNl
X3N0b3BwZWQgZmxhZyB3aGljaCBpcyBtb2RpZmllZCBpbg0KPj4gZHFtLT5vcHMuc3RhcnQgYW5k
IGRxbS0+b3BzLnN0b3AuIFRoZSBmbGFnIGRvZXNuJ3QgbmVlZCBsb2NrIHByb3RlY3Rpb24NCj4+
IGJlY2F1c2Ugd3JpdGUvcmVhZCBhcmUgYWxsIGluc2lkZSBkcW0gbG9jay4NCj4+DQo+PiBGb3Ig
SFdTIGNhc2UsIG1hcF9xdWV1ZXNfY3BzY2ggYW5kIHVubWFwX3F1ZXVlc19jcHNjaCBjaGVja3MN
Cj4+IGRldmljZV9zdG9wcGVkIGZsYWcgYmVmb3JlIHNlbmRpbmcgdGhlIHVwZGF0ZWQgcnVubGlz
dC4NCj4+DQo+PiB2MjogRm9yIG5vLUhXUyBjYXNlLCB3aGVuIGRldmljZSBpcyBzdG9wcGVkLCBk
b24ndCBjYWxsDQo+PiBsb2FkL2Rlc3Ryb3lfbXFkIGZvciBldmljdGlvbiwgcmVzdG9yZSBhbmQg
Y3JlYXRlIHF1ZXVlLCBhbmQgYXZvaWQNCj4+IGRlYnVnZnMgZHVtcCBoZHFzLg0KPj4NCj4+IEJh
Y2t0cmFjZSBvZiBkcW0gbG9jayBkZWFkbG9jazoNCj4+DQo+PiBbVGh1IE9jdCAxNyAxNjo0Mzoz
NyAyMDE5XSBJTkZPOiB0YXNrIHJvY21pbmZvOjMwMjQgYmxvY2tlZCBmb3IgbW9yZQ0KPj4gdGhh
biAxMjAgc2Vjb25kcy4NCj4+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldICAgICAgIE5vdCB0
YWludGVkDQo+PiA1LjAuMC1yYzEta2ZkLWNvbXB1dGUtcm9jbS1ka21zLW5vLW5waS0xMTMxICMx
DQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAiZWNobyAwID4NCj4+IC9wcm9jL3N5cy9r
ZXJuZWwvaHVuZ190YXNrX3RpbWVvdXRfc2VjcyIgZGlzYWJsZXMgdGhpcyBtZXNzYWdlLg0KPj4g
W1RodSBPY3QgMTcgMTY6NDM6MzcgMjAxOV0gcm9jbWluZm8gICAgICAgIEQgICAgMCAgMzAyNCAg
IDI5NDcNCj4+IDB4ODAwMDAwMDANCj4+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldIENhbGwg
VHJhY2U6DQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgPyBfX3NjaGVkdWxlKzB4M2Q5
LzB4OGEwDQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgc2NoZWR1bGUrMHgzMi8weDcw
DQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgc2NoZWR1bGVfcHJlZW1wdF9kaXNhYmxl
ZCsweGEvMHgxMA0KPj4gW1RodSBPY3QgMTcgMTY6NDM6MzcgMjAxOV0gIF9fbXV0ZXhfbG9jay5p
c3JhLjkrMHgxZTMvMHg0ZTANCj4+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldICA/IF9fY2Fs
bF9zcmN1KzB4MjY0LzB4M2IwDQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgPyBwcm9j
ZXNzX3Rlcm1pbmF0aW9uX2Nwc2NoKzB4MjQvMHgyZjANCj4+IFthbWRncHVdDQo+PiBbVGh1IE9j
dCAxNyAxNjo0MzozNyAyMDE5XSAgcHJvY2Vzc190ZXJtaW5hdGlvbl9jcHNjaCsweDI0LzB4MmYw
DQo+PiBbYW1kZ3B1XQ0KPj4gW1RodSBPY3QgMTcgMTY6NDM6MzcgMjAxOV0NCj4+IGtmZF9wcm9j
ZXNzX2RlcXVldWVfZnJvbV9hbGxfZGV2aWNlcysweDQyLzB4NjAgW2FtZGdwdV0NCj4+IFtUaHUg
T2N0IDE3IDE2OjQzOjM3IDIwMTldICBrZmRfcHJvY2Vzc19ub3RpZmllcl9yZWxlYXNlKzB4MWJl
LzB4MjIwDQo+PiBbYW1kZ3B1XQ0KPj4gW1RodSBPY3QgMTcgMTY6NDM6MzcgMjAxOV0gIF9fbW11
X25vdGlmaWVyX3JlbGVhc2UrMHgzZS8weGMwDQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5
XSAgZXhpdF9tbWFwKzB4MTYwLzB4MWEwDQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAg
PyBfX2hhbmRsZV9tbV9mYXVsdCsweGJhMy8weDEyMDANCj4+IFtUaHUgT2N0IDE3IDE2OjQzOjM3
IDIwMTldICA/IGV4aXRfcm9idXN0X2xpc3QrMHg1YS8weDExMA0KPj4gW1RodSBPY3QgMTcgMTY6
NDM6MzcgMjAxOV0gIG1tcHV0KzB4NGEvMHgxMjANCj4+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIw
MTldICBkb19leGl0KzB4Mjg0LzB4YjIwDQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAg
PyBoYW5kbGVfbW1fZmF1bHQrMHhmYS8weDIwMA0KPj4gW1RodSBPY3QgMTcgMTY6NDM6MzcgMjAx
OV0gIGRvX2dyb3VwX2V4aXQrMHgzYS8weGEwDQo+PiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5
XSAgX194NjRfc3lzX2V4aXRfZ3JvdXArMHgxNC8weDIwDQo+PiBbVGh1IE9jdCAxNyAxNjo0Mzoz
NyAyMDE5XSAgZG9fc3lzY2FsbF82NCsweDRmLzB4MTAwDQo+PiBbVGh1IE9jdCAxNyAxNjo0Mzoz
NyAyMDE5XSAgZW50cnlfU1lTQ0FMTF82NF9hZnRlcl9od2ZyYW1lKzB4NDQvMHhhOQ0KPj4NCj4+
IFN1Z2dlc3RlZC1ieTogRmVsaXggS3VlaGxpbmcgPEZlbGl4Lkt1ZWhsaW5nQGFtZC5jb20+DQo+
PiBTaWduZWQtb2ZmLWJ5OiBQaGlsaXAgWWFuZyA8UGhpbGlwLllhbmdAYW1kLmNvbT4NCj4gDQo+
IFRocmVlIG1vcmUgY29tbWVudHMgaW5saW5lLiBXaXRoIHRob3NlIGNvbW1lbnRzIGFkZHJlc3Nl
ZCwgdGhpcyBwYXRjaCBpcw0KPiANCj4gUmV2aWV3ZWQtYnk6IEZlbGl4IEt1ZWhsaW5nIDxGZWxp
eC5LdWVobGluZ0BhbWQuY29tPg0KPiANCj4gDQo+PiAtLS0NCj4+ICAgIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMgICAgICB8ICA2ICstLQ0KPj4gICAgZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZS5jICAgICAgIHwgIDUgLS0NCj4+ICAgIC4uLi9k
cm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuYyB8IDQ3ICsrKysrKysrKysr
KysrKysrLS0NCj4+ICAgIC4uLi9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFn
ZXIuaCB8ICAxICsNCj4+ICAgIDQgZmlsZXMgY2hhbmdlZCwgNDYgaW5zZXJ0aW9ucygrKSwgMTMg
ZGVsZXRpb25zKC0pDQo+Pg0KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
a2ZkL2tmZF9jaGFyZGV2LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfY2hhcmRl
di5jDQo+PiBpbmRleCBkOWUzNmRiZjEzZDUuLjQwZDc1YzM5ZjA4ZSAxMDA2NDQNCj4+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMNCj4+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMNCj4+IEBAIC0xMjAsMTMgKzEyMCwx
MyBAQCBzdGF0aWMgaW50IGtmZF9vcGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxl
ICpmaWxlcCkNCj4+ICAgIAkJcmV0dXJuIC1FUEVSTTsNCj4+ICAgIAl9DQo+PiAgICANCj4+ICsJ
aWYgKGtmZF9pc19sb2NrZWQoKSkNCj4+ICsJCXJldHVybiAtRUFHQUlOOw0KPj4gKw0KPj4gICAg
CXByb2Nlc3MgPSBrZmRfY3JlYXRlX3Byb2Nlc3MoZmlsZXApOw0KPj4gICAgCWlmIChJU19FUlIo
cHJvY2VzcykpDQo+PiAgICAJCXJldHVybiBQVFJfRVJSKHByb2Nlc3MpOw0KPj4gICAgDQo+PiAt
CWlmIChrZmRfaXNfbG9ja2VkKCkpDQo+PiAtCQlyZXR1cm4gLUVBR0FJTjsNCj4+IC0NCj4gDQo+
IElzIHRoaXMgcGFydCBvZiB0aGUgY2hhbmdlIHN0aWxsIG5lZWRlZD8gSSByZW1lbWJlciB0aGF0
IHRoaXMgc2VxdWVuY2UNCj4gd2FzIGEgYml0IHRyaWNreSB3aXRoIHNvbWUgcG90ZW50aWFsIHJh
Y2UgY29uZGl0aW9uIHdoZW4gU2hhb3l1biB3YXMNCj4gd29ya2luZyBvbiBpdC4gVGhpcyBtYXkg
aGF2ZSB1bmludGVuZGVkIHNpZGUgZWZmZWN0cy4NCj4gDQo+IA0KUmV2ZXJ0IHRoaXMgY2hhbmdl
IHRvIGJlIHNhZmUsIGl0IGlzIG5vdCBuZWVkZWQgYW5kIG5vdCBjbGVhciBpZiB0aGVyZSANCmFy
ZSBzaWRlIGVmZmVjdHMuDQoNCj4+ICAgIAlkZXZfZGJnKGtmZF9kZXZpY2UsICJwcm9jZXNzICVk
IG9wZW5lZCwgY29tcGF0IG1vZGUgKDMyIGJpdCkgLSAlZFxuIiwNCj4+ICAgIAkJcHJvY2Vzcy0+
cGFzaWQsIHByb2Nlc3MtPmlzXzMyYml0X3VzZXJfbW9kZSk7DQo+PiAgICANCj4+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlLmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlLmMNCj4+IGluZGV4IDhmNGIyNGU4NDk2NC4uNGZh
ODgzNGNlN2NiIDEwMDY0NA0KPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2Zk
X2RldmljZS5jDQo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNl
LmMNCj4+IEBAIC03MzAsOSArNzMwLDYgQEAgaW50IGtnZDJrZmRfcHJlX3Jlc2V0KHN0cnVjdCBr
ZmRfZGV2ICprZmQpDQo+PiAgICAJCXJldHVybiAwOw0KPj4gICAgCWtnZDJrZmRfc3VzcGVuZChr
ZmQpOw0KPj4gICAgDQo+PiAtCS8qIGhvbGQgZHFtLT5sb2NrIHRvIHByZXZlbnQgZnVydGhlciBl
eGVjdXRpb24qLw0KPj4gLQlkcW1fbG9jayhrZmQtPmRxbSk7DQo+PiAtDQo+PiAgICAJa2ZkX3Np
Z25hbF9yZXNldF9ldmVudChrZmQpOw0KPj4gICAgCXJldHVybiAwOw0KPj4gICAgfQ0KPj4gQEAg
LTc1MCw4ICs3NDcsNiBAQCBpbnQga2dkMmtmZF9wb3N0X3Jlc2V0KHN0cnVjdCBrZmRfZGV2ICpr
ZmQpDQo+PiAgICAJaWYgKCFrZmQtPmluaXRfY29tcGxldGUpDQo+PiAgICAJCXJldHVybiAwOw0K
Pj4gICAgDQo+PiAtCWRxbV91bmxvY2soa2ZkLT5kcW0pOw0KPj4gLQ0KPj4gICAgCXJldCA9IGtm
ZF9yZXN1bWUoa2ZkKTsNCj4+ICAgIAlpZiAocmV0KQ0KPj4gICAgCQlyZXR1cm4gcmV0Ow0KPj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVf
bWFuYWdlci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9t
YW5hZ2VyLmMNCj4+IGluZGV4IDgxZmI1NDVjZjQyYy4uODJlMWM2MjgwZDEzIDEwMDY0NA0KPj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2Vy
LmMNCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVf
bWFuYWdlci5jDQo+PiBAQCAtMzQwLDYgKzM0MCwxMCBAQCBzdGF0aWMgaW50IGNyZWF0ZV9xdWV1
ZV9ub2Nwc2NoKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtLA0KPj4gICAgCW1xZF9t
Z3ItPmluaXRfbXFkKG1xZF9tZ3IsICZxLT5tcWQsIHEtPm1xZF9tZW1fb2JqLA0KPj4gICAgCQkJ
CSZxLT5nYXJ0X21xZF9hZGRyLCAmcS0+cHJvcGVydGllcyk7DQo+PiAgICAJaWYgKHEtPnByb3Bl
cnRpZXMuaXNfYWN0aXZlKSB7DQo+PiArCQlpZiAoIWRxbS0+c2NoZWRfcnVubmluZykgew0KPj4g
KwkJCVdBUk5fT05DRSgxLCAiTG9hZCBub24tSFdTIG1xZCB3aGlsZSBzdG9wcGVkXG4iKTsNCj4+
ICsJCQlnb3RvIGFkZF9xdWV1ZV90b19saXN0Ow0KPj4gKwkJfQ0KPj4gICAgDQo+PiAgICAJCWlm
IChXQVJOKHEtPnByb2Nlc3MtPm1tICE9IGN1cnJlbnQtPm1tLA0KPj4gICAgCQkJCQkic2hvdWxk
IG9ubHkgcnVuIGluIHVzZXIgdGhyZWFkIikpDQo+PiBAQCAtMzUxLDYgKzM1NSw3IEBAIHN0YXRp
YyBpbnQgY3JlYXRlX3F1ZXVlX25vY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpk
cW0sDQo+PiAgICAJCQlnb3RvIG91dF9mcmVlX21xZDsNCj4+ICAgIAl9DQo+PiAgICANCj4+ICth
ZGRfcXVldWVfdG9fbGlzdDoNCj4+ICAgIAlsaXN0X2FkZCgmcS0+bGlzdCwgJnFwZC0+cXVldWVz
X2xpc3QpOw0KPj4gICAgCXFwZC0+cXVldWVfY291bnQrKzsNCj4+ICAgIAlpZiAocS0+cHJvcGVy
dGllcy5pc19hY3RpdmUpDQo+PiBAQCAtNDU4LDYgKzQ2MywxMSBAQCBzdGF0aWMgaW50IGRlc3Ry
b3lfcXVldWVfbm9jcHNjaF9sb2NrZWQoc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0s
DQo+PiAgICANCj4+ICAgIAlkZWFsbG9jYXRlX2Rvb3JiZWxsKHFwZCwgcSk7DQo+PiAgICANCj4+
ICsJaWYgKCFkcW0tPnNjaGVkX3J1bm5pbmcpIHsNCj4+ICsJCVdBUk5fT05DRSgxLCAiRGVzdHJv
eSBub24tSFdTIHF1ZXVlIHdoaWxlIHN0b3BwZWRcbiIpOw0KPj4gKwkJcmV0dXJuIDA7DQo+PiAr
CX0NCj4+ICsNCj4+ICAgIAlyZXR2YWwgPSBtcWRfbWdyLT5kZXN0cm95X21xZChtcWRfbWdyLCBx
LT5tcWQsDQo+PiAgICAJCQkJS0ZEX1BSRUVNUFRfVFlQRV9XQVZFRlJPTlRfUkVTRVQsDQo+PiAg
ICAJCQkJS0ZEX1VOTUFQX0xBVEVOQ1lfTVMsDQo+PiBAQCAtNTMzLDYgKzU0MywxMiBAQCBzdGF0
aWMgaW50IHVwZGF0ZV9xdWV1ZShzdHJ1Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRxbSwgc3Ry
dWN0IHF1ZXVlICpxKQ0KPj4gICAgCQkgICAocS0+cHJvcGVydGllcy50eXBlID09IEtGRF9RVUVV
RV9UWVBFX0NPTVBVVEUgfHwNCj4+ICAgIAkJICAgIHEtPnByb3BlcnRpZXMudHlwZSA9PSBLRkRf
UVVFVUVfVFlQRV9TRE1BIHx8DQo+PiAgICAJCSAgICBxLT5wcm9wZXJ0aWVzLnR5cGUgPT0gS0ZE
X1FVRVVFX1RZUEVfU0RNQV9YR01JKSkgew0KPj4gKw0KPj4gKwkJaWYgKCFkcW0tPnNjaGVkX3J1
bm5pbmcpIHsNCj4+ICsJCQlXQVJOX09OQ0UoMSwgIlVwZGF0ZSBub24tSFdTIHF1ZXVlIHdoaWxl
IHN0b3BwZWRcbiIpOw0KPj4gKwkJCWdvdG8gb3V0X3VubG9jazsNCj4+ICsJCX0NCj4+ICsNCj4+
ICAgIAkJcmV0dmFsID0gbXFkX21nci0+ZGVzdHJveV9tcWQobXFkX21nciwgcS0+bXFkLA0KPj4g
ICAgCQkJCUtGRF9QUkVFTVBUX1RZUEVfV0FWRUZST05UX0RSQUlOLA0KPj4gICAgCQkJCUtGRF9V
Tk1BUF9MQVRFTkNZX01TLCBxLT5waXBlLCBxLT5xdWV1ZSk7DQo+PiBAQCAtNjAyLDYgKzYxOCwx
MSBAQCBzdGF0aWMgaW50IGV2aWN0X3Byb2Nlc3NfcXVldWVzX25vY3BzY2goc3RydWN0IGRldmlj
ZV9xdWV1ZV9tYW5hZ2VyICpkcW0sDQo+PiAgICAJCW1xZF9tZ3IgPSBkcW0tPm1xZF9tZ3JzW2dl
dF9tcWRfdHlwZV9mcm9tX3F1ZXVlX3R5cGUoDQo+PiAgICAJCQkJcS0+cHJvcGVydGllcy50eXBl
KV07DQo+PiAgICAJCXEtPnByb3BlcnRpZXMuaXNfYWN0aXZlID0gZmFsc2U7DQo+PiArCQlkcW0t
PnF1ZXVlX2NvdW50LS07DQo+PiArDQo+PiArCQlpZiAoIWRxbS0+c2NoZWRfcnVubmluZykNCj4+
ICsJCQljb250aW51ZTsNCj4gDQo+IEFkZCBhIFdBUk4gaGVyZSBhcyB3ZWxsLiBXaGVuIHRoZSBz
Y2hlZHVsZXIgaXMgbm90IHJ1bm5pbmcgdGhlIHF1ZXVlcw0KPiBzaG91bGQgYWxyZWFkeSBiZSBl
dmljdGVkLg0KPg0KRG9uZQ0KDQo+IA0KPj4gKw0KPj4gICAgCQlyZXR2YWwgPSBtcWRfbWdyLT5k
ZXN0cm95X21xZChtcWRfbWdyLCBxLT5tcWQsDQo+PiAgICAJCQkJS0ZEX1BSRUVNUFRfVFlQRV9X
QVZFRlJPTlRfRFJBSU4sDQo+PiAgICAJCQkJS0ZEX1VOTUFQX0xBVEVOQ1lfTVMsIHEtPnBpcGUs
IHEtPnF1ZXVlKTsNCj4+IEBAIC02MTAsNyArNjMxLDYgQEAgc3RhdGljIGludCBldmljdF9wcm9j
ZXNzX3F1ZXVlc19ub2Nwc2NoKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtLA0KPj4g
ICAgCQkJICogbWFpbnRhaW4gYSBjb25zaXN0ZW50IGV2aWN0aW9uIHN0YXRlDQo+PiAgICAJCQkg
Ki8NCj4+ICAgIAkJCXJldCA9IHJldHZhbDsNCj4+IC0JCWRxbS0+cXVldWVfY291bnQtLTsNCj4+
ICAgIAl9DQo+PiAgICANCj4+ICAgIG91dDoNCj4+IEBAIC03MTEsNiArNzMxLDExIEBAIHN0YXRp
YyBpbnQgcmVzdG9yZV9wcm9jZXNzX3F1ZXVlc19ub2Nwc2NoKHN0cnVjdCBkZXZpY2VfcXVldWVf
bWFuYWdlciAqZHFtLA0KPj4gICAgCQltcWRfbWdyID0gZHFtLT5tcWRfbWdyc1tnZXRfbXFkX3R5
cGVfZnJvbV9xdWV1ZV90eXBlKA0KPj4gICAgCQkJCXEtPnByb3BlcnRpZXMudHlwZSldOw0KPj4g
ICAgCQlxLT5wcm9wZXJ0aWVzLmlzX2FjdGl2ZSA9IHRydWU7DQo+PiArCQlkcW0tPnF1ZXVlX2Nv
dW50Kys7DQo+PiArDQo+PiArCQlpZiAoIWRxbS0+c2NoZWRfcnVubmluZykNCj4+ICsJCQljb250
aW51ZTsNCj4gDQo+IEFkZCBhIFdBUk4gaGVyZSBhcyB3ZWxsLiBUaGlzIHNob3VsZCBub3QgaGFw
cGVuIHdoaWxlIHdlJ3JlIHN1c3BlbmRlZC4NCj4gDQpEb25lLg0KDQo+IFJlZ2FyZHMsDQo+ICAg
wqAgRmVsaXgNCj4gDQo+PiArDQo+PiAgICAJCXJldHZhbCA9IG1xZF9tZ3ItPmxvYWRfbXFkKG1x
ZF9tZ3IsIHEtPm1xZCwgcS0+cGlwZSwNCj4+ICAgIAkJCQkgICAgICAgcS0+cXVldWUsICZxLT5w
cm9wZXJ0aWVzLCBtbSk7DQo+PiAgICAJCWlmIChyZXR2YWwgJiYgIXJldCkNCj4+IEBAIC03MTgs
NyArNzQzLDYgQEAgc3RhdGljIGludCByZXN0b3JlX3Byb2Nlc3NfcXVldWVzX25vY3BzY2goc3Ry
dWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0sDQo+PiAgICAJCQkgKiBtYWludGFpbiBhIGNv
bnNpc3RlbnQgZXZpY3Rpb24gc3RhdGUNCj4+ICAgIAkJCSAqLw0KPj4gICAgCQkJcmV0ID0gcmV0
dmFsOw0KPj4gLQkJZHFtLT5xdWV1ZV9jb3VudCsrOw0KPj4gICAgCX0NCj4+ICAgIAlxcGQtPmV2
aWN0ZWQgPSAwOw0KPj4gICAgb3V0Og0KPj4gQEAgLTkxNSw3ICs5MzksOCBAQCBzdGF0aWMgaW50
IHN0YXJ0X25vY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0pDQo+PiAgICAJ
DQo+PiAgICAJaWYgKGRxbS0+ZGV2LT5kZXZpY2VfaW5mby0+YXNpY19mYW1pbHkgPT0gQ0hJUF9I
QVdBSUkpDQo+PiAgICAJCXJldHVybiBwbV9pbml0KCZkcW0tPnBhY2tldHMsIGRxbSk7DQo+PiAt
CQ0KPj4gKwlkcW0tPnNjaGVkX3J1bm5pbmcgPSB0cnVlOw0KPj4gKw0KPj4gICAgCXJldHVybiAw
Ow0KPj4gICAgfQ0KPj4gICAgDQo+PiBAQCAtOTIzLDcgKzk0OCw4IEBAIHN0YXRpYyBpbnQgc3Rv
cF9ub2Nwc2NoKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtKQ0KPj4gICAgew0KPj4g
ICAgCWlmIChkcW0tPmRldi0+ZGV2aWNlX2luZm8tPmFzaWNfZmFtaWx5ID09IENISVBfSEFXQUlJ
KQ0KPj4gICAgCQlwbV91bmluaXQoJmRxbS0+cGFja2V0cyk7DQo+PiAtCQ0KPj4gKwlkcW0tPnNj
aGVkX3J1bm5pbmcgPSBmYWxzZTsNCj4+ICsNCj4+ICAgIAlyZXR1cm4gMDsNCj4+ICAgIH0NCj4+
ICAgIA0KPj4gQEAgLTEwNzQsNiArMTEwMCw3IEBAIHN0YXRpYyBpbnQgc3RhcnRfY3BzY2goc3Ry
dWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0pDQo+PiAgICAJZHFtX2xvY2soZHFtKTsNCj4+
ICAgIAkvKiBjbGVhciBoYW5nIHN0YXR1cyB3aGVuIGRyaXZlciB0cnkgdG8gc3RhcnQgdGhlIGh3
IHNjaGVkdWxlciAqLw0KPj4gICAgCWRxbS0+aXNfaHdzX2hhbmcgPSBmYWxzZTsNCj4+ICsJZHFt
LT5zY2hlZF9ydW5uaW5nID0gdHJ1ZTsNCj4+ICAgIAlleGVjdXRlX3F1ZXVlc19jcHNjaChkcW0s
IEtGRF9VTk1BUF9RVUVVRVNfRklMVEVSX0RZTkFNSUNfUVVFVUVTLCAwKTsNCj4+ICAgIAlkcW1f
dW5sb2NrKGRxbSk7DQo+PiAgICANCj4+IEBAIC0xMDg5LDYgKzExMTYsNyBAQCBzdGF0aWMgaW50
IHN0b3BfY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0pDQo+PiAgICB7DQo+
PiAgICAJZHFtX2xvY2soZHFtKTsNCj4+ICAgIAl1bm1hcF9xdWV1ZXNfY3BzY2goZHFtLCBLRkRf
VU5NQVBfUVVFVUVTX0ZJTFRFUl9BTExfUVVFVUVTLCAwKTsNCj4+ICsJZHFtLT5zY2hlZF9ydW5u
aW5nID0gZmFsc2U7DQo+PiAgICAJZHFtX3VubG9jayhkcW0pOw0KPj4gICAgDQo+PiAgICAJa2Zk
X2d0dF9zYV9mcmVlKGRxbS0+ZGV2LCBkcW0tPmZlbmNlX21lbSk7DQo+PiBAQCAtMTI3NSw5ICsx
MzAzLDEwIEBAIHN0YXRpYyBpbnQgbWFwX3F1ZXVlc19jcHNjaChzdHJ1Y3QgZGV2aWNlX3F1ZXVl
X21hbmFnZXIgKmRxbSkNCj4+ICAgIHsNCj4+ICAgIAlpbnQgcmV0dmFsOw0KPj4gICAgDQo+PiAr
CWlmICghZHFtLT5zY2hlZF9ydW5uaW5nKQ0KPj4gKwkJcmV0dXJuIDA7DQo+PiAgICAJaWYgKGRx
bS0+cXVldWVfY291bnQgPD0gMCB8fCBkcW0tPnByb2Nlc3Nlc19jb3VudCA8PSAwKQ0KPj4gICAg
CQlyZXR1cm4gMDsNCj4+IC0NCj4+ICAgIAlpZiAoZHFtLT5hY3RpdmVfcnVubGlzdCkNCj4+ICAg
IAkJcmV0dXJuIDA7DQo+PiAgICANCj4+IEBAIC0xMjk5LDYgKzEzMjgsOCBAQCBzdGF0aWMgaW50
IHVubWFwX3F1ZXVlc19jcHNjaChzdHJ1Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRxbSwNCj4+
ICAgIHsNCj4+ICAgIAlpbnQgcmV0dmFsID0gMDsNCj4+ICAgIA0KPj4gKwlpZiAoIWRxbS0+c2No
ZWRfcnVubmluZykNCj4+ICsJCXJldHVybiAwOw0KPj4gICAgCWlmIChkcW0tPmlzX2h3c19oYW5n
KQ0KPj4gICAgCQlyZXR1cm4gLUVJTzsNCj4+ICAgIAlpZiAoIWRxbS0+YWN0aXZlX3J1bmxpc3Qp
DQo+PiBAQCAtMTkwMyw2ICsxOTM0LDEyIEBAIGludCBkcW1fZGVidWdmc19ocWRzKHN0cnVjdCBz
ZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkNCj4+ICAgIAlpbnQgcGlwZSwgcXVldWU7DQo+PiAgICAJ
aW50IHIgPSAwOw0KPj4gICAgDQo+PiArCWlmICghZHFtLT5zY2hlZF9ydW5uaW5nKSB7DQo+PiAr
CQlzZXFfcHJpbnRmKG0sICIgRGV2aWNlIGlzIHN0b3BwZWRcbiIpOw0KPj4gKw0KPj4gKwkJcmV0
dXJuIDA7DQo+PiArCX0NCj4+ICsNCj4+ICAgIAlyID0gZHFtLT5kZXYtPmtmZDJrZ2QtPmhxZF9k
dW1wKGRxbS0+ZGV2LT5rZ2QsDQo+PiAgICAJCQkJCUtGRF9DSUtfSElRX1BJUEUsIEtGRF9DSUtf
SElRX1FVRVVFLA0KPj4gICAgCQkJCQkmZHVtcCwgJm5fcmVncyk7DQo+PiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2VyLmggYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuaA0KPj4g
aW5kZXggMmVhZWE2YjA0Y2JlLi5hOGMzN2U2ZGEwMjcgMTAwNjQ0DQo+PiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuaA0KPj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2VyLmgNCj4+
IEBAIC0yMDEsNiArMjAxLDcgQEAgc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyIHsNCj4+ICAg
IAlib29sCQkJaXNfaHdzX2hhbmc7DQo+PiAgICAJc3RydWN0IHdvcmtfc3RydWN0CWh3X2V4Y2Vw
dGlvbl93b3JrOw0KPj4gICAgCXN0cnVjdCBrZmRfbWVtX29iagloaXFfc2RtYV9tcWQ7DQo+PiAr
CWJvb2wJCQlzY2hlZF9ydW5uaW5nOw0KPj4gICAgfTsNCj4+ICAgIA0KPj4gICAgdm9pZCBkZXZp
Y2VfcXVldWVfbWFuYWdlcl9pbml0X2NpaygNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vYW1kLWdmeA==
