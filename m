Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3272A1669B
	for <lists+amd-gfx@lfdr.de>; Tue,  7 May 2019 17:24:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C6E3E6E7E5;
	Tue,  7 May 2019 15:24:16 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-BY2-obe.outbound.protection.outlook.com
 (mail-eopbgr780077.outbound.protection.outlook.com [40.107.78.77])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 343A96E7E4
 for <amd-gfx@lists.freedesktop.org>; Tue,  7 May 2019 15:24:15 +0000 (UTC)
Received: from CY4PR1201MB0102.namprd12.prod.outlook.com (10.172.77.148) by
 CY4PR1201MB0183.namprd12.prod.outlook.com (10.174.52.9) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1856.12; Tue, 7 May 2019 15:24:13 +0000
Received: from CY4PR1201MB0102.namprd12.prod.outlook.com
 ([fe80::e1ec:c86a:e5a1:eb2e]) by CY4PR1201MB0102.namprd12.prod.outlook.com
 ([fe80::e1ec:c86a:e5a1:eb2e%6]) with mapi id 15.20.1856.012; Tue, 7 May 2019
 15:24:13 +0000
From: "Zhu, James" <James.Zhu@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 2/2] drm/amdgpu: add gfx9 gpr EDC workaround when RAS is
 enabled
Thread-Topic: [PATCH 2/2] drm/amdgpu: add gfx9 gpr EDC workaround when RAS is
 enabled
Thread-Index: AQHVBOjtBxbv254iWkOQZlpYk+jdnQ==
Date: Tue, 7 May 2019 15:24:13 +0000
Message-ID: <1557242645-26716-2-git-send-email-James.Zhu@amd.com>
References: <1557242645-26716-1-git-send-email-James.Zhu@amd.com>
In-Reply-To: <1557242645-26716-1-git-send-email-James.Zhu@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: YTOPR0101CA0072.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b00:14::49) To CY4PR1201MB0102.namprd12.prod.outlook.com
 (2603:10b6:910:1b::20)
x-originating-ip: [165.204.55.251]
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.7.4
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 4181c020-1025-4c3d-31f9-08d6d3000f09
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600141)(711020)(4605104)(4618075)(2017052603328)(7193020);
 SRVR:CY4PR1201MB0183; 
x-ms-traffictypediagnostic: CY4PR1201MB0183:
x-microsoft-antispam-prvs: <CY4PR1201MB0183A453562BF7883541D7EBE4310@CY4PR1201MB0183.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:8882;
x-forefront-prvs: 0030839EEE
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(376002)(346002)(396003)(136003)(39860400002)(366004)(199004)(189003)(476003)(11346002)(6512007)(99286004)(72206003)(2616005)(54906003)(53936002)(14444005)(256004)(7736002)(305945005)(486006)(86362001)(6916009)(71190400001)(50226002)(4326008)(14454004)(25786009)(71200400001)(76176011)(81166006)(186003)(26005)(102836004)(36756003)(386003)(6506007)(81156014)(2906002)(30864003)(446003)(66476007)(64756008)(66446008)(478600001)(2501003)(66556008)(2351001)(3846002)(6486002)(6436002)(66946007)(52116002)(68736007)(5660300002)(6116002)(316002)(8936002)(8676002)(5640700003)(73956011)(66066001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:CY4PR1201MB0183;
 H:CY4PR1201MB0102.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: h759fdEe16zdXF+wcf3B/UTIyCLiK9KPNQYaTwKCSDfVKaXaKOUiTSuy4HC7Hsg8iwGfB1xkRVNjAKvur1FadaalOgz1svIZpAWYmceYKLZKPaM2Vvb3ObsIDkH1opZWlIuI2L8Wn26dZLWDRJXipv6AahageWQHXR3LP8x0bjYolH9T4keBSPMC8Bhv4wJPPb/HTAovSgA/PjaTldx+IP19W02u10bkjDsJDhM3cJ//YwxcspfIPO2X8JR3cJmkwbkKXElMxw4QdwjfgZn3+EC2GNmUEm6hhsAPqn4oZZIYrtgC95cd1cGdc+Qf70E4vd62yDWZkwmHHTX4Sg8LHuOUa6vXog/Ni4nuYhTdT8FdXXzU7yLxgoupKymbwmwFcZHJfBwL2b/ZhCtlXhDfmfJyjBLXPmkM9tl5WXRi8ec=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 4181c020-1025-4c3d-31f9-08d6d3000f09
X-MS-Exchange-CrossTenant-originalarrivaltime: 07 May 2019 15:24:13.3902 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CY4PR1201MB0183
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amd-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=uPGaHcyPFmMQpIaupY+XNG59g1yo8MtcU/Jodu97JRo=;
 b=K98+A039RbebO941qni/9u8+Oi4Ezm8jYgEJHzi4TLnZvg+3TqkHKWr1H2ZCVYcl/uMBeltLiDGPknSPesxJyFOKdg140ZMlGdXL8VkCq95mRKXMZR3gsc7Sl5dGBH1/AvgvpEMLaye20/Uuvz9n0n1BUIC2t+bPPxqkn15Oaks=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=James.Zhu@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Shamis, Leonid" <Leonid.Shamis@amd.com>, "Zhu, James" <James.Zhu@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

V2hlbiBSQVMgaXMgZW5hYmxlZCwgaW5pdGlhbGl6ZXMgdGhlIFZHUFJzL0xEUy9TR1BScyBhbmQN
CnJlc2V0cyBFREMgZXJyb3IgY291bnRzLiBUaGlzIGlzIGRvbmUgaW4gbGF0ZV9pbml0LCBiZWZv
cmUNClJBUyBUQSBHRlggZW5hYmxlLg0KDQpTaWduZWQtb2ZmLWJ5OiBKYW1lcyBaaHUgPEphbWVz
LlpodUBhbWQuY29tPg0KUmV2aWV3ZWQtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNo
ZXJAYW1kLmNvbT4NCi0tLQ0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMg
fCAyNDUgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L3NvYzE1LmggICAgfCAgMTAgKysNCiAyIGZpbGVzIGNoYW5nZWQsIDI1NSBp
bnNlcnRpb25zKCspDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
ZnhfdjlfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYw0KaW5kZXgg
YmE2N2QxMC4uMTRlNjcxZCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2dmeF92OV8wLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMN
CkBAIC0zNCw2ICszNCw3IEBADQogI2luY2x1ZGUgInZlZ2ExMF9lbnVtLmgiDQogI2luY2x1ZGUg
ImhkcC9oZHBfNF8wX29mZnNldC5oIg0KIA0KKyNpbmNsdWRlICJzb2MxNS5oIg0KICNpbmNsdWRl
ICJzb2MxNV9jb21tb24uaCINCiAjaW5jbHVkZSAiY2xlYXJzdGF0ZV9nZng5LmgiDQogI2luY2x1
ZGUgInY5X3N0cnVjdHMuaCINCkBAIC0zNTI5LDYgKzM1MzAsMjQ1IEBAIHN0YXRpYyB2b2lkIGdm
eF92OV8wX3JpbmdfZW1pdF9nZHNfc3dpdGNoKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywNCiAJ
CQkJICAgKDEgPDwgKG9hX3NpemUgKyBvYV9iYXNlKSkgLSAoMSA8PCBvYV9iYXNlKSk7DQogfQ0K
IA0KK3N0YXRpYyBjb25zdCB1MzIgdmdwcl9pbml0X2NvbXB1dGVfc2hhZGVyW10gPQ0KK3sNCisJ
MHhiMDdjMDAwMCwgMHhiZTgwMDBmZiwNCisJMHgwMDAwMDBmOCwgMHhiZjExMDgwMCwNCisJMHg3
ZTAwMDI4MCwgMHg3ZTAyMDI4MCwNCisJMHg3ZTA0MDI4MCwgMHg3ZTA2MDI4MCwNCisJMHg3ZTA4
MDI4MCwgMHg3ZTBhMDI4MCwNCisJMHg3ZTBjMDI4MCwgMHg3ZTBlMDI4MCwNCisJMHg4MDgwODgw
MCwgMHhiZTgwMzIwMCwNCisJMHhiZjg0ZmZmNSwgMHhiZjljMDAwMCwNCisJMHhkMjhjMDAwMSwg
MHgwMDAxMDA3ZiwNCisJMHhkMjhkMDAwMSwgMHgwMDAyMDI3ZSwNCisJMHgxMDAyMDI4OCwgMHhi
ODgxMDkwNCwNCisJMHhiNzgxNDAwMCwgMHhkMTE5NmEwMSwNCisJMHgwMDAwMDMwMSwgMHhiZTgw
MDA4NywNCisJMHhiZWZjMDBjMSwgMHhkODljNDAwMCwNCisJMHgwMDAyMDIwMSwgMHhkODljYzA4
MCwNCisJMHgwMDA0MDQwMSwgMHgzMjAyMDJmZiwNCisJMHgwMDAwMDgwMCwgMHg4MDgwODEwMCwN
CisJMHhiZjg0ZmZmOCwgMHg3ZTAyMDI4MCwNCisJMHhiZjgxMDAwMCwgMHgwMDAwMDAwMCwNCit9
Ow0KKw0KK3N0YXRpYyBjb25zdCB1MzIgc2dwcl9pbml0X2NvbXB1dGVfc2hhZGVyW10gPQ0KK3sN
CisJMHhiMDdjMDAwMCwgMHhiZTgwMDBmZiwNCisJMHgwMDAwMDA1ZiwgMHhiZWU1MDA4MCwNCisJ
MHhiZTgxMmM2NSwgMHhiZTgyMmM2NSwNCisJMHhiZTgzMmM2NSwgMHhiZTg0MmM2NSwNCisJMHhi
ZTg1MmM2NSwgMHhiNzdjMDAwNSwNCisJMHg4MDgwODUwMCwgMHhiZjg0ZmZmOCwNCisJMHhiZTgw
MDA4MCwgMHhiZjgxMDAwMCwNCit9Ow0KKw0KK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgc29jMTVfcmVn
X2VudHJ5IHZncHJfaW5pdF9yZWdzW10gPSB7DQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAs
IG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0UwKSwgMHhmZmZmZmZmZiB9LA0KKyAgIHsg
U09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9NR01UX1NFMSks
IDB4ZmZmZmZmZmYgfSwNCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01QVVRFX1NU
QVRJQ19USFJFQURfTUdNVF9TRTIpLCAweGZmZmZmZmZmIH0sDQorICAgeyBTT0MxNV9SRUdfRU5U
UlkoR0MsIDAsIG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0UzKSwgMHhmZmZmZmZmZiB9
LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfUkVTT1VSQ0VfTElNSVRT
KSwgMHgxMDAwMDAwIH0sIC8qIENVX0dST1VQX0NPVU5UPTEgKi8NCisgICB7IFNPQzE1X1JFR19F
TlRSWShHQywgMCwgbW1DT01QVVRFX05VTV9USFJFQURfWCksIDI1NioyIH0sDQorICAgeyBTT0Mx
NV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9OVU1fVEhSRUFEX1kpLCAxIH0sDQorICAgeyBT
T0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9OVU1fVEhSRUFEX1opLCAxIH0sDQorICAg
eyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9QR01fUlNSQzEpLCAweDEwMDAwN2Yg
fSwgLyogVkdQUlM9MTUgKDI1NiBsb2dpY2FsIFZHUFJzLCBTR1BSUz0xICgxNiBTR1BScywgQlVM
S1k9MSAqLw0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfUEdNX1JTUkMy
KSwgMHg0MDAwMDAgfSwgIC8qIDY0S0IgTERTICovDQorfTsNCisNCitzdGF0aWMgY29uc3Qgc3Ry
dWN0IHNvYzE1X3JlZ19lbnRyeSBzZ3ByX2luaXRfcmVnc1tdID0gew0KKyAgIHsgU09DMTVfUkVH
X0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9NR01UX1NFMCksIDB4ZmZmZmZm
ZmYgfSwNCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01QVVRFX1NUQVRJQ19USFJF
QURfTUdNVF9TRTEpLCAweGZmZmZmZmZmIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAs
IG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0UyKSwgMHhmZmZmZmZmZiB9LA0KKyAgIHsg
U09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9NR01UX1NFMyks
IDB4ZmZmZmZmZmYgfSwNCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01QVVRFX1JF
U09VUkNFX0xJTUlUUyksIDB4MTAwMDAwMCB9LCAvKiBDVV9HUk9VUF9DT1VOVD0xICovDQorICAg
eyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9OVU1fVEhSRUFEX1gpLCAyNTYqMiB9
LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfTlVNX1RIUkVBRF9ZKSwg
MSB9LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfTlVNX1RIUkVBRF9a
KSwgMSB9LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfUEdNX1JTUkMx
KSwgMHgzNDAgfSwgLyogU0dQUlM9MTMgKDExMiBHUFJTKSAqLw0KKyAgIHsgU09DMTVfUkVHX0VO
VFJZKEdDLCAwLCBtbUNPTVBVVEVfUEdNX1JTUkMyKSwgMHgwIH0sDQorfTsNCisNCitzdGF0aWMg
Y29uc3Qgc3RydWN0IHNvYzE1X3JlZ19lbnRyeSBzZWNfZGVkX2NvdW50ZXJfcmVnaXN0ZXJzW10g
PSB7DQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ1BDX0VEQ19TQ1JBVENIX0NOVCkg
fSwNCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DUENfRURDX1VDT0RFX0NOVCkgfSwN
CisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DUEZfRURDX1JPUV9DTlQpIH0sDQorICAg
eyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ1BGX0VEQ19UQUdfQ05UKSB9LA0KKyAgIHsgU09D
MTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNQR19FRENfRE1BX0NOVCkgfSwNCisgICB7IFNPQzE1X1JF
R19FTlRSWShHQywgMCwgbW1DUEdfRURDX1RBR19DTlQpIH0sDQorICAgeyBTT0MxNV9SRUdfRU5U
UlkoR0MsIDAsIG1tRENfRURDX0NTSU5WT0NfQ05UKSB9LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZ
KEdDLCAwLCBtbURDX0VEQ19SRVNUT1JFX0NOVCkgfSwNCisgICB7IFNPQzE1X1JFR19FTlRSWShH
QywgMCwgbW1EQ19FRENfU1RBVEVfQ05UKSB9LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAw
LCBtbUdEU19FRENfQ05UKSB9LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUdEU19F
RENfR1JCTV9DTlQpIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tR0RTX0VEQ19P
QV9ERUQpIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tU1BJX0VEQ19DTlQpIH0s
DQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tU1FDX0VEQ19DTlQpIH0sDQorICAgeyBT
T0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tU1FfRURDX0RFRF9DTlQpIH0sDQorICAgeyBTT0MxNV9S
RUdfRU5UUlkoR0MsIDAsIG1tU1FfRURDX0lORk8pIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlko
R0MsIDAsIG1tU1FfRURDX1NFQ19DTlQpIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAs
IG1tVENDX0VEQ19DTlQpIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tVENQX0FU
Q19FRENfR0FUQ0wxX0NOVCkgfSwNCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1UQ1Bf
RURDX0NOVCkgfSwNCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1URF9FRENfQ05UKSB9
LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbVNRQ19FRENfQ05UMikgfSwNCisgICB7
IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1TUV9FRENfQ05UKSB9LA0KKyAgIHsgU09DMTVfUkVH
X0VOVFJZKEdDLCAwLCBtbVRBX0VEQ19DTlQpIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0Ms
IDAsIG1tR0RTX0VEQ19PQV9QSFlfQ05UKSB9LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAw
LCBtbUdEU19FRENfT0FfUElQRV9DTlQpIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAs
IG1tR0NFQV9FRENfQ05UKSB9LA0KKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUdDRUFf
RURDX0NOVDIpIH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tVENJX0VEQ19DTlQp
IH0sDQorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tVENDX0VEQ19DTlQyKSB9LA0KKyAg
IHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbVRDQV9FRENfQ05UKSB9LA0KK307DQorDQorc3Rh
dGljIGludCBnZnhfdjlfMF9kb19lZGNfZ3ByX3dvcmthcm91bmRzKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KQ0KK3sNCisJc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nID0gJmFkZXYtPmdmeC5j
b21wdXRlX3JpbmdbMF07DQorCXN0cnVjdCBhbWRncHVfaWIgaWI7DQorCXN0cnVjdCBkbWFfZmVu
Y2UgKmYgPSBOVUxMOw0KKwlpbnQgciwgaSwgajsNCisJdTMyIHRtcDsNCisJdW5zaWduZWQgdG90
YWxfc2l6ZSwgdmdwcl9vZmZzZXQsIHNncHJfb2Zmc2V0Ow0KKwl1NjQgZ3B1X2FkZHI7DQorDQor
CS8qIG9ubHkgc3VwcG9ydCB3aGVuIFJBUyBpcyBlbmFibGVkICovDQorCWlmICghYW1kZ3B1X3Jh
c19pc19zdXBwb3J0ZWQoYWRldiwgQU1ER1BVX1JBU19CTE9DS19fR0ZYKSkNCisJCXJldHVybiAw
Ow0KKw0KKwkvKiBiYWlsIGlmIHRoZSBjb21wdXRlIHJpbmcgaXMgbm90IHJlYWR5ICovDQorCWlm
ICghcmluZy0+c2NoZWQucmVhZHkpDQorCQlyZXR1cm4gMDsNCisNCisJdG1wID0gUlJFRzMyX1NP
QzE1KEdDLCAwLCBtbUdCX0VEQ19NT0RFKTsNCisJV1JFRzMyX1NPQzE1KEdDLCAwLCBtbUdCX0VE
Q19NT0RFLCAwKTsNCisNCisJdG90YWxfc2l6ZSA9DQorCQkoKEFSUkFZX1NJWkUodmdwcl9pbml0
X3JlZ3MpICogMykgKyA0ICsgNSArIDIpICogNDsNCisJdG90YWxfc2l6ZSArPQ0KKwkJKChBUlJB
WV9TSVpFKHNncHJfaW5pdF9yZWdzKSAqIDMpICsgNCArIDUgKyAyKSAqIDQ7DQorCXRvdGFsX3Np
emUgPSBBTElHTih0b3RhbF9zaXplLCAyNTYpOw0KKwl2Z3ByX29mZnNldCA9IHRvdGFsX3NpemU7
DQorCXRvdGFsX3NpemUgKz0gQUxJR04oc2l6ZW9mKHZncHJfaW5pdF9jb21wdXRlX3NoYWRlciks
IDI1Nik7DQorCXNncHJfb2Zmc2V0ID0gdG90YWxfc2l6ZTsNCisJdG90YWxfc2l6ZSArPSBzaXpl
b2Yoc2dwcl9pbml0X2NvbXB1dGVfc2hhZGVyKTsNCisNCisJLyogYWxsb2NhdGUgYW4gaW5kaXJl
Y3QgYnVmZmVyIHRvIHB1dCB0aGUgY29tbWFuZHMgaW4gKi8NCisJbWVtc2V0KCZpYiwgMCwgc2l6
ZW9mKGliKSk7DQorCXIgPSBhbWRncHVfaWJfZ2V0KGFkZXYsIE5VTEwsIHRvdGFsX3NpemUsICZp
Yik7DQorCWlmIChyKSB7DQorCQlEUk1fRVJST1IoImFtZGdwdTogZmFpbGVkIHRvIGdldCBpYiAo
JWQpLlxuIiwgcik7DQorCQlyZXR1cm4gcjsNCisJfQ0KKw0KKwkvKiBsb2FkIHRoZSBjb21wdXRl
IHNoYWRlcnMgKi8NCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUodmdwcl9pbml0X2NvbXB1
dGVfc2hhZGVyKTsgaSsrKQ0KKwkJaWIucHRyW2kgKyAodmdwcl9vZmZzZXQgLyA0KV0gPSB2Z3By
X2luaXRfY29tcHV0ZV9zaGFkZXJbaV07DQorDQorCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpF
KHNncHJfaW5pdF9jb21wdXRlX3NoYWRlcik7IGkrKykNCisJCWliLnB0cltpICsgKHNncHJfb2Zm
c2V0IC8gNCldID0gc2dwcl9pbml0X2NvbXB1dGVfc2hhZGVyW2ldOw0KKw0KKwkvKiBpbml0IHRo
ZSBpYiBsZW5ndGggdG8gMCAqLw0KKwlpYi5sZW5ndGhfZHcgPSAwOw0KKw0KKwkvKiBWR1BSICov
DQorCS8qIHdyaXRlIHRoZSByZWdpc3RlciBzdGF0ZSBmb3IgdGhlIGNvbXB1dGUgZGlzcGF0Y2gg
Ki8NCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUodmdwcl9pbml0X3JlZ3MpOyBpKyspIHsN
CisJCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSBQQUNLRVQzKFBBQ0tFVDNfU0VUX1NIX1JFRywg
MSk7DQorCQlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gU09DMTVfUkVHX0VOVFJZX09GRlNFVCh2
Z3ByX2luaXRfcmVnc1tpXSkNCisJCQkJCQkJCS0gUEFDS0VUM19TRVRfU0hfUkVHX1NUQVJUOw0K
KwkJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IHZncHJfaW5pdF9yZWdzW2ldLnJlZ192YWx1ZTsN
CisJfQ0KKwkvKiB3cml0ZSB0aGUgc2hhZGVyIHN0YXJ0IGFkZHJlc3M6IG1tQ09NUFVURV9QR01f
TE8sIG1tQ09NUFVURV9QR01fSEkgKi8NCisJZ3B1X2FkZHIgPSAoaWIuZ3B1X2FkZHIgKyAodTY0
KXZncHJfb2Zmc2V0KSA+PiA4Ow0KKwlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gUEFDS0VUMyhQ
QUNLRVQzX1NFVF9TSF9SRUcsIDIpOw0KKwlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gU09DMTVf
UkVHX09GRlNFVChHQywgMCwgbW1DT01QVVRFX1BHTV9MTykNCisJCQkJCQkJLSBQQUNLRVQzX1NF
VF9TSF9SRUdfU1RBUlQ7DQorCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSBsb3dlcl8zMl9iaXRz
KGdwdV9hZGRyKTsNCisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IHVwcGVyXzMyX2JpdHMoZ3B1
X2FkZHIpOw0KKw0KKwkvKiB3cml0ZSBkaXNwYXRjaCBwYWNrZXQgKi8NCisJaWIucHRyW2liLmxl
bmd0aF9kdysrXSA9IFBBQ0tFVDMoUEFDS0VUM19ESVNQQVRDSF9ESVJFQ1QsIDMpOw0KKwlpYi5w
dHJbaWIubGVuZ3RoX2R3KytdID0gMTI4OyAvKiB4ICovDQorCWliLnB0cltpYi5sZW5ndGhfZHcr
K10gPSAxOyAvKiB5ICovDQorCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSAxOyAvKiB6ICovDQor
CWliLnB0cltpYi5sZW5ndGhfZHcrK10gPQ0KKwkJUkVHX1NFVF9GSUVMRCgwLCBDT01QVVRFX0RJ
U1BBVENIX0lOSVRJQVRPUiwgQ09NUFVURV9TSEFERVJfRU4sIDEpOw0KKw0KKwkvKiB3cml0ZSBD
UyBwYXJ0aWFsIGZsdXNoIHBhY2tldCAqLw0KKwlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gUEFD
S0VUMyhQQUNLRVQzX0VWRU5UX1dSSVRFLCAwKTsNCisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9
IEVWRU5UX1RZUEUoNykgfCBFVkVOVF9JTkRFWCg0KTsNCisNCisJLyogU0dQUiAqLw0KKwkvKiB3
cml0ZSB0aGUgcmVnaXN0ZXIgc3RhdGUgZm9yIHRoZSBjb21wdXRlIGRpc3BhdGNoICovDQorCWZv
ciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKHNncHJfaW5pdF9yZWdzKTsgaSsrKSB7DQorCQlpYi5w
dHJbaWIubGVuZ3RoX2R3KytdID0gUEFDS0VUMyhQQUNLRVQzX1NFVF9TSF9SRUcsIDEpOw0KKwkJ
aWIucHRyW2liLmxlbmd0aF9kdysrXSA9IFNPQzE1X1JFR19FTlRSWV9PRkZTRVQoc2dwcl9pbml0
X3JlZ3NbaV0pDQorCQkJCQkJCQktIFBBQ0tFVDNfU0VUX1NIX1JFR19TVEFSVDsNCisJCWliLnB0
cltpYi5sZW5ndGhfZHcrK10gPSBzZ3ByX2luaXRfcmVnc1tpXS5yZWdfdmFsdWU7DQorCX0NCisJ
Lyogd3JpdGUgdGhlIHNoYWRlciBzdGFydCBhZGRyZXNzOiBtbUNPTVBVVEVfUEdNX0xPLCBtbUNP
TVBVVEVfUEdNX0hJICovDQorCWdwdV9hZGRyID0gKGliLmdwdV9hZGRyICsgKHU2NClzZ3ByX29m
ZnNldCkgPj4gODsNCisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IFBBQ0tFVDMoUEFDS0VUM19T
RVRfU0hfUkVHLCAyKTsNCisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IFNPQzE1X1JFR19PRkZT
RVQoR0MsIDAsIG1tQ09NUFVURV9QR01fTE8pDQorCQkJCQkJCS0gUEFDS0VUM19TRVRfU0hfUkVH
X1NUQVJUOw0KKwlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gbG93ZXJfMzJfYml0cyhncHVfYWRk
cik7DQorCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSB1cHBlcl8zMl9iaXRzKGdwdV9hZGRyKTsN
CisNCisJLyogd3JpdGUgZGlzcGF0Y2ggcGFja2V0ICovDQorCWliLnB0cltpYi5sZW5ndGhfZHcr
K10gPSBQQUNLRVQzKFBBQ0tFVDNfRElTUEFUQ0hfRElSRUNULCAzKTsNCisJaWIucHRyW2liLmxl
bmd0aF9kdysrXSA9IDEyODsgLyogeCAqLw0KKwlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gMTsg
LyogeSAqLw0KKwlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gMTsgLyogeiAqLw0KKwlpYi5wdHJb
aWIubGVuZ3RoX2R3KytdID0NCisJCVJFR19TRVRfRklFTEQoMCwgQ09NUFVURV9ESVNQQVRDSF9J
TklUSUFUT1IsIENPTVBVVEVfU0hBREVSX0VOLCAxKTsNCisNCisJLyogd3JpdGUgQ1MgcGFydGlh
bCBmbHVzaCBwYWNrZXQgKi8NCisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IFBBQ0tFVDMoUEFD
S0VUM19FVkVOVF9XUklURSwgMCk7DQorCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSBFVkVOVF9U
WVBFKDcpIHwgRVZFTlRfSU5ERVgoNCk7DQorDQorCS8qIHNoZWR1bGUgdGhlIGliIG9uIHRoZSBy
aW5nICovDQorCXIgPSBhbWRncHVfaWJfc2NoZWR1bGUocmluZywgMSwgJmliLCBOVUxMLCAmZik7
DQorCWlmIChyKSB7DQorCQlEUk1fRVJST1IoImFtZGdwdTogaWIgc3VibWl0IGZhaWxlZCAoJWQp
LlxuIiwgcik7DQorCQlnb3RvIGZhaWw7DQorCX0NCisNCisJLyogd2FpdCBmb3IgdGhlIEdQVSB0
byBmaW5pc2ggcHJvY2Vzc2luZyB0aGUgSUIgKi8NCisJciA9IGRtYV9mZW5jZV93YWl0KGYsIGZh
bHNlKTsNCisJaWYgKHIpIHsNCisJCURSTV9FUlJPUigiYW1kZ3B1OiBmZW5jZSB3YWl0IGZhaWxl
ZCAoJWQpLlxuIiwgcik7DQorCQlnb3RvIGZhaWw7DQorCX0NCisNCisJLyogcmVhZCBiYWNrIHJl
Z2lzdGVycyB0byBjbGVhciB0aGUgY291bnRlcnMgKi8NCisJbXV0ZXhfbG9jaygmYWRldi0+Z3Ji
bV9pZHhfbXV0ZXgpOw0KKwlmb3IgKGogPSAwOyBqIDwgMTY7IGorKykgew0KKwkJZ2Z4X3Y5XzBf
c2VsZWN0X3NlX3NoKGFkZXYsIDB4MDEsIDB4MCwgaik7DQorCQlmb3IgKGkgPSAwOyBpIDwgQVJS
QVlfU0laRShzZWNfZGVkX2NvdW50ZXJfcmVnaXN0ZXJzKTsgaSsrKQ0KKwkJCVJSRUczMihTT0Mx
NV9SRUdfRU5UUllfT0ZGU0VUKHNlY19kZWRfY291bnRlcl9yZWdpc3RlcnNbaV0pKTsNCisJCWdm
eF92OV8wX3NlbGVjdF9zZV9zaChhZGV2LCAweDAyLCAweDAsIGopOw0KKwkJZm9yIChpID0gMDsg
aSA8IEFSUkFZX1NJWkUoc2VjX2RlZF9jb3VudGVyX3JlZ2lzdGVycyk7IGkrKykNCisJCQlSUkVH
MzIoU09DMTVfUkVHX0VOVFJZX09GRlNFVChzZWNfZGVkX2NvdW50ZXJfcmVnaXN0ZXJzW2ldKSk7
DQorCQlnZnhfdjlfMF9zZWxlY3Rfc2Vfc2goYWRldiwgMHgwMywgMHgwLCBqKTsNCisJCWZvciAo
aSA9IDA7IGkgPCBBUlJBWV9TSVpFKHNlY19kZWRfY291bnRlcl9yZWdpc3RlcnMpOyBpKyspDQor
CQkJUlJFRzMyKFNPQzE1X1JFR19FTlRSWV9PRkZTRVQoc2VjX2RlZF9jb3VudGVyX3JlZ2lzdGVy
c1tpXSkpOw0KKwkJZ2Z4X3Y5XzBfc2VsZWN0X3NlX3NoKGFkZXYsIDB4MDQsIDB4MCwgaik7DQor
CQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShzZWNfZGVkX2NvdW50ZXJfcmVnaXN0ZXJzKTsg
aSsrKQ0KKwkJCVJSRUczMihTT0MxNV9SRUdfRU5UUllfT0ZGU0VUKHNlY19kZWRfY291bnRlcl9y
ZWdpc3RlcnNbaV0pKTsNCisJfQ0KKwlXUkVHMzJfU09DMTUoR0MsIDAsIG1tR1JCTV9HRlhfSU5E
RVgsIDB4ZTAwMDAwMDApOw0KKwltdXRleF91bmxvY2soJmFkZXYtPmdyYm1faWR4X211dGV4KTsN
CisNCitmYWlsOg0KKwlhbWRncHVfaWJfZnJlZShhZGV2LCAmaWIsIE5VTEwpOw0KKwlkbWFfZmVu
Y2VfcHV0KGYpOw0KKw0KKwlyZXR1cm4gcjsNCit9DQorDQogc3RhdGljIGludCBnZnhfdjlfMF9l
YXJseV9pbml0KHZvaWQgKmhhbmRsZSkNCiB7DQogCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
ID0gKHN0cnVjdCBhbWRncHVfZGV2aWNlICopaGFuZGxlOw0KQEAgLTM1NzcsNiArMzgxNywxMSBA
QCBzdGF0aWMgaW50IGdmeF92OV8wX2VjY19sYXRlX2luaXQodm9pZCAqaGFuZGxlKQ0KIAlpZiAo
ISpyYXNfaWYpDQogCQlyZXR1cm4gLUVOT01FTTsNCiANCisJLyogcmVxdWlyZXMgSUJzIHNvIGRv
IGluIGxhdGUgaW5pdCBhZnRlciBJQiBwb29sIGlzIGluaXRpYWxpemVkICovDQorCXIgPSBnZnhf
djlfMF9kb19lZGNfZ3ByX3dvcmthcm91bmRzKGFkZXYpOw0KKwlpZiAocikNCisJCXJldHVybiBy
Ow0KKw0KIAkqKnJhc19pZiA9IHJhc19ibG9jazsNCiANCiAJciA9IGFtZGdwdV9yYXNfZmVhdHVy
ZV9lbmFibGVfb25fYm9vdChhZGV2LCAqcmFzX2lmLCAxKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
c29jMTUuaA0KaW5kZXggYTY2YzhiZi4uMDZmMzlmNSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L3NvYzE1LmgNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L3NvYzE1LmgNCkBAIC00Miw4ICs0MiwxOCBAQCBzdHJ1Y3Qgc29jMTVfcmVnX2dvbGRlbiB7DQog
CXUzMglvcl9tYXNrOw0KIH07DQogDQorc3RydWN0IHNvYzE1X3JlZ19lbnRyeSB7DQorCXVpbnQz
Ml90IGh3aXA7DQorCXVpbnQzMl90IGluc3Q7DQorCXVpbnQzMl90IHNlZzsNCisJdWludDMyX3Qg
cmVnX29mZnNldDsNCisJdWludDMyX3QgcmVnX3ZhbHVlOw0KK307DQorDQogI2RlZmluZSBTT0Mx
NV9SRUdfRU5UUlkoaXAsIGluc3QsIHJlZykJaXAjI19IV0lQLCBpbnN0LCByZWcjI19CQVNFX0lE
WCwgcmVnDQogDQorI2RlZmluZSBTT0MxNV9SRUdfRU5UUllfT0ZGU0VUKGVudHJ5KQkoYWRldi0+
cmVnX29mZnNldFtlbnRyeS5od2lwXVtlbnRyeS5pbnN0XVtlbnRyeS5zZWddICsgZW50cnkucmVn
X29mZnNldCkNCisNCiAjZGVmaW5lIFNPQzE1X1JFR19HT0xERU5fVkFMVUUoaXAsIGluc3QsIHJl
ZywgYW5kX21hc2ssIG9yX21hc2spIFwNCiAJeyBpcCMjX0hXSVAsIGluc3QsIHJlZyMjX0JBU0Vf
SURYLCByZWcsIGFuZF9tYXNrLCBvcl9tYXNrIH0NCiANCi0tIA0KMi43LjQNCg0KX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxp
c3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
