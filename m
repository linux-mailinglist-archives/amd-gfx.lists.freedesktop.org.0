Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7083D6A0CC
	for <lists+amd-gfx@lfdr.de>; Tue, 16 Jul 2019 05:29:25 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C3F4F89F63;
	Tue, 16 Jul 2019 03:29:23 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 30E1989F63
 for <amd-gfx@lists.freedesktop.org>; Tue, 16 Jul 2019 03:29:22 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id r1so19183860wrl.7
 for <amd-gfx@lists.freedesktop.org>; Mon, 15 Jul 2019 20:29:22 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=7N1QKy94Mk+xgo3OSqqz3fv8lr5wMc/0yeHSLuG7Z7o=;
 b=ieYlUnmlFPr7/d59GQdcWUy+nGtQmxYHyYs1oIZmp9VDODIccUktrvzuvHjqWo19W/
 WI9kfa2OJC/fRJlbf9tHTR5Z82eQeOh7W9bQddKEeO32B9xGL1x83a7v8zDh06ODQVCv
 ouchsSC4C0v9xR4OINwuvfjMhQ+UTxcF632EkB4lFEPNAlNCOztB7MVzLxMkLgtWFheT
 NUlQnATfG7NaLLAQDHJGv0wmeonSJbTLaWLjXmhnwi8o7fzuljjkV6ZDWc7vA8gL04Cs
 FGspM/yMygnaFKhS6t4kkXEODKe4r8JTx+rc0xFOmulgs5tuJoMriaueNj/XT0l5Qwz1
 6B9w==
X-Gm-Message-State: APjAAAXOrbY7QeXuoNWNxMYxEQsZW3TgakAJcqD2NNjghZCJHMAVFqQW
 vOtwcefOzqIFIJ/S4xjViHE4K/Kjctp7uRHQEuNEqw==
X-Google-Smtp-Source: APXvYqx7JZfPOBhY9Gy3Umo+fVBGu+jmANgtLaj3hfWLCymLdR0KmNOzbHNhkBy2eXAJ4/va0s2LPB8bKPplEBX/hV4=
X-Received: by 2002:adf:f94a:: with SMTP id q10mr12527922wrr.341.1563247760711; 
 Mon, 15 Jul 2019 20:29:20 -0700 (PDT)
MIME-Version: 1.0
References: <20190712073543.17641-1-evan.quan@amd.com>
In-Reply-To: <20190712073543.17641-1-evan.quan@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Mon, 15 Jul 2019 23:29:08 -0400
Message-ID: <CADnq5_O4j8WWuihLxaCfsSgab3WTishXiXEVQWPJzu9_oAmOPw@mail.gmail.com>
Subject: Re: [PATCH] drm/amd/powerplay: correct smu_update_table usage
To: Evan Quan <evan.quan@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=7N1QKy94Mk+xgo3OSqqz3fv8lr5wMc/0yeHSLuG7Z7o=;
 b=X6jCMvUTRAsPMeBK/kSP4e+DiIXsI4M+dk6pVKVLA1PnwXN6Fz/42gvsFoDObkMZ1E
 PpuYSv3/ln3OxFxNG0wZCJgGb5TG7vJVG95Pc+v4LyS9vdVkgcl2uZBLlVUvVKp/7e7/
 5MXBxycRe3/GqDPDzQsaPtCzujR2s7BpM9XkvZt2O/+64mWx5ToRSWdiOH0w7y1XQ0CS
 tYF9SduJLAbel7dtc8o6aNYzQ3O1tg7azURM1Y9NKS3RPZoCpiXH9nKkMdSDHmEzrDvl
 UCkD9F569sFqnLFnJ6gbBLJEOiwjkrzEK+Z3fETbAhSjmXOyENZ3g5IMivkbbF1JipxF
 4bpQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBKdWwgMTIsIDIwMTkgYXQgMzozNSBBTSBFdmFuIFF1YW4gPGV2YW4ucXVhbkBhbWQu
Y29tPiB3cm90ZToKPgo+IFRoZSBpbnRlcmZhY2Ugd2FzIHVzZWQgaW4gYSBjb25mdXNpbmcgd2F5
LiBJbiBwcm9maWxlIG1vZGUgc2NlbmFyaW8sCj4gdGhlIDJuZCBwYXJhbWV0ZXIgb2YgdGhlIGlu
dGVyZmFjZSB3YXMgdXNlZCBpbiBhIGRpZmZlcmVudCB3YXkgZnJvbQo+IG90aGVyIHNjZW5hcmlv
cy4KPgo+IENoYW5nZS1JZDogSWFiY2ViYjQ3ZGI4ZmRmMjQyNTgwYzEwNTkzOTMxMzJlZTEwYjkz
ZTQKPiBTaWduZWQtb2ZmLWJ5OiBFdmFuIFF1YW4gPGV2YW4ucXVhbkBhbWQuY29tPgoKUmV2aWV3
ZWQtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNvbT4KCj4gLS0tCj4g
IGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZGdwdV9zbXUuYyAgICB8ICA0ICsrLS0K
PiAgLi4uL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvYW1kZ3B1X3NtdS5oICAgIHwgIDIgKy0K
PiAgZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jICAgIHwgMTYgKysr
KysrKy0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5j
ICAgICB8ICA0ICsrLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3Bw
dC5jICAgIHwgMjAgKysrKysrKysrLS0tLS0tLS0tLQo+ICA1IGZpbGVzIGNoYW5nZWQsIDIzIGlu
c2VydGlvbnMoKyksIDIzIGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvcG93ZXJwbGF5L2FtZGdwdV9zbXUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93
ZXJwbGF5L2FtZGdwdV9zbXUuYwo+IGluZGV4IDcwMTVmZTEwMTFlOC4uMzJmOThjZDRlNGYyIDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZGdwdV9zbXUuYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZGdwdV9zbXUuYwo+IEBAIC0y
OTksNyArMjk5LDcgQEAgaW50IHNtdV9jb21tb25fcmVhZF9zZW5zb3Ioc3RydWN0IHNtdV9jb250
ZXh0ICpzbXUsIGVudW0gYW1kX3BwX3NlbnNvcnMgc2Vuc29yLAo+ICAgICAgICAgcmV0dXJuIHJl
dDsKPiAgfQo+Cj4gLWludCBzbXVfdXBkYXRlX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211
LCBlbnVtIHNtdV90YWJsZV9pZCB0YWJsZV9pbmRleCwKPiAraW50IHNtdV91cGRhdGVfdGFibGUo
c3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGVudW0gc211X3RhYmxlX2lkIHRhYmxlX2luZGV4LCBp
bnQgYXJndW1lbnQsCj4gICAgICAgICAgICAgICAgICAgICAgdm9pZCAqdGFibGVfZGF0YSwgYm9v
bCBkcnYyc211KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3Qgc211X3RhYmxlX2NvbnRleHQgKnNtdV90
YWJsZSA9ICZzbXUtPnNtdV90YWJsZTsKPiBAQCAtMzI2LDcgKzMyNiw3IEBAIGludCBzbXVfdXBk
YXRlX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBlbnVtIHNtdV90YWJsZV9pZCB0YWJs
ZV9pbmRleCwKPiAgICAgICAgIHJldCA9IHNtdV9zZW5kX3NtY19tc2dfd2l0aF9wYXJhbShzbXUs
IGRydjJzbXUgPwo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNN
VV9NU0dfVHJhbnNmZXJUYWJsZURyYW0yU211IDoKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBTTVVfTVNHX1RyYW5zZmVyVGFibGVTbXUyRHJhbSwKPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9pZCk7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfaWQgfCAoKGFyZ3VtZW50ICYg
MHhGRkZGKSA8PCAxNikpOwo+ICAgICAgICAgaWYgKHJldCkKPiAgICAgICAgICAgICAgICAgcmV0
dXJuIHJldDsKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9p
bmMvYW1kZ3B1X3NtdS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2FtZGdw
dV9zbXUuaAo+IGluZGV4IGM5NzMyNGVmN2RiMi4uYmFmMWNlNGQxYTE0IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9hbWRncHVfc211LmgKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvYW1kZ3B1X3NtdS5oCj4gQEAgLTkzNyw3
ICs5MzcsNyBAQCBleHRlcm4gaW50IHNtdV9mZWF0dXJlX2lzX3N1cHBvcnRlZChzdHJ1Y3Qgc211
X2NvbnRleHQgKnNtdSwKPiAgZXh0ZXJuIGludCBzbXVfZmVhdHVyZV9zZXRfc3VwcG9ydGVkKHN0
cnVjdCBzbXVfY29udGV4dCAqc211LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbnVtIHNtdV9mZWF0dXJlX21hc2sgbWFzaywgYm9vbCBlbmFibGUpOwo+Cj4gLWludCBz
bXVfdXBkYXRlX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCB1aW50MzJfdCB0YWJsZV9p
bmRleCwKPiAraW50IHNtdV91cGRhdGVfdGFibGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGVu
dW0gc211X3RhYmxlX2lkIHRhYmxlX2luZGV4LCBpbnQgYXJndW1lbnQsCj4gICAgICAgICAgICAg
ICAgICAgICAgdm9pZCAqdGFibGVfZGF0YSwgYm9vbCBkcnYyc211KTsKPgo+ICBib29sIGlzX3N1
cHBvcnRfc3dfc211KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jCj4gaW5kZXggNGNiMGMxOGIxMmNlLi42NTVh
ZDZjNjZiMjEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2
aTEwX3BwdC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3Bw
dC5jCj4gQEAgLTYzNCw3ICs2MzQsNyBAQCBzdGF0aWMgaW50IG5hdmkxMF9nZXRfY3VycmVudF9j
bGtfZnJlcV9ieV90YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKPgo+ICAgICAgICAgbWVt
c2V0KCZtZXRyaWNzLCAwLCBzaXplb2YobWV0cmljcykpOwo+Cj4gLSAgICAgICByZXQgPSBzbXVf
dXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX1NNVV9NRVRSSUNTLCAodm9pZCAqKSZtZXRyaWNz
LCBmYWxzZSk7Cj4gKyAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxF
X1NNVV9NRVRSSUNTLCAwLCAodm9pZCAqKSZtZXRyaWNzLCBmYWxzZSk7Cj4gICAgICAgICBpZiAo
cmV0KQo+ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+Cj4gQEAgLTg4OCw3ICs4ODgsNyBA
QCBzdGF0aWMgaW50IG5hdmkxMF9nZXRfZ3B1X3Bvd2VyKHN0cnVjdCBzbXVfY29udGV4dCAqc211
LCB1aW50MzJfdCAqdmFsdWUpCj4gICAgICAgICBpZiAoIXZhbHVlKQo+ICAgICAgICAgICAgICAg
ICByZXR1cm4gLUVJTlZBTDsKPgo+IC0gICAgICAgcmV0ID0gc211X3VwZGF0ZV90YWJsZShzbXUs
IFNNVV9UQUJMRV9TTVVfTUVUUklDUywgKHZvaWQgKikmbWV0cmljcywKPiArICAgICAgIHJldCA9
IHNtdV91cGRhdGVfdGFibGUoc211LCBTTVVfVEFCTEVfU01VX01FVFJJQ1MsIDAsICh2b2lkICop
Jm1ldHJpY3MsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlKTsKPiAgICAg
ICAgIGlmIChyZXQpCj4gICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gQEAgLTkxMCw3ICs5
MTAsNyBAQCBzdGF0aWMgaW50IG5hdmkxMF9nZXRfY3VycmVudF9hY3Rpdml0eV9wZXJjZW50KHN0
cnVjdCBzbXVfY29udGV4dCAqc211LAo+Cj4gICAgICAgICBtc2xlZXAoMSk7Cj4KPiAtICAgICAg
IHJldCA9IHNtdV91cGRhdGVfdGFibGUoc211LCBTTVVfVEFCTEVfU01VX01FVFJJQ1MsCj4gKyAg
ICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX1NNVV9NRVRSSUNTLCAw
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodm9pZCAqKSZtZXRyaWNzLCBmYWxz
ZSk7Cj4gICAgICAgICBpZiAocmV0KQo+ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+IEBA
IC05NTEsNyArOTUxLDcgQEAgc3RhdGljIGludCBuYXZpMTBfZ2V0X2Zhbl9zcGVlZChzdHJ1Y3Qg
c211X2NvbnRleHQgKnNtdSwgdWludDE2X3QgKnZhbHVlKQo+Cj4gICAgICAgICBtZW1zZXQoJm1l
dHJpY3MsIDAsIHNpemVvZihtZXRyaWNzKSk7Cj4KPiAtICAgICAgIHJldCA9IHNtdV91cGRhdGVf
dGFibGUoc211LCBTTVVfVEFCTEVfU01VX01FVFJJQ1MsCj4gKyAgICAgICByZXQgPSBzbXVfdXBk
YXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX1NNVV9NRVRSSUNTLCAwLAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAodm9pZCAqKSZtZXRyaWNzLCBmYWxzZSk7Cj4gICAgICAgICBpZiAo
cmV0KQo+ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+IEBAIC0xMDIwLDcgKzEwMjAsNyBA
QCBzdGF0aWMgaW50IG5hdmkxMF9nZXRfcG93ZXJfcHJvZmlsZV9tb2RlKHN0cnVjdCBzbXVfY29u
dGV4dCAqc211LCBjaGFyICpidWYpCj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1F
SU5WQUw7Cj4KPiAgICAgICAgICAgICAgICAgcmVzdWx0ID0gc211X3VwZGF0ZV90YWJsZShzbXUs
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU01VX1RBQkxFX0FD
VElWSVRZX01PTklUT1JfQ09FRkYgfCB3b3JrbG9hZF90eXBlIDw8IDE2LAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNNVV9UQUJMRV9BQ1RJVklUWV9NT05JVE9S
X0NPRUZGLCB3b3JrbG9hZF90eXBlLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICh2b2lkICopKCZhY3Rpdml0eV9tb25pdG9yKSwgZmFsc2UpOwo+ICAgICAgICAg
ICAgICAgICBpZiAocmVzdWx0KSB7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgcHJfZXJyKCJb
JXNdIEZhaWxlZCB0byBnZXQgYWN0aXZpdHkgbW9uaXRvciEiLCBfX2Z1bmNfXyk7Cj4gQEAgLTEw
OTMsNyArMTA5Myw3IEBAIHN0YXRpYyBpbnQgbmF2aTEwX3NldF9wb3dlcl9wcm9maWxlX21vZGUo
c3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGxvbmcgKmlucHV0LCB1Cj4gICAgICAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4KPiAgICAgICAgICAgICAgICAgcmV0ID0gc211X3Vw
ZGF0ZV90YWJsZShzbXUsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
U01VX1RBQkxFX0FDVElWSVRZX01PTklUT1JfQ09FRkYgfCBXT1JLTE9BRF9QUExJQl9DVVNUT01f
QklUIDw8IDE2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNNVV9U
QUJMRV9BQ1RJVklUWV9NT05JVE9SX0NPRUZGLCBXT1JLTE9BRF9QUExJQl9DVVNUT01fQklULAo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh2b2lkICopKCZhY3Rpdml0
eV9tb25pdG9yKSwgZmFsc2UpOwo+ICAgICAgICAgICAgICAgICBpZiAocmV0KSB7Cj4gICAgICAg
ICAgICAgICAgICAgICAgICAgcHJfZXJyKCJbJXNdIEZhaWxlZCB0byBnZXQgYWN0aXZpdHkgbW9u
aXRvciEiLCBfX2Z1bmNfXyk7Cj4gQEAgLTExMzcsNyArMTEzNyw3IEBAIHN0YXRpYyBpbnQgbmF2
aTEwX3NldF9wb3dlcl9wcm9maWxlX21vZGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGxvbmcg
KmlucHV0LCB1Cj4gICAgICAgICAgICAgICAgIH0KPgo+ICAgICAgICAgICAgICAgICByZXQgPSBz
bXVfdXBkYXRlX3RhYmxlKHNtdSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBTTVVfVEFCTEVfQUNUSVZJVFlfTU9OSVRPUl9DT0VGRiB8IFdPUktMT0FEX1BQTElCX0NV
U1RPTV9CSVQgPDwgMTYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
U01VX1RBQkxFX0FDVElWSVRZX01PTklUT1JfQ09FRkYsIFdPUktMT0FEX1BQTElCX0NVU1RPTV9C
SVQsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZvaWQgKikoJmFj
dGl2aXR5X21vbml0b3IpLCB0cnVlKTsKPiAgICAgICAgICAgICAgICAgaWYgKHJldCkgewo+ICAg
ICAgICAgICAgICAgICAgICAgICAgIHByX2VycigiWyVzXSBGYWlsZWQgdG8gc2V0IGFjdGl2aXR5
IG1vbml0b3IhIiwgX19mdW5jX18pOwo+IEBAIC0xMzA1LDcgKzEzMDUsNyBAQCBzdGF0aWMgaW50
IG5hdmkxMF90aGVybWFsX2dldF90ZW1wZXJhdHVyZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwK
PiAgICAgICAgIGlmICghdmFsdWUpCj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+
Cj4gLSAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX1NNVV9NRVRS
SUNTLCAodm9pZCAqKSZtZXRyaWNzLCBmYWxzZSk7Cj4gKyAgICAgICByZXQgPSBzbXVfdXBkYXRl
X3RhYmxlKHNtdSwgU01VX1RBQkxFX1NNVV9NRVRSSUNTLCAwLCAodm9pZCAqKSZtZXRyaWNzLCBm
YWxzZSk7Cj4gICAgICAgICBpZiAocmV0KQo+ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211X3YxMV8wLmMKPiBpbmRleCAxMmI3
Zjc2M2RkZGQuLmJkOWE2ZjgwNjk5ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L3Bvd2VycGxheS9zbXVfdjExXzAuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJw
bGF5L3NtdV92MTFfMC5jCj4gQEAgLTcwNCw3ICs3MDQsNyBAQCBzdGF0aWMgaW50IHNtdV92MTFf
MF93cml0ZV9wcHRhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211KQo+ICAgICAgICAgc3RydWN0
IHNtdV90YWJsZV9jb250ZXh0ICp0YWJsZV9jb250ZXh0ID0gJnNtdS0+c211X3RhYmxlOwo+ICAg
ICAgICAgaW50IHJldCA9IDA7Cj4KPiAtICAgICAgIHJldCA9IHNtdV91cGRhdGVfdGFibGUoc211
LCBTTVVfVEFCTEVfUFBUQUJMRSwKPiArICAgICAgIHJldCA9IHNtdV91cGRhdGVfdGFibGUoc211
LCBTTVVfVEFCTEVfUFBUQUJMRSwgMCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dGFibGVfY29udGV4dC0+ZHJpdmVyX3BwdGFibGUsIHRydWUpOwo+Cj4gICAgICAgICByZXR1cm4g
cmV0Owo+IEBAIC03MjMsNyArNzIzLDcgQEAgc3RhdGljIGludCBzbXVfdjExXzBfd3JpdGVfd2F0
ZXJtYXJrc190YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkKPiAgICAgICAgIGlmICghdGFi
bGUtPmNwdV9hZGRyKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPgo+IC0gICAg
ICAgcmV0ID0gc211X3VwZGF0ZV90YWJsZShzbXUsIFNNVV9UQUJMRV9XQVRFUk1BUktTLCB0YWJs
ZS0+Y3B1X2FkZHIsCj4gKyAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RB
QkxFX1dBVEVSTUFSS1MsIDAsIHRhYmxlLT5jcHVfYWRkciwKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHRydWUpOwo+Cj4gICAgICAgICByZXR1cm4gcmV0Owo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS92ZWdhMjBfcHB0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL3Bvd2VycGxheS92ZWdhMjBfcHB0LmMKPiBpbmRleCBkYmMxNzkyMGI4NzkuLmMw
YzA1NjViNTZjZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS92
ZWdhMjBfcHB0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS92ZWdhMjBf
cHB0LmMKPiBAQCAtMTY5OSw3ICsxNjk5LDcgQEAgc3RhdGljIGludCB2ZWdhMjBfZ2V0X21ldHJp
Y3NfdGFibGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCj4gICAgICAgICBpbnQgcmV0ID0gMDsK
Pgo+ICAgICAgICAgaWYgKCFzbXVfdGFibGUtPm1ldHJpY3NfdGltZSB8fCB0aW1lX2FmdGVyKGpp
ZmZpZXMsIHNtdV90YWJsZS0+bWV0cmljc190aW1lICsgSFogLyAxMDAwKSkgewo+IC0gICAgICAg
ICAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX1NNVV9NRVRSSUNT
LAo+ICsgICAgICAgICAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxF
X1NNVV9NRVRSSUNTLCAwLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZvaWQg
KilzbXVfdGFibGUtPm1ldHJpY3NfdGFibGUsIGZhbHNlKTsKPiAgICAgICAgICAgICAgICAgaWYg
KHJldCkgewo+ICAgICAgICAgICAgICAgICAgICAgICAgIHByX2luZm8oIkZhaWxlZCB0byBleHBv
cnQgU01VIG1ldHJpY3MgdGFibGUhXG4iKTsKPiBAQCAtMTcyOCw3ICsxNzI4LDcgQEAgc3RhdGlj
IGludCB2ZWdhMjBfc2V0X2RlZmF1bHRfb2Rfc2V0dGluZ3Moc3RydWN0IHNtdV9jb250ZXh0ICpz
bXUsCj4gICAgICAgICAgICAgICAgIGlmICghdGFibGVfY29udGV4dC0+b3ZlcmRyaXZlX3RhYmxl
KQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtRU5PTUVNOwo+Cj4gLSAgICAgICAg
ICAgICAgIHJldCA9IHNtdV91cGRhdGVfdGFibGUoc211LCBTTVVfVEFCTEVfT1ZFUkRSSVZFLAo+
ICsgICAgICAgICAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX09W
RVJEUklWRSwgMCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJs
ZV9jb250ZXh0LT5vdmVyZHJpdmVfdGFibGUsIGZhbHNlKTsKPiAgICAgICAgICAgICAgICAgaWYg
KHJldCkgewo+ICAgICAgICAgICAgICAgICAgICAgICAgIHByX2VycigiRmFpbGVkIHRvIGV4cG9y
dCBvdmVyIGRyaXZlIHRhYmxlIVxuIik7Cj4gQEAgLTE3NDAsNyArMTc0MCw3IEBAIHN0YXRpYyBp
bnQgdmVnYTIwX3NldF9kZWZhdWx0X29kX3NldHRpbmdzKHN0cnVjdCBzbXVfY29udGV4dCAqc211
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gICAgICAgICB9Cj4KPiAt
ICAgICAgIHJldCA9IHNtdV91cGRhdGVfdGFibGUoc211LCBTTVVfVEFCTEVfT1ZFUkRSSVZFLAo+
ICsgICAgICAgcmV0ID0gc211X3VwZGF0ZV90YWJsZShzbXUsIFNNVV9UQUJMRV9PVkVSRFJJVkUs
IDAsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2NvbnRleHQtPm92ZXJk
cml2ZV90YWJsZSwgdHJ1ZSk7Cj4gICAgICAgICBpZiAocmV0KSB7Cj4gICAgICAgICAgICAgICAg
IHByX2VycigiRmFpbGVkIHRvIGltcG9ydCBvdmVyIGRyaXZlIHRhYmxlIVxuIik7Cj4gQEAgLTE4
MjcsNyArMTgyNyw3IEBAIHN0YXRpYyBpbnQgdmVnYTIwX2dldF9wb3dlcl9wcm9maWxlX21vZGUo
c3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGNoYXIgKmJ1ZikKPiAgICAgICAgICAgICAgICAgICAg
ICAgICByZXR1cm4gLUVJTlZBTDsKPgo+ICAgICAgICAgICAgICAgICByZXN1bHQgPSBzbXVfdXBk
YXRlX3RhYmxlKHNtdSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBTTVVfVEFCTEVfQUNUSVZJVFlfTU9OSVRPUl9DT0VGRiB8IHdvcmtsb2FkX3R5cGUgPDwgMTYs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU01VX1RBQkxFX0FD
VElWSVRZX01PTklUT1JfQ09FRkYsIHdvcmtsb2FkX3R5cGUsCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgKHZvaWQgKikoJmFjdGl2aXR5X21vbml0b3IpLCBmYWxz
ZSk7Cj4gICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsKPiAgICAgICAgICAgICAgICAgICAg
ICAgICBwcl9lcnIoIlslc10gRmFpbGVkIHRvIGdldCBhY3Rpdml0eSBtb25pdG9yISIsIF9fZnVu
Y19fKTsKPiBAQCAtMTkxMyw3ICsxOTEzLDcgQEAgc3RhdGljIGludCB2ZWdhMjBfc2V0X3Bvd2Vy
X3Byb2ZpbGVfbW9kZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgbG9uZyAqaW5wdXQsIHUKPgo+
ICAgICAgICAgaWYgKHNtdS0+cG93ZXJfcHJvZmlsZV9tb2RlID09IFBQX1NNQ19QT1dFUl9QUk9G
SUxFX0NVU1RPTSkgewo+ICAgICAgICAgICAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNt
dSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTTVVfVEFCTEVfQUNU
SVZJVFlfTU9OSVRPUl9DT0VGRiB8IFdPUktMT0FEX1BQTElCX0NVU1RPTV9CSVQgPDwgMTYsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU01VX1RBQkxFX0FDVElWSVRZ
X01PTklUT1JfQ09FRkYsIFdPUktMT0FEX1BQTElCX0NVU1RPTV9CSVQsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZvaWQgKikoJmFjdGl2aXR5X21vbml0b3IpLCBm
YWxzZSk7Cj4gICAgICAgICAgICAgICAgIGlmIChyZXQpIHsKPiAgICAgICAgICAgICAgICAgICAg
ICAgICBwcl9lcnIoIlslc10gRmFpbGVkIHRvIGdldCBhY3Rpdml0eSBtb25pdG9yISIsIF9fZnVu
Y19fKTsKPiBAQCAtMTk2OCw3ICsxOTY4LDcgQEAgc3RhdGljIGludCB2ZWdhMjBfc2V0X3Bvd2Vy
X3Byb2ZpbGVfbW9kZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgbG9uZyAqaW5wdXQsIHUKPiAg
ICAgICAgICAgICAgICAgfQo+Cj4gICAgICAgICAgICAgICAgIHJldCA9IHNtdV91cGRhdGVfdGFi
bGUoc211LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNNVV9UQUJM
RV9BQ1RJVklUWV9NT05JVE9SX0NPRUZGIHwgV09SS0xPQURfUFBMSUJfQ1VTVE9NX0JJVCA8PCAx
NiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTTVVfVEFCTEVfQUNU
SVZJVFlfTU9OSVRPUl9DT0VGRiwgV09SS0xPQURfUFBMSUJfQ1VTVE9NX0JJVCwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodm9pZCAqKSgmYWN0aXZpdHlfbW9uaXRv
ciksIHRydWUpOwo+ICAgICAgICAgICAgICAgICBpZiAocmV0KSB7Cj4gICAgICAgICAgICAgICAg
ICAgICAgICAgcHJfZXJyKCJbJXNdIEZhaWxlZCB0byBzZXQgYWN0aXZpdHkgbW9uaXRvciEiLCBf
X2Z1bmNfXyk7Cj4gQEAgLTI1MTksNyArMjUxOSw3IEBAIHN0YXRpYyBpbnQgdmVnYTIwX3VwZGF0
ZV9vZDhfc2V0dGluZ3Moc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCj4gICAgICAgICBzdHJ1Y3Qg
c211X3RhYmxlX2NvbnRleHQgKnRhYmxlX2NvbnRleHQgPSAmc211LT5zbXVfdGFibGU7Cj4gICAg
ICAgICBpbnQgcmV0Owo+Cj4gLSAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01V
X1RBQkxFX09WRVJEUklWRSwKPiArICAgICAgIHJldCA9IHNtdV91cGRhdGVfdGFibGUoc211LCBT
TVVfVEFCTEVfT1ZFUkRSSVZFLCAwLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0
YWJsZV9jb250ZXh0LT5vdmVyZHJpdmVfdGFibGUsIGZhbHNlKTsKPiAgICAgICAgIGlmIChyZXQp
IHsKPiAgICAgICAgICAgICAgICAgcHJfZXJyKCJGYWlsZWQgdG8gZXhwb3J0IG92ZXIgZHJpdmUg
dGFibGUhXG4iKTsKPiBAQCAtMjUzMCw3ICsyNTMwLDcgQEAgc3RhdGljIGludCB2ZWdhMjBfdXBk
YXRlX29kOF9zZXR0aW5ncyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKPiAgICAgICAgIGlmIChy
ZXQpCj4gICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4KPiAtICAgICAgIHJldCA9IHNtdV91
cGRhdGVfdGFibGUoc211LCBTTVVfVEFCTEVfT1ZFUkRSSVZFLAo+ICsgICAgICAgcmV0ID0gc211
X3VwZGF0ZV90YWJsZShzbXUsIFNNVV9UQUJMRV9PVkVSRFJJVkUsIDAsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHRhYmxlX2NvbnRleHQtPm92ZXJkcml2ZV90YWJsZSwgdHJ1ZSk7
Cj4gICAgICAgICBpZiAocmV0KSB7Cj4gICAgICAgICAgICAgICAgIHByX2VycigiRmFpbGVkIHRv
IGltcG9ydCBvdmVyIGRyaXZlIHRhYmxlIVxuIik7Cj4gQEAgLTI3OTQsNyArMjc5NCw3IEBAIHN0
YXRpYyBpbnQgdmVnYTIwX29kbl9lZGl0X2RwbV90YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNt
dSwKPiAgICAgICAgICAgICAgICAgYnJlYWs7Cj4KPiAgICAgICAgIGNhc2UgUFBfT0RfUkVTVE9S
RV9ERUZBVUxUX1RBQkxFOgo+IC0gICAgICAgICAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxl
KHNtdSwgU01VX1RBQkxFX09WRVJEUklWRSwgdGFibGVfY29udGV4dC0+b3ZlcmRyaXZlX3RhYmxl
LCBmYWxzZSk7Cj4gKyAgICAgICAgICAgICAgIHJldCA9IHNtdV91cGRhdGVfdGFibGUoc211LCBT
TVVfVEFCTEVfT1ZFUkRSSVZFLCAwLCB0YWJsZV9jb250ZXh0LT5vdmVyZHJpdmVfdGFibGUsIGZh
bHNlKTsKPiAgICAgICAgICAgICAgICAgaWYgKHJldCkgewo+ICAgICAgICAgICAgICAgICAgICAg
ICAgIHByX2VycigiRmFpbGVkIHRvIGV4cG9ydCBvdmVyIGRyaXZlIHRhYmxlIVxuIik7Cj4gICAg
ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiBAQCAtMjgwMyw3ICsyODAzLDcgQEAg
c3RhdGljIGludCB2ZWdhMjBfb2RuX2VkaXRfZHBtX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAq
c211LAo+ICAgICAgICAgICAgICAgICBicmVhazsKPgo+ICAgICAgICAgY2FzZSBQUF9PRF9DT01N
SVRfRFBNX1RBQkxFOgo+IC0gICAgICAgICAgICAgICByZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNt
dSwgU01VX1RBQkxFX09WRVJEUklWRSwgdGFibGVfY29udGV4dC0+b3ZlcmRyaXZlX3RhYmxlLCB0
cnVlKTsKPiArICAgICAgICAgICAgICAgcmV0ID0gc211X3VwZGF0ZV90YWJsZShzbXUsIFNNVV9U
QUJMRV9PVkVSRFJJVkUsIDAsIHRhYmxlX2NvbnRleHQtPm92ZXJkcml2ZV90YWJsZSwgdHJ1ZSk7
Cj4gICAgICAgICAgICAgICAgIGlmIChyZXQpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICBw
cl9lcnIoIkZhaWxlZCB0byBpbXBvcnQgb3ZlciBkcml2ZSB0YWJsZSFcbiIpOwo+ICAgICAgICAg
ICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gLS0KPiAyLjIxLjAKPgo+IF9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gYW1kLWdmeCBtYWlsaW5nIGxp
c3QKPiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRl
c2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeApfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2FtZC1nZng=
