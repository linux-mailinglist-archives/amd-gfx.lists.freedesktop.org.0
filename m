Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AD86869DD7
	for <lists+amd-gfx@lfdr.de>; Mon, 15 Jul 2019 23:22:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4632D89D1D;
	Mon, 15 Jul 2019 21:22:01 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-DM3-obe.outbound.protection.outlook.com
 (mail-dm3nam03on0611.outbound.protection.outlook.com
 [IPv6:2a01:111:f400:fe49::611])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2D3CB89CDB
 for <amd-gfx@lists.freedesktop.org>; Mon, 15 Jul 2019 21:21:54 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Wq5TBc6pipyxLMe4uFBZTlmrxi+IheDbBA2yXQ/ssjwfFDySK8qk/P548FrjmUO79UNVC7B5vM8tfMJWU1FEsW3klaASGJReyfnqhoArEVIR3RWcvnFB20dv6lnne6jMBkPVwSkBijX7dWHvYj19FPlXmyUcrVtOWlMDT6j7PYrtui3mLLRv3NuxnfJAlw3tCShYYkiQ1FcXsTKy9e/E3+19y9fFhTWPV1aLTQkyD2xx4sFbBuppXdhG6WYWira0M0ifKD1xZBTa4OUDwMe94l7DKA37okT66wIXJSmUTWRvRT5Be4E1v+WFG6Y9FUWCEuA5uEciQZ8nXgpA6SeXKw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=wPPsML8PJIWwcf5Wm17ZXgdDA04ucNHCgnACFVbcD0c=;
 b=dbqs/xtFijx8MSdT7txASe4HzfMM8tbTLaoYf1hTM3jlduGSTAyxomBrSiX9ZPSfJeZ+4eQeXPOjzZ07PsrCk1bN1N4n7WlCrVky3RkYwrH3j6G5Ddak4WXxAUzK/9UeFXgIHoTpDuQZE5laQzIBUG4A1G6hr6dB9a5jcHcnJfnh1H8IhwIOVTBLbPZCK94yxt8xjgAziCdf7jSQxIwBeqMSAHjZ+BbLmv+T6bDKrQi9su7Vt1/5vQ9i3XyWyBRHN1AqL384Y0l9mETQRkZcWgYgj0tp24QAfNIXRUMP0SD5mNAGGFZoMseskqaCYbAnDRWD8VCkhrsf79EYTHO7KA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org
 smtp.mailfrom=amd.com;dmarc=permerror action=none
 header.from=amd.com;dkim=none (message not signed);arc=none
Received: from DM3PR12CA0112.namprd12.prod.outlook.com (2603:10b6:0:55::32) by
 DM5PR12MB1932.namprd12.prod.outlook.com (2603:10b6:3:10e::23) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2073.14; Mon, 15 Jul 2019 21:21:52 +0000
Received: from CO1NAM03FT048.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e48::200) by DM3PR12CA0112.outlook.office365.com
 (2603:10b6:0:55::32) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id 15.20.2073.14 via Frontend
 Transport; Mon, 15 Jul 2019 21:21:52 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV01.amd.com (165.204.84.17) by
 CO1NAM03FT048.mail.protection.outlook.com (10.152.81.49) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2052.18 via Frontend Transport; Mon, 15 Jul 2019 21:21:51 +0000
Received: from localhost.localdomain (10.180.168.240) by SATLEXCHOV01.amd.com
 (10.181.40.71) with Microsoft SMTP Server id 14.3.389.1;
 Mon, 15 Jul 2019 16:21:33 -0500
From: <sunpeng.li@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 61/87] drm/amd/display: Hook up calls to do stereo mux and dig
 programming to stereo control interface
Date: Mon, 15 Jul 2019 17:20:23 -0400
Message-ID: <20190715212049.4584-62-sunpeng.li@amd.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190715212049.4584-1-sunpeng.li@amd.com>
References: <20190715212049.4584-1-sunpeng.li@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(136003)(376002)(396003)(39860400002)(346002)(2980300002)(428003)(189003)(199004)(70586007)(70206006)(8936002)(486006)(36756003)(54906003)(316002)(305945005)(47776003)(426003)(53936002)(11346002)(126002)(356004)(446003)(2616005)(6666004)(8676002)(476003)(81156014)(81166006)(68736007)(50466002)(2351001)(336012)(6916009)(1076003)(50226002)(478600001)(14444005)(2906002)(86362001)(2876002)(2870700001)(48376002)(4326008)(5660300002)(51416003)(186003)(26005)(49486002)(76176011)(52103002)(158003001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM5PR12MB1932; H:SATLEXCHOV01.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 58b1ed02-2b89-469b-ba9a-08d7096a747c
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328);
 SRVR:DM5PR12MB1932; 
X-MS-TrafficTypeDiagnostic: DM5PR12MB1932:
X-Microsoft-Antispam-PRVS: <DM5PR12MB193210046CEA601F6668916482CF0@DM5PR12MB1932.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:5797;
X-Forefront-PRVS: 00997889E7
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: voEuk5dniLeaNZL/+izCtYLq2dP8CgFh7n4rLwb6+i2wtUAncYX/DKCPAGsCenIvHKpbh66DZwVXDu7o/bD9Q16vU3tejWHN/bQWbwtRAwurppBpi6/Lqr2Bd6zPCG11CwEMgt/aaGiBKSM+N2j4OX4BvQsRVwCVcIPvGJCRMfhECNqjv4F+3dTwsQxA5BcGQiRhIoLmQCroMPQKaZSgs5fkJAAZ7wsFpcGAURv7Q1cnEXnxcH5LnHjxtAw79b2ahDiYZeKAb4c/BzBYPfc2eG4yM3YcbeA+rBekyRyYIe+YfJpUBnA0zA/sK4fxuAcYhIttf9pVXvae7q12k/Z0SBZvCcqHDcZunT1bLCc6iYH1LWgaSAumkIj2zpOPE2SDJijvGeznGU/CQjZwrvmx3qKOaO+KOuHfnyeHHhPqMf4=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 15 Jul 2019 21:21:51.9697 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 58b1ed02-2b89-469b-ba9a-08d7096a747c
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV01.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5PR12MB1932
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=wPPsML8PJIWwcf5Wm17ZXgdDA04ucNHCgnACFVbcD0c=;
 b=CZ8NRb5uL93FSWcgwgKOtpg9L+gcxegekeC/72cg2l1evk7U70pf7zX7b+QT1HBg/44BInN3IMiRWRrP219/5GtUenTZ+MJRNO7UkF7Bh50xCWKejlkTP4hsP+9lCKO4pmZeVOIJ646e5N+d1iycQsqi4i224z5zyFa0wFWw7W8=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Leo Li <sunpeng.li@amd.com>, Murton Liu <murton.liu@amd.com>,
 Aric Cyr <Aric.Cyr@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogTXVydG9uIExpdSA8bXVydG9uLmxpdUBhbWQuY29tPgoKW1doeV0KSW1wbGVtZW50YXRp
b24gb2Ygc3RlcmVvIG11eCByZWdpc3RlciBpcyBjb21wbGV0ZSwgYnV0IHVudXNlZC4gTmVlZCB0
bwpjYWxsIGZ1bmN0aW9ucyB0byB3cml0ZSByZWxldmFudCBjb25maWdzLgoKW0hvd10KQWRkIGZ1
bmN0aW9uIHRvIHdyaXRlIHN0ZXJlbyBjb25maWcgZm9yIGVuYWJsZS9kaXNhYmxlIGNhc2UgYW5k
IGNhbGwgaW4Kc3RlcmVvIGNvbnRyb2wgaW50ZXJmYWNlLgoKU2lnbmVkLW9mZi1ieTogTXVydG9u
IExpdSA8bXVydG9uLmxpdUBhbWQuY29tPgpSZXZpZXdlZC1ieTogQXJpYyBDeXIgPEFyaWMuQ3ly
QGFtZC5jb20+CkFja2VkLWJ5OiBMZW8gTGkgPHN1bnBlbmcubGlAYW1kLmNvbT4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kYy5jICAgICAgfCA0NyArKysrKysrKysr
KysKIGRyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kYy5oICAgICAgICAgICB8ICAzICsK
IC4uLi9hbWQvZGlzcGxheS9kYy9kY24xMC9kY24xMF9od19zZXF1ZW5jZXIuYyB8ICA3ICsrCiAu
Li4vZGlzcGxheS9kYy9ncGlvL2RjbjEwL2h3X2ZhY3RvcnlfZGNuMTAuYyAgfCA0MiArKysrKysr
KysrLQogLi4uL2RybS9hbWQvZGlzcGxheS9kYy9ncGlvL2dwaW9fc2VydmljZS5jICAgIHwgNzIg
KysrKysrKysrKysrKysrKysrKwogLi4uL2Rpc3BsYXkvaW5jbHVkZS9ncGlvX3NlcnZpY2VfaW50
ZXJmYWNlLmggIHwgMTggKysrKy0KIDYgZmlsZXMgY2hhbmdlZCwgMTg2IGluc2VydGlvbnMoKyks
IDMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5
L2RjL2NvcmUvZGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9jb3JlL2RjLmMK
aW5kZXggZDI5NDhmZmMzYWZlLi5iNTdlNDU1MGU3M2YgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvZGlzcGxheS9kYy9jb3JlL2RjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9k
aXNwbGF5L2RjL2NvcmUvZGMuYwpAQCAtMTIzNCw2ICsxMjM0LDUzIEBAIHZvaWQgZGNfcmVsZWFz
ZV9zdGF0ZShzdHJ1Y3QgZGNfc3RhdGUgKmNvbnRleHQpCiAJa3JlZl9wdXQoJmNvbnRleHQtPnJl
ZmNvdW50LCBkY19zdGF0ZV9mcmVlKTsKIH0KIAorYm9vbCBkY19zZXRfZ2VuZXJpY19ncGlvX2Zv
cl9zdGVyZW8oYm9vbCBlbmFibGUsCisJCXN0cnVjdCBncGlvX3NlcnZpY2UgKmdwaW9fc2Vydmlj
ZSkKK3sKKwllbnVtIGdwaW9fcmVzdWx0IGdwaW9fcmVzdWx0ID0gR1BJT19SRVNVTFRfTk9OX1NQ
RUNJRklDX0VSUk9SOworCXN0cnVjdCBncGlvX3Bpbl9pbmZvIHBpbl9pbmZvOworCXN0cnVjdCBn
cGlvICpnZW5lcmljOworCXN0cnVjdCBncGlvX2dlbmVyaWNfbXV4X2NvbmZpZyAqY29uZmlnID0g
a3phbGxvYyhzaXplb2Yoc3RydWN0IGdwaW9fZ2VuZXJpY19tdXhfY29uZmlnKSwKKwkJCSAgIEdG
UF9LRVJORUwpOworCisJcGluX2luZm8gPSBkYWxfZ3Bpb19nZXRfZ2VuZXJpY19waW5faW5mbyhn
cGlvX3NlcnZpY2UsIEdQSU9fSURfR0VORVJJQywgMCk7CisKKwlpZiAocGluX2luZm8ubWFzayA9
PSAweEZGRkZGRkZGIHx8IHBpbl9pbmZvLm9mZnNldCA9PSAweEZGRkZGRkZGKSB7CisJCWtmcmVl
KGNvbmZpZyk7CisJCXJldHVybiBmYWxzZTsKKwl9IGVsc2UgeworCQlnZW5lcmljID0gZGFsX2dw
aW9fc2VydmljZV9jcmVhdGVfZ2VuZXJpY19tdXgoCisJCQlncGlvX3NlcnZpY2UsCisJCQlwaW5f
aW5mby5vZmZzZXQsCisJCQlwaW5faW5mby5tYXNrKTsKKwl9CisKKwlpZiAoIWdlbmVyaWMpIHsK
KwkJa2ZyZWUoY29uZmlnKTsKKwkJcmV0dXJuIGZhbHNlOworCX0KKworCWdwaW9fcmVzdWx0ID0g
ZGFsX2dwaW9fb3BlbihnZW5lcmljLCBHUElPX01PREVfT1VUUFVUKTsKKworCWNvbmZpZy0+ZW5h
YmxlX291dHB1dF9mcm9tX211eCA9IGVuYWJsZTsKKwljb25maWctPm11eF9zZWxlY3QgPSBHUElP
X1NJR05BTF9TT1VSQ0VfUEFTU19USFJPVUdIX1NURVJFT19TWU5DOworCisJaWYgKGdwaW9fcmVz
dWx0ID09IEdQSU9fUkVTVUxUX09LKQorCQlncGlvX3Jlc3VsdCA9IGRhbF9tdXhfc2V0dXBfY29u
ZmlnKGdlbmVyaWMsIGNvbmZpZyk7CisKKwlpZiAoZ3Bpb19yZXN1bHQgPT0gR1BJT19SRVNVTFRf
T0spIHsKKwkJZGFsX2dwaW9fY2xvc2UoZ2VuZXJpYyk7CisJCWRhbF9ncGlvX2Rlc3Ryb3lfZ2Vu
ZXJpY19tdXgoJmdlbmVyaWMpOworCQlrZnJlZShjb25maWcpOworCQlyZXR1cm4gdHJ1ZTsKKwl9
IGVsc2UgeworCQlkYWxfZ3Bpb19jbG9zZShnZW5lcmljKTsKKwkJZGFsX2dwaW9fZGVzdHJveV9n
ZW5lcmljX211eCgmZ2VuZXJpYyk7CisJCWtmcmVlKGNvbmZpZyk7CisJCXJldHVybiBmYWxzZTsK
Kwl9Cit9CisKIHN0YXRpYyBib29sIGlzX3N1cmZhY2VfaW5fY29udGV4dCgKIAkJY29uc3Qgc3Ry
dWN0IGRjX3N0YXRlICpjb250ZXh0LAogCQljb25zdCBzdHJ1Y3QgZGNfcGxhbmVfc3RhdGUgKnBs
YW5lX3N0YXRlKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2Rj
LmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGMuaAppbmRleCBhYmMwMzliODM2
ZDQuLmIzMTRmZDI4NjlkZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5
L2RjL2RjLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjLmgKQEAgLTg1
Miw2ICs4NTIsOSBAQCBlbnVtIGRjX3N0YXR1cyBkY192YWxpZGF0ZV9wbGFuZShzdHJ1Y3QgZGMg
KmRjLCBjb25zdCBzdHJ1Y3QgZGNfcGxhbmVfc3RhdGUgKnBsYQogCiB2b2lkIGdldF9jbG9ja19y
ZXF1aXJlbWVudHNfZm9yX3N0YXRlKHN0cnVjdCBkY19zdGF0ZSAqc3RhdGUsIHN0cnVjdCBBc2lj
U3RhdGVFeCAqaW5mbyk7CiAKK2Jvb2wgZGNfc2V0X2dlbmVyaWNfZ3Bpb19mb3Jfc3RlcmVvKGJv
b2wgZW5hYmxlLAorCQlzdHJ1Y3QgZ3Bpb19zZXJ2aWNlICpncGlvX3NlcnZpY2UpOworCiAvKgog
ICogZmFzdF92YWxpZGF0ZTogd2UgcmV0dXJuIGFmdGVyIGRldGVybWluaW5nIGlmIHdlIGNhbiBz
dXBwb3J0IHRoZSBuZXcgc3RhdGUsCiAgKiBidXQgYmVmb3JlIHdlIHBvcHVsYXRlIHRoZSBwcm9n
cmFtbWluZyBpbmZvCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMv
ZGNuMTAvZGNuMTBfaHdfc2VxdWVuY2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkv
ZGMvZGNuMTAvZGNuMTBfaHdfc2VxdWVuY2VyLmMKaW5kZXggNDBhODE5OGNlOTM0Li5jMjJmYzE1
NjgxODQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24xMC9k
Y24xMF9od19zZXF1ZW5jZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMv
ZGNuMTAvZGNuMTBfaHdfc2VxdWVuY2VyLmMKQEAgLTI2OTEsNiArMjY5MSwxMyBAQCBzdGF0aWMg
dm9pZCBkY24xMF9zZXR1cF9zdGVyZW8oc3RydWN0IHBpcGVfY3R4ICpwaXBlX2N0eCwgc3RydWN0
IGRjICpkYykKIAogCWRjbjEwX2NvbmZpZ19zdGVyZW9fcGFyYW1ldGVycyhzdHJlYW0sICZmbGFn
cyk7CiAKKwlpZiAoc3RyZWFtLT50aW1pbmcudGltaW5nXzNkX2Zvcm1hdCA9PSBUSU1JTkdfM0Rf
Rk9STUFUX1NJREVCQU5EX0ZBKSB7CisJCWlmICghZGNfc2V0X2dlbmVyaWNfZ3Bpb19mb3Jfc3Rl
cmVvKHRydWUsIGRjLT5jdHgtPmdwaW9fc2VydmljZSkpCisJCQlkY19zZXRfZ2VuZXJpY19ncGlv
X2Zvcl9zdGVyZW8oZmFsc2UsIGRjLT5jdHgtPmdwaW9fc2VydmljZSk7CisJfSBlbHNlIHsKKwkJ
ZGNfc2V0X2dlbmVyaWNfZ3Bpb19mb3Jfc3RlcmVvKGZhbHNlLCBkYy0+Y3R4LT5ncGlvX3NlcnZp
Y2UpOworCX0KKwogCXBpcGVfY3R4LT5zdHJlYW1fcmVzLm9wcC0+ZnVuY3MtPm9wcF9wcm9ncmFt
X3N0ZXJlbygKIAkJcGlwZV9jdHgtPnN0cmVhbV9yZXMub3BwLAogCQlmbGFncy5QUk9HUkFNX1NU
RVJFTyA9PSAxID8gdHJ1ZTpmYWxzZSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
ZGlzcGxheS9kYy9ncGlvL2RjbjEwL2h3X2ZhY3RvcnlfZGNuMTAuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvZGlzcGxheS9kYy9ncGlvL2RjbjEwL2h3X2ZhY3RvcnlfZGNuMTAuYwppbmRleCAzMmFh
NDdhMDRhMGQuLjU3MTFmMzBjZjg0OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9k
aXNwbGF5L2RjL2dwaW8vZGNuMTAvaHdfZmFjdG9yeV9kY24xMC5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvZGlzcGxheS9kYy9ncGlvL2RjbjEwL2h3X2ZhY3RvcnlfZGNuMTAuYwpAQCAtMzEs
NiArMzEsNyBAQAogI2luY2x1ZGUgIi4uL2h3X2dwaW8uaCIKICNpbmNsdWRlICIuLi9od19kZGMu
aCIKICNpbmNsdWRlICIuLi9od19ocGQuaCIKKyNpbmNsdWRlICIuLi9od19nZW5lcmljLmgiCiAK
ICNpbmNsdWRlICJod19mYWN0b3J5X2RjbjEwLmgiCiAKQEAgLTEyMSw2ICsxMjIsNDIgQEAgc3Rh
dGljIGNvbnN0IHN0cnVjdCBkZGNfc2hfbWFzayBkZGNfbWFzayA9IHsKIAkJRERDX01BU0tfU0hf
TElTVChfTUFTSykKIH07CiAKKyNpbmNsdWRlICIuLi9nZW5lcmljX3JlZ3MuaCIKKworLyogc2V0
IGZpZWxkIG5hbWUgKi8KKyNkZWZpbmUgU0ZfR0VORVJJQyhyZWdfbmFtZSwgZmllbGRfbmFtZSwg
cG9zdF9maXgpXAorCS5maWVsZF9uYW1lID0gcmVnX25hbWUgIyMgX18gIyMgZmllbGRfbmFtZSAj
IyBwb3N0X2ZpeAorCisjZGVmaW5lIGdlbmVyaWNfcmVncyhpZCkgXAore1wKKwlHRU5FUklDX1JF
R19MSVNUKGlkKVwKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBnZW5lcmljX3JlZ2lzdGVycyBn
ZW5lcmljX3JlZ3NbXSA9IHsKKwlnZW5lcmljX3JlZ3MoQSksCisJZ2VuZXJpY19yZWdzKEIpLAor
fTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBnZW5lcmljX3NoX21hc2sgZ2VuZXJpY19zaGlmdFtd
ID0geworCUdFTkVSSUNfTUFTS19TSF9MSVNUKF9fU0hJRlQsIEEpLAorCUdFTkVSSUNfTUFTS19T
SF9MSVNUKF9fU0hJRlQsIEIpLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBnZW5lcmljX3No
X21hc2sgZ2VuZXJpY19tYXNrW10gPSB7CisJR0VORVJJQ19NQVNLX1NIX0xJU1QoX01BU0ssIEEp
LAorCUdFTkVSSUNfTUFTS19TSF9MSVNUKF9NQVNLLCBCKSwKK307CisKK3N0YXRpYyB2b2lkIGRl
ZmluZV9nZW5lcmljX3JlZ2lzdGVycyhzdHJ1Y3QgaHdfZ3Bpb19waW4gKnBpbiwgdWludDMyX3Qg
ZW4pCit7CisJc3RydWN0IGh3X2dlbmVyaWMgKmdlbmVyaWMgPSBIV19HRU5FUklDX0ZST01fQkFT
RShwaW4pOworCisJZ2VuZXJpYy0+cmVncyA9ICZnZW5lcmljX3JlZ3NbZW5dOworCWdlbmVyaWMt
PnNoaWZ0cyA9ICZnZW5lcmljX3NoaWZ0W2VuXTsKKwlnZW5lcmljLT5tYXNrcyA9ICZnZW5lcmlj
X21hc2tbZW5dOworCWdlbmVyaWMtPmJhc2UucmVncyA9ICZnZW5lcmljX3JlZ3NbZW5dLmdwaW87
Cit9CisKIHN0YXRpYyB2b2lkIGRlZmluZV9kZGNfcmVnaXN0ZXJzKAogCQlzdHJ1Y3QgaHdfZ3Bp
b19waW4gKnBpbiwKIAkJdWludDMyX3QgZW4pCkBAIC0xNjEsMTIgKzE5OCwxMyBAQCBzdGF0aWMg
dm9pZCBkZWZpbmVfaHBkX3JlZ2lzdGVycyhzdHJ1Y3QgaHdfZ3Bpb19waW4gKnBpbiwgdWludDMy
X3QgZW4pCiBzdGF0aWMgY29uc3Qgc3RydWN0IGh3X2ZhY3RvcnlfZnVuY3MgZnVuY3MgPSB7CiAJ
LmNyZWF0ZV9kZGNfZGF0YSA9IGRhbF9od19kZGNfY3JlYXRlLAogCS5jcmVhdGVfZGRjX2Nsb2Nr
ID0gZGFsX2h3X2RkY19jcmVhdGUsCi0JLmNyZWF0ZV9nZW5lcmljID0gTlVMTCwKKwkuY3JlYXRl
X2dlbmVyaWMgPSBkYWxfaHdfZ2VuZXJpY19jcmVhdGUsCiAJLmNyZWF0ZV9ocGQgPSBkYWxfaHdf
aHBkX2NyZWF0ZSwKIAkuY3JlYXRlX3N5bmMgPSBOVUxMLAogCS5jcmVhdGVfZ3NsID0gTlVMTCwK
IAkuZGVmaW5lX2hwZF9yZWdpc3RlcnMgPSBkZWZpbmVfaHBkX3JlZ2lzdGVycywKLQkuZGVmaW5l
X2RkY19yZWdpc3RlcnMgPSBkZWZpbmVfZGRjX3JlZ2lzdGVycworCS5kZWZpbmVfZGRjX3JlZ2lz
dGVycyA9IGRlZmluZV9kZGNfcmVnaXN0ZXJzLAorCS5kZWZpbmVfZ2VuZXJpY19yZWdpc3RlcnMg
PSBkZWZpbmVfZ2VuZXJpY19yZWdpc3RlcnMKIH07CiAvKgogICogZGFsX2h3X2ZhY3RvcnlfZGNu
MTBfaW5pdApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2dwaW8v
Z3Bpb19zZXJ2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZ3Bpby9ncGlv
X3NlcnZpY2UuYwppbmRleCAzYzYzYTNjMDRkYmIuLjkzNzQ3OGJhYzc5NiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2dwaW8vZ3Bpb19zZXJ2aWNlLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2dwaW8vZ3Bpb19zZXJ2aWNlLmMKQEAgLTEz
OSw2ICsxMzksNjIgQEAgc3RydWN0IGdwaW8gKmRhbF9ncGlvX3NlcnZpY2VfY3JlYXRlX2lycSgK
IAlyZXR1cm4gZGFsX2dwaW9fY3JlYXRlX2lycShzZXJ2aWNlLCBpZCwgZW4pOwogfQogCitzdHJ1
Y3QgZ3BpbyAqZGFsX2dwaW9fc2VydmljZV9jcmVhdGVfZ2VuZXJpY19tdXgoCisJc3RydWN0IGdw
aW9fc2VydmljZSAqc2VydmljZSwKKwl1aW50MzJfdCBvZmZzZXQsCisJdWludDMyX3QgbWFzaykK
K3sKKwllbnVtIGdwaW9faWQgaWQ7CisJdWludDMyX3QgZW47CisJc3RydWN0IGdwaW8gKmdlbmVy
aWM7CisKKwlpZiAobWFzayA9PSAxKQorCQllbiA9IEdQSU9fR0VORVJJQ19BOworCWVsc2UgaWYg
KG1hc2sgPT0gMHgwMDAwMDEwMEwpCisJCWVuID0gR1BJT19HRU5FUklDX0I7CisJZWxzZQorCQly
ZXR1cm4gTlVMTDsKKworCWlkID0gR1BJT19JRF9HRU5FUklDOworCisJZ2VuZXJpYyA9IGRhbF9n
cGlvX2NyZWF0ZSgKKwkJc2VydmljZSwgaWQsIGVuLCBHUElPX1BJTl9PVVRQVVRfU1RBVEVfREVG
QVVMVCk7CisKKwlyZXR1cm4gZ2VuZXJpYzsKK30KKwordm9pZCBkYWxfZ3Bpb19kZXN0cm95X2dl
bmVyaWNfbXV4KAorCXN0cnVjdCBncGlvICoqbXV4KQoreworCWlmICghbXV4IHx8ICEqbXV4KSB7
CisJCUFTU0VSVF9DUklUSUNBTChmYWxzZSk7CisJCXJldHVybjsKKwl9CisKKwlkYWxfZ3Bpb19j
bG9zZSgqbXV4KTsKKwlkYWxfZ3Bpb19kZXN0cm95KG11eCk7CisJa2ZyZWUoKm11eCk7CisKKwkq
bXV4ID0gTlVMTDsKK30KKworc3RydWN0IGdwaW9fcGluX2luZm8gZGFsX2dwaW9fZ2V0X2dlbmVy
aWNfcGluX2luZm8oCisJc3RydWN0IGdwaW9fc2VydmljZSAqc2VydmljZSwKKwllbnVtIGdwaW9f
aWQgaWQsCisJdWludDMyX3QgZW4pCit7CisJc3RydWN0IGdwaW9fcGluX2luZm8gcGluOworCisJ
aWYgKHNlcnZpY2UtPnRyYW5zbGF0ZS5mdW5jcy0+aWRfdG9fb2Zmc2V0KSB7CisJCXNlcnZpY2Ut
PnRyYW5zbGF0ZS5mdW5jcy0+aWRfdG9fb2Zmc2V0KGlkLCBlbiwgJnBpbik7CisJfSBlbHNlIHsK
KwkJcGluLm1hc2sgPSAweEZGRkZGRkZGOworCQlwaW4ub2Zmc2V0ID0gMHhGRkZGRkZGRjsKKwl9
CisKKwlyZXR1cm4gcGluOworfQorCiB2b2lkIGRhbF9ncGlvX3NlcnZpY2VfZGVzdHJveSgKIAlz
dHJ1Y3QgZ3Bpb19zZXJ2aWNlICoqcHRyKQogewpAQCAtMTYzLDYgKzIxOSwyMSBAQCB2b2lkIGRh
bF9ncGlvX3NlcnZpY2VfZGVzdHJveSgKIAkqcHRyID0gTlVMTDsKIH0KIAorZW51bSBncGlvX3Jl
c3VsdCBkYWxfbXV4X3NldHVwX2NvbmZpZygKKwlzdHJ1Y3QgZ3BpbyAqbXV4LAorCXN0cnVjdCBn
cGlvX2dlbmVyaWNfbXV4X2NvbmZpZyAqY29uZmlnKQoreworCXN0cnVjdCBncGlvX2NvbmZpZ19k
YXRhIGNvbmZpZ19kYXRhOworCisJaWYgKCFjb25maWcpCisJCXJldHVybiBHUElPX1JFU1VMVF9J
TlZBTElEX0RBVEE7CisKKwljb25maWdfZGF0YS5jb25maWcuZ2VuZXJpY19tdXggPSAqY29uZmln
OworCWNvbmZpZ19kYXRhLnR5cGUgPSBHUElPX0NPTkZJR19UWVBFX0dFTkVSSUNfTVVYOworCisJ
cmV0dXJuIGRhbF9ncGlvX3NldF9jb25maWcobXV4LCAmY29uZmlnX2RhdGEpOworfQorCiAvKgog
ICogQGJyaWVmCiAgKiBQcml2YXRlIEFQSS4KQEAgLTI1Myw2ICszMjQsNyBAQCBlbnVtIGdwaW9f
cmVzdWx0IGRhbF9ncGlvX3NlcnZpY2Vfb3BlbigKIAljYXNlIEdQSU9fSURfR0VORVJJQzoKIAkJ
cGluID0gc2VydmljZS0+ZmFjdG9yeS5mdW5jcy0+Y3JlYXRlX2dlbmVyaWMoCiAJCQlzZXJ2aWNl
LT5jdHgsIGlkLCBlbik7CisJCXNlcnZpY2UtPmZhY3RvcnkuZnVuY3MtPmRlZmluZV9nZW5lcmlj
X3JlZ2lzdGVycyhwaW4sIGVuKTsKIAlicmVhazsKIAljYXNlIEdQSU9fSURfSFBEOgogCQlwaW4g
PSBzZXJ2aWNlLT5mYWN0b3J5LmZ1bmNzLT5jcmVhdGVfaHBkKApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9kaXNwbGF5L2luY2x1ZGUvZ3Bpb19zZXJ2aWNlX2ludGVyZmFjZS5oIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2luY2x1ZGUvZ3Bpb19zZXJ2aWNlX2ludGVyZmFj
ZS5oCmluZGV4IGY0MDI1OWJhZGU0MC4uOWM1NWQyNDcyMjdlIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2Rpc3BsYXkvaW5jbHVkZS9ncGlvX3NlcnZpY2VfaW50ZXJmYWNlLmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2luY2x1ZGUvZ3Bpb19zZXJ2aWNlX2ludGVy
ZmFjZS5oCkBAIC01MSwxMyArNTEsMjkgQEAgc3RydWN0IGdwaW8gKmRhbF9ncGlvX3NlcnZpY2Vf
Y3JlYXRlX2lycSgKIAl1aW50MzJfdCBvZmZzZXQsCiAJdWludDMyX3QgbWFzayk7CiAKK3N0cnVj
dCBncGlvICpkYWxfZ3Bpb19zZXJ2aWNlX2NyZWF0ZV9nZW5lcmljX211eCgKKwlzdHJ1Y3QgZ3Bp
b19zZXJ2aWNlICpzZXJ2aWNlLAorCXVpbnQzMl90IG9mZnNldCwKKwl1aW50MzJfdCBtYXNrKTsK
Kwordm9pZCBkYWxfZ3Bpb19kZXN0cm95X2dlbmVyaWNfbXV4KAorCXN0cnVjdCBncGlvICoqbXV4
KTsKKworZW51bSBncGlvX3Jlc3VsdCBkYWxfbXV4X3NldHVwX2NvbmZpZygKKwlzdHJ1Y3QgZ3Bp
byAqbXV4LAorCXN0cnVjdCBncGlvX2dlbmVyaWNfbXV4X2NvbmZpZyAqY29uZmlnKTsKKworc3Ry
dWN0IGdwaW9fcGluX2luZm8gZGFsX2dwaW9fZ2V0X2dlbmVyaWNfcGluX2luZm8oCisJc3RydWN0
IGdwaW9fc2VydmljZSAqc2VydmljZSwKKwllbnVtIGdwaW9faWQgaWQsCisJdWludDMyX3QgZW4p
OworCiBzdHJ1Y3QgZGRjICpkYWxfZ3Bpb19jcmVhdGVfZGRjKAogCXN0cnVjdCBncGlvX3NlcnZp
Y2UgKnNlcnZpY2UsCiAJdWludDMyX3Qgb2Zmc2V0LAogCXVpbnQzMl90IG1hc2ssCiAJc3RydWN0
IGdwaW9fZGRjX2h3X2luZm8gKmluZm8pOwogCi0KIHZvaWQgZGFsX2dwaW9fZGVzdHJveV9kZGMo
CiAJc3RydWN0IGRkYyAqKmRkYyk7CiAKLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9hbWQtZ2Z4
