Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C0D6BA0AD4
	for <lists+amd-gfx@lfdr.de>; Wed, 28 Aug 2019 21:56:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F3B8A89E9E;
	Wed, 28 Aug 2019 19:56:42 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qk1-x743.google.com (mail-qk1-x743.google.com
 [IPv6:2607:f8b0:4864:20::743])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 36E1A89E98
 for <amd-gfx@lists.freedesktop.org>; Wed, 28 Aug 2019 19:56:41 +0000 (UTC)
Received: by mail-qk1-x743.google.com with SMTP id s14so895840qkm.4
 for <amd-gfx@lists.freedesktop.org>; Wed, 28 Aug 2019 12:56:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=PvxCGeODprUpPDeg3slc0VlvWrODZEA2DKiXcZwVOyA=;
 b=smmNl9Ha8zBzKbbUhxPHU1nITD/KriCX6RtTjk9C+8gDPuRx9ZBxgoa7ohCdSlTvTG
 HxzEcYLWVZbGSk4NjF0mBoHq6AlDgM5s1KATHTGu/QX6GHBxaGrXxPDdL/FmP89SOIVQ
 IVXyf88085arAYQtz4oxQgi51yK4/zJ5ZqJA16y+m0Y7H9i11aI9Zcinx8vSIvMv+X+Z
 YXgURHc73BxFPr+HzoxcTN//sAhIjIGlvJPSuSGRvDgr4l5LT9N5HTzU1vCfELY0/eb1
 tRdpEa42cFPe9HhMYeFRspjwW4jpVcW3dYwTMn+LgkQSGt6r4Yw/+qwDNMNX3lg1FVV3
 jlGg==
X-Gm-Message-State: APjAAAW438sPSA/KOdaqaggVtK9RFlXmAhHdFg7ibuKQJQTe7S9MKROi
 WkSJdmcxkT1zl2iYTAzhYxkBuk4u
X-Google-Smtp-Source: APXvYqzhQjNk+KENOYSrcFThoQSF69/6Z37CRakR0MJje+TgI6JXRHQHC4GOygjDnNmKJkgwIWEIpA==
X-Received: by 2002:a37:ad19:: with SMTP id f25mr5508356qkm.118.1567022199618; 
 Wed, 28 Aug 2019 12:56:39 -0700 (PDT)
Received: from localhost.localdomain ([71.219.73.178])
 by smtp.gmail.com with ESMTPSA id s58sm136578qth.59.2019.08.28.12.56.38
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 28 Aug 2019 12:56:39 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 09/23] drm/amd/display: Add Renoir clock manager
Date: Wed, 28 Aug 2019 14:56:08 -0500
Message-Id: <20190828195622.28941-9-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190828195622.28941-1-alexander.deucher@amd.com>
References: <20190828195622.28941-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=PvxCGeODprUpPDeg3slc0VlvWrODZEA2DKiXcZwVOyA=;
 b=O1v0selYDLBdkufYhm+0V2huyJdaTcKQQdqWw07aUm5R16usgDJZHxXPKY15SSQeJl
 91M8Dyd6vStXGMQue2jk2Rg6QZwRa3DJF5ymdH4gRUQZ50QVdnL0HO9vweO+5Mp1M19V
 rwZqv3iibwD+VbGvDWLo/H1LgP913jDNlPa85HYQiufK4UP6xa8aD/0QwiZ8f8NwNO4V
 77CKHdbgPu56+2L424UfY/OkDFOuUnyXVoJ826uKkEjpn/NF1EyzfwKrD+lUwPxetlm5
 exzvV91X9o/JIYFKJsU4bVH3bFhNyhgWTCvVbXTyH3qSRJx5qu9mcyOfg8uqio7KFqbI
 J8OA==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>,
 Bhawanpreet Lakha <Bhawanpreet.Lakha@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogQmhhd2FucHJlZXQgTGFraGEgPEJoYXdhbnByZWV0Lkxha2hhQGFtZC5jb20+CgpDb250
cm9scyBkaXNwbGF5IGNsb2NrcyBhbmQgaW50ZXJmYWNlcyB3aXRoIHBvd2VycGxheSBmb3IKY2xv
Y2sgYW5kIHBvd2VyIHJlcXVpcmVtZW50cy4KClNpZ25lZC1vZmYtYnk6IEJoYXdhbnByZWV0IExh
a2hhIDxCaGF3YW5wcmVldC5MYWtoYUBhbWQuY29tPgpTaWduZWQtb2ZmLWJ5OiBBbGV4IERldWNo
ZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogLi4uL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvZGMvY2xrX21nci9NYWtlZmlsZSAgIHwgIDEwICsKIC4uLi9ncHUvZHJtL2FtZC9kaXNwbGF5
L2RjL2Nsa19tZ3IvY2xrX21nci5jICB8ICAgOSArCiAuLi4vYW1kL2Rpc3BsYXkvZGMvY2xrX21n
ci9kY24yMS9ybl9jbGtfbWdyLmMgfCA1OTAgKysrKysrKysrKysrKysrKysrCiAuLi4vYW1kL2Rp
c3BsYXkvZGMvY2xrX21nci9kY24yMS9ybl9jbGtfbWdyLmggfCAgMzkgKysKIC4uLi9kYy9jbGtf
bWdyL2RjbjIxL3JuX2Nsa19tZ3JfdmJpb3Nfc211LmMgICB8IDIwMCArKysrKysKIC4uLi9kYy9j
bGtfbWdyL2RjbjIxL3JuX2Nsa19tZ3JfdmJpb3Nfc211LmggICB8ICA0MCArKwogLi4uL2dwdS9k
cm0vYW1kL2Rpc3BsYXkvZGMvaW5jL2h3L2Nsa19tZ3IuaCAgIHwgMTI1ICsrKysKIDcgZmlsZXMg
Y2hhbmdlZCwgMTAxMyBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9n
cHUvZHJtL2FtZC9kaXNwbGF5L2RjL2Nsa19tZ3IvZGNuMjEvcm5fY2xrX21nci5jCiBjcmVhdGUg
bW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2Nsa19tZ3IvZGNuMjEv
cm5fY2xrX21nci5oCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2RjL2Nsa19tZ3IvZGNuMjEvcm5fY2xrX21ncl92Ymlvc19zbXUuYwogY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9jbGtfbWdyL2RjbjIxL3JuX2Ns
a19tZ3JfdmJpb3Nfc211LmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvZGMvY2xrX21nci9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9j
bGtfbWdyL01ha2VmaWxlCmluZGV4IDAwM2MyNzc2N2U5Yy4uYjg2NDg2OWNjN2UzIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9NYWtlZmlsZQorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9NYWtlZmlsZQpAQCAtODUs
MyArODUsMTMgQEAgQU1EX0RBTF9DTEtfTUdSX0RDTjIwID0gJChhZGRwcmVmaXggJChBTUREQUxQ
QVRIKS9kYy9jbGtfbWdyL2RjbjIwLywkKENMS19NR1JfREMKIEFNRF9ESVNQTEFZX0ZJTEVTICs9
ICQoQU1EX0RBTF9DTEtfTUdSX0RDTjIwKQogZW5kaWYKIAoraWZkZWYgQ09ORklHX0RSTV9BTURf
RENfRENOMl8xCisjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCisjIERDTjIxCisjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjCitDTEtfTUdSX0RDTjIxID0gcm5fY2xrX21nci5vIHJuX2Nsa19tZ3JfdmJpb3Nf
c211Lm8KKworQU1EX0RBTF9DTEtfTUdSX0RDTjIxID0gJChhZGRwcmVmaXggJChBTUREQUxQQVRI
KS9kYy9jbGtfbWdyL2RjbjIxLywkKENMS19NR1JfRENOMjEpKQorCitBTURfRElTUExBWV9GSUxF
UyArPSAkKEFNRF9EQUxfQ0xLX01HUl9EQ04yMSkKK2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9jbGtfbWdyLmMgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9jbGtfbWdyLmMKaW5kZXggMDZlNzNjZTQ1ZWQwLi42
NjI3N2E5YTRlYzIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9j
bGtfbWdyL2Nsa19tZ3IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xr
X21nci9jbGtfbWdyLmMKQEAgLTM1LDYgKzM1LDkgQEAKICNpbmNsdWRlICJkY24xMC9ydjFfY2xr
X21nci5oIgogI2luY2x1ZGUgImRjbjEwL3J2Ml9jbGtfbWdyLmgiCiAjaW5jbHVkZSAiZGNuMjAv
ZGNuMjBfY2xrX21nci5oIgorI2lmIGRlZmluZWQoQ09ORklHX0RSTV9BTURfRENfRENOMl8xKQor
I2luY2x1ZGUgImRjbjIxL3JuX2Nsa19tZ3IuaCIKKyNlbmRpZgogCiAKIGludCBjbGtfbWdyX2hl
bHBlcl9nZXRfYWN0aXZlX2Rpc3BsYXlfY250KApAQCAtMTE1LDYgKzExOCwxMiBAQCBzdHJ1Y3Qg
Y2xrX21nciAqZGNfY2xrX21ncl9jcmVhdGUoc3RydWN0IGRjX2NvbnRleHQgKmN0eCwgc3RydWN0
IHBwX3NtdV9mdW5jcyAqcAogCQkJcnYxX2Nsa19tZ3JfY29uc3RydWN0KGN0eCwgY2xrX21nciwg
cHBfc211KTsKIAkJCWJyZWFrOwogCQl9CisjaWYgZGVmaW5lZChDT05GSUdfRFJNX0FNRF9EQ19E
Q04yXzEpCisJCWlmIChBU0lDUkVWX0lTX1JFTk9JUihhc2ljX2lkLmh3X2ludGVybmFsX3Jldikp
IHsKKwkJCXJuX2Nsa19tZ3JfY29uc3RydWN0KGN0eCwgY2xrX21nciwgcHBfc211LCBkY2NnKTsK
KwkJCWJyZWFrOworCQl9CisjZW5kaWYJLyogRENOMl8xICovCiAJCWJyZWFrOwogI2VuZGlmCS8q
IEZhbWlseSBSViAqLwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkv
ZGMvY2xrX21nci9kY24yMS9ybl9jbGtfbWdyLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvZGMvY2xrX21nci9kY24yMS9ybl9jbGtfbWdyLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMDAwMDAwLi43ODdmOTRkODE1ZjQKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9kY24yMS9ybl9jbGtfbWdyLmMKQEAgLTAs
MCArMSw1OTAgQEAKKy8qCisgKiBDb3B5cmlnaHQgMjAxOCBBZHZhbmNlZCBNaWNybyBEZXZpY2Vz
LCBJbmMuCisgKgorICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFy
Z2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKKyAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBh
bmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCisgKiB0
byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0
aG91dCBsaW1pdGF0aW9uCisgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJn
ZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKKyAqIGFuZC9vciBzZWxsIGNvcGll
cyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQorICog
U29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcg
Y29uZGl0aW9uczoKKyAqCisgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBw
ZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgorICogYWxsIGNvcGllcyBvciBz
dWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCisgKgorICogVEhFIFNPRlRXQVJF
IElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJF
U1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJB
TlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAorICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBV
UlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCisgKiBUSEUgQ09Q
WVJJR0hUIEhPTERFUihTKSBPUiBBVVRIT1IoUykgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERB
TUFHRVMgT1IKKyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09O
VFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLAorICogQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4g
Q09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SCisgKiBPVEhFUiBERUFM
SU5HUyBJTiBUSEUgU09GVFdBUkUuCisgKgorICogQXV0aG9yczogQU1ECisgKgorICovCisKKyNp
bmNsdWRlICJkY2NnLmgiCisjaW5jbHVkZSAiY2xrX21ncl9pbnRlcm5hbC5oIgorCisKKyNpbmNs
dWRlICJkY24yMC9kY24yMF9jbGtfbWdyLmgiCisjaW5jbHVkZSAicm5fY2xrX21nci5oIgorCisK
KyNpbmNsdWRlICJkY2UxMDAvZGNlX2Nsa19tZ3IuaCIKKyNpbmNsdWRlICJybl9jbGtfbWdyX3Zi
aW9zX3NtdS5oIgorI2luY2x1ZGUgInJlZ19oZWxwZXIuaCIKKyNpbmNsdWRlICJjb3JlX3R5cGVz
LmgiCisjaW5jbHVkZSAiZG1faGVscGVycy5oIgorCisjaW5jbHVkZSAiYXRvbWZpcm13YXJlLmgi
CisjaW5jbHVkZSAiY2xrL2Nsa18xMF8wXzJfb2Zmc2V0LmgiCisjaW5jbHVkZSAiY2xrL2Nsa18x
MF8wXzJfc2hfbWFzay5oIgorI2luY2x1ZGUgInJlbm9pcl9pcF9vZmZzZXQuaCIKKworCisvKiBD
b25zdGFudHMgKi8KKworI2RlZmluZSBMUEREUl9NRU1fUkVUUkFJTl9MQVRFTkNZIDQuOTc3IC8q
IE51bWJlciBvYnRhaW5lZCBmcm9tIExQRERSNCBUcmFpbmluZyBDb3VudGVyIFJlcXVpcmVtZW50
IGRvYyAqLworCisvKiBNYWNyb3MgKi8KKworI2RlZmluZSBSRUcocmVnX25hbWUpIFwKKwkoQ0xL
X0JBU0UuaW5zdGFuY2VbMF0uc2VnbWVudFttbSAjIyByZWdfbmFtZSAjIyBfQkFTRV9JRFhdICsg
bW0gIyMgcmVnX25hbWUpCisKK3ZvaWQgcm5fdXBkYXRlX2Nsb2NrcyhzdHJ1Y3QgY2xrX21nciAq
Y2xrX21ncl9iYXNlLAorCQkJc3RydWN0IGRjX3N0YXRlICpjb250ZXh0LAorCQkJYm9vbCBzYWZl
X3RvX2xvd2VyKQoreworCXN0cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyID0gVE9fQ0xL
X01HUl9JTlRFUk5BTChjbGtfbWdyX2Jhc2UpOworCXN0cnVjdCBkY19jbG9ja3MgKm5ld19jbG9j
a3MgPSAmY29udGV4dC0+YndfY3R4LmJ3LmRjbi5jbGs7CisJc3RydWN0IGRjICpkYyA9IGNsa19t
Z3JfYmFzZS0+Y3R4LT5kYzsKKwlpbnQgZGlzcGxheV9jb3VudDsKKwlib29sIHVwZGF0ZV9kcHBj
bGsgPSBmYWxzZTsKKwlib29sIHVwZGF0ZV9kaXNwY2xrID0gZmFsc2U7CisJYm9vbCBlbnRlcl9k
aXNwbGF5X29mZiA9IGZhbHNlOworCWJvb2wgZHBwX2Nsb2NrX2xvd2VyZWQgPSBmYWxzZTsKKwlz
dHJ1Y3QgZG1jdSAqZG1jdSA9IGNsa19tZ3JfYmFzZS0+Y3R4LT5kYy0+cmVzX3Bvb2wtPmRtY3U7
CisKKwlkaXNwbGF5X2NvdW50ID0gY2xrX21ncl9oZWxwZXJfZ2V0X2FjdGl2ZV9kaXNwbGF5X2Nu
dChkYywgY29udGV4dCk7CisKKwlpZiAoZGlzcGxheV9jb3VudCA9PSAwKQorCQllbnRlcl9kaXNw
bGF5X29mZiA9IHRydWU7CisKKwlpZiAoZW50ZXJfZGlzcGxheV9vZmYgPT0gc2FmZV90b19sb3dl
cikgeworCQlybl92Ymlvc19zbXVfc2V0X2Rpc3BsYXlfY291bnQoY2xrX21nciwgZGlzcGxheV9j
b3VudCk7CisJfQorCisJaWYgKHNob3VsZF9zZXRfY2xvY2soc2FmZV90b19sb3dlciwgbmV3X2Ns
b2Nrcy0+cGh5Y2xrX2toeiwgY2xrX21ncl9iYXNlLT5jbGtzLnBoeWNsa19raHopKSB7CisJCWNs
a19tZ3JfYmFzZS0+Y2xrcy5waHljbGtfa2h6ID0gbmV3X2Nsb2Nrcy0+cGh5Y2xrX2toejsKKwkJ
cm5fdmJpb3Nfc211X3NldF9waHljbGsoY2xrX21nciwgY2xrX21ncl9iYXNlLT5jbGtzLnBoeWNs
a19raHopOworCX0KKworCWlmIChzaG91bGRfc2V0X2Nsb2NrKHNhZmVfdG9fbG93ZXIsIG5ld19j
bG9ja3MtPmRjZmNsa19raHosIGNsa19tZ3JfYmFzZS0+Y2xrcy5kY2ZjbGtfa2h6KSkgeworCQlj
bGtfbWdyX2Jhc2UtPmNsa3MuZGNmY2xrX2toeiA9IG5ld19jbG9ja3MtPmRjZmNsa19raHo7CisJ
CXJuX3ZiaW9zX3NtdV9zZXRfaGFyZF9taW5fZGNmY2xrKGNsa19tZ3IsIGNsa19tZ3JfYmFzZS0+
Y2xrcy5kY2ZjbGtfa2h6KTsKKwl9CisKKwlpZiAoc2hvdWxkX3NldF9jbG9jayhzYWZlX3RvX2xv
d2VyLAorCQkJbmV3X2Nsb2Nrcy0+ZGNmY2xrX2RlZXBfc2xlZXBfa2h6LCBjbGtfbWdyX2Jhc2Ut
PmNsa3MuZGNmY2xrX2RlZXBfc2xlZXBfa2h6KSkgeworCQljbGtfbWdyX2Jhc2UtPmNsa3MuZGNm
Y2xrX2RlZXBfc2xlZXBfa2h6ID0gbmV3X2Nsb2Nrcy0+ZGNmY2xrX2RlZXBfc2xlZXBfa2h6Owor
CQlybl92Ymlvc19zbXVfc2V0X21pbl9kZWVwX3NsZWVwX2RjZmNsayhjbGtfbWdyLCBjbGtfbWdy
X2Jhc2UtPmNsa3MuZGNmY2xrX2RlZXBfc2xlZXBfa2h6KTsKKwl9CisKKwlpZiAoc2hvdWxkX3Nl
dF9jbG9jayhzYWZlX3RvX2xvd2VyLCBuZXdfY2xvY2tzLT5kcHBjbGtfa2h6LCBjbGtfbWdyLT5i
YXNlLmNsa3MuZHBwY2xrX2toeikpIHsKKwkJaWYgKGNsa19tZ3ItPmJhc2UuY2xrcy5kcHBjbGtf
a2h6ID4gbmV3X2Nsb2Nrcy0+ZHBwY2xrX2toeikKKwkJCWRwcF9jbG9ja19sb3dlcmVkID0gdHJ1
ZTsKKwkJY2xrX21ncl9iYXNlLT5jbGtzLmRwcGNsa19raHogPSBuZXdfY2xvY2tzLT5kcHBjbGtf
a2h6OworCQl1cGRhdGVfZHBwY2xrID0gdHJ1ZTsKKwl9CisKKwlpZiAoc2hvdWxkX3NldF9jbG9j
ayhzYWZlX3RvX2xvd2VyLCBuZXdfY2xvY2tzLT5kaXNwY2xrX2toeiwgY2xrX21ncl9iYXNlLT5j
bGtzLmRpc3BjbGtfa2h6KSkgeworCQljbGtfbWdyX2Jhc2UtPmNsa3MuZGlzcGNsa19raHogPSBu
ZXdfY2xvY2tzLT5kaXNwY2xrX2toejsKKwkJcm5fdmJpb3Nfc211X3NldF9kaXNwY2xrKGNsa19t
Z3IsIGNsa19tZ3JfYmFzZS0+Y2xrcy5kaXNwY2xrX2toeik7CisKKwkJdXBkYXRlX2Rpc3BjbGsg
PSB0cnVlOworCX0KKworCWlmIChkcHBfY2xvY2tfbG93ZXJlZCkgeworCQkvLyBpZiBjbG9jayBp
cyBiZWluZyBsb3dlcmVkLCBpbmNyZWFzZSBEVE8gYmVmb3JlIGxvd2VyaW5nIHJlZmNsaworCQlk
Y24yMF91cGRhdGVfY2xvY2tzX3VwZGF0ZV9kcHBfZHRvKGNsa19tZ3IsIGNvbnRleHQpOworCQly
bl92Ymlvc19zbXVfc2V0X2RwcGNsayhjbGtfbWdyLCBjbGtfbWdyX2Jhc2UtPmNsa3MuZHBwY2xr
X2toeik7CisJfSBlbHNlIHsKKwkJLy8gaWYgY2xvY2sgaXMgYmVpbmcgcmFpc2VkLCBpbmNyZWFz
ZSByZWZjbGsgYmVmb3JlIGxvd2VyaW5nIERUTworCQlpZiAodXBkYXRlX2RwcGNsayB8fCB1cGRh
dGVfZGlzcGNsaykKKwkJCXJuX3ZiaW9zX3NtdV9zZXRfZHBwY2xrKGNsa19tZ3IsIGNsa19tZ3Jf
YmFzZS0+Y2xrcy5kcHBjbGtfa2h6KTsKKwkJaWYgKHVwZGF0ZV9kcHBjbGspCisJCQlkY24yMF91
cGRhdGVfY2xvY2tzX3VwZGF0ZV9kcHBfZHRvKGNsa19tZ3IsIGNvbnRleHQpOworCX0KKworCWlm
ICh1cGRhdGVfZGlzcGNsayAmJgorCQkJZG1jdSAmJiBkbWN1LT5mdW5jcy0+aXNfZG1jdV9pbml0
aWFsaXplZChkbWN1KSkgeworCQkvKnVwZGF0ZSBkbWN1IGZvciB3YWl0X2xvb3AgY291bnQqLwor
CQlkbWN1LT5mdW5jcy0+c2V0X3Bzcl93YWl0X2xvb3AoZG1jdSwKKwkJCWNsa19tZ3JfYmFzZS0+
Y2xrcy5kaXNwY2xrX2toeiAvIDEwMDAgLyA3KTsKKwl9Cit9CisKKworc3RhdGljIGludCBnZXRf
dmNvX2ZyZXF1ZW5jeV9mcm9tX3JlZyhzdHJ1Y3QgY2xrX21ncl9pbnRlcm5hbCAqY2xrX21ncikK
K3sKKwkvKiBnZXQgRmJNdWx0IHZhbHVlICovCisJc3RydWN0IGZpeGVkMzFfMzIgcGxsX3JlcTsK
Kwl1bnNpZ25lZCBpbnQgZmJtdWx0X2ZyYWNfdmFsID0gMDsKKwl1bnNpZ25lZCBpbnQgZmJtdWx0
X2ludF92YWwgPSAwOworCisKKwkvKgorCSAqIFJlZ2lzdGVyIHZhbHVlIG9mIGZibXVsdCBpcyBp
biA4LjE2IGZvcm1hdCwgd2UgYXJlIGNvbnZlcnRpbmcgdG8gMzEuMzIKKwkgKiB0byBsZXZlcmFn
ZSB0aGUgZml4IHBvaW50IG9wZXJhdGlvbnMgYXZhaWxhYmxlIGluIGRyaXZlcgorCSAqLworCisJ
UkVHX0dFVChDTEsxX0NMS19QTExfUkVRLCBGYk11bHRfZnJhYywgJmZibXVsdF9mcmFjX3ZhbCk7
IC8qIDE2IGJpdCBmcmFjdGlvbmFsIHBhcnQqLworCVJFR19HRVQoQ0xLMV9DTEtfUExMX1JFUSwg
RmJNdWx0X2ludCwgJmZibXVsdF9pbnRfdmFsKTsgLyogOCBiaXQgaW50ZWdlciBwYXJ0ICovCisK
KwlwbGxfcmVxID0gZGNfZml4cHRfZnJvbV9pbnQoZmJtdWx0X2ludF92YWwpOworCisJLyoKKwkg
KiBzaW5jZSBmcmFjdGlvbmFsIHBhcnQgaXMgb25seSAxNiBiaXQgaW4gcmVnaXN0ZXIgZGVmaW5p
dGlvbiBidXQgaXMgMzIgYml0CisJICogaW4gb3VyIGZpeCBwb2ludCBkZWZpbml0b24sIG5lZWQg
dG8gc2hpZnQgbGVmdCBieSAxNiB0byBvYnRhaW4gY29ycmVjdCB2YWx1ZQorCSAqLworCXBsbF9y
ZXEudmFsdWUgfD0gZmJtdWx0X2ZyYWNfdmFsIDw8IDE2OworCisJLyogbXVsdGlwbHkgYnkgUkVG
Q0xLIHBlcmlvZCAqLworCXBsbF9yZXEgPSBkY19maXhwdF9tdWxfaW50KHBsbF9yZXEsIGNsa19t
Z3ItPmRmc19yZWZfZnJlcV9raHopOworCisJLyogaW50ZWdlciBwYXJ0IGlzIG5vdyBWQ08gZnJl
cXVlbmN5IGluIGtIeiAqLworCXJldHVybiBkY19maXhwdF9mbG9vcihwbGxfcmVxKTsKK30KKwor
c3RhdGljIHZvaWQgcm5fZHVtcF9jbGtfcmVnaXN0ZXJzX2ludGVybmFsKHN0cnVjdCBybl9jbGtf
aW50ZXJuYWwgKmludGVybmFsLCBzdHJ1Y3QgY2xrX21nciAqY2xrX21ncl9iYXNlKQoreworCXN0
cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyID0gVE9fQ0xLX01HUl9JTlRFUk5BTChjbGtf
bWdyX2Jhc2UpOworCisJaW50ZXJuYWwtPkNMSzFfQ0xLM19DVVJSRU5UX0NOVCA9IFJFR19SRUFE
KENMSzFfQ0xLM19DVVJSRU5UX0NOVCk7CisJaW50ZXJuYWwtPkNMSzFfQ0xLM19CWVBBU1NfQ05U
TCA9IFJFR19SRUFEKENMSzFfQ0xLM19CWVBBU1NfQ05UTCk7CisKKwlpbnRlcm5hbC0+Q0xLMV9D
TEszX0RTX0NOVEwgPSBSRUdfUkVBRChDTEsxX0NMSzNfRFNfQ05UTCk7CS8vZGNmIGRlZXAgc2xl
ZXAgZGl2aWRlcgorCWludGVybmFsLT5DTEsxX0NMSzNfQUxMT1dfRFMgPSBSRUdfUkVBRChDTEsx
X0NMSzNfQUxMT1dfRFMpOworCisJaW50ZXJuYWwtPkNMSzFfQ0xLMV9DVVJSRU5UX0NOVCA9IFJF
R19SRUFEKENMSzFfQ0xLMV9DVVJSRU5UX0NOVCk7CisJaW50ZXJuYWwtPkNMSzFfQ0xLMV9CWVBB
U1NfQ05UTCA9IFJFR19SRUFEKENMSzFfQ0xLMV9CWVBBU1NfQ05UTCk7CisKKwlpbnRlcm5hbC0+
Q0xLMV9DTEsyX0NVUlJFTlRfQ05UID0gUkVHX1JFQUQoQ0xLMV9DTEsyX0NVUlJFTlRfQ05UKTsK
KwlpbnRlcm5hbC0+Q0xLMV9DTEsyX0JZUEFTU19DTlRMID0gUkVHX1JFQUQoQ0xLMV9DTEsyX0JZ
UEFTU19DTlRMKTsKKworCWludGVybmFsLT5DTEsxX0NMSzBfQ1VSUkVOVF9DTlQgPSBSRUdfUkVB
RChDTEsxX0NMSzBfQ1VSUkVOVF9DTlQpOworCWludGVybmFsLT5DTEsxX0NMSzBfQllQQVNTX0NO
VEwgPSBSRUdfUkVBRChDTEsxX0NMSzBfQllQQVNTX0NOVEwpOworfQorCisvKiBUaGlzIGZ1bmN0
aW9uIGNvbGxlY3QgcmF3IGNsayByZWdpc3RlciB2YWx1ZXMgKi8KK3N0YXRpYyB2b2lkIHJuX2R1
bXBfY2xrX3JlZ2lzdGVycyhzdHJ1Y3QgY2xrX3N0YXRlX3JlZ2lzdGVyc19hbmRfYnlwYXNzICpy
ZWdzX2FuZF9ieXBhc3MsCisJCXN0cnVjdCBjbGtfbWdyICpjbGtfbWdyX2Jhc2UsIHN0cnVjdCBj
bGtfbG9nX2luZm8gKmxvZ19pbmZvKQoreworCXN0cnVjdCBybl9jbGtfaW50ZXJuYWwgaW50ZXJu
YWwgPSB7MH07CisJY2hhciAqYnlwYXNzX2Nsa3NbNV0gPSB7IjB4MCBERlMiLCAiMHgxIFJFRkNM
SyIsICIweDIgRVJST1IiLCAiMHgzIDQwMCBGQ0giLCAiMHg0IDYwMCBGQ0gifTsKKwl1bnNpZ25l
ZCBpbnQgY2hhcnNfcHJpbnRlZCA9IDA7CisJdW5zaWduZWQgaW50IHJlbWFpbmluZ19idWZmZXIg
PSBsb2dfaW5mby0+YnVmU2l6ZTsKKworCXJuX2R1bXBfY2xrX3JlZ2lzdGVyc19pbnRlcm5hbCgm
aW50ZXJuYWwsIGNsa19tZ3JfYmFzZSk7CisKKwlyZWdzX2FuZF9ieXBhc3MtPmRjZmNsayA9IGlu
dGVybmFsLkNMSzFfQ0xLM19DVVJSRU5UX0NOVCAvIDEwOworCXJlZ3NfYW5kX2J5cGFzcy0+ZGNm
X2RlZXBfc2xlZXBfZGl2aWRlciA9IGludGVybmFsLkNMSzFfQ0xLM19EU19DTlRMIC8gMTA7CisJ
cmVnc19hbmRfYnlwYXNzLT5kY2ZfZGVlcF9zbGVlcF9hbGxvdyA9IGludGVybmFsLkNMSzFfQ0xL
M19BTExPV19EUzsKKwlyZWdzX2FuZF9ieXBhc3MtPmRwcmVmY2xrID0gaW50ZXJuYWwuQ0xLMV9D
TEsyX0NVUlJFTlRfQ05UIC8gMTA7CisJcmVnc19hbmRfYnlwYXNzLT5kaXNwY2xrID0gaW50ZXJu
YWwuQ0xLMV9DTEswX0NVUlJFTlRfQ05UIC8gMTA7CisJcmVnc19hbmRfYnlwYXNzLT5kcHBjbGsg
PSBpbnRlcm5hbC5DTEsxX0NMSzFfQ1VSUkVOVF9DTlQgLyAxMDsKKworCXJlZ3NfYW5kX2J5cGFz
cy0+ZHBwY2xrX2J5cGFzcyA9IGludGVybmFsLkNMSzFfQ0xLMV9CWVBBU1NfQ05UTCAmIDB4MDAw
NzsKKwlpZiAocmVnc19hbmRfYnlwYXNzLT5kcHBjbGtfYnlwYXNzIDwgMCB8fCByZWdzX2FuZF9i
eXBhc3MtPmRwcGNsa19ieXBhc3MgPiA0KQorCQlyZWdzX2FuZF9ieXBhc3MtPmRwcGNsa19ieXBh
c3MgPSAwOworCXJlZ3NfYW5kX2J5cGFzcy0+ZGNmY2xrX2J5cGFzcyA9IGludGVybmFsLkNMSzFf
Q0xLM19CWVBBU1NfQ05UTCAmIDB4MDAwNzsKKwlpZiAocmVnc19hbmRfYnlwYXNzLT5kY2ZjbGtf
YnlwYXNzIDwgMCB8fCByZWdzX2FuZF9ieXBhc3MtPmRjZmNsa19ieXBhc3MgPiA0KQorCQlyZWdz
X2FuZF9ieXBhc3MtPmRjZmNsa19ieXBhc3MgPSAwOworCXJlZ3NfYW5kX2J5cGFzcy0+ZGlzcGNs
a19ieXBhc3MgPSBpbnRlcm5hbC5DTEsxX0NMSzBfQllQQVNTX0NOVEwgJiAweDAwMDc7CisJaWYg
KHJlZ3NfYW5kX2J5cGFzcy0+ZGlzcGNsa19ieXBhc3MgPCAwIHx8IHJlZ3NfYW5kX2J5cGFzcy0+
ZGlzcGNsa19ieXBhc3MgPiA0KQorCQlyZWdzX2FuZF9ieXBhc3MtPmRpc3BjbGtfYnlwYXNzID0g
MDsKKwlyZWdzX2FuZF9ieXBhc3MtPmRwcmVmY2xrX2J5cGFzcyA9IGludGVybmFsLkNMSzFfQ0xL
Ml9CWVBBU1NfQ05UTCAmIDB4MDAwNzsKKwlpZiAocmVnc19hbmRfYnlwYXNzLT5kcHJlZmNsa19i
eXBhc3MgPCAwIHx8IHJlZ3NfYW5kX2J5cGFzcy0+ZHByZWZjbGtfYnlwYXNzID4gNCkKKwkJcmVn
c19hbmRfYnlwYXNzLT5kcHJlZmNsa19ieXBhc3MgPSAwOworCisJaWYgKGxvZ19pbmZvLT5lbmFi
bGVkKSB7CisJCWNoYXJzX3ByaW50ZWQgPSBzbnByaW50Zl9jb3VudChsb2dfaW5mby0+cEJ1Ziwg
cmVtYWluaW5nX2J1ZmZlciwgImNsa190eXBlLGNsa192YWx1ZSxkZWVwc2xlZXBfY250bCxkZWVw
c2xlZXBfYWxsb3csYnlwYXNzXG4iKTsKKwkJcmVtYWluaW5nX2J1ZmZlciAtPSBjaGFyc19wcmlu
dGVkOworCQkqbG9nX2luZm8tPnN1bV9jaGFyc19wcmludGVkICs9IGNoYXJzX3ByaW50ZWQ7CisJ
CWxvZ19pbmZvLT5wQnVmICs9IGNoYXJzX3ByaW50ZWQ7CisKKwkJY2hhcnNfcHJpbnRlZCA9IHNu
cHJpbnRmX2NvdW50KGxvZ19pbmZvLT5wQnVmLCByZW1haW5pbmdfYnVmZmVyLCAiZGNmY2xrLCVk
LCVkLCVkLCVzXG4iLAorCQkJcmVnc19hbmRfYnlwYXNzLT5kY2ZjbGssCisJCQlyZWdzX2FuZF9i
eXBhc3MtPmRjZl9kZWVwX3NsZWVwX2RpdmlkZXIsCisJCQlyZWdzX2FuZF9ieXBhc3MtPmRjZl9k
ZWVwX3NsZWVwX2FsbG93LAorCQkJYnlwYXNzX2Nsa3NbKGludCkgcmVnc19hbmRfYnlwYXNzLT5k
Y2ZjbGtfYnlwYXNzXSk7CisJCXJlbWFpbmluZ19idWZmZXIgLT0gY2hhcnNfcHJpbnRlZDsKKwkJ
KmxvZ19pbmZvLT5zdW1fY2hhcnNfcHJpbnRlZCArPSBjaGFyc19wcmludGVkOworCQlsb2dfaW5m
by0+cEJ1ZiArPSBjaGFyc19wcmludGVkOworCisJCWNoYXJzX3ByaW50ZWQgPSBzbnByaW50Zl9j
b3VudChsb2dfaW5mby0+cEJ1ZiwgcmVtYWluaW5nX2J1ZmZlciwgImRwcmVmY2xrLCVkLE4vQSxO
L0EsJXNcbiIsCisJCQlyZWdzX2FuZF9ieXBhc3MtPmRwcmVmY2xrLAorCQkJYnlwYXNzX2Nsa3Nb
KGludCkgcmVnc19hbmRfYnlwYXNzLT5kcHJlZmNsa19ieXBhc3NdKTsKKwkJcmVtYWluaW5nX2J1
ZmZlciAtPSBjaGFyc19wcmludGVkOworCQkqbG9nX2luZm8tPnN1bV9jaGFyc19wcmludGVkICs9
IGNoYXJzX3ByaW50ZWQ7CisJCWxvZ19pbmZvLT5wQnVmICs9IGNoYXJzX3ByaW50ZWQ7CisKKwkJ
Y2hhcnNfcHJpbnRlZCA9IHNucHJpbnRmX2NvdW50KGxvZ19pbmZvLT5wQnVmLCByZW1haW5pbmdf
YnVmZmVyLCAiZGlzcGNsaywlZCxOL0EsTi9BLCVzXG4iLAorCQkJcmVnc19hbmRfYnlwYXNzLT5k
aXNwY2xrLAorCQkJYnlwYXNzX2Nsa3NbKGludCkgcmVnc19hbmRfYnlwYXNzLT5kaXNwY2xrX2J5
cGFzc10pOworCQlyZW1haW5pbmdfYnVmZmVyIC09IGNoYXJzX3ByaW50ZWQ7CisJCSpsb2dfaW5m
by0+c3VtX2NoYXJzX3ByaW50ZWQgKz0gY2hhcnNfcHJpbnRlZDsKKwkJbG9nX2luZm8tPnBCdWYg
Kz0gY2hhcnNfcHJpbnRlZDsKKworCQkvL3NwbGl0CisJCWNoYXJzX3ByaW50ZWQgPSBzbnByaW50
Zl9jb3VudChsb2dfaW5mby0+cEJ1ZiwgcmVtYWluaW5nX2J1ZmZlciwgIlNQTElUXG4iKTsKKwkJ
cmVtYWluaW5nX2J1ZmZlciAtPSBjaGFyc19wcmludGVkOworCQkqbG9nX2luZm8tPnN1bV9jaGFy
c19wcmludGVkICs9IGNoYXJzX3ByaW50ZWQ7CisJCWxvZ19pbmZvLT5wQnVmICs9IGNoYXJzX3By
aW50ZWQ7CisKKwkJLy8gUkVHSVNURVIgVkFMVUVTCisJCWNoYXJzX3ByaW50ZWQgPSBzbnByaW50
Zl9jb3VudChsb2dfaW5mby0+cEJ1ZiwgcmVtYWluaW5nX2J1ZmZlciwgInJlZ19uYW1lLHZhbHVl
LGNsa190eXBlXG4iKTsKKwkJcmVtYWluaW5nX2J1ZmZlciAtPSBjaGFyc19wcmludGVkOworCQkq
bG9nX2luZm8tPnN1bV9jaGFyc19wcmludGVkICs9IGNoYXJzX3ByaW50ZWQ7CisJCWxvZ19pbmZv
LT5wQnVmICs9IGNoYXJzX3ByaW50ZWQ7CisKKwkJY2hhcnNfcHJpbnRlZCA9IHNucHJpbnRmX2Nv
dW50KGxvZ19pbmZvLT5wQnVmLCByZW1haW5pbmdfYnVmZmVyLCAiQ0xLMV9DTEszX0NVUlJFTlRf
Q05ULCVkLGRjZmNsa1xuIiwKKwkJCQlpbnRlcm5hbC5DTEsxX0NMSzNfQ1VSUkVOVF9DTlQpOwor
CQlyZW1haW5pbmdfYnVmZmVyIC09IGNoYXJzX3ByaW50ZWQ7CisJCSpsb2dfaW5mby0+c3VtX2No
YXJzX3ByaW50ZWQgKz0gY2hhcnNfcHJpbnRlZDsKKwkJbG9nX2luZm8tPnBCdWYgKz0gY2hhcnNf
cHJpbnRlZDsKKworCQljaGFyc19wcmludGVkID0gc25wcmludGZfY291bnQobG9nX2luZm8tPnBC
dWYsIHJlbWFpbmluZ19idWZmZXIsICJDTEsxX0NMSzNfRFNfQ05UTCwlZCxkY2ZfZGVlcF9zbGVl
cF9kaXZpZGVyXG4iLAorCQkJCQlpbnRlcm5hbC5DTEsxX0NMSzNfRFNfQ05UTCk7CisJCXJlbWFp
bmluZ19idWZmZXIgLT0gY2hhcnNfcHJpbnRlZDsKKwkJKmxvZ19pbmZvLT5zdW1fY2hhcnNfcHJp
bnRlZCArPSBjaGFyc19wcmludGVkOworCQlsb2dfaW5mby0+cEJ1ZiArPSBjaGFyc19wcmludGVk
OworCisJCWNoYXJzX3ByaW50ZWQgPSBzbnByaW50Zl9jb3VudChsb2dfaW5mby0+cEJ1ZiwgcmVt
YWluaW5nX2J1ZmZlciwgIkNMSzFfQ0xLM19BTExPV19EUywlZCxkY2ZfZGVlcF9zbGVlcF9hbGxv
d1xuIiwKKwkJCQkJaW50ZXJuYWwuQ0xLMV9DTEszX0FMTE9XX0RTKTsKKwkJcmVtYWluaW5nX2J1
ZmZlciAtPSBjaGFyc19wcmludGVkOworCQkqbG9nX2luZm8tPnN1bV9jaGFyc19wcmludGVkICs9
IGNoYXJzX3ByaW50ZWQ7CisJCWxvZ19pbmZvLT5wQnVmICs9IGNoYXJzX3ByaW50ZWQ7CisKKwkJ
Y2hhcnNfcHJpbnRlZCA9IHNucHJpbnRmX2NvdW50KGxvZ19pbmZvLT5wQnVmLCByZW1haW5pbmdf
YnVmZmVyLCAiQ0xLMV9DTEsyX0NVUlJFTlRfQ05ULCVkLGRwcmVmY2xrXG4iLAorCQkJCQlpbnRl
cm5hbC5DTEsxX0NMSzJfQ1VSUkVOVF9DTlQpOworCQlyZW1haW5pbmdfYnVmZmVyIC09IGNoYXJz
X3ByaW50ZWQ7CisJCSpsb2dfaW5mby0+c3VtX2NoYXJzX3ByaW50ZWQgKz0gY2hhcnNfcHJpbnRl
ZDsKKwkJbG9nX2luZm8tPnBCdWYgKz0gY2hhcnNfcHJpbnRlZDsKKworCQljaGFyc19wcmludGVk
ID0gc25wcmludGZfY291bnQobG9nX2luZm8tPnBCdWYsIHJlbWFpbmluZ19idWZmZXIsICJDTEsx
X0NMSzBfQ1VSUkVOVF9DTlQsJWQsZGlzcGNsa1xuIiwKKwkJCQkJaW50ZXJuYWwuQ0xLMV9DTEsw
X0NVUlJFTlRfQ05UKTsKKwkJcmVtYWluaW5nX2J1ZmZlciAtPSBjaGFyc19wcmludGVkOworCQkq
bG9nX2luZm8tPnN1bV9jaGFyc19wcmludGVkICs9IGNoYXJzX3ByaW50ZWQ7CisJCWxvZ19pbmZv
LT5wQnVmICs9IGNoYXJzX3ByaW50ZWQ7CisKKwkJY2hhcnNfcHJpbnRlZCA9IHNucHJpbnRmX2Nv
dW50KGxvZ19pbmZvLT5wQnVmLCByZW1haW5pbmdfYnVmZmVyLCAiQ0xLMV9DTEsxX0NVUlJFTlRf
Q05ULCVkLGRwcGNsa1xuIiwKKwkJCQkJaW50ZXJuYWwuQ0xLMV9DTEsxX0NVUlJFTlRfQ05UKTsK
KwkJcmVtYWluaW5nX2J1ZmZlciAtPSBjaGFyc19wcmludGVkOworCQkqbG9nX2luZm8tPnN1bV9j
aGFyc19wcmludGVkICs9IGNoYXJzX3ByaW50ZWQ7CisJCWxvZ19pbmZvLT5wQnVmICs9IGNoYXJz
X3ByaW50ZWQ7CisKKwkJY2hhcnNfcHJpbnRlZCA9IHNucHJpbnRmX2NvdW50KGxvZ19pbmZvLT5w
QnVmLCByZW1haW5pbmdfYnVmZmVyLCAiQ0xLMV9DTEszX0JZUEFTU19DTlRMLCVkLGRjZmNsa19i
eXBhc3NcbiIsCisJCQkJCWludGVybmFsLkNMSzFfQ0xLM19CWVBBU1NfQ05UTCk7CisJCXJlbWFp
bmluZ19idWZmZXIgLT0gY2hhcnNfcHJpbnRlZDsKKwkJKmxvZ19pbmZvLT5zdW1fY2hhcnNfcHJp
bnRlZCArPSBjaGFyc19wcmludGVkOworCQlsb2dfaW5mby0+cEJ1ZiArPSBjaGFyc19wcmludGVk
OworCisJCWNoYXJzX3ByaW50ZWQgPSBzbnByaW50Zl9jb3VudChsb2dfaW5mby0+cEJ1ZiwgcmVt
YWluaW5nX2J1ZmZlciwgIkNMSzFfQ0xLMl9CWVBBU1NfQ05UTCwlZCxkcHJlZmNsa19ieXBhc3Nc
biIsCisJCQkJCWludGVybmFsLkNMSzFfQ0xLMl9CWVBBU1NfQ05UTCk7CisJCXJlbWFpbmluZ19i
dWZmZXIgLT0gY2hhcnNfcHJpbnRlZDsKKwkJKmxvZ19pbmZvLT5zdW1fY2hhcnNfcHJpbnRlZCAr
PSBjaGFyc19wcmludGVkOworCQlsb2dfaW5mby0+cEJ1ZiArPSBjaGFyc19wcmludGVkOworCisJ
CWNoYXJzX3ByaW50ZWQgPSBzbnByaW50Zl9jb3VudChsb2dfaW5mby0+cEJ1ZiwgcmVtYWluaW5n
X2J1ZmZlciwgIkNMSzFfQ0xLMF9CWVBBU1NfQ05UTCwlZCxkaXNwY2xrX2J5cGFzc1xuIiwKKwkJ
CQkJaW50ZXJuYWwuQ0xLMV9DTEswX0JZUEFTU19DTlRMKTsKKwkJcmVtYWluaW5nX2J1ZmZlciAt
PSBjaGFyc19wcmludGVkOworCQkqbG9nX2luZm8tPnN1bV9jaGFyc19wcmludGVkICs9IGNoYXJz
X3ByaW50ZWQ7CisJCWxvZ19pbmZvLT5wQnVmICs9IGNoYXJzX3ByaW50ZWQ7CisKKwkJY2hhcnNf
cHJpbnRlZCA9IHNucHJpbnRmX2NvdW50KGxvZ19pbmZvLT5wQnVmLCByZW1haW5pbmdfYnVmZmVy
LCAiQ0xLMV9DTEsxX0JZUEFTU19DTlRMLCVkLGRwcGNsa19ieXBhc3NcbiIsCisJCQkJCWludGVy
bmFsLkNMSzFfQ0xLMV9CWVBBU1NfQ05UTCk7CisJCXJlbWFpbmluZ19idWZmZXIgLT0gY2hhcnNf
cHJpbnRlZDsKKwkJKmxvZ19pbmZvLT5zdW1fY2hhcnNfcHJpbnRlZCArPSBjaGFyc19wcmludGVk
OworCQlsb2dfaW5mby0+cEJ1ZiArPSBjaGFyc19wcmludGVkOworCX0KK30KKworLyogVGhpcyBm
dW5jdGlvbiBwcm9kdWNlIHRyYW5zbGF0ZWQgbG9naWNhbCBjbGsgc3RhdGUgdmFsdWVzKi8KK3Zv
aWQgcm5fZ2V0X2Nsa19zdGF0ZXMoc3RydWN0IGNsa19tZ3IgKmNsa19tZ3JfYmFzZSwgc3RydWN0
IGNsa19zdGF0ZXMgKnMpCit7CisJc3RydWN0IGNsa19zdGF0ZV9yZWdpc3RlcnNfYW5kX2J5cGFz
cyBzYiA9IHsgMCB9OworCXN0cnVjdCBjbGtfbG9nX2luZm8gbG9nX2luZm8gPSB7IDAgfTsKKwor
CXJuX2R1bXBfY2xrX3JlZ2lzdGVycygmc2IsIGNsa19tZ3JfYmFzZSwgJmxvZ19pbmZvKTsKKwor
CXMtPmRwcmVmY2xrX2toeiA9IHNiLmRwcmVmY2xrOworfQorCit2b2lkIHJuX2VuYWJsZV9wbWVf
d2Eoc3RydWN0IGNsa19tZ3IgKmNsa19tZ3JfYmFzZSkKK3sKKwlzdHJ1Y3QgY2xrX21ncl9pbnRl
cm5hbCAqY2xrX21nciA9IFRPX0NMS19NR1JfSU5URVJOQUwoY2xrX21ncl9iYXNlKTsKKworCXJu
X3ZiaW9zX3NtdV9lbmFibGVfcG1lX3dhKGNsa19tZ3IpOworfQorCitzdGF0aWMgc3RydWN0IGNs
a19tZ3JfZnVuY3MgZGNuMjFfZnVuY3MgPSB7CisJLmdldF9kcF9yZWZfY2xrX2ZyZXF1ZW5jeSA9
IGRjZTEyX2dldF9kcF9yZWZfZnJlcV9raHosCisJLnVwZGF0ZV9jbG9ja3MgPSBybl91cGRhdGVf
Y2xvY2tzLAorCS5pbml0X2Nsb2NrcyA9IGRjbjJfaW5pdF9jbG9ja3MsCisJLmVuYWJsZV9wbWVf
d2EgPSBybl9lbmFibGVfcG1lX3dhLAorCS8qIC5kdW1wX2Nsa19yZWdpc3RlcnMgPSBybl9kdW1w
X2Nsa19yZWdpc3RlcnMgKi8KK307CisKK3N0cnVjdCBjbGtfYndfcGFyYW1zIHJuX2J3X3BhcmFt
cyA9IHsKKwkudnJhbV90eXBlID0gRGRyNE1lbVR5cGUsCisJLm51bV9jaGFubmVscyA9IDEsCisJ
LmNsa190YWJsZSA9IHsKKwkJLmVudHJpZXMgPSB7CisJCQl7CisJCQkJLnZvbHRhZ2UgPSAwLAor
CQkJCS5kY2ZjbGtfbWh6ID0gNDAwLAorCQkJCS5mY2xrX21oeiA9IDQwMCwKKwkJCQkubWVtY2xr
X21oeiA9IDgwMCwKKwkJCQkuc29jY2xrX21oeiA9IDAsCisJCQl9LAorCQkJeworCQkJCS52b2x0
YWdlID0gMCwKKwkJCQkuZGNmY2xrX21oeiA9IDQ4MywKKwkJCQkuZmNsa19taHogPSA4MDAsCisJ
CQkJLm1lbWNsa19taHogPSAxNjAwLAorCQkJCS5zb2NjbGtfbWh6ID0gMCwKKwkJCX0sCisJCQl7
CisJCQkJLnZvbHRhZ2UgPSAwLAorCQkJCS5kY2ZjbGtfbWh6ID0gNjAyLAorCQkJCS5mY2xrX21o
eiA9IDEwNjcsCisJCQkJLm1lbWNsa19taHogPSAxMDY3LAorCQkJCS5zb2NjbGtfbWh6ID0gMCwK
KwkJCX0sCisJCQl7CisJCQkJLnZvbHRhZ2UgPSAwLAorCQkJCS5kY2ZjbGtfbWh6ID0gNzM4LAor
CQkJCS5mY2xrX21oeiA9IDEzMzMsCisJCQkJLm1lbWNsa19taHogPSAxNjAwLAorCQkJCS5zb2Nj
bGtfbWh6ID0gMCwKKwkJCX0sCisJCX0sCisKKwkJLm51bV9lbnRyaWVzID0gNCwKKwl9LAorCisJ
LndtX3RhYmxlID0geworCQkuZW50cmllcyA9IHsKKwkJCXsKKwkJCQkud21faW5zdCA9IFdNX0Es
CisJCQkJLndtX3R5cGUgPSBXTV9UWVBFX1BTVEFURV9DSEcsCisJCQkJLnBzdGF0ZV9sYXRlbmN5
X3VzID0gMjMuODQsCisJCQkJLnZhbGlkID0gdHJ1ZSwKKwkJCX0sCisJCQl7CisJCQkJLndtX2lu
c3QgPSBXTV9CLAorCQkJCS53bV90eXBlID0gV01fVFlQRV9QU1RBVEVfQ0hHLAorCQkJCS5wc3Rh
dGVfbGF0ZW5jeV91cyA9IDIzLjg0LAorCQkJCS52YWxpZCA9IHRydWUsCisJCQl9LAorCQkJewor
CQkJCS53bV9pbnN0ID0gV01fQywKKwkJCQkud21fdHlwZSA9IFdNX1RZUEVfUFNUQVRFX0NIRywK
KwkJCQkucHN0YXRlX2xhdGVuY3lfdXMgPSAyMy44NCwKKwkJCQkudmFsaWQgPSB0cnVlLAorCQkJ
fSwKKwkJCXsKKwkJCQkud21faW5zdCA9IFdNX0QsCisJCQkJLndtX3R5cGUgPSBXTV9UWVBFX1BT
VEFURV9DSEcsCisJCQkJLnBzdGF0ZV9sYXRlbmN5X3VzID0gMjMuODQsCisJCQkJLnZhbGlkID0g
dHJ1ZSwKKwkJCX0sCisJCX0sCisJfQorfTsKKwordm9pZCBidWlsZF93YXRlcm1hcmtfcmFuZ2Vz
KHN0cnVjdCBjbGtfYndfcGFyYW1zICpid19wYXJhbXMsIHN0cnVjdCBwcF9zbXVfd21fcmFuZ2Vf
c2V0cyAqcmFuZ2VzKQoreworCWludCBpLCBudW1fdmFsaWRfc2V0czsKKworCW51bV92YWxpZF9z
ZXRzID0gMDsKKworCWZvciAoaSA9IDA7IGkgPCBXTV9TRVRfQ09VTlQ7IGkrKykgeworCQkvKiBz
a2lwIGVtcHR5IGVudHJpZXMsIHRoZSBzbXUgYXJyYXkgaGFzIG5vIGhvbGVzKi8KKwkJaWYgKCFi
d19wYXJhbXMtPndtX3RhYmxlLmVudHJpZXNbaV0udmFsaWQpCisJCQljb250aW51ZTsKKworCQly
YW5nZXMtPnJlYWRlcl93bV9zZXRzW251bV92YWxpZF9zZXRzXS53bV9pbnN0ID0gYndfcGFyYW1z
LT53bV90YWJsZS5lbnRyaWVzW2ldLndtX2luc3Q7CisJCXJhbmdlcy0+cmVhZGVyX3dtX3NldHNb
bnVtX3ZhbGlkX3NldHNdLndtX3R5cGUgPSBid19wYXJhbXMtPndtX3RhYmxlLmVudHJpZXNbaV0u
d21fdHlwZTs7CisJCS8qIFdlIHdpbGwgbm90IHNlbGVjdCBXTSBiYXNlZCBvbiBkY2ZjbGssIHNv
IGxlYXZlIGl0IGFzIHVuY29uc3RyYWluZWQgKi8KKwkJcmFuZ2VzLT5yZWFkZXJfd21fc2V0c1tu
dW1fdmFsaWRfc2V0c10ubWluX2RyYWluX2Nsa19taHogPSBQUF9TTVVfV01fU0VUX1JBTkdFX0NM
S19VTkNPTlNUUkFJTkVEX01JTjsKKwkJcmFuZ2VzLT5yZWFkZXJfd21fc2V0c1tudW1fdmFsaWRf
c2V0c10ubWF4X2RyYWluX2Nsa19taHogPSBQUF9TTVVfV01fU0VUX1JBTkdFX0NMS19VTkNPTlNU
UkFJTkVEX01BWDsKKwkJLyogZmNsayB3aWwgYmUgdXNlZCB0byBzZWxlY3QgV00qLworCisJCWlm
IChyYW5nZXMtPnJlYWRlcl93bV9zZXRzW251bV92YWxpZF9zZXRzXS53bV90eXBlID09IFdNX1RZ
UEVfUFNUQVRFX0NIRykgeworCQkJaWYgKGkgPT0gMCkKKwkJCQlyYW5nZXMtPnJlYWRlcl93bV9z
ZXRzW251bV92YWxpZF9zZXRzXS5taW5fZmlsbF9jbGtfbWh6ID0gMDsKKwkJCWVsc2UgeworCQkJ
CS8qIGFkZCAxIHRvIG1ha2UgaXQgbm9uLW92ZXJsYXBwaW5nIHdpdGggbmV4dCBsdmwgKi8KKwkJ
CQlyYW5nZXMtPnJlYWRlcl93bV9zZXRzW251bV92YWxpZF9zZXRzXS5taW5fZmlsbF9jbGtfbWh6
ID0gYndfcGFyYW1zLT5jbGtfdGFibGUuZW50cmllc1tpIC0gMV0uZmNsa19taHogKyAxOworCQkJ
fQorCQkJcmFuZ2VzLT5yZWFkZXJfd21fc2V0c1tudW1fdmFsaWRfc2V0c10ubWF4X2ZpbGxfY2xr
X21oeiA9IGJ3X3BhcmFtcy0+Y2xrX3RhYmxlLmVudHJpZXNbaV0uZmNsa19taHo7CisKKwkJfSBl
bHNlIHsKKwkJCS8qIHVuY29uc3RyYWluZWQgZm9yIG1lbW9yeSByZXRyYWluaW5nICovCisJCQly
YW5nZXMtPnJlYWRlcl93bV9zZXRzW251bV92YWxpZF9zZXRzXS5taW5fZmlsbF9jbGtfbWh6ID0g
UFBfU01VX1dNX1NFVF9SQU5HRV9DTEtfVU5DT05TVFJBSU5FRF9NSU47CisJCQlyYW5nZXMtPnJl
YWRlcl93bV9zZXRzW251bV92YWxpZF9zZXRzXS5tYXhfZmlsbF9jbGtfbWh6ID0gUFBfU01VX1dN
X1NFVF9SQU5HRV9DTEtfVU5DT05TVFJBSU5FRF9NQVg7CisKKwkJCS8qIE1vZGlmeSBwcmV2aW91
cyB3YXRlcm1hcmsgcmFuZ2UgdG8gY292ZXIgdXAgdG8gbWF4ICovCisJCQlyYW5nZXMtPnJlYWRl
cl93bV9zZXRzW251bV92YWxpZF9zZXRzIC0gMV0ubWF4X2ZpbGxfY2xrX21oeiA9IFBQX1NNVV9X
TV9TRVRfUkFOR0VfQ0xLX1VOQ09OU1RSQUlORURfTUFYOworCQl9CisJCW51bV92YWxpZF9zZXRz
Kys7CisJfQorCisJQVNTRVJUKG51bV92YWxpZF9zZXRzICE9IDApOyAvKiBNdXN0IGhhdmUgYXQg
bGVhc3Qgb25lIHNldCBvZiB2YWxpZCB3YXRlcm1hcmtzICovCisJcmFuZ2VzLT5udW1fcmVhZGVy
X3dtX3NldHMgPSBudW1fdmFsaWRfc2V0czsKKworCS8qIG1vZGlmeSB0aGUgbWluIGFuZCBtYXgg
dG8gbWFrZSBzdXJlIHdlIGNvdmVyIHRoZSB3aG9sZSByYW5nZSovCisJcmFuZ2VzLT5yZWFkZXJf
d21fc2V0c1swXS5taW5fZHJhaW5fY2xrX21oeiA9IFBQX1NNVV9XTV9TRVRfUkFOR0VfQ0xLX1VO
Q09OU1RSQUlORURfTUlOOworCXJhbmdlcy0+cmVhZGVyX3dtX3NldHNbMF0ubWluX2ZpbGxfY2xr
X21oeiA9IFBQX1NNVV9XTV9TRVRfUkFOR0VfQ0xLX1VOQ09OU1RSQUlORURfTUlOOworCXJhbmdl
cy0+cmVhZGVyX3dtX3NldHNbcmFuZ2VzLT5udW1fcmVhZGVyX3dtX3NldHMgLSAxXS5tYXhfZHJh
aW5fY2xrX21oeiA9IFBQX1NNVV9XTV9TRVRfUkFOR0VfQ0xLX1VOQ09OU1RSQUlORURfTUFYOwor
CXJhbmdlcy0+cmVhZGVyX3dtX3NldHNbcmFuZ2VzLT5udW1fcmVhZGVyX3dtX3NldHMgLSAxXS5t
YXhfZmlsbF9jbGtfbWh6ID0gUFBfU01VX1dNX1NFVF9SQU5HRV9DTEtfVU5DT05TVFJBSU5FRF9N
QVg7CisKKwkvKiBUaGlzIGlzIGZvciB3cml0ZWJhY2sgb25seSwgZG9lcyBub3QgbWF0dGVyIGN1
cnJlbnRseSBhcyBubyB3cml0ZWJhY2sgc3VwcG9ydCovCisJcmFuZ2VzLT5udW1fd3JpdGVyX3dt
X3NldHMgPSAxOworCXJhbmdlcy0+d3JpdGVyX3dtX3NldHNbMF0ud21faW5zdCA9IFdNX0E7CisJ
cmFuZ2VzLT53cml0ZXJfd21fc2V0c1swXS5taW5fZmlsbF9jbGtfbWh6ID0gUFBfU01VX1dNX1NF
VF9SQU5HRV9DTEtfVU5DT05TVFJBSU5FRF9NSU47CisJcmFuZ2VzLT53cml0ZXJfd21fc2V0c1sw
XS5tYXhfZmlsbF9jbGtfbWh6ID0gUFBfU01VX1dNX1NFVF9SQU5HRV9DTEtfVU5DT05TVFJBSU5F
RF9NQVg7CisJcmFuZ2VzLT53cml0ZXJfd21fc2V0c1swXS5taW5fZHJhaW5fY2xrX21oeiA9IFBQ
X1NNVV9XTV9TRVRfUkFOR0VfQ0xLX1VOQ09OU1RSQUlORURfTUlOOworCXJhbmdlcy0+d3JpdGVy
X3dtX3NldHNbMF0ubWF4X2RyYWluX2Nsa19taHogPSBQUF9TTVVfV01fU0VUX1JBTkdFX0NMS19V
TkNPTlNUUkFJTkVEX01BWDsKKworfQorCit2b2lkIGNsa19tZ3JfaGVscGVyX3BvcHVsYXRlX2J3
X3BhcmFtcyhzdHJ1Y3QgY2xrX2J3X3BhcmFtcyAqYndfcGFyYW1zLCBzdHJ1Y3QgZHBtX2Nsb2Nr
cyAqY2xvY2tfdGFibGUsIHN0cnVjdCBod19hc2ljX2lkICphc2ljX2lkKQoreworCWludCBpOwor
CisJQVNTRVJUKFBQX1NNVV9OVU1fRkNMS19EUE1fTEVWRUxTIDw9IE1BWF9OVU1fRFBNX0xWTCk7
CisKKwlmb3IgKGkgPSAwOyBpIDwgUFBfU01VX05VTV9GQ0xLX0RQTV9MRVZFTFM7IGkrKykgewor
CQlpZiAoY2xvY2tfdGFibGUtPkZDbG9ja3NbaV0uRnJlcSA9PSAwKQorCQkJYnJlYWs7CisKKwkJ
YndfcGFyYW1zLT5jbGtfdGFibGUuZW50cmllc1tpXS5kY2ZjbGtfbWh6ID0gY2xvY2tfdGFibGUt
PkRjZkNsb2Nrc1tpXS5GcmVxOworCQlid19wYXJhbXMtPmNsa190YWJsZS5lbnRyaWVzW2ldLmZj
bGtfbWh6ID0gY2xvY2tfdGFibGUtPkZDbG9ja3NbaV0uRnJlcTsKKwkJYndfcGFyYW1zLT5jbGtf
dGFibGUuZW50cmllc1tpXS5tZW1jbGtfbWh6ID0gY2xvY2tfdGFibGUtPk1lbUNsb2Nrc1tpXS5G
cmVxOworCQlid19wYXJhbXMtPmNsa190YWJsZS5lbnRyaWVzW2ldLnNvY2Nsa19taHogPSBjbG9j
a190YWJsZS0+U29jQ2xvY2tzW2ldLkZyZXE7CisJCWJ3X3BhcmFtcy0+Y2xrX3RhYmxlLmVudHJp
ZXNbaV0udm9sdGFnZSA9IGNsb2NrX3RhYmxlLT5GQ2xvY2tzW2ldLlZvbDsKKwl9CisJYndfcGFy
YW1zLT5jbGtfdGFibGUubnVtX2VudHJpZXMgPSBpOworCisJYndfcGFyYW1zLT52cmFtX3R5cGUg
PSBhc2ljX2lkLT52cmFtX3R5cGU7CisJYndfcGFyYW1zLT5udW1fY2hhbm5lbHMgPSBhc2ljX2lk
LT52cmFtX3dpZHRoIC8gRERSNF9EUkFNX1dJRFRIOworCisJZm9yIChpID0gMDsgaSA8IFdNX1NF
VF9DT1VOVDsgaSsrKSB7CisJCWJ3X3BhcmFtcy0+d21fdGFibGUuZW50cmllc1tpXS53bV9pbnN0
ID0gaTsKKworCQlpZiAoY2xvY2tfdGFibGUtPkZDbG9ja3NbaV0uRnJlcSA9PSAwKSB7CisJCQli
d19wYXJhbXMtPndtX3RhYmxlLmVudHJpZXNbaV0udmFsaWQgPSBmYWxzZTsKKwkJCWNvbnRpbnVl
OworCQl9CisKKwkJYndfcGFyYW1zLT53bV90YWJsZS5lbnRyaWVzW2ldLndtX3R5cGUgPSBXTV9U
WVBFX1BTVEFURV9DSEc7CisJCWJ3X3BhcmFtcy0+d21fdGFibGUuZW50cmllc1tpXS52YWxpZCA9
IHRydWU7CisJfQorCisJaWYgKGJ3X3BhcmFtcy0+dnJhbV90eXBlID09IExwRGRyNE1lbVR5cGUp
IHsKKwkJLyoKKwkJICogV00gc2V0IEQgd2lsbCBiZSByZS1wdXJwb3NlZCBmb3IgbWVtb3J5IHJl
dHJhaW5pbmcKKwkJICovCisJCWJ3X3BhcmFtcy0+d21fdGFibGUuZW50cmllc1tXTV9EXS5wc3Rh
dGVfbGF0ZW5jeV91cyA9IExQRERSX01FTV9SRVRSQUlOX0xBVEVOQ1k7CisJCWJ3X3BhcmFtcy0+
d21fdGFibGUuZW50cmllc1tXTV9EXS53bV9pbnN0ID0gV01fRDsKKwkJYndfcGFyYW1zLT53bV90
YWJsZS5lbnRyaWVzW1dNX0RdLndtX3R5cGUgPSBXTV9UWVBFX1JFVFJBSU5JTkc7CisJCWJ3X3Bh
cmFtcy0+d21fdGFibGUuZW50cmllc1tXTV9EXS52YWxpZCA9IHRydWU7CisJfQorCit9CisKK3Zv
aWQgcm5fY2xrX21ncl9jb25zdHJ1Y3QoCisJCXN0cnVjdCBkY19jb250ZXh0ICpjdHgsCisJCXN0
cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyLAorCQlzdHJ1Y3QgcHBfc211X2Z1bmNzICpw
cF9zbXUsCisJCXN0cnVjdCBkY2NnICpkY2NnKQoreworCXN0cnVjdCBkY19kZWJ1Z19vcHRpb25z
ICpkZWJ1ZyA9ICZjdHgtPmRjLT5kZWJ1ZzsKKwlzdHJ1Y3QgZHBtX2Nsb2NrcyBjbG9ja190YWJs
ZSA9IHsgMCB9OworCXN0cnVjdCBjbGtfc3RhdGVfcmVnaXN0ZXJzX2FuZF9ieXBhc3MgcyA9IHsg
MCB9OworCisJY2xrX21nci0+YmFzZS5jdHggPSBjdHg7CisJY2xrX21nci0+YmFzZS5mdW5jcyA9
ICZkY24yMV9mdW5jczsKKworCWNsa19tZ3ItPnBwX3NtdSA9IHBwX3NtdTsKKworCWNsa19tZ3It
PmRjY2cgPSBkY2NnOworCWNsa19tZ3ItPmRmc19ieXBhc3NfZGlzcF9jbGsgPSAwOworCisJY2xr
X21nci0+ZHByZWZjbGtfc3NfcGVyY2VudGFnZSA9IDA7CisJY2xrX21nci0+ZHByZWZjbGtfc3Nf
ZGl2aWRlciA9IDEwMDA7CisJY2xrX21nci0+c3Nfb25fZHByZWZjbGsgPSBmYWxzZTsKKwljbGtf
bWdyLT5kZnNfcmVmX2ZyZXFfa2h6ID0gNDgwMDA7CisKKwljbGtfbWdyLT5zbXVfdmVyID0gcm5f
dmJpb3Nfc211X2dldF9zbXVfdmVyc2lvbihjbGtfbWdyKTsKKworCWlmIChJU19GUEdBX01BWElN
VVNfREMoY3R4LT5kY2VfZW52aXJvbm1lbnQpKSB7CisJCWRjbjIxX2Z1bmNzLnVwZGF0ZV9jbG9j
a3MgPSBkY24yX3VwZGF0ZV9jbG9ja3NfZnBnYTsKKwkJY2xrX21nci0+ZGVudGlzdF92Y29fZnJl
cV9raHogPSAzNjAwMDAwOworCQljbGtfbWdyLT5iYXNlLmRwcmVmY2xrX2toeiA9IDYwMDAwMDsK
Kwl9IGVsc2UgeworCQlzdHJ1Y3QgY2xrX2xvZ19pbmZvIGxvZ19pbmZvID0gezB9OworCisJCS8q
IFRPRE86IENoZWNrIHdlIGdldCB3aGF0IHdlIGV4cGVjdCBkdXJpbmcgYnJpbmd1cCAqLworCQlj
bGtfbWdyLT5kZW50aXN0X3Zjb19mcmVxX2toeiA9IGdldF92Y29fZnJlcXVlbmN5X2Zyb21fcmVn
KGNsa19tZ3IpOworCisJCS8qIGluIGNhc2Ugd2UgZG9uJ3QgZ2V0IGEgdmFsdWUgZnJvbSB0aGUg
cmVnaXN0ZXIsIHVzZSBkZWZhdWx0ICovCisJCWlmIChjbGtfbWdyLT5kZW50aXN0X3Zjb19mcmVx
X2toeiA9PSAwKQorCQkJY2xrX21nci0+ZGVudGlzdF92Y29fZnJlcV9raHogPSAzNjAwMDAwOwor
CisJCXJuX2R1bXBfY2xrX3JlZ2lzdGVycygmcywgJmNsa19tZ3ItPmJhc2UsICZsb2dfaW5mbyk7
CisJCWNsa19tZ3ItPmJhc2UuZHByZWZjbGtfa2h6ID0gcy5kcHJlZmNsazsKKworCQlpZiAoY2xr
X21nci0+YmFzZS5kcHJlZmNsa19raHogIT0gNjAwMDAwKSB7CisJCQljbGtfbWdyLT5iYXNlLmRw
cmVmY2xrX2toeiA9IDYwMDAwMDsKKwkJCUFTU0VSVCgxKTsgLy9UT0RPOiBSZW5vaXIgZm9sbG93
IHVwLgorCQl9CisKKwkJLyogaW4gY2FzZSB3ZSBkb24ndCBnZXQgYSB2YWx1ZSBmcm9tIHRoZSBy
ZWdpc3RlciwgdXNlIGRlZmF1bHQgKi8KKwkJaWYgKGNsa19tZ3ItPmJhc2UuZHByZWZjbGtfa2h6
ID09IDApCisJCQljbGtfbWdyLT5iYXNlLmRwcmVmY2xrX2toeiA9IDYwMDAwMDsKKwl9CisKKwlk
Y2VfY2xvY2tfcmVhZF9zc19pbmZvKGNsa19tZ3IpOworCisJY2xrX21nci0+YmFzZS5id19wYXJh
bXMgPSAmcm5fYndfcGFyYW1zOworCisJaWYgKHBwX3NtdSkgeworCQlwcF9zbXUtPnJuX2Z1bmNz
LmdldF9kcG1fY2xvY2tfdGFibGUoJnBwX3NtdS0+cm5fZnVuY3MucHBfc211LCAmY2xvY2tfdGFi
bGUpOworCQljbGtfbWdyX2hlbHBlcl9wb3B1bGF0ZV9id19wYXJhbXMoY2xrX21nci0+YmFzZS5i
d19wYXJhbXMsICZjbG9ja190YWJsZSwgJmN0eC0+YXNpY19pZCk7CisJfQorCisJLyoKKwkgKiBO
b3RpZnkgU01VIHdoaWNoIHNldCBvZiBXTSBzaG91bGQgYmUgc2VsZWN0ZWQgZm9yIGRpZmZlcmVu
dCByYW5nZXMgb2YgZmNsaworCSAqIE9uIFJlbm9pciB0aGVyZSBpcyBhIG1heGltdW11bSBvZiA0
IERGIHBzdGF0ZXMgc3VwcG9ydGVkLCBjb3VsZCBiZSBsZXNzCisJICogZGVwZW5kaW5nIG9uIERE
UiBzcGVlZCBhbmQgZnVzZWQgbWF4aW11bSBmY2xrLgorCSAqLworCWlmICghZGVidWctPmRpc2Fi
bGVfcHBsaWJfd21fcmFuZ2UpIHsKKwkJc3RydWN0IHBwX3NtdV93bV9yYW5nZV9zZXRzIHJhbmdl
cyA9IHswfTsKKworCQlidWlsZF93YXRlcm1hcmtfcmFuZ2VzKGNsa19tZ3ItPmJhc2UuYndfcGFy
YW1zLCAmcmFuZ2VzKTsKKworCQkvKiBOb3RpZnkgUFAgTGliL1NNVSB3aGljaCBXYXRlcm1hcmtz
IHRvIHVzZSBmb3Igd2hpY2ggY2xvY2sgcmFuZ2VzICovCisJCWlmIChwcF9zbXUgJiYgcHBfc211
LT5ybl9mdW5jcy5zZXRfd21fcmFuZ2VzKQorCQkJcHBfc211LT5ybl9mdW5jcy5zZXRfd21fcmFu
Z2VzKCZwcF9zbXUtPnJuX2Z1bmNzLnBwX3NtdSwgJnJhbmdlcyk7CisJfQorCisJLyogZW5hYmxl
IHBvd2VyZmVhdHVyZXMgd2hlbiBkaXNwbGF5Y291bnQgZ29lcyB0byAwICovCisJaWYgKCFkZWJ1
Zy0+ZGlzYWJsZV80OG1oel9wd3Jkd24pCisJCXJuX3ZiaW9zX3NtdV9lbmFibGVfNDhtaHpfdG1k
cF9yZWZjbGtfcHdyZHduKGNsa19tZ3IpOworfQorCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9kY24yMS9ybl9jbGtfbWdyLmggYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9kY24yMS9ybl9jbGtfbWdyLmgKbmV3IGZpbGUg
bW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5hYWRlYzA2ZmRlMTAKLS0tIC9kZXYvbnVs
bAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9kY24yMS9ybl9j
bGtfbWdyLmgKQEAgLTAsMCArMSwzOSBAQAorLyoKKyAqIENvcHlyaWdodCAyMDE4IEFkdmFuY2Vk
IE1pY3JvIERldmljZXMsIEluYy4KKyAqCisgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVk
LCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQorICogY29weSBvZiB0
aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29m
dHdhcmUiKSwKKyAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24s
IGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5
LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAorICogYW5k
L29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRv
IHdob20gdGhlCisgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8g
dGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgorICoKKyAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90
aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCisgKiBh
bGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KKyAqCisg
KiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBB
TlkgS0lORCwgRVhQUkVTUyBPUgorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRF
RCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCisgKiBGSVRORVNTIEZPUiBB
IFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hB
TEwKKyAqIFRIRSBDT1BZUklHSFQgSE9MREVSKFMpIE9SIEFVVEhPUihTKSBCRSBMSUFCTEUgRk9S
IEFOWSBDTEFJTSwgREFNQUdFUyBPUgorICogT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFO
IEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsCisgKiBBUklTSU5HIEZST00s
IE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IK
KyAqIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKiBBdXRob3JzOiBBTUQK
KyAqCisgKi8KKworI2lmbmRlZiBfX1JOX0NMS19NR1JfSF9fCisjZGVmaW5lIF9fUk5fQ0xLX01H
Ul9IX18KKworc3RydWN0IHJuX2Nsa19yZWdpc3RlcnMgeworCXVpbnQzMl90IENMSzFfQ0xLMF9D
VVJSRU5UX0NOVDsgLyogRFBSRUZDTEsgKi8KK307CisKKwordm9pZCBybl9jbGtfbWdyX2NvbnN0
cnVjdChzdHJ1Y3QgZGNfY29udGV4dCAqY3R4LAorCQlzdHJ1Y3QgY2xrX21ncl9pbnRlcm5hbCAq
Y2xrX21nciwKKwkJc3RydWN0IHBwX3NtdV9mdW5jcyAqcHBfc211LAorCQlzdHJ1Y3QgZGNjZyAq
ZGNjZyk7CisKKyNlbmRpZiAvL19fUk5fQ0xLX01HUl9IX18KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvZGlzcGxheS9kYy9jbGtfbWdyL2RjbjIxL3JuX2Nsa19tZ3JfdmJpb3Nfc211
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9kY24yMS9ybl9jbGtf
bWdyX3ZiaW9zX3NtdS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4u
NTA5ODRjMTgxMWJiCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2RjL2Nsa19tZ3IvZGNuMjEvcm5fY2xrX21ncl92Ymlvc19zbXUuYwpAQCAtMCwwICsxLDIw
MCBAQAorLyoKKyAqIENvcHlyaWdodCAyMDEyLTE2IEFkdmFuY2VkIE1pY3JvIERldmljZXMsIElu
Yy4KKyAqCisgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwg
dG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQorICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBh
c3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwKKyAqIHRvIGRl
YWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0
IGxpbWl0YXRpb24KKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBw
dWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAorICogYW5kL29yIHNlbGwgY29waWVzIG9m
IHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlCisgKiBTb2Z0
d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25k
aXRpb25zOgorICoKKyAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1p
c3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCisgKiBhbGwgY29waWVzIG9yIHN1YnN0
YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KKyAqCisgKiBUSEUgU09GVFdBUkUgSVMg
UFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBP
UgorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElF
UyBPRiBNRVJDSEFOVEFCSUxJVFksCisgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9T
RSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKKyAqIFRIRSBDT1BZUklH
SFQgSE9MREVSKFMpIE9SIEFVVEhPUihTKSBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdF
UyBPUgorICogT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFD
VCwgVE9SVCBPUiBPVEhFUldJU0UsCisgKiBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05O
RUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IKKyAqIE9USEVSIERFQUxJTkdT
IElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKiBBdXRob3JzOiBBTUQKKyAqCisgKi8KKworI2luY2x1
ZGUgImNvcmVfdHlwZXMuaCIKKyNpbmNsdWRlICJjbGtfbWdyX2ludGVybmFsLmgiCisjaW5jbHVk
ZSAicmVnX2hlbHBlci5oIgorCisjaW5jbHVkZSAicmVub2lyX2lwX29mZnNldC5oIgorCisjaW5j
bHVkZSAibXAvbXBfMTJfMF8wX29mZnNldC5oIgorI2luY2x1ZGUgIm1wL21wXzEyXzBfMF9zaF9t
YXNrLmgiCisKKyNkZWZpbmUgUkVHKHJlZ19uYW1lKSBcCisJKE1QMV9CQVNFLmluc3RhbmNlWzBd
LnNlZ21lbnRbbW0gIyMgcmVnX25hbWUgIyMgX0JBU0VfSURYXSArIG1tICMjIHJlZ19uYW1lKQor
CisjZGVmaW5lIEZOKHJlZ19uYW1lLCBmaWVsZCkgXAorCUZEKHJlZ19uYW1lIyNfXyMjZmllbGQp
CisKKyNkZWZpbmUgVkJJT1NTTUNfTVNHX1Rlc3RNZXNzYWdlICAgICAgICAgICAgICAgICAgMHgx
CisjZGVmaW5lIFZCSU9TU01DX01TR19HZXRTbXVWZXJzaW9uICAgICAgICAgICAgICAgIDB4Mgor
I2RlZmluZSBWQklPU1NNQ19NU0dfUG93ZXJVcEdmeCAgICAgICAgICAgICAgICAgICAweDMKKyNk
ZWZpbmUgVkJJT1NTTUNfTVNHX1NldERpc3BjbGtGcmVxICAgICAgICAgICAgICAgMHg0CisjZGVm
aW5lIFZCSU9TU01DX01TR19TZXREcHJlZmNsa0ZyZXEgICAgICAgICAgICAgIDB4NQorI2RlZmlu
ZSBWQklPU1NNQ19NU0dfUG93ZXJEb3duR2Z4ICAgICAgICAgICAgICAgICAweDYKKyNkZWZpbmUg
VkJJT1NTTUNfTVNHX1NldERwcGNsa0ZyZXEgICAgICAgICAgICAgICAgMHg3CisjZGVmaW5lIFZC
SU9TU01DX01TR19TZXRIYXJkTWluRGNmY2xrQnlGcmVxICAgICAgIDB4OAorI2RlZmluZSBWQklP
U1NNQ19NU0dfU2V0TWluRGVlcFNsZWVwRGNmY2xrICAgICAgICAweDkKKyNkZWZpbmUgVkJJT1NT
TUNfTVNHX1NldFBoeWNsa1ZvbHRhZ2VCeUZyZXEgICAgICAgMHhBCisjZGVmaW5lIFZCSU9TU01D
X01TR19HZXRGY2xrRnJlcXVlbmN5ICAgICAgICAgICAgIDB4QgorI2RlZmluZSBWQklPU1NNQ19N
U0dfU2V0RGlzcGxheUNvdW50ICAgICAgICAgICAgICAweEMKKyNkZWZpbmUgVkJJT1NTTUNfTVNH
X0VuYWJsZVRtZHA0OE1IelJlZmNsa1B3ckRvd24gMHhECisjZGVmaW5lIFZCSU9TU01DX01TR19V
cGRhdGVQbWVSZXN0b3JlCQkJICAweEUKKworaW50IHJuX3ZiaW9zX3NtdV9zZW5kX21zZ193aXRo
X3BhcmFtKHN0cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyLCB1bnNpZ25lZCBpbnQgbXNn
X2lkLCB1bnNpZ25lZCBpbnQgcGFyYW0pCit7CisJLyogRmlyc3QgY2xlYXIgcmVzcG9uc2UgcmVn
aXN0ZXIgKi8KKwlSRUdfV1JJVEUoTVAxX1NNTl9DMlBNU0dfOTEsIDApOworCisJLyogU2V0IHRo
ZSBwYXJhbWV0ZXIgcmVnaXN0ZXIgZm9yIHRoZSBTTVUgbWVzc2FnZSwgdW5pdCBpcyBNaHogKi8K
KwlSRUdfV1JJVEUoTVAxX1NNTl9DMlBNU0dfODMsIHBhcmFtKTsKKworCS8qIFRyaWdnZXIgdGhl
IG1lc3NhZ2UgdHJhbnNhY3Rpb24gYnkgd3JpdGluZyB0aGUgbWVzc2FnZSBJRCAqLworCVJFR19X
UklURShNUDFfU01OX0MyUE1TR182NywgbXNnX2lkKTsKKworCVJFR19XQUlUKE1QMV9TTU5fQzJQ
TVNHXzkxLCBDT05URU5ULCAxLCAxMCwgMjAwMDAwKTsKKworCS8qIEFjdHVhbCBkaXNwY2xrIHNl
dCBpcyByZXR1cm5lZCBpbiB0aGUgcGFyYW1ldGVyIHJlZ2lzdGVyICovCisJcmV0dXJuIFJFR19S
RUFEKE1QMV9TTU5fQzJQTVNHXzgzKTsKK30KKworaW50IHJuX3ZiaW9zX3NtdV9nZXRfc211X3Zl
cnNpb24oc3RydWN0IGNsa19tZ3JfaW50ZXJuYWwgKmNsa19tZ3IpCit7CisJcmV0dXJuIHJuX3Zi
aW9zX3NtdV9zZW5kX21zZ193aXRoX3BhcmFtKAorCQkJY2xrX21nciwKKwkJCVZCSU9TU01DX01T
R19HZXRTbXVWZXJzaW9uLAorCQkJMCk7Cit9CisKKworaW50IHJuX3ZiaW9zX3NtdV9zZXRfZGlz
cGNsayhzdHJ1Y3QgY2xrX21ncl9pbnRlcm5hbCAqY2xrX21nciwgaW50IHJlcXVlc3RlZF9kaXNw
Y2xrX2toeikKK3sKKwlpbnQgYWN0dWFsX2Rpc3BjbGtfc2V0X21oeiA9IC0xOworCXN0cnVjdCBk
YyAqY29yZV9kYyA9IGNsa19tZ3ItPmJhc2UuY3R4LT5kYzsKKwlzdHJ1Y3QgZG1jdSAqZG1jdSA9
IGNvcmVfZGMtPnJlc19wb29sLT5kbWN1OworCXVpbnQzMl90IGNsayA9IHJlcXVlc3RlZF9kaXNw
Y2xrX2toeiAvIDEwMDA7CisKKwlpZiAoY2xrIDw9IDEwMCkKKwkJY2xrID0gMTAxOworCisJLyog
IFVuaXQgb2YgU01VIG1zZyBwYXJhbWV0ZXIgaXMgTWh6ICovCisJYWN0dWFsX2Rpc3BjbGtfc2V0
X21oeiA9IHJuX3ZiaW9zX3NtdV9zZW5kX21zZ193aXRoX3BhcmFtKAorCQkJY2xrX21nciwKKwkJ
CVZCSU9TU01DX01TR19TZXREaXNwY2xrRnJlcSwKKwkJCWNsayk7CisKKwlpZiAoIUlTX0ZQR0Ff
TUFYSU1VU19EQyhjb3JlX2RjLT5jdHgtPmRjZV9lbnZpcm9ubWVudCkpIHsKKwkJaWYgKGRtY3Ug
JiYgZG1jdS0+ZnVuY3MtPmlzX2RtY3VfaW5pdGlhbGl6ZWQoZG1jdSkpIHsKKwkJCWlmIChjbGtf
bWdyLT5kZnNfYnlwYXNzX2Rpc3BfY2xrICE9IGFjdHVhbF9kaXNwY2xrX3NldF9taHopCisJCQkJ
ZG1jdS0+ZnVuY3MtPnNldF9wc3Jfd2FpdF9sb29wKGRtY3UsCisJCQkJCQlhY3R1YWxfZGlzcGNs
a19zZXRfbWh6IC8gNyk7CisJCX0KKwl9CisKKwlyZXR1cm4gYWN0dWFsX2Rpc3BjbGtfc2V0X21o
eiAqIDEwMDA7Cit9CisKK2ludCBybl92Ymlvc19zbXVfc2V0X2RwcmVmY2xrKHN0cnVjdCBjbGtf
bWdyX2ludGVybmFsICpjbGtfbWdyKQoreworCWludCBhY3R1YWxfZHByZWZjbGtfc2V0X21oeiA9
IC0xOworCisJYWN0dWFsX2RwcmVmY2xrX3NldF9taHogPSBybl92Ymlvc19zbXVfc2VuZF9tc2df
d2l0aF9wYXJhbSgKKwkJCWNsa19tZ3IsCisJCQlWQklPU1NNQ19NU0dfU2V0RHByZWZjbGtGcmVx
LAorCQkJY2xrX21nci0+YmFzZS5kcHJlZmNsa19raHogLyAxMDAwKTsKKworCS8qIFRPRE86IGFk
ZCBjb2RlIGZvciBwcm9ncmFtaW5nIERQIERUTywgY3VycmVudGx5IHRoaXMgaXMgZG93biBieSBj
b21tYW5kIHRhYmxlICovCisKKwlyZXR1cm4gYWN0dWFsX2RwcmVmY2xrX3NldF9taHogKiAxMDAw
OworfQorCitpbnQgcm5fdmJpb3Nfc211X3NldF9oYXJkX21pbl9kY2ZjbGsoc3RydWN0IGNsa19t
Z3JfaW50ZXJuYWwgKmNsa19tZ3IsIGludCByZXF1ZXN0ZWRfZGNmY2xrX2toeikKK3sKKwlpbnQg
YWN0dWFsX2RjZmNsa19zZXRfbWh6ID0gLTE7CisKKwlpZiAoY2xrX21nci0+c211X3ZlciA8IDB4
RkZGRkZGRkYpCisJCXJldHVybiBhY3R1YWxfZGNmY2xrX3NldF9taHo7CisKKwlhY3R1YWxfZGNm
Y2xrX3NldF9taHogPSBybl92Ymlvc19zbXVfc2VuZF9tc2dfd2l0aF9wYXJhbSgKKwkJCWNsa19t
Z3IsCisJCQlWQklPU1NNQ19NU0dfU2V0SGFyZE1pbkRjZmNsa0J5RnJlcSwKKwkJCXJlcXVlc3Rl
ZF9kY2ZjbGtfa2h6IC8gMTAwMCk7CisKKwlyZXR1cm4gYWN0dWFsX2RjZmNsa19zZXRfbWh6ICog
MTAwMDsKK30KKworaW50IHJuX3ZiaW9zX3NtdV9zZXRfbWluX2RlZXBfc2xlZXBfZGNmY2xrKHN0
cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyLCBpbnQgcmVxdWVzdGVkX21pbl9kc19kY2Zj
bGtfa2h6KQoreworCWludCBhY3R1YWxfbWluX2RzX2RjZmNsa19taHogPSAtMTsKKworCWlmIChj
bGtfbWdyLT5zbXVfdmVyIDwgMHhGRkZGRkZGRikKKwkJcmV0dXJuIGFjdHVhbF9taW5fZHNfZGNm
Y2xrX21oejsKKworCWFjdHVhbF9taW5fZHNfZGNmY2xrX21oeiA9IHJuX3ZiaW9zX3NtdV9zZW5k
X21zZ193aXRoX3BhcmFtKAorCQkJY2xrX21nciwKKwkJCVZCSU9TU01DX01TR19TZXRNaW5EZWVw
U2xlZXBEY2ZjbGssCisJCQlyZXF1ZXN0ZWRfbWluX2RzX2RjZmNsa19raHogLyAxMDAwKTsKKwor
CXJldHVybiBhY3R1YWxfbWluX2RzX2RjZmNsa19taHogKiAxMDAwOworfQorCit2b2lkIHJuX3Zi
aW9zX3NtdV9zZXRfcGh5Y2xrKHN0cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyLCBpbnQg
cmVxdWVzdGVkX3BoeWNsa19raHopCit7CisJcm5fdmJpb3Nfc211X3NlbmRfbXNnX3dpdGhfcGFy
YW0oCisJCQljbGtfbWdyLAorCQkJVkJJT1NTTUNfTVNHX1NldFBoeWNsa1ZvbHRhZ2VCeUZyZXEs
CisJCQlyZXF1ZXN0ZWRfcGh5Y2xrX2toeiAvIDEwMDApOworfQorCitpbnQgcm5fdmJpb3Nfc211
X3NldF9kcHBjbGsoc3RydWN0IGNsa19tZ3JfaW50ZXJuYWwgKmNsa19tZ3IsIGludCByZXF1ZXN0
ZWRfZHBwX2toeikKK3sKKwlpbnQgYWN0dWFsX2RwcGNsa19zZXRfbWh6ID0gLTE7CisKKwl1aW50
MzJfdCBjbGsgPSByZXF1ZXN0ZWRfZHBwX2toeiAvIDEwMDA7CisKKwlpZiAoY2xrIDw9IDEwMCkK
KwkJY2xrID0gMTAxOworCisJYWN0dWFsX2RwcGNsa19zZXRfbWh6ID0gcm5fdmJpb3Nfc211X3Nl
bmRfbXNnX3dpdGhfcGFyYW0oCisJCQljbGtfbWdyLAorCQkJVkJJT1NTTUNfTVNHX1NldERwcGNs
a0ZyZXEsCisJCQljbGspOworCisJcmV0dXJuIGFjdHVhbF9kcHBjbGtfc2V0X21oeiAqIDEwMDA7
Cit9CisKK3ZvaWQgcm5fdmJpb3Nfc211X3NldF9kaXNwbGF5X2NvdW50KHN0cnVjdCBjbGtfbWdy
X2ludGVybmFsICpjbGtfbWdyLCBpbnQgZGlzcGxheV9jb3VudCkKK3sKKwlybl92Ymlvc19zbXVf
c2VuZF9tc2dfd2l0aF9wYXJhbSgKKwkJCWNsa19tZ3IsCisJCQlWQklPU1NNQ19NU0dfU2V0RGlz
cGxheUNvdW50LAorCQkJZGlzcGxheV9jb3VudCk7Cit9CisKK3ZvaWQgcm5fdmJpb3Nfc211X2Vu
YWJsZV80OG1oel90bWRwX3JlZmNsa19wd3Jkd24oc3RydWN0IGNsa19tZ3JfaW50ZXJuYWwgKmNs
a19tZ3IpCit7CisJcm5fdmJpb3Nfc211X3NlbmRfbXNnX3dpdGhfcGFyYW0oCisJCQljbGtfbWdy
LAorCQkJVkJJT1NTTUNfTVNHX0VuYWJsZVRtZHA0OE1IelJlZmNsa1B3ckRvd24sCisJCQkwKTsK
K30KKwordm9pZCBybl92Ymlvc19zbXVfZW5hYmxlX3BtZV93YShzdHJ1Y3QgY2xrX21ncl9pbnRl
cm5hbCAqY2xrX21ncikKK3sKKwlybl92Ymlvc19zbXVfc2VuZF9tc2dfd2l0aF9wYXJhbSgKKwkJ
CWNsa19tZ3IsCisJCQlWQklPU1NNQ19NU0dfVXBkYXRlUG1lUmVzdG9yZSwKKwkJCTApOworfQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2Nsa19tZ3IvZGNuMjEv
cm5fY2xrX21ncl92Ymlvc19zbXUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9j
bGtfbWdyL2RjbjIxL3JuX2Nsa19tZ3JfdmJpb3Nfc211LmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMDAwMDAwLi5kYTNhNDk0ODdjNmQKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY2xrX21nci9kY24yMS9ybl9jbGtfbWdyX3ZiaW9z
X3NtdS5oCkBAIC0wLDAgKzEsNDAgQEAKKy8qCisgKiBDb3B5cmlnaHQgMjAxOCBBZHZhbmNlZCBN
aWNybyBEZXZpY2VzLCBJbmMuCisgKgorICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwg
ZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKKyAqIGNvcHkgb2YgdGhp
cyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3
YXJlIiksCisgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBp
bmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCisgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwg
bW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKKyAqIGFuZC9v
ciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3
aG9tIHRoZQorICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRo
ZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKKyAqCisgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGlj
ZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgorICogYWxs
IGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCisgKgorICog
VEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5Z
IEtJTkQsIEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQg
VE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAorICogRklUTkVTUyBGT1IgQSBQ
QVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxM
CisgKiBUSEUgQ09QWVJJR0hUIEhPTERFUihTKSBPUiBBVVRIT1IoUykgQkUgTElBQkxFIEZPUiBB
TlkgQ0xBSU0sIERBTUFHRVMgT1IKKyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBB
Q1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLAorICogQVJJU0lORyBGUk9NLCBP
VVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SCisg
KiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCisgKgorICogQXV0aG9yczogQU1ECisg
KgorICovCisKKyNpZm5kZWYgREFMX0RDX1JOX0NMS19NR1JfVkJJT1NfU01VX0hfCisjZGVmaW5l
IERBTF9EQ19STl9DTEtfTUdSX1ZCSU9TX1NNVV9IXworCitpbnQgcm5fdmJpb3Nfc211X2dldF9z
bXVfdmVyc2lvbihzdHJ1Y3QgY2xrX21ncl9pbnRlcm5hbCAqY2xrX21ncik7CitpbnQgcm5fdmJp
b3Nfc211X3NldF9kaXNwY2xrKHN0cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyLCBpbnQg
cmVxdWVzdGVkX2Rpc3BjbGtfa2h6KTsKK2ludCBybl92Ymlvc19zbXVfc2V0X2RwcmVmY2xrKHN0
cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyKTsKK2ludCBybl92Ymlvc19zbXVfc2V0X2hh
cmRfbWluX2RjZmNsayhzdHJ1Y3QgY2xrX21ncl9pbnRlcm5hbCAqY2xrX21nciwgaW50IHJlcXVl
c3RlZF9kY2ZjbGtfa2h6KTsKK2ludCBybl92Ymlvc19zbXVfc2V0X21pbl9kZWVwX3NsZWVwX2Rj
ZmNsayhzdHJ1Y3QgY2xrX21ncl9pbnRlcm5hbCAqY2xrX21nciwgaW50IHJlcXVlc3RlZF9taW5f
ZHNfZGNmY2xrX2toeik7Cit2b2lkIHJuX3ZiaW9zX3NtdV9zZXRfcGh5Y2xrKHN0cnVjdCBjbGtf
bWdyX2ludGVybmFsICpjbGtfbWdyLCBpbnQgcmVxdWVzdGVkX3BoeWNsa19raHopOworaW50IHJu
X3ZiaW9zX3NtdV9zZXRfZHBwY2xrKHN0cnVjdCBjbGtfbWdyX2ludGVybmFsICpjbGtfbWdyLCBp
bnQgcmVxdWVzdGVkX2RwcF9raHopOwordm9pZCBybl92Ymlvc19zbXVfc2V0X2Rpc3BsYXlfY291
bnQoc3RydWN0IGNsa19tZ3JfaW50ZXJuYWwgKmNsa19tZ3IsIGludCBkaXNwbGF5X2NvdW50KTsK
K3ZvaWQgcm5fdmJpb3Nfc211X2VuYWJsZV80OG1oel90bWRwX3JlZmNsa19wd3Jkd24oc3RydWN0
IGNsa19tZ3JfaW50ZXJuYWwgKmNsa19tZ3IpOwordm9pZCBybl92Ymlvc19zbXVfZW5hYmxlX3Bt
ZV93YShzdHJ1Y3QgY2xrX21ncl9pbnRlcm5hbCAqY2xrX21ncik7CisKKyNlbmRpZiAvKiBEQUxf
RENfRENOMTBfUlYxX0NMS19NR1JfVkJJT1NfU01VX0hfICovCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvaW5jL2h3L2Nsa19tZ3IuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvZGlzcGxheS9kYy9pbmMvaHcvY2xrX21nci5oCmluZGV4IDkzOGJkYzVjMjFhMS4uNzZm
OWFkMWIyM2RmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvaW5j
L2h3L2Nsa19tZ3IuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvaW5jL2h3
L2Nsa19tZ3IuaApAQCAtMzEsNiArMzEsMTI4IEBACiAjZGVmaW5lIERDTl9NSU5JTVVNX0RJU1BD
TEtfS2h6IDEwMDAwMAogI2RlZmluZSBEQ05fTUlOSU1VTV9EUFBDTEtfS2h6IDEwMDAwMAogCisj
aWZkZWYgQ09ORklHX0RSTV9BTURfRENfRENOMl8xCisvKiBDb25zdGFudHMgKi8KKyNkZWZpbmUg
RERSNF9EUkFNX1dJRFRIICAgNjQKKyNkZWZpbmUgV01fQSAwCisjZGVmaW5lIFdNX0IgMQorI2Rl
ZmluZSBXTV9DIDIKKyNkZWZpbmUgV01fRCAzCisjZGVmaW5lIFdNX1NFVF9DT1VOVCA0CisjZW5k
aWYKKworI2RlZmluZSBEQ05fTUlOSU1VTV9ESVNQQ0xLX0toeiAxMDAwMDAKKyNkZWZpbmUgRENO
X01JTklNVU1fRFBQQ0xLX0toeiAxMDAwMDAKKworI2lmZGVmIENPTkZJR19EUk1fQU1EX0RDX0RD
TjJfMQorLyogV2lsbCB0aGVzZSBidyBzdHJ1Y3R1cmVzIGJlIEFTSUMgc3BlY2lmaWM/ICovCisK
KyNkZWZpbmUgTUFYX05VTV9EUE1fTFZMCQk0CisjZGVmaW5lIFdNX1NFVF9DT1VOVCAJCTQKKwor
CitzdHJ1Y3QgY2xrX2xpbWl0X3RhYmxlX2VudHJ5IHsKKwl1bnNpZ25lZCBpbnQgdm9sdGFnZTsg
LyogbWlsaXZvbHRzIHdpdGhoIDIgZnJhY3Rpb25hbCBiaXRzICovCisJdW5zaWduZWQgaW50IGRj
ZmNsa19taHo7CisJdW5zaWduZWQgaW50IGZjbGtfbWh6OworCXVuc2lnbmVkIGludCBtZW1jbGtf
bWh6OworCXVuc2lnbmVkIGludCBzb2NjbGtfbWh6OworfTsKKworLyogVGhpcyB0YWJsZSBpcyBj
b250aWd1b3VzICovCitzdHJ1Y3QgY2xrX2xpbWl0X3RhYmxlIHsKKwlzdHJ1Y3QgY2xrX2xpbWl0
X3RhYmxlX2VudHJ5IGVudHJpZXNbTUFYX05VTV9EUE1fTFZMXTsKKwl1bnNpZ25lZCBpbnQgbnVt
X2VudHJpZXM7Cit9OworCitzdHJ1Y3Qgd21fcmFuZ2VfdGFibGVfZW50cnkgeworCXVuc2lnbmVk
IGludCB3bV9pbnN0OworCXVuc2lnbmVkIGludCB3bV90eXBlOworCWRvdWJsZSBwc3RhdGVfbGF0
ZW5jeV91czsKKwlib29sIHZhbGlkOworfTsKKworCitzdHJ1Y3QgY2xrX2xvZ19pbmZvIHsKKwli
b29sIGVuYWJsZWQ7CisJY2hhciAqcEJ1ZjsKKwl1bnNpZ25lZCBpbnQgYnVmU2l6ZTsKKwl1bnNp
Z25lZCBpbnQgKnN1bV9jaGFyc19wcmludGVkOworfTsKKworc3RydWN0IGNsa19zdGF0ZV9yZWdp
c3RlcnNfYW5kX2J5cGFzcyB7CisJdWludDMyX3QgZGNmY2xrOworCXVpbnQzMl90IGRjZl9kZWVw
X3NsZWVwX2RpdmlkZXI7CisJdWludDMyX3QgZGNmX2RlZXBfc2xlZXBfYWxsb3c7CisJdWludDMy
X3QgZHByZWZjbGs7CisJdWludDMyX3QgZGlzcGNsazsKKwl1aW50MzJfdCBkcHBjbGs7CisKKwl1
aW50MzJfdCBkcHBjbGtfYnlwYXNzOworCXVpbnQzMl90IGRjZmNsa19ieXBhc3M7CisJdWludDMy
X3QgZHByZWZjbGtfYnlwYXNzOworCXVpbnQzMl90IGRpc3BjbGtfYnlwYXNzOworfTsKKworc3Ry
dWN0IHJ2MV9jbGtfaW50ZXJuYWwgeworCXVpbnQzMl90IENMSzBfQ0xLOF9DVVJSRU5UX0NOVDsg
IC8vZGNmY2xrCisJdWludDMyX3QgQ0xLMF9DTEs4X0RTX0NOVEw7CQkgLy9kY2ZfZGVlcF9zbGVl
cF9kaXZpZGVyCisJdWludDMyX3QgQ0xLMF9DTEs4X0FMTE9XX0RTOwkgLy9kY2ZfZGVlcF9zbGVl
cF9hbGxvdworCXVpbnQzMl90IENMSzBfQ0xLMTBfQ1VSUkVOVF9DTlQ7IC8vZHByZWZjbGsKKwl1
aW50MzJfdCBDTEswX0NMSzExX0NVUlJFTlRfQ05UOyAvL2Rpc3BjbGsKKworCXVpbnQzMl90IENM
SzBfQ0xLOF9CWVBBU1NfQ05UTDsgIC8vZGNmY2xrIGJ5cGFzcworCXVpbnQzMl90IENMSzBfQ0xL
MTBfQllQQVNTX0NOVEw7IC8vZHByZWZjbGsgYnlwYXNzCisJdWludDMyX3QgQ0xLMF9DTEsxMV9C
WVBBU1NfQ05UTDsgLy9kaXNwY2xrIGJ5cGFzcworfTsKKworc3RydWN0IHJuX2Nsa19pbnRlcm5h
bCB7CisJdWludDMyX3QgQ0xLMV9DTEswX0NVUlJFTlRfQ05UOyAvL2Rpc3BjbGsKKwl1aW50MzJf
dCBDTEsxX0NMSzFfQ1VSUkVOVF9DTlQ7IC8vZHBwY2xrCisJdWludDMyX3QgQ0xLMV9DTEsyX0NV
UlJFTlRfQ05UOyAvL2RwcmVmY2xrCisJdWludDMyX3QgQ0xLMV9DTEszX0NVUlJFTlRfQ05UOyAv
L2RjZmNsaworCXVpbnQzMl90IENMSzFfQ0xLM19EU19DTlRMOwkJLy9kY2ZfZGVlcF9zbGVlcF9k
aXZpZGVyCisJdWludDMyX3QgQ0xLMV9DTEszX0FMTE9XX0RTOwkvL2RjZl9kZWVwX3NsZWVwX2Fs
bG93CisKKwl1aW50MzJfdCBDTEsxX0NMSzBfQllQQVNTX0NOVEw7IC8vZGlzcGNsayBieXBhc3MK
Kwl1aW50MzJfdCBDTEsxX0NMSzFfQllQQVNTX0NOVEw7IC8vZHBwY2xrIGJ5cGFzcworCXVpbnQz
Ml90IENMSzFfQ0xLMl9CWVBBU1NfQ05UTDsgLy9kcHJlZmNsayBieXBhc3MKKwl1aW50MzJfdCBD
TEsxX0NMSzNfQllQQVNTX0NOVEw7IC8vZGNmY2xrIGJ5cGFzcworCit9OworCisvKiBGb3IgZHRu
IGxvZ2dpbmcgYW5kIGRlYnVnZ2luZyAqLworc3RydWN0IGNsa19zdGF0ZV9yZWdpc3RlcnMgewor
CQl1aW50MzJfdCBDTEswX0NMSzhfQ1VSUkVOVF9DTlQ7ICAvL2RjZmNsaworCQl1aW50MzJfdCBD
TEswX0NMSzhfRFNfQ05UTDsJCSAvL2RjZl9kZWVwX3NsZWVwX2RpdmlkZXIKKwkJdWludDMyX3Qg
Q0xLMF9DTEs4X0FMTE9XX0RTOwkgLy9kY2ZfZGVlcF9zbGVlcF9hbGxvdworCQl1aW50MzJfdCBD
TEswX0NMSzEwX0NVUlJFTlRfQ05UOyAvL2RwcmVmY2xrCisJCXVpbnQzMl90IENMSzBfQ0xLMTFf
Q1VSUkVOVF9DTlQ7IC8vZGlzcGNsaworfTsKKworLyogVE9ETzogY29tYmluZSB0aGlzIHdpdGgg
dGhlIGFib3ZlICovCitzdHJ1Y3QgY2xrX2J5cGFzcyB7CisJdWludDMyX3QgZGNmY2xrX2J5cGFz
czsKKwl1aW50MzJfdCBkaXNwY2xrX3B5cGFzczsKKwl1aW50MzJfdCBkcHJlZmNsa19ieXBhc3M7
Cit9OworLyoKKyAqIFRoaXMgdGFibGUgaXMgbm90IGNvbnRpZ3VvdXMsIGNhbiBoYXZlIGhvbGVz
LCBlYWNoCisgKiBlbnRyeSBjb3JyZXNwb25kIHRvIG9uZSBzZXQgb2YgV00uIEZvciBleGFtcGxl
IGlmCisgKiB3ZSBoYXZlIDIgRFBNIGFuZCBMUEREUiwgd2Ugd2lsbCBXTSBzZXQgQSwgQiBhbmQK
KyAqIEQgb2NjdXBpZWQsIEMgd2lsbCBiZSBlbXB0cnkuCisgKi8KK3N0cnVjdCB3bV90YWJsZSB7
CisJc3RydWN0IHdtX3JhbmdlX3RhYmxlX2VudHJ5IGVudHJpZXNbV01fU0VUX0NPVU5UXTsKK307
CisKK3N0cnVjdCBjbGtfYndfcGFyYW1zIHsKKwl1bnNpZ25lZCBpbnQgdnJhbV90eXBlOworCXVu
c2lnbmVkIGludCBudW1fY2hhbm5lbHM7CisJc3RydWN0IGNsa19saW1pdF90YWJsZSBjbGtfdGFi
bGU7CisJc3RydWN0IHdtX3RhYmxlIHdtX3RhYmxlOworfTsKKyNlbmRpZgogLyogUHVibGljIGlu
dGVyZmFjZXMgKi8KIAogc3RydWN0IGNsa19zdGF0ZXMgewpAQCAtNjUsNiArMTg3LDkgQEAgc3Ry
dWN0IGNsa19tZ3IgewogCXN0cnVjdCBjbGtfbWdyX2Z1bmNzICpmdW5jczsKIAlzdHJ1Y3QgZGNf
Y2xvY2tzIGNsa3M7CiAJaW50IGRwcmVmY2xrX2toejsgLy8gVXNlZCBieSBwcm9ncmFtIHBpeGVs
IGNsb2NrIGluIGNsb2NrIHNvdXJjZSBmdW5jcywgbmVlZCB0byBmaWd1cmVvdXQgd2hlcmUgdGhp
cyBnb2VzCisjaWZkZWYgQ09ORklHX0RSTV9BTURfRENfRENOMl8xCisJc3RydWN0IGNsa19id19w
YXJhbXMgKmJ3X3BhcmFtczsKKyNlbmRpZgogfTsKIAogLyogZm9yd2FyZCBkZWNsYXJhdGlvbnMg
Ki8KLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
