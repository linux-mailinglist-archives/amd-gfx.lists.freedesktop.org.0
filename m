Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 41ECF105AD2
	for <lists+amd-gfx@lfdr.de>; Thu, 21 Nov 2019 21:05:34 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 925986E09F;
	Thu, 21 Nov 2019 20:05:32 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x343.google.com (mail-wm1-x343.google.com
 [IPv6:2a00:1450:4864:20::343])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 780F26E09F
 for <amd-gfx@lists.freedesktop.org>; Thu, 21 Nov 2019 20:05:30 +0000 (UTC)
Received: by mail-wm1-x343.google.com with SMTP id z19so5169005wmk.3
 for <amd-gfx@lists.freedesktop.org>; Thu, 21 Nov 2019 12:05:30 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=dM9ko2WAq4XsqOBIb+GptTZThCh0rMt06o2JUb7Wg9U=;
 b=ZZ8MIXmPDA37TsZgXpDnsnANpT9EundWAS1ZuyivQan6pcqc7X8c9SRXYyQ9AVoh19
 QZITkSUr5VJqG0wfmEPMeeL51jsK38QCtZEDxReX9szed5MWBkCXfIar/8LWU55a4ycl
 MBoGgOxKD1jdGJsB9ok7aDVabyl88ZNIv2aXMZy/zvN5//3XpcysHFg1aXkuiWjNAYlM
 pnTDA0h9iPjHvh9bb776v0NNAaTsiMZ+4Nf3DA/9vvnBuK6bAygiu1HdqpVPkRFDpQOi
 rqLj4ifUE4YLXz0kJ3Ec3AnLsmspAhGNY6KWfxOfwNRaRI6qmIefFgW2y3gO9rauN3aL
 za+g==
X-Gm-Message-State: APjAAAXFy1lXQfkP4Mk4YU406E5swrUOJWguyOeeZK/uJwvdwHocPq40
 1zzTzS0oByYvw9E+a9S98vigqij91opfufxAz/A=
X-Google-Smtp-Source: APXvYqyzO/ZVF56/Di62mIWrmEPVDgxKD1PagsHuVrmKt0KI12BxUm9yz2KhZ9tgfaQrJbfeJxtsvnPFqYBjYOZ92nI=
X-Received: by 2002:a7b:cb89:: with SMTP id m9mr12366670wmi.141.1574366728826; 
 Thu, 21 Nov 2019 12:05:28 -0800 (PST)
MIME-Version: 1.0
References: <20191121165529.3941-1-alexander.deucher@amd.com>
 <CAPM=9twAwCJaXHS=cWNCihsyfydAKqQ1igjLt1g_vbFBL0bdMg@mail.gmail.com>
In-Reply-To: <CAPM=9twAwCJaXHS=cWNCihsyfydAKqQ1igjLt1g_vbFBL0bdMg@mail.gmail.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Thu, 21 Nov 2019 15:05:16 -0500
Message-ID: <CADnq5_N5GFf2kHANxBHn_Pn3=XZ=XcfgociQaDxp7zd0Hewjkw@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu: move pci handling out of pm ops
To: Dave Airlie <airlied@gmail.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=dM9ko2WAq4XsqOBIb+GptTZThCh0rMt06o2JUb7Wg9U=;
 b=myOktGV4kZ4l9AhQ1/XTalUipgbe/fsEIPIgBSOHmCtRzpLlikpFiYGMGlwqJiwDnX
 sguReMeSRydrxG+N0cGirT6IXqSPyz+BuXSuBU4I600EQpPdEdjminaanPr8NdNB4dxg
 Jumn3QD/bhbMurKhbTrwhrev+Z0xPBRzuTrKzZzyxLT0jkPY1Vtweox+eD05C9oi9mMO
 3b7QBKTmYb0dbi+UXv+INnsUx6ATPADQtS3nRXHcNjWe2tq3l5ifbmEumHEL6WTTc75v
 DQTbLH6EV6gPfrtEe8u/OqZ3RNtqWIZHq/rxK5qLmVbG5GNdmmP64a68jLfXMc9j3QdM
 PSSg==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>,
 amd-gfx mailing list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBOb3YgMjEsIDIwMTkgYXQgMjo1MyBQTSBEYXZlIEFpcmxpZSA8YWlybGllZEBnbWFp
bC5jb20+IHdyb3RlOgo+Cj4gT24gRnJpLCAyMiBOb3YgMjAxOSBhdCAwMjo1NSwgQWxleCBEZXVj
aGVyIDxhbGV4ZGV1Y2hlckBnbWFpbC5jb20+IHdyb3RlOgo+ID4KPiA+IFRoZSBkb2N1bWVudGF0
aW9uIHNheXMgdGhlIHRoYXQgUENJIGNvcmUgaGFuZGxlcyB0aGlzCj4gPiBmb3IgeW91IHVubGVz
cyB5b3UgY2hvb3NlIHRvIGltcGxlbWVudCBpdC4gIEp1c3QgcmVseQo+ID4gb24gdGhlIFBDSSBj
b3JlIHRvIGhhbmRsZSB0aGUgcGNpIHNwZWNpZmljIGJpdHMuCj4gPgo+ID4gU2lnbmVkLW9mZi1i
eTogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgo+ID4gLS0tCj4gPiAg
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmggICAgICAgIHwgIDQgKy0tCj4gPiAg
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIHwgMzMgKysrKysrKysr
LS0tLS0tLS0tLS0tLQo+ID4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYu
YyAgICB8IDE2ICsrKysrLS0tLS0tCj4gPiAgMyBmaWxlcyBjaGFuZ2VkLCAyNCBpbnNlcnRpb25z
KCspLCAyOSBkZWxldGlvbnMoLSkKPiA+Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1LmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUu
aAo+ID4gaW5kZXggOTc4NDM0NjJjMmZiLi4yZTlkMGJlMDVmMmYgMTAwNjQ0Cj4gPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaAo+ID4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKPiA+IEBAIC0xMTkxLDggKzExOTEsOCBAQCBpbnQgYW1k
Z3B1X2RyaXZlcl9vcGVuX2ttcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2Zp
bGUgKmZpbGVfcHJpdik7Cj4gPiAgdm9pZCBhbWRncHVfZHJpdmVyX3Bvc3RjbG9zZV9rbXMoc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KTsKPiA+ICBpbnQgYW1kZ3B1X2RldmljZV9pcF9z
dXNwZW5kKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiA+IC1pbnQgYW1kZ3B1X2Rldmlj
ZV9zdXNwZW5kKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIGJvb2wgc3VzcGVuZCwgYm9vbCBmYmNv
bik7Cj4gPiAtaW50IGFtZGdwdV9kZXZpY2VfcmVzdW1lKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
IGJvb2wgcmVzdW1lLCBib29sIGZiY29uKTsKPiA+ICtpbnQgYW1kZ3B1X2RldmljZV9zdXNwZW5k
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIGJvb2wgZmJjb24pOwo+ID4gK2ludCBhbWRncHVfZGV2
aWNlX3Jlc3VtZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBib29sIGZiY29uKTsKPiA+ICB1MzIg
YW1kZ3B1X2dldF92YmxhbmtfY291bnRlcl9rbXMoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5z
aWduZWQgaW50IHBpcGUpOwo+ID4gIGludCBhbWRncHVfZW5hYmxlX3ZibGFua19rbXMoc3RydWN0
IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHBpcGUpOwo+ID4gIHZvaWQgYW1kZ3B1X2Rp
c2FibGVfdmJsYW5rX2ttcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25lZCBpbnQgcGlw
ZSk7Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rl
dmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCj4gPiBp
bmRleCBiMTQwOGM1ZTQ2NDAuLmQ4MzJiZDIyYmE5ZCAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYwo+ID4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCj4gPiBAQCAtMTA5MCw2ICsxMDkwLDcgQEAg
c3RhdGljIGludCBhbWRncHVfZGV2aWNlX2NoZWNrX2FyZ3VtZW50cyhzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldikKPiA+ICBzdGF0aWMgdm9pZCBhbWRncHVfc3dpdGNoZXJvb19zZXRfc3RhdGUo
c3RydWN0IHBjaV9kZXYgKnBkZXYsIGVudW0gdmdhX3N3aXRjaGVyb29fc3RhdGUgc3RhdGUpCj4g
PiAgewo+ID4gICAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gcGNpX2dldF9kcnZkYXRh
KHBkZXYpOwo+ID4gKyAgICAgICBpbnQgcjsKPiA+Cj4gPiAgICAgICAgIGlmIChhbWRncHVfZGV2
aWNlX3N1cHBvcnRzX2JvY28oZGV2KSAmJiBzdGF0ZSA9PSBWR0FfU1dJVENIRVJPT19PRkYpCj4g
PiAgICAgICAgICAgICAgICAgcmV0dXJuOwo+ID4gQEAgLTEwOTksNyArMTEwMCwxMiBAQCBzdGF0
aWMgdm9pZCBhbWRncHVfc3dpdGNoZXJvb19zZXRfc3RhdGUoc3RydWN0IHBjaV9kZXYgKnBkZXYs
IGVudW0gdmdhX3N3aXRjaGVybwo+ID4gICAgICAgICAgICAgICAgIC8qIGRvbid0IHN1c3BlbmQg
b3IgcmVzdW1lIGNhcmQgbm9ybWFsbHkgKi8KPiA+ICAgICAgICAgICAgICAgICBkZXYtPnN3aXRj
aF9wb3dlcl9zdGF0ZSA9IERSTV9TV0lUQ0hfUE9XRVJfQ0hBTkdJTkc7Cj4gPgo+ID4gLSAgICAg
ICAgICAgICAgIGFtZGdwdV9kZXZpY2VfcmVzdW1lKGRldiwgdHJ1ZSwgdHJ1ZSk7Cj4gPiArICAg
ICAgICAgICAgICAgcGNpX3NldF9wb3dlcl9zdGF0ZShkZXYtPnBkZXYsIFBDSV9EMCk7Cj4gPiAr
ICAgICAgICAgICAgICAgcGNpX3Jlc3RvcmVfc3RhdGUoZGV2LT5wZGV2KTsKPiA+ICsgICAgICAg
ICAgICAgICByID0gcGNpX2VuYWJsZV9kZXZpY2UoZGV2LT5wZGV2KTsKPiA+ICsgICAgICAgICAg
ICAgICBpZiAocikKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIERSTV9XQVJOKCJwY2lfZW5h
YmxlX2RldmljZSBmYWlsZWQgKCVkKVxuIiwgcik7Cj4gPiArICAgICAgICAgICAgICAgYW1kZ3B1
X2RldmljZV9yZXN1bWUoZGV2LCB0cnVlKTsKPiA+Cj4gPiAgICAgICAgICAgICAgICAgZGV2LT5z
d2l0Y2hfcG93ZXJfc3RhdGUgPSBEUk1fU1dJVENIX1BPV0VSX09OOwo+ID4gICAgICAgICAgICAg
ICAgIGRybV9rbXNfaGVscGVyX3BvbGxfZW5hYmxlKGRldik7Cj4gPiBAQCAtMTEwNyw3ICsxMTEz
LDExIEBAIHN0YXRpYyB2b2lkIGFtZGdwdV9zd2l0Y2hlcm9vX3NldF9zdGF0ZShzdHJ1Y3QgcGNp
X2RldiAqcGRldiwgZW51bSB2Z2Ffc3dpdGNoZXJvCj4gPiAgICAgICAgICAgICAgICAgcHJfaW5m
bygiYW1kZ3B1OiBzd2l0Y2hlZCBvZmZcbiIpOwo+ID4gICAgICAgICAgICAgICAgIGRybV9rbXNf
aGVscGVyX3BvbGxfZGlzYWJsZShkZXYpOwo+ID4gICAgICAgICAgICAgICAgIGRldi0+c3dpdGNo
X3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRDSF9QT1dFUl9DSEFOR0lORzsKPiA+IC0gICAgICAgICAg
ICAgICBhbWRncHVfZGV2aWNlX3N1c3BlbmQoZGV2LCB0cnVlLCB0cnVlKTsKPiA+ICsgICAgICAg
ICAgICAgICBhbWRncHVfZGV2aWNlX3N1c3BlbmQoZGV2LCB0cnVlKTsKPiA+ICsgICAgICAgICAg
ICAgICBwY2lfc2F2ZV9zdGF0ZShkZXYtPnBkZXYpOwo+ID4gKyAgICAgICAgICAgICAgIC8qIFNo
dXQgZG93biB0aGUgZGV2aWNlICovCj4gPiArICAgICAgICAgICAgICAgcGNpX2Rpc2FibGVfZGV2
aWNlKGRldi0+cGRldik7Cj4gPiArICAgICAgICAgICAgICAgcGNpX3NldF9wb3dlcl9zdGF0ZShk
ZXYtPnBkZXYsIFBDSV9EM2NvbGQpOwo+Cj4KPiBJIHRoaW5rIHRoaXMgd2lsbCBicmVhayBEMyBj
b2xkIG9uIEFUUFggc3lzdGVtcyAoaS5lLiBiZWZvcmUgUENJRSBkMwo+IGNvbGQgc3VwcG9ydCku
Cj4KPiBJJ20gbm90IDEwMCUgc3VyZSBidXQgSSdkIHJlYWxseSBsaWtlIHRvIHRlc3QgaXQsIGFz
IEkgZG9uJ3QgdGhpbmsgdGhlCj4gY29yZSB3aWxsIHB1dCB0aGUgZGV2aWNlIGludG8gRDNjb2xk
IGZvciB1cyBoZXJlLgoKU2hvdWxkIGJlIHRoZSBzYW1lIGFzIGJlZm9yZSwgSSBqdXN0IG1vdmVk
IHRoZSBwY2kgZnVuY3MgdXAgZnJvbSB0aGUKY2FsbGVlIGludG8gdGhlIGNhbGxlciwgb3IgYXJl
IHlvdSB0YWxraW5nIGFib3V0IHRoZSBzd2l0Y2ggZnJvbSBkM2hvdAp0byBkM2NvbGQ/ICBJIGNh
biBtYWtlIHRoZSBob3QvY29sZCBjaGFuZ2UgYSBzZXBhcmF0ZSBjb21taXQgaG93ZXZlci4KVGhh
dCBzYWlkLCBpdCBkb2Vzbid0IHJlYWxseSBtYXR0ZXIgd2hhdCBkMyBzdGF0ZSB3ZSBjaG9vc2Ug
aGVyZS4gIFRoZQpBUFRYIGNhbGwgY3V0cyB0aGUgcG93ZXIgcmFpbCBhbnl3YXkgKGVmZmVjdGl2
ZWx5IGQzY29sZCkuCgpBbGV4Cgo+Cj4gRGF2ZS4KX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9hbWQtZ2Z4
