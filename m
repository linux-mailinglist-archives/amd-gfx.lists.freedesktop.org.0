Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A5DF339FB3
	for <lists+amd-gfx@lfdr.de>; Sat,  8 Jun 2019 14:50:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 126C289230;
	Sat,  8 Jun 2019 12:50:15 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 09D4589230
 for <amd-gfx@lists.freedesktop.org>; Sat,  8 Jun 2019 12:50:14 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id n4so4748588wrs.3
 for <amd-gfx@lists.freedesktop.org>; Sat, 08 Jun 2019 05:50:13 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:cc:references:from
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-transfer-encoding:content-language;
 bh=EDINd/WAlzER/f3JFplSOFgOMTjfnsxjhfiFsrWggHg=;
 b=NgpRaTI18f8OwJ7I9hZaVmy+wxC77AcbGYtm0i3ys13jA8GIeK/ghfEwtua7Hhhq8E
 WPGo4/+I++fsgmUdh6ADHSSYNXV7g82Hty4WkNUhlD7DaIz8s8uDwHOqNfdKhzrb690x
 mHbN3spqaWdKcg7cb46nFb4uVEayrlVCVwnwAZmQaZyvBxWqe6/F5bpqCqRcMDv2C1PC
 ioGBJ4gvFr5ixp9ikRPx6pC2RBrWwHamZzKtUYjq/YLgxOgBO1GPj5ZiH4gD87ZrQr76
 2InJvK4mn4Nc9zl6wpQfry7fX2HIYHM46UpuK3B8jcfSE25AQW8CEscqdgnMuVnWJL7E
 aYUA==
X-Gm-Message-State: APjAAAV+BYm/pUda6namub4xGO7sa4YHOcFeZnetYshBybHqhjJRmt+y
 K82S0lL/KjVLakjcuZObCfY=
X-Google-Smtp-Source: APXvYqx9NbGq0FRNmBy6fm3g/oHw9WRrTN0Z7dxRlT2LoP9JN87rEUet9C4HhcLv9A8Fv1VMKPebgA==
X-Received: by 2002:adf:e34e:: with SMTP id n14mr18053798wrj.169.1559998212744; 
 Sat, 08 Jun 2019 05:50:12 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id 95sm6732422wrk.70.2019.06.08.05.50.10
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Sat, 08 Jun 2019 05:50:12 -0700 (PDT)
Subject: Re: [PATCH] drm/amdgpu: Add GDS clearing workaround in later init for
 gfx9
To: "Shamis, Leonid" <Leonid.Shamis@amd.com>, "Zhu, James"
 <James.Zhu@amd.com>, Alex Deucher <alexdeucher@gmail.com>
References: <1559925472-20077-1-git-send-email-James.Zhu@amd.com>
 <CADnq5_NBWcUtXsBbQP5uBvaOFgWXw3Lhj=ZOisVyTctqZph=xQ@mail.gmail.com>
 <19203faa-970e-732b-a0e0-d2d1fe69ce30@amd.com>
 <65266293-ac7a-c3ef-752b-1691299b1f28@amd.com>
 <3598A781-7AF5-4DDE-83AE-8835E85573D3@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <3ab2a128-3433-0e45-b555-2aff0892f8e6@gmail.com>
Date: Sat, 8 Jun 2019 14:50:09 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <3598A781-7AF5-4DDE-83AE-8835E85573D3@amd.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=reply-to:subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=EDINd/WAlzER/f3JFplSOFgOMTjfnsxjhfiFsrWggHg=;
 b=KNtLYHNRcSSoYz3xMC01sWtIeMb4KPoVNLkqVAEvs+3v++SfdWdl2KNxUkoc2gO7Mi
 uY3BzsWaXxqTzTzqSG+x8G49BILS6Nvjq5K6mCAF1snZ+NF5dA5cEONgp82CCWL0Lcj8
 84f9I4Q2uhRtkOXagq80X3kjnLss/ED2iQuAGJuMtTE4hcw+CGSt5pCyxKLYTllV80Bu
 ADdniNrtjzsz1SGPWYRSwp8uTpFUNmgpTIPb7XxK+xsoNnePFKegHHpMQ/dmqmvP/UfJ
 G2gN0//ax5/XK05g2zkAovPCbmzszuz0Cg/LbroyB+xbbvgN26vesvTPd8FXLFogECoH
 9Ptw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Cc: "Gabra, Maroun" <Maroun.Gabra@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Liu,
 Shaoyun" <Shaoyun.Liu@amd.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

WWVhaCwgdGhhdCB3b3VsZCBiZSBhIGdvb2QgaWRlYSBhcyB3ZWxsLgoKQWRkaXRpb25hbCB0byB0
aGF0IEkgc3VnZ2VzdCB0byB1cGRhdGUgR0RTX1ZNSUQwX0JBU0UvX1NJWkUgd2l0aCBkaXJlY3Qg
CnJlZ2lzdGVyIHdyaXRlcyBpbnN0ZWFkIG9mIFBNNCBwYWNrZXRzLgoKQ2hyaXN0aWFuLgoKQW0g
MDcuMDYuMTkgdW0gMjI6MTYgc2NocmllYiBTaGFtaXMsIExlb25pZDoKPiBKYW1lcywKPgo+IERv
IHlvdSBzZXQgR0RTX1ZNSUQwX0JBU0UgdG8gMD8uLiBJIGRvbid0IHNlZSBpdCBpbiB5b3VyIHBh
dGNoLgo+Cj4gUmVnYXJkcywKPiBMZW9uaWQKPgo+IO+7v09uIDIwMTktMDYtMDcsIDE1OjQyLCAi
Wmh1LCBKYW1lcyIgPEphbWVzLlpodUBhbWQuY29tPiB3cm90ZToKPgo+ICAgICAgCj4gICAgICBP
biAyMDE5LTA2LTA3IDM6MTIgcC5tLiwgWmh1LCBKYW1lcyB3cm90ZToKPiAgICAgID4gT24gMjAx
OS0wNi0wNyAyOjE2IHAubS4sIEFsZXggRGV1Y2hlciB3cm90ZToKPiAgICAgID4+IE9uIEZyaSwg
SnVuIDcsIDIwMTkgYXQgMTI6MzggUE0gWmh1LCBKYW1lcyA8SmFtZXMuWmh1QGFtZC5jb20+IHdy
b3RlOgo+ICAgICAgPj4+IFNpbmNlIEhhcmR3YXJlIGJ1ZywgR0RTIGV4aXN0IEVDQyBlcnJvciBh
ZnRlciBjb2xkIGJvb3QgdXAsCj4gICAgICA+Pj4gYWRkaW5nIEdEUyBjbGVhcmluZyB3b3JrYXJv
dW5kIGluIGxhdGVyIGluaXQgZm9yIGdmeDkuCj4gICAgICA+Pj4KPiAgICAgID4+PiBTaWduZWQt
b2ZmLWJ5OiBKYW1lcyBaaHUgPEphbWVzLlpodUBhbWQuY29tPgo+ICAgICAgPj4+IC0tLQo+ICAg
ICAgPj4+ICAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMgfCA0OCArKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+ICAgICAgPj4+ICAgIDEgZmlsZSBjaGFu
Z2VkLCA0OCBpbnNlcnRpb25zKCspCj4gICAgICA+Pj4KPiAgICAgID4+PiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2dmeF92OV8wLmMKPiAgICAgID4+PiBpbmRleCA3NjcyMmZjLi44MWY2YmE4IDEw
MDY0NAo+ICAgICAgPj4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8w
LmMKPiAgICAgID4+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjlfMC5j
Cj4gICAgICA+Pj4gQEAgLTM2MzQsNiArMzYzNCw1MCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNv
YzE1X3JlZ19lbnRyeSBzZWNfZGVkX2NvdW50ZXJfcmVnaXN0ZXJzW10gPSB7Cj4gICAgICA+Pj4g
ICAgICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tU1FDX0VEQ19DTlQzKSwgMCwgNCwgNn0s
Cj4gICAgICA+Pj4gICAgfTsKPiAgICAgID4+Pgo+ICAgICAgPj4+ICsKPiAgICAgID4+PiArc3Rh
dGljIGludCBnZnhfdjlfMF9kb19lZGNfZ2RzX3dvcmthcm91bmRzKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KQo+ICAgICAgPj4+ICt7Cj4gICAgICA+Pj4gKyAgICAgICBzdHJ1Y3QgYW1kZ3B1
X3JpbmcgKnJpbmcgPSAmYWRldi0+Z2Z4LmNvbXB1dGVfcmluZ1swXTsKPiAgICAgID4+PiArICAg
ICAgIGludCByOwo+ICAgICAgPj4+ICsKPiAgICAgID4+PiArICAgICAgIHIgPSBhbWRncHVfcmlu
Z19hbGxvYyhyaW5nLCAxNyk7Cj4gICAgICA+Pj4gKyAgICAgICBpZiAocikgewo+ICAgICAgPj4+
ICsgICAgICAgICAgICAgICBEUk1fRVJST1IoImFtZGdwdTogR0RTIHdvcmthcm91bmRzIGZhaWxl
ZCB0byBsb2NrIHJpbmcgJXMgKCVkKS5cbiIsCj4gICAgICA+Pj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgcmluZy0+bmFtZSwgcik7Cj4gICAgICA+Pj4gKyAgICAgICAgICAgICAgIHJldHVybiBy
Owo+ICAgICAgPj4+ICsgICAgICAgfQo+ICAgICAgPj4+ICsKPiAgICAgID4+PiArICAgICAgIGFt
ZGdwdV9yaW5nX3dyaXRlKHJpbmcsIFBBQ0tFVDMoUEFDS0VUM19XUklURV9EQVRBLCAzKSk7Cj4g
ICAgICA+Pj4gKyAgICAgICBhbWRncHVfcmluZ193cml0ZShyaW5nLCBXUklURV9EQVRBX0VOR0lO
RV9TRUwoMCkgfAo+ICAgICAgPj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgIFdSSVRFX0RB
VEFfRFNUX1NFTCgwKSk7Cj4gICAgICA+Pj4gKyAgICAgICBhbWRncHVfcmluZ193cml0ZShyaW5n
LCBTT0MxNV9SRUdfT0ZGU0VUKEdDLCAwLCBtbUdEU19WTUlEMF9TSVpFKSk7Cj4gICAgICA+Pj4g
KyAgICAgICBhbWRncHVfcmluZ193cml0ZShyaW5nLCAwKTsKPiAgICAgID4+PiArICAgICAgIGFt
ZGdwdV9yaW5nX3dyaXRlKHJpbmcsIDB4MTAwMDApOwo+ICAgICAgPj4gaGFyZGNvZGVkIHNpemUs
IHBsZWFzZSB1c2UgdGhlIHNpemUgZnJvbSB0aGUgZHJpdmVyLgo+ICAgICAgPj4KPiAgICAgID4+
PiArCj4gICAgICA+Pj4gKyAgICAgICBhbWRncHVfcmluZ193cml0ZShyaW5nLCBQQUNLRVQzKFBB
Q0tFVDNfRE1BX0RBVEEsIDUpKTsKPiAgICAgID4+PiArICAgICAgIGFtZGdwdV9yaW5nX3dyaXRl
KHJpbmcsIChQQUNLRVQzX0RNQV9EQVRBX0NQX1NZTkMgfAo+ICAgICAgPj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgUEFDS0VUM19ETUFfREFUQV9EU1RfU0VMKDEpIHwKPiAgICAg
ID4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBBQ0tFVDNfRE1BX0RBVEFfU1JD
X1NFTCgyKSB8Cj4gICAgICA+Pj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQUNL
RVQzX0RNQV9EQVRBX0VOR0lORSgwKSkpOwo+ICAgICAgPj4+ICsgICAgICAgYW1kZ3B1X3Jpbmdf
d3JpdGUocmluZywgMCk7Cj4gICAgICA+Pj4gKyAgICAgICBhbWRncHVfcmluZ193cml0ZShyaW5n
LCAwKTsKPiAgICAgID4+PiArICAgICAgIGFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIDApOwo+ICAg
ICAgPj4+ICsgICAgICAgYW1kZ3B1X3Jpbmdfd3JpdGUocmluZywgMCk7Cj4gICAgICA+Pj4gKyAg
ICAgICBhbWRncHVfcmluZ193cml0ZShyaW5nLCBQQUNLRVQzX0RNQV9EQVRBX0NNRF9SQVdfV0FJ
VCB8IDB4MTAwMDApOwo+ICAgICAgPj4gSW5zdGVhZCBvZiBoYXJkY29kaW5nIHRoZSBzaXplLCBj
YW4geW91IHVzZSB0aGUgZ2RzIHNpemUgZnJvbSB0aGUKPiAgICAgID4+IGRyaXZlciAoYWRldi0+
Z2RzLmdkc19zaXplKS4KPiAgICAgID4gSGkgQWxleCwKPiAgICAgID4KPiAgICAgID4gRG8geW91
IG1lYW4gYWRldi0+Z2RzLm1lbS50b3RhbF9zaXplPwo+ICAgICAgPgo+ICAgICAgPiBCdXQgSSBz
ZWUgYmVsb3cgb3BlcmF0aW9uIGluIGdmeF92OV8wX25nZ19pbml0Lgo+ICAgICAgPgo+ICAgICAg
PiBhZGV2LT5nZHMubWVtLnRvdGFsX3NpemUgLT0gLi4uLgo+ICAgICAgPgo+ICAgICAgPiBPciB5
b3Ugd2FudCBtZSB0byBhZGQgZ2RzX3NpemUgaW4gc3RydWN0IGFtZGdwdV9nZHM/Cj4gICAgICA+
Cj4gICAgICA+IEphbWVzCj4gICAgICAKPiAgICAgIFllYWgsIFRoZSBhbWQtc3RhZ2luZy1kcm0t
bmV4dCBicmFuY2ggaGFzIGFkZXYtPmdkcy5nZHNfc2l6ZS4KPiAgICAgIAo+ICAgICAgSmFtZXMK
PiAgICAgIAo+ICAgICAgPgo+ICAgICAgPj4gV2l0aCB0aGF0IGZpeGVkOgo+ICAgICAgPj4gUmV2
aWV3ZWQtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNvbT4KPiAgICAg
ID4+Cj4gICAgICA+Pj4gKwo+ICAgICAgPj4+ICsgICAgICAgYW1kZ3B1X3Jpbmdfd3JpdGUocmlu
ZywgUEFDS0VUMyhQQUNLRVQzX1dSSVRFX0RBVEEsIDMpKTsKPiAgICAgID4+PiArICAgICAgIGFt
ZGdwdV9yaW5nX3dyaXRlKHJpbmcsIFdSSVRFX0RBVEFfRU5HSU5FX1NFTCgwKSB8Cj4gICAgICA+
Pj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXUklURV9EQVRBX0RTVF9TRUwoMCkp
Owo+ICAgICAgPj4+ICsgICAgICAgYW1kZ3B1X3Jpbmdfd3JpdGUocmluZywgU09DMTVfUkVHX09G
RlNFVChHQywgMCwgbW1HRFNfVk1JRDBfU0laRSkpOwo+ICAgICAgPj4+ICsgICAgICAgYW1kZ3B1
X3Jpbmdfd3JpdGUocmluZywgMCk7Cj4gICAgICA+Pj4gKyAgICAgICBhbWRncHVfcmluZ193cml0
ZShyaW5nLCAweDApOwo+ICAgICAgPj4+ICsKPiAgICAgID4+PiArICAgICAgIGFtZGdwdV9yaW5n
X2NvbW1pdChyaW5nKTsKPiAgICAgID4+PiArCj4gICAgICA+Pj4gKyAgICAgICByZXR1cm4gMDsK
PiAgICAgID4+PiArfQo+ICAgICAgPj4+ICsKPiAgICAgID4+PiArCj4gICAgICA+Pj4gICAgc3Rh
dGljIGludCBnZnhfdjlfMF9kb19lZGNfZ3ByX3dvcmthcm91bmRzKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KQo+ICAgICAgPj4+ICAgIHsKPiAgICAgID4+PiAgICAgICAgICAgc3RydWN0IGFt
ZGdwdV9yaW5nICpyaW5nID0gJmFkZXYtPmdmeC5jb21wdXRlX3JpbmdbMF07Cj4gICAgICA+Pj4g
QEAgLTM4MTAsNiArMzg1NCwxMCBAQCBzdGF0aWMgaW50IGdmeF92OV8wX2VjY19sYXRlX2luaXQo
dm9pZCAqaGFuZGxlKQo+ICAgICAgPj4+ICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICAg
ICAgPj4+ICAgICAgICAgICB9Cj4gICAgICA+Pj4KPiAgICAgID4+PiArICAgICAgIHIgPSBnZnhf
djlfMF9kb19lZGNfZ2RzX3dvcmthcm91bmRzKGFkZXYpOwo+ICAgICAgPj4+ICsgICAgICAgaWYg
KHIpCj4gICAgICA+Pj4gKyAgICAgICAgICAgICAgIHJldHVybiByOwo+ICAgICAgPj4+ICsKPiAg
ICAgID4+PiAgICAgICAgICAgLyogcmVxdWlyZXMgSUJzIHNvIGRvIGluIGxhdGUgaW5pdCBhZnRl
ciBJQiBwb29sIGlzIGluaXRpYWxpemVkICovCj4gICAgICA+Pj4gICAgICAgICAgIHIgPSBnZnhf
djlfMF9kb19lZGNfZ3ByX3dvcmthcm91bmRzKGFkZXYpOwo+ICAgICAgPj4+ICAgICAgICAgICBp
ZiAocikKPiAgICAgID4+PiAtLQo+ICAgICAgPj4+IDIuNy40Cj4gICAgICA+Pj4KPiAgICAgID4+
PiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+ICAgICAg
Pj4+IGFtZC1nZnggbWFpbGluZyBsaXN0Cj4gICAgICA+Pj4gYW1kLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKPiAgICAgID4+PiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2FtZC1nZngKPiAgICAgIAo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KPiBhbWQtZ2Z4IG1haWxpbmcgbGlzdAo+IGFtZC1nZnhAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9hbWQtZ2Z4CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1n
Zng=
