Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BF2E4184F3
	for <lists+amd-gfx@lfdr.de>; Thu,  9 May 2019 07:50:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3088D89316;
	Thu,  9 May 2019 05:50:53 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9CCE889316
 for <amd-gfx@lists.freedesktop.org>; Thu,  9 May 2019 05:50:51 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id s15so1069662wra.12
 for <amd-gfx@lists.freedesktop.org>; Wed, 08 May 2019 22:50:51 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=HHkX22IiVRVq15n0rRCCCcAymDhrZrudUTBIQmdexrE=;
 b=UVAfsPmc2a+ekqpjNjfZyvKBnY91Qb4CAiM9imeo+3FBhLH69t4UKeegFM39MqRxV7
 jDNxC1IsOsrDo+/OxlIsOBozOSDt8ln6ZYU9N+t++hmKq5WhUcOJkzvOtb9gAiZ86Qph
 nboS85yj63F8CN333zERhu/WyFBC8PTnpge2u0KAovwoIWUp+eIrOtQeunsHClNW3Vye
 INMG8Kww8WY1EQvgWfq8vxNmExV3n/CNX2zjIBOJioo3lYUkXLpsOvaDZN8U08Orv8MS
 M8jAsQU89D60dLhTjM1UVk2+TYW8shJGO5+sRMJhOcHQKso5m+mwt6QFGO0Pino1wuOM
 9KwQ==
X-Gm-Message-State: APjAAAXrav5wXCLrUm6Y7UOci+0sElvP1rH0/Bh/B41G/6ruzHHJ32qK
 rbosH4/UzOYHpIKsNbjH7RQhr9H9dgTqD+zcj+8=
X-Google-Smtp-Source: APXvYqy5nO0vhDjoTbdgeELVgiAMZtJoYXv0fuVLAWI2ttQ20pytZn/9wJsufPWvpPNtGTAEJjCBSvHWEMobMM6hPhg=
X-Received: by 2002:adf:b641:: with SMTP id i1mr1321624wre.288.1557381050208; 
 Wed, 08 May 2019 22:50:50 -0700 (PDT)
MIME-Version: 1.0
References: <1557283541-7877-1-git-send-email-Trigger.Huang@amd.com>
 <1557283541-7877-6-git-send-email-Trigger.Huang@amd.com>
In-Reply-To: <1557283541-7877-6-git-send-email-Trigger.Huang@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Thu, 9 May 2019 01:50:38 -0400
Message-ID: <CADnq5_NWinXrb8TUkVjPbNGXPiZXfLzmquCT3z8u3ECsz_fDcA@mail.gmail.com>
Subject: Re: [PATCH 5/9] drm/amdgpu: call psp to progrm ih cntl in SR-IOV
To: Trigger Huang <Trigger.Huang@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=HHkX22IiVRVq15n0rRCCCcAymDhrZrudUTBIQmdexrE=;
 b=tRS8GEphb1iDRgXX61WQ2sE+qdj3Ih1d4ykKPJ+PwLOn6V2/A/yptfJV8MJTbXzS5V
 RwCMOCqn+xeqvjs9G9o4dsFYc3fw9tsaO1t7qANvPtWqZoc3cc7biGXpjvnfFx8p59ep
 NiVTb2dc68bi1HKf8km2dsoA1Gpck2yB6+CDYO+rw12yIiDoiYOQFXyn5I/02nLzAiyj
 QNgZN4GzsNkmYiliWZnb3lZoVsWJRxSHuclTUjrGkVMKbkYuoFoDDHXNezCmFXQsxfRK
 dWaEcn9zk1ELQ9ZP59XohuYVmu2xlxkOuEWUF8YNqIaX5HloFtybWBTn1Z8rb8FWKkEK
 Y2wg==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Wang, Daniel\(Xiaowei\)" <Daniel.Wang2@amd.com>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>, Rashid.Sohail@amd.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCBNYXkgNywgMjAxOSBhdCAxMDo0NiBQTSBUcmlnZ2VyIEh1YW5nIDxUcmlnZ2VyLkh1
YW5nQGFtZC5jb20+IHdyb3RlOgo+Cj4gY2FsbCBwc3AgdG8gcHJvZ3JtIGloIGNudGwgaW4gU1It
SU9WIGlmIHN1cHBvcnRlZAoKdHlwbyBpbiBzdWJqZWN0IGFuZCBkZXNjcmlwdGlvbjoKcHJvZ3Jt
IC0+IHByb2dyYW0KV2l0aCB0aGF0IGZpeGVkOgpSZXZpZXdlZC1ieTogQWxleCBEZXVjaGVyIDxh
bGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgoKPgo+IENoYW5nZS1JZDogSTQ2NmRkNjY5MjYyMjFl
NzY0Y2JjZGRjYTQ4YjFmMGZlNWNkNzk4YjQKPiBTaWduZWQtb2ZmLWJ5OiBUcmlnZ2VyIEh1YW5n
IDxUcmlnZ2VyLkh1YW5nQGFtZC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L3ZlZ2ExMF9paC5jIHwgOTEgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLQo+
ICAxIGZpbGUgY2hhbmdlZCwgODIgaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlvbnMoLSkKPgo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92ZWdhMTBfaWguYyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZlZ2ExMF9paC5jCj4gaW5kZXggMWIyZjY5YS4uZmJiMWVk
OCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92ZWdhMTBfaWguYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZlZ2ExMF9paC5jCj4gQEAgLTQ4LDE0
ICs0OCwyOSBAQCBzdGF0aWMgdm9pZCB2ZWdhMTBfaWhfZW5hYmxlX2ludGVycnVwdHMoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4KPiAgICAgICAgIGloX3JiX2NudGwgPSBSRUdfU0VUX0ZJ
RUxEKGloX3JiX2NudGwsIElIX1JCX0NOVEwsIFJCX0VOQUJMRSwgMSk7Cj4gICAgICAgICBpaF9y
Yl9jbnRsID0gUkVHX1NFVF9GSUVMRChpaF9yYl9jbnRsLCBJSF9SQl9DTlRMLCBFTkFCTEVfSU5U
UiwgMSk7Cj4gLSAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVEwsIGlo
X3JiX2NudGwpOwo+ICsgICAgICAgaWYgKGFtZGdwdV92aXJ0X3N1cHBvcnRfcHNwX3ByZ19paF9y
ZWcoYWRldikpIHsKPiArICAgICAgICAgICAgICAgaWYgKHBzcF9yZWdfcHJvZ3JhbSgmYWRldi0+
cHNwLCBQU1BfUkVHX0lIX1JCX0NOVEwsIGloX3JiX2NudGwpKSB7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgRFJNX0VSUk9SKCJQU1AgcHJvZ3JhbSBJSF9SQl9DTlRMIGZhaWxlZCFcbiIpOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKPiArICAgICAgICAgICAgICAgfQo+ICsg
ICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgV1JFRzMyX1NPQzE1KE9TU1NZUywgMCwg
bW1JSF9SQl9DTlRMLCBpaF9yYl9jbnRsKTsKPiArICAgICAgIH0KPiAgICAgICAgIGFkZXYtPmly
cS5paC5lbmFibGVkID0gdHJ1ZTsKPgo+ICAgICAgICAgaWYgKGFkZXYtPmlycS5paDEucmluZ19z
aXplKSB7Cj4gICAgICAgICAgICAgICAgIGloX3JiX2NudGwgPSBSUkVHMzJfU09DMTUoT1NTU1lT
LCAwLCBtbUlIX1JCX0NOVExfUklORzEpOwo+ICAgICAgICAgICAgICAgICBpaF9yYl9jbnRsID0g
UkVHX1NFVF9GSUVMRChpaF9yYl9jbnRsLCBJSF9SQl9DTlRMX1JJTkcxLAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSQl9FTkFCTEUsIDEpOwo+IC0gICAgICAg
ICAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVExfUklORzEsIGloX3Ji
X2NudGwpOwo+ICsgICAgICAgICAgICAgICBpZiAoYW1kZ3B1X3ZpcnRfc3VwcG9ydF9wc3BfcHJn
X2loX3JlZyhhZGV2KSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmIChwc3BfcmVnX3By
b2dyYW0oJmFkZXYtPnBzcCwgUFNQX1JFR19JSF9SQl9DTlRMX1JJTkcxLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGloX3JiX2NudGwpKSB7Cj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fRVJST1IoInByb2dyYW0gSUhfUkJfQ05U
TF9SSU5HMSBmYWlsZWQhXG4iKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJl
dHVybjsKPiArICAgICAgICAgICAgICAgICAgICAgICB9Cj4gKyAgICAgICAgICAgICAgIH0gZWxz
ZSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgV1JFRzMyX1NPQzE1KE9TU1NZUywgMCwgbW1J
SF9SQl9DTlRMX1JJTkcxLCBpaF9yYl9jbnRsKTsKPiArICAgICAgICAgICAgICAgfQo+ICAgICAg
ICAgICAgICAgICBhZGV2LT5pcnEuaWgxLmVuYWJsZWQgPSB0cnVlOwo+ICAgICAgICAgfQo+Cj4g
QEAgLTYzLDcgKzc4LDE1IEBAIHN0YXRpYyB2b2lkIHZlZ2ExMF9paF9lbmFibGVfaW50ZXJydXB0
cyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgICAgICAgICAgICAgICAgaWhfcmJfY250
bCA9IFJSRUczMl9TT0MxNShPU1NTWVMsIDAsIG1tSUhfUkJfQ05UTF9SSU5HMik7Cj4gICAgICAg
ICAgICAgICAgIGloX3JiX2NudGwgPSBSRUdfU0VUX0ZJRUxEKGloX3JiX2NudGwsIElIX1JCX0NO
VExfUklORzIsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJC
X0VOQUJMRSwgMSk7Cj4gLSAgICAgICAgICAgICAgIFdSRUczMl9TT0MxNShPU1NTWVMsIDAsIG1t
SUhfUkJfQ05UTF9SSU5HMiwgaWhfcmJfY250bCk7Cj4gKyAgICAgICAgICAgICAgIGlmIChhbWRn
cHVfdmlydF9zdXBwb3J0X3BzcF9wcmdfaWhfcmVnKGFkZXYpKSB7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgaWYgKHBzcF9yZWdfcHJvZ3JhbSgmYWRldi0+cHNwLCBQU1BfUkVHX0lIX1JCX0NO
VExfUklORzIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaWhfcmJfY250bCkpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERSTV9F
UlJPUigicHJvZ3JhbSBJSF9SQl9DTlRMX1JJTkcyIGZhaWxlZCFcbiIpOwo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIH0K
PiArICAgICAgICAgICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBXUkVH
MzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVExfUklORzIsIGloX3JiX2NudGwpOwo+ICsg
ICAgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICAgIGFkZXYtPmlycS5paDIuZW5hYmxlZCA9
IHRydWU7Cj4gICAgICAgICB9Cj4gIH0KPiBAQCAtODEsNyArMTA0LDE1IEBAIHN0YXRpYyB2b2lk
IHZlZ2ExMF9paF9kaXNhYmxlX2ludGVycnVwdHMoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
Cj4KPiAgICAgICAgIGloX3JiX2NudGwgPSBSRUdfU0VUX0ZJRUxEKGloX3JiX2NudGwsIElIX1JC
X0NOVEwsIFJCX0VOQUJMRSwgMCk7Cj4gICAgICAgICBpaF9yYl9jbnRsID0gUkVHX1NFVF9GSUVM
RChpaF9yYl9jbnRsLCBJSF9SQl9DTlRMLCBFTkFCTEVfSU5UUiwgMCk7Cj4gLSAgICAgICBXUkVH
MzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVEwsIGloX3JiX2NudGwpOwo+ICsgICAgICAg
aWYgKGFtZGdwdV92aXJ0X3N1cHBvcnRfcHNwX3ByZ19paF9yZWcoYWRldikpIHsKPiArICAgICAg
ICAgICAgICAgaWYgKHBzcF9yZWdfcHJvZ3JhbSgmYWRldi0+cHNwLCBQU1BfUkVHX0lIX1JCX0NO
VEwsIGloX3JiX2NudGwpKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJQ
U1AgcHJvZ3JhbSBJSF9SQl9DTlRMIGZhaWxlZCFcbiIpOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHJldHVybjsKPiArICAgICAgICAgICAgICAgfQo+ICsgICAgICAgfSBlbHNlIHsKPiArICAg
ICAgICAgICAgICAgV1JFRzMyX1NPQzE1KE9TU1NZUywgMCwgbW1JSF9SQl9DTlRMLCBpaF9yYl9j
bnRsKTsKPiArICAgICAgIH0KPiArCj4gICAgICAgICAvKiBzZXQgcnB0ciwgd3B0ciB0byAwICov
Cj4gICAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX1JQVFIsIDApOwo+ICAg
ICAgICAgV1JFRzMyX1NPQzE1KE9TU1NZUywgMCwgbW1JSF9SQl9XUFRSLCAwKTsKPiBAQCAtOTIs
NyArMTIzLDE1IEBAIHN0YXRpYyB2b2lkIHZlZ2ExMF9paF9kaXNhYmxlX2ludGVycnVwdHMoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAgICAgICAgICAgICAgIGloX3JiX2NudGwgPSBS
UkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVExfUklORzEpOwo+ICAgICAgICAgICAg
ICAgICBpaF9yYl9jbnRsID0gUkVHX1NFVF9GSUVMRChpaF9yYl9jbnRsLCBJSF9SQl9DTlRMX1JJ
TkcxLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSQl9FTkFC
TEUsIDApOwo+IC0gICAgICAgICAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JC
X0NOVExfUklORzEsIGloX3JiX2NudGwpOwo+ICsgICAgICAgICAgICAgICBpZiAoYW1kZ3B1X3Zp
cnRfc3VwcG9ydF9wc3BfcHJnX2loX3JlZyhhZGV2KSkgewo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGlmIChwc3BfcmVnX3Byb2dyYW0oJmFkZXYtPnBzcCwgUFNQX1JFR19JSF9SQl9DTlRMX1JJ
TkcxLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlo
X3JiX2NudGwpKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fRVJST1Io
InByb2dyYW0gSUhfUkJfQ05UTF9SSU5HMSBmYWlsZWQhXG4iKTsKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHJldHVybjsKPiArICAgICAgICAgICAgICAgICAgICAgICB9Cj4gKyAg
ICAgICAgICAgICAgIH0gZWxzZSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgV1JFRzMyX1NP
QzE1KE9TU1NZUywgMCwgbW1JSF9SQl9DTlRMX1JJTkcxLCBpaF9yYl9jbnRsKTsKPiArICAgICAg
ICAgICAgICAgfQo+ICAgICAgICAgICAgICAgICAvKiBzZXQgcnB0ciwgd3B0ciB0byAwICovCj4g
ICAgICAgICAgICAgICAgIFdSRUczMl9TT0MxNShPU1NTWVMsIDAsIG1tSUhfUkJfUlBUUl9SSU5H
MSwgMCk7Cj4gICAgICAgICAgICAgICAgIFdSRUczMl9TT0MxNShPU1NTWVMsIDAsIG1tSUhfUkJf
V1BUUl9SSU5HMSwgMCk7Cj4gQEAgLTEwNCw3ICsxNDMsMTYgQEAgc3RhdGljIHZvaWQgdmVnYTEw
X2loX2Rpc2FibGVfaW50ZXJydXB0cyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgICAg
ICAgICAgICAgICAgaWhfcmJfY250bCA9IFJSRUczMl9TT0MxNShPU1NTWVMsIDAsIG1tSUhfUkJf
Q05UTF9SSU5HMik7Cj4gICAgICAgICAgICAgICAgIGloX3JiX2NudGwgPSBSRUdfU0VUX0ZJRUxE
KGloX3JiX2NudGwsIElIX1JCX0NOVExfUklORzIsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIFJCX0VOQUJMRSwgMCk7Cj4gLSAgICAgICAgICAgICAgIFdSRUcz
Ml9TT0MxNShPU1NTWVMsIDAsIG1tSUhfUkJfQ05UTF9SSU5HMiwgaWhfcmJfY250bCk7Cj4gKyAg
ICAgICAgICAgICAgIGlmIChhbWRncHVfdmlydF9zdXBwb3J0X3BzcF9wcmdfaWhfcmVnKGFkZXYp
KSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBzcF9yZWdfcHJvZ3JhbSgmYWRldi0+
cHNwLCBQU1BfUkVHX0lIX1JCX0NOVExfUklORzIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgaWhfcmJfY250bCkpIHsKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIERSTV9FUlJPUigicHJvZ3JhbSBJSF9SQl9DTlRMX1JJTkcyIGZhaWxl
ZCFcbiIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIH0KPiArICAgICAgICAgICAgICAgfSBlbHNlIHsKPiArICAgICAg
ICAgICAgICAgICAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVExfUklO
RzIsIGloX3JiX2NudGwpOwo+ICsgICAgICAgICAgICAgICB9Cj4gKwo+ICAgICAgICAgICAgICAg
ICAvKiBzZXQgcnB0ciwgd3B0ciB0byAwICovCj4gICAgICAgICAgICAgICAgIFdSRUczMl9TT0Mx
NShPU1NTWVMsIDAsIG1tSUhfUkJfUlBUUl9SSU5HMiwgMCk7Cj4gICAgICAgICAgICAgICAgIFdS
RUczMl9TT0MxNShPU1NTWVMsIDAsIG1tSUhfUkJfV1BUUl9SSU5HMiwgMCk7Cj4gQEAgLTE4Nyw3
ICsyMzUsMTUgQEAgc3RhdGljIGludCB2ZWdhMTBfaWhfaXJxX2luaXQoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpCj4gICAgICAgICBpaF9yYl9jbnRsID0gdmVnYTEwX2loX3JiX2NudGwoaWgs
IGloX3JiX2NudGwpOwo+ICAgICAgICAgaWhfcmJfY250bCA9IFJFR19TRVRfRklFTEQoaWhfcmJf
Y250bCwgSUhfUkJfQ05UTCwgUlBUUl9SRUFSTSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICEhYWRldi0+aXJxLm1zaV9lbmFibGVkKTsKPiAtICAgICAgIFdSRUczMl9TT0Mx
NShPU1NTWVMsIDAsIG1tSUhfUkJfQ05UTCwgaWhfcmJfY250bCk7Cj4gKwo+ICsgICAgICAgaWYg
KGFtZGdwdV92aXJ0X3N1cHBvcnRfcHNwX3ByZ19paF9yZWcoYWRldikpIHsKPiArICAgICAgICAg
ICAgICAgaWYgKHBzcF9yZWdfcHJvZ3JhbSgmYWRldi0+cHNwLCBQU1BfUkVHX0lIX1JCX0NOVEws
IGloX3JiX2NudGwpKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJQU1Ag
cHJvZ3JhbSBJSF9SQl9DTlRMIGZhaWxlZCFcbiIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAg
IHJldHVybiAtRVRJTUVET1VUOwo+ICsgICAgICAgICAgICAgICB9Cj4gKyAgICAgICB9IGVsc2Ug
ewo+ICsgICAgICAgICAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVEws
IGloX3JiX2NudGwpOwo+ICsgICAgICAgfQo+Cj4gICAgICAgICAvKiBzZXQgdGhlIHdyaXRlYmFj
ayBhZGRyZXNzIHdoZXRoZXIgaXQncyBlbmFibGVkIG9yIG5vdCAqLwo+ICAgICAgICAgV1JFRzMy
X1NPQzE1KE9TU1NZUywgMCwgbW1JSF9SQl9XUFRSX0FERFJfTE8sCj4gQEAgLTIxNCw3ICsyNzAs
MTUgQEAgc3RhdGljIGludCB2ZWdhMTBfaWhfaXJxX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdQVFJf
T1ZFUkZMT1dfRU5BQkxFLCAwKTsKPiAgICAgICAgICAgICAgICAgaWhfcmJfY250bCA9IFJFR19T
RVRfRklFTEQoaWhfcmJfY250bCwgSUhfUkJfQ05UTCwKPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgUkJfRlVMTF9EUkFJTl9FTkFCTEUsIDEpOwo+IC0gICAgICAg
ICAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVExfUklORzEsIGloX3Ji
X2NudGwpOwo+ICsgICAgICAgICAgICAgICBpZiAoYW1kZ3B1X3ZpcnRfc3VwcG9ydF9wc3BfcHJn
X2loX3JlZyhhZGV2KSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmIChwc3BfcmVnX3By
b2dyYW0oJmFkZXYtPnBzcCwgUFNQX1JFR19JSF9SQl9DTlRMX1JJTkcxLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGloX3JiX2NudGwpKSB7Cj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fRVJST1IoInByb2dyYW0gSUhfUkJfQ05U
TF9SSU5HMSBmYWlsZWQhXG4iKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJl
dHVybiAtRVRJTUVET1VUOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIH0KPiArICAgICAgICAg
ICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBXUkVHMzJfU09DMTUoT1NT
U1lTLCAwLCBtbUlIX1JCX0NOVExfUklORzEsIGloX3JiX2NudGwpOwo+ICsgICAgICAgICAgICAg
ICB9Cj4KPiAgICAgICAgICAgICAgICAgLyogc2V0IHJwdHIsIHdwdHIgdG8gMCAqLwo+ICAgICAg
ICAgICAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX1dQVFJfUklORzEsIDAp
Owo+IEBAIC0yMzIsNyArMjk2LDE2IEBAIHN0YXRpYyBpbnQgdmVnYTEwX2loX2lycV9pbml0KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+Cj4gICAgICAgICAgICAgICAgIGloX3JiX2NudGwg
PSBSUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVExfUklORzIpOwo+ICAgICAgICAg
ICAgICAgICBpaF9yYl9jbnRsID0gdmVnYTEwX2loX3JiX2NudGwoaWgsIGloX3JiX2NudGwpOwo+
IC0gICAgICAgICAgICAgICBXUkVHMzJfU09DMTUoT1NTU1lTLCAwLCBtbUlIX1JCX0NOVExfUklO
RzIsIGloX3JiX2NudGwpOwo+ICsKPiArICAgICAgICAgICAgICAgaWYgKGFtZGdwdV92aXJ0X3N1
cHBvcnRfcHNwX3ByZ19paF9yZWcoYWRldikpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBp
ZiAocHNwX3JlZ19wcm9ncmFtKCZhZGV2LT5wc3AsIFBTUF9SRUdfSUhfUkJfQ05UTF9SSU5HMiwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpaF9yYl9j
bnRsKSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJwcm9n
cmFtIElIX1JCX0NOVExfUklORzIgZmFpbGVkIVxuIik7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICByZXR1cm4gLUVUSU1FRE9VVDsKPiArICAgICAgICAgICAgICAgICAgICAgICB9
Cj4gKyAgICAgICAgICAgICAgIH0gZWxzZSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgV1JF
RzMyX1NPQzE1KE9TU1NZUywgMCwgbW1JSF9SQl9DTlRMX1JJTkcyLCBpaF9yYl9jbnRsKTsKPiAr
ICAgICAgICAgICAgICAgfQo+Cj4gICAgICAgICAgICAgICAgIC8qIHNldCBycHRyLCB3cHRyIHRv
IDAgKi8KPiAgICAgICAgICAgICAgICAgV1JFRzMyX1NPQzE1KE9TU1NZUywgMCwgbW1JSF9SQl9X
UFRSX1JJTkcyLCAwKTsKPiAtLQo+IDIuNy40Cj4KPiBfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwo+IGFtZC1nZnggbWFpbGluZyBsaXN0Cj4gYW1kLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2FtZC1nZngKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQt
Z2Z4
