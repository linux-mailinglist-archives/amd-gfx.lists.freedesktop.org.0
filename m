Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DE094128171
	for <lists+amd-gfx@lfdr.de>; Fri, 20 Dec 2019 18:29:46 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 72CAA89E01;
	Fri, 20 Dec 2019 17:29:45 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr700086.outbound.protection.outlook.com [40.107.70.86])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AD11789E01
 for <amd-gfx@lists.freedesktop.org>; Fri, 20 Dec 2019 17:29:43 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=BhAPiHcjy7r06MBy0zoWi318WZfsuRo6UFFY9sNfH18NqmC0VFE6000K0el9egbIpnN7kOGDzPyHeMK4XOfsnB5SMHdgl2eYgGfTRQDPsBuHFe0ge4R2bqTNlJFGU7LXkU/RB1SfihsYztj9S0w0bdZUvYit/sLtA7XKCPb4umQfl6bZmFGatNFVkyFkKYQubbRZmPbe3ACgPqg/khPjM5IzZhFXst8++zbZ63BRGXFoCdZeTt+6q0AJ0FOAzFBmfW1dDrXkHSfn8wcMV4EeCvPwyWinhdoWWOeoq9TrV4SDD5xp7aKYqkau0wBTFZyMT5zgwAVVWlElhcMBrnHLJw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=St+ErDbkRiXHaLJ323PmPoAb1vKX24z5Iv4gdZrM/qE=;
 b=OzmjvmRBmwNaII5p9f60ZLHmgiKEpJc0UQdq7G5IbnuGd0ADUiEkoKU0Mf6EL3wd7nCL0g4dfNuJzPUBPxH+RyBScV8kNPPGfbkvow2JEDzuFLa2AUHBl7P6cR0YLutjkg3sIQPvgpiFWMI4tusIEw14xoQKq4P4mJDu8yR2Yv1m/OJARvmBvlYos2MESl/AjY7QDl/V7k/YyoeR1IIgnu5XkkxlZtLwXL9Ohu6IKocMKqo+WIvWY19q6pwqunAfJdHLPQObLTKknZHG8MmTl1uFRxugr2i1i2OJk/NjpsvhXpxOztwucpb+43bESqY8AaSt/J7oeHurI4LbZJr6Cw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=St+ErDbkRiXHaLJ323PmPoAb1vKX24z5Iv4gdZrM/qE=;
 b=S+55Ad2tIhChCDZQA66nd2k4nJB263M84z1YeTsA1dHW08Y8w7amHnyY1+sZW5RSuKtTqYlOQGrePpl/2/Vp9uWLdddVI4T0spLSG7isNKxdAH8WPiaILmoxuWtY1lXVEMQZzElu5+sL9hvDRd/MZfYv27dNFwXh/1xS0BSztY8=
Received: from BL0PR12MB2580.namprd12.prod.outlook.com (52.132.27.147) by
 BL0PR12MB2562.namprd12.prod.outlook.com (52.132.29.140) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2559.15; Fri, 20 Dec 2019 17:29:40 +0000
Received: from BL0PR12MB2580.namprd12.prod.outlook.com
 ([fe80::e84c:efb8:bd6c:1d9c]) by BL0PR12MB2580.namprd12.prod.outlook.com
 ([fe80::e84c:efb8:bd6c:1d9c%6]) with mapi id 15.20.2516.021; Fri, 20 Dec 2019
 17:29:40 +0000
From: "Zeng, Oak" <Oak.Zeng@amd.com>
To: "Kuehling, Felix" <Felix.Kuehling@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH 4/4] drm/amdkfd: Avoid hanging hardware in stop_cpsch
Thread-Topic: [PATCH 4/4] drm/amdkfd: Avoid hanging hardware in stop_cpsch
Thread-Index: AQHVtw/DdL8x2ZD3tkaM4XUXHCHR6KfDPN1QgAAKowCAAABkoA==
Date: Fri, 20 Dec 2019 17:29:40 +0000
Message-ID: <BL0PR12MB25805DCFCAC51E5D535AACA0802D0@BL0PR12MB2580.namprd12.prod.outlook.com>
References: <20191220083001.30607-1-Felix.Kuehling@amd.com>
 <20191220083001.30607-4-Felix.Kuehling@amd.com>
 <BL0PR12MB2580D024E6FF1996A61CAD6A802D0@BL0PR12MB2580.namprd12.prod.outlook.com>
 <3b25da40-6074-46ac-68e4-a53ddc69208b@amd.com>
In-Reply-To: <3b25da40-6074-46ac-68e4-a53ddc69208b@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Enabled=true;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_SetDate=2019-12-20T17:29:38Z; 
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Method=Standard;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Name=Internal Use Only -
 Unrestricted;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_ActionId=b752462d-53e7-45a4-906e-0000209df6d6;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_ContentBits=1
msip_label_76546daa-41b6-470c-bb85-f6f40f044d7f_enabled: true
msip_label_76546daa-41b6-470c-bb85-f6f40f044d7f_setdate: 2019-12-20T17:29:38Z
msip_label_76546daa-41b6-470c-bb85-f6f40f044d7f_method: Standard
msip_label_76546daa-41b6-470c-bb85-f6f40f044d7f_name: Internal Use Only -
 Unrestricted
msip_label_76546daa-41b6-470c-bb85-f6f40f044d7f_siteid: 3dd8961f-e488-4e60-8e11-a82d994e183d
msip_label_76546daa-41b6-470c-bb85-f6f40f044d7f_actionid: 23571865-f0e0-45ce-8b44-0000a0704af1
msip_label_76546daa-41b6-470c-bb85-f6f40f044d7f_contentbits: 0
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=Oak.Zeng@amd.com; 
x-originating-ip: [99.228.101.96]
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: 78cbbe56-dc8a-486f-0c36-08d785723203
x-ms-traffictypediagnostic: BL0PR12MB2562:|BL0PR12MB2562:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <BL0PR12MB25623C09C85106CD39CF0410802D0@BL0PR12MB2562.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:1360;
x-forefront-prvs: 025796F161
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10001)(10009020)(4636009)(136003)(396003)(346002)(376002)(39860400002)(366004)(199004)(189003)(13464003)(26005)(8936002)(2906002)(71200400001)(86362001)(186003)(66556008)(81166006)(76116006)(81156014)(33656002)(64756008)(8676002)(5660300002)(52536014)(110136005)(966005)(66446008)(4001150100001)(55016002)(9686003)(316002)(45080400002)(7696005)(66946007)(53546011)(6506007)(66476007)(478600001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BL0PR12MB2562;
 H:BL0PR12MB2580.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: Jvhq5ZF0RTwqUP1WqLoHfiPpqhyt6roLSY7ShJVA8HN8Fp2iI09iXjQlaemfFbW7+mViUbzjsqN/Adi312ArZokz8aNVhj5OfFqzAtjS1M1c23iw56ZgPFekXNnZmuOZ3jyDh4Egwa86hR6J2RgPhglfcgMQuXBeiHiuXMYosqfazQBhoJE0rFBTvLgoQ2AqESrxO1mGIm1/Fze4pfBgrKgRKjYUh2HEjfyNrES7JJPr9JkRhuOwz+MQyMTyNU8hOOAUg0JMqj5o/A9gWOpBaiGUpO9DhJM5tUZF3eB9+/XsMQ2FqqK/6Mcih38LYTVNX59ADuN9g+wHrNbLQUDAAqWLcdSIfl0HAHAB87EQKONLR+Rwn9qPOecEm8TsSjtHZhf/qSWSVVK2A6xmwjT7hJ/oox7hchARiTxhA4AK5xDO5nLbe6E9cXK7PYxVL99QQAgN+FO29Cg2kwGk/C3ylf6YLz9LIVn7UGFNBsZvm2cU5MShDKT6OGVTqRa5OuSqJp9oc2hX7wemRPrynKT52FbS0eUGRQVpS9NyHWAXQUgxfVjLSaIC9SoFmoxG8THPqd2luV1QWJSUmKxCTgbIgrdMwdJMjWNzXLHF3u7k9M0VlY0sppeXow3zHbq81nlkGB1x508/2PQ1BB9IpE+HkA==
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 78cbbe56-dc8a-486f-0c36-08d785723203
X-MS-Exchange-CrossTenant-originalarrivaltime: 20 Dec 2019 17:29:40.5782 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: 6p4CVIDjCUwFlvlby3537C3ZQkDtxCAEIg0Tsp2jaw/Q9iLUIAr74gWJq4EB8L2s
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BL0PR12MB2562
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seSAtIEludGVybmFsIERpc3RyaWJ1dGlvbiBPbmx5XQ0KDQpJ
IHNlZS4gVGhhbmsgeW91IEZlbGl4IGZvciB0aGUgZXhwbGFuYXRpb24uDQoNClJlZ2FyZHMsDQpP
YWsNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IEt1ZWhsaW5nLCBGZWxpeCA8
RmVsaXguS3VlaGxpbmdAYW1kLmNvbT4gDQpTZW50OiBGcmlkYXksIERlY2VtYmVyIDIwLCAyMDE5
IDEyOjI4IFBNDQpUbzogWmVuZywgT2FrIDxPYWsuWmVuZ0BhbWQuY29tPjsgYW1kLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcNClN1YmplY3Q6IFJlOiBbUEFUQ0ggNC80XSBkcm0vYW1ka2ZkOiBB
dm9pZCBoYW5naW5nIGhhcmR3YXJlIGluIHN0b3BfY3BzY2gNCg0KT24gMjAxOS0xMi0yMCAxMjoy
MiwgWmVuZywgT2FrIHdyb3RlOg0KPiBbQU1EIE9mZmljaWFsIFVzZSBPbmx5IC0gSW50ZXJuYWwg
RGlzdHJpYnV0aW9uIE9ubHldDQo+DQo+DQo+DQo+IFJlZ2FyZHMsDQo+IE9haw0KPg0KPiAtLS0t
LU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBhbWQtZ2Z4IDxhbWQtZ2Z4LWJvdW5jZXNA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnPiBPbiBCZWhhbGYgT2YgDQo+IEZlbGl4IEt1ZWhsaW5nDQo+
IFNlbnQ6IEZyaWRheSwgRGVjZW1iZXIgMjAsIDIwMTkgMzozMCBBTQ0KPiBUbzogYW1kLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcNCj4gU3ViamVjdDogW1BBVENIIDQvNF0gZHJtL2FtZGtmZDog
QXZvaWQgaGFuZ2luZyBoYXJkd2FyZSBpbiBzdG9wX2Nwc2NoDQo+DQo+IERvbid0IHVzZSB0aGUg
SFdTIGlmIGl0J3Mga25vd24gdG8gYmUgaGFuZ2luZy4gSW4gYSByZXNldCBhbHNvIGRvbid0IHRy
eSB0byBkZXN0cm95IHRoZSBISVEgYmVjYXVzZSB0aGF0IG1heSBoYW5nIG9uIFNSSU9WIGlmIHRo
ZSBLSVEgaXMgdW5yZXNwb25zaXZlLg0KPg0KPiBTaWduZWQtb2ZmLWJ5OiBGZWxpeCBLdWVobGlu
ZyA8RmVsaXguS3VlaGxpbmdAYW1kLmNvbT4NCj4gLS0tDQo+ICAgLi4uL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuYyAgICB8IDEyICsrKysrKysrLS0tLQ0KPiAg
IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9rZXJuZWxfcXVldWUuYyAgICAgICAgfCAg
OCArKysrLS0tLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wYWNrZXRfbWFu
YWdlci5jICAgICAgfCAgNCArKy0tDQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2Zk
X3ByaXYuaCAgICAgICAgICAgICAgICB8ICA0ICsrLS0NCj4gICAuLi4vZ3B1L2RybS9hbWQvYW1k
a2ZkL2tmZF9wcm9jZXNzX3F1ZXVlX21hbmFnZXIuYyAgIHwgIDIgKy0NCj4gICA1IGZpbGVzIGNo
YW5nZWQsIDE3IGluc2VydGlvbnMoKyksIDEzIGRlbGV0aW9ucygtKQ0KPg0KPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2VyLmMg
DQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2Vy
LmMNCj4gaW5kZXggYTdlOWVjMWIzY2UzLi5kN2ViNmFjMzdmNjIgMTAwNjQ0DQo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jDQo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5j
DQo+IEBAIC05NDYsNyArOTQ2LDcgQEAgc3RhdGljIGludCBzdGFydF9ub2Nwc2NoKHN0cnVjdCBk
ZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtKSAgc3RhdGljIGludCBzdG9wX25vY3BzY2goc3RydWN0
IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0pICB7DQo+ICAgCWlmIChkcW0tPmRldi0+ZGV2aWNl
X2luZm8tPmFzaWNfZmFtaWx5ID09IENISVBfSEFXQUlJKQ0KPiAtCQlwbV91bmluaXQoJmRxbS0+
cGFja2V0cyk7DQo+ICsJCXBtX3VuaW5pdCgmZHFtLT5wYWNrZXRzLCBmYWxzZSk7DQo+ICAgCWRx
bS0+c2NoZWRfcnVubmluZyA9IGZhbHNlOw0KPiAgIA0KPiAgIAlyZXR1cm4gMDsNCj4gQEAgLTEx
MTQsMjAgKzExMTQsMjQgQEAgc3RhdGljIGludCBzdGFydF9jcHNjaChzdHJ1Y3QgZGV2aWNlX3F1
ZXVlX21hbmFnZXIgKmRxbSkNCj4gICAJcmV0dXJuIDA7DQo+ICAgZmFpbF9hbGxvY2F0ZV92aWRt
ZW06DQo+ICAgZmFpbF9zZXRfc2NoZWRfcmVzb3VyY2VzOg0KPiAtCXBtX3VuaW5pdCgmZHFtLT5w
YWNrZXRzKTsNCj4gKwlwbV91bmluaXQoJmRxbS0+cGFja2V0cywgZmFsc2UpOw0KPiAgIGZhaWxf
cGFja2V0X21hbmFnZXJfaW5pdDoNCj4gICAJcmV0dXJuIHJldHZhbDsNCj4gICB9DQo+ICAgDQo+
ICAgc3RhdGljIGludCBzdG9wX2Nwc2NoKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFt
KSAgew0KPiArCWJvb2wgaGFuZ2luZzsNCj4gKw0KPiAgIAlkcW1fbG9jayhkcW0pOw0KPiAtCXVu
bWFwX3F1ZXVlc19jcHNjaChkcW0sIEtGRF9VTk1BUF9RVUVVRVNfRklMVEVSX0FMTF9RVUVVRVMs
IDApOw0KPiArCWlmICghZHFtLT5pc19od3NfaGFuZykNCj4gKwkJdW5tYXBfcXVldWVzX2Nwc2No
KGRxbSwgS0ZEX1VOTUFQX1FVRVVFU19GSUxURVJfQUxMX1FVRVVFUywgMCk7DQo+ICsJaGFuZ2lu
ZyA9IGRxbS0+aXNfaHdzX2hhbmcgfHwgZHFtLT5pc19yZXNldHRpbmc7DQo+IFtPYWtdIEkgZG9u
J3QgdGhpbmsgZHFtLT5pc19yZXNldHRpbmcgaXMgbmVjZXNzYXJ5LiBJZiBpc19yZXNldHRpbmcg
aXMgdHJ1ZSwgaXNfaHdzX2hhbmcgaXMgYWx3YXlzIHRydWUuIFRob3NlIHR3byBmbGFncyBhcmUg
YWx3YXlzIHRoZSBzYW1lIGV4Y2VwdCBhIHBlcmlvZCBkdXJpbmcgd2hpY2ggaHdzIGhhbmcgaXMg
ZGV0ZWN0ZWQgYnV0IGtmZF9wcmVfcmVzZXQgaXMgbm90IGNhbGxlZC4gSW4gdGhpcyBwZXJpb2Qs
IGhhbmcgaXMgdHJ1ZSBidXQgcmVzZXR0aW5nIGlzIGZhbHNlLCBzbyAifHxyZXNldHRpbmciIGRv
ZXNuJ3QgaGVscC4NCg0KVGhpcyBpcyBub3QgbmVjZXNzYXJpbHkgdHJ1ZS4gQSBHUFUgcmVzZXQg
Y2FuIGJlIGNhdXNlZCBieSBhbWRncHUgZm9yIGV4YW1wbGUgd2hlbiB0aGUgZ3JhcGhpY3MgZW5n
aW5lIGlzIGhhbmdpbmcuIEluIHRoYXQgY2FzZSBIV1MgaXNuJ3QgbmVjZXNzYXJpbHkgaGFuZ2lu
Zy4gSSBhZGRlZCAifHwgcmVzZXR0aW5nIiBoZXJlIHRvIGF2b2lkIHRvdWNoaW5nIGhhcmR3YXJl
IGluIGFuIHVua25vd24gc3RhdGUgaW4gcG1fdW5pbml0PT5rcV91bmluaXRpYWxpemUgaW4gdGhp
cyBjYXNlLg0KDQpSZWdhcmRzLA0KIMKgIEZlbGl4DQoNCj4NCj4gQWxzbyBzZWUgbXkgY29tbWVu
dCBvbiB0aGUgM3JkIHBhdGNoLg0KPg0KPiAJZHFtLT5zY2hlZF9ydW5uaW5nID0gZmFsc2U7DQo+
ICAgCWRxbV91bmxvY2soZHFtKTsNCj4gICANCj4gICAJa2ZkX2d0dF9zYV9mcmVlKGRxbS0+ZGV2
LCBkcW0tPmZlbmNlX21lbSk7DQo+IC0JcG1fdW5pbml0KCZkcW0tPnBhY2tldHMpOw0KPiArCXBt
X3VuaW5pdCgmZHFtLT5wYWNrZXRzLCBoYW5naW5nKTsNCj4gICANCj4gICAJcmV0dXJuIDA7DQo+
ICAgfQ0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2tlcm5l
bF9xdWV1ZS5jIA0KPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9rZXJuZWxfcXVl
dWUuYw0KPiBpbmRleCAyZDU2ZGM1MzQ0NTkuLmJhZTcwNjQ2MmY5NiAxMDA2NDQNCj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2tlcm5lbF9xdWV1ZS5jDQo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9rZXJuZWxfcXVldWUuYw0KPiBAQCAtMTk1LDkg
KzE5NSw5IEBAIHN0YXRpYyBib29sIGtxX2luaXRpYWxpemUoc3RydWN0IGtlcm5lbF9xdWV1ZSAq
a3EsIA0KPiBzdHJ1Y3Qga2ZkX2RldiAqZGV2LCAgfQ0KPiAgIA0KPiAgIC8qIFVuaW5pdGlhbGl6
ZSBhIGtlcm5lbCBxdWV1ZSBhbmQgZnJlZSBhbGwgaXRzIG1lbW9yeSB1c2FnZXMuICovIA0KPiAt
c3RhdGljIHZvaWQga3FfdW5pbml0aWFsaXplKHN0cnVjdCBrZXJuZWxfcXVldWUgKmtxKQ0KPiAr
c3RhdGljIHZvaWQga3FfdW5pbml0aWFsaXplKHN0cnVjdCBrZXJuZWxfcXVldWUgKmtxLCBib29s
IGhhbmdpbmcpDQo+ICAgew0KPiAtCWlmIChrcS0+cXVldWUtPnByb3BlcnRpZXMudHlwZSA9PSBL
RkRfUVVFVUVfVFlQRV9ISVEpDQo+ICsJaWYgKGtxLT5xdWV1ZS0+cHJvcGVydGllcy50eXBlID09
IEtGRF9RVUVVRV9UWVBFX0hJUSAmJiAhaGFuZ2luZykNCj4gICAJCWtxLT5tcWRfbWdyLT5kZXN0
cm95X21xZChrcS0+bXFkX21nciwNCj4gICAJCQkJCWtxLT5xdWV1ZS0+bXFkLA0KPiAgIAkJCQkJ
S0ZEX1BSRUVNUFRfVFlQRV9XQVZFRlJPTlRfUkVTRVQsIEBAIC0zMzcsOSArMzM3LDkgQEAgc3Ry
dWN0IA0KPiBrZXJuZWxfcXVldWUgKmtlcm5lbF9xdWV1ZV9pbml0KHN0cnVjdCBrZmRfZGV2ICpk
ZXYsDQo+ICAgCXJldHVybiBOVUxMOw0KPiAgIH0NCj4gICANCj4gLXZvaWQga2VybmVsX3F1ZXVl
X3VuaW5pdChzdHJ1Y3Qga2VybmVsX3F1ZXVlICprcSkNCj4gK3ZvaWQga2VybmVsX3F1ZXVlX3Vu
aW5pdChzdHJ1Y3Qga2VybmVsX3F1ZXVlICprcSwgYm9vbCBoYW5naW5nKQ0KPiAgIHsNCj4gLQlr
cV91bmluaXRpYWxpemUoa3EpOw0KPiArCWtxX3VuaW5pdGlhbGl6ZShrcSwgaGFuZ2luZyk7DQo+
ICAgCWtmcmVlKGtxKTsNCj4gICB9DQo+ICAgDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfcGFja2V0X21hbmFnZXIuYyANCj4gYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGtmZC9rZmRfcGFja2V0X21hbmFnZXIuYw0KPiBpbmRleCA2Y2FiZWQwNmVmNWQuLmRj
NDA2ZTZkZWUyMyAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2Zk
X3BhY2tldF9tYW5hZ2VyLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2Zk
X3BhY2tldF9tYW5hZ2VyLmMNCj4gQEAgLTI2NCwxMCArMjY0LDEwIEBAIGludCBwbV9pbml0KHN0
cnVjdCBwYWNrZXRfbWFuYWdlciAqcG0sIHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFt
KQ0KPiAgIAlyZXR1cm4gMDsNCj4gICB9DQo+ICAgDQo+IC12b2lkIHBtX3VuaW5pdChzdHJ1Y3Qg
cGFja2V0X21hbmFnZXIgKnBtKQ0KPiArdm9pZCBwbV91bmluaXQoc3RydWN0IHBhY2tldF9tYW5h
Z2VyICpwbSwgYm9vbCBoYW5naW5nKQ0KPiAgIHsNCj4gICAJbXV0ZXhfZGVzdHJveSgmcG0tPmxv
Y2spOw0KPiAtCWtlcm5lbF9xdWV1ZV91bmluaXQocG0tPnByaXZfcXVldWUpOw0KPiArCWtlcm5l
bF9xdWV1ZV91bmluaXQocG0tPnByaXZfcXVldWUsIGhhbmdpbmcpOw0KPiAgIH0NCj4gICANCj4g
ICBpbnQgcG1fc2VuZF9zZXRfcmVzb3VyY2VzKHN0cnVjdCBwYWNrZXRfbWFuYWdlciAqcG0sIGRp
ZmYgLS1naXQgDQo+IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3ByaXYuaCANCj4g
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJpdi5oDQo+IGluZGV4IDA4N2U5Njgz
ODk5Ny4uOGFjNjgwZGM5MGYxIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfcHJpdi5oDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9w
cml2LmgNCj4gQEAgLTg4Myw3ICs4ODMsNyBAQCBzdHJ1Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIg
KmRldmljZV9xdWV1ZV9tYW5hZ2VyX2luaXQoc3RydWN0IGtmZF9kZXYgKmRldik7ICB2b2lkIGRl
dmljZV9xdWV1ZV9tYW5hZ2VyX3VuaW5pdChzdHJ1Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRx
bSk7ICBzdHJ1Y3Qga2VybmVsX3F1ZXVlICprZXJuZWxfcXVldWVfaW5pdChzdHJ1Y3Qga2ZkX2Rl
diAqZGV2LA0KPiAgIAkJCQkJZW51bSBrZmRfcXVldWVfdHlwZSB0eXBlKTsNCj4gLXZvaWQga2Vy
bmVsX3F1ZXVlX3VuaW5pdChzdHJ1Y3Qga2VybmVsX3F1ZXVlICprcSk7DQo+ICt2b2lkIGtlcm5l
bF9xdWV1ZV91bmluaXQoc3RydWN0IGtlcm5lbF9xdWV1ZSAqa3EsIGJvb2wgaGFuZ2luZyk7DQo+
ICAgaW50IGtmZF9wcm9jZXNzX3ZtX2ZhdWx0KHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAq
ZHFtLCB1bnNpZ25lZCANCj4gaW50IHBhc2lkKTsNCj4gICANCj4gICAvKiBQcm9jZXNzIFF1ZXVl
IE1hbmFnZXIgKi8NCj4gQEAgLTk3NCw3ICs5NzQsNyBAQCBleHRlcm4gY29uc3Qgc3RydWN0IHBh
Y2tldF9tYW5hZ2VyX2Z1bmNzIA0KPiBrZmRfdmlfcG1fZnVuY3M7ICBleHRlcm4gY29uc3Qgc3Ry
dWN0IHBhY2tldF9tYW5hZ2VyX2Z1bmNzIA0KPiBrZmRfdjlfcG1fZnVuY3M7DQo+ICAgDQo+ICAg
aW50IHBtX2luaXQoc3RydWN0IHBhY2tldF9tYW5hZ2VyICpwbSwgc3RydWN0IGRldmljZV9xdWV1
ZV9tYW5hZ2VyIA0KPiAqZHFtKTsgLXZvaWQgcG1fdW5pbml0KHN0cnVjdCBwYWNrZXRfbWFuYWdl
ciAqcG0pOw0KPiArdm9pZCBwbV91bmluaXQoc3RydWN0IHBhY2tldF9tYW5hZ2VyICpwbSwgYm9v
bCBoYW5naW5nKTsNCj4gICBpbnQgcG1fc2VuZF9zZXRfcmVzb3VyY2VzKHN0cnVjdCBwYWNrZXRf
bWFuYWdlciAqcG0sDQo+ICAgCQkJCXN0cnVjdCBzY2hlZHVsaW5nX3Jlc291cmNlcyAqcmVzKTsN
Cj4gICBpbnQgcG1fc2VuZF9ydW5saXN0KHN0cnVjdCBwYWNrZXRfbWFuYWdlciAqcG0sIHN0cnVj
dCBsaXN0X2hlYWQgDQo+ICpkcW1fcXVldWVzKTsgZGlmZiAtLWdpdCANCj4gYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzc19xdWV1ZV9tYW5hZ2VyLmMgDQo+IGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3NfcXVldWVfbWFuYWdlci5jDQo+IGluZGV4
IGQzZWFjZjcyZThkYi4uOGZhODU2ZTZhMDNmIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzc19xdWV1ZV9tYW5hZ2VyLmMNCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3NfcXVldWVfbWFuYWdlci5jDQo+IEBAIC0z
NzQsNyArMzc0LDcgQEAgaW50IHBxbV9kZXN0cm95X3F1ZXVlKHN0cnVjdCBwcm9jZXNzX3F1ZXVl
X21hbmFnZXIgKnBxbSwgdW5zaWduZWQgaW50IHFpZCkNCj4gICAJCS8qIGRlc3Ryb3kga2VybmVs
IHF1ZXVlIChESVEpICovDQo+ICAgCQlkcW0gPSBwcW4tPmtxLT5kZXYtPmRxbTsNCj4gICAJCWRx
bS0+b3BzLmRlc3Ryb3lfa2VybmVsX3F1ZXVlKGRxbSwgcHFuLT5rcSwgJnBkZC0+cXBkKTsNCj4g
LQkJa2VybmVsX3F1ZXVlX3VuaW5pdChwcW4tPmtxKTsNCj4gKwkJa2VybmVsX3F1ZXVlX3VuaW5p
dChwcW4tPmtxLCBmYWxzZSk7DQo+ICAgCX0NCj4gICANCj4gICAJaWYgKHBxbi0+cSkgew0KPiAt
LQ0KPiAyLjI0LjENCj4NCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18NCj4gYW1kLWdmeCBtYWlsaW5nIGxpc3QNCj4gYW1kLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcNCj4gaHR0cHM6Ly9uYW0xMS5zYWZlbGlua3MucHJvdGVjdGlvbi5vdXRsb29rLmNv
bS8/dXJsPWh0dHBzJTNBJTJGJTJGbGlzdA0KPiBzLmZyZWVkZXNrdG9wLm9yZyUyRm1haWxtYW4l
MkZsaXN0aW5mbyUyRmFtZC1nZngmYW1wO2RhdGE9MDIlN0MwMSU3Q29hDQo+IGsuemVuZyU0MGFt
ZC5jb20lN0M3NjAyZWVmOTZiMDU0NWJhYWM4NjA4ZDc4NTI2ZGRlMCU3QzNkZDg5NjFmZTQ4ODRl
NjANCj4gOGUxMWE4MmQ5OTRlMTgzZCU3QzAlN0MwJTdDNjM3MTI0Mjc0NDA3NTg3ODgxJmFtcDtz
ZGF0YT1CbFBnV2dMaSUyRnJ0aw0KPiBjUFFMdSUyRmJLMGRPcnZnNnFtNElzR1ZmdW9VbyUyQiUy
QjFnJTNEJmFtcDtyZXNlcnZlZD0wDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ft
ZC1nZngK
