Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8DF8733BFB1
	for <lists+amd-gfx@lfdr.de>; Mon, 15 Mar 2021 16:26:57 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 79E8789E57;
	Mon, 15 Mar 2021 15:26:55 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qk1-x72a.google.com (mail-qk1-x72a.google.com
 [IPv6:2607:f8b0:4864:20::72a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B906D89E57
 for <amd-gfx@lists.freedesktop.org>; Mon, 15 Mar 2021 15:26:53 +0000 (UTC)
Received: by mail-qk1-x72a.google.com with SMTP id l4so32023226qkl.0
 for <amd-gfx@lists.freedesktop.org>; Mon, 15 Mar 2021 08:26:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=bi4chk9Xzqkysqq2SZ5TYhhcn93nCtYtIWBG1qXhUDs=;
 b=CFqWSGwKHy98TgyPo1A6/zpfBptXs9JvEF40i1hak+aSr6oc9mss8Ii6sczS1mmbKN
 D00Q+l/rMIY5zxM7FuENBF5bVeV5MehFO2g6nW8CbAgEoJhrKsPdSw04D9aK3tlAHWxM
 2tZUwDMOHxcsJNAeBpwDEStLZ++l0q38diZOVG2wEPyMyb4CZt6L2dxsFabRU7Qp6dTB
 JWzwc7iAVhJMF6Jn0zw65wMJ+SHzw6GRu/0/DvoNJwv0sjnBAp3EQgBEjr7ZjXD1RFVW
 i9Dfr1Wc+ZGsmxhPQgfZPCx4MzJlgzgHPp+W3nVxyX/UFyKkkllqvqWOa5EdXWElG6GD
 yxuA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=bi4chk9Xzqkysqq2SZ5TYhhcn93nCtYtIWBG1qXhUDs=;
 b=YFbkO3vH7yTadT8s8VOWfd4p+hX8laWg3qJCYffbMQemuhOMo9I+rnovvs9a10RQKs
 p62+nJLwoUn7dkg/8eIItLAfgGduMt4AFn5Jh7DOLpNRrikF/ZL0HLkmc7O/qcrtkJH0
 oJVtVHJghOhsJLfsiVkbYUPNI0s8Nug/J3t+25D7D0szl3SHS1gB8Lrym5hFdy+L0s+6
 8ugPT8L3ErFF63hOQbBDhIZfpjUOjjPYNkXEWsghlso6yTopRpTRBEMIFU8kimEbqjqE
 XUJ2zYRRNiuoZuR4CtWz7ueinmmjBYfYbgqhGTrZdU2EFhLt6nSqbd0OQ6O4GIYcjTr6
 pJ9A==
X-Gm-Message-State: AOAM532vHNJiLJ1V9ndyCfWt0w5OorobCI443Dko++DbtSvfRaOCJ9cx
 +jWz3S+0sCR7Tg2OaJBLK90=
X-Google-Smtp-Source: ABdhPJyQog3BSCd8pRt24cXxgbPsj34HahC1kfT0dNTgswhUv5hOMObSV4mdblh2HnVhF3v4h63quQ==
X-Received: by 2002:a37:6115:: with SMTP id v21mr25743718qkb.239.1615822012733; 
 Mon, 15 Mar 2021 08:26:52 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:dd5e:327:8807:376f?
 ([2a02:908:1252:fb60:dd5e:327:8807:376f])
 by smtp.gmail.com with ESMTPSA id z89sm11419151qtd.5.2021.03.15.08.26.51
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Mon, 15 Mar 2021 08:26:52 -0700 (PDT)
Subject: Re: [PATCH] drm/amdgpu: drop legacy IO bar support
To: Alex Deucher <alexander.deucher@amd.com>, amd-gfx@lists.freedesktop.org
References: <20210315151714.1036424-1-alexander.deucher@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <4e026faa-28fb-5f76-aad6-25045c3b0cad@gmail.com>
Date: Mon, 15 Mar 2021 16:26:49 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.7.1
MIME-Version: 1.0
In-Reply-To: <20210315151714.1036424-1-alexander.deucher@amd.com>
Content-Language: en-US
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Nicholas Johnson <nicholas.johnson-opensource@outlook.com.au>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMTUuMDMuMjEgdW0gMTY6MTcgc2NocmllYiBBbGV4IERldWNoZXI6Cj4gSXQgd2FzIGxlZnRv
dmVyIGZyb20gcmFkZW9uIHdoZXJlIGl0IHdhcyByZXF1aXJlZCBmb3Igc29tZQo+IHNwZWNpZmlj
IG9sZCBoYXJkd2FyZS4gIEl0IGhhc24ndCBiZWVuIHJlcXVpcmVkIGZvciBhZ2VzCj4gYW5kIHRo
ZSBkcml2ZXIgYWxyZWFkeSBmYWxscyBiYWNrIHRvIE1NSU8gd2hlbiBsZWdhY3kgSU8KPiBpcyBu
b3QgYXZhaWxhYmxlLiAgTGVnYWN5IElPIGFsc28gc2VlbXMgdG8gYmUgcHJvYmxlbWF0aWMgb24K
PiBvbiBzb21lIHRodW5kZXJib2x0IGRldmljZXMuICBEcm9wIGl0LgoKT2ggbXksIHRoYXQgc3R1
ZmYgd2FzIHN0aWxsIGFyb3VuZD8KCkFuZCB5ZXMgdGhhdCBpcyBleHBlY3RlZCwgdGhlcmUgaXMg
cHJvYmFibHkgbm8gbGVnYWN5IElPIHNwYWNlIGFsbG9jYXRlZCAKdG8gdGhlIHRodW5kZXJib2x0
IGhhcmR3YXJlLgoKPiBTaWduZWQtb2ZmLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVj
aGVyQGFtZC5jb20+Cj4gQ2M6IE5pY2hvbGFzIEpvaG5zb24gPG5pY2hvbGFzLmpvaG5zb24tb3Bl
bnNvdXJjZUBvdXRsb29rLmNvbS5hdT4KClJldmlld2VkLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxj
aHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1LmggICAgICAgICAgfCAgNyAtLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9hdG9tYmlvcy5jIHwgNDMgLS0tLS0tLS0tLS0tLS0tCj4gICBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMgICB8IDU3IC0tLS0tLS0tLS0tLS0t
LS0tLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hdG9tLmMgICAgICAgICAgICB8
ICA0ICstCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hdG9tLmggICAgICAgICAgICB8
ICAyIC0KPiAgIDUgZmlsZXMgY2hhbmdlZCwgMiBpbnNlcnRpb25zKCspLCAxMTEgZGVsZXRpb25z
KC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1Lmgg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaAo+IGluZGV4IGY2OWU2Mzg5YmRj
Ni4uZTczOGViYmU3MzhhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKPiBA
QCAtODc2LDggKzg3Niw2IEBAIHN0cnVjdCBhbWRncHVfZGV2aWNlIHsKPiAgIAlzcGlubG9ja190
IGF1ZGlvX2VuZHB0X2lkeF9sb2NrOwo+ICAgCWFtZGdwdV9ibG9ja19ycmVnX3QJCWF1ZGlvX2Vu
ZHB0X3JyZWc7Cj4gICAJYW1kZ3B1X2Jsb2NrX3dyZWdfdAkJYXVkaW9fZW5kcHRfd3JlZzsKPiAt
CXZvaWQgX19pb21lbSAgICAgICAgICAgICAgICAgICAgKnJpb19tZW07Cj4gLQlyZXNvdXJjZV9z
aXplX3QJCQlyaW9fbWVtX3NpemU7Cj4gICAJc3RydWN0IGFtZGdwdV9kb29yYmVsbAkJZG9vcmJl
bGw7Cj4gICAKPiAgIAkvKiBjbG9jay9wbGwgaW5mbyAqLwo+IEBAIC0xMTA5LDkgKzExMDcsNiBA
QCB2b2lkIGFtZGdwdV9tbV93cmVnX21taW9fcmxjKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LAo+ICAgdm9pZCBhbWRncHVfbW1fd3JlZzgoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVp
bnQzMl90IG9mZnNldCwgdWludDhfdCB2YWx1ZSk7Cj4gICB1aW50OF90IGFtZGdwdV9tbV9ycmVn
OChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3Qgb2Zmc2V0KTsKPiAgIAo+IC11
MzIgYW1kZ3B1X2lvX3JyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHUzMiByZWcpOwo+
IC12b2lkIGFtZGdwdV9pb193cmVnKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1MzIgcmVn
LCB1MzIgdik7Cj4gLQo+ICAgdTMyIGFtZGdwdV9kZXZpY2VfaW5kaXJlY3RfcnJlZyhzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiwKPiAgIAkJCQl1MzIgcGNpZV9pbmRleCwgdTMyIHBjaWVfZGF0
YSwKPiAgIAkJCQl1MzIgcmVnX2FkZHIpOwo+IEBAIC0xMjAyLDggKzExOTcsNiBAQCBpbnQgZW11
X3NvY19hc2ljX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+ICAgCX0gd2hpbGUg
KDApCj4gICAKPiAgICNkZWZpbmUgRFJFRzMyX1NZUyhzcWYsIGFkZXYsIHJlZykgc2VxX3ByaW50
Zigoc3FmKSwgI3JlZyAiIDogMHglMDhYXG4iLCBhbWRncHVfZGV2aWNlX3JyZWcoKGFkZXYpLCAo
cmVnKSwgZmFsc2UpKQo+IC0jZGVmaW5lIFJSRUczMl9JTyhyZWcpIGFtZGdwdV9pb19ycmVnKGFk
ZXYsIChyZWcpKQo+IC0jZGVmaW5lIFdSRUczMl9JTyhyZWcsIHYpIGFtZGdwdV9pb193cmVnKGFk
ZXYsIChyZWcpLCAodikpCj4gICAKPiAgICNkZWZpbmUgUkVHX0ZJRUxEX1NISUZUKHJlZywgZmll
bGQpIHJlZyMjX18jI2ZpZWxkIyNfX1NISUZUCj4gICAjZGVmaW5lIFJFR19GSUVMRF9NQVNLKHJl
ZywgZmllbGQpIHJlZyMjX18jI2ZpZWxkIyNfTUFTSwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWJpb3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9hdG9tYmlvcy5jCj4gaW5kZXggODZhZGQwZjRlYTRkLi5lMDU2NDhhOGEx
NDUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21i
aW9zLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWJpb3Mu
Ywo+IEBAIC0xOTA1LDQwICsxOTA1LDYgQEAgc3RhdGljIHVpbnQzMl90IGNhaWxfcmVnX3JlYWQo
c3RydWN0IGNhcmRfaW5mbyAqaW5mbywgdWludDMyX3QgcmVnKQo+ICAgCXJldHVybiByOwo+ICAg
fQo+ICAgCj4gLS8qKgo+IC0gKiBjYWlsX2lvcmVnX3dyaXRlIC0gd3JpdGUgSU8gcmVnaXN0ZXIK
PiAtICoKPiAtICogQGluZm86IGF0b20gY2FyZF9pbmZvIHBvaW50ZXIKPiAtICogQHJlZzogSU8g
cmVnaXN0ZXIgb2Zmc2V0Cj4gLSAqIEB2YWw6IHZhbHVlIHRvIHdyaXRlIHRvIHRoZSBwbGwgcmVn
aXN0ZXIKPiAtICoKPiAtICogUHJvdmlkZXMgYSBJTyByZWdpc3RlciBhY2Nlc3NvciBmb3IgdGhl
IGF0b20gaW50ZXJwcmV0ZXIgKHI0eHgrKS4KPiAtICovCj4gLXN0YXRpYyB2b2lkIGNhaWxfaW9y
ZWdfd3JpdGUoc3RydWN0IGNhcmRfaW5mbyAqaW5mbywgdWludDMyX3QgcmVnLCB1aW50MzJfdCB2
YWwpCj4gLXsKPiAtCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gZHJtX3RvX2FkZXYoaW5m
by0+ZGV2KTsKPiAtCj4gLQlXUkVHMzJfSU8ocmVnLCB2YWwpOwo+IC19Cj4gLQo+IC0vKioKPiAt
ICogY2FpbF9pb3JlZ19yZWFkIC0gcmVhZCBJTyByZWdpc3Rlcgo+IC0gKgo+IC0gKiBAaW5mbzog
YXRvbSBjYXJkX2luZm8gcG9pbnRlcgo+IC0gKiBAcmVnOiBJTyByZWdpc3RlciBvZmZzZXQKPiAt
ICoKPiAtICogUHJvdmlkZXMgYW4gSU8gcmVnaXN0ZXIgYWNjZXNzb3IgZm9yIHRoZSBhdG9tIGlu
dGVycHJldGVyIChyNHh4KykuCj4gLSAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBJTyByZWdp
c3Rlci4KPiAtICovCj4gLXN0YXRpYyB1aW50MzJfdCBjYWlsX2lvcmVnX3JlYWQoc3RydWN0IGNh
cmRfaW5mbyAqaW5mbywgdWludDMyX3QgcmVnKQo+IC17Cj4gLQlzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiA9IGRybV90b19hZGV2KGluZm8tPmRldik7Cj4gLQl1aW50MzJfdCByOwo+IC0KPiAt
CXIgPSBSUkVHMzJfSU8ocmVnKTsKPiAtCXJldHVybiByOwo+IC19Cj4gLQo+ICAgc3RhdGljIHNz
aXplX3QgYW1kZ3B1X2F0b21iaW9zX2dldF92Ymlvc192ZXJzaW9uKHN0cnVjdCBkZXZpY2UgKmRl
diwKPiAgIAkJCQkJCSBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwKPiAgIAkJCQkJCSBj
aGFyICpidWYpCj4gQEAgLTE5OTgsMTUgKzE5NjQsNiBAQCBpbnQgYW1kZ3B1X2F0b21iaW9zX2lu
aXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAJYXRvbV9jYXJkX2luZm8tPmRldiA9
IGFkZXZfdG9fZHJtKGFkZXYpOwo+ICAgCWF0b21fY2FyZF9pbmZvLT5yZWdfcmVhZCA9IGNhaWxf
cmVnX3JlYWQ7Cj4gICAJYXRvbV9jYXJkX2luZm8tPnJlZ193cml0ZSA9IGNhaWxfcmVnX3dyaXRl
Owo+IC0JLyogbmVlZGVkIGZvciBpaW8gb3BzICovCj4gLQlpZiAoYWRldi0+cmlvX21lbSkgewo+
IC0JCWF0b21fY2FyZF9pbmZvLT5pb3JlZ19yZWFkID0gY2FpbF9pb3JlZ19yZWFkOwo+IC0JCWF0
b21fY2FyZF9pbmZvLT5pb3JlZ193cml0ZSA9IGNhaWxfaW9yZWdfd3JpdGU7Cj4gLQl9IGVsc2Ug
ewo+IC0JCURSTV9ERUJVRygiUENJIEkvTyBCQVIgaXMgbm90IGZvdW5kLiBVc2luZyBNTUlPIHRv
IGFjY2VzcyBBVE9NIEJJT1NcbiIpOwo+IC0JCWF0b21fY2FyZF9pbmZvLT5pb3JlZ19yZWFkID0g
Y2FpbF9yZWdfcmVhZDsKPiAtCQlhdG9tX2NhcmRfaW5mby0+aW9yZWdfd3JpdGUgPSBjYWlsX3Jl
Z193cml0ZTsKPiAtCX0KPiAgIAlhdG9tX2NhcmRfaW5mby0+bWNfcmVhZCA9IGNhaWxfbWNfcmVh
ZDsKPiAgIAlhdG9tX2NhcmRfaW5mby0+bWNfd3JpdGUgPSBjYWlsX21jX3dyaXRlOwo+ICAgCWF0
b21fY2FyZF9pbmZvLT5wbGxfcmVhZCA9IGNhaWxfcGxsX3JlYWQ7Cj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYwo+IGluZGV4IGUwNGVjM2M4MzQ4NS4uMTEyNzQ5
NTQ5YzAwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9k
ZXZpY2UuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2Uu
Ywo+IEBAIC00NjYsNDkgKzQ2Niw2IEBAIHZvaWQgYW1kZ3B1X21tX3dyZWdfbW1pb19ybGMoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAJfQo+ICAgfQo+ICAgCj4gLS8qKgo+IC0gKiBh
bWRncHVfaW9fcnJlZyAtIHJlYWQgYW4gSU8gcmVnaXN0ZXIKPiAtICoKPiAtICogQGFkZXY6IGFt
ZGdwdV9kZXZpY2UgcG9pbnRlcgo+IC0gKiBAcmVnOiBkd29yZCBhbGlnbmVkIHJlZ2lzdGVyIG9m
ZnNldAo+IC0gKgo+IC0gKiBSZXR1cm5zIHRoZSAzMiBiaXQgdmFsdWUgZnJvbSB0aGUgb2Zmc2V0
IHNwZWNpZmllZC4KPiAtICovCj4gLXUzMiBhbWRncHVfaW9fcnJlZyhzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwgdTMyIHJlZykKPiAtewo+IC0JaWYgKGFkZXYtPmluX3BjaV9lcnJfcmVjb3Zl
cnkpCj4gLQkJcmV0dXJuIDA7Cj4gLQo+IC0JaWYgKChyZWcgKiA0KSA8IGFkZXYtPnJpb19tZW1f
c2l6ZSkKPiAtCQlyZXR1cm4gaW9yZWFkMzIoYWRldi0+cmlvX21lbSArIChyZWcgKiA0KSk7Cj4g
LQllbHNlIHsKPiAtCQlpb3dyaXRlMzIoKHJlZyAqIDQpLCBhZGV2LT5yaW9fbWVtICsgKG1tTU1f
SU5ERVggKiA0KSk7Cj4gLQkJcmV0dXJuIGlvcmVhZDMyKGFkZXYtPnJpb19tZW0gKyAobW1NTV9E
QVRBICogNCkpOwo+IC0JfQo+IC19Cj4gLQo+IC0vKioKPiAtICogYW1kZ3B1X2lvX3dyZWcgLSB3
cml0ZSB0byBhbiBJTyByZWdpc3Rlcgo+IC0gKgo+IC0gKiBAYWRldjogYW1kZ3B1X2RldmljZSBw
b2ludGVyCj4gLSAqIEByZWc6IGR3b3JkIGFsaWduZWQgcmVnaXN0ZXIgb2Zmc2V0Cj4gLSAqIEB2
OiAzMiBiaXQgdmFsdWUgdG8gd3JpdGUgdG8gdGhlIHJlZ2lzdGVyCj4gLSAqCj4gLSAqIFdyaXRl
cyB0aGUgdmFsdWUgc3BlY2lmaWVkIHRvIHRoZSBvZmZzZXQgc3BlY2lmaWVkLgo+IC0gKi8KPiAt
dm9pZCBhbWRncHVfaW9fd3JlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdTMyIHJlZywg
dTMyIHYpCj4gLXsKPiAtCWlmIChhZGV2LT5pbl9wY2lfZXJyX3JlY292ZXJ5KQo+IC0JCXJldHVy
bjsKPiAtCj4gLQlpZiAoKHJlZyAqIDQpIDwgYWRldi0+cmlvX21lbV9zaXplKQo+IC0JCWlvd3Jp
dGUzMih2LCBhZGV2LT5yaW9fbWVtICsgKHJlZyAqIDQpKTsKPiAtCWVsc2Ugewo+IC0JCWlvd3Jp
dGUzMigocmVnICogNCksIGFkZXYtPnJpb19tZW0gKyAobW1NTV9JTkRFWCAqIDQpKTsKPiAtCQlp
b3dyaXRlMzIodiwgYWRldi0+cmlvX21lbSArIChtbU1NX0RBVEEgKiA0KSk7Cj4gLQl9Cj4gLX0K
PiAtCj4gICAvKioKPiAgICAqIGFtZGdwdV9tbV9yZG9vcmJlbGwgLSByZWFkIGEgZG9vcmJlbGwg
ZHdvcmQKPiAgICAqCj4gQEAgLTMzNjEsMTcgKzMzMTgsNiBAQCBpbnQgYW1kZ3B1X2RldmljZV9p
bml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgCURSTV9JTkZPKCJyZWdpc3RlciBt
bWlvIGJhc2U6IDB4JTA4WFxuIiwgKHVpbnQzMl90KWFkZXYtPnJtbWlvX2Jhc2UpOwo+ICAgCURS
TV9JTkZPKCJyZWdpc3RlciBtbWlvIHNpemU6ICV1XG4iLCAodW5zaWduZWQpYWRldi0+cm1taW9f
c2l6ZSk7Cj4gICAKPiAtCS8qIGlvIHBvcnQgbWFwcGluZyAqLwo+IC0JZm9yIChpID0gMDsgaSA8
IERFVklDRV9DT1VOVF9SRVNPVVJDRTsgaSsrKSB7Cj4gLQkJaWYgKHBjaV9yZXNvdXJjZV9mbGFn
cyhhZGV2LT5wZGV2LCBpKSAmIElPUkVTT1VSQ0VfSU8pIHsKPiAtCQkJYWRldi0+cmlvX21lbV9z
aXplID0gcGNpX3Jlc291cmNlX2xlbihhZGV2LT5wZGV2LCBpKTsKPiAtCQkJYWRldi0+cmlvX21l
bSA9IHBjaV9pb21hcChhZGV2LT5wZGV2LCBpLCBhZGV2LT5yaW9fbWVtX3NpemUpOwo+IC0JCQli
cmVhazsKPiAtCQl9Cj4gLQl9Cj4gLQlpZiAoYWRldi0+cmlvX21lbSA9PSBOVUxMKQo+IC0JCURS
TV9JTkZPKCJQQ0kgSS9PIEJBUiBpcyBub3QgZm91bmQuXG4iKTsKPiAtCj4gICAJLyogZW5hYmxl
IFBDSUUgYXRvbWljIG9wcyAqLwo+ICAgCXIgPSBwY2lfZW5hYmxlX2F0b21pY19vcHNfdG9fcm9v
dChhZGV2LT5wZGV2LAo+ICAgCQkJCQkgIFBDSV9FWFBfREVWQ0FQMl9BVE9NSUNfQ09NUDMyIHwK
PiBAQCAtMzY5Myw5ICszNjM5LDYgQEAgdm9pZCBhbWRncHVfZGV2aWNlX2Zpbmkoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAJfQo+ICAgCWlmICgoYWRldi0+cGRldi0+Y2xhc3MgPj4g
OCkgPT0gUENJX0NMQVNTX0RJU1BMQVlfVkdBKQo+ICAgCQl2Z2FfY2xpZW50X3JlZ2lzdGVyKGFk
ZXYtPnBkZXYsIE5VTEwsIE5VTEwsIE5VTEwpOwo+IC0JaWYgKGFkZXYtPnJpb19tZW0pCj4gLQkJ
cGNpX2lvdW5tYXAoYWRldi0+cGRldiwgYWRldi0+cmlvX21lbSk7Cj4gLQlhZGV2LT5yaW9fbWVt
ID0gTlVMTDsKPiAgIAlpb3VubWFwKGFkZXYtPnJtbWlvKTsKPiAgIAlhZGV2LT5ybW1pbyA9IE5V
TEw7Cj4gICAJYW1kZ3B1X2RldmljZV9kb29yYmVsbF9maW5pKGFkZXYpOwo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hdG9tLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hdG9tLmMKPiBpbmRleCA1MTU4OTBmNGY1YTAuLjNkY2I4YjMyZjQ4YiAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hdG9tLmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hdG9tLmMKPiBAQCAtMTE0LDExICsxMTQsMTEgQEAgc3RhdGlj
IHVpbnQzMl90IGF0b21faWlvX2V4ZWN1dGUoc3RydWN0IGF0b21fY29udGV4dCAqY3R4LCBpbnQg
YmFzZSwKPiAgIAkJCWJhc2UrKzsKPiAgIAkJCWJyZWFrOwo+ICAgCQljYXNlIEFUT01fSUlPX1JF
QUQ6Cj4gLQkJCXRlbXAgPSBjdHgtPmNhcmQtPmlvcmVnX3JlYWQoY3R4LT5jYXJkLCBDVTE2KGJh
c2UgKyAxKSk7Cj4gKwkJCXRlbXAgPSBjdHgtPmNhcmQtPnJlZ19yZWFkKGN0eC0+Y2FyZCwgQ1Ux
NihiYXNlICsgMSkpOwo+ICAgCQkJYmFzZSArPSAzOwo+ICAgCQkJYnJlYWs7Cj4gICAJCWNhc2Ug
QVRPTV9JSU9fV1JJVEU6Cj4gLQkJCWN0eC0+Y2FyZC0+aW9yZWdfd3JpdGUoY3R4LT5jYXJkLCBD
VTE2KGJhc2UgKyAxKSwgdGVtcCk7Cj4gKwkJCWN0eC0+Y2FyZC0+cmVnX3dyaXRlKGN0eC0+Y2Fy
ZCwgQ1UxNihiYXNlICsgMSksIHRlbXApOwo+ICAgCQkJYmFzZSArPSAzOwo+ICAgCQkJYnJlYWs7
Cj4gICAJCWNhc2UgQVRPTV9JSU9fQ0xFQVI6Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2F0b20uaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2F0b20uaAo+
IGluZGV4IDQyMDViYmU1ZDhkNy4uZDI3OTc1OWNhYjQ3IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2F0b20uaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2F0b20uaAo+IEBAIC0xMTYsOCArMTE2LDYgQEAgc3RydWN0IGNhcmRfaW5mbyB7Cj4gICAJ
c3RydWN0IGRybV9kZXZpY2UgKmRldjsKPiAgIAl2b2lkICgqIHJlZ193cml0ZSkoc3RydWN0IGNh
cmRfaW5mbyAqLCB1aW50MzJfdCwgdWludDMyX3QpOyAgIC8qICBmaWxsZWQgYnkgZHJpdmVyICov
Cj4gICAJdWludDMyX3QgKCogcmVnX3JlYWQpKHN0cnVjdCBjYXJkX2luZm8gKiwgdWludDMyX3Qp
OyAgICAgICAgICAvKiAgZmlsbGVkIGJ5IGRyaXZlciAqLwo+IC0Jdm9pZCAoKiBpb3JlZ193cml0
ZSkoc3RydWN0IGNhcmRfaW5mbyAqLCB1aW50MzJfdCwgdWludDMyX3QpOyAgIC8qICBmaWxsZWQg
YnkgZHJpdmVyICovCj4gLQl1aW50MzJfdCAoKiBpb3JlZ19yZWFkKShzdHJ1Y3QgY2FyZF9pbmZv
ICosIHVpbnQzMl90KTsgICAgICAgICAgLyogIGZpbGxlZCBieSBkcml2ZXIgKi8KPiAgIAl2b2lk
ICgqIG1jX3dyaXRlKShzdHJ1Y3QgY2FyZF9pbmZvICosIHVpbnQzMl90LCB1aW50MzJfdCk7ICAg
LyogIGZpbGxlZCBieSBkcml2ZXIgKi8KPiAgIAl1aW50MzJfdCAoKiBtY19yZWFkKShzdHJ1Y3Qg
Y2FyZF9pbmZvICosIHVpbnQzMl90KTsgICAgICAgICAgLyogIGZpbGxlZCBieSBkcml2ZXIgKi8K
PiAgIAl2b2lkICgqIHBsbF93cml0ZSkoc3RydWN0IGNhcmRfaW5mbyAqLCB1aW50MzJfdCwgdWlu
dDMyX3QpOyAgIC8qICBmaWxsZWQgYnkgZHJpdmVyICovCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2FtZC1nZngK
