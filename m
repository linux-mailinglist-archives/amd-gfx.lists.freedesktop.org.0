Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5356CCE8C7
	for <lists+amd-gfx@lfdr.de>; Mon,  7 Oct 2019 18:11:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D83E76E140;
	Mon,  7 Oct 2019 16:11:46 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E3EC26E140
 for <amd-gfx@lists.freedesktop.org>; Mon,  7 Oct 2019 16:11:45 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id n14so15980331wrw.9
 for <amd-gfx@lists.freedesktop.org>; Mon, 07 Oct 2019 09:11:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=NVwz+3f+78LbPIH5OAvJ09ZGw1vtpyDErmNBQT9uTEA=;
 b=GN5AZr3ljEPImgaHRndMWdigOh42fUCbaO6ZbhXzPIldv1N/CFh3lPFQx83L0fFbH5
 puvJeigXYQF83CZeQEnvZo6qqPRC2NPHM0lRRbP/zG+gLlAhd/UuiWv/sVVAiczpzeUu
 KywrTHbyNqM9lpnoGMoXKw+fFJpQ5I7RXR5iez99RCbwjSy8m7RNfdOL8CfV8sBX108u
 1hoPpwsBd87+yEPIAeklgWTjALv/Yw7+vzQI4cwIL62jZcWm+ssEBM/Vs/yomVWm/dF6
 UtywfMz1FSXhrP6o/vAjXKWD7yBmJDjaNxyYWYx69+aqlKOjUYCR4ECSXOBMsr87GloB
 CM3g==
X-Gm-Message-State: APjAAAV754qwVOW94Jjt/w+4fk35wGty/xX43yPXgFs1skC+AeI6hrlb
 B0HdlIr8Vhe6Wb6bLmhvkP4zo4rR6ub5WoNLaBM=
X-Google-Smtp-Source: APXvYqz+9+LiZHzBYb5bjjVknOaXI+vVFK7y3qUZWP3bo/008ARK8W6sVo8rMvwdPPwMGUHSDl8fDwFyNYR4EVSc428=
X-Received: by 2002:adf:fa0e:: with SMTP id m14mr18171544wrr.11.1570464704325; 
 Mon, 07 Oct 2019 09:11:44 -0700 (PDT)
MIME-Version: 1.0
References: <20191007160811.23842-1-Ori.Messinger@amd.com>
In-Reply-To: <20191007160811.23842-1-Ori.Messinger@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Mon, 7 Oct 2019 12:11:32 -0400
Message-ID: <CADnq5_O=hdF9pDSL3J_-J9-K-9hCHrV0q=_UZZFENkP-yos2nA@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu: Report vram vendor with sysfs (v3)
To: "Messinger, Ori" <Ori.Messinger@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=NVwz+3f+78LbPIH5OAvJ09ZGw1vtpyDErmNBQT9uTEA=;
 b=X1/lvbgjEhm1+f+RC++SCVqjT0IhkHP3SEKilG7FKytt3fjdrMaJEk/E1N3x3P8Ebo
 qpr9yoA4aA5ehX8dp/70rDPHyYF9WvfzZbOG8W8lnwj/inpIDGQFuVN6J0aplML5alnz
 MEoAisMJb2MBE95nMUFuICtf2uM5IsRDnOa7G9l7ceF34rfKMJoV2qE1mfIBMVaPkuVd
 UtXIBDOytAH2Bm8P+W9WokKrYsBpmQ0760oeZ4j8nfq88LmxU17pBmXTQpCkbKjokS27
 tFdtwUbYIPiigLkg14Y/nIgM1We2AHWzpFBKSlLy8qOVp7JuE0cW+1kHB6hy0KO7XaAR
 OWDQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCBPY3QgNywgMjAxOSBhdCAxMjowOCBQTSBNZXNzaW5nZXIsIE9yaSA8T3JpLk1lc3Np
bmdlckBhbWQuY29tPiB3cm90ZToKPgo+IFRoZSB2cmFtIHZlbmRvciBjYW4gYmUgZm91bmQgYXMg
YSBzZXBhcmF0ZSBzeXNmcyBmaWxlIGF0Ogo+IC9zeXMvY2xhc3MvZHJtL2NhcmRbWF0vZGV2aWNl
L21lbV9pbmZvX3ZyYW1fdmVuZG9yCj4gVGhlIHZyYW0gdmVuZG9yIGlzIGRpc3BsYXllZCBhcyBh
IHN0cmluZyB2YWx1ZS4KPgo+IHYyOiBVc2UgY29ycmVjdCBiaXQgbWFza2luZywgYW5kIGNhY2hl
IHZyYW1fdmVuZG9yIGluIGdtYwo+IHYzOiBEcm9wIHVudXNlZCBmdW5jdGlvbnMgZm9yIHZyYW0g
d2lkdGgsIHR5cGUsIGFuZCB2ZW5kb3IKPgo+IENoYW5nZS1JZDogSWFhM2NjZjNmNDgzZWU2NTM2
MjgxZmU3Nzc3NzJiYTI0MWE2ZTBkNDMKPiBTaWduZWQtb2ZmLWJ5OiBPcmkgTWVzc2luZ2VyIDxv
cmkubWVzc2luZ2VyQGFtZC5jb20+CgpSZXZpZXdlZC1ieTogQWxleCBEZXVjaGVyIDxhbGV4YW5k
ZXIuZGV1Y2hlckBhbWQuY29tPgoKPiAtLS0KPiAgLi4uL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfYXRvbWZpcm13YXJlLmMgIHwgMTQgKysrKystCj4gIC4uLi9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2F0b21maXJtd2FyZS5oICB8ICAyICstCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9nbWMuaCAgICAgICB8ICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3ZyYW1fbWdyLmMgIHwgNDMgKysrKysrKysrKysrKysrKysrKwo+ICBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYyAgICAgICAgfCAgNiArKy0KPiAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYyAgICAgICAgIHwgIDYgKystCj4gIDYgZmls
ZXMgY2hhbmdlZCwgNjUgaW5zZXJ0aW9ucygrKSwgNyBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMKPiBpbmRleCAx
OTkxM2MzOTU4OGIuLjM5ZmQ4YWU1YTgyMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMKPiBAQCAtMTY5LDggKzE2OSwxMSBAQCBz
dGF0aWMgaW50IGNvbnZlcnRfYXRvbV9tZW1fdHlwZV90b192cmFtX3R5cGUoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYsCj4gICAgICAgICByZXR1cm4gdnJhbV90eXBlOwo+ICB9Cj4KPiAtaW50
IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCAqdnJhbV93
aWR0aCwgaW50ICp2cmFtX3R5cGUpCj4gKwo+ICtpbnQKPiArYW1kZ3B1X2F0b21maXJtd2FyZV9n
ZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpbnQgKnZyYW1fd2lkdGgsIGludCAqdnJhbV90eXBlLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgKnZyYW1fdmVuZG9yKQo+ICB7Cj4g
ICAgICAgICBzdHJ1Y3QgYW1kZ3B1X21vZGVfaW5mbyAqbW9kZV9pbmZvID0gJmFkZXYtPm1vZGVf
aW5mbzsKPiAgICAgICAgIGludCBpbmRleCwgaSA9IDA7Cj4gQEAgLTE4MCw2ICsxODMsNyBAQCBp
bnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LAo+ICAgICAgICAgdW5pb24gdnJhbV9tb2R1bGUgKnZyYW1fbW9kdWxlOwo+ICAgICAg
ICAgdTggZnJldiwgY3JldjsKPiAgICAgICAgIHU4IG1lbV90eXBlOwo+ICsgICAgICAgdTggbWVt
X3ZlbmRvcjsKPiAgICAgICAgIHUzMiBtZW1fY2hhbm5lbF9udW1iZXI7Cj4gICAgICAgICB1MzIg
bWVtX2NoYW5uZWxfd2lkdGg7Cj4gICAgICAgICB1MzIgbW9kdWxlX2lkOwo+IEBAIC0yMzEsNiAr
MjM1LDkgQEAgaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9j
aGFubmVsX3dpZHRoID0gdnJhbV9tb2R1bGUtPnY5LmNoYW5uZWxfd2lkdGg7Cj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJhbV93aWR0aCkKPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgKnZyYW1fd2lkdGggPSBtZW1fY2hhbm5lbF9udW1iZXIg
KiAoMSA8PCBtZW1fY2hhbm5lbF93aWR0aCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBtZW1fdmVuZG9yID0gKHZyYW1fbW9kdWxlLT52OS52ZW5kZXJfcmV2X2lkKSAmIDB4RjsK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmFtX3ZlbmRvcikKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKnZyYW1fdmVuZG9yID0gbWVtX3Zl
bmRvcjsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICAgICAgICAg
ICAgICAgICAgICAgICAgIGNhc2UgNDoKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGlmIChtb2R1bGVfaWQgPiB2cmFtX2luZm8tPnYyNC52cmFtX21vZHVsZV9udW0pCj4gQEAgLTI0
OCw2ICsyNTUsOSBAQCBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
bWVtX2NoYW5uZWxfd2lkdGggPSB2cmFtX21vZHVsZS0+djEwLmNoYW5uZWxfd2lkdGg7Cj4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJhbV93aWR0aCkKPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKnZyYW1fd2lkdGggPSBtZW1fY2hhbm5lbF9u
dW1iZXIgKiAoMSA8PCBtZW1fY2hhbm5lbF93aWR0aCk7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBtZW1fdmVuZG9yID0gKHZyYW1fbW9kdWxlLT52MTAudmVuZGVyX3Jldl9pZCkg
JiAweEY7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJhbV92ZW5kb3Ip
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICp2cmFtX3ZlbmRvciA9
IG1lbV92ZW5kb3I7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiAg
ICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Ogo+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuaAo+IGluZGV4IDgyODE5ZjAzZTQ0NC4uNTM0NDlmYzdi
YWY0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9t
ZmlybXdhcmUuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9t
ZmlybXdhcmUuaAo+IEBAIC0zMCw3ICszMCw3IEBAIGJvb2wgYW1kZ3B1X2F0b21maXJtd2FyZV9n
cHVfc3VwcG9ydHNfdmlydHVhbGl6YXRpb24oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4g
IHZvaWQgYW1kZ3B1X2F0b21maXJtd2FyZV9zY3JhdGNoX3JlZ3NfaW5pdChzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldik7Cj4gIGludCBhbWRncHVfYXRvbWZpcm13YXJlX2FsbG9jYXRlX2ZiX3Nj
cmF0Y2goc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+ICBpbnQgYW1kZ3B1X2F0b21maXJt
d2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ICp2cmFtX3dpZHRoLCBpbnQgKnZyYW1f
dHlwZSk7Cj4gKyAgICAgICBpbnQgKnZyYW1fd2lkdGgsIGludCAqdnJhbV90eXBlLCBpbnQgKnZy
YW1fdmVuZG9yKTsKPiAgaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X2Nsb2NrX2luZm8oc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+ICBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRf
Z2Z4X2luZm8oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+ICBib29sIGFtZGdwdV9hdG9t
ZmlybXdhcmVfbWVtX2VjY19zdXBwb3J0ZWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmggYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmgKPiBpbmRleCBkNTkxYjM3NWQx
ZGYuLjU1NWQ4ZTU3ZmFlOSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZ21jLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
Z21jLmgKPiBAQCAtMTU3LDYgKzE1Nyw3IEBAIHN0cnVjdCBhbWRncHVfZ21jIHsKPiAgICAgICAg
IHVpbnQzMl90ICAgICAgICAgICAgICAgIGZ3X3ZlcnNpb247Cj4gICAgICAgICBzdHJ1Y3QgYW1k
Z3B1X2lycV9zcmMgICB2bV9mYXVsdDsKPiAgICAgICAgIHVpbnQzMl90ICAgICAgICAgICAgICAg
IHZyYW1fdHlwZTsKPiArICAgICAgIHVpbnQ4X3QgICAgICAgICAgICAgICAgIHZyYW1fdmVuZG9y
Owo+ICAgICAgICAgdWludDMyX3QgICAgICAgICAgICAgICAgc3JibV9zb2Z0X3Jlc2V0Owo+ICAg
ICAgICAgYm9vbCAgICAgICAgICAgICAgICAgICAgcHJ0X3dhcm5pbmc7Cj4gICAgICAgICB1aW50
NjRfdCAgICAgICAgICAgICAgICBzdG9sZW5fc2l6ZTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZyYW1fbWdyLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYwo+IGluZGV4IDg4ODdiMzk2NGU0My4uODJhMzI5OWU1
M2MwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92cmFt
X21nci5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZyYW1fbWdy
LmMKPiBAQCAtMjQsNiArMjQsOCBAQAo+Cj4gICNpbmNsdWRlICJhbWRncHUuaCIKPiAgI2luY2x1
ZGUgImFtZGdwdV92bS5oIgo+ICsjaW5jbHVkZSAiYW1kZ3B1X2F0b21maXJtd2FyZS5oIgo+ICsj
aW5jbHVkZSAiYXRvbS5oIgo+Cj4gIHN0cnVjdCBhbWRncHVfdnJhbV9tZ3Igewo+ICAgICAgICAg
c3RydWN0IGRybV9tbSBtbTsKPiBAQCAtMTAyLDYgKzEwNCwzOSBAQCBzdGF0aWMgc3NpemVfdCBh
bWRncHVfbWVtX2luZm9fdmlzX3ZyYW1fdXNlZF9zaG93KHN0cnVjdCBkZXZpY2UgKmRldiwKPiAg
ICAgICAgICAgICAgICAgYW1kZ3B1X3ZyYW1fbWdyX3Zpc191c2FnZSgmYWRldi0+bW1hbi5iZGV2
Lm1hbltUVE1fUExfVlJBTV0pKTsKPiAgfQo+Cj4gK3N0YXRpYyBzc2l6ZV90IGFtZGdwdV9tZW1f
aW5mb192cmFtX3ZlbmRvcihzdHJ1Y3QgZGV2aWNlICpkZXYsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICph
dHRyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
aGFyICpidWYpCj4gK3sKPiArICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZGV2ID0gZGV2X2dl
dF9kcnZkYXRhKGRldik7Cj4gKyAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGRk
ZXYtPmRldl9wcml2YXRlOwo+ICsKPiArICAgICAgIHN3aXRjaCAoYWRldi0+Z21jLnZyYW1fdmVu
ZG9yKSB7Cj4gKyAgICAgICBjYXNlIFNBTVNVTkc6Cj4gKyAgICAgICAgICAgICAgIHJldHVybiBz
bnByaW50ZihidWYsIFBBR0VfU0laRSwgInNhbXN1bmdcbiIpOwo+ICsgICAgICAgY2FzZSBJTkZJ
TkVPTjoKPiArICAgICAgICAgICAgICAgcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAi
aW5maW5lb25cbiIpOwo+ICsgICAgICAgY2FzZSBFTFBJREE6Cj4gKyAgICAgICAgICAgICAgIHJl
dHVybiBzbnByaW50ZihidWYsIFBBR0VfU0laRSwgImVscGlkYVxuIik7Cj4gKyAgICAgICBjYXNl
IEVUUk9OOgo+ICsgICAgICAgICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUs
ICJldHJvblxuIik7Cj4gKyAgICAgICBjYXNlIE5BTllBOgo+ICsgICAgICAgICAgICAgICByZXR1
cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJuYW55YVxuIik7Cj4gKyAgICAgICBjYXNlIEhZ
TklYOgo+ICsgICAgICAgICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJo
eW5peFxuIik7Cj4gKyAgICAgICBjYXNlIE1PU0VMOgo+ICsgICAgICAgICAgICAgICByZXR1cm4g
c25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJtb3NlbFxuIik7Cj4gKyAgICAgICBjYXNlIFdJTkJP
TkQ6Cj4gKyAgICAgICAgICAgICAgIHJldHVybiBzbnByaW50ZihidWYsIFBBR0VfU0laRSwgIndp
bmJvbmRcbiIpOwo+ICsgICAgICAgY2FzZSBFU01UOgo+ICsgICAgICAgICAgICAgICByZXR1cm4g
c25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJlc210XG4iKTsKPiArICAgICAgIGNhc2UgTUlDUk9O
Ogo+ICsgICAgICAgICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJtaWNy
b25cbiIpOwo+ICsgICAgICAgZGVmYXVsdDoKPiArICAgICAgICAgICAgICAgcmV0dXJuIHNucHJp
bnRmKGJ1ZiwgUEFHRV9TSVpFLCAidW5rbm93blxuIik7Cj4gKyAgICAgICB9Cj4gK30KPiArCj4g
IHN0YXRpYyBERVZJQ0VfQVRUUihtZW1faW5mb192cmFtX3RvdGFsLCBTX0lSVUdPLAo+ICAgICAg
ICAgICAgICAgICAgICBhbWRncHVfbWVtX2luZm9fdnJhbV90b3RhbF9zaG93LCBOVUxMKTsKPiAg
c3RhdGljIERFVklDRV9BVFRSKG1lbV9pbmZvX3Zpc192cmFtX3RvdGFsLCBTX0lSVUdPLAo+IEBA
IC0xMTAsNiArMTQ1LDggQEAgc3RhdGljIERFVklDRV9BVFRSKG1lbV9pbmZvX3ZyYW1fdXNlZCwg
U19JUlVHTywKPiAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X21lbV9pbmZvX3ZyYW1fdXNlZF9z
aG93LCBOVUxMKTsKPiAgc3RhdGljIERFVklDRV9BVFRSKG1lbV9pbmZvX3Zpc192cmFtX3VzZWQs
IFNfSVJVR08sCj4gICAgICAgICAgICAgICAgICAgIGFtZGdwdV9tZW1faW5mb192aXNfdnJhbV91
c2VkX3Nob3csIE5VTEwpOwo+ICtzdGF0aWMgREVWSUNFX0FUVFIobWVtX2luZm9fdnJhbV92ZW5k
b3IsIFNfSVJVR08sCj4gKyAgICAgICAgICAgICAgICAgIGFtZGdwdV9tZW1faW5mb192cmFtX3Zl
bmRvciwgTlVMTCk7Cj4KPiAgLyoqCj4gICAqIGFtZGdwdV92cmFtX21ncl9pbml0IC0gaW5pdCBW
UkFNIG1hbmFnZXIgYW5kIERSTSBNTQo+IEBAIC0xNTUsNiArMTkyLDExIEBAIHN0YXRpYyBpbnQg
YW1kZ3B1X3ZyYW1fbWdyX2luaXQoc3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2VyICptYW4sCj4g
ICAgICAgICAgICAgICAgIERSTV9FUlJPUigiRmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZSBt
ZW1faW5mb192aXNfdnJhbV91c2VkXG4iKTsKPiAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsK
PiAgICAgICAgIH0KPiArICAgICAgIHJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYs
ICZkZXZfYXR0cl9tZW1faW5mb192cmFtX3ZlbmRvcik7Cj4gKyAgICAgICBpZiAocmV0KSB7Cj4g
KyAgICAgICAgICAgICAgIERSTV9FUlJPUigiRmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZSBt
ZW1faW5mb192cmFtX3ZlbmRvclxuIik7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4g
KyAgICAgICB9Cj4KPiAgICAgICAgIHJldHVybiAwOwo+ICB9Cj4gQEAgLTE4MSw2ICsyMjMsNyBA
QCBzdGF0aWMgaW50IGFtZGdwdV92cmFtX21ncl9maW5pKHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFu
YWdlciAqbWFuKQo+ICAgICAgICAgZGV2aWNlX3JlbW92ZV9maWxlKGFkZXYtPmRldiwgJmRldl9h
dHRyX21lbV9pbmZvX3Zpc192cmFtX3RvdGFsKTsKPiAgICAgICAgIGRldmljZV9yZW1vdmVfZmls
ZShhZGV2LT5kZXYsICZkZXZfYXR0cl9tZW1faW5mb192cmFtX3VzZWQpOwo+ICAgICAgICAgZGV2
aWNlX3JlbW92ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX21lbV9pbmZvX3Zpc192cmFtX3Vz
ZWQpOwo+ICsgICAgICAgZGV2aWNlX3JlbW92ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX21l
bV9pbmZvX3ZyYW1fdmVuZG9yKTsKPiAgICAgICAgIHJldHVybiAwOwo+ICB9Cj4KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYwo+IGluZGV4IGNiM2Y2MTg3M2JhYS4uZmI0ODYy
MmMyYWJkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192MTBf
MC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMKPiBAQCAt
NjI0LDcgKzYyNCw3IEBAIHN0YXRpYyB1bnNpZ25lZCBnbWNfdjEwXzBfZ2V0X3ZiaW9zX2ZiX3Np
emUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4KPiAgc3RhdGljIGludCBnbWNfdjEwXzBf
c3dfaW5pdCh2b2lkICpoYW5kbGUpCj4gIHsKPiAtICAgICAgIGludCByLCB2cmFtX3dpZHRoID0g
MCwgdnJhbV90eXBlID0gMDsKPiArICAgICAgIGludCByLCB2cmFtX3dpZHRoID0gMCwgdnJhbV90
eXBlID0gMCwgdnJhbV92ZW5kb3IgPSAwOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7Cj4KPiAgICAgICAgIGdmeGh1
Yl92Ml8wX2luaXQoYWRldik7Cj4gQEAgLTYzMiwxMyArNjMyLDE1IEBAIHN0YXRpYyBpbnQgZ21j
X3YxMF8wX3N3X2luaXQodm9pZCAqaGFuZGxlKQo+Cj4gICAgICAgICBzcGluX2xvY2tfaW5pdCgm
YWRldi0+Z21jLmludmFsaWRhdGVfbG9jayk7Cj4KPiAtICAgICAgIHIgPSBhbWRncHVfYXRvbWZp
cm13YXJlX2dldF92cmFtX2luZm8oYWRldiwgJnZyYW1fd2lkdGgsICZ2cmFtX3R5cGUpOwo+ICsg
ICAgICAgciA9IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhhZGV2LAo+ICsgICAg
ICAgICAgICAgICAmdnJhbV93aWR0aCwgJnZyYW1fdHlwZSwgJnZyYW1fdmVuZG9yKTsKPiAgICAg
ICAgIGlmICghYW1kZ3B1X2VtdV9tb2RlKQo+ICAgICAgICAgICAgICAgICBhZGV2LT5nbWMudnJh
bV93aWR0aCA9IHZyYW1fd2lkdGg7Cj4gICAgICAgICBlbHNlCj4gICAgICAgICAgICAgICAgIGFk
ZXYtPmdtYy52cmFtX3dpZHRoID0gMSAqIDEyODsgLyogbnVtY2hhbiAqIGNoYW5zaXplICovCj4K
PiAgICAgICAgIGFkZXYtPmdtYy52cmFtX3R5cGUgPSB2cmFtX3R5cGU7Cj4gKyAgICAgICBhZGV2
LT5nbWMudnJhbV92ZW5kb3IgPSB2cmFtX3ZlbmRvcjsKPiAgICAgICAgIHN3aXRjaCAoYWRldi0+
YXNpY190eXBlKSB7Cj4gICAgICAgICBjYXNlIENISVBfTkFWSTEwOgo+ICAgICAgICAgY2FzZSBD
SElQX05BVkkxNDoKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21j
X3Y5XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKPiBpbmRleCA0
YjExZjdlNjEwMDQuLmRlZmViNmFmY2I1ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9nbWNfdjlfMC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
Z21jX3Y5XzAuYwo+IEBAIC05MzAsNyArOTMwLDcgQEAgc3RhdGljIHVuc2lnbmVkIGdtY192OV8w
X2dldF92Ymlvc19mYl9zaXplKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+Cj4gIHN0YXRp
YyBpbnQgZ21jX3Y5XzBfc3dfaW5pdCh2b2lkICpoYW5kbGUpCj4gIHsKPiAtICAgICAgIGludCBy
LCB2cmFtX3dpZHRoID0gMCwgdnJhbV90eXBlID0gMDsKPiArICAgICAgIGludCByLCB2cmFtX3dp
ZHRoID0gMCwgdnJhbV90eXBlID0gMCwgdnJhbV92ZW5kb3IgPSAwOwo+ICAgICAgICAgc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7Cj4K
PiAgICAgICAgIGdmeGh1Yl92MV8wX2luaXQoYWRldik7Cj4gQEAgLTk0MSw3ICs5NDEsOCBAQCBz
dGF0aWMgaW50IGdtY192OV8wX3N3X2luaXQodm9pZCAqaGFuZGxlKQo+Cj4gICAgICAgICBzcGlu
X2xvY2tfaW5pdCgmYWRldi0+Z21jLmludmFsaWRhdGVfbG9jayk7Cj4KPiAtICAgICAgIHIgPSBh
bWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8oYWRldiwgJnZyYW1fd2lkdGgsICZ2cmFt
X3R5cGUpOwo+ICsgICAgICAgciA9IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhh
ZGV2LAo+ICsgICAgICAgICAgICAgICAmdnJhbV93aWR0aCwgJnZyYW1fdHlwZSwgJnZyYW1fdmVu
ZG9yKTsKPiAgICAgICAgIGlmIChhbWRncHVfc3Jpb3ZfdmYoYWRldikpCj4gICAgICAgICAgICAg
ICAgIC8qIEZvciBWZWdhMTAgU1ItSU9WLCB2cmFtX3dpZHRoIGNhbid0IGJlIHJlYWQgZnJvbSBB
VE9NIGFzIFJBVkVOLAo+ICAgICAgICAgICAgICAgICAgKiBhbmQgREYgcmVsYXRlZCByZWdpc3Rl
cnMgaXMgbm90IHJlYWRhYmxlLCBzZWVtcyBoYXJkY29yZCBpcyB0aGUKPiBAQCAtOTY1LDYgKzk2
Niw3IEBAIHN0YXRpYyBpbnQgZ21jX3Y5XzBfc3dfaW5pdCh2b2lkICpoYW5kbGUpCj4gICAgICAg
ICB9Cj4KPiAgICAgICAgIGFkZXYtPmdtYy52cmFtX3R5cGUgPSB2cmFtX3R5cGU7Cj4gKyAgICAg
ICBhZGV2LT5nbWMudnJhbV92ZW5kb3IgPSB2cmFtX3ZlbmRvcjsKPiAgICAgICAgIHN3aXRjaCAo
YWRldi0+YXNpY190eXBlKSB7Cj4gICAgICAgICBjYXNlIENISVBfUkFWRU46Cj4gICAgICAgICAg
ICAgICAgIGFkZXYtPm51bV92bWh1YnMgPSAyOwo+IC0tCj4gMi4xNy4xCj4KPiBfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+IGFtZC1nZnggbWFpbGluZyBs
aXN0Cj4gYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZngKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9hbWQtZ2Z4
