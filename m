Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E1C6648EFE
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:28:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A414B89B38;
	Mon, 17 Jun 2019 19:28:41 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x842.google.com (mail-qt1-x842.google.com
 [IPv6:2607:f8b0:4864:20::842])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8E43189B18
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:28:39 +0000 (UTC)
Received: by mail-qt1-x842.google.com with SMTP id n11so12217051qtl.5
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:28:39 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=tpSfJ7IC/npGSUR7xjtqWoQ00notVzI4ayXw670irlo=;
 b=Joq4YFZ1TqDAvMUkbjtSGKk0V7EtnUvO/+vHyFwtS17K0UeX2zp/304T/qLgSQjG81
 qr7L3EhjDJja9DXALccaIlZO9kelkfvlY4RaYc2nBKCUNlusvLfdFsRRVUqj3qOlfjG3
 kCuoQiX1fTfnSQV58m2TFbvcxSI5uhTXdsCvY6dFUdDIMZeb/ToXhK2z/v00/AiFLL6n
 UT2YLY/BPU/HHypcyK0Ed8D0ntUrNYKu2XjAv+9MmgOM/Q6CIg1R+9i+FQg0FRE76Cwi
 +HAlU2fsy0wvXMEtARDISE7O2AfMTx1yf90MAjKPlqGKGOGUSVReDIAxJ0wTprG7S8f5
 P4HA==
X-Gm-Message-State: APjAAAXXIfU3zbg4sRV4B+HaWtFptQqfOrSpkJNLGZsS6KymHecV4Hft
 DApPQyQclHbllzGcZ+izYgL2c0thgus=
X-Google-Smtp-Source: APXvYqzP/AMnbso0LhlHwG1YRd12fUDjY2o9DSZ0r/ApDtFqf2JfzBfNuVqrhAZ0c4xSM3r/S6alIA==
X-Received: by 2002:a0c:8aaa:: with SMTP id 39mr23300564qvv.17.1560799718521; 
 Mon, 17 Jun 2019 12:28:38 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id p37sm7715622qtc.35.2019.06.17.12.28.37
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:28:37 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 192/459] drm/amdgpu: mask some pm interfaces for navi10
 because they are changed or not workable so far
Date: Mon, 17 Jun 2019 14:26:57 -0500
Message-Id: <20190617192704.18038-93-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617192704.18038-1-alexander.deucher@amd.com>
References: <20190617192704.18038-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=tpSfJ7IC/npGSUR7xjtqWoQ00notVzI4ayXw670irlo=;
 b=G+Zs1KGtmYFPuHrshDfbPhzZDiOBlN7YQc4zpBFIqqVUaHpnMco6teb95nC5/iSmeX
 zur3I/zZG9mFRU3HQvdGgNY4bk/PAhRSl44CotGKM/VfTzk61lbwYvBTi5dKNDcHKMx8
 jH9Cm8qANM//Pr+1Jcr+fy/hE3e6++fcgR3g4Cxues5lgs8yaYTezZuihGwlpVO+oSzh
 Aen2WawW4gz/FKdxreKZgzWGaTDC4Me6LxyVaL/R1SoDEOtZRyPxZK8VlTb5t1ezFAPC
 j5pdMGw7CDVDunOHXSoWE+62aP2QTf2D0mqLJ0WYeBFaASVGMEmVTo1m2mesAewzfRtb
 N9jw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>, Huang Rui <ray.huang@amd.com>,
 Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogSHVhbmcgUnVpIDxyYXkuaHVhbmdAYW1kLmNvbT4KClNvbWUgaW50ZXJmYWNlcyBhcmUg
Y2hhbmdlZCBpbiB0aGUgbmF2aSBzZXJpZXMsIEUuWC4gUFBTTUNfTVNHX0dldERwbUNsb2NrRnJl
cQppcyBub3QgaW1wbGVtZW50ZWQgYnkgU01DIHVjb2RlIHNvIGZhci4gU28gaXQgaXMgdW5hYmxl
IHRvIGdldCBjdXJyZW50IGNsb2NrCnZhbHVlcyB3aXRoIHRoZSBzeXNmcyBpbnRlcmZhY2UuIFdl
IGhhdmUgdG8gbWFzayB0aGVtIGZvciB0aGUgbW9tbWVudC4KClNpZ25lZC1vZmYtYnk6IEh1YW5n
IFJ1aSA8cmF5Lmh1YW5nQGFtZC5jb20+CkFja2VkLWJ5OiBIYXdraW5nIFpoYW5nIDxIYXdraW5n
LlpoYW5nQGFtZC5jb20+ClNpZ25lZC1vZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRl
dWNoZXJAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfa21z
LmMgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wbS5jICB8IDE1
NiArKysrKysrKysrKysrLS0tLS0tLS0tLS0KIDIgZmlsZXMgY2hhbmdlZCwgODUgaW5zZXJ0aW9u
cygrKSwgNzMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2ttcy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2tt
cy5jCmluZGV4IGVkMDUxZmRiNTA5Zi4uYWY4NmQ5ZjQ3Nzg1IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfa21zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2ttcy5jCkBAIC02OTAsNyArNjkwLDcgQEAgc3RhdGljIGludCBhbWRn
cHVfaW5mb19pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLCBzdHJ1Y3Qg
ZHJtX2ZpbGUKIAkJZGV2X2luZm8ubnVtX3NoYWRlcl9hcnJheXNfcGVyX2VuZ2luZSA9IGFkZXYt
PmdmeC5jb25maWcubWF4X3NoX3Blcl9zZTsKIAkJLyogcmV0dXJuIGFsbCBjbG9ja3MgaW4gS0h6
ICovCiAJCWRldl9pbmZvLmdwdV9jb3VudGVyX2ZyZXEgPSBhbWRncHVfYXNpY19nZXRfeGNsayhh
ZGV2KSAqIDEwOwotCQlpZiAoYWRldi0+cG0uZHBtX2VuYWJsZWQpIHsKKwkJaWYgKGFkZXYtPnBt
LmRwbV9lbmFibGVkICYmIGFkZXYtPmFzaWNfdHlwZSAhPSBDSElQX05BVkkxMCkgewogCQkJZGV2
X2luZm8ubWF4X2VuZ2luZV9jbG9jayA9IGFtZGdwdV9kcG1fZ2V0X3NjbGsoYWRldiwgZmFsc2Up
ICogMTA7CiAJCQlkZXZfaW5mby5tYXhfbWVtb3J5X2Nsb2NrID0gYW1kZ3B1X2RwbV9nZXRfbWNs
ayhhZGV2LCBmYWxzZSkgKiAxMDsKIAkJfSBlbHNlIGlmIChhbWRncHVfc3Jpb3ZfdmYoYWRldikg
JiYgYW1kZ2ltX2lzX2h3cGVyZihhZGV2KSAmJgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfcG0uYwppbmRleCA1NWI0ZTZjMjFmMTkuLjAwOWM4Y2E0OTIxMSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3BtLmMKQEAgLTI3OTMsMzIgKzI3OTMsMzMgQEAgaW50IGFtZGdw
dV9wbV9zeXNmc19pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCQlyZXR1cm4gcmV0
OwogCX0KIAotCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9w
b3dlcl9kcG1fc3RhdGUpOwotCWlmIChyZXQpIHsKLQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3Jl
YXRlIGRldmljZSBmaWxlIGZvciBkcG0gc3RhdGVcbiIpOwotCQlyZXR1cm4gcmV0OwotCX0KLQly
ZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcG93ZXJfZHBtX2Zv
cmNlX3BlcmZvcm1hbmNlX2xldmVsKTsKLQlpZiAocmV0KSB7Ci0JCURSTV9FUlJPUigiZmFpbGVk
IHRvIGNyZWF0ZSBkZXZpY2UgZmlsZSBmb3IgZHBtIHN0YXRlXG4iKTsKLQkJcmV0dXJuIHJldDsK
LQl9Ci0KKwlpZiAoYWRldi0+YXNpY190eXBlICE9IENISVBfTkFWSTEwKSB7CisJCXJldCA9IGRl
dmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wb3dlcl9kcG1fc3RhdGUpOwor
CQlpZiAocmV0KSB7CisJCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUg
Zm9yIGRwbSBzdGF0ZVxuIik7CisJCQlyZXR1cm4gcmV0OworCQl9CisJCXJldCA9IGRldmljZV9j
cmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wb3dlcl9kcG1fZm9yY2VfcGVyZm9ybWFu
Y2VfbGV2ZWwpOworCQlpZiAocmV0KSB7CisJCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUg
ZGV2aWNlIGZpbGUgZm9yIGRwbSBzdGF0ZVxuIik7CisJCQlyZXR1cm4gcmV0OworCQl9CiAKLQly
ZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfbnVtX3N0YXRl
cyk7Ci0JaWYgKHJldCkgewotCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZp
bGUgcHBfbnVtX3N0YXRlc1xuIik7Ci0JCXJldHVybiByZXQ7Ci0JfQotCXJldCA9IGRldmljZV9j
cmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9jdXJfc3RhdGUpOwotCWlmIChyZXQp
IHsKLQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX2N1cl9zdGF0
ZVxuIik7Ci0JCXJldHVybiByZXQ7Ci0JfQotCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2
LT5kZXYsICZkZXZfYXR0cl9wcF9mb3JjZV9zdGF0ZSk7Ci0JaWYgKHJldCkgewotCQlEUk1fRVJS
T1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBfZm9yY2Vfc3RhdGVcbiIpOwotCQly
ZXR1cm4gcmV0OworCQlyZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0
dHJfcHBfbnVtX3N0YXRlcyk7CisJCWlmIChyZXQpIHsKKwkJCURSTV9FUlJPUigiZmFpbGVkIHRv
IGNyZWF0ZSBkZXZpY2UgZmlsZSBwcF9udW1fc3RhdGVzXG4iKTsKKwkJCXJldHVybiByZXQ7CisJ
CX0KKwkJcmV0ID0gZGV2aWNlX2NyZWF0ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX3BwX2N1
cl9zdGF0ZSk7CisJCWlmIChyZXQpIHsKKwkJCURSTV9FUlJPUigiZmFpbGVkIHRvIGNyZWF0ZSBk
ZXZpY2UgZmlsZSBwcF9jdXJfc3RhdGVcbiIpOworCQkJcmV0dXJuIHJldDsKKwkJfQorCQlyZXQg
PSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfZm9yY2Vfc3RhdGUp
OworCQlpZiAocmV0KSB7CisJCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZp
bGUgcHBfZm9yY2Vfc3RhdGVcbiIpOworCQkJcmV0dXJuIHJldDsKKwkJfQogCX0KIAlyZXQgPSBk
ZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfdGFibGUpOwogCWlmIChy
ZXQpIHsKQEAgLTI4MzEsNTEgKzI4MzIsNTQgQEAgaW50IGFtZGdwdV9wbV9zeXNmc19pbml0KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUg
ZGV2aWNlIGZpbGUgcHBfZHBtX3NjbGtcbiIpOwogCQlyZXR1cm4gcmV0OwogCX0KLQlyZXQgPSBk
ZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfZHBtX21jbGspOwotCWlm
IChyZXQpIHsKLQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX2Rw
bV9tY2xrXG4iKTsKLQkJcmV0dXJuIHJldDsKLQl9Ci0JaWYgKGFkZXYtPmFzaWNfdHlwZSA+PSBD
SElQX1ZFR0ExMCkgewotCQlyZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2
X2F0dHJfcHBfZHBtX3NvY2Nsayk7CisKKwlpZiAoYWRldi0+YXNpY190eXBlICE9IENISVBfTkFW
STEwKSB7CisJCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9w
cF9kcG1fbWNsayk7CiAJCWlmIChyZXQpIHsKLQkJCURSTV9FUlJPUigiZmFpbGVkIHRvIGNyZWF0
ZSBkZXZpY2UgZmlsZSBwcF9kcG1fc29jY2xrXG4iKTsKKwkJCURSTV9FUlJPUigiZmFpbGVkIHRv
IGNyZWF0ZSBkZXZpY2UgZmlsZSBwcF9kcG1fbWNsa1xuIik7CiAJCQlyZXR1cm4gcmV0OwogCQl9
Ci0JCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1f
ZGNlZmNsayk7CisJCWlmIChhZGV2LT5hc2ljX3R5cGUgPj0gQ0hJUF9WRUdBMTApIHsKKwkJCXJl
dCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fc29jY2xr
KTsKKwkJCWlmIChyZXQpIHsKKwkJCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNl
IGZpbGUgcHBfZHBtX3NvY2Nsa1xuIik7CisJCQkJcmV0dXJuIHJldDsKKwkJCX0KKwkJCXJldCA9
IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fZGNlZmNsayk7
CisJCQlpZiAocmV0KSB7CisJCQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBm
aWxlIHBwX2RwbV9kY2VmY2xrXG4iKTsKKwkJCQlyZXR1cm4gcmV0OworCQkJfQorCQl9CisJCWlm
IChhZGV2LT5hc2ljX3R5cGUgPj0gQ0hJUF9WRUdBMjApIHsKKwkJCXJldCA9IGRldmljZV9jcmVh
dGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fZmNsayk7CisJCQlpZiAocmV0KSB7
CisJCQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX2RwbV9mY2xr
XG4iKTsKKwkJCQlyZXR1cm4gcmV0OworCQkJfQorCQl9CisJCXJldCA9IGRldmljZV9jcmVhdGVf
ZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fcGNpZSk7CiAJCWlmIChyZXQpIHsKLQkJ
CURSTV9FUlJPUigiZmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZSBwcF9kcG1fZGNlZmNsa1xu
Iik7CisJCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBfZHBtX3Bj
aWVcbiIpOwogCQkJcmV0dXJuIHJldDsKIAkJfQotCX0KLQlpZiAoYWRldi0+YXNpY190eXBlID49
IENISVBfVkVHQTIwKSB7Ci0JCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZk
ZXZfYXR0cl9wcF9kcG1fZmNsayk7CisJCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5k
ZXYsICZkZXZfYXR0cl9wcF9zY2xrX29kKTsKIAkJaWYgKHJldCkgewotCQkJRFJNX0VSUk9SKCJm
YWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX2RwbV9mY2xrXG4iKTsKKwkJCURSTV9FUlJP
UigiZmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZSBwcF9zY2xrX29kXG4iKTsKKwkJCXJldHVy
biByZXQ7CisJCX0KKwkJcmV0ID0gZGV2aWNlX2NyZWF0ZV9maWxlKGFkZXYtPmRldiwgJmRldl9h
dHRyX3BwX21jbGtfb2QpOworCQlpZiAocmV0KSB7CisJCQlEUk1fRVJST1IoImZhaWxlZCB0byBj
cmVhdGUgZGV2aWNlIGZpbGUgcHBfbWNsa19vZFxuIik7CisJCQlyZXR1cm4gcmV0OworCQl9CisJ
CXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsCisJCQkJJmRldl9hdHRyX3BwX3Bv
d2VyX3Byb2ZpbGVfbW9kZSk7CisJCWlmIChyZXQpIHsKKwkJCURSTV9FUlJPUigiZmFpbGVkIHRv
IGNyZWF0ZSBkZXZpY2UgZmlsZQkiCisJCQkJCSJwcF9wb3dlcl9wcm9maWxlX21vZGVcbiIpOwog
CQkJcmV0dXJuIHJldDsKIAkJfQotCX0KLQlyZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+
ZGV2LCAmZGV2X2F0dHJfcHBfZHBtX3BjaWUpOwotCWlmIChyZXQpIHsKLQkJRFJNX0VSUk9SKCJm
YWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX2RwbV9wY2llXG4iKTsKLQkJcmV0dXJuIHJl
dDsKLQl9Ci0JcmV0ID0gZGV2aWNlX2NyZWF0ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX3Bw
X3NjbGtfb2QpOwotCWlmIChyZXQpIHsKLQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRl
dmljZSBmaWxlIHBwX3NjbGtfb2RcbiIpOwotCQlyZXR1cm4gcmV0OwotCX0KLQlyZXQgPSBkZXZp
Y2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfbWNsa19vZCk7Ci0JaWYgKHJl
dCkgewotCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBfbWNsa19v
ZFxuIik7Ci0JCXJldHVybiByZXQ7Ci0JfQotCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2
LT5kZXYsCi0JCQkmZGV2X2F0dHJfcHBfcG93ZXJfcHJvZmlsZV9tb2RlKTsKLQlpZiAocmV0KSB7
Ci0JCURSTV9FUlJPUigiZmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZQkiCi0JCQkJInBwX3Bv
d2VyX3Byb2ZpbGVfbW9kZVxuIik7Ci0JCXJldHVybiByZXQ7CiAJfQogCWlmICgoaXNfc3VwcG9y
dF9zd19zbXUoYWRldikgJiYgYWRldi0+c211Lm9kX2VuYWJsZWQpIHx8CiAJICAgICghaXNfc3Vw
cG9ydF9zd19zbXUoYWRldikgJiYgaHdtZ3ItPm9kX2VuYWJsZWQpKSB7CkBAIC0zMDUyLDIxICsz
MDU2LDI1IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2RlYnVnZnNfcG1faW5mb19wcChzdHJ1Y3Qgc2Vx
X2ZpbGUgKm0sIHN0cnVjdCBhbWRncHVfZGV2aWNlICphCiAJLyogR1BVIENsb2NrcyAqLwogCXNp
emUgPSBzaXplb2YodmFsdWUpOwogCXNlcV9wcmludGYobSwgIkdGWCBDbG9ja3MgYW5kIFBvd2Vy
OlxuIik7Ci0JaWYgKCFhbWRncHVfZHBtX3JlYWRfc2Vuc29yKGFkZXYsIEFNREdQVV9QUF9TRU5T
T1JfR0ZYX01DTEssICh2b2lkICopJnZhbHVlLCAmc2l6ZSkpCi0JCXNlcV9wcmludGYobSwgIlx0
JXUgTUh6IChNQ0xLKVxuIiwgdmFsdWUvMTAwKTsKLQlpZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5z
b3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9HRlhfU0NMSywgKHZvaWQgKikmdmFsdWUsICZzaXpl
KSkKLQkJc2VxX3ByaW50ZihtLCAiXHQldSBNSHogKFNDTEspXG4iLCB2YWx1ZS8xMDApOwotCWlm
ICghYW1kZ3B1X2RwbV9yZWFkX3NlbnNvcihhZGV2LCBBTURHUFVfUFBfU0VOU09SX1NUQUJMRV9Q
U1RBVEVfU0NMSywgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKLQkJc2VxX3ByaW50ZihtLCAiXHQl
dSBNSHogKFBTVEFURV9TQ0xLKVxuIiwgdmFsdWUvMTAwKTsKLQlpZiAoIWFtZGdwdV9kcG1fcmVh
ZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9TVEFCTEVfUFNUQVRFX01DTEssICh2b2lk
ICopJnZhbHVlLCAmc2l6ZSkpCi0JCXNlcV9wcmludGYobSwgIlx0JXUgTUh6IChQU1RBVEVfTUNM
SylcbiIsIHZhbHVlLzEwMCk7CisJaWYgKGFkZXYtPmFzaWNfdHlwZSAhPSBDSElQX05BVkkxMCkg
eworCQlpZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9H
RlhfTUNMSywgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKKwkJCXNlcV9wcmludGYobSwgIlx0JXUg
TUh6IChNQ0xLKVxuIiwgdmFsdWUvMTAwKTsKKwkJaWYgKCFhbWRncHVfZHBtX3JlYWRfc2Vuc29y
KGFkZXYsIEFNREdQVV9QUF9TRU5TT1JfR0ZYX1NDTEssICh2b2lkICopJnZhbHVlLCAmc2l6ZSkp
CisJCQlzZXFfcHJpbnRmKG0sICJcdCV1IE1IeiAoU0NMSylcbiIsIHZhbHVlLzEwMCk7CisJCWlm
ICghYW1kZ3B1X2RwbV9yZWFkX3NlbnNvcihhZGV2LCBBTURHUFVfUFBfU0VOU09SX1NUQUJMRV9Q
U1RBVEVfU0NMSywgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKKwkJCXNlcV9wcmludGYobSwgIlx0
JXUgTUh6IChQU1RBVEVfU0NMSylcbiIsIHZhbHVlLzEwMCk7CisJCWlmICghYW1kZ3B1X2RwbV9y
ZWFkX3NlbnNvcihhZGV2LCBBTURHUFVfUFBfU0VOU09SX1NUQUJMRV9QU1RBVEVfTUNMSywgKHZv
aWQgKikmdmFsdWUsICZzaXplKSkKKwkJCXNlcV9wcmludGYobSwgIlx0JXUgTUh6IChQU1RBVEVf
TUNMSylcbiIsIHZhbHVlLzEwMCk7CisJfQogCWlmICghYW1kZ3B1X2RwbV9yZWFkX3NlbnNvcihh
ZGV2LCBBTURHUFVfUFBfU0VOU09SX1ZEREdGWCwgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKIAkJ
c2VxX3ByaW50ZihtLCAiXHQldSBtViAoVkRER0ZYKVxuIiwgdmFsdWUpOwogCWlmICghYW1kZ3B1
X2RwbV9yZWFkX3NlbnNvcihhZGV2LCBBTURHUFVfUFBfU0VOU09SX1ZERE5CLCAodm9pZCAqKSZ2
YWx1ZSwgJnNpemUpKQogCQlzZXFfcHJpbnRmKG0sICJcdCV1IG1WIChWREROQilcbiIsIHZhbHVl
KTsKLQlzaXplID0gc2l6ZW9mKHVpbnQzMl90KTsKLQlpZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5z
b3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9HUFVfUE9XRVIsICh2b2lkICopJnF1ZXJ5LCAmc2l6
ZSkpCi0JCXNlcV9wcmludGYobSwgIlx0JXUuJXUgVyAoYXZlcmFnZSBHUFUpXG4iLCBxdWVyeSA+
PiA4LCBxdWVyeSAmIDB4ZmYpOworCWlmIChhZGV2LT5hc2ljX3R5cGUgIT0gQ0hJUF9OQVZJMTAp
IHsKKwkJc2l6ZSA9IHNpemVvZih1aW50MzJfdCk7CisJCWlmICghYW1kZ3B1X2RwbV9yZWFkX3Nl
bnNvcihhZGV2LCBBTURHUFVfUFBfU0VOU09SX0dQVV9QT1dFUiwgKHZvaWQgKikmcXVlcnksICZz
aXplKSkKKwkJCXNlcV9wcmludGYobSwgIlx0JXUuJXUgVyAoYXZlcmFnZSBHUFUpXG4iLCBxdWVy
eSA+PiA4LCBxdWVyeSAmIDB4ZmYpOworCX0KIAlzaXplID0gc2l6ZW9mKHZhbHVlKTsKIAlzZXFf
cHJpbnRmKG0sICJcbiIpOwogCkBAIC0zMDc0LDYgKzMwODIsMTAgQEAgc3RhdGljIGludCBhbWRn
cHVfZGVidWdmc19wbV9pbmZvX3BwKHN0cnVjdCBzZXFfZmlsZSAqbSwgc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmEKIAlpZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NF
TlNPUl9HUFVfVEVNUCwgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKIAkJc2VxX3ByaW50ZihtLCAi
R1BVIFRlbXBlcmF0dXJlOiAldSBDXG4iLCB2YWx1ZS8xMDAwKTsKIAorCS8qIFRPRE86IHdpbGwg
YmUgcmVtb3ZlZCBhZnRlciBncHUgbG9hZCwgZmVhdHVyZSBtYXNrLCB1dmQvdmNlIGNsb2NrcyBl
bmFibGVkIG9uIG5hdmkxMCAqLworCWlmIChhZGV2LT5hc2ljX3R5cGUgPT0gQ0hJUF9OQVZJMTAp
CisJCXJldHVybiAwOworCiAJLyogR1BVIExvYWQgKi8KIAlpZiAoIWFtZGdwdV9kcG1fcmVhZF9z
ZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9HUFVfTE9BRCwgKHZvaWQgKikmdmFsdWUsICZz
aXplKSkKIAkJc2VxX3ByaW50ZihtLCAiR1BVIExvYWQ6ICV1ICUlXG4iLCB2YWx1ZSk7Ci0tIAoy
LjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFt
ZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
