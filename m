Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 18EF449042
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:49:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 19AD86E039;
	Mon, 17 Jun 2019 19:49:30 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x843.google.com (mail-qt1-x843.google.com
 [IPv6:2607:f8b0:4864:20::843])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 542EA6E037
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:49:28 +0000 (UTC)
Received: by mail-qt1-x843.google.com with SMTP id d17so7348666qtj.8
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:49:28 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=deQwTUIS7reEFp381dWfVPty+HiAaIUpToHWjGgtXIg=;
 b=tlSdvaeCw0iiUtE6rWX4v8zKdaGgjAJ+LU7ax37l4iaOcR3XWCLqMch9Cb8qj9KNKo
 aV4APwROBwc4WAev5WRMWeO53R062WVe8kOcTyH9eYCpoT55rt4bxhsSL0tQJnZCXodc
 zNkQR7mkB2W3A2TaduANoBUrqr3BMK1dB93CxGJwIjlNaB6WENv63HVfkOeFUiXsGFou
 1/v/Bpvh7QxTeI7csYx/wIXIW35WatPna0HUyguesGZlrG1Lsh0G5sibD3l/XPD31pWw
 VqUGdDJdvqRX0afrjtRxTL3WL1GDyl+7GKYOTD97NJpzJYmQpteMxmnT0bX1rBcytXdE
 Fmkw==
X-Gm-Message-State: APjAAAX77pFKEf2AnppncOjwNKOh+dg/tNHs/bGjmg3IsiXGnu8jKpNI
 wByfW0Qet4+P6QOF0cKue221zFdtEIApeQ==
X-Google-Smtp-Source: APXvYqxKn5lg8yO/EsYt0oaIHA/w0DfIZdVr8JHISGwYjpf1SfkSgXGiIOUGwShv8PMFIi85hA71zQ==
X-Received: by 2002:aed:2a85:: with SMTP id t5mr74969766qtd.26.1560800967307; 
 Mon, 17 Jun 2019 12:49:27 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id 34sm8125381qtq.59.2019.06.17.12.49.26
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:49:26 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 395/459] drm/amd/display: Implement DSC MST fair share
 algorithm
Date: Mon, 17 Jun 2019 14:49:11 -0500
Message-Id: <20190617194915.18618-3-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617194915.18618-1-alexander.deucher@amd.com>
References: <20190617194915.18618-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=deQwTUIS7reEFp381dWfVPty+HiAaIUpToHWjGgtXIg=;
 b=GM75oyWQ3Kv2o2ONJi8Va/WFEz/FbL8GBBBjjUbZNkWnUbThgJeQ7IvqYYqvCV5jyo
 ulAj7xLqi5y/lU6EiGXm/ffdIMtB4l1xAinE78DUoeH5hArkeXzZ5uBlrdM0bxsw35mW
 XR5PdA572Dz/W4Jey2yH63GaB9/0x1u4cRtJagu+OTqTYsYasoO+TRX2PaD+XSNWNKYd
 MM3TohIHoS5jAONMMZKaVW64/2BTvXD4O0mLopymW6oUnTwc1MrYDwVaJJit7uit2PoT
 NHwF+OZ0CboY8b43gIyIH6JP3+IqE/cHgMSCiAcPOTk1qiZ1cMh8qSjGAgFqWfsMWZY+
 vKGA==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Leo Li <sunpeng.li@amd.com>, Alex Deucher <alexander.deucher@amd.com>,
 Jun Lei <Jun.Lei@amd.com>, Wenjing Liu <Wenjing.Liu@amd.com>,
 Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogV2VuamluZyBMaXUgPFdlbmppbmcuTGl1QGFtZC5jb20+Cgpbd2h5XQpUaGUgY3VycmVu
dCBwb2xpY3kgd2lsbCBhbHdheXMgZW5hYmxlIERTQyB0byAxMiBicHAKcmVnYXJkbGVzcyBvZiBp
ZiB0aGUgY3VycmVudCBiYW5kd2lkdGggaXMgZW5vdWdoIGZvciBNU1QgZGlzcGxheXMuClRoaXMg
bG9naWMgaXMgbm90IG9wdGltYWwgYmVjYXVzZSB1c2VyIHdpbGwgZ2V0IGxvd2VyIHF1YWxpdHkg
b3V0cHV0CmlmIERTQyBjb21wcmVzc2lvbiBpcyBlbmFibGVkLgpUaGlzIGNoYW5nZSB0byBpcyB0
byBpbXBsZW1lbnQgYSBEU0MgTVNUIGJhbmR3aWR0aCBmYWlyIHNoYXJlCmFsZ29yaXRobSBzbyB3
ZSB3aWxsIGR5bmFtaWNhbGx5IGRlY2lkZSBpZiBEU0MgaXMgbmVlZGVkIGFuZCB3aGF0CnF1YWxp
dHkgKHRhcmdldCBicHApIGlzIG5lZWRlZCB0byBmYWlybHkgZGVzdHJpYnV0ZSB0aGUgTVNUIGJh
bmR3aWR0aAppbiBvbmUgTVNUIHRvcG9sb2d5LiBUaGlzIHdpbGwgYWxsb3cgdXNlciB0byBzZWUg
dGhlIG1vc3Qgb3B0aW1hbAppbWFnZSBxdWFsaXR5IHdpdGggdGhlIGdpdmVuIGJhbmR3aWR0aC4K
Cltob3ddCldlIHdpbGwgc3RhcnQgd2l0aCBsb3dlc3QgYmFuZHdpZHRoIHBvc3NpYmxlIGFuZCBy
dW4gYQpNYXgtTWluIGZhaXJuZXNzIGFsZ29yaXRobSB0byBmYWlybHkgZGlzdHJpYnV0ZSB0aGUg
YXZhaWxhYmxlCmJhbmR3aWR0aC4gSWYgdGhlcmUgaXMgc3RpbGwgcmVtYWluaW5nIGJhbmR3aWR0
aCwgd2Ugd2lsbCB0cnkgdG8gZml0CnRoZSB0aW1pbmcgd2l0aG91dCBEU0MgY29tcHJlc3Npb24u
CgpTaWduZWQtb2ZmLWJ5OiBXZW5qaW5nIExpdSA8V2VuamluZy5MaXVAYW1kLmNvbT4KUmV2aWV3
ZWQtYnk6IEp1biBMZWkgPEp1bi5MZWlAYW1kLmNvbT4KQWNrZWQtYnk6IExlbyBMaSA8c3VucGVu
Zy5saUBhbWQuY29tPgpBY2tlZC1ieTogSGF3a2luZyBaaGFuZyA8SGF3a2luZy5aaGFuZ0BhbWQu
Y29tPgpTaWduZWQtb2ZmLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5j
b20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2NvcmUvZGNfbGluay5jIHwg
IDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY19kc2MuaCAgICAgICB8ICAy
ICsrCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZHNjL2RjX2RzYy5jICAgfCAyNiAr
KysrKysrKysrKysrLS0tLS0tCiAzIGZpbGVzIGNoYW5nZWQsIDIxIGluc2VydGlvbnMoKyksIDkg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2Rj
L2NvcmUvZGNfbGluay5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2NvcmUvZGNf
bGluay5jCmluZGV4IDRjMzE5MzBmMWNkZi4uNTExODc3OTc0MzE1IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kY19saW5rLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9kaXNwbGF5L2RjL2NvcmUvZGNfbGluay5jCkBAIC0yODE3LDcgKzI4MTcsNyBA
QCB2b2lkIGNvcmVfbGlua19kaXNhYmxlX3N0cmVhbShzdHJ1Y3QgcGlwZV9jdHggKnBpcGVfY3R4
LCBpbnQgb3B0aW9uKQogCiAJZGlzYWJsZV9saW5rKHBpcGVfY3R4LT5zdHJlYW0tPmxpbmssIHBp
cGVfY3R4LT5zdHJlYW0tPnNpZ25hbCk7CiAjaWZkZWYgQ09ORklHX0RSTV9BTURfRENfRFNDX1NV
UFBPUlQKLQlpZiAocGlwZV9jdHgtPnN0cmVhbS0+dGltaW5nLmZsYWdzLkRTQyAmJgorCWlmIChw
aXBlX2N0eC0+c3RyZWFtLT5pc19kc2NfZW5hYmxlZCAmJgogCQkJZGNfaXNfZHBfc2lnbmFsKHBp
cGVfY3R4LT5zdHJlYW0tPnNpZ25hbCkpIHsKIAkJZHBfc2V0X2RzY19lbmFibGUocGlwZV9jdHgs
IGZhbHNlKTsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMv
ZGNfZHNjLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNfZHNjLmgKaW5kZXgg
MmNiYTZiZDc5MzdhLi5kZGFmNzUzMmJiNTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvZGlzcGxheS9kYy9kY19kc2MuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkv
ZGMvZGNfZHNjLmgKQEAgLTM4LDYgKzM4LDggQEAgYm9vbCBkY19kc2NfcGFyc2VfZHNjX2RwY2Qo
Y29uc3QgdWludDhfdCAqZHBjZF9kc2NfZGF0YSwKIAogYm9vbCBkY19kc2NfY29tcHV0ZV9iYW5k
d2lkdGhfcmFuZ2UoCiAJCWNvbnN0IHN0cnVjdCBkYyAqZGMsCisJCWNvbnN0IHVpbnQzMl90IG1p
bl9rYnBzLAorCQljb25zdCB1aW50MzJfdCBtYXhfa2JwcywKIAkJY29uc3Qgc3RydWN0IGRzY19k
ZWNfZHBjZF9jYXBzICpkc2Nfc2lua19jYXBzLAogCQljb25zdCBzdHJ1Y3QgZGNfY3J0Y190aW1p
bmcgKnRpbWluZywKIAkJc3RydWN0IGRjX2RzY19id19yYW5nZSAqcmFuZ2UpOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RzYy9kY19kc2MuYyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvZGlzcGxheS9kYy9kc2MvZGNfZHNjLmMKaW5kZXggNjM1NzMyNWQzYzkwLi5k
MTVkYTZmOTA2ZTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9k
c2MvZGNfZHNjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RzYy9kY19k
c2MuYwpAQCAtMjg0LDcgKzI4NCw4IEBAIGNvbnN0IHN0cnVjdCBkY19kc2NfcG9saWN5IGRzY19w
b2xpY3kgPSB7CiB9OwogCiBzdGF0aWMgdm9pZCBnZXRfZHNjX2JhbmR3aWR0aF9yYW5nZSgKLQkJ
Y29uc3Qgc3RydWN0IGRjX2RzY19wb2xpY3kgKnBvbGljeSwKKwkJY29uc3QgdWludDMyX3QgbWlu
X2JwcCwKKwkJY29uc3QgdWludDMyX3QgbWF4X2JwcCwKIAkJY29uc3Qgc3RydWN0IGRzY19lbmNf
Y2FwcyAqZHNjX2NhcHMsCiAJCWNvbnN0IHN0cnVjdCBkY19jcnRjX3RpbWluZyAqdGltaW5nLAog
CQlzdHJ1Y3QgZGNfZHNjX2J3X3JhbmdlICpyYW5nZSkKQEAgLTI5Myw4ICsyOTQsOCBAQCBzdGF0
aWMgdm9pZCBnZXRfZHNjX2JhbmR3aWR0aF9yYW5nZSgKIAlyYW5nZS0+c3RyZWFtX2ticHMgPSBk
Y19iYW5kd2lkdGhfaW5fa2Jwc19mcm9tX3RpbWluZyh0aW1pbmcpOwogCiAJLyogbWF4IGRzYyB0
YXJnZXQgYnBwICovCi0JcmFuZ2UtPm1heF9rYnBzID0gZHNjX3JvdW5kX3VwKHBvbGljeS0+bWF4
X3RhcmdldF9icHAgKiB0aW1pbmctPnBpeF9jbGtfMTAwaHopOwotCXJhbmdlLT5tYXhfdGFyZ2V0
X2JwcF94MTYgPSBwb2xpY3ktPm1heF90YXJnZXRfYnBwICogMTY7CisJcmFuZ2UtPm1heF9rYnBz
ID0gZHNjX3JvdW5kX3VwKG1heF9icHAgKiB0aW1pbmctPnBpeF9jbGtfMTAwaHopOworCXJhbmdl
LT5tYXhfdGFyZ2V0X2JwcF94MTYgPSBtYXhfYnBwICogMTY7CiAJaWYgKHJhbmdlLT5tYXhfa2Jw
cyA+IHJhbmdlLT5zdHJlYW1fa2JwcykgewogCQkvKiBtYXggZHNjIHRhcmdldCBicHAgaXMgY2Fw
cGVkIHRvIG5hdGl2ZSBiYW5kd2lkdGggKi8KIAkJcmFuZ2UtPm1heF9rYnBzID0gcmFuZ2UtPnN0
cmVhbV9rYnBzOwpAQCAtMzAyLDggKzMwMyw4IEBAIHN0YXRpYyB2b2lkIGdldF9kc2NfYmFuZHdp
ZHRoX3JhbmdlKAogCX0KIAogCS8qIG1pbiBkc2MgdGFyZ2V0IGJwcCAqLwotCXJhbmdlLT5taW5f
a2JwcyA9IGRzY19yb3VuZF91cChwb2xpY3ktPm1pbl90YXJnZXRfYnBwICogdGltaW5nLT5waXhf
Y2xrXzEwMGh6KTsKLQlyYW5nZS0+bWluX3RhcmdldF9icHBfeDE2ID0gcG9saWN5LT5taW5fdGFy
Z2V0X2JwcCAqIDE2OworCXJhbmdlLT5taW5fa2JwcyA9IGRzY19yb3VuZF91cChtaW5fYnBwICog
dGltaW5nLT5waXhfY2xrXzEwMGh6KTsKKwlyYW5nZS0+bWluX3RhcmdldF9icHBfeDE2ID0gbWlu
X2JwcCAqIDE2OwogCWlmIChyYW5nZS0+bWluX2ticHMgPiByYW5nZS0+bWF4X2ticHMpIHsKIAkJ
LyogbWluIGRzYyB0YXJnZXQgYnBwIGlzIGNhcHBlZCB0byBtYXggZHNjIGJhbmR3aWR0aCovCiAJ
CXJhbmdlLT5taW5fa2JwcyA9IHJhbmdlLT5tYXhfa2JwczsKQEAgLTMzMCw3ICszMzEsOCBAQCBz
dGF0aWMgYm9vbCBkZWNpZGVfZHNjX3RhcmdldF9icHBfeDE2KAogCiAJbWVtc2V0KCZyYW5nZSwg
MCwgc2l6ZW9mKHJhbmdlKSk7CiAKLQlnZXRfZHNjX2JhbmR3aWR0aF9yYW5nZShwb2xpY3ksIGRz
Y19jb21tb25fY2FwcywgdGltaW5nLCAmcmFuZ2UpOworCWdldF9kc2NfYmFuZHdpZHRoX3Jhbmdl
KHBvbGljeS0+bWluX3RhcmdldF9icHAsIHBvbGljeS0+bWF4X3RhcmdldF9icHAsCisJCQlkc2Nf
Y29tbW9uX2NhcHMsIHRpbWluZywgJnJhbmdlKTsKIAlpZiAodGFyZ2V0X2JhbmR3aWR0aF9rYnBz
ID49IHJhbmdlLnN0cmVhbV9rYnBzKSB7CiAJCS8qIGVub3VnaCBiYW5kd2lkdGggd2l0aG91dCBk
c2MgKi8KIAkJKnRhcmdldF9icHBfeDE2ID0gMDsKQEAgLTc1Myw2ICs3NTUsOCBAQCBib29sIGRj
X2RzY19wYXJzZV9kc2NfZHBjZChjb25zdCB1aW50OF90ICpkcGNkX2RzY19kYXRhLCBzdHJ1Y3Qg
ZHNjX2RlY19kcGNkX2NhcAogCiBib29sIGRjX2RzY19jb21wdXRlX2JhbmR3aWR0aF9yYW5nZSgK
IAkJY29uc3Qgc3RydWN0IGRjICpkYywKKwkJY29uc3QgdWludDMyX3QgbWluX2JwcCwKKwkJY29u
c3QgdWludDMyX3QgbWF4X2JwcCwKIAkJY29uc3Qgc3RydWN0IGRzY19kZWNfZHBjZF9jYXBzICpk
c2Nfc2lua19jYXBzLAogCQljb25zdCBzdHJ1Y3QgZGNfY3J0Y190aW1pbmcgKnRpbWluZywKIAkJ
c3RydWN0IGRjX2RzY19id19yYW5nZSAqcmFuZ2UpCkBAIC03NjAsMTAgKzc2NCwxNiBAQCBib29s
IGRjX2RzY19jb21wdXRlX2JhbmR3aWR0aF9yYW5nZSgKIAlib29sIGlzX2RzY19wb3NzaWJsZSA9
IGZhbHNlOwogCXN0cnVjdCBkc2NfZW5jX2NhcHMgZHNjX2VuY19jYXBzOwogCXN0cnVjdCBkc2Nf
ZW5jX2NhcHMgZHNjX2NvbW1vbl9jYXBzOworCXN0cnVjdCBkY19kc2NfY29uZmlnIGNvbmZpZzsK
KwogCWdldF9kc2NfZW5jX2NhcHMoZGMsICZkc2NfZW5jX2NhcHMsIHRpbWluZy0+cGl4X2Nsa18x
MDBoeik7Ci0JaXNfZHNjX3Bvc3NpYmxlID0gZGNfaW50ZXJzZWN0X2RzY19jYXBzKGRzY19zaW5r
X2NhcHMsICZkc2NfZW5jX2NhcHMsIHRpbWluZy0+cGl4ZWxfZW5jb2RpbmcsICZkc2NfY29tbW9u
X2NhcHMpOworCWlzX2RzY19wb3NzaWJsZSA9IHNldHVwX2RzY19jb25maWcoZHNjX3NpbmtfY2Fw
cywKKwkJCSZkc2NfZW5jX2NhcHMsCisJCQkwLAorCQkJdGltaW5nLCAmY29uZmlnKTsKIAlpZiAo
aXNfZHNjX3Bvc3NpYmxlKQotCQlnZXRfZHNjX2JhbmR3aWR0aF9yYW5nZSgmZHNjX3BvbGljeSwg
JmRzY19jb21tb25fY2FwcywgdGltaW5nLCByYW5nZSk7CisJCWdldF9kc2NfYmFuZHdpZHRoX3Jh
bmdlKG1pbl9icHAsIG1heF9icHAsICZkc2NfY29tbW9uX2NhcHMsIHRpbWluZywgcmFuZ2UpOwor
CiAJcmV0dXJuIGlzX2RzY19wb3NzaWJsZTsKIH0KIAotLSAKMi4yMC4xCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAph
bWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
