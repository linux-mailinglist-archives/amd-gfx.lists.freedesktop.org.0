Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 543AE26F999
	for <lists+amd-gfx@lfdr.de>; Fri, 18 Sep 2020 11:52:14 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BB6216E051;
	Fri, 18 Sep 2020 09:52:12 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM12-BN8-obe.outbound.protection.outlook.com
 (mail-bn8nam12on2049.outbound.protection.outlook.com [40.107.237.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 615A96E051
 for <amd-gfx@lists.freedesktop.org>; Fri, 18 Sep 2020 09:52:11 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=OGioygn48qnw6ZQ+aDorbMs419Kf6QUKk6CYhdV5crodcpNYTLYwmugUGFoQcfMY1Ff9SCARE4DQXz8N65XVqPWh5NlGJR+yiGfarXc7DugGvgpoWdN9JQJAeE2qI1D6WEiw+vDE3Jhg1ELf/vsBVIlupCuHlnKkvqgzORYeW8x5Cvux0jEuaFcAkkO3jT9Fq/XQp1Zwv/9xOpvUUcqgRjrxs4F226R7cfmgKtjHsL7X9epFxYUygMvZdw8J5IaRdTrl9G/SS2r9onerC5z/Icjat20jByD/ZmUtUAAx95hN8NhmcjV+wT6TH4+81g/u0oMZC3uDy7FCLMxrf1Bmbw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HLuOcrFAHV0Vs0ALLg2winlwxQyUxMx7SdLiWfLctcU=;
 b=nLzx/AGYdVMnHlpmfQCHI0Tfz743MofWWpjxZK/NZ7gH2JV/tG0YG5u0J2ZaGMdqnePVkKT6n5Ei+26hoKP6FIk9cT/FHdmp5IfaT4sZwvvp9SCLUSvaF/wkDtZQTxoc1kjLIFs8HVtTf5Q4J0IhR4YWyJwzyPto5WHPx6nCGjMZ2HlZDbPi+7p8kp2Vny3edLaEKGDCYkeapgYoB3bFiIdvinQ0gZWNxbkpk96lNSZ/qVIpToovpxmlpr+NDgjfkiOAmZP19XxkugdxXSUMUOKh6fICZCats/Cr6sbd0/ZK2IbQiFT42Lya2mwzWq/sCnTnJ7fU/rguCtd0CQmzhg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HLuOcrFAHV0Vs0ALLg2winlwxQyUxMx7SdLiWfLctcU=;
 b=T+5mX7IvTPlBY0YxHlV+7rYWy8F2ByUyUCgmSN0ZE7CAD+objDHLmqMtEqx7Gsicx/I5f9R+PcuTyzXUKoJArzmdIpcNDjBeibV7p9mUtDY83ZZyE5nXJDrAnk3ZCWdxhbKaaXJ+c6xP4RtZH12+cCWtsrxYoerTDVnEsqym3YA=
Authentication-Results: lists.freedesktop.org; dkim=none (message not signed)
 header.d=none; lists.freedesktop.org;
 dmarc=none action=none header.from=amd.com;
Received: from DM6PR12MB4075.namprd12.prod.outlook.com (2603:10b6:5:21d::8) by
 DM6PR12MB4297.namprd12.prod.outlook.com (2603:10b6:5:211::20) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3391.19; Fri, 18 Sep 2020 09:52:09 +0000
Received: from DM6PR12MB4075.namprd12.prod.outlook.com
 ([fe80::b51c:2b0e:7e1:b233]) by DM6PR12MB4075.namprd12.prod.outlook.com
 ([fe80::b51c:2b0e:7e1:b233%9]) with mapi id 15.20.3391.014; Fri, 18 Sep 2020
 09:52:09 +0000
From: Hawking Zhang <Hawking.Zhang@amd.com>
To: amd-gfx@lists.freedesktop.org, Alex Deucher <alexander.deucher@amd.com>,
 Kevin Wang <kevin1.wang@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Guchun Chen <guchun.chen@amd.com>
Subject: [PATCH 1/3] drm/amdgpu: add helper function for indirect reg access
 (v3)
Date: Fri, 18 Sep 2020 17:51:48 +0800
Message-Id: <1600422710-27228-1-git-send-email-Hawking.Zhang@amd.com>
X-Mailer: git-send-email 2.7.4
X-ClientProxiedBy: HK2PR04CA0085.apcprd04.prod.outlook.com
 (2603:1096:202:15::29) To DM6PR12MB4075.namprd12.prod.outlook.com
 (2603:10b6:5:21d::8)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from hawzhang-All-Series.amd.com (58.247.170.242) by
 HK2PR04CA0085.apcprd04.prod.outlook.com (2603:1096:202:15::29) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256) id
 15.20.3391.13 via Frontend Transport; Fri, 18 Sep 2020 09:52:06 +0000
X-Mailer: git-send-email 2.7.4
X-Originating-IP: [58.247.170.242]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: 62f866c0-b620-4ee8-c007-08d85bb8821b
X-MS-TrafficTypeDiagnostic: DM6PR12MB4297:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <DM6PR12MB42978CC4CE403191D510AB69FC3F0@DM6PR12MB4297.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:6430;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: m36ifr+V3/kIJcDq096QH2RNpZuoy3eV34HrbB+4ZdhW8qnMarcJE65hXhtLblTPlnoPpwQGvmYuw5roVEbTrsBpBjvzvRrvFYGpbhHGyZIl/0RgODmmFlTBhVG3wUQMny7XnSC2UcOJR+CVrb5gXdZ+GMV3GUc8jT9R2QLmaYDpsMIOnh+TYHvd2/3mfMWBAg23dDaL2PQTh6OKSDX+VQulP617gXlg9V5iwtJIi+cVLa52qcyEqBmfYuy3JpPPGTGcAB3WPGHGRyNnq2RnPk6JQXamf7qNvLM368kVuI2NNZfZsMCkSbDiWiPGAM1rtCMboPf/imn/uoMdAhTlQKzUix2Wh4S5MfYY4rr3XTwTRzGKd5Nt12/lIM4lWvcF
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM6PR12MB4075.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(396003)(39860400002)(136003)(376002)(346002)(366004)(110136005)(66946007)(66574015)(6486002)(5660300002)(16526019)(36756003)(4326008)(6636002)(478600001)(83380400001)(316002)(8676002)(52116002)(7696005)(86362001)(956004)(2906002)(186003)(6666004)(8936002)(66556008)(26005)(66476007)(2616005);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: Q5rxtXRt0IyWCPPziQmRUW2N5ZECn2Zd01GA/P357PcXpLHMIBfXap70lN2fSHwXqeIGyqFhv7qSt0meXvAWMLoV+2JgGq8hKs8Kr2yKeVzroIBHsCc1kQt1FGFFYRXolTFpDCtlCdkJYjxm7mu4ci7USSSVAi3JpFaig4PNP0OCHGksxiyH8zgUnA+aObibaRX/S/yL6ac4iWYR5rfr0iqzIwBG12Es9GcoXv27/Itb7IVHVGbKiQE16zNno2MS3q6zk6qEWhkRTuvaN/z294NeKQWPNl/xiUN7Q461XVApATZB4kvyox2gWdQxvainpwrChecy8hGkz1REbXMPf5ruHntOJhVtF6JtUDzP8oMwZp6b1RKUCNnx4zl0tPd2HNm3s3zzVTIa1Hi9yxHXZ25QE/P3jKRdoTqmCz4zTx2ue/YfQVnO/MGZYYDAxmwHrHbCpxiC6UPJGrGEMszz/shpQGhHoAGax3qY+r0/XYjCi7aYWPVpefHg3bCgaynCr9/xDgn+UfrchbVIvEn6iBxLKWpeZB/IUMyFZucNKXTj9ZDBc/s0GZPeEfGerdsxQDrjc7l0Di3EVVf/jM/bz+NzNfdw6naOWVqAnbEEAa9jiuoo9VI4vU+NSYQgqjGokaF5MluRRvIbx4jP3xN+Pg==
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 62f866c0-b620-4ee8-c007-08d85bb8821b
X-MS-Exchange-CrossTenant-AuthSource: DM6PR12MB4075.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 18 Sep 2020 09:52:09.1864 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: m3S1HZ++ujH9SC5nn8yOdin7x+NSe1GgVBb5ISpWSg3bsuvRglwrBAAuheDvY23PSVsKLbVdIAMKKaORFsZbtw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB4297
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QWRkIGhlbHBlciBmdW5jdGlvbiBpbiBvcmRlciB0byByZW1vdmUgUlJFRzMyL1dSRUczMgppbiBj
dXJyZW50IHBjaWVfcnJlZy93cmVnIGZ1bmN0aW9uIGZvciBzb2MxNSBhbmQKb253YXJkcyBhZGFw
dGVycy4KUENJRV9JTkRFWC9EQVRBIHBhaXJzIGFyZSB1c2VkIHRvIGFjY2VzcyByZWdzaXRlcnMK
b3V0c2lkZSBvZiBtbWlvIGJhciBpbiB0aGUgaGVscGVyIGZ1bmN0aW9ucy4KVGhlIG5ldyBoZWxw
ZXIgZnVuY3Rpb25zIGhlbHAgcmVtb3ZlIHRoZSByZWN1cnNpb24Kb2YgYW1kZ3B1X21tX3JyZWcv
d3JlZyBmcm9tIHBjaWVfcnJlZy93cmVnIGFuZApwcm92aWRlIHRoZSBvcHBvdHVuaXR5IHRvIGNl
bnRyYWxpemUgZGlyZWN0IGFuZAppbmRpcmVjdCBhY2Nlc3MgaW4gYSBzaW5nbGUgZnVuY3Rpb24u
Cgp2MjogRml4ZWQgdHlwbyBhbmQgcmVmaW5lIHRoZSBjb21tZW50cwoKdjM6IFJlbW92ZSB1bm5l
Y2Vzc2FyeSB2b2xhdGlsZSBsb2NhbCB2YXJpYWJsZQoKU2lnbmVkLW9mZi1ieTogSGF3a2luZyBa
aGFuZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPgpSZXZpZXdlZC1ieTogQWxleCBEZXVjaGVyIDxh
bGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpSZXZpZXdlZC1ieTogS2V2aW4gV2FuZyA8a2V2aW4x
LndhbmdAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5r
b2VuaWdAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IEd1Y2h1biBDaGVuIDxndWNodW4uY2hlbkBhbWQu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oICAgICAgICB8ICAx
MyArKysKIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYyB8IDEyOSAr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAxNDIgaW5zZXJ0
aW9ucygrKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5o
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKaW5kZXggMTNmOTJkZS4uNDBl
ZTQ0YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKQEAgLTEwMzEsNiArMTAzMSwx
OSBAQCB1aW50OF90IGFtZGdwdV9tbV9ycmVnOChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwg
dWludDMyX3Qgb2Zmc2V0KTsKIHUzMiBhbWRncHVfaW9fcnJlZyhzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwgdTMyIHJlZyk7CiB2b2lkIGFtZGdwdV9pb193cmVnKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2LCB1MzIgcmVnLCB1MzIgdik7CiAKK3UzMiBhbWRncHVfZGV2aWNlX2luZGlyZWN0
X3JyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCisJCQkJdTMyIHBjaWVfaW5kZXgsIHUz
MiBwY2llX2RhdGEsCisJCQkJdTMyIHJlZ19hZGRyKTsKK3U2NCBhbWRncHVfZGV2aWNlX2luZGly
ZWN0X3JyZWc2NChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKKwkJCQkgIHUzMiBwY2llX2lu
ZGV4LCB1MzIgcGNpZV9kYXRhLAorCQkJCSAgdTMyIHJlZ19hZGRyKTsKK3ZvaWQgYW1kZ3B1X2Rl
dmljZV9pbmRpcmVjdF93cmVnKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorCQkJCSB1MzIg
cGNpZV9pbmRleCwgdTMyIHBjaWVfZGF0YSwKKwkJCQkgdTMyIHJlZ19hZGRyLCB1MzIgcmVnX2Rh
dGEpOwordm9pZCBhbWRncHVfZGV2aWNlX2luZGlyZWN0X3dyZWc2NChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwKKwkJCQkgICB1MzIgcGNpZV9pbmRleCwgdTMyIHBjaWVfZGF0YSwKKwkJCQkg
ICB1MzIgcmVnX2FkZHIsIHU2NCByZWdfZGF0YSk7CisKIGJvb2wgYW1kZ3B1X2RldmljZV9hc2lj
X2hhc19kY19zdXBwb3J0KGVudW0gYW1kX2FzaWNfdHlwZSBhc2ljX3R5cGUpOwogYm9vbCBhbWRn
cHVfZGV2aWNlX2hhc19kY19zdXBwb3J0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIApk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCmluZGV4IDVjMmViNDYu
Ljc3Nzg1YjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9k
ZXZpY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMK
QEAgLTU5NSw2ICs1OTUsMTM1IEBAIHZvaWQgYW1kZ3B1X21tX3dkb29yYmVsbDY0KHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LCB1MzIgaW5kZXgsIHU2NCB2KQogfQogCiAvKioKKyAqIGFtZGdw
dV9kZXZpY2VfaW5kaXJlY3RfcnJlZyAtIHJlYWQgYW4gaW5kaXJlY3QgcmVnaXN0ZXIKKyAqCisg
KiBAYWRldjogYW1kZ3B1X2RldmljZSBwb2ludGVyCisgKiBAcGNpZV9pbmRleDogbW1pbyByZWdp
c3RlciBvZmZzZXQKKyAqIEBwY2llX2RhdGE6IG1taW8gcmVnaXN0ZXIgb2Zmc2V0CisgKgorICog
UmV0dXJucyB0aGUgdmFsdWUgb2YgaW5kaXJlY3QgcmVnaXN0ZXIgQHJlZ19hZGRyCisgKi8KK3Uz
MiBhbWRncHVfZGV2aWNlX2luZGlyZWN0X3JyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYs
CisJCQkJdTMyIHBjaWVfaW5kZXgsIHUzMiBwY2llX2RhdGEsCisJCQkJdTMyIHJlZ19hZGRyKQor
eworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CisJdTMyIHI7CisJdm9pZCBfX2lvbWVtICpwY2llX2lu
ZGV4X29mZnNldDsKKwl2b2lkIF9faW9tZW0gKnBjaWVfZGF0YV9vZmZzZXQ7CisKKwlzcGluX2xv
Y2tfaXJxc2F2ZSgmYWRldi0+cGNpZV9pZHhfbG9jaywgZmxhZ3MpOworCXBjaWVfaW5kZXhfb2Zm
c2V0ID0gKHZvaWQgX19pb21lbSAqKWFkZXYtPnJtbWlvICsgcGNpZV9pbmRleCAqIDQ7CisJcGNp
ZV9kYXRhX29mZnNldCA9ICh2b2lkIF9faW9tZW0gKilhZGV2LT5ybW1pbyArIHBjaWVfZGF0YSAq
IDQ7CisKKwl3cml0ZWwocmVnX2FkZHIsIHBjaWVfaW5kZXhfb2Zmc2V0KTsKKwlyZWFkbChwY2ll
X2luZGV4X29mZnNldCk7CisJciA9IHJlYWRsKHBjaWVfZGF0YV9vZmZzZXQpOworCXNwaW5fdW5s
b2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsKKworCXJldHVybiBy
OworfQorCisvKioKKyAqIGFtZGdwdV9kZXZpY2VfaW5kaXJlY3RfcnJlZzY0IC0gcmVhZCBhIDY0
Yml0cyBpbmRpcmVjdCByZWdpc3RlcgorICoKKyAqIEBhZGV2OiBhbWRncHVfZGV2aWNlIHBvaW50
ZXIKKyAqIEBwY2llX2luZGV4OiBtbWlvIHJlZ2lzdGVyIG9mZnNldAorICogQHBjaWVfZGF0YTog
bW1pbyByZWdpc3RlciBvZmZzZXQKKyAqCisgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBpbmRpcmVj
dCByZWdpc3RlciBAcmVnX2FkZHIKKyAqLwordTY0IGFtZGdwdV9kZXZpY2VfaW5kaXJlY3RfcnJl
ZzY0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorCQkJCSAgdTMyIHBjaWVfaW5kZXgsIHUz
MiBwY2llX2RhdGEsCisJCQkJICB1MzIgcmVnX2FkZHIpCit7CisJdW5zaWduZWQgbG9uZyBmbGFn
czsKKwl1NjQgcjsKKwl2b2lkIF9faW9tZW0gKnBjaWVfaW5kZXhfb2Zmc2V0OworCXZvaWQgX19p
b21lbSAqcGNpZV9kYXRhX29mZnNldDsKKworCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2ll
X2lkeF9sb2NrLCBmbGFncyk7CisJcGNpZV9pbmRleF9vZmZzZXQgPSAodm9pZCBfX2lvbWVtICop
YWRldi0+cm1taW8gKyBwY2llX2luZGV4ICogNDsKKwlwY2llX2RhdGFfb2Zmc2V0ID0gKHZvaWQg
X19pb21lbSAqKWFkZXYtPnJtbWlvICsgcGNpZV9kYXRhICogNDsKKworCS8qIHJlYWQgbG93IDMy
IGJpdHMgKi8KKwl3cml0ZWwocmVnX2FkZHIsIHBjaWVfaW5kZXhfb2Zmc2V0KTsKKwlyZWFkbChw
Y2llX2luZGV4X29mZnNldCk7CisJciA9IHJlYWRsKHBjaWVfZGF0YV9vZmZzZXQpOworCS8qIHJl
YWQgaGlnaCAzMiBiaXRzICovCisJd3JpdGVsKHJlZ19hZGRyICsgNCwgcGNpZV9pbmRleF9vZmZz
ZXQpOworCXJlYWRsKHBjaWVfaW5kZXhfb2Zmc2V0KTsKKwlyIHw9ICgodTY0KXJlYWRsKHBjaWVf
ZGF0YV9vZmZzZXQpIDw8IDMyKTsKKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZhZGV2LT5wY2ll
X2lkeF9sb2NrLCBmbGFncyk7CisKKwlyZXR1cm4gcjsKK30KKworLyoqCisgKiBhbWRncHVfZGV2
aWNlX2luZGlyZWN0X3dyZWcgLSB3cml0ZSBhbiBpbmRpcmVjdCByZWdpc3RlciBhZGRyZXNzCisg
KgorICogQGFkZXY6IGFtZGdwdV9kZXZpY2UgcG9pbnRlcgorICogQHBjaWVfaW5kZXg6IG1taW8g
cmVnaXN0ZXIgb2Zmc2V0CisgKiBAcGNpZV9kYXRhOiBtbWlvIHJlZ2lzdGVyIG9mZnNldAorICog
QHJlZ19hZGRyOiBpbmRpcmVjdCByZWdpc3RlciBvZmZzZXQKKyAqIEByZWdfZGF0YTogaW5kaXJl
Y3QgcmVnaXN0ZXIgZGF0YQorICoKKyAqLwordm9pZCBhbWRncHVfZGV2aWNlX2luZGlyZWN0X3dy
ZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCisJCQkJIHUzMiBwY2llX2luZGV4LCB1MzIg
cGNpZV9kYXRhLAorCQkJCSB1MzIgcmVnX2FkZHIsIHUzMiByZWdfZGF0YSkKK3sKKwl1bnNpZ25l
ZCBsb25nIGZsYWdzOworCXZvaWQgX19pb21lbSAqcGNpZV9pbmRleF9vZmZzZXQ7CisJdm9pZCBf
X2lvbWVtICpwY2llX2RhdGFfb2Zmc2V0OworCisJc3Bpbl9sb2NrX2lycXNhdmUoJmFkZXYtPnBj
aWVfaWR4X2xvY2ssIGZsYWdzKTsKKwlwY2llX2luZGV4X29mZnNldCA9ICh2b2lkIF9faW9tZW0g
KilhZGV2LT5ybW1pbyArIHBjaWVfaW5kZXggKiA0OworCXBjaWVfZGF0YV9vZmZzZXQgPSAodm9p
ZCBfX2lvbWVtICopYWRldi0+cm1taW8gKyBwY2llX2RhdGEgKiA0OworCisJd3JpdGVsKHJlZ19h
ZGRyLCBwY2llX2luZGV4X29mZnNldCk7CisJcmVhZGwocGNpZV9pbmRleF9vZmZzZXQpOworCXdy
aXRlbChyZWdfZGF0YSwgcGNpZV9kYXRhX29mZnNldCk7CisJcmVhZGwocGNpZV9kYXRhX29mZnNl
dCk7CisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmYWRldi0+cGNpZV9pZHhfbG9jaywgZmxhZ3Mp
OworfQorCisvKioKKyAqIGFtZGdwdV9kZXZpY2VfaW5kaXJlY3Rfd3JlZzY0IC0gd3JpdGUgYSA2
NGJpdHMgaW5kaXJlY3QgcmVnaXN0ZXIgYWRkcmVzcworICoKKyAqIEBhZGV2OiBhbWRncHVfZGV2
aWNlIHBvaW50ZXIKKyAqIEBwY2llX2luZGV4OiBtbWlvIHJlZ2lzdGVyIG9mZnNldAorICogQHBj
aWVfZGF0YTogbW1pbyByZWdpc3RlciBvZmZzZXQKKyAqIEByZWdfYWRkcjogaW5kaXJlY3QgcmVn
aXN0ZXIgb2Zmc2V0CisgKiBAcmVnX2RhdGE6IGluZGlyZWN0IHJlZ2lzdGVyIGRhdGEKKyAqCisg
Ki8KK3ZvaWQgYW1kZ3B1X2RldmljZV9pbmRpcmVjdF93cmVnNjQoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYsCisJCQkJICAgdTMyIHBjaWVfaW5kZXgsIHUzMiBwY2llX2RhdGEsCisJCQkJICAg
dTMyIHJlZ19hZGRyLCB1NjQgcmVnX2RhdGEpCit7CisJdW5zaWduZWQgbG9uZyBmbGFnczsKKwl2
b2lkIF9faW9tZW0gKnBjaWVfaW5kZXhfb2Zmc2V0OworCXZvaWQgX19pb21lbSAqcGNpZV9kYXRh
X29mZnNldDsKKworCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFn
cyk7CisJcGNpZV9pbmRleF9vZmZzZXQgPSAodm9pZCBfX2lvbWVtICopYWRldi0+cm1taW8gKyBw
Y2llX2luZGV4ICogNDsKKwlwY2llX2RhdGFfb2Zmc2V0ID0gKHZvaWQgX19pb21lbSAqKWFkZXYt
PnJtbWlvICsgcGNpZV9kYXRhICogNDsKKworCS8qIHdyaXRlIGxvdyAzMiBiaXRzICovCisJd3Jp
dGVsKHJlZ19hZGRyLCBwY2llX2luZGV4X29mZnNldCk7CisJcmVhZGwocGNpZV9pbmRleF9vZmZz
ZXQpOworCXdyaXRlbCgodTMyKShyZWdfZGF0YSAmIDB4ZmZmZmZmZmZVTEwpLCBwY2llX2RhdGFf
b2Zmc2V0KTsKKwlyZWFkbChwY2llX2RhdGFfb2Zmc2V0KTsKKwkvKiB3cml0ZSBoaWdoIDMyIGJp
dHMgKi8KKwl3cml0ZWwocmVnX2FkZHIgKyA0LCBwY2llX2luZGV4X29mZnNldCk7CisJcmVhZGwo
cGNpZV9pbmRleF9vZmZzZXQpOworCXdyaXRlbCgodTMyKShyZWdfZGF0YSA+PiAzMiksIHBjaWVf
ZGF0YV9vZmZzZXQpOworCXJlYWRsKHBjaWVfZGF0YV9vZmZzZXQpOworCXNwaW5fdW5sb2NrX2ly
cXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsKK30KKworLyoqCiAgKiBhbWRn
cHVfaW52YWxpZF9ycmVnIC0gZHVtbXkgcmVnIHJlYWQgZnVuY3Rpb24KICAqCiAgKiBAYWRldjog
YW1kZ3B1IGRldmljZSBwb2ludGVyCi0tIAoyLjcuNAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9hbWQtZ2Z4Cg==
