Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8564010A0C9
	for <lists+amd-gfx@lfdr.de>; Tue, 26 Nov 2019 15:54:38 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C235A6E12E;
	Tue, 26 Nov 2019 14:54:36 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr700059.outbound.protection.outlook.com [40.107.70.59])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DC3BA6E12E
 for <amd-gfx@lists.freedesktop.org>; Tue, 26 Nov 2019 14:54:34 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=cDdMGlFFcGOGeGL9z5VP6BxhvXKuTkPkY52MK02Qw+mwoQP7kwtgBQi+sMoJOJM2jw5REN6gpsZnr62BekLMGuRmRmBSJTmFolwqJfv+zwdJf8JxEh40o3E3H32w4TtXGGUBJ9jVjI5RvNTgXaI/KnxBnwTXBjR8233hEPnp3/dibIupyUKdIH4hA3X75kkbBsfiOPYbYmqmw8o5C+uhfkRfCHRh7w4SSHVz5F5nfroly8ONzTghinJVDusbo9oFDb9bh/Y21FkvPVv/k0wzH6q9fnIRjfijIWHUb/F8WToUIpSFSvswf/sGbSrK6nTTM97dtKCv0WOoQKhIfiapng==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Vj7azZRW8yjNr0H40VvxLBHMzy/RPyAE6hDiIFoaOmI=;
 b=dZpK2y5/56ABX5QFRZBPftLY9yN5EMkiZUM46oW2A86bzLVSYJqiUEk9FARbrEXQG/LZjhhHjgddbMTOTuRlV+u0Hzv3QOLo/ZZ9ih8loiVIdhuGISYa6FGFyDoQW8hZ6+8dm53dQNFmW7jVh3HlVmWizOZRCZ6K7vtNm4b1yDuvLs0pjDUHudCW8S5SRtH5iMliB1+/ndd6XLAVHPGnCCVHcAuGIQKfDBH/GzK6Gf4MgTFbhr1dtZXVL5WOiFGFlXy5QHdL2d/5dxe+0qlHZyft3bbzEW3anDnxTTpVu9bHHcziUH1H+RO9C7j47WLr6RDUdQNduTqJxZVw5hwrPw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM6PR12MB3466.namprd12.prod.outlook.com (20.178.198.225) by
 DM6PR12MB3145.namprd12.prod.outlook.com (20.178.198.138) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2474.18; Tue, 26 Nov 2019 14:54:33 +0000
Received: from DM6PR12MB3466.namprd12.prod.outlook.com
 ([fe80::8954:6ba3:6dca:4616]) by DM6PR12MB3466.namprd12.prod.outlook.com
 ([fe80::8954:6ba3:6dca:4616%7]) with mapi id 15.20.2474.023; Tue, 26 Nov 2019
 14:54:33 +0000
From: "Liu, Zhan" <Zhan.Liu@amd.com>
To: Alex Deucher <alexdeucher@gmail.com>, amd-gfx list
 <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH] drm/amdgpu: move pci handling out of pm ops
Thread-Topic: [PATCH] drm/amdgpu: move pci handling out of pm ops
Thread-Index: AQHVoIyKHIBfeEFCFUyK/A1JwqdCiqedkMyAgAAAwIA=
Date: Tue, 26 Nov 2019 14:54:33 +0000
Message-ID: <DM6PR12MB346602E0A14952836E1739FF9E450@DM6PR12MB3466.namprd12.prod.outlook.com>
References: <20191121165529.3941-1-alexander.deucher@amd.com>
 <CADnq5_OA56jv3wjRH43obaFM4M=nsZ4fESbQ6fDzOZ2RiQ21Sg@mail.gmail.com>
In-Reply-To: <CADnq5_OA56jv3wjRH43obaFM4M=nsZ4fESbQ6fDzOZ2RiQ21Sg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [165.204.55.250]
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: c2da8183-982d-4006-b9ef-08d772808c65
x-ms-traffictypediagnostic: DM6PR12MB3145:|DM6PR12MB3145:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM6PR12MB314538FA8D4BF378D5DEF05A9E450@DM6PR12MB3145.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:346;
x-forefront-prvs: 0233768B38
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(346002)(39860400002)(136003)(376002)(366004)(396003)(189003)(199004)(13464003)(99286004)(110136005)(25786009)(256004)(14444005)(229853002)(11346002)(305945005)(6436002)(33656002)(7736002)(7696005)(71200400001)(71190400001)(76176011)(446003)(74316002)(9686003)(53546011)(5660300002)(8676002)(186003)(81156014)(81166006)(4326008)(316002)(6506007)(26005)(66946007)(66476007)(66556008)(64756008)(66446008)(14454004)(76116006)(55016002)(66066001)(52536014)(3846002)(6116002)(102836004)(6246003)(478600001)(8936002)(86362001)(2906002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB3145;
 H:DM6PR12MB3466.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: aJMPMvzS/Z4AO5TW6ZKIE1Au8pru9QvUJUAlvhLJEpFuxtnnTxi3fEV+QbMaMtOQyk/pRp+mYhWDE8GhkUpgxKMpfRnblhNUlBMh+blnYMsmAfGAtQzHZCpQomo4yTUc9wizkX8HpfeisruDLRT5DABnKHjAj2u/wJKw/97VeeyFlW+raTacONAgA25zNI0oOryTndFKkcq8fjUWKVuP9wj7I3Ky3o3Cb8v+iHrtVTvfloCZyA3MUWYdtaqm6yhbW+j1oe9KCEQ8+hqak+TjQ3NfgQqkgdvspqv5I+amF2DO9OPJrj56pP3mmDyCTwS59rOi2i0sXXlRL+O5LoUYhEx0OO22dRmygT2MQZ4ZsGRPnktj0OZkagY+9ooO+ai0Mpx2E1RwnOUpG+tlnUrns6izOCAsrheRD8pMIghEfTVMbwi8Jg+HzdqnzQYyUou6
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: c2da8183-982d-4006-b9ef-08d772808c65
X-MS-Exchange-CrossTenant-originalarrivaltime: 26 Nov 2019 14:54:33.0923 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: aKuCVy72YzE0hxGaKA2oG4R/Ykd+T3om76/48RWEzbNJNPDwme62NONErS3Ub/4u
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3145
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Vj7azZRW8yjNr0H40VvxLBHMzy/RPyAE6hDiIFoaOmI=;
 b=dWZ7Chr3N1KwivYKMabbYo0yZoQ6KLoPZH6vYX3EX2Tgao3y8676Fk7wBEu/xDeuZUmbcR8wEvmmA0tk4AJWYQtuvdzyQ4vTTiHg7++Xd1W9Qyz6luGLjyoO+UpWY099xdKOId0WFBwdBXcOyFZhoM2eufW4oBx8/CHKAi6SnZQ=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Zhan.Liu@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

DQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogYW1kLWdmeCA8YW1kLWdm
eC1ib3VuY2VzQGxpc3RzLmZyZWVkZXNrdG9wLm9yZz4gT24gQmVoYWxmIE9mIEFsZXgNCj4gRGV1
Y2hlcg0KPiBTZW50OiAyMDE5L05vdmVtYmVyLzI2LCBUdWVzZGF5IDk6NTEgQU0NCj4gVG86IGFt
ZC1nZnggbGlzdCA8YW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmc+DQo+IENjOiBEZXVjaGVy
LCBBbGV4YW5kZXIgPEFsZXhhbmRlci5EZXVjaGVyQGFtZC5jb20+DQo+IFN1YmplY3Q6IFJlOiBb
UEFUQ0hdIGRybS9hbWRncHU6IG1vdmUgcGNpIGhhbmRsaW5nIG91dCBvZiBwbSBvcHMNCj4gDQo+
IFBpbmc/ICBJJ3ZlIHRlc3RlZCB0aGlzIG9uIGFsbCB0aGUgY2FyZHMgSSBoYXZlIGFjY2VzcyB0
by4NCj4gDQo+IEFsZXgNCj4gDQo+IE9uIFRodSwgTm92IDIxLCAyMDE5IGF0IDExOjU1IEFNIEFs
ZXggRGV1Y2hlciA8YWxleGRldWNoZXJAZ21haWwuY29tPg0KPiB3cm90ZToNCj4gPg0KPiA+IFRo
ZSBkb2N1bWVudGF0aW9uIHNheXMgdGhlIHRoYXQgUENJIGNvcmUgaGFuZGxlcyB0aGlzIGZvciB5
b3UgdW5sZXNzDQo+ID4geW91IGNob29zZSB0byBpbXBsZW1lbnQgaXQuICBKdXN0IHJlbHkgb24g
dGhlIFBDSSBjb3JlIHRvIGhhbmRsZSB0aGUNCj4gPiBwY2kgc3BlY2lmaWMgYml0cy4NCj4gPg0K
PiA+IFNpZ25lZC1vZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNv
bT4NCg0KDQpSZXZpZXdlZC1ieTogWmhhbiBMaXUgPHpoYW4ubGl1QGFtZC5jb20+DQoNCg0KPiA+
IC0tLQ0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaCAgICAgICAgfCAg
NCArLS0NCj4gPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIHwg
MzMgKysrKysrKysrLS0tLS0tLS0tDQo+IC0tLS0NCj4gPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2Rydi5jICAgIHwgMTYgKysrKystLS0tLS0NCj4gPiAgMyBmaWxlcyBjaGFu
Z2VkLCAyNCBpbnNlcnRpb25zKCspLCAyOSBkZWxldGlvbnMoLSkNCj4gPg0KPiA+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaA0KPiA+IGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgNCj4gPiBpbmRleCA5Nzg0MzQ2MmMyZmIuLjJlOWQw
YmUwNWYyZiAxMDA2NDQNCj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHUuaA0KPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oDQo+ID4g
QEAgLTExOTEsOCArMTE5MSw4IEBAIGludCBhbWRncHVfZHJpdmVyX29wZW5fa21zKHN0cnVjdCBk
cm1fZGV2aWNlDQo+ID4gKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYpOyAgdm9pZA0K
PiBhbWRncHVfZHJpdmVyX3Bvc3RjbG9zZV9rbXMoc3RydWN0IGRybV9kZXZpY2UgKmRldiwNCj4g
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVf
cHJpdik7ICBpbnQNCj4gPiBhbWRncHVfZGV2aWNlX2lwX3N1c3BlbmQoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpOyAtaW50DQo+ID4gYW1kZ3B1X2RldmljZV9zdXNwZW5kKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsIGJvb2wgc3VzcGVuZCwgYm9vbA0KPiA+IGZiY29uKTsgLWludCBhbWRncHVf
ZGV2aWNlX3Jlc3VtZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBib29sIHJlc3VtZSwNCj4gPiBi
b29sIGZiY29uKTsNCj4gPiAraW50IGFtZGdwdV9kZXZpY2Vfc3VzcGVuZChzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LCBib29sIGZiY29uKTsgaW50DQo+ID4gK2FtZGdwdV9kZXZpY2VfcmVzdW1lKHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYsIGJvb2wgZmJjb24pOw0KPiA+ICB1MzIgYW1kZ3B1X2dldF92
YmxhbmtfY291bnRlcl9rbXMoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQNCj4gPiBp
bnQgcGlwZSk7ICBpbnQgYW1kZ3B1X2VuYWJsZV92Ymxhbmtfa21zKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsDQo+ID4gdW5zaWduZWQgaW50IHBpcGUpOyAgdm9pZCBhbWRncHVfZGlzYWJsZV92Ymxh
bmtfa21zKHN0cnVjdCBkcm1fZGV2aWNlDQo+ID4gKmRldiwgdW5zaWduZWQgaW50IHBpcGUpOyBk
aWZmIC0tZ2l0DQo+ID4gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNl
LmMNCj4gPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiA+
IGluZGV4IGIxNDA4YzVlNDY0MC4uZDgzMmJkMjJiYTlkIDEwMDY0NA0KPiA+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiA+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiA+IEBAIC0xMDkwLDYgKzEwOTAs
NyBAQCBzdGF0aWMgaW50DQo+IGFtZGdwdV9kZXZpY2VfY2hlY2tfYXJndW1lbnRzKHN0cnVjdA0K
PiA+IGFtZGdwdV9kZXZpY2UgKmFkZXYpICBzdGF0aWMgdm9pZCBhbWRncHVfc3dpdGNoZXJvb19z
ZXRfc3RhdGUoc3RydWN0DQo+ID4gcGNpX2RldiAqcGRldiwgZW51bSB2Z2Ffc3dpdGNoZXJvb19z
dGF0ZSBzdGF0ZSkgIHsNCj4gPiAgICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBwY2lf
Z2V0X2RydmRhdGEocGRldik7DQo+ID4gKyAgICAgICBpbnQgcjsNCj4gPg0KPiA+ICAgICAgICAg
aWYgKGFtZGdwdV9kZXZpY2Vfc3VwcG9ydHNfYm9jbyhkZXYpICYmIHN0YXRlID09DQo+IFZHQV9T
V0lUQ0hFUk9PX09GRikNCj4gPiAgICAgICAgICAgICAgICAgcmV0dXJuOw0KPiA+IEBAIC0xMDk5
LDcgKzExMDAsMTIgQEAgc3RhdGljIHZvaWQgYW1kZ3B1X3N3aXRjaGVyb29fc2V0X3N0YXRlKHN0
cnVjdA0KPiBwY2lfZGV2ICpwZGV2LCBlbnVtIHZnYV9zd2l0Y2hlcm8NCj4gPiAgICAgICAgICAg
ICAgICAgLyogZG9uJ3Qgc3VzcGVuZCBvciByZXN1bWUgY2FyZCBub3JtYWxseSAqLw0KPiA+ICAg
ICAgICAgICAgICAgICBkZXYtPnN3aXRjaF9wb3dlcl9zdGF0ZSA9IERSTV9TV0lUQ0hfUE9XRVJf
Q0hBTkdJTkc7DQo+ID4NCj4gPiAtICAgICAgICAgICAgICAgYW1kZ3B1X2RldmljZV9yZXN1bWUo
ZGV2LCB0cnVlLCB0cnVlKTsNCj4gPiArICAgICAgICAgICAgICAgcGNpX3NldF9wb3dlcl9zdGF0
ZShkZXYtPnBkZXYsIFBDSV9EMCk7DQo+ID4gKyAgICAgICAgICAgICAgIHBjaV9yZXN0b3JlX3N0
YXRlKGRldi0+cGRldik7DQo+ID4gKyAgICAgICAgICAgICAgIHIgPSBwY2lfZW5hYmxlX2Rldmlj
ZShkZXYtPnBkZXYpOw0KPiA+ICsgICAgICAgICAgICAgICBpZiAocikNCj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICBEUk1fV0FSTigicGNpX2VuYWJsZV9kZXZpY2UgZmFpbGVkICglZClcbiIs
IHIpOw0KPiA+ICsgICAgICAgICAgICAgICBhbWRncHVfZGV2aWNlX3Jlc3VtZShkZXYsIHRydWUp
Ow0KPiA+DQo+ID4gICAgICAgICAgICAgICAgIGRldi0+c3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJN
X1NXSVRDSF9QT1dFUl9PTjsNCj4gPiAgICAgICAgICAgICAgICAgZHJtX2ttc19oZWxwZXJfcG9s
bF9lbmFibGUoZGV2KTsgQEAgLTExMDcsNyArMTExMywxMQ0KPiA+IEBAIHN0YXRpYyB2b2lkIGFt
ZGdwdV9zd2l0Y2hlcm9vX3NldF9zdGF0ZShzdHJ1Y3QgcGNpX2RldiAqcGRldiwNCj4gZW51bSB2
Z2Ffc3dpdGNoZXJvDQo+ID4gICAgICAgICAgICAgICAgIHByX2luZm8oImFtZGdwdTogc3dpdGNo
ZWQgb2ZmXG4iKTsNCj4gPiAgICAgICAgICAgICAgICAgZHJtX2ttc19oZWxwZXJfcG9sbF9kaXNh
YmxlKGRldik7DQo+ID4gICAgICAgICAgICAgICAgIGRldi0+c3dpdGNoX3Bvd2VyX3N0YXRlID0g
RFJNX1NXSVRDSF9QT1dFUl9DSEFOR0lORzsNCj4gPiAtICAgICAgICAgICAgICAgYW1kZ3B1X2Rl
dmljZV9zdXNwZW5kKGRldiwgdHJ1ZSwgdHJ1ZSk7DQo+ID4gKyAgICAgICAgICAgICAgIGFtZGdw
dV9kZXZpY2Vfc3VzcGVuZChkZXYsIHRydWUpOw0KPiA+ICsgICAgICAgICAgICAgICBwY2lfc2F2
ZV9zdGF0ZShkZXYtPnBkZXYpOw0KPiA+ICsgICAgICAgICAgICAgICAvKiBTaHV0IGRvd24gdGhl
IGRldmljZSAqLw0KPiA+ICsgICAgICAgICAgICAgICBwY2lfZGlzYWJsZV9kZXZpY2UoZGV2LT5w
ZGV2KTsNCj4gPiArICAgICAgICAgICAgICAgcGNpX3NldF9wb3dlcl9zdGF0ZShkZXYtPnBkZXYs
IFBDSV9EM2NvbGQpOw0KPiA+ICAgICAgICAgICAgICAgICBkZXYtPnN3aXRjaF9wb3dlcl9zdGF0
ZSA9IERSTV9TV0lUQ0hfUE9XRVJfT0ZGOw0KPiA+ICAgICAgICAgfQ0KPiA+ICB9DQo+ID4gQEAg
LTMxOTgsNyArMzIwOCw3IEBAIHZvaWQgYW1kZ3B1X2RldmljZV9maW5pKHN0cnVjdCBhbWRncHVf
ZGV2aWNlDQo+ICphZGV2KQ0KPiA+ICAgKiBSZXR1cm5zIDAgZm9yIHN1Y2Nlc3Mgb3IgYW4gZXJy
b3Igb24gZmFpbHVyZS4NCj4gPiAgICogQ2FsbGVkIGF0IGRyaXZlciBzdXNwZW5kLg0KPiA+ICAg
Ki8NCj4gPiAtaW50IGFtZGdwdV9kZXZpY2Vfc3VzcGVuZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCBib29sIHN1c3BlbmQsIGJvb2wNCj4gPiBmYmNvbikNCj4gPiAraW50IGFtZGdwdV9kZXZpY2Vf
c3VzcGVuZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBib29sIGZiY29uKQ0KPiA+ICB7DQo+ID4g
ICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldjsNCj4gPiAgICAgICAgIHN0cnVjdCBk
cm1fY3J0YyAqY3J0YzsNCj4gPiBAQCAtMzI4MSwxMyArMzI5MSw2IEBAIGludCBhbWRncHVfZGV2
aWNlX3N1c3BlbmQoc3RydWN0IGRybV9kZXZpY2UNCj4gKmRldiwgYm9vbCBzdXNwZW5kLCBib29s
IGZiY29uKQ0KPiA+ICAgICAgICAgICovDQo+ID4gICAgICAgICBhbWRncHVfYm9fZXZpY3RfdnJh
bShhZGV2KTsNCj4gPg0KPiA+IC0gICAgICAgaWYgKHN1c3BlbmQpIHsNCj4gPiAtICAgICAgICAg
ICAgICAgcGNpX3NhdmVfc3RhdGUoZGV2LT5wZGV2KTsNCj4gPiAtICAgICAgICAgICAgICAgLyog
U2h1dCBkb3duIHRoZSBkZXZpY2UgKi8NCj4gPiAtICAgICAgICAgICAgICAgcGNpX2Rpc2FibGVf
ZGV2aWNlKGRldi0+cGRldik7DQo+ID4gLSAgICAgICAgICAgICAgIHBjaV9zZXRfcG93ZXJfc3Rh
dGUoZGV2LT5wZGV2LCBQQ0lfRDNob3QpOw0KPiA+IC0gICAgICAgfQ0KPiA+IC0NCj4gPiAgICAg
ICAgIHJldHVybiAwOw0KPiA+ICB9DQo+ID4NCj4gPiBAQCAtMzMwMiw3ICszMzA1LDcgQEAgaW50
IGFtZGdwdV9kZXZpY2Vfc3VzcGVuZChzdHJ1Y3QgZHJtX2RldmljZQ0KPiAqZGV2LCBib29sIHN1
c3BlbmQsIGJvb2wgZmJjb24pDQo+ID4gICAqIFJldHVybnMgMCBmb3Igc3VjY2VzcyBvciBhbiBl
cnJvciBvbiBmYWlsdXJlLg0KPiA+ICAgKiBDYWxsZWQgYXQgZHJpdmVyIHJlc3VtZS4NCj4gPiAg
ICovDQo+ID4gLWludCBhbWRncHVfZGV2aWNlX3Jlc3VtZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCBib29sIHJlc3VtZSwgYm9vbA0KPiA+IGZiY29uKQ0KPiA+ICtpbnQgYW1kZ3B1X2RldmljZV9y
ZXN1bWUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgYm9vbCBmYmNvbikNCj4gPiAgew0KPiA+ICAg
ICAgICAgc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsNCj4gPiAgICAgICAgIHN0cnVj
dCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBpdGVyOyBAQCAtMzMxMywxNCArMzMxNiw2IEBADQo+
ID4gaW50IGFtZGdwdV9kZXZpY2VfcmVzdW1lKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIGJvb2wg
cmVzdW1lLCBib29sDQo+IGZiY29uKQ0KPiA+ICAgICAgICAgaWYgKGRldi0+c3dpdGNoX3Bvd2Vy
X3N0YXRlID09IERSTV9TV0lUQ0hfUE9XRVJfT0ZGKQ0KPiA+ICAgICAgICAgICAgICAgICByZXR1
cm4gMDsNCj4gPg0KPiA+IC0gICAgICAgaWYgKHJlc3VtZSkgew0KPiA+IC0gICAgICAgICAgICAg
ICBwY2lfc2V0X3Bvd2VyX3N0YXRlKGRldi0+cGRldiwgUENJX0QwKTsNCj4gPiAtICAgICAgICAg
ICAgICAgcGNpX3Jlc3RvcmVfc3RhdGUoZGV2LT5wZGV2KTsNCj4gPiAtICAgICAgICAgICAgICAg
ciA9IHBjaV9lbmFibGVfZGV2aWNlKGRldi0+cGRldik7DQo+ID4gLSAgICAgICAgICAgICAgIGlm
IChyKQ0KPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByOw0KPiA+IC0gICAgICAg
fQ0KPiA+IC0NCj4gPiAgICAgICAgIC8qIHBvc3QgY2FyZCAqLw0KPiA+ICAgICAgICAgaWYgKGFt
ZGdwdV9kZXZpY2VfbmVlZF9wb3N0KGFkZXYpKSB7DQo+ID4gICAgICAgICAgICAgICAgIHIgPQ0K
PiA+IGFtZGdwdV9hdG9tX2FzaWNfaW5pdChhZGV2LT5tb2RlX2luZm8uYXRvbV9jb250ZXh0KTsN
Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rydi5j
DQo+ID4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMNCj4gPiBpbmRl
eCBkZjJmNDcyMGEyZjAuLjJmMzY3MTQ2YzcyYyAxMDA2NDQNCj4gPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMNCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMNCj4gPiBAQCAtMTE1OCw3ICsxMTU4LDcgQEAgc3RhdGlj
IGludCBhbWRncHVfcG1vcHNfc3VzcGVuZChzdHJ1Y3QgZGV2aWNlDQo+ID4gKmRldikgIHsNCj4g
PiAgICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkcm1fZGV2ID0gZGV2X2dldF9kcnZkYXRhKGRl
dik7DQo+ID4NCj4gPiAtICAgICAgIHJldHVybiBhbWRncHVfZGV2aWNlX3N1c3BlbmQoZHJtX2Rl
diwgdHJ1ZSwgdHJ1ZSk7DQo+ID4gKyAgICAgICByZXR1cm4gYW1kZ3B1X2RldmljZV9zdXNwZW5k
KGRybV9kZXYsIHRydWUpOw0KPiA+ICB9DQo+ID4NCj4gPiAgc3RhdGljIGludCBhbWRncHVfcG1v
cHNfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikgQEAgLTExNzMsNw0KPiArMTE3Myw3DQo+ID4g
QEAgc3RhdGljIGludCBhbWRncHVfcG1vcHNfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikNCj4g
PiAgICAgICAgICAgICAgICAgcG1fcnVudGltZV9lbmFibGUoZGV2KTsNCj4gPiAgICAgICAgIH0N
Cj4gPg0KPiA+IC0gICAgICAgcmV0dXJuIGFtZGdwdV9kZXZpY2VfcmVzdW1lKGRybV9kZXYsIHRy
dWUsIHRydWUpOw0KPiA+ICsgICAgICAgcmV0dXJuIGFtZGdwdV9kZXZpY2VfcmVzdW1lKGRybV9k
ZXYsIHRydWUpOw0KPiA+ICB9DQo+ID4NCj4gPiAgc3RhdGljIGludCBhbWRncHVfcG1vcHNfZnJl
ZXplKHN0cnVjdCBkZXZpY2UgKmRldikgQEAgLTExODIsNyArMTE4Miw3DQo+ID4gQEAgc3RhdGlj
IGludCBhbWRncHVfcG1vcHNfZnJlZXplKHN0cnVjdCBkZXZpY2UgKmRldikNCj4gPiAgICAgICAg
IHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gZHJtX2Rldi0+ZGV2X3ByaXZhdGU7DQo+ID4g
ICAgICAgICBpbnQgcjsNCj4gPg0KPiA+IC0gICAgICAgciA9IGFtZGdwdV9kZXZpY2Vfc3VzcGVu
ZChkcm1fZGV2LCBmYWxzZSwgdHJ1ZSk7DQo+ID4gKyAgICAgICByID0gYW1kZ3B1X2RldmljZV9z
dXNwZW5kKGRybV9kZXYsIHRydWUpOw0KPiA+ICAgICAgICAgaWYgKHIpDQo+ID4gICAgICAgICAg
ICAgICAgIHJldHVybiByOw0KPiA+ICAgICAgICAgcmV0dXJuIGFtZGdwdV9hc2ljX3Jlc2V0KGFk
ZXYpOyBAQCAtMTE5MiwyMSArMTE5MiwyMSBAQCBzdGF0aWMNCj4gPiBpbnQgYW1kZ3B1X3Btb3Bz
X3RoYXcoc3RydWN0IGRldmljZSAqZGV2KSAgew0KPiA+ICAgICAgICAgc3RydWN0IGRybV9kZXZp
Y2UgKmRybV9kZXYgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsNCj4gPg0KPiA+IC0gICAgICAgcmV0
dXJuIGFtZGdwdV9kZXZpY2VfcmVzdW1lKGRybV9kZXYsIGZhbHNlLCB0cnVlKTsNCj4gPiArICAg
ICAgIHJldHVybiBhbWRncHVfZGV2aWNlX3Jlc3VtZShkcm1fZGV2LCB0cnVlKTsNCj4gPiAgfQ0K
PiA+DQo+ID4gIHN0YXRpYyBpbnQgYW1kZ3B1X3Btb3BzX3Bvd2Vyb2ZmKHN0cnVjdCBkZXZpY2Ug
KmRldikgIHsNCj4gPiAgICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkcm1fZGV2ID0gZGV2X2dl
dF9kcnZkYXRhKGRldik7DQo+ID4NCj4gPiAtICAgICAgIHJldHVybiBhbWRncHVfZGV2aWNlX3N1
c3BlbmQoZHJtX2RldiwgdHJ1ZSwgdHJ1ZSk7DQo+ID4gKyAgICAgICByZXR1cm4gYW1kZ3B1X2Rl
dmljZV9zdXNwZW5kKGRybV9kZXYsIHRydWUpOw0KPiA+ICB9DQo+ID4NCj4gPiAgc3RhdGljIGlu
dCBhbWRncHVfcG1vcHNfcmVzdG9yZShzdHJ1Y3QgZGV2aWNlICpkZXYpICB7DQo+ID4gICAgICAg
ICBzdHJ1Y3QgZHJtX2RldmljZSAqZHJtX2RldiA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOw0KPiA+
DQo+ID4gLSAgICAgICByZXR1cm4gYW1kZ3B1X2RldmljZV9yZXN1bWUoZHJtX2RldiwgZmFsc2Us
IHRydWUpOw0KPiA+ICsgICAgICAgcmV0dXJuIGFtZGdwdV9kZXZpY2VfcmVzdW1lKGRybV9kZXYs
IHRydWUpOw0KPiA+ICB9DQo+ID4NCj4gPiAgc3RhdGljIGludCBhbWRncHVfcG1vcHNfcnVudGlt
ZV9zdXNwZW5kKHN0cnVjdCBkZXZpY2UgKmRldikgQEANCj4gPiAtMTIyNSw3ICsxMjI1LDcgQEAg
c3RhdGljIGludCBhbWRncHVfcG1vcHNfcnVudGltZV9zdXNwZW5kKHN0cnVjdA0KPiBkZXZpY2Ug
KmRldikNCj4gPiAgICAgICAgICAgICAgICAgZHJtX2Rldi0+c3dpdGNoX3Bvd2VyX3N0YXRlID0N
Cj4gRFJNX1NXSVRDSF9QT1dFUl9DSEFOR0lORzsNCj4gPiAgICAgICAgIGRybV9rbXNfaGVscGVy
X3BvbGxfZGlzYWJsZShkcm1fZGV2KTsNCj4gPg0KPiA+IC0gICAgICAgcmV0ID0gYW1kZ3B1X2Rl
dmljZV9zdXNwZW5kKGRybV9kZXYsIGZhbHNlLCBmYWxzZSk7DQo+ID4gKyAgICAgICByZXQgPSBh
bWRncHVfZGV2aWNlX3N1c3BlbmQoZHJtX2RldiwgZmFsc2UpOw0KPiA+ICAgICAgICAgaWYgKGFt
ZGdwdV9kZXZpY2Vfc3VwcG9ydHNfYm9jbyhkcm1fZGV2KSkgew0KPiA+ICAgICAgICAgICAgICAg
ICAvKiBPbmx5IG5lZWQgdG8gaGFuZGxlIFBDSSBzdGF0ZSBpbiB0aGUgZHJpdmVyIGZvciBBVFBY
DQo+ID4gICAgICAgICAgICAgICAgICAqIFBDSSBjb3JlIGhhbmRsZXMgaXQgZm9yIF9QUjMuDQo+
ID4gQEAgLTEyNzUsNyArMTI3NSw3IEBAIHN0YXRpYyBpbnQNCj4gYW1kZ3B1X3Btb3BzX3J1bnRp
bWVfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikNCj4gPiAgICAgICAgIH0gZWxzZSBpZiAoYW1k
Z3B1X2RldmljZV9zdXBwb3J0c19iYWNvKGRybV9kZXYpKSB7DQo+ID4gICAgICAgICAgICAgICAg
IGFtZGdwdV9kZXZpY2VfYmFjb19leGl0KGRybV9kZXYpOw0KPiA+ICAgICAgICAgfQ0KPiA+IC0g
ICAgICAgcmV0ID0gYW1kZ3B1X2RldmljZV9yZXN1bWUoZHJtX2RldiwgZmFsc2UsIGZhbHNlKTsN
Cj4gPiArICAgICAgIHJldCA9IGFtZGdwdV9kZXZpY2VfcmVzdW1lKGRybV9kZXYsIGZhbHNlKTsN
Cj4gPiAgICAgICAgIGRybV9rbXNfaGVscGVyX3BvbGxfZW5hYmxlKGRybV9kZXYpOw0KPiA+ICAg
ICAgICAgaWYgKGFtZGdwdV9kZXZpY2Vfc3VwcG9ydHNfYm9jbyhkcm1fZGV2KSkNCj4gPiAgICAg
ICAgICAgICAgICAgZHJtX2Rldi0+c3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRDSF9QT1dF
Ul9PTjsNCj4gPiAtLQ0KPiA+IDIuMjMuMA0KPiA+DQo+IF9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fDQo+IGFtZC1nZnggbWFpbGluZyBsaXN0DQo+IGFtZC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQoNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vYW1kLWdmeA==
