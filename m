Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 15797AB480
	for <lists+amd-gfx@lfdr.de>; Fri,  6 Sep 2019 11:00:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 902366E1F8;
	Fri,  6 Sep 2019 09:00:34 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-BN3-obe.outbound.protection.outlook.com
 (mail-eopbgr680056.outbound.protection.outlook.com [40.107.68.56])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D28CD6E1F8
 for <amd-gfx@lists.freedesktop.org>; Fri,  6 Sep 2019 09:00:32 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=lpEbgU1wgluNxnxMA8FllnOA9lv0lOPZQSX5UbinnhTwvv/EhJP1qEFWB9KJzhyT4k28h5KyKkL8WWAEAW4QXqM6BuuWAe5jT1h5v7mUcTYZYy+l4ieu1bxg+9ngTYrqFZLh5uBj3+VSH/AushZ52D3PaWCbKleKsveyQHEp9ZorF63cnev5gvpQNp7wSg5Hlv0SKnawZLFT0DfNFnvb0lD4L8PNkaAL4Gqk+2BGCW0pXYclEj3/Ybxh36AThrbYcdnBQyQ05w4zcz/H+BeyfZUpnzI3xVRzQYBSTt+UydBdrtVRzG7KckYELo1hV9MTnAbHC0xAiksJBejwPeoC4g==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=exUCXUeDymQ189RloJGekHH17+vCzeOwYTd4oZj+pgo=;
 b=LOur8O/Qp4U2Xm2dqabtXCHYkh5OdJ5P/GOVIdW8erx0VKrpZtc1nixsku7puxvQlVW50xqe+XBX64Im4mya/r9Bw8FP9yrMKSwqPdaF/tbu70XvTEDNbSY4JtZhpFDoBUqowsLUjUOz621SDb/CihrLqJ4bSKYK9R8qsconi9vYTqX3jtmMjglltKitUXqbgSLToSYaKXmN5GtorfuubJmNVd25oTFdE+JVN3hYFdJSc7TdohB9lR/fDct+IKfYw/QZd/gi2HArMQXiB3Rl6GJlFGnbky4zvUzPXwEXyF1BJ9iVceC1o4JXhD9kRa4WXRo+JUquoK4KKjWS7yB9/Q==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB3054.namprd12.prod.outlook.com (20.178.244.79) by
 MN2PR12MB3709.namprd12.prod.outlook.com (10.255.236.22) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2220.20; Fri, 6 Sep 2019 09:00:31 +0000
Received: from MN2PR12MB3054.namprd12.prod.outlook.com
 ([fe80::f8cf:7a84:723c:27d0]) by MN2PR12MB3054.namprd12.prod.outlook.com
 ([fe80::f8cf:7a84:723c:27d0%3]) with mapi id 15.20.2220.022; Fri, 6 Sep 2019
 09:00:31 +0000
From: "Zhou1, Tao" <Tao.Zhou1@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Zhang,
 Hawking" <Hawking.Zhang@amd.com>, "Chen, Guchun" <Guchun.Chen@amd.com>
Subject: [PATCH 1/3] drm/amdgpu: move umc late init from gmc to umc block
Thread-Topic: [PATCH 1/3] drm/amdgpu: move umc late init from gmc to umc block
Thread-Index: AQHVZJGI2Apq2LLJKUuTM87RSuXNjw==
Date: Fri, 6 Sep 2019 09:00:30 +0000
Message-ID: <20190906090011.20271-1-tao.zhou1@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: HK2PR04CA0050.apcprd04.prod.outlook.com
 (2603:1096:202:14::18) To MN2PR12MB3054.namprd12.prod.outlook.com
 (2603:10b6:208:d1::15)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: ea824265-2e3f-4999-c263-08d732a8ab45
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:MN2PR12MB3709; 
x-ms-traffictypediagnostic: MN2PR12MB3709:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <MN2PR12MB37092E20549323AA5C209F34B0BA0@MN2PR12MB3709.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:5516;
x-forefront-prvs: 0152EBA40F
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(366004)(396003)(39860400002)(346002)(136003)(199004)(189003)(256004)(26005)(110136005)(386003)(102836004)(6506007)(6436002)(2501003)(36756003)(186003)(6116002)(6486002)(3846002)(2906002)(486006)(66066001)(14444005)(476003)(316002)(86362001)(2616005)(66476007)(64756008)(50226002)(81166006)(81156014)(25786009)(99286004)(5660300002)(6512007)(66556008)(8676002)(52116002)(66946007)(6636002)(8936002)(53936002)(1076003)(478600001)(14454004)(305945005)(71190400001)(71200400001)(4326008)(66446008)(7736002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3709;
 H:MN2PR12MB3054.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: aMKi4N+L2EjN+YVlGybWmSPLPBZLWO/4OuQfqfdQXztk1BFa4SI8tvRyhS7lo/6GBh22rZZxA9psW073vsnFcoLUWOb6W5OSkX3MSjRtFPl25WwRgTX23RAL/BB70PoZTo6WseB/y1sc+4VmmdoxUfDTv6WWMWQ0nl2ITtqxldYFYsg6O2a6i+WmrQ80ralq7mPUfB7mgHg/61xzOr/Lm9HHIdYbrWGMNZ6V4//jJPaY2K4XZAZgYk6oTdrPzrcxnScdc2NwJV7zqs39vVO1Z9hyFD0BY2qHv+5MAGs7LxtZh08tmYPmGFK5qFAFhyjihUHWXOdiCsU95pdw6gci8jIzobi/A4mtVnGeRD1PYF8kK5Q6frw5g5bcflcVHD54JRha9iqq+PYnEaPel3D9USLddOT9UenSZeP1rKHCdYk=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: ea824265-2e3f-4999-c263-08d732a8ab45
X-MS-Exchange-CrossTenant-originalarrivaltime: 06 Sep 2019 09:00:30.9112 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: jAQj8vX5wgiA7NmbymPQ6OAbx8xAROr7eQoxuxXsHVqvDUyjvrkMT3Suf/zI9f4n
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3709
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=exUCXUeDymQ189RloJGekHH17+vCzeOwYTd4oZj+pgo=;
 b=PmHc7uvTU37amRwS5INS0im35ULlvd7r9MPdygnij8/Shn8yxLnfNozE39H0FhJfm8A1fGW6YzwDVuaZIuJD7T/7IUK/SbUdc4sUkE6gPbqdqTMgpsswkE7hSEL7kBclADZ+VcpOOT0s/zkohNRvEujY3xzW2quTqvNbsfZFCG4=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Tao.Zhou1@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Zhou1, Tao" <Tao.Zhou1@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

dW1jIGxhdGUgaW5pdCBpcyB1bWMgc3BlY2lmaWMsIGl0J3MgbW9yZSBzdWl0YWJsZSB0byBiZSBw
dXQgaW4gdW1jIGJsb2NrCgpTaWduZWQtb2ZmLWJ5OiBUYW8gWmhvdSA8dGFvLnpob3UxQGFtZC5j
b20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvTWFrZWZpbGUgICAgIHwgIDIgKy0K
IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuYyB8IDQ4IC0tLS0tLS0tLS0t
LS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuaCB8ICAyIC0KIGRy
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91bWMuYyB8IDczICsrKysrKysrKysrKysr
KysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91bWMuaCB8ICAy
ICsKIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgICB8ICA4ICsrLQogZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEuYyAgIHwgIDEgKwogNyBmaWxlcyBjaGFu
Z2VkLCA4MiBpbnNlcnRpb25zKCspLCA1NCBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0
NCBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmMKCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L01ha2VmaWxlCmluZGV4IDg0NjE0YTcxYmI0ZC4uOTEzNjljODIzY2UyIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZQpAQCAtNTUsNyArNTUsNyBAQCBhbWRncHUteSArPSBh
bWRncHVfZGV2aWNlLm8gYW1kZ3B1X2ttcy5vIFwKIAlhbWRncHVfdmZfZXJyb3IubyBhbWRncHVf
c2NoZWQubyBhbWRncHVfZGVidWdmcy5vIGFtZGdwdV9pZHMubyBcCiAJYW1kZ3B1X2dtYy5vIGFt
ZGdwdV9tbWh1Yi5vIGFtZGdwdV94Z21pLm8gYW1kZ3B1X2NzYS5vIGFtZGdwdV9yYXMubyBhbWRn
cHVfdm1fY3B1Lm8gXAogCWFtZGdwdV92bV9zZG1hLm8gYW1kZ3B1X3BtdS5vIGFtZGdwdV9kaXNj
b3ZlcnkubyBhbWRncHVfcmFzX2VlcHJvbS5vIGFtZGdwdV9uYmlvLm8gXAotCXNtdV92MTFfMF9p
MmMubworCWFtZGdwdV91bWMubyBzbXVfdjExXzBfaTJjLm8KIAogYW1kZ3B1LSQoQ09ORklHX1BF
UkZfRVZFTlRTKSArPSBhbWRncHVfcG11Lm8KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2dtYy5jCmluZGV4IDUxODkwYjFkODUyMi4uZGMwNDRlZWMxODhlIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5jCkBAIC0zMDQsNTEgKzMwNCwzIEBAIGJvb2wgYW1k
Z3B1X2dtY19maWx0ZXJfZmF1bHRzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRf
dCBhZGRyLAogCWdtYy0+ZmF1bHRfaGFzaFtoYXNoXS5pZHggPSBnbWMtPmxhc3RfZmF1bHQrKzsK
IAlyZXR1cm4gZmFsc2U7CiB9Ci0KLWludCBhbWRncHVfZ21jX3Jhc19sYXRlX2luaXQoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsCi0JCQkgICAgIHZvaWQgKnJhc19paF9pbmZvKQotewotCWlu
dCByOwotCXN0cnVjdCByYXNfaWhfaWYgKmloX2luZm8gPSAoc3RydWN0IHJhc19paF9pZiAqKXJh
c19paF9pbmZvOwotCXN0cnVjdCByYXNfZnNfaWYgZnNfaW5mbyA9IHsKLQkJLnN5c2ZzX25hbWUg
PSAidW1jX2Vycl9jb3VudCIsCi0JCS5kZWJ1Z2ZzX25hbWUgPSAidW1jX2Vycl9pbmplY3QiLAot
CX07Ci0KLQlpZiAoIWloX2luZm8pCi0JCXJldHVybiAtRUlOVkFMOwotCi0JaWYgKCFhZGV2LT5n
bWMudW1jX3Jhc19pZikgewotCQlhZGV2LT5nbWMudW1jX3Jhc19pZiA9IGttYWxsb2Moc2l6ZW9m
KHN0cnVjdCByYXNfY29tbW9uX2lmKSwgR0ZQX0tFUk5FTCk7Ci0JCWlmICghYWRldi0+Z21jLnVt
Y19yYXNfaWYpCi0JCQlyZXR1cm4gLUVOT01FTTsKLQkJYWRldi0+Z21jLnVtY19yYXNfaWYtPmJs
b2NrID0gQU1ER1BVX1JBU19CTE9DS19fVU1DOwotCQlhZGV2LT5nbWMudW1jX3Jhc19pZi0+dHlw
ZSA9IEFNREdQVV9SQVNfRVJST1JfX01VTFRJX1VOQ09SUkVDVEFCTEU7Ci0JCWFkZXYtPmdtYy51
bWNfcmFzX2lmLT5zdWJfYmxvY2tfaW5kZXggPSAwOwotCQlzdHJjcHkoYWRldi0+Z21jLnVtY19y
YXNfaWYtPm5hbWUsICJ1bWMiKTsKLQl9Ci0JaWhfaW5mby0+aGVhZCA9IGZzX2luZm8uaGVhZCA9
ICphZGV2LT5nbWMudW1jX3Jhc19pZjsKLQotCXIgPSBhbWRncHVfcmFzX2xhdGVfaW5pdChhZGV2
LCBhZGV2LT5nbWMudW1jX3Jhc19pZiwKLQkJCQkgJmZzX2luZm8sIGloX2luZm8pOwotCWlmIChy
KQotCQlnb3RvIGZyZWU7Ci0KLQlpZiAoYW1kZ3B1X3Jhc19pc19zdXBwb3J0ZWQoYWRldiwgYWRl
di0+Z21jLnVtY19yYXNfaWYtPmJsb2NrKSkgewotCQlyID0gYW1kZ3B1X2lycV9nZXQoYWRldiwg
JmFkZXYtPmdtYy5lY2NfaXJxLCAwKTsKLQkJaWYgKHIpCi0JCQlnb3RvIGxhdGVfZmluaTsKLQl9
IGVsc2UgewotCQlyID0gMDsKLQkJZ290byBmcmVlOwotCX0KLQotCXJldHVybiAwOwotCi1sYXRl
X2Zpbmk6Ci0JYW1kZ3B1X3Jhc19sYXRlX2ZpbmkoYWRldiwgYWRldi0+Z21jLnVtY19yYXNfaWYs
IGloX2luZm8pOwotZnJlZToKLQlrZnJlZShhZGV2LT5nbWMudW1jX3Jhc19pZik7Ci0JYWRldi0+
Z21jLnVtY19yYXNfaWYgPSBOVUxMOwotCXJldHVybiByOwotfQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2dtYy5oCmluZGV4IDMzMWNlNTBhM2E5ZS4uYjZlMWQ5OGVmMDFlIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5oCkBAIC0yMzAsNyArMjMwLDUgQEAg
dm9pZCBhbWRncHVfZ21jX2FncF9sb2NhdGlvbihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwK
IAkJCSAgICAgc3RydWN0IGFtZGdwdV9nbWMgKm1jKTsKIGJvb2wgYW1kZ3B1X2dtY19maWx0ZXJf
ZmF1bHRzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBhZGRyLAogCQkJICAg
ICAgdWludDE2X3QgcGFzaWQsIHVpbnQ2NF90IHRpbWVzdGFtcCk7Ci1pbnQgYW1kZ3B1X2dtY19y
YXNfbGF0ZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAotCQkJICAgICB2b2lkICpp
aF9pbmZvKTsKIAogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfdW1jLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmMK
bmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5jOGRlMTI3MDk3YWIKLS0t
IC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmMK
QEAgLTAsMCArMSw3MyBAQAorLyoKKyAqIENvcHlyaWdodCAyMDE5IEFkdmFuY2VkIE1pY3JvIERl
dmljZXMsIEluYy4KKyAqCisgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9m
IGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQorICogY29weSBvZiB0aGlzIHNvZnR3
YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwK
KyAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGlu
ZyB3aXRob3V0IGxpbWl0YXRpb24KKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnks
IG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAorICogYW5kL29yIHNlbGwg
Y29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhl
CisgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxv
d2luZyBjb25kaXRpb25zOgorICoKKyAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0
aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCisgKiBhbGwgY29waWVz
IG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KKyAqCisgKiBUSEUgU09G
VFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwg
RVhQUkVTUyBPUgorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUg
V0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCisgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VM
QVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKKyAqIFRI
RSBDT1BZUklHSFQgSE9MREVSKFMpIE9SIEFVVEhPUihTKSBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJ
TSwgREFNQUdFUyBPUgorICogT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBP
RiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsCisgKiBBUklTSU5HIEZST00sIE9VVCBPRiBP
UiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IKKyAqIE9USEVS
IERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKi8KKworI2luY2x1ZGUgImFtZGdwdS5o
IgorI2luY2x1ZGUgImFtZGdwdV9yYXMuaCIKKworaW50IGFtZGdwdV91bWNfcmFzX2xhdGVfaW5p
dChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdm9pZCAqcmFzX2loX2luZm8pCit7CisJaW50
IHI7CisJc3RydWN0IHJhc19paF9pZiAqaWhfaW5mbyA9IChzdHJ1Y3QgcmFzX2loX2lmICopcmFz
X2loX2luZm87CisJc3RydWN0IHJhc19mc19pZiBmc19pbmZvID0geworCQkuc3lzZnNfbmFtZSA9
ICJ1bWNfZXJyX2NvdW50IiwKKwkJLmRlYnVnZnNfbmFtZSA9ICJ1bWNfZXJyX2luamVjdCIsCisJ
fTsKKworCWlmICghaWhfaW5mbykKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAoIWFkZXYtPmdt
Yy51bWNfcmFzX2lmKSB7CisJCWFkZXYtPmdtYy51bWNfcmFzX2lmID0KKwkJCWttYWxsb2Moc2l6
ZW9mKHN0cnVjdCByYXNfY29tbW9uX2lmKSwgR0ZQX0tFUk5FTCk7CisJCWlmICghYWRldi0+Z21j
LnVtY19yYXNfaWYpCisJCQlyZXR1cm4gLUVOT01FTTsKKwkJYWRldi0+Z21jLnVtY19yYXNfaWYt
PmJsb2NrID0gQU1ER1BVX1JBU19CTE9DS19fVU1DOworCQlhZGV2LT5nbWMudW1jX3Jhc19pZi0+
dHlwZSA9IEFNREdQVV9SQVNfRVJST1JfX01VTFRJX1VOQ09SUkVDVEFCTEU7CisJCWFkZXYtPmdt
Yy51bWNfcmFzX2lmLT5zdWJfYmxvY2tfaW5kZXggPSAwOworCQlzdHJjcHkoYWRldi0+Z21jLnVt
Y19yYXNfaWYtPm5hbWUsICJ1bWMiKTsKKwl9CisJaWhfaW5mby0+aGVhZCA9IGZzX2luZm8uaGVh
ZCA9ICphZGV2LT5nbWMudW1jX3Jhc19pZjsKKworCXIgPSBhbWRncHVfcmFzX2xhdGVfaW5pdChh
ZGV2LCBhZGV2LT5nbWMudW1jX3Jhc19pZiwKKwkJCQkgJmZzX2luZm8sIGloX2luZm8pOworCWlm
IChyKQorCQlnb3RvIGZyZWU7CisKKwlpZiAoYW1kZ3B1X3Jhc19pc19zdXBwb3J0ZWQoYWRldiwg
YWRldi0+Z21jLnVtY19yYXNfaWYtPmJsb2NrKSkgeworCQlyID0gYW1kZ3B1X2lycV9nZXQoYWRl
diwgJmFkZXYtPmdtYy5lY2NfaXJxLCAwKTsKKwkJaWYgKHIpCisJCQlnb3RvIGxhdGVfZmluaTsK
Kwl9IGVsc2UgeworCQlyID0gMDsKKwkJZ290byBmcmVlOworCX0KKworCXJldHVybiAwOworCits
YXRlX2Zpbmk6CisJYW1kZ3B1X3Jhc19sYXRlX2ZpbmkoYWRldiwgYWRldi0+Z21jLnVtY19yYXNf
aWYsIGloX2luZm8pOworZnJlZToKKwlrZnJlZShhZGV2LT5nbWMudW1jX3Jhc19pZik7CisJYWRl
di0+Z21jLnVtY19yYXNfaWYgPSBOVUxMOworCXJldHVybiByOworfQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3VtYy5oIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3VtYy5oCmluZGV4IDk3NWFmYTA0ZGYwOS4uNmYyMmM5NzA0NTU1IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3VtYy5oCkBAIC01NSw2ICs1NSw3IEBA
CiAKIHN0cnVjdCBhbWRncHVfdW1jX2Z1bmNzIHsKIAl2b2lkICgqcmFzX2luaXQpKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2KTsKKwlpbnQgKCpyYXNfbGF0ZV9pbml0KShzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiwgdm9pZCAqcmFzX2loX2luZm8pOwogCXZvaWQgKCpxdWVyeV9yYXNfZXJy
b3JfY291bnQpKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCQkJCQl2b2lkICpyYXNfZXJy
b3Jfc3RhdHVzKTsKIAl2b2lkICgqcXVlcnlfcmFzX2Vycm9yX2FkZHJlc3MpKHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2LApAQCAtNzksNCArODAsNSBAQCBzdHJ1Y3QgYW1kZ3B1X3VtYyB7CiAJ
Y29uc3Qgc3RydWN0IGFtZGdwdV91bWNfZnVuY3MgKmZ1bmNzOwogfTsKIAoraW50IGFtZGdwdV91
bWNfcmFzX2xhdGVfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdm9pZCAqcmFzX2lo
X2luZm8pOwogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
bWNfdjlfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYwppbmRleCBi
ZWI2Yzg0YWI5ZTIuLjNkYjQwMzQyYjZjMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvZ21jX3Y5XzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNf
djlfMC5jCkBAIC03OTMsOSArNzkzLDExIEBAIHN0YXRpYyBpbnQgZ21jX3Y5XzBfZWNjX2xhdGVf
aW5pdCh2b2lkICpoYW5kbGUpCiAJCS5jYiA9IGdtY192OV8wX3Byb2Nlc3NfcmFzX2RhdGFfY2Is
CiAJfTsKIAotCXIgPSBhbWRncHVfZ21jX3Jhc19sYXRlX2luaXQoYWRldiwgJnVtY19paF9pbmZv
KTsKLQlpZiAocikKLQkJcmV0dXJuIHI7CisJaWYgKGFkZXYtPnVtYy5mdW5jcyAmJiBhZGV2LT51
bWMuZnVuY3MtPnJhc19sYXRlX2luaXQpIHsKKwkJciA9IGFkZXYtPnVtYy5mdW5jcy0+cmFzX2xh
dGVfaW5pdChhZGV2LCAmdW1jX2loX2luZm8pOworCQlpZiAocikKKwkJCXJldHVybiByOworCX0K
IAogCWlmIChhZGV2LT5tbWh1Yl9mdW5jcyAmJiBhZGV2LT5tbWh1Yl9mdW5jcy0+cmFzX2xhdGVf
aW5pdCkgewogCQlyID0gYWRldi0+bW1odWJfZnVuY3MtPnJhc19sYXRlX2luaXQoYWRldik7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS91bWNfdjZfMS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEuYwppbmRleCAwOWUzMTZhMjJmMWEuLjRjZGI1
YzA0Y2QxNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS91bWNfdjZfMS5jCkBAIC0yNzMsNiAr
MjczLDcgQEAgc3RhdGljIHZvaWQgdW1jX3Y2XzFfcmFzX2luaXQoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpCiAKIGNvbnN0IHN0cnVjdCBhbWRncHVfdW1jX2Z1bmNzIHVtY192Nl8xX2Z1bmNz
ID0gewogCS5yYXNfaW5pdCA9IHVtY192Nl8xX3Jhc19pbml0LAorCS5yYXNfbGF0ZV9pbml0ID0g
YW1kZ3B1X3VtY19yYXNfbGF0ZV9pbml0LAogCS5xdWVyeV9yYXNfZXJyb3JfY291bnQgPSB1bWNf
djZfMV9xdWVyeV9yYXNfZXJyb3JfY291bnQsCiAJLnF1ZXJ5X3Jhc19lcnJvcl9hZGRyZXNzID0g
dW1jX3Y2XzFfcXVlcnlfcmFzX2Vycm9yX2FkZHJlc3MsCiAJLmVuYWJsZV91bWNfaW5kZXhfbW9k
ZSA9IHVtY192Nl8xX2VuYWJsZV91bWNfaW5kZXhfbW9kZSwKLS0gCjIuMTcuMQoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxp
c3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
