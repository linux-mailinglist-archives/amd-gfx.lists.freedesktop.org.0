Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 80FE3100ADA
	for <lists+amd-gfx@lfdr.de>; Mon, 18 Nov 2019 18:52:32 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D862F89AB7;
	Mon, 18 Nov 2019 17:52:30 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F1CAF89AB7
 for <amd-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 17:52:28 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id c22so260157wmd.1
 for <amd-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 09:52:28 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=xexawOYPJzw53L8hcWQ1MQp2I54wmbHkm7yfvjnT5pY=;
 b=ngMplOodWUEti6eh7+NMfbx7RYZBiAFF2oS1HgCvb+P4Qrsbg/n+K/6zn53qEmAW8R
 14nNKTJLNB8Q5bsOt8dM7Q2q8K41V0T7wB62RFxjGrT7Vx+sBai/siGR2Z4Y0JXNp4Jb
 Q87SegR1j9xY/c/Y8se0bZDM6VjFasrxjZiuFPtUSLlFYP/5RxH0WSq23LNCHSnWTEGs
 jaCYBfKHdjE0VhTVQcPCn3hHn7tEiy91QQXSukbmmrru9Ka69YoGKU11rbX//i7+iCT7
 VkcsTu5j+aEdKfB1oad5R/XpgtfSar40KZLAP4Ceiu1RMsnYpSV0plhezRkyuoTkf8E7
 3p3Q==
X-Gm-Message-State: APjAAAWj4As+fRqOwwv6v2XpYDTpP66b86uMYRlIaO2doewfBfpDlkuB
 w/c3kPpZf3HBfft6J3YZLf/wNmQEfP5P/ZbgjNY=
X-Google-Smtp-Source: APXvYqyV7J7uLu655xssCbOgMK1evrQEaY2HPVTJGOcK1o8rM4I9Rz9Oe5mGd5RJD1E6Q2nN9xpX45hpo/z4abptqQw=
X-Received: by 2002:a1c:41c2:: with SMTP id o185mr344491wma.34.1574099547419; 
 Mon, 18 Nov 2019 09:52:27 -0800 (PST)
MIME-Version: 1.0
References: <20191118100723.19824-1-Hawking.Zhang@amd.com>
 <20191118100723.19824-3-Hawking.Zhang@amd.com>
In-Reply-To: <20191118100723.19824-3-Hawking.Zhang@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Mon, 18 Nov 2019 12:52:15 -0500
Message-ID: <CADnq5_MY6TmqV-oxs95cTjs3xiFj9fQF-fK7syzT88H1D50=hw@mail.gmail.com>
Subject: Re: [PATCH 3/3] drm/amdgpu: switch to common helper func for psp cmd
 submission
To: Hawking Zhang <Hawking.Zhang@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=xexawOYPJzw53L8hcWQ1MQp2I54wmbHkm7yfvjnT5pY=;
 b=QNlgQjhYv86TiJIpbbDSUwoJReDjSULqtIjOOzBzFY0acjP3VdTonHIp4KCtiQCf78
 dfbK7ZQiuosY2HqSqRGUqFSHQUxHC48bAPN/CG6dbpLf4EeML6hj8TyyJHeP+3j5sYA6
 iEsBzzcFMQuYID9ogMP5BvvRbEWPzwrV2hKHMXBAUyNR4ldXqpPRmeVLT5MFqvrfdgDN
 ZcHAmM//BaHdM8KeoAXSCferdsnV691PHXqsX1UTcYd51mwH+wbvoV7xizUO/6/otJKM
 KLMPXjJNfiGxnmqPLbaSwBjLVPvIXq/vFd2vs71L4eJNV1kQ1FTEtQbjI2n3gt8Xwhex
 bWig==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>,
 John Clements <John.Clements@amd.com>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCBOb3YgMTgsIDIwMTkgYXQgNTowNyBBTSBIYXdraW5nIFpoYW5nIDxIYXdraW5nLlpo
YW5nQGFtZC5jb20+IHdyb3RlOgo+Cj4gRHJvcCBhbGwgdGhlIElQIHNwZWNpZmljIGNtZF9zdWJt
aXQgY2FsbGJhY2sgZnVuY3Rpb24KPiBhbmQgdXNlIHRoZSBjb21tb24gaGVscGVyIGluc3RlYWQK
Pgo+IENoYW5nZS1JZDogSTg2NWIyNmZkMjVhNjk2ZjIxM2U4ODhiZWI5Mjc3MTdkZWM4ODQ1NDYK
PiBTaWduZWQtb2ZmLWJ5OiBIYXdraW5nIFpoYW5nIDxIYXdraW5nLlpoYW5nQGFtZC5jb20+CgpO
aWNlIGNsZWFudXAhCgpTZXJpZXMgaXM6ClJldmlld2VkLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhh
bmRlci5kZXVjaGVyQGFtZC5jb20+Cgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfcHNwLmMgfCAgMiArLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfcHNwLmggfCAgNSAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMF8w
LmMgIHwgNDkgLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvcHNwX3YxMV8wLmMgIHwgNTggLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTJfMC5jICB8IDU4IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjNfMS5jICAgfCA2MCAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gIDYgZmlsZXMgY2hhbmdlZCwgMSBpbnNlcnRpb24oKyks
IDIzMSBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfcHNwLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNw
LmMKPiBpbmRleCAyMjVhYmQ0MmI4ZGUuLjllN2NmYTVlNTdlYiAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmMKPiBAQCAtMTU2LDcgKzE1Niw3IEBAIHBzcF9jbWRf
c3VibWl0X2J1ZihzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwKPiAgICAgICAgIG1lbWNweShwc3At
PmNtZF9idWZfbWVtLCBjbWQsIHNpemVvZihzdHJ1Y3QgcHNwX2dmeF9jbWRfcmVzcCkpOwo+Cj4g
ICAgICAgICBpbmRleCA9IGF0b21pY19pbmNfcmV0dXJuKCZwc3AtPmZlbmNlX3ZhbHVlKTsKPiAt
ICAgICAgIHJldCA9IHBzcF9jbWRfc3VibWl0KHBzcCwgcHNwLT5jbWRfYnVmX21jX2FkZHIsIGZl
bmNlX21jX2FkZHIsIGluZGV4KTsKPiArICAgICAgIHJldCA9IHBzcF9yaW5nX2NtZF9zdWJtaXQo
cHNwLCBwc3AtPmNtZF9idWZfbWNfYWRkciwgZmVuY2VfbWNfYWRkciwgaW5kZXgpOwo+ICAgICAg
ICAgaWYgKHJldCkgewo+ICAgICAgICAgICAgICAgICBhdG9taWNfZGVjKCZwc3AtPmZlbmNlX3Zh
bHVlKTsKPiAgICAgICAgICAgICAgICAgbXV0ZXhfdW5sb2NrKCZwc3AtPm11dGV4KTsKPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BzcC5oIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BzcC5oCj4gaW5kZXggNDgyZTc2NzViN2RhLi40
MDU5NGYyN2RhYjEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3BzcC5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BzcC5o
Cj4gQEAgLTk0LDkgKzk0LDYgQEAgc3RydWN0IHBzcF9mdW5jcwo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBlbnVtIHBzcF9yaW5nX3R5cGUgcmluZ190eXBlKTsKPiAgICAgICAgIGludCAo
KnJpbmdfZGVzdHJveSkoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGVudW0gcHNwX3JpbmdfdHlwZSByaW5nX3R5cGUpOwo+IC0gICAgICAgaW50
ICgqY21kX3N1Ym1pdCkoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICB1aW50NjRfdCBjbWRfYnVmX21jX2FkZHIsIHVpbnQ2NF90IGZlbmNlX21jX2Fk
ZHIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgaW5kZXgpOwo+ICAgICAgICAgYm9v
bCAoKmNvbXBhcmVfc3JhbV9kYXRhKShzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGFtZGdwdV9maXJtd2FyZV9pbmZvICp1
Y29kZSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bSBBTURHUFVfVUNP
REVfSUQgdWNvZGVfdHlwZSk7Cj4gQEAgLTMwMiw4ICsyOTksNiBAQCBzdHJ1Y3QgYW1kZ3B1X3Bz
cF9mdW5jcyB7Cj4gICNkZWZpbmUgcHNwX3JpbmdfY3JlYXRlKHBzcCwgdHlwZSkgKHBzcCktPmZ1
bmNzLT5yaW5nX2NyZWF0ZSgocHNwKSwgKHR5cGUpKQo+ICAjZGVmaW5lIHBzcF9yaW5nX3N0b3Ao
cHNwLCB0eXBlKSAocHNwKS0+ZnVuY3MtPnJpbmdfc3RvcCgocHNwKSwgKHR5cGUpKQo+ICAjZGVm
aW5lIHBzcF9yaW5nX2Rlc3Ryb3kocHNwLCB0eXBlKSAoKHBzcCktPmZ1bmNzLT5yaW5nX2Rlc3Ry
b3koKHBzcCksICh0eXBlKSkpCj4gLSNkZWZpbmUgcHNwX2NtZF9zdWJtaXQocHNwLCBjbWRfbWMs
IGZlbmNlX21jLCBpbmRleCkgXAo+IC0gICAgICAgICAgICAgICAocHNwKS0+ZnVuY3MtPmNtZF9z
dWJtaXQoKHBzcCksIChjbWRfbWMpLCAoZmVuY2VfbWMpLCAoaW5kZXgpKQo+ICAjZGVmaW5lIHBz
cF9jb21wYXJlX3NyYW1fZGF0YShwc3AsIHVjb2RlLCB0eXBlKSBcCj4gICAgICAgICAgICAgICAg
IChwc3ApLT5mdW5jcy0+Y29tcGFyZV9zcmFtX2RhdGEoKHBzcCksICh1Y29kZSksICh0eXBlKSkK
PiAgI2RlZmluZSBwc3BfaW5pdF9taWNyb2NvZGUocHNwKSBcCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTBfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvcHNwX3YxMF8wLmMKPiBpbmRleCBiOGE0NjFkNDZjYjUuLmU3ZDU2YzI1YjBmOCAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjEwXzAuYwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTBfMC5jCj4gQEAgLTIyNyw1NCArMjI3
LDYgQEAgc3RhdGljIGludCBwc3BfdjEwXzBfcmluZ19kZXN0cm95KHN0cnVjdCBwc3BfY29udGV4
dCAqcHNwLAo+ICAgICAgICAgcmV0dXJuIHJldDsKPiAgfQo+Cj4gLXN0YXRpYyBpbnQgcHNwX3Yx
MF8wX2NtZF9zdWJtaXQoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB1aW50NjRfdCBjbWRfYnVmX21jX2FkZHIsIHVpbnQ2NF90IGZlbmNl
X21jX2FkZHIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgaW5kZXgpCj4g
LXsKPiAtICAgICAgIHVuc2lnbmVkIGludCBwc3Bfd3JpdGVfcHRyX3JlZyA9IDA7Cj4gLSAgICAg
ICBzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSAqIHdyaXRlX2ZyYW1lID0gcHNwLT5rbV9yaW5nLnJp
bmdfbWVtOwo+IC0gICAgICAgc3RydWN0IHBzcF9yaW5nICpyaW5nID0gJnBzcC0+a21fcmluZzsK
PiAtICAgICAgIHN0cnVjdCBwc3BfZ2Z4X3JiX2ZyYW1lICpyaW5nX2J1ZmZlcl9zdGFydCA9IHJp
bmctPnJpbmdfbWVtOwo+IC0gICAgICAgc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUgKnJpbmdfYnVm
ZmVyX2VuZCA9IHJpbmdfYnVmZmVyX3N0YXJ0ICsKPiAtICAgICAgICAgICAgICAgcmluZy0+cmlu
Z19zaXplIC8gc2l6ZW9mKHN0cnVjdCBwc3BfZ2Z4X3JiX2ZyYW1lKSAtIDE7Cj4gLSAgICAgICBz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHBzcC0+YWRldjsKPiAtICAgICAgIHVpbnQzMl90
IHJpbmdfc2l6ZV9kdyA9IHJpbmctPnJpbmdfc2l6ZSAvIDQ7Cj4gLSAgICAgICB1aW50MzJfdCBy
Yl9mcmFtZV9zaXplX2R3ID0gc2l6ZW9mKHN0cnVjdCBwc3BfZ2Z4X3JiX2ZyYW1lKSAvIDQ7Cj4g
LQo+IC0gICAgICAgLyogS00gKEdQQ09NKSBwcmVwYXJlIHdyaXRlIHBvaW50ZXIgKi8KPiAtICAg
ICAgIHBzcF93cml0ZV9wdHJfcmVnID0gUlJFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0My
UE1TR182Nyk7Cj4gLQo+IC0gICAgICAgLyogVXBkYXRlIEtNIFJCIGZyYW1lIHBvaW50ZXIgdG8g
bmV3IGZyYW1lICovCj4gLSAgICAgICBpZiAoKHBzcF93cml0ZV9wdHJfcmVnICUgcmluZ19zaXpl
X2R3KSA9PSAwKQo+IC0gICAgICAgICAgICAgICB3cml0ZV9mcmFtZSA9IHJpbmdfYnVmZmVyX3N0
YXJ0Owo+IC0gICAgICAgZWxzZQo+IC0gICAgICAgICAgICAgICB3cml0ZV9mcmFtZSA9IHJpbmdf
YnVmZmVyX3N0YXJ0ICsgKHBzcF93cml0ZV9wdHJfcmVnIC8gcmJfZnJhbWVfc2l6ZV9kdyk7Cj4g
LSAgICAgICAvKiBDaGVjayBpbnZhbGlkIHdyaXRlX2ZyYW1lIHB0ciBhZGRyZXNzICovCj4gLSAg
ICAgICBpZiAoKHdyaXRlX2ZyYW1lIDwgcmluZ19idWZmZXJfc3RhcnQpIHx8IChyaW5nX2J1ZmZl
cl9lbmQgPCB3cml0ZV9mcmFtZSkpIHsKPiAtICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJyaW5n
X2J1ZmZlcl9zdGFydCA9ICVwOyByaW5nX2J1ZmZlcl9lbmQgPSAlcDsgd3JpdGVfZnJhbWUgPSAl
cFxuIiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgIHJpbmdfYnVmZmVyX3N0YXJ0LCByaW5n
X2J1ZmZlcl9lbmQsIHdyaXRlX2ZyYW1lKTsKPiAtICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJ3
cml0ZV9mcmFtZSBpcyBwb2ludGluZyB0byBhZGRyZXNzIG91dCBvZiBib3VuZHNcbiIpOwo+IC0g
ICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPiAtCj4gLSAgICAgICAv
KiBJbml0aWFsaXplIEtNIFJCIGZyYW1lICovCj4gLSAgICAgICBtZW1zZXQod3JpdGVfZnJhbWUs
IDAsIHNpemVvZihzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSkpOwo+IC0KPiAtICAgICAgIC8qIFVw
ZGF0ZSBLTSBSQiBmcmFtZSAqLwo+IC0gICAgICAgd3JpdGVfZnJhbWUtPmNtZF9idWZfYWRkcl9o
aSA9IHVwcGVyXzMyX2JpdHMoY21kX2J1Zl9tY19hZGRyKTsKPiAtICAgICAgIHdyaXRlX2ZyYW1l
LT5jbWRfYnVmX2FkZHJfbG8gPSBsb3dlcl8zMl9iaXRzKGNtZF9idWZfbWNfYWRkcik7Cj4gLSAg
ICAgICB3cml0ZV9mcmFtZS0+ZmVuY2VfYWRkcl9oaSA9IHVwcGVyXzMyX2JpdHMoZmVuY2VfbWNf
YWRkcik7Cj4gLSAgICAgICB3cml0ZV9mcmFtZS0+ZmVuY2VfYWRkcl9sbyA9IGxvd2VyXzMyX2Jp
dHMoZmVuY2VfbWNfYWRkcik7Cj4gLSAgICAgICB3cml0ZV9mcmFtZS0+ZmVuY2VfdmFsdWUgPSBp
bmRleDsKPiAtICAgICAgIGFtZGdwdV9hc2ljX2ZsdXNoX2hkcChhZGV2LCBOVUxMKTsKPiAtCj4g
LSAgICAgICAvKiBVcGRhdGUgdGhlIHdyaXRlIFBvaW50ZXIgaW4gRFdPUkRzICovCj4gLSAgICAg
ICBwc3Bfd3JpdGVfcHRyX3JlZyA9IChwc3Bfd3JpdGVfcHRyX3JlZyArIHJiX2ZyYW1lX3NpemVf
ZHcpICUgcmluZ19zaXplX2R3Owo+IC0gICAgICAgV1JFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBf
U01OX0MyUE1TR182NywgcHNwX3dyaXRlX3B0cl9yZWcpOwo+IC0KPiAtICAgICAgIHJldHVybiAw
Owo+IC19Cj4gLQo+ICBzdGF0aWMgaW50Cj4gIHBzcF92MTBfMF9zcmFtX21hcChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwKPiAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50ICpzcmFt
X29mZnNldCwgdW5zaWduZWQgaW50ICpzcmFtX2FkZHJfcmVnX29mZnNldCwKPiBAQCAtNDI0LDcg
KzM3Niw2IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcHNwX2Z1bmNzIHBzcF92MTBfMF9mdW5jcyA9
IHsKPiAgICAgICAgIC5yaW5nX2NyZWF0ZSA9IHBzcF92MTBfMF9yaW5nX2NyZWF0ZSwKPiAgICAg
ICAgIC5yaW5nX3N0b3AgPSBwc3BfdjEwXzBfcmluZ19zdG9wLAo+ICAgICAgICAgLnJpbmdfZGVz
dHJveSA9IHBzcF92MTBfMF9yaW5nX2Rlc3Ryb3ksCj4gLSAgICAgICAuY21kX3N1Ym1pdCA9IHBz
cF92MTBfMF9jbWRfc3VibWl0LAo+ICAgICAgICAgLmNvbXBhcmVfc3JhbV9kYXRhID0gcHNwX3Yx
MF8wX2NvbXBhcmVfc3JhbV9kYXRhLAo+ICAgICAgICAgLm1vZGUxX3Jlc2V0ID0gcHNwX3YxMF8w
X21vZGUxX3Jlc2V0LAo+ICAgICAgICAgLnJpbmdfZ2V0X3dwdHIgPSBwc3BfdjEwXzBfcmluZ19n
ZXRfd3B0ciwKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3Yx
MV8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjExXzAuYwo+IGluZGV4IDc5
ZmEyYzY1NTg1Ny4uMGRjZjZkNDI3N2MyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L3BzcF92MTFfMC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
cHNwX3YxMV8wLmMKPiBAQCAtNTE3LDYzICs1MTcsNiBAQCBzdGF0aWMgaW50IHBzcF92MTFfMF9y
aW5nX2Rlc3Ryb3koc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCj4gICAgICAgICByZXR1cm4gcmV0
Owo+ICB9Cj4KPiAtc3RhdGljIGludCBwc3BfdjExXzBfY21kX3N1Ym1pdChzdHJ1Y3QgcHNwX2Nv
bnRleHQgKnBzcCwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3QgY21k
X2J1Zl9tY19hZGRyLCB1aW50NjRfdCBmZW5jZV9tY19hZGRyLAo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBpbnQgaW5kZXgpCj4gLXsKPiAtICAgICAgIHVuc2lnbmVkIGludCBwc3Bf
d3JpdGVfcHRyX3JlZyA9IDA7Cj4gLSAgICAgICBzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSAqd3Jp
dGVfZnJhbWUgPSBwc3AtPmttX3JpbmcucmluZ19tZW07Cj4gLSAgICAgICBzdHJ1Y3QgcHNwX3Jp
bmcgKnJpbmcgPSAmcHNwLT5rbV9yaW5nOwo+IC0gICAgICAgc3RydWN0IHBzcF9nZnhfcmJfZnJh
bWUgKnJpbmdfYnVmZmVyX3N0YXJ0ID0gcmluZy0+cmluZ19tZW07Cj4gLSAgICAgICBzdHJ1Y3Qg
cHNwX2dmeF9yYl9mcmFtZSAqcmluZ19idWZmZXJfZW5kID0gcmluZ19idWZmZXJfc3RhcnQgKwo+
IC0gICAgICAgICAgICAgICByaW5nLT5yaW5nX3NpemUgLyBzaXplb2Yoc3RydWN0IHBzcF9nZnhf
cmJfZnJhbWUpIC0gMTsKPiAtICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gcHNw
LT5hZGV2Owo+IC0gICAgICAgdWludDMyX3QgcmluZ19zaXplX2R3ID0gcmluZy0+cmluZ19zaXpl
IC8gNDsKPiAtICAgICAgIHVpbnQzMl90IHJiX2ZyYW1lX3NpemVfZHcgPSBzaXplb2Yoc3RydWN0
IHBzcF9nZnhfcmJfZnJhbWUpIC8gNDsKPiAtCj4gLSAgICAgICAvKiBLTSAoR1BDT00pIHByZXBh
cmUgd3JpdGUgcG9pbnRlciAqLwo+IC0gICAgICAgaWYgKHBzcF92MTFfMF9zdXBwb3J0X3Ztcl9y
aW5nKHBzcCkpCj4gLSAgICAgICAgICAgICAgIHBzcF93cml0ZV9wdHJfcmVnID0gUlJFRzMyX1NP
QzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18xMDIpOwo+IC0gICAgICAgZWxzZQo+IC0gICAg
ICAgICAgICAgICBwc3Bfd3JpdGVfcHRyX3JlZyA9IFJSRUczMl9TT0MxNShNUDAsIDAsIG1tTVAw
X1NNTl9DMlBNU0dfNjcpOwo+IC0KPiAtICAgICAgIC8qIFVwZGF0ZSBLTSBSQiBmcmFtZSBwb2lu
dGVyIHRvIG5ldyBmcmFtZSAqLwo+IC0gICAgICAgLyogd3JpdGVfZnJhbWUgcHRyIGluY3JlbWVu
dHMgYnkgc2l6ZSBvZiByYl9mcmFtZSBpbiBieXRlcyAqLwo+IC0gICAgICAgLyogcHNwX3dyaXRl
X3B0cl9yZWcgaW5jcmVtZW50cyBieSBzaXplIG9mIHJiX2ZyYW1lIGluIERXT1JEcyAqLwo+IC0g
ICAgICAgaWYgKChwc3Bfd3JpdGVfcHRyX3JlZyAlIHJpbmdfc2l6ZV9kdykgPT0gMCkKPiAtICAg
ICAgICAgICAgICAgd3JpdGVfZnJhbWUgPSByaW5nX2J1ZmZlcl9zdGFydDsKPiAtICAgICAgIGVs
c2UKPiAtICAgICAgICAgICAgICAgd3JpdGVfZnJhbWUgPSByaW5nX2J1ZmZlcl9zdGFydCArIChw
c3Bfd3JpdGVfcHRyX3JlZyAvIHJiX2ZyYW1lX3NpemVfZHcpOwo+IC0gICAgICAgLyogQ2hlY2sg
aW52YWxpZCB3cml0ZV9mcmFtZSBwdHIgYWRkcmVzcyAqLwo+IC0gICAgICAgaWYgKCh3cml0ZV9m
cmFtZSA8IHJpbmdfYnVmZmVyX3N0YXJ0KSB8fCAocmluZ19idWZmZXJfZW5kIDwgd3JpdGVfZnJh
bWUpKSB7Cj4gLSAgICAgICAgICAgICAgIERSTV9FUlJPUigicmluZ19idWZmZXJfc3RhcnQgPSAl
cDsgcmluZ19idWZmZXJfZW5kID0gJXA7IHdyaXRlX2ZyYW1lID0gJXBcbiIsCj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICByaW5nX2J1ZmZlcl9zdGFydCwgcmluZ19idWZmZXJfZW5kLCB3cml0
ZV9mcmFtZSk7Cj4gLSAgICAgICAgICAgICAgIERSTV9FUlJPUigid3JpdGVfZnJhbWUgaXMgcG9p
bnRpbmcgdG8gYWRkcmVzcyBvdXQgb2YgYm91bmRzXG4iKTsKPiAtICAgICAgICAgICAgICAgcmV0
dXJuIC1FSU5WQUw7Cj4gLSAgICAgICB9Cj4gLQo+IC0gICAgICAgLyogSW5pdGlhbGl6ZSBLTSBS
QiBmcmFtZSAqLwo+IC0gICAgICAgbWVtc2V0KHdyaXRlX2ZyYW1lLCAwLCBzaXplb2Yoc3RydWN0
IHBzcF9nZnhfcmJfZnJhbWUpKTsKPiAtCj4gLSAgICAgICAvKiBVcGRhdGUgS00gUkIgZnJhbWUg
Ki8KPiAtICAgICAgIHdyaXRlX2ZyYW1lLT5jbWRfYnVmX2FkZHJfaGkgPSB1cHBlcl8zMl9iaXRz
KGNtZF9idWZfbWNfYWRkcik7Cj4gLSAgICAgICB3cml0ZV9mcmFtZS0+Y21kX2J1Zl9hZGRyX2xv
ID0gbG93ZXJfMzJfYml0cyhjbWRfYnVmX21jX2FkZHIpOwo+IC0gICAgICAgd3JpdGVfZnJhbWUt
PmZlbmNlX2FkZHJfaGkgPSB1cHBlcl8zMl9iaXRzKGZlbmNlX21jX2FkZHIpOwo+IC0gICAgICAg
d3JpdGVfZnJhbWUtPmZlbmNlX2FkZHJfbG8gPSBsb3dlcl8zMl9iaXRzKGZlbmNlX21jX2FkZHIp
Owo+IC0gICAgICAgd3JpdGVfZnJhbWUtPmZlbmNlX3ZhbHVlID0gaW5kZXg7Cj4gLSAgICAgICBh
bWRncHVfYXNpY19mbHVzaF9oZHAoYWRldiwgTlVMTCk7Cj4gLQo+IC0gICAgICAgLyogVXBkYXRl
IHRoZSB3cml0ZSBQb2ludGVyIGluIERXT1JEcyAqLwo+IC0gICAgICAgcHNwX3dyaXRlX3B0cl9y
ZWcgPSAocHNwX3dyaXRlX3B0cl9yZWcgKyByYl9mcmFtZV9zaXplX2R3KSAlIHJpbmdfc2l6ZV9k
dzsKPiAtICAgICAgIGlmIChwc3BfdjExXzBfc3VwcG9ydF92bXJfcmluZyhwc3ApKSB7Cj4gLSAg
ICAgICAgICAgICAgIFdSRUczMl9TT0MxNShNUDAsIDAsIG1tTVAwX1NNTl9DMlBNU0dfMTAyLCBw
c3Bfd3JpdGVfcHRyX3JlZyk7Cj4gLSAgICAgICAgICAgICAgIFdSRUczMl9TT0MxNShNUDAsIDAs
IG1tTVAwX1NNTl9DMlBNU0dfMTAxLCBHRlhfQ1RSTF9DTURfSURfQ09OU1VNRV9DTUQpOwo+IC0g
ICAgICAgfSBlbHNlCj4gLSAgICAgICAgICAgICAgIFdSRUczMl9TT0MxNShNUDAsIDAsIG1tTVAw
X1NNTl9DMlBNU0dfNjcsIHBzcF93cml0ZV9wdHJfcmVnKTsKPiAtCj4gLSAgICAgICByZXR1cm4g
MDsKPiAtfQo+IC0KPiAgc3RhdGljIGludAo+ICBwc3BfdjExXzBfc3JhbV9tYXAoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50ICpzcmFt
X29mZnNldCwgdW5zaWduZWQgaW50ICpzcmFtX2FkZHJfcmVnX29mZnNldCwKPiBAQCAtMTA5OSw3
ICsxMDQyLDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwc3BfZnVuY3MgcHNwX3YxMV8wX2Z1bmNz
ID0gewo+ICAgICAgICAgLnJpbmdfY3JlYXRlID0gcHNwX3YxMV8wX3JpbmdfY3JlYXRlLAo+ICAg
ICAgICAgLnJpbmdfc3RvcCA9IHBzcF92MTFfMF9yaW5nX3N0b3AsCj4gICAgICAgICAucmluZ19k
ZXN0cm95ID0gcHNwX3YxMV8wX3JpbmdfZGVzdHJveSwKPiAtICAgICAgIC5jbWRfc3VibWl0ID0g
cHNwX3YxMV8wX2NtZF9zdWJtaXQsCj4gICAgICAgICAuY29tcGFyZV9zcmFtX2RhdGEgPSBwc3Bf
djExXzBfY29tcGFyZV9zcmFtX2RhdGEsCj4gICAgICAgICAubW9kZTFfcmVzZXQgPSBwc3BfdjEx
XzBfbW9kZTFfcmVzZXQsCj4gICAgICAgICAueGdtaV9nZXRfdG9wb2xvZ3lfaW5mbyA9IHBzcF92
MTFfMF94Z21pX2dldF90b3BvbG9neV9pbmZvLAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9wc3BfdjEyXzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3Bz
cF92MTJfMC5jCj4gaW5kZXggNzViM2Y5ZDE1YTE4Li41OGQ4YjZkNzMyZTggMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMl8wLmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjEyXzAuYwo+IEBAIC0zMzQsNjMgKzMzNCw2IEBAIHN0
YXRpYyBpbnQgcHNwX3YxMl8wX3JpbmdfZGVzdHJveShzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwK
PiAgICAgICAgIHJldHVybiByZXQ7Cj4gIH0KPgo+IC1zdGF0aWMgaW50IHBzcF92MTJfMF9jbWRf
c3VibWl0KHN0cnVjdCBwc3BfY29udGV4dCAqcHNwLAo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1aW50NjRfdCBjbWRfYnVmX21jX2FkZHIsIHVpbnQ2NF90IGZlbmNlX21jX2FkZHIs
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBpbmRleCkKPiAtewo+IC0gICAg
ICAgdW5zaWduZWQgaW50IHBzcF93cml0ZV9wdHJfcmVnID0gMDsKPiAtICAgICAgIHN0cnVjdCBw
c3BfZ2Z4X3JiX2ZyYW1lICp3cml0ZV9mcmFtZSA9IHBzcC0+a21fcmluZy5yaW5nX21lbTsKPiAt
ICAgICAgIHN0cnVjdCBwc3BfcmluZyAqcmluZyA9ICZwc3AtPmttX3Jpbmc7Cj4gLSAgICAgICBz
dHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSAqcmluZ19idWZmZXJfc3RhcnQgPSByaW5nLT5yaW5nX21l
bTsKPiAtICAgICAgIHN0cnVjdCBwc3BfZ2Z4X3JiX2ZyYW1lICpyaW5nX2J1ZmZlcl9lbmQgPSBy
aW5nX2J1ZmZlcl9zdGFydCArCj4gLSAgICAgICAgICAgICAgIHJpbmctPnJpbmdfc2l6ZSAvIHNp
emVvZihzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSkgLSAxOwo+IC0gICAgICAgc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYgPSBwc3AtPmFkZXY7Cj4gLSAgICAgICB1aW50MzJfdCByaW5nX3NpemVf
ZHcgPSByaW5nLT5yaW5nX3NpemUgLyA0Owo+IC0gICAgICAgdWludDMyX3QgcmJfZnJhbWVfc2l6
ZV9kdyA9IHNpemVvZihzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSkgLyA0Owo+IC0KPiAtICAgICAg
IC8qIEtNIChHUENPTSkgcHJlcGFyZSB3cml0ZSBwb2ludGVyICovCj4gLSAgICAgICBpZiAocHNw
X3YxMl8wX3N1cHBvcnRfdm1yX3JpbmcocHNwKSkKPiAtICAgICAgICAgICAgICAgcHNwX3dyaXRl
X3B0cl9yZWcgPSBSUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzEwMik7Cj4g
LSAgICAgICBlbHNlCj4gLSAgICAgICAgICAgICAgIHBzcF93cml0ZV9wdHJfcmVnID0gUlJFRzMy
X1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR182Nyk7Cj4gLQo+IC0gICAgICAgLyogVXBk
YXRlIEtNIFJCIGZyYW1lIHBvaW50ZXIgdG8gbmV3IGZyYW1lICovCj4gLSAgICAgICAvKiB3cml0
ZV9mcmFtZSBwdHIgaW5jcmVtZW50cyBieSBzaXplIG9mIHJiX2ZyYW1lIGluIGJ5dGVzICovCj4g
LSAgICAgICAvKiBwc3Bfd3JpdGVfcHRyX3JlZyBpbmNyZW1lbnRzIGJ5IHNpemUgb2YgcmJfZnJh
bWUgaW4gRFdPUkRzICovCj4gLSAgICAgICBpZiAoKHBzcF93cml0ZV9wdHJfcmVnICUgcmluZ19z
aXplX2R3KSA9PSAwKQo+IC0gICAgICAgICAgICAgICB3cml0ZV9mcmFtZSA9IHJpbmdfYnVmZmVy
X3N0YXJ0Owo+IC0gICAgICAgZWxzZQo+IC0gICAgICAgICAgICAgICB3cml0ZV9mcmFtZSA9IHJp
bmdfYnVmZmVyX3N0YXJ0ICsgKHBzcF93cml0ZV9wdHJfcmVnIC8gcmJfZnJhbWVfc2l6ZV9kdyk7
Cj4gLSAgICAgICAvKiBDaGVjayBpbnZhbGlkIHdyaXRlX2ZyYW1lIHB0ciBhZGRyZXNzICovCj4g
LSAgICAgICBpZiAoKHdyaXRlX2ZyYW1lIDwgcmluZ19idWZmZXJfc3RhcnQpIHx8IChyaW5nX2J1
ZmZlcl9lbmQgPCB3cml0ZV9mcmFtZSkpIHsKPiAtICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJy
aW5nX2J1ZmZlcl9zdGFydCA9ICVwOyByaW5nX2J1ZmZlcl9lbmQgPSAlcDsgd3JpdGVfZnJhbWUg
PSAlcFxuIiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgIHJpbmdfYnVmZmVyX3N0YXJ0LCBy
aW5nX2J1ZmZlcl9lbmQsIHdyaXRlX2ZyYW1lKTsKPiAtICAgICAgICAgICAgICAgRFJNX0VSUk9S
KCJ3cml0ZV9mcmFtZSBpcyBwb2ludGluZyB0byBhZGRyZXNzIG91dCBvZiBib3VuZHNcbiIpOwo+
IC0gICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPiAtCj4gLSAgICAg
ICAvKiBJbml0aWFsaXplIEtNIFJCIGZyYW1lICovCj4gLSAgICAgICBtZW1zZXQod3JpdGVfZnJh
bWUsIDAsIHNpemVvZihzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSkpOwo+IC0KPiAtICAgICAgIC8q
IFVwZGF0ZSBLTSBSQiBmcmFtZSAqLwo+IC0gICAgICAgd3JpdGVfZnJhbWUtPmNtZF9idWZfYWRk
cl9oaSA9IHVwcGVyXzMyX2JpdHMoY21kX2J1Zl9tY19hZGRyKTsKPiAtICAgICAgIHdyaXRlX2Zy
YW1lLT5jbWRfYnVmX2FkZHJfbG8gPSBsb3dlcl8zMl9iaXRzKGNtZF9idWZfbWNfYWRkcik7Cj4g
LSAgICAgICB3cml0ZV9mcmFtZS0+ZmVuY2VfYWRkcl9oaSA9IHVwcGVyXzMyX2JpdHMoZmVuY2Vf
bWNfYWRkcik7Cj4gLSAgICAgICB3cml0ZV9mcmFtZS0+ZmVuY2VfYWRkcl9sbyA9IGxvd2VyXzMy
X2JpdHMoZmVuY2VfbWNfYWRkcik7Cj4gLSAgICAgICB3cml0ZV9mcmFtZS0+ZmVuY2VfdmFsdWUg
PSBpbmRleDsKPiAtICAgICAgIGFtZGdwdV9hc2ljX2ZsdXNoX2hkcChhZGV2LCBOVUxMKTsKPiAt
Cj4gLSAgICAgICAvKiBVcGRhdGUgdGhlIHdyaXRlIFBvaW50ZXIgaW4gRFdPUkRzICovCj4gLSAg
ICAgICBwc3Bfd3JpdGVfcHRyX3JlZyA9IChwc3Bfd3JpdGVfcHRyX3JlZyArIHJiX2ZyYW1lX3Np
emVfZHcpICUgcmluZ19zaXplX2R3Owo+IC0gICAgICAgaWYgKHBzcF92MTJfMF9zdXBwb3J0X3Zt
cl9yaW5nKHBzcCkpIHsKPiAtICAgICAgICAgICAgICAgV1JFRzMyX1NPQzE1KE1QMCwgMCwgbW1N
UDBfU01OX0MyUE1TR18xMDIsIHBzcF93cml0ZV9wdHJfcmVnKTsKPiAtICAgICAgICAgICAgICAg
V1JFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18xMDEsIEdGWF9DVFJMX0NNRF9J
RF9DT05TVU1FX0NNRCk7Cj4gLSAgICAgICB9IGVsc2UKPiAtICAgICAgICAgICAgICAgV1JFRzMy
X1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR182NywgcHNwX3dyaXRlX3B0cl9yZWcpOwo+
IC0KPiAtICAgICAgIHJldHVybiAwOwo+IC19Cj4gLQo+ICBzdGF0aWMgaW50Cj4gIHBzcF92MTJf
MF9zcmFtX21hcChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBpbnQgKnNyYW1fb2Zmc2V0LCB1bnNpZ25lZCBpbnQgKnNyYW1fYWRkcl9yZWdf
b2Zmc2V0LAo+IEBAIC01NzksNyArNTIyLDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwc3BfZnVu
Y3MgcHNwX3YxMl8wX2Z1bmNzID0gewo+ICAgICAgICAgLnJpbmdfY3JlYXRlID0gcHNwX3YxMl8w
X3JpbmdfY3JlYXRlLAo+ICAgICAgICAgLnJpbmdfc3RvcCA9IHBzcF92MTJfMF9yaW5nX3N0b3As
Cj4gICAgICAgICAucmluZ19kZXN0cm95ID0gcHNwX3YxMl8wX3JpbmdfZGVzdHJveSwKPiAtICAg
ICAgIC5jbWRfc3VibWl0ID0gcHNwX3YxMl8wX2NtZF9zdWJtaXQsCj4gICAgICAgICAuY29tcGFy
ZV9zcmFtX2RhdGEgPSBwc3BfdjEyXzBfY29tcGFyZV9zcmFtX2RhdGEsCj4gICAgICAgICAubW9k
ZTFfcmVzZXQgPSBwc3BfdjEyXzBfbW9kZTFfcmVzZXQsCj4gICAgICAgICAucmluZ19nZXRfd3B0
ciA9IHBzcF92MTJfMF9yaW5nX2dldF93cHRyLAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9wc3BfdjNfMS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNw
X3YzXzEuYwo+IGluZGV4IDFkZTg2ZTU1MGE5MC4uODM5ODA2Y2YxYzZhIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92M18xLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9wc3BfdjNfMS5jCj4gQEAgLTQwOCw2NSArNDA4LDYgQEAgc3RhdGlj
IGludCBwc3BfdjNfMV9yaW5nX2Rlc3Ryb3koc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCj4gICAg
ICAgICByZXR1cm4gcmV0Owo+ICB9Cj4KPiAtc3RhdGljIGludCBwc3BfdjNfMV9jbWRfc3VibWl0
KHN0cnVjdCBwc3BfY29udGV4dCAqcHNwLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1aW50NjRfdCBjbWRfYnVmX21jX2FkZHIsIHVpbnQ2NF90IGZlbmNlX21jX2FkZHIsCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBpbmRleCkKPiAtewo+IC0gICAgICAgdW5z
aWduZWQgaW50IHBzcF93cml0ZV9wdHJfcmVnID0gMDsKPiAtICAgICAgIHN0cnVjdCBwc3BfZ2Z4
X3JiX2ZyYW1lICogd3JpdGVfZnJhbWUgPSBwc3AtPmttX3JpbmcucmluZ19tZW07Cj4gLSAgICAg
ICBzdHJ1Y3QgcHNwX3JpbmcgKnJpbmcgPSAmcHNwLT5rbV9yaW5nOwo+IC0gICAgICAgc3RydWN0
IHBzcF9nZnhfcmJfZnJhbWUgKnJpbmdfYnVmZmVyX3N0YXJ0ID0gcmluZy0+cmluZ19tZW07Cj4g
LSAgICAgICBzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSAqcmluZ19idWZmZXJfZW5kID0gcmluZ19i
dWZmZXJfc3RhcnQgKwo+IC0gICAgICAgICAgICAgICByaW5nLT5yaW5nX3NpemUgLyBzaXplb2Yo
c3RydWN0IHBzcF9nZnhfcmJfZnJhbWUpIC0gMTsKPiAtICAgICAgIHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2ID0gcHNwLT5hZGV2Owo+IC0gICAgICAgdWludDMyX3QgcmluZ19zaXplX2R3ID0g
cmluZy0+cmluZ19zaXplIC8gNDsKPiAtICAgICAgIHVpbnQzMl90IHJiX2ZyYW1lX3NpemVfZHcg
PSBzaXplb2Yoc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUpIC8gNDsKPiAtCj4gLSAgICAgICAvKiBL
TSAoR1BDT00pIHByZXBhcmUgd3JpdGUgcG9pbnRlciAqLwo+IC0gICAgICAgaWYgKHBzcF92M18x
X3N1cHBvcnRfdm1yX3JpbmcocHNwKSkKPiAtICAgICAgICAgICAgICAgcHNwX3dyaXRlX3B0cl9y
ZWcgPSBSUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzEwMik7Cj4gLSAgICAg
ICBlbHNlCj4gLSAgICAgICAgICAgICAgIHBzcF93cml0ZV9wdHJfcmVnID0gUlJFRzMyX1NPQzE1
KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR182Nyk7Cj4gLQo+IC0gICAgICAgLyogVXBkYXRlIEtN
IFJCIGZyYW1lIHBvaW50ZXIgdG8gbmV3IGZyYW1lICovCj4gLSAgICAgICAvKiB3cml0ZV9mcmFt
ZSBwdHIgaW5jcmVtZW50cyBieSBzaXplIG9mIHJiX2ZyYW1lIGluIGJ5dGVzICovCj4gLSAgICAg
ICAvKiBwc3Bfd3JpdGVfcHRyX3JlZyBpbmNyZW1lbnRzIGJ5IHNpemUgb2YgcmJfZnJhbWUgaW4g
RFdPUkRzICovCj4gLSAgICAgICBpZiAoKHBzcF93cml0ZV9wdHJfcmVnICUgcmluZ19zaXplX2R3
KSA9PSAwKQo+IC0gICAgICAgICAgICAgICB3cml0ZV9mcmFtZSA9IHJpbmdfYnVmZmVyX3N0YXJ0
Owo+IC0gICAgICAgZWxzZQo+IC0gICAgICAgICAgICAgICB3cml0ZV9mcmFtZSA9IHJpbmdfYnVm
ZmVyX3N0YXJ0ICsgKHBzcF93cml0ZV9wdHJfcmVnIC8gcmJfZnJhbWVfc2l6ZV9kdyk7Cj4gLSAg
ICAgICAvKiBDaGVjayBpbnZhbGlkIHdyaXRlX2ZyYW1lIHB0ciBhZGRyZXNzICovCj4gLSAgICAg
ICBpZiAoKHdyaXRlX2ZyYW1lIDwgcmluZ19idWZmZXJfc3RhcnQpIHx8IChyaW5nX2J1ZmZlcl9l
bmQgPCB3cml0ZV9mcmFtZSkpIHsKPiAtICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJyaW5nX2J1
ZmZlcl9zdGFydCA9ICVwOyByaW5nX2J1ZmZlcl9lbmQgPSAlcDsgd3JpdGVfZnJhbWUgPSAlcFxu
IiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgIHJpbmdfYnVmZmVyX3N0YXJ0LCByaW5nX2J1
ZmZlcl9lbmQsIHdyaXRlX2ZyYW1lKTsKPiAtICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJ3cml0
ZV9mcmFtZSBpcyBwb2ludGluZyB0byBhZGRyZXNzIG91dCBvZiBib3VuZHNcbiIpOwo+IC0gICAg
ICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPiAtCj4gLSAgICAgICAvKiBJ
bml0aWFsaXplIEtNIFJCIGZyYW1lICovCj4gLSAgICAgICBtZW1zZXQod3JpdGVfZnJhbWUsIDAs
IHNpemVvZihzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSkpOwo+IC0KPiAtICAgICAgIC8qIFVwZGF0
ZSBLTSBSQiBmcmFtZSAqLwo+IC0gICAgICAgd3JpdGVfZnJhbWUtPmNtZF9idWZfYWRkcl9oaSA9
IHVwcGVyXzMyX2JpdHMoY21kX2J1Zl9tY19hZGRyKTsKPiAtICAgICAgIHdyaXRlX2ZyYW1lLT5j
bWRfYnVmX2FkZHJfbG8gPSBsb3dlcl8zMl9iaXRzKGNtZF9idWZfbWNfYWRkcik7Cj4gLSAgICAg
ICB3cml0ZV9mcmFtZS0+ZmVuY2VfYWRkcl9oaSA9IHVwcGVyXzMyX2JpdHMoZmVuY2VfbWNfYWRk
cik7Cj4gLSAgICAgICB3cml0ZV9mcmFtZS0+ZmVuY2VfYWRkcl9sbyA9IGxvd2VyXzMyX2JpdHMo
ZmVuY2VfbWNfYWRkcik7Cj4gLSAgICAgICB3cml0ZV9mcmFtZS0+ZmVuY2VfdmFsdWUgPSBpbmRl
eDsKPiAtICAgICAgIGFtZGdwdV9hc2ljX2ZsdXNoX2hkcChhZGV2LCBOVUxMKTsKPiAtCj4gLSAg
ICAgICAvKiBVcGRhdGUgdGhlIHdyaXRlIFBvaW50ZXIgaW4gRFdPUkRzICovCj4gLSAgICAgICBw
c3Bfd3JpdGVfcHRyX3JlZyA9IChwc3Bfd3JpdGVfcHRyX3JlZyArIHJiX2ZyYW1lX3NpemVfZHcp
ICUgcmluZ19zaXplX2R3Owo+IC0gICAgICAgaWYgKHBzcF92M18xX3N1cHBvcnRfdm1yX3Jpbmco
cHNwKSkgewo+IC0gICAgICAgICAgICAgICBXUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5f
QzJQTVNHXzEwMiwgcHNwX3dyaXRlX3B0cl9yZWcpOwo+IC0gICAgICAgICAgICAgICAvKiBzZW5k
IGludGVycnVwdCB0byBQU1AgZm9yIFNSSU9WIHJpbmcgd3JpdGUgcG9pbnRlciB1cGRhdGUgKi8K
PiAtICAgICAgICAgICAgICAgV1JFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18x
MDEsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdGWF9DVFJMX0NN
RF9JRF9DT05TVU1FX0NNRCk7Cj4gLSAgICAgICB9IGVsc2UKPiAtICAgICAgICAgICAgICAgV1JF
RzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR182NywgcHNwX3dyaXRlX3B0cl9yZWcp
Owo+IC0KPiAtICAgICAgIHJldHVybiAwOwo+IC19Cj4gLQo+ICBzdGF0aWMgaW50Cj4gIHBzcF92
M18xX3NyYW1fbWFwKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgICAgICAgICAgICAg
ICAgIHVuc2lnbmVkIGludCAqc3JhbV9vZmZzZXQsIHVuc2lnbmVkIGludCAqc3JhbV9hZGRyX3Jl
Z19vZmZzZXQsCj4gQEAgLTY3Myw3ICs2MTQsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHBzcF9m
dW5jcyBwc3BfdjNfMV9mdW5jcyA9IHsKPiAgICAgICAgIC5yaW5nX2NyZWF0ZSA9IHBzcF92M18x
X3JpbmdfY3JlYXRlLAo+ICAgICAgICAgLnJpbmdfc3RvcCA9IHBzcF92M18xX3Jpbmdfc3RvcCwK
PiAgICAgICAgIC5yaW5nX2Rlc3Ryb3kgPSBwc3BfdjNfMV9yaW5nX2Rlc3Ryb3ksCj4gLSAgICAg
ICAuY21kX3N1Ym1pdCA9IHBzcF92M18xX2NtZF9zdWJtaXQsCj4gICAgICAgICAuY29tcGFyZV9z
cmFtX2RhdGEgPSBwc3BfdjNfMV9jb21wYXJlX3NyYW1fZGF0YSwKPiAgICAgICAgIC5zbXVfcmVs
b2FkX3F1aXJrID0gcHNwX3YzXzFfc211X3JlbG9hZF9xdWlyaywKPiAgICAgICAgIC5tb2RlMV9y
ZXNldCA9IHBzcF92M18xX21vZGUxX3Jlc2V0LAo+IC0tCj4gMi4xNy4xCj4KPiBfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+IGFtZC1nZnggbWFpbGluZyBs
aXN0Cj4gYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZngKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9hbWQtZ2Z4
