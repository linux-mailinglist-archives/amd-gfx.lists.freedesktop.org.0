Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 06BCB84EC2
	for <lists+amd-gfx@lfdr.de>; Wed,  7 Aug 2019 16:29:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 94DF36E70E;
	Wed,  7 Aug 2019 14:29:31 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr700089.outbound.protection.outlook.com [40.107.70.89])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DB6F4893ED
 for <amd-gfx@lists.freedesktop.org>; Wed,  7 Aug 2019 14:29:29 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Kl8/O53/1Rp4Tu4LjtILR8Ibj4Fur1a7A7HPAINYmlJRJWGsWd5JmuWXsqLtkstSN3NtGljgmEvlQGfaig6AP79Y5Q81dfLX7tAA3Xx1HBcEk0cVCZfj2EYbj66q6outCYi0PvlndetONrsw9sqAIu9m1Wpe1WATHaPjmRz+JwgLGTebhaH9JPv5k1KsS7WVLFXy4avshmhWhfYMLrYp3SjCmWEz9I1fDf12RGliNo7lo5ELH71JD4jsD1uhSkFbTFjB9lU/yYMoWdw9XnqJdkUFzAn59HThw6hs0jW0/CEgp4tzCiKGf4jF2iWz/ZRrG0mCVDQRHnCTNzqSN77+Tw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=kTenn/AWcK0tw37ZZJ/xqCQ5Wxu9rH9Qy2aMMypdtYA=;
 b=hKI9XpMaDyELaP+aXGSu0LvCKIVz2h46pQrTXqRnSGYlz34HvXlcWfTcv6N57ZqCF6VN6ZC2J0RVloPkjYXBL16RL9pYJIp46wm3OI8DpMLEmLzrInc8NbnrFtSSD2IyaVGmSKZeIq6FnbM/1mXcYhWzJga7wBBck6l7S1UVKUVJwXpWk5P0eU8/0Kz35rlx5Clfjdaxr13Pz0aAPlonlEahi2o3Xpf8SKm0rnQYvY5lFXg4dIPt8vNXx1wMgLMu0w3ClDoX8rErG8cMgV56+fUVJAOGkLl4/J5ShTODSJOK/51VF+xwAqvK/mQlRYQKvKjUEe2hYrQfwLw5IPqDOQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org
 smtp.mailfrom=amd.com;dmarc=permerror action=none
 header.from=amd.com;dkim=none (message not signed);arc=none
Received: from BN6PR12CA0031.namprd12.prod.outlook.com (2603:10b6:405:70::17)
 by DM6PR12MB2715.namprd12.prod.outlook.com (2603:10b6:5:4a::15) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2136.20; Wed, 7 Aug
 2019 14:29:26 +0000
Received: from DM3NAM03FT030.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e49::206) by BN6PR12CA0031.outlook.office365.com
 (2603:10b6:405:70::17) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2157.16 via Frontend
 Transport; Wed, 7 Aug 2019 14:29:26 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV01.amd.com (165.204.84.17) by
 DM3NAM03FT030.mail.protection.outlook.com (10.152.82.203) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2157.15 via Frontend Transport; Wed, 7 Aug 2019 14:29:25 +0000
Received: from localhost.localdomain (10.180.168.240) by SATLEXCHOV01.amd.com
 (10.181.40.71) with Microsoft SMTP Server id 14.3.389.1;
 Wed, 7 Aug 2019 09:29:25 -0500
From: David Francis <David.Francis@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH] drm/amd/display: Remove drm_dsc_dc.c
Date: Wed, 7 Aug 2019 10:29:22 -0400
Message-ID: <20190807142922.3106-1-David.Francis@amd.com>
X-Mailer: git-send-email 2.17.1
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(39860400002)(346002)(396003)(136003)(2980300002)(428003)(189003)(199004)(426003)(8936002)(70586007)(70206006)(14444005)(6916009)(47776003)(478600001)(50466002)(2351001)(8676002)(4326008)(86362001)(2616005)(476003)(126002)(486006)(36756003)(5820100001)(186003)(26005)(68736007)(336012)(2906002)(2870700001)(23676004)(53936002)(30864003)(1076003)(5660300002)(316002)(356004)(81166006)(49486002)(305945005)(50226002)(6666004)(81156014);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB2715; H:SATLEXCHOV01.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 2b1b1636-d1d4-4b65-2ea5-08d71b43a5f4
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328);
 SRVR:DM6PR12MB2715; 
X-MS-TrafficTypeDiagnostic: DM6PR12MB2715:
X-Microsoft-Antispam-PRVS: <DM6PR12MB2715C4414064DEA8AFFA872FEFD40@DM6PR12MB2715.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:6108;
X-Forefront-PRVS: 01221E3973
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: aVYTu9W/cOXbOpK/Q+kOHZbdasfYTjxC4rfnjTDbANAE3sKkmvpCyHk1JxXmlZNdQ8L1Z2XqqOb/1Yf9QywGDNO637Gu7tHcMm+XLabEiCEAh7JINh+w8Rp4HEdk7oHkCfM3yhxRc/WJ7jq0bfEUipl14STQOBukdYIPn/2YpfDrqoEsz1Wntrq9pZ27aEhajBNPTL5QiQevVR9QV5RCXjZus+d7A1RNsvIUHZGQp2SfqOLfg+7jzN6v5rUP57yg8vb4EbpSE4Jssyl+nJ/XDrJLC/FbMBmsr8eUfaINMW8PI1a/9PBneq5a26XDNJ8qy6u51ZGvpke8f5qlDw64DJ8Fcf/t0P5MLrfcATp6dDgTpn3iFqcXtbLW8NX75eQ3ATvhuFGSJQ+e0aesfdp2YV72I9JAtIY8V80WbNtxXy4=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 07 Aug 2019 14:29:25.5905 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 2b1b1636-d1d4-4b65-2ea5-08d71b43a5f4
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV01.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB2715
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=kTenn/AWcK0tw37ZZJ/xqCQ5Wxu9rH9Qy2aMMypdtYA=;
 b=UPg9kDC6RbPAlCOkfX4Gus0sx6qQ2Rskhw3OqpVbRy2OWebGAyde5p3qHZQE9qLNvf47gQn1HlfHaosUJB90TNDsvPBYI8CtZd//ifTnjHeaKcIlT8+crCHh9vrgXX7tf3e3NjB0A8iGRyGytdUhEWDecgW+J0QeWYK7lfBwQlA=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: David Francis <David.Francis@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

VGhpcyBmaWxlIHdhcyBhY2NpZGVudGFsbHkgYWRkZWQgdG8gdGhlIGRyaXZlciBkdXJpbmcKTmF2
aSBwcm9tb3Rpb24KCk5vdGhpbmcgaW5jbHVkZXMgaXQuIE5vIG1ha2VmaWxlIGF0dGVtcHRzIHRv
IGNvbXBpbGUgaXQsIGFuZAppdCB3b3VsZCBmYWlsIGNvbXBpbGF0aW9uIGlmIHRoZXkgdHJpZWQK
ClJlbW92ZSBpdAoKU2lnbmVkLW9mZi1ieTogRGF2aWQgRnJhbmNpcyA8RGF2aWQuRnJhbmNpc0Bh
bWQuY29tPgotLS0KIC4uLi9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RzYy9kcm1fZHNjX2RjLmMg
ICB8IDQ1MyAtLS0tLS0tLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA0NTMgZGVsZXRpb25z
KC0pCiBkZWxldGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2Rz
Yy9kcm1fZHNjX2RjLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkv
ZGMvZHNjL2RybV9kc2NfZGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kc2Mv
ZHJtX2RzY19kYy5jCmRlbGV0ZWQgZmlsZSBtb2RlIDEwMDY0NAppbmRleCBmZDFmYjE2NTM0Nzku
LjAwMDAwMDAwMDAwMAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZHNjL2Ry
bV9kc2NfZGMuYworKysgL2Rldi9udWxsCkBAIC0xLDQ1MyArMCwwIEBACi0vLyBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogTUlUCi0vKgotICogQ29weXJpZ2h0IMKpIDIwMTggSW50ZWwgQ29ycAot
ICoKLSAqIEF1dGhvcjoKLSAqIE1hbmFzaSBOYXZhcmUgPG1hbmFzaS5kLm5hdmFyZUBpbnRlbC5j
b20+Ci0gKi8KLQotLyogREMgdmVyc2lvbnMgb2YgbGludXggaW5jbHVkZXMgKi8KLSNpbmNsdWRl
IDxpbmNsdWRlL2RybV9kc2NfZGMuaD4KLQotI2RlZmluZSBFWFBPUlRfU1lNQk9MKHN5bWJvbCkJ
Lyogbm90aGluZyAqLwotI2RlZmluZSBCVUlMRF9CVUdfT04oY29uZCkJLyogbm90aGluZyAqLwot
I2RlZmluZSBESVZfUk9VTkRfVVAoYSwgYikJKCgoYikgKyAoYSkgLSAxKSAvIChiKSkKLSNkZWZp
bmUgRVJBTkdFCQkJLTEKLSNkZWZpbmUgRFJNX0RFQlVHX0tNUyhtc2cpCS8qIG5vdGhpbmcgKi8K
LSNkZWZpbmUgY3B1X3RvX2JlMTYoX194KSBsaXR0bGVfdG9fYmlnKF9feCkKLSNkZWZpbmUgTUFY
KHgsIHkpCQkoKHgpID4gKHkpID8gKHgpIDogKHkpKQotCi1zdGF0aWMgdW5zaWduZWQgc2hvcnQg
bGl0dGxlX3RvX2JpZyhpbnQgZGF0YSkKLXsKLQkvKiBTd2FwIGxvd2VyIGFuZCB1cHBlciBieXRl
LiBETUNVIHVzZXMgYmlnIGVuZGlhbiBmb3JtYXQuICovCi0JcmV0dXJuICgweGZmICYgKGRhdGEg
Pj4gOCkpICsgKChkYXRhICYgMHhmZikgPDwgOCk7Ci19Ci0KLS8qCi0gKiBFdmVyeXRoaW5nIGJl
bG93IHRoaXMgY29tbWVudCB3YXMgY29waWVkIGRpcmVjdGx5IGZyb20gZHJtX2RzYy5jLgotICog
T25seSB0aGUgZnVuY3Rpb25zIG5lZWRlZCBpbiBEQyBhcmUgaW5jbHVkZWQuCi0gKiBQbGVhc2Ug
a2VlcCB0aGlzIGZpbGUgc3luY2VkIHdpdGggdXBzdHJlYW0uCi0gKi8KLQotLyoqCi0gKiBET0M6
IGRzYyBoZWxwZXJzCi0gKgotICogVGhlc2UgZnVuY3Rpb25zIGNvbnRhaW4gc29tZSBjb21tb24g
bG9naWMgYW5kIGhlbHBlcnMgdG8gZGVhbCB3aXRoIFZFU0EKLSAqIERpc3BsYXkgU3RyZWFtIENv
bXByZXNzaW9uIHN0YW5kYXJkIHJlcXVpcmVkIGZvciBEU0Mgb24gRGlzcGxheSBQb3J0L2VEUCBv
cgotICogTUlQSSBkaXNwbGF5IGludGVyZmFjZXMuCi0gKi8KLQotLyoqCi0gKiBkcm1fZHNjX3Bw
c19wYXlsb2FkX3BhY2soKSAtIFBvcHVsYXRlcyB0aGUgRFNDIFBQUwotICoKLSAqIEBwcHNfcGF5
bG9hZDoKLSAqIEJpdHdpc2Ugc3RydWN0IGZvciBEU0MgUGljdHVyZSBQYXJhbWV0ZXIgU2V0LiBU
aGlzIGlzIGRlZmluZWQKLSAqIGJ5ICZzdHJ1Y3QgZHJtX2RzY19waWN0dXJlX3BhcmFtZXRlcl9z
ZXQKLSAqIEBkc2NfY2ZnOgotICogRFNDIENvbmZpZ3VyYXRpb24gZGF0YSBmaWxsZWQgYnkgZHJp
dmVyIGFzIGRlZmluZWQgYnkKLSAqICZzdHJ1Y3QgZHJtX2RzY19jb25maWcKLSAqCi0gKiBEU0Mg
c291cmNlIGRldmljZSBzZW5kcyBhIHBpY3R1cmUgcGFyYW1ldGVyIHNldCAoUFBTKSBjb250YWlu
aW5nIHRoZQotICogaW5mb3JtYXRpb24gcmVxdWlyZWQgYnkgdGhlIHNpbmsgdG8gZGVjb2RlIHRo
ZSBjb21wcmVzc2VkIGZyYW1lLiBEcml2ZXIKLSAqIHBvcHVsYXRlcyB0aGUgRFNDIFBQUyBzdHJ1
Y3QgdXNpbmcgdGhlIERTQyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgaW4KLSAqIHRoZSBvcmRl
ciBleHBlY3RlZCBieSB0aGUgRFNDIERpc3BsYXkgU2luayBkZXZpY2UuIEZvciB0aGUgRFNDLCB0
aGUgc2luawotICogZGV2aWNlIGV4cGVjdHMgdGhlIFBQUyBwYXlsb2FkIGluIGJpZyBlbmRpYW4g
Zm9ybWF0IGZvciBmaWVsZHMKLSAqIHRoYXQgc3BhbiBtb3JlIHRoYW4gMSBieXRlLgotICovCi12
b2lkIGRybV9kc2NfcHBzX3BheWxvYWRfcGFjayhzdHJ1Y3QgZHJtX2RzY19waWN0dXJlX3BhcmFt
ZXRlcl9zZXQgKnBwc19wYXlsb2FkLAotCQkJCWNvbnN0IHN0cnVjdCBkcm1fZHNjX2NvbmZpZyAq
ZHNjX2NmZykKLXsKLQlpbnQgaTsKLQotCS8qIFByb3RlY3QgYWdhaW5zdCBzb21lb25lIGFjY2lk
ZW50bHkgY2hhbmdpbmcgc3RydWN0IHNpemUgKi8KLQlCVUlMRF9CVUdfT04oc2l6ZW9mKCpwcHNf
cGF5bG9hZCkgIT0KLQkJICAgICBEUF9TRFBfUFBTX0hFQURFUl9QQVlMT0FEX0JZVEVTX01JTlVT
XzEgKyAxKTsKLQotCW1lbXNldChwcHNfcGF5bG9hZCwgMCwgc2l6ZW9mKCpwcHNfcGF5bG9hZCkp
OwotCi0JLyogUFBTIDAgKi8KLQlwcHNfcGF5bG9hZC0+ZHNjX3ZlcnNpb24gPQotCQlkc2NfY2Zn
LT5kc2NfdmVyc2lvbl9taW5vciB8Ci0JCWRzY19jZmctPmRzY192ZXJzaW9uX21ham9yIDw8IERT
Q19QUFNfVkVSU0lPTl9NQUpPUl9TSElGVDsKLQotCS8qIFBQUyAxLCAyIGlzIDAgKi8KLQotCS8q
IFBQUyAzICovCi0JcHBzX3BheWxvYWQtPnBwc18zID0KLQkJZHNjX2NmZy0+bGluZV9idWZfZGVw
dGggfAotCQlkc2NfY2ZnLT5iaXRzX3Blcl9jb21wb25lbnQgPDwgRFNDX1BQU19CUENfU0hJRlQ7
Ci0KLQkvKiBQUFMgNCAqLwotCXBwc19wYXlsb2FkLT5wcHNfNCA9Ci0JCSgoZHNjX2NmZy0+Yml0
c19wZXJfcGl4ZWwgJiBEU0NfUFBTX0JQUF9ISUdIX01BU0spID4+Ci0JCSBEU0NfUFBTX01TQl9T
SElGVCkgfAotCQlkc2NfY2ZnLT52YnJfZW5hYmxlIDw8IERTQ19QUFNfVkJSX0VOX1NISUZUIHwK
LQkJZHNjX2NmZy0+c2ltcGxlXzQyMiA8PCBEU0NfUFBTX1NJTVBMRTQyMl9TSElGVCB8Ci0JCWRz
Y19jZmctPmNvbnZlcnRfcmdiIDw8IERTQ19QUFNfQ09OVkVSVF9SR0JfU0hJRlQgfAotCQlkc2Nf
Y2ZnLT5ibG9ja19wcmVkX2VuYWJsZSA8PCBEU0NfUFBTX0JMT0NLX1BSRURfRU5fU0hJRlQ7Ci0K
LQkvKiBQUFMgNSAqLwotCXBwc19wYXlsb2FkLT5iaXRzX3Blcl9waXhlbF9sb3cgPQotCQkoZHNj
X2NmZy0+Yml0c19wZXJfcGl4ZWwgJiBEU0NfUFBTX0xTQl9NQVNLKTsKLQotCS8qCi0JICogVGhl
IERTQyBwYW5lbCBleHBlY3RzIHRoZSBQUFMgcGFja2V0IHRvIGhhdmUgYmlnIGVuZGlhbiBmb3Jt
YXQKLQkgKiBmb3IgZGF0YSBzcGFubmluZyAyIGJ5dGVzLiBVc2UgYSBtYWNybyBjcHVfdG9fYmUx
NigpIHRvIGNvbnZlcnQKLQkgKiB0byBiaWcgZW5kaWFuIGZvcm1hdC4gSWYgZm9ybWF0IGlzIGxp
dHRsZSBlbmRpYW4sIGl0IHdpbGwgc3dhcAotCSAqIGJ5dGVzIHRvIGNvbnZlcnQgdG8gQmlnIGVu
ZGlhbiBlbHNlIGtlZXAgaXQgdW5jaGFuZ2VkLgotCSAqLwotCi0JLyogUFBTIDYsIDcgKi8KLQlw
cHNfcGF5bG9hZC0+cGljX2hlaWdodCA9IGNwdV90b19iZTE2KGRzY19jZmctPnBpY19oZWlnaHQp
OwotCi0JLyogUFBTIDgsIDkgKi8KLQlwcHNfcGF5bG9hZC0+cGljX3dpZHRoID0gY3B1X3RvX2Jl
MTYoZHNjX2NmZy0+cGljX3dpZHRoKTsKLQotCS8qIFBQUyAxMCwgMTEgKi8KLQlwcHNfcGF5bG9h
ZC0+c2xpY2VfaGVpZ2h0ID0gY3B1X3RvX2JlMTYoZHNjX2NmZy0+c2xpY2VfaGVpZ2h0KTsKLQot
CS8qIFBQUyAxMiwgMTMgKi8KLQlwcHNfcGF5bG9hZC0+c2xpY2Vfd2lkdGggPSBjcHVfdG9fYmUx
Nihkc2NfY2ZnLT5zbGljZV93aWR0aCk7Ci0KLQkvKiBQUFMgMTQsIDE1ICovCi0JcHBzX3BheWxv
YWQtPmNodW5rX3NpemUgPSBjcHVfdG9fYmUxNihkc2NfY2ZnLT5zbGljZV9jaHVua19zaXplKTsK
LQotCS8qIFBQUyAxNiAqLwotCXBwc19wYXlsb2FkLT5pbml0aWFsX3htaXRfZGVsYXlfaGlnaCA9
Ci0JCSgoZHNjX2NmZy0+aW5pdGlhbF94bWl0X2RlbGF5ICYKLQkJICBEU0NfUFBTX0lOSVRfWE1J
VF9ERUxBWV9ISUdIX01BU0spID4+Ci0JCSBEU0NfUFBTX01TQl9TSElGVCk7Ci0KLQkvKiBQUFMg
MTcgKi8KLQlwcHNfcGF5bG9hZC0+aW5pdGlhbF94bWl0X2RlbGF5X2xvdyA9Ci0JCShkc2NfY2Zn
LT5pbml0aWFsX3htaXRfZGVsYXkgJiBEU0NfUFBTX0xTQl9NQVNLKTsKLQotCS8qIFBQUyAxOCwg
MTkgKi8KLQlwcHNfcGF5bG9hZC0+aW5pdGlhbF9kZWNfZGVsYXkgPQotCQljcHVfdG9fYmUxNihk
c2NfY2ZnLT5pbml0aWFsX2RlY19kZWxheSk7Ci0KLQkvKiBQUFMgMjAgaXMgMCAqLwotCi0JLyog
UFBTIDIxICovCi0JcHBzX3BheWxvYWQtPmluaXRpYWxfc2NhbGVfdmFsdWUgPQotCQlkc2NfY2Zn
LT5pbml0aWFsX3NjYWxlX3ZhbHVlOwotCi0JLyogUFBTIDIyLCAyMyAqLwotCXBwc19wYXlsb2Fk
LT5zY2FsZV9pbmNyZW1lbnRfaW50ZXJ2YWwgPQotCQljcHVfdG9fYmUxNihkc2NfY2ZnLT5zY2Fs
ZV9pbmNyZW1lbnRfaW50ZXJ2YWwpOwotCi0JLyogUFBTIDI0ICovCi0JcHBzX3BheWxvYWQtPnNj
YWxlX2RlY3JlbWVudF9pbnRlcnZhbF9oaWdoID0KLQkJKChkc2NfY2ZnLT5zY2FsZV9kZWNyZW1l
bnRfaW50ZXJ2YWwgJgotCQkgIERTQ19QUFNfU0NBTEVfREVDX0lOVF9ISUdIX01BU0spID4+Ci0J
CSBEU0NfUFBTX01TQl9TSElGVCk7Ci0KLQkvKiBQUFMgMjUgKi8KLQlwcHNfcGF5bG9hZC0+c2Nh
bGVfZGVjcmVtZW50X2ludGVydmFsX2xvdyA9Ci0JCShkc2NfY2ZnLT5zY2FsZV9kZWNyZW1lbnRf
aW50ZXJ2YWwgJiBEU0NfUFBTX0xTQl9NQVNLKTsKLQotCS8qIFBQUyAyNls3OjBdLCBQUFMgMjdb
Nzo1XSBSRVNFUlZFRCAqLwotCi0JLyogUFBTIDI3ICovCi0JcHBzX3BheWxvYWQtPmZpcnN0X2xp
bmVfYnBnX29mZnNldCA9Ci0JCWRzY19jZmctPmZpcnN0X2xpbmVfYnBnX29mZnNldDsKLQotCS8q
IFBQUyAyOCwgMjkgKi8KLQlwcHNfcGF5bG9hZC0+bmZsX2JwZ19vZmZzZXQgPQotCQljcHVfdG9f
YmUxNihkc2NfY2ZnLT5uZmxfYnBnX29mZnNldCk7Ci0KLQkvKiBQUFMgMzAsIDMxICovCi0JcHBz
X3BheWxvYWQtPnNsaWNlX2JwZ19vZmZzZXQgPQotCQljcHVfdG9fYmUxNihkc2NfY2ZnLT5zbGlj
ZV9icGdfb2Zmc2V0KTsKLQotCS8qIFBQUyAzMiwgMzMgKi8KLQlwcHNfcGF5bG9hZC0+aW5pdGlh
bF9vZmZzZXQgPQotCQljcHVfdG9fYmUxNihkc2NfY2ZnLT5pbml0aWFsX29mZnNldCk7Ci0KLQkv
KiBQUFMgMzQsIDM1ICovCi0JcHBzX3BheWxvYWQtPmZpbmFsX29mZnNldCA9IGNwdV90b19iZTE2
KGRzY19jZmctPmZpbmFsX29mZnNldCk7Ci0KLQkvKiBQUFMgMzYgKi8KLQlwcHNfcGF5bG9hZC0+
ZmxhdG5lc3NfbWluX3FwID0gZHNjX2NmZy0+ZmxhdG5lc3NfbWluX3FwOwotCi0JLyogUFBTIDM3
ICovCi0JcHBzX3BheWxvYWQtPmZsYXRuZXNzX21heF9xcCA9IGRzY19jZmctPmZsYXRuZXNzX21h
eF9xcDsKLQotCS8qIFBQUyAzOCwgMzkgKi8KLQlwcHNfcGF5bG9hZC0+cmNfbW9kZWxfc2l6ZSA9
Ci0JCWNwdV90b19iZTE2KERTQ19SQ19NT0RFTF9TSVpFX0NPTlNUKTsKLQotCS8qIFBQUyA0MCAq
LwotCXBwc19wYXlsb2FkLT5yY19lZGdlX2ZhY3RvciA9IERTQ19SQ19FREdFX0ZBQ1RPUl9DT05T
VDsKLQotCS8qIFBQUyA0MSAqLwotCXBwc19wYXlsb2FkLT5yY19xdWFudF9pbmNyX2xpbWl0MCA9
Ci0JCWRzY19jZmctPnJjX3F1YW50X2luY3JfbGltaXQwOwotCi0JLyogUFBTIDQyICovCi0JcHBz
X3BheWxvYWQtPnJjX3F1YW50X2luY3JfbGltaXQxID0KLQkJZHNjX2NmZy0+cmNfcXVhbnRfaW5j
cl9saW1pdDE7Ci0KLQkvKiBQUFMgNDMgKi8KLQlwcHNfcGF5bG9hZC0+cmNfdGd0X29mZnNldCA9
IERTQ19SQ19UR1RfT0ZGU0VUX0xPX0NPTlNUIHwKLQkJRFNDX1JDX1RHVF9PRkZTRVRfSElfQ09O
U1QgPDwgRFNDX1BQU19SQ19UR1RfT0ZGU0VUX0hJX1NISUZUOwotCi0JLyogUFBTIDQ0IC0gNTcg
Ki8KLQlmb3IgKGkgPSAwOyBpIDwgRFNDX05VTV9CVUZfUkFOR0VTIC0gMTsgaSsrKQotCQlwcHNf
cGF5bG9hZC0+cmNfYnVmX3RocmVzaFtpXSA9Ci0JCQlkc2NfY2ZnLT5yY19idWZfdGhyZXNoW2ld
OwotCi0JLyogUFBTIDU4IC0gODcgKi8KLQkvKgotCSAqIEZvciBEU0Mgc2luayBwcm9ncmFtbWlu
ZyB0aGUgUkMgUmFuZ2UgcGFyYW1ldGVyIGZpZWxkcwotCSAqIGFyZSBhcyBmb2xsb3dzOiBNaW5f
cXBbMTU6MTFdLCBtYXhfcXBbMTA6Nl0sIG9mZnNldFs1OjBdCi0JICovCi0JZm9yIChpID0gMDsg
aSA8IERTQ19OVU1fQlVGX1JBTkdFUzsgaSsrKSB7Ci0JCXBwc19wYXlsb2FkLT5yY19yYW5nZV9w
YXJhbWV0ZXJzW2ldID0KLQkJCSgoZHNjX2NmZy0+cmNfcmFuZ2VfcGFyYW1zW2ldLnJhbmdlX21p
bl9xcCA8PAotCQkJICBEU0NfUFBTX1JDX1JBTkdFX01JTlFQX1NISUZUKSB8Ci0JCQkgKGRzY19j
ZmctPnJjX3JhbmdlX3BhcmFtc1tpXS5yYW5nZV9tYXhfcXAgPDwKLQkJCSAgRFNDX1BQU19SQ19S
QU5HRV9NQVhRUF9TSElGVCkgfAotCQkJIChkc2NfY2ZnLT5yY19yYW5nZV9wYXJhbXNbaV0ucmFu
Z2VfYnBnX29mZnNldCkpOwotCQlwcHNfcGF5bG9hZC0+cmNfcmFuZ2VfcGFyYW1ldGVyc1tpXSA9
Ci0JCQljcHVfdG9fYmUxNihwcHNfcGF5bG9hZC0+cmNfcmFuZ2VfcGFyYW1ldGVyc1tpXSk7Ci0J
fQotCi0JLyogUFBTIDg4ICovCi0JcHBzX3BheWxvYWQtPm5hdGl2ZV80MjJfNDIwID0gZHNjX2Nm
Zy0+bmF0aXZlXzQyMiB8Ci0JCWRzY19jZmctPm5hdGl2ZV80MjAgPDwgRFNDX1BQU19OQVRJVkVf
NDIwX1NISUZUOwotCi0JLyogUFBTIDg5ICovCi0JcHBzX3BheWxvYWQtPnNlY29uZF9saW5lX2Jw
Z19vZmZzZXQgPQotCQlkc2NfY2ZnLT5zZWNvbmRfbGluZV9icGdfb2Zmc2V0OwotCi0JLyogUFBT
IDkwLCA5MSAqLwotCXBwc19wYXlsb2FkLT5uc2xfYnBnX29mZnNldCA9Ci0JCWNwdV90b19iZTE2
KGRzY19jZmctPm5zbF9icGdfb2Zmc2V0KTsKLQotCS8qIFBQUyA5MiwgOTMgKi8KLQlwcHNfcGF5
bG9hZC0+c2Vjb25kX2xpbmVfb2Zmc2V0X2FkaiA9Ci0JCWNwdV90b19iZTE2KGRzY19jZmctPnNl
Y29uZF9saW5lX29mZnNldF9hZGopOwotCi0JLyogUFBTIDk0IC0gMTI3IGFyZSBPICovCi19Ci1F
WFBPUlRfU1lNQk9MKGRybV9kc2NfcHBzX3BheWxvYWRfcGFjayk7Ci0KLXN0YXRpYyBpbnQgY29t
cHV0ZV9vZmZzZXQoc3RydWN0IGRybV9kc2NfY29uZmlnICp2ZHNjX2NmZywgaW50IHBpeGVsc19w
ZXJfZ3JvdXAsCi0JCQkJaW50IGdyb3Vwc19wZXJfbGluZSwgaW50IGdycGNudCkKLXsKLQlpbnQg
b2Zmc2V0ID0gMDsKLQlpbnQgZ3JwY250X2lkID0gRElWX1JPVU5EX1VQKHZkc2NfY2ZnLT5pbml0
aWFsX3htaXRfZGVsYXksIHBpeGVsc19wZXJfZ3JvdXApOwotCi0JaWYgKGdycGNudCA8PSBncnBj
bnRfaWQpCi0JCW9mZnNldCA9IERJVl9ST1VORF9VUChncnBjbnQgKiBwaXhlbHNfcGVyX2dyb3Vw
ICogdmRzY19jZmctPmJpdHNfcGVyX3BpeGVsLCAxNik7Ci0JZWxzZQotCQlvZmZzZXQgPSBESVZf
Uk9VTkRfVVAoZ3JwY250X2lkICogcGl4ZWxzX3Blcl9ncm91cCAqIHZkc2NfY2ZnLT5iaXRzX3Bl
cl9waXhlbCwgMTYpCi0JCQktICgoKGdycGNudCAtIGdycGNudF9pZCkgKiB2ZHNjX2NmZy0+c2xp
Y2VfYnBnX29mZnNldCkgPj4gMTEpOwotCi0JaWYgKGdycGNudCA8PSBncm91cHNfcGVyX2xpbmUp
Ci0JCW9mZnNldCArPSBncnBjbnQgKiB2ZHNjX2NmZy0+Zmlyc3RfbGluZV9icGdfb2Zmc2V0Owot
CWVsc2UKLQkJb2Zmc2V0ICs9IGdyb3Vwc19wZXJfbGluZSAqIHZkc2NfY2ZnLT5maXJzdF9saW5l
X2JwZ19vZmZzZXQKLQkJCS0gKCgoZ3JwY250IC0gZ3JvdXBzX3Blcl9saW5lKSAqIHZkc2NfY2Zn
LT5uZmxfYnBnX29mZnNldCkgPj4gMTEpOwotCi0JaWYgKHZkc2NfY2ZnLT5uYXRpdmVfNDIwKSB7
Ci0JCWlmIChncnBjbnQgPD0gZ3JvdXBzX3Blcl9saW5lKQotCQkJb2Zmc2V0IC09IChncnBjbnQg
KiB2ZHNjX2NmZy0+bnNsX2JwZ19vZmZzZXQpID4+IDExOwotCQllbHNlIGlmIChncnBjbnQgPD0g
MiAqIGdyb3Vwc19wZXJfbGluZSkKLQkJCW9mZnNldCArPSAoZ3JwY250IC0gZ3JvdXBzX3Blcl9s
aW5lKSAqIHZkc2NfY2ZnLT5zZWNvbmRfbGluZV9icGdfb2Zmc2V0Ci0JCQkJLSAoKGdyb3Vwc19w
ZXJfbGluZSAqIHZkc2NfY2ZnLT5uc2xfYnBnX29mZnNldCkgPj4gMTEpOwotCQllbHNlCi0JCQlv
ZmZzZXQgKz0gKGdycGNudCAtIGdyb3Vwc19wZXJfbGluZSkgKiB2ZHNjX2NmZy0+c2Vjb25kX2xp
bmVfYnBnX29mZnNldAotCQkJCS0gKCgoZ3JwY250IC0gZ3JvdXBzX3Blcl9saW5lKSAqIHZkc2Nf
Y2ZnLT5uc2xfYnBnX29mZnNldCkgPj4gMTEpOwotCX0KLQotCXJldHVybiBvZmZzZXQ7Ci19Ci0K
LS8qKgotICogZHJtX2RzY19jb21wdXRlX3JjX3BhcmFtZXRlcnMoKSAtIFdyaXRlIHJhdGUgY29u
dHJvbAotICogcGFyYW1ldGVycyB0byB0aGUgZHNjIGNvbmZpZ3VyYXRpb24gZGVmaW5lZCBpbgot
ICogJnN0cnVjdCBkcm1fZHNjX2NvbmZpZyBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIERTQyAxLjIK
LSAqIHNwZWNpZmljYXRpb24uIFNvbWUgY29uZmlndXJhdGlvbiBmaWVsZHMgbXVzdCBiZSBwcmVz
ZW50Ci0gKiBiZWZvcmVoYW5kLgotICoKLSAqIEB2ZHNjX2NmZzoKLSAqIERTQyBDb25maWd1cmF0
aW9uIGRhdGEgcGFydGlhbGx5IGZpbGxlZCBieSBkcml2ZXIKLSAqLwotaW50IGRybV9kc2NfY29t
cHV0ZV9yY19wYXJhbWV0ZXJzKHN0cnVjdCBkcm1fZHNjX2NvbmZpZyAqdmRzY19jZmcpCi17Ci0J
dW5zaWduZWQgbG9uZyBncm91cHNfcGVyX2xpbmUgPSAwOwotCXVuc2lnbmVkIGxvbmcgZ3JvdXBz
X3RvdGFsID0gMDsKLQl1bnNpZ25lZCBsb25nIG51bV9leHRyYV9tdXhfYml0cyA9IDA7Ci0JdW5z
aWduZWQgbG9uZyBzbGljZV9iaXRzID0gMDsKLQl1bnNpZ25lZCBsb25nIGhyZF9kZWxheSA9IDA7
Ci0JdW5zaWduZWQgbG9uZyBmaW5hbF9zY2FsZSA9IDA7Ci0JdW5zaWduZWQgbG9uZyByYnNfbWlu
ID0gMDsKLQl1bnNpZ25lZCBsb25nIG1heF9vZmZzZXQgPSAwOwotCi0JaWYgKHZkc2NfY2ZnLT5u
YXRpdmVfNDIwIHx8IHZkc2NfY2ZnLT5uYXRpdmVfNDIyKSB7Ci0JCS8qIE51bWJlciBvZiBncm91
cHMgdXNlZCB0byBjb2RlIGVhY2ggbGluZSBvZiBhIHNsaWNlICovCi0JCWdyb3Vwc19wZXJfbGlu
ZSA9IERJVl9ST1VORF9VUCh2ZHNjX2NmZy0+c2xpY2Vfd2lkdGggLyAyLAotCQkJCQkgICAgICAg
RFNDX1JDX1BJWEVMU19QRVJfR1JPVVApOwotCi0JCS8qIGNodW5rc2l6ZSBpbiBCeXRlcyAqLwot
CQl2ZHNjX2NmZy0+c2xpY2VfY2h1bmtfc2l6ZSA9IERJVl9ST1VORF9VUCh2ZHNjX2NmZy0+c2xp
Y2Vfd2lkdGggLyAyICoKLQkJCQkJCQkgIHZkc2NfY2ZnLT5iaXRzX3Blcl9waXhlbCwKLQkJCQkJ
CQkgICg4ICogMTYpKTsKLQl9IGVsc2UgewotCQkvKiBOdW1iZXIgb2YgZ3JvdXBzIHVzZWQgdG8g
Y29kZSBlYWNoIGxpbmUgb2YgYSBzbGljZSAqLwotCQlncm91cHNfcGVyX2xpbmUgPSBESVZfUk9V
TkRfVVAodmRzY19jZmctPnNsaWNlX3dpZHRoLAotCQkJCQkgICAgICAgRFNDX1JDX1BJWEVMU19Q
RVJfR1JPVVApOwotCi0JCS8qIGNodW5rc2l6ZSBpbiBCeXRlcyAqLwotCQl2ZHNjX2NmZy0+c2xp
Y2VfY2h1bmtfc2l6ZSA9IERJVl9ST1VORF9VUCh2ZHNjX2NmZy0+c2xpY2Vfd2lkdGggKgotCQkJ
CQkJCSAgdmRzY19jZmctPmJpdHNfcGVyX3BpeGVsLAotCQkJCQkJCSAgKDggKiAxNikpOwotCX0K
LQotCWlmICh2ZHNjX2NmZy0+Y29udmVydF9yZ2IpCi0JCW51bV9leHRyYV9tdXhfYml0cyA9IDMg
KiAodmRzY19jZmctPm11eF93b3JkX3NpemUgKwotCQkJCQkgICg0ICogdmRzY19jZmctPmJpdHNf
cGVyX2NvbXBvbmVudCArIDQpCi0JCQkJCSAgLSAyKTsKLQllbHNlIGlmICh2ZHNjX2NmZy0+bmF0
aXZlXzQyMikKLQkJbnVtX2V4dHJhX211eF9iaXRzID0gNCAqIHZkc2NfY2ZnLT5tdXhfd29yZF9z
aXplICsKLQkJCSg0ICogdmRzY19jZmctPmJpdHNfcGVyX2NvbXBvbmVudCArIDQpICsKLQkJCTMg
KiAoNCAqIHZkc2NfY2ZnLT5iaXRzX3Blcl9jb21wb25lbnQpIC0gMjsKLQllbHNlCi0JCW51bV9l
eHRyYV9tdXhfYml0cyA9IDMgKiB2ZHNjX2NmZy0+bXV4X3dvcmRfc2l6ZSArCi0JCQkoNCAqIHZk
c2NfY2ZnLT5iaXRzX3Blcl9jb21wb25lbnQgKyA0KSArCi0JCQkyICogKDQgKiB2ZHNjX2NmZy0+
Yml0c19wZXJfY29tcG9uZW50KSAtIDI7Ci0JLyogTnVtYmVyIG9mIGJpdHMgaW4gb25lIFNsaWNl
ICovCi0Jc2xpY2VfYml0cyA9IDggKiB2ZHNjX2NmZy0+c2xpY2VfY2h1bmtfc2l6ZSAqIHZkc2Nf
Y2ZnLT5zbGljZV9oZWlnaHQ7Ci0KLQl3aGlsZSAoKG51bV9leHRyYV9tdXhfYml0cyA+IDApICYm
Ci0JICAgICAgICgoc2xpY2VfYml0cyAtIG51bV9leHRyYV9tdXhfYml0cykgJSB2ZHNjX2NmZy0+
bXV4X3dvcmRfc2l6ZSkpCi0JCW51bV9leHRyYV9tdXhfYml0cy0tOwotCi0JaWYgKGdyb3Vwc19w
ZXJfbGluZSA8IHZkc2NfY2ZnLT5pbml0aWFsX3NjYWxlX3ZhbHVlIC0gOCkKLQkJdmRzY19jZmct
PmluaXRpYWxfc2NhbGVfdmFsdWUgPSBncm91cHNfcGVyX2xpbmUgKyA4OwotCi0JLyogc2NhbGVf
ZGVjcmVtZW50X2ludGVydmFsIGNhbGN1bGF0aW9uIGFjY29yZGluZyB0byBEU0Mgc3BlYyAxLjEx
ICovCi0JaWYgKHZkc2NfY2ZnLT5pbml0aWFsX3NjYWxlX3ZhbHVlID4gOCkKLQkJdmRzY19jZmct
PnNjYWxlX2RlY3JlbWVudF9pbnRlcnZhbCA9IGdyb3Vwc19wZXJfbGluZSAvCi0JCQkodmRzY19j
ZmctPmluaXRpYWxfc2NhbGVfdmFsdWUgLSA4KTsKLQllbHNlCi0JCXZkc2NfY2ZnLT5zY2FsZV9k
ZWNyZW1lbnRfaW50ZXJ2YWwgPSBEU0NfU0NBTEVfREVDUkVNRU5UX0lOVEVSVkFMX01BWDsKLQot
CXZkc2NfY2ZnLT5maW5hbF9vZmZzZXQgPSB2ZHNjX2NmZy0+cmNfbW9kZWxfc2l6ZSAtCi0JCSh2
ZHNjX2NmZy0+aW5pdGlhbF94bWl0X2RlbGF5ICoKLQkJIHZkc2NfY2ZnLT5iaXRzX3Blcl9waXhl
bCArIDgpIC8gMTYgKyBudW1fZXh0cmFfbXV4X2JpdHM7Ci0KLQlpZiAodmRzY19jZmctPmZpbmFs
X29mZnNldCA+PSB2ZHNjX2NmZy0+cmNfbW9kZWxfc2l6ZSkgewotCQlEUk1fREVCVUdfS01TKCJG
aW5hbE9mcyA8IFJjTW9kZWxTemUgZm9yIHRoaXMgSW5pdGlhbFhtaXREZWxheVxuIik7Ci0JCXJl
dHVybiAtRVJBTkdFOwotCX0KLQotCWZpbmFsX3NjYWxlID0gKHZkc2NfY2ZnLT5yY19tb2RlbF9z
aXplICogOCkgLwotCQkodmRzY19jZmctPnJjX21vZGVsX3NpemUgLSB2ZHNjX2NmZy0+ZmluYWxf
b2Zmc2V0KTsKLQlpZiAodmRzY19jZmctPnNsaWNlX2hlaWdodCA+IDEpCi0JCS8qCi0JCSAqIE5m
bEJwZ09mZnNldCBpcyAxNiBiaXQgdmFsdWUgd2l0aCAxMSBmcmFjdGlvbmFsIGJpdHMKLQkJICog
aGVuY2Ugd2UgbXVsdGlwbHkgYnkgMl4xMSBmb3IgcHJlc2VydmluZyB0aGUKLQkJICogZnJhY3Rp
b25hbCBwYXJ0Ci0JCSAqLwotCQl2ZHNjX2NmZy0+bmZsX2JwZ19vZmZzZXQgPSBESVZfUk9VTkRf
VVAoKHZkc2NfY2ZnLT5maXJzdF9saW5lX2JwZ19vZmZzZXQgPDwgMTEpLAotCQkJCQkJCSh2ZHNj
X2NmZy0+c2xpY2VfaGVpZ2h0IC0gMSkpOwotCWVsc2UKLQkJdmRzY19jZmctPm5mbF9icGdfb2Zm
c2V0ID0gMDsKLQotCS8qIDJeMTYgLSAxICovCi0JaWYgKHZkc2NfY2ZnLT5uZmxfYnBnX29mZnNl
dCA+IDY1NTM1KSB7Ci0JCURSTV9ERUJVR19LTVMoIk5mbEJwZ09mZnNldCBpcyB0b28gbGFyZ2Ug
Zm9yIHRoaXMgc2xpY2UgaGVpZ2h0XG4iKTsKLQkJcmV0dXJuIC1FUkFOR0U7Ci0JfQotCi0JaWYg
KHZkc2NfY2ZnLT5zbGljZV9oZWlnaHQgPiAyKQotCQl2ZHNjX2NmZy0+bnNsX2JwZ19vZmZzZXQg
PSBESVZfUk9VTkRfVVAoKHZkc2NfY2ZnLT5zZWNvbmRfbGluZV9icGdfb2Zmc2V0IDw8IDExKSwK
LQkJCQkJCQkodmRzY19jZmctPnNsaWNlX2hlaWdodCAtIDEpKTsKLQllbHNlCi0JCXZkc2NfY2Zn
LT5uc2xfYnBnX29mZnNldCA9IDA7Ci0KLQlpZiAodmRzY19jZmctPm5zbF9icGdfb2Zmc2V0ID4g
NjU1MzUpIHsKLQkJRFJNX0RFQlVHX0tNUygiTnNsQnBnT2Zmc2V0IGlzIHRvbyBsYXJnZSBmb3Ig
dGhpcyBzbGljZSBoZWlnaHRcbiIpOwotCQlyZXR1cm4gLUVSQU5HRTsKLQl9Ci0KLQkvKiBOdW1i
ZXIgb2YgZ3JvdXBzIHVzZWQgdG8gY29kZSB0aGUgZW50aXJlIHNsaWNlICovCi0JZ3JvdXBzX3Rv
dGFsID0gZ3JvdXBzX3Blcl9saW5lICogdmRzY19jZmctPnNsaWNlX2hlaWdodDsKLQotCS8qIHNs
aWNlX2JwZ19vZmZzZXQgaXMgMTYgYml0IHZhbHVlIHdpdGggMTEgZnJhY3Rpb25hbCBiaXRzICov
Ci0JdmRzY19jZmctPnNsaWNlX2JwZ19vZmZzZXQgPSBESVZfUk9VTkRfVVAoKCh2ZHNjX2NmZy0+
cmNfbW9kZWxfc2l6ZSAtCi0JCQkJCQkgICAgdmRzY19jZmctPmluaXRpYWxfb2Zmc2V0ICsKLQkJ
CQkJCSAgICBudW1fZXh0cmFfbXV4X2JpdHMpIDw8IDExKSwKLQkJCQkJCSAgZ3JvdXBzX3RvdGFs
KTsKLQotCWlmIChmaW5hbF9zY2FsZSA+IDkpIHsKLQkJLyoKLQkJICogU2NhbGVJbmNyZW1lbnRJ
bnRlcnZhbCA9Ci0JCSAqIGZpbmFsb2Zmc2V0LygoTmZsQnBnT2Zmc2V0ICsgU2xpY2VCcGdPZmZz
ZXQpKjgoZmluYWxzY2FsZSAtIDEuMTI1KSkKLQkJICogYXMgKE5mbEJwZ09mZnNldCArIFNsaWNl
QnBnT2Zmc2V0KSBoYXMgMTEgYml0IGZyYWN0aW9uYWwgdmFsdWUsCi0JCSAqIHdlIG5lZWQgZGl2
aWRlIGJ5IDJeMTEgZnJvbSBwc3REc2NDZmcgdmFsdWVzCi0JCSAqLwotCQl2ZHNjX2NmZy0+c2Nh
bGVfaW5jcmVtZW50X2ludGVydmFsID0KLQkJCQkodmRzY19jZmctPmZpbmFsX29mZnNldCAqICgx
IDw8IDExKSkgLwotCQkJCSgodmRzY19jZmctPm5mbF9icGdfb2Zmc2V0ICsKLQkJCQl2ZHNjX2Nm
Zy0+bnNsX2JwZ19vZmZzZXQgKwotCQkJCXZkc2NfY2ZnLT5zbGljZV9icGdfb2Zmc2V0KSAqCi0J
CQkJKGZpbmFsX3NjYWxlIC0gOSkpOwotCX0gZWxzZSB7Ci0JCS8qCi0JCSAqIElmIGZpbmFsU2Nh
bGVWYWx1ZSBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gOSwgYSB2YWx1ZSBvZiAwIHNob3VsZAot
CQkgKiBiZSB1c2VkIHRvIGRpc2FibGUgdGhlIHNjYWxlIGluY3JlbWVudCBhdCB0aGUgZW5kIG9m
IHRoZSBzbGljZQotCQkgKi8KLQkJdmRzY19jZmctPnNjYWxlX2luY3JlbWVudF9pbnRlcnZhbCA9
IDA7Ci0JfQotCi0JaWYgKHZkc2NfY2ZnLT5zY2FsZV9pbmNyZW1lbnRfaW50ZXJ2YWwgPiA2NTUz
NSkgewotCQlEUk1fREVCVUdfS01TKCJTY2FsZUluY3JlbWVudEludGVydmFsIGlzIGxhcmdlIGZv
ciBzbGljZSBoZWlnaHRcbiIpOwotCQlyZXR1cm4gLUVSQU5HRTsKLQl9Ci0KLQkvKgotCSAqIERT
QyBzcGVjIG1lbnRpb25zIHRoYXQgYml0c19wZXJfcGl4ZWwgc3BlY2lmaWVzIHRoZSB0YXJnZXQK
LQkgKiBiaXRzL3BpeGVsIChicHApIHJhdGUgdGhhdCBpcyB1c2VkIGJ5IHRoZSBlbmNvZGVyLAot
CSAqIGluIHN0ZXBzIG9mIDEvMTYgb2YgYSBiaXQgcGVyIHBpeGVsCi0JICovCi0JaWYgKHZkc2Nf
Y2ZnLT5kc2NfdmVyc2lvbl9taW5vciA9PSAyICYmICh2ZHNjX2NmZy0+bmF0aXZlXzQyMCB8fCB2
ZHNjX2NmZy0+bmF0aXZlXzQyMikpIHsKLQotCQltYXhfb2Zmc2V0ID0gY29tcHV0ZV9vZmZzZXQo
dmRzY19jZmcsIERTQ19SQ19QSVhFTFNfUEVSX0dST1VQLCBncm91cHNfcGVyX2xpbmUsCi0JCQkJ
CURJVl9ST1VORF9VUCh2ZHNjX2NmZy0+aW5pdGlhbF94bWl0X2RlbGF5LAotCQkJCQkJRFNDX1JD
X1BJWEVMU19QRVJfR1JPVVApKTsKLQotCQltYXhfb2Zmc2V0ID0gTUFYKG1heF9vZmZzZXQsCi0J
CQkJY29tcHV0ZV9vZmZzZXQodmRzY19jZmcsIERTQ19SQ19QSVhFTFNfUEVSX0dST1VQLCBncm91
cHNfcGVyX2xpbmUsCi0JCQkJCURJVl9ST1VORF9VUCh2ZHNjX2NmZy0+aW5pdGlhbF94bWl0X2Rl
bGF5LAotCQkJCQkJZ3JvdXBzX3Blcl9saW5lKSkpOwotCi0JCW1heF9vZmZzZXQgPSBNQVgobWF4
X29mZnNldCwKLQkJCQljb21wdXRlX29mZnNldCh2ZHNjX2NmZywgRFNDX1JDX1BJWEVMU19QRVJf
R1JPVVAsIGdyb3Vwc19wZXJfbGluZSwKLQkJCQkJRElWX1JPVU5EX1VQKHZkc2NfY2ZnLT5pbml0
aWFsX3htaXRfZGVsYXksCi0JCQkJCQlncm91cHNfcGVyX2xpbmUgKiAyKSkpOwotCi0JCXJic19t
aW4gPSB2ZHNjX2NmZy0+cmNfbW9kZWxfc2l6ZSAtIHZkc2NfY2ZnLT5pbml0aWFsX29mZnNldCAr
IG1heF9vZmZzZXQ7Ci0JfSBlbHNlIHsKLQkJcmJzX21pbiA9IHZkc2NfY2ZnLT5yY19tb2RlbF9z
aXplIC0gdmRzY19jZmctPmluaXRpYWxfb2Zmc2V0ICsKLQkJCURJVl9ST1VORF9VUCh2ZHNjX2Nm
Zy0+aW5pdGlhbF94bWl0X2RlbGF5ICoKLQkJCQkgICAgIHZkc2NfY2ZnLT5iaXRzX3Blcl9waXhl
bCwgMTYpICsKLQkJCWdyb3Vwc19wZXJfbGluZSAqIHZkc2NfY2ZnLT5maXJzdF9saW5lX2JwZ19v
ZmZzZXQ7Ci0JfQotCi0JaHJkX2RlbGF5ID0gRElWX1JPVU5EX1VQKChyYnNfbWluICogMTYpLCB2
ZHNjX2NmZy0+Yml0c19wZXJfcGl4ZWwpOwotCXZkc2NfY2ZnLT5yY19iaXRzID0gKGhyZF9kZWxh
eSAqIHZkc2NfY2ZnLT5iaXRzX3Blcl9waXhlbCkgLyAxNjsKLQl2ZHNjX2NmZy0+aW5pdGlhbF9k
ZWNfZGVsYXkgPSBocmRfZGVsYXkgLSB2ZHNjX2NmZy0+aW5pdGlhbF94bWl0X2RlbGF5OwotCi0J
LyogQXMgcGVyIERTQyBzcGVjIHYxLjJhIHJlY29tbWVuZGF0aW9uOiAqLwotCWlmICh2ZHNjX2Nm
Zy0+bmF0aXZlXzQyMCkKLQkJdmRzY19jZmctPnNlY29uZF9saW5lX29mZnNldF9hZGogPSA1MTI7
Ci0JZWxzZQotCQl2ZHNjX2NmZy0+c2Vjb25kX2xpbmVfb2Zmc2V0X2FkaiA9IDA7Ci0KLQlyZXR1
cm4gMDsKLX0KLUVYUE9SVF9TWU1CT0woZHJtX2RzY19jb21wdXRlX3JjX3BhcmFtZXRlcnMpOwot
LSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
