Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6D997BCDFCB
	for <lists+amd-gfx@lfdr.de>; Fri, 10 Oct 2025 18:53:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 88A0210EC63;
	Fri, 10 Oct 2025 16:53:01 +0000 (UTC)
Authentication-Results: gabe.freedesktop.org;
	dkim=pass (1024-bit key; unprotected) header.d=amd.com header.i=@amd.com header.b="JfNcK5HR";
	dkim-atps=neutral
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from PH0PR06CU001.outbound.protection.outlook.com
 (mail-westus3azon11011015.outbound.protection.outlook.com [40.107.208.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8B21E10E2B3
 for <amd-gfx@lists.freedesktop.org>; Fri, 10 Oct 2025 16:52:59 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector10001; d=microsoft.com; cv=none;
 b=IuTd+gRHTONheOEcNIJTCEwpY1BlfZeW4cn2FbLoodLfsH9B2rzhJfUcluVMZDzww8DnHjPkTXOc4m1oZcKn4mepfLUFJBi/APlBv2jXedg6xmP8JL8ksQPS7ISTUDOaeh4EjeWxhbc64llfZ8zH9s7fXhV9np2hRV/8lJzVnLZuGCeA8nSF4xsdwn5nZeQkqXBMTLxtPcWDt3iNg21tmfxyQ9Yxq5c4Laegy9dyuYzt1Zvs5EAbrECGr4+0syEaLLrgZotW07FZ0RNIQ8w/Xj2xu4k8OUusfGXfHFwCfMuHbfs1y9H2qNWLyx9xh0HKZyHNMlfJ9Rwj6MrTCVU5DA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector10001;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=E6x6WrqAg1rkDXPVG7kzjKtz1zMv33ZFUUzKX1EoK1c=;
 b=wcAJG9aZ1120s3IRp+f08iffTwHhRel8EsqqJEYntWroSUDUeypjQkmUc8yrZMPQ/OcI9lHvOQJDZpdpV0sbl928SZRVOUGEGw9BUxtDMcYfKpHAwFMtoyDUbrT0m61tXw+BsS7YguJJm6nvWvfBwPtAFZbAFpEzYUYDloqpFERb+MIlkZrKfs22Ai29fwb1Gifr+iP2ls4x9EBi9UqBjZ124AdxFPO2kgB9AtNuCCC3uoBULPhZCs74NBtMMwe6CAulerPolS1xHAp2UwGpKW3tickmpN0Q64uqFKJrWzFr4GctexQPQwXDpokZNkyd1zFwQ6RTh3hNNkQIG8r3sw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=E6x6WrqAg1rkDXPVG7kzjKtz1zMv33ZFUUzKX1EoK1c=;
 b=JfNcK5HR+N18DWp0TEBX1NPbM0PTdw76zah2rlhOed8OU/yen2NRQBJoZRQHaJ/Jvis7YNNGsssaXNsZTQKIrKK93EfvfCtcBa1NvOUQHhJXQVhgbNxWY7G6WyB8+3sSZfTRvRzEQArQfDKFfPs7uykvYkA02y6gg6V78UsUWXI=
Received: from DS0PR12MB7804.namprd12.prod.outlook.com (2603:10b6:8:142::5) by
 SJ2PR12MB7989.namprd12.prod.outlook.com (2603:10b6:a03:4c3::13) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.9203.10; Fri, 10 Oct
 2025 16:52:53 +0000
Received: from DS0PR12MB7804.namprd12.prod.outlook.com
 ([fe80::e71b:4ec9:237f:24ea]) by DS0PR12MB7804.namprd12.prod.outlook.com
 ([fe80::e71b:4ec9:237f:24ea%5]) with mapi id 15.20.9203.009; Fri, 10 Oct 2025
 16:52:53 +0000
From: "Lazar, Lijo" <Lijo.Lazar@amd.com>
To: Alex Deucher <alexdeucher@gmail.com>
CC: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Zhang,
 Hawking" <Hawking.Zhang@amd.com>, "Deucher, Alexander"
 <Alexander.Deucher@amd.com>
Subject: RE: [PATCH v2 1/2] drm/amdgpu: Add amdgpu_discovery_info
Thread-Topic: [PATCH v2 1/2] drm/amdgpu: Add amdgpu_discovery_info
Thread-Index: AQHcOfZifkPWOqdcgUm0VTZLCvMtAbS7jjeAgAAKGRA=
Date: Fri, 10 Oct 2025 16:52:53 +0000
Message-ID: <DS0PR12MB7804C9E078144C3BCA5E3FEB97EFA@DS0PR12MB7804.namprd12.prod.outlook.com>
References: <20251010145814.3514884-1-lijo.lazar@amd.com>
 <CADnq5_NP67gqfP2zF=Ua92Wj_ikL0xM34HhKrvCndFHE631MxQ@mail.gmail.com>
In-Reply-To: <CADnq5_NP67gqfP2zF=Ua92Wj_ikL0xM34HhKrvCndFHE631MxQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_f265efc6-e181-49d6-80f4-fae95cf838a0_Enabled=True;
 MSIP_Label_f265efc6-e181-49d6-80f4-fae95cf838a0_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_f265efc6-e181-49d6-80f4-fae95cf838a0_SetDate=2025-10-10T16:51:39.0000000Z;
 MSIP_Label_f265efc6-e181-49d6-80f4-fae95cf838a0_Name=Open
 Source; MSIP_Label_f265efc6-e181-49d6-80f4-fae95cf838a0_ContentBits=3;
 MSIP_Label_f265efc6-e181-49d6-80f4-fae95cf838a0_Method=Privileged
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=amd.com;
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: DS0PR12MB7804:EE_|SJ2PR12MB7989:EE_
x-ms-office365-filtering-correlation-id: b126794e-febd-45af-1527-08de081d7478
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0; ARA:13230040|366016|376014|1800799024|38070700021;
x-microsoft-antispam-message-info: =?utf-8?B?UllDRVZsNXdNWThweFhUeHp4QnVYdHRYWlROcXEvdnBPeTB2cG8vRmI4YVNZ?=
 =?utf-8?B?S0c4amJTVGEvTDNlRG9reEpIMmpwbzB3bE5KamtXN2NRWHViSEV3VjdjN3Zy?=
 =?utf-8?B?Slp2RThGZmNuMW5rbjhObVFIWkJEdy9EZ1l5YUpRM21PZ2dKQXg2b1pkSm13?=
 =?utf-8?B?NmRKZGdjOEtqZW1wM1ZMSEJZRVRXOExkUStVRDJqMTE1NTZCTXR5TEUxaGc0?=
 =?utf-8?B?aE5NS3RZakc0VE0zZy9HWFJ6Ny9WMDhlN2U2QzBJZ1hvbGE2azVnK3NpQnZi?=
 =?utf-8?B?NFMxNzZTd2IxMW8vSmRkYVZjcmwrd05ZOCs2TG8rUU53aFNvYVZzL2JYazVZ?=
 =?utf-8?B?RGVkNDBieTE3ejh2RVlHWmZYSWtWT2hJVGRkMUhLV1IzZGlwREpmVFpzaVR0?=
 =?utf-8?B?TXhkVCtQR2lhQnZWVDdWaU11U2xPZWF2bnZGMUx1Y1YydmFpNEJaYnc2REJp?=
 =?utf-8?B?d1pTNy93SG94akJEUzZVM0FudEVYK0U4Z3JmY1gzS0pLNjl0aDg2YWxwQjVa?=
 =?utf-8?B?dWYzc1ZaQ1JZV3IzcUJ4QU9MWHBRZmN6UlU3ZEREQUtxRkkxdVQxZHF2bDZX?=
 =?utf-8?B?QlVzWmU0bU5TMUZDbHRGWERqM3RjREtmMUNYeFhWOUUxeDBBbHVUM2E5NzVD?=
 =?utf-8?B?MzlxYUwrZnVzeTluc2F6eFhENjlwWXFaRm10YzVNWTN0b29Genhmc0Q0RldT?=
 =?utf-8?B?emVBNXc4dmRJZExRWnBYWEFBZ0g4ZThESHBNT0ZmcWpiOGlWeTliaW9MNUlt?=
 =?utf-8?B?cm52SG44K3BtUWVCRE4xV3ZPS3NGa2FyVVlBNnRTSTZ4dWd3WEg1dVFxY2pR?=
 =?utf-8?B?ZlNMaXdTSWM2M2VDaUNJNmhBcnZzajdmSTZlVEVmc1V0OXZuenJGVS9TdFJT?=
 =?utf-8?B?MDR4S0xkb0dYVW5vOVJnUlZhUzFVN2pCQUdscStrTTNzR200RTlnV1RmSGY0?=
 =?utf-8?B?NGFhUjc0blo0R3pXTFNNZmlwK1l1R2ZZM0JzZnIyV1J3TGJSMG1wZERFV1Zp?=
 =?utf-8?B?a1ZEZmJJMlVjaC83cHN6R2VlRHZkd1VWL2REQVFMM2VLc1J6MUM1bUFLVDI2?=
 =?utf-8?B?K0MrbXJ2ZFlNNktVdUtJaWFlUVNialBlUmtTZDNBYU9sUk8vRFBKbXdLZktH?=
 =?utf-8?B?S0dnbXFTWnBYSnBUQjFoVWhrT0hEM1ErQjd5a0dtUmloREJlbUNqaWp0VjAy?=
 =?utf-8?B?SlZ2Nzd3c2ZJUFRSYjJ5Y244RTVHZnUvZlZkcFNPaEdWY0l4M3kwTkYyOTJn?=
 =?utf-8?B?RkRvUFZ5SEFtSXdZak9EYUFmMUh5S2lieWpVekpJNXI1TnpNc1pFajFwRmFy?=
 =?utf-8?B?dnNDd0RWeExjdzZTNWs4Q2syZmtsQ3Z0L1gwMXVtbVd4c2JHSWRpL2tiYXZX?=
 =?utf-8?B?dU9SdEN1SkpSd0NiVm96ODVjMFVTK1hpZS93ZGcvc0QxVkpjb2plYzZMUlRZ?=
 =?utf-8?B?NzE4YTJDOTlhNDFPLzB2bEhsTmRaNEJndWZONzcyWVQ2cUUvMmVtMXpGenVF?=
 =?utf-8?B?Zk5KUzY2SWdDUk11NnlZM050MURnVmFFQmphVEtyZ1N2RFJvMHhqWm9YMVkv?=
 =?utf-8?B?L2ZnVVl4RUVZZmxHMGlWRXFOcWluMndQYmhkWVgva1I1c1phVERzbW5QVys3?=
 =?utf-8?B?bXY2SStYbHpOU3d0ZkROOWhGaFFHQ3VxNzVxYjRab1lpR3V0Qjh2YnBtZ3p2?=
 =?utf-8?B?QzVhTDlxUHBLRnVteUIyeWJET2JoK3BCNElWQ0hoYkFZSncyOERRWmRwbzhK?=
 =?utf-8?B?UVBVamFDZGtlQlB6NkJ4bktNMVJVQ3VmWEhENm5ueWVRQk9lQStjM041S2Nz?=
 =?utf-8?B?L3NsQVl3eTZ0b1hvdG1VZ3dhYXkrT0hENzVEVFQzblpEZ245VCs3bnppTUJh?=
 =?utf-8?B?alVUdmxUZDFYUHpxUlFRVktLMTdqbUQ4bGxJVy8yeHJSOU5QR3BZUGFXQXRV?=
 =?utf-8?B?aUw4MUl3OHJrdTNNK29DWjZab2wzaWROb0JCMlQyY2pua0NjZThFdENaT3Jp?=
 =?utf-8?B?allwbS85b2NtWHNOSkk0RHdBaHhQS2Fjdm40WGRFWGZGY2dmNS9TeTYvdDg2?=
 =?utf-8?Q?SYX1kY?=
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DS0PR12MB7804.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(13230040)(366016)(376014)(1800799024)(38070700021); DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?alV4K2E5OE1qY0FjNnkvNnR4MlE3QmdHN2lxb3lCdGcyeTNnaDRxUmhjc2Rl?=
 =?utf-8?B?Tm1pU21pVWcvaUswUlI0ZDZQL3BDenEybmdMNDdFU1VZVkVmMElaL0x6NEpi?=
 =?utf-8?B?dXd1OGhySXk5VTZIQzhOdDZ4Z3RtWUxiaXFUOU4vd2N3L1dLRzRNQWNLbytZ?=
 =?utf-8?B?YlFhbW5mQkw1aGJ0Z0xHc21FS1JaWlR6S1YzVWtXQnlMNkJTRmFRR1NYaUhP?=
 =?utf-8?B?cGZ1U2FJTzh0OWV0Qkh5ZUFlK0JPN1BDZlNLZlJZT3B1Z0QrUlhmTTV5TENN?=
 =?utf-8?B?VmxCVEYzeXRvdjZRWG51S3BWYmVSaEdxTkpqWGVSR2FQWWpwSmgwTzhxTzIw?=
 =?utf-8?B?QUVaditzRmsxRzliUUgyejBQUjlpRlN0aWxvbkRrOWdtRENrVjlJYW84TDVD?=
 =?utf-8?B?WEhPbEFOc0dneHA4NnNVWlhHbzJiR3V6K1phMlRRaTRmSnIxWjQ0Mm5HdkFK?=
 =?utf-8?B?NEFFZVp6Szc0U29JalBvK004YTZxcHJNMDlLYVhmNGZrcWR6ZldGM25hMkZW?=
 =?utf-8?B?aWVIYTJRUnVTQWQvcTRsOVRRcE5XUkZLYWcrSVMvUWNmUWFDN1VQZUVNS3dV?=
 =?utf-8?B?UWxuOGpSVFVMVHg0VURnV3RzenB4cHA0dG1INSt3SDBRc3Y0VXJ0ajdmZmw2?=
 =?utf-8?B?UVpkVzJuekxzeC9ZRGh5R28yODdybE9xVC9ReFd5WnlKWUNqTk5KZ1hLd0tr?=
 =?utf-8?B?Q0VFdmd3L0lsNlJ3QXhWNVJDWUF1VnpaemNNeUdROWpCTzdTMHpleUswODF5?=
 =?utf-8?B?Q0Z2V3BjaXJnQ2kyZ1owblI4TzM4YS9OcU1uMndqNG5HWGhHZFA5cm9NZngx?=
 =?utf-8?B?Zk5VMFovb0prRWlnWG9ISC81a2ZVVzhhSGpVdjBtT21teE5NSVY1cjEvTU5R?=
 =?utf-8?B?eGNielVMMXg5OVJVWnNubTg5VmFNTFJBa0QvL1B6bzlWeU9VQ1IxZnA4WnNv?=
 =?utf-8?B?cjNWV0dKRnF5OXVGS3owZTFreEpPd20vYlNFUzVxREsza1ZJNW0xMnlGUUh1?=
 =?utf-8?B?RExvMS9UM2tGeXVwak9OSUZUYWpDYy9LdGhoVlgxd3poN0JTdVN5cUp5anNI?=
 =?utf-8?B?YjBSUE1SOFJISUFqVDkrZTJnSWZkdlZKNnFLbXRiSXpLdUYvcUw0RWplSFky?=
 =?utf-8?B?QlZyaFJxd2R0MGJHUXJiSGU4WFpORk9mcjhUMWJlczhlTUxHVjRYTUlZWkR2?=
 =?utf-8?B?cURQZXlQeC9JTTBFUGVSeUptTWluQlpmSlNyM0xBcU5nTDgxbXNweGFyYk1Q?=
 =?utf-8?B?NDRFMEpiZENvWXRjK2xZUFFkRUwvdFF0RTY1NmFCSEVaSVpnU01PZVVPVVcw?=
 =?utf-8?B?czVhWm1NTHVZU2NCWTUyZUgyTUIvcEhlejlnb2xQcCtQbkxKOXJkLzJuM2xi?=
 =?utf-8?B?Q0RLUVRjTHVJem56MU5IS1dTalpwRVBFbEppYkdZc3dRVVh1ZDhMLy85WUFh?=
 =?utf-8?B?Zlk1U0xwVFpORXQrU3NMbElIMnYveDd6SFRwbDJFMlpURzdERkJJMnpZbFZr?=
 =?utf-8?B?VUcwaUZjaSsySDdJemRYUngyK1ovVjRFZkd0amM4V2RUaWhKMExaS1J0QWRt?=
 =?utf-8?B?WEZiVFBFbWVmTkt4UlZvaDJNWGY4RHpzZlZFQVM2S0JhbXkzUVpVd1JjWmRB?=
 =?utf-8?B?dm1HSW1ub0FzYUVtaVN6aUdTdkxhTE5zQ2FtZS9LMHhLRURFdWpsZHpFOE1Y?=
 =?utf-8?B?VURhdzJBaDdVVU1yVWZleTFMMFZoQTU5UTV6cVF1dWdDZHlxUk95bC9FTHBZ?=
 =?utf-8?B?dzZSek4weTE2bDhkb29JdmtuK1pqMGFhSEdHbHVMRFdrRDJPUkU2a05nL2VI?=
 =?utf-8?B?eDlhOS9QaGFlT3hFY2YwRkhsUlRxRDEwQldFTmx6NFJybG9rUVlzWHFoY0k5?=
 =?utf-8?B?WWlHRUhOV000OTlGcTB0UThmbE9hMzNxTXNNenF5ejMxWHlzTFdrN2NsRzdC?=
 =?utf-8?B?QlJvV3VCN2QxckkyNk9wakZGYVovWTdrbWVsOHNCckxMdXZYZnNVTlprZjFi?=
 =?utf-8?B?T2thZ0R1S0dWcXI0YVZmUTU2U2xzcVl0c21GY1lGamcrU3VTeGMramwzMjhV?=
 =?utf-8?B?a2lUa0hmUTRFb1RwbDRraDlWOVF4WDZSTDFoUlFPYlV5NGt5MjB0QlFpd0ow?=
 =?utf-8?Q?DP+8=3D?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DS0PR12MB7804.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: b126794e-febd-45af-1527-08de081d7478
X-MS-Exchange-CrossTenant-originalarrivaltime: 10 Oct 2025 16:52:53.3774 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: JxMH0rrt6ZPAJpheXn1yMtVYdTg1XB6zD1rTmVGmXhGBpJPZegAMB3YNoHZGCUCc
X-MS-Exchange-Transport-CrossTenantHeadersStamped: SJ2PR12MB7989
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W1B1YmxpY10NCg0KPi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+RnJvbTogQWxleCBEZXVj
aGVyIDxhbGV4ZGV1Y2hlckBnbWFpbC5jb20+DQo+U2VudDogRnJpZGF5LCBPY3RvYmVyIDEwLCAy
MDI1IDk6NDUgUE0NCj5UbzogTGF6YXIsIExpam8gPExpam8uTGF6YXJAYW1kLmNvbT4NCj5DYzog
YW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmc7IFpoYW5nLCBIYXdraW5nIDxIYXdraW5nLlpo
YW5nQGFtZC5jb20+Ow0KPkRldWNoZXIsIEFsZXhhbmRlciA8QWxleGFuZGVyLkRldWNoZXJAYW1k
LmNvbT4NCj5TdWJqZWN0OiBSZTogW1BBVENIIHYyIDEvMl0gZHJtL2FtZGdwdTogQWRkIGFtZGdw
dV9kaXNjb3ZlcnlfaW5mbw0KPg0KPk9uIEZyaSwgT2N0IDEwLCAyMDI1IGF0IDExOjEx4oCvQU0g
TGlqbyBMYXphciA8bGlqby5sYXphckBhbWQuY29tPiB3cm90ZToNCj4+DQo+PiBBZGQgYW1kZ3B1
X2Rpc2NvdmVyeV9pbmZvIHN0cnVjdHVyZSB0byBrZWVwIGFsbCBkaXNjb3ZlcnkgcmVsYXRlZA0K
Pj4gaW5mb3JtYXRpb24uDQo+Pg0KPj4gU2lnbmVkLW9mZi1ieTogTGlqbyBMYXphciA8bGlqby5s
YXphckBhbWQuY29tPg0KPj4gLS0tDQo+Pg0KPj4gdjI6IFJlbW92ZSBzdXBlcmZsdW91cyBkaXNj
b3ZlcnlfIHByZWZpeCBmb3IgbWVtYmVycyAoQWxleCkNCj4+DQo+PiAgZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1LmggICAgICAgICAgIHwgIDEwICstDQo+PiAgZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RlYnVnZnMuYyAgIHwgICA3ICstDQo+PiAgZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jICAgIHwgICA0ICstDQo+PiAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rpc2NvdmVyeS5jIHwgMTkyDQo+PiArKysrKysr
KysrLS0tLS0tLS0gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kaXNjb3Zlcnku
aCB8ICAxMSArDQo+PiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jICAg
ICAgIHwgICAyICstDQo+PiAgNiBmaWxlcyBjaGFuZ2VkLCAxMjkgaW5zZXJ0aW9ucygrKSwgOTcg
ZGVsZXRpb25zKC0pDQo+Pg0KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdS5oDQo+PiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oDQo+
PiBpbmRleCA5Y2JjODY0OGY4MzcuLmY1MmI3ODNhOGViNiAxMDA2NDQNCj4+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oDQo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHUuaA0KPj4gQEAgLTgzOSw4ICs4MzksNiBAQCBzdHJ1Y3QgYW1kX3Bv
d2VycGxheSB7DQo+PiAgICAgICAgIGNvbnN0IHN0cnVjdCBhbWRfcG1fZnVuY3MgKnBwX2Z1bmNz
OyAgfTsNCj4+DQo+PiAtc3RydWN0IGlwX2Rpc2NvdmVyeV90b3A7DQo+PiAtDQo+PiAgLyogcG9s
YXJpczEwIGtpY2tlcnMgKi8NCj4+ICAjZGVmaW5lIEFTSUNJRF9JU19QMjAoZGlkLCByaWQpICAg
ICAgICAgICAgICAgICgoKGRpZCA9PSAweDY3REYpICYmIFwNCj4+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgKChyaWQgPT0gMHhFMykgfHwgXCBAQCAtOTcyLDgNCj4+
ICs5NzAsNyBAQCBzdHJ1Y3QgYW1kZ3B1X2RldmljZSB7DQo+PiAgICAgICAgIHN0cnVjdCBub3Rp
Zmllcl9ibG9jayAgICAgICAgICAgYWNwaV9uYjsNCj4+ICAgICAgICAgc3RydWN0IG5vdGlmaWVy
X2Jsb2NrICAgICAgICAgICBwbV9uYjsNCj4+ICAgICAgICAgc3RydWN0IGFtZGdwdV9pMmNfY2hh
biAgICAgICAgICAqaTJjX2J1c1tBTURHUFVfTUFYX0kyQ19CVVNdOw0KPj4gLSAgICAgICBzdHJ1
Y3QgZGVidWdmc19ibG9iX3dyYXBwZXIgICAgIGRlYnVnZnNfdmJpb3NfYmxvYjsNCj4+IC0gICAg
ICAgc3RydWN0IGRlYnVnZnNfYmxvYl93cmFwcGVyICAgICBkZWJ1Z2ZzX2Rpc2NvdmVyeV9ibG9i
Ow0KPj4gKyAgICAgICBzdHJ1Y3QgZGVidWdmc19ibG9iX3dyYXBwZXIgZGVidWdmc192Ymlvc19i
bG9iOw0KPj4gICAgICAgICBzdHJ1Y3QgbXV0ZXggICAgICAgICAgICAgICAgICAgIHNyYm1fbXV0
ZXg7DQo+PiAgICAgICAgIC8qIEdSQk0gaW5kZXggbXV0ZXguIFByb3RlY3RzIGNvbmN1cnJlbnQg
YWNjZXNzIHRvIEdSQk0gaW5kZXggKi8NCj4+ICAgICAgICAgc3RydWN0IG11dGV4ICAgICAgICAg
ICAgICAgICAgICBncmJtX2lkeF9tdXRleDsNCj4+IEBAIC0xMDYzLDYgKzEwNjAsOSBAQCBzdHJ1
Y3QgYW1kZ3B1X2RldmljZSB7DQo+PiAgICAgICAgICAgICAgICAgdTMyICAgICAgICAgICAgICAg
ICAgICAgbG9nMl9tYXhfTUJwczsNCj4+ICAgICAgICAgfSBtbV9zdGF0czsNCj4+DQo+PiArICAg
ICAgIC8qIGRpc2NvdmVyeSovDQo+PiArICAgICAgIHN0cnVjdCBhbWRncHVfZGlzY292ZXJ5X2lu
Zm8gZGlzY292ZXJ5Ow0KPj4gKw0KPj4gICAgICAgICAvKiBkaXNwbGF5ICovDQo+PiAgICAgICAg
IGJvb2wgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlX3ZpcnR1YWxfZGlzcGxheTsN
Cj4+ICAgICAgICAgc3RydWN0IGFtZGdwdV92a21zX291dHB1dCAgICAgICAqYW1kZ3B1X3ZrbXNf
b3V0cHV0Ow0KPj4gQEAgLTEyNjUsOCArMTI2NSw2IEBAIHN0cnVjdCBhbWRncHVfZGV2aWNlIHsN
Cj4+DQo+PiAgICAgICAgIHN0cnVjdCBsaXN0X2hlYWQgICAgICAgICAgICAgICAgcmFzX2xpc3Q7
DQo+Pg0KPj4gLSAgICAgICBzdHJ1Y3QgaXBfZGlzY292ZXJ5X3RvcCAgICAgICAgICppcF90b3A7
DQo+PiAtDQo+PiAgICAgICAgIHN0cnVjdCBhbWRncHVfcmVzZXRfZG9tYWluICAgICAgKnJlc2V0
X2RvbWFpbjsNCj4+DQo+PiAgICAgICAgIHN0cnVjdCBtdXRleCAgICAgICAgICAgICAgICAgICAg
YmVuY2htYXJrX211dGV4Ow0KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9kZWJ1Z2ZzLmMNCj4+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2RlYnVnZnMuYw0KPj4gaW5kZXggYTcwNjUxMDUwYWNmLi5mNDU5MjZhYmVhNjcgMTAwNjQ0
DQo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGVidWdmcy5jDQo+
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGVidWdmcy5jDQo+PiBA
QCAtMjEyMywxMCArMjEyMyw5IEBAIGludCBhbWRncHVfZGVidWdmc19pbml0KHN0cnVjdCBhbWRn
cHVfZGV2aWNlDQo+KmFkZXYpDQo+PiAgICAgICAgIGRlYnVnZnNfY3JlYXRlX2Jsb2IoImFtZGdw
dV92YmlvcyIsIDA0NDQsIHJvb3QsDQo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmFk
ZXYtPmRlYnVnZnNfdmJpb3NfYmxvYik7DQo+Pg0KPj4gLSAgICAgICBhZGV2LT5kZWJ1Z2ZzX2Rp
c2NvdmVyeV9ibG9iLmRhdGEgPSBhZGV2LT5tbWFuLmRpc2NvdmVyeV9iaW47DQo+PiAtICAgICAg
IGFkZXYtPmRlYnVnZnNfZGlzY292ZXJ5X2Jsb2Iuc2l6ZSA9IGFkZXYtPm1tYW4uZGlzY292ZXJ5
X3Rtcl9zaXplOw0KPj4gLSAgICAgICBkZWJ1Z2ZzX2NyZWF0ZV9ibG9iKCJhbWRncHVfZGlzY292
ZXJ5IiwgMDQ0NCwgcm9vdCwNCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAmYWRldi0+
ZGVidWdmc19kaXNjb3ZlcnlfYmxvYik7DQo+PiArICAgICAgIGlmIChhZGV2LT5kaXNjb3Zlcnku
ZGVidWdmc19ibG9iLnNpemUpDQo+PiArICAgICAgICAgICAgICAgZGVidWdmc19jcmVhdGVfYmxv
YigiYW1kZ3B1X2Rpc2NvdmVyeSIsIDA0NDQsIHJvb3QsDQo+PiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAmYWRldi0+ZGlzY292ZXJ5LmRlYnVnZnNfYmxvYik7DQo+Pg0KPj4g
ICAgICAgICByZXR1cm4gMDsNCj4+ICB9DQo+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jDQo+PiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9kZXZpY2UuYw0KPj4gaW5kZXggZjNkNDJjNWIxNTQ3Li41N2YzYzQzNzNjOTAg
MTAwNjQ0DQo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNl
LmMNCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0K
Pj4gQEAgLTI2MjYsNyArMjYyNiw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2RldmljZV9wYXJzZV9n
cHVfaW5mb19mdyhzdHJ1Y3QNCj5hbWRncHVfZGV2aWNlICphZGV2KQ0KPj4gICAgICAgICAgICAg
ICAgIGNoaXBfbmFtZSA9ICJhcmN0dXJ1cyI7DQo+PiAgICAgICAgICAgICAgICAgYnJlYWs7DQo+
PiAgICAgICAgIGNhc2UgQ0hJUF9OQVZJMTI6DQo+PiAtICAgICAgICAgICAgICAgaWYgKGFkZXYt
Pm1tYW4uZGlzY292ZXJ5X2JpbikNCj4+ICsgICAgICAgICAgICAgICBpZiAoYWRldi0+ZGlzY292
ZXJ5LnNpemUpDQo+DQo+SSB0aGluayBpdCdzIHByb2JhYmx5IG9rIGhlcmUsIGJ1dCBpdCBkb2Vz
IGNoYW5nZSB0aGUgc2VtYW50aWNzLg0KPg0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0
dXJuIDA7DQo+PiAgICAgICAgICAgICAgICAgY2hpcF9uYW1lID0gIm5hdmkxMiI7DQo+PiAgICAg
ICAgICAgICAgICAgYnJlYWs7DQo+PiBAQCAtNTAzOCw3ICs1MDM4LDcgQEAgdm9pZCBhbWRncHVf
ZGV2aWNlX2Zpbmlfc3coc3RydWN0IGFtZGdwdV9kZXZpY2UNCj4+ICphZGV2KQ0KPj4NCj4+ICAg
ICAgICAgaWYgKElTX0VOQUJMRUQoQ09ORklHX1BFUkZfRVZFTlRTKSkNCj4+ICAgICAgICAgICAg
ICAgICBhbWRncHVfcG11X2ZpbmkoYWRldik7DQo+PiAtICAgICAgIGlmIChhZGV2LT5tbWFuLmRp
c2NvdmVyeV9iaW4pDQo+PiArICAgICAgIGlmIChhZGV2LT5kaXNjb3Zlcnkuc2l6ZSkNCj4NCj5T
aG91bGRuJ3Qgd2UgY2hlY2sgZm9yIC5iaW4gaGVyZT8gYW1kZ3B1X2Rpc2NvdmVyeV9maW5pKCkg
aGFuZGxpbmcgZnJlZWluZyB0aGF0DQo+bWVtb3J5Lg0KPg0KW2xpam9dDQpUaGFua3MgZm9yIGNh
dGNoaW5nLiBVc2VkIHRoZSB3cm9uZyBuYW1lIHdoaWxlICdyZXBsYWNpbmcnLiBXaWxsIHNlbmQg
YSBmaXhlZCB2ZXJzaW9uLg0KDQpUaGFua3MsDQpMaWpvDQoNCj5BbGV4DQo+DQo+PiAgICAgICAg
ICAgICAgICAgYW1kZ3B1X2Rpc2NvdmVyeV9maW5pKGFkZXYpOw0KPj4NCj4+ICAgICAgICAgYW1k
Z3B1X3Jlc2V0X3B1dF9yZXNldF9kb21haW4oYWRldi0+cmVzZXRfZG9tYWluKTsNCj4+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGlzY292ZXJ5LmMNCj4+
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rpc2NvdmVyeS5jDQo+PiBpbmRl
eCA3MzQwMWYwYWViMzQuLjAyYjY2MTIzMmRiOCAxMDA2NDQNCj4+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kaXNjb3ZlcnkuYw0KPj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rpc2NvdmVyeS5jDQo+PiBAQCAtMjU0LDkgKzI1NCw5IEBA
IHN0YXRpYyBpbnQNCj5hbWRncHVfZGlzY292ZXJ5X3JlYWRfYmluYXJ5X2Zyb21fc3lzbWVtKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KPj4gICAgICAgICBwb3MgPSB0bXJfb2Zmc2V0ICsg
dG1yX3NpemUgLSBESVNDT1ZFUllfVE1SX09GRlNFVDsNCj4+DQo+PiAgICAgICAgIC8qIFRoaXMg
cmVnaW9uIGlzIHJlYWQtb25seSBhbmQgcmVzZXJ2ZWQgZnJvbSBzeXN0ZW0gdXNlICovDQo+PiAt
ICAgICAgIGRpc2N2X3JlZ24gPSBtZW1yZW1hcChwb3MsIGFkZXYtPm1tYW4uZGlzY292ZXJ5X3Rt
cl9zaXplLA0KPk1FTVJFTUFQX1dDKTsNCj4+ICsgICAgICAgZGlzY3ZfcmVnbiA9IG1lbXJlbWFw
KHBvcywgYWRldi0+ZGlzY292ZXJ5LnNpemUsIE1FTVJFTUFQX1dDKTsNCj4+ICAgICAgICAgaWYg
KGRpc2N2X3JlZ24pIHsNCj4+IC0gICAgICAgICAgICAgICBtZW1jcHkoYmluYXJ5LCBkaXNjdl9y
ZWduLCBhZGV2LT5tbWFuLmRpc2NvdmVyeV90bXJfc2l6ZSk7DQo+PiArICAgICAgICAgICAgICAg
bWVtY3B5KGJpbmFyeSwgZGlzY3ZfcmVnbiwgYWRldi0+ZGlzY292ZXJ5LnNpemUpOw0KPj4gICAg
ICAgICAgICAgICAgIG1lbXVubWFwKGRpc2N2X3JlZ24pOw0KPj4gICAgICAgICAgICAgICAgIHJl
dHVybiAwOw0KPj4gICAgICAgICB9DQo+PiBAQCAtMzAxLDcgKzMwMSw3IEBAIHN0YXRpYyBpbnQN
Cj5hbWRncHVfZGlzY292ZXJ5X3JlYWRfYmluYXJ5X2Zyb21fbWVtKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2LA0KPj4gICAgICAgICBpZiAoc3pfdmFsaWQpIHsNCj4+ICAgICAgICAgICAgICAg
ICB1aW50NjRfdCBwb3MgPSB2cmFtX3NpemUgLSBESVNDT1ZFUllfVE1SX09GRlNFVDsNCj4+ICAg
ICAgICAgICAgICAgICBhbWRncHVfZGV2aWNlX3ZyYW1fYWNjZXNzKGFkZXYsIHBvcywgKHVpbnQz
Ml90ICopYmluYXJ5LA0KPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgYWRldi0+bW1hbi5kaXNjb3ZlcnlfdG1yX3NpemUsIGZhbHNlKTsNCj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZXYtPmRpc2NvdmVyeS5zaXplLA0KPj4g
KyBmYWxzZSk7DQo+PiAgICAgICAgIH0gZWxzZSB7DQo+PiAgICAgICAgICAgICAgICAgcmV0ID0g
YW1kZ3B1X2Rpc2NvdmVyeV9yZWFkX2JpbmFyeV9mcm9tX3N5c21lbShhZGV2LCBiaW5hcnkpOw0K
Pj4gICAgICAgICB9DQo+PiBAQCAtMzg5LDYgKzM4OSw3IEBAIHN0YXRpYyB2b2lkDQo+PiBhbWRn
cHVfZGlzY292ZXJ5X2hhcnZlc3RfY29uZmlnX3F1aXJrKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KSAgc3RhdGljIGludA0KPmFtZGdwdV9kaXNjb3ZlcnlfdmVyaWZ5X25wc2luZm8oc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IGJpbmFyeV9oZWFkZXIgKmJoZHIpDQo+PiB7DQo+PiArICAgICAg
IHVpbnQ4X3QgKmRpc2NvdmVyeV9iaW4gPSBhZGV2LT5kaXNjb3ZlcnkuYmluOw0KPj4gICAgICAg
ICBzdHJ1Y3QgdGFibGVfaW5mbyAqaW5mbzsNCj4+ICAgICAgICAgdWludDE2X3QgY2hlY2tzdW07
DQo+PiAgICAgICAgIHVpbnQxNl90IG9mZnNldDsNCj4+IEBAIC0zOTgsMTQgKzM5OSwxNCBAQCBz
dGF0aWMgaW50IGFtZGdwdV9kaXNjb3ZlcnlfdmVyaWZ5X25wc2luZm8oc3RydWN0DQo+YW1kZ3B1
X2RldmljZSAqYWRldiwNCj4+ICAgICAgICAgY2hlY2tzdW0gPSBsZTE2X3RvX2NwdShpbmZvLT5j
aGVja3N1bSk7DQo+Pg0KPj4gICAgICAgICBzdHJ1Y3QgbnBzX2luZm9faGVhZGVyICpuaGRyID0N
Cj4+IC0gICAgICAgICAgICAgICAoc3RydWN0IG5wc19pbmZvX2hlYWRlciAqKShhZGV2LT5tbWFu
LmRpc2NvdmVyeV9iaW4gKyBvZmZzZXQpOw0KPj4gKyAgICAgICAgICAgICAgIChzdHJ1Y3QgbnBz
X2luZm9faGVhZGVyICopKGRpc2NvdmVyeV9iaW4gKyBvZmZzZXQpOw0KPj4NCj4+ICAgICAgICAg
aWYgKGxlMzJfdG9fY3B1KG5oZHItPnRhYmxlX2lkKSAhPSBOUFNfSU5GT19UQUJMRV9JRCkgew0K
Pj4gICAgICAgICAgICAgICAgIGRldl9kYmcoYWRldi0+ZGV2LCAiaW52YWxpZCBpcCBkaXNjb3Zl
cnkgbnBzIGluZm8gdGFibGUgaWRcbiIpOw0KPj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlO
VkFMOw0KPj4gICAgICAgICB9DQo+Pg0KPj4gLSAgICAgICBpZiAoIWFtZGdwdV9kaXNjb3Zlcnlf
dmVyaWZ5X2NoZWNrc3VtKGFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbiArDQo+b2Zmc2V0LA0KPj4g
KyAgICAgICBpZiAoIWFtZGdwdV9kaXNjb3ZlcnlfdmVyaWZ5X2NoZWNrc3VtKGRpc2NvdmVyeV9i
aW4gKyBvZmZzZXQsDQo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgbGUzMl90b19jcHUobmhkci0+c2l6ZV9ieXRlcyksDQo+PiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tzdW0pKSB7DQo+PiAgICAgICAgICAg
ICAgICAgZGV2X2RiZyhhZGV2LT5kZXYsICJpbnZhbGlkIG5wcyBpbmZvIGRhdGEgdGFibGUNCj4+
IGNoZWNrc3VtXG4iKTsgQEAgLTQ0Nyw0OSArNDQ4LDUzIEBAIHN0YXRpYyBpbnQNCj4+IGFtZGdw
dV9kaXNjb3ZlcnlfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikgIHsNCj4+ICAgICAg
ICAgc3RydWN0IHRhYmxlX2luZm8gKmluZm87DQo+PiAgICAgICAgIHN0cnVjdCBiaW5hcnlfaGVh
ZGVyICpiaGRyOw0KPj4gKyAgICAgICB1aW50OF90ICpkaXNjb3ZlcnlfYmluOw0KPj4gICAgICAg
ICBjb25zdCBjaGFyICpmd19uYW1lOw0KPj4gICAgICAgICB1aW50MTZfdCBvZmZzZXQ7DQo+PiAg
ICAgICAgIHVpbnQxNl90IHNpemU7DQo+PiAgICAgICAgIHVpbnQxNl90IGNoZWNrc3VtOw0KPj4g
ICAgICAgICBpbnQgcjsNCj4+DQo+PiAtICAgICAgIGFkZXYtPm1tYW4uZGlzY292ZXJ5X3Rtcl9z
aXplID0gRElTQ09WRVJZX1RNUl9TSVpFOw0KPj4gLSAgICAgICBhZGV2LT5tbWFuLmRpc2NvdmVy
eV9iaW4gPSBremFsbG9jKGFkZXYtPm1tYW4uZGlzY292ZXJ5X3Rtcl9zaXplLA0KPkdGUF9LRVJO
RUwpOw0KPj4gLSAgICAgICBpZiAoIWFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbikNCj4+ICsgICAg
ICAgYWRldi0+ZGlzY292ZXJ5LmJpbiA9IGt6YWxsb2MoRElTQ09WRVJZX1RNUl9TSVpFLCBHRlBf
S0VSTkVMKTsNCj4+ICsgICAgICAgaWYgKCFhZGV2LT5kaXNjb3ZlcnkuYmluKQ0KPj4gICAgICAg
ICAgICAgICAgIHJldHVybiAtRU5PTUVNOw0KPj4gKyAgICAgICBhZGV2LT5kaXNjb3Zlcnkuc2l6
ZSA9IERJU0NPVkVSWV9UTVJfU0laRTsNCj4+ICsgICAgICAgYWRldi0+ZGlzY292ZXJ5LmRlYnVn
ZnNfYmxvYi5kYXRhID0gYWRldi0+ZGlzY292ZXJ5LmJpbjsNCj4+ICsgICAgICAgYWRldi0+ZGlz
Y292ZXJ5LmRlYnVnZnNfYmxvYi5zaXplID0gYWRldi0+ZGlzY292ZXJ5LnNpemU7DQo+Pg0KPj4g
KyAgICAgICBkaXNjb3ZlcnlfYmluID0gYWRldi0+ZGlzY292ZXJ5LmJpbjsNCj4+ICAgICAgICAg
LyogUmVhZCBmcm9tIGZpbGUgaWYgaXQgaXMgdGhlIHByZWZlcnJlZCBvcHRpb24gKi8NCj4+ICAg
ICAgICAgZndfbmFtZSA9IGFtZGdwdV9kaXNjb3ZlcnlfZ2V0X2Z3X25hbWUoYWRldik7DQo+PiAg
ICAgICAgIGlmIChmd19uYW1lICE9IE5VTEwpIHsNCj4+ICAgICAgICAgICAgICAgICBkcm1fZGJn
KCZhZGV2LT5kZGV2LCAidXNlIGlwIGRpc2NvdmVyeSBpbmZvcm1hdGlvbiBmcm9tIGZpbGUiKTsN
Cj4+IC0gICAgICAgICAgICAgICByID0gYW1kZ3B1X2Rpc2NvdmVyeV9yZWFkX2JpbmFyeV9mcm9t
X2ZpbGUoYWRldiwgYWRldi0NCj4+bW1hbi5kaXNjb3ZlcnlfYmluLCBmd19uYW1lKTsNCj4+ICsg
ICAgICAgICAgICAgICByID0gYW1kZ3B1X2Rpc2NvdmVyeV9yZWFkX2JpbmFyeV9mcm9tX2ZpbGUo
YWRldiwgZGlzY292ZXJ5X2JpbiwNCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZndfbmFtZSk7DQo+PiAgICAgICAgICAgICAgICAg
aWYgKHIpDQo+PiAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIG91dDsNCj4+ICAgICAgICAg
fSBlbHNlIHsNCj4+ICAgICAgICAgICAgICAgICBkcm1fZGJnKCZhZGV2LT5kZGV2LCAidXNlIGlw
IGRpc2NvdmVyeSBpbmZvcm1hdGlvbiBmcm9tIG1lbW9yeSIpOw0KPj4gLSAgICAgICAgICAgICAg
IHIgPSBhbWRncHVfZGlzY292ZXJ5X3JlYWRfYmluYXJ5X2Zyb21fbWVtKA0KPj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgYWRldiwgYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluKTsNCj4+ICsgICAg
ICAgICAgICAgICByID0gYW1kZ3B1X2Rpc2NvdmVyeV9yZWFkX2JpbmFyeV9mcm9tX21lbShhZGV2
LA0KPj4gKyBkaXNjb3ZlcnlfYmluKTsNCj4+ICAgICAgICAgICAgICAgICBpZiAocikNCj4+ICAg
ICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0Ow0KPj4gICAgICAgICB9DQo+Pg0KPj4gICAg
ICAgICAvKiBjaGVjayB0aGUgaXAgZGlzY292ZXJ5IGJpbmFyeSBzaWduYXR1cmUgKi8NCj4+IC0g
ICAgICAgaWYgKCFhbWRncHVfZGlzY292ZXJ5X3ZlcmlmeV9iaW5hcnlfc2lnbmF0dXJlKGFkZXYt
DQo+Pm1tYW4uZGlzY292ZXJ5X2JpbikpIHsNCj4+ICsgICAgICAgaWYgKCFhbWRncHVfZGlzY292
ZXJ5X3ZlcmlmeV9iaW5hcnlfc2lnbmF0dXJlKGRpc2NvdmVyeV9iaW4pKQ0KPj4gKyB7DQo+PiAg
ICAgICAgICAgICAgICAgZGV2X2VycihhZGV2LT5kZXYsDQo+PiAgICAgICAgICAgICAgICAgICAg
ICAgICAiZ2V0IGludmFsaWQgaXAgZGlzY292ZXJ5IGJpbmFyeSBzaWduYXR1cmVcbiIpOw0KPj4g
ICAgICAgICAgICAgICAgIHIgPSAtRUlOVkFMOw0KPj4gICAgICAgICAgICAgICAgIGdvdG8gb3V0
Ow0KPj4gICAgICAgICB9DQo+Pg0KPj4gLSAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVh
ZGVyICopYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluOw0KPj4gKyAgICAgICBiaGRyID0gKHN0cnVj
dCBiaW5hcnlfaGVhZGVyICopZGlzY292ZXJ5X2JpbjsNCj4+DQo+PiAgICAgICAgIG9mZnNldCA9
IG9mZnNldG9mKHN0cnVjdCBiaW5hcnlfaGVhZGVyLCBiaW5hcnlfY2hlY2tzdW0pICsNCj4+ICAg
ICAgICAgICAgICAgICBzaXplb2YoYmhkci0+YmluYXJ5X2NoZWNrc3VtKTsNCj4+ICAgICAgICAg
c2l6ZSA9IGxlMTZfdG9fY3B1KGJoZHItPmJpbmFyeV9zaXplKSAtIG9mZnNldDsNCj4+ICAgICAg
ICAgY2hlY2tzdW0gPSBsZTE2X3RvX2NwdShiaGRyLT5iaW5hcnlfY2hlY2tzdW0pOw0KPj4NCj4+
IC0gICAgICAgaWYgKCFhbWRncHVfZGlzY292ZXJ5X3ZlcmlmeV9jaGVja3N1bShhZGV2LT5tbWFu
LmRpc2NvdmVyeV9iaW4gKw0KPm9mZnNldCwNCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzaXplLCBjaGVja3N1bSkpIHsNCj4+ICsgICAgICAgaWYgKCFh
bWRncHVfZGlzY292ZXJ5X3ZlcmlmeV9jaGVja3N1bShkaXNjb3ZlcnlfYmluICsgb2Zmc2V0LCBz
aXplLA0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNo
ZWNrc3VtKSkgew0KPj4gICAgICAgICAgICAgICAgIGRldl9lcnIoYWRldi0+ZGV2LCAiaW52YWxp
ZCBpcCBkaXNjb3ZlcnkgYmluYXJ5IGNoZWNrc3VtXG4iKTsNCj4+ICAgICAgICAgICAgICAgICBy
ID0gLUVJTlZBTDsNCj4+ICAgICAgICAgICAgICAgICBnb3RvIG91dDsNCj4+IEBAIC01MDEsMTUg
KzUwNiwxNiBAQCBzdGF0aWMgaW50IGFtZGdwdV9kaXNjb3ZlcnlfaW5pdChzdHJ1Y3QNCj4+IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpDQo+Pg0KPj4gICAgICAgICBpZiAob2Zmc2V0KSB7DQo+PiAgICAg
ICAgICAgICAgICAgc3RydWN0IGlwX2Rpc2NvdmVyeV9oZWFkZXIgKmloZHIgPQ0KPj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgKHN0cnVjdCBpcF9kaXNjb3ZlcnlfaGVhZGVyICopKGFkZXYtPm1t
YW4uZGlzY292ZXJ5X2JpbiArDQo+b2Zmc2V0KTsNCj4+ICsgICAgICAgICAgICAgICAgICAgICAg
IChzdHJ1Y3QgaXBfZGlzY292ZXJ5X2hlYWRlciAqKShkaXNjb3ZlcnlfYmluICsNCj4+ICsgb2Zm
c2V0KTsNCj4+ICAgICAgICAgICAgICAgICBpZiAobGUzMl90b19jcHUoaWhkci0+c2lnbmF0dXJl
KSAhPSBESVNDT1ZFUllfVEFCTEVfU0lHTkFUVVJFKSB7DQo+PiAgICAgICAgICAgICAgICAgICAg
ICAgICBkZXZfZXJyKGFkZXYtPmRldiwgImludmFsaWQgaXAgZGlzY292ZXJ5IGRhdGEgdGFibGUg
c2lnbmF0dXJlXG4iKTsNCj4+ICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAtRUlOVkFMOw0K
Pj4gICAgICAgICAgICAgICAgICAgICAgICAgZ290byBvdXQ7DQo+PiAgICAgICAgICAgICAgICAg
fQ0KPj4NCj4+IC0gICAgICAgICAgICAgICBpZiAoIWFtZGdwdV9kaXNjb3ZlcnlfdmVyaWZ5X2No
ZWNrc3VtKGFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbiArDQo+b2Zmc2V0LA0KPj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGUxNl90b19jcHUo
aWhkci0+c2l6ZSksIGNoZWNrc3VtKSkgew0KPj4gKyAgICAgICAgICAgICAgIGlmICghYW1kZ3B1
X2Rpc2NvdmVyeV92ZXJpZnlfY2hlY2tzdW0oZGlzY292ZXJ5X2JpbiArIG9mZnNldCwNCj4+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlMTZf
dG9fY3B1KGloZHItPnNpemUpLA0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY2hlY2tzdW0pKSB7DQo+PiAgICAgICAgICAgICAgICAgICAg
ICAgICBkZXZfZXJyKGFkZXYtPmRldiwgImludmFsaWQgaXAgZGlzY292ZXJ5IGRhdGEgdGFibGUg
Y2hlY2tzdW1cbiIpOw0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgciA9IC1FSU5WQUw7DQo+
PiAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIG91dDsNCj4+IEBAIC01MjIsNyArNTI4LDcg
QEAgc3RhdGljIGludCBhbWRncHVfZGlzY292ZXJ5X2luaXQoc3RydWN0DQo+PiBhbWRncHVfZGV2
aWNlICphZGV2KQ0KPj4NCj4+ICAgICAgICAgaWYgKG9mZnNldCkgew0KPj4gICAgICAgICAgICAg
ICAgIHN0cnVjdCBncHVfaW5mb19oZWFkZXIgKmdoZHIgPQ0KPj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgKHN0cnVjdCBncHVfaW5mb19oZWFkZXIgKikoYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmlu
ICsgb2Zmc2V0KTsNCj4+ICsgICAgICAgICAgICAgICAgICAgICAgIChzdHJ1Y3QgZ3B1X2luZm9f
aGVhZGVyICopKGRpc2NvdmVyeV9iaW4gKw0KPj4gKyBvZmZzZXQpOw0KPj4NCj4+ICAgICAgICAg
ICAgICAgICBpZiAobGUzMl90b19jcHUoZ2hkci0+dGFibGVfaWQpICE9IEdDX1RBQkxFX0lEKSB7
DQo+PiAgICAgICAgICAgICAgICAgICAgICAgICBkZXZfZXJyKGFkZXYtPmRldiwgImludmFsaWQg
aXAgZGlzY292ZXJ5IGdjDQo+PiB0YWJsZSBpZFxuIik7IEBAIC01MzAsOCArNTM2LDkgQEAgc3Rh
dGljIGludCBhbWRncHVfZGlzY292ZXJ5X2luaXQoc3RydWN0DQo+YW1kZ3B1X2RldmljZSAqYWRl
dikNCj4+ICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0Ow0KPj4gICAgICAgICAgICAg
ICAgIH0NCj4+DQo+PiAtICAgICAgICAgICAgICAgaWYgKCFhbWRncHVfZGlzY292ZXJ5X3Zlcmlm
eV9jaGVja3N1bShhZGV2LT5tbWFuLmRpc2NvdmVyeV9iaW4gKw0KPm9mZnNldCwNCj4+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlMzJfdG9f
Y3B1KGdoZHItPnNpemUpLCBjaGVja3N1bSkpIHsNCj4+ICsgICAgICAgICAgICAgICBpZiAoIWFt
ZGdwdV9kaXNjb3ZlcnlfdmVyaWZ5X2NoZWNrc3VtKGRpc2NvdmVyeV9iaW4gKyBvZmZzZXQsDQo+
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBs
ZTMyX3RvX2NwdShnaGRyLT5zaXplKSwNCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrc3VtKSkgew0KPj4gICAgICAgICAgICAgICAg
ICAgICAgICAgZGV2X2VycihhZGV2LT5kZXYsICJpbnZhbGlkIGdjIGRhdGEgdGFibGUgY2hlY2tz
dW1cbiIpOw0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgciA9IC1FSU5WQUw7DQo+PiAgICAg
ICAgICAgICAgICAgICAgICAgICBnb3RvIG91dDsNCj4+IEBAIC01NDQsNyArNTUxLDcgQEAgc3Rh
dGljIGludCBhbWRncHVfZGlzY292ZXJ5X2luaXQoc3RydWN0DQo+PiBhbWRncHVfZGV2aWNlICph
ZGV2KQ0KPj4NCj4+ICAgICAgICAgaWYgKG9mZnNldCkgew0KPj4gICAgICAgICAgICAgICAgIHN0
cnVjdCBoYXJ2ZXN0X2luZm9faGVhZGVyICpoaGRyID0NCj4+IC0gICAgICAgICAgICAgICAgICAg
ICAgIChzdHJ1Y3QgaGFydmVzdF9pbmZvX2hlYWRlciAqKShhZGV2LT5tbWFuLmRpc2NvdmVyeV9i
aW4gKw0KPm9mZnNldCk7DQo+PiArICAgICAgICAgICAgICAgICAgICAgICAoc3RydWN0IGhhcnZl
c3RfaW5mb19oZWFkZXIgKikoZGlzY292ZXJ5X2JpbiArDQo+PiArIG9mZnNldCk7DQo+Pg0KPj4g
ICAgICAgICAgICAgICAgIGlmIChsZTMyX3RvX2NwdShoaGRyLT5zaWduYXR1cmUpICE9IEhBUlZF
U1RfVEFCTEVfU0lHTkFUVVJFKSB7DQo+PiAgICAgICAgICAgICAgICAgICAgICAgICBkZXZfZXJy
KGFkZXYtPmRldiwgImludmFsaWQgaXAgZGlzY292ZXJ5DQo+PiBoYXJ2ZXN0IHRhYmxlIHNpZ25h
dHVyZVxuIik7IEBAIC01NTIsOCArNTU5LDkgQEAgc3RhdGljIGludA0KPmFtZGdwdV9kaXNjb3Zl
cnlfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4+ICAgICAgICAgICAgICAgICAg
ICAgICAgIGdvdG8gb3V0Ow0KPj4gICAgICAgICAgICAgICAgIH0NCj4+DQo+PiAtICAgICAgICAg
ICAgICAgaWYgKCFhbWRncHVfZGlzY292ZXJ5X3ZlcmlmeV9jaGVja3N1bShhZGV2LT5tbWFuLmRp
c2NvdmVyeV9iaW4gKw0KPm9mZnNldCwNCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZihzdHJ1Y3QgaGFydmVzdF90YWJsZSksIGNo
ZWNrc3VtKSkgew0KPj4gKyAgICAgICAgICAgICAgIGlmICghYW1kZ3B1X2Rpc2NvdmVyeV92ZXJp
ZnlfY2hlY2tzdW0oDQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJ5X2Jp
biArIG9mZnNldCwNCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2Yoc3RydWN0
IGhhcnZlc3RfdGFibGUpLCBjaGVja3N1bSkpIHsNCj4+ICAgICAgICAgICAgICAgICAgICAgICAg
IGRldl9lcnIoYWRldi0+ZGV2LCAiaW52YWxpZCBoYXJ2ZXN0IGRhdGEgdGFibGUgY2hlY2tzdW1c
biIpOw0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgciA9IC1FSU5WQUw7DQo+PiAgICAgICAg
ICAgICAgICAgICAgICAgICBnb3RvIG91dDsNCj4+IEBAIC01NjYsNyArNTc0LDcgQEAgc3RhdGlj
IGludCBhbWRncHVfZGlzY292ZXJ5X2luaXQoc3RydWN0DQo+PiBhbWRncHVfZGV2aWNlICphZGV2
KQ0KPj4NCj4+ICAgICAgICAgaWYgKG9mZnNldCkgew0KPj4gICAgICAgICAgICAgICAgIHN0cnVj
dCB2Y25faW5mb19oZWFkZXIgKnZoZHIgPQ0KPj4gLSAgICAgICAgICAgICAgICAgICAgICAgKHN0
cnVjdCB2Y25faW5mb19oZWFkZXIgKikoYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluICsgb2Zmc2V0
KTsNCj4+ICsgICAgICAgICAgICAgICAgICAgICAgIChzdHJ1Y3QgdmNuX2luZm9faGVhZGVyICop
KGRpc2NvdmVyeV9iaW4gKw0KPj4gKyBvZmZzZXQpOw0KPj4NCj4+ICAgICAgICAgICAgICAgICBp
ZiAobGUzMl90b19jcHUodmhkci0+dGFibGVfaWQpICE9IFZDTl9JTkZPX1RBQkxFX0lEKSB7DQo+
PiAgICAgICAgICAgICAgICAgICAgICAgICBkZXZfZXJyKGFkZXYtPmRldiwgImludmFsaWQgaXAg
ZGlzY292ZXJ5IHZjbg0KPj4gdGFibGUgaWRcbiIpOyBAQCAtNTc0LDggKzU4Miw5IEBAIHN0YXRp
YyBpbnQgYW1kZ3B1X2Rpc2NvdmVyeV9pbml0KHN0cnVjdA0KPmFtZGdwdV9kZXZpY2UgKmFkZXYp
DQo+PiAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIG91dDsNCj4+ICAgICAgICAgICAgICAg
ICB9DQo+Pg0KPj4gLSAgICAgICAgICAgICAgIGlmICghYW1kZ3B1X2Rpc2NvdmVyeV92ZXJpZnlf
Y2hlY2tzdW0oYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluICsNCj5vZmZzZXQsDQo+PiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZTMyX3RvX2Nw
dSh2aGRyLT5zaXplX2J5dGVzKSwgY2hlY2tzdW0pKSB7DQo+PiArICAgICAgICAgICAgICAgaWYg
KCFhbWRncHVfZGlzY292ZXJ5X3ZlcmlmeV9jaGVja3N1bSgNCj4+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICBkaXNjb3ZlcnlfYmluICsgb2Zmc2V0LA0KPj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGxlMzJfdG9fY3B1KHZoZHItPnNpemVfYnl0ZXMpLCBjaGVja3N1bSkpDQo+PiAr
IHsNCj4+ICAgICAgICAgICAgICAgICAgICAgICAgIGRldl9lcnIoYWRldi0+ZGV2LCAiaW52YWxp
ZCB2Y24gZGF0YSB0YWJsZSBjaGVja3N1bVxuIik7DQo+PiAgICAgICAgICAgICAgICAgICAgICAg
ICByID0gLUVJTlZBTDsNCj4+ICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0Ow0KPj4g
QEAgLTU4OCw3ICs1OTcsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9kaXNjb3ZlcnlfaW5pdChzdHJ1
Y3QNCj4+IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+Pg0KPj4gICAgICAgICBpZiAoMCAmJiBvZmZz
ZXQpIHsNCj4+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgbWFsbF9pbmZvX2hlYWRlciAqbWhkciA9
DQo+PiAtICAgICAgICAgICAgICAgICAgICAgICAoc3RydWN0IG1hbGxfaW5mb19oZWFkZXIgKiko
YWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluICsgb2Zmc2V0KTsNCj4+ICsgICAgICAgICAgICAgICAg
ICAgICAgIChzdHJ1Y3QgbWFsbF9pbmZvX2hlYWRlciAqKShkaXNjb3ZlcnlfYmluICsNCj4+ICsg
b2Zmc2V0KTsNCj4+DQo+PiAgICAgICAgICAgICAgICAgaWYgKGxlMzJfdG9fY3B1KG1oZHItPnRh
YmxlX2lkKSAhPSBNQUxMX0lORk9fVEFCTEVfSUQpIHsNCj4+ICAgICAgICAgICAgICAgICAgICAg
ICAgIGRldl9lcnIoYWRldi0+ZGV2LCAiaW52YWxpZCBpcCBkaXNjb3ZlcnkgbWFsbA0KPj4gdGFi
bGUgaWRcbiIpOyBAQCAtNTk2LDggKzYwNSw5IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2Rpc2NvdmVy
eV9pbml0KHN0cnVjdA0KPmFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+PiAgICAgICAgICAgICAgICAg
ICAgICAgICBnb3RvIG91dDsNCj4+ICAgICAgICAgICAgICAgICB9DQo+Pg0KPj4gLSAgICAgICAg
ICAgICAgIGlmICghYW1kZ3B1X2Rpc2NvdmVyeV92ZXJpZnlfY2hlY2tzdW0oYWRldi0+bW1hbi5k
aXNjb3ZlcnlfYmluICsNCj5vZmZzZXQsDQo+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBsZTMyX3RvX2NwdShtaGRyLT5zaXplX2J5dGVzKSwg
Y2hlY2tzdW0pKSB7DQo+PiArICAgICAgICAgICAgICAgaWYgKCFhbWRncHVfZGlzY292ZXJ5X3Zl
cmlmeV9jaGVja3N1bSgNCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3Zlcnlf
YmluICsgb2Zmc2V0LA0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlMzJfdG9fY3B1
KG1oZHItPnNpemVfYnl0ZXMpLCBjaGVja3N1bSkpDQo+PiArIHsNCj4+ICAgICAgICAgICAgICAg
ICAgICAgICAgIGRldl9lcnIoYWRldi0+ZGV2LCAiaW52YWxpZCBtYWxsIGRhdGEgdGFibGUgY2hl
Y2tzdW1cbiIpOw0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgciA9IC1FSU5WQUw7DQo+PiAg
ICAgICAgICAgICAgICAgICAgICAgICBnb3RvIG91dDsNCj4+IEBAIC02MDcsOCArNjE3LDggQEAg
c3RhdGljIGludCBhbWRncHVfZGlzY292ZXJ5X2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UNCj4q
YWRldikNCj4+ICAgICAgICAgcmV0dXJuIDA7DQo+Pg0KPj4gIG91dDoNCj4+IC0gICAgICAga2Zy
ZWUoYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluKTsNCj4+IC0gICAgICAgYWRldi0+bW1hbi5kaXNj
b3ZlcnlfYmluID0gTlVMTDsNCj4+ICsgICAgICAga2ZyZWUoYWRldi0+ZGlzY292ZXJ5LmJpbik7
DQo+PiArICAgICAgIGFkZXYtPmRpc2NvdmVyeS5iaW4gPSBOVUxMOw0KPj4gICAgICAgICBpZiAo
KGFtZGdwdV9kaXNjb3ZlcnkgIT0gMikgJiYNCj4+ICAgICAgICAgICAgIChSUkVHMzIobW1JUF9E
SVNDT1ZFUllfVkVSU0lPTikgPT0gNCkpDQo+PiAgICAgICAgICAgICAgICAgYW1kZ3B1X3Jhc19x
dWVyeV9ib290X3N0YXR1cyhhZGV2LCA0KTsgQEAgLTYyMCw4DQo+PiArNjMwLDggQEAgc3RhdGlj
IHZvaWQgYW1kZ3B1X2Rpc2NvdmVyeV9zeXNmc19maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlDQo+
PiAqYWRldik7ICB2b2lkIGFtZGdwdV9kaXNjb3ZlcnlfZmluaShzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldikgIHsNCj4+ICAgICAgICAgYW1kZ3B1X2Rpc2NvdmVyeV9zeXNmc19maW5pKGFkZXYp
Ow0KPj4gLSAgICAgICBrZnJlZShhZGV2LT5tbWFuLmRpc2NvdmVyeV9iaW4pOw0KPj4gLSAgICAg
ICBhZGV2LT5tbWFuLmRpc2NvdmVyeV9iaW4gPSBOVUxMOw0KPj4gKyAgICAgICBrZnJlZShhZGV2
LT5kaXNjb3ZlcnkuYmluKTsNCj4+ICsgICAgICAgYWRldi0+ZGlzY292ZXJ5LmJpbiA9IE5VTEw7
DQo+PiAgfQ0KPj4NCj4+ICBzdGF0aWMgaW50IGFtZGdwdV9kaXNjb3ZlcnlfdmFsaWRhdGVfaXAo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+PiBAQCAtNjQ2LDYgKzY1Niw3IEBAIHN0YXRp
YyBpbnQgYW1kZ3B1X2Rpc2NvdmVyeV92YWxpZGF0ZV9pcChzdHJ1Y3QNCj4+IGFtZGdwdV9kZXZp
Y2UgKmFkZXYsICBzdGF0aWMgdm9pZA0KPmFtZGdwdV9kaXNjb3ZlcnlfcmVhZF9oYXJ2ZXN0X2Jp
dF9wZXJfaXAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+PiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdA0KPj4gKnZjbl9oYXJ2ZXN0
X2NvdW50KSAgew0KPj4gKyAgICAgICB1aW50OF90ICpkaXNjb3ZlcnlfYmluID0gYWRldi0+ZGlz
Y292ZXJ5LmJpbjsNCj4+ICAgICAgICAgc3RydWN0IGJpbmFyeV9oZWFkZXIgKmJoZHI7DQo+PiAg
ICAgICAgIHN0cnVjdCBpcF9kaXNjb3ZlcnlfaGVhZGVyICppaGRyOw0KPj4gICAgICAgICBzdHJ1
Y3QgZGllX2hlYWRlciAqZGhkcjsNCj4+IEBAIC02NTUsMjEgKzY2NiwyMSBAQCBzdGF0aWMgdm9p
ZA0KPmFtZGdwdV9kaXNjb3ZlcnlfcmVhZF9oYXJ2ZXN0X2JpdF9wZXJfaXAoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYsDQo+PiAgICAgICAgIHVpbnQ4X3QgaW5zdDsNCj4+ICAgICAgICAgaW50
IGksIGo7DQo+Pg0KPj4gLSAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVhZGVyICopYWRl
di0+bW1hbi5kaXNjb3ZlcnlfYmluOw0KPj4gLSAgICAgICBpaGRyID0gKHN0cnVjdCBpcF9kaXNj
b3ZlcnlfaGVhZGVyICopKGFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbiArDQo+PiAtICAgICAgICAg
ICAgICAgICAgICAgICBsZTE2X3RvX2NwdShiaGRyLT50YWJsZV9saXN0W0lQX0RJU0NPVkVSWV0u
b2Zmc2V0KSk7DQo+PiArICAgICAgIGJoZHIgPSAoc3RydWN0IGJpbmFyeV9oZWFkZXIgKilkaXNj
b3ZlcnlfYmluOw0KPj4gKyAgICAgICBpaGRyID0gKHN0cnVjdCBpcF9kaXNjb3ZlcnlfaGVhZGVy
DQo+PiArICAgICAgICAgICAgICAgICAgICAgICAqKShkaXNjb3ZlcnlfYmluICsNCj4+ICsNCj4+
ICsgbGUxNl90b19jcHUoYmhkci0+dGFibGVfbGlzdFtJUF9ESVNDT1ZFUlldLm9mZnNldCkpOw0K
Pj4gICAgICAgICBudW1fZGllcyA9IGxlMTZfdG9fY3B1KGloZHItPm51bV9kaWVzKTsNCj4+DQo+
PiAgICAgICAgIC8qIHNjYW4gaGFydmVzdCBiaXQgb2YgYWxsIElQIGRhdGEgc3RydWN0dXJlcyAq
Lw0KPj4gICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtX2RpZXM7IGkrKykgew0KPj4gICAgICAg
ICAgICAgICAgIGRpZV9vZmZzZXQgPSBsZTE2X3RvX2NwdShpaGRyLT5kaWVfaW5mb1tpXS5kaWVf
b2Zmc2V0KTsNCj4+IC0gICAgICAgICAgICAgICBkaGRyID0gKHN0cnVjdCBkaWVfaGVhZGVyICop
KGFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbiArIGRpZV9vZmZzZXQpOw0KPj4gKyAgICAgICAgICAg
ICAgIGRoZHIgPSAoc3RydWN0IGRpZV9oZWFkZXIgKikoZGlzY292ZXJ5X2JpbiArDQo+PiArIGRp
ZV9vZmZzZXQpOw0KPj4gICAgICAgICAgICAgICAgIG51bV9pcHMgPSBsZTE2X3RvX2NwdShkaGRy
LT5udW1faXBzKTsNCj4+ICAgICAgICAgICAgICAgICBpcF9vZmZzZXQgPSBkaWVfb2Zmc2V0ICsg
c2l6ZW9mKCpkaGRyKTsNCj4+DQo+PiAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IG51
bV9pcHM7IGorKykgew0KPj4gLSAgICAgICAgICAgICAgICAgICAgICAgaXAgPSAoc3RydWN0IGlw
ICopKGFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbiArDQo+PiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaXBfb2Zmc2V0KTsNCj4+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGlwID0gKHN0cnVjdCBpcCAqKShkaXNjb3ZlcnlfYmluICsgaXBfb2Zmc2V0KTsNCj4+ICAg
ICAgICAgICAgICAgICAgICAgICAgIGluc3QgPSBpcC0+bnVtYmVyX2luc3RhbmNlOw0KPj4gICAg
ICAgICAgICAgICAgICAgICAgICAgaHdfaWQgPSBsZTE2X3RvX2NwdShpcC0+aHdfaWQpOw0KPj4g
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZGdwdV9kaXNjb3ZlcnlfdmFsaWRhdGVfaXAo
YWRldiwgaW5zdCwNCj4+IGh3X2lkKSkgQEAgLTcxMSwxMyArNzIyLDE0IEBAIHN0YXRpYyB2b2lk
DQo+YW1kZ3B1X2Rpc2NvdmVyeV9yZWFkX2Zyb21faGFydmVzdF90YWJsZShzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiwNCj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdWludDMyX3QgKnZjbl9oYXJ2ZXN0X2NvdW50LA0KPj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdA0KPj4g
KnVtY19oYXJ2ZXN0X2NvdW50KSAgew0KPj4gKyAgICAgICB1aW50OF90ICpkaXNjb3ZlcnlfYmlu
ID0gYWRldi0+ZGlzY292ZXJ5LmJpbjsNCj4+ICAgICAgICAgc3RydWN0IGJpbmFyeV9oZWFkZXIg
KmJoZHI7DQo+PiAgICAgICAgIHN0cnVjdCBoYXJ2ZXN0X3RhYmxlICpoYXJ2ZXN0X2luZm87DQo+
PiAgICAgICAgIHUxNiBvZmZzZXQ7DQo+PiAgICAgICAgIGludCBpOw0KPj4gICAgICAgICB1aW50
MzJfdCB1bWNfaGFydmVzdF9jb25maWcgPSAwOw0KPj4NCj4+IC0gICAgICAgYmhkciA9IChzdHJ1
Y3QgYmluYXJ5X2hlYWRlciAqKWFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbjsNCj4+ICsgICAgICAg
YmhkciA9IChzdHJ1Y3QgYmluYXJ5X2hlYWRlciAqKWRpc2NvdmVyeV9iaW47DQo+PiAgICAgICAg
IG9mZnNldCA9IGxlMTZfdG9fY3B1KGJoZHItPnRhYmxlX2xpc3RbSEFSVkVTVF9JTkZPXS5vZmZz
ZXQpOw0KPj4NCj4+ICAgICAgICAgaWYgKCFvZmZzZXQpIHsNCj4+IEBAIC03MjUsNyArNzM3LDcg
QEAgc3RhdGljIHZvaWQNCj5hbWRncHVfZGlzY292ZXJ5X3JlYWRfZnJvbV9oYXJ2ZXN0X3RhYmxl
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KPj4gICAgICAgICAgICAgICAgIHJldHVybjsN
Cj4+ICAgICAgICAgfQ0KPj4NCj4+IC0gICAgICAgaGFydmVzdF9pbmZvID0gKHN0cnVjdCBoYXJ2
ZXN0X3RhYmxlICopKGFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbiArIG9mZnNldCk7DQo+PiArICAg
ICAgIGhhcnZlc3RfaW5mbyA9IChzdHJ1Y3QgaGFydmVzdF90YWJsZSAqKShkaXNjb3ZlcnlfYmlu
ICsNCj4+ICsgb2Zmc2V0KTsNCj4+DQo+PiAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAzMjsgaSsr
KSB7DQo+PiAgICAgICAgICAgICAgICAgaWYgKGxlMTZfdG9fY3B1KGhhcnZlc3RfaW5mby0+bGlz
dFtpXS5od19pZCkgPT0gMCkgQEANCj4+IC0xMDIxLDggKzEwMzMsOCBAQCBzdGF0aWMgdm9pZCBp
cF9kaXNjX3JlbGVhc2Uoc3RydWN0IGtvYmplY3QgKmtvYmopDQo+PiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga29iaik7DQo+PiAgICAgICAg
IHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gaXBfdG9wLT5hZGV2Ow0KPj4NCj4+IC0gICAg
ICAgYWRldi0+aXBfdG9wID0gTlVMTDsNCj4+ICAgICAgICAga2ZyZWUoaXBfdG9wKTsNCj4+ICsg
ICAgICAgYWRldi0+ZGlzY292ZXJ5LmlwX3RvcCA9IE5VTEw7DQo+PiAgfQ0KPj4NCj4+ICBzdGF0
aWMgdWludDhfdCBhbWRncHVfZGlzY292ZXJ5X2dldF9oYXJ2ZXN0X2luZm8oc3RydWN0IGFtZGdw
dV9kZXZpY2UNCj4+ICphZGV2LCBAQCAtMTA2MCw2ICsxMDcyLDcgQEAgc3RhdGljIGludCBhbWRn
cHVfZGlzY292ZXJ5X3N5c2ZzX2lwcyhzdHJ1Y3QNCj5hbWRncHVfZGV2aWNlICphZGV2LA0KPj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplX3QgX2lwX29m
ZnNldCwgY29uc3QgaW50IG51bV9pcHMsDQo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGJvb2wgcmVnX2Jhc2VfNjQpICB7DQo+PiArICAgICAgIHVpbnQ4X3QgKmRpc2Nv
dmVyeV9iaW4gPSBhZGV2LT5kaXNjb3ZlcnkuYmluOw0KPj4gICAgICAgICBpbnQgaWksIGpqLCBr
aywgcmVzOw0KPj4gICAgICAgICB1aW50MTZfdCBod19pZDsNCj4+ICAgICAgICAgdWludDhfdCBp
bnN0Ow0KPj4gQEAgLTEwNzcsNyArMTA5MCw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2Rpc2NvdmVy
eV9zeXNmc19pcHMoc3RydWN0DQo+YW1kZ3B1X2RldmljZSAqYWRldiwNCj4+ICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCBpcF92NCAqaXA7DQo+PiAgICAgICAgICAgICAgICAgICAgICAg
ICBzdHJ1Y3QgaXBfaHdfaW5zdGFuY2UgKmlwX2h3X2luc3RhbmNlOw0KPj4NCj4+IC0gICAgICAg
ICAgICAgICAgICAgICAgIGlwID0gKHN0cnVjdCBpcF92NCAqKShhZGV2LT5tbWFuLmRpc2NvdmVy
eV9iaW4gKyBpcF9vZmZzZXQpOw0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgaXAgPSAoc3Ry
dWN0IGlwX3Y0ICopKGRpc2NvdmVyeV9iaW4gKw0KPj4gKyBpcF9vZmZzZXQpOw0KPj4gICAgICAg
ICAgICAgICAgICAgICAgICAgaW5zdCA9IGlwLT5pbnN0YW5jZV9udW1iZXI7DQo+PiAgICAgICAg
ICAgICAgICAgICAgICAgICBod19pZCA9IGxlMTZfdG9fY3B1KGlwLT5od19pZCk7DQo+PiAgICAg
ICAgICAgICAgICAgICAgICAgICBpZiAoYW1kZ3B1X2Rpc2NvdmVyeV92YWxpZGF0ZV9pcChhZGV2
LCBpbnN0LA0KPj4gaHdfaWQpIHx8IEBAIC0xMTY0LDE3ICsxMTc3LDIwIEBAIHN0YXRpYyBpbnQN
Cj4+IGFtZGdwdV9kaXNjb3Zlcnlfc3lzZnNfaXBzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LA0KPj4NCj4+ICBzdGF0aWMgaW50IGFtZGdwdV9kaXNjb3Zlcnlfc3lzZnNfcmVjdXJzZShzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4+IHsNCj4+ICsgICAgICAgc3RydWN0IGlwX2Rpc2Nv
dmVyeV90b3AgKmlwX3RvcCA9IGFkZXYtPmRpc2NvdmVyeS5pcF90b3A7DQo+PiArICAgICAgIHVp
bnQ4X3QgKmRpc2NvdmVyeV9iaW4gPSBhZGV2LT5kaXNjb3ZlcnkuYmluOw0KPj4gICAgICAgICBz
dHJ1Y3QgYmluYXJ5X2hlYWRlciAqYmhkcjsNCj4+ICAgICAgICAgc3RydWN0IGlwX2Rpc2NvdmVy
eV9oZWFkZXIgKmloZHI7DQo+PiAgICAgICAgIHN0cnVjdCBkaWVfaGVhZGVyICpkaGRyOw0KPj4g
LSAgICAgICBzdHJ1Y3Qga3NldCAqZGllX2tzZXQgPSAmYWRldi0+aXBfdG9wLT5kaWVfa3NldDsN
Cj4+ICsgICAgICAgc3RydWN0IGtzZXQgKmRpZV9rc2V0ID0gJmlwX3RvcC0+ZGllX2tzZXQ7DQo+
PiAgICAgICAgIHUxNiBudW1fZGllcywgZGllX29mZnNldCwgbnVtX2lwczsNCj4+ICAgICAgICAg
c2l6ZV90IGlwX29mZnNldDsNCj4+ICAgICAgICAgaW50IGlpLCByZXM7DQo+Pg0KPj4gLSAgICAg
ICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVhZGVyICopYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmlu
Ow0KPj4gLSAgICAgICBpaGRyID0gKHN0cnVjdCBpcF9kaXNjb3ZlcnlfaGVhZGVyICopKGFkZXYt
Pm1tYW4uZGlzY292ZXJ5X2JpbiArDQo+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgbGUxNl90b19jcHUoYmhkci0+dGFibGVfbGlzdFtJUF9ESVNDT1ZFUlld
Lm9mZnNldCkpOw0KPj4gKyAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVhZGVyICopZGlz
Y292ZXJ5X2JpbjsNCj4+ICsgICAgICAgaWhkciA9IChzdHJ1Y3QgaXBfZGlzY292ZXJ5X2hlYWRl
cg0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgKikoZGlzY292ZXJ5X2JpbiArDQo+PiArDQo+
PiArIGxlMTZfdG9fY3B1KGJoZHItPnRhYmxlX2xpc3RbSVBfRElTQ09WRVJZXS5vZmZzZXQpKTsN
Cj4+ICAgICAgICAgbnVtX2RpZXMgPSBsZTE2X3RvX2NwdShpaGRyLT5udW1fZGllcyk7DQo+Pg0K
Pj4gICAgICAgICBEUk1fREVCVUcoIm51bWJlciBvZiBkaWVzOiAlZFxuIiwgbnVtX2RpZXMpOyBA
QCAtMTE4Myw3DQo+PiArMTE5OSw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2Rpc2NvdmVyeV9zeXNm
c19yZWN1cnNlKHN0cnVjdCBhbWRncHVfZGV2aWNlDQo+KmFkZXYpDQo+PiAgICAgICAgICAgICAg
ICAgc3RydWN0IGlwX2RpZV9lbnRyeSAqaXBfZGllX2VudHJ5Ow0KPj4NCj4+ICAgICAgICAgICAg
ICAgICBkaWVfb2Zmc2V0ID0gbGUxNl90b19jcHUoaWhkci0+ZGllX2luZm9baWldLmRpZV9vZmZz
ZXQpOw0KPj4gLSAgICAgICAgICAgICAgIGRoZHIgPSAoc3RydWN0IGRpZV9oZWFkZXIgKikoYWRl
di0+bW1hbi5kaXNjb3ZlcnlfYmluICsgZGllX29mZnNldCk7DQo+PiArICAgICAgICAgICAgICAg
ZGhkciA9IChzdHJ1Y3QgZGllX2hlYWRlciAqKShkaXNjb3ZlcnlfYmluICsNCj4+ICsgZGllX29m
ZnNldCk7DQo+PiAgICAgICAgICAgICAgICAgbnVtX2lwcyA9IGxlMTZfdG9fY3B1KGRoZHItPm51
bV9pcHMpOw0KPj4gICAgICAgICAgICAgICAgIGlwX29mZnNldCA9IGRpZV9vZmZzZXQgKyBzaXpl
b2YoKmRoZHIpOw0KPj4NCj4+IEBAIC0xMjE3LDMwICsxMjMzLDMyIEBAIHN0YXRpYyBpbnQNCj4+
IGFtZGdwdV9kaXNjb3Zlcnlfc3lzZnNfcmVjdXJzZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
dikNCj4+DQo+PiAgc3RhdGljIGludCBhbWRncHVfZGlzY292ZXJ5X3N5c2ZzX2luaXQoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpICB7DQo+PiArICAgICAgIHVpbnQ4X3QgKmRpc2NvdmVyeV9i
aW4gPSBhZGV2LT5kaXNjb3ZlcnkuYmluOw0KPj4gKyAgICAgICBzdHJ1Y3QgaXBfZGlzY292ZXJ5
X3RvcCAqaXBfdG9wOw0KPj4gICAgICAgICBzdHJ1Y3Qga3NldCAqZGllX2tzZXQ7DQo+PiAgICAg
ICAgIGludCByZXMsIGlpOw0KPj4NCj4+IC0gICAgICAgaWYgKCFhZGV2LT5tbWFuLmRpc2NvdmVy
eV9iaW4pDQo+PiArICAgICAgIGlmICghZGlzY292ZXJ5X2JpbikNCj4+ICAgICAgICAgICAgICAg
ICByZXR1cm4gLUVJTlZBTDsNCj4+DQo+PiAtICAgICAgIGFkZXYtPmlwX3RvcCA9IGt6YWxsb2Mo
c2l6ZW9mKCphZGV2LT5pcF90b3ApLCBHRlBfS0VSTkVMKTsNCj4+IC0gICAgICAgaWYgKCFhZGV2
LT5pcF90b3ApDQo+PiArICAgICAgIGlwX3RvcCA9IGt6YWxsb2Moc2l6ZW9mKCppcF90b3ApLCBH
RlBfS0VSTkVMKTsNCj4+ICsgICAgICAgaWYgKCFpcF90b3ApDQo+PiAgICAgICAgICAgICAgICAg
cmV0dXJuIC1FTk9NRU07DQo+Pg0KPj4gLSAgICAgICBhZGV2LT5pcF90b3AtPmFkZXYgPSBhZGV2
Ow0KPj4gLQ0KPj4gLSAgICAgICByZXMgPSBrb2JqZWN0X2luaXRfYW5kX2FkZCgmYWRldi0+aXBf
dG9wLT5rb2JqLCAmaXBfZGlzY292ZXJ5X2t0eXBlLA0KPj4gKyAgICAgICBpcF90b3AtPmFkZXYg
PSBhZGV2Ow0KPj4gKyAgICAgICBhZGV2LT5kaXNjb3ZlcnkuaXBfdG9wID0gaXBfdG9wOw0KPj4g
KyAgICAgICByZXMgPSBrb2JqZWN0X2luaXRfYW5kX2FkZCgmaXBfdG9wLT5rb2JqLCAmaXBfZGlz
Y292ZXJ5X2t0eXBlLA0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmYWRl
di0+ZGV2LT5rb2JqLCAiaXBfZGlzY292ZXJ5Iik7DQo+PiAgICAgICAgIGlmIChyZXMpIHsNCj4+
ICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIkNvdWxkbid0IGluaXQgYW5kIGFkZCBpcF9kaXNj
b3ZlcnkvIik7DQo+PiAgICAgICAgICAgICAgICAgZ290byBFcnI7DQo+PiAgICAgICAgIH0NCj4+
DQo+PiAtICAgICAgIGRpZV9rc2V0ID0gJmFkZXYtPmlwX3RvcC0+ZGllX2tzZXQ7DQo+PiArICAg
ICAgIGRpZV9rc2V0ID0gJmlwX3RvcC0+ZGllX2tzZXQ7DQo+PiAgICAgICAgIGtvYmplY3Rfc2V0
X25hbWUoJmRpZV9rc2V0LT5rb2JqLCAiJXMiLCAiZGllIik7DQo+PiAtICAgICAgIGRpZV9rc2V0
LT5rb2JqLnBhcmVudCA9ICZhZGV2LT5pcF90b3AtPmtvYmo7DQo+PiArICAgICAgIGRpZV9rc2V0
LT5rb2JqLnBhcmVudCA9ICZpcF90b3AtPmtvYmo7DQo+PiAgICAgICAgIGRpZV9rc2V0LT5rb2Jq
Lmt0eXBlID0gJmRpZV9rb2JqX2t0eXBlOw0KPj4gLSAgICAgICByZXMgPSBrc2V0X3JlZ2lzdGVy
KCZhZGV2LT5pcF90b3AtPmRpZV9rc2V0KTsNCj4+ICsgICAgICAgcmVzID0ga3NldF9yZWdpc3Rl
cigmaXBfdG9wLT5kaWVfa3NldCk7DQo+PiAgICAgICAgIGlmIChyZXMpIHsNCj4+ICAgICAgICAg
ICAgICAgICBEUk1fRVJST1IoIkNvdWxkbid0IHJlZ2lzdGVyIGRpZV9rc2V0Iik7DQo+PiAgICAg
ICAgICAgICAgICAgZ290byBFcnI7DQo+PiBAQCAtMTI1NCw3ICsxMjcyLDcgQEAgc3RhdGljIGlu
dCBhbWRncHVfZGlzY292ZXJ5X3N5c2ZzX2luaXQoc3RydWN0DQo+PiBhbWRncHVfZGV2aWNlICph
ZGV2KQ0KPj4NCj4+ICAgICAgICAgcmV0dXJuIHJlczsNCj4+ICBFcnI6DQo+PiAtICAgICAgIGtv
YmplY3RfcHV0KCZhZGV2LT5pcF90b3AtPmtvYmopOw0KPj4gKyAgICAgICBrb2JqZWN0X3B1dCgm
aXBfdG9wLT5rb2JqKTsNCj4+ICAgICAgICAgcmV0dXJuIHJlczsNCj4+ICB9DQo+Pg0KPj4gQEAg
LTEyOTksMTAgKzEzMTcsMTEgQEAgc3RhdGljIHZvaWQNCj4+IGFtZGdwdV9kaXNjb3Zlcnlfc3lz
ZnNfZGllX2ZyZWUoc3RydWN0IGlwX2RpZV9lbnRyeSAqaXBfZGllX2VudHJ5KQ0KPj4NCj4+ICBz
dGF0aWMgdm9pZCBhbWRncHVfZGlzY292ZXJ5X3N5c2ZzX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpDQo+PiB7DQo+PiArICAgICAgIHN0cnVjdCBpcF9kaXNjb3ZlcnlfdG9wICppcF90
b3AgPSBhZGV2LT5kaXNjb3ZlcnkuaXBfdG9wOw0KPj4gICAgICAgICBzdHJ1Y3QgbGlzdF9oZWFk
ICplbCwgKnRtcDsNCj4+ICAgICAgICAgc3RydWN0IGtzZXQgKmRpZV9rc2V0Ow0KPj4NCj4+IC0g
ICAgICAgZGllX2tzZXQgPSAmYWRldi0+aXBfdG9wLT5kaWVfa3NldDsNCj4+ICsgICAgICAgZGll
X2tzZXQgPSAmaXBfdG9wLT5kaWVfa3NldDsNCj4+ICAgICAgICAgc3Bpbl9sb2NrKCZkaWVfa3Nl
dC0+bGlzdF9sb2NrKTsNCj4+ICAgICAgICAgbGlzdF9mb3JfZWFjaF9wcmV2X3NhZmUoZWwsIHRt
cCwgJmRpZV9rc2V0LT5saXN0KSB7DQo+PiAgICAgICAgICAgICAgICAgbGlzdF9kZWxfaW5pdChl
bCk7DQo+PiBAQCAtMTMxMSw4ICsxMzMwLDggQEAgc3RhdGljIHZvaWQgYW1kZ3B1X2Rpc2NvdmVy
eV9zeXNmc19maW5pKHN0cnVjdA0KPmFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+PiAgICAgICAgICAg
ICAgICAgc3Bpbl9sb2NrKCZkaWVfa3NldC0+bGlzdF9sb2NrKTsNCj4+ICAgICAgICAgfQ0KPj4g
ICAgICAgICBzcGluX3VubG9jaygmZGllX2tzZXQtPmxpc3RfbG9jayk7DQo+PiAtICAgICAgIGtv
YmplY3RfcHV0KCZhZGV2LT5pcF90b3AtPmRpZV9rc2V0LmtvYmopOw0KPj4gLSAgICAgICBrb2Jq
ZWN0X3B1dCgmYWRldi0+aXBfdG9wLT5rb2JqKTsNCj4+ICsgICAgICAga29iamVjdF9wdXQoJmlw
X3RvcC0+ZGllX2tzZXQua29iaik7DQo+PiArICAgICAgIGtvYmplY3RfcHV0KCZpcF90b3AtPmtv
YmopOw0KPj4gIH0NCj4+DQo+PiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0gKi8gQEAgLQ0KPjEzMjMsNg0KPj4gKzEzNDIsNyBAQCBzdGF0aWMg
aW50IGFtZGdwdV9kaXNjb3ZlcnlfcmVnX2Jhc2VfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZQ0K
PiphZGV2KQ0KPj4gICAgICAgICBzdHJ1Y3QgYmluYXJ5X2hlYWRlciAqYmhkcjsNCj4+ICAgICAg
ICAgc3RydWN0IGlwX2Rpc2NvdmVyeV9oZWFkZXIgKmloZHI7DQo+PiAgICAgICAgIHN0cnVjdCBk
aWVfaGVhZGVyICpkaGRyOw0KPj4gKyAgICAgICB1aW50OF90ICpkaXNjb3ZlcnlfYmluOw0KPj4g
ICAgICAgICBzdHJ1Y3QgaXBfdjQgKmlwOw0KPj4gICAgICAgICB1aW50MTZfdCBkaWVfb2Zmc2V0
Ow0KPj4gICAgICAgICB1aW50MTZfdCBpcF9vZmZzZXQ7DQo+PiBAQCAtMTMzOCwyMiArMTM1OCwy
MyBAQCBzdGF0aWMgaW50IGFtZGdwdV9kaXNjb3ZlcnlfcmVnX2Jhc2VfaW5pdChzdHJ1Y3QNCj5h
bWRncHVfZGV2aWNlICphZGV2KQ0KPj4gICAgICAgICByID0gYW1kZ3B1X2Rpc2NvdmVyeV9pbml0
KGFkZXYpOw0KPj4gICAgICAgICBpZiAocikNCj4+ICAgICAgICAgICAgICAgICByZXR1cm4gcjsN
Cj4+IC0NCj4+ICsgICAgICAgZGlzY292ZXJ5X2JpbiA9IGFkZXYtPmRpc2NvdmVyeS5iaW47DQo+
PiAgICAgICAgIHdhZmxfdmVyID0gMDsNCj4+ICAgICAgICAgYWRldi0+Z2Z4LnhjY19tYXNrID0g
MDsNCj4+ICAgICAgICAgYWRldi0+c2RtYS5zZG1hX21hc2sgPSAwOw0KPj4gICAgICAgICBhZGV2
LT52Y24uaW5zdF9tYXNrID0gMDsNCj4+ICAgICAgICAgYWRldi0+anBlZy5pbnN0X21hc2sgPSAw
Ow0KPj4gLSAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVhZGVyICopYWRldi0+bW1hbi5k
aXNjb3ZlcnlfYmluOw0KPj4gLSAgICAgICBpaGRyID0gKHN0cnVjdCBpcF9kaXNjb3ZlcnlfaGVh
ZGVyICopKGFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbiArDQo+PiAtICAgICAgICAgICAgICAgICAg
ICAgICBsZTE2X3RvX2NwdShiaGRyLT50YWJsZV9saXN0W0lQX0RJU0NPVkVSWV0ub2Zmc2V0KSk7
DQo+PiArICAgICAgIGJoZHIgPSAoc3RydWN0IGJpbmFyeV9oZWFkZXIgKilkaXNjb3ZlcnlfYmlu
Ow0KPj4gKyAgICAgICBpaGRyID0gKHN0cnVjdCBpcF9kaXNjb3ZlcnlfaGVhZGVyDQo+PiArICAg
ICAgICAgICAgICAgICAgICAgICAqKShkaXNjb3ZlcnlfYmluICsNCj4+ICsNCj4+ICsgbGUxNl90
b19jcHUoYmhkci0+dGFibGVfbGlzdFtJUF9ESVNDT1ZFUlldLm9mZnNldCkpOw0KPj4gICAgICAg
ICBudW1fZGllcyA9IGxlMTZfdG9fY3B1KGloZHItPm51bV9kaWVzKTsNCj4+DQo+PiAgICAgICAg
IERSTV9ERUJVRygibnVtYmVyIG9mIGRpZXM6ICVkXG4iLCBudW1fZGllcyk7DQo+Pg0KPj4gICAg
ICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtX2RpZXM7IGkrKykgew0KPj4gICAgICAgICAgICAgICAg
IGRpZV9vZmZzZXQgPSBsZTE2X3RvX2NwdShpaGRyLT5kaWVfaW5mb1tpXS5kaWVfb2Zmc2V0KTsN
Cj4+IC0gICAgICAgICAgICAgICBkaGRyID0gKHN0cnVjdCBkaWVfaGVhZGVyICopKGFkZXYtPm1t
YW4uZGlzY292ZXJ5X2JpbiArIGRpZV9vZmZzZXQpOw0KPj4gKyAgICAgICAgICAgICAgIGRoZHIg
PSAoc3RydWN0IGRpZV9oZWFkZXIgKikoZGlzY292ZXJ5X2JpbiArDQo+PiArIGRpZV9vZmZzZXQp
Ow0KPj4gICAgICAgICAgICAgICAgIG51bV9pcHMgPSBsZTE2X3RvX2NwdShkaGRyLT5udW1faXBz
KTsNCj4+ICAgICAgICAgICAgICAgICBpcF9vZmZzZXQgPSBkaWVfb2Zmc2V0ICsgc2l6ZW9mKCpk
aGRyKTsNCj4+DQo+PiBAQCAtMTM2Nyw3ICsxMzg4LDcgQEAgc3RhdGljIGludCBhbWRncHVfZGlz
Y292ZXJ5X3JlZ19iYXNlX2luaXQoc3RydWN0DQo+YW1kZ3B1X2RldmljZSAqYWRldikNCj4+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGUxNl90b19jcHUoZGhkci0+ZGllX2lkKSwg
bnVtX2lwcyk7DQo+Pg0KPj4gICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBudW1faXBz
OyBqKyspIHsNCj4+IC0gICAgICAgICAgICAgICAgICAgICAgIGlwID0gKHN0cnVjdCBpcF92NCAq
KShhZGV2LT5tbWFuLmRpc2NvdmVyeV9iaW4gKyBpcF9vZmZzZXQpOw0KPj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgaXAgPSAoc3RydWN0IGlwX3Y0ICopKGRpc2NvdmVyeV9iaW4gKw0KPj4gKyBp
cF9vZmZzZXQpOw0KPj4NCj4+ICAgICAgICAgICAgICAgICAgICAgICAgIGluc3QgPSBpcC0+aW5z
dGFuY2VfbnVtYmVyOw0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgaHdfaWQgPSBsZTE2X3Rv
X2NwdShpcC0+aHdfaWQpOyBAQCAtMTUxNywxNg0KPj4gKzE1MzgsMTYgQEAgc3RhdGljIGludCBh
bWRncHVfZGlzY292ZXJ5X3JlZ19iYXNlX2luaXQoc3RydWN0DQo+PiBhbWRncHVfZGV2aWNlICph
ZGV2KQ0KPj4NCj4+ICBzdGF0aWMgdm9pZCBhbWRncHVfZGlzY292ZXJ5X2hhcnZlc3RfaXAoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+PiB7DQo+PiArICAgICAgIHVpbnQ4X3QgKmRpc2Nv
dmVyeV9iaW4gPSBhZGV2LT5kaXNjb3ZlcnkuYmluOw0KPj4gICAgICAgICBzdHJ1Y3QgaXBfZGlz
Y292ZXJ5X2hlYWRlciAqaWhkcjsNCj4+ICAgICAgICAgc3RydWN0IGJpbmFyeV9oZWFkZXIgKmJo
ZHI7DQo+PiAgICAgICAgIGludCB2Y25faGFydmVzdF9jb3VudCA9IDA7DQo+PiAgICAgICAgIGlu
dCB1bWNfaGFydmVzdF9jb3VudCA9IDA7DQo+PiAgICAgICAgIHVpbnQxNl90IG9mZnNldCwgaWhk
cl92ZXI7DQo+Pg0KPj4gLSAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVhZGVyICopYWRl
di0+bW1hbi5kaXNjb3ZlcnlfYmluOw0KPj4gKyAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlf
aGVhZGVyICopZGlzY292ZXJ5X2JpbjsNCj4+ICAgICAgICAgb2Zmc2V0ID0gbGUxNl90b19jcHUo
Ymhkci0+dGFibGVfbGlzdFtJUF9ESVNDT1ZFUlldLm9mZnNldCk7DQo+PiAtICAgICAgIGloZHIg
PSAoc3RydWN0IGlwX2Rpc2NvdmVyeV9oZWFkZXIgKikoYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmlu
ICsNCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZz
ZXQpOw0KPj4gKyAgICAgICBpaGRyID0gKHN0cnVjdCBpcF9kaXNjb3ZlcnlfaGVhZGVyICopKGRp
c2NvdmVyeV9iaW4gKyBvZmZzZXQpOw0KPj4gICAgICAgICBpaGRyX3ZlciA9IGxlMTZfdG9fY3B1
KGloZHItPnZlcnNpb24pOw0KPj4gICAgICAgICAvKg0KPj4gICAgICAgICAgKiBIYXJ2ZXN0IHRh
YmxlIGRvZXMgbm90IGZpdCBOYXZpMXggYW5kIGxlZ2FjeSBHUFVzLCBAQA0KPj4gLTE1NzMsMjIg
KzE1OTQsMjMgQEAgdW5pb24gZ2NfaW5mbyB7DQo+Pg0KPj4gIHN0YXRpYyBpbnQgYW1kZ3B1X2Rp
c2NvdmVyeV9nZXRfZ2Z4X2luZm8oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+PiB7DQo+
PiArICAgICAgIHVpbnQ4X3QgKmRpc2NvdmVyeV9iaW4gPSBhZGV2LT5kaXNjb3ZlcnkuYmluOw0K
Pj4gICAgICAgICBzdHJ1Y3QgYmluYXJ5X2hlYWRlciAqYmhkcjsNCj4+ICAgICAgICAgdW5pb24g
Z2NfaW5mbyAqZ2NfaW5mbzsNCj4+ICAgICAgICAgdTE2IG9mZnNldDsNCj4+DQo+PiAtICAgICAg
IGlmICghYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluKSB7DQo+PiArICAgICAgIGlmICghZGlzY292
ZXJ5X2Jpbikgew0KPj4gICAgICAgICAgICAgICAgIERSTV9FUlJPUigiaXAgZGlzY292ZXJ5IHVu
aW5pdGlhbGl6ZWRcbiIpOw0KPj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KPj4g
ICAgICAgICB9DQo+Pg0KPj4gLSAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVhZGVyICop
YWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluOw0KPj4gKyAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5h
cnlfaGVhZGVyICopZGlzY292ZXJ5X2JpbjsNCj4+ICAgICAgICAgb2Zmc2V0ID0gbGUxNl90b19j
cHUoYmhkci0+dGFibGVfbGlzdFtHQ10ub2Zmc2V0KTsNCj4+DQo+PiAgICAgICAgIGlmICghb2Zm
c2V0KQ0KPj4gICAgICAgICAgICAgICAgIHJldHVybiAwOw0KPj4NCj4+IC0gICAgICAgZ2NfaW5m
byA9ICh1bmlvbiBnY19pbmZvICopKGFkZXYtPm1tYW4uZGlzY292ZXJ5X2JpbiArIG9mZnNldCk7
DQo+PiArICAgICAgIGdjX2luZm8gPSAodW5pb24gZ2NfaW5mbyAqKShkaXNjb3ZlcnlfYmluICsg
b2Zmc2V0KTsNCj4+DQo+PiAgICAgICAgIHN3aXRjaCAobGUxNl90b19jcHUoZ2NfaW5mby0+djEu
aGVhZGVyLnZlcnNpb25fbWFqb3IpKSB7DQo+PiAgICAgICAgIGNhc2UgMToNCj4+IEBAIC0xNjgx
LDI0ICsxNzAzLDI1IEBAIHVuaW9uIG1hbGxfaW5mbyB7DQo+Pg0KPj4gIHN0YXRpYyBpbnQgYW1k
Z3B1X2Rpc2NvdmVyeV9nZXRfbWFsbF9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0K
Pj4gew0KPj4gKyAgICAgICB1aW50OF90ICpkaXNjb3ZlcnlfYmluID0gYWRldi0+ZGlzY292ZXJ5
LmJpbjsNCj4+ICAgICAgICAgc3RydWN0IGJpbmFyeV9oZWFkZXIgKmJoZHI7DQo+PiAgICAgICAg
IHVuaW9uIG1hbGxfaW5mbyAqbWFsbF9pbmZvOw0KPj4gICAgICAgICB1MzIgdSwgbWFsbF9zaXpl
X3Blcl91bWMsIG1fc19wcmVzZW50LCBoYWxmX3VzZTsNCj4+ICAgICAgICAgdTY0IG1hbGxfc2l6
ZTsNCj4+ICAgICAgICAgdTE2IG9mZnNldDsNCj4+DQo+PiAtICAgICAgIGlmICghYWRldi0+bW1h
bi5kaXNjb3ZlcnlfYmluKSB7DQo+PiArICAgICAgIGlmICghZGlzY292ZXJ5X2Jpbikgew0KPj4g
ICAgICAgICAgICAgICAgIERSTV9FUlJPUigiaXAgZGlzY292ZXJ5IHVuaW5pdGlhbGl6ZWRcbiIp
Ow0KPj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KPj4gICAgICAgICB9DQo+Pg0K
Pj4gLSAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVhZGVyICopYWRldi0+bW1hbi5kaXNj
b3ZlcnlfYmluOw0KPj4gKyAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVhZGVyICopZGlz
Y292ZXJ5X2JpbjsNCj4+ICAgICAgICAgb2Zmc2V0ID0gbGUxNl90b19jcHUoYmhkci0+dGFibGVf
bGlzdFtNQUxMX0lORk9dLm9mZnNldCk7DQo+Pg0KPj4gICAgICAgICBpZiAoIW9mZnNldCkNCj4+
ICAgICAgICAgICAgICAgICByZXR1cm4gMDsNCj4+DQo+PiAtICAgICAgIG1hbGxfaW5mbyA9ICh1
bmlvbiBtYWxsX2luZm8gKikoYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluICsgb2Zmc2V0KTsNCj4+
ICsgICAgICAgbWFsbF9pbmZvID0gKHVuaW9uIG1hbGxfaW5mbyAqKShkaXNjb3ZlcnlfYmluICsg
b2Zmc2V0KTsNCj4+DQo+PiAgICAgICAgIHN3aXRjaCAobGUxNl90b19jcHUobWFsbF9pbmZvLT52
MS5oZWFkZXIudmVyc2lvbl9tYWpvcikpIHsNCj4+ICAgICAgICAgY2FzZSAxOg0KPj4gQEAgLTE3
MzcsMTIgKzE3NjAsMTMgQEAgdW5pb24gdmNuX2luZm8gew0KPj4NCj4+ICBzdGF0aWMgaW50IGFt
ZGdwdV9kaXNjb3ZlcnlfZ2V0X3Zjbl9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0K
Pj4gew0KPj4gKyAgICAgICB1aW50OF90ICpkaXNjb3ZlcnlfYmluID0gYWRldi0+ZGlzY292ZXJ5
LmJpbjsNCj4+ICAgICAgICAgc3RydWN0IGJpbmFyeV9oZWFkZXIgKmJoZHI7DQo+PiAgICAgICAg
IHVuaW9uIHZjbl9pbmZvICp2Y25faW5mbzsNCj4+ICAgICAgICAgdTE2IG9mZnNldDsNCj4+ICAg
ICAgICAgaW50IHY7DQo+Pg0KPj4gLSAgICAgICBpZiAoIWFkZXYtPm1tYW4uZGlzY292ZXJ5X2Jp
bikgew0KPj4gKyAgICAgICBpZiAoIWRpc2NvdmVyeV9iaW4pIHsNCj4+ICAgICAgICAgICAgICAg
ICBEUk1fRVJST1IoImlwIGRpc2NvdmVyeSB1bmluaXRpYWxpemVkXG4iKTsNCj4+ICAgICAgICAg
ICAgICAgICByZXR1cm4gLUVJTlZBTDsNCj4+ICAgICAgICAgfQ0KPj4gQEAgLTE3NTcsMTMgKzE3
ODEsMTMgQEAgc3RhdGljIGludCBhbWRncHVfZGlzY292ZXJ5X2dldF92Y25faW5mbyhzdHJ1Y3QN
Cj5hbWRncHVfZGV2aWNlICphZGV2KQ0KPj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFM
Ow0KPj4gICAgICAgICB9DQo+Pg0KPj4gLSAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlfaGVh
ZGVyICopYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluOw0KPj4gKyAgICAgICBiaGRyID0gKHN0cnVj
dCBiaW5hcnlfaGVhZGVyICopZGlzY292ZXJ5X2JpbjsNCj4+ICAgICAgICAgb2Zmc2V0ID0gbGUx
Nl90b19jcHUoYmhkci0+dGFibGVfbGlzdFtWQ05fSU5GT10ub2Zmc2V0KTsNCj4+DQo+PiAgICAg
ICAgIGlmICghb2Zmc2V0KQ0KPj4gICAgICAgICAgICAgICAgIHJldHVybiAwOw0KPj4NCj4+IC0g
ICAgICAgdmNuX2luZm8gPSAodW5pb24gdmNuX2luZm8gKikoYWRldi0+bW1hbi5kaXNjb3Zlcnlf
YmluICsgb2Zmc2V0KTsNCj4+ICsgICAgICAgdmNuX2luZm8gPSAodW5pb24gdmNuX2luZm8gKiko
ZGlzY292ZXJ5X2JpbiArIG9mZnNldCk7DQo+Pg0KPj4gICAgICAgICBzd2l0Y2ggKGxlMTZfdG9f
Y3B1KHZjbl9pbmZvLT52MS5oZWFkZXIudmVyc2lvbl9tYWpvcikpIHsNCj4+ICAgICAgICAgY2Fz
ZSAxOg0KPj4gQEAgLTE4MjMsNiArMTg0Nyw3IEBAIGludCBhbWRncHVfZGlzY292ZXJ5X2dldF9u
cHNfaW5mbyhzdHJ1Y3QNCj5hbWRncHVfZGV2aWNlICphZGV2LA0KPj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHN0cnVjdCBhbWRncHVfZ21jX21lbXJhbmdlICoqcmFuZ2VzLA0K
Pj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCAqcmFuZ2VfY250LCBib29s
IHJlZnJlc2gpICB7DQo+PiArICAgICAgIHVpbnQ4X3QgKmRpc2NvdmVyeV9iaW4gPSBhZGV2LT5k
aXNjb3ZlcnkuYmluOw0KPj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2dtY19tZW1yYW5nZSAqbWVt
X3JhbmdlczsNCj4+ICAgICAgICAgc3RydWN0IGJpbmFyeV9oZWFkZXIgKmJoZHI7DQo+PiAgICAg
ICAgIHVuaW9uIG5wc19pbmZvICpucHNfaW5mbzsNCj4+IEBAIC0xODM5LDEzICsxODY0LDEzIEBA
IGludCBhbWRncHVfZGlzY292ZXJ5X2dldF9ucHNfaW5mbyhzdHJ1Y3QNCj5hbWRncHVfZGV2aWNl
ICphZGV2LA0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7DQo+PiAgICAgICAg
ICAgICAgICAgbnBzX2luZm8gPSAmbnBzX2RhdGE7DQo+PiAgICAgICAgIH0gZWxzZSB7DQo+PiAt
ICAgICAgICAgICAgICAgaWYgKCFhZGV2LT5tbWFuLmRpc2NvdmVyeV9iaW4pIHsNCj4+ICsgICAg
ICAgICAgICAgICBpZiAoIWRpc2NvdmVyeV9iaW4pIHsNCj4+ICAgICAgICAgICAgICAgICAgICAg
ICAgIGRldl9lcnIoYWRldi0+ZGV2LA0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAiZmV0Y2ggbWVtIHJhbmdlIGZhaWxlZCwgaXAgZGlzY292ZXJ5IHVuaW5pdGlhbGl6ZWRcbiIp
Ow0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7DQo+PiAgICAgICAg
ICAgICAgICAgfQ0KPj4NCj4+IC0gICAgICAgICAgICAgICBiaGRyID0gKHN0cnVjdCBiaW5hcnlf
aGVhZGVyICopYWRldi0+bW1hbi5kaXNjb3ZlcnlfYmluOw0KPj4gKyAgICAgICAgICAgICAgIGJo
ZHIgPSAoc3RydWN0IGJpbmFyeV9oZWFkZXIgKilkaXNjb3ZlcnlfYmluOw0KPj4gICAgICAgICAg
ICAgICAgIG9mZnNldCA9DQo+PiBsZTE2X3RvX2NwdShiaGRyLT50YWJsZV9saXN0W05QU19JTkZP
XS5vZmZzZXQpOw0KPj4NCj4+ICAgICAgICAgICAgICAgICBpZiAoIW9mZnNldCkNCj4+IEBAIC0x
ODU1LDggKzE4ODAsNyBAQCBpbnQgYW1kZ3B1X2Rpc2NvdmVyeV9nZXRfbnBzX2luZm8oc3RydWN0
DQo+YW1kZ3B1X2RldmljZSAqYWRldiwNCj4+ICAgICAgICAgICAgICAgICBpZiAoYW1kZ3B1X2Rp
c2NvdmVyeV92ZXJpZnlfbnBzaW5mbyhhZGV2LCBiaGRyKSkNCj4+ICAgICAgICAgICAgICAgICAg
ICAgICAgIHJldHVybiAtRU5PRU5UOw0KPj4NCj4+IC0gICAgICAgICAgICAgICBucHNfaW5mbyA9
DQo+PiAtICAgICAgICAgICAgICAgICAgICAgICAodW5pb24gbnBzX2luZm8gKikoYWRldi0+bW1h
bi5kaXNjb3ZlcnlfYmluICsgb2Zmc2V0KTsNCj4+ICsgICAgICAgICAgICAgICBucHNfaW5mbyA9
ICh1bmlvbiBucHNfaW5mbyAqKShkaXNjb3ZlcnlfYmluICsgb2Zmc2V0KTsNCj4+ICAgICAgICAg
fQ0KPj4NCj4+ICAgICAgICAgc3dpdGNoIChsZTE2X3RvX2NwdShucHNfaW5mby0+djEuaGVhZGVy
LnZlcnNpb25fbWFqb3IpKSB7IGRpZmYNCj4+IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2Rpc2NvdmVyeS5oDQo+PiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9kaXNjb3ZlcnkuaA0KPj4gaW5kZXggYjQ0ZDU2NDY1YzViLi5iMWVlYzNhZjNjNGEg
MTAwNjQ0DQo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGlzY292
ZXJ5LmgNCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kaXNjb3Zl
cnkuaA0KPj4gQEAgLTI0LDkgKzI0LDIwIEBADQo+PiAgI2lmbmRlZiBfX0FNREdQVV9ESVNDT1ZF
UllfXw0KPj4gICNkZWZpbmUgX19BTURHUFVfRElTQ09WRVJZX18NCj4+DQo+PiArI2luY2x1ZGUg
PGxpbnV4L2RlYnVnZnMuaD4NCj4+ICsNCj4+ICAjZGVmaW5lIERJU0NPVkVSWV9UTVJfU0laRSAg
ICAgICgxMCA8PCAxMCkNCj4+ICAjZGVmaW5lIERJU0NPVkVSWV9UTVJfT0ZGU0VUICAgICg2NCA8
PCAxMCkNCj4+DQo+PiArc3RydWN0IGlwX2Rpc2NvdmVyeV90b3A7DQo+PiArDQo+PiArc3RydWN0
IGFtZGdwdV9kaXNjb3ZlcnlfaW5mbyB7DQo+PiArICAgICAgIHN0cnVjdCBkZWJ1Z2ZzX2Jsb2Jf
d3JhcHBlciBkZWJ1Z2ZzX2Jsb2I7DQo+PiArICAgICAgIHN0cnVjdCBpcF9kaXNjb3ZlcnlfdG9w
ICppcF90b3A7DQo+PiArICAgICAgIHVpbnQzMl90IHNpemU7DQo+PiArICAgICAgIHVpbnQ4X3Qg
KmJpbjsNCj4+ICt9Ow0KPj4gKw0KPj4gIHZvaWQgYW1kZ3B1X2Rpc2NvdmVyeV9maW5pKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2KTsgIGludA0KPj4gYW1kZ3B1X2Rpc2NvdmVyeV9zZXRfaXBf
YmxvY2tzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsNCj4+DQo+PiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jDQo+PiBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYw0KPj4gaW5kZXggZDEzZDI4YTU5MjNjLi41YmY2
YmIzYjJmYWEgMTAwNjQ0DQo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdHRtLmMNCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0u
Yw0KPj4gQEAgLTE5NTUsNyArMTk1NSw3IEBAIGludCBhbWRncHVfdHRtX2luaXQoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpDQo+PiAgICAgICAgICAqIElmIElQIGRpc2NvdmVyeSBlbmFibGVk
LCBhIGJsb2NrIG9mIG1lbW9yeSBzaG91bGQgYmUNCj4+ICAgICAgICAgICogcmVzZXJ2ZWQgZm9y
IElQIGRpc2NvdmV5Lg0KPj4gICAgICAgICAgKi8NCj4+IC0gICAgICAgaWYgKGFkZXYtPm1tYW4u
ZGlzY292ZXJ5X2Jpbikgew0KPj4gKyAgICAgICBpZiAoYWRldi0+ZGlzY292ZXJ5LmJpbikgew0K
Pj4gICAgICAgICAgICAgICAgIHIgPSBhbWRncHVfdHRtX3Jlc2VydmVfdG1yKGFkZXYpOw0KPj4g
ICAgICAgICAgICAgICAgIGlmIChyKQ0KPj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu
IHI7DQo+PiAtLQ0KPj4gMi40OS4wDQo+Pg0K
