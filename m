Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0C71E703D3
	for <lists+amd-gfx@lfdr.de>; Mon, 22 Jul 2019 17:34:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 66C6389C37;
	Mon, 22 Jul 2019 15:34:06 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr700049.outbound.protection.outlook.com [40.107.70.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3C5B689C37
 for <amd-gfx@lists.freedesktop.org>; Mon, 22 Jul 2019 15:34:05 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=FGYPp7zVIF9in0EGK6M+5hyZ2vyN1IRjYf/ixIorOXabzkETQWGwC979gj/FV1QESeiS72QU9SOBB9lxTnOfjT8pSuYmwIV3ZaE0FoEnVTHrTwneEtKZElQRR+D7r6X/dywFInlMR+zCGkd9Re1mu/LoTMN3ZMCtwlt1JAeIn73PQAf0ipakciro9extJXMlnuneDUNH1F1bm2lRoqHZpHOOOpL2to6toUI20NWlY+MKXsx26SngVeh82cq4sbRu5ZlhHK1cvohP67/0RuMjUhSAzNFcvJILO4nt1NXwQkIxVcTSNbLSuxqL2ddBsprSv2FEqyoP9+rTtM2PBpPyfg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=FwM/EbMZiwTxjLfbkDsr6kSXIC7F3yztxiyx23dOMpc=;
 b=Fa7Rs/zyKSOwy7lHEJPvJrBtLhZ7sujFBXHYWx/2aigMD0Fq2NTLI+Y2w5WitfRajajZ7Fgamh7iASaZRfirupx8Gbo9lAbbzA+T5X1QUMCU3KPSNHqowZo45aFpvwHpLV5u70PZ9PmTida09bNHOTv8XHS6pYUEUjRYVTLedNve6xNQCR8xlpLmeCd6A2yV5BZIdNiCTriMNFnWfbQcVshiy8K17kT0vkQ6wciR49gAMQyknEbWtGUjjZWeMKnYld3XB233AZFvU7vcWuDCBDwnETV+4TzBQllEctTM3WrUfHn+uBWpc9vq1mFkacCvPQpWXwZiY6x/Yfjh9LRS/w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=amd.com;dmarc=pass action=none header.from=amd.com;dkim=pass
 header.d=amd.com;arc=none
Received: from CY4PR12MB1767.namprd12.prod.outlook.com (10.175.62.137) by
 CY4PR12MB1784.namprd12.prod.outlook.com (10.175.61.19) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2094.14; Mon, 22 Jul 2019 15:34:02 +0000
Received: from CY4PR12MB1767.namprd12.prod.outlook.com
 ([fe80::9d27:7add:4f59:7269]) by CY4PR12MB1767.namprd12.prod.outlook.com
 ([fe80::9d27:7add:4f59:7269%5]) with mapi id 15.20.2094.013; Mon, 22 Jul 2019
 15:34:02 +0000
From: "Greathouse, Joseph" <Joseph.Greathouse@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: [PATCH v2] drm/amdgpu: Default disable GDS for compute+gfx
Thread-Topic: [PATCH v2] drm/amdgpu: Default disable GDS for compute+gfx
Thread-Index: AQHVQKLjvf2j4xO0NU6H0f2p7NPLhQ==
Date: Mon, 22 Jul 2019 15:34:01 +0000
Message-ID: <20190722153350.29339-1-Joseph.Greathouse@amd.com>
References: <7002f783-2223-a524-2c60-03447377bd28@amd.com>
In-Reply-To: <7002f783-2223-a524-2c60-03447377bd28@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-mailer: git-send-email 2.19.1
x-clientproxiedby: DM6PR03CA0053.namprd03.prod.outlook.com
 (2603:10b6:5:100::30) To CY4PR12MB1767.namprd12.prod.outlook.com
 (2603:10b6:903:121::9)
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [165.204.78.2]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 09ff8919-0a52-4de6-a4d4-08d70eba057f
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:CY4PR12MB1784; 
x-ms-traffictypediagnostic: CY4PR12MB1784:
x-microsoft-antispam-prvs: <CY4PR12MB17845F9EE2A05BDB8B8A174EF9C40@CY4PR12MB1784.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:4303;
x-forefront-prvs: 01068D0A20
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(979002)(4636009)(136003)(346002)(376002)(396003)(39860400002)(366004)(199004)(189003)(478600001)(2351001)(76176011)(68736007)(4326008)(52116002)(26005)(6436002)(186003)(102836004)(25786009)(5640700003)(2501003)(2616005)(476003)(8676002)(11346002)(81156014)(81166006)(6486002)(446003)(50226002)(2906002)(3846002)(36756003)(6116002)(8936002)(53936002)(386003)(6506007)(305945005)(6512007)(66946007)(7736002)(66446008)(71190400001)(71200400001)(486006)(99286004)(66476007)(64756008)(256004)(14444005)(14454004)(66556008)(1076003)(5660300002)(66066001)(6916009)(54906003)(316002)(86362001)(969003)(989001)(999001)(1009001)(1019001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:CY4PR12MB1784;
 H:CY4PR12MB1767.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: bohuXCE6Vn44olcQeGVV9h7daoeZw4+eIC29rgITGiImZYT0w6/cPvV3gVl8uRZbHDy8zHPQtktL9rHkiBy8v3K70CppwnTwK62POX9OyVQptIciAbzasiS6Q36gCGgpOj8ZJ66Qa+7hDaL6p+FRAn35eCJU1TV4NpP6itDWkt3LcRuP2dtgYlCjtc7tFpj/zN7QV3ZFPBIDlRz19dlnbhozrB5p5QrmkWqZh4PAs/2PR0JOjcWcCOG2DmyqYrVBIE5s4PR24mao7wre929gQvafcwt97S7AzaHe/+qtDrYRGtkcwqbK9LNwier8jp6CYzwlhm9etHvcEUsZ1q9uNrYqXnYUeAfrs3DVTDLYsVIZOOzPqrwzGULVHV+Nim+2ZP1pJsvWtwdFccUbY4Qegv6X2vNEJY9RVGMWmeTH4Tk=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 09ff8919-0a52-4de6-a4d4-08d70eba057f
X-MS-Exchange-CrossTenant-originalarrivaltime: 22 Jul 2019 15:34:01.8110 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: jgreatho@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CY4PR12MB1784
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=FwM/EbMZiwTxjLfbkDsr6kSXIC7F3yztxiyx23dOMpc=;
 b=T9+17Sy+gRJU8SdnHIAW4jWFh1J4HkOcVV6pYLdz0kR9CbxLWhTCJQT3MyTvLu6PAH6uFV9/6GW5mbSIsuhTo1SAkrscJcIkEdqXVcECflcmXrWFZ8fIJJZSr83xnXQw64lG3SfizDa3bF2+iiV05x9DC2/VMQaJ7njY8w0xF8w=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Joseph.Greathouse@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Olsak, Marek" <Marek.Olsak@amd.com>, "Koenig,
 Christian" <Christian.Koenig@amd.com>, "Greathouse,
 Joseph" <Joseph.Greathouse@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

VW5pdHMgaW4gdGhlIEdEUyBibG9jayBkZWZhdWx0IHRvIGFsbG93aW5nIGFsbCBWTUlEcyBhY2Nl
c3MgdG8gYWxsCmVudHJpZXMuIERpc2FibGUgc2hhZGVyIGFjY2VzcyB0byB0aGUgR0RTLCBHV1Ms
IGFuZCBPQSBibG9ja3MgZnJvbSBhbGwKY29tcHV0ZSBhbmQgZ2Z4IFZNSURzIGJ5IGRlZmF1bHQu
IEZvciBjb21wdXRlLCBIV1MgZmlybXdhcmUgd2lsbCBzZXQKdXAgdGhlIGFjY2VzcyBiaXRzIGZv
ciB0aGUgYXBwcm9wcmlhdGUgVk1JRCB3aGVuIGEgY29tcHV0ZSBxdWV1ZQpyZXF1aXJlcyBhY2Nl
c3MgdG8gdGhlc2UgYmxvY2tzLgpUaGUgZHJpdmVyIHdpbGwgaGFuZGxlIGVuYWJsaW5nIGFjY2Vz
cyBvbi1kZW1hbmQgZm9yIGdyYXBoaWNzIFZNSURzLgoKTGVhdmluZyBWTUlEMCB3aXRoIGZ1bGwg
YWNjZXNzIGJlY2F1c2Ugb3RoZXJ3aXNlIEhXUyBjYW5ub3Qgc2F2ZSBvcgpyZXN0b3JlIHZhbHVl
cyBkdXJpbmcgdGFzayBzd2l0Y2guCgp2MjogRml4ZWQgY29kZSBhbmQgY29tbWVudCBzdHlsaW5n
LgoKQ2hhbmdlLUlkOiBJM2Q3NjhhOTY5MzVkMmVkMWRmZjA5YjAyYzk5NTA5MGY0ZmJmYTUzOQpT
aWduZWQtb2ZmLWJ5OiBKb3NlcGggR3JlYXRob3VzZSA8Sm9zZXBoLkdyZWF0aG91c2VAYW1kLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjEwXzAuYyB8IDI1ICsrKysr
KysrKysrKysrKysrKy0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92N18w
LmMgIHwgMjQgKysrKysrKysrKysrKysrKystLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9nZnhfdjhfMC5jICB8IDI0ICsrKysrKysrKysrKysrKysrLS0tLS0tLQogZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyAgfCAyNCArKysrKysrKysrKysrKysrKy0tLS0t
LS0KIDQgZmlsZXMgY2hhbmdlZCwgNjkgaW5zZXJ0aW9ucygrKSwgMjggZGVsZXRpb25zKC0pCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3YxMF8wLmMgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjEwXzAuYwppbmRleCA3M2RjYjYzMmEzY2UuLjJh
OTY5MmJjMzRiNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Yx
MF8wLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3YxMF8wLmMKQEAgLTE1
MTYsMTcgKzE1MTYsMjcgQEAgc3RhdGljIHZvaWQgZ2Z4X3YxMF8wX2luaXRfY29tcHV0ZV92bWlk
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCX0KIAludl9ncmJtX3NlbGVjdChhZGV2LCAw
LCAwLCAwLCAwKTsKIAltdXRleF91bmxvY2soJmFkZXYtPnNyYm1fbXV0ZXgpOworfQogCi0JLyog
SW5pdGlhbGl6ZSBhbGwgY29tcHV0ZSBWTUlEcyB0byBoYXZlIG5vIEdEUywgR1dTLCBvciBPQQot
CSAgIGFjY2Nlc3MuIFRoZXNlIHNob3VsZCBiZSBlbmFibGVkIGJ5IEZXIGZvciB0YXJnZXQgVk1J
RHMuICovCi0JZm9yIChpID0gRklSU1RfQ09NUFVURV9WTUlEOyBpIDwgTEFTVF9DT01QVVRFX1ZN
SUQ7IGkrKykgewotCQlXUkVHMzJfU09DMTVfT0ZGU0VUKEdDLCAwLCBtbUdEU19WTUlEMF9CQVNF
LCAyICogaSwgMCk7Ci0JCVdSRUczMl9TT0MxNV9PRkZTRVQoR0MsIDAsIG1tR0RTX1ZNSUQwX1NJ
WkUsIDIgKiBpLCAwKTsKLQkJV1JFRzMyX1NPQzE1X09GRlNFVChHQywgMCwgbW1HRFNfR1dTX1ZN
SUQwLCBpLCAwKTsKLQkJV1JFRzMyX1NPQzE1X09GRlNFVChHQywgMCwgbW1HRFNfT0FfVk1JRDAs
IGksIDApOworc3RhdGljIHZvaWQgZ2Z4X3YxMF8wX2luaXRfZ2RzX3ZtaWQoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYpCit7CisJaW50IHZtaWQ7CisKKwkvKgorCSAqIEluaXRpYWxpemUgYWxs
IGNvbXB1dGUgYW5kIHVzZXItZ2Z4IFZNSURzIHRvIGhhdmUgbm8gR0RTLCBHV1MsIG9yIE9BCisJ
ICogYWNjZXNzLiBDb21wdXRlIFZNSURzIHNob3VsZCBiZSBlbmFibGVkIGJ5IEZXIGZvciB0YXJn
ZXQgVk1JRHMsCisJICogdGhlIGRyaXZlciBjYW4gZW5hYmxlIHRoZW0gZm9yIGdyYXBoaWNzLiBW
TUlEMCBzaG91bGQgbWFpbnRhaW4KKwkgKiBhY2Nlc3Mgc28gdGhhdCBIV1MgZmlybXdhcmUgY2Fu
IHNhdmUvcmVzdG9yZSBlbnRyaWVzLgorCSAqLworCWZvciAodm1pZCA9IDE7IHZtaWQgPCAxNjsg
dm1pZCsrKSB7CisJCVdSRUczMl9TT0MxNV9PRkZTRVQoR0MsIDAsIG1tR0RTX1ZNSUQwX0JBU0Us
IDIgKiB2bWlkLCAwKTsKKwkJV1JFRzMyX1NPQzE1X09GRlNFVChHQywgMCwgbW1HRFNfVk1JRDBf
U0laRSwgMiAqIHZtaWQsIDApOworCQlXUkVHMzJfU09DMTVfT0ZGU0VUKEdDLCAwLCBtbUdEU19H
V1NfVk1JRDAsIHZtaWQsIDApOworCQlXUkVHMzJfU09DMTVfT0ZGU0VUKEdDLCAwLCBtbUdEU19P
QV9WTUlEMCwgdm1pZCwgMCk7CiAJfQogfQogCisKIHN0YXRpYyB2b2lkIGdmeF92MTBfMF90Y3Bf
aGFydmVzdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIHsKIAlpbnQgaSwgaiwgazsKQEAg
LTE2MjksNiArMTYzOSw3IEBAIHN0YXRpYyB2b2lkIGdmeF92MTBfMF9jb25zdGFudHNfaW5pdChz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAltdXRleF91bmxvY2soJmFkZXYtPnNyYm1fbXV0
ZXgpOwogCiAJZ2Z4X3YxMF8wX2luaXRfY29tcHV0ZV92bWlkKGFkZXYpOworCWdmeF92MTBfMF9p
bml0X2dkc192bWlkKGFkZXYpOwogCiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2dmeF92N18wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjdf
MC5jCmluZGV4IDNmOTg2MjQ3NzJhNC4uNDg3OTZiNjgyNGNmIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjdfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2dmeF92N18wLmMKQEAgLTE4NzcsMTQgKzE4NzcsMjMgQEAgc3RhdGljIHZvaWQgZ2Z4
X3Y3XzBfaW5pdF9jb21wdXRlX3ZtaWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJfQog
CWNpa19zcmJtX3NlbGVjdChhZGV2LCAwLCAwLCAwLCAwKTsKIAltdXRleF91bmxvY2soJmFkZXYt
PnNyYm1fbXV0ZXgpOworfQogCi0JLyogSW5pdGlhbGl6ZSBhbGwgY29tcHV0ZSBWTUlEcyB0byBo
YXZlIG5vIEdEUywgR1dTLCBvciBPQQotCSAgIGFjY2Nlc3MuIFRoZXNlIHNob3VsZCBiZSBlbmFi
bGVkIGJ5IEZXIGZvciB0YXJnZXQgVk1JRHMuICovCi0JZm9yIChpID0gRklSU1RfQ09NUFVURV9W
TUlEOyBpIDwgTEFTVF9DT01QVVRFX1ZNSUQ7IGkrKykgewotCQlXUkVHMzIoYW1kZ3B1X2dkc19y
ZWdfb2Zmc2V0W2ldLm1lbV9iYXNlLCAwKTsKLQkJV1JFRzMyKGFtZGdwdV9nZHNfcmVnX29mZnNl
dFtpXS5tZW1fc2l6ZSwgMCk7Ci0JCVdSRUczMihhbWRncHVfZ2RzX3JlZ19vZmZzZXRbaV0uZ3dz
LCAwKTsKLQkJV1JFRzMyKGFtZGdwdV9nZHNfcmVnX29mZnNldFtpXS5vYSwgMCk7CitzdGF0aWMg
dm9pZCBnZnhfdjdfMF9pbml0X2dkc192bWlkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQor
eworCWludCB2bWlkOworCisJLyoKKwkgKiBJbml0aWFsaXplIGFsbCBjb21wdXRlIGFuZCB1c2Vy
LWdmeCBWTUlEcyB0byBoYXZlIG5vIEdEUywgR1dTLCBvciBPQQorCSAqIGFjY2Vzcy4gQ29tcHV0
ZSBWTUlEcyBzaG91bGQgYmUgZW5hYmxlZCBieSBGVyBmb3IgdGFyZ2V0IFZNSURzLAorCSAqIHRo
ZSBkcml2ZXIgY2FuIGVuYWJsZSB0aGVtIGZvciBncmFwaGljcy4gVk1JRDAgc2hvdWxkIG1haW50
YWluCisJICogYWNjZXNzIHNvIHRoYXQgSFdTIGZpcm13YXJlIGNhbiBzYXZlL3Jlc3RvcmUgZW50
cmllcy4KKwkgKi8KKwlmb3IgKHZtaWQgPSAxOyB2bWlkIDwgMTY7IHZtaWQrKykgeworCQlXUkVH
MzIoYW1kZ3B1X2dkc19yZWdfb2Zmc2V0W3ZtaWRdLm1lbV9iYXNlLCAwKTsKKwkJV1JFRzMyKGFt
ZGdwdV9nZHNfcmVnX29mZnNldFt2bWlkXS5tZW1fc2l6ZSwgMCk7CisJCVdSRUczMihhbWRncHVf
Z2RzX3JlZ19vZmZzZXRbdm1pZF0uZ3dzLCAwKTsKKwkJV1JFRzMyKGFtZGdwdV9nZHNfcmVnX29m
ZnNldFt2bWlkXS5vYSwgMCk7CiAJfQogfQogCkBAIC0xOTY2LDYgKzE5NzUsNyBAQCBzdGF0aWMg
dm9pZCBnZnhfdjdfMF9jb25zdGFudHNfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikK
IAltdXRleF91bmxvY2soJmFkZXYtPnNyYm1fbXV0ZXgpOwogCiAJZ2Z4X3Y3XzBfaW5pdF9jb21w
dXRlX3ZtaWQoYWRldik7CisJZ2Z4X3Y3XzBfaW5pdF9nZHNfdm1pZChhZGV2KTsKIAogCVdSRUcz
MihtbVNYX0RFQlVHXzEsIDB4MjApOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9nZnhfdjhfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y4XzAu
YwppbmRleCBlNDAyOGQ1NGY4ZjcuLmQyOTA3MTg2YmIyNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y4XzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9nZnhfdjhfMC5jCkBAIC0zNzAyLDE0ICszNzAyLDIzIEBAIHN0YXRpYyB2b2lkIGdmeF92
OF8wX2luaXRfY29tcHV0ZV92bWlkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCX0KIAl2
aV9zcmJtX3NlbGVjdChhZGV2LCAwLCAwLCAwLCAwKTsKIAltdXRleF91bmxvY2soJmFkZXYtPnNy
Ym1fbXV0ZXgpOworfQogCi0JLyogSW5pdGlhbGl6ZSBhbGwgY29tcHV0ZSBWTUlEcyB0byBoYXZl
IG5vIEdEUywgR1dTLCBvciBPQQotCSAgIGFjY2Nlc3MuIFRoZXNlIHNob3VsZCBiZSBlbmFibGVk
IGJ5IEZXIGZvciB0YXJnZXQgVk1JRHMuICovCi0JZm9yIChpID0gRklSU1RfQ09NUFVURV9WTUlE
OyBpIDwgTEFTVF9DT01QVVRFX1ZNSUQ7IGkrKykgewotCQlXUkVHMzIoYW1kZ3B1X2dkc19yZWdf
b2Zmc2V0W2ldLm1lbV9iYXNlLCAwKTsKLQkJV1JFRzMyKGFtZGdwdV9nZHNfcmVnX29mZnNldFtp
XS5tZW1fc2l6ZSwgMCk7Ci0JCVdSRUczMihhbWRncHVfZ2RzX3JlZ19vZmZzZXRbaV0uZ3dzLCAw
KTsKLQkJV1JFRzMyKGFtZGdwdV9nZHNfcmVnX29mZnNldFtpXS5vYSwgMCk7CitzdGF0aWMgdm9p
ZCBnZnhfdjhfMF9pbml0X2dkc192bWlkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQorewor
CWludCB2bWlkOworCisJLyoKKwkgKiBJbml0aWFsaXplIGFsbCBjb21wdXRlIGFuZCB1c2VyLWdm
eCBWTUlEcyB0byBoYXZlIG5vIEdEUywgR1dTLCBvciBPQQorCSAqIGFjY2Vzcy4gQ29tcHV0ZSBW
TUlEcyBzaG91bGQgYmUgZW5hYmxlZCBieSBGVyBmb3IgdGFyZ2V0IFZNSURzLAorCSAqIHRoZSBk
cml2ZXIgY2FuIGVuYWJsZSB0aGVtIGZvciBncmFwaGljcy4gVk1JRDAgc2hvdWxkIG1haW50YWlu
CisJICogYWNjZXNzIHNvIHRoYXQgSFdTIGZpcm13YXJlIGNhbiBzYXZlL3Jlc3RvcmUgZW50cmll
cy4KKwkgKi8KKwlmb3IgKHZtaWQgPSAxOyB2bWlkIDwgMTY7IHZtaWQrKykgeworCQlXUkVHMzIo
YW1kZ3B1X2dkc19yZWdfb2Zmc2V0W3ZtaWRdLm1lbV9iYXNlLCAwKTsKKwkJV1JFRzMyKGFtZGdw
dV9nZHNfcmVnX29mZnNldFt2bWlkXS5tZW1fc2l6ZSwgMCk7CisJCVdSRUczMihhbWRncHVfZ2Rz
X3JlZ19vZmZzZXRbdm1pZF0uZ3dzLCAwKTsKKwkJV1JFRzMyKGFtZGdwdV9nZHNfcmVnX29mZnNl
dFt2bWlkXS5vYSwgMCk7CiAJfQogfQogCkBAIC0zNzc5LDYgKzM3ODgsNyBAQCBzdGF0aWMgdm9p
ZCBnZnhfdjhfMF9jb25zdGFudHNfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAlt
dXRleF91bmxvY2soJmFkZXYtPnNyYm1fbXV0ZXgpOwogCiAJZ2Z4X3Y4XzBfaW5pdF9jb21wdXRl
X3ZtaWQoYWRldik7CisJZ2Z4X3Y4XzBfaW5pdF9nZHNfdm1pZChhZGV2KTsKIAogCW11dGV4X2xv
Y2soJmFkZXYtPmdyYm1faWR4X211dGV4KTsKIAkvKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dm
eF92OV8wLmMKaW5kZXggMjU5YTM1Mzk1ZmVjLi5iZDdmNDMxYTI0ZDkgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYwpAQCAtMjAyNSwxNCArMjAyNSwyMyBAQCBzdGF0aWMgdm9p
ZCBnZnhfdjlfMF9pbml0X2NvbXB1dGVfdm1pZChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikK
IAl9CiAJc29jMTVfZ3JibV9zZWxlY3QoYWRldiwgMCwgMCwgMCwgMCk7CiAJbXV0ZXhfdW5sb2Nr
KCZhZGV2LT5zcmJtX211dGV4KTsKK30KIAotCS8qIEluaXRpYWxpemUgYWxsIGNvbXB1dGUgVk1J
RHMgdG8gaGF2ZSBubyBHRFMsIEdXUywgb3IgT0EKLQkgICBhY2NjZXNzLiBUaGVzZSBzaG91bGQg
YmUgZW5hYmxlZCBieSBGVyBmb3IgdGFyZ2V0IFZNSURzLiAqLwotCWZvciAoaSA9IEZJUlNUX0NP
TVBVVEVfVk1JRDsgaSA8IExBU1RfQ09NUFVURV9WTUlEOyBpKyspIHsKLQkJV1JFRzMyX1NPQzE1
X09GRlNFVChHQywgMCwgbW1HRFNfVk1JRDBfQkFTRSwgMiAqIGksIDApOwotCQlXUkVHMzJfU09D
MTVfT0ZGU0VUKEdDLCAwLCBtbUdEU19WTUlEMF9TSVpFLCAyICogaSwgMCk7Ci0JCVdSRUczMl9T
T0MxNV9PRkZTRVQoR0MsIDAsIG1tR0RTX0dXU19WTUlEMCwgaSwgMCk7Ci0JCVdSRUczMl9TT0Mx
NV9PRkZTRVQoR0MsIDAsIG1tR0RTX09BX1ZNSUQwLCBpLCAwKTsKK3N0YXRpYyB2b2lkIGdmeF92
OV8wX2luaXRfZ2RzX3ZtaWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCit7CisJaW50IHZt
aWQ7CisKKwkvKgorCSAqIEluaXRpYWxpemUgYWxsIGNvbXB1dGUgYW5kIHVzZXItZ2Z4IFZNSURz
IHRvIGhhdmUgbm8gR0RTLCBHV1MsIG9yIE9BCisJICogYWNjZXNzLiBDb21wdXRlIFZNSURzIHNo
b3VsZCBiZSBlbmFibGVkIGJ5IEZXIGZvciB0YXJnZXQgVk1JRHMsCisJICogdGhlIGRyaXZlciBj
YW4gZW5hYmxlIHRoZW0gZm9yIGdyYXBoaWNzLiBWTUlEMCBzaG91bGQgbWFpbnRhaW4KKwkgKiBh
Y2Nlc3Mgc28gdGhhdCBIV1MgZmlybXdhcmUgY2FuIHNhdmUvcmVzdG9yZSBlbnRyaWVzLgorCSAq
LworCWZvciAodm1pZCA9IDE7IHZtaWQgPCAxNjsgdm1pZCsrKSB7CisJCVdSRUczMl9TT0MxNV9P
RkZTRVQoR0MsIDAsIG1tR0RTX1ZNSUQwX0JBU0UsIDIgKiB2bWlkLCAwKTsKKwkJV1JFRzMyX1NP
QzE1X09GRlNFVChHQywgMCwgbW1HRFNfVk1JRDBfU0laRSwgMiAqIHZtaWQsIDApOworCQlXUkVH
MzJfU09DMTVfT0ZGU0VUKEdDLCAwLCBtbUdEU19HV1NfVk1JRDAsIHZtaWQsIDApOworCQlXUkVH
MzJfU09DMTVfT0ZGU0VUKEdDLCAwLCBtbUdEU19PQV9WTUlEMCwgdm1pZCwgMCk7CiAJfQogfQog
CkBAIC0yMDgwLDYgKzIwODksNyBAQCBzdGF0aWMgdm9pZCBnZnhfdjlfMF9jb25zdGFudHNfaW5p
dChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAltdXRleF91bmxvY2soJmFkZXYtPnNyYm1f
bXV0ZXgpOwogCiAJZ2Z4X3Y5XzBfaW5pdF9jb21wdXRlX3ZtaWQoYWRldik7CisJZ2Z4X3Y5XzBf
aW5pdF9nZHNfdm1pZChhZGV2KTsKIH0KIAogc3RhdGljIHZvaWQgZ2Z4X3Y5XzBfd2FpdF9mb3Jf
cmxjX3NlcmRlcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKLS0gCjIuMTkuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5n
IGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
