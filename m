Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D6728D36DA
	for <lists+amd-gfx@lfdr.de>; Fri, 11 Oct 2019 03:22:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5509A6EBA2;
	Fri, 11 Oct 2019 01:22:00 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x843.google.com (mail-qt1-x843.google.com
 [IPv6:2607:f8b0:4864:20::843])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D8E596EB95
 for <amd-gfx@lists.freedesktop.org>; Fri, 11 Oct 2019 01:21:58 +0000 (UTC)
Received: by mail-qt1-x843.google.com with SMTP id w14so11562488qto.9
 for <amd-gfx@lists.freedesktop.org>; Thu, 10 Oct 2019 18:21:58 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=TOpY10nm1ZBe9TWICIu4GPiVOwuGZflKRVl72rQHu8s=;
 b=n7uP8OsddaWArcMfcs7P/lUogYoQBJS/TzdBk8QlyTbcTcntkRYym8bkM1oj+N0WRd
 rdaFv402zh16BM1R9UG7dBQZBnqS/ml3FMQw30/3AW5qtnFMkZMXZbxj8ig7KrqYqgfj
 4tByEMfpz3dLIIQlnq3gYm2JIBe0akOt1UkBou8njgB1EEOlsoMOIMWFRzz/mibGN3rN
 cfzsRFAp9B94UL6CtidleAt5VmIaqPbg2pqppgt4SXSTXTBEWfolw09S4s/dY2mG9XBR
 X+//6iL1H6ufJ6uVJilMyEY7jtbMQU01LTEpp+HekNt76o/KKFnO9uTVyFSgPpLFgY6U
 lfzw==
X-Gm-Message-State: APjAAAVI2PfY7z8HQZ/gF4L5BSBUgb7aotWlIS5XZmaWVZM/OOqtaNFj
 hJY7tyAApdMYml++ALg9abMsKYAG
X-Google-Smtp-Source: APXvYqwhZ7ozpU6bEUg79Tq3AhtGe4tggdNC7vi6VYTf4mxate37DGUusr6nMBqTa9jnH8Gwc8SOAA==
X-Received: by 2002:ac8:33d4:: with SMTP id d20mr13842532qtb.204.1570756917577; 
 Thu, 10 Oct 2019 18:21:57 -0700 (PDT)
Received: from localhost.localdomain ([71.51.171.205])
 by smtp.gmail.com with ESMTPSA id p199sm3301590qke.18.2019.10.10.18.21.56
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 10 Oct 2019 18:21:56 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 13/15] drm/amdgpu/powerplay: split out common smu7 BACO code
Date: Thu, 10 Oct 2019 20:21:33 -0500
Message-Id: <20191011012135.18566-14-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191011012135.18566-1-alexander.deucher@amd.com>
References: <20191011012135.18566-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=TOpY10nm1ZBe9TWICIu4GPiVOwuGZflKRVl72rQHu8s=;
 b=WWbIUUO8/So9iYgWxwbCtwDydbfJa3PBI7PkRfpUW1oogynMPofAApZ9sYfmRgC195
 7CykH39IxsRaNqqOui6C5ACTmSb5/A3izfySZB7nMgzUSuvskA7j4knbalFmXOz1h+y4
 d7MyK2z7Pp0PyGsrW/G989bPxbjJlfmJLGim+7Q4hjpyv4Bnj/XNwOB0uZJDkD4CHlA5
 bQ/yUy1p1NdZdnWsTYD2MMnH1UKic1v8CryOGv/9n0J6RyD0qT6NLovCGpCvBOhrQbPT
 cXBzyy0gPRl4E46+TApR7KoyMZYLgJJ481cDzn94mL2PcVdNPIRQNJ8yR2czxCyf4wsv
 +v9A==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U2V2ZXJhbCBvZiB0aGUgQkFDTyBmdW5jdGlvbnMgYXJlIGNvbW1vbiBhY3Jvc3Mgc211Ny1iYXNl
ZAphc2ljcy4gIFNwbGl0IHRoZSBjb21tb24gY29kZSBvdXQuCgpTaWduZWQtb2ZmLWJ5OiBBbGV4
IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2FtZC9wb3dlcnBsYXkvaHdtZ3IvTWFrZWZpbGUgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L2h3bWdyL2NpX2JhY28uYyB8IDM0ICstLS0tLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvcG93ZXJwbGF5L2h3bWdyL2NpX2JhY28uaCB8ICA1ICstCiAuLi4vZ3B1L2RybS9hbWQv
cG93ZXJwbGF5L2h3bWdyL2ZpamlfYmFjby5jICAgfCAzNCArLS0tLS0tCiAuLi4vZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L2h3bWdyL2ZpamlfYmFjby5oICAgfCAgNSArLQogLi4uL2RybS9hbWQvcG93
ZXJwbGF5L2h3bWdyL3BvbGFyaXNfYmFjby5jICAgIHwgMzQgKy0tLS0tLQogLi4uL2RybS9hbWQv
cG93ZXJwbGF5L2h3bWdyL3BvbGFyaXNfYmFjby5oICAgIHwgIDUgKy0KIC4uLi9ncHUvZHJtL2Ft
ZC9wb3dlcnBsYXkvaHdtZ3Ivc211N19iYWNvLmMgICB8IDkxICsrKysrKysrKysrKysrKysrKysK
IC4uLi9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3Ivc211N19iYWNvLmggICB8IDMyICsrKysr
KysKIC4uLi9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdG9uZ2FfYmFjby5jICB8IDM0ICst
LS0tLS0KIC4uLi9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdG9uZ2FfYmFjby5oICB8ICA1
ICstCiAxMSBmaWxlcyBjaGFuZ2VkLCAxMzIgaW5zZXJ0aW9ucygrKSwgMTQ5IGRlbGV0aW9ucygt
KQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdy
L3NtdTdfYmFjby5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dl
cnBsYXkvaHdtZ3Ivc211N19iYWNvLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L3Bvd2VycGxheS9od21nci9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5
L2h3bWdyL01ha2VmaWxlCmluZGV4IDVhZDU4OTNiZGFlMS4uMjc3Mzk2NmFlNDM0IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci9NYWtlZmlsZQorKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci9NYWtlZmlsZQpAQCAtMzcsNyArMzcs
NyBAQCBIQVJEV0FSRV9NR1IgPSBod21nci5vIHByb2Nlc3NwcHRhYmxlcy5vIFwKIAkJdmVnYTIw
X3Byb2Nlc3NwcHRhYmxlcy5vIHZlZ2EyMF9od21nci5vIHZlZ2EyMF9wb3dlcnR1bmUubyBcCiAJ
CXZlZ2EyMF90aGVybWFsLm8gY29tbW9uX2JhY28ubyB2ZWdhMTBfYmFjby5vICB2ZWdhMjBfYmFj
by5vIFwKIAkJdmVnYTEyX2JhY28ubyBzbXU5X2JhY28ubyB0b25nYV9iYWNvLm8gcG9sYXJpc19i
YWNvLm8gZmlqaV9iYWNvLm8gXAotCQljaV9iYWNvLm8KKwkJY2lfYmFjby5vIHNtdTdfYmFjby5v
CiAKIEFNRF9QUF9IV01HUiA9ICQoYWRkcHJlZml4ICQoQU1EX1BQX1BBVEgpL2h3bWdyLywkKEhB
UkRXQVJFX01HUikpCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5
L2h3bWdyL2NpX2JhY28uYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL2Np
X2JhY28uYwppbmRleCBmMWE4YzljYzBkMWYuLjNiZTQwMTE0ZTYzZCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvY2lfYmFjby5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL2NpX2JhY28uYwpAQCAtMTU4LDQzICsxNTgsMTEg
QEAgc3RhdGljIGNvbnN0IHN0cnVjdCBiYWNvX2NtZF9lbnRyeSBjbGVhbl9iYWNvX3RibFtdID0K
IAl7IENNRF9XUklURSwgbW1DUF9QRlBfVUNPREVfQUREUiwgMCwgMCwgMCwgMCB9CiB9OwogCi1p
bnQgY2lfYmFjb19nZXRfY2FwYWJpbGl0eShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBib29sICpj
YXApCi17Ci0Jc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKikoaHdtZ3ItPmFkZXYpOwotCXVpbnQzMl90IHJlZzsKLQotCSpjYXAgPSBmYWxzZTsKLQlp
ZiAoIXBobV9jYXBfZW5hYmxlZChod21nci0+cGxhdGZvcm1fZGVzY3JpcHRvci5wbGF0Zm9ybUNh
cHMsIFBITV9QbGF0Zm9ybUNhcHNfQkFDTykpCi0JCXJldHVybiAwOwotCi0JcmVnID0gUlJFRzMy
KG1tQ0NfQklGX0JYX0ZVU0VTVFJBUDApOwotCi0JaWYgKHJlZyAmIENDX0JJRl9CWF9GVVNFU1RS
QVAwX19TVFJBUF9CSUZfUFhfQ0FQQUJMRV9NQVNLKQotCQkqY2FwID0gdHJ1ZTsKLQotCXJldHVy
biAwOwotfQotCi1pbnQgY2lfYmFjb19nZXRfc3RhdGUoc3RydWN0IHBwX2h3bWdyICpod21nciwg
ZW51bSBCQUNPX1NUQVRFICpzdGF0ZSkKLXsKLQlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9
IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqKShod21nci0+YWRldik7Ci0JdWludDMyX3QgcmVnOwot
Ci0JcmVnID0gUlJFRzMyKG1tQkFDT19DTlRMKTsKLQotCWlmIChyZWcgJiBCQUNPX0NOVExfX0JB
Q09fTU9ERV9NQVNLKQotCQkvKiBnZnggaGFzIGFscmVhZHkgZW50ZXJlZCBCQUNPIHN0YXRlICov
Ci0JCSpzdGF0ZSA9IEJBQ09fU1RBVEVfSU47Ci0JZWxzZQotCQkqc3RhdGUgPSBCQUNPX1NUQVRF
X09VVDsKLQlyZXR1cm4gMDsKLX0KLQogaW50IGNpX2JhY29fc2V0X3N0YXRlKHN0cnVjdCBwcF9o
d21nciAqaHdtZ3IsIGVudW0gQkFDT19TVEFURSBzdGF0ZSkKIHsKIAllbnVtIEJBQ09fU1RBVEUg
Y3VyX3N0YXRlOwogCi0JY2lfYmFjb19nZXRfc3RhdGUoaHdtZ3IsICZjdXJfc3RhdGUpOworCXNt
dTdfYmFjb19nZXRfc3RhdGUoaHdtZ3IsICZjdXJfc3RhdGUpOwogCiAJaWYgKGN1cl9zdGF0ZSA9
PSBzdGF0ZSkKIAkJLyogYWlzYyBhbHJlYWR5IGluIHRoZSB0YXJnZXQgc3RhdGUgKi8KZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL2NpX2JhY28uaCBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL2NpX2JhY28uaAppbmRleCBjOWJlZGI1
MWNiMjUuLjE3MDQxZjE4NzAyMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dl
cnBsYXkvaHdtZ3IvY2lfYmFjby5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5
L2h3bWdyL2NpX2JhY28uaApAQCAtMjIsMTEgKzIyLDggQEAKICAqLwogI2lmbmRlZiBfX0NJX0JB
Q09fSF9fCiAjZGVmaW5lIF9fQ0lfQkFDT19IX18KLSNpbmNsdWRlICJod21nci5oIgotI2luY2x1
ZGUgImNvbW1vbl9iYWNvLmgiCisjaW5jbHVkZSAic211N19iYWNvLmgiCiAKLWV4dGVybiBpbnQg
Y2lfYmFjb19nZXRfY2FwYWJpbGl0eShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBib29sICpjYXAp
OwotZXh0ZXJuIGludCBjaV9iYWNvX2dldF9zdGF0ZShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBl
bnVtIEJBQ09fU1RBVEUgKnN0YXRlKTsKIGV4dGVybiBpbnQgY2lfYmFjb19zZXRfc3RhdGUoc3Ry
dWN0IHBwX2h3bWdyICpod21nciwgZW51bSBCQUNPX1NUQVRFIHN0YXRlKTsKIAogI2VuZGlmCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci9maWppX2JhY28u
YyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL2ZpamlfYmFjby5jCmluZGV4
IGFkMDE5MTljY2IyNy4uYzAzNjhmMmRmYjIxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL3Bvd2VycGxheS9od21nci9maWppX2JhY28uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L3Bvd2VycGxheS9od21nci9maWppX2JhY28uYwpAQCAtMTU4LDQzICsxNTgsMTEgQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBiYWNvX2NtZF9lbnRyeSBjbGVhbl9iYWNvX3RibFtdID0KIAl7IENNRF9X
UklURSwgbW1CSU9TX1NDUkFUQ0hfMTUsIDAsIDAsIDAsIDAgfQogfTsKIAotaW50IGZpamlfYmFj
b19nZXRfY2FwYWJpbGl0eShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBib29sICpjYXApCi17Ci0J
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKikoaHdt
Z3ItPmFkZXYpOwotCXVpbnQzMl90IHJlZzsKLQotCSpjYXAgPSBmYWxzZTsKLQlpZiAoIXBobV9j
YXBfZW5hYmxlZChod21nci0+cGxhdGZvcm1fZGVzY3JpcHRvci5wbGF0Zm9ybUNhcHMsIFBITV9Q
bGF0Zm9ybUNhcHNfQkFDTykpCi0JCXJldHVybiAwOwotCi0JcmVnID0gUlJFRzMyKG1tQ0NfQklG
X0JYX0ZVU0VTVFJBUDApOwotCi0JaWYgKHJlZyAmIENDX0JJRl9CWF9GVVNFU1RSQVAwX19TVFJB
UF9CSUZfUFhfQ0FQQUJMRV9NQVNLKQotCQkqY2FwID0gdHJ1ZTsKLQotCXJldHVybiAwOwotfQot
Ci1pbnQgZmlqaV9iYWNvX2dldF9zdGF0ZShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBlbnVtIEJB
Q09fU1RBVEUgKnN0YXRlKQotewotCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gKHN0cnVj
dCBhbWRncHVfZGV2aWNlICopKGh3bWdyLT5hZGV2KTsKLQl1aW50MzJfdCByZWc7Ci0KLQlyZWcg
PSBSUkVHMzIobW1CQUNPX0NOVEwpOwotCi0JaWYgKHJlZyAmIEJBQ09fQ05UTF9fQkFDT19NT0RF
X01BU0spCi0JCS8qIGdmeCBoYXMgYWxyZWFkeSBlbnRlcmVkIEJBQ08gc3RhdGUgKi8KLQkJKnN0
YXRlID0gQkFDT19TVEFURV9JTjsKLQllbHNlCi0JCSpzdGF0ZSA9IEJBQ09fU1RBVEVfT1VUOwot
CXJldHVybiAwOwotfQotCiBpbnQgZmlqaV9iYWNvX3NldF9zdGF0ZShzdHJ1Y3QgcHBfaHdtZ3Ig
Kmh3bWdyLCBlbnVtIEJBQ09fU1RBVEUgc3RhdGUpCiB7CiAJZW51bSBCQUNPX1NUQVRFIGN1cl9z
dGF0ZTsKIAotCWZpamlfYmFjb19nZXRfc3RhdGUoaHdtZ3IsICZjdXJfc3RhdGUpOworCXNtdTdf
YmFjb19nZXRfc3RhdGUoaHdtZ3IsICZjdXJfc3RhdGUpOwogCiAJaWYgKGN1cl9zdGF0ZSA9PSBz
dGF0ZSkKIAkJLyogYWlzYyBhbHJlYWR5IGluIHRoZSB0YXJnZXQgc3RhdGUgKi8KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL2ZpamlfYmFjby5oIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvZmlqaV9iYWNvLmgKaW5kZXggMmY3Yzgz
ODg2NjdlLi40N2Y0MDI5MDBiZGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93
ZXJwbGF5L2h3bWdyL2ZpamlfYmFjby5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJw
bGF5L2h3bWdyL2ZpamlfYmFjby5oCkBAIC0yMiwxMSArMjIsOCBAQAogICovCiAjaWZuZGVmIF9f
RklKSV9CQUNPX0hfXwogI2RlZmluZSBfX0ZJSklfQkFDT19IX18KLSNpbmNsdWRlICJod21nci5o
IgotI2luY2x1ZGUgImNvbW1vbl9iYWNvLmgiCisjaW5jbHVkZSAic211N19iYWNvLmgiCiAKLWV4
dGVybiBpbnQgZmlqaV9iYWNvX2dldF9jYXBhYmlsaXR5KHN0cnVjdCBwcF9od21nciAqaHdtZ3Is
IGJvb2wgKmNhcCk7Ci1leHRlcm4gaW50IGZpamlfYmFjb19nZXRfc3RhdGUoc3RydWN0IHBwX2h3
bWdyICpod21nciwgZW51bSBCQUNPX1NUQVRFICpzdGF0ZSk7CiBleHRlcm4gaW50IGZpamlfYmFj
b19zZXRfc3RhdGUoc3RydWN0IHBwX2h3bWdyICpod21nciwgZW51bSBCQUNPX1NUQVRFIHN0YXRl
KTsKIAogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9o
d21nci9wb2xhcmlzX2JhY28uYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdy
L3BvbGFyaXNfYmFjby5jCmluZGV4IGE5YWJlNTNkZjQ3NS4uOGY4ZTI5NmYyZmU5IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci9wb2xhcmlzX2JhY28uYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci9wb2xhcmlzX2JhY28uYwpA
QCAtMTc4LDQzICsxNzgsMTEgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBiYWNvX2NtZF9lbnRyeSB0
dXJuX29mZl9wbGxzX3RibF92Z1tdID0KIAl7IENNRF9ERUxBWV9VUywgMCwgMCwgMCwgNSwgMHgw
IH0KIH07CiAKLWludCBwb2xhcmlzX2JhY29fZ2V0X2NhcGFiaWxpdHkoc3RydWN0IHBwX2h3bWdy
ICpod21nciwgYm9vbCAqY2FwKQotewotCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gKHN0
cnVjdCBhbWRncHVfZGV2aWNlICopKGh3bWdyLT5hZGV2KTsKLQl1aW50MzJfdCByZWc7Ci0KLQkq
Y2FwID0gZmFsc2U7Ci0JaWYgKCFwaG1fY2FwX2VuYWJsZWQoaHdtZ3ItPnBsYXRmb3JtX2Rlc2Ny
aXB0b3IucGxhdGZvcm1DYXBzLCBQSE1fUGxhdGZvcm1DYXBzX0JBQ08pKQotCQlyZXR1cm4gMDsK
LQotCXJlZyA9IFJSRUczMihtbUNDX0JJRl9CWF9GVVNFU1RSQVAwKTsKLQotCWlmIChyZWcgJiBD
Q19CSUZfQlhfRlVTRVNUUkFQMF9fU1RSQVBfQklGX1BYX0NBUEFCTEVfTUFTSykKLQkJKmNhcCA9
IHRydWU7Ci0KLQlyZXR1cm4gMDsKLX0KLQotaW50IHBvbGFyaXNfYmFjb19nZXRfc3RhdGUoc3Ry
dWN0IHBwX2h3bWdyICpod21nciwgZW51bSBCQUNPX1NUQVRFICpzdGF0ZSkKLXsKLQlzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqKShod21nci0+YWRl
dik7Ci0JdWludDMyX3QgcmVnOwotCi0JcmVnID0gUlJFRzMyKG1tQkFDT19DTlRMKTsKLQotCWlm
IChyZWcgJiBCQUNPX0NOVExfX0JBQ09fTU9ERV9NQVNLKQotCQkvKiBnZnggaGFzIGFscmVhZHkg
ZW50ZXJlZCBCQUNPIHN0YXRlICovCi0JCSpzdGF0ZSA9IEJBQ09fU1RBVEVfSU47Ci0JZWxzZQot
CQkqc3RhdGUgPSBCQUNPX1NUQVRFX09VVDsKLQlyZXR1cm4gMDsKLX0KLQogaW50IHBvbGFyaXNf
YmFjb19zZXRfc3RhdGUoc3RydWN0IHBwX2h3bWdyICpod21nciwgZW51bSBCQUNPX1NUQVRFIHN0
YXRlKQogewogCWVudW0gQkFDT19TVEFURSBjdXJfc3RhdGU7CiAKLQlwb2xhcmlzX2JhY29fZ2V0
X3N0YXRlKGh3bWdyLCAmY3VyX3N0YXRlKTsKKwlzbXU3X2JhY29fZ2V0X3N0YXRlKGh3bWdyLCAm
Y3VyX3N0YXRlKTsKIAogCWlmIChjdXJfc3RhdGUgPT0gc3RhdGUpCiAJCS8qIGFpc2MgYWxyZWFk
eSBpbiB0aGUgdGFyZ2V0IHN0YXRlICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L3Bvd2VycGxheS9od21nci9wb2xhcmlzX2JhY28uaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93
ZXJwbGF5L2h3bWdyL3BvbGFyaXNfYmFjby5oCmluZGV4IGU0OGJmYjFjNWM2YS4uODdhNWZhMGEx
NTdhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci9wb2xh
cmlzX2JhY28uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci9wb2xh
cmlzX2JhY28uaApAQCAtMjIsMTEgKzIyLDggQEAKICAqLwogI2lmbmRlZiBfX1BPTEFSSVNfQkFD
T19IX18KICNkZWZpbmUgX19QT0xBUklTX0JBQ09fSF9fCi0jaW5jbHVkZSAiaHdtZ3IuaCIKLSNp
bmNsdWRlICJjb21tb25fYmFjby5oIgorI2luY2x1ZGUgInNtdTdfYmFjby5oIgogCi1leHRlcm4g
aW50IHBvbGFyaXNfYmFjb19nZXRfY2FwYWJpbGl0eShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBi
b29sICpjYXApOwotZXh0ZXJuIGludCBwb2xhcmlzX2JhY29fZ2V0X3N0YXRlKHN0cnVjdCBwcF9o
d21nciAqaHdtZ3IsIGVudW0gQkFDT19TVEFURSAqc3RhdGUpOwogZXh0ZXJuIGludCBwb2xhcmlz
X2JhY29fc2V0X3N0YXRlKHN0cnVjdCBwcF9od21nciAqaHdtZ3IsIGVudW0gQkFDT19TVEFURSBz
dGF0ZSk7CiAKICNlbmRpZgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBs
YXkvaHdtZ3Ivc211N19iYWNvLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21n
ci9zbXU3X2JhY28uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjA0
NGNkYTAwNWFlZAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJw
bGF5L2h3bWdyL3NtdTdfYmFjby5jCkBAIC0wLDAgKzEsOTEgQEAKKy8qCisgKiBDb3B5cmlnaHQg
MjAxOSBBZHZhbmNlZCBNaWNybyBEZXZpY2VzLCBJbmMuCisgKgorICogUGVybWlzc2lvbiBpcyBo
ZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEK
KyAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZp
bGVzICh0aGUgIlNvZnR3YXJlIiksCisgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0
IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCisgKiB0aGUgcmlnaHRz
IHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGlj
ZW5zZSwKKyAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJt
aXQgcGVyc29ucyB0byB3aG9tIHRoZQorICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNv
LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKKyAqCisgKiBUaGUgYWJvdmUg
Y29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNs
dWRlZCBpbgorICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29m
dHdhcmUuCisgKgorICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQg
V0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBC
VVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAorICog
RklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElO
IE5PIEVWRU5UIFNIQUxMCisgKiBUSEUgQ09QWVJJR0hUIEhPTERFUihTKSBPUiBBVVRIT1IoUykg
QkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IKKyAqIE9USEVSIExJQUJJTElUWSwg
V0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLAorICog
QVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBP
UiBUSEUgVVNFIE9SCisgKiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCisgKgorICov
CisjaW5jbHVkZSAiYW1kZ3B1LmgiCisjaW5jbHVkZSAic211N19iYWNvLmgiCisjaW5jbHVkZSAi
dG9uZ2FfYmFjby5oIgorI2luY2x1ZGUgImZpamlfYmFjby5oIgorI2luY2x1ZGUgInBvbGFyaXNf
YmFjby5oIgorI2luY2x1ZGUgImNpX2JhY28uaCIKKworI2luY2x1ZGUgImJpZi9iaWZfNV8wX2Qu
aCIKKyNpbmNsdWRlICJiaWYvYmlmXzVfMF9zaF9tYXNrLmgiCisKKyNpbmNsdWRlICJzbXUvc211
XzdfMV8yX2QuaCIKKyNpbmNsdWRlICJzbXUvc211XzdfMV8yX3NoX21hc2suaCIKKworaW50IHNt
dTdfYmFjb19nZXRfY2FwYWJpbGl0eShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBib29sICpjYXAp
Cit7CisJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KikoaHdtZ3ItPmFkZXYpOworCXVpbnQzMl90IHJlZzsKKworCSpjYXAgPSBmYWxzZTsKKwlpZiAo
IXBobV9jYXBfZW5hYmxlZChod21nci0+cGxhdGZvcm1fZGVzY3JpcHRvci5wbGF0Zm9ybUNhcHMs
IFBITV9QbGF0Zm9ybUNhcHNfQkFDTykpCisJCXJldHVybiAwOworCisJcmVnID0gUlJFRzMyKG1t
Q0NfQklGX0JYX0ZVU0VTVFJBUDApOworCisJaWYgKHJlZyAmIENDX0JJRl9CWF9GVVNFU1RSQVAw
X19TVFJBUF9CSUZfUFhfQ0FQQUJMRV9NQVNLKQorCQkqY2FwID0gdHJ1ZTsKKworCXJldHVybiAw
OworfQorCitpbnQgc211N19iYWNvX2dldF9zdGF0ZShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBl
bnVtIEJBQ09fU1RBVEUgKnN0YXRlKQoreworCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0g
KHN0cnVjdCBhbWRncHVfZGV2aWNlICopKGh3bWdyLT5hZGV2KTsKKwl1aW50MzJfdCByZWc7CisK
KwlyZWcgPSBSUkVHMzIobW1CQUNPX0NOVEwpOworCisJaWYgKHJlZyAmIEJBQ09fQ05UTF9fQkFD
T19NT0RFX01BU0spCisJCS8qIGdmeCBoYXMgYWxyZWFkeSBlbnRlcmVkIEJBQ08gc3RhdGUgKi8K
KwkJKnN0YXRlID0gQkFDT19TVEFURV9JTjsKKwllbHNlCisJCSpzdGF0ZSA9IEJBQ09fU1RBVEVf
T1VUOworCXJldHVybiAwOworfQorCitpbnQgc211N19iYWNvX3NldF9zdGF0ZShzdHJ1Y3QgcHBf
aHdtZ3IgKmh3bWdyLCBlbnVtIEJBQ09fU1RBVEUgc3RhdGUpCit7CisJc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKikoaHdtZ3ItPmFkZXYpOworCisJ
c3dpdGNoIChhZGV2LT5hc2ljX3R5cGUpIHsKKwljYXNlIENISVBfVE9QQVo6CisJY2FzZSBDSElQ
X1RPTkdBOgorCQlyZXR1cm4gdG9uZ2FfYmFjb19zZXRfc3RhdGUoaHdtZ3IsIHN0YXRlKTsKKwlj
YXNlIENISVBfRklKSToKKwkJcmV0dXJuIGZpamlfYmFjb19zZXRfc3RhdGUoaHdtZ3IsIHN0YXRl
KTsKKwljYXNlIENISVBfUE9MQVJJUzEwOgorCWNhc2UgQ0hJUF9QT0xBUklTMTE6CisJY2FzZSBD
SElQX1BPTEFSSVMxMjoKKwljYXNlIENISVBfVkVHQU06CisJCXJldHVybiBwb2xhcmlzX2JhY29f
c2V0X3N0YXRlKGh3bWdyLCBzdGF0ZSk7CisjaWZkZWYgQ09ORklHX0RSTV9BTURHUFVfQ0lLCisJ
Y2FzZSBDSElQX0JPTkFJUkU6CisJY2FzZSBDSElQX0hBV0FJSToKKwkJcmV0dXJuIGNpX2JhY29f
c2V0X3N0YXRlKGh3bWdyLCBzdGF0ZSk7CisjZW5kaWYKKwlkZWZhdWx0OgorCQlyZXR1cm4gLUVJ
TlZBTDsKKwl9Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9o
d21nci9zbXU3X2JhY28uaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL3Nt
dTdfYmFjby5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uYmUwZDk4
YWJiNTM2Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkv
aHdtZ3Ivc211N19iYWNvLmgKQEAgLTAsMCArMSwzMiBAQAorLyoKKyAqIENvcHlyaWdodCAyMDE5
IEFkdmFuY2VkIE1pY3JvIERldmljZXMsIEluYy4KKyAqCisgKiBQZXJtaXNzaW9uIGlzIGhlcmVi
eSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQorICog
Y29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMg
KHRoZSAiU29mdHdhcmUiKSwKKyAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVz
dHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KKyAqIHRoZSByaWdodHMgdG8g
dXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNl
LAorICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBw
ZXJzb25zIHRvIHdob20gdGhlCisgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1
YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgorICoKKyAqIFRoZSBhYm92ZSBjb3B5
cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVk
IGluCisgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2Fy
ZS4KKyAqCisgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJS
QU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBO
T1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCisgKiBGSVRO
RVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8g
RVZFTlQgU0hBTEwKKyAqIFRIRSBDT1BZUklHSFQgSE9MREVSKFMpIE9SIEFVVEhPUihTKSBCRSBM
SUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUgorICogT1RIRVIgTElBQklMSVRZLCBXSEVU
SEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsCisgKiBBUklT
SU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRI
RSBVU0UgT1IKKyAqIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKi8KKyNp
Zm5kZWYgX19TTVU3X0JBQ09fSF9fCisjZGVmaW5lIF9fU01VN19CQUNPX0hfXworI2luY2x1ZGUg
Imh3bWdyLmgiCisjaW5jbHVkZSAiY29tbW9uX2JhY28uaCIKKworZXh0ZXJuIGludCBzbXU3X2Jh
Y29fZ2V0X2NhcGFiaWxpdHkoc3RydWN0IHBwX2h3bWdyICpod21nciwgYm9vbCAqY2FwKTsKK2V4
dGVybiBpbnQgc211N19iYWNvX2dldF9zdGF0ZShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBlbnVt
IEJBQ09fU1RBVEUgKnN0YXRlKTsKK2V4dGVybiBpbnQgc211N19iYWNvX3NldF9zdGF0ZShzdHJ1
Y3QgcHBfaHdtZ3IgKmh3bWdyLCBlbnVtIEJBQ09fU1RBVEUgc3RhdGUpOworCisjZW5kaWYKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL3RvbmdhX2JhY28u
YyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL3RvbmdhX2JhY28uYwppbmRl
eCA4NGI3MjE3YjdiZGEuLmVhNzQzYmVhOGUyOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9wb3dlcnBsYXkvaHdtZ3IvdG9uZ2FfYmFjby5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L2h3bWdyL3RvbmdhX2JhY28uYwpAQCAtMTgyLDQzICsxODIsMTEgQEAgc3Rh
dGljIGNvbnN0IHN0cnVjdCBiYWNvX2NtZF9lbnRyeSBjbGVhbl9iYWNvX3RibF9pY2VsYW5kW10g
PQogCXsgQ01EX1dSSVRFLCBtbUJJT1NfU0NSQVRDSF83LCAwLCAwLCAwLCAwIH0KIH07CiAKLWlu
dCB0b25nYV9iYWNvX2dldF9jYXBhYmlsaXR5KHN0cnVjdCBwcF9od21nciAqaHdtZ3IsIGJvb2wg
KmNhcCkKLXsKLQlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqKShod21nci0+YWRldik7Ci0JdWludDMyX3QgcmVnOwotCi0JKmNhcCA9IGZhbHNlOwot
CWlmICghcGhtX2NhcF9lbmFibGVkKGh3bWdyLT5wbGF0Zm9ybV9kZXNjcmlwdG9yLnBsYXRmb3Jt
Q2FwcywgUEhNX1BsYXRmb3JtQ2Fwc19CQUNPKSkKLQkJcmV0dXJuIDA7Ci0KLQlyZWcgPSBSUkVH
MzIobW1DQ19CSUZfQlhfRlVTRVNUUkFQMCk7Ci0KLQlpZiAocmVnICYgQ0NfQklGX0JYX0ZVU0VT
VFJBUDBfX1NUUkFQX0JJRl9QWF9DQVBBQkxFX01BU0spCi0JCSpjYXAgPSB0cnVlOwotCi0JcmV0
dXJuIDA7Ci19Ci0KLWludCB0b25nYV9iYWNvX2dldF9zdGF0ZShzdHJ1Y3QgcHBfaHdtZ3IgKmh3
bWdyLCBlbnVtIEJBQ09fU1RBVEUgKnN0YXRlKQotewotCXN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2ID0gKHN0cnVjdCBhbWRncHVfZGV2aWNlICopKGh3bWdyLT5hZGV2KTsKLQl1aW50MzJfdCBy
ZWc7Ci0KLQlyZWcgPSBSUkVHMzIobW1CQUNPX0NOVEwpOwotCi0JaWYgKHJlZyAmIEJBQ09fQ05U
TF9fQkFDT19NT0RFX01BU0spCi0JCS8qIGdmeCBoYXMgYWxyZWFkeSBlbnRlcmVkIEJBQ08gc3Rh
dGUgKi8KLQkJKnN0YXRlID0gQkFDT19TVEFURV9JTjsKLQllbHNlCi0JCSpzdGF0ZSA9IEJBQ09f
U1RBVEVfT1VUOwotCXJldHVybiAwOwotfQotCiBpbnQgdG9uZ2FfYmFjb19zZXRfc3RhdGUoc3Ry
dWN0IHBwX2h3bWdyICpod21nciwgZW51bSBCQUNPX1NUQVRFIHN0YXRlKQogewogCWVudW0gQkFD
T19TVEFURSBjdXJfc3RhdGU7CiAKLQl0b25nYV9iYWNvX2dldF9zdGF0ZShod21nciwgJmN1cl9z
dGF0ZSk7CisJc211N19iYWNvX2dldF9zdGF0ZShod21nciwgJmN1cl9zdGF0ZSk7CiAKIAlpZiAo
Y3VyX3N0YXRlID09IHN0YXRlKQogCQkvKiBhaXNjIGFscmVhZHkgaW4gdGhlIHRhcmdldCBzdGF0
ZSAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdG9u
Z2FfYmFjby5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdG9uZ2FfYmFj
by5oCmluZGV4IDIxMzAxYjA0MzI1NS4uNWRjMTZjYzhhMjk1IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci90b25nYV9iYWNvLmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdG9uZ2FfYmFjby5oCkBAIC0yMiwxMSArMjIsOCBA
QAogICovCiAjaWZuZGVmIF9fVE9OR0FfQkFDT19IX18KICNkZWZpbmUgX19UT05HQV9CQUNPX0hf
XwotI2luY2x1ZGUgImh3bWdyLmgiCi0jaW5jbHVkZSAiY29tbW9uX2JhY28uaCIKKyNpbmNsdWRl
ICJzbXU3X2JhY28uaCIKIAotZXh0ZXJuIGludCB0b25nYV9iYWNvX2dldF9jYXBhYmlsaXR5KHN0
cnVjdCBwcF9od21nciAqaHdtZ3IsIGJvb2wgKmNhcCk7Ci1leHRlcm4gaW50IHRvbmdhX2JhY29f
Z2V0X3N0YXRlKHN0cnVjdCBwcF9od21nciAqaHdtZ3IsIGVudW0gQkFDT19TVEFURSAqc3RhdGUp
OwogZXh0ZXJuIGludCB0b25nYV9iYWNvX3NldF9zdGF0ZShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdy
LCBlbnVtIEJBQ09fU1RBVEUgc3RhdGUpOwogCiAjZW5kaWYKLS0gCjIuMjAuMQoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxp
c3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
