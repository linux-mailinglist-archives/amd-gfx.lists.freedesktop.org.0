Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2BF7B345556
	for <lists+amd-gfx@lfdr.de>; Tue, 23 Mar 2021 03:11:22 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 003996E82A;
	Tue, 23 Mar 2021 02:11:20 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x431.google.com (mail-wr1-x431.google.com
 [IPv6:2a00:1450:4864:20::431])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E1E2A6E82A
 for <amd-gfx@lists.freedesktop.org>; Tue, 23 Mar 2021 02:11:18 +0000 (UTC)
Received: by mail-wr1-x431.google.com with SMTP id x13so19127137wrs.9
 for <amd-gfx@lists.freedesktop.org>; Mon, 22 Mar 2021 19:11:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=froggi.es; s=google;
 h=subject:to:references:from:message-id:date:user-agent:mime-version
 :in-reply-to:content-language:content-transfer-encoding;
 bh=Snj1agWgsWD3JESyf1dpX11CPyRF10Rd48hO4d6gm3s=;
 b=GMTK+Ujlet+zNVmQ1T4rhL/irgoGVkYvK0uCK9QVkXfw6a4T+urpP1bnRkeDprmXio
 vi+IVL+wii3M4/Rxrh5WMpDlkmKNWcQLIQon9kkO9sOUyC0ZhI86GGSw/Jei5dcT/WnN
 CXBP5qJ5asgYwcEmvRMaFIuVSIx5NsSYiGXuqjJwv5+XgSU3RBpwoumneTtWfC321i9M
 NpmpgUOHicDl6Sti6HZIyx3vXItJ0dUXGgnnlhKWiuAQNxErRs5VQtF30hfYPiAPubrE
 pyvJ0adMLs/NIPchBIhSXFSw+UD1YhBFvLlVg9x+DZlQTivEEqvrLwq3vQLh5CO1pC1Z
 6YUw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-language
 :content-transfer-encoding;
 bh=Snj1agWgsWD3JESyf1dpX11CPyRF10Rd48hO4d6gm3s=;
 b=hEIOH5PzgkS9V5ECt19tlaIO6KvaCEx9XOEfOHILJoUDXqESDzBmcuf68d53qfpKAV
 A9SavzW3SVfAAVucONxQ1zkKL82kex59kxH3Tjb0K/37rVULdvYtTZ05n+Nf341/+Lw1
 3ioWoR0Ue1OzKioH8SJO9jBu1uiscDR18388zi7POvEh6eQPNtrrSPEqYHazn4GiHHta
 l6xatqcq19LjSIDZa4bLH0bc7fE6fjQwObAg4MLfRGzVFdJTyyaLgvVweyH6S9bhVuLj
 6HpocqQIiBTvZlCKhkrzOYVA3iQw4EC0vTpYYqAvIm6fh/2tcYW0b0FXJqql2dFReBNq
 9r4g==
X-Gm-Message-State: AOAM531Q2HaGmL9/30yc5CaHTn6IcFfk9HHEqmvZRQkOjs6DlnB7qL6e
 2v57NLwSwOXx0kpwwciie1S657zxsZAbmg==
X-Google-Smtp-Source: ABdhPJwkjDZ99sijN4Bw/VxZAU394e+V0MsMxiuN+C7piuN3/EYZHwIwea6Mfq0AZNG9C8erV2EM3A==
X-Received: by 2002:a5d:44c5:: with SMTP id z5mr1269489wrr.319.1616465477539; 
 Mon, 22 Mar 2021 19:11:17 -0700 (PDT)
Received: from [192.168.0.61]
 (cpc89720-darl9-2-0-cust754.11-2.cable.virginm.net. [86.2.110.243])
 by smtp.gmail.com with ESMTPSA id m5sm1424235wrq.15.2021.03.22.19.11.17
 for <amd-gfx@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Mon, 22 Mar 2021 19:11:17 -0700 (PDT)
Subject: Re: [PATCH] drm/amd/dispaly: fix deadlock issue in amdgpu reset
To: amd-gfx@lists.freedesktop.org
References: <20210322081138.3484804-1-Lang.Yu@amd.com>
From: Joshua Ashton <joshua@froggi.es>
Message-ID: <74d5a04a-9d4c-c165-9cba-7bae5026bbb7@froggi.es>
Date: Tue, 23 Mar 2021 02:09:21 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.8.1
MIME-Version: 1.0
In-Reply-To: <20210322081138.3484804-1-Lang.Yu@amd.com>
Content-Language: en-US
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

VHlwbyBpbiB0aGUgdGl0bGU6CgpzL2Rpc3BhbHkvZGlzcGxheQoKLSBKb3NoaWUg8J+QuOKcqAoK
T24gMy8yMi8yMSA4OjExIEFNLCBMYW5nIFl1IHdyb3RlOgo+IEluIGFtZGdncHUgcmVzZXQsIHdo
aWxlIGRtLmRjX2xvY2sgaXMgaGVsZCBieSBkbV9zdXNwZW5kLAo+IGhhbmRsZV9ocGRfcnhfaXJx
IHRyaWVzIHRvIGFjcXVpcmUgaXQuIERlYWRsb2NrIG9jY3VycmVkIQo+IAo+IERlYWRsb2NrIGxv
ZzoKPiAKPiBbICAxMDQuNTI4MzA0XSBhbWRncHUgMDAwMDowMzowMC4wOiBhbWRncHU6IEdQVSBy
ZXNldCBiZWdpbiEKPiAKPiBbICAxMDQuNjQwMDg0XSA9PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KPiBbICAxMDQuNjQwMDkyXSBXQVJOSU5HOiBw
b3NzaWJsZSBjaXJjdWxhciBsb2NraW5nIGRlcGVuZGVuY3kgZGV0ZWN0ZWQKPiBbICAxMDQuNjQw
MDk5XSA1LjExLjAtY3VzdG9tICMxIFRhaW50ZWQ6IEcgICAgICAgIFcgICBFCj4gWyAgMTA0LjY0
MDEwN10gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCj4gWyAgMTA0LjY0MDExNF0gY2F0LzExNTggaXMgdHJ5aW5nIHRvIGFjcXVpcmUgbG9jazoK
PiBbICAxMDQuNjQwMTIwXSBmZmZmODg4MTBhMDljZTAwICgod29ya19jb21wbGV0aW9uKSgmbGgt
PndvcmspKXsrLisufS17MDowfSwgYXQ6IF9fZmx1c2hfd29yaysweDJlMy8weDQ1MAo+IFsgIDEw
NC42NDAxNDRdCj4gICAgICAgICAgICAgICAgIGJ1dCB0YXNrIGlzIGFscmVhZHkgaG9sZGluZyBs
b2NrOgo+IFsgIDEwNC42NDAxNTFdIGZmZmY4ODgxMGEwOWNjNzAgKCZhZGV2LT5kbS5kY19sb2Nr
KXsrLisufS17MzozfSwgYXQ6IGRtX3N1c3BlbmQrMHhiMi8weDFkMCBbYW1kZ3B1XQo+IFsgIDEw
NC42NDA1ODFdCj4gICAgICAgICAgICAgICAgIHdoaWNoIGxvY2sgYWxyZWFkeSBkZXBlbmRzIG9u
IHRoZSBuZXcgbG9jay4KPiAKPiBbICAxMDQuNjQwNTkwXQo+ICAgICAgICAgICAgICAgICB0aGUg
ZXhpc3RpbmcgZGVwZW5kZW5jeSBjaGFpbiAoaW4gcmV2ZXJzZSBvcmRlcikgaXM6Cj4gWyAgMTA0
LjY0MDU5OF0KPiAgICAgICAgICAgICAgICAgLT4gIzIgKCZhZGV2LT5kbS5kY19sb2NrKXsrLisu
fS17MzozfToKPiBbICAxMDQuNjQwNjExXSAgICAgICAgbG9ja19hY3F1aXJlKzB4Y2EvMHgzOTAK
PiBbICAxMDQuNjQwNjIzXSAgICAgICAgX19tdXRleF9sb2NrKzB4OWIvMHg5MzAKPiBbICAxMDQu
NjQwNjMzXSAgICAgICAgbXV0ZXhfbG9ja19uZXN0ZWQrMHgxYi8weDIwCj4gWyAgMTA0LjY0MDY0
MF0gICAgICAgIGhhbmRsZV9ocGRfcnhfaXJxKzB4OWIvMHgxYzAgW2FtZGdwdV0KPiBbICAxMDQu
NjQwOTU5XSAgICAgICAgZG1faXJxX3dvcmtfZnVuYysweDRlLzB4NjAgW2FtZGdwdV0KPiBbICAx
MDQuNjQxMjY0XSAgICAgICAgcHJvY2Vzc19vbmVfd29yaysweDJhNy8weDViMAo+IFsgIDEwNC42
NDEyNzVdICAgICAgICB3b3JrZXJfdGhyZWFkKzB4NGEvMHgzZDAKPiBbICAxMDQuNjQxMjgzXSAg
ICAgICAga3RocmVhZCsweDEyNS8weDE2MAo+IFsgIDEwNC42NDEyOTBdICAgICAgICByZXRfZnJv
bV9mb3JrKzB4MjIvMHgzMAo+IFsgIDEwNC42NDEzMDBdCj4gICAgICAgICAgICAgICAgIC0+ICMx
ICgmYWNvbm5lY3Rvci0+aHBkX2xvY2speysuKy59LXszOjN9Ogo+IFsgIDEwNC42NDEzMTJdICAg
ICAgICBsb2NrX2FjcXVpcmUrMHhjYS8weDM5MAo+IFsgIDEwNC42NDEzMjFdICAgICAgICBfX211
dGV4X2xvY2srMHg5Yi8weDkzMAo+IFsgIDEwNC42NDEzMjhdICAgICAgICBtdXRleF9sb2NrX25l
c3RlZCsweDFiLzB4MjAKPiBbICAxMDQuNjQxMzM2XSAgICAgICAgaGFuZGxlX2hwZF9yeF9pcnEr
MHg2Ny8weDFjMCBbYW1kZ3B1XQo+IFsgIDEwNC42NDE2MzVdICAgICAgICBkbV9pcnFfd29ya19m
dW5jKzB4NGUvMHg2MCBbYW1kZ3B1XQo+IFsgIDEwNC42NDE5MzFdICAgICAgICBwcm9jZXNzX29u
ZV93b3JrKzB4MmE3LzB4NWIwCj4gWyAgMTA0LjY0MTk0MF0gICAgICAgIHdvcmtlcl90aHJlYWQr
MHg0YS8weDNkMAo+IFsgIDEwNC42NDE5NDhdICAgICAgICBrdGhyZWFkKzB4MTI1LzB4MTYwCj4g
WyAgMTA0LjY0MTk1NF0gICAgICAgIHJldF9mcm9tX2ZvcmsrMHgyMi8weDMwCj4gWyAgMTA0LjY0
MTk2M10KPiAgICAgICAgICAgICAgICAgLT4gIzAgKCh3b3JrX2NvbXBsZXRpb24pKCZsaC0+d29y
aykpeysuKy59LXswOjB9Ogo+IFsgIDEwNC42NDE5NzVdICAgICAgICBjaGVja19wcmV2X2FkZCsw
eDk0LzB4YmYwCj4gWyAgMTA0LjY0MTk4M10gICAgICAgIF9fbG9ja19hY3F1aXJlKzB4MTMwZC8w
eDFjZTAKPiBbICAxMDQuNjQxOTkyXSAgICAgICAgbG9ja19hY3F1aXJlKzB4Y2EvMHgzOTAKPiBb
ICAxMDQuNjQyMDAwXSAgICAgICAgX19mbHVzaF93b3JrKzB4MzAzLzB4NDUwCj4gWyAgMTA0LjY0
MjAwOF0gICAgICAgIGZsdXNoX3dvcmsrMHgxMC8weDIwCj4gWyAgMTA0LjY0MjAxNl0gICAgICAg
IGFtZGdwdV9kbV9pcnFfc3VzcGVuZCsweDkzLzB4MTAwIFthbWRncHVdCj4gWyAgMTA0LjY0MjMx
Ml0gICAgICAgIGRtX3N1c3BlbmQrMHgxODEvMHgxZDAgW2FtZGdwdV0KPiBbICAxMDQuNjQyNjA1
XSAgICAgICAgYW1kZ3B1X2RldmljZV9pcF9zdXNwZW5kX3BoYXNlMSsweDhhLzB4MTAwIFthbWRn
cHVdCj4gWyAgMTA0LjY0MjgzNV0gICAgICAgIGFtZGdwdV9kZXZpY2VfaXBfc3VzcGVuZCsweDIx
LzB4NzAgW2FtZGdwdV0KPiBbICAxMDQuNjQzMDY2XSAgICAgICAgYW1kZ3B1X2RldmljZV9wcmVf
YXNpY19yZXNldCsweDFiZC8weDFkMiBbYW1kZ3B1XQo+IFsgIDEwNC42NDM0MDNdICAgICAgICBh
bWRncHVfZGV2aWNlX2dwdV9yZWNvdmVyLmNvbGQrMHg1ZGYvMHhhOWQgW2FtZGdwdV0KPiBbICAx
MDQuNjQzNzE1XSAgICAgICAgZ3B1X3JlY292ZXJfZ2V0KzB4MmUvMHg2MCBbYW1kZ3B1XQo+IFsg
IDEwNC42NDM5NTFdICAgICAgICBzaW1wbGVfYXR0cl9yZWFkKzB4NmQvMHgxMTAKPiBbICAxMDQu
NjQzOTYwXSAgICAgICAgZGVidWdmc19hdHRyX3JlYWQrMHg0OS8weDcwCj4gWyAgMTA0LjY0Mzk3
MF0gICAgICAgIGZ1bGxfcHJveHlfcmVhZCsweDVmLzB4OTAKPiBbICAxMDQuNjQzOTc5XSAgICAg
ICAgdmZzX3JlYWQrMHhhMy8weDE5MAo+IFsgIDEwNC42NDM5ODZdICAgICAgICBrc3lzX3JlYWQr
MHg3MC8weGYwCj4gWyAgMTA0LjY0Mzk5Ml0gICAgICAgIF9feDY0X3N5c19yZWFkKzB4MWEvMHgy
MAo+IFsgIDEwNC42NDM5OTldICAgICAgICBkb19zeXNjYWxsXzY0KzB4MzgvMHg5MAo+IFsgIDEw
NC42NDQwMDddICAgICAgICBlbnRyeV9TWVNDQUxMXzY0X2FmdGVyX2h3ZnJhbWUrMHg0NC8weGE5
Cj4gWyAgMTA0LjY0NDAxN10KPiAgICAgICAgICAgICAgICAgb3RoZXIgaW5mbyB0aGF0IG1pZ2h0
IGhlbHAgdXMgZGVidWcgdGhpczoKPiAKPiBbICAxMDQuNjQ0MDI2XSBDaGFpbiBleGlzdHMgb2Y6
Cj4gICAgICAgICAgICAgICAgICAgKHdvcmtfY29tcGxldGlvbikoJmxoLT53b3JrKSAtLT4gJmFj
b25uZWN0b3ItPmhwZF9sb2NrIC0tPiAmYWRldi0+ZG0uZGNfbG9jawo+IAo+IFsgIDEwNC42NDQw
NDNdICBQb3NzaWJsZSB1bnNhZmUgbG9ja2luZyBzY2VuYXJpbzoKPiAKPiBbICAxMDQuNjQ0MDQ5
XSAgICAgICAgQ1BVMCAgICAgICAgICAgICAgICAgICAgQ1BVMQo+IFsgIDEwNC42NDQwNTVdICAg
ICAgICAtLS0tICAgICAgICAgICAgICAgICAgICAtLS0tCj4gWyAgMTA0LjY0NDA2MF0gICBsb2Nr
KCZhZGV2LT5kbS5kY19sb2NrKTsKPiBbICAxMDQuNjQ0MDY2XSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbG9jaygmYWNvbm5lY3Rvci0+aHBkX2xvY2spOwo+IFsgIDEwNC42NDQwNzVd
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NrKCZhZGV2LT5kbS5kY19sb2NrKTsK
PiBbICAxMDQuNjQ0MDgzXSAgIGxvY2soKHdvcmtfY29tcGxldGlvbikoJmxoLT53b3JrKSk7Cj4g
WyAgMTA0LjY0NDA5MF0KPiAgICAgICAgICAgICAgICAgICoqKiBERUFETE9DSyAqKioKPiAKPiBb
ICAxMDQuNjQ0MDk2XSAzIGxvY2tzIGhlbGQgYnkgY2F0LzExNTg6Cj4gWyAgMTA0LjY0NDEwM10g
ICMwOiBmZmZmODg4MTBkMGU0ZWI4ICgmYXR0ci0+bXV0ZXgpeysuKy59LXszOjN9LCBhdDogc2lt
cGxlX2F0dHJfcmVhZCsweDRlLzB4MTEwCj4gWyAgMTA0LjY0NDExOV0gICMxOiBmZmZmODg4MTBh
MGExNjAwICgmYWRldi0+cmVzZXRfc2VtKXsrKysrfS17MzozfSwgYXQ6IGFtZGdwdV9kZXZpY2Vf
bG9ja19hZGV2KzB4NDIvMHg5NCBbYW1kZ3B1XQo+IFsgIDEwNC42NDQ0ODldICAjMjogZmZmZjg4
ODEwYTA5Y2M3MCAoJmFkZXYtPmRtLmRjX2xvY2speysuKy59LXszOjN9LCBhdDogZG1fc3VzcGVu
ZCsweGIyLzB4MWQwIFthbWRncHVdCj4gCj4gU2lnbmVkLW9mZi1ieTogTGFuZyBZdSA8TGFuZy5Z
dUBhbWQuY29tPgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9k
bS9hbWRncHVfZG0uYyB8IDYgKysrKy0tCj4gICAxIGZpbGUgY2hhbmdlZCwgNCBpbnNlcnRpb25z
KCspLCAyIGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2FtZGdwdV9kbS9hbWRncHVfZG0uYwo+IGluZGV4IGUxNzZlYTg0ZDc1Yi4uODcyNzQ4OGRm
NzY5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0v
YW1kZ3B1X2RtLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2Rt
L2FtZGdwdV9kbS5jCj4gQEAgLTI2NTcsMTMgKzI2NTcsMTUgQEAgc3RhdGljIHZvaWQgaGFuZGxl
X2hwZF9yeF9pcnEodm9pZCAqcGFyYW0pCj4gICAJCX0KPiAgIAl9Cj4gICAKPiAtCW11dGV4X2xv
Y2soJmFkZXYtPmRtLmRjX2xvY2spOwo+ICsJaWYgKCFhbWRncHVfaW5fcmVzZXQoYWRldikpCj4g
KwkJbXV0ZXhfbG9jaygmYWRldi0+ZG0uZGNfbG9jayk7Cj4gICAjaWZkZWYgQ09ORklHX0RSTV9B
TURfRENfSERDUAo+ICAgCXJlc3VsdCA9IGRjX2xpbmtfaGFuZGxlX2hwZF9yeF9pcnEoZGNfbGlu
aywgJmhwZF9pcnFfZGF0YSwgTlVMTCk7Cj4gICAjZWxzZQo+ICAgCXJlc3VsdCA9IGRjX2xpbmtf
aGFuZGxlX2hwZF9yeF9pcnEoZGNfbGluaywgTlVMTCwgTlVMTCk7Cj4gICAjZW5kaWYKPiAtCW11
dGV4X3VubG9jaygmYWRldi0+ZG0uZGNfbG9jayk7Cj4gKwlpZiAoIWFtZGdwdV9pbl9yZXNldChh
ZGV2KSkKPiArCQltdXRleF91bmxvY2soJmFkZXYtPmRtLmRjX2xvY2spOwo+ICAgCj4gICBvdXQ6
Cj4gICAJaWYgKHJlc3VsdCAmJiAhaXNfbXN0X3Jvb3RfY29ubmVjdG9yKSB7Cj4gCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBs
aXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeAo=
