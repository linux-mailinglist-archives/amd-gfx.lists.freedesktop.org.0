Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BC0128D1EC
	for <lists+amd-gfx@lfdr.de>; Wed, 14 Aug 2019 13:15:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5A65589D58;
	Wed, 14 Aug 2019 11:15:57 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 171B289D58
 for <amd-gfx@lists.freedesktop.org>; Wed, 14 Aug 2019 11:15:56 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id j16so8443820wrr.8
 for <amd-gfx@lists.freedesktop.org>; Wed, 14 Aug 2019 04:15:56 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:references:from:message-id
 :date:user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=oyam3bvBsyXstRLHNhtjSvNcvBh+FZGtsZfg8TbpwVE=;
 b=iWrhijAtUnNJ/Posw7Q1771bCQ40CrRjVWPnH9BJQQa7LoD1WOtu3L8VY2w34g4UJg
 nO+5JNIWyO1La7/42Gs8UE2JeKahwD9AHFPW+q/Se3xqpHXbmU4yDLx3LKfkAW9INmXI
 8tqKcw+VCnKifhLy6UAr7IBn5MmgusEK+uD/hzcIAiZnOyJ9OkFdN+jEZ8n5eCHwss5t
 Z2FsctBEBz8Z0F8G8tRZaklkO8Pefiy1owMquKb+/eRVq3R8z3Ls0Xeh6OLoNFFZGdbg
 Ufsvy0yCQsZWg7yp4MrZdU37/cdiTLHDubEvGTt0oS+XE+qryWrQWiRbqjaABzSOlMue
 wDow==
X-Gm-Message-State: APjAAAVj8EHL8P3lcm3+2fFVDSdFsHakIix6zsf2LhVmORYlvEYnETdw
 5G6oA56BRJYgdA2T/mV5jxRTiFOx
X-Google-Smtp-Source: APXvYqybqx2+ir6lvygcT8dFpBgTqc0IX1QUdA6GRKW4UfWiga3596jcFlCkRXFE5peJOXr/dGZs2g==
X-Received: by 2002:a05:6000:118a:: with SMTP id
 g10mr51112329wrx.175.1565781354523; 
 Wed, 14 Aug 2019 04:15:54 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id e11sm28320401wrc.4.2019.08.14.04.15.53
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Wed, 14 Aug 2019 04:15:54 -0700 (PDT)
Subject: Re: [PATCH] drm/amd/amdgpu: workaround for UVD busy status
To: Kenneth Feng <kenneth.feng@amd.com>, amd-gfx@lists.freedesktop.org
References: <1565781071-5919-1-git-send-email-kenneth.feng@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <aa7f826f-17b3-26da-90e2-b52f0e6263a3@gmail.com>
Date: Wed, 14 Aug 2019 13:15:52 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <1565781071-5919-1-git-send-email-kenneth.feng@amd.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=reply-to:subject:to:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=oyam3bvBsyXstRLHNhtjSvNcvBh+FZGtsZfg8TbpwVE=;
 b=Y9BaplvEaZNafpoCiA7YRacsvclzvJlRTIsmXXIUKJFUBBEv3giGGIvvyaaLnIM3+V
 tp/TxYh4XqiqDRlwnMv1lJU8LwSJsUlb4DE8YH13cl/Snj6ENK/xCbJtyozeDkTb36w+
 /gDHq9SLA35ISfDu6nDGtH0lox+fSp1WSwHovMNV6vrjia71u7F8EMifEHPGMgQUHYpM
 2j4NP7eQyZQSY5xuMDi0g9PWWPZN1yVsRfCaLwUlZ36qjCuXL43gYJmE7yxzjRX/pQ2j
 oyVgisFaWsT2QYEWRtEa1YUr1CLjWkwWwkV++qwchu9Nthk7sm8pHQwSdgOJ1kqKzRBN
 Nv4Q==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMTQuMDguMTkgdW0gMTM6MTEgc2NocmllYiBLZW5uZXRoIEZlbmc6Cj4gT24gVmVnYTIwLCB0
b29scyBkZXBlbmRzIG9uIFVWRF9TVEFUVVMuVkNQVV9SRVBPUlQgYml0MAo+IHRvIGRlY2lkZSBp
ZiBVVkQgaW5zdGFuY2VzIGFyZSBpbiBidXN5IHN0YXRlIG9yIGlkbGUgc3RhdGUuCj4gVGhpcyB3
b3JrYXJvdW5kIGZpeGVzIHRoZSBpc3N1ZSB0aGF0IHRvb2xzIGFsd2F5cyBmZXRjaCB0aGUKPiBV
VkQgaW5zdGFuY2VzIHN0YXRlIGFzIGJ1c3kgc3RhdGUgbm8gbWF0dGVyIGlmIHRoZXJlIGlzIGEg
VVZEIHdvcmsuCgpXZWxsIHdoaWNoIHRvb2xzIGFyZSB1c2luZyB0aGF0PwoKT3ZlciBhbGwgbG9v
a3MgbGlrZSB0aGUgd3JvbmcgYXBwcm9hY2ggdG8gbWUgc2luY2UgeW91IG1vZGlmeSB0aGUgY29t
bW9uIApjb2RlIHRvIGNhbGwgYmFjayBpbnRvIHRoZSBJUCBzcGVjaWZpYyBjb2RlIGFnYWluLgoK
U28gd2l0aG91dCBmdXJ0aGVyIGV4cGxhbmF0aW9uIHRoaXMgaXMgYSBOQUsuCgpDaHJpc3RpYW4u
Cgo+Cj4gU2lnbmVkLW9mZi1ieTogS2VubmV0aCBGZW5nIDxrZW5uZXRoLmZlbmdAYW1kLmNvbT4K
PiAtLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oICAgICAgICB8ICAz
ICsrKwo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIHwgMjMg
KysrKysrKysrKysrKysrKysrKysrKysKPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV91dmQuYyAgICB8IDMwICsrKysrKysrKysrKysrKysrKysrKysrKysrKystLQo+ICAgZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdXZkX3Y3XzAuYyAgICAgIHwgMTkgKysrKysrKysrKysr
KysrKysrKwo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2FtZF9zaGFyZWQuaCAgIHwg
IDEgKwo+ICAgNSBmaWxlcyBjaGFuZ2VkLCA3NCBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygt
KQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKPiBpbmRleCA0ZDA5NmZmLi42ZTVh
NDFiIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKPiBAQCAtMjU5LDYgKzI1
OSw5IEBAIGludCBhbWRncHVfZGV2aWNlX2lwX3NldF9jbG9ja2dhdGluZ19zdGF0ZSh2b2lkICpk
ZXYsCj4gICBpbnQgYW1kZ3B1X2RldmljZV9pcF9zZXRfcG93ZXJnYXRpbmdfc3RhdGUodm9pZCAq
ZGV2LAo+ICAgCQkJCQkgICBlbnVtIGFtZF9pcF9ibG9ja190eXBlIGJsb2NrX3R5cGUsCj4gICAJ
CQkJCSAgIGVudW0gYW1kX3Bvd2VyZ2F0aW5nX3N0YXRlIHN0YXRlKTsKPiAraW50IGFtZGdwdV9k
ZXZpY2VfaXBfc2V0X2luc3RhbmNlX3N0YXRlKHZvaWQgKmRldiwKPiArCQkJCQkgICBlbnVtIGFt
ZF9pcF9ibG9ja190eXBlIGJsb2NrX3R5cGUsCj4gKwkJCQkJICAgYm9vbCBidXN5X3N0YXRlLCBp
bnQgaW5zdCk7Cj4gICB2b2lkIGFtZGdwdV9kZXZpY2VfaXBfZ2V0X2Nsb2NrZ2F0aW5nX3N0YXRl
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgCQkJCQkgICAgdTMyICpmbGFncyk7Cj4g
ICBpbnQgYW1kZ3B1X2RldmljZV9pcF93YWl0X2Zvcl9pZGxlKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
ZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKPiBp
bmRleCA5M2VkM2NiLi5lNjVlMjUxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9kZXZpY2UuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9kZXZpY2UuYwo+IEBAIC0xMTI3LDYgKzExMjcsMjkgQEAgaW50IGFtZGdwdV9kZXZp
Y2VfaXBfc2V0X3Bvd2VyZ2F0aW5nX3N0YXRlKHZvaWQgKmRldiwKPiAgIAlyZXR1cm4gcjsKPiAg
IH0KPiAgIAo+ICtpbnQgYW1kZ3B1X2RldmljZV9pcF9zZXRfaW5zdGFuY2Vfc3RhdGUodm9pZCAq
ZGV2LAo+ICsJCQkJCSAgIGVudW0gYW1kX2lwX2Jsb2NrX3R5cGUgYmxvY2tfdHlwZSwKPiArCQkJ
CQkgICBib29sIGJ1c3lfc3RhdGUsIGludCBpbnN0KQo+ICt7Cj4gKwlzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiA9IGRldjsKPiArCWludCBpLCByID0gMDsKPiArCj4gKwlmb3IgKGkgPSAwOyBp
IDwgYWRldi0+bnVtX2lwX2Jsb2NrczsgaSsrKSB7Cj4gKwkJaWYgKCFhZGV2LT5pcF9ibG9ja3Nb
aV0uc3RhdHVzLnZhbGlkKQo+ICsJCQljb250aW51ZTsKPiArCQlpZiAoYWRldi0+aXBfYmxvY2tz
W2ldLnZlcnNpb24tPnR5cGUgIT0gYmxvY2tfdHlwZSkKPiArCQkJY29udGludWU7Cj4gKwkJaWYg
KCFhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+ZnVuY3MtPnNldF9pbnN0YW5jZV9zdGF0ZSkK
PiArCQkJY29udGludWU7Cj4gKwkJciA9IGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT5mdW5j
cy0+c2V0X2luc3RhbmNlX3N0YXRlKAo+ICsJCQkodm9pZCAqKWFkZXYsIGJ1c3lfc3RhdGUsIGlu
c3QpOwo+ICsJCWlmIChyKQo+ICsJCQlEUk1fRVJST1IoInNldF9pbnN0YW5jZV9zdGF0ZSBvZiBJ
UCBibG9jayA8JXM+IGZhaWxlZCAlZFxuIiwKPiArCQkJCSAgYWRldi0+aXBfYmxvY2tzW2ldLnZl
cnNpb24tPmZ1bmNzLT5uYW1lLCByKTsKPiArCX0KPiArCXJldHVybiByOwo+ICt9Cj4gKwo+ICAg
LyoqCj4gICAgKiBhbWRncHVfZGV2aWNlX2lwX2dldF9jbG9ja2dhdGluZ19zdGF0ZSAtIGdldCB0
aGUgQ0cgc3RhdGUKPiAgICAqCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV91dmQuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91dmQu
Ywo+IGluZGV4IDRlNWQxM2U0Li5kMzQ5NmFiIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV91dmQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV91dmQuYwo+IEBAIC0xMTgwLDEzICsxMTgwLDIyIEBAIHN0YXRpYyB2b2lkIGFt
ZGdwdV91dmRfaWRsZV93b3JrX2hhbmRsZXIoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQo+ICAg
CXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0KPiAgIAkJY29udGFpbmVyX29mKHdvcmssIHN0
cnVjdCBhbWRncHVfZGV2aWNlLCB1dmQuaWRsZV93b3JrLndvcmspOwo+ICAgCXVuc2lnbmVkIGZl
bmNlcyA9IDAsIGksIGo7Cj4gKwl1bnNpZ25lZCAqZmVuY2VzX2luc3QgPSAodW5zaWduZWQgKilr
emFsbG9jKGFkZXYtPnV2ZC5udW1fdXZkX2luc3Qqc2l6ZW9mKHVuc2lnbmVkKSwgR0ZQX0tFUk5F
TCk7Cj4gICAKPiAgIAlmb3IgKGkgPSAwOyBpIDwgYWRldi0+dXZkLm51bV91dmRfaW5zdDsgKytp
KSB7Cj4gICAJCWlmIChhZGV2LT51dmQuaGFydmVzdF9jb25maWcgJiAoMSA8PCBpKSkKPiAgIAkJ
CWNvbnRpbnVlOwo+IC0JCWZlbmNlcyArPSBhbWRncHVfZmVuY2VfY291bnRfZW1pdHRlZCgmYWRl
di0+dXZkLmluc3RbaV0ucmluZyk7Cj4gKwkJZmVuY2VzX2luc3RbaV0gPSBhbWRncHVfZmVuY2Vf
Y291bnRfZW1pdHRlZCgmYWRldi0+dXZkLmluc3RbaV0ucmluZyk7Cj4gKwkJZmVuY2VzICs9IGZl
bmNlc19pbnN0W2ldOwo+ICAgCQlmb3IgKGogPSAwOyBqIDwgYWRldi0+dXZkLm51bV9lbmNfcmlu
Z3M7ICsraikgewo+IC0JCQlmZW5jZXMgKz0gYW1kZ3B1X2ZlbmNlX2NvdW50X2VtaXR0ZWQoJmFk
ZXYtPnV2ZC5pbnN0W2ldLnJpbmdfZW5jW2pdKTsKPiArCQkJZmVuY2VzX2luc3RbaV0gKz0gYW1k
Z3B1X2ZlbmNlX2NvdW50X2VtaXR0ZWQoJmFkZXYtPnV2ZC5pbnN0W2ldLnJpbmdfZW5jW2pdKTsK
PiArCQkJZmVuY2VzICs9IGZlbmNlc19pbnN0W2ldOwo+ICsJCX0KPiArCQkvKiB3b3JrYXJvdW5k
IGZvciB0aGUgdG9vbHMgdG8gc2hvdyBVVkQgYnVzeSBzdGF0dXMgKi8KPiArCQlpZiAoZmVuY2Vz
X2luc3RbaV0gPT0gMCkgewo+ICsJCQlhbWRncHVfZGV2aWNlX2lwX3NldF9pbnN0YW5jZV9zdGF0
ZShhZGV2LCBBTURfSVBfQkxPQ0tfVFlQRV9VVkQsCj4gKwkJCQkJCQkgICAgICAgZmFsc2UsIGkp
Owo+ICsJCQlwcmludGsoIktlbm5ldGggLSBzZXQgaW5zdGFuY2UgaWRsZSFcbiIpOwo+ICAgCQl9
Cj4gICAJfQo+ICAgCj4gQEAgLTEyMTAsMTAgKzEyMTksMjcgQEAgdm9pZCBhbWRncHVfdXZkX3Jp
bmdfYmVnaW5fdXNlKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZykKPiAgIHsKPiAgIAlzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiA9IHJpbmctPmFkZXY7Cj4gICAJYm9vbCBzZXRfY2xvY2tzOwo+
ICsJdW5zaWduZWQgaSxqOwo+ICsJdW5zaWduZWQgKmZlbmNlc19pbnN0ID0gKHVuc2lnbmVkICop
a3phbGxvYyhhZGV2LT51dmQubnVtX3V2ZF9pbnN0KnNpemVvZih1bnNpZ25lZCksIEdGUF9LRVJO
RUwpOwo+ICAgCj4gICAJaWYgKGFtZGdwdV9zcmlvdl92ZihhZGV2KSkKPiAgIAkJcmV0dXJuOwo+
ICAgCj4gKwlmb3IgKGkgPSAwOyBpIDwgYWRldi0+dXZkLm51bV91dmRfaW5zdDsgKytpKSB7Cj4g
KwkJcHJpbnRrKCJLZW5uZXRoIC0gcnVuIGFmdGVyIHNldF9jbG9jayFcbiIpOwo+ICsJCWlmIChh
ZGV2LT51dmQuaGFydmVzdF9jb25maWcgJiAoMSA8PCBpKSkKPiArCQkJY29udGludWU7Cj4gKwkJ
ZmVuY2VzX2luc3RbaV0gPSBhbWRncHVfZmVuY2VfY291bnRfZW1pdHRlZCgmYWRldi0+dXZkLmlu
c3RbaV0ucmluZyk7Cj4gKwkJZm9yIChqID0gMDsgaiA8IGFkZXYtPnV2ZC5udW1fZW5jX3Jpbmdz
OyArK2opCj4gKwkJCWZlbmNlc19pbnN0W2ldICs9IGFtZGdwdV9mZW5jZV9jb3VudF9lbWl0dGVk
KCZhZGV2LT51dmQuaW5zdFtpXS5yaW5nX2VuY1tqXSk7Cj4gKwkJLyogd29ya2Fyb3VuZCBmb3Ig
dGhlIHRvb2xzIHRvIHNob3cgVVZEIGJ1c3kgKi8KPiArCQlpZiAoZmVuY2VzX2luc3RbaV0gIT0g
MCkgewo+ICsJCQlhbWRncHVfZGV2aWNlX2lwX3NldF9pbnN0YW5jZV9zdGF0ZShhZGV2LCBBTURf
SVBfQkxPQ0tfVFlQRV9VVkQsCj4gKwkJCQkJCSAgICAgICB0cnVlLCBpKTsKPiArCQkJcHJpbnRr
KCJLZW5uZXRoIC0gcnVuIGluIHNldHRpbmcgaW5zdGFuY2Ugc3RhdGUhXG4iKTsKPiArCQl9Cj4g
Kwl9Cj4gKwo+ICAgCXNldF9jbG9ja3MgPSAhY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCZhZGV2
LT51dmQuaWRsZV93b3JrKTsKPiAgIAlpZiAoc2V0X2Nsb2Nrcykgewo+ICAgCQlpZiAoYWRldi0+
cG0uZHBtX2VuYWJsZWQpIHsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvdXZkX3Y3XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3V2ZF92N18wLmMKPiBp
bmRleCAyZjNkNGU4Li5iZjBmMzNhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L3V2ZF92N18wLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS91dmRf
djdfMC5jCj4gQEAgLTE3MzgsNiArMTczOCwyNCBAQCBzdGF0aWMgaW50IHV2ZF92N18wX3NldF9j
bG9ja2dhdGluZ19zdGF0ZSh2b2lkICpoYW5kbGUsCj4gICAJcmV0dXJuIDA7Cj4gICB9Cj4gICAK
PiArLyogd29ya2Fyb3VuZCBmb3IgdG9vbHMgdG8gZmV0Y2ggdGhlIFVWRCBidXN5IHN0YXR1cyAq
Lwo+ICtzdGF0aWMgaW50IHV2ZF92N18wX3NldF9pbnN0YW5jZV9zdGF0ZSh2b2lkICpoYW5kbGUs
IGJvb2wgYnVzeV9zdGF0ZSwgaW50IGluc3QpCj4gK3sKPiArCXN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2ID0gKHN0cnVjdCBhbWRncHVfZGV2aWNlICopaGFuZGxlOwo+ICsKPiArCWlmKGluc3Qg
Pj0gYWRldi0+dXZkLm51bV91dmRfaW5zdCkKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlp
ZihidXN5X3N0YXRlKQo+ICsJCVdSRUczMl9QKFNPQzE1X1JFR19PRkZTRVQoVVZELCBpbnN0LCBt
bVVWRF9TVEFUVVMpLCAoMSA8PCBVVkRfU1RBVFVTX19WQ1BVX1JFUE9SVF9fU0hJRlQpLAo+ICsJ
CQkJfigxIDw8IFVWRF9TVEFUVVNfX1ZDUFVfUkVQT1JUX19TSElGVCkpOwo+ICsJZWxzZQo+ICsJ
CVdSRUczMl9QKFNPQzE1X1JFR19PRkZTRVQoVVZELCBpbnN0LCBtbVVWRF9TVEFUVVMpLCAwLAo+
ICsJCQkJfigxIDw8IFVWRF9TVEFUVVNfX1ZDUFVfUkVQT1JUX19TSElGVCkpOwo+ICsKPiArCXJl
dHVybiAwOwo+ICt9Cj4gKwo+ICAgY29uc3Qgc3RydWN0IGFtZF9pcF9mdW5jcyB1dmRfdjdfMF9p
cF9mdW5jcyA9IHsKPiAgIAkubmFtZSA9ICJ1dmRfdjdfMCIsCj4gICAJLmVhcmx5X2luaXQgPSB1
dmRfdjdfMF9lYXJseV9pbml0LAo+IEBAIC0xNzU2LDYgKzE3NzQsNyBAQCBjb25zdCBzdHJ1Y3Qg
YW1kX2lwX2Z1bmNzIHV2ZF92N18wX2lwX2Z1bmNzID0gewo+ICAgCS5wb3N0X3NvZnRfcmVzZXQg
PSBOVUxMIC8qIHV2ZF92N18wX3Bvc3Rfc29mdF9yZXNldCAqLywKPiAgIAkuc2V0X2Nsb2NrZ2F0
aW5nX3N0YXRlID0gdXZkX3Y3XzBfc2V0X2Nsb2NrZ2F0aW5nX3N0YXRlLAo+ICAgCS5zZXRfcG93
ZXJnYXRpbmdfc3RhdGUgPSBOVUxMIC8qIHV2ZF92N18wX3NldF9wb3dlcmdhdGluZ19zdGF0ZSAq
LywKPiArCS5zZXRfaW5zdGFuY2Vfc3RhdGUgPSB1dmRfdjdfMF9zZXRfaW5zdGFuY2Vfc3RhdGUs
Cj4gICB9Owo+ICAgCj4gICBzdGF0aWMgY29uc3Qgc3RydWN0IGFtZGdwdV9yaW5nX2Z1bmNzIHV2
ZF92N18wX3Jpbmdfdm1fZnVuY3MgPSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvaW5jbHVkZS9hbWRfc2hhcmVkLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2luY2x1ZGUvYW1k
X3NoYXJlZC5oCj4gaW5kZXggNzc5YzllNy4uOGNjNTRjOSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2luY2x1ZGUvYW1kX3NoYXJlZC5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9pbmNsdWRlL2FtZF9zaGFyZWQuaAo+IEBAIC0xOTgsNiArMTk4LDcgQEAgc3RydWN0IGFt
ZF9pcF9mdW5jcyB7Cj4gICAJdm9pZCAoKmdldF9jbG9ja2dhdGluZ19zdGF0ZSkodm9pZCAqaGFu
ZGxlLCB1MzIgKmZsYWdzKTsKPiAgIAkvKiogQGVuYWJsZV91bWRfcHN0YXRlOiBlbmFibGUgVU1E
IHBvd2Vyc3RhdGUgKi8KPiAgIAlpbnQgKCplbmFibGVfdW1kX3BzdGF0ZSkodm9pZCAqaGFuZGxl
LCBlbnVtIGFtZF9kcG1fZm9yY2VkX2xldmVsICpsZXZlbCk7Cj4gKwlpbnQgKCpzZXRfaW5zdGFu
Y2Vfc3RhdGUpKHZvaWQgKmhhbmRsZSwgYm9vbCBidXN5X3N0YXRlLCBpbnQgaW5zdCk7Cj4gICB9
Owo+ICAgCj4gICAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
