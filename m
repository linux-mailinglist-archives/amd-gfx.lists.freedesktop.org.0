Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9F0A6100211
	for <lists+amd-gfx@lfdr.de>; Mon, 18 Nov 2019 11:07:46 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1DCB18987C;
	Mon, 18 Nov 2019 10:07:45 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-BL2-obe.outbound.protection.outlook.com
 (mail-eopbgr750051.outbound.protection.outlook.com [40.107.75.51])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A30C789873
 for <amd-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 10:07:43 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=fOWauvAbxSzPg9aR9NCJIbsD99hhUz8XEmElOs7Y3nVe2sPoK6UKHlfEd9eM/f/q9kTno789GQUeKdhmGsETFa66sl3znilWuPJCoqrj4SaOD5xwYDMjWFn33E4hLY+zOtaOVX7P6ZRo7oWPVdPv0IYTxlCUzK/0i8acNFlNIU1usM+3YM/EkqjMBXNpKogkuEJuU1m57Kxh1q39+T77gQxGKvX381AafIJ597nhYaIEk4F8nd5e79MKKt2p80ncPtSx0uNzVXWupnfE1grYIolfUTab42BD7HLq8tKmTmYoBtCcijVgY8A8U/qGdfxfrDSwXsGOxyBaiIDjxaUmuA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=rgDrX6w/kidnceuHsztidUnsI3jLgGgOOfZ4+dRxYsE=;
 b=CCrflNK0xx5XtmgBmYZorQwEvB+CZ4iMHT5j+OXj/2jxJyQj18lvzDZHC92hwVu6QLQE3crQKUw7J9jwLf79ywg3H69SpXO8AyWvnFvcOZ+RIzXAgEQlq+vOIv80gUXRLzoh5Ph1GEilOi1D/RowAqbRwmk5KNVTzB0dntlNpxvvUhHX3HtV1AT7VfYhAQnrw2uIGvA2BoK/NDp0cnhID5XxI7nRP8XAJjBUC1Urw4jBlIwpKun80V3UsR2+LiwwMNGTHQOaqUTJHtz0KLZ406JgwWu3fNr6PVSDLKtOBLHxW/C8TfPlOGfyzzL+89RC9WzqisIwjgFadJ6Me/mWeg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from DM3PR12CA0076.namprd12.prod.outlook.com (2603:10b6:0:57::20) by
 DM6PR12MB3001.namprd12.prod.outlook.com (2603:10b6:5:116::28) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2451.30; Mon, 18 Nov 2019 10:07:41 +0000
Received: from CO1NAM11FT025.eop-nam11.prod.protection.outlook.com
 (2a01:111:f400:7eab::209) by DM3PR12CA0076.outlook.office365.com
 (2603:10b6:0:57::20) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2451.23 via Frontend
 Transport; Mon, 18 Nov 2019 10:07:40 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXMB01.amd.com (165.204.84.17) by
 CO1NAM11FT025.mail.protection.outlook.com (10.13.175.232) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.20.2451.23 via Frontend Transport; Mon, 18 Nov 2019 10:07:40 +0000
Received: from SATLEXMB03.amd.com (10.181.40.144) by SATLEXMB01.amd.com
 (10.181.40.142) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.1713.5; Mon, 18 Nov
 2019 04:07:39 -0600
Received: from SATLEXMB02.amd.com (10.181.40.143) by SATLEXMB03.amd.com
 (10.181.40.144) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.1713.5; Mon, 18 Nov
 2019 04:07:39 -0600
Received: from hawzhang-System-Product-Master.amd.com (10.180.168.240) by
 SATLEXMB02.amd.com (10.181.40.143) with Microsoft SMTP Server id 15.1.1713.5
 via Frontend Transport; Mon, 18 Nov 2019 04:07:37 -0600
From: Hawking Zhang <Hawking.Zhang@amd.com>
To: <amd-gfx@lists.freedesktop.org>, John Clements <John.Clements@amd.com>,
 Alex Deucher <alexander.deucher@amd.com>
Subject: [PATCH 3/3] drm/amdgpu: switch to common helper func for psp cmd
 submission
Date: Mon, 18 Nov 2019 18:07:23 +0800
Message-ID: <20191118100723.19824-3-Hawking.Zhang@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191118100723.19824-1-Hawking.Zhang@amd.com>
References: <20191118100723.19824-1-Hawking.Zhang@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(136003)(346002)(396003)(39860400002)(428003)(189003)(199004)(76176011)(86362001)(26005)(5660300002)(2616005)(476003)(336012)(4326008)(126002)(11346002)(446003)(426003)(486006)(30864003)(50466002)(1076003)(2906002)(50226002)(8936002)(70206006)(70586007)(6636002)(8676002)(81156014)(81166006)(51416003)(305945005)(478600001)(47776003)(186003)(48376002)(53416004)(356004)(316002)(16586007)(110136005)(36756003)(14444005)(6666004)(7696005);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB3001; H:SATLEXMB01.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: d7365960-e493-4068-573f-08d76c0f2587
X-MS-TrafficTypeDiagnostic: DM6PR12MB3001:
X-Microsoft-Antispam-PRVS: <DM6PR12MB3001B54F52FE0AF239716C7AFC4D0@DM6PR12MB3001.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:1923;
X-Forefront-PRVS: 0225B0D5BC
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 0uwSYjgMTMj0yUHi4VnNe0AlGac5hzF3FeGG/POHHsoKQXgCgkoctxnbOt2nf90hTHXLK5o8ALyoUsCe4BvxpdCWULHsManaZkB1hwuvUEXev1kdAFjau4jOymjaIjAEtJ5SMNnEy7Tk1Cl2RAmGXwnt6oUOU3qks99I1GwPi2BkQpIQxU530bNBRayFDc1mbwNIzBKyi72MiBMlPQ4baNdZtpOZVM5qy2SkcFpV6o5DcJbJARSvi/iCq3tgFFTu4Ifrc5fDrUWJDNs+8uHpmG4UI55HV+RD937NrnI1gMeNywysPccawQaNPqq/crU8Vrc/RQVfnTOORYLg58ZHEjBzED6eDBhFowS0PoV/RjLckGsU4e8wGr7A8DPggLMd9eosgOcA9IXEniOZ8Mtc8nDbC4Lh8YCyA4b/HydPFZE92yOZ/v5qL3nyZsqhFWyc
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 18 Nov 2019 10:07:40.4539 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: d7365960-e493-4068-573f-08d76c0f2587
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXMB01.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3001
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=rgDrX6w/kidnceuHsztidUnsI3jLgGgOOfZ4+dRxYsE=;
 b=3CacxfHtGmUyW0aNT3mT2Lw3v3USYqybftAGnkAkAMGzC7UnoziIVxmgjMprJ/hcL1jm4hKQlrt33ri0kic3Vz56W+tEirWr9cxwpzAoyo0Ve8hG2+8wjgcEkvdK+0+5EJXbpciWPqnBRNtBvXdDEOhF3SacAiKOKFnE1kMfvgo=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RHJvcCBhbGwgdGhlIElQIHNwZWNpZmljIGNtZF9zdWJtaXQgY2FsbGJhY2sgZnVuY3Rpb24KYW5k
IHVzZSB0aGUgY29tbW9uIGhlbHBlciBpbnN0ZWFkCgpDaGFuZ2UtSWQ6IEk4NjViMjZmZDI1YTY5
NmYyMTNlODg4YmViOTI3NzE3ZGVjODg0NTQ2ClNpZ25lZC1vZmYtYnk6IEhhd2tpbmcgWmhhbmcg
PEhhd2tpbmcuWmhhbmdAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfcHNwLmMgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Bz
cC5oIHwgIDUgLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjEwXzAuYyAgfCA0
OSAtLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3Yx
MV8wLmMgIHwgNTggLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9wc3BfdjEyXzAuYyAgfCA1OCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92M18xLmMgICB8IDYwIC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KIDYgZmlsZXMgY2hhbmdlZCwgMSBpbnNlcnRpb24oKyksIDIzMSBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmMKaW5kZXggMjI1YWJkNDJi
OGRlLi45ZTdjZmE1ZTU3ZWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9wc3AuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNw
LmMKQEAgLTE1Niw3ICsxNTYsNyBAQCBwc3BfY21kX3N1Ym1pdF9idWYoc3RydWN0IHBzcF9jb250
ZXh0ICpwc3AsCiAJbWVtY3B5KHBzcC0+Y21kX2J1Zl9tZW0sIGNtZCwgc2l6ZW9mKHN0cnVjdCBw
c3BfZ2Z4X2NtZF9yZXNwKSk7CiAKIAlpbmRleCA9IGF0b21pY19pbmNfcmV0dXJuKCZwc3AtPmZl
bmNlX3ZhbHVlKTsKLQlyZXQgPSBwc3BfY21kX3N1Ym1pdChwc3AsIHBzcC0+Y21kX2J1Zl9tY19h
ZGRyLCBmZW5jZV9tY19hZGRyLCBpbmRleCk7CisJcmV0ID0gcHNwX3JpbmdfY21kX3N1Ym1pdChw
c3AsIHBzcC0+Y21kX2J1Zl9tY19hZGRyLCBmZW5jZV9tY19hZGRyLCBpbmRleCk7CiAJaWYgKHJl
dCkgewogCQlhdG9taWNfZGVjKCZwc3AtPmZlbmNlX3ZhbHVlKTsKIAkJbXV0ZXhfdW5sb2NrKCZw
c3AtPm11dGV4KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9wc3AuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wc3AuaAppbmRleCA0
ODJlNzY3NWI3ZGEuLjQwNTk0ZjI3ZGFiMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3BzcC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9wc3AuaApAQCAtOTQsOSArOTQsNiBAQCBzdHJ1Y3QgcHNwX2Z1bmNzCiAJCQkgICAgZW51
bSBwc3BfcmluZ190eXBlIHJpbmdfdHlwZSk7CiAJaW50ICgqcmluZ19kZXN0cm95KShzdHJ1Y3Qg
cHNwX2NvbnRleHQgKnBzcCwKIAkJCSAgICBlbnVtIHBzcF9yaW5nX3R5cGUgcmluZ190eXBlKTsK
LQlpbnQgKCpjbWRfc3VibWl0KShzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwKLQkJCSAgdWludDY0
X3QgY21kX2J1Zl9tY19hZGRyLCB1aW50NjRfdCBmZW5jZV9tY19hZGRyLAotCQkJICBpbnQgaW5k
ZXgpOwogCWJvb2wgKCpjb21wYXJlX3NyYW1fZGF0YSkoc3RydWN0IHBzcF9jb250ZXh0ICpwc3As
CiAJCQkJICBzdHJ1Y3QgYW1kZ3B1X2Zpcm13YXJlX2luZm8gKnVjb2RlLAogCQkJCSAgZW51bSBB
TURHUFVfVUNPREVfSUQgdWNvZGVfdHlwZSk7CkBAIC0zMDIsOCArMjk5LDYgQEAgc3RydWN0IGFt
ZGdwdV9wc3BfZnVuY3MgewogI2RlZmluZSBwc3BfcmluZ19jcmVhdGUocHNwLCB0eXBlKSAocHNw
KS0+ZnVuY3MtPnJpbmdfY3JlYXRlKChwc3ApLCAodHlwZSkpCiAjZGVmaW5lIHBzcF9yaW5nX3N0
b3AocHNwLCB0eXBlKSAocHNwKS0+ZnVuY3MtPnJpbmdfc3RvcCgocHNwKSwgKHR5cGUpKQogI2Rl
ZmluZSBwc3BfcmluZ19kZXN0cm95KHBzcCwgdHlwZSkgKChwc3ApLT5mdW5jcy0+cmluZ19kZXN0
cm95KChwc3ApLCAodHlwZSkpKQotI2RlZmluZSBwc3BfY21kX3N1Ym1pdChwc3AsIGNtZF9tYywg
ZmVuY2VfbWMsIGluZGV4KSBcCi0JCShwc3ApLT5mdW5jcy0+Y21kX3N1Ym1pdCgocHNwKSwgKGNt
ZF9tYyksIChmZW5jZV9tYyksIChpbmRleCkpCiAjZGVmaW5lIHBzcF9jb21wYXJlX3NyYW1fZGF0
YShwc3AsIHVjb2RlLCB0eXBlKSBcCiAJCShwc3ApLT5mdW5jcy0+Y29tcGFyZV9zcmFtX2RhdGEo
KHBzcCksICh1Y29kZSksICh0eXBlKSkKICNkZWZpbmUgcHNwX2luaXRfbWljcm9jb2RlKHBzcCkg
XApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMF8wLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjEwXzAuYwppbmRleCBiOGE0NjFkNDZjYjUu
LmU3ZDU2YzI1YjBmOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNw
X3YxMF8wLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMF8wLmMKQEAg
LTIyNyw1NCArMjI3LDYgQEAgc3RhdGljIGludCBwc3BfdjEwXzBfcmluZ19kZXN0cm95KHN0cnVj
dCBwc3BfY29udGV4dCAqcHNwLAogCXJldHVybiByZXQ7CiB9CiAKLXN0YXRpYyBpbnQgcHNwX3Yx
MF8wX2NtZF9zdWJtaXQoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCi0JCQkJdWludDY0X3QgY21k
X2J1Zl9tY19hZGRyLCB1aW50NjRfdCBmZW5jZV9tY19hZGRyLAotCQkJCWludCBpbmRleCkKLXsK
LQl1bnNpZ25lZCBpbnQgcHNwX3dyaXRlX3B0cl9yZWcgPSAwOwotCXN0cnVjdCBwc3BfZ2Z4X3Ji
X2ZyYW1lICogd3JpdGVfZnJhbWUgPSBwc3AtPmttX3JpbmcucmluZ19tZW07Ci0Jc3RydWN0IHBz
cF9yaW5nICpyaW5nID0gJnBzcC0+a21fcmluZzsKLQlzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSAq
cmluZ19idWZmZXJfc3RhcnQgPSByaW5nLT5yaW5nX21lbTsKLQlzdHJ1Y3QgcHNwX2dmeF9yYl9m
cmFtZSAqcmluZ19idWZmZXJfZW5kID0gcmluZ19idWZmZXJfc3RhcnQgKwotCQlyaW5nLT5yaW5n
X3NpemUgLyBzaXplb2Yoc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUpIC0gMTsKLQlzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiA9IHBzcC0+YWRldjsKLQl1aW50MzJfdCByaW5nX3NpemVfZHcgPSBy
aW5nLT5yaW5nX3NpemUgLyA0OwotCXVpbnQzMl90IHJiX2ZyYW1lX3NpemVfZHcgPSBzaXplb2Yo
c3RydWN0IHBzcF9nZnhfcmJfZnJhbWUpIC8gNDsKLQotCS8qIEtNIChHUENPTSkgcHJlcGFyZSB3
cml0ZSBwb2ludGVyICovCi0JcHNwX3dyaXRlX3B0cl9yZWcgPSBSUkVHMzJfU09DMTUoTVAwLCAw
LCBtbU1QMF9TTU5fQzJQTVNHXzY3KTsKLQotCS8qIFVwZGF0ZSBLTSBSQiBmcmFtZSBwb2ludGVy
IHRvIG5ldyBmcmFtZSAqLwotCWlmICgocHNwX3dyaXRlX3B0cl9yZWcgJSByaW5nX3NpemVfZHcp
ID09IDApCi0JCXdyaXRlX2ZyYW1lID0gcmluZ19idWZmZXJfc3RhcnQ7Ci0JZWxzZQotCQl3cml0
ZV9mcmFtZSA9IHJpbmdfYnVmZmVyX3N0YXJ0ICsgKHBzcF93cml0ZV9wdHJfcmVnIC8gcmJfZnJh
bWVfc2l6ZV9kdyk7Ci0JLyogQ2hlY2sgaW52YWxpZCB3cml0ZV9mcmFtZSBwdHIgYWRkcmVzcyAq
LwotCWlmICgod3JpdGVfZnJhbWUgPCByaW5nX2J1ZmZlcl9zdGFydCkgfHwgKHJpbmdfYnVmZmVy
X2VuZCA8IHdyaXRlX2ZyYW1lKSkgewotCQlEUk1fRVJST1IoInJpbmdfYnVmZmVyX3N0YXJ0ID0g
JXA7IHJpbmdfYnVmZmVyX2VuZCA9ICVwOyB3cml0ZV9mcmFtZSA9ICVwXG4iLAotCQkJICByaW5n
X2J1ZmZlcl9zdGFydCwgcmluZ19idWZmZXJfZW5kLCB3cml0ZV9mcmFtZSk7Ci0JCURSTV9FUlJP
Uigid3JpdGVfZnJhbWUgaXMgcG9pbnRpbmcgdG8gYWRkcmVzcyBvdXQgb2YgYm91bmRzXG4iKTsK
LQkJcmV0dXJuIC1FSU5WQUw7Ci0JfQotCi0JLyogSW5pdGlhbGl6ZSBLTSBSQiBmcmFtZSAqLwot
CW1lbXNldCh3cml0ZV9mcmFtZSwgMCwgc2l6ZW9mKHN0cnVjdCBwc3BfZ2Z4X3JiX2ZyYW1lKSk7
Ci0KLQkvKiBVcGRhdGUgS00gUkIgZnJhbWUgKi8KLQl3cml0ZV9mcmFtZS0+Y21kX2J1Zl9hZGRy
X2hpID0gdXBwZXJfMzJfYml0cyhjbWRfYnVmX21jX2FkZHIpOwotCXdyaXRlX2ZyYW1lLT5jbWRf
YnVmX2FkZHJfbG8gPSBsb3dlcl8zMl9iaXRzKGNtZF9idWZfbWNfYWRkcik7Ci0Jd3JpdGVfZnJh
bWUtPmZlbmNlX2FkZHJfaGkgPSB1cHBlcl8zMl9iaXRzKGZlbmNlX21jX2FkZHIpOwotCXdyaXRl
X2ZyYW1lLT5mZW5jZV9hZGRyX2xvID0gbG93ZXJfMzJfYml0cyhmZW5jZV9tY19hZGRyKTsKLQl3
cml0ZV9mcmFtZS0+ZmVuY2VfdmFsdWUgPSBpbmRleDsKLQlhbWRncHVfYXNpY19mbHVzaF9oZHAo
YWRldiwgTlVMTCk7Ci0KLQkvKiBVcGRhdGUgdGhlIHdyaXRlIFBvaW50ZXIgaW4gRFdPUkRzICov
Ci0JcHNwX3dyaXRlX3B0cl9yZWcgPSAocHNwX3dyaXRlX3B0cl9yZWcgKyByYl9mcmFtZV9zaXpl
X2R3KSAlIHJpbmdfc2l6ZV9kdzsKLQlXUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQ
TVNHXzY3LCBwc3Bfd3JpdGVfcHRyX3JlZyk7Ci0KLQlyZXR1cm4gMDsKLX0KLQogc3RhdGljIGlu
dAogcHNwX3YxMF8wX3NyYW1fbWFwKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCQkgICB1
bnNpZ25lZCBpbnQgKnNyYW1fb2Zmc2V0LCB1bnNpZ25lZCBpbnQgKnNyYW1fYWRkcl9yZWdfb2Zm
c2V0LApAQCAtNDI0LDcgKzM3Niw2IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcHNwX2Z1bmNzIHBz
cF92MTBfMF9mdW5jcyA9IHsKIAkucmluZ19jcmVhdGUgPSBwc3BfdjEwXzBfcmluZ19jcmVhdGUs
CiAJLnJpbmdfc3RvcCA9IHBzcF92MTBfMF9yaW5nX3N0b3AsCiAJLnJpbmdfZGVzdHJveSA9IHBz
cF92MTBfMF9yaW5nX2Rlc3Ryb3ksCi0JLmNtZF9zdWJtaXQgPSBwc3BfdjEwXzBfY21kX3N1Ym1p
dCwKIAkuY29tcGFyZV9zcmFtX2RhdGEgPSBwc3BfdjEwXzBfY29tcGFyZV9zcmFtX2RhdGEsCiAJ
Lm1vZGUxX3Jlc2V0ID0gcHNwX3YxMF8wX21vZGUxX3Jlc2V0LAogCS5yaW5nX2dldF93cHRyID0g
cHNwX3YxMF8wX3JpbmdfZ2V0X3dwdHIsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9wc3BfdjExXzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTFf
MC5jCmluZGV4IDc5ZmEyYzY1NTg1Ny4uMGRjZjZkNDI3N2MyIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjExXzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9wc3BfdjExXzAuYwpAQCAtNTE3LDYzICs1MTcsNiBAQCBzdGF0aWMgaW50IHBzcF92
MTFfMF9yaW5nX2Rlc3Ryb3koc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCiAJcmV0dXJuIHJldDsK
IH0KIAotc3RhdGljIGludCBwc3BfdjExXzBfY21kX3N1Ym1pdChzdHJ1Y3QgcHNwX2NvbnRleHQg
KnBzcCwKLQkJCSAgICAgICB1aW50NjRfdCBjbWRfYnVmX21jX2FkZHIsIHVpbnQ2NF90IGZlbmNl
X21jX2FkZHIsCi0JCQkgICAgICAgaW50IGluZGV4KQotewotCXVuc2lnbmVkIGludCBwc3Bfd3Jp
dGVfcHRyX3JlZyA9IDA7Ci0Jc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUgKndyaXRlX2ZyYW1lID0g
cHNwLT5rbV9yaW5nLnJpbmdfbWVtOwotCXN0cnVjdCBwc3BfcmluZyAqcmluZyA9ICZwc3AtPmtt
X3Jpbmc7Ci0Jc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUgKnJpbmdfYnVmZmVyX3N0YXJ0ID0gcmlu
Zy0+cmluZ19tZW07Ci0Jc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUgKnJpbmdfYnVmZmVyX2VuZCA9
IHJpbmdfYnVmZmVyX3N0YXJ0ICsKLQkJcmluZy0+cmluZ19zaXplIC8gc2l6ZW9mKHN0cnVjdCBw
c3BfZ2Z4X3JiX2ZyYW1lKSAtIDE7Ci0Jc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBwc3At
PmFkZXY7Ci0JdWludDMyX3QgcmluZ19zaXplX2R3ID0gcmluZy0+cmluZ19zaXplIC8gNDsKLQl1
aW50MzJfdCByYl9mcmFtZV9zaXplX2R3ID0gc2l6ZW9mKHN0cnVjdCBwc3BfZ2Z4X3JiX2ZyYW1l
KSAvIDQ7Ci0KLQkvKiBLTSAoR1BDT00pIHByZXBhcmUgd3JpdGUgcG9pbnRlciAqLwotCWlmIChw
c3BfdjExXzBfc3VwcG9ydF92bXJfcmluZyhwc3ApKQotCQlwc3Bfd3JpdGVfcHRyX3JlZyA9IFJS
RUczMl9TT0MxNShNUDAsIDAsIG1tTVAwX1NNTl9DMlBNU0dfMTAyKTsKLQllbHNlCi0JCXBzcF93
cml0ZV9wdHJfcmVnID0gUlJFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR182Nyk7
Ci0KLQkvKiBVcGRhdGUgS00gUkIgZnJhbWUgcG9pbnRlciB0byBuZXcgZnJhbWUgKi8KLQkvKiB3
cml0ZV9mcmFtZSBwdHIgaW5jcmVtZW50cyBieSBzaXplIG9mIHJiX2ZyYW1lIGluIGJ5dGVzICov
Ci0JLyogcHNwX3dyaXRlX3B0cl9yZWcgaW5jcmVtZW50cyBieSBzaXplIG9mIHJiX2ZyYW1lIGlu
IERXT1JEcyAqLwotCWlmICgocHNwX3dyaXRlX3B0cl9yZWcgJSByaW5nX3NpemVfZHcpID09IDAp
Ci0JCXdyaXRlX2ZyYW1lID0gcmluZ19idWZmZXJfc3RhcnQ7Ci0JZWxzZQotCQl3cml0ZV9mcmFt
ZSA9IHJpbmdfYnVmZmVyX3N0YXJ0ICsgKHBzcF93cml0ZV9wdHJfcmVnIC8gcmJfZnJhbWVfc2l6
ZV9kdyk7Ci0JLyogQ2hlY2sgaW52YWxpZCB3cml0ZV9mcmFtZSBwdHIgYWRkcmVzcyAqLwotCWlm
ICgod3JpdGVfZnJhbWUgPCByaW5nX2J1ZmZlcl9zdGFydCkgfHwgKHJpbmdfYnVmZmVyX2VuZCA8
IHdyaXRlX2ZyYW1lKSkgewotCQlEUk1fRVJST1IoInJpbmdfYnVmZmVyX3N0YXJ0ID0gJXA7IHJp
bmdfYnVmZmVyX2VuZCA9ICVwOyB3cml0ZV9mcmFtZSA9ICVwXG4iLAotCQkJICByaW5nX2J1ZmZl
cl9zdGFydCwgcmluZ19idWZmZXJfZW5kLCB3cml0ZV9mcmFtZSk7Ci0JCURSTV9FUlJPUigid3Jp
dGVfZnJhbWUgaXMgcG9pbnRpbmcgdG8gYWRkcmVzcyBvdXQgb2YgYm91bmRzXG4iKTsKLQkJcmV0
dXJuIC1FSU5WQUw7Ci0JfQotCi0JLyogSW5pdGlhbGl6ZSBLTSBSQiBmcmFtZSAqLwotCW1lbXNl
dCh3cml0ZV9mcmFtZSwgMCwgc2l6ZW9mKHN0cnVjdCBwc3BfZ2Z4X3JiX2ZyYW1lKSk7Ci0KLQkv
KiBVcGRhdGUgS00gUkIgZnJhbWUgKi8KLQl3cml0ZV9mcmFtZS0+Y21kX2J1Zl9hZGRyX2hpID0g
dXBwZXJfMzJfYml0cyhjbWRfYnVmX21jX2FkZHIpOwotCXdyaXRlX2ZyYW1lLT5jbWRfYnVmX2Fk
ZHJfbG8gPSBsb3dlcl8zMl9iaXRzKGNtZF9idWZfbWNfYWRkcik7Ci0Jd3JpdGVfZnJhbWUtPmZl
bmNlX2FkZHJfaGkgPSB1cHBlcl8zMl9iaXRzKGZlbmNlX21jX2FkZHIpOwotCXdyaXRlX2ZyYW1l
LT5mZW5jZV9hZGRyX2xvID0gbG93ZXJfMzJfYml0cyhmZW5jZV9tY19hZGRyKTsKLQl3cml0ZV9m
cmFtZS0+ZmVuY2VfdmFsdWUgPSBpbmRleDsKLQlhbWRncHVfYXNpY19mbHVzaF9oZHAoYWRldiwg
TlVMTCk7Ci0KLQkvKiBVcGRhdGUgdGhlIHdyaXRlIFBvaW50ZXIgaW4gRFdPUkRzICovCi0JcHNw
X3dyaXRlX3B0cl9yZWcgPSAocHNwX3dyaXRlX3B0cl9yZWcgKyByYl9mcmFtZV9zaXplX2R3KSAl
IHJpbmdfc2l6ZV9kdzsKLQlpZiAocHNwX3YxMV8wX3N1cHBvcnRfdm1yX3JpbmcocHNwKSkgewot
CQlXUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzEwMiwgcHNwX3dyaXRlX3B0
cl9yZWcpOwotCQlXUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzEwMSwgR0ZY
X0NUUkxfQ01EX0lEX0NPTlNVTUVfQ01EKTsKLQl9IGVsc2UKLQkJV1JFRzMyX1NPQzE1KE1QMCwg
MCwgbW1NUDBfU01OX0MyUE1TR182NywgcHNwX3dyaXRlX3B0cl9yZWcpOwotCi0JcmV0dXJuIDA7
Ci19Ci0KIHN0YXRpYyBpbnQKIHBzcF92MTFfMF9zcmFtX21hcChzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwKIAkJICB1bnNpZ25lZCBpbnQgKnNyYW1fb2Zmc2V0LCB1bnNpZ25lZCBpbnQgKnNy
YW1fYWRkcl9yZWdfb2Zmc2V0LApAQCAtMTA5OSw3ICsxMDQyLDYgQEAgc3RhdGljIGNvbnN0IHN0
cnVjdCBwc3BfZnVuY3MgcHNwX3YxMV8wX2Z1bmNzID0gewogCS5yaW5nX2NyZWF0ZSA9IHBzcF92
MTFfMF9yaW5nX2NyZWF0ZSwKIAkucmluZ19zdG9wID0gcHNwX3YxMV8wX3Jpbmdfc3RvcCwKIAku
cmluZ19kZXN0cm95ID0gcHNwX3YxMV8wX3JpbmdfZGVzdHJveSwKLQkuY21kX3N1Ym1pdCA9IHBz
cF92MTFfMF9jbWRfc3VibWl0LAogCS5jb21wYXJlX3NyYW1fZGF0YSA9IHBzcF92MTFfMF9jb21w
YXJlX3NyYW1fZGF0YSwKIAkubW9kZTFfcmVzZXQgPSBwc3BfdjExXzBfbW9kZTFfcmVzZXQsCiAJ
LnhnbWlfZ2V0X3RvcG9sb2d5X2luZm8gPSBwc3BfdjExXzBfeGdtaV9nZXRfdG9wb2xvZ3lfaW5m
bywKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTJfMC5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMl8wLmMKaW5kZXggNzViM2Y5ZDE1YTE4
Li41OGQ4YjZkNzMyZTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3Bz
cF92MTJfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTJfMC5jCkBA
IC0zMzQsNjMgKzMzNCw2IEBAIHN0YXRpYyBpbnQgcHNwX3YxMl8wX3JpbmdfZGVzdHJveShzdHJ1
Y3QgcHNwX2NvbnRleHQgKnBzcCwKIAlyZXR1cm4gcmV0OwogfQogCi1zdGF0aWMgaW50IHBzcF92
MTJfMF9jbWRfc3VibWl0KHN0cnVjdCBwc3BfY29udGV4dCAqcHNwLAotCQkJICAgICAgIHVpbnQ2
NF90IGNtZF9idWZfbWNfYWRkciwgdWludDY0X3QgZmVuY2VfbWNfYWRkciwKLQkJCSAgICAgICBp
bnQgaW5kZXgpCi17Ci0JdW5zaWduZWQgaW50IHBzcF93cml0ZV9wdHJfcmVnID0gMDsKLQlzdHJ1
Y3QgcHNwX2dmeF9yYl9mcmFtZSAqd3JpdGVfZnJhbWUgPSBwc3AtPmttX3JpbmcucmluZ19tZW07
Ci0Jc3RydWN0IHBzcF9yaW5nICpyaW5nID0gJnBzcC0+a21fcmluZzsKLQlzdHJ1Y3QgcHNwX2dm
eF9yYl9mcmFtZSAqcmluZ19idWZmZXJfc3RhcnQgPSByaW5nLT5yaW5nX21lbTsKLQlzdHJ1Y3Qg
cHNwX2dmeF9yYl9mcmFtZSAqcmluZ19idWZmZXJfZW5kID0gcmluZ19idWZmZXJfc3RhcnQgKwot
CQlyaW5nLT5yaW5nX3NpemUgLyBzaXplb2Yoc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUpIC0gMTsK
LQlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHBzcC0+YWRldjsKLQl1aW50MzJfdCByaW5n
X3NpemVfZHcgPSByaW5nLT5yaW5nX3NpemUgLyA0OwotCXVpbnQzMl90IHJiX2ZyYW1lX3NpemVf
ZHcgPSBzaXplb2Yoc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUpIC8gNDsKLQotCS8qIEtNIChHUENP
TSkgcHJlcGFyZSB3cml0ZSBwb2ludGVyICovCi0JaWYgKHBzcF92MTJfMF9zdXBwb3J0X3Ztcl9y
aW5nKHBzcCkpCi0JCXBzcF93cml0ZV9wdHJfcmVnID0gUlJFRzMyX1NPQzE1KE1QMCwgMCwgbW1N
UDBfU01OX0MyUE1TR18xMDIpOwotCWVsc2UKLQkJcHNwX3dyaXRlX3B0cl9yZWcgPSBSUkVHMzJf
U09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzY3KTsKLQotCS8qIFVwZGF0ZSBLTSBSQiBm
cmFtZSBwb2ludGVyIHRvIG5ldyBmcmFtZSAqLwotCS8qIHdyaXRlX2ZyYW1lIHB0ciBpbmNyZW1l
bnRzIGJ5IHNpemUgb2YgcmJfZnJhbWUgaW4gYnl0ZXMgKi8KLQkvKiBwc3Bfd3JpdGVfcHRyX3Jl
ZyBpbmNyZW1lbnRzIGJ5IHNpemUgb2YgcmJfZnJhbWUgaW4gRFdPUkRzICovCi0JaWYgKChwc3Bf
d3JpdGVfcHRyX3JlZyAlIHJpbmdfc2l6ZV9kdykgPT0gMCkKLQkJd3JpdGVfZnJhbWUgPSByaW5n
X2J1ZmZlcl9zdGFydDsKLQllbHNlCi0JCXdyaXRlX2ZyYW1lID0gcmluZ19idWZmZXJfc3RhcnQg
KyAocHNwX3dyaXRlX3B0cl9yZWcgLyByYl9mcmFtZV9zaXplX2R3KTsKLQkvKiBDaGVjayBpbnZh
bGlkIHdyaXRlX2ZyYW1lIHB0ciBhZGRyZXNzICovCi0JaWYgKCh3cml0ZV9mcmFtZSA8IHJpbmdf
YnVmZmVyX3N0YXJ0KSB8fCAocmluZ19idWZmZXJfZW5kIDwgd3JpdGVfZnJhbWUpKSB7Ci0JCURS
TV9FUlJPUigicmluZ19idWZmZXJfc3RhcnQgPSAlcDsgcmluZ19idWZmZXJfZW5kID0gJXA7IHdy
aXRlX2ZyYW1lID0gJXBcbiIsCi0JCQkgIHJpbmdfYnVmZmVyX3N0YXJ0LCByaW5nX2J1ZmZlcl9l
bmQsIHdyaXRlX2ZyYW1lKTsKLQkJRFJNX0VSUk9SKCJ3cml0ZV9mcmFtZSBpcyBwb2ludGluZyB0
byBhZGRyZXNzIG91dCBvZiBib3VuZHNcbiIpOwotCQlyZXR1cm4gLUVJTlZBTDsKLQl9Ci0KLQkv
KiBJbml0aWFsaXplIEtNIFJCIGZyYW1lICovCi0JbWVtc2V0KHdyaXRlX2ZyYW1lLCAwLCBzaXpl
b2Yoc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUpKTsKLQotCS8qIFVwZGF0ZSBLTSBSQiBmcmFtZSAq
LwotCXdyaXRlX2ZyYW1lLT5jbWRfYnVmX2FkZHJfaGkgPSB1cHBlcl8zMl9iaXRzKGNtZF9idWZf
bWNfYWRkcik7Ci0Jd3JpdGVfZnJhbWUtPmNtZF9idWZfYWRkcl9sbyA9IGxvd2VyXzMyX2JpdHMo
Y21kX2J1Zl9tY19hZGRyKTsKLQl3cml0ZV9mcmFtZS0+ZmVuY2VfYWRkcl9oaSA9IHVwcGVyXzMy
X2JpdHMoZmVuY2VfbWNfYWRkcik7Ci0Jd3JpdGVfZnJhbWUtPmZlbmNlX2FkZHJfbG8gPSBsb3dl
cl8zMl9iaXRzKGZlbmNlX21jX2FkZHIpOwotCXdyaXRlX2ZyYW1lLT5mZW5jZV92YWx1ZSA9IGlu
ZGV4OwotCWFtZGdwdV9hc2ljX2ZsdXNoX2hkcChhZGV2LCBOVUxMKTsKLQotCS8qIFVwZGF0ZSB0
aGUgd3JpdGUgUG9pbnRlciBpbiBEV09SRHMgKi8KLQlwc3Bfd3JpdGVfcHRyX3JlZyA9IChwc3Bf
d3JpdGVfcHRyX3JlZyArIHJiX2ZyYW1lX3NpemVfZHcpICUgcmluZ19zaXplX2R3OwotCWlmIChw
c3BfdjEyXzBfc3VwcG9ydF92bXJfcmluZyhwc3ApKSB7Ci0JCVdSRUczMl9TT0MxNShNUDAsIDAs
IG1tTVAwX1NNTl9DMlBNU0dfMTAyLCBwc3Bfd3JpdGVfcHRyX3JlZyk7Ci0JCVdSRUczMl9TT0Mx
NShNUDAsIDAsIG1tTVAwX1NNTl9DMlBNU0dfMTAxLCBHRlhfQ1RSTF9DTURfSURfQ09OU1VNRV9D
TUQpOwotCX0gZWxzZQotCQlXUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzY3
LCBwc3Bfd3JpdGVfcHRyX3JlZyk7Ci0KLQlyZXR1cm4gMDsKLX0KLQogc3RhdGljIGludAogcHNw
X3YxMl8wX3NyYW1fbWFwKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCQkgIHVuc2lnbmVk
IGludCAqc3JhbV9vZmZzZXQsIHVuc2lnbmVkIGludCAqc3JhbV9hZGRyX3JlZ19vZmZzZXQsCkBA
IC01NzksNyArNTIyLDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwc3BfZnVuY3MgcHNwX3YxMl8w
X2Z1bmNzID0gewogCS5yaW5nX2NyZWF0ZSA9IHBzcF92MTJfMF9yaW5nX2NyZWF0ZSwKIAkucmlu
Z19zdG9wID0gcHNwX3YxMl8wX3Jpbmdfc3RvcCwKIAkucmluZ19kZXN0cm95ID0gcHNwX3YxMl8w
X3JpbmdfZGVzdHJveSwKLQkuY21kX3N1Ym1pdCA9IHBzcF92MTJfMF9jbWRfc3VibWl0LAogCS5j
b21wYXJlX3NyYW1fZGF0YSA9IHBzcF92MTJfMF9jb21wYXJlX3NyYW1fZGF0YSwKIAkubW9kZTFf
cmVzZXQgPSBwc3BfdjEyXzBfbW9kZTFfcmVzZXQsCiAJLnJpbmdfZ2V0X3dwdHIgPSBwc3BfdjEy
XzBfcmluZ19nZXRfd3B0ciwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L3BzcF92M18xLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjNfMS5jCmluZGV4
IDFkZTg2ZTU1MGE5MC4uODM5ODA2Y2YxYzZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9wc3BfdjNfMS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3Bz
cF92M18xLmMKQEAgLTQwOCw2NSArNDA4LDYgQEAgc3RhdGljIGludCBwc3BfdjNfMV9yaW5nX2Rl
c3Ryb3koc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCiAJcmV0dXJuIHJldDsKIH0KIAotc3RhdGlj
IGludCBwc3BfdjNfMV9jbWRfc3VibWl0KHN0cnVjdCBwc3BfY29udGV4dCAqcHNwLAotCQkJICAg
ICAgIHVpbnQ2NF90IGNtZF9idWZfbWNfYWRkciwgdWludDY0X3QgZmVuY2VfbWNfYWRkciwKLQkJ
CSAgICAgICBpbnQgaW5kZXgpCi17Ci0JdW5zaWduZWQgaW50IHBzcF93cml0ZV9wdHJfcmVnID0g
MDsKLQlzdHJ1Y3QgcHNwX2dmeF9yYl9mcmFtZSAqIHdyaXRlX2ZyYW1lID0gcHNwLT5rbV9yaW5n
LnJpbmdfbWVtOwotCXN0cnVjdCBwc3BfcmluZyAqcmluZyA9ICZwc3AtPmttX3Jpbmc7Ci0Jc3Ry
dWN0IHBzcF9nZnhfcmJfZnJhbWUgKnJpbmdfYnVmZmVyX3N0YXJ0ID0gcmluZy0+cmluZ19tZW07
Ci0Jc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUgKnJpbmdfYnVmZmVyX2VuZCA9IHJpbmdfYnVmZmVy
X3N0YXJ0ICsKLQkJcmluZy0+cmluZ19zaXplIC8gc2l6ZW9mKHN0cnVjdCBwc3BfZ2Z4X3JiX2Zy
YW1lKSAtIDE7Ci0Jc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBwc3AtPmFkZXY7Ci0JdWlu
dDMyX3QgcmluZ19zaXplX2R3ID0gcmluZy0+cmluZ19zaXplIC8gNDsKLQl1aW50MzJfdCByYl9m
cmFtZV9zaXplX2R3ID0gc2l6ZW9mKHN0cnVjdCBwc3BfZ2Z4X3JiX2ZyYW1lKSAvIDQ7Ci0KLQkv
KiBLTSAoR1BDT00pIHByZXBhcmUgd3JpdGUgcG9pbnRlciAqLwotCWlmIChwc3BfdjNfMV9zdXBw
b3J0X3Ztcl9yaW5nKHBzcCkpCi0JCXBzcF93cml0ZV9wdHJfcmVnID0gUlJFRzMyX1NPQzE1KE1Q
MCwgMCwgbW1NUDBfU01OX0MyUE1TR18xMDIpOwotCWVsc2UKLQkJcHNwX3dyaXRlX3B0cl9yZWcg
PSBSUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzY3KTsKLQotCS8qIFVwZGF0
ZSBLTSBSQiBmcmFtZSBwb2ludGVyIHRvIG5ldyBmcmFtZSAqLwotCS8qIHdyaXRlX2ZyYW1lIHB0
ciBpbmNyZW1lbnRzIGJ5IHNpemUgb2YgcmJfZnJhbWUgaW4gYnl0ZXMgKi8KLQkvKiBwc3Bfd3Jp
dGVfcHRyX3JlZyBpbmNyZW1lbnRzIGJ5IHNpemUgb2YgcmJfZnJhbWUgaW4gRFdPUkRzICovCi0J
aWYgKChwc3Bfd3JpdGVfcHRyX3JlZyAlIHJpbmdfc2l6ZV9kdykgPT0gMCkKLQkJd3JpdGVfZnJh
bWUgPSByaW5nX2J1ZmZlcl9zdGFydDsKLQllbHNlCi0JCXdyaXRlX2ZyYW1lID0gcmluZ19idWZm
ZXJfc3RhcnQgKyAocHNwX3dyaXRlX3B0cl9yZWcgLyByYl9mcmFtZV9zaXplX2R3KTsKLQkvKiBD
aGVjayBpbnZhbGlkIHdyaXRlX2ZyYW1lIHB0ciBhZGRyZXNzICovCi0JaWYgKCh3cml0ZV9mcmFt
ZSA8IHJpbmdfYnVmZmVyX3N0YXJ0KSB8fCAocmluZ19idWZmZXJfZW5kIDwgd3JpdGVfZnJhbWUp
KSB7Ci0JCURSTV9FUlJPUigicmluZ19idWZmZXJfc3RhcnQgPSAlcDsgcmluZ19idWZmZXJfZW5k
ID0gJXA7IHdyaXRlX2ZyYW1lID0gJXBcbiIsCi0JCQkgIHJpbmdfYnVmZmVyX3N0YXJ0LCByaW5n
X2J1ZmZlcl9lbmQsIHdyaXRlX2ZyYW1lKTsKLQkJRFJNX0VSUk9SKCJ3cml0ZV9mcmFtZSBpcyBw
b2ludGluZyB0byBhZGRyZXNzIG91dCBvZiBib3VuZHNcbiIpOwotCQlyZXR1cm4gLUVJTlZBTDsK
LQl9Ci0KLQkvKiBJbml0aWFsaXplIEtNIFJCIGZyYW1lICovCi0JbWVtc2V0KHdyaXRlX2ZyYW1l
LCAwLCBzaXplb2Yoc3RydWN0IHBzcF9nZnhfcmJfZnJhbWUpKTsKLQotCS8qIFVwZGF0ZSBLTSBS
QiBmcmFtZSAqLwotCXdyaXRlX2ZyYW1lLT5jbWRfYnVmX2FkZHJfaGkgPSB1cHBlcl8zMl9iaXRz
KGNtZF9idWZfbWNfYWRkcik7Ci0Jd3JpdGVfZnJhbWUtPmNtZF9idWZfYWRkcl9sbyA9IGxvd2Vy
XzMyX2JpdHMoY21kX2J1Zl9tY19hZGRyKTsKLQl3cml0ZV9mcmFtZS0+ZmVuY2VfYWRkcl9oaSA9
IHVwcGVyXzMyX2JpdHMoZmVuY2VfbWNfYWRkcik7Ci0Jd3JpdGVfZnJhbWUtPmZlbmNlX2FkZHJf
bG8gPSBsb3dlcl8zMl9iaXRzKGZlbmNlX21jX2FkZHIpOwotCXdyaXRlX2ZyYW1lLT5mZW5jZV92
YWx1ZSA9IGluZGV4OwotCWFtZGdwdV9hc2ljX2ZsdXNoX2hkcChhZGV2LCBOVUxMKTsKLQotCS8q
IFVwZGF0ZSB0aGUgd3JpdGUgUG9pbnRlciBpbiBEV09SRHMgKi8KLQlwc3Bfd3JpdGVfcHRyX3Jl
ZyA9IChwc3Bfd3JpdGVfcHRyX3JlZyArIHJiX2ZyYW1lX3NpemVfZHcpICUgcmluZ19zaXplX2R3
OwotCWlmIChwc3BfdjNfMV9zdXBwb3J0X3Ztcl9yaW5nKHBzcCkpIHsKLQkJV1JFRzMyX1NPQzE1
KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18xMDIsIHBzcF93cml0ZV9wdHJfcmVnKTsKLQkJLyog
c2VuZCBpbnRlcnJ1cHQgdG8gUFNQIGZvciBTUklPViByaW5nIHdyaXRlIHBvaW50ZXIgdXBkYXRl
ICovCi0JCVdSRUczMl9TT0MxNShNUDAsIDAsIG1tTVAwX1NNTl9DMlBNU0dfMTAxLAotCQkJCQlH
RlhfQ1RSTF9DTURfSURfQ09OU1VNRV9DTUQpOwotCX0gZWxzZQotCQlXUkVHMzJfU09DMTUoTVAw
LCAwLCBtbU1QMF9TTU5fQzJQTVNHXzY3LCBwc3Bfd3JpdGVfcHRyX3JlZyk7Ci0KLQlyZXR1cm4g
MDsKLX0KLQogc3RhdGljIGludAogcHNwX3YzXzFfc3JhbV9tYXAoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYsCiAJCSAgdW5zaWduZWQgaW50ICpzcmFtX29mZnNldCwgdW5zaWduZWQgaW50ICpz
cmFtX2FkZHJfcmVnX29mZnNldCwKQEAgLTY3Myw3ICs2MTQsNiBAQCBzdGF0aWMgY29uc3Qgc3Ry
dWN0IHBzcF9mdW5jcyBwc3BfdjNfMV9mdW5jcyA9IHsKIAkucmluZ19jcmVhdGUgPSBwc3BfdjNf
MV9yaW5nX2NyZWF0ZSwKIAkucmluZ19zdG9wID0gcHNwX3YzXzFfcmluZ19zdG9wLAogCS5yaW5n
X2Rlc3Ryb3kgPSBwc3BfdjNfMV9yaW5nX2Rlc3Ryb3ksCi0JLmNtZF9zdWJtaXQgPSBwc3BfdjNf
MV9jbWRfc3VibWl0LAogCS5jb21wYXJlX3NyYW1fZGF0YSA9IHBzcF92M18xX2NvbXBhcmVfc3Jh
bV9kYXRhLAogCS5zbXVfcmVsb2FkX3F1aXJrID0gcHNwX3YzXzFfc211X3JlbG9hZF9xdWlyaywK
IAkubW9kZTFfcmVzZXQgPSBwc3BfdjNfMV9tb2RlMV9yZXNldCwKLS0gCjIuMTcuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5n
IGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
