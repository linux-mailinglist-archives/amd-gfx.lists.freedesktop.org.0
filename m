Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7A4D8A81FC
	for <lists+amd-gfx@lfdr.de>; Wed,  4 Sep 2019 14:17:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C745289483;
	Wed,  4 Sep 2019 12:17:28 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B1A358937C
 for <amd-gfx@lists.freedesktop.org>; Wed,  4 Sep 2019 12:17:25 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id c3so21010326wrd.7
 for <amd-gfx@lists.freedesktop.org>; Wed, 04 Sep 2019 05:17:25 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=jYbHlqAJA8u9SAIB0NTg+FR6/cXHq0QfkaxzgEzDZEA=;
 b=aRnfV+S3TXpWyh5M1bcjUd45++HXAEGjiTAhhbkao4am8xk6sLylSepPythO8XH883
 7w/bV7wYmd9sfFqDtviFT1qBpUjjmaAVSj5gyKO+hBavfF5Cig+8YbQLOVN5PRLsSdgF
 sd1M15l8g2YKXeOzZMgb6zlEWcAdWG8GR59/OFEj5izLtQjm8reJZxhrc9N4ofgwC15U
 iouTt68bSFgPf7YBKxVz7lkKe69mtyUiEOFGqhScnfx0qnH6rZHXjvVfDMc4eYkxDnK4
 n0gdrSzRckV/GtDaOm+0Z4czJrzXNMPJqWvB24SMnUcTVCrUYt+/hO+VFEOTTjKsk3NQ
 bOyQ==
X-Gm-Message-State: APjAAAVjejbWGNdkIBN/4T66piPhLUgbf/254M+A65ISQUYhq2ktRBxK
 rAh3IH9RT9lcta7NYlpLXt2r+IqJ
X-Google-Smtp-Source: APXvYqzMcvBmAHJ9qnAoTVotp3nPZEbM4mge7BN7/CeZUjnq6o19wZ9E204x7wBvNrNrZlNMv5QL4w==
X-Received: by 2002:adf:fac1:: with SMTP id a1mr50576720wrs.56.1567599444017; 
 Wed, 04 Sep 2019 05:17:24 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:d563:fe4d:99c7:d80])
 by smtp.gmail.com with ESMTPSA id d12sm3025114wme.33.2019.09.04.05.17.23
 for <amd-gfx@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 04 Sep 2019 05:17:23 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 2/2] drm/amdgpu: cleanup PTE flag generation v2
Date: Wed,  4 Sep 2019 14:17:21 +0200
Message-Id: <20190904121721.69054-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190904121721.69054-1-christian.koenig@amd.com>
References: <20190904121721.69054-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=jYbHlqAJA8u9SAIB0NTg+FR6/cXHq0QfkaxzgEzDZEA=;
 b=GdAKeEN2l8Qwd14zHqZz9QninRqDUwtSEHxFDONwxo/nW+/LPc6nnfQqkitRciHx/g
 315I5bXlSAS+U8syHzE3J2DDthuYa6KwihXM4l4v2NVL2O+kW1aG/NLFWDPKiYWugTIk
 7FxmNvbZwvHqeMg58xK5HHyluKA2USRk3Gqbo8hWyyD6gi+A5fEyBF2JQUMxXgWQDcrD
 9vqE2gYKxacfEujXstT2SFZVEkUHYKkRKb8fntKPP0Afu4ar++cMrti+H0efSDSA9Cma
 Zx6BgCRRwpDTPGWVoKm1rn1xervx1K5/eHYDFLVBiq9EzIcpc+txNr8B2/vuVvPFZ++/
 7c/w==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

TW92ZSB0aGUgQVNJQyBzcGVjaWZpYyBjb2RlIGludG8gYSBuZXcgY2FsbGJhY2sgZnVuY3Rpb24u
Cgp2MjogbWFzayB0aGUgZmxhZ3MgZm9yIFNJIGFuZCBDSUsgaW5zdGVhZCBvZiBhIEJVR19PTigp
LgoKU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuaCB8ICA1ICsr
KysrCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYyAgfCAyOSArKy0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAu
YyAgfCAyMiArKysrKysrKysrKysrKysrKystCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
bWNfdjZfMC5jICAgfCAgOSArKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21j
X3Y3XzAuYyAgIHwgMTEgKysrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21j
X3Y4XzAuYyAgIHwgMTMgKysrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dt
Y192OV8wLmMgICB8IDI0ICsrKysrKysrKysrKysrKysrKystCiA3IGZpbGVzIGNoYW5nZWQsIDgy
IGluc2VydGlvbnMoKyksIDMxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9nbWMuaAppbmRleCA2YTc0MDU5Yjc3NmMuLjIzMmE4ZmY1NjQyYiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuaApAQCAtMTA0LDYgKzEwNCwxMCBAQCBzdHJ1
Y3QgYW1kZ3B1X2dtY19mdW5jcyB7CiAJLyogZ2V0IHRoZSBwZGUgZm9yIGEgZ2l2ZW4gbWMgYWRk
ciAqLwogCXZvaWQgKCpnZXRfdm1fcGRlKShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgaW50
IGxldmVsLAogCQkJICAgdTY0ICpkc3QsIHU2NCAqZmxhZ3MpOworCS8qIGdldCB0aGUgcHRlIGZs
YWdzIHRvIHVzZSBmb3IgYSBCTyBWQSBtYXBwaW5nICovCisJdm9pZCAoKmdldF92bV9wdGUpKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorCQkJICAgc3RydWN0IGFtZGdwdV9ib192YV9tYXBw
aW5nICptYXBwaW5nLAorCQkJICAgdWludDY0X3QgKmZsYWdzKTsKIH07CiAKIHN0cnVjdCBhbWRn
cHVfeGdtaSB7CkBAIC0xODUsNiArMTg5LDcgQEAgc3RydWN0IGFtZGdwdV9nbWMgewogI2RlZmlu
ZSBhbWRncHVfZ21jX2VtaXRfcGFzaWRfbWFwcGluZyhyLCB2bWlkLCBwYXNpZCkgKHIpLT5hZGV2
LT5nbWMuZ21jX2Z1bmNzLT5lbWl0X3Bhc2lkX21hcHBpbmcoKHIpLCAodm1pZCksIChwYXNpZCkp
CiAjZGVmaW5lIGFtZGdwdV9nbWNfbWFwX210eXBlKGFkZXYsIGZsYWdzKSAoYWRldiktPmdtYy5n
bWNfZnVuY3MtPm1hcF9tdHlwZSgoYWRldiksKGZsYWdzKSkKICNkZWZpbmUgYW1kZ3B1X2dtY19n
ZXRfdm1fcGRlKGFkZXYsIGxldmVsLCBkc3QsIGZsYWdzKSAoYWRldiktPmdtYy5nbWNfZnVuY3Mt
PmdldF92bV9wZGUoKGFkZXYpLCAobGV2ZWwpLCAoZHN0KSwgKGZsYWdzKSkKKyNkZWZpbmUgYW1k
Z3B1X2dtY19nZXRfdm1fcHRlKGFkZXYsIG1hcHBpbmcsIGZsYWdzKSAoYWRldiktPmdtYy5nbWNf
ZnVuY3MtPmdldF92bV9wdGUoKGFkZXYpLCAobWFwcGluZyksIChmbGFncykpCiAKIC8qKgogICog
YW1kZ3B1X2dtY192cmFtX2Z1bGxfdmlzaWJsZSAtIENoZWNrIGlmIGZ1bGwgVlJBTSBpcyB2aXNp
YmxlIHRocm91Z2ggdGhlIEJBUgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3ZtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYwpp
bmRleCAyY2I4MmIyMjk4MDIuLmIyODVhYjI1MTQ2ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3ZtLmMKQEAgLTE1NzEsMzMgKzE1NzEsOCBAQCBzdGF0aWMgaW50IGFtZGdwdV92
bV9ib19zcGxpdF9tYXBwaW5nKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCWlmICghKG1h
cHBpbmctPmZsYWdzICYgQU1ER1BVX1BURV9XUklURUFCTEUpKQogCQlmbGFncyAmPSB+QU1ER1BV
X1BURV9XUklURUFCTEU7CiAKLQlpZiAoYWRldi0+YXNpY190eXBlID49IENISVBfVE9OR0EpIHsK
LQkJZmxhZ3MgJj0gfkFNREdQVV9QVEVfRVhFQ1VUQUJMRTsKLQkJZmxhZ3MgfD0gbWFwcGluZy0+
ZmxhZ3MgJiBBTURHUFVfUFRFX0VYRUNVVEFCTEU7Ci0JfQotCi0JaWYgKGFkZXYtPmFzaWNfdHlw
ZSA+PSBDSElQX05BVkkxMCkgewotCQlmbGFncyAmPSB+QU1ER1BVX1BURV9NVFlQRV9OVjEwX01B
U0s7Ci0JCWZsYWdzIHw9IChtYXBwaW5nLT5mbGFncyAmIEFNREdQVV9QVEVfTVRZUEVfTlYxMF9N
QVNLKTsKLQl9IGVsc2UgewotCQlmbGFncyAmPSB+QU1ER1BVX1BURV9NVFlQRV9WRzEwX01BU0s7
Ci0JCWZsYWdzIHw9IChtYXBwaW5nLT5mbGFncyAmIEFNREdQVV9QVEVfTVRZUEVfVkcxMF9NQVNL
KTsKLQl9Ci0KLQlpZiAoKG1hcHBpbmctPmZsYWdzICYgQU1ER1BVX1BURV9QUlQpICYmCi0JICAg
IChhZGV2LT5hc2ljX3R5cGUgPj0gQ0hJUF9WRUdBMTApKSB7Ci0JCWZsYWdzIHw9IEFNREdQVV9Q
VEVfUFJUOwotCQlpZiAoYWRldi0+YXNpY190eXBlID49IENISVBfTkFWSTEwKSB7Ci0JCQlmbGFn
cyB8PSBBTURHUFVfUFRFX1NOT09QRUQ7Ci0JCQlmbGFncyB8PSBBTURHUFVfUFRFX0xPRzsKLQkJ
CWZsYWdzIHw9IEFNREdQVV9QVEVfU1lTVEVNOwotCQl9Ci0JCWZsYWdzICY9IH5BTURHUFVfUFRF
X1ZBTElEOwotCX0KLQlpZiAoYWRldi0+YXNpY190eXBlID09IENISVBfQVJDVFVSVVMgJiYKLQkg
ICAgIShmbGFncyAmIEFNREdQVV9QVEVfU1lTVEVNKSAmJgotCSAgICBtYXBwaW5nLT5ib192YS0+
aXNfeGdtaSkKLQkJZmxhZ3MgfD0gQU1ER1BVX1BURV9TTk9PUEVEOworCS8qIEFwcGx5IEFTSUMg
c3BlY2lmaWMgbWFwcGluZyBmbGFncyAqLworCWFtZGdwdV9nbWNfZ2V0X3ZtX3B0ZShhZGV2LCBt
YXBwaW5nLCAmZmxhZ3MpOwogCiAJdHJhY2VfYW1kZ3B1X3ZtX2JvX3VwZGF0ZShtYXBwaW5nKTsK
IApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYwppbmRleCA3ZWIwYmE4N2ZlZjku
LjFhOGQ4ZjUyOGIwMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21j
X3YxMF8wLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMKQEAg
LTQ0MCwxMiArNDQwLDMyIEBAIHN0YXRpYyB2b2lkIGdtY192MTBfMF9nZXRfdm1fcGRlKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2LCBpbnQgbGV2ZWwsCiAJfQogfQogCitzdGF0aWMgdm9pZCBn
bWNfdjEwXzBfZ2V0X3ZtX3B0ZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKKwkJCQkgc3Ry
dWN0IGFtZGdwdV9ib192YV9tYXBwaW5nICptYXBwaW5nLAorCQkJCSB1aW50NjRfdCAqZmxhZ3Mp
Cit7CisJKmZsYWdzICY9IH5BTURHUFVfUFRFX0VYRUNVVEFCTEU7CisJKmZsYWdzIHw9IG1hcHBp
bmctPmZsYWdzICYgQU1ER1BVX1BURV9FWEVDVVRBQkxFOworCisJKmZsYWdzICY9IH5BTURHUFVf
UFRFX01UWVBFX05WMTBfTUFTSzsKKwkqZmxhZ3MgfD0gKG1hcHBpbmctPmZsYWdzICYgQU1ER1BV
X1BURV9NVFlQRV9OVjEwX01BU0spOworCisJaWYgKG1hcHBpbmctPmZsYWdzICYgQU1ER1BVX1BU
RV9QUlQpIHsKKwkJKmZsYWdzIHw9IEFNREdQVV9QVEVfUFJUOworCQkqZmxhZ3MgfD0gQU1ER1BV
X1BURV9TTk9PUEVEOworCQkqZmxhZ3MgfD0gQU1ER1BVX1BURV9MT0c7CisJCSpmbGFncyB8PSBB
TURHUFVfUFRFX1NZU1RFTTsKKwkJKmZsYWdzICY9IH5BTURHUFVfUFRFX1ZBTElEOworCX0KK30K
Kwogc3RhdGljIGNvbnN0IHN0cnVjdCBhbWRncHVfZ21jX2Z1bmNzIGdtY192MTBfMF9nbWNfZnVu
Y3MgPSB7CiAJLmZsdXNoX2dwdV90bGIgPSBnbWNfdjEwXzBfZmx1c2hfZ3B1X3RsYiwKIAkuZW1p
dF9mbHVzaF9ncHVfdGxiID0gZ21jX3YxMF8wX2VtaXRfZmx1c2hfZ3B1X3RsYiwKIAkuZW1pdF9w
YXNpZF9tYXBwaW5nID0gZ21jX3YxMF8wX2VtaXRfcGFzaWRfbWFwcGluZywKIAkubWFwX210eXBl
ID0gZ21jX3YxMF8wX21hcF9tdHlwZSwKLQkuZ2V0X3ZtX3BkZSA9IGdtY192MTBfMF9nZXRfdm1f
cGRlCisJLmdldF92bV9wZGUgPSBnbWNfdjEwXzBfZ2V0X3ZtX3BkZSwKKwkuZ2V0X3ZtX3B0ZSA9
IGdtY192MTBfMF9nZXRfdm1fcHRlCiB9OwogCiBzdGF0aWMgdm9pZCBnbWNfdjEwXzBfc2V0X2dt
Y19mdW5jcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dtY192Nl8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9nbWNfdjZfMC5jCmluZGV4IDJlMzA1YjIxZGI2OS4uMTBkNDY3NTdjMDc4IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjZfMC5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2dtY192Nl8wLmMKQEAgLTM4OSw2ICszODksMTQgQEAgc3RhdGljIHZv
aWQgZ21jX3Y2XzBfZ2V0X3ZtX3BkZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgaW50IGxl
dmVsLAogCUJVR19PTigqYWRkciAmIDB4RkZGRkZGMDAwMDAwMEZGRlVMTCk7CiB9CiAKK3N0YXRp
YyB2b2lkIGdtY192Nl8wX2dldF92bV9wdGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCisJ
CQkJc3RydWN0IGFtZGdwdV9ib192YV9tYXBwaW5nICptYXBwaW5nLAorCQkJCXVpbnQ2NF90ICpm
bGFncykKK3sKKwkqZmxhZ3MgJj0gfkFNREdQVV9QVEVfRVhFQ1VUQUJMRTsKKwkqZmxhZ3MgJj0g
fkFNREdQVV9QVEVfUFJUOworfQorCiBzdGF0aWMgdm9pZCBnbWNfdjZfMF9zZXRfZmF1bHRfZW5h
YmxlX2RlZmF1bHQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJCQkJCSAgICAgIGJvb2wg
dmFsdWUpCiB7CkBAIC0xMTQ0LDYgKzExNTIsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGFtZGdw
dV9nbWNfZnVuY3MgZ21jX3Y2XzBfZ21jX2Z1bmNzID0gewogCS5lbWl0X2ZsdXNoX2dwdV90bGIg
PSBnbWNfdjZfMF9lbWl0X2ZsdXNoX2dwdV90bGIsCiAJLnNldF9wcnQgPSBnbWNfdjZfMF9zZXRf
cHJ0LAogCS5nZXRfdm1fcGRlID0gZ21jX3Y2XzBfZ2V0X3ZtX3BkZSwKKwkuZ2V0X3ZtX3B0ZSA9
IGdtY192Nl8wX2dldF92bV9wdGUsCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGFtZGdwdV9p
cnFfc3JjX2Z1bmNzIGdtY192Nl8wX2lycV9mdW5jcyA9IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dtY192N18wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9nbWNfdjdfMC5jCmluZGV4IDNiNzc0MjEyMzRhNy4uZjg2YzFmMTVmN2JmIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjdfMC5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2dtY192N18wLmMKQEAgLTQ2Niw2ICs0NjYsMTQgQEAgc3RhdGljIHZv
aWQgZ21jX3Y3XzBfZ2V0X3ZtX3BkZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgaW50IGxl
dmVsLAogCUJVR19PTigqYWRkciAmIDB4RkZGRkZGMDAwMDAwMEZGRlVMTCk7CiB9CiAKK3N0YXRp
YyB2b2lkIGdtY192N18wX2dldF92bV9wdGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCisJ
CQkJc3RydWN0IGFtZGdwdV9ib192YV9tYXBwaW5nICptYXBwaW5nLAorCQkJCXVpbnQ2NF90ICpm
bGFncykKK3sKKwkqZmxhZ3MgJj0gfkFNREdQVV9QVEVfRVhFQ1VUQUJMRTsKKwkqZmxhZ3MgJj0g
fkFNREdQVV9QVEVfUFJUOworfQorCiAvKioKICAqIGdtY192OF8wX3NldF9mYXVsdF9lbmFibGVf
ZGVmYXVsdCAtIHVwZGF0ZSBWTSBmYXVsdCBoYW5kbGluZwogICoKQEAgLTEzMzksNyArMTM0Nyw4
IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYW1kZ3B1X2dtY19mdW5jcyBnbWNfdjdfMF9nbWNfZnVu
Y3MgPSB7CiAJLmVtaXRfZmx1c2hfZ3B1X3RsYiA9IGdtY192N18wX2VtaXRfZmx1c2hfZ3B1X3Rs
YiwKIAkuZW1pdF9wYXNpZF9tYXBwaW5nID0gZ21jX3Y3XzBfZW1pdF9wYXNpZF9tYXBwaW5nLAog
CS5zZXRfcHJ0ID0gZ21jX3Y3XzBfc2V0X3BydCwKLQkuZ2V0X3ZtX3BkZSA9IGdtY192N18wX2dl
dF92bV9wZGUKKwkuZ2V0X3ZtX3BkZSA9IGdtY192N18wX2dldF92bV9wZGUsCisJLmdldF92bV9w
dGUgPSBnbWNfdjdfMF9nZXRfdm1fcHRlCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGFtZGdw
dV9pcnFfc3JjX2Z1bmNzIGdtY192N18wX2lycV9mdW5jcyA9IHsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OF8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9nbWNfdjhfMC5jCmluZGV4IDU4NDQ0YWEwYWYwNS4uMjU2ZDFmYWFjYWRhIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjhfMC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OF8wLmMKQEAgLTY4OSw2ICs2ODksMTYgQEAgc3RhdGlj
IHZvaWQgZ21jX3Y4XzBfZ2V0X3ZtX3BkZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgaW50
IGxldmVsLAogCUJVR19PTigqYWRkciAmIDB4RkZGRkZGMDAwMDAwMEZGRlVMTCk7CiB9CiAKK3N0
YXRpYyB2b2lkIGdtY192OF8wX2dldF92bV9wdGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYs
CisJCQkJc3RydWN0IGFtZGdwdV9ib192YV9tYXBwaW5nICptYXBwaW5nLAorCQkJCXVpbnQ2NF90
ICpmbGFncykKK3sKKwlCVUdfT04oKmZsYWdzICYgQU1ER1BVX1BURV9QUlQpOworCisJKmZsYWdz
ICY9IH5BTURHUFVfUFRFX0VYRUNVVEFCTEU7CisJKmZsYWdzIHw9IG1hcHBpbmctPmZsYWdzICYg
QU1ER1BVX1BURV9FWEVDVVRBQkxFOworfQorCiAvKioKICAqIGdtY192OF8wX3NldF9mYXVsdF9l
bmFibGVfZGVmYXVsdCAtIHVwZGF0ZSBWTSBmYXVsdCBoYW5kbGluZwogICoKQEAgLTE3MDUsNyAr
MTcxNSw4IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYW1kZ3B1X2dtY19mdW5jcyBnbWNfdjhfMF9n
bWNfZnVuY3MgPSB7CiAJLmVtaXRfZmx1c2hfZ3B1X3RsYiA9IGdtY192OF8wX2VtaXRfZmx1c2hf
Z3B1X3RsYiwKIAkuZW1pdF9wYXNpZF9tYXBwaW5nID0gZ21jX3Y4XzBfZW1pdF9wYXNpZF9tYXBw
aW5nLAogCS5zZXRfcHJ0ID0gZ21jX3Y4XzBfc2V0X3BydCwKLQkuZ2V0X3ZtX3BkZSA9IGdtY192
OF8wX2dldF92bV9wZGUKKwkuZ2V0X3ZtX3BkZSA9IGdtY192OF8wX2dldF92bV9wZGUsCisJLmdl
dF92bV9wdGUgPSBnbWNfdjhfMF9nZXRfdm1fcHRlCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0
IGFtZGdwdV9pcnFfc3JjX2Z1bmNzIGdtY192OF8wX2lycV9mdW5jcyA9IHsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9nbWNfdjlfMC5jCmluZGV4IDhlZTBmNjQ5OGE4Ni4uMWExNDRhZDNhMmIxIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKQEAgLTYyNywxMiArNjI3LDM0IEBA
IHN0YXRpYyB2b2lkIGdtY192OV8wX2dldF92bV9wZGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYsIGludCBsZXZlbCwKIAl9CiB9CiAKK3N0YXRpYyB2b2lkIGdtY192OV8wX2dldF92bV9wdGUo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCisJCQkJc3RydWN0IGFtZGdwdV9ib192YV9tYXBw
aW5nICptYXBwaW5nLAorCQkJCXVpbnQ2NF90ICpmbGFncykKK3sKKwkqZmxhZ3MgJj0gfkFNREdQ
VV9QVEVfRVhFQ1VUQUJMRTsKKwkqZmxhZ3MgfD0gbWFwcGluZy0+ZmxhZ3MgJiBBTURHUFVfUFRF
X0VYRUNVVEFCTEU7CisKKwkqZmxhZ3MgJj0gfkFNREdQVV9QVEVfTVRZUEVfVkcxMF9NQVNLOwor
CSpmbGFncyB8PSBtYXBwaW5nLT5mbGFncyAmIEFNREdQVV9QVEVfTVRZUEVfVkcxMF9NQVNLOwor
CisJaWYgKG1hcHBpbmctPmZsYWdzICYgQU1ER1BVX1BURV9QUlQpIHsKKwkJKmZsYWdzIHw9IEFN
REdQVV9QVEVfUFJUOworCQkqZmxhZ3MgJj0gfkFNREdQVV9QVEVfVkFMSUQ7CisJfQorCisJaWYg
KGFkZXYtPmFzaWNfdHlwZSA9PSBDSElQX0FSQ1RVUlVTICYmCisJICAgICEoKmZsYWdzICYgQU1E
R1BVX1BURV9TWVNURU0pICYmCisJICAgIG1hcHBpbmctPmJvX3ZhLT5pc194Z21pKQorCQkqZmxh
Z3MgfD0gQU1ER1BVX1BURV9TTk9PUEVEOworfQorCiBzdGF0aWMgY29uc3Qgc3RydWN0IGFtZGdw
dV9nbWNfZnVuY3MgZ21jX3Y5XzBfZ21jX2Z1bmNzID0gewogCS5mbHVzaF9ncHVfdGxiID0gZ21j
X3Y5XzBfZmx1c2hfZ3B1X3RsYiwKIAkuZW1pdF9mbHVzaF9ncHVfdGxiID0gZ21jX3Y5XzBfZW1p
dF9mbHVzaF9ncHVfdGxiLAogCS5lbWl0X3Bhc2lkX21hcHBpbmcgPSBnbWNfdjlfMF9lbWl0X3Bh
c2lkX21hcHBpbmcsCiAJLm1hcF9tdHlwZSA9IGdtY192OV8wX21hcF9tdHlwZSwKLQkuZ2V0X3Zt
X3BkZSA9IGdtY192OV8wX2dldF92bV9wZGUKKwkuZ2V0X3ZtX3BkZSA9IGdtY192OV8wX2dldF92
bV9wZGUsCisJLmdldF92bV9wdGUgPSBnbWNfdjlfMF9nZXRfdm1fcHRlCiB9OwogCiBzdGF0aWMg
dm9pZCBnbWNfdjlfMF9zZXRfZ21jX2Z1bmNzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQot
LSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
