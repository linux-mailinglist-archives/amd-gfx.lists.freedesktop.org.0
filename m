Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 685D0E0BA7
	for <lists+amd-gfx@lfdr.de>; Tue, 22 Oct 2019 20:44:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7F0F26E8CB;
	Tue, 22 Oct 2019 18:44:56 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-BY2-obe.outbound.protection.outlook.com
 (mail-eopbgr780051.outbound.protection.outlook.com [40.107.78.51])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EAA216E8CB
 for <amd-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 18:44:55 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=aKDQI/PneJLcNh5imB63uRQwWltGZrUiccU+XaS7NgnSV6JzjNaWUG66/e70U4rVeXDESvyEcTBqXv+JQ3gNwcAl/dlAZDva8YEBRhWFI8ujD9KtT1mz6nyQ4UizJhE8ZXs1m0LI/gkjHyX8OHI6EBEFXrZwSkzXZvaIAXrn/j7mi7uyfxtAsHfZLxMgXBLoNeSMaSVHCI3yuijnDsCvKa1b9jbzhJ9agdGxUmf2Sed2WyD3M7ZmzQdG0y5M5VvYMG06RvjKRuuW30NMxBnM3OX7e6vMk+dLzEGQCvoNywLzhHh5FUfELXruHHDpGhU9pMS6Cqns3ENr8oA8pM884A==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=nvnFRMhmVrsDxczqEH9K18aKV6Re5ohntaGoJ4V08WY=;
 b=JJbs/SdyspyhmXGNRsPYOjBRn3fqex8wkzVWiJ9eNqHKsNhAQJ4aezd0RuvuI3tLqo6lcm0t3pplZPTpmOV7M9MpVYr6CVwby++1uE7Rj24lYKcZyrmDGN6Iyrsm1nj4GGeW9gTKpCSysvCxfFI4pg50enOnkhFa9iIOtTgi/ef45zWtfRWUARASB5LWHxd8Yk4iTyzSUduWcE4uHbuDqhzYcJ8uC5k4wbPIzk1EqnZJ9N89cZEBWG7MrRGmMU8I0Ey1tfhWIlyhJi/1naum/DzRbVs4eFm0+1xwqZ2rQKPuIyWLI/hCVXgZkipA6C4AuZg27UKe5SdsAh0Wt3830w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM6PR12MB3947.namprd12.prod.outlook.com (10.255.174.156) by
 DM6PR12MB3132.namprd12.prod.outlook.com (20.178.31.78) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2347.16; Tue, 22 Oct 2019 18:44:52 +0000
Received: from DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::e56a:1c63:d6bd:8034]) by DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::e56a:1c63:d6bd:8034%4]) with mapi id 15.20.2367.019; Tue, 22 Oct 2019
 18:44:52 +0000
From: "Kuehling, Felix" <Felix.Kuehling@amd.com>
To: "Yang, Philip" <Philip.Yang@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: Re: [PATCH v2] drm/amdkfd: don't use dqm lock during device
 reset/suspend/resume
Thread-Topic: [PATCH v2] drm/amdkfd: don't use dqm lock during device
 reset/suspend/resume
Thread-Index: AQHViQZ4XzhiW2lzAk+tGGEmnkv7NKdm/4QA
Date: Tue, 22 Oct 2019 18:44:52 +0000
Message-ID: <558b2dd3-8095-81e0-547b-788b74c9b329@amd.com>
References: <20191022182804.23845-1-Philip.Yang@amd.com>
In-Reply-To: <20191022182804.23845-1-Philip.Yang@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [165.204.55.251]
user-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
x-clientproxiedby: YTXPR0101CA0042.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b00:1::19) To DM6PR12MB3947.namprd12.prod.outlook.com
 (2603:10b6:5:1cb::28)
x-ms-exchange-messagesentrepresentingtype: 1
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: d10ab57b-9e17-4186-d062-08d7571fec8b
x-ms-traffictypediagnostic: DM6PR12MB3132:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM6PR12MB3132CB5A937086501B34539292680@DM6PR12MB3132.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:7691;
x-forefront-prvs: 01986AE76B
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(376002)(396003)(366004)(346002)(136003)(189003)(199004)(11346002)(256004)(65956001)(31686004)(66066001)(65806001)(66946007)(2906002)(4001150100001)(66476007)(3846002)(6116002)(64756008)(478600001)(66446008)(66556008)(305945005)(7736002)(14454004)(14444005)(5660300002)(15650500001)(2501003)(71200400001)(71190400001)(36756003)(58126008)(110136005)(6246003)(8676002)(81156014)(81166006)(8936002)(86362001)(6512007)(316002)(486006)(2616005)(476003)(6506007)(446003)(31696002)(53546011)(99286004)(26005)(6486002)(25786009)(52116002)(229853002)(76176011)(386003)(102836004)(186003)(6436002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB3132;
 H:DM6PR12MB3947.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: P+zCccGQaiJS4HWuwcJFGI4avdtUpPStumYgBUZ3vthhx9/UVWnbeF0D6WhZSnhOwssEwnb4U4/t43jhOAQB8TF3kRY1Wlyyp1Sua6zr9peJrjg2q/7h+7mU68IQ2OXjMPJ4vpAw4uk9u2NG//HMA/aK9jYTybeTEg4fQHIYJWH5/7IS9yN6pvsC3j708Q2y0zcUqvzRXzBfjckT3hi9W6146IvXSE6ccxQwd3JJ8GDjK3bYhhZb8Zg65VzW70W9y6RTfHgY7CoxYIw8vYrBiDhG7/s6BPOywNwOaIzts7ZTfwHUlGlYIy3vxy52mlaYX4hd9peh5FntpYBU9UtdtAZnPTWoWS2q7mX32c0rW+R5gpZD5Q2sKbmLh5tSS8kSvoQiXDUibxHtsDGdKJDMJ19cszBASFVTk/KJ9MRzl5tshUjefu6p+h8+Fdw8lQ5Q
Content-ID: <CFE6D37F994A56449563B5CE0ED0AD2D@namprd12.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: d10ab57b-9e17-4186-d062-08d7571fec8b
X-MS-Exchange-CrossTenant-originalarrivaltime: 22 Oct 2019 18:44:52.3471 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: ngMDw2bmA0u4G3laQ/CpEtcZA/H0RlEPwtaORqpUIX7G9zIBOoWr7qB7YXA/E9KXxPavY9rhAXZqzCactCnbEw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3132
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=nvnFRMhmVrsDxczqEH9K18aKV6Re5ohntaGoJ4V08WY=;
 b=UoFj0xjPB76TLIlrDoY+sd5SjNq/EiAq8xCMkGuTzxSsG9rEIW6L/j+5BI4hwp3yfYQltwdIyzRftPIBcVWzdjtek5fUywcJvLnz/KmOqdfSACkBHBLyEMJbRV0YyayiW2i46S1jT+VvVuiE4MVn+jkXZnt/oam7Gu1Mcq3YAtA=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Felix.Kuehling@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gMjAxOS0xMC0yMiAxNDoyOCwgWWFuZywgUGhpbGlwIHdyb3RlOg0KPiBJZiBkZXZpY2UgcmVz
ZXQvc3VzcGVuZC9yZXN1bWUgZmFpbGVkIGZvciBzb21lIHJlYXNvbiwgZHFtIGxvY2sgaXMNCj4g
aG9sZCBmb3JldmVyIGFuZCB0aGlzIGNhdXNlcyBkZWFkbG9jay4gQmVsb3cgaXMgYSBrZXJuZWwg
YmFja3RyYWNlIHdoZW4NCj4gYXBwbGljYXRpb24gb3BlbiBrZmQgYWZ0ZXIgc3VzcGVuZC9yZXN1
bWUgZmFpbGVkLg0KPg0KPiBJbnN0ZWFkIG9mIGhvbGRpbmcgZHFtIGxvY2sgaW4gcHJlX3Jlc2V0
IGFuZCByZWxlYXNpbmcgZHFtIGxvY2sgaW4NCj4gcG9zdF9yZXNldCwgYWRkIGRxbS0+ZGV2aWNl
X3N0b3BwZWQgZmxhZyB3aGljaCBpcyBtb2RpZmllZCBpbg0KPiBkcW0tPm9wcy5zdGFydCBhbmQg
ZHFtLT5vcHMuc3RvcC4gVGhlIGZsYWcgZG9lc24ndCBuZWVkIGxvY2sgcHJvdGVjdGlvbg0KPiBi
ZWNhdXNlIHdyaXRlL3JlYWQgYXJlIGFsbCBpbnNpZGUgZHFtIGxvY2suDQo+DQo+IEZvciBIV1Mg
Y2FzZSwgbWFwX3F1ZXVlc19jcHNjaCBhbmQgdW5tYXBfcXVldWVzX2Nwc2NoIGNoZWNrcw0KPiBk
ZXZpY2Vfc3RvcHBlZCBmbGFnIGJlZm9yZSBzZW5kaW5nIHRoZSB1cGRhdGVkIHJ1bmxpc3QuDQo+
DQo+IHYyOiBGb3Igbm8tSFdTIGNhc2UsIHdoZW4gZGV2aWNlIGlzIHN0b3BwZWQsIGRvbid0IGNh
bGwNCj4gbG9hZC9kZXN0cm95X21xZCBmb3IgZXZpY3Rpb24sIHJlc3RvcmUgYW5kIGNyZWF0ZSBx
dWV1ZSwgYW5kIGF2b2lkDQo+IGRlYnVnZnMgZHVtcCBoZHFzLg0KPg0KPiBCYWNrdHJhY2Ugb2Yg
ZHFtIGxvY2sgZGVhZGxvY2s6DQo+DQo+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldIElORk86
IHRhc2sgcm9jbWluZm86MzAyNCBibG9ja2VkIGZvciBtb3JlDQo+IHRoYW4gMTIwIHNlY29uZHMu
DQo+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldICAgICAgIE5vdCB0YWludGVkDQo+IDUuMC4w
LXJjMS1rZmQtY29tcHV0ZS1yb2NtLWRrbXMtbm8tbnBpLTExMzEgIzENCj4gW1RodSBPY3QgMTcg
MTY6NDM6MzcgMjAxOV0gImVjaG8gMCA+DQo+IC9wcm9jL3N5cy9rZXJuZWwvaHVuZ190YXNrX3Rp
bWVvdXRfc2VjcyIgZGlzYWJsZXMgdGhpcyBtZXNzYWdlLg0KPiBbVGh1IE9jdCAxNyAxNjo0Mzoz
NyAyMDE5XSByb2NtaW5mbyAgICAgICAgRCAgICAwICAzMDI0ICAgMjk0Nw0KPiAweDgwMDAwMDAw
DQo+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldIENhbGwgVHJhY2U6DQo+IFtUaHUgT2N0IDE3
IDE2OjQzOjM3IDIwMTldICA/IF9fc2NoZWR1bGUrMHgzZDkvMHg4YTANCj4gW1RodSBPY3QgMTcg
MTY6NDM6MzcgMjAxOV0gIHNjaGVkdWxlKzB4MzIvMHg3MA0KPiBbVGh1IE9jdCAxNyAxNjo0Mzoz
NyAyMDE5XSAgc2NoZWR1bGVfcHJlZW1wdF9kaXNhYmxlZCsweGEvMHgxMA0KPiBbVGh1IE9jdCAx
NyAxNjo0MzozNyAyMDE5XSAgX19tdXRleF9sb2NrLmlzcmEuOSsweDFlMy8weDRlMA0KPiBbVGh1
IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgPyBfX2NhbGxfc3JjdSsweDI2NC8weDNiMA0KPiBbVGh1
IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgPyBwcm9jZXNzX3Rlcm1pbmF0aW9uX2Nwc2NoKzB4MjQv
MHgyZjANCj4gW2FtZGdwdV0NCj4gW1RodSBPY3QgMTcgMTY6NDM6MzcgMjAxOV0gIHByb2Nlc3Nf
dGVybWluYXRpb25fY3BzY2grMHgyNC8weDJmMA0KPiBbYW1kZ3B1XQ0KPiBbVGh1IE9jdCAxNyAx
Njo0MzozNyAyMDE5XQ0KPiBrZmRfcHJvY2Vzc19kZXF1ZXVlX2Zyb21fYWxsX2RldmljZXMrMHg0
Mi8weDYwIFthbWRncHVdDQo+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldICBrZmRfcHJvY2Vz
c19ub3RpZmllcl9yZWxlYXNlKzB4MWJlLzB4MjIwDQo+IFthbWRncHVdDQo+IFtUaHUgT2N0IDE3
IDE2OjQzOjM3IDIwMTldICBfX21tdV9ub3RpZmllcl9yZWxlYXNlKzB4M2UvMHhjMA0KPiBbVGh1
IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgZXhpdF9tbWFwKzB4MTYwLzB4MWEwDQo+IFtUaHUgT2N0
IDE3IDE2OjQzOjM3IDIwMTldICA/IF9faGFuZGxlX21tX2ZhdWx0KzB4YmEzLzB4MTIwMA0KPiBb
VGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgPyBleGl0X3JvYnVzdF9saXN0KzB4NWEvMHgxMTAN
Cj4gW1RodSBPY3QgMTcgMTY6NDM6MzcgMjAxOV0gIG1tcHV0KzB4NGEvMHgxMjANCj4gW1RodSBP
Y3QgMTcgMTY6NDM6MzcgMjAxOV0gIGRvX2V4aXQrMHgyODQvMHhiMjANCj4gW1RodSBPY3QgMTcg
MTY6NDM6MzcgMjAxOV0gID8gaGFuZGxlX21tX2ZhdWx0KzB4ZmEvMHgyMDANCj4gW1RodSBPY3Qg
MTcgMTY6NDM6MzcgMjAxOV0gIGRvX2dyb3VwX2V4aXQrMHgzYS8weGEwDQo+IFtUaHUgT2N0IDE3
IDE2OjQzOjM3IDIwMTldICBfX3g2NF9zeXNfZXhpdF9ncm91cCsweDE0LzB4MjANCj4gW1RodSBP
Y3QgMTcgMTY6NDM6MzcgMjAxOV0gIGRvX3N5c2NhbGxfNjQrMHg0Zi8weDEwMA0KPiBbVGh1IE9j
dCAxNyAxNjo0MzozNyAyMDE5XSAgZW50cnlfU1lTQ0FMTF82NF9hZnRlcl9od2ZyYW1lKzB4NDQv
MHhhOQ0KPg0KPiBTdWdnZXN0ZWQtYnk6IEZlbGl4IEt1ZWhsaW5nIDxGZWxpeC5LdWVobGluZ0Bh
bWQuY29tPg0KPiBTaWduZWQtb2ZmLWJ5OiBQaGlsaXAgWWFuZyA8UGhpbGlwLllhbmdAYW1kLmNv
bT4NCg0KVGhyZWUgbW9yZSBjb21tZW50cyBpbmxpbmUuIFdpdGggdGhvc2UgY29tbWVudHMgYWRk
cmVzc2VkLCB0aGlzIHBhdGNoIGlzDQoNClJldmlld2VkLWJ5OiBGZWxpeCBLdWVobGluZyA8RmVs
aXguS3VlaGxpbmdAYW1kLmNvbT4NCg0KDQo+IC0tLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1ka2ZkL2tmZF9jaGFyZGV2LmMgICAgICB8ICA2ICstLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1ka2ZkL2tmZF9kZXZpY2UuYyAgICAgICB8ICA1IC0tDQo+ICAgLi4uL2RybS9hbWQvYW1k
a2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jIHwgNDcgKysrKysrKysrKysrKysrKystLQ0K
PiAgIC4uLi9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuaCB8ICAxICsN
Cj4gICA0IGZpbGVzIGNoYW5nZWQsIDQ2IGluc2VydGlvbnMoKyksIDEzIGRlbGV0aW9ucygtKQ0K
Pg0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2NoYXJkZXYu
YyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMNCj4gaW5kZXggZDll
MzZkYmYxM2Q1Li40MGQ3NWMzOWYwOGUgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRr
ZmQva2ZkX2NoYXJkZXYuYw0KPiBAQCAtMTIwLDEzICsxMjAsMTMgQEAgc3RhdGljIGludCBrZmRf
b3BlbihzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZXApDQo+ICAgCQlyZXR1
cm4gLUVQRVJNOw0KPiAgIAl9DQo+ICAgDQo+ICsJaWYgKGtmZF9pc19sb2NrZWQoKSkNCj4gKwkJ
cmV0dXJuIC1FQUdBSU47DQo+ICsNCj4gICAJcHJvY2VzcyA9IGtmZF9jcmVhdGVfcHJvY2Vzcyhm
aWxlcCk7DQo+ICAgCWlmIChJU19FUlIocHJvY2VzcykpDQo+ICAgCQlyZXR1cm4gUFRSX0VSUihw
cm9jZXNzKTsNCj4gICANCj4gLQlpZiAoa2ZkX2lzX2xvY2tlZCgpKQ0KPiAtCQlyZXR1cm4gLUVB
R0FJTjsNCj4gLQ0KDQpJcyB0aGlzIHBhcnQgb2YgdGhlIGNoYW5nZSBzdGlsbCBuZWVkZWQ/IEkg
cmVtZW1iZXIgdGhhdCB0aGlzIHNlcXVlbmNlIA0Kd2FzIGEgYml0IHRyaWNreSB3aXRoIHNvbWUg
cG90ZW50aWFsIHJhY2UgY29uZGl0aW9uIHdoZW4gU2hhb3l1biB3YXMgDQp3b3JraW5nIG9uIGl0
LiBUaGlzIG1heSBoYXZlIHVuaW50ZW5kZWQgc2lkZSBlZmZlY3RzLg0KDQoNCj4gICAJZGV2X2Ri
ZyhrZmRfZGV2aWNlLCAicHJvY2VzcyAlZCBvcGVuZWQsIGNvbXBhdCBtb2RlICgzMiBiaXQpIC0g
JWRcbiIsDQo+ICAgCQlwcm9jZXNzLT5wYXNpZCwgcHJvY2Vzcy0+aXNfMzJiaXRfdXNlcl9tb2Rl
KTsNCj4gICANCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9k
ZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2UuYw0KPiBpbmRl
eCA4ZjRiMjRlODQ5NjQuLjRmYTg4MzRjZTdjYiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZS5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1ka2ZkL2tmZF9kZXZpY2UuYw0KPiBAQCAtNzMwLDkgKzczMCw2IEBAIGludCBrZ2Qya2ZkX3By
ZV9yZXNldChzdHJ1Y3Qga2ZkX2RldiAqa2ZkKQ0KPiAgIAkJcmV0dXJuIDA7DQo+ICAgCWtnZDJr
ZmRfc3VzcGVuZChrZmQpOw0KPiAgIA0KPiAtCS8qIGhvbGQgZHFtLT5sb2NrIHRvIHByZXZlbnQg
ZnVydGhlciBleGVjdXRpb24qLw0KPiAtCWRxbV9sb2NrKGtmZC0+ZHFtKTsNCj4gLQ0KPiAgIAlr
ZmRfc2lnbmFsX3Jlc2V0X2V2ZW50KGtmZCk7DQo+ICAgCXJldHVybiAwOw0KPiAgIH0NCj4gQEAg
LTc1MCw4ICs3NDcsNiBAQCBpbnQga2dkMmtmZF9wb3N0X3Jlc2V0KHN0cnVjdCBrZmRfZGV2ICpr
ZmQpDQo+ICAgCWlmICgha2ZkLT5pbml0X2NvbXBsZXRlKQ0KPiAgIAkJcmV0dXJuIDA7DQo+ICAg
DQo+IC0JZHFtX3VubG9jayhrZmQtPmRxbSk7DQo+IC0NCj4gICAJcmV0ID0ga2ZkX3Jlc3VtZShr
ZmQpOw0KPiAgIAlpZiAocmV0KQ0KPiAgIAkJcmV0dXJuIHJldDsNCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2VyLmMNCj4gaW5k
ZXggODFmYjU0NWNmNDJjLi44MmUxYzYyODBkMTMgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jDQo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jDQo+IEBAIC0z
NDAsNiArMzQwLDEwIEBAIHN0YXRpYyBpbnQgY3JlYXRlX3F1ZXVlX25vY3BzY2goc3RydWN0IGRl
dmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0sDQo+ICAgCW1xZF9tZ3ItPmluaXRfbXFkKG1xZF9tZ3Is
ICZxLT5tcWQsIHEtPm1xZF9tZW1fb2JqLA0KPiAgIAkJCQkmcS0+Z2FydF9tcWRfYWRkciwgJnEt
PnByb3BlcnRpZXMpOw0KPiAgIAlpZiAocS0+cHJvcGVydGllcy5pc19hY3RpdmUpIHsNCj4gKwkJ
aWYgKCFkcW0tPnNjaGVkX3J1bm5pbmcpIHsNCj4gKwkJCVdBUk5fT05DRSgxLCAiTG9hZCBub24t
SFdTIG1xZCB3aGlsZSBzdG9wcGVkXG4iKTsNCj4gKwkJCWdvdG8gYWRkX3F1ZXVlX3RvX2xpc3Q7
DQo+ICsJCX0NCj4gICANCj4gICAJCWlmIChXQVJOKHEtPnByb2Nlc3MtPm1tICE9IGN1cnJlbnQt
Pm1tLA0KPiAgIAkJCQkJInNob3VsZCBvbmx5IHJ1biBpbiB1c2VyIHRocmVhZCIpKQ0KPiBAQCAt
MzUxLDYgKzM1NSw3IEBAIHN0YXRpYyBpbnQgY3JlYXRlX3F1ZXVlX25vY3BzY2goc3RydWN0IGRl
dmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0sDQo+ICAgCQkJZ290byBvdXRfZnJlZV9tcWQ7DQo+ICAg
CX0NCj4gICANCj4gK2FkZF9xdWV1ZV90b19saXN0Og0KPiAgIAlsaXN0X2FkZCgmcS0+bGlzdCwg
JnFwZC0+cXVldWVzX2xpc3QpOw0KPiAgIAlxcGQtPnF1ZXVlX2NvdW50Kys7DQo+ICAgCWlmIChx
LT5wcm9wZXJ0aWVzLmlzX2FjdGl2ZSkNCj4gQEAgLTQ1OCw2ICs0NjMsMTEgQEAgc3RhdGljIGlu
dCBkZXN0cm95X3F1ZXVlX25vY3BzY2hfbG9ja2VkKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdl
ciAqZHFtLA0KPiAgIA0KPiAgIAlkZWFsbG9jYXRlX2Rvb3JiZWxsKHFwZCwgcSk7DQo+ICAgDQo+
ICsJaWYgKCFkcW0tPnNjaGVkX3J1bm5pbmcpIHsNCj4gKwkJV0FSTl9PTkNFKDEsICJEZXN0cm95
IG5vbi1IV1MgcXVldWUgd2hpbGUgc3RvcHBlZFxuIik7DQo+ICsJCXJldHVybiAwOw0KPiArCX0N
Cj4gKw0KPiAgIAlyZXR2YWwgPSBtcWRfbWdyLT5kZXN0cm95X21xZChtcWRfbWdyLCBxLT5tcWQs
DQo+ICAgCQkJCUtGRF9QUkVFTVBUX1RZUEVfV0FWRUZST05UX1JFU0VULA0KPiAgIAkJCQlLRkRf
VU5NQVBfTEFURU5DWV9NUywNCj4gQEAgLTUzMyw2ICs1NDMsMTIgQEAgc3RhdGljIGludCB1cGRh
dGVfcXVldWUoc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0sIHN0cnVjdCBxdWV1ZSAq
cSkNCj4gICAJCSAgIChxLT5wcm9wZXJ0aWVzLnR5cGUgPT0gS0ZEX1FVRVVFX1RZUEVfQ09NUFVU
RSB8fA0KPiAgIAkJICAgIHEtPnByb3BlcnRpZXMudHlwZSA9PSBLRkRfUVVFVUVfVFlQRV9TRE1B
IHx8DQo+ICAgCQkgICAgcS0+cHJvcGVydGllcy50eXBlID09IEtGRF9RVUVVRV9UWVBFX1NETUFf
WEdNSSkpIHsNCj4gKw0KPiArCQlpZiAoIWRxbS0+c2NoZWRfcnVubmluZykgew0KPiArCQkJV0FS
Tl9PTkNFKDEsICJVcGRhdGUgbm9uLUhXUyBxdWV1ZSB3aGlsZSBzdG9wcGVkXG4iKTsNCj4gKwkJ
CWdvdG8gb3V0X3VubG9jazsNCj4gKwkJfQ0KPiArDQo+ICAgCQlyZXR2YWwgPSBtcWRfbWdyLT5k
ZXN0cm95X21xZChtcWRfbWdyLCBxLT5tcWQsDQo+ICAgCQkJCUtGRF9QUkVFTVBUX1RZUEVfV0FW
RUZST05UX0RSQUlOLA0KPiAgIAkJCQlLRkRfVU5NQVBfTEFURU5DWV9NUywgcS0+cGlwZSwgcS0+
cXVldWUpOw0KPiBAQCAtNjAyLDYgKzYxOCwxMSBAQCBzdGF0aWMgaW50IGV2aWN0X3Byb2Nlc3Nf
cXVldWVzX25vY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0sDQo+ICAgCQlt
cWRfbWdyID0gZHFtLT5tcWRfbWdyc1tnZXRfbXFkX3R5cGVfZnJvbV9xdWV1ZV90eXBlKA0KPiAg
IAkJCQlxLT5wcm9wZXJ0aWVzLnR5cGUpXTsNCj4gICAJCXEtPnByb3BlcnRpZXMuaXNfYWN0aXZl
ID0gZmFsc2U7DQo+ICsJCWRxbS0+cXVldWVfY291bnQtLTsNCj4gKw0KPiArCQlpZiAoIWRxbS0+
c2NoZWRfcnVubmluZykNCj4gKwkJCWNvbnRpbnVlOw0KDQpBZGQgYSBXQVJOIGhlcmUgYXMgd2Vs
bC4gV2hlbiB0aGUgc2NoZWR1bGVyIGlzIG5vdCBydW5uaW5nIHRoZSBxdWV1ZXMgDQpzaG91bGQg
YWxyZWFkeSBiZSBldmljdGVkLg0KDQoNCj4gKw0KPiAgIAkJcmV0dmFsID0gbXFkX21nci0+ZGVz
dHJveV9tcWQobXFkX21nciwgcS0+bXFkLA0KPiAgIAkJCQlLRkRfUFJFRU1QVF9UWVBFX1dBVkVG
Uk9OVF9EUkFJTiwNCj4gICAJCQkJS0ZEX1VOTUFQX0xBVEVOQ1lfTVMsIHEtPnBpcGUsIHEtPnF1
ZXVlKTsNCj4gQEAgLTYxMCw3ICs2MzEsNiBAQCBzdGF0aWMgaW50IGV2aWN0X3Byb2Nlc3NfcXVl
dWVzX25vY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0sDQo+ICAgCQkJICog
bWFpbnRhaW4gYSBjb25zaXN0ZW50IGV2aWN0aW9uIHN0YXRlDQo+ICAgCQkJICovDQo+ICAgCQkJ
cmV0ID0gcmV0dmFsOw0KPiAtCQlkcW0tPnF1ZXVlX2NvdW50LS07DQo+ICAgCX0NCj4gICANCj4g
ICBvdXQ6DQo+IEBAIC03MTEsNiArNzMxLDExIEBAIHN0YXRpYyBpbnQgcmVzdG9yZV9wcm9jZXNz
X3F1ZXVlc19ub2Nwc2NoKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtLA0KPiAgIAkJ
bXFkX21nciA9IGRxbS0+bXFkX21ncnNbZ2V0X21xZF90eXBlX2Zyb21fcXVldWVfdHlwZSgNCj4g
ICAJCQkJcS0+cHJvcGVydGllcy50eXBlKV07DQo+ICAgCQlxLT5wcm9wZXJ0aWVzLmlzX2FjdGl2
ZSA9IHRydWU7DQo+ICsJCWRxbS0+cXVldWVfY291bnQrKzsNCj4gKw0KPiArCQlpZiAoIWRxbS0+
c2NoZWRfcnVubmluZykNCj4gKwkJCWNvbnRpbnVlOw0KDQpBZGQgYSBXQVJOIGhlcmUgYXMgd2Vs
bC4gVGhpcyBzaG91bGQgbm90IGhhcHBlbiB3aGlsZSB3ZSdyZSBzdXNwZW5kZWQuDQoNClJlZ2Fy
ZHMsDQogwqAgRmVsaXgNCg0KPiArDQo+ICAgCQlyZXR2YWwgPSBtcWRfbWdyLT5sb2FkX21xZCht
cWRfbWdyLCBxLT5tcWQsIHEtPnBpcGUsDQo+ICAgCQkJCSAgICAgICBxLT5xdWV1ZSwgJnEtPnBy
b3BlcnRpZXMsIG1tKTsNCj4gICAJCWlmIChyZXR2YWwgJiYgIXJldCkNCj4gQEAgLTcxOCw3ICs3
NDMsNiBAQCBzdGF0aWMgaW50IHJlc3RvcmVfcHJvY2Vzc19xdWV1ZXNfbm9jcHNjaChzdHJ1Y3Qg
ZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRxbSwNCj4gICAJCQkgKiBtYWludGFpbiBhIGNvbnNpc3Rl
bnQgZXZpY3Rpb24gc3RhdGUNCj4gICAJCQkgKi8NCj4gICAJCQlyZXQgPSByZXR2YWw7DQo+IC0J
CWRxbS0+cXVldWVfY291bnQrKzsNCj4gICAJfQ0KPiAgIAlxcGQtPmV2aWN0ZWQgPSAwOw0KPiAg
IG91dDoNCj4gQEAgLTkxNSw3ICs5MzksOCBAQCBzdGF0aWMgaW50IHN0YXJ0X25vY3BzY2goc3Ry
dWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0pDQo+ICAgCQ0KPiAgIAlpZiAoZHFtLT5kZXYt
PmRldmljZV9pbmZvLT5hc2ljX2ZhbWlseSA9PSBDSElQX0hBV0FJSSkNCj4gICAJCXJldHVybiBw
bV9pbml0KCZkcW0tPnBhY2tldHMsIGRxbSk7DQo+IC0JDQo+ICsJZHFtLT5zY2hlZF9ydW5uaW5n
ID0gdHJ1ZTsNCj4gKw0KPiAgIAlyZXR1cm4gMDsNCj4gICB9DQo+ICAgDQo+IEBAIC05MjMsNyAr
OTQ4LDggQEAgc3RhdGljIGludCBzdG9wX25vY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5h
Z2VyICpkcW0pDQo+ICAgew0KPiAgIAlpZiAoZHFtLT5kZXYtPmRldmljZV9pbmZvLT5hc2ljX2Zh
bWlseSA9PSBDSElQX0hBV0FJSSkNCj4gICAJCXBtX3VuaW5pdCgmZHFtLT5wYWNrZXRzKTsNCj4g
LQkNCj4gKwlkcW0tPnNjaGVkX3J1bm5pbmcgPSBmYWxzZTsNCj4gKw0KPiAgIAlyZXR1cm4gMDsN
Cj4gICB9DQo+ICAgDQo+IEBAIC0xMDc0LDYgKzExMDAsNyBAQCBzdGF0aWMgaW50IHN0YXJ0X2Nw
c2NoKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtKQ0KPiAgIAlkcW1fbG9jayhkcW0p
Ow0KPiAgIAkvKiBjbGVhciBoYW5nIHN0YXR1cyB3aGVuIGRyaXZlciB0cnkgdG8gc3RhcnQgdGhl
IGh3IHNjaGVkdWxlciAqLw0KPiAgIAlkcW0tPmlzX2h3c19oYW5nID0gZmFsc2U7DQo+ICsJZHFt
LT5zY2hlZF9ydW5uaW5nID0gdHJ1ZTsNCj4gICAJZXhlY3V0ZV9xdWV1ZXNfY3BzY2goZHFtLCBL
RkRfVU5NQVBfUVVFVUVTX0ZJTFRFUl9EWU5BTUlDX1FVRVVFUywgMCk7DQo+ICAgCWRxbV91bmxv
Y2soZHFtKTsNCj4gICANCj4gQEAgLTEwODksNiArMTExNiw3IEBAIHN0YXRpYyBpbnQgc3RvcF9j
cHNjaChzdHJ1Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRxbSkNCj4gICB7DQo+ICAgCWRxbV9s
b2NrKGRxbSk7DQo+ICAgCXVubWFwX3F1ZXVlc19jcHNjaChkcW0sIEtGRF9VTk1BUF9RVUVVRVNf
RklMVEVSX0FMTF9RVUVVRVMsIDApOw0KPiArCWRxbS0+c2NoZWRfcnVubmluZyA9IGZhbHNlOw0K
PiAgIAlkcW1fdW5sb2NrKGRxbSk7DQo+ICAgDQo+ICAgCWtmZF9ndHRfc2FfZnJlZShkcW0tPmRl
diwgZHFtLT5mZW5jZV9tZW0pOw0KPiBAQCAtMTI3NSw5ICsxMzAzLDEwIEBAIHN0YXRpYyBpbnQg
bWFwX3F1ZXVlc19jcHNjaChzdHJ1Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRxbSkNCj4gICB7
DQo+ICAgCWludCByZXR2YWw7DQo+ICAgDQo+ICsJaWYgKCFkcW0tPnNjaGVkX3J1bm5pbmcpDQo+
ICsJCXJldHVybiAwOw0KPiAgIAlpZiAoZHFtLT5xdWV1ZV9jb3VudCA8PSAwIHx8IGRxbS0+cHJv
Y2Vzc2VzX2NvdW50IDw9IDApDQo+ICAgCQlyZXR1cm4gMDsNCj4gLQ0KPiAgIAlpZiAoZHFtLT5h
Y3RpdmVfcnVubGlzdCkNCj4gICAJCXJldHVybiAwOw0KPiAgIA0KPiBAQCAtMTI5OSw2ICsxMzI4
LDggQEAgc3RhdGljIGludCB1bm1hcF9xdWV1ZXNfY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9t
YW5hZ2VyICpkcW0sDQo+ICAgew0KPiAgIAlpbnQgcmV0dmFsID0gMDsNCj4gICANCj4gKwlpZiAo
IWRxbS0+c2NoZWRfcnVubmluZykNCj4gKwkJcmV0dXJuIDA7DQo+ICAgCWlmIChkcW0tPmlzX2h3
c19oYW5nKQ0KPiAgIAkJcmV0dXJuIC1FSU87DQo+ICAgCWlmICghZHFtLT5hY3RpdmVfcnVubGlz
dCkNCj4gQEAgLTE5MDMsNiArMTkzNCwxMiBAQCBpbnQgZHFtX2RlYnVnZnNfaHFkcyhzdHJ1Y3Qg
c2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpDQo+ICAgCWludCBwaXBlLCBxdWV1ZTsNCj4gICAJaW50
IHIgPSAwOw0KPiAgIA0KPiArCWlmICghZHFtLT5zY2hlZF9ydW5uaW5nKSB7DQo+ICsJCXNlcV9w
cmludGYobSwgIiBEZXZpY2UgaXMgc3RvcHBlZFxuIik7DQo+ICsNCj4gKwkJcmV0dXJuIDA7DQo+
ICsJfQ0KPiArDQo+ICAgCXIgPSBkcW0tPmRldi0+a2ZkMmtnZC0+aHFkX2R1bXAoZHFtLT5kZXYt
PmtnZCwNCj4gICAJCQkJCUtGRF9DSUtfSElRX1BJUEUsIEtGRF9DSUtfSElRX1FVRVVFLA0KPiAg
IAkJCQkJJmR1bXAsICZuX3JlZ3MpOw0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2VyLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuaA0KPiBpbmRleCAyZWFlYTZiMDRjYmUu
LmE4YzM3ZTZkYTAyNyAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQv
a2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2VyLmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2VyLmgNCj4gQEAgLTIwMSw2ICsyMDEsNyBAQCBz
dHJ1Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIgew0KPiAgIAlib29sCQkJaXNfaHdzX2hhbmc7DQo+
ICAgCXN0cnVjdCB3b3JrX3N0cnVjdAlod19leGNlcHRpb25fd29yazsNCj4gICAJc3RydWN0IGtm
ZF9tZW1fb2JqCWhpcV9zZG1hX21xZDsNCj4gKwlib29sCQkJc2NoZWRfcnVubmluZzsNCj4gICB9
Ow0KPiAgIA0KPiAgIHZvaWQgZGV2aWNlX3F1ZXVlX21hbmFnZXJfaW5pdF9jaWsoDQpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcg
bGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
