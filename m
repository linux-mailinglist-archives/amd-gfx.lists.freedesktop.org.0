Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 833211207D9
	for <lists+amd-gfx@lfdr.de>; Mon, 16 Dec 2019 15:03:42 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1A7496E595;
	Mon, 16 Dec 2019 14:03:41 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x342.google.com (mail-wm1-x342.google.com
 [IPv6:2a00:1450:4864:20::342])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3C7CD6E593
 for <amd-gfx@lists.freedesktop.org>; Mon, 16 Dec 2019 14:03:39 +0000 (UTC)
Received: by mail-wm1-x342.google.com with SMTP id m24so5451232wmc.3
 for <amd-gfx@lists.freedesktop.org>; Mon, 16 Dec 2019 06:03:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=I7pisc5AxAG7tGTBYZj4oNTOruL+OrxdE9Wmne+FRgE=;
 b=kUu5AKehmpEEP/I+qr9I0m0vfV2LGOvHY4M3mz0gWXoO8xA4JPMc77bTNnOGOJkamy
 eR9paidEU6Wn5ZRfvHQrMVy74TTa5T1e52qgr6tqRzj5rImapcmJr0OhvJGFhfc6bau5
 eQkf4gI/pfL82B4xTFu4KgVnU/BubzK6Qi69VkmQ54w6i2bi/YWpvQAKjgGYEin9lXMH
 vcXJSyQbLtO/B7Ji2+WXnYiLXz4Zjg7LUsUdtFcTw4ZK3nOgV1Pn2gByl+20hBSPcoUb
 R3kanmdhm32EftDb/lfd5pX3HDJt2NtZT0D2Y+gce7YVqshpPfPacs45wVNdO1Ed89AV
 RdKA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=I7pisc5AxAG7tGTBYZj4oNTOruL+OrxdE9Wmne+FRgE=;
 b=o8zL3fSnUk4gk3Z3VQHVmP1E0dej2txwobiGcI1u7GR8mmzFuL+FqU3P8OKgn7v9Gt
 Ma/L2O33DZgigBoPh873E7mwA25lGYLSZLOpycpT8TnAaI+gxsUjITP5kydyXcZa6EGa
 ib8W19naqtNH7jNRb227TSO/+6FG+NVznbMT3velzth7X+qmzXdTrcf6uHT+Ne6E4cB8
 VVOnsleqJMjzxsOvWLSBp5DAruhVk1KuBsXbsxfFuvBsVA5cmQmpRkYcKORXJlhXmk6/
 WHVSjDohZ8wNOp0lCkVlAPUmlTSCQW7OlOSbQRrTSJVpe74p9saPcEm1ptBxZ24JXPbh
 7gig==
X-Gm-Message-State: APjAAAXafY7vFHzGQ8wi7tLqTj/826s3/sT7f9O+gqmAWXb5pRelvwo/
 BhZJ1voZEYQaCy42fTYfLYfho1At4lw=
X-Google-Smtp-Source: APXvYqyGA4bw6Mhx7AtacL617BfHlToKjO0CMXMXMTKzGjmKu9yVfr46nvrVHoi94HVaBxWntyUntA==
X-Received: by 2002:a1c:a702:: with SMTP id q2mr31287479wme.6.1576505017349;
 Mon, 16 Dec 2019 06:03:37 -0800 (PST)
Received: from brihaspati.fritz.box
 (p200300C58F249500830CE7316915D0F5.dip0.t-ipconnect.de.
 [2003:c5:8f24:9500:830c:e731:6915:d0f5])
 by smtp.gmail.com with ESMTPSA id s15sm21624021wrp.4.2019.12.16.06.03.35
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 16 Dec 2019 06:03:36 -0800 (PST)
From: Nirmoy Das <nirmoy.aiemd@gmail.com>
X-Google-Original-From: Nirmoy Das <nirmoy.das@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH v2 1/4] drm/scheduler: rework entity creation
Date: Mon, 16 Dec 2019 15:03:45 +0100
Message-Id: <20191216140348.6023-2-nirmoy.das@amd.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191216140348.6023-1-nirmoy.das@amd.com>
References: <20191216140348.6023-1-nirmoy.das@amd.com>
MIME-Version: 1.0
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: alexander.deucher@amd.com, kenny.ho@amd.com, nirmoy.das@amd.com,
 christian.koenig@amd.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RW50aXR5IGN1cnJlbnRseSBrZWVwcyBhIGNvcHkgb2YgcnVuX3F1ZXVlIGxpc3QgYW5kIG1vZGlm
eSBpdCBpbgpkcm1fc2NoZWRfZW50aXR5X3NldF9wcmlvcml0eSgpLiBFbnRpdGllcyBzaG91bGRu
J3QgbW9kaWZ5IHJ1bl9xdWV1ZQpsaXN0LiBVc2UgZHJtX2dwdV9zY2hlZHVsZXIgbGlzdCBpbnN0
ZWFkIG9mIGRybV9zY2hlZF9ycSBsaXN0CmluIGRybV9zY2hlZF9lbnRpdHkgc3RydWN0LiBJbiB0
aGlzIHdheSB3ZSBjYW4gc2VsZWN0IGEgcnVucXVldWUgYmFzZWQKb24gZW50aXR5L2N0eCdzIHBy
aW9yaXR5IGZvciBhICBkcm0gc2NoZWR1bGVyLgoKU2lnbmVkLW9mZi1ieTogTmlybW95IERhcyA8
bmlybW95LmRhc0BhbWQuY29tPgpSZXZpZXdlZC1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0
aWFuLmtvZW5pZ0BhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9jdHguYyAgfCAgNyArKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0u
YyAgfCAgOCArKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91dmQuYyAgfCAg
NyArKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92Y2UuYyAgfCAgNyArKy0K
IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jICAgfCAxNCArKystLQogZHJp
dmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuYyAgICB8ICA3ICsrLQogZHJpdmVycy9n
cHUvZHJtL2xpbWEvbGltYV9zY2hlZC5jICAgICAgICB8ICA1ICstCiBkcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMgIHwgIDggKystCiBkcml2ZXJzL2dwdS9kcm0vc2NoZWR1
bGVyL3NjaGVkX2VudGl0eS5jIHwgNzQgKysrKysrKysrKy0tLS0tLS0tLS0tLS0tCiBkcml2ZXJz
L2dwdS9kcm0vdjNkL3YzZF9kcnYuYyAgICAgICAgICAgIHwgIDggKystCiBpbmNsdWRlL2RybS9n
cHVfc2NoZWR1bGVyLmggICAgICAgICAgICAgIHwgIDggKystCiAxMSBmaWxlcyBjaGFuZ2VkLCA3
OCBpbnNlcnRpb25zKCspLCA3NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3R4LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfY3R4LmMKaW5kZXggMWQyYmJmMTA2MTRlLi4zOGVjNWM5MTliZDkgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jdHguYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3R4LmMKQEAgLTEyMiw3ICsxMjIsNyBAQCBzdGF0
aWMgaW50IGFtZGdwdV9jdHhfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAogCWZv
ciAoaSA9IDA7IGkgPCBBTURHUFVfSFdfSVBfTlVNOyArK2kpIHsKIAkJc3RydWN0IGFtZGdwdV9y
aW5nICpyaW5nc1tBTURHUFVfTUFYX1JJTkdTXTsKLQkJc3RydWN0IGRybV9zY2hlZF9ycSAqcnFz
W0FNREdQVV9NQVhfUklOR1NdOworCQlzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVkX2xp
c3RbQU1ER1BVX01BWF9SSU5HU107CiAJCXVuc2lnbmVkIG51bV9yaW5ncyA9IDA7CiAJCXVuc2ln
bmVkIG51bV9ycXMgPSAwOwogCkBAIC0xODEsMTIgKzE4MSwxMyBAQCBzdGF0aWMgaW50IGFtZGdw
dV9jdHhfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAkJCWlmICghcmluZ3Nbal0t
PmFkZXYpCiAJCQkJY29udGludWU7CiAKLQkJCXJxc1tudW1fcnFzKytdID0gJnJpbmdzW2pdLT5z
Y2hlZC5zY2hlZF9ycVtwcmlvcml0eV07CisJCQlzY2hlZF9saXN0W251bV9ycXMrK10gPSAmcmlu
Z3Nbal0tPnNjaGVkOwogCQl9CiAKIAkJZm9yIChqID0gMDsgaiA8IGFtZGdwdV9jdHhfbnVtX2Vu
dGl0aWVzW2ldOyArK2opCiAJCQlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZjdHgtPmVudGl0
aWVzW2ldW2pdLmVudGl0eSwKLQkJCQkJCSAgcnFzLCBudW1fcnFzLCAmY3R4LT5ndWlsdHkpOwor
CQkJCQkJICBwcmlvcml0eSwgc2NoZWRfbGlzdCwKKwkJCQkJCSAgbnVtX3JxcywgJmN0eC0+Z3Vp
bHR5KTsKIAkJaWYgKHIpCiAJCQlnb3RvIGVycm9yX2NsZWFudXBfZW50aXRpZXM7CiAJfQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCmluZGV4IDgxZjY3NjRmMWJhNi4uMmZm
NjNkMDQxNGM5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
dHRtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCkBAIC0x
OTU0LDExICsxOTU0LDEzIEBAIHZvaWQgYW1kZ3B1X3R0bV9zZXRfYnVmZmVyX2Z1bmNzX3N0YXR1
cyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgYm9vbCBlbmFibGUpCiAKIAlpZiAoZW5hYmxl
KSB7CiAJCXN0cnVjdCBhbWRncHVfcmluZyAqcmluZzsKLQkJc3RydWN0IGRybV9zY2hlZF9ycSAq
cnE7CisJCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQ7CiAKIAkJcmluZyA9IGFkZXYt
Pm1tYW4uYnVmZmVyX2Z1bmNzX3Jpbmc7Ci0JCXJxID0gJnJpbmctPnNjaGVkLnNjaGVkX3JxW0RS
TV9TQ0hFRF9QUklPUklUWV9LRVJORUxdOwotCQlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZh
ZGV2LT5tbWFuLmVudGl0eSwgJnJxLCAxLCBOVUxMKTsKKwkJc2NoZWQgPSAmcmluZy0+c2NoZWQ7
CisJCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJmFkZXYtPm1tYW4uZW50aXR5LAorCQkJCSAg
ICAgICAgICBEUk1fU0NIRURfUFJJT1JJVFlfS0VSTkVMLCAmc2NoZWQsCisJCQkJCSAgMSwgTlVM
TCk7CiAJCWlmIChyKSB7CiAJCQlEUk1fRVJST1IoIkZhaWxlZCBzZXR0aW5nIHVwIFRUTSBCTyBt
b3ZlIGVudGl0eSAoJWQpXG4iLAogCQkJCSAgcik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdXZkLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdXZkLmMKaW5kZXggZDU4N2ZmZTJhZjhlLi5hOTJmM2IxOGU2NTcgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91dmQuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdXZkLmMKQEAgLTMzMCwxMiArMzMwLDEzIEBAIGludCBh
bWRncHVfdXZkX3N3X2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiBpbnQgYW1kZ3B1
X3V2ZF9lbnRpdHlfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIHsKIAlzdHJ1Y3Qg
YW1kZ3B1X3JpbmcgKnJpbmc7Ci0Jc3RydWN0IGRybV9zY2hlZF9ycSAqcnE7CisJc3RydWN0IGRy
bV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKIAlpbnQgcjsKIAogCXJpbmcgPSAmYWRldi0+dXZkLmlu
c3RbMF0ucmluZzsKLQlycSA9ICZyaW5nLT5zY2hlZC5zY2hlZF9ycVtEUk1fU0NIRURfUFJJT1JJ
VFlfTk9STUFMXTsKLQlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZhZGV2LT51dmQuZW50aXR5
LCAmcnEsIDEsIE5VTEwpOworCXNjaGVkID0gJnJpbmctPnNjaGVkOworCXIgPSBkcm1fc2NoZWRf
ZW50aXR5X2luaXQoJmFkZXYtPnV2ZC5lbnRpdHksIERSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUws
CisJCQkJICAmc2NoZWQsIDEsIE5VTEwpOwogCWlmIChyKSB7CiAJCURSTV9FUlJPUigiRmFpbGVk
IHNldHRpbmcgdXAgVVZEIGtlcm5lbCBlbnRpdHkuXG4iKTsKIAkJcmV0dXJuIHI7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmNlLmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmNlLmMKaW5kZXggNDZiNTkwYWYyZmQyLi5jZWIwZGJm
Njg1ZjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92Y2Uu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmNlLmMKQEAgLTI0MCwx
MiArMjQwLDEzIEBAIGludCBhbWRncHVfdmNlX3N3X2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpCiBpbnQgYW1kZ3B1X3ZjZV9lbnRpdHlfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikKIHsKIAlzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmc7Ci0Jc3RydWN0IGRybV9zY2hlZF9y
cSAqcnE7CisJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKIAlpbnQgcjsKIAogCXJp
bmcgPSAmYWRldi0+dmNlLnJpbmdbMF07Ci0JcnEgPSAmcmluZy0+c2NoZWQuc2NoZWRfcnFbRFJN
X1NDSEVEX1BSSU9SSVRZX05PUk1BTF07Ci0JciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmYWRl
di0+dmNlLmVudGl0eSwgJnJxLCAxLCBOVUxMKTsKKwlzY2hlZCA9ICZyaW5nLT5zY2hlZDsKKwly
ID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZhZGV2LT52Y2UuZW50aXR5LCBEUk1fU0NIRURfUFJJ
T1JJVFlfTk9STUFMLAorCQkJCSAgJnNjaGVkLCAxLCBOVUxMKTsKIAlpZiAociAhPSAwKSB7CiAJ
CURSTV9FUlJPUigiRmFpbGVkIHNldHRpbmcgdXAgVkNFIHJ1biBxdWV1ZS5cbiIpOwogCQlyZXR1
cm4gcjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMKaW5kZXggNTQ0MzBjOWY3
YTI3Li4xYzY1YjViZmZhNmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV92bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5j
CkBAIC0yNzQ0LDYgKzI3NDQsNyBAQCBpbnQgYW1kZ3B1X3ZtX2luaXQoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsIHN0cnVjdCBhbWRncHVfdm0gKnZtLAogewogCXN0cnVjdCBhbWRncHVfYm9f
cGFyYW0gYnA7CiAJc3RydWN0IGFtZGdwdV9ibyAqcm9vdDsKKwlzdHJ1Y3QgZHJtX2dwdV9zY2hl
ZHVsZXIgKnNjaGVkX2xpc3RbQU1ER1BVX01BWF9SSU5HU107CiAJaW50IHIsIGk7CiAKIAl2bS0+
dmEgPSBSQl9ST09UX0NBQ0hFRDsKQEAgLTI3NTcsMTQgKzI3NTgsMTkgQEAgaW50IGFtZGdwdV92
bV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgYW1kZ3B1X3ZtICp2bSwK
IAlzcGluX2xvY2tfaW5pdCgmdm0tPmludmFsaWRhdGVkX2xvY2spOwogCUlOSVRfTElTVF9IRUFE
KCZ2bS0+ZnJlZWQpOwogCisJZm9yIChpID0gMDsgaSA8IGFkZXYtPnZtX21hbmFnZXIudm1fcHRl
X251bV9ycXM7IGkrKykKKwkJc2NoZWRfbGlzdFtpXSA9IGFkZXYtPnZtX21hbmFnZXIudm1fcHRl
X3Jxc1tpXS0+c2NoZWQ7CisKIAkvKiBjcmVhdGUgc2NoZWR1bGVyIGVudGl0aWVzIGZvciBwYWdl
IHRhYmxlIHVwZGF0ZXMgKi8KLQlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2bS0+ZGlyZWN0
LCBhZGV2LT52bV9tYW5hZ2VyLnZtX3B0ZV9ycXMsCi0JCQkJICBhZGV2LT52bV9tYW5hZ2VyLnZt
X3B0ZV9udW1fcnFzLCBOVUxMKTsKKwlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2bS0+ZGly
ZWN0LCBEUk1fU0NIRURfUFJJT1JJVFlfTk9STUFMLAorCQkJCSAgc2NoZWRfbGlzdCwgYWRldi0+
dm1fbWFuYWdlci52bV9wdGVfbnVtX3JxcywKKwkJCQkgIE5VTEwpOwogCWlmIChyKQogCQlyZXR1
cm4gcjsKIAotCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJnZtLT5kZWxheWVkLCBhZGV2LT52
bV9tYW5hZ2VyLnZtX3B0ZV9ycXMsCi0JCQkJICBhZGV2LT52bV9tYW5hZ2VyLnZtX3B0ZV9udW1f
cnFzLCBOVUxMKTsKKwlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2bS0+ZGVsYXllZCwgRFJN
X1NDSEVEX1BSSU9SSVRZX05PUk1BTCwKKwkJCQkgIHNjaGVkX2xpc3QsIGFkZXYtPnZtX21hbmFn
ZXIudm1fcHRlX251bV9ycXMsCisJCQkJICBOVUxMKTsKIAlpZiAocikKIAkJZ290byBlcnJvcl9m
cmVlX2RpcmVjdDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZp
dl9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZHJ2LmMKaW5kZXggMWY5
YzAxYmU0MGQ3Li43NmVjZGY4YmQzMWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ldG5h
dml2L2V0bmF2aXZfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9k
cnYuYwpAQCAtNjUsMTIgKzY1LDEzIEBAIHN0YXRpYyBpbnQgZXRuYXZpdl9vcGVuKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKIAogCWZvciAoaSA9IDA7IGkg
PCBFVE5BX01BWF9QSVBFUzsgaSsrKSB7CiAJCXN0cnVjdCBldG5hdml2X2dwdSAqZ3B1ID0gcHJp
di0+Z3B1W2ldOwotCQlzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycTsKKwkJc3RydWN0IGRybV9ncHVf
c2NoZWR1bGVyICpzY2hlZDsKIAogCQlpZiAoZ3B1KSB7Ci0JCQlycSA9ICZncHUtPnNjaGVkLnNj
aGVkX3JxW0RSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUxdOworCQkJc2NoZWQgPSAmZ3B1LT5zY2hl
ZDsKIAkJCWRybV9zY2hlZF9lbnRpdHlfaW5pdCgmY3R4LT5zY2hlZF9lbnRpdHlbaV0sCi0JCQkJ
CSAgICAgICZycSwgMSwgTlVMTCk7CisJCQkJCSAgICAgIERSTV9TQ0hFRF9QUklPUklUWV9OT1JN
QUwsICZzY2hlZCwKKwkJCQkJICAgICAgMSwgTlVMTCk7CiAJCQl9CiAJfQogCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vbGltYS9saW1hX3NjaGVkLmMgYi9kcml2ZXJzL2dwdS9kcm0vbGlt
YS9saW1hX3NjaGVkLmMKaW5kZXggZjUyMmM1Zjk5NzI5Li5mYzgzNjJlNDE0OWIgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9saW1hL2xpbWFfc2NoZWQuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vbGltYS9saW1hX3NjaGVkLmMKQEAgLTE1OSw5ICsxNTksMTAgQEAgaW50IGxpbWFfc2NoZWRf
Y29udGV4dF9pbml0KHN0cnVjdCBsaW1hX3NjaGVkX3BpcGUgKnBpcGUsCiAJCQkgICAgc3RydWN0
IGxpbWFfc2NoZWRfY29udGV4dCAqY29udGV4dCwKIAkJCSAgICBhdG9taWNfdCAqZ3VpbHR5KQog
ewotCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxID0gcGlwZS0+YmFzZS5zY2hlZF9ycSArIERSTV9T
Q0hFRF9QUklPUklUWV9OT1JNQUw7CisJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCA9
ICZwaXBlLT5iYXNlOwogCi0JcmV0dXJuIGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmY29udGV4dC0+
YmFzZSwgJnJxLCAxLCBndWlsdHkpOworCXJldHVybiBkcm1fc2NoZWRfZW50aXR5X2luaXQoJmNv
bnRleHQtPmJhc2UsIERSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUwsCisJCQkJICAgICAmc2NoZWQs
IDEsIGd1aWx0eSk7CiB9CiAKIHZvaWQgbGltYV9zY2hlZF9jb250ZXh0X2Zpbmkoc3RydWN0IGxp
bWFfc2NoZWRfcGlwZSAqcGlwZSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9qb2IuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9qb2Iu
YwppbmRleCBkNDExZWI2YzhlYjkuLmE5ZWQwODhlYmYwOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9qb2IuYwpAQCAtNTQyLDEyICs1NDIsMTQgQEAgaW50IHBhbmZyb3N0X2pv
Yl9vcGVuKHN0cnVjdCBwYW5mcm9zdF9maWxlX3ByaXYgKnBhbmZyb3N0X3ByaXYpCiB7CiAJc3Ry
dWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSBwYW5mcm9zdF9wcml2LT5wZmRldjsKIAlzdHJ1
Y3QgcGFuZnJvc3Rfam9iX3Nsb3QgKmpzID0gcGZkZXYtPmpzOwotCXN0cnVjdCBkcm1fc2NoZWRf
cnEgKnJxOworCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQ7CiAJaW50IHJldCwgaTsK
IAogCWZvciAoaSA9IDA7IGkgPCBOVU1fSk9CX1NMT1RTOyBpKyspIHsKLQkJcnEgPSAmanMtPnF1
ZXVlW2ldLnNjaGVkLnNjaGVkX3JxW0RSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUxdOwotCQlyZXQg
PSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJnBhbmZyb3N0X3ByaXYtPnNjaGVkX2VudGl0eVtpXSwg
JnJxLCAxLCBOVUxMKTsKKwkJc2NoZWQgPSAmanMtPnF1ZXVlW2ldLnNjaGVkOworCQlyZXQgPSBk
cm1fc2NoZWRfZW50aXR5X2luaXQoJnBhbmZyb3N0X3ByaXYtPnNjaGVkX2VudGl0eVtpXSwKKwkJ
CQkJICAgIERSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUwsICZzY2hlZCwKKwkJCQkJICAgIDEsIE5V
TEwpOwogCQlpZiAoV0FSTl9PTihyZXQpKQogCQkJcmV0dXJuIHJldDsKIAl9CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jIGIvZHJpdmVycy9ncHUv
ZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRpdHkuYwppbmRleCA0NjFhN2E4MTI5ZjQuLmY5YjZjZTI5
YzU4ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRpdHku
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jCkBAIC0zOCw5
ICszOCwxMCBAQAogICogc3VibWl0IHRvIEhXIHJpbmcuCiAgKgogICogQGVudGl0eTogc2NoZWR1
bGVyIGVudGl0eSB0byBpbml0Ci0gKiBAcnFfbGlzdDogdGhlIGxpc3Qgb2YgcnVuIHF1ZXVlIG9u
IHdoaWNoIGpvYnMgZnJvbSB0aGlzCisgKiBAcHJpb3JpdHk6IHByaW9yaXR5IG9mIHRoZSBlbnRp
dHkKKyAqIEBzY2hlZF9saXN0OiB0aGUgbGlzdCBvZiBkcm0gc2NoZWRzIG9uIHdoaWNoIGpvYnMg
ZnJvbSB0aGlzCiAgKiAgICAgICAgICAgZW50aXR5IGNhbiBiZSBzdWJtaXR0ZWQKLSAqIEBudW1f
cnFfbGlzdDogbnVtYmVyIG9mIHJ1biBxdWV1ZSBpbiBycV9saXN0CisgKiBAbnVtX3NjaGVkX2xp
c3Q6IG51bWJlciBvZiBkcm0gc2NoZWQgaW4gc2NoZWRfbGlzdAogICogQGd1aWx0eTogYXRvbWlj
X3Qgc2V0IHRvIDEgd2hlbiBhIGpvYiBvbiB0aGlzIHF1ZXVlCiAgKiAgICAgICAgICBpcyBmb3Vu
ZCB0byBiZSBndWlsdHkgY2F1c2luZyBhIHRpbWVvdXQKICAqCkBAIC01MCwzMiArNTEsMzUgQEAK
ICAqIFJldHVybnMgMCBvbiBzdWNjZXNzIG9yIGEgbmVnYXRpdmUgZXJyb3IgY29kZSBvbiBmYWls
dXJlLgogICovCiBpbnQgZHJtX3NjaGVkX2VudGl0eV9pbml0KHN0cnVjdCBkcm1fc2NoZWRfZW50
aXR5ICplbnRpdHksCi0JCQkgIHN0cnVjdCBkcm1fc2NoZWRfcnEgKipycV9saXN0LAotCQkJICB1
bnNpZ25lZCBpbnQgbnVtX3JxX2xpc3QsCisJCQkgIGVudW0gZHJtX3NjaGVkX3ByaW9yaXR5IHBy
aW9yaXR5LAorCQkJICBzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKipzY2hlZF9saXN0LAorCQkJ
ICB1bnNpZ25lZCBpbnQgbnVtX3NjaGVkX2xpc3QsCiAJCQkgIGF0b21pY190ICpndWlsdHkpCiB7
CiAJaW50IGk7CiAKLQlpZiAoIShlbnRpdHkgJiYgcnFfbGlzdCAmJiAobnVtX3JxX2xpc3QgPT0g
MCB8fCBycV9saXN0WzBdKSkpCisJaWYgKCEoZW50aXR5ICYmIHNjaGVkX2xpc3QgJiYgKG51bV9z
Y2hlZF9saXN0ID09IDAgfHwgc2NoZWRfbGlzdFswXSkpKQogCQlyZXR1cm4gLUVJTlZBTDsKIAog
CW1lbXNldChlbnRpdHksIDAsIHNpemVvZihzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSkpOwogCUlO
SVRfTElTVF9IRUFEKCZlbnRpdHktPmxpc3QpOwogCWVudGl0eS0+cnEgPSBOVUxMOwogCWVudGl0
eS0+Z3VpbHR5ID0gZ3VpbHR5OwotCWVudGl0eS0+bnVtX3JxX2xpc3QgPSBudW1fcnFfbGlzdDsK
LQllbnRpdHktPnJxX2xpc3QgPSBrY2FsbG9jKG51bV9ycV9saXN0LCBzaXplb2Yoc3RydWN0IGRy
bV9zY2hlZF9ycSAqKSwKLQkJCQlHRlBfS0VSTkVMKTsKLQlpZiAoIWVudGl0eS0+cnFfbGlzdCkK
KwllbnRpdHktPm51bV9zY2hlZF9saXN0ID0gbnVtX3NjaGVkX2xpc3Q7CisJZW50aXR5LT5wcmlv
cml0eSA9IHByaW9yaXR5OworCWVudGl0eS0+c2NoZWRfbGlzdCA9ICBrY2FsbG9jKG51bV9zY2hl
ZF9saXN0LAorCQkJCSAgICAgIHNpemVvZihzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKiksIEdG
UF9LRVJORUwpOworCisJaWYoIWVudGl0eS0+c2NoZWRfbGlzdCkKIAkJcmV0dXJuIC1FTk9NRU07
CiAKIAlpbml0X2NvbXBsZXRpb24oJmVudGl0eS0+ZW50aXR5X2lkbGUpOwogCi0JZm9yIChpID0g
MDsgaSA8IG51bV9ycV9saXN0OyArK2kpCi0JCWVudGl0eS0+cnFfbGlzdFtpXSA9IHJxX2xpc3Rb
aV07CisJZm9yIChpID0gMDsgaSA8IG51bV9zY2hlZF9saXN0OyBpKyspCisJCWVudGl0eS0+c2No
ZWRfbGlzdFtpXSA9IHNjaGVkX2xpc3RbaV07CiAKLQlpZiAobnVtX3JxX2xpc3QpCi0JCWVudGl0
eS0+cnEgPSBycV9saXN0WzBdOworCWlmIChudW1fc2NoZWRfbGlzdCkKKwkJZW50aXR5LT5ycSA9
ICZlbnRpdHktPnNjaGVkX2xpc3RbMF0tPnNjaGVkX3JxW2VudGl0eS0+cHJpb3JpdHldOwogCiAJ
ZW50aXR5LT5sYXN0X3NjaGVkdWxlZCA9IE5VTEw7CiAKQEAgLTEzOSwxMCArMTQzLDEwIEBAIGRy
bV9zY2hlZF9lbnRpdHlfZ2V0X2ZyZWVfc2NoZWQoc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKmVu
dGl0eSkKIAl1bnNpZ25lZCBpbnQgbWluX2pvYnMgPSBVSU5UX01BWCwgbnVtX2pvYnM7CiAJaW50
IGk7CiAKLQlmb3IgKGkgPSAwOyBpIDwgZW50aXR5LT5udW1fcnFfbGlzdDsgKytpKSB7Ci0JCXN0
cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQgPSBlbnRpdHktPnJxX2xpc3RbaV0tPnNjaGVk
OworCWZvciAoaSA9IDA7IGkgPCBlbnRpdHktPm51bV9zY2hlZF9saXN0OyArK2kpIHsKKwkJc3Ry
dWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCA9IGVudGl0eS0+c2NoZWRfbGlzdFtpXTsKIAot
CQlpZiAoIWVudGl0eS0+cnFfbGlzdFtpXS0+c2NoZWQtPnJlYWR5KSB7CisJCWlmICghZW50aXR5
LT5zY2hlZF9saXN0W2ldLT5yZWFkeSkgewogCQkJRFJNX1dBUk4oInNjaGVkJXMgaXMgbm90IHJl
YWR5LCBza2lwcGluZyIsIHNjaGVkLT5uYW1lKTsKIAkJCWNvbnRpbnVlOwogCQl9CkBAIC0xNTAs
NyArMTU0LDcgQEAgZHJtX3NjaGVkX2VudGl0eV9nZXRfZnJlZV9zY2hlZChzdHJ1Y3QgZHJtX3Nj
aGVkX2VudGl0eSAqZW50aXR5KQogCQludW1fam9icyA9IGF0b21pY19yZWFkKCZzY2hlZC0+bnVt
X2pvYnMpOwogCQlpZiAobnVtX2pvYnMgPCBtaW5fam9icykgewogCQkJbWluX2pvYnMgPSBudW1f
am9iczsKLQkJCXJxID0gZW50aXR5LT5ycV9saXN0W2ldOworCQkJcnEgPSAmZW50aXR5LT5zY2hl
ZF9saXN0W2ldLT5zY2hlZF9ycVtlbnRpdHktPnByaW9yaXR5XTsKIAkJfQogCX0KIApAQCAtMzA4
LDcgKzMxMiw3IEBAIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9maW5pKHN0cnVjdCBkcm1fc2NoZWRf
ZW50aXR5ICplbnRpdHkpCiAKIAlkbWFfZmVuY2VfcHV0KGVudGl0eS0+bGFzdF9zY2hlZHVsZWQp
OwogCWVudGl0eS0+bGFzdF9zY2hlZHVsZWQgPSBOVUxMOwotCWtmcmVlKGVudGl0eS0+cnFfbGlz
dCk7CisJa2ZyZWUoZW50aXR5LT5zY2hlZF9saXN0KTsKIH0KIEVYUE9SVF9TWU1CT0woZHJtX3Nj
aGVkX2VudGl0eV9maW5pKTsKIApAQCAtMzUzLDE1ICszNTcsNiBAQCBzdGF0aWMgdm9pZCBkcm1f
c2NoZWRfZW50aXR5X3dha2V1cChzdHJ1Y3QgZG1hX2ZlbmNlICpmLAogCWRybV9zY2hlZF93YWtl
dXAoZW50aXR5LT5ycS0+c2NoZWQpOwogfQogCi0vKioKLSAqIGRybV9zY2hlZF9lbnRpdHlfc2V0
X3JxX3ByaW9yaXR5IC0gaGVscGVyIGZvciBkcm1fc2NoZWRfZW50aXR5X3NldF9wcmlvcml0eQot
ICovCi1zdGF0aWMgdm9pZCBkcm1fc2NoZWRfZW50aXR5X3NldF9ycV9wcmlvcml0eShzdHJ1Y3Qg
ZHJtX3NjaGVkX3JxICoqcnEsCi0JCQkJCSAgICAgZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgcHJp
b3JpdHkpCi17Ci0JKnJxID0gJigqcnEpLT5zY2hlZC0+c2NoZWRfcnFbcHJpb3JpdHldOwotfQot
CiAvKioKICAqIGRybV9zY2hlZF9lbnRpdHlfc2V0X3ByaW9yaXR5IC0gU2V0cyBwcmlvcml0eSBv
ZiB0aGUgZW50aXR5CiAgKgpAQCAtMzczLDE5ICszNjgsOCBAQCBzdGF0aWMgdm9pZCBkcm1fc2No
ZWRfZW50aXR5X3NldF9ycV9wcmlvcml0eShzdHJ1Y3QgZHJtX3NjaGVkX3JxICoqcnEsCiB2b2lk
IGRybV9zY2hlZF9lbnRpdHlfc2V0X3ByaW9yaXR5KHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICpl
bnRpdHksCiAJCQkJICAgZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgcHJpb3JpdHkpCiB7Ci0JdW5z
aWduZWQgaW50IGk7Ci0KIAlzcGluX2xvY2soJmVudGl0eS0+cnFfbG9jayk7Ci0KLQlmb3IgKGkg
PSAwOyBpIDwgZW50aXR5LT5udW1fcnFfbGlzdDsgKytpKQotCQlkcm1fc2NoZWRfZW50aXR5X3Nl
dF9ycV9wcmlvcml0eSgmZW50aXR5LT5ycV9saXN0W2ldLCBwcmlvcml0eSk7Ci0KLQlpZiAoZW50
aXR5LT5ycSkgewotCQlkcm1fc2NoZWRfcnFfcmVtb3ZlX2VudGl0eShlbnRpdHktPnJxLCBlbnRp
dHkpOwotCQlkcm1fc2NoZWRfZW50aXR5X3NldF9ycV9wcmlvcml0eSgmZW50aXR5LT5ycSwgcHJp
b3JpdHkpOwotCQlkcm1fc2NoZWRfcnFfYWRkX2VudGl0eShlbnRpdHktPnJxLCBlbnRpdHkpOwot
CX0KLQorCWVudGl0eS0+cHJpb3JpdHkgPSBwcmlvcml0eTsKIAlzcGluX3VubG9jaygmZW50aXR5
LT5ycV9sb2NrKTsKIH0KIEVYUE9SVF9TWU1CT0woZHJtX3NjaGVkX2VudGl0eV9zZXRfcHJpb3Jp
dHkpOwpAQCAtNDkwLDIwICs0NzQsMjAgQEAgdm9pZCBkcm1fc2NoZWRfZW50aXR5X3NlbGVjdF9y
cShzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KQogCXN0cnVjdCBkbWFfZmVuY2UgKmZl
bmNlOwogCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOwogCi0JaWYgKHNwc2NfcXVldWVfY291bnQo
JmVudGl0eS0+am9iX3F1ZXVlKSB8fCBlbnRpdHktPm51bV9ycV9saXN0IDw9IDEpCisJaWYgKHNw
c2NfcXVldWVfY291bnQoJmVudGl0eS0+am9iX3F1ZXVlKSB8fCBlbnRpdHktPm51bV9zY2hlZF9s
aXN0IDw9IDEpCiAJCXJldHVybjsKIAogCWZlbmNlID0gUkVBRF9PTkNFKGVudGl0eS0+bGFzdF9z
Y2hlZHVsZWQpOwogCWlmIChmZW5jZSAmJiAhZG1hX2ZlbmNlX2lzX3NpZ25hbGVkKGZlbmNlKSkK
IAkJcmV0dXJuOwogCisJc3Bpbl9sb2NrKCZlbnRpdHktPnJxX2xvY2spOwogCXJxID0gZHJtX3Nj
aGVkX2VudGl0eV9nZXRfZnJlZV9zY2hlZChlbnRpdHkpOwotCWlmIChycSA9PSBlbnRpdHktPnJx
KQotCQlyZXR1cm47CisJaWYgKHJxICE9IGVudGl0eS0+cnEpIHsKKwkJZHJtX3NjaGVkX3JxX3Jl
bW92ZV9lbnRpdHkoZW50aXR5LT5ycSwgZW50aXR5KTsKKwkJZW50aXR5LT5ycSA9IHJxOworCX0K
IAotCXNwaW5fbG9jaygmZW50aXR5LT5ycV9sb2NrKTsKLQlkcm1fc2NoZWRfcnFfcmVtb3ZlX2Vu
dGl0eShlbnRpdHktPnJxLCBlbnRpdHkpOwotCWVudGl0eS0+cnEgPSBycTsKIAlzcGluX3VubG9j
aygmZW50aXR5LT5ycV9sb2NrKTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Yz
ZC92M2RfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vdjNkL3YzZF9kcnYuYwppbmRleCAxYTA3NDYy
YjQ1MjguLmVhYThlOTY4MjM3MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3YzZC92M2Rf
ZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3YzZC92M2RfZHJ2LmMKQEAgLTE0MCw3ICsxNDAs
NyBAQCB2M2Rfb3BlbihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZp
bGUpCiB7CiAJc3RydWN0IHYzZF9kZXYgKnYzZCA9IHRvX3YzZF9kZXYoZGV2KTsKIAlzdHJ1Y3Qg
djNkX2ZpbGVfcHJpdiAqdjNkX3ByaXY7Ci0Jc3RydWN0IGRybV9zY2hlZF9ycSAqcnE7CisJc3Ry
dWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKIAlpbnQgaTsKIAogCXYzZF9wcml2ID0ga3ph
bGxvYyhzaXplb2YoKnYzZF9wcml2KSwgR0ZQX0tFUk5FTCk7CkBAIC0xNTAsOCArMTUwLDEwIEBA
IHYzZF9vcGVuKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkK
IAl2M2RfcHJpdi0+djNkID0gdjNkOwogCiAJZm9yIChpID0gMDsgaSA8IFYzRF9NQVhfUVVFVUVT
OyBpKyspIHsKLQkJcnEgPSAmdjNkLT5xdWV1ZVtpXS5zY2hlZC5zY2hlZF9ycVtEUk1fU0NIRURf
UFJJT1JJVFlfTk9STUFMXTsKLQkJZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2M2RfcHJpdi0+c2No
ZWRfZW50aXR5W2ldLCAmcnEsIDEsIE5VTEwpOworCQlzY2hlZCA9ICZ2M2QtPnF1ZXVlW2ldLnNj
aGVkOworCQlkcm1fc2NoZWRfZW50aXR5X2luaXQoJnYzZF9wcml2LT5zY2hlZF9lbnRpdHlbaV0s
CisJCQkJICAgICAgRFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTCwgJnNjaGVkLAorCQkJCSAgICAg
IDEsIE5VTEwpOwogCX0KIAogCWZpbGUtPmRyaXZlcl9wcml2ID0gdjNkX3ByaXY7CmRpZmYgLS1n
aXQgYS9pbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmggYi9pbmNsdWRlL2RybS9ncHVfc2NoZWR1
bGVyLmgKaW5kZXggNjg0NjkyYThlZDc2Li45NmExYTFiNzUyNmUgMTAwNjQ0Ci0tLSBhL2luY2x1
ZGUvZHJtL2dwdV9zY2hlZHVsZXIuaAorKysgYi9pbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmgK
QEAgLTgxLDggKzgxLDkgQEAgZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgewogc3RydWN0IGRybV9z
Y2hlZF9lbnRpdHkgewogCXN0cnVjdCBsaXN0X2hlYWQJCWxpc3Q7CiAJc3RydWN0IGRybV9zY2hl
ZF9ycQkJKnJxOwotCXN0cnVjdCBkcm1fc2NoZWRfcnEJCSoqcnFfbGlzdDsKLQl1bnNpZ25lZCBp
bnQgICAgICAgICAgICAgICAgICAgIG51bV9ycV9saXN0OworCXVuc2lnbmVkIGludCAgICAgICAg
ICAgICAgICAgICAgbnVtX3NjaGVkX2xpc3Q7CisJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICAg
ICAgICAqKnNjaGVkX2xpc3Q7CisJZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgICAgICAgICBwcmlv
cml0eTsKIAlzcGlubG9ja190CQkJcnFfbG9jazsKIAogCXN0cnVjdCBzcHNjX3F1ZXVlCQlqb2Jf
cXVldWU7CkBAIC0zMTIsNyArMzEzLDggQEAgdm9pZCBkcm1fc2NoZWRfcnFfcmVtb3ZlX2VudGl0
eShzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycSwKIAkJCQlzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAq
ZW50aXR5KTsKIAogaW50IGRybV9zY2hlZF9lbnRpdHlfaW5pdChzdHJ1Y3QgZHJtX3NjaGVkX2Vu
dGl0eSAqZW50aXR5LAotCQkJICBzdHJ1Y3QgZHJtX3NjaGVkX3JxICoqcnFfbGlzdCwKKwkJCSAg
ZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgcHJpb3JpdHksCisJCQkgIHN0cnVjdCBkcm1fZ3B1X3Nj
aGVkdWxlciAqKnNjaGVkX2xpc3QsCiAJCQkgIHVuc2lnbmVkIGludCBudW1fcnFfbGlzdCwKIAkJ
CSAgYXRvbWljX3QgKmd1aWx0eSk7CiBsb25nIGRybV9zY2hlZF9lbnRpdHlfZmx1c2goc3RydWN0
IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSwgbG9uZyB0aW1lb3V0KTsKLS0gCjIuMjQuMAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWls
aW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cg==
