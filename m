Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B02D3A3EFB
	for <lists+amd-gfx@lfdr.de>; Fri, 30 Aug 2019 22:29:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0F04589C68;
	Fri, 30 Aug 2019 20:29:45 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-DM3-obe.outbound.protection.outlook.com
 (mail-dm3nam03on0603.outbound.protection.outlook.com
 [IPv6:2a01:111:f400:fe49::603])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C069689C68
 for <amd-gfx@lists.freedesktop.org>; Fri, 30 Aug 2019 20:29:43 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Uemp4Rex/e7L6QYMD2rz8kGWNPvc24KzhtQgQCht1f9un4M/1eO9mW/VxRd0ZQlmfvlCFibbsMfRGg0jXPh8sJlNP6D1PvDkiK6bFkq0auX4tvKhXL2qvAhzhwUHvKoAV00TL38DQ1PsJ4buwJ2qE+t5PY+1hDyO8OGTmCRxt+33q6Mm2BxXBXApojLsKwD8ybKIa85hXDHW7cR/A2VvtHPnhJiioNBgyjW4PrUEqBIYKdT5wiXxiqkSCIOmW4Nw1+Tt29bDXMDcgWBLV3zBoXfc4JlWyxpwelMeELp/nu361WEsYZC83TEU9jORej2ioAy7WuiyjDeQvSZ1DqObRw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=/UVyIGup85mJ+7m6+lFjNaNjBk7ZYGXB4X7IKHWcuwA=;
 b=L1oEsKOOPUs3MpKjteH9h8rzKu9dNkSr2JKfzw8zv+Vg19Tru0C4yZtwPpltFFqQArqvAmbYFvW74/PwgE6HIsRkshZIP9zyraAzmOIqPTruZ2I0IGbg6h2pk/vbDZRAQ6Et3CiEqD6vWyECOmXIxaea0FGZhmOKjbCVdmhg5h2MiECsYUNKulyUJwzwEGONMBfntSfD2DwE0pwb3jiKBzYTfEJaL362hvel095FCGaX4uldU9sJ0tzNy0eMwPS8Lb1bxm2QXWpoT/dNBIfx/zSCk+lCGaxLNQYF9nsSSHTrsXjbe/sOtffbtZTWAWj48X02TeDwfMk34Drcc6d4Mg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM6PR12MB3947.namprd12.prod.outlook.com (10.255.174.156) by
 DM6PR12MB3228.namprd12.prod.outlook.com (20.179.105.96) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2220.18; Fri, 30 Aug 2019 20:29:42 +0000
Received: from DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::3d2a:29d4:df8:4d5]) by DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::3d2a:29d4:df8:4d5%2]) with mapi id 15.20.2199.021; Fri, 30 Aug 2019
 20:29:42 +0000
From: "Kuehling, Felix" <Felix.Kuehling@amd.com>
To: "Grodzovsky, Andrey" <Andrey.Grodzovsky@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: Re: [PATCH v3 2/3] dmr/amdgpu: Avoid HW GPU reset for RAS.
Thread-Topic: [PATCH v3 2/3] dmr/amdgpu: Avoid HW GPU reset for RAS.
Thread-Index: AQHVX1GDUJdDVjKOKUqjppwFZS45jacUJKkA
Date: Fri, 30 Aug 2019 20:29:41 +0000
Message-ID: <58bbd447-3050-2838-56f1-80f88fadaf1e@amd.com>
References: <1567183153-11014-1-git-send-email-andrey.grodzovsky@amd.com>
 <1567183153-11014-2-git-send-email-andrey.grodzovsky@amd.com>
In-Reply-To: <1567183153-11014-2-git-send-email-andrey.grodzovsky@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [165.204.55.251]
user-agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
x-clientproxiedby: YTXPR0101CA0042.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b00:1::19) To DM6PR12MB3947.namprd12.prod.outlook.com
 (2603:10b6:5:1cb::28)
x-ms-exchange-messagesentrepresentingtype: 1
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 7bc5f37d-ddb4-4428-124a-08d72d88c978
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:DM6PR12MB3228; 
x-ms-traffictypediagnostic: DM6PR12MB3228:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM6PR12MB322874970F569C331E721D1F92BD0@DM6PR12MB3228.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:1303;
x-forefront-prvs: 0145758B1D
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(136003)(346002)(376002)(366004)(396003)(39850400004)(199004)(189003)(6246003)(25786009)(64756008)(476003)(2616005)(486006)(66446008)(66946007)(66556008)(386003)(256004)(11346002)(53546011)(86362001)(31696002)(31686004)(6506007)(76176011)(3846002)(102836004)(71200400001)(71190400001)(26005)(66476007)(446003)(6486002)(65956001)(5660300002)(66066001)(65806001)(229853002)(30864003)(54906003)(2906002)(4326008)(81166006)(305945005)(8936002)(8676002)(81156014)(52116002)(478600001)(316002)(186003)(6512007)(53936002)(2501003)(99286004)(58126008)(7736002)(110136005)(53946003)(6436002)(14444005)(14454004)(6116002)(36756003)(309714004);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB3228;
 H:DM6PR12MB3947.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: HLg7fDc0Vv2z0cB3piHMAy0X7LUTh2iuwZsQY0tZt7u1WaeurkxaIzvujGD48KB6L+D8Gk1TS2eZgrLGZPoyVZ6jHgket3cqKi0m5NcFr/j0j5n6kTkpsOX2G9hlovI9d/zm+s/qF5/b0V1IkpvVmA5iiGUIseG3Y41T8KFV7D66C6ZEm14/3TGCidAB7Cg8pLf02VGGDs8V2LqujTJr3PwLIG7GhOWavCTTG4QuMOiaqJeEfo5v4cYXh1EmdiPAXDjhmnGmdtQLXebCj/kR7PeKkajmDrkCaw6AK6sgzCsrDs+5mUa2J6oNl3dXrtUVQUeVmnwkZISSU2pkZjd5YFskH2PDRSZqN4K/iXr+DlAeQ45I1ej8rCqsct+Xb6oRbPv79jiUt9pXDeO50Ue3/WousOB9pLlNdjqsIv8d4nM=
Content-ID: <A10A9F7865CE1442B6741D14C14B8C02@namprd12.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 7bc5f37d-ddb4-4428-124a-08d72d88c978
X-MS-Exchange-CrossTenant-originalarrivaltime: 30 Aug 2019 20:29:41.8783 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: rxrmY/SeZ3YDtHwcVP01kEssrLz5DJgyLs28u7DxcFBbpfDuCWIslWyFaag7eBRuzqdgIMsQJ9EX5fp4DUFEdQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3228
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=/UVyIGup85mJ+7m6+lFjNaNjBk7ZYGXB4X7IKHWcuwA=;
 b=wN7DbSvraPYlYHkgDuAQ2OPzog84CGhbeo+kfyzZSQPWdpaJ7H9rx2SWFzzHmtM4ba/3wv8RmTS8Tg1il6m8ajbVE+HpSEMn7Cphuke80AxabsVDzV3FAgy2/aqIVesVDSmYOsdAN6YjeFto/3aiyuflVJ0vezphRBglMVEvJsc=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Felix.Kuehling@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "alexdeucher@gmail.com" <alexdeucher@gmail.com>,
 "ckoenig.leichtzumerken@gmail.com" <ckoenig.leichtzumerken@gmail.com>, "Zhou1,
 Tao" <Tao.Zhou1@amd.com>, "Zhang, Hawking" <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gMjAxOS0wOC0zMCAxMjozOSBwLm0uLCBBbmRyZXkgR3JvZHpvdnNreSB3cm90ZToNCj4gUHJv
YmxlbToNCj4gVW5kZXIgY2VydGFpbiBjb25kaXRpb25zLCB3aGVuIHNvbWUgSVAgYm9ja3MgdGFr
ZSBhIFJBUyBlcnJvciwNCj4gd2UgY2FuIGdldCBpbnRvIGEgc2l0dWF0aW9uIHdoZXJlIGEgR1BV
IHJlc2V0IGlzIG5vdCBwb3NzaWJsZQ0KPiBkdWUgdG8gaXNzdWVzIGluIFJBUyBpbiBTTVUvUFNQ
Lg0KPg0KPiBUZW1wb3JhcnkgZml4IHVudGlsIHByb3BlciBzb2x1dGlvbiBpbiBQU1AvU01VIGlz
IHJlYWR5Og0KPiBXaGVuIHVuY29ycmVjdGFibGUgZXJyb3IgaGFwcGVucyB0aGUgREYgd2lsbCB1
bmNvbmRpdGlvbmFsbHkNCj4gYnJvYWRjYXN0IGVycm9yIGV2ZW50IHBhY2tldHMgdG8gYWxsIGl0
cyBjbGllbnRzL3NsYXZlIHVwb24NCj4gcmVjZWl2aW5nIGZhdGFsIGVycm9yIGV2ZW50IGFuZCBm
cmVlemUgYWxsIGl0cyBvdXRib3VuZCBxdWV1ZXMsDQo+IGVycl9ldmVudF9hdGh1YiBpbnRlcnJ1
cHQgIHdpbGwgYmUgdHJpZ2dlcmVkLg0KPiBJbiBzdWNoIGNhc2UgYW5kIHdlIHVzZSB0aGlzIGlu
dGVycnVwdA0KPiB0byBpc3N1ZSBHUFUgcmVzZXQuIFRIZSBHUFUgcmVzZXQgY29kZSBpcyBtb2Rp
ZmllZCBmb3Igc3VjaCBjYXNlIHRvIGF2b2lkIEhXDQo+IHJlc2V0LCBvbmx5IHN0b3BzIHNjaGVk
dWxlcnMsIGRlYXRjaGVzIGFsbCBpbiBwcm9ncmVzcyBhbmQgbm90IHlldCBzY2hlZHVsZWQNCj4g
am9iJ3MgZmVuY2VzLCBzZXQgZXJyb3IgY29kZSBvbiB0aGVtIGFuZCBzaWduYWxzLg0KPiBBbHNv
IHJlamVjdCBhbnkgbmV3IGluY29taW5nIGpvYiBzdWJtaXNzaW9ucyBmcm9tIHVzZXIgc3BhY2Uu
DQo+IEFsbCB0aGlzIGlzIGRvbmUgdG8gbm90aWZ5IHRoZSBhcHBsaWNhdGlvbnMgb2YgdGhlIHBy
b2JsZW0uDQo+DQo+IHYyOg0KPiBFeHRyYWN0IGFtZGdwdV9hbWRrZmRfcHJlL3Bvc3RfcmVzZXQg
ZnJvbSBhbWRncHVfZGV2aWNlX2xvY2svdW5sb2NrX2FkZXYNCj4gTW92ZSBhbWRncHVfam9iX3N0
b3BfYWxsX2pvYnNfb25fc2NoZWQgdG8gYW1kZ3B1X2pvYi5jDQo+IFJlbW92ZSBwcmludCBwYXJh
bSBmcm9tIGFtZGdwdV9yYXNfcXVlcnlfZXJyb3JfY291bnQNCj4NCj4gdjM6DQo+IFVwZGF0ZSBi
YXNlZCBvbiBwcmV2aW91cyBidWcgZml4aW5nIHBhdGNoIHRvIHByb3Blcmx5IGNhbGwgYW1kZ3B1
X2FtZGtmZF9wcmVfcmVzZXQNCj4gZm9yIG90aGVyIFhHTUkgaGl2ZSBtZW1lYmVycy4NCj4NCj4g
U2lnbmVkLW9mZi1ieTogQW5kcmV5IEdyb2R6b3Zza3kgPGFuZHJleS5ncm9kem92c2t5QGFtZC5j
b20+DQoNClRoZSBLRkQgcGFydCBsb29rcyBnb29kIHRvIG1lLiBBY2tlZC1ieTogRmVsaXggS3Vl
aGxpbmcgDQo8RmVsaXguS3VlaGxpbmdAYW1kLmNvbT4NCg0KDQo+IC0tLQ0KPiAgIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jICAgICB8ICA0ICsrKysNCj4gICBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMgfCAzOCArKysrKysrKysrKysrKysr
KysrKysrLS0tLS0tLS0NCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2
LmMgICAgfCAgNSArKysrDQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2pv
Yi5jICAgIHwgMzggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrDQo+ICAgZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2pvYi5oICAgIHwgIDMgKysrDQo+ICAgZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jICAgIHwgIDYgKysrKysNCj4gICBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzLmMgICAgfCAyMiArKysrKysrKysrKysrKyst
LQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuaCAgICB8IDEwICsr
KysrKysrDQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyAgICAgIHwg
MTAgKysrKy0tLS0NCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jICAg
ICAgfCAyNCArKysrKysrKysrLS0tLS0tLS0tDQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvbmJpb192N180LmMgICAgIHwgIDUgKysrKw0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L3NkbWFfdjRfMC5jICAgICB8IDMyICsrKysrKysrKysrKystLS0tLS0tLS0tLS0NCj4gICAx
MiBmaWxlcyBjaGFuZ2VkLCAxNTUgaW5zZXJ0aW9ucygrKSwgNDIgZGVsZXRpb25zKC0pDQo+DQo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jDQo+IGluZGV4IGQ4NjAxNzAuLjQ5
NGMzODQgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9j
cy5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jDQo+IEBA
IC0zOCw2ICszOCw3IEBADQo+ICAgI2luY2x1ZGUgImFtZGdwdV9nbWMuaCINCj4gICAjaW5jbHVk
ZSAiYW1kZ3B1X2dlbS5oIg0KPiAgICNpbmNsdWRlICJhbWRncHVfZGlzcGxheS5oIg0KPiArI2lu
Y2x1ZGUgImFtZGdwdV9yYXMuaCINCj4gICANCj4gICBzdGF0aWMgaW50IGFtZGdwdV9jc191c2Vy
X2ZlbmNlX2NodW5rKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLA0KPiAgIAkJCQkgICAgICBz
dHJ1Y3QgZHJtX2FtZGdwdV9jc19jaHVua19mZW5jZSAqZGF0YSwNCj4gQEAgLTE0MzgsNiArMTQz
OSw5IEBAIGludCBhbWRncHVfY3NfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAq
ZGF0YSwgc3RydWN0IGRybV9maWxlICpmaWxwKQ0KPiAgIAlib29sIHJlc2VydmVkX2J1ZmZlcnMg
PSBmYWxzZTsNCj4gICAJaW50IGksIHI7DQo+ICAgDQo+ICsJaWYgKGFtZGdwdV9yYXNfaW50cl90
cmlnZ2VyZWQoKSkNCj4gKwkJcmV0dXJuIC1FSFdQT0lTT047DQo+ICsNCj4gICAJaWYgKCFhZGV2
LT5hY2NlbF93b3JraW5nKQ0KPiAgIAkJcmV0dXJuIC1FQlVTWTsNCj4gICANCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiBpbmRleCAxOWY2NjI0Li5jOTgy
NWFlIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2
aWNlLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5j
DQo+IEBAIC0zNzI3LDI1ICszNzI3LDE4IEBAIHN0YXRpYyBib29sIGFtZGdwdV9kZXZpY2VfbG9j
a19hZGV2KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBib29sIHRyeWxvY2spDQo+ICAgCQlh
ZGV2LT5tcDFfc3RhdGUgPSBQUF9NUDFfU1RBVEVfTk9ORTsNCj4gICAJCWJyZWFrOw0KPiAgIAl9
DQo+IC0JLyogQmxvY2sga2ZkOiBTUklPViB3b3VsZCBkbyBpdCBzZXBhcmF0ZWx5ICovDQo+IC0J
aWYgKCFhbWRncHVfc3Jpb3ZfdmYoYWRldikpDQo+IC0gICAgICAgICAgICAgICAgYW1kZ3B1X2Ft
ZGtmZF9wcmVfcmVzZXQoYWRldik7DQo+ICAgDQo+ICAgCXJldHVybiB0cnVlOw0KPiAgIH0NCj4g
ICANCj4gICBzdGF0aWMgdm9pZCBhbWRncHVfZGV2aWNlX3VubG9ja19hZGV2KHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2KQ0KPiAgIHsNCj4gLQkvKnVubG9jayBrZmQ6IFNSSU9WIHdvdWxkIGRv
IGl0IHNlcGFyYXRlbHkgKi8NCj4gLQlpZiAoIWFtZGdwdV9zcmlvdl92ZihhZGV2KSkNCj4gLSAg
ICAgICAgICAgICAgICBhbWRncHVfYW1ka2ZkX3Bvc3RfcmVzZXQoYWRldik7DQo+ICAgCWFtZGdw
dV92Zl9lcnJvcl90cmFuc19hbGwoYWRldik7DQo+ICAgCWFkZXYtPm1wMV9zdGF0ZSA9IFBQX01Q
MV9TVEFURV9OT05FOw0KPiAgIAlhZGV2LT5pbl9ncHVfcmVzZXQgPSAwOw0KPiAgIAltdXRleF91
bmxvY2soJmFkZXYtPmxvY2tfcmVzZXQpOw0KPiAgIH0NCj4gICANCj4gLQ0KPiAgIC8qKg0KPiAg
ICAqIGFtZGdwdV9kZXZpY2VfZ3B1X3JlY292ZXIgLSByZXNldCB0aGUgYXNpYyBhbmQgcmVjb3Zl
ciBzY2hlZHVsZXINCj4gICAgKg0KPiBAQCAtMzc2NSwxMSArMzc1OCwxMiBAQCBpbnQgYW1kZ3B1
X2RldmljZV9ncHVfcmVjb3ZlcihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4gICAJc3Ry
dWN0IGFtZGdwdV9oaXZlX2luZm8gKmhpdmUgPSBOVUxMOw0KPiAgIAlzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqdG1wX2FkZXYgPSBOVUxMOw0KPiAgIAlpbnQgaSwgciA9IDA7DQo+ICsJYm9vbCBpbl9y
YXNfaW50ciA9IGFtZGdwdV9yYXNfaW50cl90cmlnZ2VyZWQoKTsNCj4gICANCj4gICAJbmVlZF9m
dWxsX3Jlc2V0ID0gam9iX3NpZ25hbGVkID0gZmFsc2U7DQo+ICAgCUlOSVRfTElTVF9IRUFEKCZk
ZXZpY2VfbGlzdCk7DQo+ICAgDQo+IC0JZGV2X2luZm8oYWRldi0+ZGV2LCAiR1BVIHJlc2V0IGJl
Z2luIVxuIik7DQo+ICsJZGV2X2luZm8oYWRldi0+ZGV2LCAiR1BVICVzIGJlZ2luIVxuIiwgaW5f
cmFzX2ludHIgPyAiam9icyBzdG9wIjoicmVzZXQiKTsNCj4gICANCj4gICAJY2FuY2VsX2RlbGF5
ZWRfd29ya19zeW5jKCZhZGV2LT5kZWxheWVkX2luaXRfd29yayk7DQo+ICAgDQo+IEBAIC0zNzk2
LDkgKzM3OTAsMTYgQEAgaW50IGFtZGdwdV9kZXZpY2VfZ3B1X3JlY292ZXIoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYsDQo+ICAgCQlyZXR1cm4gMDsNCj4gICAJfQ0KPiAgIA0KPiArCS8qIEJs
b2NrIGtmZDogU1JJT1Ygd291bGQgZG8gaXQgc2VwYXJhdGVseSAqLw0KPiArCWlmICghYW1kZ3B1
X3NyaW92X3ZmKGFkZXYpKQ0KPiArICAgICAgICAgICAgICAgIGFtZGdwdV9hbWRrZmRfcHJlX3Jl
c2V0KGFkZXYpOw0KPiArDQo+ICAgCS8qIEJ1aWxkIGxpc3Qgb2YgZGV2aWNlcyB0byByZXNldCAq
Lw0KPiAgIAlpZiAgKGFkZXYtPmdtYy54Z21pLm51bV9waHlzaWNhbF9ub2RlcyA+IDEpIHsNCj4g
ICAJCWlmICghaGl2ZSkgew0KPiArCQkJLyp1bmxvY2sga2ZkOiBTUklPViB3b3VsZCBkbyBpdCBz
ZXBhcmF0ZWx5ICovDQo+ICsJCQlpZiAoIWFtZGdwdV9zcmlvdl92ZihhZGV2KSkNCj4gKwkJICAg
ICAgICAgICAgICAgIGFtZGdwdV9hbWRrZmRfcG9zdF9yZXNldChhZGV2KTsNCj4gICAJCQlhbWRn
cHVfZGV2aWNlX3VubG9ja19hZGV2KGFkZXYpOw0KPiAgIAkJCXJldHVybiAtRU5PREVWOw0KPiAg
IAkJfQ0KPiBAQCAtMzgxNiw4ICszODE3LDEyIEBAIGludCBhbWRncHVfZGV2aWNlX2dwdV9yZWNv
dmVyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KPiAgIA0KPiAgIAkvKiBibG9jayBhbGwg
c2NoZWR1bGVycyBhbmQgcmVzZXQgZ2l2ZW4gam9iJ3MgcmluZyAqLw0KPiAgIAlsaXN0X2Zvcl9l
YWNoX2VudHJ5KHRtcF9hZGV2LCBkZXZpY2VfbGlzdF9oYW5kbGUsIGdtYy54Z21pLmhlYWQpIHsN
Cj4gLQkJaWYgKHRtcF9hZGV2ICE9IGFkZXYpDQo+ICsJCWlmICh0bXBfYWRldiAhPSBhZGV2KSB7
DQo+ICAgCQkJYW1kZ3B1X2RldmljZV9sb2NrX2FkZXYodG1wX2FkZXYsIGZhbHNlKTsNCj4gKwkJ
CWlmICghYW1kZ3B1X3NyaW92X3ZmKHRtcF9hZGV2KSkNCj4gKwkJCSAgICAgICAgICAgICAgICBh
bWRncHVfYW1ka2ZkX3ByZV9yZXNldCh0bXBfYWRldik7DQo+ICsJCX0NCj4gKw0KPiAgIAkJLyoN
Cj4gICAJCSAqIE1hcmsgdGhlc2UgQVNJQ3MgdG8gYmUgcmVzZXRlZCBhcyB1bnRyYWNrZWQgZmly
c3QNCj4gICAJCSAqIEFuZCBhZGQgdGhlbSBiYWNrIGFmdGVyIHJlc2V0IGNvbXBsZXRlZA0KPiBA
QCAtMzgyNSw3ICszODMwLDcgQEAgaW50IGFtZGdwdV9kZXZpY2VfZ3B1X3JlY292ZXIoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+ICAgCQlhbWRncHVfdW5yZWdpc3Rlcl9ncHVfaW5zdGFu
Y2UodG1wX2FkZXYpOw0KPiAgIA0KPiAgIAkJLyogZGlzYWJsZSByYXMgb24gQUxMIElQcyAqLw0K
PiAtCQlpZiAoYW1kZ3B1X2RldmljZV9pcF9uZWVkX2Z1bGxfcmVzZXQodG1wX2FkZXYpKQ0KPiAr
CQlpZiAoIWluX3Jhc19pbnRyICYmIGFtZGdwdV9kZXZpY2VfaXBfbmVlZF9mdWxsX3Jlc2V0KHRt
cF9hZGV2KSkNCj4gICAJCQlhbWRncHVfcmFzX3N1c3BlbmQodG1wX2FkZXYpOw0KPiAgIA0KPiAg
IAkJZm9yIChpID0gMDsgaSA8IEFNREdQVV9NQVhfUklOR1M7ICsraSkgew0KPiBAQCAtMzgzNSwx
MCArMzg0MCwxNiBAQCBpbnQgYW1kZ3B1X2RldmljZV9ncHVfcmVjb3ZlcihzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiwNCj4gICAJCQkJY29udGludWU7DQo+ICAgDQo+ICAgCQkJZHJtX3NjaGVk
X3N0b3AoJnJpbmctPnNjaGVkLCBqb2IgPyAmam9iLT5iYXNlIDogTlVMTCk7DQo+ICsNCj4gKwkJ
CWlmIChpbl9yYXNfaW50cikNCj4gKwkJCQlhbWRncHVfam9iX3N0b3BfYWxsX2pvYnNfb25fc2No
ZWQoJnJpbmctPnNjaGVkKTsNCj4gICAJCX0NCj4gICAJfQ0KPiAgIA0KPiAgIA0KPiArCWlmIChp
bl9yYXNfaW50cikNCj4gKwkJZ290byBza2lwX3NjaGVkX3Jlc3VtZTsNCj4gKw0KPiAgIAkvKg0K
PiAgIAkgKiBNdXN0IGNoZWNrIGd1aWx0eSBzaWduYWwgaGVyZSBzaW5jZSBhZnRlciB0aGlzIHBv
aW50IGFsbCBvbGQNCj4gICAJICogSFcgZmVuY2VzIGFyZSBmb3JjZSBzaWduYWxlZC4NCj4gQEAg
LTM4OTcsNiArMzkwOCw3IEBAIGludCBhbWRncHVfZGV2aWNlX2dwdV9yZWNvdmVyKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LA0KPiAgIA0KPiAgIAkvKiBQb3N0IEFTSUMgcmVzZXQgZm9yIGFs
bCBkZXZzIC4qLw0KPiAgIAlsaXN0X2Zvcl9lYWNoX2VudHJ5KHRtcF9hZGV2LCBkZXZpY2VfbGlz
dF9oYW5kbGUsIGdtYy54Z21pLmhlYWQpIHsNCj4gKw0KPiAgIAkJZm9yIChpID0gMDsgaSA8IEFN
REdQVV9NQVhfUklOR1M7ICsraSkgew0KPiAgIAkJCXN0cnVjdCBhbWRncHVfcmluZyAqcmluZyA9
IHRtcF9hZGV2LT5yaW5nc1tpXTsNCj4gICANCj4gQEAgLTM5MjMsNyArMzkzNSwxMyBAQCBpbnQg
YW1kZ3B1X2RldmljZV9ncHVfcmVjb3ZlcihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4g
ICAJCX0gZWxzZSB7DQo+ICAgCQkJZGV2X2luZm8odG1wX2FkZXYtPmRldiwgIkdQVSByZXNldCgl
ZCkgc3VjY2VlZGVkIVxuIiwgYXRvbWljX3JlYWQoJnRtcF9hZGV2LT5ncHVfcmVzZXRfY291bnRl
cikpOw0KPiAgIAkJfQ0KPiArCX0NCj4gICANCj4gK3NraXBfc2NoZWRfcmVzdW1lOg0KPiArCWxp
c3RfZm9yX2VhY2hfZW50cnkodG1wX2FkZXYsIGRldmljZV9saXN0X2hhbmRsZSwgZ21jLnhnbWku
aGVhZCkgew0KPiArCQkvKnVubG9jayBrZmQ6IFNSSU9WIHdvdWxkIGRvIGl0IHNlcGFyYXRlbHkg
Ki8NCj4gKwkJaWYgKCFpbl9yYXNfaW50ciAmJiAhYW1kZ3B1X3NyaW92X3ZmKHRtcF9hZGV2KSkN
Cj4gKwkgICAgICAgICAgICAgICAgYW1kZ3B1X2FtZGtmZF9wb3N0X3Jlc2V0KHRtcF9hZGV2KTsN
Cj4gICAJCWFtZGdwdV9kZXZpY2VfdW5sb2NrX2FkZXYodG1wX2FkZXYpOw0KPiAgIAl9DQo+ICAg
DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMNCj4gaW5kZXggNzY3OWZl
OC4uYzczZDI2YSAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2Rydi5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYu
Yw0KPiBAQCAtNDAsNiArNDAsOCBAQA0KPiAgIA0KPiAgICNpbmNsdWRlICJhbWRncHVfYW1ka2Zk
LmgiDQo+ICAgDQo+ICsjaW5jbHVkZSAiYW1kZ3B1X3Jhcy5oIg0KPiArDQo+ICAgLyoNCj4gICAg
KiBLTVMgd3JhcHBlci4NCj4gICAgKiAtIDMuMC4wIC0gaW5pdGlhbCBkcml2ZXINCj4gQEAgLTEx
ODAsNiArMTE4Miw5IEBAIGFtZGdwdV9wY2lfc2h1dGRvd24oc3RydWN0IHBjaV9kZXYgKnBkZXYp
DQo+ICAgCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBwY2lfZ2V0X2RydmRhdGEocGRldik7DQo+
ICAgCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsNCj4gICAN
Cj4gKwlpZiAoYW1kZ3B1X3Jhc19pbnRyX3RyaWdnZXJlZCgpKQ0KPiArCQlyZXR1cm47DQo+ICsN
Cj4gICAJLyogaWYgd2UgYXJlIHJ1bm5pbmcgaW4gYSBWTSwgbWFrZSBzdXJlIHRoZSBkZXZpY2UN
Cj4gICAJICogdG9ybiBkb3duIHByb3Blcmx5IG9uIHJlYm9vdC9zaHV0ZG93bi4NCj4gICAJICog
dW5mb3J0dW5hdGVseSB3ZSBjYW4ndCBkZXRlY3QgY2VydGFpbg0KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2pvYi5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2pvYi5jDQo+IGluZGV4IDRkNjdiNzcuLmIxMjk4MWUgMTAwNjQ0DQo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9qb2IuYw0KPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfam9iLmMNCj4gQEAgLTI1MCw2ICsyNTAs
NDQgQEAgc3RhdGljIHN0cnVjdCBkbWFfZmVuY2UgKmFtZGdwdV9qb2JfcnVuKHN0cnVjdCBkcm1f
c2NoZWRfam9iICpzY2hlZF9qb2IpDQo+ICAgCXJldHVybiBmZW5jZTsNCj4gICB9DQo+ICAgDQo+
ICsjZGVmaW5lIHRvX2RybV9zY2hlZF9qb2Ioc2NoZWRfam9iKQkJXA0KPiArCQljb250YWluZXJf
b2YoKHNjaGVkX2pvYiksIHN0cnVjdCBkcm1fc2NoZWRfam9iLCBxdWV1ZV9ub2RlKQ0KPiArDQo+
ICt2b2lkIGFtZGdwdV9qb2Jfc3RvcF9hbGxfam9ic19vbl9zY2hlZChzdHJ1Y3QgZHJtX2dwdV9z
Y2hlZHVsZXIgKnNjaGVkKQ0KPiArew0KPiArCXN0cnVjdCBkcm1fc2NoZWRfam9iICpzX2pvYjsN
Cj4gKwlzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqc19lbnRpdHkgPSBOVUxMOw0KPiArCWludCBp
Ow0KPiArDQo+ICsJLyogU2lnbmFsIGFsbCBqb2JzIG5vdCB5ZXQgc2NoZWR1bGVkICovDQo+ICsJ
Zm9yIChpID0gRFJNX1NDSEVEX1BSSU9SSVRZX01BWCAtIDE7IGkgPj0gRFJNX1NDSEVEX1BSSU9S
SVRZX01JTjsgaS0tKSB7DQo+ICsJCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxID0gJnNjaGVkLT5z
Y2hlZF9ycVtpXTsNCj4gKw0KPiArCQlpZiAoIXJxKQ0KPiArCQkJY29udGludWU7DQo+ICsNCj4g
KwkJc3Bpbl9sb2NrKCZycS0+bG9jayk7DQo+ICsJCWxpc3RfZm9yX2VhY2hfZW50cnkoc19lbnRp
dHksICZycS0+ZW50aXRpZXMsIGxpc3QpIHsNCj4gKwkJCXdoaWxlICgoc19qb2IgPSB0b19kcm1f
c2NoZWRfam9iKHNwc2NfcXVldWVfcG9wKCZzX2VudGl0eS0+am9iX3F1ZXVlKSkpKSB7DQo+ICsJ
CQkJc3RydWN0IGRybV9zY2hlZF9mZW5jZSAqc19mZW5jZSA9IHNfam9iLT5zX2ZlbmNlOw0KPiAr
DQo+ICsJCQkJZG1hX2ZlbmNlX3NpZ25hbCgmc19mZW5jZS0+c2NoZWR1bGVkKTsNCj4gKwkJCQlk
bWFfZmVuY2Vfc2V0X2Vycm9yKCZzX2ZlbmNlLT5maW5pc2hlZCwgLUVIV1BPSVNPTik7DQo+ICsJ
CQkJZG1hX2ZlbmNlX3NpZ25hbCgmc19mZW5jZS0+ZmluaXNoZWQpOw0KPiArCQkJfQ0KPiArCQl9
DQo+ICsJCXNwaW5fdW5sb2NrKCZycS0+bG9jayk7DQo+ICsJfQ0KPiArDQo+ICsJLyogU2lnbmFs
IGFsbCBqb2JzIGFscmVhZHkgc2NoZWR1bGVkIHRvIEhXICovDQo+ICsJbGlzdF9mb3JfZWFjaF9l
bnRyeShzX2pvYiwgJnNjaGVkLT5yaW5nX21pcnJvcl9saXN0LCBub2RlKSB7DQo+ICsJCXN0cnVj
dCBkcm1fc2NoZWRfZmVuY2UgKnNfZmVuY2UgPSBzX2pvYi0+c19mZW5jZTsNCj4gKw0KPiArCQlk
bWFfZmVuY2Vfc2V0X2Vycm9yKCZzX2ZlbmNlLT5maW5pc2hlZCwgLUVIV1BPSVNPTik7DQo+ICsJ
CWRtYV9mZW5jZV9zaWduYWwoJnNfZmVuY2UtPmZpbmlzaGVkKTsNCj4gKwl9DQo+ICt9DQo+ICsN
Cj4gICBjb25zdCBzdHJ1Y3QgZHJtX3NjaGVkX2JhY2tlbmRfb3BzIGFtZGdwdV9zY2hlZF9vcHMg
PSB7DQo+ICAgCS5kZXBlbmRlbmN5ID0gYW1kZ3B1X2pvYl9kZXBlbmRlbmN5LA0KPiAgIAkucnVu
X2pvYiA9IGFtZGdwdV9qb2JfcnVuLA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2pvYi5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2pvYi5oDQo+IGluZGV4IDUxZTYyNTAuLmRjN2VlOTMgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9qb2IuaA0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfam9iLmgNCj4gQEAgLTc2LDQgKzc2LDcgQEAgaW50IGFtZGdwdV9q
b2Jfc3VibWl0KHN0cnVjdCBhbWRncHVfam9iICpqb2IsIHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5
ICplbnRpdHksDQo+ICAgCQkgICAgICB2b2lkICpvd25lciwgc3RydWN0IGRtYV9mZW5jZSAqKmYp
Ow0KPiAgIGludCBhbWRncHVfam9iX3N1Ym1pdF9kaXJlY3Qoc3RydWN0IGFtZGdwdV9qb2IgKmpv
Yiwgc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLA0KPiAgIAkJCSAgICAgc3RydWN0IGRtYV9mZW5j
ZSAqKmZlbmNlKTsNCj4gKw0KPiArdm9pZCBhbWRncHVfam9iX3N0b3BfYWxsX2pvYnNfb25fc2No
ZWQoc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCk7DQo+ICsNCj4gICAjZW5kaWYNCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYw0KPiBpbmRleCAzNWEwODY2Li41
MzVmNjkwIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
a21zLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jDQo+
IEBAIC0xMDQ2LDYgKzEwNDYsMTIgQEAgaW50IGFtZGdwdV9kcml2ZXJfb3Blbl9rbXMoc3RydWN0
IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYpDQo+ICAgCS8qIEVu
c3VyZSBJQiB0ZXN0cyBhcmUgcnVuIG9uIHJpbmcgKi8NCj4gICAJZmx1c2hfZGVsYXllZF93b3Jr
KCZhZGV2LT5kZWxheWVkX2luaXRfd29yayk7DQo+ICAgDQo+ICsNCj4gKwlpZiAoYW1kZ3B1X3Jh
c19pbnRyX3RyaWdnZXJlZCgpKSB7DQo+ICsJCURSTV9FUlJPUigiUkFTIEludHIgdHJpZ2dlcmVk
LCBkZXZpY2UgZGlzYWJsZWQhISIpOw0KPiArCQlyZXR1cm4gLUVIV1BPSVNPTjsNCj4gKwl9DQo+
ICsNCj4gICAJZmlsZV9wcml2LT5kcml2ZXJfcHJpdiA9IE5VTEw7DQo+ICAgDQo+ICAgCXIgPSBw
bV9ydW50aW1lX2dldF9zeW5jKGRldi0+ZGV2KTsNCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9yYXMuYw0KPiBpbmRleCBhYTUxYzAwLi4xY2MzNGRlIDEwMDY0NA0KPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzLmMNCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5jDQo+IEBAIC0yNCw2ICsyNCw4IEBADQo+ICAg
I2luY2x1ZGUgPGxpbnV4L2RlYnVnZnMuaD4NCj4gICAjaW5jbHVkZSA8bGludXgvbGlzdC5oPg0K
PiAgICNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4NCj4gKyNpbmNsdWRlIDxsaW51eC9yZWJvb3Qu
aD4NCj4gKyNpbmNsdWRlIDxsaW51eC9zeXNjYWxscy5oPg0KPiAgICNpbmNsdWRlICJhbWRncHUu
aCINCj4gICAjaW5jbHVkZSAiYW1kZ3B1X3Jhcy5oIg0KPiAgICNpbmNsdWRlICJhbWRncHVfYXRv
bWZpcm13YXJlLmgiDQo+IEBAIC02NCw2ICs2Niw5IEBAIGNvbnN0IGNoYXIgKnJhc19ibG9ja19z
dHJpbmdbXSA9IHsNCj4gICAvKiBpbmplY3QgYWRkcmVzcyBpcyA1MiBiaXRzICovDQo+ICAgI2Rl
ZmluZQlSQVNfVU1DX0lOSkVDVF9BRERSX0xJTUlUCSgweDFVTEwgPDwgNTIpDQo+ICAgDQo+ICsN
Cj4gK2F0b21pY190IGFtZGdwdV9yYXNfaW5faW50ciA9IEFUT01JQ19JTklUKDApOw0KPiArDQo+
ICAgc3RhdGljIGludCBhbWRncHVfcmFzX3Jlc2VydmVfdnJhbShzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwNCj4gICAJCXVpbnQ2NF90IG9mZnNldCwgdWludDY0X3Qgc2l6ZSwNCj4gICAJCXN0
cnVjdCBhbWRncHVfYm8gKipib19wdHIpOw0KPiBAQCAtMTg4LDYgKzE5MywxMCBAQCBzdGF0aWMg
aW50IGFtZGdwdV9yYXNfZGVidWdmc19jdHJsX3BhcnNlX2RhdGEoc3RydWN0IGZpbGUgKmYsDQo+
ICAgDQo+ICAgCXJldHVybiAwOw0KPiAgIH0NCj4gKw0KPiArc3RhdGljIHN0cnVjdCByYXNfbWFu
YWdlciAqYW1kZ3B1X3Jhc19maW5kX29iaihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4g
KwkJc3RydWN0IHJhc19jb21tb25faWYgKmhlYWQpOw0KPiArDQo+ICAgLyoqDQo+ICAgICogRE9D
OiBBTURHUFUgUkFTIGRlYnVnZnMgY29udHJvbCBpbnRlcmZhY2UNCj4gICAgKg0KPiBAQCAtNjI3
LDEyICs2MzYsMTQgQEAgaW50IGFtZGdwdV9yYXNfZXJyb3JfcXVlcnkoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsDQo+ICAgCWluZm8tPnVlX2NvdW50ID0gb2JqLT5lcnJfZGF0YS51ZV9jb3Vu
dDsNCj4gICAJaW5mby0+Y2VfY291bnQgPSBvYmotPmVycl9kYXRhLmNlX2NvdW50Ow0KPiAgIA0K
PiAtCWlmIChlcnJfZGF0YS5jZV9jb3VudCkNCj4gKwlpZiAoZXJyX2RhdGEuY2VfY291bnQpIHsN
Cj4gICAJCWRldl9pbmZvKGFkZXYtPmRldiwgIiVsZCBjb3JyZWN0YWJsZSBlcnJvcnMgZGV0ZWN0
ZWQgaW4gJXMgYmxvY2tcbiIsDQo+ICAgCQkJIG9iai0+ZXJyX2RhdGEuY2VfY291bnQsIHJhc19i
bG9ja19zdHIoaW5mby0+aGVhZC5ibG9jaykpOw0KPiAtCWlmIChlcnJfZGF0YS51ZV9jb3VudCkN
Cj4gKwl9DQo+ICsJaWYgKGVycl9kYXRhLnVlX2NvdW50KSB7DQo+ICAgCQlkZXZfaW5mbyhhZGV2
LT5kZXYsICIlbGQgdW5jb3JyZWN0YWJsZSBlcnJvcnMgZGV0ZWN0ZWQgaW4gJXMgYmxvY2tcbiIs
DQo+ICAgCQkJIG9iai0+ZXJyX2RhdGEudWVfY291bnQsIHJhc19ibG9ja19zdHIoaW5mby0+aGVh
ZC5ibG9jaykpOw0KPiArCX0NCj4gICANCj4gICAJcmV0dXJuIDA7DQo+ICAgfQ0KPiBAQCAtMTcx
OCwzICsxNzI5LDEwIEBAIGludCBhbWRncHVfcmFzX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpDQo+ICAgDQo+ICAgCXJldHVybiAwOw0KPiAgIH0NCj4gKw0KPiArdm9pZCBhbWRncHVf
cmFzX2dsb2JhbF9yYXNfaXNyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KPiArew0KPiAr
CWlmIChhdG9taWNfY21weGNoZygmYW1kZ3B1X3Jhc19pbl9pbnRyLCAwLCAxKSA9PSAwKSB7DQo+
ICsJCURSTV9XQVJOKCJSQVMgZXZlbnQgb2YgdHlwZSBFUlJFVkVOVF9BVEhVQl9JTlRFUlJVUFQg
ZGV0ZWN0ZWQhIFN0b3BwaW5nIGFsbCBHUFUgam9icy5cbiIpOw0KPiArCX0NCj4gK30NCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuaA0KPiBpbmRleCBmYzRmYjBmLi4zZWMy
YTg3IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFz
LmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oDQo+IEBA
IC02MDAsNCArNjAwLDE0IEBAIGludCBhbWRncHVfcmFzX2ludGVycnVwdF9yZW1vdmVfaGFuZGxl
cihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4gICANCj4gICBpbnQgYW1kZ3B1X3Jhc19p
bnRlcnJ1cHRfZGlzcGF0Y2goc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+ICAgCQlzdHJ1
Y3QgcmFzX2Rpc3BhdGNoX2lmICppbmZvKTsNCj4gKw0KPiArZXh0ZXJuIGF0b21pY190IGFtZGdw
dV9yYXNfaW5faW50cjsNCj4gKw0KPiArc3RhdGljIGlubGluZSBib29sIGFtZGdwdV9yYXNfaW50
cl90cmlnZ2VyZWQodm9pZCkNCj4gK3sNCj4gKwlyZXR1cm4gISFhdG9taWNfcmVhZCgmYW1kZ3B1
X3Jhc19pbl9pbnRyKTsNCj4gK30NCj4gKw0KPiArdm9pZCBhbWRncHVfcmFzX2dsb2JhbF9yYXNf
aXNyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsNCj4gKw0KPiAgICNlbmRpZg0KPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMNCj4gaW5kZXggOTNlM2U4OS4uODE3OTk3YiAx
MDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYw0KPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjlfMC5jDQo+IEBAIC01Njc2LDEw
ICs1Njc2LDEyIEBAIHN0YXRpYyBpbnQgZ2Z4X3Y5XzBfcHJvY2Vzc19yYXNfZGF0YV9jYihzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4gICAJCXN0cnVjdCBhbWRncHVfaXZfZW50cnkgKmVu
dHJ5KQ0KPiAgIHsNCj4gICAJLyogVE9ETyB1ZSB3aWxsIHRyaWdnZXIgYW4gaW50ZXJydXB0LiAq
Lw0KPiAtCWtnZDJrZmRfc2V0X3NyYW1fZWNjX2ZsYWcoYWRldi0+a2ZkLmRldik7DQo+IC0JaWYg
KGFkZXYtPmdmeC5mdW5jcy0+cXVlcnlfcmFzX2Vycm9yX2NvdW50KQ0KPiAtCQlhZGV2LT5nZngu
ZnVuY3MtPnF1ZXJ5X3Jhc19lcnJvcl9jb3VudChhZGV2LCBlcnJfZGF0YSk7DQo+IC0JYW1kZ3B1
X3Jhc19yZXNldF9ncHUoYWRldiwgMCk7DQo+ICsJaWYgKCFhbWRncHVfcmFzX2lzX3N1cHBvcnRl
ZChhZGV2LCBBTURHUFVfUkFTX0JMT0NLX19HRlgpKSB7DQo+ICsJCWtnZDJrZmRfc2V0X3NyYW1f
ZWNjX2ZsYWcoYWRldi0+a2ZkLmRldik7DQo+ICsJCWlmIChhZGV2LT5nZnguZnVuY3MtPnF1ZXJ5
X3Jhc19lcnJvcl9jb3VudCkNCj4gKwkJCWFkZXYtPmdmeC5mdW5jcy0+cXVlcnlfcmFzX2Vycm9y
X2NvdW50KGFkZXYsIGVycl9kYXRhKTsNCj4gKwkJYW1kZ3B1X3Jhc19yZXNldF9ncHUoYWRldiwg
MCk7DQo+ICsJfQ0KPiAgIAlyZXR1cm4gQU1ER1BVX1JBU19TVUNDRVNTOw0KPiAgIH0NCj4gICAN
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jDQo+IGluZGV4IDVlYjE3YzcuLjJh
NmFjNjAgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8w
LmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYw0KPiBAQCAt
MjQzLDE4ICsyNDMsMjAgQEAgc3RhdGljIGludCBnbWNfdjlfMF9wcm9jZXNzX3Jhc19kYXRhX2Ni
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KPiAgIAkJc3RydWN0IHJhc19lcnJfZGF0YSAq
ZXJyX2RhdGEsDQo+ICAgCQlzdHJ1Y3QgYW1kZ3B1X2l2X2VudHJ5ICplbnRyeSkNCj4gICB7DQo+
IC0Ja2dkMmtmZF9zZXRfc3JhbV9lY2NfZmxhZyhhZGV2LT5rZmQuZGV2KTsNCj4gLQlpZiAoYWRl
di0+dW1jLmZ1bmNzLT5xdWVyeV9yYXNfZXJyb3JfY291bnQpDQo+IC0JCWFkZXYtPnVtYy5mdW5j
cy0+cXVlcnlfcmFzX2Vycm9yX2NvdW50KGFkZXYsIGVycl9kYXRhKTsNCj4gLQkvKiB1bWMgcXVl
cnlfcmFzX2Vycm9yX2FkZHJlc3MgaXMgYWxzbyByZXNwb25zaWJsZSBmb3IgY2xlYXJpbmcNCj4g
LQkgKiBlcnJvciBzdGF0dXMNCj4gLQkgKi8NCj4gLQlpZiAoYWRldi0+dW1jLmZ1bmNzLT5xdWVy
eV9yYXNfZXJyb3JfYWRkcmVzcykNCj4gLQkJYWRldi0+dW1jLmZ1bmNzLT5xdWVyeV9yYXNfZXJy
b3JfYWRkcmVzcyhhZGV2LCBlcnJfZGF0YSk7DQo+ICsJaWYgKCFhbWRncHVfcmFzX2lzX3N1cHBv
cnRlZChhZGV2LCBBTURHUFVfUkFTX0JMT0NLX19HRlgpKSB7DQo+ICsJCWtnZDJrZmRfc2V0X3Ny
YW1fZWNjX2ZsYWcoYWRldi0+a2ZkLmRldik7DQo+ICsJCWlmIChhZGV2LT51bWMuZnVuY3MtPnF1
ZXJ5X3Jhc19lcnJvcl9jb3VudCkNCj4gKwkJCWFkZXYtPnVtYy5mdW5jcy0+cXVlcnlfcmFzX2Vy
cm9yX2NvdW50KGFkZXYsIGVycl9kYXRhKTsNCj4gKwkJLyogdW1jIHF1ZXJ5X3Jhc19lcnJvcl9h
ZGRyZXNzIGlzIGFsc28gcmVzcG9uc2libGUgZm9yIGNsZWFyaW5nDQo+ICsJCSAqIGVycm9yIHN0
YXR1cw0KPiArCQkgKi8NCj4gKwkJaWYgKGFkZXYtPnVtYy5mdW5jcy0+cXVlcnlfcmFzX2Vycm9y
X2FkZHJlc3MpDQo+ICsJCQlhZGV2LT51bWMuZnVuY3MtPnF1ZXJ5X3Jhc19lcnJvcl9hZGRyZXNz
KGFkZXYsIGVycl9kYXRhKTsNCj4gICANCj4gLQkvKiBvbmx5IHVuY29ycmVjdGFibGUgZXJyb3Ig
bmVlZHMgZ3B1IHJlc2V0ICovDQo+IC0JaWYgKGVycl9kYXRhLT51ZV9jb3VudCkNCj4gLQkJYW1k
Z3B1X3Jhc19yZXNldF9ncHUoYWRldiwgMCk7DQo+ICsJCS8qIG9ubHkgdW5jb3JyZWN0YWJsZSBl
cnJvciBuZWVkcyBncHUgcmVzZXQgKi8NCj4gKwkJaWYgKGVycl9kYXRhLT51ZV9jb3VudCkNCj4g
KwkJCWFtZGdwdV9yYXNfcmVzZXRfZ3B1KGFkZXYsIDApOw0KPiArCX0NCj4gICANCj4gICAJcmV0
dXJuIEFNREdQVV9SQVNfU1VDQ0VTUzsNCj4gICB9DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9uYmlvX3Y3XzQuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L25iaW9fdjdfNC5jDQo+IGluZGV4IDM2N2Y5ZDYuLjU0NTk5MGMgMTAwNjQ0DQo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L25iaW9fdjdfNC5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L25iaW9fdjdfNC5jDQo+IEBAIC0zMCw2ICszMCw3IEBADQo+ICAgI2lu
Y2x1ZGUgIm5iaW8vbmJpb183XzRfMF9zbW4uaCINCj4gICAjaW5jbHVkZSAiaXZzcmNpZC9uYmlv
L2lycXNyY3NfbmJpZl83XzQuaCINCj4gICAjaW5jbHVkZSA8dWFwaS9saW51eC9rZmRfaW9jdGwu
aD4NCj4gKyNpbmNsdWRlICJhbWRncHVfcmFzLmgiDQo+ICAgDQo+ICAgI2RlZmluZSBzbW5OQklG
X01HQ0dfQ1RSTF9MQ0xLCTB4MTAxM2EyMWMNCj4gICANCj4gQEAgLTMyOSw2ICszMzAsOCBAQCBz
dGF0aWMgdm9pZCBuYmlvX3Y3XzRfaGFuZGxlX3Jhc19jb250cm9sbGVyX2ludHJfbm9fYmlmcmlu
ZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZQ0KPiAgIAkJCQkJCUJJRl9ET09SQkVMTF9JTlRfQ05UTCwN
Cj4gICAJCQkJCQlSQVNfQ05UTFJfSU5URVJSVVBUX0NMRUFSLCAxKTsNCj4gICAJCVdSRUczMl9T
T0MxNShOQklPLCAwLCBtbUJJRl9ET09SQkVMTF9JTlRfQ05UTCwgYmlmX2Rvb3JiZWxsX2ludHJf
Y250bCk7DQo+ICsNCj4gKwkJYW1kZ3B1X3Jhc19nbG9iYWxfcmFzX2lzcihhZGV2KTsNCj4gICAJ
fQ0KPiAgIH0NCj4gICANCj4gQEAgLTM0NCw2ICszNDcsOCBAQCBzdGF0aWMgdm9pZCBuYmlvX3Y3
XzRfaGFuZGxlX3Jhc19lcnJfZXZlbnRfYXRodWJfaW50cl9ub19iaWZyaW5nKHN0cnVjdCBhbWRn
cHVfZA0KPiAgIAkJCQkJCUJJRl9ET09SQkVMTF9JTlRfQ05UTCwNCj4gICAJCQkJCQlSQVNfQVRI
VUJfRVJSX0VWRU5UX0lOVEVSUlVQVF9DTEVBUiwgMSk7DQo+ICAgCQlXUkVHMzJfU09DMTUoTkJJ
TywgMCwgbW1CSUZfRE9PUkJFTExfSU5UX0NOVEwsIGJpZl9kb29yYmVsbF9pbnRyX2NudGwpOw0K
PiArDQo+ICsJCWFtZGdwdV9yYXNfZ2xvYmFsX3Jhc19pc3IoYWRldik7DQo+ICAgCX0NCj4gICB9
DQo+ICAgDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zZG1hX3Y0
XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NkbWFfdjRfMC5jDQo+IGluZGV4IGIz
ZWQ1MzMuLmIwNTQyOGYgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L3NkbWFfdjRfMC5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NkbWFfdjRf
MC5jDQo+IEBAIC0xOTcyLDI0ICsxOTcyLDI2IEBAIHN0YXRpYyBpbnQgc2RtYV92NF8wX3Byb2Nl
c3NfcmFzX2RhdGFfY2Ioc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQo+ICAgCXVpbnQzMl90
IGVycl9zb3VyY2U7DQo+ICAgCWludCBpbnN0YW5jZTsNCj4gICANCj4gLQlpbnN0YW5jZSA9IHNk
bWFfdjRfMF9pcnFfaWRfdG9fc2VxKGVudHJ5LT5jbGllbnRfaWQpOw0KPiAtCWlmIChpbnN0YW5j
ZSA8IDApDQo+IC0JCXJldHVybiAwOw0KPiArCWlmICghYW1kZ3B1X3Jhc19pc19zdXBwb3J0ZWQo
YWRldiwgQU1ER1BVX1JBU19CTE9DS19fR0ZYKSkgew0KPiArCQlpbnN0YW5jZSA9IHNkbWFfdjRf
MF9pcnFfaWRfdG9fc2VxKGVudHJ5LT5jbGllbnRfaWQpOw0KPiArCQlpZiAoaW5zdGFuY2UgPCAw
KQ0KPiArCQkJcmV0dXJuIDA7DQo+ICAgDQo+IC0Jc3dpdGNoIChlbnRyeS0+c3JjX2lkKSB7DQo+
IC0JY2FzZSBTRE1BMF80XzBfX1NSQ0lEX19TRE1BX1NSQU1fRUNDOg0KPiAtCQllcnJfc291cmNl
ID0gMDsNCj4gLQkJYnJlYWs7DQo+IC0JY2FzZSBTRE1BMF80XzBfX1NSQ0lEX19TRE1BX0VDQzoN
Cj4gLQkJZXJyX3NvdXJjZSA9IDE7DQo+IC0JCWJyZWFrOw0KPiAtCWRlZmF1bHQ6DQo+IC0JCXJl
dHVybiAwOw0KPiAtCX0NCj4gKwkJc3dpdGNoIChlbnRyeS0+c3JjX2lkKSB7DQo+ICsJCWNhc2Ug
U0RNQTBfNF8wX19TUkNJRF9fU0RNQV9TUkFNX0VDQzoNCj4gKwkJCWVycl9zb3VyY2UgPSAwOw0K
PiArCQkJYnJlYWs7DQo+ICsJCWNhc2UgU0RNQTBfNF8wX19TUkNJRF9fU0RNQV9FQ0M6DQo+ICsJ
CQllcnJfc291cmNlID0gMTsNCj4gKwkJCWJyZWFrOw0KPiArCQlkZWZhdWx0Og0KPiArCQkJcmV0
dXJuIDA7DQo+ICsJCX0NCj4gICANCj4gLQlrZ2Qya2ZkX3NldF9zcmFtX2VjY19mbGFnKGFkZXYt
PmtmZC5kZXYpOw0KPiArCQlrZ2Qya2ZkX3NldF9zcmFtX2VjY19mbGFnKGFkZXYtPmtmZC5kZXYp
Ow0KPiAgIA0KPiAtCWFtZGdwdV9yYXNfcmVzZXRfZ3B1KGFkZXYsIDApOw0KPiArCQlhbWRncHVf
cmFzX3Jlc2V0X2dwdShhZGV2LCAwKTsNCj4gKwl9DQo+ICAgDQo+ICAgCXJldHVybiBBTURHUFVf
UkFTX1NVQ0NFU1M7DQo+ICAgfQ0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQt
Z2Z4
