Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7CDD233BEC
	for <lists+amd-gfx@lfdr.de>; Tue,  4 Jun 2019 01:29:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 972EB89333;
	Mon,  3 Jun 2019 23:29:37 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM01-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr820054.outbound.protection.outlook.com [40.107.82.54])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B2DCC89333
 for <amd-gfx@lists.freedesktop.org>; Mon,  3 Jun 2019 23:29:36 +0000 (UTC)
Received: from DM6PR12MB3947.namprd12.prod.outlook.com (10.255.174.156) by
 DM6PR12MB3516.namprd12.prod.outlook.com (20.179.106.152) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1943.22; Mon, 3 Jun 2019 23:29:34 +0000
Received: from DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::5964:8c3c:1b5b:c480]) by DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::5964:8c3c:1b5b:c480%2]) with mapi id 15.20.1922.021; Mon, 3 Jun 2019
 23:29:34 +0000
From: "Kuehling, Felix" <Felix.Kuehling@amd.com>
To: "Yang, Philip" <Philip.Yang@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>, Jerome Glisse <jglisse@redhat.com>
Subject: Re: [PATCH] drm/amdgpu: use new HMM APIs and helpers v3
Thread-Topic: [PATCH] drm/amdgpu: use new HMM APIs and helpers v3
Thread-Index: AQHVGjxP4dSQN2+Mu0q1RtOh9a9v0aaKauwAgAAmlACAAAJrAA==
Date: Mon, 3 Jun 2019 23:29:34 +0000
Message-ID: <5f3114be-2c41-0b8d-3d53-f06d6dbe4d2f@amd.com>
References: <20190603184344.8352-1-Philip.Yang@amd.com>
 <cb9842c5-a842-6b9f-913a-278d6f7064a1@amd.com>
 <e74b1fbc-85f2-8ad0-41aa-7121875abc05@amd.com>
In-Reply-To: <e74b1fbc-85f2-8ad0-41aa-7121875abc05@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [165.204.55.251]
user-agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.0
x-clientproxiedby: YT1PR01CA0021.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01::34)
 To DM6PR12MB3947.namprd12.prod.outlook.com
 (2603:10b6:5:1cb::28)
x-ms-exchange-messagesentrepresentingtype: 1
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 31d1a011-39bc-454a-a20a-08d6e87b5602
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:DM6PR12MB3516; 
x-ms-traffictypediagnostic: DM6PR12MB3516:
x-microsoft-antispam-prvs: <DM6PR12MB3516775F6B962E35B43F2FAB92140@DM6PR12MB3516.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:1051;
x-forefront-prvs: 0057EE387C
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(396003)(346002)(366004)(376002)(39860400002)(136003)(189003)(199004)(53546011)(386003)(478600001)(76176011)(316002)(31686004)(8936002)(8676002)(229853002)(6506007)(71190400001)(64126003)(7736002)(36756003)(25786009)(65806001)(81156014)(11346002)(305945005)(256004)(14444005)(6486002)(81166006)(102836004)(31696002)(71200400001)(476003)(86362001)(446003)(6436002)(2616005)(66946007)(486006)(68736007)(65826007)(2501003)(30864003)(14454004)(6246003)(5660300002)(6512007)(65956001)(53936002)(2906002)(6116002)(66066001)(73956011)(72206003)(110136005)(52116002)(66476007)(99286004)(3846002)(186003)(26005)(66446008)(58126008)(66556008)(64756008);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB3516;
 H:DM6PR12MB3947.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: jSZnyj9TRgaf20zoxBbMxu+Cu/Svd/IR4L+btctWbcCuhGBPHSvn1Xr6hgdQ+JUwd8cpqW6IhYKsX1QtRCcoYwR96E79bBsVQpMGexCImdbLyddTOu4SUa1d2gk1SQ122lPiE6hZBeHIMJQyWR1aA8yoBoePHRsLRAun+cJSrU74emGZ3OAd5KbbD+UwI8ItZcaL4C4d6KmCgEkxBcAbBjHVgeK8ynwTt1LnUeCGlAg9n7bjP2iY1UMQ49GFHdQAXVyEwINVsfNTVJdpX2EpXAwq5w55nCxe2eTNkx81N8SHanADaKIdCs7rwHQItriyZi7TtRZGlDc43jQimiVOCN9cUPtuIqY+KQZhtkGgekVuBWLGo7IH0ME5vTQ+5gK/5X8vwOul5AlxF48dnwabJFkwyoZfnOQ2+eX1+0Mw3Cw=
Content-ID: <AE742B1F0BFA0C468952886F4F95C945@namprd12.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 31d1a011-39bc-454a-a20a-08d6e87b5602
X-MS-Exchange-CrossTenant-originalarrivaltime: 03 Jun 2019 23:29:34.4216 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: fkuehlin@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3516
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=S9/npAt4bWLBKSWQ7228Ne/Xg7Q3JokDScGWtnkVE3Y=;
 b=w5TC4tkkOc3ELkAYUqfrUb3mdHHXOEINjp9BIMesYjQejQIDveZe3hCX8e0gUmo/8fVEEEaaoG70b6FMyLOgqCUgPKq1H23uJU3leXmz1/Qob2gnZxcwcLGe6jMQErvqmgklz2eDaBdwnNjPwXQuuQtOIeCqzca6g726IpI4nXM=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Felix.Kuehling@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

WytKZXJvbWVdDQoNCk9uIDIwMTktMDYtMDMgNzoyMCBwLm0uLCBZYW5nLCBQaGlsaXAgd3JvdGU6
DQo+DQo+IE9uIDIwMTktMDYtMDMgNTowMiBwLm0uLCBLdWVobGluZywgRmVsaXggd3JvdGU6DQo+
PiBPbiAyMDE5LTA2LTAzIDI6NDQgcC5tLiwgWWFuZywgUGhpbGlwIHdyb3RlOg0KPj4+IEhNTSBw
cm92aWRlcyBuZXcgQVBJcyBhbmQgaGVscHMgaW4ga2VybmVsIDUuMi1yYzEgdG8gc2ltcGxpZnkg
ZHJpdmVyDQo+Pj4gcGF0aC4gVGhlIG9sZCBobW0gQVBJcyBhcmUgZGVwcmVjYXRlZCBhbmQgd2ls
bCBiZSByZW1vdmVkIGluIGZ1dHVyZS4NCj4+Pg0KPj4+IEJlbG93IGFyZSBjaGFuZ2VzIGluIGRy
aXZlcjoNCj4+Pg0KPj4+IDEuIENoYW5nZSBobW1fdm1hX2ZhdWx0IHRvIGhtbV9yYW5nZV9yZWdp
c3RlciBhbmQgaG1tX3JhbmdlX2ZhdWx0IHdoaWNoDQo+Pj4gc3VwcG9ydHMgcmFuZ2Ugd2l0aCBt
dWx0aXBsZSB2bWFzLCByZW1vdmUgdGhlIG11bHRpcGxlIHZtYXMgaGFuZGxlIHBhdGgNCj4+PiBh
bmQgZGF0YSBzdHJ1Y3R1cmUuDQo+Pj4gMi4gQ2hhbmdlIGhtbV92bWFfcmFuZ2VfZG9uZSB0byBo
bW1fcmFuZ2VfdW5yZWdpc3Rlci4NCj4+PiAzLiBVc2UgZGVmYXVsdCBmbGFncyB0byBhdm9pZCBw
cmUtZmlsbCBwZm4gYXJyYXlzLg0KPj4+IDQuIFVzZSBuZXcgaG1tX2RldmljZV8gaGVscGVycy4N
Cj4+Pg0KPj4+IHYyOiByZXRyeSBpZiBobW1fcmFuZ2VfZmF1bHQgcmV0dXJucyAtRUFHQUlODQo+
Pj4gdjM6IGRlZmluZSBNQVhfUkVUUllfSE1NX1JBTkdFX0ZBVUxULCBza2lwIGRyb3AgbW1hcF9z
ZW0gaWYgcmV0cnkNCj4+IEkgdGhpbmsgZHJvcHBpbmcgbW1hcF9zZW0gZm9yIHJldHJ5IHdhcyBj
b3JyZWN0IGluIHYyIG9mIHRoaXMgcGF0Y2guIE5vdw0KPj4geW91IHdpbGwgdHJ5IHRvIHRha2Ug
dGhlIG1tYXBfc2VtIG11bHRpcGxlIHRpbWVzIHdpdGhvdXQgZHJvcHBpbmcgaXQgaWYNCj4+IHlv
dSByZXRyeS4NCj4+DQo+PiBXZSBkb24ndCBuZWVkIHRvIGhvbGQgdGhlIG1tYXBfc2VtIGR1cmlu
ZyBobW1fcmFuZ2Vfd2FpdF91bnRpbF92YWxpZC4NCj4+DQo+IGhtbV9yYW5nZV9mYXVsdCB3aWxs
IGRyb3AgdGhlIG1tYXBfc2VtIGludGVybmFsbHkgYmVmb3JlIHJldHVybmluZw0KPiAtRUFHQUlO
LCBJIHRoaW5rIGl0IGRvZXMgdGhpcyBvbiBwdXJwb3NlIHRvIGF2b2lkIHVwcGVyIGxldmVsIGNh
bGwgcmV0cnkNCj4gd2hpdGhvdXQgcmVsZWFzZSBtbWFwX3NlbSBpbiBiZXR3ZWVuLg0KDQpHb29k
IGNhdGNoLg0KDQpMb29rcyBsaWtlIHRoZSBkb2N1bWVudGF0aW9uIG9mIGhtbV9yYW5nZV9mYXVs
dCBpcyBvdXRkYXRlZC4gSXQgc2F5cyANCi1FQUdBSU4gY2FuIG9ubHkgYmUgcmV0dXJuZWQgaWYg
YmxvY2s9PWZhbHNlLCBhbmQgdGhhdCBtbWFwX3NlbSBpcyBub3QgDQpkcm9wcGVkIGlmIGJsb2Nr
PT10cnVlLiBCb3RoIG9mIHRoZXNlIHN0YXRlbWVudHMgYXJlIG5vIGxvbmdlciB0cnVlLg0KDQpU
aGUgZXhhbXBsZSBjb2RlIGluIERvY3VtZW50YXRpb24vdm0vaG1tLnJzdCBkcm9wcyB0aGUgbW1h
cF9zZW0gDQpleHBsaWNpdGx5IGFmdGVyIGhtbV9yYW5nZV9zbmFwc2hvdCByZXR1cm5lZCAtRUFH
QUlOLiBJdCBzZWVtcyB0aGF0IA0KaG1tX3JhbmdlX3NuYXBzaG90IGJlaGF2ZXMgc3VidGx5IGRp
ZmZlcmVudGx5IGZyb20gaG1tX3JhbmdlX2ZhdWx0IHdpdGggDQpyZXNwZWN0IHRvIGRyb3BwaW5n
IHRoZSBtbWFwX3NlbS4gVGhhdCdzIHZlcnkgY29uZnVzaW5nIGFuZCBhbm5veWluZy4NCg0KUmVn
YXJkcywNCiDCoCBGZWxpeA0KDQoNCj4gICBJIGZpbmQgdjIgd2FzIGluY29ycmVjdCBhZnRlcg0K
PiByZWFkaW5nIGhtbSBjb2RlIGFnYWluIHRvZGF5LiBJIHNob3VsZCBtZW50aW9uIGRldGFpbHMg
b2YgdGhpcyBjaGFuZ2UgaW4NCj4gbXkgY29tbWl0LCBzZWUgbW9yZSBiZWxvdy4NCj4NCj4gUGhp
bGlwDQo+DQo+PiBTZWUgbW9yZSBiZWxvdyAuLi4NCj4+DQo+Pg0KPj4+IENoYW5nZS1JZDogSTFh
MDBmODg0NTlmM2I5NmM5NTM2OTMzZTlhMTdlYjFlYmFhNzgxMTMNCj4+PiBTaWduZWQtb2ZmLWJ5
OiBQaGlsaXAgWWFuZyA8UGhpbGlwLllhbmdAYW1kLmNvbT4NCj4+PiAtLS0NCj4+PiAgICAgZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X21uLmMgIHwgICAxIC0NCj4+PiAgICAgZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIHwgMTQ5ICsrKysrKysrKystLS0t
LS0tLS0tLS0tLQ0KPj4+ICAgICAyIGZpbGVzIGNoYW5nZWQsIDY0IGluc2VydGlvbnMoKyksIDg2
IGRlbGV0aW9ucygtKQ0KPj4+DQo+Pj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9tbi5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X21u
LmMNCj4+PiBpbmRleCA0MWNjZWU0OWEyMjQuLmUwYmI0N2NlNTcwYiAxMDA2NDQNCj4+PiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfbW4uYw0KPj4+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9tbi5jDQo+Pj4gQEAgLTUxOSw3ICs1MTksNiBA
QCB2b2lkIGFtZGdwdV9obW1faW5pdF9yYW5nZShzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZSkNCj4+
PiAgICAgCQlyYW5nZS0+ZmxhZ3MgPSBobW1fcmFuZ2VfZmxhZ3M7DQo+Pj4gICAgIAkJcmFuZ2Ut
PnZhbHVlcyA9IGhtbV9yYW5nZV92YWx1ZXM7DQo+Pj4gICAgIAkJcmFuZ2UtPnBmbl9zaGlmdCA9
IFBBR0VfU0hJRlQ7DQo+Pj4gLQkJcmFuZ2UtPnBmbnMgPSBOVUxMOw0KPj4+ICAgICAJCUlOSVRf
TElTVF9IRUFEKCZyYW5nZS0+bGlzdCk7DQo+Pj4gICAgIAl9DQo+Pj4gICAgIH0NCj4+PiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jDQo+Pj4gaW5kZXggZWI0Yjg1MDYxYzdl
Li45ZGU2YTJmNWU1NzIgMTAwNjQ0DQo+Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3R0bS5jDQo+Pj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3R0bS5jDQo+Pj4gQEAgLTcxMSw4ICs3MTEsNyBAQCBzdHJ1Y3QgYW1kZ3B1X3R0bV90dCB7
DQo+Pj4gICAgIAlzdHJ1Y3QgdGFza19zdHJ1Y3QJKnVzZXJ0YXNrOw0KPj4+ICAgICAJdWludDMy
X3QJCXVzZXJmbGFnczsNCj4+PiAgICAgI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9BTURHUFVf
VVNFUlBUUikNCj4+PiAtCXN0cnVjdCBobW1fcmFuZ2UJKnJhbmdlczsNCj4+PiAtCWludAkJCW5y
X3JhbmdlczsNCj4+PiArCXN0cnVjdCBobW1fcmFuZ2UJKnJhbmdlOw0KPj4+ICAgICAjZW5kaWYN
Cj4+PiAgICAgfTsNCj4+PiAgICAgDQo+Pj4gQEAgLTcyNSw1NyArNzI0LDM2IEBAIHN0cnVjdCBh
bWRncHVfdHRtX3R0IHsNCj4+PiAgICAgICovDQo+Pj4gICAgICNpZiBJU19FTkFCTEVEKENPTkZJ
R19EUk1fQU1ER1BVX1VTRVJQVFIpDQo+Pj4gICAgIA0KPj4+IC0vKiBTdXBwb3J0IFVzZXJwdHIg
cGFnZXMgY3Jvc3MgbWF4IDE2IHZtYXMgKi8NCj4+PiAtI2RlZmluZSBNQVhfTlJfVk1BUwkoMTYp
DQo+Pj4gKyNkZWZpbmUgTUFYX1JFVFJZX0hNTV9SQU5HRV9GQVVMVAkxNg0KPj4+ICAgICANCj4+
PiAgICAgaW50IGFtZGdwdV90dG1fdHRfZ2V0X3VzZXJfcGFnZXMoc3RydWN0IHR0bV90dCAqdHRt
LCBzdHJ1Y3QgcGFnZSAqKnBhZ2VzKQ0KPj4+ICAgICB7DQo+Pj4gICAgIAlzdHJ1Y3QgYW1kZ3B1
X3R0bV90dCAqZ3R0ID0gKHZvaWQgKil0dG07DQo+Pj4gICAgIAlzdHJ1Y3QgbW1fc3RydWN0ICpt
bSA9IGd0dC0+dXNlcnRhc2stPm1tOw0KPj4+ICAgICAJdW5zaWduZWQgbG9uZyBzdGFydCA9IGd0
dC0+dXNlcnB0cjsNCj4+PiAtCXVuc2lnbmVkIGxvbmcgZW5kID0gc3RhcnQgKyB0dG0tPm51bV9w
YWdlcyAqIFBBR0VfU0laRTsNCj4+PiAtCXN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hID0gTlVM
TCwgKnZtYXNbTUFYX05SX1ZNQVNdOw0KPj4+IC0Jc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2VzOw0K
Pj4+IC0JdW5zaWduZWQgbG9uZyBucl9wYWdlcywgaTsNCj4+PiAtCXVpbnQ2NF90ICpwZm5zLCBm
Ow0KPj4+ICsJc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWE7DQo+Pj4gKwlzdHJ1Y3QgaG1tX3Jh
bmdlICpyYW5nZTsNCj4+PiArCXVuc2lnbmVkIGxvbmcgaTsNCj4+PiArCXVpbnQ2NF90ICpwZm5z
Ow0KPj4+ICsJaW50IHJldHJ5ID0gMDsNCj4+PiAgICAgCWludCByID0gMDsNCj4+PiAgICAgDQo+
Pj4gICAgIAlpZiAoIW1tKSAvKiBIYXBwZW5zIGR1cmluZyBwcm9jZXNzIHNodXRkb3duICovDQo+
Pj4gICAgIAkJcmV0dXJuIC1FU1JDSDsNCj4+PiAgICAgDQo+Pj4gLQlkb3duX3JlYWQoJm1tLT5t
bWFwX3NlbSk7DQo+Pj4gLQ0KPj4+IC0JLyogdXNlciBwYWdlcyBtYXkgY3Jvc3MgbXVsdGlwbGUg
Vk1BcyAqLw0KPj4+IC0JZ3R0LT5ucl9yYW5nZXMgPSAwOw0KPj4+IC0JZG8gew0KPj4+IC0JCXVu
c2lnbmVkIGxvbmcgdm1fc3RhcnQ7DQo+Pj4gLQ0KPj4+IC0JCWlmIChndHQtPm5yX3JhbmdlcyA+
PSBNQVhfTlJfVk1BUykgew0KPj4+IC0JCQlEUk1fRVJST1IoIlRvbyBtYW55IFZNQXMgaW4gdXNl
cnB0ciByYW5nZVxuIik7DQo+Pj4gLQkJCXIgPSAtRUZBVUxUOw0KPj4+IC0JCQlnb3RvIG91dDsN
Cj4+PiAtCQl9DQo+Pj4gLQ0KPj4+IC0JCXZtX3N0YXJ0ID0gdm1hID8gdm1hLT52bV9lbmQgOiBz
dGFydDsNCj4+PiAtCQl2bWEgPSBmaW5kX3ZtYShtbSwgdm1fc3RhcnQpOw0KPj4+IC0JCWlmICh1
bmxpa2VseSghdm1hIHx8IHZtX3N0YXJ0IDwgdm1hLT52bV9zdGFydCkpIHsNCj4+PiAtCQkJciA9
IC1FRkFVTFQ7DQo+Pj4gLQkJCWdvdG8gb3V0Ow0KPj4+IC0JCX0NCj4+PiAtCQl2bWFzW2d0dC0+
bnJfcmFuZ2VzKytdID0gdm1hOw0KPj4+IC0JfSB3aGlsZSAoZW5kID4gdm1hLT52bV9lbmQpOw0K
Pj4+IC0NCj4+PiAtCURSTV9ERUJVR19EUklWRVIoIjB4JWx4IG5yX3JhbmdlcyAlZCBwYWdlcyAw
eCVseFxuIiwNCj4+PiAtCQlzdGFydCwgZ3R0LT5ucl9yYW5nZXMsIHR0bS0+bnVtX3BhZ2VzKTsN
Cj4+PiAtDQo+Pj4gKwl2bWEgPSBmaW5kX3ZtYShtbSwgc3RhcnQpOw0KPj4+ICsJaWYgKHVubGlr
ZWx5KCF2bWEgfHwgc3RhcnQgPCB2bWEtPnZtX3N0YXJ0KSkgew0KPj4+ICsJCXIgPSAtRUZBVUxU
Ow0KPj4+ICsJCWdvdG8gb3V0Ow0KPj4+ICsJfQ0KPj4+ICAgICAJaWYgKHVubGlrZWx5KChndHQt
PnVzZXJmbGFncyAmIEFNREdQVV9HRU1fVVNFUlBUUl9BTk9OT05MWSkgJiYNCj4+PiAtCQl2bWFz
WzBdLT52bV9maWxlKSkgew0KPj4+ICsJCXZtYS0+dm1fZmlsZSkpIHsNCj4+PiAgICAgCQlyID0g
LUVQRVJNOw0KPj4+ICAgICAJCWdvdG8gb3V0Ow0KPj4+ICAgICAJfQ0KPj4+ICAgICANCj4+PiAt
CXJhbmdlcyA9IGt2bWFsbG9jX2FycmF5KGd0dC0+bnJfcmFuZ2VzLCBzaXplb2YoKnJhbmdlcyks
IEdGUF9LRVJORUwpOw0KPj4+IC0JaWYgKHVubGlrZWx5KCFyYW5nZXMpKSB7DQo+Pj4gKwlyYW5n
ZSA9IGt6YWxsb2Moc2l6ZW9mKCpyYW5nZSksIEdGUF9LRVJORUwpOw0KPj4+ICsJaWYgKHVubGlr
ZWx5KCFyYW5nZSkpIHsNCj4+PiAgICAgCQlyID0gLUVOT01FTTsNCj4+PiAgICAgCQlnb3RvIG91
dDsNCj4+PiAgICAgCX0NCj4+PiBAQCAtNzg2LDYxICs3NjQsNjIgQEAgaW50IGFtZGdwdV90dG1f
dHRfZ2V0X3VzZXJfcGFnZXMoc3RydWN0IHR0bV90dCAqdHRtLCBzdHJ1Y3QgcGFnZSAqKnBhZ2Vz
KQ0KPj4+ICAgICAJCWdvdG8gb3V0X2ZyZWVfcmFuZ2VzOw0KPj4+ICAgICAJfQ0KPj4+ICAgICAN
Cj4+PiAtCWZvciAoaSA9IDA7IGkgPCBndHQtPm5yX3JhbmdlczsgaSsrKQ0KPj4+IC0JCWFtZGdw
dV9obW1faW5pdF9yYW5nZSgmcmFuZ2VzW2ldKTsNCj4+PiArCWFtZGdwdV9obW1faW5pdF9yYW5n
ZShyYW5nZSk7DQo+Pj4gKwlyYW5nZS0+ZGVmYXVsdF9mbGFncyA9IHJhbmdlLT5mbGFnc1tITU1f
UEZOX1ZBTElEXTsNCj4+PiArCXJhbmdlLT5kZWZhdWx0X2ZsYWdzIHw9IGFtZGdwdV90dG1fdHRf
aXNfcmVhZG9ubHkodHRtKSA/DQo+Pj4gKwkJCQkwIDogcmFuZ2UtPmZsYWdzW0hNTV9QRk5fV1JJ
VEVdOw0KPj4+ICsJcmFuZ2UtPnBmbl9mbGFnc19tYXNrID0gMDsNCj4+PiArCXJhbmdlLT5wZm5z
ID0gcGZuczsNCj4+PiArCWhtbV9yYW5nZV9yZWdpc3RlcihyYW5nZSwgbW0sIHN0YXJ0LA0KPj4+
ICsJCQkgICBzdGFydCArIHR0bS0+bnVtX3BhZ2VzICogUEFHRV9TSVpFLCBQQUdFX1NISUZUKTsN
Cj4+PiAgICAgDQo+Pj4gLQlmID0gcmFuZ2VzWzBdLmZsYWdzW0hNTV9QRk5fVkFMSURdOw0KPj4+
IC0JZiB8PSBhbWRncHVfdHRtX3R0X2lzX3JlYWRvbmx5KHR0bSkgPw0KPj4+IC0JCQkJMCA6IHJh
bmdlc1swXS5mbGFnc1tITU1fUEZOX1dSSVRFXTsNCj4+PiAtCW1lbXNldDY0KHBmbnMsIGYsIHR0
bS0+bnVtX3BhZ2VzKTsNCj4+PiArcmV0cnk6DQo+Pj4gKwkvKg0KPj4+ICsJICogSnVzdCB3YWl0
IGZvciByYW5nZSB0byBiZSB2YWxpZCwgc2FmZSB0byBpZ25vcmUgcmV0dXJuIHZhbHVlIGFzIHdl
DQo+Pj4gKwkgKiB3aWxsIHVzZSB0aGUgcmV0dXJuIHZhbHVlIG9mIGhtbV9yYW5nZV9mYXVsdCgp
IGJlbG93IHVuZGVyIHRoZQ0KPj4+ICsJICogbW1hcF9zZW0gdG8gYXNjZXJ0YWluIHRoZSB2YWxp
ZGl0eSBvZiB0aGUgcmFuZ2UuDQo+Pj4gKwkgKi8NCj4+PiArCWhtbV9yYW5nZV93YWl0X3VudGls
X3ZhbGlkKHJhbmdlLCBITU1fUkFOR0VfREVGQVVMVF9USU1FT1VUKTsNCj4+PiAgICAgDQo+Pj4g
LQlmb3IgKG5yX3BhZ2VzID0gMCwgaSA9IDA7IGkgPCBndHQtPm5yX3JhbmdlczsgaSsrKSB7DQo+
Pj4gLQkJcmFuZ2VzW2ldLnZtYSA9IHZtYXNbaV07DQo+Pj4gLQkJcmFuZ2VzW2ldLnN0YXJ0ID0g
bWF4KHN0YXJ0LCB2bWFzW2ldLT52bV9zdGFydCk7DQo+Pj4gLQkJcmFuZ2VzW2ldLmVuZCA9IG1p
bihlbmQsIHZtYXNbaV0tPnZtX2VuZCk7DQo+Pj4gLQkJcmFuZ2VzW2ldLnBmbnMgPSBwZm5zICsg
bnJfcGFnZXM7DQo+Pj4gLQkJbnJfcGFnZXMgKz0gKHJhbmdlc1tpXS5lbmQgLSByYW5nZXNbaV0u
c3RhcnQpIC8gUEFHRV9TSVpFOw0KPj4+ICsJZG93bl9yZWFkKCZtbS0+bW1hcF9zZW0pOw0KPj4g
SWYgeW91IHRha2UgdGhlIG1tYXBfc2VtIGhlcmUsIHlvdSBoYXZlIHRvIGRyb3AgaXQgYmVmb3Jl
IGdvdG8gcmV0cnkuDQo+PiBPdGhlcndpc2UgeW91J2xsIGVuZCB1cCB0YWtpbmcgdGhlIG1tYXBf
c2VtIG11bHRpcGxlIHRpbWVzLiBJdCdzIG5vdA0KPj4gZmF0YWwgaW1tZWRpYXRlbHkgYmVjYXVz
ZSB5b3UgY2FuIHRha2UgbXVsdGlwbGUgcmVhZCBsb2Nrcy4gQnV0IGlmIHlvdQ0KPj4gZG9uJ3Qg
ZHJvcCBhbGwgdGhlIHJlYWQgbG9ja3MsIG5vIHdyaXRlciB3aWxsIGV2ZXIgYmUgYWJsZSB0byB0
YWtlIGENCj4+IHdyaXRlIGxvY2sgYWdhaW4uDQo+Pg0KPiBtbWFwX3NlbSBkcm9wcGVkIGJ5IGht
bV9yYW5nZV9mYXVsdCBiZWZvcmUgcmV0dXJuaW5nIC1FQUdBSU4sIGhhdmUgdG8NCj4gdGFrZSBp
dCBhZ2Fpbi4NCj4+PiAgICAgDQo+Pj4gLQkJciA9IGhtbV92bWFfZmF1bHQoJnJhbmdlc1tpXSwg
dHJ1ZSk7DQo+Pj4gLQkJaWYgKHVubGlrZWx5KHIpKQ0KPj4+IC0JCQlicmVhazsNCj4+PiAtCX0N
Cj4+PiAtCWlmICh1bmxpa2VseShyKSkgew0KPj4+IC0JCXdoaWxlIChpLS0pDQo+Pj4gLQkJCWht
bV92bWFfcmFuZ2VfZG9uZSgmcmFuZ2VzW2ldKTsNCj4+PiArCXIgPSBobW1fcmFuZ2VfZmF1bHQo
cmFuZ2UsIHRydWUpOw0KPj4+ICsJaWYgKHVubGlrZWx5KHIgPCAwKSkgew0KPj4+ICsJCWlmIChs
aWtlbHkociA9PSAtRUFHQUlOKSkgew0KPj4+ICsJCQlpZiAocmV0cnkrKyA8IE1BWF9SRVRSWV9I
TU1fUkFOR0VfRkFVTFQpDQo+Pj4gKwkJCQlnb3RvIHJldHJ5Ow0KPj4gWW91J3JlIHN0aWxsIGhv
bGRpbmcgdGhlIG1tYXBfc2VtIGhlcmUuDQo+Pg0KPj4NCj4+PiArCQkJZWxzZQ0KPj4+ICsJCQkJ
cHJfZXJyKCJSZXRyeSBobW0gZmF1bHQgdG9vIG1hbnkgdGltZXNcbiIpOw0KPj4+ICsJCX0NCj4+
PiAgICAgDQo+Pj4gICAgIAkJZ290byBvdXRfZnJlZV9wZm5zOw0KPj4+ICAgICAJfQ0KPj4+ICAg
ICANCj4+PiAtCXVwX3JlYWQoJm1tLT5tbWFwX3NlbSk7DQo+Pj4gLQ0KPj4+ICAgICAJZm9yIChp
ID0gMDsgaSA8IHR0bS0+bnVtX3BhZ2VzOyBpKyspIHsNCj4+PiAtCQlwYWdlc1tpXSA9IGhtbV9w
Zm5fdG9fcGFnZSgmcmFuZ2VzWzBdLCBwZm5zW2ldKTsNCj4+PiAtCQlpZiAoIXBhZ2VzW2ldKSB7
DQo+Pj4gKwkJcGFnZXNbaV0gPSBobW1fZGV2aWNlX2VudHJ5X3RvX3BhZ2UocmFuZ2UsIHBmbnNb
aV0pOw0KPj4+ICsJCWlmICh1bmxpa2VseSghcGFnZXNbaV0pKSB7DQo+Pj4gICAgIAkJCXByX2Vy
cigiUGFnZSBmYXVsdCBmYWlsZWQgZm9yIHBmblslbHVdID0gMHglbGx4XG4iLA0KPj4+ICAgICAJ
CQkgICAgICAgaSwgcGZuc1tpXSk7DQo+Pj4gLQkJCWdvdG8gb3V0X2ludmFsaWRfcGZuOw0KPj4+
ICsJCQlyID0gLUVOT01FTTsNCj4+PiArDQo+Pj4gKwkJCWdvdG8gb3V0X2ZyZWVfcGZuczsNCj4+
PiAgICAgCQl9DQo+Pj4gICAgIAl9DQo+Pj4gLQlndHQtPnJhbmdlcyA9IHJhbmdlczsNCj4+PiAr
DQo+Pj4gKwl1cF9yZWFkKCZtbS0+bW1hcF9zZW0pOw0KPj4gV2h5IGRvIHlvdSBkcm9wIHRoZSBt
bWFwX3NlbSBzbyBsYXRlPyBEb2VzIHRoZSBsb29wIGFib3ZlIHJlcXVpcmUgaXQ/IEkNCj4+IGRv
bid0IGJlbGlldmUgaXQgZG9lcy4NCj4+DQo+IFllcywgSSBjYW4gZHJvcCB0aGUgbW1hcF9zZW0g
YmVmb3JlIHRoZSBsb29wLCBqdXN0IHdhbnRlZCB0byByZW1vdmUgb25lDQo+IGxpbmUgb2YgZHVw
bGljYXRlIHVwX3JlYWQgY2FsbC4NCj4NCj4+IFJlZ2FyZHMsDQo+PiAgICDCoCBGZWxpeA0KPj4N
Cj4+DQo+Pj4gKw0KPj4+ICsJZ3R0LT5yYW5nZSA9IHJhbmdlOw0KPj4+ICAgICANCj4+PiAgICAg
CXJldHVybiAwOw0KPj4+ICAgICANCj4+PiAgICAgb3V0X2ZyZWVfcGZuczoNCj4+PiArCXVwX3Jl
YWQoJm1tLT5tbWFwX3NlbSk7DQo+Pj4gKwlobW1fcmFuZ2VfdW5yZWdpc3RlcihyYW5nZSk7DQo+
Pj4gICAgIAlrdmZyZWUocGZucyk7DQo+Pj4gICAgIG91dF9mcmVlX3JhbmdlczoNCj4+PiAtCWt2
ZnJlZShyYW5nZXMpOw0KPj4+ICsJa2ZyZWUocmFuZ2UpOw0KPj4+ICAgICBvdXQ6DQo+Pj4gLQl1
cF9yZWFkKCZtbS0+bW1hcF9zZW0pOw0KPj4+IC0NCj4+PiAgICAgCXJldHVybiByOw0KPj4+IC0N
Cj4+PiAtb3V0X2ludmFsaWRfcGZuOg0KPj4+IC0JZm9yIChpID0gMDsgaSA8IGd0dC0+bnJfcmFu
Z2VzOyBpKyspDQo+Pj4gLQkJaG1tX3ZtYV9yYW5nZV9kb25lKCZyYW5nZXNbaV0pOw0KPj4+IC0J
a3ZmcmVlKHBmbnMpOw0KPj4+IC0Ja3ZmcmVlKHJhbmdlcyk7DQo+Pj4gLQlyZXR1cm4gLUVOT01F
TTsNCj4+PiAgICAgfQ0KPj4+ICAgICANCj4+PiAgICAgLyoqDQo+Pj4gQEAgLTg1MywyMyArODMy
LDIzIEBAIGJvb2wgYW1kZ3B1X3R0bV90dF9nZXRfdXNlcl9wYWdlc19kb25lKHN0cnVjdCB0dG1f
dHQgKnR0bSkNCj4+PiAgICAgew0KPj4+ICAgICAJc3RydWN0IGFtZGdwdV90dG1fdHQgKmd0dCA9
ICh2b2lkICopdHRtOw0KPj4+ICAgICAJYm9vbCByID0gZmFsc2U7DQo+Pj4gLQlpbnQgaTsNCj4+
PiAgICAgDQo+Pj4gICAgIAlpZiAoIWd0dCB8fCAhZ3R0LT51c2VycHRyKQ0KPj4+ICAgICAJCXJl
dHVybiBmYWxzZTsNCj4+PiAgICAgDQo+Pj4gLQlEUk1fREVCVUdfRFJJVkVSKCJ1c2VyX3BhZ2Vz
X2RvbmUgMHglbGx4IG5yX3JhbmdlcyAlZCBwYWdlcyAweCVseFxuIiwNCj4+PiAtCQlndHQtPnVz
ZXJwdHIsIGd0dC0+bnJfcmFuZ2VzLCB0dG0tPm51bV9wYWdlcyk7DQo+Pj4gKwlEUk1fREVCVUdf
RFJJVkVSKCJ1c2VyX3BhZ2VzX2RvbmUgMHglbGx4IHBhZ2VzIDB4JWx4XG4iLA0KPj4+ICsJCWd0
dC0+dXNlcnB0ciwgdHRtLT5udW1fcGFnZXMpOw0KPj4+ICAgICANCj4+PiAtCVdBUk5fT05DRSgh
Z3R0LT5yYW5nZXMgfHwgIWd0dC0+cmFuZ2VzWzBdLnBmbnMsDQo+Pj4gKwlXQVJOX09OQ0UoIWd0
dC0+cmFuZ2UgfHwgIWd0dC0+cmFuZ2UtPnBmbnMsDQo+Pj4gICAgIAkJIk5vIHVzZXIgcGFnZXMg
dG8gY2hlY2tcbiIpOw0KPj4+ICAgICANCj4+PiAtCWlmIChndHQtPnJhbmdlcykgew0KPj4+IC0J
CWZvciAoaSA9IDA7IGkgPCBndHQtPm5yX3JhbmdlczsgaSsrKQ0KPj4+IC0JCQlyIHw9IGhtbV92
bWFfcmFuZ2VfZG9uZSgmZ3R0LT5yYW5nZXNbaV0pOw0KPj4+IC0JCWt2ZnJlZShndHQtPnJhbmdl
c1swXS5wZm5zKTsNCj4+PiAtCQlrdmZyZWUoZ3R0LT5yYW5nZXMpOw0KPj4+IC0JCWd0dC0+cmFu
Z2VzID0gTlVMTDsNCj4+PiArCWlmIChndHQtPnJhbmdlKSB7DQo+Pj4gKwkJciA9IGhtbV9yYW5n
ZV92YWxpZChndHQtPnJhbmdlKTsNCj4+PiArCQlobW1fcmFuZ2VfdW5yZWdpc3RlcihndHQtPnJh
bmdlKTsNCj4+PiArDQo+Pj4gKwkJa3ZmcmVlKGd0dC0+cmFuZ2UtPnBmbnMpOw0KPj4+ICsJCWtm
cmVlKGd0dC0+cmFuZ2UpOw0KPj4+ICsJCWd0dC0+cmFuZ2UgPSBOVUxMOw0KPj4+ICAgICAJfQ0K
Pj4+ICAgICANCj4+PiAgICAgCXJldHVybiByOw0KPj4+IEBAIC05NTMsOSArOTMyLDkgQEAgc3Rh
dGljIHZvaWQgYW1kZ3B1X3R0bV90dF91bnBpbl91c2VycHRyKHN0cnVjdCB0dG1fdHQgKnR0bSkN
Cj4+PiAgICAgCXNnX2ZyZWVfdGFibGUodHRtLT5zZyk7DQo+Pj4gICAgIA0KPj4+ICAgICAjaWYg
SVNfRU5BQkxFRChDT05GSUdfRFJNX0FNREdQVV9VU0VSUFRSKQ0KPj4+IC0JaWYgKGd0dC0+cmFu
Z2VzICYmDQo+Pj4gLQkgICAgdHRtLT5wYWdlc1swXSA9PSBobW1fcGZuX3RvX3BhZ2UoJmd0dC0+
cmFuZ2VzWzBdLA0KPj4+IC0JCQkJCSAgICAgZ3R0LT5yYW5nZXNbMF0ucGZuc1swXSkpDQo+Pj4g
KwlpZiAoZ3R0LT5yYW5nZSAmJg0KPj4+ICsJICAgIHR0bS0+cGFnZXNbMF0gPT0gaG1tX2Rldmlj
ZV9lbnRyeV90b19wYWdlKGd0dC0+cmFuZ2UsDQo+Pj4gKwkJCQkJCSAgICAgIGd0dC0+cmFuZ2Ut
PnBmbnNbMF0pKQ0KPj4+ICAgICAJCVdBUk5fT05DRSgxLCAiTWlzc2luZyBnZXRfdXNlcl9wYWdl
X2RvbmVcbiIpOw0KPj4+ICAgICAjZW5kaWYNCj4+PiAgICAgfQ0KX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9hbWQtZ2Z4
