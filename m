Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 10AB0D380C
	for <lists+amd-gfx@lfdr.de>; Fri, 11 Oct 2019 05:51:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4E4D96EB99;
	Fri, 11 Oct 2019 03:51:03 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr700060.outbound.protection.outlook.com [40.107.70.60])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9933D6EB99
 for <amd-gfx@lists.freedesktop.org>; Fri, 11 Oct 2019 03:51:02 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=JjRNg9kUIshAPhMsJqyGph/+Id2q20yQf3NeQVZjtHWr56+Milg+9ax6IxHVc8XPHR03ga8tdj6qYYnUIX5wEOSI2x8wnEnTx1u19ECmN74auwFLwYG3addvjthPFlKh7mMFm2CW8necEEOVRkHCLDypxocDWZSThjH0oVrp2GDM2YjSXfbB2k1Oq+z2hAdXfomjgYKdP3/ETJ5pj+KVDW0q2W/kYuNDKfGQ1nd0MxSHcl70T0TBJXOGwN+xlMw3LU7ysA3EpaEgi8viH9e4FO2Dxojo+hytZgnEj59rf6PxeaifUu+0M01bDAtZAvKFmgslrnAjn1SiPvHrH1Pjag==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=i++/bwLn2v9xwwR8dGRPh0iD1CQtW+dxASXNpDRMQN4=;
 b=UDYGQa7aU5vBuiGAcNLqlxd69/rhGSh5ozF7iqEFtvo934G75b1vYwQ4+i0BS2gAdIJScansf4iciroYWOS060QIikoQEbZcfU354zqAlcZq06jmd88m3S4vJ537Xmx8adtUVmIPQK8QAvsd9N6rz4MZeJggF4zbUMCpNswIg5znqDrGS4tYwsDfd3DOpL0BWRftK6QAuezrWjaN/k6R3Nh/ienMNEkzTi4H/A13T7TWMmbSiZEsKjWoV/kT2wokWDdamMNEBRpSwRPip7tCfhdSEZvdwm2n5WZlF3yu5hDI1DSkWgZtiQ5GwXCZ87sSo+BBZFMdE+4XNt6/tNuSLA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from SN1PR12CA0052.namprd12.prod.outlook.com (2603:10b6:802:20::23)
 by BN8PR12MB3492.namprd12.prod.outlook.com (2603:10b6:408:67::32)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2347.18; Fri, 11 Oct
 2019 03:51:01 +0000
Received: from BY2NAM03FT048.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e4a::202) by SN1PR12CA0052.outlook.office365.com
 (2603:10b6:802:20::23) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id 15.20.2327.25 via Frontend
 Transport; Fri, 11 Oct 2019 03:51:01 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV01.amd.com (165.204.84.17) by
 BY2NAM03FT048.mail.protection.outlook.com (10.152.85.64) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2327.20 via Frontend Transport; Fri, 11 Oct 2019 03:51:00 +0000
Received: from rico-code.amd.com (10.180.168.240) by SATLEXCHOV01.amd.com
 (10.181.40.71) with Microsoft SMTP Server id 14.3.389.1; Thu, 10 Oct 2019
 22:50:58 -0500
From: Tianci Yin <tianci.yin@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 5/8] drm/amdgpu/atomfirmware: add memory training related
 helper functions
Date: Fri, 11 Oct 2019 11:50:30 +0800
Message-ID: <20191011035033.24935-5-tianci.yin@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191011035033.24935-1-tianci.yin@amd.com>
References: <20191011035033.24935-1-tianci.yin@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(39860400002)(346002)(396003)(136003)(428003)(199004)(189003)(426003)(305945005)(476003)(126002)(51416003)(336012)(11346002)(446003)(6916009)(2616005)(76176011)(486006)(26005)(70206006)(14444005)(7696005)(44832011)(47776003)(70586007)(186003)(48376002)(316002)(2906002)(53416004)(86362001)(16586007)(54906003)(5660300002)(4326008)(8676002)(50466002)(36756003)(81156014)(81166006)(8936002)(6666004)(356004)(478600001)(2351001)(50226002)(1076003);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BN8PR12MB3492; H:SATLEXCHOV01.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; A:1; MX:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 5958422b-ac8b-48af-469a-08d74dfe3b30
X-MS-TrafficTypeDiagnostic: BN8PR12MB3492:
X-Microsoft-Antispam-PRVS: <BN8PR12MB349283BA372D66E58B9F6FC995970@BN8PR12MB3492.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:9508;
X-Forefront-PRVS: 0187F3EA14
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: h5bkiMHxAMv7OzOOwNrmVYqiFVWuUll1d+AC6tCEMVTn7ai1pYwQ3WJBrWfIg5ZeRkVCIj/amWpdcD5foPf8phQ9H+QlOsKkaXDkV92IcmXHjr/I7UMdioqig8UsgnktIVVTHPkL4hcXX99qba76ufHk4Tz96qDJNs0XvtE2yef6wEJ5QhWZZQJMwimfYDOb24SVxfieawXQ9VY9d/NW2xqHHnTlbOIZ1bTCmz4vsuuYJmDifmGSNJN301U7INMSCt51xax24KK+tylqZC2BaY6Pa/fXTOVbDeGL36FLs1cIcFakv9Za4kcdqaPSPXEYVIu0Y8fnUeolUx5A1QsoMCQsEPzUKCywZTFz7HtE5V2OZo+RDfDs4G0/ZCoRJNBzB24WqAE/HrStaVEgM5/cDYTAmZuaTaoq4ILEGJqnq9E=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 11 Oct 2019 03:51:00.4215 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 5958422b-ac8b-48af-469a-08d74dfe3b30
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV01.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN8PR12MB3492
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=i++/bwLn2v9xwwR8dGRPh0iD1CQtW+dxASXNpDRMQN4=;
 b=rdRLMsD/tKpYlmYPH/d6S/zi2mjcYuN6p/NSQIPD9t1ib7bWFacWowUNnNWo7LF1YioUjM/RER93kEzCJlCvuUaqol2G3im5zxRr8uxTsTkvdfeCmurcNIwvayPwDR5eg84S8jHdfLXZr/qz/4Lnt42IJ+svtgkoyriUZhmozaM=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Deucher Alexander <Alexander.Deucher@amd.com>,
 Tuikov Luben <Luben.Tuikov@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Tianci Yin <tianci.yin@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogIlRpYW5jaS5ZaW4iIDx0aWFuY2kueWluQGFtZC5jb20+CgpwYXJzZSBmaXJtd2FyZSB0
byBnZXQgbWVtb3J5IHRyYWluaW5nIGNhcGFiaWxpdHkgYW5kIGZiIGxvY2F0aW9uLgoKQ2hhbmdl
LUlkOiBJMTQ3YzFkNDhlMjU1ZTAxOTFiZTRiZWIxYWQ2YjYzN2RhNjA3YmY3NQpSZXZpZXdlZC1i
eTogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpTaWduZWQtb2ZmLWJ5
OiBUaWFuY2kuWWluIDx0aWFuY2kueWluQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1LmggICAgICAgICAgIHwgICA3ICsKIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9hdG9tYmlvcy5jICB8ICAgNSArCiAuLi4vZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9hdG9tZmlybXdhcmUuYyAgfCAxMzMgKysrKysrKysrKysrKysrKysrCiAuLi4vZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuaCAgfCAgIDEgKwogNCBmaWxlcyBj
aGFuZ2VkLCAxNDYgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgK
aW5kZXggMTEwMmU2YmFlNWQ1Li5lM2Q3MTVjMzFhYzkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdS5oCkBAIC0yOTEsNiArMjkxLDkgQEAgc3RydWN0IGFtZGdwdV9pcF9ibG9ja192ZXJz
aW9uIHsKIAljb25zdCBzdHJ1Y3QgYW1kX2lwX2Z1bmNzICpmdW5jczsKIH07CiAKKyNkZWZpbmUg
aHdfcmV2aXNpb24obWFqb3IsIG1pbm9yLCByZXZpc2lvbikgXAorCSgoKCh1aW50MzJfdCkgbWFq
b3IpIDw8IDE2KSB8ICgodWludDMyX3QpIG1pbm9yIDw8IDgpIHwgKCh1aW50MzJfdCkgcmV2aXNp
b24pKQorCiBzdHJ1Y3QgYW1kZ3B1X2lwX2Jsb2NrIHsKIAlzdHJ1Y3QgYW1kZ3B1X2lwX2Jsb2Nr
X3N0YXR1cyBzdGF0dXM7CiAJY29uc3Qgc3RydWN0IGFtZGdwdV9pcF9ibG9ja192ZXJzaW9uICp2
ZXJzaW9uOwpAQCAtNjMzLDYgKzYzNiwxMCBAQCBzdHJ1Y3QgYW1kZ3B1X2Z3X3ZyYW1fdXNhZ2Ug
ewogCXU2NCBzaXplOwogCXN0cnVjdCBhbWRncHVfYm8gKnJlc2VydmVkX2JvOwogCXZvaWQgKnZh
OworCisJLypvZmZzZXQgb24gdGhlIHRvcCBvZiB2cmFtLCB1c2VkIGFzIGMycCB3cml0ZSBidWZm
ZXIqLworCXU2NCBtZW1fdHJhaW5fZmJfbG9jOworCWJvb2wgbWVtX3RyYWluX3N1cHBvcnQ7CiB9
OwogCiAvKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0
b21iaW9zLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWJpb3MuYwpp
bmRleCAxYzlkNDBmOTdhOWIuLjcyMjMyZmNjZjYxYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21iaW9zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2F0b21iaW9zLmMKQEAgLTIwMzgsNiArMjAzOCwxMSBAQCBpbnQgYW1k
Z3B1X2F0b21iaW9zX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJaWYgKGFkZXYt
PmlzX2F0b21fZncpIHsKIAkJYW1kZ3B1X2F0b21maXJtd2FyZV9zY3JhdGNoX3JlZ3NfaW5pdChh
ZGV2KTsKIAkJYW1kZ3B1X2F0b21maXJtd2FyZV9hbGxvY2F0ZV9mYl9zY3JhdGNoKGFkZXYpOwor
CQlyZXQgPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF9tZW1fdHJhaW5fZmJfbG9jKGFkZXYpOwor
CQlpZiAocmV0KSB7CisJCQlEUk1fRVJST1IoIkZhaWxlZCB0byBnZXQgbWVtIHRyYWluIGZiIGxv
Y2F0aW9uLlxuIik7CisJCQlyZXR1cm4gcmV0OworCQl9CiAJfSBlbHNlIHsKIAkJYW1kZ3B1X2F0
b21iaW9zX3NjcmF0Y2hfcmVnc19pbml0KGFkZXYpOwogCQlhbWRncHVfYXRvbWJpb3NfYWxsb2Nh
dGVfZmJfc2NyYXRjaChhZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9hdG9tZmlybXdhcmUuYwppbmRleCAzOWZkOGFlNWE4MjIuLjFlYmY1ZTlhOWI3YiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuYwpA
QCAtMjcsNiArMjcsNyBAQAogI2luY2x1ZGUgImFtZGdwdV9hdG9tZmlybXdhcmUuaCIKICNpbmNs
dWRlICJhdG9tLmgiCiAjaW5jbHVkZSAiYXRvbWJpb3MuaCIKKyNpbmNsdWRlICJzb2MxNV9od19p
cC5oIgogCiBib29sIGFtZGdwdV9hdG9tZmlybXdhcmVfZ3B1X3N1cHBvcnRzX3ZpcnR1YWxpemF0
aW9uKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogewpAQCAtNDYyLDMgKzQ2MywxMzUgQEAg
aW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X2dmeF9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2KQogCX0KIAlyZXR1cm4gLUVJTlZBTDsKIH0KKworLyoKKyAqIENoZWNrIGlmIFZCSU9T
IHN1cHBvcnRzIEdERFI2IHRyYWluaW5nIGRhdGEgc2F2ZS9yZXN0b3JlCisgKi8KK3N0YXRpYyBi
b29sIGdkZHI2X21lbV90cmFpbl92Ymlvc19zdXBwb3J0KHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KQoreworCXVpbnQxNl90IGRhdGFfb2Zmc2V0OworCWludCBpbmRleDsKKworCWluZGV4ID0g
Z2V0X2luZGV4X2ludG9fbWFzdGVyX3RhYmxlKGF0b21fbWFzdGVyX2xpc3Rfb2ZfZGF0YV90YWJs
ZXNfdjJfMSwKKwkJCQkJICAgIGZpcm13YXJlaW5mbyk7CisJaWYgKGFtZGdwdV9hdG9tX3BhcnNl
X2RhdGFfaGVhZGVyKGFkZXYtPm1vZGVfaW5mby5hdG9tX2NvbnRleHQsIGluZGV4LCBOVUxMLAor
CQkJCQkgIE5VTEwsIE5VTEwsICZkYXRhX29mZnNldCkpIHsKKwkJc3RydWN0IGF0b21fZmlybXdh
cmVfaW5mb192M18xICpmaXJtd2FyZV9pbmZvID0KKwkJCShzdHJ1Y3QgYXRvbV9maXJtd2FyZV9p
bmZvX3YzXzEgKikoYWRldi0+bW9kZV9pbmZvLmF0b21fY29udGV4dC0+YmlvcyArCisJCQkJCQkJ
ICAgZGF0YV9vZmZzZXQpOworCisJCURSTV9ERUJVRygiYXRvbSBmaXJtd2FyZSBjYXBhYmlsaXR5
OjB4JTA4eC5cbiIsCisJCQkgIGxlMzJfdG9fY3B1KGZpcm13YXJlX2luZm8tPmZpcm13YXJlX2Nh
cGFiaWxpdHkpKTsKKworCQlpZiAobGUzMl90b19jcHUoZmlybXdhcmVfaW5mby0+ZmlybXdhcmVf
Y2FwYWJpbGl0eSkgJgorCQkgICAgQVRPTV9GSVJNV0FSRV9DQVBfRU5BQkxFXzJTVEFHRV9CSVNU
X1RSQUlOSU5HKQorCQkJcmV0dXJuIHRydWU7CisJfQorCisJcmV0dXJuIGZhbHNlOworfQorCitz
dGF0aWMgaW50IGdkZHI2X21lbV90cmFpbl9zdXBwb3J0KHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KQoreworCWludCByZXQ7CisJYm9vbCB2Ymlvc19zdXBwb3J0OworCXVpbnQzMl90IG1ham9y
LCBtaW5vciwgcmV2aXNpb24sIGh3X3Y7CisKKwlpZiAoIWFtZGdwdV9zcmlvdl92ZihhZGV2KSAm
JgorCSAgICBnZGRyNl9tZW1fdHJhaW5fdmJpb3Nfc3VwcG9ydChhZGV2KSkgeworCQl2Ymlvc19z
dXBwb3J0ID0gdHJ1ZTsKKwl9IGVsc2UgeworCQl2Ymlvc19zdXBwb3J0ID0gZmFsc2U7CisJfQor
CWFtZGdwdV9kaXNjb3ZlcnlfZ2V0X2lwX3ZlcnNpb24oYWRldiwgTVAwX0hXSUQsICZtYWpvciwg
Jm1pbm9yLCAmcmV2aXNpb24pOworCWh3X3YgPSBod19yZXZpc2lvbihtYWpvciwgbWlub3IsIHJl
dmlzaW9uKTsKKwkvKgorCSAqIHRyZWF0IDAgcmV2aXNpb24gYXMgYSBzcGVjaWFsIGNhc2Ugc2lu
Y2UgcmVnaXN0ZXIgZm9yIE1QMCBhbmQgTU1IVUIgaXMgbWlzc2luZworCSAqIGZvciBzb21lIE5h
dmkxMCBBMCwgcHJldmVudGluZyBkcml2ZXIgZnJvbSBkaXNjb3ZlcmluZyB0aGUgaHdpcCBpbmZv
cm1hdGlvbiBzaW5jZQorCSAqIG5vbmUgb2YgdGhlIGZ1bmN0aW9ucyB3aWxsIGJlIGluaXRpYWxp
emVkLCBpdCBzaG91bGQgbm90IGNhdXNlIGFueSBwcm9ibGVtcworCSAqLworCXN3aXRjaCAoaHdf
dikgeworCWNhc2UgaHdfcmV2aXNpb24oMTEsIDAsIDApOgorCWNhc2UgaHdfcmV2aXNpb24oMTEs
IDAsIDUpOgorCQlyZXQgPSB2Ymlvc19zdXBwb3J0OworCQlicmVhazsKKwlkZWZhdWx0OgorCQlp
ZiAodmJpb3Nfc3VwcG9ydCkgeworCQkJRFJNX0VSUk9SKCJtZW1vcnkgdHJhaW5pbmcgdmJpb3Mg
c3VwcG9ydHMgYnV0IHBzcCBodyglMDh4KSIKKwkJCQkgICIgZG9lc24ndCBzdXBwb3J0IVxuIiwg
aHdfdik7CisJCQlyZXQgPSAtMTsKKwkJfSBlbHNlIHsKKwkJCXJldCA9IDA7CisJCX0KKwkJYnJl
YWs7CisJfQorCisJRFJNX0RFQlVHKCJtcDAgaHdfdiAlMDh4LCByZXQ6JWQuXG4iLCBod192LCBy
ZXQpOworCXJldHVybiByZXQ7Cit9CisKK2ludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF9tZW1f
dHJhaW5fZmJfbG9jKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQoreworCXN0cnVjdCBhdG9t
X2NvbnRleHQgKmN0eCA9IGFkZXYtPm1vZGVfaW5mby5hdG9tX2NvbnRleHQ7CisJdW5zaWduZWQg
Y2hhciAqYmlvcyA9IGN0eC0+YmlvczsKKwlzdHJ1Y3QgdnJhbV9yZXNlcnZlX2Jsb2NrICpyZXNl
cnZlZF9ibG9jazsKKwlpbnQgaW5kZXgsIGJsb2NrX251bWJlcjsKKwl1aW50OF90IGZyZXYsIGNy
ZXY7CisJdWludDE2X3QgZGF0YV9vZmZzZXQsIHNpemU7CisJdWludDMyX3Qgc3RhcnRfYWRkcmVz
c19pbl9rYjsKKwl1aW50NjRfdCBvZmZzZXQ7CisJaW50IHJldDsKKworCWFkZXYtPmZ3X3ZyYW1f
dXNhZ2UubWVtX3RyYWluX3N1cHBvcnQgPSBmYWxzZTsKKwlyZXQgPSBnZGRyNl9tZW1fdHJhaW5f
c3VwcG9ydChhZGV2KTsKKwlpZiAocmV0ID09IC0xKQorCQlyZXR1cm4gLUVJTlZBTDsKKwllbHNl
IGlmIChyZXQgPT0gMCkKKwkJcmV0dXJuIDA7CisKKwlpbmRleCA9IGdldF9pbmRleF9pbnRvX21h
c3Rlcl90YWJsZShhdG9tX21hc3Rlcl9saXN0X29mX2RhdGFfdGFibGVzX3YyXzEsCisJCQkJCSAg
ICB2cmFtX3VzYWdlYnlmaXJtd2FyZSk7CisJcmV0ID0gYW1kZ3B1X2F0b21fcGFyc2VfZGF0YV9o
ZWFkZXIoY3R4LCBpbmRleCwgJnNpemUsICZmcmV2LCAmY3JldiwKKwkJCQkJICAgICZkYXRhX29m
ZnNldCk7CisJaWYgKHJldCA9PSAwKSB7CisJCURSTV9FUlJPUigicGFyc2UgZGF0YSBoZWFkZXIg
ZmFpbGVkLlxuIik7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCURSTV9ERUJVRygiYXRvbSBm
aXJtd2FyZSBjb21tb24gdGFibGUgaGVhZGVyIHNpemU6MHglMDR4LCBmcmV2OjB4JTAyeCwiCisJ
CSAgIiBjcmV2OjB4JTAyeCwgZGF0YV9vZmZzZXQ6MHglMDR4LlxuIiwgc2l6ZSwgZnJldiwgY3Jl
diwgZGF0YV9vZmZzZXQpOworCS8qIG9ubHkgc3VwcG9ydCAyLjErICovCisJaWYgKCgodWludDE2
X3QpZnJldiA8PCA4IHwgY3JldikgPCAweDAyMDEpIHsKKwkJRFJNX0VSUk9SKCJmcmV2OjB4JTAy
eCwgY3JldjoweCUwMnggPCAyLjEgIVxuIiwgZnJldiwgY3Jldik7CisJCXJldHVybiAtRUlOVkFM
OworCX0KKworCXJlc2VydmVkX2Jsb2NrID0gKHN0cnVjdCB2cmFtX3Jlc2VydmVfYmxvY2sgKikK
KwkJKGJpb3MgKyBkYXRhX29mZnNldCArIHNpemVvZihzdHJ1Y3QgYXRvbV9jb21tb25fdGFibGVf
aGVhZGVyKSk7CisJYmxvY2tfbnVtYmVyID0gKCh1bnNpZ25lZCBpbnQpc2l6ZSAtIHNpemVvZihz
dHJ1Y3QgYXRvbV9jb21tb25fdGFibGVfaGVhZGVyKSkKKwkJLyBzaXplb2Yoc3RydWN0IHZyYW1f
cmVzZXJ2ZV9ibG9jayk7CisJcmVzZXJ2ZWRfYmxvY2sgKz0gKGJsb2NrX251bWJlciA+IDApID8g
YmxvY2tfbnVtYmVyLTEgOiAwOworCURSTV9ERUJVRygiYmxvY2tfbnVtYmVyOjB4JTA0eCwgbGFz
dCBibG9jazogMHglMDh4a2Igc3osICVka2IgZncsICVka2IgZHJ2LlxuIiwKKwkJICBibG9ja19u
dW1iZXIsCisJCSAgbGUzMl90b19jcHUocmVzZXJ2ZWRfYmxvY2stPnN0YXJ0X2FkZHJlc3NfaW5f
a2IpLAorCQkgIGxlMTZfdG9fY3B1KHJlc2VydmVkX2Jsb2NrLT51c2VkX2J5X2Zpcm13YXJlX2lu
X2tiKSwKKwkJICBsZTE2X3RvX2NwdShyZXNlcnZlZF9ibG9jay0+dXNlZF9ieV9kcml2ZXJfaW5f
a2IpKTsKKwlpZiAocmVzZXJ2ZWRfYmxvY2stPnVzZWRfYnlfZmlybXdhcmVfaW5fa2IgPiAwKSB7
CisJCXN0YXJ0X2FkZHJlc3NfaW5fa2IgPSBsZTMyX3RvX2NwdShyZXNlcnZlZF9ibG9jay0+c3Rh
cnRfYWRkcmVzc19pbl9rYik7CisJCW9mZnNldCA9ICh1aW50NjRfdClzdGFydF9hZGRyZXNzX2lu
X2tiICogT05FX0s7CisJCWlmICgob2Zmc2V0ICYgKE9ORV9NRUcgLSAxKSkgPCAoNCAqIE9ORV9L
ICsgMSkgKSB7CisJCQlvZmZzZXQgLT0gT05FX01FRzsKKwkJfQorCisJCW9mZnNldCAmPSB+KE9O
RV9NRUcgLSAxKTsKKwkJYWRldi0+ZndfdnJhbV91c2FnZS5tZW1fdHJhaW5fZmJfbG9jID0gb2Zm
c2V0OworCQlhZGV2LT5md192cmFtX3VzYWdlLm1lbV90cmFpbl9zdXBwb3J0ID0gdHJ1ZTsKKwkJ
RFJNX0RFQlVHKCJtZW1fdHJhaW5fZmJfbG9jOjB4JTA5bGx4LlxuIiwgb2Zmc2V0KTsKKwkJcmV0
ID0gMDsKKwl9IGVsc2UgeworCQlEUk1fRVJST1IoInVzZWRfYnlfZmlybXdhcmVfaW5fa2IgaXMg
MCFcbiIpOworCQlyZXQgPSAtRUlOVkFMOworCX0KKworCXJldHVybiByZXQ7Cit9CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmggYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmgKaW5kZXggNTM0
NDlmYzdiYWY0Li5mODcxYWY1ZWE2ZjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmgKQEAgLTMxLDYgKzMxLDcgQEAgdm9pZCBhbWRncHVf
YXRvbWZpcm13YXJlX3NjcmF0Y2hfcmVnc19pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KTsKIGludCBhbWRncHVfYXRvbWZpcm13YXJlX2FsbG9jYXRlX2ZiX3NjcmF0Y2goc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpOwogaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5m
byhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAlpbnQgKnZyYW1fd2lkdGgsIGludCAqdnJh
bV90eXBlLCBpbnQgKnZyYW1fdmVuZG9yKTsKK2ludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF9t
ZW1fdHJhaW5fZmJfbG9jKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIGludCBhbWRncHVf
YXRvbWZpcm13YXJlX2dldF9jbG9ja19pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsK
IGludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF9nZnhfaW5mbyhzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldik7CiBib29sIGFtZGdwdV9hdG9tZmlybXdhcmVfbWVtX2VjY19zdXBwb3J0ZWQoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2FtZC1nZng=
