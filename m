Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 05902BE6FE
	for <lists+amd-gfx@lfdr.de>; Wed, 25 Sep 2019 23:22:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 875597A0DA;
	Wed, 25 Sep 2019 21:22:43 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr690068.outbound.protection.outlook.com [40.107.69.68])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E4D8A7A0DA
 for <amd-gfx@lists.freedesktop.org>; Wed, 25 Sep 2019 21:22:42 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=hAsDG+gchhkNFUD4U7yF8lGwZvNFjnVBK9ljDxq7FTSzauBp4qV7JWe3atDMjO7AmUhrn5OAComIwsc1kIyRi2CO9gseD4WVUa7QK+9HD/r8+Bl9IjdEpHyGuIf+0NZ3vWg85FuNEdnRuMsPv8a7sjcdcJVTlR5GLc3qJ7eVrd3CQwm1C2T3rjaqdd0LZ1JuTCMxH+3nja3zdLU/1Atdm/94MhCKR3Xm60ZvYbc99EJ7AKobqh6+zZuKgLwUAyIED0q9ELnB+OaDMeZb96Cu93rWt32sOwX7RdPc6AoexsMNLRYYgiMxwMeE89nmYx272nSP+R4ypi/Ec/kTlIR8eg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=gWJR2l/k8rXYWp/tndKnIJyZ4pFo4MKN58l8uB+WFO0=;
 b=cO5YVhxloc21jY40IfivPZXL5/lJOU9Ulj9RK0UmGQ6jahYS6Q4qM4VwDt3J+Hou2+OyIn5SqZpTPNSSifSIWllU7usVtO0Mkg39gr6WuO8qTmMsNHtfO88MRh808dNB/y29kuV66qfKydefr1k06teZi5OabPTk7zWvKTYX0pu0pEYoc5tn6gRdnRrz99ioRsHERKTFIHEV/UuOjskNhBRp6gxB2sf+wm9zGDDHI1jxXXtl8fEhQ0zzUBpM9zZDhNcXhIEzwUBRVFdikaGpXfyAW+II0kpTciD7T1bG0EeP5TqDD9BZcQL2CKk7Dwm7n+ZhoW0qpDg7nloJOokzXA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM6PR12MB2778.namprd12.prod.outlook.com (20.176.114.145) by
 DM6PR12MB2780.namprd12.prod.outlook.com (20.176.118.95) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2284.24; Wed, 25 Sep 2019 21:22:38 +0000
Received: from DM6PR12MB2778.namprd12.prod.outlook.com
 ([fe80::81aa:9739:a2c2:12fa]) by DM6PR12MB2778.namprd12.prod.outlook.com
 ([fe80::81aa:9739:a2c2:12fa%4]) with mapi id 15.20.2284.023; Wed, 25 Sep 2019
 21:22:38 +0000
From: "Zhao, Yong" <Yong.Zhao@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: [PATCH] drm/amdkfd: Use hex print format for pasid
Thread-Topic: [PATCH] drm/amdkfd: Use hex print format for pasid
Thread-Index: AQHVc+dbvhV5njBd+km0ieGl458YnA==
Date: Wed, 25 Sep 2019 21:22:38 +0000
Message-ID: <20190925212225.10797-1-Yong.Zhao@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: YTXPR0101CA0004.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b00::17) To DM6PR12MB2778.namprd12.prod.outlook.com
 (2603:10b6:5:50::17)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [165.204.55.251]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 2c610c4a-a39b-4de5-aa46-08d741fe7d79
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600167)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:DM6PR12MB2780; 
x-ms-traffictypediagnostic: DM6PR12MB2780:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM6PR12MB278093CD8079DA479C5D1A27F0870@DM6PR12MB2780.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:439;
x-forefront-prvs: 01713B2841
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(136003)(39860400002)(346002)(366004)(396003)(189003)(199004)(2616005)(6512007)(5640700003)(6506007)(26005)(186003)(4326008)(386003)(486006)(256004)(7736002)(81166006)(305945005)(8676002)(5660300002)(476003)(52116002)(2501003)(99286004)(6916009)(2906002)(6436002)(25786009)(66556008)(1076003)(102836004)(2351001)(66446008)(36756003)(45080400002)(3846002)(64756008)(6116002)(316002)(81156014)(14444005)(6486002)(30864003)(71200400001)(71190400001)(66066001)(50226002)(66476007)(8936002)(66946007)(86362001)(14454004)(478600001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB2780;
 H:DM6PR12MB2778.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: 8VKzNuC6YTfO0+sYmpM5MoUz81qe295IheOHtGpvq1zK0BRtm+aCKc84X6qO4O1R99/xnRe69DI26zPU9N8P9UK4vYOMjPmlcB7CFa3dZ5KRueIiqBKzcl4jDBqvGLUDI1NP7l5QoS6cjn7idRECVAHEc84wnMj8eVOHndJJ582rWIeTcwN65TRXqHpOT8b6qye3eY0U1U+BKlabz21CxCJDpjSY9SxNoiMS/hJgfmNX5wJD9+ErlVM8DJ5EJ4O+gtdVT8U0VPrKrO0mtx1TwrxDgbUlJSSFFDbi6m7UgDQus6Pr5NYY49gKxrOTvxUlmDfe6/FG22IXKlY6+WXnM4rWgQbBdRFCyhBPcGeUBwwqEt7xIEe0AwP8czD+x00XZ9Rx6aQYWuZqytrpyZG9vZN1zOujieZr8T/p/veVCEc=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 2c610c4a-a39b-4de5-aa46-08d741fe7d79
X-MS-Exchange-CrossTenant-originalarrivaltime: 25 Sep 2019 21:22:38.0277 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: S87QhRrXqromi/5mu/sPnv4xLIU36nkLiJP6IqRaNeitLrpJIrfPsQYZ4JCMcent
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB2780
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=gWJR2l/k8rXYWp/tndKnIJyZ4pFo4MKN58l8uB+WFO0=;
 b=DgOFX4iZ3wbydSGZiq/Ss2k90ZF1RJM5s+OY8RLd0zRS81LVtCVD228roDRJqOCdngFs3WXAd/9lg2UssEz3b9Bpfpnp5dcSithLW0m/eIjFBtpT40dlflyrE1DAzMAxGoZVrArHb0Xe3HtAwZRMQFjqBYr2hTE2qS5gnTMBDjc=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Yong.Zhao@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Zhao, Yong" <Yong.Zhao@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U2luY2UgS0ZEIHBhc2lkIHN0YXJ0cyBmcm9tIDB4ODAwMCAoMzI3NjggaW4gZGVjaW1hbCksIGl0
IGlzIGJldHRlcgpwZXJjZWl2ZWQgYXMgYSBoZXggbnVtYmVyLgoKQ2hhbmdlLUlkOiBJNTY1ZmUz
OWY2OWU3ODI3NDlhNjk3ZjE4NTQ1Nzc1MzU0YzdhODlmOApTaWduZWQtb2ZmLWJ5OiBZb25nIFpo
YW8gPFlvbmcuWmhhb0BhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tm
ZF9jaGFyZGV2LmMgICAgICB8IDEyICsrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfZGJnZGV2LmMgICAgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfZGJnbWdyLmMgICAgICAgfCAgOCArKysrLS0tLQogLi4uL2RybS9hbWQvYW1ka2Zk
L2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jIHwgMTIgKysrKystLS0tLS0KIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1ka2ZkL2tmZF9kb29yYmVsbC5jICAgICB8ICA4ICsrKystLS0tCiBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZXZlbnRzLmMgICAgICAgfCAxMiArKysrKy0tLS0tLQog
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2lvbW11LmMgICAgICAgIHwgIDYgKysrLS0t
CiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzcy5jICAgICAgfCAyMCArKysr
KysrKystLS0tLS0tLS0tCiAuLi4vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzc19xdWV1ZV9tYW5hZ2Vy
LmMgICAgfCAgNiArKystLS0KIDkgZmlsZXMgY2hhbmdlZCwgNDQgaW5zZXJ0aW9ucygrKSwgNDQg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2Zk
X2NoYXJkZXYuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMKaW5k
ZXggZTVmZjc3Mjg2MmNkLi4xMDZkNDVhZTdjOWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRr
ZmQva2ZkX2NoYXJkZXYuYwpAQCAtMzAxLDcgKzMwMSw3IEBAIHN0YXRpYyBpbnQga2ZkX2lvY3Rs
X2NyZWF0ZV9xdWV1ZShzdHJ1Y3QgZmlsZSAqZmlsZXAsIHN0cnVjdCBrZmRfcHJvY2VzcyAqcCwK
IAkJZ290byBlcnJfYmluZF9wcm9jZXNzOwogCX0KIAotCXByX2RlYnVnKCJDcmVhdGluZyBxdWV1
ZSBmb3IgUEFTSUQgJWQgb24gZ3B1IDB4JXhcbiIsCisJcHJfZGVidWcoIkNyZWF0aW5nIHF1ZXVl
IGZvciBQQVNJRCAweCV4IG9uIGdwdSAweCV4XG4iLAogCQkJcC0+cGFzaWQsCiAJCQlkZXYtPmlk
KTsKIApAQCAtMzUxLDcgKzM1MSw3IEBAIHN0YXRpYyBpbnQga2ZkX2lvY3RsX2Rlc3Ryb3lfcXVl
dWUoc3RydWN0IGZpbGUgKmZpbHAsIHN0cnVjdCBrZmRfcHJvY2VzcyAqcCwKIAlpbnQgcmV0dmFs
OwogCXN0cnVjdCBrZmRfaW9jdGxfZGVzdHJveV9xdWV1ZV9hcmdzICphcmdzID0gZGF0YTsKIAot
CXByX2RlYnVnKCJEZXN0cm95aW5nIHF1ZXVlIGlkICVkIGZvciBwYXNpZCAlZFxuIiwKKwlwcl9k
ZWJ1ZygiRGVzdHJveWluZyBxdWV1ZSBpZCAlZCBmb3IgcGFzaWQgMHgleFxuIiwKIAkJCQlhcmdz
LT5xdWV1ZV9pZCwKIAkJCQlwLT5wYXNpZCk7CiAKQEAgLTM5Nyw3ICszOTcsNyBAQCBzdGF0aWMg
aW50IGtmZF9pb2N0bF91cGRhdGVfcXVldWUoc3RydWN0IGZpbGUgKmZpbHAsIHN0cnVjdCBrZmRf
cHJvY2VzcyAqcCwKIAlwcm9wZXJ0aWVzLnF1ZXVlX3BlcmNlbnQgPSBhcmdzLT5xdWV1ZV9wZXJj
ZW50YWdlOwogCXByb3BlcnRpZXMucHJpb3JpdHkgPSBhcmdzLT5xdWV1ZV9wcmlvcml0eTsKIAot
CXByX2RlYnVnKCJVcGRhdGluZyBxdWV1ZSBpZCAlZCBmb3IgcGFzaWQgJWRcbiIsCisJcHJfZGVi
dWcoIlVwZGF0aW5nIHF1ZXVlIGlkICVkIGZvciBwYXNpZCAweCV4XG4iLAogCQkJYXJncy0+cXVl
dWVfaWQsIHAtPnBhc2lkKTsKIAogCW11dGV4X2xvY2soJnAtPm11dGV4KTsKQEAgLTg1NCw3ICs4
NTQsNyBAQCBzdGF0aWMgaW50IGtmZF9pb2N0bF9nZXRfcHJvY2Vzc19hcGVydHVyZXMoc3RydWN0
IGZpbGUgKmZpbHAsCiAJc3RydWN0IGtmZF9wcm9jZXNzX2RldmljZV9hcGVydHVyZXMgKnBBcGVy
dHVyZTsKIAlzdHJ1Y3Qga2ZkX3Byb2Nlc3NfZGV2aWNlICpwZGQ7CiAKLQlkZXZfZGJnKGtmZF9k
ZXZpY2UsICJnZXQgYXBlcnR1cmVzIGZvciBQQVNJRCAlZCIsIHAtPnBhc2lkKTsKKwlkZXZfZGJn
KGtmZF9kZXZpY2UsICJnZXQgYXBlcnR1cmVzIGZvciBQQVNJRCAweCV4IiwgcC0+cGFzaWQpOwog
CiAJYXJncy0+bnVtX29mX25vZGVzID0gMDsKIApAQCAtOTEyLDcgKzkxMiw3IEBAIHN0YXRpYyBp
bnQga2ZkX2lvY3RsX2dldF9wcm9jZXNzX2FwZXJ0dXJlc19uZXcoc3RydWN0IGZpbGUgKmZpbHAs
CiAJdWludDMyX3Qgbm9kZXMgPSAwOwogCWludCByZXQ7CiAKLQlkZXZfZGJnKGtmZF9kZXZpY2Us
ICJnZXQgYXBlcnR1cmVzIGZvciBQQVNJRCAlZCIsIHAtPnBhc2lkKTsKKwlkZXZfZGJnKGtmZF9k
ZXZpY2UsICJnZXQgYXBlcnR1cmVzIGZvciBQQVNJRCAweCV4IiwgcC0+cGFzaWQpOwogCiAJaWYg
KGFyZ3MtPm51bV9vZl9ub2RlcyA9PSAwKSB7CiAJCS8qIFJldHVybiBudW1iZXIgb2Ygbm9kZXMs
IHNvIHRoYXQgdXNlciBzcGFjZSBjYW4gYWxsb2FjYXRlCkBAIC0zMDYzLDcgKzMwNjMsNyBAQCBz
dGF0aWMgaW50IGtmZF9tbWlvX21tYXAoc3RydWN0IGtmZF9kZXYgKmRldiwgc3RydWN0IGtmZF9w
cm9jZXNzICpwcm9jZXNzLAogCiAJdm1hLT52bV9wYWdlX3Byb3QgPSBwZ3Byb3Rfbm9uY2FjaGVk
KHZtYS0+dm1fcGFnZV9wcm90KTsKIAotCXByX2RlYnVnKCJQcm9jZXNzICVkIG1hcHBpbmcgbW1p
byBwYWdlXG4iCisJcHJfZGVidWcoInBhc2lkIDB4JXggbWFwcGluZyBtbWlvIHBhZ2VcbiIKIAkJ
ICIgICAgIHRhcmdldCB1c2VyIGFkZHJlc3MgPT0gMHglMDhsbFhcbiIKIAkJICIgICAgIHBoeXNp
Y2FsIGFkZHJlc3MgICAgPT0gMHglMDhsbFhcbiIKIAkJICIgICAgIHZtX2ZsYWdzICAgICAgICAg
ICAgPT0gMHglMDRsWFxuIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQv
a2ZkX2RiZ2Rldi5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RiZ2Rldi5jCmlu
ZGV4IDM2MzVlMGI0YjNiNy4uNDkyOTUxY2FkMTQzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfZGJnZGV2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRr
ZmQva2ZkX2RiZ2Rldi5jCkBAIC04MDAsNyArODAwLDcgQEAgaW50IGRiZ2Rldl93YXZlX3Jlc2V0
X3dhdmVmcm9udHMoc3RydWN0IGtmZF9kZXYgKmRldiwgc3RydWN0IGtmZF9wcm9jZXNzICpwKQog
CQkJCShkZXYtPmtnZCwgdm1pZCkpIHsKIAkJCWlmIChkZXYtPmtmZDJrZ2QtPmdldF9hdGNfdm1p
ZF9wYXNpZF9tYXBwaW5nX3Bhc2lkCiAJCQkJCShkZXYtPmtnZCwgdm1pZCkgPT0gcC0+cGFzaWQp
IHsKLQkJCQlwcl9kZWJ1ZygiS2lsbGluZyB3YXZlIGZyb250cyBvZiB2bWlkICVkIGFuZCBwYXNp
ZCAlZFxuIiwKKwkJCQlwcl9kZWJ1ZygiS2lsbGluZyB3YXZlIGZyb250cyBvZiB2bWlkICVkIGFu
ZCBwYXNpZCAweCV4XG4iLAogCQkJCQkJdm1pZCwgcC0+cGFzaWQpOwogCQkJCWJyZWFrOwogCQkJ
fQpAQCAtODA4LDcgKzgwOCw3IEBAIGludCBkYmdkZXZfd2F2ZV9yZXNldF93YXZlZnJvbnRzKHN0
cnVjdCBrZmRfZGV2ICpkZXYsIHN0cnVjdCBrZmRfcHJvY2VzcyAqcCkKIAl9CiAKIAlpZiAodm1p
ZCA+IGxhc3Rfdm1pZF90b19zY2FuKSB7Ci0JCXByX2VycigiRGlkbid0IGZpbmQgdm1pZCBmb3Ig
cGFzaWQgJWRcbiIsIHAtPnBhc2lkKTsKKwkJcHJfZXJyKCJEaWRuJ3QgZmluZCB2bWlkIGZvciBw
YXNpZCAweCV4XG4iLCBwLT5wYXNpZCk7CiAJCXJldHVybiAtRUZBVUxUOwogCX0KIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RiZ21nci5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RiZ21nci5jCmluZGV4IDlkNGFmOTYxYzVkMS4uOWJmYTUw
NjMzNjU0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGJnbWdy
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RiZ21nci5jCkBAIC05Niw3
ICs5Niw3IEBAIGJvb2wga2ZkX2RiZ21ncl9jcmVhdGUoc3RydWN0IGtmZF9kYmdtZ3IgKipwcG1n
ciwgc3RydWN0IGtmZF9kZXYgKnBkZXYpCiBsb25nIGtmZF9kYmdtZ3JfcmVnaXN0ZXIoc3RydWN0
IGtmZF9kYmdtZ3IgKnBtZ3IsIHN0cnVjdCBrZmRfcHJvY2VzcyAqcCkKIHsKIAlpZiAocG1nci0+
cGFzaWQgIT0gMCkgewotCQlwcl9kZWJ1ZygiSC9XIGRlYnVnZ2VyIGlzIGFscmVhZHkgYWN0aXZl
IHVzaW5nIHBhc2lkICVkXG4iLAorCQlwcl9kZWJ1ZygiSC9XIGRlYnVnZ2VyIGlzIGFscmVhZHkg
YWN0aXZlIHVzaW5nIHBhc2lkIDB4JXhcbiIsCiAJCQkJcG1nci0+cGFzaWQpOwogCQlyZXR1cm4g
LUVCVVNZOwogCX0KQEAgLTExNyw3ICsxMTcsNyBAQCBsb25nIGtmZF9kYmdtZ3JfdW5yZWdpc3Rl
cihzdHJ1Y3Qga2ZkX2RiZ21nciAqcG1nciwgc3RydWN0IGtmZF9wcm9jZXNzICpwKQogewogCS8q
IElzIHRoZSByZXF1ZXN0cyBjb21pbmcgZnJvbSB0aGUgYWxyZWFkeSByZWdpc3RlcmVkIHByb2Nl
c3M/ICovCiAJaWYgKHBtZ3ItPnBhc2lkICE9IHAtPnBhc2lkKSB7Ci0JCXByX2RlYnVnKCJIL1cg
ZGVidWdnZXIgaXMgbm90IHJlZ2lzdGVyZWQgYnkgY2FsbGluZyBwYXNpZCAlZFxuIiwKKwkJcHJf
ZGVidWcoIkgvVyBkZWJ1Z2dlciBpcyBub3QgcmVnaXN0ZXJlZCBieSBjYWxsaW5nIHBhc2lkIDB4
JXhcbiIsCiAJCQkJcC0+cGFzaWQpOwogCQlyZXR1cm4gLUVJTlZBTDsKIAl9CkBAIC0xMzQsNyAr
MTM0LDcgQEAgbG9uZyBrZmRfZGJnbWdyX3dhdmVfY29udHJvbChzdHJ1Y3Qga2ZkX2RiZ21nciAq
cG1nciwKIHsKIAkvKiBJcyB0aGUgcmVxdWVzdHMgY29taW5nIGZyb20gdGhlIGFscmVhZHkgcmVn
aXN0ZXJlZCBwcm9jZXNzPyAqLwogCWlmIChwbWdyLT5wYXNpZCAhPSB3YWNfaW5mby0+cHJvY2Vz
cy0+cGFzaWQpIHsKLQkJcHJfZGVidWcoIkgvVyBkZWJ1Z2dlciBzdXBwb3J0IHdhcyBub3QgcmVn
aXN0ZXJlZCBmb3IgcmVxdWVzdGVyIHBhc2lkICVkXG4iLAorCQlwcl9kZWJ1ZygiSC9XIGRlYnVn
Z2VyIHN1cHBvcnQgd2FzIG5vdCByZWdpc3RlcmVkIGZvciByZXF1ZXN0ZXIgcGFzaWQgMHgleFxu
IiwKIAkJCQl3YWNfaW5mby0+cHJvY2Vzcy0+cGFzaWQpOwogCQlyZXR1cm4gLUVJTlZBTDsKIAl9
CkBAIC0xNDcsNyArMTQ3LDcgQEAgbG9uZyBrZmRfZGJnbWdyX2FkZHJlc3Nfd2F0Y2goc3RydWN0
IGtmZF9kYmdtZ3IgKnBtZ3IsCiB7CiAJLyogSXMgdGhlIHJlcXVlc3RzIGNvbWluZyBmcm9tIHRo
ZSBhbHJlYWR5IHJlZ2lzdGVyZWQgcHJvY2Vzcz8gKi8KIAlpZiAocG1nci0+cGFzaWQgIT0gYWR3
X2luZm8tPnByb2Nlc3MtPnBhc2lkKSB7Ci0JCXByX2RlYnVnKCJIL1cgZGVidWdnZXIgc3VwcG9y
dCB3YXMgbm90IHJlZ2lzdGVyZWQgZm9yIHJlcXVlc3RlciBwYXNpZCAlZFxuIiwKKwkJcHJfZGVi
dWcoIkgvVyBkZWJ1Z2dlciBzdXBwb3J0IHdhcyBub3QgcmVnaXN0ZXJlZCBmb3IgcmVxdWVzdGVy
IHBhc2lkIDB4JXhcbiIsCiAJCQkJYWR3X2luZm8tPnByb2Nlc3MtPnBhc2lkKTsKIAkJcmV0dXJu
IC1FSU5WQUw7CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2Zk
X2RldmljZV9xdWV1ZV9tYW5hZ2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRf
ZGV2aWNlX3F1ZXVlX21hbmFnZXIuYwppbmRleCAzNzIyNDMxY2NlNzkuLmU3ZjBhMzJlMGU0NCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9t
YW5hZ2VyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1
ZV9tYW5hZ2VyLmMKQEAgLTYzMCw3ICs2MzAsNyBAQCBzdGF0aWMgaW50IHN1c3BlbmRfc2luZ2xl
X3F1ZXVlKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtLAogewogCWludCByZXR2YWwg
PSAwOwogCi0JcHJfZGVidWcoIlN1c3BlbmRpbmcgUEFTSUQgJXUgcXVldWUgWyVpXVxuIiwKKwlw
cl9kZWJ1ZygiU3VzcGVuZGluZyBQQVNJRCAweCV4IHF1ZXVlIFslaV1cbiIsCiAJCQlwZGQtPnBy
b2Nlc3MtPnBhc2lkLAogCQkJcS0+cHJvcGVydGllcy5xdWV1ZV9pZCk7CiAKQEAgLTY2Nyw3ICs2
NjcsNyBAQCBzdGF0aWMgaW50IHJlc3VtZV9zaW5nbGVfcXVldWUoc3RydWN0IGRldmljZV9xdWV1
ZV9tYW5hZ2VyICpkcW0sCiAJLyogUmV0cmlldmUgUEQgYmFzZSAqLwogCXBkX2Jhc2UgPSBhbWRn
cHVfYW1ka2ZkX2dwdXZtX2dldF9wcm9jZXNzX3BhZ2VfZGlyKHBkZC0+dm0pOwogCi0JcHJfZGVi
dWcoIlJlc3RvcmluZyBmcm9tIHN1c3BlbmQgUEFTSUQgJXUgcXVldWUgWyVpXVxuIiwKKwlwcl9k
ZWJ1ZygiUmVzdG9yaW5nIGZyb20gc3VzcGVuZCBQQVNJRCAweCV4IHF1ZXVlIFslaV1cbiIsCiAJ
CQkgICAgcGRkLT5wcm9jZXNzLT5wYXNpZCwKIAkJCSAgICBxLT5wcm9wZXJ0aWVzLnF1ZXVlX2lk
KTsKIApAQCAtNjk3LDcgKzY5Nyw3IEBAIHN0YXRpYyBpbnQgZXZpY3RfcHJvY2Vzc19xdWV1ZXNf
bm9jcHNjaChzdHJ1Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRxbSwKIAkJZ290byBvdXQ7CiAK
IAlwZGQgPSBxcGRfdG9fcGRkKHFwZCk7Ci0JcHJfaW5mb19yYXRlbGltaXRlZCgiRXZpY3Rpbmcg
UEFTSUQgJXUgcXVldWVzXG4iLAorCXByX2luZm9fcmF0ZWxpbWl0ZWQoIkV2aWN0aW5nIFBBU0lE
IDB4JXggcXVldWVzXG4iLAogCQkJICAgIHBkZC0+cHJvY2Vzcy0+cGFzaWQpOwogCiAJLyogTWFy
ayBhbGwgcXVldWVzIGFzIGV2aWN0ZWQuIERlYWN0aXZhdGUgYWxsIGFjdGl2ZSBxdWV1ZXMgb24K
QEAgLTc0Myw3ICs3NDMsNyBAQCBzdGF0aWMgaW50IGV2aWN0X3Byb2Nlc3NfcXVldWVzX2Nwc2No
KHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtLAogCQlnb3RvIG91dDsKIAogCXBkZCA9
IHFwZF90b19wZGQocXBkKTsKLQlwcl9pbmZvX3JhdGVsaW1pdGVkKCJFdmljdGluZyBQQVNJRCAl
dSBxdWV1ZXNcbiIsCisJcHJfaW5mb19yYXRlbGltaXRlZCgiRXZpY3RpbmcgUEFTSUQgMHgleCBx
dWV1ZXNcbiIsCiAJCQkgICAgcGRkLT5wcm9jZXNzLT5wYXNpZCk7CiAKIAkvKiBNYXJrIGFsbCBx
dWV1ZXMgYXMgZXZpY3RlZC4gRGVhY3RpdmF0ZSBhbGwgYWN0aXZlIHF1ZXVlcyBvbgpAQCAtNzk0
LDcgKzc5NCw3IEBAIHN0YXRpYyBpbnQgcmVzdG9yZV9wcm9jZXNzX3F1ZXVlc19ub2Nwc2NoKHN0
cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFtLAogCQlnb3RvIG91dDsKIAl9CiAKLQlwcl9p
bmZvX3JhdGVsaW1pdGVkKCJSZXN0b3JpbmcgUEFTSUQgJXUgcXVldWVzXG4iLAorCXByX2luZm9f
cmF0ZWxpbWl0ZWQoIlJlc3RvcmluZyBQQVNJRCAweCV4IHF1ZXVlc1xuIiwKIAkJCSAgICBwZGQt
PnByb2Nlc3MtPnBhc2lkKTsKIAogCS8qIFVwZGF0ZSBQRCBCYXNlIGluIFFQRCAqLwpAQCAtODcw
LDcgKzg3MCw3IEBAIHN0YXRpYyBpbnQgcmVzdG9yZV9wcm9jZXNzX3F1ZXVlc19jcHNjaChzdHJ1
Y3QgZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRxbSwKIAkJZ290byBvdXQ7CiAJfQogCi0JcHJfaW5m
b19yYXRlbGltaXRlZCgiUmVzdG9yaW5nIFBBU0lEICV1IHF1ZXVlc1xuIiwKKwlwcl9pbmZvX3Jh
dGVsaW1pdGVkKCJSZXN0b3JpbmcgUEFTSUQgMHgleCBxdWV1ZXNcbiIsCiAJCQkgICAgcGRkLT5w
cm9jZXNzLT5wYXNpZCk7CiAKIAkvKiBVcGRhdGUgUEQgQmFzZSBpbiBRUEQgKi8KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kb29yYmVsbC5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRrZmQva2ZkX2Rvb3JiZWxsLmMKaW5kZXggNmFkMGE3YmM1MTc1Li41ZWZm
Y2ZmMDllOWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kb29y
YmVsbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kb29yYmVsbC5jCkBA
IC0xNTgsNyArMTU4LDcgQEAgc3RhdGljIHZtX2ZhdWx0X3Qga2ZkX2Rvb3JiZWxsX3ZtX2ZhdWx0
KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQogCWlmICghcGRkKQogCQlyZXR1cm4gVk1fRkFVTFRfU0lH
QlVTOwogCi0JcHJfZGVidWcoIlByb2Nlc3MgJWQgZG9vcmJlbGwgdm0gcGFnZSBmYXVsdFxuIiwg
cGRkLT5wcm9jZXNzLT5wYXNpZCk7CisJcHJfZGVidWcoInBhc2lkIDB4JXggZG9vcmJlbGwgdm0g
cGFnZSBmYXVsdFxuIiwgcGRkLT5wcm9jZXNzLT5wYXNpZCk7CiAKIAlrZmRfcHJvY2Vzc19yZW1h
cF9kb29yYmVsbHNfbG9ja2VkKHBkZC0+cHJvY2Vzcyk7CiAKQEAgLTIyMCwxMiArMjIwLDEyIEBA
IGludCBrZmRfZG9vcmJlbGxfcmVtYXAoc3RydWN0IGtmZF9wcm9jZXNzX2RldmljZSAqcGRkKQog
CXZtYSA9IHBkZC0+cXBkLmRvb3JiZWxsX3ZtYTsKIAlzaXplID0ga2ZkX2Rvb3JiZWxsX3Byb2Nl
c3Nfc2xpY2UocGRkLT5kZXYpOwogCi0JcHJfZGVidWcoIlByb2Nlc3MgJWQgcmVtYXAgZG9vcmJl
bGwgMHglbHhcbiIsIHByb2Nlc3MtPnBhc2lkLAorCXByX2RlYnVnKCJwYXNpZCAweCV4IHJlbWFw
IGRvb3JiZWxsIDB4JWx4XG4iLCBwcm9jZXNzLT5wYXNpZCwKIAkJdm1hLT52bV9zdGFydCk7CiAK
IAlyZXQgPSB2bV9pb21hcF9tZW1vcnkodm1hLCBhZGRyZXNzLCBzaXplKTsKIAlpZiAocmV0KQot
CQlwcl9lcnIoIlByb2Nlc3MgJWQgZmFpbGVkIHRvIHJlbWFwIGRvb3JiZWxsIDB4JWx4XG4iLAor
CQlwcl9lcnIoInBhc2lkIDB4JXggZmFpbGVkIHRvIHJlbWFwIGRvb3JiZWxsIDB4JWx4XG4iLAog
CQkJcHJvY2Vzcy0+cGFzaWQsIHZtYS0+dm1fc3RhcnQpOwogCiBvdXRfdW5sb2NrOgpAQCAtMjU3
LDcgKzI1Nyw3IEBAIGludCBrZmRfZG9vcmJlbGxfbW1hcChzdHJ1Y3Qga2ZkX2RldiAqZGV2LCBz
dHJ1Y3Qga2ZkX3Byb2Nlc3MgKnByb2Nlc3MsCiAKIAl2bWEtPnZtX3BhZ2VfcHJvdCA9IHBncHJv
dF9ub25jYWNoZWQodm1hLT52bV9wYWdlX3Byb3QpOwogCi0JcHJfZGVidWcoIlByb2Nlc3MgJWQg
bWFwcGluZyBkb29yYmVsbCBwYWdlXG4iCisJcHJfZGVidWcoInBhc2lkIDB4JXggbWFwcGluZyBk
b29yYmVsbCBwYWdlXG4iCiAJCSAiICAgICB0YXJnZXQgdXNlciBhZGRyZXNzID09IDB4JTA4bGxY
XG4iCiAJCSAiICAgICBwaHlzaWNhbCBhZGRyZXNzICAgID09IDB4JTA4bGxYXG4iCiAJCSAiICAg
ICB2bV9mbGFncyAgICAgICAgICAgID09IDB4JTA0bFhcbiIKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9ldmVudHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
a2ZkL2tmZF9ldmVudHMuYwppbmRleCAzOGE5OWJhOTFhODguLjZiYWY3OGM5MjQ1ZiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2V2ZW50cy5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9ldmVudHMuYwpAQCAtODUyLDggKzg1Miw4IEBAIHN0
YXRpYyB2b2lkIGxvb2t1cF9ldmVudHNfYnlfdHlwZV9hbmRfc2lnbmFsKHN0cnVjdCBrZmRfcHJv
Y2VzcyAqcCwKIAogCWlmICh0eXBlID09IEtGRF9FVkVOVF9UWVBFX01FTU9SWSkgewogCQlkZXZf
d2FybihrZmRfZGV2aWNlLAotCQkJIlNlbmRpbmcgU0lHU0VHViB0byBIU0EgUHJvY2VzcyB3aXRo
IFBJRCAlZCAiLAotCQkJCXAtPmxlYWRfdGhyZWFkLT5waWQpOworCQkJIlNlbmRpbmcgU0lHU0VH
ViB0byBwcm9jZXNzICVkIChwYXNpZCAweCV4KSIsCisJCQkJcC0+bGVhZF90aHJlYWQtPnBpZCwg
cC0+cGFzaWQpOwogCQlzZW5kX3NpZyhTSUdTRUdWLCBwLT5sZWFkX3RocmVhZCwgMCk7CiAJfQog
CkBAIC04NjEsMTMgKzg2MSwxMyBAQCBzdGF0aWMgdm9pZCBsb29rdXBfZXZlbnRzX2J5X3R5cGVf
YW5kX3NpZ25hbChzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnAsCiAJaWYgKHNlbmRfc2lnbmFsKSB7CiAJ
CWlmIChzZW5kX3NpZ3Rlcm0pIHsKIAkJCWRldl93YXJuKGtmZF9kZXZpY2UsCi0JCQkJIlNlbmRp
bmcgU0lHVEVSTSB0byBIU0EgUHJvY2VzcyB3aXRoIFBJRCAlZCAiLAotCQkJCQlwLT5sZWFkX3Ro
cmVhZC0+cGlkKTsKKwkJCQkiU2VuZGluZyBTSUdURVJNIHRvIHByb2Nlc3MgJWQgKHBhc2lkIDB4
JXgpIiwKKwkJCQkJcC0+bGVhZF90aHJlYWQtPnBpZCwgcC0+cGFzaWQpOwogCQkJc2VuZF9zaWco
U0lHVEVSTSwgcC0+bGVhZF90aHJlYWQsIDApOwogCQl9IGVsc2UgewogCQkJZGV2X2VycihrZmRf
ZGV2aWNlLAotCQkJCSJIU0EgUHJvY2VzcyAoUElEICVkKSBnb3QgdW5oYW5kbGVkIGV4Y2VwdGlv
biIsCi0JCQkJcC0+bGVhZF90aHJlYWQtPnBpZCk7CisJCQkJIlByb2Nlc3MgJWQgKHBhc2lkIDB4
JXgpIGdvdCB1bmhhbmRsZWQgZXhjZXB0aW9uIiwKKwkJCQlwLT5sZWFkX3RocmVhZC0+cGlkLCBw
LT5wYXNpZCk7CiAJCX0KIAl9CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfaW9tbXUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9pb21tdS5j
CmluZGV4IDVmMzVkZjIzZmIxOC4uMTkzZTI4MzViZDRkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGtmZC9rZmRfaW9tbXUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfaW9tbXUuYwpAQCAtMTYwLDcgKzE2MCw3IEBAIHN0YXRpYyB2b2lkIGlvbW11X3Bh
c2lkX3NodXRkb3duX2NhbGxiYWNrKHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBpbnQgcGFzaWQpCiAJ
aWYgKCFwKQogCQlyZXR1cm47CiAKLQlwcl9kZWJ1ZygiVW5iaW5kaW5nIHByb2Nlc3MgJWQgZnJv
bSBJT01NVVxuIiwgcGFzaWQpOworCXByX2RlYnVnKCJVbmJpbmRpbmcgcHJvY2VzcyAweCV4IGZy
b20gSU9NTVVcbiIsIHBhc2lkKTsKIAogCW11dGV4X2xvY2soa2ZkX2dldF9kYmdtZ3JfbXV0ZXgo
KSk7CiAKQEAgLTE5NCw3ICsxOTQsNyBAQCBzdGF0aWMgaW50IGlvbW11X2ludmFsaWRfcHByX2Ni
KHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBpbnQgcGFzaWQsCiAJc3RydWN0IGtmZF9kZXYgKmRldjsK
IAogCWRldl93YXJuX3JhdGVsaW1pdGVkKGtmZF9kZXZpY2UsCi0JCQkiSW52YWxpZCBQUFIgZGV2
aWNlICV4OiV4LiV4IHBhc2lkICVkIGFkZHJlc3MgMHglbFggZmxhZ3MgMHglWCIsCisJCQkiSW52
YWxpZCBQUFIgZGV2aWNlICV4OiV4LiV4IHBhc2lkIDB4JXggYWRkcmVzcyAweCVsWCBmbGFncyAw
eCVYIiwKIAkJCVBDSV9CVVNfTlVNKHBkZXYtPmRldmZuKSwKIAkJCVBDSV9TTE9UKHBkZXYtPmRl
dmZuKSwKIAkJCVBDSV9GVU5DKHBkZXYtPmRldmZuKSwKQEAgLTIzNSw3ICsyMzUsNyBAQCBzdGF0
aWMgaW50IGtmZF9iaW5kX3Byb2Nlc3Nlc190b19kZXZpY2Uoc3RydWN0IGtmZF9kZXYgKmtmZCkK
IAkJZXJyID0gYW1kX2lvbW11X2JpbmRfcGFzaWQoa2ZkLT5wZGV2LCBwLT5wYXNpZCwKIAkJCQlw
LT5sZWFkX3RocmVhZCk7CiAJCWlmIChlcnIgPCAwKSB7Ci0JCQlwcl9lcnIoIlVuZXhwZWN0ZWQg
cGFzaWQgJWQgYmluZGluZyBmYWlsdXJlXG4iLAorCQkJcHJfZXJyKCJVbmV4cGVjdGVkIHBhc2lk
IDB4JXggYmluZGluZyBmYWlsdXJlXG4iLAogCQkJCQlwLT5wYXNpZCk7CiAJCQltdXRleF91bmxv
Y2soJnAtPm11dGV4KTsKIAkJCWJyZWFrOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRrZmQva2ZkX3Byb2Nlc3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9w
cm9jZXNzLmMKaW5kZXggNWQ0MTBjN2QxNWE0Li5jZTVmNWQzYzlkNTQgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcm9jZXNzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3MuYwpAQCAtNDQ3LDcgKzQ0Nyw3IEBAIHN0YXRpYyB2
b2lkIGtmZF9wcm9jZXNzX2Rlc3Ryb3lfcGRkcyhzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnApCiAKIAls
aXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUocGRkLCB0ZW1wLCAmcC0+cGVyX2RldmljZV9kYXRhLAog
CQkJCSBwZXJfZGV2aWNlX2xpc3QpIHsKLQkJcHJfZGVidWcoIlJlbGVhc2luZyBwZGQgKHRvcG9s
b2d5IGlkICVkKSBmb3IgcHJvY2VzcyAocGFzaWQgJWQpXG4iLAorCQlwcl9kZWJ1ZygiUmVsZWFz
aW5nIHBkZCAodG9wb2xvZ3kgaWQgJWQpIGZvciBwcm9jZXNzIChwYXNpZCAweCV4KVxuIiwKIAkJ
CQlwZGQtPmRldi0+aWQsIHAtPnBhc2lkKTsKIAogCQlpZiAocGRkLT5kcm1fZmlsZSkgewpAQCAt
MTI4MCw3ICsxMjgwLDcgQEAgc3RhdGljIHZvaWQgZXZpY3RfcHJvY2Vzc193b3JrZXIoc3RydWN0
IHdvcmtfc3RydWN0ICp3b3JrKQogCiAJcC0+bGFzdF9ldmljdF90aW1lc3RhbXAgPSBnZXRfamlm
Zmllc182NCgpOwogCi0JcHJfaW5mbygiU3RhcnRlZCBldmljdGluZyBwYXNpZCAlZFxuIiwgcC0+
cGFzaWQpOworCXByX2luZm8oIlN0YXJ0ZWQgZXZpY3RpbmcgcGFzaWQgMHgleFxuIiwgcC0+cGFz
aWQpOwogCXJldCA9IGtmZF9wcm9jZXNzX2V2aWN0X3F1ZXVlcyhwKTsKIAlpZiAoIXJldCkgewog
CQlkbWFfZmVuY2Vfc2lnbmFsKHAtPmVmKTsKQEAgLTEyOTMsOSArMTI5Myw5IEBAIHN0YXRpYyB2
b2lkIGV2aWN0X3Byb2Nlc3Nfd29ya2VyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKIAkJCXBy
X2RlYnVnKCJQcm9jZXNzICVkIHF1ZXVlcyBpZGxlLCBkb29yYmVsbCB1bm1hcHBlZFxuIiwKIAkJ
CQlwLT5wYXNpZCk7CiAKLQkJcHJfaW5mbygiRmluaXNoZWQgZXZpY3RpbmcgcGFzaWQgJWRcbiIs
IHAtPnBhc2lkKTsKKwkJcHJfaW5mbygiRmluaXNoZWQgZXZpY3RpbmcgcGFzaWQgMHgleFxuIiwg
cC0+cGFzaWQpOwogCX0gZWxzZQotCQlwcl9lcnIoIkZhaWxlZCB0byBldmljdCBxdWV1ZXMgb2Yg
cGFzaWQgJWRcbiIsIHAtPnBhc2lkKTsKKwkJcHJfZXJyKCJGYWlsZWQgdG8gZXZpY3QgcXVldWVz
IG9mIHBhc2lkIDB4JXhcbiIsIHAtPnBhc2lkKTsKIAl0cmFjZV9rZmRfZXZpY3RfcHJvY2Vzc193
b3JrZXJfZW5kKHAsIHJldCA/ICJGYWlsZWQiIDogIlN1Y2Nlc3MiKTsKIH0KIApAQCAtMTMxMiw3
ICsxMzEyLDcgQEAgc3RhdGljIHZvaWQgcmVzdG9yZV9wcm9jZXNzX3dvcmtlcihzdHJ1Y3Qgd29y
a19zdHJ1Y3QgKndvcmspCiAJICovCiAJcCA9IGNvbnRhaW5lcl9vZihkd29yaywgc3RydWN0IGtm
ZF9wcm9jZXNzLCByZXN0b3JlX3dvcmspOwogCXRyYWNlX2tmZF9yZXN0b3JlX3Byb2Nlc3Nfd29y
a2VyX3N0YXJ0KHApOwotCXByX2luZm8oIlN0YXJ0ZWQgcmVzdG9yaW5nIHBhc2lkICVkXG4iLCBw
LT5wYXNpZCk7CisJcHJfaW5mbygiU3RhcnRlZCByZXN0b3JpbmcgcGFzaWQgMHgleFxuIiwgcC0+
cGFzaWQpOwogCiAJLyogU2V0dGluZyBsYXN0X3Jlc3RvcmVfdGltZXN0YW1wIGJlZm9yZSBzdWNj
ZXNzZnVsIHJlc3RvcmF0aW9uLgogCSAqIE90aGVyd2lzZSB0aGlzIHdvdWxkIGhhdmUgdG8gYmUg
c2V0IGJ5IEtHRCAocmVzdG9yZV9wcm9jZXNzX2JvcykKQEAgLTEzMjgsNyArMTMyOCw3IEBAIHN0
YXRpYyB2b2lkIHJlc3RvcmVfcHJvY2Vzc193b3JrZXIoc3RydWN0IHdvcmtfc3RydWN0ICp3b3Jr
KQogCXJldCA9IGFtZGdwdV9hbWRrZmRfZ3B1dm1fcmVzdG9yZV9wcm9jZXNzX2JvcyhwLT5rZ2Rf
cHJvY2Vzc19pbmZvLAogCQkJCQkJICAgICAmcC0+ZWYpOwogCWlmIChyZXQpIHsKLQkJcHJfaW5m
bygiRmFpbGVkIHRvIHJlc3RvcmUgQk9zIG9mIHBhc2lkICVkLCByZXRyeSBhZnRlciAlZCBtc1xu
IiwKKwkJcHJfaW5mbygiRmFpbGVkIHRvIHJlc3RvcmUgQk9zIG9mIHBhc2lkIDB4JXgsIHJldHJ5
IGFmdGVyICVkIG1zXG4iLAogCQkJIHAtPnBhc2lkLCBQUk9DRVNTX0JBQ0tfT0ZGX1RJTUVfTVMp
OwogCiAJCXJldCA9IHF1ZXVlX2RlbGF5ZWRfd29yayhrZmRfcmVzdG9yZV93cSwgJnAtPnJlc3Rv
cmVfd29yaywKQEAgLTEzNDMsOSArMTM0Myw5IEBAIHN0YXRpYyB2b2lkIHJlc3RvcmVfcHJvY2Vz
c193b3JrZXIoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQogCXJldCA9IGtmZF9wcm9jZXNzX3Jl
c3RvcmVfcXVldWVzKHApOwogCXRyYWNlX2tmZF9yZXN0b3JlX3Byb2Nlc3Nfd29ya2VyX2VuZChw
LAlyZXQgPyAiRmFpbGVkIiA6ICJTdWNjZXNzIik7CiAJaWYgKCFyZXQpCi0JCXByX2luZm8oIkZp
bmlzaGVkIHJlc3RvcmluZyBwYXNpZCAlZFxuIiwgcC0+cGFzaWQpOworCQlwcl9pbmZvKCJGaW5p
c2hlZCByZXN0b3JpbmcgcGFzaWQgMHgleFxuIiwgcC0+cGFzaWQpOwogCWVsc2UKLQkJcHJfZXJy
KCJGYWlsZWQgdG8gcmVzdG9yZSBxdWV1ZXMgb2YgcGFzaWQgJWRcbiIsIHAtPnBhc2lkKTsKKwkJ
cHJfZXJyKCJGYWlsZWQgdG8gcmVzdG9yZSBxdWV1ZXMgb2YgcGFzaWQgMHgleFxuIiwgcC0+cGFz
aWQpOwogfQogCiB2b2lkIGtmZF9zdXNwZW5kX2FsbF9wcm9jZXNzZXModm9pZCkKQEAgLTEzNTks
NyArMTM1OSw3IEBAIHZvaWQga2ZkX3N1c3BlbmRfYWxsX3Byb2Nlc3Nlcyh2b2lkKQogCQljYW5j
ZWxfZGVsYXllZF93b3JrX3N5bmMoJnAtPnJlc3RvcmVfd29yayk7CiAKIAkJaWYgKGtmZF9wcm9j
ZXNzX2V2aWN0X3F1ZXVlcyhwKSkKLQkJCXByX2VycigiRmFpbGVkIHRvIHN1c3BlbmQgcHJvY2Vz
cyAlZFxuIiwgcC0+cGFzaWQpOworCQkJcHJfZXJyKCJGYWlsZWQgdG8gc3VzcGVuZCBwcm9jZXNz
IDB4JXhcbiIsIHAtPnBhc2lkKTsKIAkJZG1hX2ZlbmNlX3NpZ25hbChwLT5lZik7CiAJCWRtYV9m
ZW5jZV9wdXQocC0+ZWYpOwogCQlwLT5lZiA9IE5VTEw7CkBAIC0xNDQyLDcgKzE0NDIsNyBAQCBp
bnQga2ZkX2RlYnVnZnNfbXFkc19ieV9wcm9jZXNzKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAq
ZGF0YSkKIAlpbnQgaWR4ID0gc3JjdV9yZWFkX2xvY2soJmtmZF9wcm9jZXNzZXNfc3JjdSk7CiAK
IAloYXNoX2Zvcl9lYWNoX3JjdShrZmRfcHJvY2Vzc2VzX3RhYmxlLCB0ZW1wLCBwLCBrZmRfcHJv
Y2Vzc2VzKSB7Ci0JCXNlcV9wcmludGYobSwgIlByb2Nlc3MgJWQgUEFTSUQgJWQ6XG4iLAorCQlz
ZXFfcHJpbnRmKG0sICJQcm9jZXNzICVkIFBBU0lEIDB4JXg6XG4iLAogCQkJICAgcC0+bGVhZF90
aHJlYWQtPnRnaWQsIHAtPnBhc2lkKTsKIAogCQltdXRleF9sb2NrKCZwLT5tdXRleCk7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzc19xdWV1ZV9tYW5h
Z2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzc19xdWV1ZV9tYW5h
Z2VyLmMKaW5kZXggYTU5NDk0NTA5N2EzLi4yMjdmYjBlYzgxMTUgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcm9jZXNzX3F1ZXVlX21hbmFnZXIuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzc19xdWV1ZV9tYW5hZ2VyLmMKQEAg
LTUzLDcgKzUzLDcgQEAgc3RhdGljIGludCBmaW5kX2F2YWlsYWJsZV9xdWV1ZV9zbG90KHN0cnVj
dCBwcm9jZXNzX3F1ZXVlX21hbmFnZXIgKnBxbSwKIAlwcl9kZWJ1ZygiVGhlIG5ldyBzbG90IGlk
ICVsdVxuIiwgZm91bmQpOwogCiAJaWYgKGZvdW5kID49IEtGRF9NQVhfTlVNX09GX1FVRVVFU19Q
RVJfUFJPQ0VTUykgewotCQlwcl9pbmZvKCJDYW5ub3Qgb3BlbiBtb3JlIHF1ZXVlcyBmb3IgcHJv
Y2VzcyB3aXRoIHBhc2lkICVkXG4iLAorCQlwcl9pbmZvKCJDYW5ub3Qgb3BlbiBtb3JlIHF1ZXVl
cyBmb3IgcHJvY2VzcyB3aXRoIHBhc2lkIDB4JXhcbiIsCiAJCQkJcHFtLT5wcm9jZXNzLT5wYXNp
ZCk7CiAJCXJldHVybiAtRU5PTUVNOwogCX0KQEAgLTI5OCw3ICsyOTgsNyBAQCBpbnQgcHFtX2Ny
ZWF0ZV9xdWV1ZShzdHJ1Y3QgcHJvY2Vzc19xdWV1ZV9tYW5hZ2VyICpwcW0sCiAJfQogCiAJaWYg
KHJldHZhbCAhPSAwKSB7Ci0JCXByX2VycigiUGFzaWQgJWQgRFFNIGNyZWF0ZSBxdWV1ZSAlZCBm
YWlsZWQuIHJldCAlZFxuIiwKKwkJcHJfZXJyKCJQYXNpZCAweCV4IERRTSBjcmVhdGUgcXVldWUg
JWQgZmFpbGVkLiByZXQgJWRcbiIsCiAJCQlwcW0tPnByb2Nlc3MtPnBhc2lkLCB0eXBlLCByZXR2
YWwpOwogCQlnb3RvIGVycl9jcmVhdGVfcXVldWU7CiAJfQpAQCAtMzc4LDcgKzM3OCw3IEBAIGlu
dCBwcW1fZGVzdHJveV9xdWV1ZShzdHJ1Y3QgcHJvY2Vzc19xdWV1ZV9tYW5hZ2VyICpwcW0sIHVu
c2lnbmVkIGludCBxaWQpCiAJCWRxbSA9IHBxbi0+cS0+ZGV2aWNlLT5kcW07CiAJCXJldHZhbCA9
IGRxbS0+b3BzLmRlc3Ryb3lfcXVldWUoZHFtLCAmcGRkLT5xcGQsIHBxbi0+cSk7CiAJCWlmIChy
ZXR2YWwpIHsKLQkJCXByX2VycigiUGFzaWQgJWQgZGVzdHJveSBxdWV1ZSAlZCBmYWlsZWQsIHJl
dCAlZFxuIiwKKwkJCXByX2VycigiUGFzaWQgMHgleCBkZXN0cm95IHF1ZXVlICVkIGZhaWxlZCwg
cmV0ICVkXG4iLAogCQkJCXBxbS0+cHJvY2Vzcy0+cGFzaWQsCiAJCQkJcHFuLT5xLT5wcm9wZXJ0
aWVzLnF1ZXVlX2lkLCByZXR2YWwpOwogCQkJaWYgKHJldHZhbCAhPSAtRVRJTUUpCi0tIAoyLjE3
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1n
ZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
