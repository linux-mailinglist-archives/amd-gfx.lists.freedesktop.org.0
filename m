Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D70CB100AE8
	for <lists+amd-gfx@lfdr.de>; Mon, 18 Nov 2019 18:55:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 64B1989CD7;
	Mon, 18 Nov 2019 17:55:20 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CF3F989CD7
 for <amd-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 17:55:18 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id l1so219263wme.2
 for <amd-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 09:55:18 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=h1yNi+IPHqdR5ProML38s0gfghOkz6Ri1VwbPFjaAC0=;
 b=VMQl2SVc0r1OKLm0BKwjBykSZzeqs2EnVLItKGfzBRskh5S89XEBjLM+wABA53Ow8U
 mo/Lqu0OkvL0PTHwMp792k1RgLIs8+atE74ktvzs6vUphMIZ4ebWgMi1Y3rnm0Rhx96g
 03EjRkhL6G1pZPXGw0RiMPY+KLydvu0gOVXN2g/nToWjN/luO4VZ8ofGdLvoRSPeMQDf
 uVB1xYcrrmtDvv0fW5Ue9Bq6THsWBxomvy4NzH73aC8KOx3pMCjVioBLo2BnXWT3T3Ge
 lkzDKFkN6C778R0F2JfjV49aql7xzVFG4qtvodf8Ls6W0P9K/K/nknDdIDak+gW91o4B
 jf1A==
X-Gm-Message-State: APjAAAWA+4wtZcFRiBwDWjh+Jf7Chk0g97CG7TBcSILZC402Jpjwg+TJ
 n3wIe0RZUQYAsiewH1LxCBfGxoRdsPClk3WG6FA=
X-Google-Smtp-Source: APXvYqyjah7z4/v2R25vmLuNdlIUFGHfIaF79l4Lns9XAP1SczrTiuCDKfT1tbPedDoYCmUhfB3JnJL0JRuI78EMIfg=
X-Received: by 2002:a7b:c408:: with SMTP id k8mr315564wmi.67.1574099717315;
 Mon, 18 Nov 2019 09:55:17 -0800 (PST)
MIME-Version: 1.0
References: <20191118111707.23908-1-changfeng.zhu@amd.com>
In-Reply-To: <20191118111707.23908-1-changfeng.zhu@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Mon, 18 Nov 2019 12:55:05 -0500
Message-ID: <CADnq5_Pujn_fPhwswjH_McN4yrLtzqs-4+qVQXpz5mgcbXRoVw@mail.gmail.com>
Subject: Re: [PATCH] drm/amd/powerplay: enable gpu_busy_percent sys for renoir
To: "Changfeng.Zhu" <changfeng.zhu@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=h1yNi+IPHqdR5ProML38s0gfghOkz6Ri1VwbPFjaAC0=;
 b=fGGhvaJWNpIQrncXXAz/lFWGE9/zId+oKZvWed8sAtRfIA8zyorK0D2ts5u3U/c42m
 u3S3AtKlBewRA1/Vecy7sXgUHW2/0qhQK/DNf7naPJwW++/Z6421UFi+JZNhP9RSgbeX
 GmiyBXm2JTk8BUmWW70c5erjkWysz+kgYM3Po5TBjK/rNX9sbHCA+sovixZydPn+bqTG
 qB/bIvkH1LNBEfrUUuCBqrdSB6nFOFtdeAWjKFmvn/AoaMtL+9moUVrLQtNE2TTW6NfG
 AVFYENTigKP6XlveYyZEyyi8udNliBEBdxVZfZQ5uLVnqKDv7bOeMMSuoBsqAtyW+ng7
 +FSA==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCBOb3YgMTgsIDIwMTkgYXQgNjoxNyBBTSBDaGFuZ2ZlbmcuWmh1IDxjaGFuZ2Zlbmcu
emh1QGFtZC5jb20+IHdyb3RlOgo+Cj4gRnJvbTogY2hhbmd6aHUgPENoYW5nZmVuZy5aaHVAYW1k
LmNvbT4KPgo+IFRvIGdldCB0aGUgdmFsdWUgb2YgZ3B1X2J1c3lfcGVyY2VudCwgaXQgbmVlZHMg
dG8gcmVhbGl6ZQo+IGdldF9jdXJyZW50X2FjdGl2aXR5X3BlcmNlbnQgYW5kIGdldF9tZXRyaWNz
X3RhYmxlLgo+IFRoZSBmcmFtZXdvcmsgb2YgcmVub2lyIHNtdSBpcyBkaWZmZXJlbnQgZnJvbSBv
bGQgb25lcyBsaWtlIHJhdmVuLiBJdAo+IG5lZWRzIHRvIHJlYWxpemUgZ2V0X2N1cnJlbnRfYWN0
aXZpdHlfcGVyY2VudCBhbmQgZ2V0X21ldHJpY3NfdGFibGUgaW4KPiByZW5vaXJfcHB0LmMgbGlr
ZSBuYXZpMTAuCj4KPiBDaGFuZ2UtSWQ6IEk1NTRkMTgzNTk1Y2M4ZGIzNGQxNDJmOGIxMTVjYjYx
Y2QxNTY5NzliCj4gU2lnbmVkLW9mZi1ieTogY2hhbmd6aHUgPENoYW5nZmVuZy5aaHVAYW1kLmNv
bT4KPiBSZXZpZXdlZC1ieTogRXZhbiBRdWFuIDxldmFuLnF1YW5AYW1kLmNvbT4KCkFja2VkLWJ5
OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Cgo+IC0tLQo+ICBkcml2
ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvc211X3YxMl8wLmggfCAgNCArCj4gIGRyaXZl
cnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3Jlbm9pcl9wcHQuYyAgICB8IDc3ICsrKysrKysrKysr
KysrKysrKysKPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211X3YxMl8wLmMgICAg
IHwgMzMgKysrKysrKysKPiAgMyBmaWxlcyBjaGFuZ2VkLCAxMTQgaW5zZXJ0aW9ucygrKQo+Cj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9zbXVfdjEyXzAu
aCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9zbXVfdjEyXzAuaAo+IGluZGV4
IDE3NDVlMDE0NmZiYS4uNDRjNjVkZDg4NTBkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvcG93ZXJwbGF5L2luYy9zbXVfdjEyXzAuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L2luYy9zbXVfdjEyXzAuaAo+IEBAIC02Miw2ICs2MiwxMCBAQCBpbnQgc211
X3YxMl8wX3Bvd2VyZ2F0ZV9qcGVnKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBib29sIGdhdGUp
Owo+Cj4gIGludCBzbXVfdjEyXzBfc2V0X2dmeF9jZ3BnKHN0cnVjdCBzbXVfY29udGV4dCAqc211
LCBib29sIGVuYWJsZSk7Cj4KPiAraW50IHNtdV92MTJfMF9yZWFkX3NlbnNvcihzdHJ1Y3Qgc211
X2NvbnRleHQgKnNtdSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gYW1kX3BwX3Nl
bnNvcnMgc2Vuc29yLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAqZGF0YSwgdWlu
dDMyX3QgKnNpemUpOwo+ICsKPiAgdWludDMyX3Qgc211X3YxMl8wX2dldF9nZnhvZmZfc3RhdHVz
KHN0cnVjdCBzbXVfY29udGV4dCAqc211KTsKPgo+ICBpbnQgc211X3YxMl8wX2dmeF9vZmZfY29u
dHJvbChzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgYm9vbCBlbmFibGUpOwo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9yZW5vaXJfcHB0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL3Bvd2VycGxheS9yZW5vaXJfcHB0LmMKPiBpbmRleCA3ODQ5MDNhMzEzYjcuLjNj
ZWNlMDQ3ZGE3NiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9y
ZW5vaXJfcHB0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9yZW5vaXJf
cHB0LmMKPiBAQCAtMTM5LDYgKzEzOSwyNyBAQCBzdGF0aWMgaW50IHJlbm9pcl9nZXRfc211X3Rh
YmxlX2luZGV4KHN0cnVjdCBzbXVfY29udGV4dCAqc21jLCB1aW50MzJfdCBpbmRleCkKPiAgICAg
ICAgIHJldHVybiBtYXBwaW5nLm1hcF90bzsKPiAgfQo+Cj4gK3N0YXRpYyBpbnQgcmVub2lyX2dl
dF9tZXRyaWNzX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIFNtdU1ldHJpY3NfdCAqbWV0cmljc190YWJsZSkKPiArewo+
ICsgICAgICAgc3RydWN0IHNtdV90YWJsZV9jb250ZXh0ICpzbXVfdGFibGU9ICZzbXUtPnNtdV90
YWJsZTsKPiArICAgICAgIGludCByZXQgPSAwOwo+ICsKPiArICAgICAgIGlmICghc211X3RhYmxl
LT5tZXRyaWNzX3RpbWUgfHwgdGltZV9hZnRlcihqaWZmaWVzLCBzbXVfdGFibGUtPm1ldHJpY3Nf
dGltZSArIG1zZWNzX3RvX2ppZmZpZXMoMTAwKSkpIHsKPiArICAgICAgICAgICAgICAgcmV0ID0g
c211X3VwZGF0ZV90YWJsZShzbXUsIFNNVV9UQUJMRV9TTVVfTUVUUklDUywgMCwKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICh2b2lkICopc211X3RhYmxlLT5tZXRyaWNzX3RhYmxl
LCBmYWxzZSk7Cj4gKyAgICAgICAgICAgICAgIGlmIChyZXQpIHsKPiArICAgICAgICAgICAgICAg
ICAgICAgICBwcl9pbmZvKCJGYWlsZWQgdG8gZXhwb3J0IFNNVSBtZXRyaWNzIHRhYmxlIVxuIik7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArICAgICAgICAgICAgICAg
fQo+ICsgICAgICAgICAgICAgICBzbXVfdGFibGUtPm1ldHJpY3NfdGltZSA9IGppZmZpZXM7Cj4g
KyAgICAgICB9Cj4gKwo+ICsgICAgICAgbWVtY3B5KG1ldHJpY3NfdGFibGUsIHNtdV90YWJsZS0+
bWV0cmljc190YWJsZSwgc2l6ZW9mKFNtdU1ldHJpY3NfdCkpOwo+ICsKPiArICAgICAgIHJldHVy
biByZXQ7Cj4gK30KPiArCj4gIHN0YXRpYyBpbnQgcmVub2lyX3RhYmxlc19pbml0KHN0cnVjdCBz
bXVfY29udGV4dCAqc211LCBzdHJ1Y3Qgc211X3RhYmxlICp0YWJsZXMpCj4gIHsKPiAgICAgICAg
IHN0cnVjdCBzbXVfdGFibGVfY29udGV4dCAqc211X3RhYmxlID0gJnNtdS0+c211X3RhYmxlOwo+
IEBAIC0xNTQsNiArMTc1LDExIEBAIHN0YXRpYyBpbnQgcmVub2lyX3RhYmxlc19pbml0KHN0cnVj
dCBzbXVfY29udGV4dCAqc211LCBzdHJ1Y3Qgc211X3RhYmxlICp0YWJsZXMpCj4gICAgICAgICBp
ZiAoIXNtdV90YWJsZS0+Y2xvY2tzX3RhYmxlKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVO
T01FTTsKPgo+ICsgICAgICAgc211X3RhYmxlLT5tZXRyaWNzX3RhYmxlID0ga3phbGxvYyhzaXpl
b2YoU211TWV0cmljc190KSwgR0ZQX0tFUk5FTCk7Cj4gKyAgICAgICBpZiAoIXNtdV90YWJsZS0+
bWV0cmljc190YWJsZSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gKyAgICAg
ICBzbXVfdGFibGUtPm1ldHJpY3NfdGltZSA9IDA7Cj4gKwo+ICAgICAgICAgcmV0dXJuIDA7Cj4g
IH0KPgo+IEBAIC0zODYsNiArNDEyLDMyIEBAIHN0YXRpYyBpbnQgcmVub2lyX3VuZm9yY2VfZHBt
X2xldmVscyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkgewo+ICAgICAgICAgcmV0dXJuIHJldDsK
PiAgfQo+Cj4gK3N0YXRpYyBpbnQgcmVub2lyX2dldF9jdXJyZW50X2FjdGl2aXR5X3BlcmNlbnQo
c3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBlbnVtIGFtZF9wcF9zZW5zb3JzIHNlbnNvciwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90ICp2YWx1ZSkKPiAr
ewo+ICsgICAgICAgaW50IHJldCA9IDA7Cj4gKyAgICAgICBTbXVNZXRyaWNzX3QgbWV0cmljczsK
PiArCj4gKyAgICAgICBpZiAoIXZhbHVlKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZB
TDsKPiArCj4gKyAgICAgICByZXQgPSByZW5vaXJfZ2V0X21ldHJpY3NfdGFibGUoc211LCAmbWV0
cmljcyk7Cj4gKyAgICAgICBpZiAocmV0KQo+ICsgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+
ICsKPiArICAgICAgIHN3aXRjaCAoc2Vuc29yKSB7Cj4gKyAgICAgICBjYXNlIEFNREdQVV9QUF9T
RU5TT1JfR1BVX0xPQUQ6Cj4gKyAgICAgICAgICAgICAgICp2YWx1ZSA9IG1ldHJpY3MuQXZlcmFn
ZUdmeEFjdGl2aXR5Owo+ICsgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgIGRlZmF1bHQ6
Cj4gKyAgICAgICAgICAgICAgIHByX2VycigiSW52YWxpZCBzZW5zb3IgZm9yIHJldHJpZXZpbmcg
Y2xvY2sgYWN0aXZpdHlcbiIpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAr
ICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiAgc3RhdGljIGludCBy
ZW5vaXJfZ2V0X3dvcmtsb2FkX3R5cGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHVpbnQzMl90
IHByb2ZpbGUpCj4gIHsKPgo+IEBAIC02OTksNiArNzUxLDMwIEBAIHN0YXRpYyBpbnQgcmVub2ly
X2dldF9wb3dlcl9wcm9maWxlX21vZGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCj4gICAgICAg
ICByZXR1cm4gc2l6ZTsKPiAgfQo+Cj4gK3N0YXRpYyBpbnQgcmVub2lyX3JlYWRfc2Vuc29yKHN0
cnVjdCBzbXVfY29udGV4dCAqc211LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGVudW0gYW1kX3BwX3NlbnNvcnMgc2Vuc29yLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHZvaWQgKmRhdGEsIHVpbnQzMl90ICpzaXplKQo+ICt7Cj4gKyAgICAgICBpbnQgcmV0
ID0gMDsKPiArICAgICAgIHN0cnVjdCBzbXVfdGFibGVfY29udGV4dCAqdGFibGVfY29udGV4dCA9
ICZzbXUtPnNtdV90YWJsZTsKPiArCj4gKyAgICAgICBpZighZGF0YSB8fCAhc2l6ZSkKPiArICAg
ICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsgICAgICAgbXV0ZXhfbG9jaygmc211
LT5zZW5zb3JfbG9jayk7Cj4gKyAgICAgICBzd2l0Y2ggKHNlbnNvcikgewo+ICsgICAgICAgY2Fz
ZSBBTURHUFVfUFBfU0VOU09SX0dQVV9MT0FEOgo+ICsgICAgICAgICAgICAgICByZXQgPSByZW5v
aXJfZ2V0X2N1cnJlbnRfYWN0aXZpdHlfcGVyY2VudChzbXUsIHNlbnNvciwgKHVpbnQzMl90ICop
ZGF0YSk7Cj4gKyAgICAgICAgICAgICAgICpzaXplID0gNDsKPiArICAgICAgICAgICAgICAgYnJl
YWs7Cj4gKyAgICAgICBkZWZhdWx0Ogo+ICsgICAgICAgICAgICAgICByZXQgPSBzbXVfdjEyXzBf
cmVhZF9zZW5zb3Ioc211LCBzZW5zb3IsIGRhdGEsIHNpemUpOwo+ICsgICAgICAgfQo+ICsgICAg
ICAgbXV0ZXhfdW5sb2NrKCZzbXUtPnNlbnNvcl9sb2NrKTsKPiArCj4gKyAgICAgICByZXR1cm4g
cmV0Owo+ICt9Cj4gKwo+ICBzdGF0aWMgY29uc3Qgc3RydWN0IHBwdGFibGVfZnVuY3MgcmVub2ly
X3BwdF9mdW5jcyA9IHsKPiAgICAgICAgIC5nZXRfc211X21zZ19pbmRleCA9IHJlbm9pcl9nZXRf
c211X21zZ19pbmRleCwKPiAgICAgICAgIC5nZXRfc211X3RhYmxlX2luZGV4ID0gcmVub2lyX2dl
dF9zbXVfdGFibGVfaW5kZXgsCj4gQEAgLTcxOSw2ICs3OTUsNyBAQCBzdGF0aWMgY29uc3Qgc3Ry
dWN0IHBwdGFibGVfZnVuY3MgcmVub2lyX3BwdF9mdW5jcyA9IHsKPiAgICAgICAgIC5nZXRfZHBt
X2Nsb2NrX3RhYmxlID0gcmVub2lyX2dldF9kcG1fY2xvY2tfdGFibGUsCj4gICAgICAgICAuc2V0
X3dhdGVybWFya3NfdGFibGUgPSByZW5vaXJfc2V0X3dhdGVybWFya3NfdGFibGUsCj4gICAgICAg
ICAuZ2V0X3Bvd2VyX3Byb2ZpbGVfbW9kZSA9IHJlbm9pcl9nZXRfcG93ZXJfcHJvZmlsZV9tb2Rl
LAo+ICsgICAgICAgLnJlYWRfc2Vuc29yID0gcmVub2lyX3JlYWRfc2Vuc29yLAo+ICAgICAgICAg
LmNoZWNrX2Z3X3N0YXR1cyA9IHNtdV92MTJfMF9jaGVja19md19zdGF0dXMsCj4gICAgICAgICAu
Y2hlY2tfZndfdmVyc2lvbiA9IHNtdV92MTJfMF9jaGVja19md192ZXJzaW9uLAo+ICAgICAgICAg
LnBvd2VyZ2F0ZV9zZG1hID0gc211X3YxMl8wX3Bvd2VyZ2F0ZV9zZG1hLAo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9zbXVfdjEyXzAuYyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTJfMC5jCj4gaW5kZXggMThiMjRmOTU0MzgwLi4wNDUx
NjczMTFhZTggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211
X3YxMl8wLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9zbXVfdjEyXzAu
Ywo+IEBAIC0yMjMsNiArMjIzLDM5IEBAIGludCBzbXVfdjEyXzBfc2V0X2dmeF9jZ3BnKHN0cnVj
dCBzbXVfY29udGV4dCAqc211LCBib29sIGVuYWJsZSkKPiAgICAgICAgICAgICAgICAgU01VX01T
R19TZXRHZnhDR1BHLCBlbmFibGUgPyAxIDogMCk7Cj4gIH0KPgo+ICtpbnQgc211X3YxMl8wX3Jl
YWRfc2Vuc29yKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGVudW0gYW1kX3BwX3NlbnNvcnMgc2Vuc29yLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHZvaWQgKmRhdGEsIHVpbnQzMl90ICpzaXplKQo+ICt7Cj4gKyAg
ICAgICBpbnQgcmV0ID0gMDsKPiArCj4gKyAgICAgICBpZighZGF0YSB8fCAhc2l6ZSkKPiArICAg
ICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsgICAgICAgc3dpdGNoIChzZW5zb3Ip
IHsKPiArICAgICAgIGNhc2UgQU1ER1BVX1BQX1NFTlNPUl9HRlhfTUNMSzoKPiArICAgICAgICAg
ICAgICAgcmV0ID0gc211X2dldF9jdXJyZW50X2Nsa19mcmVxKHNtdSwgU01VX1VDTEssICh1aW50
MzJfdCAqKWRhdGEpOwo+ICsgICAgICAgICAgICAgICAqc2l6ZSA9IDQ7Cj4gKyAgICAgICAgICAg
ICAgIGJyZWFrOwo+ICsgICAgICAgY2FzZSBBTURHUFVfUFBfU0VOU09SX0dGWF9TQ0xLOgo+ICsg
ICAgICAgICAgICAgICByZXQgPSBzbXVfZ2V0X2N1cnJlbnRfY2xrX2ZyZXEoc211LCBTTVVfR0ZY
Q0xLLCAodWludDMyX3QgKilkYXRhKTsKPiArICAgICAgICAgICAgICAgKnNpemUgPSA0Owo+ICsg
ICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgIGNhc2UgQU1ER1BVX1BQX1NFTlNPUl9NSU5f
RkFOX1JQTToKPiArICAgICAgICAgICAgICAgKih1aW50MzJfdCAqKWRhdGEgPSAwOwo+ICsgICAg
ICAgICAgICAgICAqc2l6ZSA9IDQ7Cj4gKyAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAg
ZGVmYXVsdDoKPiArICAgICAgICAgICAgICAgcmV0ID0gc211X2NvbW1vbl9yZWFkX3NlbnNvcihz
bXUsIHNlbnNvciwgZGF0YSwgc2l6ZSk7Cj4gKyAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAg
ICAgfQo+ICsKPiArICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAgICAgICAgICpzaXplID0gMDsK
PiArCj4gKyAgICAgICByZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICAvKioKPiAgICogc211X3YxMl8w
X2dldF9nZnhvZmZfc3RhdHVzIC0gZ2V0IGdmeG9mZiBzdGF0dXMKPiAgICoKPiAtLQo+IDIuMTcu
MQo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBh
bWQtZ2Z4IG1haWxpbmcgbGlzdAo+IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGlu
ZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRl
c2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
