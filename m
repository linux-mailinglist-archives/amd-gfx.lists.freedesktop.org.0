Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4D31BA20CD
	for <lists+amd-gfx@lfdr.de>; Thu, 29 Aug 2019 18:24:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9521E6E14C;
	Thu, 29 Aug 2019 16:24:15 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-CO1-obe.outbound.protection.outlook.com
 (mail-co1nam04on0614.outbound.protection.outlook.com
 [IPv6:2a01:111:f400:fe4d::614])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D3C6E6E139
 for <amd-gfx@lists.freedesktop.org>; Thu, 29 Aug 2019 16:24:05 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=KBrwdYziyTzjciYsOVYn2S1YTS1borG5h1Pjo7Y0ym0dw1grHHvHDWW1Zl/rlwca/OgKDtx4v0a2yPR4OLYL2uSXwM0wwJJ1CeHNGjZpTSEb3+WxIHe4qUshntYH700pLAQiLbA9aPV249AsXqjKwhnDJ8zPrLsx0Sxyt6pmWc4Jkj+FmhXXCWDhl17g59z0DvPkJzs3BP86udT/0gPVAiXswXX/AbGhSOYr+gvJPDgcrQo8heH2tE52cVSW1a1FsimMsBPDtzCE3X3PIHYtqsTRGC8+GOTzUnFtzJJD7ZfOJQRQkEZK5/0g2sgHgYwQAtybAoeF24w0UnvyA6gdaw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bANCGQ6z5vXCgbnuTesOkYFo8f6/8pCJyzz46joU6XM=;
 b=F2Tu50TRkAQureR+11grVvwaQyn0md47gGq26kLseVThYMu2r8XfvIN91g+tKHN4krIJUH0XebRC5pgotkTOjM+MdJZxiKASC4nw060GMGL3YqD2P93ItlOC3t1oY1/dn/n4vEI03EDfagstDfgVGTZHYCpxECSERpnuQeaTMyVd0wB85J18XcHzMHA/f037AoKtVEOjNEHnAh6sQTEGzF9IGq++phyIS4AGk9EajI89d2mLtImpq06eVu5Sdh02JWUNYzE8UBSjh2m/SR9iRVAKAVJ40uD0ZBb28ZmWbdwrK7vCey0q9jcB9hJXfwNW9Zs4AcNDxJoxwaWfyQnYxw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from BN4PR12CA0014.namprd12.prod.outlook.com (2603:10b6:403:2::24)
 by BN7PR12MB2707.namprd12.prod.outlook.com (2603:10b6:408:2f::29) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2199.20; Thu, 29 Aug
 2019 16:24:04 +0000
Received: from BY2NAM03FT007.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e4a::206) by BN4PR12CA0014.outlook.office365.com
 (2603:10b6:403:2::24) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2199.14 via Frontend
 Transport; Thu, 29 Aug 2019 16:24:04 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV02.amd.com (165.204.84.17) by
 BY2NAM03FT007.mail.protection.outlook.com (10.152.84.70) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2220.16 via Frontend Transport; Thu, 29 Aug 2019 16:24:03 +0000
Received: from blakha.amd.com (10.180.168.240) by SATLEXCHOV02.amd.com
 (10.181.40.72) with Microsoft SMTP Server id 14.3.389.1; Thu, 29 Aug 2019
 11:23:46 -0500
From: Bhawanpreet Lakha <Bhawanpreet.Lakha@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 13/20] drm/amd/display: Create amdgpu_dm_hdcp
Date: Thu, 29 Aug 2019 12:22:46 -0400
Message-ID: <20190829162253.10195-14-Bhawanpreet.Lakha@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190829162253.10195-1-Bhawanpreet.Lakha@amd.com>
References: <20190829162253.10195-1-Bhawanpreet.Lakha@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(346002)(396003)(136003)(39860400002)(2980300002)(428003)(189003)(199004)(2906002)(6916009)(47776003)(53936002)(4326008)(16586007)(316002)(2351001)(336012)(186003)(486006)(26005)(11346002)(2616005)(476003)(126002)(426003)(446003)(7696005)(53416004)(51416003)(5660300002)(76176011)(30864003)(356004)(1076003)(14444005)(50226002)(86362001)(8936002)(81156014)(81166006)(8676002)(50466002)(36756003)(48376002)(305945005)(478600001)(70586007)(70206006);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BN7PR12MB2707; H:SATLEXCHOV02.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: d5261a40-a94d-4685-b904-08d72c9d4ecd
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(4618075)(2017052603328);
 SRVR:BN7PR12MB2707; 
X-MS-TrafficTypeDiagnostic: BN7PR12MB2707:
X-Microsoft-Antispam-PRVS: <BN7PR12MB270751AE953D165BB1F4EE7DF9A20@BN7PR12MB2707.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:2512;
X-Forefront-PRVS: 0144B30E41
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: rtSrsYZeZqeMMOq9YrtUgQ/tEwptTDFM6l/U0KCF/s1r0Dmd1N0hlwuBSXJ7VGFZ/C0Xmv8z+qygdyfdNsQp8tptamfiDXnfEhhhpu+484EHASeXdhMDBamFCehCjduPrhYGCK5ItIsFDNs/JJmUIoQklE6EcETwAmEfF87UN1KfEFgjXZGDYSapo/PeTcnuGHbpkBCwEMIbvsYZKxj3K8F2K7+kqQcY0AI7utUDZ/t9oaPq4IYIpaddg3a9T8hW1HKJr2ZV9wX3jHTdmtbH7xIiBcGk5I5OvjRepCFDHWRM6sgHPiz8Ob4xLV48VTk7PlIf/Z+ZboIb+hOLXfCwRMcFupOUJpLRoXqyXPeanvYvbvC5mJ6EdqUW78Dm+KkDmKrRyZ568rsafVMT2MqRMbTDqeHq96slmpPzOv/1qsg=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 29 Aug 2019 16:24:03.8356 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: d5261a40-a94d-4685-b904-08d72c9d4ecd
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV02.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN7PR12MB2707
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bANCGQ6z5vXCgbnuTesOkYFo8f6/8pCJyzz46joU6XM=;
 b=ood+eYxIOJluD9ZApdU5fvvvfQw0Qh+myaUn9yUtESmoBwVtcM87/+QdAO1eArRbh+0r/rR1ySiqPLmnkuzwTi+kduPV9BSpjIbFP5Xgjy7UA4omXc5/IjjGCG1b7+CK53Q1WzmM1xXytiZLvqs3uEr98mdjmMjemsFdHMYvbxY=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Bhawanpreet Lakha <Bhawanpreet.Lakha@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W1doeV0KV2UgbmVlZCB0byBpbnRlcmFjdCB3aXRoIHRoZSBoZGNwIG1vZHVsZSBmcm9tIHRoZSBE
TSwgdGhlIG1vZHVsZQpoYXMgdG8gYmUgaW50ZXJhY3RlZCB3aXRoIGluIHRlcm1zIG9mIGV2ZW50
cwoKW0hvd10KQ3JlYXRlIHRoZSBmaWxlcyBuZWVkZWQgZm9yIGxpbnV4IGhkY3AuIFRoZXNlIGZp
bGVzIG1hbmFnZSB0aGUgZXZlbnRzCm5lZWRlZCBmb3IgdGhlIGRtIHRvIGludGVyYWN0IHdpdGgg
dGhlIGhkY3AgbW9kdWxlLgoKV2UgdXNlIHRoZSBrZXJuZWwgd29yayBxdWV1ZSB0byBwcm9jZXNz
IHRoZSBldmVudHMgbmVlZGVkIGZvcgp0aGUgbW9kdWxlCgpTaWduZWQtb2ZmLWJ5OiBCaGF3YW5w
cmVldCBMYWtoYSA8Qmhhd2FucHJlZXQuTGFraGFAYW1kLmNvbT4KLS0tCiAuLi4vZ3B1L2RybS9h
bWQvZGlzcGxheS9hbWRncHVfZG0vTWFrZWZpbGUgICAgfCAgIDQgKwogLi4uL2FtZC9kaXNwbGF5
L2FtZGdwdV9kbS9hbWRncHVfZG1faGRjcC5jICAgIHwgMjQxICsrKysrKysrKysrKysrKysrKwog
Li4uL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1faGRjcC5oICAgIHwgIDYxICsrKysr
CiAzIGZpbGVzIGNoYW5nZWQsIDMwNiBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQg
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1faGRjcC5jCiBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9h
bWRncHVfZG1faGRjcC5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5
L2FtZGdwdV9kbS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVf
ZG0vTWFrZWZpbGUKaW5kZXggOTQ5MTE4NzFlYjliLi45YTNiN2JmOGFiMGIgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vTWFrZWZpbGUKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9NYWtlZmlsZQpAQCAtMzEsNiArMzEs
MTAgQEAgaWZuZXEgKCQoQ09ORklHX0RSTV9BTURfREMpLCkKIEFNREdQVURNICs9IGFtZGdwdV9k
bV9zZXJ2aWNlcy5vIGFtZGdwdV9kbV9oZWxwZXJzLm8gYW1kZ3B1X2RtX3BwX3NtdS5vCiBlbmRp
ZgogCitpZmRlZiBDT05GSUdfRFJNX0FNRF9EQ19IRENQCitBTURHUFVETSArPSBhbWRncHVfZG1f
aGRjcC5vCitlbmRpZgorCiBpZm5lcSAoJChDT05GSUdfREVCVUdfRlMpLCkKIEFNREdQVURNICs9
IGFtZGdwdV9kbV9jcmMubyBhbWRncHVfZG1fZGVidWdmcy5vCiBlbmRpZgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1faGRjcC5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1faGRjcC5jCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMDA0YjZlOGU5ZWQ1Ci0tLSAv
ZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRn
cHVfZG1faGRjcC5jCkBAIC0wLDAgKzEsMjQxIEBACisvKgorICogQ29weXJpZ2h0IDIwMTkgQWR2
YW5jZWQgTWljcm8gRGV2aWNlcywgSW5jLgorICoKKyAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdy
YW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCisgKiBjb3B5
IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhl
ICJTb2Z0d2FyZSIpLAorICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmlj
dGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgorICogdGhlIHJpZ2h0cyB0byB1c2Us
IGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCisg
KiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNv
bnMgdG8gd2hvbSB0aGUKKyAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVj
dCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CisgKgorICogVGhlIGFib3ZlIGNvcHlyaWdo
dCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4K
KyAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgor
ICoKKyAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZ
IE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCisgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBM
SU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKKyAqIEZJVE5FU1Mg
Rk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVO
VCBTSEFMTAorICogVEhFIENPUFlSSUdIVCBIT0xERVIoUykgT1IgQVVUSE9SKFMpIEJFIExJQUJM
RSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SCisgKiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIg
SU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwKKyAqIEFSSVNJTkcg
RlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVT
RSBPUgorICogT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgorICoKKyAqIEF1dGhvcnM6
IEFNRAorICoKKyAqLworCisjaW5jbHVkZSAiYW1kZ3B1X2RtX2hkY3AuaCIKKyNpbmNsdWRlICJh
bWRncHUuaCIKKyNpbmNsdWRlICJhbWRncHVfZG0uaCIKKworc3RhdGljIHZvaWQgcHJvY2Vzc19v
dXRwdXQoc3RydWN0IGhkY3Bfd29ya3F1ZXVlICpoZGNwX3dvcmspCit7CisJc3RydWN0IG1vZF9o
ZGNwX291dHB1dCBvdXRwdXQgPSBoZGNwX3dvcmstPm91dHB1dDsKKworCWlmIChvdXRwdXQuY2Fs
bGJhY2tfc3RvcCkKKwkJY2FuY2VsX2RlbGF5ZWRfd29yaygmaGRjcF93b3JrLT5jYWxsYmFja19k
d29yayk7CisKKwlpZiAob3V0cHV0LmNhbGxiYWNrX25lZWRlZCkKKwkJc2NoZWR1bGVfZGVsYXll
ZF93b3JrKCZoZGNwX3dvcmstPmNhbGxiYWNrX2R3b3JrLAorCQkJCSAgICAgIG1zZWNzX3RvX2pp
ZmZpZXMob3V0cHV0LmNhbGxiYWNrX2RlbGF5KSk7CisKKwlpZiAob3V0cHV0LndhdGNoZG9nX3Rp
bWVyX3N0b3ApCisJCWNhbmNlbF9kZWxheWVkX3dvcmsoJmhkY3Bfd29yay0+d2F0Y2hkb2dfdGlt
ZXJfZHdvcmspOworCisJaWYgKG91dHB1dC53YXRjaGRvZ190aW1lcl9uZWVkZWQpCisJCXNjaGVk
dWxlX2RlbGF5ZWRfd29yaygmaGRjcF93b3JrLT53YXRjaGRvZ190aW1lcl9kd29yaywKKwkJCQkg
ICAgICBtc2Vjc190b19qaWZmaWVzKG91dHB1dC53YXRjaGRvZ190aW1lcl9kZWxheSkpOworCit9
CisKK3ZvaWQgaGRjcF9hZGRfZGlzcGxheShzdHJ1Y3QgaGRjcF93b3JrcXVldWUgKmhkY3Bfd29y
aywgdW5zaWduZWQgaW50IGxpbmtfaW5kZXgpCit7CisJc3RydWN0IGhkY3Bfd29ya3F1ZXVlICpo
ZGNwX3cgPSAmaGRjcF93b3JrW2xpbmtfaW5kZXhdOworCXN0cnVjdCBtb2RfaGRjcF9kaXNwbGF5
ICpkaXNwbGF5ID0gJmhkY3Bfd29ya1tsaW5rX2luZGV4XS5kaXNwbGF5OworCXN0cnVjdCBtb2Rf
aGRjcF9saW5rICpsaW5rID0gJmhkY3Bfd29ya1tsaW5rX2luZGV4XS5saW5rOworCisJbXV0ZXhf
bG9jaygmaGRjcF93LT5tdXRleCk7CisKKwltb2RfaGRjcF9hZGRfZGlzcGxheSgmaGRjcF93LT5o
ZGNwLCBsaW5rLCBkaXNwbGF5LCAmaGRjcF93LT5vdXRwdXQpOworCisJcHJvY2Vzc19vdXRwdXQo
aGRjcF93KTsKKworCW11dGV4X3VubG9jaygmaGRjcF93LT5tdXRleCk7CisKK30KKwordm9pZCBo
ZGNwX3JlbW92ZV9kaXNwbGF5KHN0cnVjdCBoZGNwX3dvcmtxdWV1ZSAqaGRjcF93b3JrLCB1bnNp
Z25lZCBpbnQgbGlua19pbmRleCwgIHVuc2lnbmVkIGludCBkaXNwbGF5X2luZGV4KQoreworCXN0
cnVjdCBoZGNwX3dvcmtxdWV1ZSAqaGRjcF93ID0gJmhkY3Bfd29ya1tsaW5rX2luZGV4XTsKKwor
CW11dGV4X2xvY2soJmhkY3Bfdy0+bXV0ZXgpOworCisJbW9kX2hkY3BfcmVtb3ZlX2Rpc3BsYXko
JmhkY3Bfdy0+aGRjcCwgZGlzcGxheV9pbmRleCwgJmhkY3Bfdy0+b3V0cHV0KTsKKworCXByb2Nl
c3Nfb3V0cHV0KGhkY3Bfdyk7CisKKwltdXRleF91bmxvY2soJmhkY3Bfdy0+bXV0ZXgpOworCit9
CisKK3ZvaWQgaGRjcF9yZXNldF9kaXNwbGF5KHN0cnVjdCBoZGNwX3dvcmtxdWV1ZSAqaGRjcF93
b3JrLCB1bnNpZ25lZCBpbnQgbGlua19pbmRleCkKK3sKKwlzdHJ1Y3QgaGRjcF93b3JrcXVldWUg
KmhkY3BfdyA9ICZoZGNwX3dvcmtbbGlua19pbmRleF07CisKKwltdXRleF9sb2NrKCZoZGNwX3ct
Pm11dGV4KTsKKworCW1vZF9oZGNwX3Jlc2V0X2Nvbm5lY3Rpb24oJmhkY3Bfdy0+aGRjcCwgICZo
ZGNwX3ctPm91dHB1dCk7CisKKwlwcm9jZXNzX291dHB1dChoZGNwX3cpOworCisJbXV0ZXhfdW5s
b2NrKCZoZGNwX3ctPm11dGV4KTsKK30KKwordm9pZCBoZGNwX2hhbmRsZV9jcGlycShzdHJ1Y3Qg
aGRjcF93b3JrcXVldWUgKmhkY3Bfd29yaywgdW5zaWduZWQgaW50IGxpbmtfaW5kZXgpCit7CisJ
c3RydWN0IGhkY3Bfd29ya3F1ZXVlICpoZGNwX3cgPSAmaGRjcF93b3JrW2xpbmtfaW5kZXhdOwor
CisJc2NoZWR1bGVfd29yaygmaGRjcF93LT5jcGlycV93b3JrKTsKK30KKworCisKKworc3RhdGlj
IHZvaWQgZXZlbnRfY2FsbGJhY2soc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQoreworCXN0cnVj
dCBoZGNwX3dvcmtxdWV1ZSAqaGRjcF93b3JrOworCisJaGRjcF93b3JrID0gY29udGFpbmVyX29m
KHRvX2RlbGF5ZWRfd29yayh3b3JrKSwgc3RydWN0IGhkY3Bfd29ya3F1ZXVlLAorCQkJCSAgICAg
IGNhbGxiYWNrX2R3b3JrKTsKKworCW11dGV4X2xvY2soJmhkY3Bfd29yay0+bXV0ZXgpOworCisJ
Y2FuY2VsX2RlbGF5ZWRfd29yaygmaGRjcF93b3JrLT53YXRjaGRvZ190aW1lcl9kd29yayk7CisK
Kwltb2RfaGRjcF9wcm9jZXNzX2V2ZW50KCZoZGNwX3dvcmstPmhkY3AsIE1PRF9IRENQX0VWRU5U
X0NBTExCQUNLLAorCQkJICAgICAgICZoZGNwX3dvcmstPm91dHB1dCk7CisKKwlwcm9jZXNzX291
dHB1dChoZGNwX3dvcmspOworCisJbXV0ZXhfdW5sb2NrKCZoZGNwX3dvcmstPm11dGV4KTsKKwor
Cit9CisKKworc3RhdGljIHZvaWQgZXZlbnRfd2F0Y2hkb2dfdGltZXIoc3RydWN0IHdvcmtfc3Ry
dWN0ICp3b3JrKQoreworCXN0cnVjdCBoZGNwX3dvcmtxdWV1ZSAqaGRjcF93b3JrOworCisJaGRj
cF93b3JrID0gY29udGFpbmVyX29mKHRvX2RlbGF5ZWRfd29yayh3b3JrKSwKKwkJCQkgICAgICBz
dHJ1Y3QgaGRjcF93b3JrcXVldWUsCisJCQkJICAgICAgd2F0Y2hkb2dfdGltZXJfZHdvcmspOwor
CisJbXV0ZXhfbG9jaygmaGRjcF93b3JrLT5tdXRleCk7CisKKwltb2RfaGRjcF9wcm9jZXNzX2V2
ZW50KCZoZGNwX3dvcmstPmhkY3AsCisJCQkgICAgICAgTU9EX0hEQ1BfRVZFTlRfV0FUQ0hET0df
VElNRU9VVCwKKwkJCSAgICAgICAmaGRjcF93b3JrLT5vdXRwdXQpOworCisJcHJvY2Vzc19vdXRw
dXQoaGRjcF93b3JrKTsKKworCW11dGV4X3VubG9jaygmaGRjcF93b3JrLT5tdXRleCk7CisKK30K
Kworc3RhdGljIHZvaWQgZXZlbnRfY3BpcnEoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQorewor
CXN0cnVjdCBoZGNwX3dvcmtxdWV1ZSAqaGRjcF93b3JrOworCisJaGRjcF93b3JrID0gY29udGFp
bmVyX29mKHdvcmssIHN0cnVjdCBoZGNwX3dvcmtxdWV1ZSwgY3BpcnFfd29yayk7CisKKwltdXRl
eF9sb2NrKCZoZGNwX3dvcmstPm11dGV4KTsKKworCW1vZF9oZGNwX3Byb2Nlc3NfZXZlbnQoJmhk
Y3Bfd29yay0+aGRjcCwgTU9EX0hEQ1BfRVZFTlRfQ1BJUlEsICZoZGNwX3dvcmstPm91dHB1dCk7
CisKKwlwcm9jZXNzX291dHB1dChoZGNwX3dvcmspOworCisJbXV0ZXhfdW5sb2NrKCZoZGNwX3dv
cmstPm11dGV4KTsKKworfQorCisKK3ZvaWQgaGRjcF9kZXN0cm95KHN0cnVjdCBoZGNwX3dvcmtx
dWV1ZSAqaGRjcF93b3JrKQoreworCWludCBpID0gMDsKKworCWZvciAoaSA9IDA7IGkgPCBoZGNw
X3dvcmstPm1heF9saW5rOyBpKyspIHsKKwkJY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCZoZGNw
X3dvcmtbaV0uY2FsbGJhY2tfZHdvcmspOworCQljYW5jZWxfZGVsYXllZF93b3JrX3N5bmMoJmhk
Y3Bfd29ya1tpXS53YXRjaGRvZ190aW1lcl9kd29yayk7CisJfQorCisJa2ZyZWUoaGRjcF93b3Jr
KTsKKworfQorCitzdGF0aWMgdm9pZCB1cGRhdGVfY29uZmlnKHZvaWQgKmhhbmRsZSwgc3RydWN0
IGNwX3BzcF9zdHJlYW1fY29uZmlnICpjb25maWcpCit7CisJc3RydWN0IGhkY3Bfd29ya3F1ZXVl
ICpoZGNwX3dvcmsgPSBoYW5kbGU7CisJc3RydWN0IGFtZGdwdV9kbV9jb25uZWN0b3IgKmFjb25u
ZWN0b3IgPSBjb25maWctPmRtX3N0cmVhbV9jdHg7CisJaW50IGxpbmtfaW5kZXggPSBhY29ubmVj
dG9yLT5kY19saW5rLT5saW5rX2luZGV4OworCXN0cnVjdCBtb2RfaGRjcF9kaXNwbGF5ICpkaXNw
bGF5ID0gJmhkY3Bfd29ya1tsaW5rX2luZGV4XS5kaXNwbGF5OworCXN0cnVjdCBtb2RfaGRjcF9s
aW5rICpsaW5rID0gJmhkY3Bfd29ya1tsaW5rX2luZGV4XS5saW5rOworCisJbWVtc2V0KGRpc3Bs
YXksIDAsIHNpemVvZigqZGlzcGxheSkpOworCW1lbXNldChsaW5rLCAwLCBzaXplb2YoKmxpbmsp
KTsKKworCWRpc3BsYXktPmluZGV4ID0gYWNvbm5lY3Rvci0+YmFzZS5pbmRleDsKKwlkaXNwbGF5
LT5zdGF0ZSA9IE1PRF9IRENQX0RJU1BMQVlfQUNUSVZFOworCisJaWYgKGFjb25uZWN0b3ItPmRj
X3NpbmsgIT0gTlVMTCkKKwkJbGluay0+bW9kZSA9IG1vZF9oZGNwX3NpZ25hbF90eXBlX3RvX29w
ZXJhdGlvbl9tb2RlKGFjb25uZWN0b3ItPmRjX3NpbmstPnNpbmtfc2lnbmFsKTsKKworCWRpc3Bs
YXktPmNvbnRyb2xsZXIgPSBDT05UUk9MTEVSX0lEX0QwICsgY29uZmlnLT5vdGdfaW5zdDsKKwlk
aXNwbGF5LT5kaWdfZmUgPSBjb25maWctPnN0cmVhbV9lbmNfaW5zdDsKKwlsaW5rLT5kaWdfYmUg
PSBjb25maWctPmxpbmtfZW5jX2luc3Q7CisJbGluay0+ZGRjX2xpbmUgPSBhY29ubmVjdG9yLT5k
Y19saW5rLT5kZGNfaHdfaW5zdCArIDE7CisJbGluay0+ZHAucmV2ID0gYWNvbm5lY3Rvci0+ZGNf
bGluay0+ZHBjZF9jYXBzLmRwY2RfcmV2LnJhdzsKKwlsaW5rLT5hZGp1c3QuaGRjcDIuZGlzYWJs
ZSA9IDE7CisKK30KKworc3RydWN0IGhkY3Bfd29ya3F1ZXVlICpoZGNwX2NyZWF0ZV93b3JrcXVl
dWUodm9pZCAqcHNwX2NvbnRleHQsIHN0cnVjdCBjcF9wc3AgKmNwX3BzcCwgc3RydWN0IGRjICpk
YykKK3sKKworCWludCBtYXhfY2FwcyA9IGRjLT5jYXBzLm1heF9saW5rczsKKwlzdHJ1Y3QgaGRj
cF93b3JrcXVldWUgKmhkY3Bfd29yayA9IGt6YWxsb2MobWF4X2NhcHMqc2l6ZW9mKCpoZGNwX3dv
cmspLCBHRlBfS0VSTkVMKTsKKwlpbnQgaSA9IDA7CisKKwlpZiAoaGRjcF93b3JrID09IE5VTEwp
CisJCWdvdG8gZmFpbF9hbGxvY19jb250ZXh0OworCisJaGRjcF93b3JrLT5tYXhfbGluayA9IG1h
eF9jYXBzOworCisJZm9yIChpID0gMDsgaSA8IG1heF9jYXBzOyBpKyspIHsKKworCQltdXRleF9p
bml0KCZoZGNwX3dvcmtbaV0ubXV0ZXgpOworCisJCUlOSVRfV09SSygmaGRjcF93b3JrW2ldLmNw
aXJxX3dvcmssIGV2ZW50X2NwaXJxKTsKKwkJSU5JVF9ERUxBWUVEX1dPUksoJmhkY3Bfd29ya1tp
XS5jYWxsYmFja19kd29yaywgZXZlbnRfY2FsbGJhY2spOworCQlJTklUX0RFTEFZRURfV09SSygm
aGRjcF93b3JrW2ldLndhdGNoZG9nX3RpbWVyX2R3b3JrLCBldmVudF93YXRjaGRvZ190aW1lcik7
CisKKwkJaGRjcF93b3JrW2ldLmhkY3AuY29uZmlnLnBzcC5oYW5kbGUgPSAgcHNwX2NvbnRleHQ7
CisJCWhkY3Bfd29ya1tpXS5oZGNwLmNvbmZpZy5kZGMuaGFuZGxlID0gZGNfZ2V0X2xpbmtfYXRf
aW5kZXgoZGMsIGkpOworCisJfQorCisJY3BfcHNwLT5mdW5jcy51cGRhdGVfc3RyZWFtX2NvbmZp
ZyA9IHVwZGF0ZV9jb25maWc7CisJY3BfcHNwLT5oYW5kbGUgPSBoZGNwX3dvcms7CisKKwlyZXR1
cm4gaGRjcF93b3JrOworCitmYWlsX2FsbG9jX2NvbnRleHQ6CisJa2ZyZWUoaGRjcF93b3JrKTsK
KworCXJldHVybiBOVUxMOworCisKKworfQorCisKKwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1faGRjcC5oIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1faGRjcC5oCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uY2I2YzZmYmQ3NGY2Ci0tLSAvZGV2L251bGwKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1faGRjcC5o
CkBAIC0wLDAgKzEsNjEgQEAKKy8qCisgKiBDb3B5cmlnaHQgMjAxOSBBZHZhbmNlZCBNaWNybyBE
ZXZpY2VzLCBJbmMuCisgKgorICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBv
ZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKKyAqIGNvcHkgb2YgdGhpcyBzb2Z0
d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiks
CisgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRp
bmcgd2l0aG91dCBsaW1pdGF0aW9uCisgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5
LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKKyAqIGFuZC9vciBzZWxs
IGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRo
ZQorICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xs
b3dpbmcgY29uZGl0aW9uczoKKyAqCisgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQg
dGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgorICogYWxsIGNvcGll
cyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCisgKgorICogVEhFIFNP
RlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQs
IEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhF
IFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAorICogRklUTkVTUyBGT1IgQSBQQVJUSUNV
TEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCisgKiBU
SEUgQ09QWVJJR0hUIEhPTERFUihTKSBPUiBBVVRIT1IoUykgQkUgTElBQkxFIEZPUiBBTlkgQ0xB
SU0sIERBTUFHRVMgT1IKKyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04g
T0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLAorICogQVJJU0lORyBGUk9NLCBPVVQgT0Yg
T1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SCisgKiBPVEhF
UiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCisgKgorICogQXV0aG9yczogQU1ECisgKgorICov
CisKKyNpZm5kZWYgQU1ER1BVX0RNX0FNREdQVV9ETV9IRENQX0hfCisjZGVmaW5lIEFNREdQVV9E
TV9BTURHUFVfRE1fSERDUF9IXworCisjaW5jbHVkZSAibW9kX2hkY3AuaCIKKyNpbmNsdWRlICJo
ZGNwLmgiCisjaW5jbHVkZSAiZGMuaCIKKyNpbmNsdWRlICJkbV9jcF9wc3AuaCIKKworc3RydWN0
IG1vZF9oZGNwOworc3RydWN0IG1vZF9oZGNwX2xpbms7CitzdHJ1Y3QgbW9kX2hkY3BfZGlzcGxh
eTsKK3N0cnVjdCBjcF9wc3A7CisKK3N0cnVjdCBoZGNwX3dvcmtxdWV1ZSB7CisJc3RydWN0IHdv
cmtfc3RydWN0IGNwaXJxX3dvcms7CisJc3RydWN0IGRlbGF5ZWRfd29yayBjYWxsYmFja19kd29y
azsKKwlzdHJ1Y3QgZGVsYXllZF93b3JrIHdhdGNoZG9nX3RpbWVyX2R3b3JrOworCXN0cnVjdCBt
dXRleCBtdXRleDsKKworCXN0cnVjdCBtb2RfaGRjcCBoZGNwOworCXN0cnVjdCBtb2RfaGRjcF9v
dXRwdXQgb3V0cHV0OworCXN0cnVjdCBtb2RfaGRjcF9kaXNwbGF5IGRpc3BsYXk7CisJc3RydWN0
IG1vZF9oZGNwX2xpbmsgbGluazsKKworCXVpbnQ4X3QgbWF4X2xpbms7Cit9OworCit2b2lkIGhk
Y3BfYWRkX2Rpc3BsYXkoc3RydWN0IGhkY3Bfd29ya3F1ZXVlICpoZGNwX3dvcmssIHVuc2lnbmVk
IGludCBsaW5rX2luZGV4KTsKK3ZvaWQgaGRjcF9yZW1vdmVfZGlzcGxheShzdHJ1Y3QgaGRjcF93
b3JrcXVldWUgKndvcmssIHVuc2lnbmVkIGludCBsaW5rX2luZGV4LCB1bnNpZ25lZCBpbnQgZGlz
cGxheV9pbmRleCk7Cit2b2lkIGhkY3BfcmVzZXRfZGlzcGxheShzdHJ1Y3QgaGRjcF93b3JrcXVl
dWUgKndvcmssIHVuc2lnbmVkIGludCBsaW5rX2luZGV4KTsKK3ZvaWQgaGRjcF9oYW5kbGVfY3Bp
cnEoc3RydWN0IGhkY3Bfd29ya3F1ZXVlICp3b3JrLCB1bnNpZ25lZCBpbnQgbGlua19pbmRleCk7
Cit2b2lkIGhkY3BfZGVzdHJveShzdHJ1Y3QgaGRjcF93b3JrcXVldWUgKndvcmspOworCitzdHJ1
Y3QgaGRjcF93b3JrcXVldWUgKmhkY3BfY3JlYXRlX3dvcmtxdWV1ZSh2b2lkICpwc3BfY29udGV4
dCwgc3RydWN0IGNwX3BzcCAqY3BfcHNwLCBzdHJ1Y3QgZGMgKmRjKTsKKworI2VuZGlmIC8qIEFN
REdQVV9ETV9BTURHUFVfRE1fSERDUF9IXyAqLwotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
