Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1C31CF855D
	for <lists+amd-gfx@lfdr.de>; Tue, 12 Nov 2019 01:34:15 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 518366EA2E;
	Tue, 12 Nov 2019 00:34:13 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-DM3-obe.outbound.protection.outlook.com
 (mail-eopbgr800080.outbound.protection.outlook.com [40.107.80.80])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3C7726EA33
 for <amd-gfx@lists.freedesktop.org>; Tue, 12 Nov 2019 00:34:03 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=i6ImL0jvzRo0EfA47fZkd0z1ZPiFAVJBHOny5F5CbyqB3TwQl/k454qZNqdnJCtKjFNFe5C8Ijbp7XMYgQjex+tEdxNegG/SuHcqYGWt11EdSfEQb+gvGpqUrEWW5/gu/UJ/SfmWkl1OKeTABG5+nILboHosau2j21eBE8G+wpr9yJC5pJhOd64Se6CcXGz6Bucs/HNaGYobJa0PpCVbqL/gPDx9tC97ZdtHtcLRmw9zf2J9/n6wM399JjWJbnKAO3vY0EhCtvN++oScGzn/ff5KvmvHpuCA2KsydKaTiBXDi3PrufkTNI5ikGngYIeO7ZJv29Bma56MFKbuu/2srQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=PuAfFkGFKcJ8xWHop0aysRI9OaTxs99YPH5KunPoCe0=;
 b=CCwZNMRxGp0deq9yvrdEHabLnxFCNXSx4dwsxkE7CClGSByezx6HXeciSPCkk9yPcrHJELh1BKRzQJRYu6f3rDHaxb+f9uVYwV0yCtT/PHl3YMAFpI37ZwVN5Ov/JvYFWVgLrinlwSl/GXZ1yVtaGzIUCBurPFtY46qdr1I9yUZT+5TXeD2O+4u0xUD6buHqdFtYaHWC94EwnY/XQ9RHs+iYICy14O7JM0T8zw5TV5aV6B8vhT3d33aYhX9I5QqqA7Ewiz+kkiT70ifZyT3ugPxajGnAvM1zZDcnLlbIw9V6kbBj6g8jhsfGub06HRWm+zwlOcXfTdfz1jfLg1viyA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MW2PR12MB2524.namprd12.prod.outlook.com (52.132.180.155) by
 MW2PR12MB2554.namprd12.prod.outlook.com (52.132.180.161) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2430.25; Tue, 12 Nov 2019 00:34:01 +0000
Received: from MW2PR12MB2524.namprd12.prod.outlook.com
 ([fe80::3d1f:4c20:e980:6e69]) by MW2PR12MB2524.namprd12.prod.outlook.com
 ([fe80::3d1f:4c20:e980:6e69%5]) with mapi id 15.20.2430.027; Tue, 12 Nov 2019
 00:34:01 +0000
From: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 23/30] drm/amd/display: Avoid conflict between HDR multiplier
 and 3dlut
Date: Mon, 11 Nov 2019 19:33:17 -0500
Message-Id: <20191112003324.8419-24-Rodrigo.Siqueira@amd.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191112003324.8419-1-Rodrigo.Siqueira@amd.com>
References: <20191112003324.8419-1-Rodrigo.Siqueira@amd.com>
X-ClientProxiedBy: YTBPR01CA0012.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b01:14::25) To MW2PR12MB2524.namprd12.prod.outlook.com
 (2603:10b6:907:9::27)
MIME-Version: 1.0
X-Mailer: git-send-email 2.24.0
X-Originating-IP: [165.204.55.250]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: a0cba071-d8b2-49bb-7435-08d767080376
X-MS-TrafficTypeDiagnostic: MW2PR12MB2554:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <MW2PR12MB2554B8C40FEDC7997420A22398770@MW2PR12MB2554.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:5797;
X-Forefront-PRVS: 021975AE46
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(136003)(366004)(396003)(346002)(39860400002)(376002)(189003)(199004)(76176011)(6916009)(81166006)(81156014)(386003)(8676002)(478600001)(6506007)(51416003)(52116002)(2870700001)(25786009)(14444005)(2906002)(186003)(2361001)(3846002)(316002)(66066001)(47776003)(50466002)(4326008)(26005)(66946007)(6116002)(36756003)(1076003)(8936002)(48376002)(50226002)(54906003)(2616005)(305945005)(486006)(5660300002)(6512007)(14454004)(2351001)(446003)(6486002)(6666004)(99286004)(66556008)(476003)(66476007)(11346002)(86362001)(6436002)(7736002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MW2PR12MB2554;
 H:MW2PR12MB2524.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: fjbB5cXY82CnwwEtUGz0YI3tTegf6IBUddGcF24hx4qTjKylAbgXYO9xHWbRJBXK2JqaXKssPZQFyrj/VJTCnbNnZBmUhwiVQxUxZ1XBDfvklpYQr0240ImJUHBtSft7QxeScM2EtkhrcKz70RDCArtcuDRu8ztwYx4kuidvpUyF0j2OkwrqAwaWmBNxRByrPTJc9dwJz8PTcbviuljxunE6bLIgtokX0K87NaVPBphgGTcy5gipCNgXBDt/6C7hCIERkFsu16n1DiJomBU60CatvQ+dnoYAUwot9gDUriMTL7hGIMLfcEWjbAjsV3IogULjY+KijpBozSkol61JOcUMRasNzntqNjbRiuUNyfmmbGOv4Rcr/w+2bw1H8SMRbAqmayinjgINw2QUXgBmUFZv/C/Lvm3w79uJZRXN7p/pqEPnPvgDXKtlcEocVxTd
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: a0cba071-d8b2-49bb-7435-08d767080376
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 12 Nov 2019 00:34:01.4067 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: 6hOyHf8fUbf+SI5y98XlPInFqKr+qG6WF50j4/jyw3SDkRYzgJ9nFk+p1CPlCO5KBeQ1oHNlXd7RgShLjMRkmw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MW2PR12MB2554
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=PuAfFkGFKcJ8xWHop0aysRI9OaTxs99YPH5KunPoCe0=;
 b=AxiLBz4RA7AiwKhn6tzjJbQvwDv1KuQ+NEY+4OegTjmD0qZoA+EblkdFMfRO6zCR+PKbvQtJE+YwQZSoGnHwPcV+m0nQhaZScgCRpcFJaMjrgIMJl2HXJW/Ickn+Nuxrg6PfKwm4DSJq+RS/f+2jYEc+5RGeP2ZxU4c94ty/E7s=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Rodrigo.Siqueira@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Krunoslav Kovac <Krunoslav.Kovac@amd.com>,
 Michael Strauss <michael.strauss@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogTWljaGFlbCBTdHJhdXNzIDxtaWNoYWVsLnN0cmF1c3NAYW1kLmNvbT4KCltXSFldClRo
ZXJlIGNhbiBiZSBhIGNvbmZsaWN0IGJldHdlZW4gT1MgSERSIG11bHRpcGxpZXIgYW5kIDNkbHV0
IEhEUgptdWx0aXBsaWVyLCB3aGljaCBhcmUgYm90aCBzZW50IHRvIERDLgoKW0hPV10KSW5zdGVh
ZCBvZiBoYXZpbmcgZGMgZGV0ZXJtaW5lIHdoaWNoIEhEUiBtdWx0aXBsaWVyIHRvIHVzZSwgbWFr
ZSB0aGUKZGVjaXNpb24gaW4gZG0gYW5kIHNlbmQgb25seSB0aGUgaW50ZW5kZWQgdmFsdWUgaW4g
YSBzdXJmYWNlIHVwZGF0ZS4KU3RvcmUgdGhlIGN1cnJlbnQgT1MgSERSIG11bHRpcGxpZXIgYW5k
IGRldGVybWluZSB3aGV0aGVyIHRvIHVzZSBpdCBvcgp0aGUgM2RsdXQncyBtdWx0aXBsaWVyIGJl
Zm9yZSBzZW5kaW5nIHRoZSBzdXJmYWNlIHVwZGF0ZSB0byBkYy4gU2VuZAptdWx0aXBsaWVyIHRv
IGRjIGluIGZpeGVkMzFfMzIgZm9ybWF0LCBkYyB0aGVuIGNvbnZlcnRzIGl0IHRvIGh3IGZvcm1h
dC4KClNpZ25lZC1vZmYtYnk6IE1pY2hhZWwgU3RyYXVzcyA8bWljaGFlbC5zdHJhdXNzQGFtZC5j
b20+ClJldmlld2VkLWJ5OiBLcnVub3NsYXYgS292YWMgPEtydW5vc2xhdi5Lb3ZhY0BhbWQuY29t
PgpBY2tlZC1ieTogUm9kcmlnbyBTaXF1ZWlyYSA8Um9kcmlnby5TaXF1ZWlyYUBhbWQuY29tPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9jb3JlL2RjLmMgICAgICAgIHwgMTcg
KysrKysrKysrKy0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kYy5oICAg
ICAgICAgICAgIHwgIDkgKysrKy0tLS0tCiAuLi4vYW1kL2Rpc3BsYXkvZGMvZGNuMTAvZGNuMTBf
aHdfc2VxdWVuY2VyLmMgICB8IDEwICsrKysrKystLS0KIC4uLi9ncHUvZHJtL2FtZC9kaXNwbGF5
L2RjL2RjbjIwL2RjbjIwX2h3c2VxLmMgIHwgMTAgKy0tLS0tLS0tLQogNCBmaWxlcyBjaGFuZ2Vk
LCAyMiBpbnNlcnRpb25zKCspLCAyNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kYy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9k
aXNwbGF5L2RjL2NvcmUvZGMuYwppbmRleCBkMDc5ZmZhZGFlYjQuLjA0YWYyYmY2MDA3MyAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2NvcmUvZGMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvY29yZS9kYy5jCkBAIC0xNDY5LDExICsxNDY5
LDYgQEAgc3RhdGljIGVudW0gc3VyZmFjZV91cGRhdGVfdHlwZSBnZXRfcGxhbmVfaW5mb191cGRh
dGVfdHlwZShjb25zdCBzdHJ1Y3QgZGNfc3VyZmEKIAkJZWxldmF0ZV91cGRhdGVfdHlwZSgmdXBk
YXRlX3R5cGUsIFVQREFURV9UWVBFX01FRCk7CiAJfQogCi0JaWYgKHUtPnBsYW5lX2luZm8tPnNk
cl93aGl0ZV9sZXZlbCAhPSB1LT5zdXJmYWNlLT5zZHJfd2hpdGVfbGV2ZWwpIHsKLQkJdXBkYXRl
X2ZsYWdzLT5iaXRzLnNkcl93aGl0ZV9sZXZlbCA9IDE7Ci0JCWVsZXZhdGVfdXBkYXRlX3R5cGUo
JnVwZGF0ZV90eXBlLCBVUERBVEVfVFlQRV9NRUQpOwotCX0KLQogCWlmICh1LT5wbGFuZV9pbmZv
LT5kY2MuZW5hYmxlICE9IHUtPnN1cmZhY2UtPmRjYy5lbmFibGUKIAkJCXx8IHUtPnBsYW5lX2lu
Zm8tPmRjYy5pbmRlcGVuZGVudF82NGJfYmxrcyAhPSB1LT5zdXJmYWNlLT5kY2MuaW5kZXBlbmRl
bnRfNjRiX2Jsa3MKIAkJCXx8IHUtPnBsYW5lX2luZm8tPmRjYy5tZXRhX3BpdGNoICE9IHUtPnN1
cmZhY2UtPmRjYy5tZXRhX3BpdGNoKSB7CkBAIC0xNjIxLDYgKzE2MTYsMTIgQEAgc3RhdGljIGVu
dW0gc3VyZmFjZV91cGRhdGVfdHlwZSBkZXRfc3VyZmFjZV91cGRhdGUoY29uc3Qgc3RydWN0IGRj
ICpkYywKIAkJCXVwZGF0ZV9mbGFncy0+Yml0cy5nYW1tYV9jaGFuZ2UgPSAxOwogCX0KIAorCWlm
ICh1LT5oZHJfbXVsdC52YWx1ZSkKKwkJaWYgKHUtPmhkcl9tdWx0LnZhbHVlICE9IHUtPnN1cmZh
Y2UtPmhkcl9tdWx0LnZhbHVlKSB7CisJCQl1cGRhdGVfZmxhZ3MtPmJpdHMuaGRyX211bHQgPSAx
OworCQkJZWxldmF0ZV91cGRhdGVfdHlwZSgmb3ZlcmFsbF90eXBlLCBVUERBVEVfVFlQRV9NRUQp
OworCQl9CisKIAlpZiAodXBkYXRlX2ZsYWdzLT5iaXRzLmluX3RyYW5zZmVyX2Z1bmNfY2hhbmdl
KSB7CiAJCXR5cGUgPSBVUERBVEVfVFlQRV9NRUQ7CiAJCWVsZXZhdGVfdXBkYXRlX3R5cGUoJm92
ZXJhbGxfdHlwZSwgdHlwZSk7CkBAIC0xODAyLDggKzE4MDMsNiBAQCBzdGF0aWMgdm9pZCBjb3B5
X3N1cmZhY2VfdXBkYXRlX3RvX3BsYW5lKAogCQkJCXNyZl91cGRhdGUtPnBsYW5lX2luZm8tPmds
b2JhbF9hbHBoYV92YWx1ZTsKIAkJc3VyZmFjZS0+ZGNjID0KIAkJCQlzcmZfdXBkYXRlLT5wbGFu
ZV9pbmZvLT5kY2M7Ci0JCXN1cmZhY2UtPnNkcl93aGl0ZV9sZXZlbCA9Ci0JCQkJc3JmX3VwZGF0
ZS0+cGxhbmVfaW5mby0+c2RyX3doaXRlX2xldmVsOwogCQlzdXJmYWNlLT5sYXllcl9pbmRleCA9
CiAJCQkJc3JmX3VwZGF0ZS0+cGxhbmVfaW5mby0+bGF5ZXJfaW5kZXg7CiAJfQpAQCAtMTg0OCw2
ICsxODQ3LDEwIEBAIHN0YXRpYyB2b2lkIGNvcHlfc3VyZmFjZV91cGRhdGVfdG9fcGxhbmUoCiAJ
CW1lbWNweShzdXJmYWNlLT5sdXQzZF9mdW5jLCBzcmZfdXBkYXRlLT5sdXQzZF9mdW5jLAogCQlz
aXplb2YoKnN1cmZhY2UtPmx1dDNkX2Z1bmMpKTsKIAorCWlmIChzcmZfdXBkYXRlLT5oZHJfbXVs
dC52YWx1ZSkKKwkJc3VyZmFjZS0+aGRyX211bHQgPQorCQkJCXNyZl91cGRhdGUtPmhkcl9tdWx0
OworCiAJaWYgKHNyZl91cGRhdGUtPmJsZW5kX3RmICYmCiAJCQkoc3VyZmFjZS0+YmxlbmRfdGYg
IT0KIAkJCXNyZl91cGRhdGUtPmJsZW5kX3RmKSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvZGlzcGxheS9kYy9kYy5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2Rj
LmgKaW5kZXggZGE5Y2I3ZGQyMmU2Li4zY2IzNjE5MTdiNGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvZGlzcGxheS9kYy9kYy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlz
cGxheS9kYy9kYy5oCkBAIC02NjcsNyArNjY3LDcgQEAgdW5pb24gZGNfM2RsdXRfc3RhdGUgewog
c3RydWN0IGRjXzNkbHV0IHsKIAlzdHJ1Y3Qga3JlZiByZWZjb3VudDsKIAlzdHJ1Y3QgdGV0cmFo
ZWRyYWxfcGFyYW1zIGx1dF8zZDsKLQl1aW50MzJfdCBoZHJfbXVsdGlwbGllcjsKKwlzdHJ1Y3Qg
Zml4ZWQzMV8zMiBoZHJfbXVsdGlwbGllcjsKIAlib29sIGluaXRpYWxpemVkOyAvKnJlbW92ZSBh
ZnRlciBkaWFnIGZpeCovCiAJdW5pb24gZGNfM2RsdXRfc3RhdGUgc3RhdGU7CiAJc3RydWN0IGRj
X2NvbnRleHQgKmN0eDsKQEAgLTY5NCw3ICs2OTQsNyBAQCB1bmlvbiBzdXJmYWNlX3VwZGF0ZV9m
bGFncyB7CiAJCXVpbnQzMl90IGhvcml6b250YWxfbWlycm9yX2NoYW5nZToxOwogCQl1aW50MzJf
dCBwZXJfcGl4ZWxfYWxwaGFfY2hhbmdlOjE7CiAJCXVpbnQzMl90IGdsb2JhbF9hbHBoYV9jaGFu
Z2U6MTsKLQkJdWludDMyX3Qgc2RyX3doaXRlX2xldmVsOjE7CisJCXVpbnQzMl90IGhkcl9tdWx0
OjE7CiAJCXVpbnQzMl90IHJvdGF0aW9uX2NoYW5nZToxOwogCQl1aW50MzJfdCBzd2l6emxlX2No
YW5nZToxOwogCQl1aW50MzJfdCBzY2FsaW5nX2NoYW5nZToxOwpAQCAtNzM4LDcgKzczOCw3IEBA
IHN0cnVjdCBkY19wbGFuZV9zdGF0ZSB7CiAJc3RydWN0IGRjX2JpYXNfYW5kX3NjYWxlICpiaWFz
X2FuZF9zY2FsZTsKIAlzdHJ1Y3QgZGNfY3NjX3RyYW5zZm9ybSBpbnB1dF9jc2NfY29sb3JfbWF0
cml4OwogCXN0cnVjdCBmaXhlZDMxXzMyIGNvZWZmX3JlZHVjdGlvbl9mYWN0b3I7Ci0JdWludDMy
X3Qgc2RyX3doaXRlX2xldmVsOworCXN0cnVjdCBmaXhlZDMxXzMyIGhkcl9tdWx0OwogCiAJLy8g
VE9ETzogTm8gbG9uZ2VyIHVzZWQsIHJlbW92ZQogCXN0cnVjdCBkY19oZHJfc3RhdGljX21ldGFk
YXRhIGhkcl9zdGF0aWNfY3R4OwpAQCAtNzgzLDcgKzc4Myw2IEBAIHN0cnVjdCBkY19wbGFuZV9p
bmZvIHsKIAllbnVtIGRjX3JvdGF0aW9uX2FuZ2xlIHJvdGF0aW9uOwogCWVudW0gcGxhbmVfc3Rl
cmVvX2Zvcm1hdCBzdGVyZW9fZm9ybWF0OwogCWVudW0gZGNfY29sb3Jfc3BhY2UgY29sb3Jfc3Bh
Y2U7Ci0JdW5zaWduZWQgaW50IHNkcl93aGl0ZV9sZXZlbDsKIAlib29sIGhvcml6b250YWxfbWly
cm9yOwogCWJvb2wgdmlzaWJsZTsKIAlib29sIHBlcl9waXhlbF9hbHBoYTsKQEAgLTgwNyw3ICs4
MDYsNyBAQCBzdHJ1Y3QgZGNfc3VyZmFjZV91cGRhdGUgewogCWNvbnN0IHN0cnVjdCBkY19mbGlw
X2FkZHJzICpmbGlwX2FkZHI7CiAJY29uc3Qgc3RydWN0IGRjX3BsYW5lX2luZm8gKnBsYW5lX2lu
Zm87CiAJY29uc3Qgc3RydWN0IGRjX3NjYWxpbmdfaW5mbyAqc2NhbGluZ19pbmZvOwotCisJc3Ry
dWN0IGZpeGVkMzFfMzIgaGRyX211bHQ7CiAJLyogZm9sbG93aW5nIHVwZGF0ZXMgcmVxdWlyZSBh
bGxvYy9zbGVlcC9zcGluIHRoYXQgaXMgbm90IGlzciBzYWZlLAogCSAqIG51bGwgbWVhbnMgbm8g
dXBkYXRlcwogCSAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2Rj
L2RjbjEwL2RjbjEwX2h3X3NlcXVlbmNlci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5
L2RjL2RjbjEwL2RjbjEwX2h3X3NlcXVlbmNlci5jCmluZGV4IGFkYmE3NjdjY2YyZS4uZjIxYTM4
NWE5MzZmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMTAv
ZGNuMTBfaHdfc2VxdWVuY2VyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2Rj
L2RjbjEwL2RjbjEwX2h3X3NlcXVlbmNlci5jCkBAIC0yNDU3LDE2ICsyNDU3LDIwIEBAIHN0YXRp
YyB2b2lkIGRjbjEwX2JsYW5rX3BpeGVsX2RhdGEoCiAKIHZvaWQgc2V0X2hkcl9tdWx0aXBsaWVy
KHN0cnVjdCBwaXBlX2N0eCAqcGlwZV9jdHgpCiB7Ci0Jc3RydWN0IGZpeGVkMzFfMzIgbXVsdGlw
bGllciA9IGRjX2ZpeHB0X2Zyb21fZnJhY3Rpb24oCi0JCQlwaXBlX2N0eC0+cGxhbmVfc3RhdGUt
PnNkcl93aGl0ZV9sZXZlbCwgODApOworCXN0cnVjdCBmaXhlZDMxXzMyIG11bHRpcGxpZXIgPSBw
aXBlX2N0eC0+cGxhbmVfc3RhdGUtPmhkcl9tdWx0OwogCXVpbnQzMl90IGh3X211bHQgPSAweDFm
MDAwOyAvLyAxLjAgZGVmYXVsdCBtdWx0aXBsaWVyCiAJc3RydWN0IGN1c3RvbV9mbG9hdF9mb3Jt
YXQgZm10OworCWJvb2wgbXVsdF9uZWdhdGl2ZTsgLy8gVHJ1ZSBpZiBmaXhlZDMxXzMyIHNpZ24g
Yml0IGluZGljYXRlcyBuZWdhdGl2ZSB2YWx1ZQorCXVpbnQzMl90IG11bHRfaW50OyAvLyBpbnQg
Y29tcG9uZW50IG9mIGZpeGVkMzFfMzIKIAogCWZtdC5leHBvbmVudGFfYml0cyA9IDY7CiAJZm10
Lm1hbnRpc3NhX2JpdHMgPSAxMjsKIAlmbXQuc2lnbiA9IHRydWU7CiAKLQlpZiAocGlwZV9jdHgt
PnBsYW5lX3N0YXRlLT5zZHJfd2hpdGVfbGV2ZWwgPiA4MCkKKwltdWx0X25lZ2F0aXZlID0gbXVs
dGlwbGllci52YWx1ZSA+PiA2MyAhPSAwOworCW11bHRfaW50ID0gbXVsdGlwbGllci52YWx1ZSA+
PiAzMjsKKworCWlmIChtdWx0X2ludCAmJiAhbXVsdF9uZWdhdGl2ZSkgLy8gQ2hlY2sgaWYgZ3Jl
YXRlciB0aGFuIDEKIAkJY29udmVydF90b19jdXN0b21fZmxvYXRfZm9ybWF0KG11bHRpcGxpZXIs
ICZmbXQsICZod19tdWx0KTsKIAogCXBpcGVfY3R4LT5wbGFuZV9yZXMuZHBwLT5mdW5jcy0+ZHBw
X3NldF9oZHJfbXVsdGlwbGllcigKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlz
cGxheS9kYy9kY24yMC9kY24yMF9od3NlcS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5
L2RjL2RjbjIwL2RjbjIwX2h3c2VxLmMKaW5kZXggNGQzNmI5ZTQxNWYxLi44NjgwOTlmYmU4YmEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9o
d3NlcS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9o
d3NlcS5jCkBAIC03MzQsMTQgKzczNCw2IEBAIGJvb2wgZGNuMjBfc2V0X3NoYXBlcl8zZGx1dCgK
IAllbHNlCiAJCXJlc3VsdCA9IGRwcF9iYXNlLT5mdW5jcy0+ZHBwX3Byb2dyYW1fM2RsdXQoZHBw
X2Jhc2UsIE5VTEwpOwogCi0JaWYgKHBsYW5lX3N0YXRlLT5sdXQzZF9mdW5jICYmCi0JCXBsYW5l
X3N0YXRlLT5sdXQzZF9mdW5jLT5zdGF0ZS5iaXRzLmluaXRpYWxpemVkID09IDEgJiYKLQkJcGxh
bmVfc3RhdGUtPmx1dDNkX2Z1bmMtPmhkcl9tdWx0aXBsaWVyICE9IDApCi0JCWRwcF9iYXNlLT5m
dW5jcy0+ZHBwX3NldF9oZHJfbXVsdGlwbGllcihkcHBfYmFzZSwKLQkJCQlwbGFuZV9zdGF0ZS0+
bHV0M2RfZnVuYy0+aGRyX211bHRpcGxpZXIpOwotCWVsc2UKLQkJZHBwX2Jhc2UtPmZ1bmNzLT5k
cHBfc2V0X2hkcl9tdWx0aXBsaWVyKGRwcF9iYXNlLCAweDFmMDAwKTsKLQogCXJldHVybiByZXN1
bHQ7CiB9CiAKQEAgLTEzODIsNyArMTM3NCw3IEBAIHN0YXRpYyB2b2lkIGRjbjIwX3Byb2dyYW1f
cGlwZSgKIAkJZGNuMjBfdXBkYXRlX2RjaHVicF9kcHAoZGMsIHBpcGVfY3R4LCBjb250ZXh0KTsK
IAogCWlmIChwaXBlX2N0eC0+dXBkYXRlX2ZsYWdzLmJpdHMuZW5hYmxlCi0JCQl8fCBwaXBlX2N0
eC0+cGxhbmVfc3RhdGUtPnVwZGF0ZV9mbGFncy5iaXRzLnNkcl93aGl0ZV9sZXZlbCkKKwkJCXx8
IHBpcGVfY3R4LT5wbGFuZV9zdGF0ZS0+dXBkYXRlX2ZsYWdzLmJpdHMuaGRyX211bHQpCiAJCXNl
dF9oZHJfbXVsdGlwbGllcihwaXBlX2N0eCk7CiAKIAlpZiAocGlwZV9jdHgtPnVwZGF0ZV9mbGFn
cy5iaXRzLmVuYWJsZSB8fAotLSAKMi4yNC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2FtZC1nZng=
