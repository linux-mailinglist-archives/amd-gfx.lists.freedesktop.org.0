Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0A837389BD8
	for <lists+amd-gfx@lfdr.de>; Thu, 20 May 2021 05:29:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B7F0E6E830;
	Thu, 20 May 2021 03:29:33 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM12-MW2-obe.outbound.protection.outlook.com
 (mail-mw2nam12on2077.outbound.protection.outlook.com [40.107.244.77])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 758666E830;
 Thu, 20 May 2021 03:29:31 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=aOckD7Xp90Fdhg772ZkNymtsEKESEqmagiPyc9hRV9LvXeCyaCMXzm76smM/GsuIRfJ3/4JGcvEObwU25AbfMOGYn/U+ucG7ToI98jDpGh96bwHdXOqdfIigEiA8geBQZOSNnZm3w93dgC/8YXOfDssIjog7yuwntkbGylE/JcCBJCZxzyB/Xuxiz+I+Wu5YCq6Pf/u2IUem08dpNmMnvmSvXL+aau47v4Ny6jCfOQgxT/V8ggTv2zq1wg07mlgfarJ39rJPzAcNBT2Z+n0lx0lOtNUPTxm91DFG6gE4JN8SEWziRY+y4j3usSen/A8grvJtfpHYICXHfejIBKDyeg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=PjBxnD2uzjHC8gnWYk/egZD8qf1wf2yN/u0ScxXNji8=;
 b=O9speyRTwgD1SKnCLIFWfrUPMgYo5cFcN/E30G51e4W047RlbnJXu7xUiAo4Q3W54q5zFOogyR8WeIDqCTFeBEiXO0eNkSCxd5KGly81rwWU6Po/cg18GSNlYBvVjG1+c+iO/U6LrTpORgFISA3Sj+qGAducHoVelbZTmCOtFNDcoZ3s2SvoayS6rLvd9sjv6k6mKG+ERrK9qNihRD325EGQedIRCiYxvtxRbnf+OjYuhndjfvEFubbc7ro2C9MZsccIIUD1PKKy+4lk8SPZlIP7HnAqK+r7WZUheHIK2jKTBKIGp/9XdqsLyQMCkAaEqcnFXuwg1sSygqcWMsfmEg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=PjBxnD2uzjHC8gnWYk/egZD8qf1wf2yN/u0ScxXNji8=;
 b=BIqO7WId9ZV8GGFl26qEX7CnPswtcaF1qolSaA1oRJcad1Pp8BH2yedJhEKt8ZAwMHBppC6Vz2CnVI4wnRtWgmuAh/n/KguuX+Xez0nVoSh5kOqdtAnqdR72IxMkTyh4JlQ6VZEUlqZIi/AqlHDAY723MYDgTKvsxJnYUxVKHSc=
Authentication-Results: amd.com; dkim=none (message not signed)
 header.d=none;amd.com; dmarc=none action=none header.from=amd.com;
Received: from BN9PR12MB5129.namprd12.prod.outlook.com (2603:10b6:408:136::12)
 by BN9PR12MB5097.namprd12.prod.outlook.com (2603:10b6:408:136::11)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4129.26; Thu, 20 May
 2021 03:29:28 +0000
Received: from BN9PR12MB5129.namprd12.prod.outlook.com
 ([fe80::3c78:e58b:fba7:b8dd]) by BN9PR12MB5129.namprd12.prod.outlook.com
 ([fe80::3c78:e58b:fba7:b8dd%6]) with mapi id 15.20.4129.033; Thu, 20 May 2021
 03:29:28 +0000
Subject: Re: [PATCH] drm/amdgpu: Add early fini callback
To: Andrey Grodzovsky <andrey.grodzovsky@amd.com>,
 dri-devel@lists.freedesktop.org, amd-gfx@lists.freedesktop.org,
 linux-pci@vger.kernel.org, ckoenig.leichtzumerken@gmail.com,
 daniel.vetter@ffwll.ch, Harry.Wentland@amd.com
References: <d17c82ae-ce00-9496-b2ed-8761814f51fe@amd.com>
 <20210520032057.497334-1-andrey.grodzovsky@amd.com>
From: Felix Kuehling <felix.kuehling@amd.com>
Message-ID: <ab262224-fd1d-31a2-72cd-54174fba17ae@amd.com>
Date: Wed, 19 May 2021 23:29:26 -0400
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.8.1
In-Reply-To: <20210520032057.497334-1-andrey.grodzovsky@amd.com>
Content-Language: en-US
X-Originating-IP: [142.186.56.206]
X-ClientProxiedBy: YT1PR01CA0123.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b01:2c::32) To BN9PR12MB5129.namprd12.prod.outlook.com
 (2603:10b6:408:136::12)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from [192.168.2.100] (142.186.56.206) by
 YT1PR01CA0123.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01:2c::32) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.4108.31 via Frontend Transport; Thu, 20 May 2021 03:29:27 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 8de8dd8c-c842-4cf3-48c9-08d91b3f791f
X-MS-TrafficTypeDiagnostic: BN9PR12MB5097:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <BN9PR12MB5097F622CD5480AEABFF7F96922A9@BN9PR12MB5097.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:551;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 8KCHFAWNSiDP07fFrCHoPR7DX80iQERBuqvup6j6Xxo8Zb2fZV8f3DOAPNuAqLNmzVl1PhRTmVQqfJqneNx8s37SBnToW7WJ9uNuyxf2uQnm0Wf4LuVjJtsBwBSDs6+PmNTXIDKHWwVehVkmlKQ1J2RAODZOjFR9dAAc0+93B6M8TcTkLM/UJ/oVyax47sxc6js8iSv5PEslrDEqWxyg9iWUQXkiYL5JBOVk4fYLqkILqqaJrvwlZzQLZJsWmsNfPmomJAm1ATkX8GCglxEkgo9Wfq4YABDjw4ByBkjqOUMjt1/Hw0BcT6R5LGK/qOXIC3lxcXzwFRVDxeFlr/0GOPmuDBVlrKq105qrCSviCfTrsMKu9H5yJdMGxpivdlCFyCHgYuxdgHuxF4sCZaBofJtGwABSAsSTaeRRCdnviRHou3uDU3oM5BqRl0v/RdMw9aKF+LzU1JE3m+lKrkiwSWzgKcSo1ZlKUQAV7huHZq/8ptsSd3KcAK9/+H++dpbZfJurq/rTPjmQ2DmzBX7ZsqLWspXOckqcoEZxA3iheuIP/94qVnJUH9asp/Po6hSph6EZuDgXnukk+lEUAQ5sW9L4k4t1GXKHPzeH9OUzK9bM5EgcIv88WIw3wnWzBZaKz++um/PUX6BSpjpnIDk7mDNYnegp/EtUkLmMeTjfTDF3Ifril0iiZ2067TMQrBs9
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:BN9PR12MB5129.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(39860400002)(136003)(396003)(366004)(346002)(376002)(2616005)(956004)(2906002)(4326008)(44832011)(66946007)(66476007)(66556008)(8936002)(26005)(5660300002)(6486002)(16526019)(8676002)(186003)(478600001)(66574015)(86362001)(83380400001)(31686004)(31696002)(316002)(16576012)(6636002)(38100700002)(36756003)(43740500002)(45980500001);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: =?utf-8?B?UUFTOXJXdHljb3U2ZHpiZ216alN5RWxBNXQvUlJFN0VFUTkzWE44My9GNzli?=
 =?utf-8?B?dk92a2JMcEZZemVxeTZuT2FEcStlVVBlZmJ3Vy9UekRVZXJ3WVA3REs5RmxC?=
 =?utf-8?B?Y1FuMkVjWkNxeWxUb3pTQmQ2TVlRMFhiZExEZVRHdEhLaUt5aFBZVFdsZjYv?=
 =?utf-8?B?NmU5L001QjhWOHRFS1BlY2ttZWRnSHl4c3Q4VVlRRTdvbVlkT2RQdmJRVS84?=
 =?utf-8?B?RkRXZmNlTHpTNm5La3NGR1hIUnZUaVNzdjhzdjhscjVYcHZqV3UvS005eHAy?=
 =?utf-8?B?OVBxNWN4WnlWeEpLMG9YbGtiK2x2YVFFT2ljMkY3bXJEZldaN0FwR21IQnBF?=
 =?utf-8?B?eG1PYkhCMWo5YytkdThuR0tRSVg1b0hiVUQwYXh3R1kvOVF2QzdsNk9KU2xo?=
 =?utf-8?B?a3BMZW5wejhFckNhOUVvVUdsOVZhTTYwYVZHYmRPQWljcFFzQ2k3ZkpVLzRn?=
 =?utf-8?B?Ym9PN2k1WitRNllJZ2tPa1RlL01LbFhJMXpmaTljRUhDSXQ4Q0orNEpqcUd6?=
 =?utf-8?B?M3YyUWdFMWRidGpLY0ZkTUpOMVJqOGxDbXc4eWhRcHllYm85L283L2F3Sy9u?=
 =?utf-8?B?NElvazFib2xsc2dZcHpCdFhMb1hTSGpHcmJhUWlEYWhKZ0ZWdU1SME9kdHFt?=
 =?utf-8?B?V3ZlZnI0S0tyNGJMWmcwT3Q0NlErTUozK0UwaE9sUDFFaXlxSmVEZFNBOVZq?=
 =?utf-8?B?OW1xeDkvblNHTnBZNjJ3TE11dm83MXppYmFuMUM2Yk1FU2tBZk5LQWxpbjBR?=
 =?utf-8?B?RDlSMjBOTzd6dzBZY3RwSTdYRVM3cmFEeUJsUHlLZ0NXZkZFMEc5RUsyMGxF?=
 =?utf-8?B?ZDc1N0hoNWVCOWwrd210b2xHd0drMWZiVm8xdDdsOVkrTTRtVTRDL0hMMHZt?=
 =?utf-8?B?MlVNblNvMThNcFFTRWtxbDJhZ2k3UVJ2dENZMGdJaksxQnNBQThEVzRYQjlI?=
 =?utf-8?B?cXlQWjNGb2FyaEhhT1JkQWwzTDFPMHdZcll6aHBjL3ZTRTM4QkkvU0Q3bUNp?=
 =?utf-8?B?R3pkV0EwUGtRUDhDMm9BUVcyRTIyWGo0U1FFd09yRFNjbDM4S212Mk9aNVF6?=
 =?utf-8?B?cTBkbWFGZzFGLzFxdnlnQWNCb0dpYWlTT2VkTXdDRytseTlkZEIrZ3ZHWktO?=
 =?utf-8?B?U0VGOHg2TWRxOG1PVVNBZndkamE3UFYyd0NvRnFZTy9NbTdycnFOWjhhMDhZ?=
 =?utf-8?B?bE1NVzFJOXRhWHJaTno0eWZmZ3VXZE5XZzc1c3ViZGxnN3Q2OXpSVkpSeHVK?=
 =?utf-8?B?SnpoUFFrMS8rY3Q0eHk5c2xnNk05b3FWeEc3Mk9nTy8yQlJLNDZ0TzgzS1Z2?=
 =?utf-8?B?VWM2OFZweDYzcWs5SDlZUXJBRzNpQTFGMThDU3BvMHZhYlhETXp3OHZtcnBl?=
 =?utf-8?B?RjU4ck91NXgrUnVyQUpaTkFGU1lkbmQ2cVZObWNoK3lnN056bzBlY0t6SkRv?=
 =?utf-8?B?a09kcml6YXBEK0pxM0ZwWExHOXVjWkVwakRxYkFaVGtIRnVHUlZtVzVvK1du?=
 =?utf-8?B?dGFsOWtvSkdsR3ZPbmZaTGlYNmVZREtSUmNzeG5MRzUvbWNTMTBaMCtiRkZZ?=
 =?utf-8?B?R3A5VHBqZHpJN1kyVVhwN0haUlFhT1ZubGdPUHAvb1FmaUhBUzNEV2ZwUlo4?=
 =?utf-8?B?OHM2TGxHSFcrMUY4TFlxcHhyLzh6amhwV1pvMFdhREFMSGxnS1FrVEVSaVZE?=
 =?utf-8?B?SGkvbVY1UjBvMFhTd240WEJvdXJMOVZmVmFnN2NIU1JxWGlaNjJFbEZFc254?=
 =?utf-8?Q?PtPkVlZEtvWUtkFIsDM2aY0mvBFXjFXOI8HTzdZ?=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 8de8dd8c-c842-4cf3-48c9-08d91b3f791f
X-MS-Exchange-CrossTenant-AuthSource: BN9PR12MB5129.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 20 May 2021 03:29:28.0122 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: UBSFNuOr4HKPB3j/PV/ol0MZoGNywMgJkiTUc8GzzOfuvPn9AoUPD0YBz6R+9xxrE3Tw9IweYu2GJ7TwXcCY4Q==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN9PR12MB5097
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alexander.Deucher@amd.com, gregkh@linuxfoundation.org, ppaalanen@gmail.com,
 helgaas@kernel.org,
 =?UTF-8?Q?Christian_K=c3=b6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMjAyMS0wNS0xOSB1bSAxMToyMCBwLm0uIHNjaHJpZWIgQW5kcmV5IEdyb2R6b3Zza3k6Cj4g
VXNlIGl0IHRvIGNhbGwgZGlzcGx5IGNvZGUgZGVwZW5kZW50IG9uIGRldmljZS0+ZHJ2X2RhdGEK
PiBiZWZvcmUgaXQncyBzZXQgdG8gTlVMTCBvbiBkZXZpY2UgdW5wbHVnCj4KPiB2NToKPiBNb3Zl
IEhXIGZpbmlsaXphdGlvbiBpbnRvIHRoaXMgY2FsbGJhY2sgdG8gcHJldmVudCBNTUlPIGFjY2Vz
c2VzCj4gcG9zdCBjcGkgcmVtb3ZlLgo+Cj4gdjc6Cj4gU3BsaXQga2ZkIHN1c3BlbmQgZnJvbSBk
ZXZpY2UgZXhpdCB0byBleHBkaXRlIEhXIHJlbGF0ZWQKPiBzdHVmZiB0byBhbWRncHVfcGNpX3Jl
bW92ZQo+Cj4gdjg6Cj4gU3F1YXNoIHByZXZpb3VzIEtGRCBjb21taXQgaW50byB0aGlzIGNvbW1p
dCB0byBhdm9pZCBjb21waWxlIGJyZWFrLgo+Cj4gU2lnbmVkLW9mZi1ieTogQW5kcmV5IEdyb2R6
b3Zza3kgPGFuZHJleS5ncm9kem92c2t5QGFtZC5jb20+Cj4gQWNrZWQtYnk6IENocmlzdGlhbiBL
w7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KClNlZSBvbmUgY29zbWV0aWMgY29tbWVu
dCBpbmxpbmUuIFdpdGggdGhhdCBmaXhlZCB0aGUgcGF0Y2ggaXMKClJldmlld2VkLWJ5OiBGZWxp
eCBLdWVobGluZyA8RmVsaXguS3VlaGxpbmdAYW1kLmNvbT4KCgo+IC0tLQo+ICBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkLmMgICAgfCAgMiArLQo+ICBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkLmggICAgfCAgMiArLQo+ICBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMgICAgfCA1OSArKysrKysrKysrKysrLS0t
LS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2UuYyAgICAgICB8ICAz
ICstCj4gIC4uLi9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG0uYyB8IDEy
ICsrKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2FtZF9zaGFyZWQuaCAgICAgIHwg
IDIgKwo+ICA2IGZpbGVzIGNoYW5nZWQsIDU2IGluc2VydGlvbnMoKyksIDI0IGRlbGV0aW9ucygt
KQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRr
ZmQuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmQuYwo+IGluZGV4
IDVmNjY5NmEzYzc3OC4uMmIwNmRlZTlhMGNlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9hbWRrZmQuYwo+IEBAIC0xNzAsNyArMTcwLDcgQEAgdm9pZCBhbWRncHVf
YW1ka2ZkX2RldmljZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAJfQo+ICB9
Cj4gIAo+IC12b2lkIGFtZGdwdV9hbWRrZmRfZGV2aWNlX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpCj4gK3ZvaWQgYW1kZ3B1X2FtZGtmZF9kZXZpY2VfZmluaV9zdyhzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldikKPiAgewo+ICAJaWYgKGFkZXYtPmtmZC5kZXYpIHsKPiAgCQlrZ2Qy
a2ZkX2RldmljZV9leGl0KGFkZXYtPmtmZC5kZXYpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfYW1ka2ZkLmgKPiBpbmRleCA1ZmZiMDdiMDI4MTAuLmQ4YTUzN2U4YWVhNSAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkLmgK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkLmgKPiBAQCAt
MTI3LDcgKzEyNyw3IEBAIHZvaWQgYW1kZ3B1X2FtZGtmZF9pbnRlcnJ1cHQoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYsCj4gIAkJCWNvbnN0IHZvaWQgKmloX3JpbmdfZW50cnkpOwo+ICB2b2lk
IGFtZGdwdV9hbWRrZmRfZGV2aWNlX3Byb2JlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsK
PiAgdm9pZCBhbWRncHVfYW1ka2ZkX2RldmljZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KTsKPiAtdm9pZCBhbWRncHVfYW1ka2ZkX2RldmljZV9maW5pKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KTsKPiArdm9pZCBhbWRncHVfYW1ka2ZkX2RldmljZV9maW5pX3N3KHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2KTsKPiAgaW50IGFtZGdwdV9hbWRrZmRfc3VibWl0X2liKHN0cnVj
dCBrZ2RfZGV2ICprZ2QsIGVudW0ga2dkX2VuZ2luZV90eXBlIGVuZ2luZSwKPiAgCQkJCXVpbnQz
Ml90IHZtaWQsIHVpbnQ2NF90IGdwdV9hZGRyLAo+ICAJCQkJdWludDMyX3QgKmliX2NtZCwgdWlu
dDMyX3QgaWJfbGVuKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rldmlj
ZS5jCj4gaW5kZXggOGJlZTk1YWQzMmQ5Li5iYzc1ZTM1ZGQ4ZDggMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCj4gQEAgLTI1NTgsMzQgKzI1NTgsMjYg
QEAgc3RhdGljIGludCBhbWRncHVfZGV2aWNlX2lwX2xhdGVfaW5pdChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldikKPiAgCXJldHVybiAwOwo+ICB9Cj4gIAo+IC0vKioKPiAtICogYW1kZ3B1X2Rl
dmljZV9pcF9maW5pIC0gcnVuIGZpbmkgZm9yIGhhcmR3YXJlIElQcwo+IC0gKgo+IC0gKiBAYWRl
djogYW1kZ3B1X2RldmljZSBwb2ludGVyCj4gLSAqCj4gLSAqIE1haW4gdGVhcmRvd24gcGFzcyBm
b3IgaGFyZHdhcmUgSVBzLiAgVGhlIGxpc3Qgb2YgYWxsIHRoZSBoYXJkd2FyZQo+IC0gKiBJUHMg
dGhhdCBtYWtlIHVwIHRoZSBhc2ljIGlzIHdhbGtlZCBhbmQgdGhlIGh3X2ZpbmkgYW5kIHN3X2Zp
bmkgY2FsbGJhY2tzCj4gLSAqIGFyZSBydW4uICBod19maW5pIHRlYXJzIGRvd24gdGhlIGhhcmR3
YXJlIGFzc29jaWF0ZWQgd2l0aCBlYWNoIElQCj4gLSAqIGFuZCBzd19maW5pIHRlYXJzIGRvd24g
YW55IHNvZnR3YXJlIHN0YXRlIGFzc29jaWF0ZWQgd2l0aCBlYWNoIElQLgo+IC0gKiBSZXR1cm5z
IDAgb24gc3VjY2VzcywgbmVnYXRpdmUgZXJyb3IgY29kZSBvbiBmYWlsdXJlLgo+IC0gKi8KPiAt
c3RhdGljIGludCBhbWRncHVfZGV2aWNlX2lwX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpCj4gK3N0YXRpYyBpbnQgYW1kZ3B1X2RldmljZV9pcF9maW5pX2Vhcmx5KHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2KQo+ICB7Cj4gIAlpbnQgaSwgcjsKPiAgCj4gLQlpZiAoYW1kZ3B1X3Ny
aW92X3ZmKGFkZXYpICYmIGFkZXYtPnZpcnQucmFzX2luaXRfZG9uZSkKPiAtCQlhbWRncHVfdmly
dF9yZWxlYXNlX3Jhc19lcnJfaGFuZGxlcl9kYXRhKGFkZXYpOwo+ICsJZm9yIChpID0gMDsgaSA8
IGFkZXYtPm51bV9pcF9ibG9ja3M7IGkrKykgewo+ICsJCWlmICghYWRldi0+aXBfYmxvY2tzW2ld
LnZlcnNpb24tPmZ1bmNzLT5lYXJseV9maW5pKQo+ICsJCQljb250aW51ZTsKPiAgCj4gLQlhbWRn
cHVfcmFzX3ByZV9maW5pKGFkZXYpOwo+ICsJCXIgPSBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lv
bi0+ZnVuY3MtPmVhcmx5X2ZpbmkoKHZvaWQgKilhZGV2KTsKPiArCQlpZiAocikgewo+ICsJCQlE
Uk1fREVCVUcoImVhcmx5X2Zpbmkgb2YgSVAgYmxvY2sgPCVzPiBmYWlsZWQgJWRcbiIsCj4gKwkJ
CQkgIGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT5mdW5jcy0+bmFtZSwgcik7Cj4gKwkJfQo+
ICsJfQo+ICAKPiAtCWlmIChhZGV2LT5nbWMueGdtaS5udW1fcGh5c2ljYWxfbm9kZXMgPiAxKQo+
IC0JCWFtZGdwdV94Z21pX3JlbW92ZV9kZXZpY2UoYWRldik7Cj4gKwlhbWRncHVfYW1ka2ZkX3N1
c3BlbmQoYWRldiwgZmFsc2UpOwo+ICAKPiAgCWFtZGdwdV9kZXZpY2Vfc2V0X3BnX3N0YXRlKGFk
ZXYsIEFNRF9QR19TVEFURV9VTkdBVEUpOwo+ICAJYW1kZ3B1X2RldmljZV9zZXRfY2dfc3RhdGUo
YWRldiwgQU1EX0NHX1NUQVRFX1VOR0FURSk7Cj4gIAo+IC0JYW1kZ3B1X2FtZGtmZF9kZXZpY2Vf
ZmluaShhZGV2KTsKPiAtCj4gIAkvKiBuZWVkIHRvIGRpc2FibGUgU01DIGZpcnN0ICovCj4gIAlm
b3IgKGkgPSAwOyBpIDwgYWRldi0+bnVtX2lwX2Jsb2NrczsgaSsrKSB7Cj4gIAkJaWYgKCFhZGV2
LT5pcF9ibG9ja3NbaV0uc3RhdHVzLmh3KQo+IEBAIC0yNjE2LDYgKzI2MDgsMzMgQEAgc3RhdGlj
IGludCBhbWRncHVfZGV2aWNlX2lwX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4g
IAkJYWRldi0+aXBfYmxvY2tzW2ldLnN0YXR1cy5odyA9IGZhbHNlOwo+ICAJfQo+ICAKPiArCXJl
dHVybiAwOwo+ICt9Cj4gKwo+ICsvKioKPiArICogYW1kZ3B1X2RldmljZV9pcF9maW5pIC0gcnVu
IGZpbmkgZm9yIGhhcmR3YXJlIElQcwo+ICsgKgo+ICsgKiBAYWRldjogYW1kZ3B1X2RldmljZSBw
b2ludGVyCj4gKyAqCj4gKyAqIE1haW4gdGVhcmRvd24gcGFzcyBmb3IgaGFyZHdhcmUgSVBzLiAg
VGhlIGxpc3Qgb2YgYWxsIHRoZSBoYXJkd2FyZQo+ICsgKiBJUHMgdGhhdCBtYWtlIHVwIHRoZSBh
c2ljIGlzIHdhbGtlZCBhbmQgdGhlIGh3X2ZpbmkgYW5kIHN3X2ZpbmkgY2FsbGJhY2tzCj4gKyAq
IGFyZSBydW4uICBod19maW5pIHRlYXJzIGRvd24gdGhlIGhhcmR3YXJlIGFzc29jaWF0ZWQgd2l0
aCBlYWNoIElQCj4gKyAqIGFuZCBzd19maW5pIHRlYXJzIGRvd24gYW55IHNvZnR3YXJlIHN0YXRl
IGFzc29jaWF0ZWQgd2l0aCBlYWNoIElQLgo+ICsgKiBSZXR1cm5zIDAgb24gc3VjY2VzcywgbmVn
YXRpdmUgZXJyb3IgY29kZSBvbiBmYWlsdXJlLgo+ICsgKi8KPiArc3RhdGljIGludCBhbWRncHVf
ZGV2aWNlX2lwX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gK3sKPiArCWludCBp
LCByOwo+ICsKPiArCWlmIChhbWRncHVfc3Jpb3ZfdmYoYWRldikgJiYgYWRldi0+dmlydC5yYXNf
aW5pdF9kb25lKQo+ICsJCWFtZGdwdV92aXJ0X3JlbGVhc2VfcmFzX2Vycl9oYW5kbGVyX2RhdGEo
YWRldik7Cj4gKwo+ICsJYW1kZ3B1X3Jhc19wcmVfZmluaShhZGV2KTsKPiArCj4gKwlpZiAoYWRl
di0+Z21jLnhnbWkubnVtX3BoeXNpY2FsX25vZGVzID4gMSkKPiArCQlhbWRncHVfeGdtaV9yZW1v
dmVfZGV2aWNlKGFkZXYpOwo+ICsKPiArCWFtZGdwdV9hbWRrZmRfZGV2aWNlX2Zpbmlfc3coYWRl
dik7Cj4gIAo+ICAJZm9yIChpID0gYWRldi0+bnVtX2lwX2Jsb2NrcyAtIDE7IGkgPj0gMDsgaS0t
KSB7Cj4gIAkJaWYgKCFhZGV2LT5pcF9ibG9ja3NbaV0uc3RhdHVzLnN3KQo+IEBAIC0zNjgxLDYg
KzM3MDAsOCBAQCB2b2lkIGFtZGdwdV9kZXZpY2VfZmluaV9odyhzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldikKPiAgCWFtZGdwdV9mYmRldl9maW5pKGFkZXYpOwo+ICAKPiAgCWFtZGdwdV9pcnFf
ZmluaV9odyhhZGV2KTsKPiArCj4gKwlhbWRncHVfZGV2aWNlX2lwX2ZpbmlfZWFybHkoYWRldik7
Cj4gIH0KPiAgCj4gIHZvaWQgYW1kZ3B1X2RldmljZV9maW5pX3N3KHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRf
ZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlLmMKPiBpbmRl
eCAzNTdiOWJmNjJhMWMuLmFiNmQyYTQzYzlhMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfZGV2aWNlLmMKPiBAQCAtODU4LDEwICs4NTgsMTEgQEAgYm9vbCBrZ2Qya2ZkX2Rl
dmljZV9pbml0KHN0cnVjdCBrZmRfZGV2ICprZmQsCj4gIAlyZXR1cm4ga2ZkLT5pbml0X2NvbXBs
ZXRlOwo+ICB9Cj4gIAo+ICsKPiArCj4gIHZvaWQga2dkMmtmZF9kZXZpY2VfZXhpdChzdHJ1Y3Qg
a2ZkX2RldiAqa2ZkKQoKVW5uZWNlc3Nhcnkgd2hpdGVzcGFjZSBjaGFuZ2UuCgpSZWdhcmRzLArC
oCBGZWxpeAoKCj4gIHsKPiAgCWlmIChrZmQtPmluaXRfY29tcGxldGUpIHsKPiAtCQlrZ2Qya2Zk
X3N1c3BlbmQoa2ZkLCBmYWxzZSk7Cj4gIAkJZGV2aWNlX3F1ZXVlX21hbmFnZXJfdW5pbml0KGtm
ZC0+ZHFtKTsKPiAgCQlrZmRfaW50ZXJydXB0X2V4aXQoa2ZkKTsKPiAgCQlrZmRfdG9wb2xvZ3lf
cmVtb3ZlX2RldmljZShrZmQpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rp
c3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5
L2FtZGdwdV9kbS9hbWRncHVfZG0uYwo+IGluZGV4IDljYTUxN2I2NTg1NC4uZjcxMTI4NjUyNjlh
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1k
Z3B1X2RtLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2Ft
ZGdwdV9kbS5jCj4gQEAgLTEyNTEsNiArMTI1MSwxNSBAQCBzdGF0aWMgaW50IGFtZGdwdV9kbV9p
bml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAJcmV0dXJuIC1FSU5WQUw7Cj4gIH0K
PiAgCj4gK3N0YXRpYyBpbnQgYW1kZ3B1X2RtX2Vhcmx5X2Zpbmkodm9pZCAqaGFuZGxlKQo+ICt7
Cj4gKwlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
KWhhbmRsZTsKPiArCj4gKwlhbWRncHVfZG1fYXVkaW9fZmluaShhZGV2KTsKPiArCj4gKwlyZXR1
cm4gMDsKPiArfQo+ICsKPiAgc3RhdGljIHZvaWQgYW1kZ3B1X2RtX2Zpbmkoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYpCj4gIHsKPiAgCWludCBpOwo+IEBAIC0xMjU5LDggKzEyNjgsNiBAQCBz
dGF0aWMgdm9pZCBhbWRncHVfZG1fZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAg
CQlkcm1fZW5jb2Rlcl9jbGVhbnVwKCZhZGV2LT5kbS5tc3RfZW5jb2RlcnNbaV0uYmFzZSk7Cj4g
IAl9Cj4gIAo+IC0JYW1kZ3B1X2RtX2F1ZGlvX2ZpbmkoYWRldik7Cj4gLQo+ICAJYW1kZ3B1X2Rt
X2Rlc3Ryb3lfZHJtX2RldmljZSgmYWRldi0+ZG0pOwo+ICAKPiAgI2lmIGRlZmluZWQoQ09ORklH
X0RSTV9BTURfU0VDVVJFX0RJU1BMQVkpCj4gQEAgLTIyOTgsNiArMjMwNSw3IEBAIHN0YXRpYyBj
b25zdCBzdHJ1Y3QgYW1kX2lwX2Z1bmNzIGFtZGdwdV9kbV9mdW5jcyA9IHsKPiAgCS5sYXRlX2lu
aXQgPSBkbV9sYXRlX2luaXQsCj4gIAkuc3dfaW5pdCA9IGRtX3N3X2luaXQsCj4gIAkuc3dfZmlu
aSA9IGRtX3N3X2ZpbmksCj4gKwkuZWFybHlfZmluaSA9IGFtZGdwdV9kbV9lYXJseV9maW5pLAo+
ICAJLmh3X2luaXQgPSBkbV9od19pbml0LAo+ICAJLmh3X2ZpbmkgPSBkbV9od19maW5pLAo+ICAJ
LnN1c3BlbmQgPSBkbV9zdXNwZW5kLAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2luY2x1ZGUvYW1kX3NoYXJlZC5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2FtZF9z
aGFyZWQuaAo+IGluZGV4IDQzZWQ2MjkxYjJiOC4uMWFkNTZkYTQ4NmU0IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvaW5jbHVkZS9hbWRfc2hhcmVkLmgKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2luY2x1ZGUvYW1kX3NoYXJlZC5oCj4gQEAgLTI0MCw2ICsyNDAsNyBAQCBl
bnVtIGFtZF9kcG1fZm9yY2VkX2xldmVsOwo+ICAgKiBAbGF0ZV9pbml0OiBzZXRzIHVwIGxhdGUg
ZHJpdmVyL2h3IHN0YXRlIChwb3N0IGh3X2luaXQpIC0gT3B0aW9uYWwKPiAgICogQHN3X2luaXQ6
IHNldHMgdXAgZHJpdmVyIHN0YXRlLCBkb2VzIG5vdCBjb25maWd1cmUgaHcKPiAgICogQHN3X2Zp
bmk6IHRlYXJzIGRvd24gZHJpdmVyIHN0YXRlLCBkb2VzIG5vdCBjb25maWd1cmUgaHcKPiArICog
QGVhcmx5X2Zpbmk6IHRlYXJzIGRvd24gc3R1ZmYgYmVmb3JlIGRldiBkZXRhY2hlZCBmcm9tIGRy
aXZlcgo+ICAgKiBAaHdfaW5pdDogc2V0cyB1cCB0aGUgaHcgc3RhdGUKPiAgICogQGh3X2Zpbmk6
IHRlYXJzIGRvd24gdGhlIGh3IHN0YXRlCj4gICAqIEBsYXRlX2Zpbmk6IGZpbmFsIGNsZWFudXAK
PiBAQCAtMjY4LDYgKzI2OSw3IEBAIHN0cnVjdCBhbWRfaXBfZnVuY3Mgewo+ICAJaW50ICgqbGF0
ZV9pbml0KSh2b2lkICpoYW5kbGUpOwo+ICAJaW50ICgqc3dfaW5pdCkodm9pZCAqaGFuZGxlKTsK
PiAgCWludCAoKnN3X2ZpbmkpKHZvaWQgKmhhbmRsZSk7Cj4gKwlpbnQgKCplYXJseV9maW5pKSh2
b2lkICpoYW5kbGUpOwo+ICAJaW50ICgqaHdfaW5pdCkodm9pZCAqaGFuZGxlKTsKPiAgCWludCAo
Kmh3X2ZpbmkpKHZvaWQgKmhhbmRsZSk7Cj4gIAl2b2lkICgqbGF0ZV9maW5pKSh2b2lkICpoYW5k
bGUpOwpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQt
Z2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZngK
