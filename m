Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B941A48F67
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:32:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5C70989C68;
	Mon, 17 Jun 2019 19:32:03 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x844.google.com (mail-qt1-x844.google.com
 [IPv6:2607:f8b0:4864:20::844])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6053B89C2A
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:31:48 +0000 (UTC)
Received: by mail-qt1-x844.google.com with SMTP id m29so12266159qtu.1
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:31:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=DiH2KF3l1cugZRPaZB0NSEkITn+YtgRTnHv8F5TJK3w=;
 b=WMQm38wZawQK0XeRsBZcQBiLsw9oeL4GlmI0wELRBp32A+658clrOeFDGFklrFCGsD
 stXjVjGcHfBz/SxkEVzjEnkZ2JqSt1YedxSw5aSjsDlYRe8f8/Mj3YG5OaGjm70Q62I5
 c/Qhw5QNXkhfBs6kUtsXZGYts30rZLBZYx5MTXxcczpv5HqVjBffnQrs4r3ec8hiEqXi
 sUc1AUUGrrHRTxYshtxnEM3pKb4TK3jjPR84pXpT7XjF2yg1UuyNf+UkDTiaenBmG8b6
 GUUVnr/rZKGBwCJu9865giRvG9FHfvplG5MPAPBRgeXDO8+vcXgDGyCOPoIOoqK0/zYO
 mUeg==
X-Gm-Message-State: APjAAAXt7ZbML3NPyD8roQP1jVcE8FOeCg0FrPptvkVHbe3oDfjZ/VwM
 RhWMtR2L7vLhcKatcCT8Uj9d/9CQ4DA=
X-Google-Smtp-Source: APXvYqyiNCCV4t8LhN7Z/2XFOMPwotKpS4Av3z15zbUoAJ4uf02UZre64i5mzgVwDjJZstOniH4L6w==
X-Received: by 2002:a0c:984a:: with SMTP id e10mr23273461qvd.57.1560799906904; 
 Mon, 17 Jun 2019 12:31:46 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id u2sm7474875qtj.97.2019.06.17.12.31.46
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:31:46 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 237/459] drm/amd/powerplay: add function
 display_configuration_changed for navi10
Date: Mon, 17 Jun 2019 14:30:04 -0500
Message-Id: <20190617193106.18231-38-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617193106.18231-1-alexander.deucher@amd.com>
References: <20190617193106.18231-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=DiH2KF3l1cugZRPaZB0NSEkITn+YtgRTnHv8F5TJK3w=;
 b=rnqDYK6BDHep7+h2xt/2dBUCaKSmiZWaq01gGakSLY2MuvHlJIBL7H1t8wtsIaD6dX
 CCaVwfTGRqQG+YCrGrGpjrAUpZ2DQkDgzqCeRjqhR8OyTSqdrYHkb/xzt1G301sE0swm
 9Tvo0bKOyI3Q8bmw4trumGcogJjmOTHiYnHS+3VUN02UqGbBftZY+A6ls+nJeBw8iS80
 kX5Lpky8ZlgBFyO+Bmw98riJMYSx497ZxGpTDmMSS53PxQD+JgQUVT4S0V2bREaqDlPq
 3dqe5A529dd5UgzTpvp5DsxtMv5+bXW1+XU8x3lC2ipc/iiMo7iYDP08tta8p3tidOW7
 h6/A==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>, Kevin Wang <kevin1.wang@amd.com>,
 Huang Rui <ray.huang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogS2V2aW4gV2FuZyA8a2V2aW4xLndhbmdAYW1kLmNvbT4KCjEuYWRkIGNhbGxiYWNrIGZ1
bmN0aW9uIHRvIHN1cHBvcnQgbmF2aTEwIGFzaWMuCjIuUmVtb3ZlIHVubmVjZXNzYXJ5IGxvZ2lj
YWwgY29kZS4KClNpZ25lZC1vZmYtYnk6IEtldmluIFdhbmcgPGtldmluMS53YW5nQGFtZC5jb20+
ClJldmlld2VkLWJ5OiBIdWFuZyBSdWkgPHJheS5odWFuZ0BhbWQuY29tPgpTaWduZWQtb2ZmLWJ5
OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogZHJpdmVycy9n
cHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jIHwgMjUgKysrKysrKysrKysrKysrKysr
KysrKwogZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211X3YxMV8wLmMgIHwgMTYgKysr
KysrKysrKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3ZlZ2EyMF9wcHQuYyB8
IDEwICstLS0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCA0MCBpbnNlcnRpb25zKCspLCAxMSBkZWxl
dGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZp
MTBfcHB0LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmMKaW5k
ZXggNTY5Zjc4OGNlMmY2Li43ZTdlMGE2MDRhZWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvcG93ZXJwbGF5L25hdmkxMF9wcHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bv
d2VycGxheS9uYXZpMTBfcHB0LmMKQEAgLTY3MSw2ICs2NzEsMzAgQEAgc3RhdGljIGludCBuYXZp
MTBfcHJlX2Rpc3BsYXlfY29uZmlnX2NoYW5nZWQoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpCiAJ
cmV0dXJuIHJldDsKIH0KIAorc3RhdGljIGludCBuYXZpMTBfZGlzcGxheV9jb25maWdfY2hhbmdl
ZChzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkKK3sKKwlpbnQgcmV0ID0gMDsKKworCWlmICgoc211
LT53YXRlcm1hcmtzX2JpdG1hcCAmIFdBVEVSTUFSS1NfRVhJU1QpICYmCisJICAgICEoc211LT53
YXRlcm1hcmtzX2JpdG1hcCAmIFdBVEVSTUFSS1NfTE9BREVEKSkgeworCQlyZXQgPSBzbXVfd3Jp
dGVfd2F0ZXJtYXJrc190YWJsZShzbXUpOworCQlpZiAocmV0KQorCQkJcmV0dXJuIHJldDsKKwor
CQlzbXUtPndhdGVybWFya3NfYml0bWFwIHw9IFdBVEVSTUFSS1NfTE9BREVEOworCX0KKworCWlm
ICgoc211LT53YXRlcm1hcmtzX2JpdG1hcCAmIFdBVEVSTUFSS1NfRVhJU1QpICYmCisJICAgIHNt
dV9mZWF0dXJlX2lzX3N1cHBvcnRlZChzbXUsIFNNVV9GRUFUVVJFX0RQTV9EQ0VGQ0xLX0JJVCkg
JiYKKwkgICAgc211X2ZlYXR1cmVfaXNfc3VwcG9ydGVkKHNtdSwgU01VX0ZFQVRVUkVfRFBNX1NP
Q0NMS19CSVQpKSB7CisJCXJldCA9IHNtdV9zZW5kX3NtY19tc2dfd2l0aF9wYXJhbShzbXUsIFNN
VV9NU0dfTnVtT2ZEaXNwbGF5cywKKwkJCQkJCSAgc211LT5kaXNwbGF5X2NvbmZpZy0+bnVtX2Rp
c3BsYXkpOworCQlpZiAocmV0KQorCQkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXR1cm4gcmV0Owor
fQogc3RhdGljIGNvbnN0IHN0cnVjdCBwcHRhYmxlX2Z1bmNzIG5hdmkxMF9wcHRfZnVuY3MgPSB7
CiAJLnRhYmxlc19pbml0ID0gbmF2aTEwX3RhYmxlc19pbml0LAogCS5hbGxvY19kcG1fY29udGV4
dCA9IG5hdmkxMF9hbGxvY2F0ZV9kcG1fY29udGV4dCwKQEAgLTY5MSw2ICs3MTUsNyBAQCBzdGF0
aWMgY29uc3Qgc3RydWN0IHBwdGFibGVfZnVuY3MgbmF2aTEwX3BwdF9mdW5jcyA9IHsKIAkucG9w
dWxhdGVfdW1kX3N0YXRlX2NsayA9IG5hdmkxMF9wb3B1bGF0ZV91bWRfc3RhdGVfY2xrLAogCS5n
ZXRfY2xvY2tfYnlfdHlwZV93aXRoX2xhdGVuY3kgPSBuYXZpMTBfZ2V0X2Nsb2NrX2J5X3R5cGVf
d2l0aF9sYXRlbmN5LAogCS5wcmVfZGlzcGxheV9jb25maWdfY2hhbmdlZCA9IG5hdmkxMF9wcmVf
ZGlzcGxheV9jb25maWdfY2hhbmdlZCwKKwkuZGlzcGxheV9jb25maWdfY2hhbmdlZCA9IG5hdmkx
MF9kaXNwbGF5X2NvbmZpZ19jaGFuZ2VkLAogfTsKIAogdm9pZCBuYXZpMTBfc2V0X3BwdF9mdW5j
cyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkv
c211X3YxMV8wLmMKaW5kZXggZmM1ZGY2OGRmNjk0Li45NTdmYjYzYjhkNWUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jCkBAIC03MTQsOSArNzE0LDIxIEBAIHN0
YXRpYyBpbnQgc211X3YxMV8wX3dyaXRlX3BwdGFibGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUp
CiAKIHN0YXRpYyBpbnQgc211X3YxMV8wX3dyaXRlX3dhdGVybWFya3NfdGFibGUoc3RydWN0IHNt
dV9jb250ZXh0ICpzbXUpCiB7Ci0JcmV0dXJuIHNtdV91cGRhdGVfdGFibGUoc211LCBTTVVfVEFC
TEVfV0FURVJNQVJLUywKLQkJCQlzbXUtPnNtdV90YWJsZS50YWJsZXNbU01VX1RBQkxFX1dBVEVS
TUFSS1NdLmNwdV9hZGRyLAorCWludCByZXQgPSAwOworCXN0cnVjdCBzbXVfdGFibGVfY29udGV4
dCAqc211X3RhYmxlID0gJnNtdS0+c211X3RhYmxlOworCXN0cnVjdCBzbXVfdGFibGUgKnRhYmxl
ID0gTlVMTDsKKworCXRhYmxlID0gJnNtdV90YWJsZS0+dGFibGVzW1NNVV9UQUJMRV9XQVRFUk1B
UktTXTsKKwlpZiAoIXRhYmxlKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWlmICghdGFibGUtPmNw
dV9hZGRyKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCXJldCA9IHNtdV91cGRhdGVfdGFibGUoc211
LCBTTVVfVEFCTEVfV0FURVJNQVJLUywgdGFibGUtPmNwdV9hZGRyLAogCQkJCXRydWUpOworCisJ
cmV0dXJuIHJldDsKIH0KIAogc3RhdGljIGludCBzbXVfdjExXzBfc2V0X2RlZXBfc2xlZXBfZGNl
ZmNsayhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgdWludDMyX3QgY2xrKQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jCmluZGV4IDFmMGY0ZDg1ZmUyMy4uNTVkMTY0
OWQ2MTExIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS92ZWdhMjBf
cHB0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jCkBA
IC0xOTkyLDE3ICsxOTkyLDkgQEAgc3RhdGljIGludCB2ZWdhMjBfZGlzcGxheV9jb25maWdfY2hh
bmdlZChzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkKIHsKIAlpbnQgcmV0ID0gMDsKIAotCWlmICgh
c211LT5mdW5jcykKLQkJcmV0dXJuIC1FSU5WQUw7Ci0KLQlpZiAoIXNtdS0+c211X2RwbS5kcG1f
Y29udGV4dCB8fAotCSAgICAhc211LT5zbXVfdGFibGUudGFibGVzIHx8Ci0JICAgICFzbXUtPnNt
dV90YWJsZS50YWJsZXNbVEFCTEVfV0FURVJNQVJLU10uY3B1X2FkZHIpCi0JCXJldHVybiAtRUlO
VkFMOwotCiAJaWYgKChzbXUtPndhdGVybWFya3NfYml0bWFwICYgV0FURVJNQVJLU19FWElTVCkg
JiYKIAkgICAgIShzbXUtPndhdGVybWFya3NfYml0bWFwICYgV0FURVJNQVJLU19MT0FERUQpKSB7
Ci0JCXJldCA9IHNtdS0+ZnVuY3MtPndyaXRlX3dhdGVybWFya3NfdGFibGUoc211KTsKKwkJcmV0
ID0gc211X3dyaXRlX3dhdGVybWFya3NfdGFibGUoc211KTsKIAkJaWYgKHJldCkgewogCQkJcHJf
ZXJyKCJGYWlsZWQgdG8gdXBkYXRlIFdNVEFCTEUhIik7CiAJCQlyZXR1cm4gcmV0OwotLSAKMi4y
MC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQt
Z2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
