Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DBB6B37359B
	for <lists+amd-gfx@lfdr.de>; Wed,  5 May 2021 09:30:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EB62D6E436;
	Wed,  5 May 2021 07:30:28 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM12-BN8-obe.outbound.protection.outlook.com
 (mail-bn8nam12on2068.outbound.protection.outlook.com [40.107.237.68])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 47DE96E42D
 for <amd-gfx@lists.freedesktop.org>; Wed,  5 May 2021 07:30:27 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=nUZA3YoClLOVrIrUuZKQdzsdtfR91Zm7gjc3pdoPheHaWc1lXu2nul5hP+F8WA7pobL/an8QcfLRwLimYbgSTCfoYhuS2hV8/YkyLLFFjpMhOYgXn9o7Vl9773x9oWGRnekGVmjNdKIBKgmA7dDT0a1Fmrj7Y1MM+EqThBsFX7S/0iekp2RRNhD2mYpXgvH3zuyYhTsCM8QXVhEhYd+WLfv4WRbxiE50bdTyGCzLFdmmonhjyD3MBRBg9Vo2Fkgnrd5tKGmd8fHsLx2cpZR40bniVjMB15t1Adqp909wTo6GME+0NybX7UYSWq/7XVD8bckjVuBWYOCpFCDioOS5pw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=vQCgv2kepKdQ4aAGKhfi0LZoNXNeR8tY2jYQzMU21no=;
 b=fEiHB3lpy+qZblRbPKdyLz+iObs0fewYHgG821xSTdiz7eil548ZaSVAnIYhSap0HpivTZkOmgNv5/0ZDApeNGyGIsDM70unPVpdJTVLVSgYW5qvcrU9CVkcrU7FjCzGN4DUI/QD5VNTLU+O9K+EDpFO9qfy5shd+2L9qiMYObCP6RdsFZYVtEL12QF5nYjSUAVMEUpHew1RbGkoOVEaTyA50pSTSmUlp7nnmV4QE4kUrQJyjLakYptosd/+WjYQx3QFVFnGXQuGBAd2eW3DAzr32zckDvfEzgccnYmNBsgLO2ThmORpYmumytvmSSMVXOZfFa61E0uCnTraKBnXyQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=vQCgv2kepKdQ4aAGKhfi0LZoNXNeR8tY2jYQzMU21no=;
 b=L9ItO5dQzoKuzNu4W8D3VrEYT33rSXW5P6JKHGGwZmZrR8gDhXy6OPgwdBSM3YylgRyiLYhingd4SVdgAMiYQ9ML037yfcNgHFH5wM2EQfYwDWuxzhZg7EwZNbJWLyyfunF2zE1jj87jeKr2koa8HwdTkERi0UsOFTQ1rCTTNAA=
Authentication-Results: lists.freedesktop.org; dkim=none (message not signed)
 header.d=none; lists.freedesktop.org;
 dmarc=none action=none header.from=amd.com;
Received: from DM6PR12MB3962.namprd12.prod.outlook.com (2603:10b6:5:1ce::21)
 by DM5PR12MB1866.namprd12.prod.outlook.com (2603:10b6:3:10c::23) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4087.38; Wed, 5 May
 2021 07:30:21 +0000
Received: from DM6PR12MB3962.namprd12.prod.outlook.com
 ([fe80::142:82e3:7e9d:55a0]) by DM6PR12MB3962.namprd12.prod.outlook.com
 ([fe80::142:82e3:7e9d:55a0%6]) with mapi id 15.20.4108.025; Wed, 5 May 2021
 07:30:21 +0000
From: Luben Tuikov <luben.tuikov@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 3/4] drm/amdgpu: Rename to ras_*_enabled
Date: Wed,  5 May 2021 03:30:04 -0400
Message-Id: <20210505073005.5128-4-luben.tuikov@amd.com>
X-Mailer: git-send-email 2.31.0.97.g1424303384
In-Reply-To: <20210505073005.5128-1-luben.tuikov@amd.com>
References: <20210505073005.5128-1-luben.tuikov@amd.com>
X-Originating-IP: [108.162.138.69]
X-ClientProxiedBy: YT1PR01CA0041.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b01:2e::10) To DM6PR12MB3962.namprd12.prod.outlook.com
 (2603:10b6:5:1ce::21)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from localhost.localdomain (108.162.138.69) by
 YT1PR01CA0041.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01:2e::10) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.4087.40 via Frontend Transport; Wed, 5 May 2021 07:30:21 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: ac377680-9339-4a4f-e5fb-08d90f97a3d7
X-MS-TrafficTypeDiagnostic: DM5PR12MB1866:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <DM5PR12MB1866F9AF52E08F5E29B74F6799599@DM5PR12MB1866.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:913;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: Zu9xQ9aRsk+ZQX1UX3x2VHZPR/VDiS8HHo9nj4ymH697ETnhSUmtcy0wF+ZiPol4bXkabwEcRlwsijXiHzn5moDcsexVNKdjpsN2hj7ubmhjqRmHqMAbup7P0f5oj50S3tdf4zOm51eDi5cykT+79dDOBHAj2RQhzWazPrPFKEjQHN27btzjPCH18Ya0Y4PlJLqG4/1XMXerai4aEuIwgmKmed22iLbjaFmtn9ck6lw0Rx0KMU9Wd6ZT+tdMQpMmZwO0ddHtXPFEV1QcGSTqLiI5TXvRtLpzqjTenciHMxviRMSDrb8703BHBj3g07D2SZ1RM2rxwXxB4hcv/a+lNQTsiyxpEx5vI63RPo45LLAisXVS+St+UCXyRtfqMYxRj0F8nL9jQrFvZNbUK9pgsUyATdxXVg9pTVeDkZGiagqRz5ZoE3ymrlP/D5ncFAN0VfyDHK06qJkjvsRevHKXrLr8SEihrjPckKbGfEYjSPmAPsjIFElxVfUWOdviKAhjmgpy+3Q/67JDe4aEwoPzuBjra9QxwiosRuBYckNskeRQ7rxCJ3YFcDSjfiq0Mjk2k1YMWegVnJpLTWztDO591SaVJKOqtVyF1PD9aTMtbiEcAI2h2F4vVwBNokobKrBvdIxgIsNzc/wca0fw9QroKg==
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM6PR12MB3962.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(39860400002)(396003)(366004)(346002)(376002)(136003)(36756003)(4326008)(956004)(8676002)(44832011)(26005)(2906002)(54906003)(1076003)(6666004)(2616005)(30864003)(316002)(5660300002)(8936002)(6916009)(52116002)(6506007)(6512007)(83380400001)(66476007)(66556008)(38350700002)(186003)(16526019)(6486002)(38100700002)(66574015)(86362001)(66946007)(478600001)(55236004);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: =?utf-8?B?YXZNelNISGFmVU8vVTNNa244eTREa2FRYmpwcnpxY3FEM2NWNGxINHdtdS93?=
 =?utf-8?B?Mko2cURsY2twVUNzdCthTlNVYmR2cmJzWExNcHA0b3JuemhUMnEzOGZXUGJV?=
 =?utf-8?B?L2U5cHBDZjBaYVlaclRpTFE4NmJQRDZlLzdDaHViU0JSSWhtRnd2bEF5M0s2?=
 =?utf-8?B?VVI0N0JlSlBHQXJwOE9wMmVKM2g4OE9jNU44YTN3OGZuZHBad0xlUlRIUS9s?=
 =?utf-8?B?WWRBYTZFMXhZTGtDVmhWZU41S25UUHI3TUVjZ0g5WXFwR1B3YjczRzM5YUFD?=
 =?utf-8?B?WjFrWHVTeTZEdjNTb3JoMDVuN09aNVpFZTY3U3lCTnI5cmR0WjBtZWNLSXRw?=
 =?utf-8?B?Rks5ZFpuUDkvRUsvbDBEb28vdTdhZEtKeXB2R3puY21Md1FmNGpSdUJjeVlm?=
 =?utf-8?B?UTVUNThBZFJ2cFhnN3ViUlF0dlY5QkVwT2puSy9SMUcrd3IwSFI5aEhBOXM3?=
 =?utf-8?B?S1ZpWU5Ga28ybGt4S3FyT3hObDNiQm9uOGdkQjVDQXBjMitvVjRuNVlFTURU?=
 =?utf-8?B?K3VQYXY1VTJCcndldVhKSE44VVZrUHpkamJDa0RqV0ZwdzhtOEgwUXozdi8y?=
 =?utf-8?B?ZkNDaFVMaVdpNlMwVHVBaXFHNGNjck0xUGp2bWFUYi9OckJKQm40d2VrdWpX?=
 =?utf-8?B?SlpySjhuRWJzUUFxMlNEOWVMU0k3ZncxREdQcTdGSlhXazR4dTA1c3hMUHhT?=
 =?utf-8?B?N0tIdHRwTTdkY2NZbjQxVEVSdUFuT3hiZ3E3d2VUc3ZNMHUzNjg4dzlZeUIz?=
 =?utf-8?B?RVd3L3NwN0dydTFXZElEWmRaK0JNK0RQRmR1dld1bTg5Qmx6aFpXRVRRM1Z6?=
 =?utf-8?B?akZFbVZja2xYUEhqb1hVUVIza2d3NVd1eHZzMSswdHFldU51ODVzbmliamw0?=
 =?utf-8?B?WnJ5cEQrTkE4MXVmTkhFaUQ1T2RSWWNCL0o5bytGc3puKzBBMjZKYjhrNlFQ?=
 =?utf-8?B?MlFCekROb3dwS1g3Y2JnUXdRamY4b25paE5Lamc0dnpzbGRIbCsyaDE2aTFy?=
 =?utf-8?B?YnlSdjdjRUt1NU9wQ1prL0FXN1QvUlhvbEJmYVkwQ3BjRWpiMi9iOU4rNTlx?=
 =?utf-8?B?cThCRjJFWks4VkpFdkpzdFJ0V1JYMXRNTmczRWdKdG5rdDNvS0ZDNTlJZ3l2?=
 =?utf-8?B?dk54WVVUTWd6Y0pFdWN3cUxXd2FxWDhPZFVGM2pydFpWUDkyTm1VUDU5dkJM?=
 =?utf-8?B?UCtxQzZNYUVwdWNwYjBGWVlCaEdzN01yZyt4V1Y2eEg1b25HejBBbzBpbEha?=
 =?utf-8?B?QjExTHZJSHgvR1dQWmRvcGRENEFyUldRRDJxTjF5VVZyT2QvTFRZc1BsUVlM?=
 =?utf-8?B?WHllMmNrTjcxRDdtTzBNa2dML3ZMaWZxZmlWWG9vbVVCdjZabzdpenBTNFFW?=
 =?utf-8?B?ejhNckZGVmk4M1ozZERBS29aRTkrYW5KNGoyb0xsL3ZtN2JhWFVLS3V4aUlr?=
 =?utf-8?B?SFNEY3BZajNiRWRSWW1pVUVlZXNkOThwd0taQ3pSUHk2R0Y4MTVpM2taUkRG?=
 =?utf-8?B?NHpiRmRGNEFna08wZDRoeC9wN0NSRFROMmlxM3ZKRWJEcFRXSHlqZWM3LzF3?=
 =?utf-8?B?alhTZVIvQkNyKzdXbEdha0c5YkVZbk1UcjBOanJISTFIQ1QwUmF1a1d2SFZH?=
 =?utf-8?B?SGs0eW9pVGtQbmdFSUN4WmgxQ1FkTkxjeVVBbEYrSlo1aDJxSlNQNHJZR3NE?=
 =?utf-8?B?NGRBbXVBZTdlRUoyTVNCNmxEbzl1NXV3LzVmaGplZ3VxTlpWdUVhSHBxQXlp?=
 =?utf-8?Q?AiSwuJRlU/gjv3tKINlSdxDlK+SNmTFyIePXPev?=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: ac377680-9339-4a4f-e5fb-08d90f97a3d7
X-MS-Exchange-CrossTenant-AuthSource: DM6PR12MB3962.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 05 May 2021 07:30:21.4258 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: MVHnQTKPLRA56oqKJge2f0PkQiA3Sczc/PigVZfiAbhHAWAoPa268KF8GxTXPAek
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5PR12MB1866
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alexander Deucher <Alexander.Deucher@amd.com>,
 Luben Tuikov <luben.tuikov@amd.com>, John Clements <john.clements@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

UmVuYW1lLAogIHJhc19od19zdXBwb3J0ZWQgLS0+IHJhc19od19lbmFibGVkLCBhbmQKICByYXNf
ZmVhdHVyZXMgICAgIC0tPiByYXNfZW5hYmxlZCwKdG8gc2hvdyB0aGF0IHJhc19lbmFibGVkIGlz
IGEgc3Vic2V0IG9mCnJhc19od19lbmFibGVkLCB3aGljaCBpdHNlbGYgaXMgYSBzdWJzZXQKb2Yg
dGhlIEFTSUMgY2FwYWJpbGl0eS4KCkNjOiBBbGV4YW5kZXIgRGV1Y2hlciA8QWxleGFuZGVyLkRl
dWNoZXJAYW1kLmNvbT4KQ2M6IEpvaG4gQ2xlbWVudHMgPGpvaG4uY2xlbWVudHNAYW1kLmNvbT4K
Q2M6IEhhd2tpbmcgWmhhbmcgPEhhd2tpbmcuWmhhbmdAYW1kLmNvbT4KU2lnbmVkLW9mZi1ieTog
THViZW4gVHVpa292IDxsdWJlbi50dWlrb3ZAYW1kLmNvbT4KQWNrZWQtYnk6IENocmlzdGlhbiBL
w7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHUuaCAgICAgICAgICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2RldmljZS5jICAgIHwgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9rbXMuYyAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfcHNwLmMgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3Jhcy5jICAgICAgIHwgNTAgKysrKysrKysrLS0tLS0tLS0tLQogZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9zb2MxNS5jICAgICAgICAgICAgfCAgNiArLS0KIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1ka2ZkL2tmZF90b3BvbG9neS5jICAgICB8ICA2ICstLQogLi4uL2RybS9hbWQvcG0vcG93
ZXJwbGF5L2h3bWdyL3ZlZ2EyMF9iYWNvLmMgIHwgIDIgKy0KIC4uLi9ncHUvZHJtL2FtZC9wbS9z
d3NtdS9zbXUxMS9zbXVfdjExXzAuYyAgICB8ICAyICstCiAxMSBmaWxlcyBjaGFuZ2VkLCA0MSBp
bnNlcnRpb25zKCspLCA0MSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dS5oCmluZGV4IDNhYWYyYTEyOTQ5Zi4uYjI5MmMxZTNhYmM1IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHUuaApAQCAtMTA3Niw4ICsxMDc2LDggQEAgc3RydWN0IGFtZGdwdV9kZXZpY2Ug
ewogCiAJYXRvbWljX3QJCQl0aHJvdHRsaW5nX2xvZ2dpbmdfZW5hYmxlZDsKIAlzdHJ1Y3QgcmF0
ZWxpbWl0X3N0YXRlCQl0aHJvdHRsaW5nX2xvZ2dpbmdfcnM7Ci0JdWludDMyX3QgICAgICAgICAg
ICAgICAgICAgICAgICByYXNfaHdfc3VwcG9ydGVkOwotCXVpbnQzMl90ICAgICAgICAgICAgICAg
ICAgICAgICAgcmFzX2ZlYXR1cmVzOworCXVpbnQzMl90ICAgICAgICAgICAgICAgICAgICAgICAg
cmFzX2h3X2VuYWJsZWQ7CisJdWludDMyX3QgICAgICAgICAgICAgICAgICAgICAgICByYXNfZW5h
YmxlZDsKIAogCWJvb2wgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5fcGNpX2Vycl9yZWNv
dmVyeTsKIAlzdHJ1Y3QgcGNpX3NhdmVkX3N0YXRlICAgICAgICAgICpwY2lfc3RhdGU7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKaW5kZXggODA2MzFmOTk5ZmNl
Li5kYzcyYjI0MjkyODAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9kZXZpY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2
aWNlLmMKQEAgLTUxMTAsNyArNTExMCw3IEBAIGludCBhbWRncHVfZGV2aWNlX2JhY29fZW50ZXIo
c3RydWN0IGRybV9kZXZpY2UgKmRldikKIAlpZiAoIWFtZGdwdV9kZXZpY2Vfc3VwcG9ydHNfYmFj
byhhZGV2X3RvX2RybShhZGV2KSkpCiAJCXJldHVybiAtRU5PVFNVUFA7CiAKLQlpZiAocmFzICYm
IGFkZXYtPnJhc19mZWF0dXJlcyAmJgorCWlmIChyYXMgJiYgYWRldi0+cmFzX2VuYWJsZWQgJiYK
IAkgICAgYWRldi0+bmJpby5mdW5jcy0+ZW5hYmxlX2Rvb3JiZWxsX2ludGVycnVwdCkKIAkJYWRl
di0+bmJpby5mdW5jcy0+ZW5hYmxlX2Rvb3JiZWxsX2ludGVycnVwdChhZGV2LCBmYWxzZSk7CiAK
QEAgLTUxMzAsNyArNTEzMCw3IEBAIGludCBhbWRncHVfZGV2aWNlX2JhY29fZXhpdChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2KQogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CiAKLQlpZiAocmFzICYm
IGFkZXYtPnJhc19mZWF0dXJlcyAmJgorCWlmIChyYXMgJiYgYWRldi0+cmFzX2VuYWJsZWQgJiYK
IAkgICAgYWRldi0+bmJpby5mdW5jcy0+ZW5hYmxlX2Rvb3JiZWxsX2ludGVycnVwdCkKIAkJYWRl
di0+bmJpby5mdW5jcy0+ZW5hYmxlX2Rvb3JiZWxsX2ludGVycnVwdChhZGV2LCB0cnVlKTsKIApk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jCmluZGV4IDAzMjdhYzQwMzQyMy4u
NzVmMzRhOTAwOGU3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfa21zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jCkBA
IC0xMDA1LDcgKzEwMDUsNyBAQCBpbnQgYW1kZ3B1X2luZm9faW9jdGwoc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwgdm9pZCAqZGF0YSwgc3RydWN0IGRybV9maWxlICpmaWxwKQogCiAJCWlmICghcmFz
KQogCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCXJhc19tYXNrID0gKHVpbnQ2NF90KWFkZXYtPnJhc19m
ZWF0dXJlcyA8PCAzMiB8IHJhcy0+ZmVhdHVyZXM7CisJCXJhc19tYXNrID0gKHVpbnQ2NF90KWFk
ZXYtPnJhc19lbmFibGVkIDw8IDMyIHwgcmFzLT5mZWF0dXJlczsKIAogCQlyZXR1cm4gY29weV90
b191c2VyKG91dCwgJnJhc19tYXNrLAogCQkJCW1pbl90KHU2NCwgc2l6ZSwgc2l6ZW9mKHJhc19t
YXNrKSkpID8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9w
c3AuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wc3AuYwppbmRleCA0ODg1
YjcxOGNiNmMuLjMxNzljYTlmYzAzZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3BzcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9wc3AuYwpAQCAtMjE0Niw3ICsyMTQ2LDcgQEAgc3RhdGljIGludCBwc3BfbG9hZF9zbXVfZnco
c3RydWN0IHBzcF9jb250ZXh0ICpwc3ApCiAJCXJldHVybiAwOwogCiAJaWYgKChhbWRncHVfaW5f
cmVzZXQoYWRldikgJiYKLQkgICAgIHJhcyAmJiBhZGV2LT5yYXNfZmVhdHVyZXMgJiYKKwkgICAg
IHJhcyAmJiBhZGV2LT5yYXNfZW5hYmxlZCAmJgogCSAgICAgKGFkZXYtPmFzaWNfdHlwZSA9PSBD
SElQX0FSQ1RVUlVTIHx8CiAJICAgICAgYWRldi0+YXNpY190eXBlID09IENISVBfVkVHQTIwKSkg
fHwKIAkgICAgIChhZGV2LT5pbl9ydW5wbSAmJgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3Jhcy5jCmluZGV4IGU3OTQwZTgxM2YzMi4uNDQ0ZjUzMjVmMDkyIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5jCkBAIC01MzIsNyArNTMyLDcgQEAgc3RhdGljIHN0
cnVjdCByYXNfbWFuYWdlciAqYW1kZ3B1X3Jhc19jcmVhdGVfb2JqKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2LAogCXN0cnVjdCBhbWRncHVfcmFzICpjb24gPSBhbWRncHVfcmFzX2dldF9jb250
ZXh0KGFkZXYpOwogCXN0cnVjdCByYXNfbWFuYWdlciAqb2JqOwogCi0JaWYgKCFhZGV2LT5yYXNf
ZmVhdHVyZXMgfHwgIWNvbikKKwlpZiAoIWFkZXYtPnJhc19lbmFibGVkIHx8ICFjb24pCiAJCXJl
dHVybiBOVUxMOwogCiAJaWYgKGhlYWQtPmJsb2NrID49IEFNREdQVV9SQVNfQkxPQ0tfQ09VTlQp
CkBAIC01NTksNyArNTU5LDcgQEAgc3RydWN0IHJhc19tYW5hZ2VyICphbWRncHVfcmFzX2ZpbmRf
b2JqKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCXN0cnVjdCByYXNfbWFuYWdlciAqb2Jq
OwogCWludCBpOwogCi0JaWYgKCFhZGV2LT5yYXNfZmVhdHVyZXMgfHwgIWNvbikKKwlpZiAoIWFk
ZXYtPnJhc19lbmFibGVkIHx8ICFjb24pCiAJCXJldHVybiBOVUxMOwogCiAJaWYgKGhlYWQpIHsK
QEAgLTYxMyw3ICs2MTMsNyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfcmFzX3BhcnNlX3N0YXR1c19j
b2RlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogc3RhdGljIGludCBhbWRncHVfcmFzX2lz
X2ZlYXR1cmVfYWxsb3dlZChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAkJCQkJIHN0cnVj
dCByYXNfY29tbW9uX2lmICpoZWFkKQogewotCXJldHVybiBhZGV2LT5yYXNfaHdfc3VwcG9ydGVk
ICYgQklUKGhlYWQtPmJsb2NrKTsKKwlyZXR1cm4gYWRldi0+cmFzX2h3X2VuYWJsZWQgJiBCSVQo
aGVhZC0+YmxvY2spOwogfQogCiBzdGF0aWMgaW50IGFtZGdwdV9yYXNfaXNfZmVhdHVyZV9lbmFi
bGVkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LApAQCAtNzY3LDcgKzc2Nyw3IEBAIGludCBh
bWRncHVfcmFzX2ZlYXR1cmVfZW5hYmxlX29uX2Jvb3Qoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYsCiAJCQlyZXQgPSBhbWRncHVfcmFzX2ZlYXR1cmVfZW5hYmxlKGFkZXYsIGhlYWQsIDApOwog
CiAJCQkvKiBjbGVhbiBnZnggYmxvY2sgcmFzIGZlYXR1cmVzIGZsYWcgKi8KLQkJCWlmIChhZGV2
LT5yYXNfZmVhdHVyZXMgJiYgaGVhZC0+YmxvY2sgPT0gQU1ER1BVX1JBU19CTE9DS19fR0ZYKQor
CQkJaWYgKGFkZXYtPnJhc19lbmFibGVkICYmIGhlYWQtPmJsb2NrID09IEFNREdQVV9SQVNfQkxP
Q0tfX0dGWCkKIAkJCQljb24tPmZlYXR1cmVzICY9IH5CSVQoaGVhZC0+YmxvY2spOwogCQl9CiAJ
fSBlbHNlCkBAIC0xMDcyLDcgKzEwNzIsNyBAQCB1bnNpZ25lZCBsb25nIGFtZGdwdV9yYXNfcXVl
cnlfZXJyb3JfY291bnQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJc3RydWN0IHJhc19t
YW5hZ2VyICpvYmo7CiAJc3RydWN0IHJhc19lcnJfZGF0YSBkYXRhID0gezAsIDB9OwogCi0JaWYg
KCFhZGV2LT5yYXNfZmVhdHVyZXMgfHwgIWNvbikKKwlpZiAoIWFkZXYtPnJhc19lbmFibGVkIHx8
ICFjb24pCiAJCXJldHVybiAwOwogCiAJbGlzdF9mb3JfZWFjaF9lbnRyeShvYmosICZjb24tPmhl
YWQsIG5vZGUpIHsKQEAgLTE1OTUsNyArMTU5NSw3IEBAIHN0YXRpYyB2b2lkIGFtZGdwdV9yYXNf
bG9nX29uX2Vycl9jb3VudGVyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCXN0cnVjdCBh
bWRncHVfcmFzICpjb24gPSBhbWRncHVfcmFzX2dldF9jb250ZXh0KGFkZXYpOwogCXN0cnVjdCBy
YXNfbWFuYWdlciAqb2JqOwogCi0JaWYgKCFhZGV2LT5yYXNfZmVhdHVyZXMgfHwgIWNvbikKKwlp
ZiAoIWFkZXYtPnJhc19lbmFibGVkIHx8ICFjb24pCiAJCXJldHVybjsKIAogCWxpc3RfZm9yX2Vh
Y2hfZW50cnkob2JqLCAmY29uLT5oZWFkLCBub2RlKSB7CkBAIC0xNjQ1LDcgKzE2NDUsNyBAQCBz
dGF0aWMgdm9pZCBhbWRncHVfcmFzX3F1ZXJ5X2Vycl9zdGF0dXMoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpCiAJc3RydWN0IGFtZGdwdV9yYXMgKmNvbiA9IGFtZGdwdV9yYXNfZ2V0X2NvbnRl
eHQoYWRldik7CiAJc3RydWN0IHJhc19tYW5hZ2VyICpvYmo7CiAKLQlpZiAoIWFkZXYtPnJhc19m
ZWF0dXJlcyB8fCAhY29uKQorCWlmICghYWRldi0+cmFzX2VuYWJsZWQgfHwgIWNvbikKIAkJcmV0
dXJuOwogCiAJbGlzdF9mb3JfZWFjaF9lbnRyeShvYmosICZjb24tPmhlYWQsIG5vZGUpIHsKQEAg
LTE5NTksNyArMTk1OSw3IEBAIGludCBhbWRncHVfcmFzX3JlY292ZXJ5X2luaXQoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCiAJYm9vbCBleGNfZXJyX2xpbWl0ID0gZmFsc2U7CiAJaW50IHJl
dDsKIAotCWlmIChhZGV2LT5yYXNfZmVhdHVyZXMgJiYgY29uKQorCWlmIChhZGV2LT5yYXNfZW5h
YmxlZCAmJiBjb24pCiAJCWRhdGEgPSAmY29uLT5laF9kYXRhOwogCWVsc2UKIAkJcmV0dXJuIDA7
CkBAIC0yMDc2LDcgKzIwNzYsNyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfcmFzX2dldF9xdWlya3Mo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAKIAlpZiAoc3RybnN0cihjdHgtPnZiaW9zX3Zl
cnNpb24sICJEMTY0MDYiLAogCQkgICAgc2l6ZW9mKGN0eC0+dmJpb3NfdmVyc2lvbikpKQotCQlh
ZGV2LT5yYXNfaHdfc3VwcG9ydGVkIHw9ICgxIDw8IEFNREdQVV9SQVNfQkxPQ0tfX0dGWCk7CisJ
CWFkZXYtPnJhc19od19lbmFibGVkIHw9ICgxIDw8IEFNREdQVV9SQVNfQkxPQ0tfX0dGWCk7CiB9
CiAKIC8qCkBAIC0yMDkwLDcgKzIwOTAsNyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfcmFzX2dldF9x
dWlya3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAgKi8KIHN0YXRpYyB2b2lkIGFtZGdw
dV9yYXNfY2hlY2tfc3VwcG9ydGVkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogewotCWFk
ZXYtPnJhc19od19zdXBwb3J0ZWQgPSBhZGV2LT5yYXNfZmVhdHVyZXMgPSAwOworCWFkZXYtPnJh
c19od19lbmFibGVkID0gYWRldi0+cmFzX2VuYWJsZWQgPSAwOwogCiAJaWYgKGFtZGdwdV9zcmlv
dl92ZihhZGV2KSB8fCAhYWRldi0+aXNfYXRvbV9mdyB8fAogCSAgICAhYW1kZ3B1X3Jhc19hc2lj
X3N1cHBvcnRlZChhZGV2KSkKQEAgLTIwOTksNyArMjA5OSw3IEBAIHN0YXRpYyB2b2lkIGFtZGdw
dV9yYXNfY2hlY2tfc3VwcG9ydGVkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCWlmICgh
YWRldi0+Z21jLnhnbWkuY29ubmVjdGVkX3RvX2NwdSkgewogCQlpZiAoYW1kZ3B1X2F0b21maXJt
d2FyZV9tZW1fZWNjX3N1cHBvcnRlZChhZGV2KSkgewogCQkJZGV2X2luZm8oYWRldi0+ZGV2LCAi
TUVNIEVDQyBpcyBhY3RpdmUuXG4iKTsKLQkJCWFkZXYtPnJhc19od19zdXBwb3J0ZWQgfD0gKDEg
PDwgQU1ER1BVX1JBU19CTE9DS19fVU1DIHwKKwkJCWFkZXYtPnJhc19od19lbmFibGVkIHw9ICgx
IDw8IEFNREdQVV9SQVNfQkxPQ0tfX1VNQyB8CiAJCQkJCQkgICAxIDw8IEFNREdQVV9SQVNfQkxP
Q0tfX0RGKTsKIAkJfSBlbHNlIHsKIAkJCWRldl9pbmZvKGFkZXYtPmRldiwgIk1FTSBFQ0MgaXMg
bm90IHByZXNlbnRlZC5cbiIpOwpAQCAtMjEwNyw3ICsyMTA3LDcgQEAgc3RhdGljIHZvaWQgYW1k
Z3B1X3Jhc19jaGVja19zdXBwb3J0ZWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAKIAkJ
aWYgKGFtZGdwdV9hdG9tZmlybXdhcmVfc3JhbV9lY2Nfc3VwcG9ydGVkKGFkZXYpKSB7CiAJCQlk
ZXZfaW5mbyhhZGV2LT5kZXYsICJTUkFNIEVDQyBpcyBhY3RpdmUuXG4iKTsKLQkJCWFkZXYtPnJh
c19od19zdXBwb3J0ZWQgfD0gfigxIDw8IEFNREdQVV9SQVNfQkxPQ0tfX1VNQyB8CisJCQlhZGV2
LT5yYXNfaHdfZW5hYmxlZCB8PSB+KDEgPDwgQU1ER1BVX1JBU19CTE9DS19fVU1DIHwKIAkJCQkJ
CSAgICAxIDw8IEFNREdQVV9SQVNfQkxPQ0tfX0RGKTsKIAkJfSBlbHNlIHsKIAkJCWRldl9pbmZv
KGFkZXYtPmRldiwgIlNSQU0gRUNDIGlzIG5vdCBwcmVzZW50ZWQuXG4iKTsKQEAgLTIxMTUsNyAr
MjExNSw3IEBAIHN0YXRpYyB2b2lkIGFtZGdwdV9yYXNfY2hlY2tfc3VwcG9ydGVkKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2KQogCX0gZWxzZSB7CiAJCS8qIGRyaXZlciBvbmx5IG1hbmFnZXMg
YSBmZXcgSVAgYmxvY2tzIFJBUyBmZWF0dXJlCiAJCSAqIHdoZW4gR1BVIGlzIGNvbm5lY3RlZCBj
cHUgdGhyb3VnaCBYR01JICovCi0JCWFkZXYtPnJhc19od19zdXBwb3J0ZWQgfD0gKDEgPDwgQU1E
R1BVX1JBU19CTE9DS19fR0ZYIHwKKwkJYWRldi0+cmFzX2h3X2VuYWJsZWQgfD0gKDEgPDwgQU1E
R1BVX1JBU19CTE9DS19fR0ZYIHwKIAkJCQkJICAgMSA8PCBBTURHUFVfUkFTX0JMT0NLX19TRE1B
IHwKIAkJCQkJICAgMSA8PCBBTURHUFVfUkFTX0JMT0NLX19NTUhVQik7CiAJfQpAQCAtMjEyMywx
MCArMjEyMywxMCBAQCBzdGF0aWMgdm9pZCBhbWRncHVfcmFzX2NoZWNrX3N1cHBvcnRlZChzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAlhbWRncHVfcmFzX2dldF9xdWlya3MoYWRldik7CiAK
IAkvKiBod19zdXBwb3J0ZWQgbmVlZHMgdG8gYmUgYWxpZ25lZCB3aXRoIFJBUyBibG9jayBtYXNr
LiAqLwotCWFkZXYtPnJhc19od19zdXBwb3J0ZWQgJj0gQU1ER1BVX1JBU19CTE9DS19NQVNLOwor
CWFkZXYtPnJhc19od19lbmFibGVkICY9IEFNREdQVV9SQVNfQkxPQ0tfTUFTSzsKIAotCWFkZXYt
PnJhc19mZWF0dXJlcyA9IGFtZGdwdV9yYXNfZW5hYmxlID09IDAgPyAwIDoKLQkJYWRldi0+cmFz
X2h3X3N1cHBvcnRlZCAmIGFtZGdwdV9yYXNfbWFzazsKKwlhZGV2LT5yYXNfZW5hYmxlZCA9IGFt
ZGdwdV9yYXNfZW5hYmxlID09IDAgPyAwIDoKKwkJYWRldi0+cmFzX2h3X2VuYWJsZWQgJiBhbWRn
cHVfcmFzX21hc2s7CiB9CiAKIGludCBhbWRncHVfcmFzX2luaXQoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpCkBAIC0yMTQ5LDExICsyMTQ5LDExIEBAIGludCBhbWRncHVfcmFzX2luaXQoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAKIAlhbWRncHVfcmFzX2NoZWNrX3N1cHBvcnRlZChh
ZGV2KTsKIAotCWlmICghYWRldi0+cmFzX2h3X3N1cHBvcnRlZCB8fCBhZGV2LT5hc2ljX3R5cGUg
PT0gQ0hJUF9WRUdBMTApIHsKKwlpZiAoIWFkZXYtPnJhc19od19lbmFibGVkIHx8IGFkZXYtPmFz
aWNfdHlwZSA9PSBDSElQX1ZFR0ExMCkgewogCQkvKiBzZXQgZ2Z4IGJsb2NrIHJhcyBjb250ZXh0
IGZlYXR1cmUgZm9yIFZFR0EyMCBHYW1pbmcKIAkJICogc2VuZCByYXMgZGlzYWJsZSBjbWQgdG8g
cmFzIHRhIGR1cmluZyByYXMgbGF0ZSBpbml0LgogCQkgKi8KLQkJaWYgKCFhZGV2LT5yYXNfZmVh
dHVyZXMgJiYgYWRldi0+YXNpY190eXBlID09IENISVBfVkVHQTIwKSB7CisJCWlmICghYWRldi0+
cmFzX2VuYWJsZWQgJiYgYWRldi0+YXNpY190eXBlID09IENISVBfVkVHQTIwKSB7CiAJCQljb24t
PmZlYXR1cmVzIHw9IEJJVChBTURHUFVfUkFTX0JMT0NLX19HRlgpOwogCiAJCQlyZXR1cm4gMDsK
QEAgLTIyMDQsNyArMjIwNCw3IEBAIGludCBhbWRncHVfcmFzX2luaXQoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpCiAKIAlkZXZfaW5mbyhhZGV2LT5kZXYsICJSQVMgSU5GTzogcmFzIGluaXRp
YWxpemVkIHN1Y2Nlc3NmdWxseSwgIgogCQkgImhhcmR3YXJlIGFiaWxpdHlbJXhdIHJhc19tYXNr
WyV4XVxuIiwKLQkJIGFkZXYtPnJhc19od19zdXBwb3J0ZWQsIGFkZXYtPnJhc19mZWF0dXJlcyk7
CisJCSBhZGV2LT5yYXNfaHdfZW5hYmxlZCwgYWRldi0+cmFzX2VuYWJsZWQpOwogCiAJcmV0dXJu
IDA7CiByZWxlYXNlX2NvbjoKQEAgLTIzMTksNyArMjMxOSw3IEBAIHZvaWQgYW1kZ3B1X3Jhc19y
ZXN1bWUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJc3RydWN0IGFtZGdwdV9yYXMgKmNv
biA9IGFtZGdwdV9yYXNfZ2V0X2NvbnRleHQoYWRldik7CiAJc3RydWN0IHJhc19tYW5hZ2VyICpv
YmosICp0bXA7CiAKLQlpZiAoIWFkZXYtPnJhc19mZWF0dXJlcyB8fCAhY29uKSB7CisJaWYgKCFh
ZGV2LT5yYXNfZW5hYmxlZCB8fCAhY29uKSB7CiAJCS8qIGNsZWFuIHJhcyBjb250ZXh0IGZvciBW
RUdBMjAgR2FtaW5nIGFmdGVyIHNlbmQgcmFzIGRpc2FibGUgY21kICovCiAJCWFtZGdwdV9yZWxl
YXNlX3Jhc19jb250ZXh0KGFkZXYpOwogCkBAIC0yMzY1LDcgKzIzNjUsNyBAQCB2b2lkIGFtZGdw
dV9yYXNfc3VzcGVuZChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIHsKIAlzdHJ1Y3QgYW1k
Z3B1X3JhcyAqY29uID0gYW1kZ3B1X3Jhc19nZXRfY29udGV4dChhZGV2KTsKIAotCWlmICghYWRl
di0+cmFzX2ZlYXR1cmVzIHx8ICFjb24pCisJaWYgKCFhZGV2LT5yYXNfZW5hYmxlZCB8fCAhY29u
KQogCQlyZXR1cm47CiAKIAlhbWRncHVfcmFzX2Rpc2FibGVfYWxsX2ZlYXR1cmVzKGFkZXYsIDAp
OwpAQCAtMjM3OSw3ICsyMzc5LDcgQEAgaW50IGFtZGdwdV9yYXNfcHJlX2Zpbmkoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCiB7CiAJc3RydWN0IGFtZGdwdV9yYXMgKmNvbiA9IGFtZGdwdV9y
YXNfZ2V0X2NvbnRleHQoYWRldik7CiAKLQlpZiAoIWFkZXYtPnJhc19mZWF0dXJlcyB8fCAhY29u
KQorCWlmICghYWRldi0+cmFzX2VuYWJsZWQgfHwgIWNvbikKIAkJcmV0dXJuIDA7CiAKIAkvKiBO
ZWVkIGRpc2FibGUgcmFzIG9uIGFsbCBJUHMgaGVyZSBiZWZvcmUgaXAgW2h3L3N3XWZpbmkgKi8K
QEAgLTIzOTIsNyArMjM5Miw3IEBAIGludCBhbWRncHVfcmFzX2Zpbmkoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpCiB7CiAJc3RydWN0IGFtZGdwdV9yYXMgKmNvbiA9IGFtZGdwdV9yYXNfZ2V0
X2NvbnRleHQoYWRldik7CiAKLQlpZiAoIWFkZXYtPnJhc19mZWF0dXJlcyB8fCAhY29uKQorCWlm
ICghYWRldi0+cmFzX2VuYWJsZWQgfHwgIWNvbikKIAkJcmV0dXJuIDA7CiAKIAlhbWRncHVfcmFz
X2ZzX2ZpbmkoYWRldik7CkBAIC0yNDEyLDcgKzI0MTIsNyBAQCBpbnQgYW1kZ3B1X3Jhc19maW5p
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogdm9pZCBhbWRncHVfcmFzX2dsb2JhbF9yYXNf
aXNyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogewogCWFtZGdwdV9yYXNfY2hlY2tfc3Vw
cG9ydGVkKGFkZXYpOwotCWlmICghYWRldi0+cmFzX2h3X3N1cHBvcnRlZCkKKwlpZiAoIWFkZXYt
PnJhc19od19lbmFibGVkKQogCQlyZXR1cm47CiAKIAlpZiAoYXRvbWljX2NtcHhjaGcoJmFtZGdw
dV9yYXNfaW5faW50ciwgMCwgMSkgPT0gMCkgewpAQCAtMjQ0MSw3ICsyNDQxLDcgQEAgdm9pZCBh
bWRncHVfcmVsZWFzZV9yYXNfY29udGV4dChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAlp
ZiAoIWNvbikKIAkJcmV0dXJuOwogCi0JaWYgKCFhZGV2LT5yYXNfZmVhdHVyZXMgJiYgY29uLT5m
ZWF0dXJlcyAmIEJJVChBTURHUFVfUkFTX0JMT0NLX19HRlgpKSB7CisJaWYgKCFhZGV2LT5yYXNf
ZW5hYmxlZCAmJiBjb24tPmZlYXR1cmVzICYgQklUKEFNREdQVV9SQVNfQkxPQ0tfX0dGWCkpIHsK
IAkJY29uLT5mZWF0dXJlcyAmPSB+QklUKEFNREdQVV9SQVNfQkxPQ0tfX0dGWCk7CiAJCWFtZGdw
dV9yYXNfc2V0X2NvbnRleHQoYWRldiwgTlVMTCk7CiAJCWtmcmVlKGNvbik7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzLmggYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzLmgKaW5kZXggZjYwZDFjZmFmYTNlLi4yMDFmYmRlZTFk
MDkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzLmgKQEAgLTQ3NSw3ICs0
NzUsNyBAQCBzdGF0aWMgaW5saW5lIGludCBhbWRncHVfcmFzX2lzX3N1cHBvcnRlZChzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiwKIAogCWlmIChibG9jayA+PSBBTURHUFVfUkFTX0JMT0NLX0NP
VU5UKQogCQlyZXR1cm4gMDsKLQlyZXR1cm4gcmFzICYmIChhZGV2LT5yYXNfZmVhdHVyZXMgJiAo
MSA8PCBibG9jaykpOworCXJldHVybiByYXMgJiYgKGFkZXYtPnJhc19lbmFibGVkICYgKDEgPDwg
YmxvY2spKTsKIH0KIAogaW50IGFtZGdwdV9yYXNfcmVjb3ZlcnlfaW5pdChzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
bWNfdjlfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYwppbmRleCAz
ZGFmODA2YTAwZDAuLjEwMTdlMDcyMzA3MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvZ21jX3Y5XzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNf
djlfMC5jCkBAIC0xMjY2LDcgKzEyNjYsNyBAQCBzdGF0aWMgaW50IGdtY192OV8wX2xhdGVfaW5p
dCh2b2lkICpoYW5kbGUpCiAJICogd3JpdGVzLCB3aGlsZSBkaXNhYmxlcyBIQk0gRUNDIGZvciB2
ZWdhMTAuCiAJICovCiAJaWYgKCFhbWRncHVfc3Jpb3ZfdmYoYWRldikgJiYgKGFkZXYtPmFzaWNf
dHlwZSA9PSBDSElQX1ZFR0ExMCkpIHsKLQkJaWYgKCEoYWRldi0+cmFzX2ZlYXR1cmVzICYgKDEg
PDwgQU1ER1BVX1JBU19CTE9DS19fVU1DKSkpIHsKKwkJaWYgKCEoYWRldi0+cmFzX2VuYWJsZWQg
JiAoMSA8PCBBTURHUFVfUkFTX0JMT0NLX19VTUMpKSkgewogCQkJaWYgKGFkZXYtPmRmLmZ1bmNz
LT5lbmFibGVfZWNjX2ZvcmNlX3Bhcl93cl9ybXcpCiAJCQkJYWRldi0+ZGYuZnVuY3MtPmVuYWJs
ZV9lY2NfZm9yY2VfcGFyX3dyX3JtdyhhZGV2LCBmYWxzZSk7CiAJCX0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NvYzE1LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9zb2MxNS5jCmluZGV4IDI5YzhlZTI2Nzk5MC4uZDkxZmYwNjllYjcwIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L3NvYzE1LmMKQEAgLTY1NSw3ICs2NTUsNyBAQCBzdGF0aWMgaW50IHNvYzE1
X2FzaWNfYmFjb19yZXNldChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAlpbnQgcmV0ID0g
MDsKIAogCS8qIGF2b2lkIE5CSUYgZ290IHN0dWNrIHdoZW4gZG8gUkFTIHJlY292ZXJ5IGluIEJB
Q08gcmVzZXQgKi8KLQlpZiAocmFzICYmIGFkZXYtPnJhc19mZWF0dXJlcykKKwlpZiAocmFzICYm
IGFkZXYtPnJhc19lbmFibGVkKQogCQlhZGV2LT5uYmlvLmZ1bmNzLT5lbmFibGVfZG9vcmJlbGxf
aW50ZXJydXB0KGFkZXYsIGZhbHNlKTsKIAogCXJldCA9IGFtZGdwdV9kcG1fYmFjb19yZXNldChh
ZGV2KTsKQEAgLTY2Myw3ICs2NjMsNyBAQCBzdGF0aWMgaW50IHNvYzE1X2FzaWNfYmFjb19yZXNl
dChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAkJcmV0dXJuIHJldDsKIAogCS8qIHJlLWVu
YWJsZSBkb29yYmVsbCBpbnRlcnJ1cHQgYWZ0ZXIgQkFDTyBleGl0ICovCi0JaWYgKHJhcyAmJiBh
ZGV2LT5yYXNfZmVhdHVyZXMpCisJaWYgKHJhcyAmJiBhZGV2LT5yYXNfZW5hYmxlZCkKIAkJYWRl
di0+bmJpby5mdW5jcy0+ZW5hYmxlX2Rvb3JiZWxsX2ludGVycnVwdChhZGV2LCB0cnVlKTsKIAog
CXJldHVybiAwOwpAQCAtNzEwLDcgKzcxMCw3IEBAIHNvYzE1X2FzaWNfcmVzZXRfbWV0aG9kKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCQkgKiAxLiBQTUZXIHZlcnNpb24gPiAweDI4NDMw
MDogYWxsIGNhc2VzIHVzZSBiYWNvCiAJCSAqIDIuIFBNRlcgdmVyc2lvbiA8PSAweDI4NDMwMDog
b25seSBzR1BVIHcvbyBSQVMgdXNlIGJhY28KIAkJICovCi0JCWlmIChyYXMgJiYgYWRldi0+cmFz
X2ZlYXR1cmVzICYmCisJCWlmIChyYXMgJiYgYWRldi0+cmFzX2VuYWJsZWQgJiYKIAkJICAgIGFk
ZXYtPnBtLmZ3X3ZlcnNpb24gPD0gMHgyODM0MDApCiAJCQliYWNvX3Jlc2V0ID0gZmFsc2U7CiAJ
CWJyZWFrOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3RvcG9s
b2d5LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfdG9wb2xvZ3kuYwppbmRleCBm
YjRmNzE4YTExNDguLjdmYWU2YTdlNTFmNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRrZmQva2ZkX3RvcG9sb2d5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQv
a2ZkX3RvcG9sb2d5LmMKQEAgLTE0MzAsMTMgKzE0MzAsMTMgQEAgaW50IGtmZF90b3BvbG9neV9h
ZGRfZGV2aWNlKHN0cnVjdCBrZmRfZGV2ICpncHUpCiAJYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqKShkZXYtPmdwdS0+a2dkKTsKIAkvKiBrZmQgb25seSBjb25jZXJucyBzcmFtIGVjYyBv
biBHRlggYW5kIEhCTSBlY2Mgb24gVU1DICovCiAJZGV2LT5ub2RlX3Byb3BzLmNhcGFiaWxpdHkg
fD0KLQkJKChhZGV2LT5yYXNfZmVhdHVyZXMgJiBCSVQoQU1ER1BVX1JBU19CTE9DS19fR0ZYKSkg
IT0gMCkgPworCQkoKGFkZXYtPnJhc19lbmFibGVkICYgQklUKEFNREdQVV9SQVNfQkxPQ0tfX0dG
WCkpICE9IDApID8KIAkJSFNBX0NBUF9TUkFNX0VEQ1NVUFBPUlRFRCA6IDA7Ci0JZGV2LT5ub2Rl
X3Byb3BzLmNhcGFiaWxpdHkgfD0gKChhZGV2LT5yYXNfZmVhdHVyZXMgJiBCSVQoQU1ER1BVX1JB
U19CTE9DS19fVU1DKSkgIT0gMCkgPworCWRldi0+bm9kZV9wcm9wcy5jYXBhYmlsaXR5IHw9ICgo
YWRldi0+cmFzX2VuYWJsZWQgJiBCSVQoQU1ER1BVX1JBU19CTE9DS19fVU1DKSkgIT0gMCkgPwog
CQlIU0FfQ0FQX01FTV9FRENTVVBQT1JURUQgOiAwOwogCiAJaWYgKGFkZXYtPmFzaWNfdHlwZSAh
PSBDSElQX1ZFR0ExMCkKLQkJZGV2LT5ub2RlX3Byb3BzLmNhcGFiaWxpdHkgfD0gKGFkZXYtPnJh
c19mZWF0dXJlcyAhPSAwKSA/CisJCWRldi0+bm9kZV9wcm9wcy5jYXBhYmlsaXR5IHw9IChhZGV2
LT5yYXNfZW5hYmxlZCAhPSAwKSA/CiAJCQlIU0FfQ0FQX1JBU0VWRU5UTk9USUZZIDogMDsKIAog
CS8qIFNWTSBBUEkgYW5kIEhNTSBwYWdlIG1pZ3JhdGlvbiB3b3JrIHRvZ2V0aGVyLCBkZXZpY2Ug
bWVtb3J5IHR5cGUKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG0vcG93ZXJwbGF5
L2h3bWdyL3ZlZ2EyMF9iYWNvLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL3Bvd2VycGxheS9o
d21nci92ZWdhMjBfYmFjby5jCmluZGV4IGY2YjFlZmNlNDUwYy4uOGQ5OWM3YTVhYmY4IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL3Bvd2VycGxheS9od21nci92ZWdhMjBfYmFj
by5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG0vcG93ZXJwbGF5L2h3bWdyL3ZlZ2EyMF9i
YWNvLmMKQEAgLTg1LDcgKzg1LDcgQEAgaW50IHZlZ2EyMF9iYWNvX3NldF9zdGF0ZShzdHJ1Y3Qg
cHBfaHdtZ3IgKmh3bWdyLCBlbnVtIEJBQ09fU1RBVEUgc3RhdGUpCiAJCXJldHVybiAwOwogCiAJ
aWYgKHN0YXRlID09IEJBQ09fU1RBVEVfSU4pIHsKLQkJaWYgKCFyYXMgfHwgIWFkZXYtPnJhc19m
ZWF0dXJlcykgeworCQlpZiAoIXJhcyB8fCAhYWRldi0+cmFzX2VuYWJsZWQpIHsKIAkJCWRhdGEg
PSBSUkVHMzJfU09DMTUoVEhNLCAwLCBtbVRITV9CQUNPX0NOVEwpOwogCQkJZGF0YSB8PSAweDgw
MDAwMDAwOwogCQkJV1JFRzMyX1NPQzE1KFRITSwgMCwgbW1USE1fQkFDT19DTlRMLCBkYXRhKTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG0vc3dzbXUvc211MTEvc211X3YxMV8w
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL3N3c211L3NtdTExL3NtdV92MTFfMC5jCmluZGV4
IDcyNTgxZTQzZDgzZS4uYTA2ZTY4NjU1MDdkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL3BtL3N3c211L3NtdTExL3NtdV92MTFfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
cG0vc3dzbXUvc211MTEvc211X3YxMV8wLmMKQEAgLTE1MzEsNyArMTUzMSw3IEBAIGludCBzbXVf
djExXzBfYmFjb19zZXRfc3RhdGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGVudW0gc211X2Jh
Y29fc3RhdGUgc3RhdGUpCiAJCQkJCQkJCSAgICAgIE5VTEwpOwogCQkJYnJlYWs7CiAJCWRlZmF1
bHQ6Ci0JCQlpZiAoIXJhcyB8fCAhYWRldi0+cmFzX2ZlYXR1cmVzIHx8CisJCQlpZiAoIXJhcyB8
fCAhYWRldi0+cmFzX2VuYWJsZWQgfHwKIAkJCSAgICBhZGV2LT5nbWMueGdtaS5wZW5kaW5nX3Jl
c2V0KSB7CiAJCQkJaWYgKGFkZXYtPmFzaWNfdHlwZSA9PSBDSElQX0FSQ1RVUlVTKSB7CiAJCQkJ
CWRhdGEgPSBSUkVHMzJfU09DMTUoVEhNLCAwLCBtbVRITV9CQUNPX0NOVExfQVJDVCk7Ci0tIAoy
LjMxLjAuOTcuZzE0MjQzMDMzODQKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1k
LWdmeAo=
