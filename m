Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 28976D3B77
	for <lists+amd-gfx@lfdr.de>; Fri, 11 Oct 2019 10:44:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7786F6EBE5;
	Fri, 11 Oct 2019 08:44:16 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-CY1-obe.outbound.protection.outlook.com
 (mail-eopbgr760077.outbound.protection.outlook.com [40.107.76.77])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E87CB6EBE5
 for <amd-gfx@lists.freedesktop.org>; Fri, 11 Oct 2019 08:44:14 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=IoKRrZFZvUrhe1BCFaQy4GcjPptWIauAelFMR8NLaJuFY1F1QkP+tjz5upLh2O/PlXYY/SPwkAAiNzSObmVgOxb2jSRKytpAY/5PKgUVAsNhCqxexdZP5iVg2Fnq6qgDgyMywvbYKxCA0NmIogwNQGG6wmKbAZlq/EdJ8BtUVbDLe5CdrHwMFFIybWbPipm/ugJO8aOV0lAuTEEFZguqY8G90Zt2Rdsl/V6v+GcxQJi5BwsGOLVJ4SC/uqfnKWaSdt7SLFr93PaHZ68yYOoCzP8gIw0NiSJ950qmdew+N3itnGfAr79MP/c+GQeggaE27vVQ/6/p5VTIv7VXDS/YPw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=61r/LRj6oXpB/7Z9Drm+jWSqigezSHIFFK/U4RF6rXc=;
 b=hwT490G2w0PyhKj7sLmgejEWlGhodZaqQ/sa4zE6oKmjHMHlniS6WwdZwb+e0pqmFr/Q0xvLYs32ItnDo2hw/EUQP+SZ5EvxR8blT3YFr/N2U1tQUvkNSN17RZ6A318uyLOJACnE3ZFhi0TlmoknwLP0k8vnjyrMjIKU16ZZecfX+y8yyT7Y2MjtB3+USyylGU4jeOK8ma0ieILG0Fb3Opfs68FKMLZ0857gFtQWEQmSKqgG+tojQ1lNjCg/mR/QpIneS2Hug4YPPeP2AZ4YC84OK2hsvqm/hhZoZfDtrBtnicriPgKTrzZhzgAwPpybIV7ViFSbxI0UE9lHLibhiA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB3344.namprd12.prod.outlook.com (20.178.241.74) by
 MN2PR12MB3694.namprd12.prod.outlook.com (10.255.237.26) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2347.18; Fri, 11 Oct 2019 08:44:12 +0000
Received: from MN2PR12MB3344.namprd12.prod.outlook.com
 ([fe80::435:bdca:bac1:a26d]) by MN2PR12MB3344.namprd12.prod.outlook.com
 ([fe80::435:bdca:bac1:a26d%5]) with mapi id 15.20.2347.021; Fri, 11 Oct 2019
 08:44:12 +0000
From: "Quan, Evan" <Evan.Quan@amd.com>
To: Alex Deucher <alexdeucher@gmail.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH 15/15] drm/amdgpu: enable BACO reset for SMU7 based dGPUs
 (v2)
Thread-Topic: [PATCH 15/15] drm/amdgpu: enable BACO reset for SMU7 based dGPUs
 (v2)
Thread-Index: AQHVf9JLiZLSqpAI/USFJlvuwXezQKdVIFOg
Date: Fri, 11 Oct 2019 08:44:11 +0000
Message-ID: <MN2PR12MB33443FD9C6422917CD7F7642E4970@MN2PR12MB3344.namprd12.prod.outlook.com>
References: <20191011012135.18566-1-alexander.deucher@amd.com>
 <20191011012135.18566-16-alexander.deucher@amd.com>
In-Reply-To: <20191011012135.18566-16-alexander.deucher@amd.com>
Accept-Language: en-US, zh-CN
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: e383f4cb-d9fb-4623-a25f-08d74e2730ca
x-ms-office365-filtering-ht: Tenant
x-ms-traffictypediagnostic: MN2PR12MB3694:
x-ms-exchange-purlcount: 1
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <MN2PR12MB369426290C92A7921A8D5E8DE4970@MN2PR12MB3694.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:2331;
x-forefront-prvs: 0187F3EA14
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(136003)(346002)(376002)(366004)(396003)(13464003)(199004)(189003)(76176011)(66446008)(66476007)(99286004)(2501003)(66556008)(64756008)(8676002)(5660300002)(7696005)(81166006)(81156014)(3846002)(478600001)(52536014)(6116002)(305945005)(74316002)(8936002)(7736002)(966005)(66066001)(6246003)(55016002)(66946007)(71200400001)(76116006)(186003)(71190400001)(9686003)(6306002)(4326008)(102836004)(53546011)(6506007)(26005)(2906002)(33656002)(86362001)(110136005)(25786009)(256004)(14454004)(6436002)(229853002)(476003)(316002)(446003)(11346002)(486006);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3694;
 H:MN2PR12MB3344.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: FLIF7ZxzrzC2WRS/TIfxeaX1hz45Blvaujs+OaAOcbEV2T18aVwa8OUCMd+dy2LNVjCsn7Csdl2jrqPVFd2AZzWpHJdFrD+8LQw/ktj7savZGoGG6u0q4v+YLXr+NyHA+8Bp8tLFiL20kGuJVU9rZUVoLmgLTpVB+v8CjkEHRQUiDVKd9v6FMDPttyO8TmqcGlCYHq+brOJoE1dWJPqxO9azxfspnlBdGgsOMr92M6iNS4zwNY7LsVhdav4SDn1dITQ1U/jZHB0rZUqrRqg9GwTZcat3v7t5vm7lDHvH4exSyZKcV3XaH5/+K+kKw5bXLLKeidSmRFtF9BXqh3r9vgvzaBEdzR64giIfF+w4HGTIRi17DM0J/ii4dj5t02RSR+ddZZuHjAN4cINkYY0kVlAHtvrKfzzttbqAOOIeU9/NFEAe9wlBANEcibcd8jMsjzev5dEazlUBUBPoMcWHCA==
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: e383f4cb-d9fb-4623-a25f-08d74e2730ca
X-MS-Exchange-CrossTenant-originalarrivaltime: 11 Oct 2019 08:44:12.1853 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: 4t7ffGpqZ4OdeuMIcCRU6p2M9tI3quCN0E9KEzNZ2S4us5/xudigSyDUfGPt5Keq
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3694
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=61r/LRj6oXpB/7Z9Drm+jWSqigezSHIFFK/U4RF6rXc=;
 b=kS8O0IJwehdz05O8mPx+aoJA1k084dF7QKE/4xffCKsaIadlw4qcPk9eQl5oNU8ZGSolKZTWJ+Vghlv+NmZp07T6TpdAmwALhPXmRi9SSKOTyKq0yO72aOE++CkqJRuorqPFGrAkAxgYxVsCCbAC8qhDv+baye5SN+cnHdtzXyw=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Evan.Quan@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U2VyaWVzIGlzIHJldmlld2VkLWJ5OiBFdmFuIFF1YW4gPGV2YW4ucXVhbkBhbWQuY29tPg0KDQot
LS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogYW1kLWdmeCA8YW1kLWdmeC1ib3VuY2Vz
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZz4gT24gQmVoYWxmIE9mIEFsZXggRGV1Y2hlcg0KU2VudDog
RnJpZGF5LCBPY3RvYmVyIDExLCAyMDE5IDk6MjIgQU0NClRvOiBhbWQtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZw0KQ2M6IERldWNoZXIsIEFsZXhhbmRlciA8QWxleGFuZGVyLkRldWNoZXJAYW1k
LmNvbT4NClN1YmplY3Q6IFtQQVRDSCAxNS8xNV0gZHJtL2FtZGdwdTogZW5hYmxlIEJBQ08gcmVz
ZXQgZm9yIFNNVTcgYmFzZWQgZEdQVXMgKHYyKQ0KDQpVc2UgQkFDTyB0byByZXNldCB0aGUgR1BV
IGlmIHN1cHBvcnRlZCBvbiBTTVU3IGJhc2VkDQpkR1BVcy4NCg0KdjI6IGRvbid0IHVzZSBiYWNv
IG9uIENJIHBhcnRzDQoNClNpZ25lZC1vZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRl
dWNoZXJAYW1kLmNvbT4NCi0tLQ0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Npay5jIHwg
NDggKysrKysrKysrKysrKysrKy0tDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvY2lrLmgg
fCAgMyArKw0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZpLmMgIHwgODQgKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrLS0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92aS5o
ICB8ICAzICsrDQogNCBmaWxlcyBjaGFuZ2VkLCAxMjggaW5zZXJ0aW9ucygrKSwgMTAgZGVsZXRp
b25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9jaWsuYyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Npay5jDQppbmRleCBiODFiYjQxNGZjYjMuLmZj
OGIzNDQ4MGY2NiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Npay5j
DQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9jaWsuYw0KQEAgLTEyNzAsMTUgKzEy
NzAsMTUgQEAgc3RhdGljIGludCBjaWtfZ3B1X3BjaV9jb25maWdfcmVzZXQoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYpDQogfQ0KIA0KIC8qKg0KLSAqIGNpa19hc2ljX3Jlc2V0IC0gc29mdCBy
ZXNldCBHUFUNCisgKiBjaWtfYXNpY19wY2lfY29uZmlnX3Jlc2V0IC0gc29mdCByZXNldCBHUFUN
CiAgKg0KICAqIEBhZGV2OiBhbWRncHVfZGV2aWNlIHBvaW50ZXINCiAgKg0KLSAqIExvb2sgdXAg
d2hpY2ggYmxvY2tzIGFyZSBodW5nIGFuZCBhdHRlbXB0DQotICogdG8gcmVzZXQgdGhlbS4NCisg
KiBVc2UgUENJIENvbmZpZyBtZXRob2QgdG8gcmVzZXQgdGhlIEdQVS4NCisgKg0KICAqIFJldHVy
bnMgMCBmb3Igc3VjY2Vzcy4NCiAgKi8NCi1zdGF0aWMgaW50IGNpa19hc2ljX3Jlc2V0KHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2KQ0KK3N0YXRpYyBpbnQgY2lrX2FzaWNfcGNpX2NvbmZpZ19y
ZXNldChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCiB7DQogCWludCByOw0KIA0KQEAgLTEy
OTQsNyArMTI5NCw0NSBAQCBzdGF0aWMgaW50IGNpa19hc2ljX3Jlc2V0KHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KQ0KIHN0YXRpYyBlbnVtIGFtZF9yZXNldF9tZXRob2QNCiBjaWtfYXNpY19y
ZXNldF9tZXRob2Qoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQogew0KLQlyZXR1cm4gQU1E
X1JFU0VUX01FVEhPRF9MRUdBQ1k7DQorCWJvb2wgYmFjb19yZXNldDsNCisNCisJc3dpdGNoIChh
ZGV2LT5hc2ljX3R5cGUpIHsNCisJY2FzZSBDSElQX0JPTkFJUkU6DQorCWNhc2UgQ0hJUF9IQVdB
SUk6DQorCQkvKiBkaXNhYmxlIGJhY28gcmVzZXQgdW50aWwgaXQgd29ya3MgKi8NCisJCS8qIHNt
dTdfYXNpY19nZXRfYmFjb19jYXBhYmlsaXR5KGFkZXYsICZiYWNvX3Jlc2V0KTsgKi8NCisJCWJh
Y29fcmVzZXQgPSBmYWxzZTsNCisJCWJyZWFrOw0KKwlkZWZhdWx0Og0KKwkJYmFjb19yZXNldCA9
IGZhbHNlOw0KKwkJYnJlYWs7DQorCX0NCisNCisJaWYgKGJhY29fcmVzZXQpDQorCQlyZXR1cm4g
QU1EX1JFU0VUX01FVEhPRF9CQUNPOw0KKwllbHNlDQorCQlyZXR1cm4gQU1EX1JFU0VUX01FVEhP
RF9MRUdBQ1k7DQorfQ0KKw0KKy8qKg0KKyAqIGNpa19hc2ljX3Jlc2V0IC0gc29mdCByZXNldCBH
UFUNCisgKg0KKyAqIEBhZGV2OiBhbWRncHVfZGV2aWNlIHBvaW50ZXINCisgKg0KKyAqIExvb2sg
dXAgd2hpY2ggYmxvY2tzIGFyZSBodW5nIGFuZCBhdHRlbXB0DQorICogdG8gcmVzZXQgdGhlbS4N
CisgKiBSZXR1cm5zIDAgZm9yIHN1Y2Nlc3MuDQorICovDQorc3RhdGljIGludCBjaWtfYXNpY19y
ZXNldChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCit7DQorCWludCByOw0KKw0KKwlpZiAo
Y2lrX2FzaWNfcmVzZXRfbWV0aG9kKGFkZXYpID09IEFNRF9SRVNFVF9NRVRIT0RfQkFDTykNCisJ
CXIgPSBzbXU3X2FzaWNfYmFjb19yZXNldChhZGV2KTsNCisJZWxzZQ0KKwkJciA9IGNpa19hc2lj
X3BjaV9jb25maWdfcmVzZXQoYWRldik7DQorDQorCXJldHVybiByOw0KIH0NCiANCiBzdGF0aWMg
dTMyIGNpa19nZXRfY29uZmlnX21lbXNpemUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvY2lrLmggYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9jaWsuaA0KaW5kZXggNTRjNjI1YTJlNTcwLi45ODcwYmYyNzg3MGUg
MTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9jaWsuaA0KKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvY2lrLmgNCkBAIC0zMSw0ICszMSw3IEBAIHZvaWQgY2lr
X3NyYm1fc2VsZWN0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KIGludCBjaWtfc2V0X2lw
X2Jsb2NrcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7DQogDQogdm9pZCBsZWdhY3lfZG9v
cmJlbGxfaW5kZXhfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7DQoraW50IHNtdTdf
YXNpY19nZXRfYmFjb19jYXBhYmlsaXR5KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBib29s
ICpjYXApOw0KK2ludCBzbXU3X2FzaWNfYmFjb19yZXNldChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldik7DQorDQogI2VuZGlmDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvdmkuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZpLmMNCmluZGV4IDVmOGM4Nzg2
Y2FjNS4uNzhlNWNkYzBjMDU4IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvdmkuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmkuYw0KQEAgLTY4OSwx
NiArNjg5LDUwIEBAIHN0YXRpYyBpbnQgdmlfZ3B1X3BjaV9jb25maWdfcmVzZXQoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpDQogCXJldHVybiAtRUlOVkFMOw0KIH0NCiANCitpbnQgc211N19h
c2ljX2dldF9iYWNvX2NhcGFiaWxpdHkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIGJvb2wg
KmNhcCkNCit7DQorCXZvaWQgKnBwX2hhbmRsZSA9IGFkZXYtPnBvd2VycGxheS5wcF9oYW5kbGU7
DQorCWNvbnN0IHN0cnVjdCBhbWRfcG1fZnVuY3MgKnBwX2Z1bmNzID0gYWRldi0+cG93ZXJwbGF5
LnBwX2Z1bmNzOw0KKw0KKwlpZiAoIXBwX2Z1bmNzIHx8ICFwcF9mdW5jcy0+Z2V0X2FzaWNfYmFj
b19jYXBhYmlsaXR5KSB7DQorCQkqY2FwID0gZmFsc2U7DQorCQlyZXR1cm4gLUVOT0VOVDsNCisJ
fQ0KKw0KKwlyZXR1cm4gcHBfZnVuY3MtPmdldF9hc2ljX2JhY29fY2FwYWJpbGl0eShwcF9oYW5k
bGUsIGNhcCk7DQorfQ0KKw0KK2ludCBzbXU3X2FzaWNfYmFjb19yZXNldChzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldikNCit7DQorCXZvaWQgKnBwX2hhbmRsZSA9IGFkZXYtPnBvd2VycGxheS5w
cF9oYW5kbGU7DQorCWNvbnN0IHN0cnVjdCBhbWRfcG1fZnVuY3MgKnBwX2Z1bmNzID0gYWRldi0+
cG93ZXJwbGF5LnBwX2Z1bmNzOw0KKw0KKwlpZiAoIXBwX2Z1bmNzIHx8IXBwX2Z1bmNzLT5nZXRf
YXNpY19iYWNvX3N0YXRlIHx8IXBwX2Z1bmNzLT5zZXRfYXNpY19iYWNvX3N0YXRlKQ0KKwkJcmV0
dXJuIC1FTk9FTlQ7DQorDQorCS8qIGVudGVyIEJBQ08gc3RhdGUgKi8NCisJaWYgKHBwX2Z1bmNz
LT5zZXRfYXNpY19iYWNvX3N0YXRlKHBwX2hhbmRsZSwgMSkpDQorCQlyZXR1cm4gLUVJTzsNCisN
CisJLyogZXhpdCBCQUNPIHN0YXRlICovDQorCWlmIChwcF9mdW5jcy0+c2V0X2FzaWNfYmFjb19z
dGF0ZShwcF9oYW5kbGUsIDApKQ0KKwkJcmV0dXJuIC1FSU87DQorDQorCWRldl9pbmZvKGFkZXYt
PmRldiwgIkdQVSBCQUNPIHJlc2V0XG4iKTsNCisNCisJcmV0dXJuIDA7DQorfQ0KKw0KIC8qKg0K
LSAqIHZpX2FzaWNfcmVzZXQgLSBzb2Z0IHJlc2V0IEdQVQ0KKyAqIHZpX2FzaWNfcGNpX2NvbmZp
Z19yZXNldCAtIHNvZnQgcmVzZXQgR1BVDQogICoNCiAgKiBAYWRldjogYW1kZ3B1X2RldmljZSBw
b2ludGVyDQogICoNCi0gKiBMb29rIHVwIHdoaWNoIGJsb2NrcyBhcmUgaHVuZyBhbmQgYXR0ZW1w
dA0KLSAqIHRvIHJlc2V0IHRoZW0uDQorICogVXNlIFBDSSBDb25maWcgbWV0aG9kIHRvIHJlc2V0
IHRoZSBHUFUuDQorICoNCiAgKiBSZXR1cm5zIDAgZm9yIHN1Y2Nlc3MuDQogICovDQotc3RhdGlj
IGludCB2aV9hc2ljX3Jlc2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KK3N0YXRpYyBp
bnQgdmlfYXNpY19wY2lfY29uZmlnX3Jlc2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0K
IHsNCiAJaW50IHI7DQogDQpAQCAtNzE0LDcgKzc0OCw0NyBAQCBzdGF0aWMgaW50IHZpX2FzaWNf
cmVzZXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQogc3RhdGljIGVudW0gYW1kX3Jlc2V0
X21ldGhvZA0KIHZpX2FzaWNfcmVzZXRfbWV0aG9kKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KQ0KIHsNCi0JcmV0dXJuIEFNRF9SRVNFVF9NRVRIT0RfTEVHQUNZOw0KKwlib29sIGJhY29fcmVz
ZXQ7DQorDQorCXN3aXRjaCAoYWRldi0+YXNpY190eXBlKSB7DQorCWNhc2UgQ0hJUF9GSUpJOg0K
KwljYXNlIENISVBfVE9OR0E6DQorCWNhc2UgQ0hJUF9QT0xBUklTMTA6DQorCWNhc2UgQ0hJUF9Q
T0xBUklTMTE6DQorCWNhc2UgQ0hJUF9QT0xBUklTMTI6DQorCWNhc2UgQ0hJUF9UT1BBWjoNCisJ
CXNtdTdfYXNpY19nZXRfYmFjb19jYXBhYmlsaXR5KGFkZXYsICZiYWNvX3Jlc2V0KTsNCisJCWJy
ZWFrOw0KKwlkZWZhdWx0Og0KKwkJYmFjb19yZXNldCA9IGZhbHNlOw0KKwkJYnJlYWs7DQorCX0N
CisNCisJaWYgKGJhY29fcmVzZXQpDQorCQlyZXR1cm4gQU1EX1JFU0VUX01FVEhPRF9CQUNPOw0K
KwllbHNlDQorCQlyZXR1cm4gQU1EX1JFU0VUX01FVEhPRF9MRUdBQ1k7DQorfQ0KKw0KKy8qKg0K
KyAqIHZpX2FzaWNfcmVzZXQgLSBzb2Z0IHJlc2V0IEdQVQ0KKyAqDQorICogQGFkZXY6IGFtZGdw
dV9kZXZpY2UgcG9pbnRlcg0KKyAqDQorICogTG9vayB1cCB3aGljaCBibG9ja3MgYXJlIGh1bmcg
YW5kIGF0dGVtcHQNCisgKiB0byByZXNldCB0aGVtLg0KKyAqIFJldHVybnMgMCBmb3Igc3VjY2Vz
cy4NCisgKi8NCitzdGF0aWMgaW50IHZpX2FzaWNfcmVzZXQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpDQorew0KKwlpbnQgcjsNCisNCisJaWYgKHZpX2FzaWNfcmVzZXRfbWV0aG9kKGFkZXYp
ID09IEFNRF9SRVNFVF9NRVRIT0RfQkFDTykNCisJCXIgPSBzbXU3X2FzaWNfYmFjb19yZXNldChh
ZGV2KTsNCisJZWxzZQ0KKwkJciA9IHZpX2FzaWNfcGNpX2NvbmZpZ19yZXNldChhZGV2KTsNCisN
CisJcmV0dXJuIHI7DQogfQ0KIA0KIHN0YXRpYyB1MzIgdmlfZ2V0X2NvbmZpZ19tZW1zaXplKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L3ZpLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92aS5oDQppbmRleCA4
ZGUwNzcyZjk4NmMuLjQwZDQxNzQ5MTNhNCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L3ZpLmgNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZpLmgNCkBA
IC0zMSw0ICszMSw3IEBAIHZvaWQgdmlfc3JibV9zZWxlY3Qoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsDQogaW50IHZpX3NldF9pcF9ibG9ja3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
Ow0KIA0KIHZvaWQgbGVnYWN5X2Rvb3JiZWxsX2luZGV4X2luaXQoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpOw0KK2ludCBzbXU3X2FzaWNfZ2V0X2JhY29fY2FwYWJpbGl0eShzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwgYm9vbCAqY2FwKTsNCitpbnQgc211N19hc2ljX2JhY29fcmVzZXQo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOw0KKw0KICNlbmRpZg0KLS0gDQoyLjIwLjENCg0K
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCmFtZC1nZngg
bWFpbGluZyBsaXN0DQphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4DQpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAph
bWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
