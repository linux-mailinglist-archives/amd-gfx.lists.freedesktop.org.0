Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A6F21A5966
	for <lists+amd-gfx@lfdr.de>; Mon,  2 Sep 2019 16:31:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3C4CB899B3;
	Mon,  2 Sep 2019 14:31:04 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D0364899B3
 for <amd-gfx@lists.freedesktop.org>; Mon,  2 Sep 2019 14:31:02 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id c3so14243201wrd.7
 for <amd-gfx@lists.freedesktop.org>; Mon, 02 Sep 2019 07:31:02 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:cc:references:from
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-transfer-encoding:content-language;
 bh=GIWWXKx5lgbTdYSLIp6H7Jbp6vX9TidZU0SblrGR5p0=;
 b=b2pZGrW8TXAeV3TBREctPl2oDhIPXqvWbf0ALRx7/GN7OEOXoDy7Wy/giJTdRtNLDJ
 kxdMdavjlZ1ZT4zksTfydR4b1+ty52w9OeWNJBMrszPk0Sjm9TUhKNuitCuwzt5gq488
 CZRF3OdUp/1xhWYIVfJkJanMH98CFIeZ+D21IdpGToUI/1F6lG+rzfRiB1E+hKoYv401
 x9SnK1+dqjFjFmld56oSBUnNY9UG3vigq4mo/idtxHvBDHPwr68UKKZ9IUO56vX8ab0f
 UwizRPL+8dqPprzUmesSi26AxRMPiIdeF9ldKNXyeDpbFgqPs7+fNsSYI3Y/d1rOYiJM
 TTLQ==
X-Gm-Message-State: APjAAAXWOWUFWVGc6jpOZO+XmC9hDC5vJEDuNi5T1vTV79sPXb82jEva
 2SF4CI4ZHJxyhNtGeU/jO92TDT00
X-Google-Smtp-Source: APXvYqwyaE708LiM/bKqF/5YRfHFLFtmgtLWif7jLJbIRCfCNVUR1kwUPWmojNQOmEYT5kD739176Q==
X-Received: by 2002:adf:ea0c:: with SMTP id q12mr19656102wrm.172.1567434660821; 
 Mon, 02 Sep 2019 07:31:00 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id r17sm13993623wrt.68.2019.09.02.07.30.59
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 02 Sep 2019 07:31:00 -0700 (PDT)
Subject: Re: [PATCH 3/3] drm/amdgpu: remove amdgpu_cs_try_evict
To: Kenny Ho <y2kenny@gmail.com>
References: <20190902105219.2813-1-christian.koenig@amd.com>
 <20190902105219.2813-3-christian.koenig@amd.com>
 <CAOWid-dhHxhuPRmz26POaFKnAo3LfvayGnEqA-wLCRn3kNsKsw@mail.gmail.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <4e8e46ea-4492-480e-bcd3-58cc563e4520@gmail.com>
Date: Mon, 2 Sep 2019 16:30:58 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <CAOWid-dhHxhuPRmz26POaFKnAo3LfvayGnEqA-wLCRn3kNsKsw@mail.gmail.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=reply-to:subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=GIWWXKx5lgbTdYSLIp6H7Jbp6vX9TidZU0SblrGR5p0=;
 b=ARboW3JcVn/PioSa2TlGhhwPfgf4BrP/4SY5kIbWYtMMiGstDRAfozQqK+UDa5GjpS
 zHGffU4vT95pJTfOtWQPSI/cjAetQV5neEL+R3gExqETGr5E/QZwLXhJuzCvRG9owfgi
 dq9C6ZMtD5ZCCTw3+VlL5LHFgiWhNk1p0g4Bgjce+CJXrQpxbbeCoasuTITbomRUFSar
 76hDzifLVZC0yr+1UyOlYoySnQVYRYqsXn8wkNXlwY8whJE76Xd00OhC7nS34WlbtsnI
 qWPiyYRCVLUO4IQRVPbkgewb5y5pJ3BwdzBRzk8loxnpei6RiTCtvHr4rh7HQyesvuKq
 iyPw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Cc: amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

SGkgS2VubnksCgpXaGVuIHdlIGRvIGEgQ1Mgd2UgaGF2ZSBhIGNlcnRhaW4gc2V0IG9mIGJ1ZmZl
cnMgd2hpY2ggdGhlIHN1Ym1pc3Npb24gaXMgCndvcmtpbmcgd2l0aCBhbmQgYXJlIGxvY2tlZCBk
b3duIHdoaWxlIHdlIHByZXBhcmUgdGhlIHN1Ym1pc3Npb24uCgpUaGlzIHdvcmtpbmcgc2V0IGNv
bnRhaW5zIG9mIHRoZSBidWZmZXJzIGluIHRoZSBCTyBsaXN0IGFzIHdlbGwgYXMgdGhlIApvbmUg
aW4gdGhlIFZNIHBsdXMgb25lIG9yIHR3byBmb3IgQ1NBIGFuZCB1c2VyIGZlbmNlcyBldGMuLgoK
Tm93IHdoYXQgY2FuIGhhcHBlbiBpcyB0aGF0IHdlIGZpbmQgdGhhdCB3ZSBuZWVkIHRvIGFsbG9j
YXRlIHNvbWUgcGFnZSAKdGFibGVzIGR1cmluZyB0aGUgQ1MgYW5kIHdoZW4gYSBsb3Qgb2YgQk9z
IGFyZSBsb2NrZWQgZG93biBhbGxvY2F0aW5nIGEgCnBhZ2UgdGFibGUgY2FuIGZhaWwgYmVjYXVz
ZSB3ZSBjYW4ndCBldmljdCBvdGhlciBCT3MuCgpXaGF0IHRoaXMgY29kZSB0cmllcyB0b2RvIGlz
IHRvIGV2aWN0IHN0dWZmIGZyb20gdGhlIEJPIGxpc3QgdG8gbWFrZSAKcm9vbSBmb3IgVk0gQk9z
LCBidXQgc2luY2Ugbm93IG11Y2ggbW9yZSBCT3MgYXJlIGJvdW5kIHRvIHRoZSBWTSB0aGlzIApk
b2Vzbid0IHdvcmsgYW55IG1vcmUuCgoKVGhlIHJvb3Qgb2YgdGhlIHByb2JsZW0gaXMgdGhhdCBp
dCBpcyByZWFsbHkgdHJpY2t5IHRvIGZpZ3VyZSBvdXQgaG93IAptdWNoIG1lbW9yeSB5b3UgbmVl
ZCBmb3IgdGhlIHBhZ2UgdGFibGVzIGluIHRoZSBmaXJzdCBwbGFjZS4gU2VlIGZvciBhIApCTyBp
biBWUkFNIHdlIHVzdWFsbHkgbmVlZCBvbmx5IG9uZSBQVEUgZm9yIGVhY2ggMk1CLCBidXQgZm9y
IGEgQk8gaW4gCnN5c3RlbSBtZW1vcnkgd2UgbmVlZCBvbmUgUFRFIGZvciBlYWNoIDRLIG9mIG1l
bW9yeS4KClNvIHdoYXQgY2FuIGhhcHBlbiBpcyB0aGF0IHlvdSBldmljdCBzb21ldGhpbmcgZnJv
bSBWUkFNIGJlY2F1c2UgeW91IApuZWVkIHJvb20gYW5kIHRoYXQgZXZpY3Rpb24gaW4gdHVybiBt
YWtlcyB5b3UgbmVlZCBldmVuIG1vcmUgcm9vbS4uLi4uCgpJdCBjYW4gdGFrZSBhIHdoaWxlIHVu
dGlsIHRoaXMgcmVhY2hlcyBhIHN0YWJsZSBwb2ludCwgc28gdGhpcyBwYXRjaCBzZXQgCmhlcmUg
c3dpdGNoZWQgZnJvbSBhIGR5bmFtaWMgYXBwcm9hY2ggdG8ganVzdCBhc3N1bWluZyB0aGUgd29y
c3QgYW5kIApyZXNlcnZpbmcgc29tZSBtZW1vcnkgZm9yIHBhZ2UgdGFibGVzLgoKUmVnYXJkcywK
Q2hyaXN0aWFuLgoKQW0gMDIuMDkuMTkgdW0gMTY6MDcgc2NocmllYiBLZW5ueSBIbzoKPiBIZXkg
Q2hyaXN0aWFuLAo+Cj4gQ2FuIHlvdSBnbyBpbnRvIGRldGFpbHMgYSBiaXQgbW9yZSBvbiB0aGUg
aG93IGFuZCB3aHkgdGhpcyBkb2Vzbid0Cj4gd29yayB3ZWxsIGFueW1vcmU/ICAoc3VjaCBhcyBp
dHMgcmVsYXRpb25zaGlwIHdpdGggcGVyIFZNIEJPcz8pICBJIGFtCj4gY3VyaW91cyB0byBsZWFy
biBtb3JlIGJlY2F1c2UgSSB3YXMgcmVhZGluZyBpbnRvIHRoaXMgY2h1bmsgb2YgY29kZQo+IGVh
cmxpZXIuICBJcyB0aGlzIHNvbWV0aGluZyB0aGF0IHRoZSBTaHJpbmtlciBBUEkgY2FuIGhlbHAg
d2l0aD8KPgo+IFJlZ2FyZHMsCj4gS2VubnkKPgo+IE9uIE1vbiwgU2VwIDIsIDIwMTkgYXQgNjo1
MiBBTSBDaHJpc3RpYW4gS8O2bmlnCj4gPGNrb2VuaWcubGVpY2h0enVtZXJrZW5AZ21haWwuY29t
PiB3cm90ZToKPj4gVHJ5aW5nIHRvIGV2aWN0IHRoaW5ncyBmcm9tIHRoZSBjdXJyZW50IHdvcmtp
bmcgc2V0IGRvZXNuJ3Qgd29yayB0aGF0Cj4+IHdlbGwgYW55bW9yZSBiZWNhdXNlIG9mIHBlciBW
TSBCT3MuCj4+Cj4+IFJlbHkgb24gcmVzZXJ2aW5nIFZSQU0gZm9yIHBhZ2UgdGFibGVzIHRvIGF2
b2lkIGNvbnRlbnRpb24uCj4+Cj4+IFNpZ25lZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNo
cmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KPj4gLS0tCj4+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1LmggICAgfCAgMSAtCj4+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2NzLmMgfCA3MSArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+PiAgIDIgZmlsZXMg
Y2hhbmdlZCwgMSBpbnNlcnRpb24oKyksIDcxIGRlbGV0aW9ucygtKQo+Pgo+PiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmggYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHUuaAo+PiBpbmRleCBhMjM2MjEzZjhlOGUuLmQxOTk1MTU2NzMzZSAx
MDA2NDQKPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKPj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKPj4gQEAgLTQ3OCw3ICs0Nzgs
NiBAQCBzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciB7Cj4+ICAgICAgICAgIHVpbnQ2NF90ICAgICAg
ICAgICAgICAgICAgICAgICAgYnl0ZXNfbW92ZWRfdmlzX3RocmVzaG9sZDsKPj4gICAgICAgICAg
dWludDY0X3QgICAgICAgICAgICAgICAgICAgICAgICBieXRlc19tb3ZlZDsKPj4gICAgICAgICAg
dWludDY0X3QgICAgICAgICAgICAgICAgICAgICAgICBieXRlc19tb3ZlZF92aXM7Cj4+IC0gICAg
ICAgc3RydWN0IGFtZGdwdV9ib19saXN0X2VudHJ5ICAgICAqZXZpY3RhYmxlOwo+Pgo+PiAgICAg
ICAgICAvKiB1c2VyIGZlbmNlICovCj4+ICAgICAgICAgIHN0cnVjdCBhbWRncHVfYm9fbGlzdF9l
bnRyeSAgICAgdWZfZW50cnk7Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5j
Cj4+IGluZGV4IGZkOTViNTg2YjU5MC4uMDMxODJkOTY4ZDNkIDEwMDY0NAo+PiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYwo+PiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYwo+PiBAQCAtNDQ3LDc1ICs0NDcsMTIgQEAgc3RhdGlj
IGludCBhbWRncHVfY3NfYm9fdmFsaWRhdGUoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAsCj4+
ICAgICAgICAgIHJldHVybiByOwo+PiAgIH0KPj4KPj4gLS8qIExhc3QgcmVzb3J0LCB0cnkgdG8g
ZXZpY3Qgc29tZXRoaW5nIGZyb20gdGhlIGN1cnJlbnQgd29ya2luZyBzZXQgKi8KPj4gLXN0YXRp
YyBib29sIGFtZGdwdV9jc190cnlfZXZpY3Qoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAsCj4+
IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGFtZGdwdV9ibyAqdmFsaWRh
dGVkKQo+PiAtewo+PiAtICAgICAgIHVpbnQzMl90IGRvbWFpbiA9IHZhbGlkYXRlZC0+YWxsb3dl
ZF9kb21haW5zOwo+PiAtICAgICAgIHN0cnVjdCB0dG1fb3BlcmF0aW9uX2N0eCBjdHggPSB7IHRy
dWUsIGZhbHNlIH07Cj4+IC0gICAgICAgaW50IHI7Cj4+IC0KPj4gLSAgICAgICBpZiAoIXAtPmV2
aWN0YWJsZSkKPj4gLSAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKPj4gLQo+PiAtICAgICAg
IGZvciAoOyZwLT5ldmljdGFibGUtPnR2LmhlYWQgIT0gJnAtPnZhbGlkYXRlZDsKPj4gLSAgICAg
ICAgICAgIHAtPmV2aWN0YWJsZSA9IGxpc3RfcHJldl9lbnRyeShwLT5ldmljdGFibGUsIHR2Lmhl
YWQpKSB7Cj4+IC0KPj4gLSAgICAgICAgICAgICAgIHN0cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRy
eSAqY2FuZGlkYXRlID0gcC0+ZXZpY3RhYmxlOwo+PiAtICAgICAgICAgICAgICAgc3RydWN0IGFt
ZGdwdV9ibyAqYm8gPSB0dG1fdG9fYW1kZ3B1X2JvKGNhbmRpZGF0ZS0+dHYuYm8pOwo+PiAtICAg
ICAgICAgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBhbWRncHVfdHRtX2FkZXYo
Ym8tPnRiby5iZGV2KTsKPj4gLSAgICAgICAgICAgICAgIGJvb2wgdXBkYXRlX2J5dGVzX21vdmVk
X3ZpczsKPj4gLSAgICAgICAgICAgICAgIHVpbnQzMl90IG90aGVyOwo+PiAtCj4+IC0gICAgICAg
ICAgICAgICAvKiBJZiB3ZSByZWFjaGVkIG91ciBjdXJyZW50IEJPIHdlIGNhbiBmb3JnZXQgaXQg
Ki8KPj4gLSAgICAgICAgICAgICAgIGlmIChibyA9PSB2YWxpZGF0ZWQpCj4+IC0gICAgICAgICAg
ICAgICAgICAgICAgIGJyZWFrOwo+PiAtCj4+IC0gICAgICAgICAgICAgICAvKiBXZSBjYW4ndCBt
b3ZlIHBpbm5lZCBCT3MgaGVyZSAqLwo+PiAtICAgICAgICAgICAgICAgaWYgKGJvLT5waW5fY291
bnQpCj4+IC0gICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+PiAtCj4+IC0gICAgICAg
ICAgICAgICBvdGhlciA9IGFtZGdwdV9tZW1fdHlwZV90b19kb21haW4oYm8tPnRiby5tZW0ubWVt
X3R5cGUpOwo+PiAtCj4+IC0gICAgICAgICAgICAgICAvKiBDaGVjayBpZiB0aGlzIEJPIGlzIGlu
IG9uZSBvZiB0aGUgZG9tYWlucyB3ZSBuZWVkIHNwYWNlIGZvciAqLwo+PiAtICAgICAgICAgICAg
ICAgaWYgKCEob3RoZXIgJiBkb21haW4pKQo+PiAtICAgICAgICAgICAgICAgICAgICAgICBjb250
aW51ZTsKPj4gLQo+PiAtICAgICAgICAgICAgICAgLyogQ2hlY2sgaWYgd2UgY2FuIG1vdmUgdGhp
cyBCTyBzb21ld2hlcmUgZWxzZSAqLwo+PiAtICAgICAgICAgICAgICAgb3RoZXIgPSBiby0+YWxs
b3dlZF9kb21haW5zICYgfmRvbWFpbjsKPj4gLSAgICAgICAgICAgICAgIGlmICghb3RoZXIpCj4+
IC0gICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+PiAtCj4+IC0gICAgICAgICAgICAg
ICAvKiBHb29kIHdlIGNhbiB0cnkgdG8gbW92ZSB0aGlzIEJPIHNvbWV3aGVyZSBlbHNlICovCj4+
IC0gICAgICAgICAgICAgICB1cGRhdGVfYnl0ZXNfbW92ZWRfdmlzID0KPj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAhYW1kZ3B1X2dtY192cmFtX2Z1bGxfdmlzaWJsZSgmYWRldi0+
Z21jKSAmJgo+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtZGdwdV9ib19pbl9j
cHVfdmlzaWJsZV92cmFtKGJvKTsKPj4gLSAgICAgICAgICAgICAgIGFtZGdwdV9ib19wbGFjZW1l
bnRfZnJvbV9kb21haW4oYm8sIG90aGVyKTsKPj4gLSAgICAgICAgICAgICAgIHIgPSB0dG1fYm9f
dmFsaWRhdGUoJmJvLT50Ym8sICZiby0+cGxhY2VtZW50LCAmY3R4KTsKPj4gLSAgICAgICAgICAg
ICAgIHAtPmJ5dGVzX21vdmVkICs9IGN0eC5ieXRlc19tb3ZlZDsKPj4gLSAgICAgICAgICAgICAg
IGlmICh1cGRhdGVfYnl0ZXNfbW92ZWRfdmlzKQo+PiAtICAgICAgICAgICAgICAgICAgICAgICBw
LT5ieXRlc19tb3ZlZF92aXMgKz0gY3R4LmJ5dGVzX21vdmVkOwo+PiAtCj4+IC0gICAgICAgICAg
ICAgICBpZiAodW5saWtlbHkocikpCj4+IC0gICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+
PiAtCj4+IC0gICAgICAgICAgICAgICBwLT5ldmljdGFibGUgPSBsaXN0X3ByZXZfZW50cnkocC0+
ZXZpY3RhYmxlLCB0di5oZWFkKTsKPj4gLSAgICAgICAgICAgICAgIGxpc3RfbW92ZSgmY2FuZGlk
YXRlLT50di5oZWFkLCAmcC0+dmFsaWRhdGVkKTsKPj4gLQo+PiAtICAgICAgICAgICAgICAgcmV0
dXJuIHRydWU7Cj4+IC0gICAgICAgfQo+PiAtCj4+IC0gICAgICAgcmV0dXJuIGZhbHNlOwo+PiAt
fQo+PiAtCj4+ICAgc3RhdGljIGludCBhbWRncHVfY3NfdmFsaWRhdGUodm9pZCAqcGFyYW0sIHN0
cnVjdCBhbWRncHVfYm8gKmJvKQo+PiAgIHsKPj4gICAgICAgICAgc3RydWN0IGFtZGdwdV9jc19w
YXJzZXIgKnAgPSBwYXJhbTsKPj4gICAgICAgICAgaW50IHI7Cj4+Cj4+IC0gICAgICAgZG8gewo+
PiAtICAgICAgICAgICAgICAgciA9IGFtZGdwdV9jc19ib192YWxpZGF0ZShwLCBibyk7Cj4+IC0g
ICAgICAgfSB3aGlsZSAociA9PSAtRU5PTUVNICYmIGFtZGdwdV9jc190cnlfZXZpY3QocCwgYm8p
KTsKPj4gKyAgICAgICByID0gYW1kZ3B1X2NzX2JvX3ZhbGlkYXRlKHAsIGJvKTsKPj4gICAgICAg
ICAgaWYgKHIpCj4+ICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7Cj4+Cj4+IEBAIC01NTQsOSAr
NDkxLDYgQEAgc3RhdGljIGludCBhbWRncHVfY3NfbGlzdF92YWxpZGF0ZShzdHJ1Y3QgYW1kZ3B1
X2NzX3BhcnNlciAqcCwKPj4gICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRpbmdfdXNlcnB0
ciA9IHRydWU7Cj4+ICAgICAgICAgICAgICAgICAgfQo+Pgo+PiAtICAgICAgICAgICAgICAgaWYg
KHAtPmV2aWN0YWJsZSA9PSBsb2JqKQo+PiAtICAgICAgICAgICAgICAgICAgICAgICBwLT5ldmlj
dGFibGUgPSBOVUxMOwo+PiAtCj4+ICAgICAgICAgICAgICAgICAgciA9IGFtZGdwdV9jc192YWxp
ZGF0ZShwLCBibyk7Cj4+ICAgICAgICAgICAgICAgICAgaWYgKHIpCj4+ICAgICAgICAgICAgICAg
ICAgICAgICAgICByZXR1cm4gcjsKPj4gQEAgLTY1OSw5ICs1OTMsNiBAQCBzdGF0aWMgaW50IGFt
ZGdwdV9jc19wYXJzZXJfYm9zKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLAo+PiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnAtPmJ5dGVzX21vdmVkX3Zpc190
aHJlc2hvbGQpOwo+PiAgICAgICAgICBwLT5ieXRlc19tb3ZlZCA9IDA7Cj4+ICAgICAgICAgIHAt
PmJ5dGVzX21vdmVkX3ZpcyA9IDA7Cj4+IC0gICAgICAgcC0+ZXZpY3RhYmxlID0gbGlzdF9sYXN0
X2VudHJ5KCZwLT52YWxpZGF0ZWQsCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRyeSwKPj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdHYuaGVhZCk7Cj4+Cj4+ICAgICAgICAgIHIgPSBhbWRncHVf
dm1fdmFsaWRhdGVfcHRfYm9zKHAtPmFkZXYsICZmcHJpdi0+dm0sCj4+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGFtZGdwdV9jc192YWxpZGF0ZSwgcCk7Cj4+IC0tCj4+
IDIuMTcuMQo+Pgo+PiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwo+PiBhbWQtZ2Z4IG1haWxpbmcgbGlzdAo+PiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwo+PiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ft
ZC1nZngKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFt
ZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
