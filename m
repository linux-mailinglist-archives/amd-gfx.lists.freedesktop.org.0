Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A8DD5216341
	for <lists+amd-gfx@lfdr.de>; Tue,  7 Jul 2020 03:16:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2FA086E544;
	Tue,  7 Jul 2020 01:16:08 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM12-DM6-obe.outbound.protection.outlook.com
 (mail-dm6nam12on2041.outbound.protection.outlook.com [40.107.243.41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 475E76E544
 for <amd-gfx@lists.freedesktop.org>; Tue,  7 Jul 2020 01:16:07 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=QKubsiu+VSfEYhzH4saFb6VdJK8A78wmOfB2dplAIaGB0C/oVCJyRVnl3qiBnOr1POJ3o+18/QxEfqY1sYMrnSS6k28Tf1ae2W+wn2f5y33ElC8ljxRrDRDYTCSIEJfB7tRDiPGtwMBoleDYT6QH2SHJ+1WmmcknnDS6zvPpsI6qf3eAambst0On5J9V7Lauc96Q2P1UDPesMXtX/RZzcWjlUq6cUnFqscFVXM6FaYtCqPQF98C79UbpE77ZoqGgSKb4Pvurimo3r6DN4KWjbe9ohDCkMIYZ1wvA14fOmd05vuBtqwMagPv5Ni4sUwAA+Jmcg+A/SDVBCNiodpm5qw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bXqKmhieT/4Jyr2VMOq5dpFAuUj8l8wAofZinLVg46Y=;
 b=Qrv6ZxmweuRE57crBsZMya7US7D76eYEsvKxRNrVpG3caiNceCjJiPH99TRKegdEiCmuzbe75YzPSbda0w1mBkrQcXjn9p97z6hAOZAglm1rkhTHppzI39Nw0A0rRon08gg3MGsTihLHWN/AF+DC0xYI/qjKl/9e3hAbkX9fOFJwp0I7jkonUsOe5axS73K3W9v3lGiu0bsiMiQjv0ocndXe91xbhOJUsbYCxIcCM5uezOE3/19ChBErvXBQIHT9bEoYvhcSvoWhnTCNFo1Wc+LObKaIFsMLllMDDGamw62B66LvVmdmi9DFRWHUAJZV0Hp51MsC70n76iYcgIKnHA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bXqKmhieT/4Jyr2VMOq5dpFAuUj8l8wAofZinLVg46Y=;
 b=q3Zvry0YCvEwdR5iyY+ie9RN+F+3AmibDyaLMe2Lfhot7RGaBnzHv4HCwZHOw/GofAYST8UHjvO2EvYAsP9LCIYX/VZYuIE3sxihuD/vyXWGofg5ATDZVwzfmwETJ/8p9PrRx+lTaKxyGF8XPRlcML5XM4jLV5ieuzkfOvEw6ao=
Received: from DM5PR12MB2533.namprd12.prod.outlook.com (2603:10b6:4:b0::10) by
 DM6PR12MB3996.namprd12.prod.outlook.com (2603:10b6:5:1c1::31) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3153.28; Tue, 7 Jul 2020 01:16:04 +0000
Received: from DM5PR12MB2533.namprd12.prod.outlook.com
 ([fe80::2d85:c08d:4782:e3a]) by DM5PR12MB2533.namprd12.prod.outlook.com
 ([fe80::2d85:c08d:4782:e3a%7]) with mapi id 15.20.3153.029; Tue, 7 Jul 2020
 01:16:04 +0000
From: "Li, Dennis" <Dennis.Li@amd.com>
To: "Kuehling, Felix" <Felix.Kuehling@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Deucher,
 Alexander" <Alexander.Deucher@amd.com>, "Zhou1, Tao" <Tao.Zhou1@amd.com>,
 "Zhang, Hawking" <Hawking.Zhang@amd.com>, "Chen, Guchun"
 <Guchun.Chen@amd.com>
Subject: RE: [PATCH] drm/amdgpu: fix system hang issue during GPU reset
Thread-Topic: [PATCH] drm/amdgpu: fix system hang issue during GPU reset
Thread-Index: AQHWU3xth02Yk2WzVEOVKD7j08gP9qj7Fd8AgAA5HbA=
Date: Tue, 7 Jul 2020 01:16:04 +0000
Message-ID: <DM5PR12MB2533DB5E73730BD55A64E78AED660@DM5PR12MB2533.namprd12.prod.outlook.com>
References: <20200706100113.25141-1-Dennis.Li@amd.com>
 <34860e8d-d501-bda0-8b23-63f35b344322@amd.com>
In-Reply-To: <34860e8d-d501-bda0-8b23-63f35b344322@amd.com>
Accept-Language: zh-CN, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Enabled=true;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_SetDate=2020-07-07T01:15:51Z; 
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Method=Standard;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Name=Internal Use Only -
 Unrestricted;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_ActionId=9bdaff1b-3f0b-4682-9994-d2176a0b244e;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_ContentBits=1
msip_justification: I confirm the recipients are approved for sharing this
 content
authentication-results: amd.com; dkim=none (message not signed)
 header.d=none;amd.com; dmarc=none action=none header.from=amd.com;
x-originating-ip: [58.247.170.242]
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: f233ce1e-e681-490c-ced3-08d8221351fd
x-ms-traffictypediagnostic: DM6PR12MB3996:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM6PR12MB3996697A5BEFE46D6C94ACEAED660@DM6PR12MB3996.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:5516;
x-forefront-prvs: 0457F11EAF
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: Y+UjLfxIf20DUNI7/DYHrz316cFnpauvDt2OXsv3NhCCueNN8qTPqlT36u4jbvvsLSqB33OdJnA47T14B2tlvEWJDjzmBBWvdR5LEoH6DiDpn0UZx+tCHZx9HkAeeo/ftO6KIVTijYh8ZrQYIXI5mcqwDy7sp7+HCxWzfgcCslMYSGBYJKd7Y0ogLVMcnCwGkFTXZBcFyQyEVCOo1SYGRhGyNVEZBnOSOc/jjnM2tsfZJ5KVCUeEJOAroX6bnkWZhlo3WNyLneBQO948bGvqBOX2ipGPt10NREGeYyAmbU1x/AcSWiUgI5jdCLZxgc5BqxAPzXfKfJmWSkVU0+TR9pOzRT4obxdc473ns3z+3QpwBJt4B3HnQRcxixiHM35q
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM5PR12MB2533.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFTY:;
 SFS:(4636009)(376002)(396003)(136003)(346002)(366004)(39860400002)(76116006)(33656002)(66556008)(9686003)(71200400001)(66946007)(53546011)(478600001)(64756008)(8936002)(66446008)(66476007)(83380400001)(26005)(5660300002)(110136005)(30864003)(86362001)(316002)(6506007)(6636002)(2906002)(8676002)(52536014)(55016002)(7696005)(186003)(921003);
 DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata: 07//TSaH8rcb1ChLC901loiiNgFDlSSjiTqLyGJD/njYwPrs216eAb7P7ntP61d4epzFPWOTD/V1h5EcxkybUhJoPrWwAT18SULEXa3hdP4F7j3j7C0DGu2BCH4z7uhCS/Gi5jJhCa1FsvFQnXhA03wUnj0QZhuVXHJq75xbI2In8hp65/LPNPgN5iPv3LjrpbEjMwOBJWtYBg8u9qRyTLzF1Fy3k4Pnh6b3ajoYdrUhYS5eZhDzP08SVyJvMlRj+ChbSr7Yi+dIAtMyv+megKtX4hEMOzuW+6pxzJEYodIcVo7mDjZEb/UIlN2cepIJsdSz4Gur9T5cyiaDfkgAcfLcnOlXHMMQitU856vvR/lFH4rTluW7TAISU0nsP523pJW9v2gRkCvl3suDaTft+EHLwJNgFtVt87NFD+yChSIBCddEcIwmMcX9T6QW/o8mch9XWFvhXs5Mi9WYBFqm+zTgnWLW51XVcCVPySbzv4laL70ZTpcnoy3hQv5dYZwF
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DM5PR12MB2533.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: f233ce1e-e681-490c-ced3-08d8221351fd
X-MS-Exchange-CrossTenant-originalarrivaltime: 07 Jul 2020 01:16:04.6687 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: aD1Ym+ewO1h9/oAJYeqbdJHfHhB3ZsMz3/AGjTBHgCa/apJ1HVx9QGiiDpfR0DOF
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3996
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seSAtIEludGVybmFsIERpc3RyaWJ1dGlvbiBPbmx5XQ0KDQpI
aSwgRmVsaXgsDQogICAgICBEcml2ZXIgc2hvdWxkIHVzZSB0aGUgc2FtZSBsb2NrIHRvIHByb3Rl
Y3QgaGFyZHdhcmUgZnJvbSBiZWluZyBhY2Nlc3NlZCBkdXJpbmcgR1BVIHJlc2V0LiBUaGUgZmxh
ZyBkcW0tPmlzX3Jlc2V0dGluZyBjb3VsZG4ndCBwcmV2ZW50IGNhbGxzIHRoYXQgYWNjZXNzIGhh
cmR3YXJlIGluIG11bHRpLXRocmVhZHMgY2FzZS4gDQoNCkJlc3QgUmVnYXJkcw0KRGVubmlzIExp
DQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogS3VlaGxpbmcsIEZlbGl4IDxGZWxp
eC5LdWVobGluZ0BhbWQuY29tPiANClNlbnQ6IFR1ZXNkYXksIEp1bHkgNywgMjAyMCA1OjQzIEFN
DQpUbzogTGksIERlbm5pcyA8RGVubmlzLkxpQGFtZC5jb20+OyBhbWQtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZzsgRGV1Y2hlciwgQWxleGFuZGVyIDxBbGV4YW5kZXIuRGV1Y2hlckBhbWQuY29t
PjsgWmhvdTEsIFRhbyA8VGFvLlpob3UxQGFtZC5jb20+OyBaaGFuZywgSGF3a2luZyA8SGF3a2lu
Zy5aaGFuZ0BhbWQuY29tPjsgQ2hlbiwgR3VjaHVuIDxHdWNodW4uQ2hlbkBhbWQuY29tPg0KU3Vi
amVjdDogUmU6IFtQQVRDSF0gZHJtL2FtZGdwdTogZml4IHN5c3RlbSBoYW5nIGlzc3VlIGR1cmlu
ZyBHUFUgcmVzZXQNCg0KDQpBbSAyMDIwLTA3LTA2IHVtIDY6MDEgYS5tLiBzY2hyaWViIERlbm5p
cyBMaToNCj4gRHVyaW5nIEdQVSByZXNldCwgZHJpdmVyIHNob3VsZCBob2xkIG9uIGFsbCBleHRl
cm5hbCBhY2Nlc3MgdG8gR1BVLCANCj4gb3RoZXJ3aXNlIHBzcCB3aWxsIHJhbmRvbWx5IGZhaWwg
dG8gZG8gcG9zdCwgYW5kIHRoZW4gY2F1c2Ugc3lzdGVtIA0KPiBoYW5nLg0KPg0KPiBTaWduZWQt
b2ZmLWJ5OiBEZW5uaXMgTGkgPGRlbm5pcy5saUBhbWQuY29tPg0KPiBDaGFuZ2UtSWQ6IEk3ZDVk
NDFmOWM0MTk4YjkxN2Q3YjQ5NjA2YmEzODUwOTg4ZTViOTM2DQo+DQo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaCANCj4gYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHUuaA0KPiBpbmRleCA2YzdkZDBhNzA3YzkuLjM0YmZjMmExNDdmZiAx
MDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgNCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgNCj4gQEAgLTk2NSw3ICs5NjUs
NyBAQCBzdHJ1Y3QgYW1kZ3B1X2RldmljZSB7DQo+ICANCj4gIAlib29sICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGluX2dwdV9yZXNldDsNCj4gIAllbnVtIHBwX21wMV9zdGF0ZSAgICAgICAg
ICAgICAgIG1wMV9zdGF0ZTsNCj4gLQlzdHJ1Y3QgbXV0ZXggIGxvY2tfcmVzZXQ7DQo+ICsJc3Ry
dWN0IHJ3X3NlbWFwaG9yZQlyZXNldF9zZW07DQo+ICAJc3RydWN0IGFtZGdwdV9kb29yYmVsbF9p
bmRleCBkb29yYmVsbF9pbmRleDsNCj4gIA0KPiAgCXN0cnVjdCBtdXRleAkJCW5vdGlmaWVyX2xv
Y2s7DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1k
a2ZkLmMgDQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZC5jDQo+
IGluZGV4IGFkNTlhYzQ0MjNiOC4uNDEzOWM4MTM4OWE0IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkLmMNCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZC5jDQo+IEBAIC02MTEsNyArNjExLDkgQEAgaW50
IGFtZGdwdV9hbWRrZmRfc3VibWl0X2liKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIGVudW0ga2dkX2Vu
Z2luZV90eXBlIGVuZ2luZSwNCj4gIAkvKiBUaGlzIHdvcmtzIGZvciBOT19IV1MuIFRPRE86IG5l
ZWQgdG8gaGFuZGxlIHdpdGhvdXQga25vd2luZyBWTUlEICovDQo+ICAJam9iLT52bWlkID0gdm1p
ZDsNCj4gIA0KPiArCWRvd25fcmVhZCgmYWRldi0+cmVzZXRfc2VtKTsNCg0KVGhpcyAoYW5kIG90
aGVyIGluc3RhbmNlcyBiZWxvdykgd2lsbCBpbnRyb2R1Y2Ugc29tZSBsb2NrIGRlcGVuZGVuY3kg
aXNzdWVzLiBBbnkgbG9jayB0aGF0IHlvdSB0YWtlIHVuZGVyIEtGRCdzIERRTSBsb2NrIHdpbGwg
aW5oZXJpdCB0aGUgcHJvYmxlbSB0aGF0IHlvdSBjYW4ndCByZWNsYWltIG1lbW9yeSB3aGlsZSBo
b2xkaW5nIGl0IGJlY2F1c2UgdGhlIERRTSBsb2NrIGlzIHRha2VuIGluIE1NVSBub3RpZmllcnMu
IFRoYXQgd2lsbCBhZmZlY3QgYW55IGF0dGVtcHRzIG9mIGFsbG9jYXRpbmcgbWVtb3J5IHdoaWxl
IGhvbGRpbmcgdGhlIHJlc2V0X3NlbS4NCg0KRFFNIGFscmVhZHkgaGFzIGFuIGludGVybmFsIGZs
YWcgZHFtLT5pc19yZXNldHRpbmcgdGhhdCBpcyBzZXQgaW4gdGhlIEtGRCBwcmVfcmVzZXQgY2Fs
bGJhY2suIEl0IHdvdWxkIGJlIGJldHRlciB0byB1c2UgdGhhdCBpbiBEUU0gdG8gcHJldmVudCBh
bnkgY2FsbHMgdGhhdCBhY2Nlc3MgaGFyZHdhcmUuDQoNClJlZ2FyZHMsDQrCoCBGZWxpeA0KDQoN
Cj4gIAlyZXQgPSBhbWRncHVfaWJfc2NoZWR1bGUocmluZywgMSwgaWIsIGpvYiwgJmYpOw0KPiAr
CXVwX3JlYWQoJmFkZXYtPnJlc2V0X3NlbSk7DQo+ICAJaWYgKHJldCkgew0KPiAgCQlEUk1fRVJS
T1IoImFtZGdwdTogZmFpbGVkIHRvIHNjaGVkdWxlIElCLlxuIik7DQo+ICAJCWdvdG8gZXJyX2li
X3NjaGVkOw0KPiBAQCAtNjQ5LDYgKzY1MSw4IEBAIGludCBhbWRncHVfYW1ka2ZkX2ZsdXNoX2dw
dV90bGJfdm1pZChzdHJ1Y3QgDQo+IGtnZF9kZXYgKmtnZCwgdWludDE2X3Qgdm1pZCkgIHsNCj4g
IAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqKWtn
ZDsNCj4gIA0KPiArCWRvd25fcmVhZCgmYWRldi0+cmVzZXRfc2VtKTsNCj4gKw0KPiAgCWlmIChh
ZGV2LT5mYW1pbHkgPT0gQU1ER1BVX0ZBTUlMWV9BSSkgew0KPiAgCQlpbnQgaTsNCj4gIA0KPiBA
QCAtNjU4LDYgKzY2Miw4IEBAIGludCBhbWRncHVfYW1ka2ZkX2ZsdXNoX2dwdV90bGJfdm1pZChz
dHJ1Y3Qga2dkX2RldiAqa2dkLCB1aW50MTZfdCB2bWlkKQ0KPiAgCQlhbWRncHVfZ21jX2ZsdXNo
X2dwdV90bGIoYWRldiwgdm1pZCwgQU1ER1BVX0dGWEhVQl8wLCAwKTsNCj4gIAl9DQo+ICANCj4g
Kwl1cF9yZWFkKCZhZGV2LT5yZXNldF9zZW0pOw0KPiArDQo+ICAJcmV0dXJuIDA7DQo+ICB9DQo+
ICANCj4gQEAgLTY2NiwxMSArNjcyLDE4IEBAIGludCBhbWRncHVfYW1ka2ZkX2ZsdXNoX2dwdV90
bGJfcGFzaWQoc3RydWN0IGtnZF9kZXYgKmtnZCwgdWludDE2X3QgcGFzaWQpDQo+ICAJc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKilrZ2Q7DQo+ICAJ
Y29uc3QgdWludDMyX3QgZmx1c2hfdHlwZSA9IDA7DQo+ICAJYm9vbCBhbGxfaHViID0gZmFsc2U7
DQo+ICsJaW50IHJldCA9IDA7DQo+ICANCj4gIAlpZiAoYWRldi0+ZmFtaWx5ID09IEFNREdQVV9G
QU1JTFlfQUkpDQo+ICAJCWFsbF9odWIgPSB0cnVlOw0KPiAgDQo+IC0JcmV0dXJuIGFtZGdwdV9n
bWNfZmx1c2hfZ3B1X3RsYl9wYXNpZChhZGV2LCBwYXNpZCwgZmx1c2hfdHlwZSwgYWxsX2h1Yik7
DQo+ICsJZG93bl9yZWFkKCZhZGV2LT5yZXNldF9zZW0pOw0KPiArDQo+ICsJcmV0ID0gYW1kZ3B1
X2dtY19mbHVzaF9ncHVfdGxiX3Bhc2lkKGFkZXYsIHBhc2lkLCBmbHVzaF90eXBlLCANCj4gK2Fs
bF9odWIpOw0KPiArDQo+ICsJdXBfcmVhZCgmYWRldi0+cmVzZXRfc2VtKTsNCj4gKw0KPiArCXJl
dHVybiByZXQ7DQo+ICB9DQo+ICANCj4gIGJvb2wgYW1kZ3B1X2FtZGtmZF9oYXZlX2F0b21pY3Nf
c3VwcG9ydChzdHJ1Y3Qga2dkX2RldiAqa2dkKSBkaWZmIA0KPiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4X3YxMC5jIA0KPiBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4X3YxMC5jDQo+IGluZGV4IDY5MWM4OTcw
NWJjZC4uZGI1ZDUzM2RkNDA2IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92MTAuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92MTAuYw0KPiBAQCAtNTQyLDYgKzU0Miw3IEBAIHN0
YXRpYyBpbnQga2dkX2hxZF9kZXN0cm95KHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwN
Cj4gIAl1bnNpZ25lZCBsb25nIGVuZF9qaWZmaWVzOw0KPiAgCXVpbnQzMl90IHRlbXA7DQo+ICAJ
c3RydWN0IHYxMF9jb21wdXRlX21xZCAqbSA9IGdldF9tcWQobXFkKTsNCj4gKwlpbnQgcmV0ID0g
MDsNCj4gIA0KPiAgCWlmIChhZGV2LT5pbl9ncHVfcmVzZXQpDQo+ICAJCXJldHVybiAtRUlPOw0K
PiBAQCAtNTUxLDYgKzU1Miw4IEBAIHN0YXRpYyBpbnQga2dkX2hxZF9kZXN0cm95KHN0cnVjdCBr
Z2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwNCj4gIAlpbnQgcmV0cnk7DQo+ICAjZW5kaWYNCj4gIA0K
PiArCWRvd25fcmVhZCgmYWRldi0+cmVzZXRfc2VtKTsNCj4gKw0KPiAgCWFjcXVpcmVfcXVldWUo
a2dkLCBwaXBlX2lkLCBxdWV1ZV9pZCk7DQo+ICANCj4gIAlpZiAobS0+Y3BfaHFkX3ZtaWQgPT0g
MCkNCj4gQEAgLTYzMywxNCArNjM2LDE2IEBAIHN0YXRpYyBpbnQga2dkX2hxZF9kZXN0cm95KHN0
cnVjdCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwNCj4gIAkJCWJyZWFrOw0KPiAgCQlpZiAodGlt
ZV9hZnRlcihqaWZmaWVzLCBlbmRfamlmZmllcykpIHsNCj4gIAkJCXByX2VycigiY3AgcXVldWUg
cHJlZW1wdGlvbiB0aW1lIG91dC5cbiIpOw0KPiAtCQkJcmVsZWFzZV9xdWV1ZShrZ2QpOw0KPiAt
CQkJcmV0dXJuIC1FVElNRTsNCj4gKwkJCXJldCA9IC1FVElNRTsNCj4gKwkJCWdvdG8gcHJvX2Vu
ZDsNCj4gIAkJfQ0KPiAgCQl1c2xlZXBfcmFuZ2UoNTAwLCAxMDAwKTsNCj4gIAl9DQo+ICANCj4g
K3Byb19lbmQ6DQo+ICAJcmVsZWFzZV9xdWV1ZShrZ2QpOw0KPiAtCXJldHVybiAwOw0KPiArCXVw
X3JlYWQoJmFkZXYtPnJlc2V0X3NlbSk7DQo+ICsJcmV0dXJuIHJldDsNCj4gIH0NCj4gIA0KPiAg
c3RhdGljIGludCBrZ2RfaHFkX3NkbWFfZGVzdHJveShzdHJ1Y3Qga2dkX2RldiAqa2dkLCB2b2lk
ICptcWQsIGRpZmYgDQo+IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2FtZGtmZF9nZnhfdjcuYyANCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
YW1ka2ZkX2dmeF92Ny5jDQo+IGluZGV4IDBiN2U3ODc0ODU0MC4uY2YyN2ZlNTA5MWFhIDEwMDY0
NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92
Ny5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4
X3Y3LmMNCj4gQEAgLTQyNCwxMCArNDI0LDEzIEBAIHN0YXRpYyBpbnQga2dkX2hxZF9kZXN0cm95
KHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwNCj4gIAllbnVtIGhxZF9kZXF1ZXVlX3Jl
cXVlc3RfdHlwZSB0eXBlOw0KPiAgCXVuc2lnbmVkIGxvbmcgZmxhZ3MsIGVuZF9qaWZmaWVzOw0K
PiAgCWludCByZXRyeTsNCj4gKwlpbnQgcmV0ID0gMDsNCj4gIA0KPiAgCWlmIChhZGV2LT5pbl9n
cHVfcmVzZXQpDQo+ICAJCXJldHVybiAtRUlPOw0KPiAgDQo+ICsJZG93bl9yZWFkKCZhZGV2LT5y
ZXNldF9zZW0pOw0KPiArDQo+ICAJYWNxdWlyZV9xdWV1ZShrZ2QsIHBpcGVfaWQsIHF1ZXVlX2lk
KTsNCj4gIAlXUkVHMzIobW1DUF9IUURfUFFfRE9PUkJFTExfQ09OVFJPTCwgMCk7DQo+ICANCj4g
QEAgLTUwNiwxNCArNTA5LDE2IEBAIHN0YXRpYyBpbnQga2dkX2hxZF9kZXN0cm95KHN0cnVjdCBr
Z2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwNCj4gIAkJCWJyZWFrOw0KPiAgCQlpZiAodGltZV9hZnRl
cihqaWZmaWVzLCBlbmRfamlmZmllcykpIHsNCj4gIAkJCXByX2VycigiY3AgcXVldWUgcHJlZW1w
dGlvbiB0aW1lIG91dFxuIik7DQo+IC0JCQlyZWxlYXNlX3F1ZXVlKGtnZCk7DQo+IC0JCQlyZXR1
cm4gLUVUSU1FOw0KPiArCQkJcmV0ID0gLUVUSU1FOw0KPiArCQkJZ290byBwcm9fZW5kOw0KPiAg
CQl9DQo+ICAJCXVzbGVlcF9yYW5nZSg1MDAsIDEwMDApOw0KPiAgCX0NCj4gIA0KPiArcHJvX2Vu
ZDoNCj4gIAlyZWxlYXNlX3F1ZXVlKGtnZCk7DQo+IC0JcmV0dXJuIDA7DQo+ICsJdXBfcmVhZCgm
YWRldi0+cmVzZXRfc2VtKTsNCj4gKwlyZXR1cm4gcmV0Ow0KPiAgfQ0KPiAgDQo+ICBzdGF0aWMg
aW50IGtnZF9ocWRfc2RtYV9kZXN0cm95KHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwg
ZGlmZiANCj4gLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2Zk
X2dmeF92OC5jIA0KPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRf
Z2Z4X3Y4LmMNCj4gaW5kZXggY2NkNjM1YjgxMmI1Li5iYzhlMDcxODZhODUgMTAwNjQ0DQo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4X3Y4LmMNCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9nZnhfdjguYw0K
PiBAQCAtNDIwLDEwICs0MjAsMTMgQEAgc3RhdGljIGludCBrZ2RfaHFkX2Rlc3Ryb3koc3RydWN0
IGtnZF9kZXYgKmtnZCwgdm9pZCAqbXFkLA0KPiAgCXVuc2lnbmVkIGxvbmcgZmxhZ3MsIGVuZF9q
aWZmaWVzOw0KPiAgCWludCByZXRyeTsNCj4gIAlzdHJ1Y3QgdmlfbXFkICptID0gZ2V0X21xZCht
cWQpOw0KPiArCWludCByZXQgPSAwOw0KPiAgDQo+ICAJaWYgKGFkZXYtPmluX2dwdV9yZXNldCkN
Cj4gIAkJcmV0dXJuIC1FSU87DQo+ICANCj4gKwlkb3duX3JlYWQoJmFkZXYtPnJlc2V0X3NlbSk7
DQo+ICsNCj4gIAlhY3F1aXJlX3F1ZXVlKGtnZCwgcGlwZV9pZCwgcXVldWVfaWQpOw0KPiAgDQo+
ICAJaWYgKG0tPmNwX2hxZF92bWlkID09IDApDQo+IEBAIC01MDQsMTQgKzUwNywxNiBAQCBzdGF0
aWMgaW50IGtnZF9ocWRfZGVzdHJveShzdHJ1Y3Qga2dkX2RldiAqa2dkLCB2b2lkICptcWQsDQo+
ICAJCQlicmVhazsNCj4gIAkJaWYgKHRpbWVfYWZ0ZXIoamlmZmllcywgZW5kX2ppZmZpZXMpKSB7
DQo+ICAJCQlwcl9lcnIoImNwIHF1ZXVlIHByZWVtcHRpb24gdGltZSBvdXQuXG4iKTsNCj4gLQkJ
CXJlbGVhc2VfcXVldWUoa2dkKTsNCj4gLQkJCXJldHVybiAtRVRJTUU7DQo+ICsJCQlyZXQgPSAt
RVRJTUU7DQo+ICsJCQlnb3RvIHByb19lbmQ7DQo+ICAJCX0NCj4gIAkJdXNsZWVwX3JhbmdlKDUw
MCwgMTAwMCk7DQo+ICAJfQ0KPiAgDQo+ICtwcm9fZW5kOg0KPiAgCXJlbGVhc2VfcXVldWUoa2dk
KTsNCj4gLQlyZXR1cm4gMDsNCj4gKwl1cF9yZWFkKCZhZGV2LT5yZXNldF9zZW0pOw0KPiArCXJl
dHVybiByZXQ7DQo+ICB9DQo+ICANCj4gIHN0YXRpYyBpbnQga2dkX2hxZF9zZG1hX2Rlc3Ryb3ko
c3RydWN0IGtnZF9kZXYgKmtnZCwgdm9pZCAqbXFkLCBkaWZmIA0KPiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4X3Y5LmMgDQo+IGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9nZnhfdjkuYw0KPiBpbmRleCBkZjg0MWMy
YWM1ZTcuLjM0MWFkNjUyZDkxMCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2FtZGtmZF9nZnhfdjkuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92OS5jDQo+IEBAIC01NDAsMTAgKzU0MCwxMyBAQCBp
bnQga2dkX2dmeF92OV9ocWRfZGVzdHJveShzdHJ1Y3Qga2dkX2RldiAqa2dkLCB2b2lkICptcWQs
DQo+ICAJdW5zaWduZWQgbG9uZyBlbmRfamlmZmllczsNCj4gIAl1aW50MzJfdCB0ZW1wOw0KPiAg
CXN0cnVjdCB2OV9tcWQgKm0gPSBnZXRfbXFkKG1xZCk7DQo+ICsJaW50IHJldCA9IDA7DQo+ICAN
Cj4gIAlpZiAoYWRldi0+aW5fZ3B1X3Jlc2V0KQ0KPiAgCQlyZXR1cm4gLUVJTzsNCj4gIA0KPiAr
CWRvd25fcmVhZCgmYWRldi0+cmVzZXRfc2VtKTsNCj4gKw0KPiAgCWFjcXVpcmVfcXVldWUoa2dk
LCBwaXBlX2lkLCBxdWV1ZV9pZCk7DQo+ICANCj4gIAlpZiAobS0+Y3BfaHFkX3ZtaWQgPT0gMCkN
Cj4gQEAgLTU3MCwxNCArNTczLDE2IEBAIGludCBrZ2RfZ2Z4X3Y5X2hxZF9kZXN0cm95KHN0cnVj
dCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwNCj4gIAkJCWJyZWFrOw0KPiAgCQlpZiAodGltZV9h
ZnRlcihqaWZmaWVzLCBlbmRfamlmZmllcykpIHsNCj4gIAkJCXByX2VycigiY3AgcXVldWUgcHJl
ZW1wdGlvbiB0aW1lIG91dC5cbiIpOw0KPiAtCQkJcmVsZWFzZV9xdWV1ZShrZ2QpOw0KPiAtCQkJ
cmV0dXJuIC1FVElNRTsNCj4gKwkJCXJldCA9IC1FVElNRTsNCj4gKwkJCWdvdG8gcHJvX2VuZDsN
Cj4gIAkJfQ0KPiAgCQl1c2xlZXBfcmFuZ2UoNTAwLCAxMDAwKTsNCj4gIAl9DQo+ICANCj4gK3By
b19lbmQ6DQo+ICAJcmVsZWFzZV9xdWV1ZShrZ2QpOw0KPiAtCXJldHVybiAwOw0KPiArCXVwX3Jl
YWQoJmFkZXYtPnJlc2V0X3NlbSk7DQo+ICsJcmV0dXJuIHJldDsNCj4gIH0NCj4gIA0KPiAgc3Rh
dGljIGludCBrZ2RfaHFkX3NkbWFfZGVzdHJveShzdHJ1Y3Qga2dkX2RldiAqa2dkLCB2b2lkICpt
cWQsIGRpZmYgDQo+IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rl
YnVnZnMuYyANCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGVidWdmcy5j
DQo+IGluZGV4IGFlYWRhN2M5ZmJlYS4uZDhmMjY0YzQ3Yjg2IDEwMDY0NA0KPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGVidWdmcy5jDQo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZWJ1Z2ZzLmMNCj4gQEAgLTEwMCwxNCArMTAwLDE0
IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2RlYnVnZnNfYXV0b2R1bXBfb3BlbihzdHJ1Y3QgDQo+IGlu
b2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbGUpDQo+ICANCj4gIAlmaWxlLT5wcml2YXRlX2Rh
dGEgPSBhZGV2Ow0KPiAgDQo+IC0JbXV0ZXhfbG9jaygmYWRldi0+bG9ja19yZXNldCk7DQo+ICsJ
ZG93bl9yZWFkKCZhZGV2LT5yZXNldF9zZW0pOw0KPiAgCWlmIChhZGV2LT5hdXRvZHVtcC5kdW1w
aW5nLmRvbmUpIHsNCj4gIAkJcmVpbml0X2NvbXBsZXRpb24oJmFkZXYtPmF1dG9kdW1wLmR1bXBp
bmcpOw0KPiAgCQlyZXQgPSAwOw0KPiAgCX0gZWxzZSB7DQo+ICAJCXJldCA9IC1FQlVTWTsNCj4g
IAl9DQo+IC0JbXV0ZXhfdW5sb2NrKCZhZGV2LT5sb2NrX3Jlc2V0KTsNCj4gKwl1cF9yZWFkKCZh
ZGV2LT5yZXNldF9zZW0pOw0KPiAgDQo+ICAJcmV0dXJuIHJldDsNCj4gIH0NCj4gQEAgLTExODgs
NyArMTE4OCw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2RlYnVnZnNfdGVzdF9pYihzdHJ1Y3Qgc2Vx
X2ZpbGUgKm0sIHZvaWQgKmRhdGEpDQo+ICAJfQ0KPiAgDQo+ICAJLyogQXZvaWQgYWNjaWRlbnRs
eSB1bnBhcmtpbmcgdGhlIHNjaGVkIHRocmVhZCBkdXJpbmcgR1BVIHJlc2V0ICovDQo+IC0JbXV0
ZXhfbG9jaygmYWRldi0+bG9ja19yZXNldCk7DQo+ICsJZG93bl9yZWFkKCZhZGV2LT5yZXNldF9z
ZW0pOw0KPiAgDQo+ICAJLyogaG9sZCBvbiB0aGUgc2NoZWR1bGVyICovDQo+ICAJZm9yIChpID0g
MDsgaSA8IEFNREdQVV9NQVhfUklOR1M7IGkrKykgeyBAQCAtMTIxNSw3ICsxMjE1LDcgQEAgDQo+
IHN0YXRpYyBpbnQgYW1kZ3B1X2RlYnVnZnNfdGVzdF9pYihzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZv
aWQgKmRhdGEpDQo+ICAJCWt0aHJlYWRfdW5wYXJrKHJpbmctPnNjaGVkLnRocmVhZCk7DQo+ICAJ
fQ0KPiAgDQo+IC0JbXV0ZXhfdW5sb2NrKCZhZGV2LT5sb2NrX3Jlc2V0KTsNCj4gKwl1cF9yZWFk
KCZhZGV2LT5yZXNldF9zZW0pOw0KPiAgDQo+ICAJcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShk
ZXYtPmRldik7DQo+ICAJcG1fcnVudGltZV9wdXRfYXV0b3N1c3BlbmQoZGV2LT5kZXYpOw0KPiBA
QCAtMTM5NSw3ICsxMzk1LDcgQEAgc3RhdGljIGludCBhbWRncHVfZGVidWdmc19pYl9wcmVlbXB0
KHZvaWQgKmRhdGEsIHU2NCB2YWwpDQo+ICAJCXJldHVybiAtRU5PTUVNOw0KPiAgDQo+ICAJLyog
QXZvaWQgYWNjaWRlbnRseSB1bnBhcmtpbmcgdGhlIHNjaGVkIHRocmVhZCBkdXJpbmcgR1BVIHJl
c2V0ICovDQo+IC0JbXV0ZXhfbG9jaygmYWRldi0+bG9ja19yZXNldCk7DQo+ICsJZG93bl9yZWFk
KCZhZGV2LT5yZXNldF9zZW0pOw0KPiAgDQo+ICAJLyogc3RvcCB0aGUgc2NoZWR1bGVyICovDQo+
ICAJa3RocmVhZF9wYXJrKHJpbmctPnNjaGVkLnRocmVhZCk7DQo+IEBAIC0xNDM2LDcgKzE0MzYs
NyBAQCBzdGF0aWMgaW50IGFtZGdwdV9kZWJ1Z2ZzX2liX3ByZWVtcHQodm9pZCAqZGF0YSwgdTY0
IHZhbCkNCj4gIAkvKiByZXN0YXJ0IHRoZSBzY2hlZHVsZXIgKi8NCj4gIAlrdGhyZWFkX3VucGFy
ayhyaW5nLT5zY2hlZC50aHJlYWQpOw0KPiAgDQo+IC0JbXV0ZXhfdW5sb2NrKCZhZGV2LT5sb2Nr
X3Jlc2V0KTsNCj4gKwl1cF9yZWFkKCZhZGV2LT5yZXNldF9zZW0pOw0KPiAgDQo+ICAJdHRtX2Jv
X3VubG9ja19kZWxheWVkX3dvcmtxdWV1ZSgmYWRldi0+bW1hbi5iZGV2LCByZXNjaGVkKTsNCj4g
IA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rldmlj
ZS5jIA0KPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiBp
bmRleCAyODU4YzA5ZmQ4YzAuLmJjOTAyYzU5YzFjMCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPiBAQCAtMzA0NCw3ICszMDQ0LDcgQEAgaW50
IGFtZGdwdV9kZXZpY2VfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCj4gIAltdXRl
eF9pbml0KCZhZGV2LT5tbl9sb2NrKTsNCj4gIAltdXRleF9pbml0KCZhZGV2LT52aXJ0LnZmX2Vy
cm9ycy5sb2NrKTsNCj4gIAloYXNoX2luaXQoYWRldi0+bW5faGFzaCk7DQo+IC0JbXV0ZXhfaW5p
dCgmYWRldi0+bG9ja19yZXNldCk7DQo+ICsJaW5pdF9yd3NlbSgmYWRldi0+cmVzZXRfc2VtKTsN
Cj4gIAltdXRleF9pbml0KCZhZGV2LT5wc3AubXV0ZXgpOw0KPiAgCW11dGV4X2luaXQoJmFkZXYt
Pm5vdGlmaWVyX2xvY2spOw0KPiAgDQo+IEBAIC00MTUwLDEwICs0MTUwLDEwIEBAIHN0YXRpYyBp
bnQgYW1kZ3B1X2RvX2FzaWNfcmVzZXQoc3RydWN0IA0KPiBhbWRncHVfaGl2ZV9pbmZvICpoaXZl
LCAgc3RhdGljIGJvb2wgYW1kZ3B1X2RldmljZV9sb2NrX2FkZXYoc3RydWN0IA0KPiBhbWRncHVf
ZGV2aWNlICphZGV2LCBib29sIHRyeWxvY2spICB7DQo+ICAJaWYgKHRyeWxvY2spIHsNCj4gLQkJ
aWYgKCFtdXRleF90cnlsb2NrKCZhZGV2LT5sb2NrX3Jlc2V0KSkNCj4gKwkJaWYgKCFkb3duX3dy
aXRlX3RyeWxvY2soJmFkZXYtPnJlc2V0X3NlbSkpDQo+ICAJCQlyZXR1cm4gZmFsc2U7DQo+ICAJ
fSBlbHNlDQo+IC0JCW11dGV4X2xvY2soJmFkZXYtPmxvY2tfcmVzZXQpOw0KPiArCQlkb3duX3dy
aXRlKCZhZGV2LT5yZXNldF9zZW0pOw0KPiAgDQo+ICAJYXRvbWljX2luYygmYWRldi0+Z3B1X3Jl
c2V0X2NvdW50ZXIpOw0KPiAgCWFkZXYtPmluX2dwdV9yZXNldCA9IHRydWU7DQo+IEBAIC00MTc3
LDcgKzQxNzcsNyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfZGV2aWNlX3VubG9ja19hZGV2KHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2KQ0KPiAgCWFtZGdwdV92Zl9lcnJvcl90cmFuc19hbGwoYWRl
dik7DQo+ICAJYWRldi0+bXAxX3N0YXRlID0gUFBfTVAxX1NUQVRFX05PTkU7DQo+ICAJYWRldi0+
aW5fZ3B1X3Jlc2V0ID0gZmFsc2U7DQo+IC0JbXV0ZXhfdW5sb2NrKCZhZGV2LT5sb2NrX3Jlc2V0
KTsNCj4gKwl1cF93cml0ZSgmYWRldi0+cmVzZXRfc2VtKTsNCj4gIH0NCj4gIA0KPiAgc3RhdGlj
IHZvaWQgYW1kZ3B1X2RldmljZV9yZXN1bWVfZGlzcGxheV9hdWRpbyhzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSANCj4gKmFkZXYpIGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfam9iLmMgDQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2pvYi5j
DQo+IGluZGV4IDI5NzVjNGE2ZTU4MS4uZDRjNjlmOTU3N2E0IDEwMDY0NA0KPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfam9iLmMNCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2pvYi5jDQo+IEBAIC0yMjUsOCArMjI1LDEwIEBAIHN0YXRp
YyBzdHJ1Y3QgZG1hX2ZlbmNlICphbWRncHVfam9iX3J1bihzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAq
c2NoZWRfam9iKQ0KPiAgCWlmIChmaW5pc2hlZC0+ZXJyb3IgPCAwKSB7DQo+ICAJCURSTV9JTkZP
KCJTa2lwIHNjaGVkdWxpbmcgSUJzIVxuIik7DQo+ICAJfSBlbHNlIHsNCj4gKwkJZG93bl9yZWFk
KCZyaW5nLT5hZGV2LT5yZXNldF9zZW0pOw0KPiAgCQlyID0gYW1kZ3B1X2liX3NjaGVkdWxlKHJp
bmcsIGpvYi0+bnVtX2licywgam9iLT5pYnMsIGpvYiwNCj4gIAkJCQkgICAgICAgJmZlbmNlKTsN
Cj4gKwkJdXBfcmVhZCgmcmluZy0+YWRldi0+cmVzZXRfc2VtKTsNCj4gIAkJaWYgKHIpDQo+ICAJ
CQlEUk1fRVJST1IoIkVycm9yIHNjaGVkdWxpbmcgSUJzICglZClcbiIsIHIpOw0KPiAgCX0NCj4g
QEAgLTIzNyw2ICsyMzksNyBAQCBzdGF0aWMgc3RydWN0IGRtYV9mZW5jZSAqYW1kZ3B1X2pvYl9y
dW4oc3RydWN0IGRybV9zY2hlZF9qb2IgKnNjaGVkX2pvYikNCj4gIAlhbWRncHVfam9iX2ZyZWVf
cmVzb3VyY2VzKGpvYik7DQo+ICANCj4gIAlmZW5jZSA9IHIgPyBFUlJfUFRSKHIpIDogZmVuY2U7
DQo+ICsNCj4gIAlyZXR1cm4gZmVuY2U7DQo+ICB9DQo+ICANCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yaW5nLmMgDQo+IGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3JpbmcuYw0KPiBpbmRleCAxM2VhOGViYzQyMWMuLjM4YTc1MWY3
ZDg4OSAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jp
bmcuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmluZy5jDQo+
IEBAIC0xMjEsNiArMTIxLDcgQEAgdm9pZCBhbWRncHVfcmluZ19nZW5lcmljX3BhZF9pYihzdHJ1
Y3QgYW1kZ3B1X3JpbmcgDQo+ICpyaW5nLCBzdHJ1Y3QgYW1kZ3B1X2liICppYikgIHZvaWQgYW1k
Z3B1X3JpbmdfY29tbWl0KHN0cnVjdCANCj4gYW1kZ3B1X3JpbmcgKnJpbmcpICB7DQo+ICAJdWlu
dDMyX3QgY291bnQ7DQo+ICsJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSByaW5nLT5hZGV2
Ow0KPiAgDQo+ICAJLyogV2UgcGFkIHRvIG1hdGNoIGZldGNoIHNpemUgKi8NCj4gIAljb3VudCA9
IHJpbmctPmZ1bmNzLT5hbGlnbl9tYXNrICsgMSAtIGRpZmYgLS1naXQgDQo+IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvbXhncHVfYWkuYyANCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9teGdwdV9haS5jDQo+IGluZGV4IDVmZDY3ZTFjYzJhMC4uOTdmMzM1NDBhYTAyIDEwMDY0
NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9teGdwdV9haS5jDQo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L214Z3B1X2FpLmMNCj4gQEAgLTI0NCwxMSArMjQ0
LDExIEBAIHN0YXRpYyB2b2lkIHhncHVfYWlfbWFpbGJveF9mbHJfd29yayhzdHJ1Y3Qgd29ya19z
dHJ1Y3QgKndvcmspDQo+ICAJICogb3RoZXJ3aXNlIHRoZSBtYWlsYm94IG1zZyB3aWxsIGJlIHJ1
aW5lZC9yZXNldGVkIGJ5DQo+ICAJICogdGhlIFZGIEZMUi4NCj4gIAkgKg0KPiAtCSAqIHdlIGNh
biB1bmxvY2sgdGhlIGxvY2tfcmVzZXQgdG8gYWxsb3cgImFtZGdwdV9qb2JfdGltZWRvdXQiDQo+
ICsJICogd2UgY2FuIHVubG9jayB0aGUgcmVzZXRfc2VtIHRvIGFsbG93ICJhbWRncHVfam9iX3Rp
bWVkb3V0Ig0KPiAgCSAqIHRvIHJ1biBncHVfcmVjb3ZlcigpIGFmdGVyIEZMUl9OT1RJRklDQVRJ
T05fQ01QTCByZWNlaXZlZA0KPiAgCSAqIHdoaWNoIG1lYW5zIGhvc3Qgc2lkZSBoYWQgZmluaXNo
ZWQgdGhpcyBWRidzIEZMUi4NCj4gIAkgKi8NCj4gLQlsb2NrZWQgPSBtdXRleF90cnlsb2NrKCZh
ZGV2LT5sb2NrX3Jlc2V0KTsNCj4gKwlsb2NrZWQgPSBkb3duX3dyaXRlX3RyeWxvY2soJmFkZXYt
PnJlc2V0X3NlbSk7DQo+ICAJaWYgKGxvY2tlZCkNCj4gIAkJYWRldi0+aW5fZ3B1X3Jlc2V0ID0g
dHJ1ZTsNCj4gIA0KPiBAQCAtMjYzLDcgKzI2Myw3IEBAIHN0YXRpYyB2b2lkIHhncHVfYWlfbWFp
bGJveF9mbHJfd29yayhzdHJ1Y3QgDQo+IHdvcmtfc3RydWN0ICp3b3JrKQ0KPiAgZmxyX2RvbmU6
DQo+ICAJaWYgKGxvY2tlZCkgew0KPiAgCQlhZGV2LT5pbl9ncHVfcmVzZXQgPSBmYWxzZTsNCj4g
LQkJbXV0ZXhfdW5sb2NrKCZhZGV2LT5sb2NrX3Jlc2V0KTsNCj4gKwkJdXBfd3JpdGUoJmFkZXYt
PnJlc2V0X3NlbSk7DQo+ICAJfQ0KPiAgDQo+ICAJLyogVHJpZ2dlciByZWNvdmVyeSBmb3Igd29y
bGQgc3dpdGNoIGZhaWx1cmUgaWYgbm8gVERSICovIGRpZmYgLS1naXQgDQo+IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvbXhncHVfbnYuYyANCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9teGdwdV9udi5jDQo+IGluZGV4IGNlMmJmMWZiNzllZC4uNDg0ZDYxYzIyMzk2IDEwMDY0
NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9teGdwdV9udi5jDQo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L214Z3B1X252LmMNCj4gQEAgLTI2NSwxMSArMjY1
LDExIEBAIHN0YXRpYyB2b2lkIHhncHVfbnZfbWFpbGJveF9mbHJfd29yayhzdHJ1Y3Qgd29ya19z
dHJ1Y3QgKndvcmspDQo+ICAJICogb3RoZXJ3aXNlIHRoZSBtYWlsYm94IG1zZyB3aWxsIGJlIHJ1
aW5lZC9yZXNldGVkIGJ5DQo+ICAJICogdGhlIFZGIEZMUi4NCj4gIAkgKg0KPiAtCSAqIHdlIGNh
biB1bmxvY2sgdGhlIGxvY2tfcmVzZXQgdG8gYWxsb3cgImFtZGdwdV9qb2JfdGltZWRvdXQiDQo+
ICsJICogd2UgY2FuIHVubG9jayB0aGUgcmVzZXRfc2VtIHRvIGFsbG93ICJhbWRncHVfam9iX3Rp
bWVkb3V0Ig0KPiAgCSAqIHRvIHJ1biBncHVfcmVjb3ZlcigpIGFmdGVyIEZMUl9OT1RJRklDQVRJ
T05fQ01QTCByZWNlaXZlZA0KPiAgCSAqIHdoaWNoIG1lYW5zIGhvc3Qgc2lkZSBoYWQgZmluaXNo
ZWQgdGhpcyBWRidzIEZMUi4NCj4gIAkgKi8NCj4gLQlsb2NrZWQgPSBtdXRleF90cnlsb2NrKCZh
ZGV2LT5sb2NrX3Jlc2V0KTsNCj4gKwlsb2NrZWQgPSBkb3duX3dyaXRlX3RyeWxvY2soJmFkZXYt
PnJlc2V0X3NlbSk7DQo+ICAJaWYgKGxvY2tlZCkNCj4gIAkJYWRldi0+aW5fZ3B1X3Jlc2V0ID0g
dHJ1ZTsNCj4gIA0KPiBAQCAtMjg0LDcgKzI4NCw3IEBAIHN0YXRpYyB2b2lkIHhncHVfbnZfbWFp
bGJveF9mbHJfd29yayhzdHJ1Y3QgDQo+IHdvcmtfc3RydWN0ICp3b3JrKQ0KPiAgZmxyX2RvbmU6
DQo+ICAJaWYgKGxvY2tlZCkgew0KPiAgCQlhZGV2LT5pbl9ncHVfcmVzZXQgPSBmYWxzZTsNCj4g
LQkJbXV0ZXhfdW5sb2NrKCZhZGV2LT5sb2NrX3Jlc2V0KTsNCj4gKwkJdXBfd3JpdGUoJmFkZXYt
PnJlc2V0X3NlbSk7DQo+ICAJfQ0KPiAgDQo+ICAJLyogVHJpZ2dlciByZWNvdmVyeSBmb3Igd29y
bGQgc3dpdGNoIGZhaWx1cmUgaWYgbm8gVERSICovDQpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2FtZC1nZngK
