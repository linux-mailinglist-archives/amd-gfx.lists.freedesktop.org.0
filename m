Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 85DA27448C
	for <lists+amd-gfx@lfdr.de>; Thu, 25 Jul 2019 06:54:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E4B7F6E400;
	Thu, 25 Jul 2019 04:54:30 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-DM3-obe.outbound.protection.outlook.com
 (mail-eopbgr800079.outbound.protection.outlook.com [40.107.80.79])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7BE586E400
 for <amd-gfx@lists.freedesktop.org>; Thu, 25 Jul 2019 04:54:29 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=cFxg07nmYNRkR1iyTrn8GShoCFXchOJKTYSctoIX/3lEJP4W9jOnf2+QTLo6ksUEzaX5o0ypvzsFQmgRbNriisr6HxmLlpPaJp+LOu/g+r7JnU/L/XUe/9bqbdbGXcqgYawpjyQhURCurd0zqe9RR2m8W30oS7PGf7rrc+RPkBq4kViO3Yf9Wihy/wIETwLV2X/Z9x29ZFx/YVQYwSNEQWVFGKvjfz0Z8m0DY09FdbgNcg7EIoU6gSBzZPDjIh6r9zyj8RN8VHFYFw+0TsUA4s65tf5/gxOKTZF4WiKJ1aaEv17k6KQoyJPvk4080UaTtCgn7x0DVN8rFBlu7fZppw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=wA+xmABwfiOVO3wkt/KWT8Az5qOcGxloDP7NwhAxgK4=;
 b=dYKpjoMa9ZK7wTKcowScVCQDNktMymx+/A+dFmU3/c07XLRuXuFLgI6KFqsxSGDTuUCBo7736aOnPFSi42sjp0hKQYFNcko0cBog8R6gcq7e/FsEngFnlVmj7c1wASgl+izbf32kwHIudweQywJrQuVzjCcg6q4eLiR+zfrrciKEuc1y1I+liafcNyd6M4O4iffU8YUVXoCKXubRJiBhOZZBNMPJwA5kaTWfMMQvLQuEnnavUQ7zV8rRj4mLV5IbvB73ecfFiBCAy/OfS3njI0k2g+7uHboE0sM7pvXIpMLfwzU3Us5XD3qTzs7AN/USAW6MfT1LiB1FHld7qcFmbA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=amd.com;dmarc=pass action=none header.from=amd.com;dkim=pass
 header.d=amd.com;arc=none
Received: from MN2PR12MB3296.namprd12.prod.outlook.com (20.179.80.139) by
 MN2PR12MB4159.namprd12.prod.outlook.com (52.135.50.81) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2115.10; Thu, 25 Jul 2019 04:54:27 +0000
Received: from MN2PR12MB3296.namprd12.prod.outlook.com
 ([fe80::ad59:f055:2417:660f]) by MN2PR12MB3296.namprd12.prod.outlook.com
 ([fe80::ad59:f055:2417:660f%6]) with mapi id 15.20.2094.013; Thu, 25 Jul 2019
 04:54:27 +0000
From: "Wang, Kevin(Yang)" <Kevin1.Wang@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 5/5] drm/amd/powerplay: implment sysfs feature status function
 in smu
Thread-Topic: [PATCH 5/5] drm/amd/powerplay: implment sysfs feature status
 function in smu
Thread-Index: AQHVQqUJN7uz8K6KHEuO46JPMree1w==
Date: Thu, 25 Jul 2019 04:54:27 +0000
Message-ID: <20190725045403.7458-5-kevin1.wang@amd.com>
References: <20190725045403.7458-1-kevin1.wang@amd.com>
In-Reply-To: <20190725045403.7458-1-kevin1.wang@amd.com>
Accept-Language: en-US, zh-CN
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: HK2PR0302CA0015.apcprd03.prod.outlook.com
 (2603:1096:202::25) To MN2PR12MB3296.namprd12.prod.outlook.com
 (2603:10b6:208:aa::11)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.22.0
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 1d671b99-340a-470c-a9f1-08d710bc2c07
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:MN2PR12MB4159; 
x-ms-traffictypediagnostic: MN2PR12MB4159:
x-microsoft-antispam-prvs: <MN2PR12MB4159F8D293E5B8579D84B328A2C10@MN2PR12MB4159.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:197;
x-forefront-prvs: 0109D382B0
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(136003)(346002)(366004)(396003)(376002)(189003)(199004)(256004)(2616005)(14444005)(478600001)(186003)(11346002)(3846002)(1076003)(6116002)(81166006)(8676002)(446003)(305945005)(6916009)(5640700003)(30864003)(8936002)(81156014)(5660300002)(54906003)(2906002)(7736002)(68736007)(6512007)(316002)(66066001)(66556008)(52116002)(71190400001)(486006)(66476007)(66446008)(66946007)(86362001)(6486002)(476003)(2501003)(2351001)(14454004)(25786009)(76176011)(102836004)(36756003)(26005)(4326008)(50226002)(6506007)(386003)(53946003)(71200400001)(53936002)(6436002)(99286004)(64756008)(309714004);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB4159;
 H:MN2PR12MB3296.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: pkRSGaK0zg3JXOf2HdZ/ImKG+0QtdN2ndGJv8tZz/KhbFcoM/6CstJCukRCynu3w+MOctJjEuFbwG1+xbGwQ89leXc2IXN1tKxSMZmaruChJwZozlhGWRFt8ArEy1WPVmC9wOkk8ZSwXc3N9qelGQAxW2RqLD3Ie6bt8/Vo/lwR9s74AGcyN578CXKvyuwUgrjdCg4PZv9MCpC8E0haN5TatSOYFSaxhOHZ2Vtyvj9ZH61yByqoEINFeTN3xHjymn4R25Cp2Ih1MZ/QMAzudpXNzkwCtI3tF7ejS5v+KsRQfRhhn+brYbSqteJCjpFO1pxuETwhU/eCFr7XbA5Dp1RKM5+wLiie6RcXb2D2/VsLbMDGAn6Gb8Vzpwktw1wQpyLrp8x4Tx8uaTvX88JPZTMZRMhfXuo2Zk4cta51pDUU=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 1d671b99-340a-470c-a9f1-08d710bc2c07
X-MS-Exchange-CrossTenant-originalarrivaltime: 25 Jul 2019 04:54:27.7478 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: kevwa@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB4159
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=wA+xmABwfiOVO3wkt/KWT8Az5qOcGxloDP7NwhAxgK4=;
 b=Edd5t+Shr5gzXDYAo+lBctqnWK2OGES69OVcCmuDDRWf4nwkSKRcnh6aUWz4B2ER11xr2pKg3QkceXodPw4a8L7fp5/OH7nmHPcgpzrNhOhzTqCiQer+Aa97JMGPReBmoRvTWW7VsvzhCiJXZC/33v90Y5JPwja5wrbwzNGfzXM=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Kevin1.Wang@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>, "Huang,
 Ray" <Ray.Huang@amd.com>, "Feng, Kenneth" <Kenneth.Feng@amd.com>, "Wang,
 Kevin\(Yang\)" <Kevin1.Wang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

MS4gVW5pZmllZCBmZWF0dXJlIGVuYWJsZSBzdGF0dXMgZm9ybWF0IGluIHN5c2ZzCjIuIFJlbmFt
ZSBwcGZlYXR1cmUgdG8gcHBfZmVhdHVyZXMgdG8gYWRhcHQgb3RoZXIgcHAgc3lzZnMgbm9kZSBu
YW1lCjMuIHRoaXMgZnVuY3Rpb24gc3VwcG9ydCBhbGwgYXNpYywgbm90IGFzaWMgcmVsYXRlZCBm
dW5jdGlvbi4KClNpZ25lZC1vZmYtYnk6IEtldmluIFdhbmcgPGtldmluMS53YW5nQGFtZC5jb20+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtLmMgICAgICAgIHwgICA2
ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9hbWRncHVfc211LmMgICAgfCAgNjEg
KysrKysrKwogLi4uL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvYW1kZ3B1X3NtdS5oICAgIHwg
ICA4ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmMgICAgfCAx
NjUgLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS92ZWdh
MjBfcHB0LmMgICAgfCAxNTMgLS0tLS0tLS0tLS0tLS0tLQogNSBmaWxlcyBjaGFuZ2VkLCA2NiBp
bnNlcnRpb25zKCspLCAzMjcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfcG0uYwppbmRleCA4NjYwOTdkNWNmMjYuLjhlYmY4MTgwNWEzNSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtLmMKQEAgLTgyMCw3ICs4MjAsNyBAQCBzdGF0aWMgc3Np
emVfdCBhbWRncHVfc2V0X3BwZmVhdHVyZV9zdGF0dXMoc3RydWN0IGRldmljZSAqZGV2LAogCXBy
X2RlYnVnKCJmZWF0dXJlbWFzayA9IDB4JWxseFxuIiwgZmVhdHVyZW1hc2spOwogCiAJaWYgKGlz
X3N1cHBvcnRfc3dfc211KGFkZXYpKSB7Ci0JCXJldCA9IHNtdV9zZXRfcHBmZWF0dXJlX3N0YXR1
cygmYWRldi0+c211LCBmZWF0dXJlbWFzayk7CisJCXJldCA9IHNtdV9zeXNfc2V0X3BwX2ZlYXR1
cmVfbWFzaygmYWRldi0+c211LCBmZWF0dXJlbWFzayk7CiAJCWlmIChyZXQpCiAJCQlyZXR1cm4g
LUVJTlZBTDsKIAl9IGVsc2UgaWYgKGFkZXYtPnBvd2VycGxheS5wcF9mdW5jcy0+c2V0X3BwZmVh
dHVyZV9zdGF0dXMpIHsKQEAgLTg0MCw3ICs4NDAsNyBAQCBzdGF0aWMgc3NpemVfdCBhbWRncHVf
Z2V0X3BwZmVhdHVyZV9zdGF0dXMoc3RydWN0IGRldmljZSAqZGV2LAogCXN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2ID0gZGRldi0+ZGV2X3ByaXZhdGU7CiAKIAlpZiAoaXNfc3VwcG9ydF9zd19z
bXUoYWRldikpIHsKLQkJcmV0dXJuIHNtdV9nZXRfcHBmZWF0dXJlX3N0YXR1cygmYWRldi0+c211
LCBidWYpOworCQlyZXR1cm4gc211X3N5c19nZXRfcHBfZmVhdHVyZV9tYXNrKCZhZGV2LT5zbXUs
IGJ1Zik7CiAJfSBlbHNlIGlmIChhZGV2LT5wb3dlcnBsYXkucHBfZnVuY3MtPmdldF9wcGZlYXR1
cmVfc3RhdHVzKQogCQlyZXR1cm4gYW1kZ3B1X2RwbV9nZXRfcHBmZWF0dXJlX3N0YXR1cyhhZGV2
LCBidWYpOwogCkBAIC0xNTAwLDcgKzE1MDAsNyBAQCBzdGF0aWMgREVWSUNFX0FUVFIoZ3B1X2J1
c3lfcGVyY2VudCwgU19JUlVHTywKIHN0YXRpYyBERVZJQ0VfQVRUUihtZW1fYnVzeV9wZXJjZW50
LCBTX0lSVUdPLAogCQlhbWRncHVfZ2V0X21lbW9yeV9idXN5X3BlcmNlbnQsIE5VTEwpOwogc3Rh
dGljIERFVklDRV9BVFRSKHBjaWVfYncsIFNfSVJVR08sIGFtZGdwdV9nZXRfcGNpZV9idywgTlVM
TCk7Ci1zdGF0aWMgREVWSUNFX0FUVFIocHBmZWF0dXJlcywgU19JUlVHTyB8IFNfSVdVU1IsCitz
dGF0aWMgREVWSUNFX0FUVFIocHBfZmVhdHVyZXMsIFNfSVJVR08gfCBTX0lXVVNSLAogCQlhbWRn
cHVfZ2V0X3BwZmVhdHVyZV9zdGF0dXMsCiAJCWFtZGdwdV9zZXRfcHBmZWF0dXJlX3N0YXR1cyk7
CiBzdGF0aWMgREVWSUNFX0FUVFIodW5pcXVlX2lkLCBTX0lSVUdPLCBhbWRncHVfZ2V0X3VuaXF1
ZV9pZCwgTlVMTCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9h
bWRncHVfc211LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9hbWRncHVfc211LmMK
aW5kZXggZTg4MWRlOTU1Mzg4Li45MDgzM2ZmMmZlMDAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvcG93ZXJwbGF5L2FtZGdwdV9zbXUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L3Bvd2VycGxheS9hbWRncHVfc211LmMKQEAgLTU1LDYgKzU1LDY3IEBAIGNvbnN0IGNoYXIgKnNt
dV9nZXRfZmVhdHVyZV9uYW1lKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBlbnVtIHNtdV9mZWF0
dXJlX21hc2sKIAlyZXR1cm4gX19zbXVfZmVhdHVyZV9uYW1lc1tmZWF0dXJlXTsKIH0KIAorc2l6
ZV90IHNtdV9zeXNfZ2V0X3BwX2ZlYXR1cmVfbWFzayhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwg
Y2hhciAqYnVmKQoreworCXNpemVfdCBzaXplID0gMDsKKwlpbnQgcmV0ID0gMCwgaSA9IDA7CisJ
dWludDMyX3QgZmVhdHVyZV9tYXNrWzJdID0geyAwIH07CisJaW50MzJfdCBmZWF0dXJlX2luZGV4
ID0gMDsKKwl1aW50MzJfdCBjb3VudCA9IDA7CisKKwlyZXQgPSBzbXVfZmVhdHVyZV9nZXRfZW5h
YmxlZF9tYXNrKHNtdSwgZmVhdHVyZV9tYXNrLCAyKTsKKwlpZiAocmV0KQorCQlnb3RvIGZhaWxl
ZDsKKworCXNpemUgPSAgc3ByaW50ZihidWYgKyBzaXplLCAiZmVhdHVyZXMgaGlnaDogMHglMDh4
IGxvdzogMHglMDh4XG4iLAorCQkJZmVhdHVyZV9tYXNrWzFdLCBmZWF0dXJlX21hc2tbMF0pOwor
CisJZm9yIChpID0gMDsgaSA8IFNNVV9GRUFUVVJFX0NPVU5UOyBpKyspIHsKKwkJZmVhdHVyZV9p
bmRleCA9IHNtdV9mZWF0dXJlX2dldF9pbmRleChzbXUsIGkpOworCQlpZiAoZmVhdHVyZV9pbmRl
eCA8IDApCisJCQljb250aW51ZTsKKwkJc2l6ZSArPSBzcHJpbnRmKGJ1ZiArIHNpemUsICIlMDJk
LiAlLTIwcyAoJTJkKSA6ICVzXG4iLAorCQkJICAgICAgIGNvdW50KyssCisJCQkgICAgICAgc211
X2dldF9mZWF0dXJlX25hbWUoc211LCBpKSwKKwkJCSAgICAgICBmZWF0dXJlX2luZGV4LAorCQkJ
ICAgICAgICEhc211X2ZlYXR1cmVfaXNfZW5hYmxlZChzbXUsIGkpID8gImVuYWJlbGQiIDogImRp
c2FibGVkIik7CisJfQorCitmYWlsZWQ6CisJcmV0dXJuIHNpemU7Cit9CisKK2ludCBzbXVfc3lz
X3NldF9wcF9mZWF0dXJlX21hc2soc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHVpbnQ2NF90IG5l
d19tYXNrKQoreworCWludCByZXQgPSAwOworCXVpbnQzMl90IGZlYXR1cmVfbWFza1syXSA9IHsg
MCB9OworCXVpbnQ2NF90IGZlYXR1cmVfMl9lbmFibGVkID0gMDsKKwl1aW50NjRfdCBmZWF0dXJl
XzJfZGlzYWJsZWQgPSAwOworCXVpbnQ2NF90IGZlYXR1cmVfZW5hYmxlcyA9IDA7CisKKwlyZXQg
PSBzbXVfZmVhdHVyZV9nZXRfZW5hYmxlZF9tYXNrKHNtdSwgZmVhdHVyZV9tYXNrLCAyKTsKKwlp
ZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJZmVhdHVyZV9lbmFibGVzID0gKCh1aW50NjRfdClm
ZWF0dXJlX21hc2tbMV0gPDwgMzIgfCAodWludDY0X3QpZmVhdHVyZV9tYXNrWzBdKTsKKworCWZl
YXR1cmVfMl9lbmFibGVkICA9IH5mZWF0dXJlX2VuYWJsZXMgJiBuZXdfbWFzazsKKwlmZWF0dXJl
XzJfZGlzYWJsZWQgPSBmZWF0dXJlX2VuYWJsZXMgJiB+bmV3X21hc2s7CisKKwlpZiAoZmVhdHVy
ZV8yX2VuYWJsZWQpIHsKKwkJcmV0ID0gc211X2ZlYXR1cmVfdXBkYXRlX2VuYWJsZV9zdGF0ZShz
bXUsIGZlYXR1cmVfMl9lbmFibGVkLCB0cnVlKTsKKwkJaWYgKHJldCkKKwkJCXJldDsKKwl9CisJ
aWYgKGZlYXR1cmVfMl9kaXNhYmxlZCkgeworCQlyZXQgPSBzbXVfZmVhdHVyZV91cGRhdGVfZW5h
YmxlX3N0YXRlKHNtdSwgZmVhdHVyZV8yX2Rpc2FibGVkLCBmYWxzZSk7CisJCWlmIChyZXQpCisJ
CQlyZXR1cm4gcmV0OworCX0KKworCXJldHVybiByZXQ7Cit9CisKIGludCBzbXVfZ2V0X3NtY192
ZXJzaW9uKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCB1aW50MzJfdCAqaWZfdmVyc2lvbiwgdWlu
dDMyX3QgKnNtdV92ZXJzaW9uKQogewogCWludCByZXQgPSAwOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2FtZGdwdV9zbXUuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvcG93ZXJwbGF5L2luYy9hbWRncHVfc211LmgKaW5kZXggYWJjMjY0NGI0YzA3Li5hYzll
OWQ1ZDhhNWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9h
bWRncHVfc211LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2FtZGdw
dV9zbXUuaApAQCAtNDMyLDggKzQzMiw2IEBAIHN0cnVjdCBwcHRhYmxlX2Z1bmNzIHsKIAkJCQkg
ICAgICB1aW50MzJfdCAqbWNsa19tYXNrLAogCQkJCSAgICAgIHVpbnQzMl90ICpzb2NfbWFzayk7
CiAJaW50ICgqc2V0X2NwdV9wb3dlcl9zdGF0ZSkoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpOwot
CWludCAoKnNldF9wcGZlYXR1cmVfc3RhdHVzKShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgdWlu
dDY0X3QgcHBmZWF0dXJlcyk7Ci0JaW50ICgqZ2V0X3BwZmVhdHVyZV9zdGF0dXMpKHN0cnVjdCBz
bXVfY29udGV4dCAqc211LCBjaGFyICpidWYpOwogCWJvb2wgKCppc19kcG1fcnVubmluZykoc3Ry
dWN0IHNtdV9jb250ZXh0ICpzbXUpOwogCWludCAoKnRhYmxlc19pbml0KShzdHJ1Y3Qgc211X2Nv
bnRleHQgKnNtdSwgc3RydWN0IHNtdV90YWJsZSAqdGFibGVzKTsKIAlpbnQgKCpzZXRfdGhlcm1h
bF9mYW5fdGFibGUpKHN0cnVjdCBzbXVfY29udGV4dCAqc211KTsKQEAgLTcxMywxMCArNzExLDYg
QEAgc3RydWN0IHNtdV9mdW5jcwogCSgoc211KS0+cHB0X2Z1bmNzLT5kcG1fc2V0X3ZjZV9lbmFi
bGUgPyAoc211KS0+cHB0X2Z1bmNzLT5kcG1fc2V0X3ZjZV9lbmFibGUoKHNtdSksIChlbmFibGUp
KSA6IDApCiAjZGVmaW5lIHNtdV9zZXRfeGdtaV9wc3RhdGUoc211LCBwc3RhdGUpIFwKIAkJKChz
bXUpLT5mdW5jcy0+c2V0X3hnbWlfcHN0YXRlID8gKHNtdSktPmZ1bmNzLT5zZXRfeGdtaV9wc3Rh
dGUoKHNtdSksIChwc3RhdGUpKSA6IDApCi0jZGVmaW5lIHNtdV9zZXRfcHBmZWF0dXJlX3N0YXR1
cyhzbXUsIHBwZmVhdHVyZXMpIFwKLQkoKHNtdSktPnBwdF9mdW5jcy0+c2V0X3BwZmVhdHVyZV9z
dGF0dXMgPyAoc211KS0+cHB0X2Z1bmNzLT5zZXRfcHBmZWF0dXJlX3N0YXR1cygoc211KSwgKHBw
ZmVhdHVyZXMpKSA6IC1FSU5WQUwpCi0jZGVmaW5lIHNtdV9nZXRfcHBmZWF0dXJlX3N0YXR1cyhz
bXUsIGJ1ZikgXAotCSgoc211KS0+cHB0X2Z1bmNzLT5nZXRfcHBmZWF0dXJlX3N0YXR1cyA/IChz
bXUpLT5wcHRfZnVuY3MtPmdldF9wcGZlYXR1cmVfc3RhdHVzKChzbXUpLCAoYnVmKSkgOiAtRUlO
VkFMKQogI2RlZmluZSBzbXVfc2V0X3dhdGVybWFya3NfdGFibGUoc211LCB0YWIsIGNsb2NrX3Jh
bmdlcykgXAogCSgoc211KS0+cHB0X2Z1bmNzLT5zZXRfd2F0ZXJtYXJrc190YWJsZSA/IChzbXUp
LT5wcHRfZnVuY3MtPnNldF93YXRlcm1hcmtzX3RhYmxlKChzbXUpLCAodGFiKSwgKGNsb2NrX3Jh
bmdlcykpIDogMCkKICNkZWZpbmUgc211X2dldF9jdXJyZW50X2Nsa19mcmVxX2J5X3RhYmxlKHNt
dSwgY2xrX3R5cGUsIHZhbHVlKSBcCkBAIC04MDQsNSArNzk4LDcgQEAgYm9vbCBzbXVfY2xrX2Rw
bV9pc19lbmFibGVkKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBlbnVtIHNtdV9jbGtfdHlwZSBj
bGtfdHlwZSkKIGludCBzbXVfZmVhdHVyZV91cGRhdGVfZW5hYmxlX3N0YXRlKHN0cnVjdCBzbXVf
Y29udGV4dCAqc211LCB1aW50NjRfdCBmZWF0dXJlX21hc2ssIGJvb2wgZW5hYmxlZCk7CiBjb25z
dCBjaGFyICpzbXVfZ2V0X21lc3NhZ2VfbmFtZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgZW51
bSBzbXVfbWVzc2FnZV90eXBlIHR5cGUpOwogY29uc3QgY2hhciAqc211X2dldF9mZWF0dXJlX25h
bWUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGVudW0gc211X2ZlYXR1cmVfbWFzayBmZWF0dXJl
KTsKK3NpemVfdCBzbXVfc3lzX2dldF9wcF9mZWF0dXJlX21hc2soc3RydWN0IHNtdV9jb250ZXh0
ICpzbXUsIGNoYXIgKmJ1Zik7CitpbnQgc211X3N5c19zZXRfcHBfZmVhdHVyZV9tYXNrKHN0cnVj
dCBzbXVfY29udGV4dCAqc211LCB1aW50NjRfdCBuZXdfbWFzayk7CiAKICNlbmRpZgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jCmluZGV4IGM4NzMyMjhiZjA1Zi4u
Y2QwOTIwMDkzYTVlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9u
YXZpMTBfcHB0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3Bw
dC5jCkBAIC0xNDIyLDE2OSArMTQyMiw2IEBAIHN0YXRpYyBpbnQgbmF2aTEwX2dldF91Y2xrX2Rw
bV9zdGF0ZXMoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHVpbnQzMl90ICpjbG9ja3NfCiAJcmV0
dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQgbmF2aTEwX2dldF9wcGZlYXR1cmVfc3RhdHVzKHN0cnVj
dCBzbXVfY29udGV4dCAqc211LAotCQkJCSAgICAgICBjaGFyICpidWYpCi17Ci0Jc3RhdGljIGNv
bnN0IGNoYXIgKnBwZmVhdHVyZV9uYW1lW10gPSB7Ci0JCQkJIkRQTV9QUkVGRVRDSEVSIiwKLQkJ
CQkiRFBNX0dGWENMSyIsCi0JCQkJIkRQTV9HRlhfUEFDRSIsCi0JCQkJIkRQTV9VQ0xLIiwKLQkJ
CQkiRFBNX1NPQ0NMSyIsCi0JCQkJIkRQTV9NUDBDTEsiLAotCQkJCSJEUE1fTElOSyIsCi0JCQkJ
IkRQTV9EQ0VGQ0xLIiwKLQkJCQkiTUVNX1ZERENJX1NDQUxJTkciLAotCQkJCSJNRU1fTVZERF9T
Q0FMSU5HIiwKLQkJCQkiRFNfR0ZYQ0xLIiwKLQkJCQkiRFNfU09DQ0xLIiwKLQkJCQkiRFNfTENM
SyIsCi0JCQkJIkRTX0RDRUZDTEsiLAotCQkJCSJEU19VQ0xLIiwKLQkJCQkiR0ZYX1VMViIsCi0J
CQkJIkZXX0RTVEFURSIsCi0JCQkJIkdGWE9GRiIsCi0JCQkJIkJBQ08iLAotCQkJCSJWQ05fUEci
LAotCQkJCSJKUEVHX1BHIiwKLQkJCQkiVVNCX1BHIiwKLQkJCQkiUlNNVV9TTU5fQ0ciLAotCQkJ
CSJQUFQiLAotCQkJCSJUREMiLAotCQkJCSJHRlhfRURDIiwKLQkJCQkiQVBDQ19QTFVTIiwKLQkJ
CQkiR1RIUiIsCi0JCQkJIkFDREMiLAotCQkJCSJWUjBIT1QiLAotCQkJCSJWUjFIT1QiLAotCQkJ
CSJGV19DVEYiLAotCQkJCSJGQU5fQ09OVFJPTCIsCi0JCQkJIlRIRVJNQUwiLAotCQkJCSJHRlhf
RENTIiwKLQkJCQkiUk0iLAotCQkJCSJMRURfRElTUExBWSIsCi0JCQkJIkdGWF9TUyIsCi0JCQkJ
Ik9VVF9PRl9CQU5EX01PTklUT1IiLAotCQkJCSJURU1QX0RFUEVOREVOVF9WTUlOIiwKLQkJCQki
TU1IVUJfUEciLAotCQkJCSJBVEhVQl9QRyJ9OwotCXN0YXRpYyBjb25zdCBjaGFyICpvdXRwdXRf
dGl0bGVbXSA9IHsKLQkJCQkiRkVBVFVSRVMiLAotCQkJCSJCSVRNQVNLIiwKLQkJCQkiRU5BQkxF
TUVOVCJ9OwotCXVpbnQ2NF90IGZlYXR1cmVzX2VuYWJsZWQ7Ci0JdWludDMyX3QgZmVhdHVyZV9t
YXNrWzJdOwotCWludCBpOwotCWludCByZXQgPSAwOwotCWludCBzaXplID0gMDsKLQotCXJldCA9
IHNtdV9mZWF0dXJlX2dldF9lbmFibGVkX21hc2soc211LCBmZWF0dXJlX21hc2ssIDIpOwotCVBQ
X0FTU0VSVF9XSVRIX0NPREUoIXJldCwKLQkJCSJbR2V0UFBmZWF0dXJlU3RhdHVzXSBGYWlsZWQg
dG8gZ2V0IGVuYWJsZWQgc21jIGZlYXR1cmVzISIsCi0JCQlyZXR1cm4gcmV0KTsKLQlmZWF0dXJl
c19lbmFibGVkID0gKHVpbnQ2NF90KWZlYXR1cmVfbWFza1swXSB8Ci0JCQkgICAodWludDY0X3Qp
ZmVhdHVyZV9tYXNrWzFdIDw8IDMyOwotCi0Jc2l6ZSArPSBzcHJpbnRmKGJ1ZiArIHNpemUsICJD
dXJyZW50IHBwZmVhdHVyZXM6IDB4JTAxNmxseFxuIiwgZmVhdHVyZXNfZW5hYmxlZCk7Ci0Jc2l6
ZSArPSBzcHJpbnRmKGJ1ZiArIHNpemUsICIlLTE5cyAlLTIycyAlc1xuIiwKLQkJCQlvdXRwdXRf
dGl0bGVbMF0sCi0JCQkJb3V0cHV0X3RpdGxlWzFdLAotCQkJCW91dHB1dF90aXRsZVsyXSk7Ci0J
Zm9yIChpID0gMDsgaSA8IChzaXplb2YocHBmZWF0dXJlX25hbWUpIC8gc2l6ZW9mKHBwZmVhdHVy
ZV9uYW1lWzBdKSk7IGkrKykgewotCQlzaXplICs9IHNwcmludGYoYnVmICsgc2l6ZSwgIiUtMTlz
IDB4JTAxNmxseCAlNnNcbiIsCi0JCQkJCXBwZmVhdHVyZV9uYW1lW2ldLAotCQkJCQkxVUxMIDw8
IGksCi0JCQkJCShmZWF0dXJlc19lbmFibGVkICYgKDFVTEwgPDwgaSkpID8gIlkiIDogIk4iKTsK
LQl9Ci0KLQlyZXR1cm4gc2l6ZTsKLX0KLQotc3RhdGljIGludCBuYXZpMTBfZW5hYmxlX3NtY19m
ZWF0dXJlcyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKLQkJCQkgICAgICBib29sIGVuYWJsZWQs
Ci0JCQkJICAgICAgdWludDY0X3QgZmVhdHVyZV9tYXNrcykKLXsKLQlzdHJ1Y3Qgc211X2ZlYXR1
cmUgKmZlYXR1cmUgPSAmc211LT5zbXVfZmVhdHVyZTsKLQl1aW50MzJfdCBmZWF0dXJlX2xvdywg
ZmVhdHVyZV9oaWdoOwotCXVpbnQzMl90IGZlYXR1cmVfbWFza1syXTsKLQlpbnQgcmV0ID0gMDsK
LQotCWZlYXR1cmVfbG93ID0gKHVpbnQzMl90KShmZWF0dXJlX21hc2tzICYgMHhGRkZGRkZGRik7
Ci0JZmVhdHVyZV9oaWdoID0gKHVpbnQzMl90KSgoZmVhdHVyZV9tYXNrcyAmIDB4RkZGRkZGRkYw
MDAwMDAwMFVMTCkgPj4gMzIpOwotCi0JaWYgKGVuYWJsZWQpIHsKLQkJcmV0ID0gc211X3NlbmRf
c21jX21zZ193aXRoX3BhcmFtKHNtdSwgU01VX01TR19FbmFibGVTbXVGZWF0dXJlc0xvdywKLQkJ
CQkJCSAgZmVhdHVyZV9sb3cpOwotCQlpZiAocmV0KQotCQkJcmV0dXJuIHJldDsKLQkJcmV0ID0g
c211X3NlbmRfc21jX21zZ193aXRoX3BhcmFtKHNtdSwgU01VX01TR19FbmFibGVTbXVGZWF0dXJl
c0hpZ2gsCi0JCQkJCQkgIGZlYXR1cmVfaGlnaCk7Ci0JCWlmIChyZXQpCi0JCQlyZXR1cm4gcmV0
OwotCX0gZWxzZSB7Ci0JCXJldCA9IHNtdV9zZW5kX3NtY19tc2dfd2l0aF9wYXJhbShzbXUsIFNN
VV9NU0dfRGlzYWJsZVNtdUZlYXR1cmVzTG93LAotCQkJCQkJICBmZWF0dXJlX2xvdyk7Ci0JCWlm
IChyZXQpCi0JCQlyZXR1cm4gcmV0OwotCQlyZXQgPSBzbXVfc2VuZF9zbWNfbXNnX3dpdGhfcGFy
YW0oc211LCBTTVVfTVNHX0Rpc2FibGVTbXVGZWF0dXJlc0hpZ2gsCi0JCQkJCQkgIGZlYXR1cmVf
aGlnaCk7Ci0JCWlmIChyZXQpCi0JCQlyZXR1cm4gcmV0OwotCX0KLQotCXJldCA9IHNtdV9mZWF0
dXJlX2dldF9lbmFibGVkX21hc2soc211LCBmZWF0dXJlX21hc2ssIDIpOwotCWlmIChyZXQpCi0J
CXJldHVybiByZXQ7Ci0KLQltdXRleF9sb2NrKCZmZWF0dXJlLT5tdXRleCk7Ci0JYml0bWFwX2Nv
cHkoZmVhdHVyZS0+ZW5hYmxlZCwgKHVuc2lnbmVkIGxvbmcgKikmZmVhdHVyZV9tYXNrLAotCQkg
ICAgZmVhdHVyZS0+ZmVhdHVyZV9udW0pOwotCW11dGV4X3VubG9jaygmZmVhdHVyZS0+bXV0ZXgp
OwotCi0JcmV0dXJuIDA7Ci19Ci0KLXN0YXRpYyBpbnQgbmF2aTEwX3NldF9wcGZlYXR1cmVfc3Rh
dHVzKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAotCQkJCSAgICAgICB1aW50NjRfdCBuZXdfcHBm
ZWF0dXJlX21hc2tzKQotewotCXVpbnQ2NF90IGZlYXR1cmVzX2VuYWJsZWQ7Ci0JdWludDMyX3Qg
ZmVhdHVyZV9tYXNrWzJdOwotCXVpbnQ2NF90IGZlYXR1cmVzX3RvX2VuYWJsZTsKLQl1aW50NjRf
dCBmZWF0dXJlc190b19kaXNhYmxlOwotCWludCByZXQgPSAwOwotCi0JcmV0ID0gc211X2ZlYXR1
cmVfZ2V0X2VuYWJsZWRfbWFzayhzbXUsIGZlYXR1cmVfbWFzaywgMik7Ci0JUFBfQVNTRVJUX1dJ
VEhfQ09ERSghcmV0LAotCQkJIltTZXRQUGZlYXR1cmVTdGF0dXNdIEZhaWxlZCB0byBnZXQgZW5h
YmxlZCBzbWMgZmVhdHVyZXMhIiwKLQkJCXJldHVybiByZXQpOwotCWZlYXR1cmVzX2VuYWJsZWQg
PSAodWludDY0X3QpZmVhdHVyZV9tYXNrWzBdIHwKLQkJCSAgICh1aW50NjRfdClmZWF0dXJlX21h
c2tbMV0gPDwgMzI7Ci0KLQlmZWF0dXJlc190b19kaXNhYmxlID0KLQkJZmVhdHVyZXNfZW5hYmxl
ZCAmIH5uZXdfcHBmZWF0dXJlX21hc2tzOwotCWZlYXR1cmVzX3RvX2VuYWJsZSA9Ci0JCX5mZWF0
dXJlc19lbmFibGVkICYgbmV3X3BwZmVhdHVyZV9tYXNrczsKLQotCXByX2RlYnVnKCJmZWF0dXJl
c190b19kaXNhYmxlIDB4JWxseFxuIiwgZmVhdHVyZXNfdG9fZGlzYWJsZSk7Ci0JcHJfZGVidWco
ImZlYXR1cmVzX3RvX2VuYWJsZSAweCVsbHhcbiIsIGZlYXR1cmVzX3RvX2VuYWJsZSk7Ci0KLQlp
ZiAoZmVhdHVyZXNfdG9fZGlzYWJsZSkgewotCQlyZXQgPSBuYXZpMTBfZW5hYmxlX3NtY19mZWF0
dXJlcyhzbXUsIGZhbHNlLCBmZWF0dXJlc190b19kaXNhYmxlKTsKLQkJUFBfQVNTRVJUX1dJVEhf
Q09ERSghcmV0LAotCQkJCSJbU2V0UFBmZWF0dXJlU3RhdHVzXSBGYWlsZWQgdG8gZGlzYWJsZSBz
bWMgZmVhdHVyZXMhIiwKLQkJCQlyZXR1cm4gcmV0KTsKLQl9Ci0KLQlpZiAoZmVhdHVyZXNfdG9f
ZW5hYmxlKSB7Ci0JCXJldCA9IG5hdmkxMF9lbmFibGVfc21jX2ZlYXR1cmVzKHNtdSwgdHJ1ZSwg
ZmVhdHVyZXNfdG9fZW5hYmxlKTsKLQkJUFBfQVNTRVJUX1dJVEhfQ09ERSghcmV0LAotCQkJCSJb
U2V0UFBmZWF0dXJlU3RhdHVzXSBGYWlsZWQgdG8gZW5hYmxlIHNtYyBmZWF0dXJlcyEiLAotCQkJ
CXJldHVybiByZXQpOwotCX0KLQotCXJldHVybiAwOwotfQotCiBzdGF0aWMgaW50IG5hdmkxMF9z
ZXRfcGVha19jbG9ja19ieV9kZXZpY2Uoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpCiB7CiAJc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBzbXUtPmFkZXY7CkBAIC0xNjg5LDggKzE1MjYsNiBA
QCBzdGF0aWMgY29uc3Qgc3RydWN0IHBwdGFibGVfZnVuY3MgbmF2aTEwX3BwdF9mdW5jcyA9IHsK
IAkuc2V0X3dhdGVybWFya3NfdGFibGUgPSBuYXZpMTBfc2V0X3dhdGVybWFya3NfdGFibGUsCiAJ
LnJlYWRfc2Vuc29yID0gbmF2aTEwX3JlYWRfc2Vuc29yLAogCS5nZXRfdWNsa19kcG1fc3RhdGVz
ID0gbmF2aTEwX2dldF91Y2xrX2RwbV9zdGF0ZXMsCi0JLmdldF9wcGZlYXR1cmVfc3RhdHVzID0g
bmF2aTEwX2dldF9wcGZlYXR1cmVfc3RhdHVzLAotCS5zZXRfcHBmZWF0dXJlX3N0YXR1cyA9IG5h
dmkxMF9zZXRfcHBmZWF0dXJlX3N0YXR1cywKIAkuc2V0X3BlcmZvcm1hbmNlX2xldmVsID0gbmF2
aTEwX3NldF9wZXJmb3JtYW5jZV9sZXZlbCwKIAkuZ2V0X3RoZXJtYWxfdGVtcGVyYXR1cmVfcmFu
Z2UgPSBuYXZpMTBfZ2V0X3RoZXJtYWxfdGVtcGVyYXR1cmVfcmFuZ2UsCiB9OwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jCmluZGV4IGMwNmE5NDcyYzNiMi4uNTJj
OGZjOWYxZmY0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS92ZWdh
MjBfcHB0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5j
CkBAIC0yODU4LDE1NyArMjg1OCw2IEBAIHN0YXRpYyBpbnQgdmVnYTIwX2RwbV9zZXRfdmNlX2Vu
YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgYm9vbCBlbmFibGUpCiAJcmV0dXJuIHNtdV9m
ZWF0dXJlX3NldF9lbmFibGVkKHNtdSwgU01VX0ZFQVRVUkVfRFBNX1ZDRV9CSVQsIGVuYWJsZSk7
CiB9CiAKLXN0YXRpYyBpbnQgdmVnYTIwX2dldF9lbmFibGVkX3NtY19mZWF0dXJlcyhzdHJ1Y3Qg
c211X2NvbnRleHQgKnNtdSwKLQkJdWludDY0X3QgKmZlYXR1cmVzX2VuYWJsZWQpCi17Ci0JdWlu
dDMyX3QgZmVhdHVyZV9tYXNrWzJdID0gezAsIDB9OwotCWludCByZXQgPSAwOwotCi0JcmV0ID0g
c211X2ZlYXR1cmVfZ2V0X2VuYWJsZWRfbWFzayhzbXUsIGZlYXR1cmVfbWFzaywgMik7Ci0JaWYg
KHJldCkKLQkJcmV0dXJuIHJldDsKLQotCSpmZWF0dXJlc19lbmFibGVkID0gKCgoKHVpbnQ2NF90
KWZlYXR1cmVfbWFza1swXSA8PCBTTVVfRkVBVFVSRVNfTE9XX1NISUZUKSAmIFNNVV9GRUFUVVJF
U19MT1dfTUFTSykgfAotCQkJKCgodWludDY0X3QpZmVhdHVyZV9tYXNrWzFdIDw8IFNNVV9GRUFU
VVJFU19ISUdIX1NISUZUKSAmIFNNVV9GRUFUVVJFU19ISUdIX01BU0spKTsKLQotCXJldHVybiBy
ZXQ7Ci19Ci0KLXN0YXRpYyBpbnQgdmVnYTIwX2VuYWJsZV9zbWNfZmVhdHVyZXMoc3RydWN0IHNt
dV9jb250ZXh0ICpzbXUsCi0JCWJvb2wgZW5hYmxlLCB1aW50NjRfdCBmZWF0dXJlX21hc2spCi17
Ci0JdWludDMyX3Qgc211X2ZlYXR1cmVzX2xvdywgc211X2ZlYXR1cmVzX2hpZ2g7Ci0JaW50IHJl
dCA9IDA7Ci0KLQlzbXVfZmVhdHVyZXNfbG93ID0gKHVpbnQzMl90KSgoZmVhdHVyZV9tYXNrICYg
U01VX0ZFQVRVUkVTX0xPV19NQVNLKSA+PiBTTVVfRkVBVFVSRVNfTE9XX1NISUZUKTsKLQlzbXVf
ZmVhdHVyZXNfaGlnaCA9ICh1aW50MzJfdCkoKGZlYXR1cmVfbWFzayAmIFNNVV9GRUFUVVJFU19I
SUdIX01BU0spID4+IFNNVV9GRUFUVVJFU19ISUdIX1NISUZUKTsKLQotCWlmIChlbmFibGUpIHsK
LQkJcmV0ID0gc211X3NlbmRfc21jX21zZ193aXRoX3BhcmFtKHNtdSwgU01VX01TR19FbmFibGVT
bXVGZWF0dXJlc0xvdywKLQkJCQkJCSAgc211X2ZlYXR1cmVzX2xvdyk7Ci0JCWlmIChyZXQpCi0J
CQlyZXR1cm4gcmV0OwotCQlyZXQgPSBzbXVfc2VuZF9zbWNfbXNnX3dpdGhfcGFyYW0oc211LCBT
TVVfTVNHX0VuYWJsZVNtdUZlYXR1cmVzSGlnaCwKLQkJCQkJCSAgc211X2ZlYXR1cmVzX2hpZ2gp
OwotCQlpZiAocmV0KQotCQkJcmV0dXJuIHJldDsKLQl9IGVsc2UgewotCQlyZXQgPSBzbXVfc2Vu
ZF9zbWNfbXNnX3dpdGhfcGFyYW0oc211LCBTTVVfTVNHX0Rpc2FibGVTbXVGZWF0dXJlc0xvdywK
LQkJCQkJCSAgc211X2ZlYXR1cmVzX2xvdyk7Ci0JCWlmIChyZXQpCi0JCQlyZXR1cm4gcmV0Owot
CQlyZXQgPSBzbXVfc2VuZF9zbWNfbXNnX3dpdGhfcGFyYW0oc211LCBTTVVfTVNHX0Rpc2FibGVT
bXVGZWF0dXJlc0hpZ2gsCi0JCQkJCQkgIHNtdV9mZWF0dXJlc19oaWdoKTsKLQkJaWYgKHJldCkK
LQkJCXJldHVybiByZXQ7Ci0JfQotCi0JcmV0dXJuIDA7Ci0KLX0KLQotc3RhdGljIGludCB2ZWdh
MjBfZ2V0X3BwZmVhdHVyZV9zdGF0dXMoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGNoYXIgKmJ1
ZikKLXsKLQlzdGF0aWMgY29uc3QgY2hhciAqcHBmZWF0dXJlX25hbWVbXSA9IHsKLQkJCQkiRFBN
X1BSRUZFVENIRVIiLAotCQkJCSJHRlhDTEtfRFBNIiwKLQkJCQkiVUNMS19EUE0iLAotCQkJCSJT
T0NDTEtfRFBNIiwKLQkJCQkiVVZEX0RQTSIsCi0JCQkJIlZDRV9EUE0iLAotCQkJCSJVTFYiLAot
CQkJCSJNUDBDTEtfRFBNIiwKLQkJCQkiTElOS19EUE0iLAotCQkJCSJEQ0VGQ0xLX0RQTSIsCi0J
CQkJIkdGWENMS19EUyIsCi0JCQkJIlNPQ0NMS19EUyIsCi0JCQkJIkxDTEtfRFMiLAotCQkJCSJQ
UFQiLAotCQkJCSJUREMiLAotCQkJCSJUSEVSTUFMIiwKLQkJCQkiR0ZYX1BFUl9DVV9DRyIsCi0J
CQkJIlJNIiwKLQkJCQkiRENFRkNMS19EUyIsCi0JCQkJIkFDREMiLAotCQkJCSJWUjBIT1QiLAot
CQkJCSJWUjFIT1QiLAotCQkJCSJGV19DVEYiLAotCQkJCSJMRURfRElTUExBWSIsCi0JCQkJIkZB
Tl9DT05UUk9MIiwKLQkJCQkiR0ZYX0VEQyIsCi0JCQkJIkdGWE9GRiIsCi0JCQkJIkNHIiwKLQkJ
CQkiRkNMS19EUE0iLAotCQkJCSJGQ0xLX0RTIiwKLQkJCQkiTVAxQ0xLX0RTIiwKLQkJCQkiTVAw
Q0xLX0RTIiwKLQkJCQkiWEdNSSIsCi0JCQkJIkVDQyJ9OwotCXN0YXRpYyBjb25zdCBjaGFyICpv
dXRwdXRfdGl0bGVbXSA9IHsKLQkJCQkiRkVBVFVSRVMiLAotCQkJCSJCSVRNQVNLIiwKLQkJCQki
RU5BQkxFTUVOVCJ9OwotCXVpbnQ2NF90IGZlYXR1cmVzX2VuYWJsZWQ7Ci0JaW50IGk7Ci0JaW50
IHJldCA9IDA7Ci0JaW50IHNpemUgPSAwOwotCi0JcmV0ID0gdmVnYTIwX2dldF9lbmFibGVkX3Nt
Y19mZWF0dXJlcyhzbXUsICZmZWF0dXJlc19lbmFibGVkKTsKLQlpZiAocmV0KQotCQlyZXR1cm4g
cmV0OwotCi0Jc2l6ZSArPSBzcHJpbnRmKGJ1ZiArIHNpemUsICJDdXJyZW50IHBwZmVhdHVyZXM6
IDB4JTAxNmxseFxuIiwgZmVhdHVyZXNfZW5hYmxlZCk7Ci0Jc2l6ZSArPSBzcHJpbnRmKGJ1ZiAr
IHNpemUsICIlLTE5cyAlLTIycyAlc1xuIiwKLQkJCQlvdXRwdXRfdGl0bGVbMF0sCi0JCQkJb3V0
cHV0X3RpdGxlWzFdLAotCQkJCW91dHB1dF90aXRsZVsyXSk7Ci0JZm9yIChpID0gMDsgaSA8IEdO
TERfRkVBVFVSRVNfTUFYOyBpKyspIHsKLQkJc2l6ZSArPSBzcHJpbnRmKGJ1ZiArIHNpemUsICIl
LTE5cyAweCUwMTZsbHggJTZzXG4iLAotCQkJCQlwcGZlYXR1cmVfbmFtZVtpXSwKLQkJCQkJMVVM
TCA8PCBpLAotCQkJCQkoZmVhdHVyZXNfZW5hYmxlZCAmICgxVUxMIDw8IGkpKSA/ICJZIiA6ICJO
Iik7Ci0JfQotCi0JcmV0dXJuIHNpemU7Ci19Ci0KLXN0YXRpYyBpbnQgdmVnYTIwX3NldF9wcGZl
YXR1cmVfc3RhdHVzKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCB1aW50NjRfdCBuZXdfcHBmZWF0
dXJlX21hc2tzKQotewotCXVpbnQ2NF90IGZlYXR1cmVzX2VuYWJsZWQ7Ci0JdWludDY0X3QgZmVh
dHVyZXNfdG9fZW5hYmxlOwotCXVpbnQ2NF90IGZlYXR1cmVzX3RvX2Rpc2FibGU7Ci0JaW50IHJl
dCA9IDA7Ci0KLQlpZiAobmV3X3BwZmVhdHVyZV9tYXNrcyA+PSAoMVVMTCA8PCBHTkxEX0ZFQVRV
UkVTX01BWCkpCi0JCXJldHVybiAtRUlOVkFMOwotCi0JcmV0ID0gdmVnYTIwX2dldF9lbmFibGVk
X3NtY19mZWF0dXJlcyhzbXUsICZmZWF0dXJlc19lbmFibGVkKTsKLQlpZiAocmV0KQotCQlyZXR1
cm4gcmV0OwotCi0JZmVhdHVyZXNfdG9fZGlzYWJsZSA9Ci0JCWZlYXR1cmVzX2VuYWJsZWQgJiB+
bmV3X3BwZmVhdHVyZV9tYXNrczsKLQlmZWF0dXJlc190b19lbmFibGUgPQotCQl+ZmVhdHVyZXNf
ZW5hYmxlZCAmIG5ld19wcGZlYXR1cmVfbWFza3M7Ci0KLQlwcl9kZWJ1ZygiZmVhdHVyZXNfdG9f
ZGlzYWJsZSAweCVsbHhcbiIsIGZlYXR1cmVzX3RvX2Rpc2FibGUpOwotCXByX2RlYnVnKCJmZWF0
dXJlc190b19lbmFibGUgMHglbGx4XG4iLCBmZWF0dXJlc190b19lbmFibGUpOwotCi0JaWYgKGZl
YXR1cmVzX3RvX2Rpc2FibGUpIHsKLQkJcmV0ID0gdmVnYTIwX2VuYWJsZV9zbWNfZmVhdHVyZXMo
c211LCBmYWxzZSwgZmVhdHVyZXNfdG9fZGlzYWJsZSk7Ci0JCWlmIChyZXQpCi0JCQlyZXR1cm4g
cmV0OwotCX0KLQotCWlmIChmZWF0dXJlc190b19lbmFibGUpIHsKLQkJcmV0ID0gdmVnYTIwX2Vu
YWJsZV9zbWNfZmVhdHVyZXMoc211LCB0cnVlLCBmZWF0dXJlc190b19lbmFibGUpOwotCQlpZiAo
cmV0KQotCQkJcmV0dXJuIHJldDsKLQl9Ci0KLQlyZXR1cm4gMDsKLX0KLQogc3RhdGljIGJvb2wg
dmVnYTIwX2lzX2RwbV9ydW5uaW5nKHN0cnVjdCBzbXVfY29udGV4dCAqc211KQogewogCWludCBy
ZXQgPSAwOwpAQCAtMzMxMSw4ICszMTYwLDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwcHRhYmxl
X2Z1bmNzIHZlZ2EyMF9wcHRfZnVuY3MgPSB7CiAJLmZvcmNlX2RwbV9saW1pdF92YWx1ZSA9IHZl
Z2EyMF9mb3JjZV9kcG1fbGltaXRfdmFsdWUsCiAJLnVuZm9yY2VfZHBtX2xldmVscyA9IHZlZ2Ey
MF91bmZvcmNlX2RwbV9sZXZlbHMsCiAJLmdldF9wcm9maWxpbmdfY2xrX21hc2sgPSB2ZWdhMjBf
Z2V0X3Byb2ZpbGluZ19jbGtfbWFzaywKLQkuc2V0X3BwZmVhdHVyZV9zdGF0dXMgPSB2ZWdhMjBf
c2V0X3BwZmVhdHVyZV9zdGF0dXMsCi0JLmdldF9wcGZlYXR1cmVfc3RhdHVzID0gdmVnYTIwX2dl
dF9wcGZlYXR1cmVfc3RhdHVzLAogCS5pc19kcG1fcnVubmluZyA9IHZlZ2EyMF9pc19kcG1fcnVu
bmluZywKIAkuc2V0X3RoZXJtYWxfZmFuX3RhYmxlID0gdmVnYTIwX3NldF90aGVybWFsX2Zhbl90
YWJsZSwKIAkuZ2V0X2Zhbl9zcGVlZF9wZXJjZW50ID0gdmVnYTIwX2dldF9mYW5fc3BlZWRfcGVy
Y2VudCwKLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
