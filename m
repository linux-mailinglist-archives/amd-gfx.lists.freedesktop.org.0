Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EAEE0F3751
	for <lists+amd-gfx@lfdr.de>; Thu,  7 Nov 2019 19:35:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6BCD66F788;
	Thu,  7 Nov 2019 18:35:07 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-il1-x134.google.com (mail-il1-x134.google.com
 [IPv6:2607:f8b0:4864:20::134])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 875026F788
 for <amd-gfx@lists.freedesktop.org>; Thu,  7 Nov 2019 18:35:05 +0000 (UTC)
Received: by mail-il1-x134.google.com with SMTP id s75so2742727ilc.3
 for <amd-gfx@lists.freedesktop.org>; Thu, 07 Nov 2019 10:35:05 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=PZtWK700kr1bCOubZqiTLKLersLW8zEFhNjoj/nnM9k=;
 b=cu6cGWwxnoBGiHHSUxZbZRHeRuo85sVjGVJ2KY9yfb0cwD/03Fz5O7g7dKW6ypozPq
 z2fiKKvsgl4K6StDGV32TjJK0x2BIBA9cdC/Yh3k2c/dazYfkZIAkrBPAIBsy25JgmNn
 THTOG1rVbnuM1EeTFmtSCx3iZdtEJ3wGCNF6N0stsBu8Nytk/BW4n9PtO8chzksTF4O8
 F5ZavZAPJpft3uksJ86DxTgz1wMNAI3PADA/jj6LPd6xRxbiCYizJ9bPXFsHhW1mcF+z
 uma3nGuVsALZOA8e8YD6vHlyhR51ysEQJnog29BjMuOrmlMwVDviANajEXbPstM/WpOi
 +e4A==
X-Gm-Message-State: APjAAAWiOok5J/7ANv9dfMqSCyObnIkNYwI3J9qV2HR5KzQJq2YtI6cH
 TuHNDHdWjwBrEBBuW6EI4/9jCwx+SJI=
X-Google-Smtp-Source: APXvYqyAhMzuyeP/Gc8bfPrzsPoQ8fhx7PGVkD4dFyd1SiFjnWJoU1rSnaIUTKNJMPZOBBsPRuNT8A==
X-Received: by 2002:a92:7e4a:: with SMTP id z71mr6583660ilc.141.1573151704636; 
 Thu, 07 Nov 2019 10:35:04 -0800 (PST)
Received: from localhost.localdomain ([2602:47:da84:5600:6d4:c4ff:fe4a:ea6b])
 by smtp.gmail.com with ESMTPSA id
 d6sm259582iok.68.2019.11.07.10.35.04
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 07 Nov 2019 10:35:04 -0800 (PST)
From: Matt Coffin <mcoffin13@gmail.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 2/3] drm/amdgpu/navi10: implement GFXCLK_CURVE overdrive
Date: Thu,  7 Nov 2019 11:34:59 -0700
Message-Id: <7bc07e0b053381ce7409d8251be18380fb6b3c43.1573151434.git.mcoffin13@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <cover.1573151434.git.mcoffin13@gmail.com>
References: <cover.1573151434.git.mcoffin13@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=PZtWK700kr1bCOubZqiTLKLersLW8zEFhNjoj/nnM9k=;
 b=gd2/xe3C5iEkcBiNxQKdC1+fSv7yX8kK1CdYHym2LtjINktHncfx6BhBz8dyUtc2J0
 z9wSrj57kji39aimfUw1RY7vtK+5AqBV+T/alMkBT20u/cyGVYZ7yk//y3G8rkZuOzFE
 bRy6fUK35lnCcf5zdAyl6H1NFHsJzVUebMa6l1YCTdFCdICBDsBVKF1KjE286UEqQp23
 0+5NYYgMfdPQ8VJUJYtRQ6jRj5oZaT/XOInEBOP3AZPYZbUiAlQrkG+dKvLO7At37+C6
 ugqtniQnpT5KXIGuRXSecHgtaYvcf5dEGKTa5tYezTFCv0UpAMnNOYi9arBmUbyFimFk
 hrJw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matt Coffin <mcoffin13@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W1doeV0KQmVmb3JlIHRoaXMgcGF0Y2gsIHRoZXJlIHdhcyBubyB3YXkgdG8gc2V0IHRoZSBnZnhj
bGsgdm9sdGFnZSBjdXJ2ZSBpbgp0aGUgb3ZlcmRyaXZlIHNldHRpbmdzIGZvciBuYXZpMTAgdGhy
b3VnaCBwcF9vZF9jbGtfdm9sdGFnZQoKW0hvd10KQWRkIHRoZSByZXF1aXJlZCBpbXBsZW1lbnRh
dGlvbiB0byBuYXZpMTAncyBwcHQgZHBtIHRhYmxlIGVkaXRpbmcKaW1wbGVtZW50YXRpb24sIHNp
bWlsYXIgdG8gdGhlIHZlZ2EyMCBpbXBsZW1lbnRhdGlvbiBhbmQgaW50ZXJmYWNlLgotLS0KIGRy
aXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L25hdmkxMF9wcHQuYyB8IDU1ICsrKysrKysrKysr
KysrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L25hdmkxMF9wcHQuaCB8
ICAyICsKIDIgZmlsZXMgY2hhbmdlZCwgNTUgaW5zZXJ0aW9ucygrKSwgMiBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmMKaW5kZXggNmQwZTUx
MWFkMDkzLi5lNzE3MzI4ZjkzY2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93
ZXJwbGF5L25hdmkxMF9wcHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9u
YXZpMTBfcHB0LmMKQEAgLTE2NjcsNiArMTY2Nyw4IEBAIHN0YXRpYyBpbnQgbmF2aTEwX29kX2Vk
aXRfZHBtX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBlbnVtIFBQX09EX0RQTV9UQUJM
CiAJc3RydWN0IHNtdV90YWJsZV9jb250ZXh0ICp0YWJsZV9jb250ZXh0ID0gJnNtdS0+c211X3Rh
YmxlOwogCU92ZXJEcml2ZVRhYmxlX3QgKm9kX3RhYmxlOwogCXN0cnVjdCBzbXVfMTFfMF9vdmVy
ZHJpdmVfdGFibGUgKm9kX3NldHRpbmdzOworCWVudW0gU01VXzExXzBfT0RTRVRUSU5HX0lEIGZy
ZXFfc2V0dGluZywgdm9sdGFnZV9zZXR0aW5nOworCXVpbnQxNl90ICpmcmVxX3B0ciwgKnZvbHRh
Z2VfcHRyOwogCW9kX3RhYmxlID0gKE92ZXJEcml2ZVRhYmxlX3QgKil0YWJsZV9jb250ZXh0LT5v
dmVyZHJpdmVfdGFibGU7CiAKIAlpZiAoIXNtdS0+b2RfZW5hYmxlZCkgewpAQCAtMTc2Niw4ICsx
NzY4LDU3IEBAIHN0YXRpYyBpbnQgbmF2aTEwX29kX2VkaXRfZHBtX3RhYmxlKHN0cnVjdCBzbXVf
Y29udGV4dCAqc211LCBlbnVtIFBQX09EX0RQTV9UQUJMCiAJCX0KIAkJYnJlYWs7CiAJY2FzZSBQ
UF9PRF9FRElUX1ZERENfQ1VSVkU6Ci0JCS8vIFRPRE86IGltcGxlbWVudAotCQlyZXR1cm4gLUVO
T1NZUzsKKwkJaWYgKCFuYXZpMTBfb2RfZmVhdHVyZV9pc19zdXBwb3J0ZWQob2Rfc2V0dGluZ3Ms
IFNNVV8xMV8wX09ERkVBVFVSRV9HRlhDTEtfQ1VSVkUpKSB7CisJCQlwcl93YXJuKCJHRlhDTEtf
Q1VSVkUgbm90IHN1cHBvcnRlZCFcbiIpOworCQkJcmV0dXJuIC1FTk9UU1VQUDsKKwkJfQorCQlp
ZiAoc2l6ZSA8IDMpIHsKKwkJCXByX2luZm8oImludmFsaWQgbnVtYmVyIG9mIHBhcmFtZXRlcnM6
ICVkXG4iLCBzaXplKTsKKwkJCXJldHVybiAtRUlOVkFMOworCQl9CisJCWlmICghb2RfdGFibGUp
IHsKKwkJCXByX2luZm8oIk92ZXJkcml2ZSBpcyBub3QgaW5pdGlhbGl6ZWRcbiIpOworCQkJcmV0
dXJuIC1FSU5WQUw7CisJCX0KKworCQlzd2l0Y2ggKGlucHV0WzBdKSB7CisJCWNhc2UgMDoKKwkJ
CWZyZXFfc2V0dGluZyA9IFNNVV8xMV8wX09EU0VUVElOR19WRERHRlhDVVJWRUZSRVFfUDE7CisJ
CQl2b2x0YWdlX3NldHRpbmcgPSBTTVVfMTFfMF9PRFNFVFRJTkdfVkRER0ZYQ1VSVkVWT0xUQUdF
X1AxOworCQkJZnJlcV9wdHIgPSAmb2RfdGFibGUtPkdmeGNsa0ZyZXExOworCQkJdm9sdGFnZV9w
dHIgPSAmb2RfdGFibGUtPkdmeGNsa1ZvbHQxOworCQkJYnJlYWs7CisJCWNhc2UgMToKKwkJCWZy
ZXFfc2V0dGluZyA9IFNNVV8xMV8wX09EU0VUVElOR19WRERHRlhDVVJWRUZSRVFfUDI7CisJCQl2
b2x0YWdlX3NldHRpbmcgPSBTTVVfMTFfMF9PRFNFVFRJTkdfVkRER0ZYQ1VSVkVWT0xUQUdFX1Ay
OworCQkJZnJlcV9wdHIgPSAmb2RfdGFibGUtPkdmeGNsa0ZyZXEyOworCQkJdm9sdGFnZV9wdHIg
PSAmb2RfdGFibGUtPkdmeGNsa1ZvbHQyOworCQkJYnJlYWs7CisJCWNhc2UgMjoKKwkJCWZyZXFf
c2V0dGluZyA9IFNNVV8xMV8wX09EU0VUVElOR19WRERHRlhDVVJWRUZSRVFfUDM7CisJCQl2b2x0
YWdlX3NldHRpbmcgPSBTTVVfMTFfMF9PRFNFVFRJTkdfVkRER0ZYQ1VSVkVWT0xUQUdFX1AzOwor
CQkJZnJlcV9wdHIgPSAmb2RfdGFibGUtPkdmeGNsa0ZyZXEzOworCQkJdm9sdGFnZV9wdHIgPSAm
b2RfdGFibGUtPkdmeGNsa1ZvbHQzOworCQkJYnJlYWs7CisJCWRlZmF1bHQ6CisJCQlwcl9pbmZv
KCJJbnZhbGlkIFZERENfQ1VSVkUgaW5kZXg6ICVsZFxuIiwgaW5wdXRbMF0pOworCQkJcHJfaW5m
bygiU3VwcG9ydGVkIGluZGljZXM6IFswLCAxLCAyXVxuIik7CisJCQlyZXR1cm4gLUVJTlZBTDsK
KwkJfQorCQlyZXQgPSBuYXZpMTBfb2Rfc2V0dGluZ19jaGVja19yYW5nZShvZF9zZXR0aW5ncywg
ZnJlcV9zZXR0aW5nLCBpbnB1dFsxXSk7CisJCWlmIChyZXQpCisJCQlyZXR1cm4gcmV0OworCQkv
LyBBbGxvdyBzZXR0aW5nIHplcm8gdG8gZGlzYWJsZSB0aGUgT3ZlckRyaXZlIFZEREMgY3VydmUK
KwkJaWYgKGlucHV0WzJdICE9IDApIHsKKwkJCXJldCA9IG5hdmkxMF9vZF9zZXR0aW5nX2NoZWNr
X3JhbmdlKG9kX3NldHRpbmdzLCB2b2x0YWdlX3NldHRpbmcsIGlucHV0WzJdKTsKKwkJCWlmIChy
ZXQpCisJCQkJcmV0dXJuIHJldDsKKwkJfQorCQkqZnJlcV9wdHIgPSBpbnB1dFsxXTsKKwkJKnZv
bHRhZ2VfcHRyID0gKCh1aW50MTZfdClpbnB1dFsyXSkgKiBOQVZJMTBfVk9MVEFHRV9TQ0FMRTsK
KwkJcHJfZGVidWcoIk9EOiBzZXQgY3VydmUgJWxkOiAoJWQsICVkKVxuIiwgaW5wdXRbMF0sICpm
cmVxX3B0ciwgKnZvbHRhZ2VfcHRyKTsKKwkJbmF2aTEwX2R1bXBfb2RfdGFibGUob2RfdGFibGUp
OworCQlicmVhazsKIAlkZWZhdWx0OgogCQlyZXR1cm4gLUVOT1NZUzsKIAl9CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmggYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmgKaW5kZXggNjIwZmYxN2MyZmVmLi40ODRk
MmM1OGZjMDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L25hdmkx
MF9wcHQuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmgK
QEAgLTI3LDYgKzI3LDggQEAKICNkZWZpbmUgTkFWSTEwX1BFQUtfU0NMS19YVCAgCQkoMTc1NSkK
ICNkZWZpbmUgTkFWSTEwX1BFQUtfU0NMS19YTCAgCQkoMTYyNSkKIAorI2RlZmluZSBOQVZJMTBf
Vk9MVEFHRV9TQ0FMRSAoNCkKKwogZXh0ZXJuIHZvaWQgbmF2aTEwX3NldF9wcHRfZnVuY3Moc3Ry
dWN0IHNtdV9jb250ZXh0ICpzbXUpOwogCiAjZW5kaWYKLS0gCjIuMjMuMAoKCkZyb20gZTA5MWM0
MDg1ZWNjNjY5ZWE5MDdmZTVkODUxNWYxNDU4Njg2M2Y5YiBNb24gU2VwIDE3IDAwOjAwOjAwIDIw
MDEKTWVzc2FnZS1JZDogPGUwOTFjNDA4NWVjYzY2OWVhOTA3ZmU1ZDg1MTVmMTQ1ODY4NjNmOWIu
MTU3MzE1MTQzNC5naXQubWNvZmZpbjEzQGdtYWlsLmNvbT4KSW4tUmVwbHktVG86IDxjb3Zlci4x
NTczMTUxNDM0LmdpdC5tY29mZmluMTNAZ21haWwuY29tPgpSZWZlcmVuY2VzOiA8Y292ZXIuMTU3
MzE1MTQzNC5naXQubWNvZmZpbjEzQGdtYWlsLmNvbT4KRnJvbTogTWF0dCBDb2ZmaW4gPG1jb2Zm
aW4xM0BnbWFpbC5jb20+CkRhdGU6IFdlZCwgNiBOb3YgMjAxOSAxMjowNToyOCAtMDcwMApTdWJq
ZWN0OiBbUEFUQ0ggMy8zXSBkcm0vYW1kZ3B1L25hdmkxMDogSW1wbGVtZW50IG9kIGNsayBwcmlu
dGluZwpUbzogYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKCltXaHldCkJlZm9yZSB0aGlz
IHBhdGNoLCBuYXZpMTAgb3ZlcmRyaXZlIHNldHRpbmdzIGNvdWxkIG5vdCBiZSBwcmludGVkIHZp
YQpwcF9vZF9jbGtfdm9sdGFnZQoKW0hvd10KSW1wbGVtZW50IHByaW50aW5nIGZvciB0aGUgb3Zl
cmRyaXZlIHNldHRpbmdzIGZvciB0aGUgZm9sbG93aW5nIGNsb2NrcwppbiBuYXZpMTAncyBwcHQg
cHJpbnRfY2xrX2xldmVscyBpbXBsZW1lbnRhdGlvbjoKCiogU01VX09EX1NDTEsKKiBTTVVfT0Rf
TUNMSwoqIFNNVV9PRF9WRERDX0NVUlZFCi0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBs
YXkvbmF2aTEwX3BwdC5jIHwgNTYgKysrKysrKysrKysrKysrKysrKystLQogMSBmaWxlIGNoYW5n
ZWQsIDUxIGluc2VydGlvbnMoKyksIDUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jCmluZGV4IGU3MTczMjhmOTNjZS4uNTA2YWY1OWZmNDVm
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9uYXZpMTBfcHB0LmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvbmF2aTEwX3BwdC5jCkBAIC02Nzcs
MTMgKzY3NywyNSBAQCBzdGF0aWMgYm9vbCBuYXZpMTBfaXNfc3VwcG9ydF9maW5lX2dyYWluZWRf
ZHBtKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBlbnVtIHNtdQogCXJldHVybiBkcG1fZGVzYy0+
U25hcFRvRGlzY3JldGUgPT0gMCA/IHRydWUgOiBmYWxzZTsKIH0KIAorc3RhdGljIGlubGluZSBi
b29sIG5hdmkxMF9vZF9mZWF0dXJlX2lzX3N1cHBvcnRlZChzdHJ1Y3Qgc211XzExXzBfb3ZlcmRy
aXZlX3RhYmxlICpvZF90YWJsZSwgZW51bSBTTVVfMTFfMF9PREZFQVRVUkVfSUQgZmVhdHVyZSkK
K3sKKwlyZXR1cm4gb2RfdGFibGUtPmNhcFtmZWF0dXJlXTsKK30KKworCiBzdGF0aWMgaW50IG5h
dmkxMF9wcmludF9jbGtfbGV2ZWxzKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAogCQkJZW51bSBz
bXVfY2xrX3R5cGUgY2xrX3R5cGUsIGNoYXIgKmJ1ZikKIHsKKwlPdmVyRHJpdmVUYWJsZV90ICpv
ZF90YWJsZTsKKwlzdHJ1Y3Qgc211XzExXzBfb3ZlcmRyaXZlX3RhYmxlICpvZF9zZXR0aW5nczsK
Kwl1aW50MTZfdCAqY3VydmVfc2V0dGluZ3M7CiAJaW50IGksIHNpemUgPSAwLCByZXQgPSAwOwog
CXVpbnQzMl90IGN1cl92YWx1ZSA9IDAsIHZhbHVlID0gMCwgY291bnQgPSAwOwogCXVpbnQzMl90
IGZyZXFfdmFsdWVzWzNdID0gezB9OwogCXVpbnQzMl90IG1hcmtfaW5kZXggPSAwOworCXN0cnVj
dCBzbXVfdGFibGVfY29udGV4dCAqdGFibGVfY29udGV4dCA9ICZzbXUtPnNtdV90YWJsZTsKKwlv
ZF90YWJsZSA9IChPdmVyRHJpdmVUYWJsZV90ICopdGFibGVfY29udGV4dC0+b3ZlcmRyaXZlX3Rh
YmxlOworCW9kX3NldHRpbmdzID0gc211LT5vZF9zZXR0aW5nczsKIAogCXN3aXRjaCAoY2xrX3R5
cGUpIHsKIAljYXNlIFNNVV9HRlhDTEs6CkBAIC03MzQsNiArNzQ2LDQ1IEBAIHN0YXRpYyBpbnQg
bmF2aTEwX3ByaW50X2Nsa19sZXZlbHMoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCiAKIAkJfQog
CQlicmVhazsKKwljYXNlIFNNVV9PRF9TQ0xLOgorCQlpZiAoIXNtdS0+b2RfZW5hYmxlZCB8fCAh
b2RfdGFibGUgfHwgIW9kX3NldHRpbmdzKQorCQkJYnJlYWs7CisJCWlmICghbmF2aTEwX29kX2Zl
YXR1cmVfaXNfc3VwcG9ydGVkKG9kX3NldHRpbmdzLCBTTVVfMTFfMF9PREZFQVRVUkVfR0ZYQ0xL
X0xJTUlUUykpCisJCQlicmVhazsKKwkJc2l6ZSArPSBzcHJpbnRmKGJ1ZiArIHNpemUsICJPRF9T
Q0xLOlxuIik7CisJCXNpemUgKz0gc3ByaW50ZihidWYgKyBzaXplLCAiMDogJXVNaHpcbjE6ICV1
TWh6XG4iLCBvZF90YWJsZS0+R2Z4Y2xrRm1pbiwgb2RfdGFibGUtPkdmeGNsa0ZtYXgpOworCQli
cmVhazsKKwljYXNlIFNNVV9PRF9NQ0xLOgorCQlpZiAoIXNtdS0+b2RfZW5hYmxlZCB8fCAhb2Rf
dGFibGUgfHwgIW9kX3NldHRpbmdzKQorCQkJYnJlYWs7CisJCWlmICghbmF2aTEwX29kX2ZlYXR1
cmVfaXNfc3VwcG9ydGVkKG9kX3NldHRpbmdzLCBTTVVfMTFfMF9PREZFQVRVUkVfVUNMS19NQVgp
KQorCQkJYnJlYWs7CisJCXNpemUgKz0gc3ByaW50ZihidWYgKyBzaXplLCAiT0RfTUNMSzpcbiIp
OworCQlzaXplICs9IHNwcmludGYoYnVmICsgc2l6ZSwgIjA6ICV1TUh6XG4iLCBvZF90YWJsZS0+
VWNsa0ZtYXgpOworCQlicmVhazsKKwljYXNlIFNNVV9PRF9WRERDX0NVUlZFOgorCQlpZiAoIXNt
dS0+b2RfZW5hYmxlZCB8fCAhb2RfdGFibGUgfHwgIW9kX3NldHRpbmdzKQorCQkJYnJlYWs7CisJ
CWlmICghbmF2aTEwX29kX2ZlYXR1cmVfaXNfc3VwcG9ydGVkKG9kX3NldHRpbmdzLCBTTVVfMTFf
MF9PREZFQVRVUkVfR0ZYQ0xLX0NVUlZFKSkKKwkJCWJyZWFrOworCQlzaXplICs9IHNwcmludGYo
YnVmICsgc2l6ZSwgIk9EX1ZERENfQ1VSVkU6XG4iKTsKKwkJZm9yIChpID0gMDsgaSA8IDM7IGkr
KykgeworCQkJc3dpdGNoIChpKSB7CisJCQljYXNlIDA6CisJCQkJY3VydmVfc2V0dGluZ3MgPSAm
b2RfdGFibGUtPkdmeGNsa0ZyZXExOworCQkJCWJyZWFrOworCQkJY2FzZSAxOgorCQkJCWN1cnZl
X3NldHRpbmdzID0gJm9kX3RhYmxlLT5HZnhjbGtGcmVxMjsKKwkJCQlicmVhazsKKwkJCWNhc2Ug
MjoKKwkJCQljdXJ2ZV9zZXR0aW5ncyA9ICZvZF90YWJsZS0+R2Z4Y2xrRnJlcTM7CisJCQkJYnJl
YWs7CisJCQlkZWZhdWx0OgorCQkJCWJyZWFrOworCQkJfQorCQkJc2l6ZSArPSBzcHJpbnRmKGJ1
ZiArIHNpemUsICIlZDogJXVNSHogQCAldW1WXG4iLCBpLCBjdXJ2ZV9zZXR0aW5nc1swXSwgY3Vy
dmVfc2V0dGluZ3NbMV0gLyBOQVZJMTBfVk9MVEFHRV9TQ0FMRSk7CisJCX0KKwkJYnJlYWs7CiAJ
ZGVmYXVsdDoKIAkJYnJlYWs7CiAJfQpAQCAtMTYwMCwxMSArMTY1MSw2IEBAIHN0YXRpYyBpbmxp
bmUgdm9pZCBuYXZpMTBfZHVtcF9vZF90YWJsZShPdmVyRHJpdmVUYWJsZV90ICpvZF90YWJsZSkg
ewogCXByX2RlYnVnKCJPRDogT3ZlckRyaXZlUGN0OiAlZFxuIiwgb2RfdGFibGUtPk92ZXJEcml2
ZVBjdCk7CiB9CiAKLXN0YXRpYyBpbmxpbmUgYm9vbCBuYXZpMTBfb2RfZmVhdHVyZV9pc19zdXBw
b3J0ZWQoc3RydWN0IHNtdV8xMV8wX292ZXJkcml2ZV90YWJsZSAqb2RfdGFibGUsIGVudW0gU01V
XzExXzBfT0RGRUFUVVJFX0lEIGZlYXR1cmUpCi17Ci0JcmV0dXJuIG9kX3RhYmxlLT5jYXBbZmVh
dHVyZV07Ci19Ci0KIHN0YXRpYyBpbnQgbmF2aTEwX29kX3NldHRpbmdfY2hlY2tfcmFuZ2Uoc3Ry
dWN0IHNtdV8xMV8wX292ZXJkcml2ZV90YWJsZSAqb2RfdGFibGUsIGVudW0gU01VXzExXzBfT0RT
RVRUSU5HX0lEIHNldHRpbmcsIHVpbnQzMl90IHZhbHVlKQogewogCWlmICh2YWx1ZSA8IG9kX3Rh
YmxlLT5taW5bc2V0dGluZ10pIHsKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9hbWQtZ2Z4
