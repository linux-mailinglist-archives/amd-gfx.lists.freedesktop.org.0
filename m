Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E827433BDB
	for <lists+amd-gfx@lfdr.de>; Tue,  4 Jun 2019 01:21:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5A92489321;
	Mon,  3 Jun 2019 23:21:02 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-BL2-obe.outbound.protection.outlook.com
 (mail-eopbgr750083.outbound.protection.outlook.com [40.107.75.83])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 65FC889321
 for <amd-gfx@lists.freedesktop.org>; Mon,  3 Jun 2019 23:21:00 +0000 (UTC)
Received: from DM5PR1201MB0155.namprd12.prod.outlook.com (10.174.106.148) by
 DM5PR1201MB2491.namprd12.prod.outlook.com (10.172.91.151) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1943.22; Mon, 3 Jun 2019 23:20:54 +0000
Received: from DM5PR1201MB0155.namprd12.prod.outlook.com
 ([fe80::dde4:7ea4:1b9b:45ae]) by DM5PR1201MB0155.namprd12.prod.outlook.com
 ([fe80::dde4:7ea4:1b9b:45ae%9]) with mapi id 15.20.1943.018; Mon, 3 Jun 2019
 23:20:54 +0000
From: "Yang, Philip" <Philip.Yang@amd.com>
To: "Kuehling, Felix" <Felix.Kuehling@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: Re: [PATCH] drm/amdgpu: use new HMM APIs and helpers v3
Thread-Topic: [PATCH] drm/amdgpu: use new HMM APIs and helpers v3
Thread-Index: AQHVGjxP4dSQN2+Mu0q1RtOh9a9v0aaKauwAgAAmlAA=
Date: Mon, 3 Jun 2019 23:20:54 +0000
Message-ID: <e74b1fbc-85f2-8ad0-41aa-7121875abc05@amd.com>
References: <20190603184344.8352-1-Philip.Yang@amd.com>
 <cb9842c5-a842-6b9f-913a-278d6f7064a1@amd.com>
In-Reply-To: <cb9842c5-a842-6b9f-913a-278d6f7064a1@amd.com>
Accept-Language: en-ZA, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: YTOPR0101CA0072.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b00:14::49) To DM5PR1201MB0155.namprd12.prod.outlook.com
 (2603:10b6:4:55::20)
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [165.204.55.251]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: c5a44f45-9c55-4658-0945-08d6e87a1ff0
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(5600148)(711020)(4605104)(1401327)(4618075)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(2017052603328)(7193020);
 SRVR:DM5PR1201MB2491; 
x-ms-traffictypediagnostic: DM5PR1201MB2491:
x-microsoft-antispam-prvs: <DM5PR1201MB24911F8AC54DA73ACF8DE47CE6140@DM5PR1201MB2491.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:949;
x-forefront-prvs: 0057EE387C
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(346002)(39860400002)(366004)(396003)(376002)(136003)(189003)(199004)(64756008)(8936002)(478600001)(2501003)(6486002)(6512007)(3846002)(99286004)(53546011)(66446008)(26005)(2616005)(14454004)(486006)(476003)(6116002)(446003)(73956011)(316002)(386003)(66476007)(72206003)(6506007)(186003)(66066001)(102836004)(66556008)(71190400001)(66946007)(71200400001)(52116002)(6246003)(11346002)(8676002)(76176011)(256004)(53936002)(86362001)(229853002)(14444005)(81156014)(36756003)(81166006)(110136005)(2906002)(25786009)(7736002)(5660300002)(305945005)(31686004)(31696002)(6436002)(68736007);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM5PR1201MB2491;
 H:DM5PR1201MB0155.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: QksjR6Ke+tsJJ2yRUzBiAqfAHTkU4UGOcHgthIcexUt3zoZcSRr7jC+8xGtc9nJuausTv54OEw2WIavQo3Hr6YWU1Ib3Ph1h+M4VEppL2YMM1d95X3WiELs3vlCszOzSLU8pzmtHqz6YjcZIdVw6KFD/pTftfFLWFcCE6V3+NzSKqO4uoqHii7QNYLbEws/w3I2hqAzOMckFMinzFJcX/8TQ8+oDCCMIfpnFv4a8dr3uNE/x6CDf0lh3SaeLOp7OhjAM4wycS9JqHAYzGrT7A0A5foCo/PxPp0JD8KPjBG+8nVsC6BekAcm8ZO3s20EH+vtNuryeXhcS1Chz+gtru8mvKsBY7zX3bRDymbQNtv6d2u0jxUj5ARryRMq0PAwiWpoYyv9SqqB7GdekwMGtd/kKANGb/Aco5kzL5tIkNgM=
Content-ID: <132C5172F2973243A2863B5DDCEE9BAB@namprd12.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: c5a44f45-9c55-4658-0945-08d6e87a1ff0
X-MS-Exchange-CrossTenant-originalarrivaltime: 03 Jun 2019 23:20:54.4527 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: yangp@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5PR1201MB2491
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=fZouDPXVaeJNZrGlk+vVoeYQzjvFeLd816V8u6srXWo=;
 b=shV6lAp8uB+ImtFsjOe5sgZRiisYN7i5tG1AXqX0nNHOlZwDfhMGts/dVy78OoLthU0fsLTyziLBM5ssGA4NS/GSh3mn7AV9qzvLeJQkg0vhOvUo7FbKjiTJuq1EEoTX+NYHuNGL8SPYy2oOsOoy41Uxucb2SEgDvcZaGPdaxG0=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Philip.Yang@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

DQoNCk9uIDIwMTktMDYtMDMgNTowMiBwLm0uLCBLdWVobGluZywgRmVsaXggd3JvdGU6DQo+IE9u
IDIwMTktMDYtMDMgMjo0NCBwLm0uLCBZYW5nLCBQaGlsaXAgd3JvdGU6DQo+PiBITU0gcHJvdmlk
ZXMgbmV3IEFQSXMgYW5kIGhlbHBzIGluIGtlcm5lbCA1LjItcmMxIHRvIHNpbXBsaWZ5IGRyaXZl
cg0KPj4gcGF0aC4gVGhlIG9sZCBobW0gQVBJcyBhcmUgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSBy
ZW1vdmVkIGluIGZ1dHVyZS4NCj4+DQo+PiBCZWxvdyBhcmUgY2hhbmdlcyBpbiBkcml2ZXI6DQo+
Pg0KPj4gMS4gQ2hhbmdlIGhtbV92bWFfZmF1bHQgdG8gaG1tX3JhbmdlX3JlZ2lzdGVyIGFuZCBo
bW1fcmFuZ2VfZmF1bHQgd2hpY2gNCj4+IHN1cHBvcnRzIHJhbmdlIHdpdGggbXVsdGlwbGUgdm1h
cywgcmVtb3ZlIHRoZSBtdWx0aXBsZSB2bWFzIGhhbmRsZSBwYXRoDQo+PiBhbmQgZGF0YSBzdHJ1
Y3R1cmUuDQo+PiAyLiBDaGFuZ2UgaG1tX3ZtYV9yYW5nZV9kb25lIHRvIGhtbV9yYW5nZV91bnJl
Z2lzdGVyLg0KPj4gMy4gVXNlIGRlZmF1bHQgZmxhZ3MgdG8gYXZvaWQgcHJlLWZpbGwgcGZuIGFy
cmF5cy4NCj4+IDQuIFVzZSBuZXcgaG1tX2RldmljZV8gaGVscGVycy4NCj4+DQo+PiB2MjogcmV0
cnkgaWYgaG1tX3JhbmdlX2ZhdWx0IHJldHVybnMgLUVBR0FJTg0KPj4gdjM6IGRlZmluZSBNQVhf
UkVUUllfSE1NX1JBTkdFX0ZBVUxULCBza2lwIGRyb3AgbW1hcF9zZW0gaWYgcmV0cnkNCj4gDQo+
IEkgdGhpbmsgZHJvcHBpbmcgbW1hcF9zZW0gZm9yIHJldHJ5IHdhcyBjb3JyZWN0IGluIHYyIG9m
IHRoaXMgcGF0Y2guIE5vdw0KPiB5b3Ugd2lsbCB0cnkgdG8gdGFrZSB0aGUgbW1hcF9zZW0gbXVs
dGlwbGUgdGltZXMgd2l0aG91dCBkcm9wcGluZyBpdCBpZg0KPiB5b3UgcmV0cnkuDQo+IA0KPiBX
ZSBkb24ndCBuZWVkIHRvIGhvbGQgdGhlIG1tYXBfc2VtIGR1cmluZyBobW1fcmFuZ2Vfd2FpdF91
bnRpbF92YWxpZC4NCj4gDQpobW1fcmFuZ2VfZmF1bHQgd2lsbCBkcm9wIHRoZSBtbWFwX3NlbSBp
bnRlcm5hbGx5IGJlZm9yZSByZXR1cm5pbmcgDQotRUFHQUlOLCBJIHRoaW5rIGl0IGRvZXMgdGhp
cyBvbiBwdXJwb3NlIHRvIGF2b2lkIHVwcGVyIGxldmVsIGNhbGwgcmV0cnkgDQp3aGl0aG91dCBy
ZWxlYXNlIG1tYXBfc2VtIGluIGJldHdlZW4uIEkgZmluZCB2MiB3YXMgaW5jb3JyZWN0IGFmdGVy
IA0KcmVhZGluZyBobW0gY29kZSBhZ2FpbiB0b2RheS4gSSBzaG91bGQgbWVudGlvbiBkZXRhaWxz
IG9mIHRoaXMgY2hhbmdlIGluIA0KbXkgY29tbWl0LCBzZWUgbW9yZSBiZWxvdy4NCg0KUGhpbGlw
DQoNCj4gU2VlIG1vcmUgYmVsb3cgLi4uDQo+IA0KPiANCj4+DQo+PiBDaGFuZ2UtSWQ6IEkxYTAw
Zjg4NDU5ZjNiOTZjOTUzNjkzM2U5YTE3ZWIxZWJhYTc4MTEzDQo+PiBTaWduZWQtb2ZmLWJ5OiBQ
aGlsaXAgWWFuZyA8UGhpbGlwLllhbmdAYW1kLmNvbT4NCj4+IC0tLQ0KPj4gICAgZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X21uLmMgIHwgICAxIC0NCj4+ICAgIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyB8IDE0OSArKysrKysrKysrLS0tLS0tLS0tLS0t
LS0NCj4+ICAgIDIgZmlsZXMgY2hhbmdlZCwgNjQgaW5zZXJ0aW9ucygrKSwgODYgZGVsZXRpb25z
KC0pDQo+Pg0KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9tbi5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X21uLmMNCj4+IGluZGV4
IDQxY2NlZTQ5YTIyNC4uZTBiYjQ3Y2U1NzBiIDEwMDY0NA0KPj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X21uLmMNCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9tbi5jDQo+PiBAQCAtNTE5LDcgKzUxOSw2IEBAIHZvaWQgYW1kZ3B1X2ht
bV9pbml0X3JhbmdlKHN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlKQ0KPj4gICAgCQlyYW5nZS0+Zmxh
Z3MgPSBobW1fcmFuZ2VfZmxhZ3M7DQo+PiAgICAJCXJhbmdlLT52YWx1ZXMgPSBobW1fcmFuZ2Vf
dmFsdWVzOw0KPj4gICAgCQlyYW5nZS0+cGZuX3NoaWZ0ID0gUEFHRV9TSElGVDsNCj4+IC0JCXJh
bmdlLT5wZm5zID0gTlVMTDsNCj4+ICAgIAkJSU5JVF9MSVNUX0hFQUQoJnJhbmdlLT5saXN0KTsN
Cj4+ICAgIAl9DQo+PiAgICB9DQo+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0
bS5jDQo+PiBpbmRleCBlYjRiODUwNjFjN2UuLjlkZTZhMmY1ZTU3MiAxMDA2NDQNCj4+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYw0KPj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jDQo+PiBAQCAtNzExLDggKzcxMSw3IEBA
IHN0cnVjdCBhbWRncHVfdHRtX3R0IHsNCj4+ICAgIAlzdHJ1Y3QgdGFza19zdHJ1Y3QJKnVzZXJ0
YXNrOw0KPj4gICAgCXVpbnQzMl90CQl1c2VyZmxhZ3M7DQo+PiAgICAjaWYgSVNfRU5BQkxFRChD
T05GSUdfRFJNX0FNREdQVV9VU0VSUFRSKQ0KPj4gLQlzdHJ1Y3QgaG1tX3JhbmdlCSpyYW5nZXM7
DQo+PiAtCWludAkJCW5yX3JhbmdlczsNCj4+ICsJc3RydWN0IGhtbV9yYW5nZQkqcmFuZ2U7DQo+
PiAgICAjZW5kaWYNCj4+ICAgIH07DQo+PiAgICANCj4+IEBAIC03MjUsNTcgKzcyNCwzNiBAQCBz
dHJ1Y3QgYW1kZ3B1X3R0bV90dCB7DQo+PiAgICAgKi8NCj4+ICAgICNpZiBJU19FTkFCTEVEKENP
TkZJR19EUk1fQU1ER1BVX1VTRVJQVFIpDQo+PiAgICANCj4+IC0vKiBTdXBwb3J0IFVzZXJwdHIg
cGFnZXMgY3Jvc3MgbWF4IDE2IHZtYXMgKi8NCj4+IC0jZGVmaW5lIE1BWF9OUl9WTUFTCSgxNikN
Cj4+ICsjZGVmaW5lIE1BWF9SRVRSWV9ITU1fUkFOR0VfRkFVTFQJMTYNCj4+ICAgIA0KPj4gICAg
aW50IGFtZGdwdV90dG1fdHRfZ2V0X3VzZXJfcGFnZXMoc3RydWN0IHR0bV90dCAqdHRtLCBzdHJ1
Y3QgcGFnZSAqKnBhZ2VzKQ0KPj4gICAgew0KPj4gICAgCXN0cnVjdCBhbWRncHVfdHRtX3R0ICpn
dHQgPSAodm9pZCAqKXR0bTsNCj4+ICAgIAlzdHJ1Y3QgbW1fc3RydWN0ICptbSA9IGd0dC0+dXNl
cnRhc2stPm1tOw0KPj4gICAgCXVuc2lnbmVkIGxvbmcgc3RhcnQgPSBndHQtPnVzZXJwdHI7DQo+
PiAtCXVuc2lnbmVkIGxvbmcgZW5kID0gc3RhcnQgKyB0dG0tPm51bV9wYWdlcyAqIFBBR0VfU0la
RTsNCj4+IC0Jc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEgPSBOVUxMLCAqdm1hc1tNQVhfTlJf
Vk1BU107DQo+PiAtCXN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlczsNCj4+IC0JdW5zaWduZWQgbG9u
ZyBucl9wYWdlcywgaTsNCj4+IC0JdWludDY0X3QgKnBmbnMsIGY7DQo+PiArCXN0cnVjdCB2bV9h
cmVhX3N0cnVjdCAqdm1hOw0KPj4gKwlzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZTsNCj4+ICsJdW5z
aWduZWQgbG9uZyBpOw0KPj4gKwl1aW50NjRfdCAqcGZuczsNCj4+ICsJaW50IHJldHJ5ID0gMDsN
Cj4+ICAgIAlpbnQgciA9IDA7DQo+PiAgICANCj4+ICAgIAlpZiAoIW1tKSAvKiBIYXBwZW5zIGR1
cmluZyBwcm9jZXNzIHNodXRkb3duICovDQo+PiAgICAJCXJldHVybiAtRVNSQ0g7DQo+PiAgICAN
Cj4+IC0JZG93bl9yZWFkKCZtbS0+bW1hcF9zZW0pOw0KPj4gLQ0KPj4gLQkvKiB1c2VyIHBhZ2Vz
IG1heSBjcm9zcyBtdWx0aXBsZSBWTUFzICovDQo+PiAtCWd0dC0+bnJfcmFuZ2VzID0gMDsNCj4+
IC0JZG8gew0KPj4gLQkJdW5zaWduZWQgbG9uZyB2bV9zdGFydDsNCj4+IC0NCj4+IC0JCWlmIChn
dHQtPm5yX3JhbmdlcyA+PSBNQVhfTlJfVk1BUykgew0KPj4gLQkJCURSTV9FUlJPUigiVG9vIG1h
bnkgVk1BcyBpbiB1c2VycHRyIHJhbmdlXG4iKTsNCj4+IC0JCQlyID0gLUVGQVVMVDsNCj4+IC0J
CQlnb3RvIG91dDsNCj4+IC0JCX0NCj4+IC0NCj4+IC0JCXZtX3N0YXJ0ID0gdm1hID8gdm1hLT52
bV9lbmQgOiBzdGFydDsNCj4+IC0JCXZtYSA9IGZpbmRfdm1hKG1tLCB2bV9zdGFydCk7DQo+PiAt
CQlpZiAodW5saWtlbHkoIXZtYSB8fCB2bV9zdGFydCA8IHZtYS0+dm1fc3RhcnQpKSB7DQo+PiAt
CQkJciA9IC1FRkFVTFQ7DQo+PiAtCQkJZ290byBvdXQ7DQo+PiAtCQl9DQo+PiAtCQl2bWFzW2d0
dC0+bnJfcmFuZ2VzKytdID0gdm1hOw0KPj4gLQl9IHdoaWxlIChlbmQgPiB2bWEtPnZtX2VuZCk7
DQo+PiAtDQo+PiAtCURSTV9ERUJVR19EUklWRVIoIjB4JWx4IG5yX3JhbmdlcyAlZCBwYWdlcyAw
eCVseFxuIiwNCj4+IC0JCXN0YXJ0LCBndHQtPm5yX3JhbmdlcywgdHRtLT5udW1fcGFnZXMpOw0K
Pj4gLQ0KPj4gKwl2bWEgPSBmaW5kX3ZtYShtbSwgc3RhcnQpOw0KPj4gKwlpZiAodW5saWtlbHko
IXZtYSB8fCBzdGFydCA8IHZtYS0+dm1fc3RhcnQpKSB7DQo+PiArCQlyID0gLUVGQVVMVDsNCj4+
ICsJCWdvdG8gb3V0Ow0KPj4gKwl9DQo+PiAgICAJaWYgKHVubGlrZWx5KChndHQtPnVzZXJmbGFn
cyAmIEFNREdQVV9HRU1fVVNFUlBUUl9BTk9OT05MWSkgJiYNCj4+IC0JCXZtYXNbMF0tPnZtX2Zp
bGUpKSB7DQo+PiArCQl2bWEtPnZtX2ZpbGUpKSB7DQo+PiAgICAJCXIgPSAtRVBFUk07DQo+PiAg
ICAJCWdvdG8gb3V0Ow0KPj4gICAgCX0NCj4+ICAgIA0KPj4gLQlyYW5nZXMgPSBrdm1hbGxvY19h
cnJheShndHQtPm5yX3Jhbmdlcywgc2l6ZW9mKCpyYW5nZXMpLCBHRlBfS0VSTkVMKTsNCj4+IC0J
aWYgKHVubGlrZWx5KCFyYW5nZXMpKSB7DQo+PiArCXJhbmdlID0ga3phbGxvYyhzaXplb2YoKnJh
bmdlKSwgR0ZQX0tFUk5FTCk7DQo+PiArCWlmICh1bmxpa2VseSghcmFuZ2UpKSB7DQo+PiAgICAJ
CXIgPSAtRU5PTUVNOw0KPj4gICAgCQlnb3RvIG91dDsNCj4+ICAgIAl9DQo+PiBAQCAtNzg2LDYx
ICs3NjQsNjIgQEAgaW50IGFtZGdwdV90dG1fdHRfZ2V0X3VzZXJfcGFnZXMoc3RydWN0IHR0bV90
dCAqdHRtLCBzdHJ1Y3QgcGFnZSAqKnBhZ2VzKQ0KPj4gICAgCQlnb3RvIG91dF9mcmVlX3Jhbmdl
czsNCj4+ICAgIAl9DQo+PiAgICANCj4+IC0JZm9yIChpID0gMDsgaSA8IGd0dC0+bnJfcmFuZ2Vz
OyBpKyspDQo+PiAtCQlhbWRncHVfaG1tX2luaXRfcmFuZ2UoJnJhbmdlc1tpXSk7DQo+PiArCWFt
ZGdwdV9obW1faW5pdF9yYW5nZShyYW5nZSk7DQo+PiArCXJhbmdlLT5kZWZhdWx0X2ZsYWdzID0g
cmFuZ2UtPmZsYWdzW0hNTV9QRk5fVkFMSURdOw0KPj4gKwlyYW5nZS0+ZGVmYXVsdF9mbGFncyB8
PSBhbWRncHVfdHRtX3R0X2lzX3JlYWRvbmx5KHR0bSkgPw0KPj4gKwkJCQkwIDogcmFuZ2UtPmZs
YWdzW0hNTV9QRk5fV1JJVEVdOw0KPj4gKwlyYW5nZS0+cGZuX2ZsYWdzX21hc2sgPSAwOw0KPj4g
KwlyYW5nZS0+cGZucyA9IHBmbnM7DQo+PiArCWhtbV9yYW5nZV9yZWdpc3RlcihyYW5nZSwgbW0s
IHN0YXJ0LA0KPj4gKwkJCSAgIHN0YXJ0ICsgdHRtLT5udW1fcGFnZXMgKiBQQUdFX1NJWkUsIFBB
R0VfU0hJRlQpOw0KPj4gICAgDQo+PiAtCWYgPSByYW5nZXNbMF0uZmxhZ3NbSE1NX1BGTl9WQUxJ
RF07DQo+PiAtCWYgfD0gYW1kZ3B1X3R0bV90dF9pc19yZWFkb25seSh0dG0pID8NCj4+IC0JCQkJ
MCA6IHJhbmdlc1swXS5mbGFnc1tITU1fUEZOX1dSSVRFXTsNCj4+IC0JbWVtc2V0NjQocGZucywg
ZiwgdHRtLT5udW1fcGFnZXMpOw0KPj4gK3JldHJ5Og0KPj4gKwkvKg0KPj4gKwkgKiBKdXN0IHdh
aXQgZm9yIHJhbmdlIHRvIGJlIHZhbGlkLCBzYWZlIHRvIGlnbm9yZSByZXR1cm4gdmFsdWUgYXMg
d2UNCj4+ICsJICogd2lsbCB1c2UgdGhlIHJldHVybiB2YWx1ZSBvZiBobW1fcmFuZ2VfZmF1bHQo
KSBiZWxvdyB1bmRlciB0aGUNCj4+ICsJICogbW1hcF9zZW0gdG8gYXNjZXJ0YWluIHRoZSB2YWxp
ZGl0eSBvZiB0aGUgcmFuZ2UuDQo+PiArCSAqLw0KPj4gKwlobW1fcmFuZ2Vfd2FpdF91bnRpbF92
YWxpZChyYW5nZSwgSE1NX1JBTkdFX0RFRkFVTFRfVElNRU9VVCk7DQo+PiAgICANCj4+IC0JZm9y
IChucl9wYWdlcyA9IDAsIGkgPSAwOyBpIDwgZ3R0LT5ucl9yYW5nZXM7IGkrKykgew0KPj4gLQkJ
cmFuZ2VzW2ldLnZtYSA9IHZtYXNbaV07DQo+PiAtCQlyYW5nZXNbaV0uc3RhcnQgPSBtYXgoc3Rh
cnQsIHZtYXNbaV0tPnZtX3N0YXJ0KTsNCj4+IC0JCXJhbmdlc1tpXS5lbmQgPSBtaW4oZW5kLCB2
bWFzW2ldLT52bV9lbmQpOw0KPj4gLQkJcmFuZ2VzW2ldLnBmbnMgPSBwZm5zICsgbnJfcGFnZXM7
DQo+PiAtCQlucl9wYWdlcyArPSAocmFuZ2VzW2ldLmVuZCAtIHJhbmdlc1tpXS5zdGFydCkgLyBQ
QUdFX1NJWkU7DQo+PiArCWRvd25fcmVhZCgmbW0tPm1tYXBfc2VtKTsNCj4gDQo+IElmIHlvdSB0
YWtlIHRoZSBtbWFwX3NlbSBoZXJlLCB5b3UgaGF2ZSB0byBkcm9wIGl0IGJlZm9yZSBnb3RvIHJl
dHJ5Lg0KPiBPdGhlcndpc2UgeW91J2xsIGVuZCB1cCB0YWtpbmcgdGhlIG1tYXBfc2VtIG11bHRp
cGxlIHRpbWVzLiBJdCdzIG5vdA0KPiBmYXRhbCBpbW1lZGlhdGVseSBiZWNhdXNlIHlvdSBjYW4g
dGFrZSBtdWx0aXBsZSByZWFkIGxvY2tzLiBCdXQgaWYgeW91DQo+IGRvbid0IGRyb3AgYWxsIHRo
ZSByZWFkIGxvY2tzLCBubyB3cml0ZXIgd2lsbCBldmVyIGJlIGFibGUgdG8gdGFrZSBhDQo+IHdy
aXRlIGxvY2sgYWdhaW4uDQo+IA0KbW1hcF9zZW0gZHJvcHBlZCBieSBobW1fcmFuZ2VfZmF1bHQg
YmVmb3JlIHJldHVybmluZyAtRUFHQUlOLCBoYXZlIHRvIA0KdGFrZSBpdCBhZ2Fpbi4NCj4gDQo+
PiAgICANCj4+IC0JCXIgPSBobW1fdm1hX2ZhdWx0KCZyYW5nZXNbaV0sIHRydWUpOw0KPj4gLQkJ
aWYgKHVubGlrZWx5KHIpKQ0KPj4gLQkJCWJyZWFrOw0KPj4gLQl9DQo+PiAtCWlmICh1bmxpa2Vs
eShyKSkgew0KPj4gLQkJd2hpbGUgKGktLSkNCj4+IC0JCQlobW1fdm1hX3JhbmdlX2RvbmUoJnJh
bmdlc1tpXSk7DQo+PiArCXIgPSBobW1fcmFuZ2VfZmF1bHQocmFuZ2UsIHRydWUpOw0KPj4gKwlp
ZiAodW5saWtlbHkociA8IDApKSB7DQo+PiArCQlpZiAobGlrZWx5KHIgPT0gLUVBR0FJTikpIHsN
Cj4+ICsJCQlpZiAocmV0cnkrKyA8IE1BWF9SRVRSWV9ITU1fUkFOR0VfRkFVTFQpDQo+PiArCQkJ
CWdvdG8gcmV0cnk7DQo+IA0KPiBZb3UncmUgc3RpbGwgaG9sZGluZyB0aGUgbW1hcF9zZW0gaGVy
ZS4NCj4gDQo+IA0KPj4gKwkJCWVsc2UNCj4+ICsJCQkJcHJfZXJyKCJSZXRyeSBobW0gZmF1bHQg
dG9vIG1hbnkgdGltZXNcbiIpOw0KPj4gKwkJfQ0KPj4gICAgDQo+PiAgICAJCWdvdG8gb3V0X2Zy
ZWVfcGZuczsNCj4+ICAgIAl9DQo+PiAgICANCj4+IC0JdXBfcmVhZCgmbW0tPm1tYXBfc2VtKTsN
Cj4+IC0NCj4+ICAgIAlmb3IgKGkgPSAwOyBpIDwgdHRtLT5udW1fcGFnZXM7IGkrKykgew0KPj4g
LQkJcGFnZXNbaV0gPSBobW1fcGZuX3RvX3BhZ2UoJnJhbmdlc1swXSwgcGZuc1tpXSk7DQo+PiAt
CQlpZiAoIXBhZ2VzW2ldKSB7DQo+PiArCQlwYWdlc1tpXSA9IGhtbV9kZXZpY2VfZW50cnlfdG9f
cGFnZShyYW5nZSwgcGZuc1tpXSk7DQo+PiArCQlpZiAodW5saWtlbHkoIXBhZ2VzW2ldKSkgew0K
Pj4gICAgCQkJcHJfZXJyKCJQYWdlIGZhdWx0IGZhaWxlZCBmb3IgcGZuWyVsdV0gPSAweCVsbHhc
biIsDQo+PiAgICAJCQkgICAgICAgaSwgcGZuc1tpXSk7DQo+PiAtCQkJZ290byBvdXRfaW52YWxp
ZF9wZm47DQo+PiArCQkJciA9IC1FTk9NRU07DQo+PiArDQo+PiArCQkJZ290byBvdXRfZnJlZV9w
Zm5zOw0KPj4gICAgCQl9DQo+PiAgICAJfQ0KPj4gLQlndHQtPnJhbmdlcyA9IHJhbmdlczsNCj4+
ICsNCj4+ICsJdXBfcmVhZCgmbW0tPm1tYXBfc2VtKTsNCj4gDQo+IFdoeSBkbyB5b3UgZHJvcCB0
aGUgbW1hcF9zZW0gc28gbGF0ZT8gRG9lcyB0aGUgbG9vcCBhYm92ZSByZXF1aXJlIGl0PyBJDQo+
IGRvbid0IGJlbGlldmUgaXQgZG9lcy4NCj4gDQpZZXMsIEkgY2FuIGRyb3AgdGhlIG1tYXBfc2Vt
IGJlZm9yZSB0aGUgbG9vcCwganVzdCB3YW50ZWQgdG8gcmVtb3ZlIG9uZSANCmxpbmUgb2YgZHVw
bGljYXRlIHVwX3JlYWQgY2FsbC4NCg0KPiBSZWdhcmRzLA0KPiAgIMKgIEZlbGl4DQo+IA0KPiAN
Cj4+ICsNCj4+ICsJZ3R0LT5yYW5nZSA9IHJhbmdlOw0KPj4gICAgDQo+PiAgICAJcmV0dXJuIDA7
DQo+PiAgICANCj4+ICAgIG91dF9mcmVlX3BmbnM6DQo+PiArCXVwX3JlYWQoJm1tLT5tbWFwX3Nl
bSk7DQo+PiArCWhtbV9yYW5nZV91bnJlZ2lzdGVyKHJhbmdlKTsNCj4+ICAgIAlrdmZyZWUocGZu
cyk7DQo+PiAgICBvdXRfZnJlZV9yYW5nZXM6DQo+PiAtCWt2ZnJlZShyYW5nZXMpOw0KPj4gKwlr
ZnJlZShyYW5nZSk7DQo+PiAgICBvdXQ6DQo+PiAtCXVwX3JlYWQoJm1tLT5tbWFwX3NlbSk7DQo+
PiAtDQo+PiAgICAJcmV0dXJuIHI7DQo+PiAtDQo+PiAtb3V0X2ludmFsaWRfcGZuOg0KPj4gLQlm
b3IgKGkgPSAwOyBpIDwgZ3R0LT5ucl9yYW5nZXM7IGkrKykNCj4+IC0JCWhtbV92bWFfcmFuZ2Vf
ZG9uZSgmcmFuZ2VzW2ldKTsNCj4+IC0Ja3ZmcmVlKHBmbnMpOw0KPj4gLQlrdmZyZWUocmFuZ2Vz
KTsNCj4+IC0JcmV0dXJuIC1FTk9NRU07DQo+PiAgICB9DQo+PiAgICANCj4+ICAgIC8qKg0KPj4g
QEAgLTg1MywyMyArODMyLDIzIEBAIGJvb2wgYW1kZ3B1X3R0bV90dF9nZXRfdXNlcl9wYWdlc19k
b25lKHN0cnVjdCB0dG1fdHQgKnR0bSkNCj4+ICAgIHsNCj4+ICAgIAlzdHJ1Y3QgYW1kZ3B1X3R0
bV90dCAqZ3R0ID0gKHZvaWQgKil0dG07DQo+PiAgICAJYm9vbCByID0gZmFsc2U7DQo+PiAtCWlu
dCBpOw0KPj4gICAgDQo+PiAgICAJaWYgKCFndHQgfHwgIWd0dC0+dXNlcnB0cikNCj4+ICAgIAkJ
cmV0dXJuIGZhbHNlOw0KPj4gICAgDQo+PiAtCURSTV9ERUJVR19EUklWRVIoInVzZXJfcGFnZXNf
ZG9uZSAweCVsbHggbnJfcmFuZ2VzICVkIHBhZ2VzIDB4JWx4XG4iLA0KPj4gLQkJZ3R0LT51c2Vy
cHRyLCBndHQtPm5yX3JhbmdlcywgdHRtLT5udW1fcGFnZXMpOw0KPj4gKwlEUk1fREVCVUdfRFJJ
VkVSKCJ1c2VyX3BhZ2VzX2RvbmUgMHglbGx4IHBhZ2VzIDB4JWx4XG4iLA0KPj4gKwkJZ3R0LT51
c2VycHRyLCB0dG0tPm51bV9wYWdlcyk7DQo+PiAgICANCj4+IC0JV0FSTl9PTkNFKCFndHQtPnJh
bmdlcyB8fCAhZ3R0LT5yYW5nZXNbMF0ucGZucywNCj4+ICsJV0FSTl9PTkNFKCFndHQtPnJhbmdl
IHx8ICFndHQtPnJhbmdlLT5wZm5zLA0KPj4gICAgCQkiTm8gdXNlciBwYWdlcyB0byBjaGVja1xu
Iik7DQo+PiAgICANCj4+IC0JaWYgKGd0dC0+cmFuZ2VzKSB7DQo+PiAtCQlmb3IgKGkgPSAwOyBp
IDwgZ3R0LT5ucl9yYW5nZXM7IGkrKykNCj4+IC0JCQlyIHw9IGhtbV92bWFfcmFuZ2VfZG9uZSgm
Z3R0LT5yYW5nZXNbaV0pOw0KPj4gLQkJa3ZmcmVlKGd0dC0+cmFuZ2VzWzBdLnBmbnMpOw0KPj4g
LQkJa3ZmcmVlKGd0dC0+cmFuZ2VzKTsNCj4+IC0JCWd0dC0+cmFuZ2VzID0gTlVMTDsNCj4+ICsJ
aWYgKGd0dC0+cmFuZ2UpIHsNCj4+ICsJCXIgPSBobW1fcmFuZ2VfdmFsaWQoZ3R0LT5yYW5nZSk7
DQo+PiArCQlobW1fcmFuZ2VfdW5yZWdpc3RlcihndHQtPnJhbmdlKTsNCj4+ICsNCj4+ICsJCWt2
ZnJlZShndHQtPnJhbmdlLT5wZm5zKTsNCj4+ICsJCWtmcmVlKGd0dC0+cmFuZ2UpOw0KPj4gKwkJ
Z3R0LT5yYW5nZSA9IE5VTEw7DQo+PiAgICAJfQ0KPj4gICAgDQo+PiAgICAJcmV0dXJuIHI7DQo+
PiBAQCAtOTUzLDkgKzkzMiw5IEBAIHN0YXRpYyB2b2lkIGFtZGdwdV90dG1fdHRfdW5waW5fdXNl
cnB0cihzdHJ1Y3QgdHRtX3R0ICp0dG0pDQo+PiAgICAJc2dfZnJlZV90YWJsZSh0dG0tPnNnKTsN
Cj4+ICAgIA0KPj4gICAgI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9BTURHUFVfVVNFUlBUUikN
Cj4+IC0JaWYgKGd0dC0+cmFuZ2VzICYmDQo+PiAtCSAgICB0dG0tPnBhZ2VzWzBdID09IGhtbV9w
Zm5fdG9fcGFnZSgmZ3R0LT5yYW5nZXNbMF0sDQo+PiAtCQkJCQkgICAgIGd0dC0+cmFuZ2VzWzBd
LnBmbnNbMF0pKQ0KPj4gKwlpZiAoZ3R0LT5yYW5nZSAmJg0KPj4gKwkgICAgdHRtLT5wYWdlc1sw
XSA9PSBobW1fZGV2aWNlX2VudHJ5X3RvX3BhZ2UoZ3R0LT5yYW5nZSwNCj4+ICsJCQkJCQkgICAg
ICBndHQtPnJhbmdlLT5wZm5zWzBdKSkNCj4+ICAgIAkJV0FSTl9PTkNFKDEsICJNaXNzaW5nIGdl
dF91c2VyX3BhZ2VfZG9uZVxuIik7DQo+PiAgICAjZW5kaWYNCj4+ICAgIH0NCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0
CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
