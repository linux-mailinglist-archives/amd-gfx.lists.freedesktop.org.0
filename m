Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 31B9F2F4C8A
	for <lists+amd-gfx@lfdr.de>; Wed, 13 Jan 2021 14:54:13 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 83D016E9E1;
	Wed, 13 Jan 2021 13:54:10 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-oo1-xc34.google.com (mail-oo1-xc34.google.com
 [IPv6:2607:f8b0:4864:20::c34])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DAFB56E9E1
 for <amd-gfx@lists.freedesktop.org>; Wed, 13 Jan 2021 13:54:09 +0000 (UTC)
Received: by mail-oo1-xc34.google.com with SMTP id i18so527610ooh.5
 for <amd-gfx@lists.freedesktop.org>; Wed, 13 Jan 2021 05:54:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=d7ucHRX9jJr9nJf26c76lVCNImmjOeV89BTUrh6lPRI=;
 b=hF0V57tU4GpIr624gdOFWwjGkg4zUVBXiD07dJ66Er4+MNTI7IjafeG7jy1vaCz7pF
 dsvNLVN+i90dU9dEwvV5i7CR+tZyPBfNRd3SO1xXdzC5lbe53SRRQKdXUzRKD4VonpGN
 xb3z+n5hjiPepZ4hLNlzruRMg/2C4IGyddBemwf5BSuXE/0cLN1+M5H0hHlyUox8W559
 MtNfZNQb1tAlDYGJjEKpJCE0L42IxDC2JUGV2Hdn0D04aEI0Bms0i5ebgNtk5KQkoxYy
 3MT3EtE+0e7OeuQSYC26N5CuYSwjSLz/0261eUmbhJ2ifMaWoN8Y6AAIzgQWwOvHvbm4
 RgpA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=d7ucHRX9jJr9nJf26c76lVCNImmjOeV89BTUrh6lPRI=;
 b=cmEZYEvcqJtiHbwrvPapuxxHvsTBi59+42qhHmwXWIrRVWFQDJLqeUFN0i9KymgewF
 b6hEgWAlm5qH6uhuBVh4ru4rZrCJDkX3CX0XhzBdkqvd7KPMcRUDaiFOuegNVmWt8mHZ
 qJBbRDs7wMeFt7SwTsYzRpcf9/px7aYJ9NBdOjPaL3ocKeE5Chvc2u/uUu8jaLzn/wsu
 zCGYUWOfEHcOKkk/6UpOE4zWIae1NlLvh2cjYZkSLr/tKWzmDiBCoRHoClqN60efKDxX
 jce+xDecy+AJ8cykln0glkb+tKIVlgt2vZIKuNJE+Yr+2d4DzsZ8PP5D52StW8mMLDVF
 vKiw==
X-Gm-Message-State: AOAM533Uait9n0HsP25sPBYL3nxBrmM2KB4kqvr+7K7bgyFKle9GtYhF
 uMUj6j/TCGqKRWhFcEwmvCug2ZwE+GV19eki0y4=
X-Google-Smtp-Source: ABdhPJw0n9b+QVP7/c25rCBe6EDCMPOe8poIh2SIHXdN+zn8B/xFCl9/5xjaQqw6C4pvc/1m2YWPjsYoh2X+PY25zos=
X-Received: by 2002:a4a:a2c5:: with SMTP id r5mr1289345ool.72.1610546048925;
 Wed, 13 Jan 2021 05:54:08 -0800 (PST)
MIME-Version: 1.0
References: <20210113034354.14557-1-Jinzhou.Su@amd.com>
 <20210113034354.14557-2-Jinzhou.Su@amd.com>
In-Reply-To: <20210113034354.14557-2-Jinzhou.Su@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Wed, 13 Jan 2021 08:53:57 -0500
Message-ID: <CADnq5_NQu7d3rZHm77oYEF0cYhLjoMOF=2bVdbh4oi68i6ADbQ@mail.gmail.com>
Subject: Re: [PATCH 2/2] drm/amdgpu: Add secure display TA interface
To: Jinzhou Su <Jinzhou.Su@amd.com>
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Huang Rui <ray.huang@amd.com>, amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCBKYW4gMTIsIDIwMjEgYXQgMTA6NDQgUE0gSmluemhvdSBTdSA8SmluemhvdS5TdUBh
bWQuY29tPiB3cm90ZToKPgo+IEFkZCBpbnRlcmZhY2UgdG8gbG9hZCwgdW5sb2FkLCBpbnZva2Ug
Y29tbWFuZCBmb3IKPiBzZWN1cmUgZGlzcGxheSBUQS4KPgo+IHYyOiBBZGQgZGVidWdmcyBpbnRl
cmZhY2UgZm9yIHNlY3VyZSBkaXNwbGF5IFRBCj4KPiBTaWduZWQtb2ZmLWJ5OiBKaW56aG91LlN1
IDxKaW56aG91LlN1QGFtZC5jb20+Cj4gUmV2aWV3ZWQtYnk6IEh1YW5nIFJ1aSA8cmF5Lmh1YW5n
QGFtZC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L01ha2VmaWxlICAg
ICAgICAgICB8ICAgMiArLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGVi
dWdmcy5jICAgfCAgIDMgKwo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNw
LmMgICAgICAgfCAxOTUgKysrKysrKysrKysrKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9wc3AuaCAgICAgICB8ICAxNyArKwo+ICAuLi4vZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9zZWN1cmVkaXNwbGF5LmMgfCAxNzQgKysrKysrKysrKysrKysrKwo+ICAuLi4v
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zZWN1cmVkaXNwbGF5LmggfCAgMzYgKysrKwo+ICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdWNvZGUuaCAgICAgfCAgIDQgKwo+ICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjEwXzAuYyAgICAgICAgfCAgMTIgKy0KPiAg
OCBmaWxlcyBjaGFuZ2VkLCA0NDAgaW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKPiAgY3Jl
YXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zZWN1cmVk
aXNwbGF5LmMKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9zZWN1cmVkaXNwbGF5LmgKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L01ha2VmaWxl
Cj4gaW5kZXggYzYyNjI2ODllMTRlLi5lNGJlYmJmYTg4YWYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvTWFrZWZpbGUKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9NYWtlZmlsZQo+IEBAIC01Niw3ICs1Niw3IEBAIGFtZGdwdS15ICs9IGFtZGdwdV9k
ZXZpY2UubyBhbWRncHVfa21zLm8gXAo+ICAgICAgICAgYW1kZ3B1X2dtYy5vIGFtZGdwdV9tbWh1
Yi5vIGFtZGdwdV94Z21pLm8gYW1kZ3B1X2NzYS5vIGFtZGdwdV9yYXMubyBhbWRncHVfdm1fY3B1
Lm8gXAo+ICAgICAgICAgYW1kZ3B1X3ZtX3NkbWEubyBhbWRncHVfZGlzY292ZXJ5Lm8gYW1kZ3B1
X3Jhc19lZXByb20ubyBhbWRncHVfbmJpby5vIFwKPiAgICAgICAgIGFtZGdwdV91bWMubyBzbXVf
djExXzBfaTJjLm8gYW1kZ3B1X2ZydV9lZXByb20ubyBhbWRncHVfcmFwLm8gXAo+IC0gICAgICAg
YW1kZ3B1X2Z3X2F0dGVzdGF0aW9uLm8KPiArICAgICAgIGFtZGdwdV9md19hdHRlc3RhdGlvbi5v
IGFtZGdwdV9zZWN1cmVkaXNwbGF5Lm8KPgo+ICBhbWRncHUtJChDT05GSUdfUEVSRl9FVkVOVFMp
ICs9IGFtZGdwdV9wbXUubwo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
ZGVidWdmcy5jCj4gaW5kZXggNDc3YmVhZDRmYWIxLi40YzM4YzU3NzFjYmMgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RlYnVnZnMuYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZWJ1Z2ZzLmMKPiBAQCAtMzUsNiArMzUs
NyBAQAo+ICAjaW5jbHVkZSAiYW1kZ3B1X2RtX2RlYnVnZnMuaCIKPiAgI2luY2x1ZGUgImFtZGdw
dV9yYXMuaCIKPiAgI2luY2x1ZGUgImFtZGdwdV9yYXAuaCIKPiArI2luY2x1ZGUgImFtZGdwdV9z
ZWN1cmVkaXNwbGF5LmgiCj4gICNpbmNsdWRlICJhbWRncHVfZndfYXR0ZXN0YXRpb24uaCIKPgo+
ICAvKioKPiBAQCAtMTY2Niw2ICsxNjY3LDggQEAgaW50IGFtZGdwdV9kZWJ1Z2ZzX2luaXQoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4KPiAgICAgICAgIGFtZGdwdV9yYXBfZGVidWdmc19p
bml0KGFkZXYpOwo+Cj4gKyAgICAgICBhbWRncHVfc2VjdXJlZGlzcGxheV9kZWJ1Z2ZzX2luaXQo
YWRldik7Cj4gKwo+ICAgICAgICAgYW1kZ3B1X2Z3X2F0dGVzdGF0aW9uX2RlYnVnZnNfaW5pdChh
ZGV2KTsKPgo+ICAgICAgICAgcmV0dXJuIGFtZGdwdV9kZWJ1Z2ZzX2FkZF9maWxlcyhhZGV2LCBh
bWRncHVfZGVidWdmc19saXN0LAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfcHNwLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNw
LmMKPiBpbmRleCA1MjNkMjJkYjA5NGIuLmViMTlhZTczNDM5NiAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmMKPiBAQCAtMzYsNiArMzYsNyBAQAo+ICAjaW5jbHVk
ZSAicHNwX3YxMl8wLmgiCj4KPiAgI2luY2x1ZGUgImFtZGdwdV9yYXMuaCIKPiArI2luY2x1ZGUg
ImFtZGdwdV9zZWN1cmVkaXNwbGF5LmgiCj4KPiAgc3RhdGljIGludCBwc3Bfc3lzZnNfaW5pdChz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Cj4gIHN0YXRpYyB2b2lkIHBzcF9zeXNmc19maW5p
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiBAQCAtMTY0Miw2ICsxNjQzLDE3OSBAQCBp
bnQgcHNwX3JhcF9pbnZva2Uoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsIHVpbnQzMl90IHRhX2Nt
ZF9pZCkKPiAgfQo+ICAvLyBSQVAgZW5kCj4KPiArLyogc2VjdXJlZGlzcGxheSBzdGFydCAqLwo+
ICtzdGF0aWMgaW50IHBzcF9zZWN1cmVkaXNwbGF5X2luaXRfc2hhcmVkX2J1ZihzdHJ1Y3QgcHNw
X2NvbnRleHQgKnBzcCkKPiArewo+ICsgICAgICAgaW50IHJldDsKPiArCj4gKyAgICAgICAvKgo+
ICsgICAgICAgICogQWxsb2NhdGUgMTZrIG1lbW9yeSBhbGlnbmVkIHRvIDRrIGZyb20gRnJhbWUg
QnVmZmVyIChsb2NhbAo+ICsgICAgICAgICogcGh5c2ljYWwpIGZvciBzYSB0YSA8LT4gRHJpdmVy
Cj4gKyAgICAgICAgKi8KPiArICAgICAgIHJldCA9IGFtZGdwdV9ib19jcmVhdGVfa2VybmVsKHBz
cC0+YWRldiwgUFNQX1NFQ1VSRURJU1BMQVlfU0hBUkVEX01FTV9TSVpFLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgUEFHRV9TSVpFLCBBTURHUFVfR0VNX0RPTUFJTl9W
UkFNLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnBzcC0+c2VjdXJl
ZGlzcGxheV9jb250ZXh0LnNlY3VyZWRpc3BsYXlfc2hhcmVkX2JvLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgJnBzcC0+c2VjdXJlZGlzcGxheV9jb250ZXh0LnNlY3Vy
ZWRpc3BsYXlfc2hhcmVkX21jX2FkZHIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAmcHNwLT5zZWN1cmVkaXNwbGF5X2NvbnRleHQuc2VjdXJlZGlzcGxheV9zaGFyZWRf
YnVmKTsKPiArCj4gKyAgICAgICByZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHBz
cF9zZWN1cmVkaXNwbGF5X2xvYWQoc3RydWN0IHBzcF9jb250ZXh0ICpwc3ApCj4gK3sKPiArICAg
ICAgIGludCByZXQ7Cj4gKyAgICAgICBzdHJ1Y3QgcHNwX2dmeF9jbWRfcmVzcCAqY21kOwo+ICsK
PiArICAgICAgIC8qCj4gKyAgICAgICAgKiBUT0RPOiBieXBhc3MgdGhlIGxvYWRpbmcgaW4gc3Jp
b3YgZm9yIG5vdwo+ICsgICAgICAgICovCj4gKwo+ICsgICAgICAgY21kID0ga3phbGxvYyhzaXpl
b2Yoc3RydWN0IHBzcF9nZnhfY21kX3Jlc3ApLCBHRlBfS0VSTkVMKTsKPiArICAgICAgIGlmICgh
Y21kKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiArCj4gKyAgICAgICBtZW1z
ZXQocHNwLT5md19wcmlfYnVmLCAwLCBQU1BfMV9NRUcpOwo+ICsgICAgICAgbWVtY3B5KHBzcC0+
ZndfcHJpX2J1ZiwgcHNwLT50YV9zZWN1cmVkaXNwbGF5X3N0YXJ0X2FkZHIsIHBzcC0+dGFfc2Vj
dXJlZGlzcGxheV91Y29kZV9zaXplKTsKPiArCj4gKyAgICAgICBwc3BfcHJlcF90YV9sb2FkX2Nt
ZF9idWYoY21kLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBzcC0+ZndfcHJp
X21jX2FkZHIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHNwLT50YV9zZWN1
cmVkaXNwbGF5X3Vjb2RlX3NpemUsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
cHNwLT5zZWN1cmVkaXNwbGF5X2NvbnRleHQuc2VjdXJlZGlzcGxheV9zaGFyZWRfbWNfYWRkciwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQU1BfU0VDVVJFRElTUExBWV9TSEFS
RURfTUVNX1NJWkUpOwo+ICsKPiArICAgICAgIHJldCA9IHBzcF9jbWRfc3VibWl0X2J1Zihwc3As
IE5VTEwsIGNtZCwgcHNwLT5mZW5jZV9idWZfbWNfYWRkcik7Cj4gKwo+ICsgICAgICAgaWYgKHJl
dCkKPiArICAgICAgICAgICAgICAgZ290byBmYWlsZWQ7Cj4gKwo+ICsgICAgICAgcHNwLT5zZWN1
cmVkaXNwbGF5X2NvbnRleHQuc2VjdXJlZGlzcGxheV9pbml0aWFsaXplZCA9IHRydWU7Cj4gKyAg
ICAgICBwc3AtPnNlY3VyZWRpc3BsYXlfY29udGV4dC5zZXNzaW9uX2lkID0gY21kLT5yZXNwLnNl
c3Npb25faWQ7Cj4gKyAgICAgICBtdXRleF9pbml0KCZwc3AtPnNlY3VyZWRpc3BsYXlfY29udGV4
dC5tdXRleCk7Cj4gKwo+ICtmYWlsZWQ6Cj4gKyAgICAgICBrZnJlZShjbWQpOwo+ICsgICAgICAg
cmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGljIGludCBwc3Bfc2VjdXJlZGlzcGxheV91bmxv
YWQoc3RydWN0IHBzcF9jb250ZXh0ICpwc3ApCj4gK3sKPiArICAgICAgIGludCByZXQ7Cj4gKyAg
ICAgICBzdHJ1Y3QgcHNwX2dmeF9jbWRfcmVzcCAqY21kOwo+ICsKPiArICAgICAgIGNtZCA9IGt6
YWxsb2Moc2l6ZW9mKHN0cnVjdCBwc3BfZ2Z4X2NtZF9yZXNwKSwgR0ZQX0tFUk5FTCk7Cj4gKyAg
ICAgICBpZiAoIWNtZCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gKwo+ICsg
ICAgICAgcHNwX3ByZXBfdGFfdW5sb2FkX2NtZF9idWYoY21kLCBwc3AtPnNlY3VyZWRpc3BsYXlf
Y29udGV4dC5zZXNzaW9uX2lkKTsKPiArCj4gKyAgICAgICByZXQgPSBwc3BfY21kX3N1Ym1pdF9i
dWYocHNwLCBOVUxMLCBjbWQsIHBzcC0+ZmVuY2VfYnVmX21jX2FkZHIpOwo+ICsKPiArICAgICAg
IGtmcmVlKGNtZCk7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGlj
IGludCBwc3Bfc2VjdXJlZGlzcGxheV9pbml0aWFsaXplKHN0cnVjdCBwc3BfY29udGV4dCAqcHNw
KQo+ICt7Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsgICAgICAgc3RydWN0IHNlY3VyZWRpc3BsYXlf
Y21kICpzZWN1cmVkaXNwbGF5X2NtZDsKPiArCj4gKyAgICAgICAvKgo+ICsgICAgICAgICogVE9E
TzogYnlwYXNzIHRoZSBpbml0aWFsaXplIGluIHNyaW92IGZvciBub3cKPiArICAgICAgICAqLwo+
ICsgICAgICAgaWYgKGFtZGdwdV9zcmlvdl92Zihwc3AtPmFkZXYpKQo+ICsgICAgICAgICAgICAg
ICByZXR1cm4gMDsKPiArCj4gKyAgICAgICBpZiAoIXBzcC0+YWRldi0+cHNwLnRhX3NlY3VyZWRp
c3BsYXlfdWNvZGVfc2l6ZSB8fAo+ICsgICAgICAgICAgICFwc3AtPmFkZXYtPnBzcC50YV9zZWN1
cmVkaXNwbGF5X3N0YXJ0X2FkZHIpIHsKPiArICAgICAgICAgICAgICAgZGV2X2luZm8ocHNwLT5h
ZGV2LT5kZXYsICJTRUNVUkVESVNQTEFZOiBzZWN1cmVkaXNwbGF5IHRhIHVjb2RlIGlzIG5vdCBh
dmFpbGFibGVcbiIpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gMDsKPiArICAgICAgIH0KPiAr
Cj4gKyAgICAgICBpZiAoIXBzcC0+c2VjdXJlZGlzcGxheV9jb250ZXh0LnNlY3VyZWRpc3BsYXlf
aW5pdGlhbGl6ZWQpIHsKPiArICAgICAgICAgICAgICAgcmV0ID0gcHNwX3NlY3VyZWRpc3BsYXlf
aW5pdF9zaGFyZWRfYnVmKHBzcCk7Cj4gKyAgICAgICAgICAgICAgIGlmIChyZXQpCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBy
ZXQgPSBwc3Bfc2VjdXJlZGlzcGxheV9sb2FkKHBzcCk7Cj4gKyAgICAgICBpZiAocmV0KQo+ICsg
ICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ICsKPiArICAgICAgIHBzcF9wcmVwX3NlY3VyZWRp
c3BsYXlfY21kX2J1Zihwc3AsICZzZWN1cmVkaXNwbGF5X2NtZCwKPiArICAgICAgICAgICAgICAg
ICAgICAgICBUQV9TRUNVUkVESVNQTEFZX0NPTU1BTkRfX1FVRVJZX1RBKTsKPiArCj4gKyAgICAg
ICByZXQgPSBwc3Bfc2VjdXJlZGlzcGxheV9pbnZva2UocHNwLCBUQV9TRUNVUkVESVNQTEFZX0NP
TU1BTkRfX1FVRVJZX1RBKTsKPiArICAgICAgIGlmIChyZXQpIHsKPiArICAgICAgICAgICAgICAg
cHNwX3NlY3VyZWRpc3BsYXlfdW5sb2FkKHBzcCk7Cj4gKwo+ICsgICAgICAgICAgICAgICBhbWRn
cHVfYm9fZnJlZV9rZXJuZWwoJnBzcC0+c2VjdXJlZGlzcGxheV9jb250ZXh0LnNlY3VyZWRpc3Bs
YXlfc2hhcmVkX2JvLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZwc3AtPnNlY3Vy
ZWRpc3BsYXlfY29udGV4dC5zZWN1cmVkaXNwbGF5X3NoYXJlZF9tY19hZGRyLAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZwc3AtPnNlY3VyZWRpc3BsYXlfY29udGV4dC5zZWN1cmVk
aXNwbGF5X3NoYXJlZF9idWYpOwo+ICsKPiArICAgICAgICAgICAgICAgcHNwLT5zZWN1cmVkaXNw
bGF5X2NvbnRleHQuc2VjdXJlZGlzcGxheV9pbml0aWFsaXplZCA9IGZhbHNlOwo+ICsKPiArICAg
ICAgICAgICAgICAgZGV2X2Vycihwc3AtPmFkZXYtPmRldiwgIlNFQ1VSRURJU1BMQVkgVEEgaW5p
dGlhbGl6ZSBmYWlsLlxuIik7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsg
ICAgICAgfQo+ICsKPiArICAgICAgIGlmIChzZWN1cmVkaXNwbGF5X2NtZC0+c3RhdHVzICE9IFRB
X1NFQ1VSRURJU1BMQVlfU1RBVFVTX19TVUNDRVNTKSB7Cj4gKyAgICAgICAgICAgICAgIHBzcF9z
ZWN1cmVkaXNwbGF5X3BhcnNlX3Jlc3Bfc3RhdHVzKHBzcCwgc2VjdXJlZGlzcGxheV9jbWQtPnN0
YXR1cyk7Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIocHNwLT5hZGV2LT5kZXYsICJTRUNVUkVE
SVNQTEFZOiBxdWVyeSBzZWN1cmVkaXNwbGF5IFRBIGZhaWxlZC4gcmV0IDB4JXhcbiIsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgc2VjdXJlZGlzcGxheV9jbWQtPnNlY3VyZWRpc3BsYXlfb3V0
X21lc3NhZ2UucXVlcnlfdGEucXVlcnlfY21kX3JldCk7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAg
ICAgcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgcHNwX3NlY3VyZWRpc3BsYXlfdGVy
bWluYXRlKHN0cnVjdCBwc3BfY29udGV4dCAqcHNwKQo+ICt7Cj4gKyAgICAgICBpbnQgcmV0Owo+
ICsKPiArICAgICAgIC8qCj4gKyAgICAgICAgKiBUT0RPOmJ5cGFzcyB0aGUgdGVybWluYXRlIGlu
IHNyaW92IGZvciBub3cKPiArICAgICAgICAqLwo+ICsgICAgICAgaWYgKGFtZGdwdV9zcmlvdl92
Zihwc3AtPmFkZXYpKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gMDsKPiArCj4gKyAgICAgICBp
ZiAoIXBzcC0+c2VjdXJlZGlzcGxheV9jb250ZXh0LnNlY3VyZWRpc3BsYXlfaW5pdGlhbGl6ZWQp
Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsKPiArICAgICAgIHJldCA9IHBzcF9zZWN1
cmVkaXNwbGF5X3VubG9hZChwc3ApOwo+ICsgICAgICAgaWYgKHJldCkKPiArICAgICAgICAgICAg
ICAgcmV0dXJuIHJldDsKPiArCj4gKyAgICAgICBwc3AtPnNlY3VyZWRpc3BsYXlfY29udGV4dC5z
ZWN1cmVkaXNwbGF5X2luaXRpYWxpemVkID0gZmFsc2U7Cj4gKwo+ICsgICAgICAgLyogZnJlZSBz
ZWN1cmVkaXNwbGF5IHNoYXJlZCBtZW1vcnkgKi8KPiArICAgICAgIGFtZGdwdV9ib19mcmVlX2tl
cm5lbCgmcHNwLT5zZWN1cmVkaXNwbGF5X2NvbnRleHQuc2VjdXJlZGlzcGxheV9zaGFyZWRfYm8s
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnBzcC0+c2VjdXJlZGlzcGxheV9jb250
ZXh0LnNlY3VyZWRpc3BsYXlfc2hhcmVkX21jX2FkZHIsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgJnBzcC0+c2VjdXJlZGlzcGxheV9jb250ZXh0LnNlY3VyZWRpc3BsYXlfc2hhcmVk
X2J1Zik7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArfQo+ICsKPiAraW50IHBzcF9zZWN1
cmVkaXNwbGF5X2ludm9rZShzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwgdWludDMyX3QgdGFfY21k
X2lkKQo+ICt7Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsKPiArICAgICAgIGlmICghcHNwLT5zZWN1
cmVkaXNwbGF5X2NvbnRleHQuc2VjdXJlZGlzcGxheV9pbml0aWFsaXplZCkKPiArICAgICAgICAg
ICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsgICAgICAgaWYgKHRhX2NtZF9pZCAhPSBUQV9T
RUNVUkVESVNQTEFZX0NPTU1BTkRfX1FVRVJZX1RBICYmCj4gKyAgICAgICAgICAgdGFfY21kX2lk
ICE9IFRBX1NFQ1VSRURJU1BMQVlfQ09NTUFORF9fU0VORF9ST0lfQ1JDKQo+ICsgICAgICAgICAg
ICAgICByZXR1cm4gLUVJTlZBTDsKPiArCj4gKyAgICAgICBtdXRleF9sb2NrKCZwc3AtPnNlY3Vy
ZWRpc3BsYXlfY29udGV4dC5tdXRleCk7Cj4gKwo+ICsgICAgICAgcmV0ID0gcHNwX3RhX2ludm9r
ZShwc3AsIHRhX2NtZF9pZCwgcHNwLT5zZWN1cmVkaXNwbGF5X2NvbnRleHQuc2Vzc2lvbl9pZCk7
Cj4gKwo+ICsgICAgICAgbXV0ZXhfdW5sb2NrKCZwc3AtPnNlY3VyZWRpc3BsYXlfY29udGV4dC5t
dXRleCk7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArfQo+ICsvKiBTRUNVUkVESVNQTEFZ
IGVuZCAqLwo+ICsKPiAgc3RhdGljIGludCBwc3BfaHdfc3RhcnQoc3RydWN0IHBzcF9jb250ZXh0
ICpwc3ApCj4gIHsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gcHNwLT5h
ZGV2Owo+IEBAIC0yMTE2LDYgKzIyOTAsMTEgQEAgc3RhdGljIGludCBwc3BfbG9hZF9mdyhzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgICAgICAgICAgICAgICAgaWYgKHJldCkKPiAgICAg
ICAgICAgICAgICAgICAgICAgICBkZXZfZXJyKHBzcC0+YWRldi0+ZGV2LAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIlJBUDogRmFpbGVkIHRvIGluaXRpYWxpemUgUkFQXG4iKTsK
PiArCj4gKyAgICAgICAgICAgICAgIHJldCA9IHBzcF9zZWN1cmVkaXNwbGF5X2luaXRpYWxpemUo
cHNwKTsKPiArICAgICAgICAgICAgICAgaWYgKHJldCkKPiArICAgICAgICAgICAgICAgICAgICAg
ICBkZXZfZXJyKHBzcC0+YWRldi0+ZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIlNFQ1VSRURJU1BMQVk6IEZhaWxlZCB0byBpbml0aWFsaXplIFNFQ1VSRURJU1BMQVlcbiIp
Owo+ICAgICAgICAgfQo+Cj4gICAgICAgICByZXR1cm4gMDsKPiBAQCAtMjE2Niw2ICsyMzQ1LDcg
QEAgc3RhdGljIGludCBwc3BfaHdfZmluaSh2b2lkICpoYW5kbGUpCj4KPiAgICAgICAgIGlmIChw
c3AtPmFkZXYtPnBzcC50YV9mdykgewo+ICAgICAgICAgICAgICAgICBwc3BfcmFzX3Rlcm1pbmF0
ZShwc3ApOwo+ICsgICAgICAgICAgICAgICBwc3Bfc2VjdXJlZGlzcGxheV90ZXJtaW5hdGUocHNw
KTsKPiAgICAgICAgICAgICAgICAgcHNwX3JhcF90ZXJtaW5hdGUocHNwKTsKPiAgICAgICAgICAg
ICAgICAgcHNwX2R0bV90ZXJtaW5hdGUocHNwKTsKPiAgICAgICAgICAgICAgICAgcHNwX2hkY3Bf
dGVybWluYXRlKHBzcCk7Cj4gQEAgLTIyMzAsNiArMjQxMCwxMSBAQCBzdGF0aWMgaW50IHBzcF9z
dXNwZW5kKHZvaWQgKmhhbmRsZSkKPiAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fRVJST1Io
IkZhaWxlZCB0byB0ZXJtaW5hdGUgcmFwIHRhXG4iKTsKPiAgICAgICAgICAgICAgICAgICAgICAg
ICByZXR1cm4gcmV0Owo+ICAgICAgICAgICAgICAgICB9Cj4gKyAgICAgICAgICAgICAgIHJldCA9
IHBzcF9zZWN1cmVkaXNwbGF5X3Rlcm1pbmF0ZShwc3ApOwo+ICsgICAgICAgICAgICAgICBpZiAo
cmV0KSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJGYWlsZWQgdG8gdGVy
bWluYXRlIHNlY3VyZWRpc3BsYXkgdGFcbiIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJl
dHVybiByZXQ7Cj4gKyAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPgo+ICAgICAgICAgcmV0
ID0gcHNwX2FzZF91bmxvYWQocHNwKTsKPiBAQCAtMjMxMyw2ICsyNDk4LDExIEBAIHN0YXRpYyBp
bnQgcHNwX3Jlc3VtZSh2b2lkICpoYW5kbGUpCj4gICAgICAgICAgICAgICAgIGlmIChyZXQpCj4g
ICAgICAgICAgICAgICAgICAgICAgICAgZGV2X2Vycihwc3AtPmFkZXYtPmRldiwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICJSQVA6IEZhaWxlZCB0byBpbml0aWFsaXplIFJBUFxu
Iik7Cj4gKwo+ICsgICAgICAgICAgICAgICByZXQgPSBwc3Bfc2VjdXJlZGlzcGxheV9pbml0aWFs
aXplKHBzcCk7Cj4gKyAgICAgICAgICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgZGV2X2Vycihwc3AtPmFkZXYtPmRldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICJTRUNVUkVESVNQTEFZOiBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBTRUNVUkVESVNQTEFZ
XG4iKTsKPiAgICAgICAgIH0KPgo+ICAgICAgICAgbXV0ZXhfdW5sb2NrKCZhZGV2LT5maXJtd2Fy
ZS5tdXRleCk7Cj4gQEAgLTI2MjAsNiArMjgxMCwxMSBAQCBzdGF0aWMgaW50IHBhcnNlX3RhX2Jp
bl9kZXNjcmlwdG9yKHN0cnVjdCBwc3BfY29udGV4dCAqcHNwLAo+ICAgICAgICAgICAgICAgICBw
c3AtPnRhX3JhcF91Y29kZV9zaXplICAgICA9IGxlMzJfdG9fY3B1KGRlc2MtPnNpemVfYnl0ZXMp
Owo+ICAgICAgICAgICAgICAgICBwc3AtPnRhX3JhcF9zdGFydF9hZGRyICAgICA9IHVjb2RlX3N0
YXJ0X2FkZHI7Cj4gICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgY2FzZSBUQV9GV19U
WVBFX1BTUF9TRUNVUkVESVNQTEFZOgo+ICsgICAgICAgICAgICAgICBwc3AtPnRhX3NlY3VyZWRp
c3BsYXlfdWNvZGVfdmVyc2lvbiAgPSBsZTMyX3RvX2NwdShkZXNjLT5md192ZXJzaW9uKTsKPiAr
ICAgICAgICAgICAgICAgcHNwLT50YV9zZWN1cmVkaXNwbGF5X3Vjb2RlX3NpemUgICAgID0gbGUz
Ml90b19jcHUoZGVzYy0+c2l6ZV9ieXRlcyk7Cj4gKyAgICAgICAgICAgICAgIHBzcC0+dGFfc2Vj
dXJlZGlzcGxheV9zdGFydF9hZGRyICAgICA9IHVjb2RlX3N0YXJ0X2FkZHI7Cj4gKyAgICAgICAg
ICAgICAgIGJyZWFrOwo+ICAgICAgICAgZGVmYXVsdDoKPiAgICAgICAgICAgICAgICAgZGV2X3dh
cm4ocHNwLT5hZGV2LT5kZXYsICJVbnN1cHBvcnRlZCBUQSB0eXBlOiAlZFxuIiwgZGVzYy0+Zndf
dHlwZSk7Cj4gICAgICAgICAgICAgICAgIGJyZWFrOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfcHNwLmgKPiBpbmRleCBkYTI1MGJjMWFjNTcuLmNiNTBiYTQ0NWY4YyAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmgKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmgKPiBAQCAtMzAsNiArMzAsNyBA
QAo+ICAjaW5jbHVkZSAidGFfeGdtaV9pZi5oIgo+ICAjaW5jbHVkZSAidGFfcmFzX2lmLmgiCj4g
ICNpbmNsdWRlICJ0YV9yYXBfaWYuaCIKPiArI2luY2x1ZGUgInRhX3NlY3VyZURpc3BsYXlfaWYu
aCIKPgo+ICAjZGVmaW5lIFBTUF9GRU5DRV9CVUZGRVJfU0laRSAgMHgxMDAwCj4gICNkZWZpbmUg
UFNQX0NNRF9CVUZGRVJfU0laRSAgICAweDEwMDAKPiBAQCAtNDAsNiArNDEsNyBAQAo+ICAjZGVm
aW5lIFBTUF9IRENQX1NIQVJFRF9NRU1fU0laRSAgICAgICAweDQwMDAKPiAgI2RlZmluZSBQU1Bf
RFRNX1NIQVJFRF9NRU1fU0laRSAgICAgICAgMHg0MDAwCj4gICNkZWZpbmUgUFNQX1JBUF9TSEFS
RURfTUVNX1NJWkUgICAgICAgIDB4NDAwMAo+ICsjZGVmaW5lIFBTUF9TRUNVUkVESVNQTEFZX1NI
QVJFRF9NRU1fU0laRSAgICAgIDB4NDAwMAo+ICAjZGVmaW5lIFBTUF9TSEFSRURfTUVNX1NJWkUg
ICAgICAgICAgICAweDQwMDAKPiAgI2RlZmluZSBQU1BfRldfTkFNRV9MRU4gICAgICAgICAgICAg
ICAgMHgyNAo+Cj4gQEAgLTE3MSw2ICsxNzMsMTUgQEAgc3RydWN0IHBzcF9yYXBfY29udGV4dCB7
Cj4gICAgICAgICBzdHJ1Y3QgbXV0ZXggICAgICAgICAgICBtdXRleDsKPiAgfTsKPgo+ICtzdHJ1
Y3QgcHNwX3NlY3VyZWRpc3BsYXlfY29udGV4dCB7Cj4gKyAgICAgICBib29sICAgICAgICAgICAg
ICAgICAgICBzZWN1cmVkaXNwbGF5X2luaXRpYWxpemVkOwo+ICsgICAgICAgdWludDMyX3QgICAg
ICAgICAgICAgICAgc2Vzc2lvbl9pZDsKPiArICAgICAgIHN0cnVjdCBhbWRncHVfYm8gICAgICAg
ICpzZWN1cmVkaXNwbGF5X3NoYXJlZF9ibzsKPiArICAgICAgIHVpbnQ2NF90ICAgICAgICAgICAg
ICAgIHNlY3VyZWRpc3BsYXlfc2hhcmVkX21jX2FkZHI7Cj4gKyAgICAgICB2b2lkICAgICAgICAg
ICAgICAgICAgICAqc2VjdXJlZGlzcGxheV9zaGFyZWRfYnVmOwo+ICsgICAgICAgc3RydWN0IG11
dGV4ICAgICAgICAgICAgbXV0ZXg7Cj4gK307Cj4gKwo+ICAjZGVmaW5lIE1FTV9UUkFJTl9TWVNU
RU1fU0lHTkFUVVJFICAgICAgICAgICAgIDB4NTQ1MzQ5NDIKPiAgI2RlZmluZSBHRERSNl9NRU1f
VFJBSU5JTkdfREFUQV9TSVpFX0lOX0JZVEVTICAweDEwMDAKPiAgI2RlZmluZSBHRERSNl9NRU1f
VFJBSU5JTkdfT0ZGU0VUICAgICAgICAgICAgICAweDgwMDAKPiBAQCAtMjk4LDEyICszMDksMTcg
QEAgc3RydWN0IHBzcF9jb250ZXh0Cj4gICAgICAgICB1aW50MzJfdCAgICAgICAgICAgICAgICAg
ICAgICAgIHRhX3JhcF91Y29kZV9zaXplOwo+ICAgICAgICAgdWludDhfdCAgICAgICAgICAgICAg
ICAgICAgICAgICAqdGFfcmFwX3N0YXJ0X2FkZHI7Cj4KPiArICAgICAgIHVpbnQzMl90ICAgICAg
ICAgICAgICAgICAgICAgICAgdGFfc2VjdXJlZGlzcGxheV91Y29kZV92ZXJzaW9uOwo+ICsgICAg
ICAgdWludDMyX3QgICAgICAgICAgICAgICAgICAgICAgICB0YV9zZWN1cmVkaXNwbGF5X3Vjb2Rl
X3NpemU7Cj4gKyAgICAgICB1aW50OF90ICAgICAgICAgICAgICAgICAgICAgICAgICp0YV9zZWN1
cmVkaXNwbGF5X3N0YXJ0X2FkZHI7Cj4gKwo+ICAgICAgICAgc3RydWN0IHBzcF9hc2RfY29udGV4
dCAgICAgICAgICBhc2RfY29udGV4dDsKPiAgICAgICAgIHN0cnVjdCBwc3BfeGdtaV9jb250ZXh0
ICAgICAgICAgeGdtaV9jb250ZXh0Owo+ICAgICAgICAgc3RydWN0IHBzcF9yYXNfY29udGV4dCAg
ICAgICAgICByYXM7Cj4gICAgICAgICBzdHJ1Y3QgcHNwX2hkY3BfY29udGV4dCAgICAgICAgIGhk
Y3BfY29udGV4dDsKPiAgICAgICAgIHN0cnVjdCBwc3BfZHRtX2NvbnRleHQgICAgICAgICAgZHRt
X2NvbnRleHQ7Cj4gICAgICAgICBzdHJ1Y3QgcHNwX3JhcF9jb250ZXh0ICAgICAgICAgIHJhcF9j
b250ZXh0Owo+ICsgICAgICAgc3RydWN0IHBzcF9zZWN1cmVkaXNwbGF5X2NvbnRleHQgICAgICAg
IHNlY3VyZWRpc3BsYXlfY29udGV4dDsKPiAgICAgICAgIHN0cnVjdCBtdXRleCAgICAgICAgICAg
ICAgICAgICAgbXV0ZXg7Cj4gICAgICAgICBzdHJ1Y3QgcHNwX21lbW9yeV90cmFpbmluZ19jb250
ZXh0IG1lbV90cmFpbl9jdHg7Cj4gIH07Cj4gQEAgLTM4MCw2ICszOTYsNyBAQCBpbnQgcHNwX3Jh
c190cmlnZ2VyX2Vycm9yKHN0cnVjdCBwc3BfY29udGV4dCAqcHNwLAo+ICBpbnQgcHNwX2hkY3Bf
aW52b2tlKHN0cnVjdCBwc3BfY29udGV4dCAqcHNwLCB1aW50MzJfdCB0YV9jbWRfaWQpOwo+ICBp
bnQgcHNwX2R0bV9pbnZva2Uoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsIHVpbnQzMl90IHRhX2Nt
ZF9pZCk7Cj4gIGludCBwc3BfcmFwX2ludm9rZShzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwgdWlu
dDMyX3QgdGFfY21kX2lkKTsKPiAraW50IHBzcF9zZWN1cmVkaXNwbGF5X2ludm9rZShzdHJ1Y3Qg
cHNwX2NvbnRleHQgKnBzcCwgdWludDMyX3QgdGFfY21kX2lkKTsKPgo+ICBpbnQgcHNwX3JsY19h
dXRvbG9hZF9zdGFydChzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCk7Cj4KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3NlY3VyZWRpc3BsYXkuYyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zZWN1cmVkaXNwbGF5LmMKPiBuZXcgZmlsZSBt
b2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAwMDAwMC4uNDU1OTc4NzgxMzgwCj4gLS0tIC9kZXYv
bnVsbAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zZWN1cmVkaXNw
bGF5LmMKPiBAQCAtMCwwICsxLDE3NCBAQAo+ICsvKgo+ICsgKiBDb3B5cmlnaHQgMjAyMCBBZHZh
bmNlZCBNaWNybyBEZXZpY2VzLCBJbmMuCj4gKyAqCj4gKyAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5
IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCj4gKyAq
IGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVz
ICh0aGUgIlNvZnR3YXJlIiksCj4gKyAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQg
cmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KPiArICogdGhlIHJpZ2h0
cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1Ymxp
Y2Vuc2UsCj4gKyAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBw
ZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQo+ICsgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8g
ZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgo+ICsgKgo+ICsgKiBU
aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFs
bCBiZSBpbmNsdWRlZCBpbgo+ICsgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25z
IG9mIHRoZSBTb2Z0d2FyZS4KPiArICoKPiArICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJB
UyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKPiArICogSU1Q
TElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJD
SEFOVEFCSUxJVFksCj4gKyAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBO
T05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTAo+ICsgKiBUSEUgQ09QWVJJR0hUIEhP
TERFUihTKSBPUiBBVVRIT1IoUykgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IK
PiArICogT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwg
VE9SVCBPUiBPVEhFUldJU0UsCj4gKyAqIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5F
Q1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUgo+ICsgKiBPVEhFUiBERUFMSU5H
UyBJTiBUSEUgU09GVFdBUkUuCj4gKyAqCj4gKyAqCj4gKyAqLwo+ICsjaW5jbHVkZSA8bGludXgv
ZGVidWdmcy5oPgo+ICsjaW5jbHVkZSA8bGludXgvcG1fcnVudGltZS5oPgo+ICsKPiArI2luY2x1
ZGUgImFtZGdwdS5oIgo+ICsjaW5jbHVkZSAiYW1kZ3B1X3NlY3VyZWRpc3BsYXkuaCIKPiArCj4g
Ky8qKgo+ICsgKiBET0M6IEFNREdQVSBTRUNVUkVESVNQTEFZIGRlYnVnZnMgdGVzdCBpbnRlcmZh
Y2UKPiArICoKPiArICogaG93IHRvIHVzZT8KPiArICogZWNobyBvcGNvZGUgPHZhbHVlPiA+IDxk
ZWJ1Z2ZzX2Rpcj4vZHJpL3h4eC9zZWN1cmVkaXNwbGF5X3Rlc3QKPiArICogZWcuIGVjaG8gMSA+
IDxkZWJ1Z2ZzX2Rpcj4vZHJpL3h4eC9zZWN1cmVkaXNwbGF5X3Rlc3QKPiArICogZWcuIGVjaG8g
MiBwaHlfaWQgPiA8ZGVidWdmc19kaXI+L2RyaS94eHgvc2VjdXJlZGlzcGxheV90ZXN0Cj4gKyAq
Cj4gKyAqIG9wY29kZToKPiArICogMe+8mlF1ZXJ5IHdoZXRoZXIgVEEgaXMgcmVzcG9uZGluZyB1
c2VkIG9ubHkgZm9yIHZhbGlkYXRpb24gcHVwb3NlCj4gKyAqIDI6IFNlbmQgcmVnaW9uIG9mIElu
dGVyZXN0IGFuZCBDUkMgdmFsdWUgdG8gSTJDLiAodWludDMyKXBoeV9pZCBpcwo+ICsgKiBzZW5k
IHRvIGRldGVybWluZSB3aGljaCBESU8gc2NyYXRjaCByZWdpc3RlciBzaG91bGQgYmUgdXNlZCB0
byBnZXQKPiArICogUk9JIGFuZCByZWNlaXZlIGkyY19idWYgYXMgdGhlIG91dHB1dC4KPiArICoK
PiArICogWW91IGNhbiByZWZlciBtb3JlIGRldGFpbCBmcm9tIGhlYWRlciBmaWxlIHRhX3NlY3Vy
ZWRpc3BsYXlfaWYuaAo+ICsgKgo+ICsgKi8KPiArCj4gK3ZvaWQgcHNwX3NlY3VyZWRpc3BsYXlf
cGFyc2VfcmVzcF9zdGF0dXMoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCj4gKyAgICAgICBlbnVt
IHRhX3NlY3VyZWRpc3BsYXlfc3RhdHVzIHN0YXR1cykKPiArewo+ICsgICAgICAgc3dpdGNoIChz
dGF0dXMpIHsKPiArICAgICAgIGNhc2UgVEFfU0VDVVJFRElTUExBWV9TVEFUVVNfX1NVQ0NFU1M6
Cj4gKyAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgY2FzZSBUQV9TRUNVUkVESVNQTEFZ
X1NUQVRVU19fR0VORVJJQ19GQUlMVVJFOgo+ICsgICAgICAgICAgICAgICBkZXZfZXJyKHBzcC0+
YWRldi0+ZGV2LCAiU2VjdXJlIGRpc3BsYXk6IEdlbmVyaWMgRmFpbHVyZS4iKTsKPiArICAgICAg
ICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICBjYXNlIFRBX1NFQ1VSRURJU1BMQVlfU1RBVFVTX19J
TlZBTElEX1BBUkFNRVRFUjoKPiArICAgICAgICAgICAgICAgZGV2X2Vycihwc3AtPmFkZXYtPmRl
diwgIlNlY3VyZSBkaXNwbGF5OiBJbnZhbGlkIFBhcmFtZXRlci4iKTsKPiArICAgICAgICAgICAg
ICAgYnJlYWs7Cj4gKyAgICAgICBjYXNlIFRBX1NFQ1VSRURJU1BMQVlfU1RBVFVTX19OVUxMX1BP
SU5URVI6Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIocHNwLT5hZGV2LT5kZXYsICJTZWN1cmUg
ZGlzcGxheTogTnVsbCBQb2ludGVyLiIpOwo+ICsgICAgICAgICAgICAgICBicmVhazsKPiArICAg
ICAgIGNhc2UgVEFfU0VDVVJFRElTUExBWV9TVEFUVVNfX0kyQ19XUklURV9FUlJPUjoKPiArICAg
ICAgICAgICAgICAgZGV2X2Vycihwc3AtPmFkZXYtPmRldiwgIlNlY3VyZSBkaXNwbGF5OiBGYWls
ZWQgdG8gd3JpdGUgdG8gSTJDLiIpOwo+ICsgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAg
IGNhc2UgVEFfU0VDVVJFRElTUExBWV9TVEFUVVNfX1JFQURfRElPX1NDUkFUQ0hfRVJST1I6Cj4g
KyAgICAgICAgICAgICAgIGRldl9lcnIocHNwLT5hZGV2LT5kZXYsICJTZWN1cmUgZGlzcGxheTog
RmFpbGVkIHRvIFJlYWQgRElPIFNjcmF0Y2ggUmVnaXN0ZXIuIik7Cj4gKyAgICAgICAgICAgICAg
IGJyZWFrOwo+ICsgICAgICAgY2FzZSBUQV9TRUNVUkVESVNQTEFZX1NUQVRVU19fUkVBRF9DUkNf
RVJST1I6Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIocHNwLT5hZGV2LT5kZXYsICJTZWN1cmUg
ZGlzcGxheTogRmFpbGVkIHRvIFJlYWQgQ1JDIik7Cj4gKyAgICAgICAgICAgICAgIGJyZWFrOwo+
ICsgICAgICAgZGVmYXVsdDoKPiArICAgICAgICAgICAgICAgZGV2X2Vycihwc3AtPmFkZXYtPmRl
diwgIlNlY3VyZSBkaXNwbGF5OiBGYWlsZWQgdG8gcGFyc2Ugc3RhdHVzOiAlZFxuIiwgc3RhdHVz
KTsKPiArICAgICAgIH0KPiArfQo+ICsKPiArdm9pZCBwc3BfcHJlcF9zZWN1cmVkaXNwbGF5X2Nt
ZF9idWYoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsIHN0cnVjdCBzZWN1cmVkaXNwbGF5X2NtZCAq
KmNtZCwKPiArICAgICAgIGVudW0gdGFfc2VjdXJlZGlzcGxheV9jb21tYW5kIGNvbW1hbmRfaWQp
Cj4gK3sKPiArICAgICAgICpjbWQgPSAoc3RydWN0IHNlY3VyZWRpc3BsYXlfY21kICopcHNwLT5z
ZWN1cmVkaXNwbGF5X2NvbnRleHQuc2VjdXJlZGlzcGxheV9zaGFyZWRfYnVmOwo+ICsgICAgICAg
bWVtc2V0KCpjbWQsIDAsIHNpemVvZihzdHJ1Y3Qgc2VjdXJlZGlzcGxheV9jbWQpKTsKPiArICAg
ICAgICgqY21kKS0+c3RhdHVzID0gVEFfU0VDVVJFRElTUExBWV9TVEFUVVNfX0dFTkVSSUNfRkFJ
TFVSRTsKPiArICAgICAgICgqY21kKS0+Y21kX2lkID0gY29tbWFuZF9pZDsKPiArfQo+ICsKPiAr
c3RhdGljIHNzaXplX3QgYW1kZ3B1X3NlY3VyZWRpc3BsYXlfZGVidWdmc193cml0ZShzdHJ1Y3Qg
ZmlsZSAqZiwgY29uc3QgY2hhciBfX3VzZXIgKmJ1ZiwKPiArICAgICAgICAgICAgICAgc2l6ZV90
IHNpemUsIGxvZmZfdCAqcG9zKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqKWZpbGVfaW5vZGUoZiktPmlfcHJpdmF0ZTsK
PiArICAgICAgIHN0cnVjdCBwc3BfY29udGV4dCAqcHNwID0gJmFkZXYtPnBzcDsKPiArICAgICAg
IHN0cnVjdCBzZWN1cmVkaXNwbGF5X2NtZCAqc2VjdXJlZGlzcGxheV9jbWQ7Cj4gKyAgICAgICBz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gYWRldl90b19kcm0oYWRldik7Cj4gKyAgICAgICB1aW50
MzJfdCBwaHlfaWQ7Cj4gKyAgICAgICB1aW50MzJfdCBvcDsKPiArICAgICAgIGludCBpOwo+ICsg
ICAgICAgY2hhciBzdHJbNjRdOwo+ICsgICAgICAgY2hhciBpMmNfb3V0cHV0WzI1Nl07Cj4gKyAg
ICAgICBpbnQgcmV0Owo+ICsKPiArICAgICAgIGlmICgqcG9zIHx8IHNpemUgPiBzaXplb2Yoc3Ry
KSAtIDEpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsKPiArICAgICAgIG1l
bXNldChzdHIsICAwLCBzaXplb2Yoc3RyKSk7Cj4gKyAgICAgICBjb3B5X2Zyb21fdXNlcihzdHIs
IGJ1Ziwgc2l6ZSk7CgpZb3UgbmVlZCB0byBjaGVjayB0aGUgcmV0dXJuIHZhbHVlIGZyb20gY29w
eV9mcm9tX3VzZXIoKSwgb3RoZXJ3aXNlLAp5b3UnbGwgZ2V0IGEgd2FybmluZy4KCkFsZXgKCgo+
ICsKPiArICAgICAgIHJldCA9IHBtX3J1bnRpbWVfZ2V0X3N5bmMoZGV2LT5kZXYpOwo+ICsgICAg
ICAgaWYgKHJldCA8IDApIHsKPiArICAgICAgICAgICAgICAgcG1fcnVudGltZV9wdXRfYXV0b3N1
c3BlbmQoZGV2LT5kZXYpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ICsgICAgICAg
fQo+ICsKPiArICAgICAgIGlmIChzaXplIDwgMykKPiArICAgICAgICAgICAgICAgc3NjYW5mKHN0
ciwgIiV1ICIsICZvcCk7Cj4gKyAgICAgICBlbHNlCj4gKyAgICAgICAgICAgICAgIHNzY2FuZihz
dHIsICIldSAldSIsICZvcCwgJnBoeV9pZCk7Cj4gKwo+ICsgICAgICAgc3dpdGNoIChvcCkgewo+
ICsgICAgICAgY2FzZSAxOgo+ICsgICAgICAgICAgICAgICBwc3BfcHJlcF9zZWN1cmVkaXNwbGF5
X2NtZF9idWYocHNwLCAmc2VjdXJlZGlzcGxheV9jbWQsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgVEFfU0VDVVJFRElTUExBWV9DT01NQU5EX19RVUVSWV9UQSk7Cj4gKyAgICAgICAgICAgICAg
IHJldCA9IHBzcF9zZWN1cmVkaXNwbGF5X2ludm9rZShwc3AsIFRBX1NFQ1VSRURJU1BMQVlfQ09N
TUFORF9fUVVFUllfVEEpOwo+ICsgICAgICAgICAgICAgICBpZiAoIXJldCkgewo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGlmIChzZWN1cmVkaXNwbGF5X2NtZC0+c3RhdHVzID09IFRBX1NFQ1VS
RURJU1BMQVlfU1RBVFVTX19TVUNDRVNTKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZGV2X2luZm8oYWRldi0+ZGV2LCAiU0VDVVJFRElTUExBWTogcXVlcnkgc2VjdXJlZGlzcGxh
eSBUQSByZXQgaXMgMHglWFxuIiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VjdXJlZGlzcGxheV9jbWQtPnNlY3VyZWRpc3BsYXlfb3V0X21lc3NhZ2UucXVlcnlf
dGEucXVlcnlfY21kX3JldCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZWxzZQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcHNwX3NlY3VyZWRpc3BsYXlfcGFyc2VfcmVzcF9z
dGF0dXMocHNwLCBzZWN1cmVkaXNwbGF5X2NtZC0+c3RhdHVzKTsKPiArICAgICAgICAgICAgICAg
fQo+ICsgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgIGNhc2UgMjoKPiArICAgICAgICAg
ICAgICAgcHNwX3ByZXBfc2VjdXJlZGlzcGxheV9jbWRfYnVmKHBzcCwgJnNlY3VyZWRpc3BsYXlf
Y21kLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIFRBX1NFQ1VSRURJU1BMQVlfQ09NTUFORF9f
U0VORF9ST0lfQ1JDKTsKPiArICAgICAgICAgICAgICAgc2VjdXJlZGlzcGxheV9jbWQtPnNlY3Vy
ZWRpc3BsYXlfaW5fbWVzc2FnZS5zZW5kX3JvaV9jcmMucGh5X2lkID0gcGh5X2lkOwo+ICsgICAg
ICAgICAgICAgICByZXQgPSBwc3Bfc2VjdXJlZGlzcGxheV9pbnZva2UocHNwLCBUQV9TRUNVUkVE
SVNQTEFZX0NPTU1BTkRfX1NFTkRfUk9JX0NSQyk7Cj4gKyAgICAgICAgICAgICAgIGlmICghcmV0
KSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY3VyZWRpc3BsYXlfY21kLT5zdGF0
dXMgPT0gVEFfU0VDVVJFRElTUExBWV9TVEFUVVNfX1NVQ0NFU1MpIHsKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG1lbXNldChpMmNfb3V0cHV0LCAgMCwgc2l6ZW9mKGkyY19vdXRw
dXQpKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBU
QV9TRUNVUkVESVNQTEFZX0kyQ19CVUZGRVJfU0laRTsgaSsrKQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzcHJpbnRmKGkyY19vdXRwdXQsICIlcyAweCVYIiwgaTJj
X291dHB1dCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzZWN1cmVkaXNwbGF5X2NtZC0+c2VjdXJlZGlzcGxheV9vdXRfbWVzc2FnZS5zZW5kX3JvaV9j
cmMuaTJjX2J1ZltpXSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZfaW5m
byhhZGV2LT5kZXYsICJTRUNVUkVESVNQTEFZOiBJMkMgYnVmZmVyIG91dCBwdXQgaXMgOiVzXG4i
LCBpMmNfb3V0cHV0KTsKPiArICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugewo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcHNwX3NlY3VyZWRpc3BsYXlfcGFyc2VfcmVzcF9z
dGF0dXMocHNwLCBzZWN1cmVkaXNwbGF5X2NtZC0+c3RhdHVzKTsKPiArICAgICAgICAgICAgICAg
ICAgICAgICB9Cj4gKyAgICAgICAgICAgICAgIH0KPiArICAgICAgICAgICAgICAgYnJlYWs7Cj4g
KyAgICAgICBkZWZhdWx0Ogo+ICsgICAgICAgICAgICAgICBkZXZfZXJyKGFkZXYtPmRldiwgIklu
dmFsaWQgaW5wdXQ6ICVzXG4iLCBzdHIpOwo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIHBtX3J1
bnRpbWVfbWFya19sYXN0X2J1c3koZGV2LT5kZXYpOwo+ICsgICAgICAgcG1fcnVudGltZV9wdXRf
YXV0b3N1c3BlbmQoZGV2LT5kZXYpOwo+ICsKPiArICAgICAgIHJldHVybiBzaXplOwo+ICt9Cj4g
Kwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyBhbWRncHVfc2VjdXJlZGlz
cGxheV9kZWJ1Z2ZzX29wcyA9IHsKPiArICAgICAgIC5vd25lciA9IFRISVNfTU9EVUxFLAo+ICsg
ICAgICAgLnJlYWQgPSBOVUxMLAo+ICsgICAgICAgLndyaXRlID0gYW1kZ3B1X3NlY3VyZWRpc3Bs
YXlfZGVidWdmc193cml0ZSwKPiArICAgICAgIC5sbHNlZWsgPSBkZWZhdWx0X2xsc2Vlawo+ICt9
Owo+ICsKPiArdm9pZCBhbWRncHVfc2VjdXJlZGlzcGxheV9kZWJ1Z2ZzX2luaXQoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCj4gK3sKPiArI2lmIGRlZmluZWQoQ09ORklHX0RFQlVHX0ZTKQo+
ICsKPiArICAgICAgIGlmICghYWRldi0+cHNwLnNlY3VyZWRpc3BsYXlfY29udGV4dC5zZWN1cmVk
aXNwbGF5X2luaXRpYWxpemVkKQo+ICsgICAgICAgICAgICAgICByZXR1cm47Cj4gKwo+ICsgICAg
ICAgZGVidWdmc19jcmVhdGVfZmlsZSgic2VjdXJlZGlzcGxheV90ZXN0IiwgU19JV1VTUiwgYWRl
dl90b19kcm0oYWRldiktPnByaW1hcnktPmRlYnVnZnNfcm9vdCwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGFkZXYsICZhbWRncHVfc2VjdXJlZGlzcGxheV9kZWJ1Z2ZzX29wcyk7
Cj4gKyNlbmRpZgo+ICt9Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9zZWN1cmVkaXNwbGF5LmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfc2VjdXJlZGlzcGxheS5oCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAw
MDAwMDAuLjk4MzQ0NmM3MjUyMAo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfc2VjdXJlZGlzcGxheS5oCj4gQEAgLTAsMCArMSwzNiBAQAo+
ICsvKgo+ICsgKiBDb3B5cmlnaHQgMjAyMCBBZHZhbmNlZCBNaWNybyBEZXZpY2VzLCBJbmMuCj4g
KyAqCj4gKyAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0
byBhbnkgcGVyc29uIG9idGFpbmluZyBhCj4gKyAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQg
YXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCj4gKyAqIHRv
IGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRo
b3V0IGxpbWl0YXRpb24KPiArICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVy
Z2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCj4gKyAqIGFuZC9vciBzZWxsIGNv
cGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQo+
ICsgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxv
d2luZyBjb25kaXRpb25zOgo+ICsgKgo+ICsgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBh
bmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgo+ICsgKiBhbGwg
Y29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KPiArICoKPiAr
ICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0Yg
QU5ZIEtJTkQsIEVYUFJFU1MgT1IKPiArICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElN
SVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCj4gKyAqIEZJVE5FU1Mg
Rk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVO
VCBTSEFMTAo+ICsgKiBUSEUgQ09QWVJJR0hUIEhPTERFUihTKSBPUiBBVVRIT1IoUykgQkUgTElB
QkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IKPiArICogT1RIRVIgTElBQklMSVRZLCBXSEVU
SEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsCj4gKyAqIEFS
SVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1Ig
VEhFIFVTRSBPUgo+ICsgKiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCj4gKyAqCj4g
KyAqCj4gKyAqLwo+ICsjaWZuZGVmIF9BTURHUFVfU0VDVVJFRElTUExBWV9ICj4gKyNkZWZpbmUg
X0FNREdQVV9TRUNVUkVESVNQTEFZX0gKPiArCj4gKyNpbmNsdWRlICJhbWRncHUuaCIKPiArI2lu
Y2x1ZGUgInRhX3NlY3VyZURpc3BsYXlfaWYuaCIKPiArCj4gK3ZvaWQgYW1kZ3B1X3NlY3VyZWRp
c3BsYXlfZGVidWdmc19pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiArdm9pZCBw
c3Bfc2VjdXJlZGlzcGxheV9wYXJzZV9yZXNwX3N0YXR1cyhzdHJ1Y3QgcHNwX2NvbnRleHQgKnBz
cCwKPiArICAgICAgICAgICAgICAgZW51bSB0YV9zZWN1cmVkaXNwbGF5X3N0YXR1cyBzdGF0dXMp
Owo+ICt2b2lkIHBzcF9wcmVwX3NlY3VyZWRpc3BsYXlfY21kX2J1ZihzdHJ1Y3QgcHNwX2NvbnRl
eHQgKnBzcCwgc3RydWN0IHNlY3VyZWRpc3BsYXlfY21kICoqY21kLAo+ICsgICAgICAgICAgICAg
ICBlbnVtIHRhX3NlY3VyZWRpc3BsYXlfY29tbWFuZCBjb21tYW5kX2lkKTsKPiArCj4gKyNlbmRp
Zgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdWNvZGUu
aCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91Y29kZS5oCj4gaW5kZXggMGU0
M2I0NmQzYWI1Li40NjQ0OWU3MDM0OGIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3Vjb2RlLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfdWNvZGUuaAo+IEBAIC0xMjIsNiArMTIyLDkgQEAgc3RydWN0IHRhX2Zpcm13YXJl
X2hlYWRlcl92MV8wIHsKPiAgICAgICAgIHVpbnQzMl90IHRhX2R0bV91Y29kZV92ZXJzaW9uOwo+
ICAgICAgICAgdWludDMyX3QgdGFfZHRtX29mZnNldF9ieXRlczsKPiAgICAgICAgIHVpbnQzMl90
IHRhX2R0bV9zaXplX2J5dGVzOwo+ICsgICAgICAgdWludDMyX3QgdGFfc2VjdXJlZGlzcGxheV91
Y29kZV92ZXJzaW9uOwo+ICsgICAgICAgdWludDMyX3QgdGFfc2VjdXJlZGlzcGxheV9vZmZzZXRf
Ynl0ZXM7Cj4gKyAgICAgICB1aW50MzJfdCB0YV9zZWN1cmVkaXNwbGF5X3NpemVfYnl0ZXM7Cj4g
IH07Cj4KPiAgZW51bSB0YV9md190eXBlIHsKPiBAQCAtMTMyLDYgKzEzNSw3IEBAIGVudW0gdGFf
ZndfdHlwZSB7Cj4gICAgICAgICBUQV9GV19UWVBFX1BTUF9IRENQLAo+ICAgICAgICAgVEFfRldf
VFlQRV9QU1BfRFRNLAo+ICAgICAgICAgVEFfRldfVFlQRV9QU1BfUkFQLAo+ICsgICAgICAgVEFf
RldfVFlQRV9QU1BfU0VDVVJFRElTUExBWSwKPiAgfTsKPgo+ICBzdHJ1Y3QgdGFfZndfYmluX2Rl
c2Mgewo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjEwXzAu
YyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTBfMC5jCj4gaW5kZXggZDdmOTI2
MzRlYmEyLi40YjFjYzVlOWVlOTIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvcHNwX3YxMF8wLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3Bf
djEwXzAuYwo+IEBAIC05Miw4ICs5Miw2IEBAIHN0YXRpYyBpbnQgcHNwX3YxMF8wX2luaXRfbWlj
cm9jb2RlKHN0cnVjdCBwc3BfY29udGV4dCAqcHNwKQo+ICAgICAgICAgICAgICAgICAgICAgICAg
ICh1aW50OF90ICopdGFfaGRyICsKPiAgICAgICAgICAgICAgICAgICAgICAgICBsZTMyX3RvX2Nw
dSh0YV9oZHItPmhlYWRlci51Y29kZV9hcnJheV9vZmZzZXRfYnl0ZXMpOwo+Cj4gLSAgICAgICAg
ICAgICAgIGFkZXYtPnBzcC50YV9md192ZXJzaW9uID0gbGUzMl90b19jcHUodGFfaGRyLT5oZWFk
ZXIudWNvZGVfdmVyc2lvbik7Cj4gLQo+ICAgICAgICAgICAgICAgICBhZGV2LT5wc3AudGFfZHRt
X3Vjb2RlX3ZlcnNpb24gPQo+ICAgICAgICAgICAgICAgICAgICAgICAgIGxlMzJfdG9fY3B1KHRh
X2hkci0+dGFfZHRtX3Vjb2RlX3ZlcnNpb24pOwo+ICAgICAgICAgICAgICAgICBhZGV2LT5wc3Au
dGFfZHRtX3Vjb2RlX3NpemUgPQo+IEBAIC0xMDEsNiArOTksMTYgQEAgc3RhdGljIGludCBwc3Bf
djEwXzBfaW5pdF9taWNyb2NvZGUoc3RydWN0IHBzcF9jb250ZXh0ICpwc3ApCj4gICAgICAgICAg
ICAgICAgIGFkZXYtPnBzcC50YV9kdG1fc3RhcnRfYWRkciA9Cj4gICAgICAgICAgICAgICAgICAg
ICAgICAgKHVpbnQ4X3QgKilhZGV2LT5wc3AudGFfaGRjcF9zdGFydF9hZGRyICsKPiAgICAgICAg
ICAgICAgICAgICAgICAgICBsZTMyX3RvX2NwdSh0YV9oZHItPnRhX2R0bV9vZmZzZXRfYnl0ZXMp
Owo+ICsKPiArICAgICAgICAgICAgICAgYWRldi0+cHNwLnRhX3NlY3VyZWRpc3BsYXlfdWNvZGVf
dmVyc2lvbiA9Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgbGUzMl90b19jcHUodGFfaGRyLT50
YV9zZWN1cmVkaXNwbGF5X3Vjb2RlX3ZlcnNpb24pOwo+ICsgICAgICAgICAgICAgICBhZGV2LT5w
c3AudGFfc2VjdXJlZGlzcGxheV91Y29kZV9zaXplID0KPiArICAgICAgICAgICAgICAgICAgICAg
ICBsZTMyX3RvX2NwdSh0YV9oZHItPnRhX3NlY3VyZWRpc3BsYXlfc2l6ZV9ieXRlcyk7Cj4gKyAg
ICAgICAgICAgICAgIGFkZXYtPnBzcC50YV9zZWN1cmVkaXNwbGF5X3N0YXJ0X2FkZHIgPQo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICh1aW50OF90ICopYWRldi0+cHNwLnRhX2hkY3Bfc3RhcnRf
YWRkciArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgbGUzMl90b19jcHUodGFfaGRyLT50YV9z
ZWN1cmVkaXNwbGF5X29mZnNldF9ieXRlcyk7Cj4gKwo+ICsgICAgICAgICAgICAgICBhZGV2LT5w
c3AudGFfZndfdmVyc2lvbiA9IGxlMzJfdG9fY3B1KHRhX2hkci0+aGVhZGVyLnVjb2RlX3ZlcnNp
b24pOwo+ICAgICAgICAgfQo+Cj4gICAgICAgICByZXR1cm4gMDsKPiAtLQo+IDIuMTcuMQo+Cj4g
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBhbWQtZ2Z4
IG1haWxpbmcgbGlzdAo+IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0
CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeAo=
