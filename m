Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 187FDAD6F7
	for <lists+amd-gfx@lfdr.de>; Mon,  9 Sep 2019 12:36:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9F5C589B61;
	Mon,  9 Sep 2019 10:36:46 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM05-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr720049.outbound.protection.outlook.com [40.107.72.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6F7A589B61
 for <amd-gfx@lists.freedesktop.org>; Mon,  9 Sep 2019 10:36:45 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=JZUrUZGTchNaTiddgi7payGtza7QawP2MiaSdZ15UbBm5Db3D/na7b4kRrOpxD7zAq1yeMjf/FgjcXk4hGQk9aiPvbkNmnYOJjY0FSOV2igX0k5tGLGIxWNkoHLC0gelI/1j4argreTjba/uK4sKoxCn31atG3ZYApX2ApKYosHraVjLtiq1QHERo++AVikwhgAbkjlN5WIPqramo+HnsQIPyaeCuA2SD1k6+72wttmADbcPFMgXNT8K/PIXRmJM7FbY8MFaLr9XMtQzMuDH68JjBLWiVWTvvlNHVIBARcJmK2WxOJQRCfcqlOxVB1aoUwIzo9/lK4X66gV8OxJHQw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=APwCTiOo3V4+lpRgnikQl5sOSNCMZw2Rv71gvfQEA2g=;
 b=Vzo7VUyxSbtlfHuRiQS9SyeRWon8Thh0UrUTLDDtxHiKo0FfxFt1nX3XsM0Cw2vBO6lbJ91xunRC9yw5YKovPeCwNy1Sji5g/TJtZf1eaXnWUgmUCaiemMoguv29kyJgMXGnZTLE35T2/1WVAhhkvrM+mA4S/o3H1uJRzySspn8mmztj3Mz31ZRKqhdxpxLliCYA3wBQOfkks5UWvwQvtb++S7ZffuCqsVxe9ReJVjGfZVSWlF/Q+EHTaOWdjjEyCxNDWhGYUFJl/B+bSZN34FF7K27LWXhH0HmzbNotuZ44kz8SxPtEyTzwatfGBdFjQ0TmatrtpfWsfK6aStVJfQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB3056.namprd12.prod.outlook.com (20.178.242.143) by
 MN2PR12MB2910.namprd12.prod.outlook.com (20.179.81.219) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2241.15; Mon, 9 Sep 2019 10:36:43 +0000
Received: from MN2PR12MB3056.namprd12.prod.outlook.com
 ([fe80::10e6:34bc:237d:3bd5]) by MN2PR12MB3056.namprd12.prod.outlook.com
 ([fe80::10e6:34bc:237d:3bd5%4]) with mapi id 15.20.2241.018; Mon, 9 Sep 2019
 10:36:43 +0000
From: <jianzh@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: [PATCH] drm/amdgpu: Add SRIOV mailbox backend for Navi1x
Thread-Topic: [PATCH] drm/amdgpu: Add SRIOV mailbox backend for Navi1x
Thread-Index: AQHVZvp4BwVxbGJoj0G0snTuvCT23g==
Date: Mon, 9 Sep 2019 10:36:43 +0000
Message-ID: <20190909103534.8360-1-jianzh@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: HK0PR03CA0045.apcprd03.prod.outlook.com
 (2603:1096:203:2f::33) To MN2PR12MB3056.namprd12.prod.outlook.com
 (2603:10b6:208:ca::15)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.20.1
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 6a3ef027-a7e0-42e1-9906-08d735119b16
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:MN2PR12MB2910; 
x-ms-traffictypediagnostic: MN2PR12MB2910:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <MN2PR12MB29100575BD9976AAC0F74C13E1B70@MN2PR12MB2910.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:10000;
x-forefront-prvs: 01559F388D
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(396003)(346002)(376002)(366004)(136003)(189003)(199004)(66946007)(2501003)(1076003)(15650500001)(66556008)(66476007)(14454004)(52116002)(3846002)(6116002)(66446008)(50226002)(99286004)(64756008)(2906002)(7736002)(8676002)(305945005)(478600001)(316002)(2351001)(14444005)(71200400001)(71190400001)(256004)(81156014)(66066001)(81166006)(6436002)(186003)(5640700003)(26005)(102836004)(476003)(486006)(4326008)(386003)(30864003)(8936002)(25786009)(5660300002)(6512007)(36756003)(53936002)(6916009)(2616005)(6486002)(6506007)(32563001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB2910;
 H:MN2PR12MB3056.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: 3h9I62gqSTkbDjC3Xq90xpzCEld3r/eIo/msYqj0ZCQeYb2X+Ocas7XUtbuK4HnCFrl//xAhe+w0aBwbPP0WBo3qytzYQfdQiYbjdtV2zFx0m3BXf+/FqRtsk9/rP9VbBNJu2TuFlywOZyd/bq/3npcXeFRgoHEEYytU8wRd5SmusCxpk69JCfekyQJF7735wt7cWXBi3xfCHLNadwidkTmLAF7Kk2kbJrxYEVsuR47fvZrKMxg1Ir5kYzZ663oJmC1HwOX2eo+Sl/ACBFZF5RccJ3uJL+IfEUfqQz2ZTcyE+l8ULEH6RW3VHFS4+0NDlOlag5RVCOuluUraDvUlSfKXJmcvWqS2yUxJHKS+k+mYwGDPCuwC0n6ehq8nUZpneXihVsL+nURbFkgLFQwxwgamhMxyvcqDSZ3SxbKt9XQ=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 6a3ef027-a7e0-42e1-9906-08d735119b16
X-MS-Exchange-CrossTenant-originalarrivaltime: 09 Sep 2019 10:36:43.1778 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: evtLGIyavEsj6XZVfFvahTlw/3J5LLlGCsiYF3xKKNgn0wThmK/z3xfPWe/j6ptm
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB2910
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=APwCTiOo3V4+lpRgnikQl5sOSNCMZw2Rv71gvfQEA2g=;
 b=NL6DMObiYbqHnvIZaH1BWTB4xo25QDPexpw1XVokK9MtXK6bA9VPsJqW35yl1nUOL6oVMpgiInEC5NUYOpFCALKTlid3a2DxmuunPO75dnv2HiT1EApjjxVzRKVKWMunfKPQG8XJabm1JhixDoxgxWCb3ei+pJfo/Zci4Jx7YjA=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Jiange.Zhao@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Zhao, Jiange" <Jiange.Zhao@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogSmlhbmdlIFpoYW8gPEppYW5nZS5aaGFvQGFtZC5jb20+CgpNaW1pYyB0aGUgb25lcyBm
b3IgVmVnYTEwLCBhZGQgbWFpbGJveCBiYWNrZW5kIGZvciBOYXZpMXgKClNpZ25lZC1vZmYtYnk6
IEppYW5nZSBaaGFvIDxKaWFuZ2UuWmhhb0BhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L01ha2VmaWxlICAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L214Z3B1X252LmMgfCAzODAgKysrKysrKysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L214Z3B1X252LmggfCAgNDEgKysrCiAzIGZpbGVzIGNoYW5nZWQsIDQy
MiBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvbXhncHVfbnYuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L214Z3B1X252LmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L01h
a2VmaWxlCmluZGV4IDg0NjE0YTcxYmI0ZC4uNDNkYzRhYTE4OTMwIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9NYWtlZmlsZQpAQCAtNjgsNyArNjgsNyBAQCBhbWRncHUtJChDT05GSUdfRFJNX0FN
REdQVV9TSSkrPSBzaS5vIGdtY192Nl8wLm8gZ2Z4X3Y2XzAubyBzaV9paC5vIHNpX2RtYS5vIGRj
ZQogYW1kZ3B1LXkgKz0gXAogCXZpLm8gbXhncHVfdmkubyBuYmlvX3Y2XzEubyBzb2MxNS5vIGVt
dV9zb2MubyBteGdwdV9haS5vIG5iaW9fdjdfMC5vIHZlZ2ExMF9yZWdfaW5pdC5vIFwKIAl2ZWdh
MjBfcmVnX2luaXQubyBuYmlvX3Y3XzQubyBuYmlvX3YyXzMubyBudi5vIG5hdmkxMF9yZWdfaW5p
dC5vIG5hdmkxNF9yZWdfaW5pdC5vIFwKLQlhcmN0X3JlZ19pbml0Lm8gbmF2aTEyX3JlZ19pbml0
Lm8KKwlhcmN0X3JlZ19pbml0Lm8gbmF2aTEyX3JlZ19pbml0Lm8gbXhncHVfbnYubwogCiAjIGFk
ZCBERiBibG9jawogYW1kZ3B1LXkgKz0gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvbXhncHVfbnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L214Z3B1X252
LmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4wZDg3NjdlYjdhNzAK
LS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9teGdwdV9udi5j
CkBAIC0wLDAgKzEsMzgwIEBACisvKgorICogQ29weXJpZ2h0IDIwMTQgQWR2YW5jZWQgTWljcm8g
RGV2aWNlcywgSW5jLgorICoKKyAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUg
b2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCisgKiBjb3B5IG9mIHRoaXMgc29m
dHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIp
LAorICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVk
aW5nIHdpdGhvdXQgbGltaXRhdGlvbgorICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlm
eSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCisgKiBhbmQvb3Igc2Vs
bCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0
aGUKKyAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9s
bG93aW5nIGNvbmRpdGlvbnM6CisgKgorICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5k
IHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KKyAqIGFsbCBjb3Bp
ZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgorICoKKyAqIFRIRSBT
T0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5E
LCBFWFBSRVNTIE9SCisgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRI
RSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKKyAqIEZJVE5FU1MgRk9SIEEgUEFSVElD
VUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTAorICog
VEhFIENPUFlSSUdIVCBIT0xERVIoUykgT1IgQVVUSE9SKFMpIEJFIExJQUJMRSBGT1IgQU5ZIENM
QUlNLCBEQU1BR0VTIE9SCisgKiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9O
IE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwKKyAqIEFSSVNJTkcgRlJPTSwgT1VUIE9G
IE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUgorICogT1RI
RVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgorICoKKyAqLworCisjaW5jbHVkZSAiYW1kZ3B1
LmgiCisjaW5jbHVkZSAibmJpby9uYmlvXzJfM19vZmZzZXQuaCIKKyNpbmNsdWRlICJuYmlvL25i
aW9fMl8zX3NoX21hc2suaCIKKyNpbmNsdWRlICJnYy9nY18xMF8xXzBfb2Zmc2V0LmgiCisjaW5j
bHVkZSAiZ2MvZ2NfMTBfMV8wX3NoX21hc2suaCIKKyNpbmNsdWRlICJzb2MxNS5oIgorI2luY2x1
ZGUgIm5hdmkxMF9paC5oIgorI2luY2x1ZGUgInNvYzE1X2NvbW1vbi5oIgorI2luY2x1ZGUgIm14
Z3B1X252LmgiCisjaW5jbHVkZSAibXhncHVfYWkuaCIKKworc3RhdGljIHZvaWQgeGdwdV9udl9t
YWlsYm94X3NlbmRfYWNrKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQoreworCVdSRUc4KE5W
X01BSUJPWF9DT05UUk9MX1JDVl9PRkZTRVRfQllURSwgMik7Cit9CisKK3N0YXRpYyB2b2lkIHhn
cHVfbnZfbWFpbGJveF9zZXRfdmFsaWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIGJvb2wg
dmFsKQoreworCVdSRUc4KE5WX01BSUJPWF9DT05UUk9MX1RSTl9PRkZTRVRfQllURSwgdmFsID8g
MSA6IDApOworfQorCisvKgorICogdGhpcyBwZWVrX21zZyBjb3VsZCAqb25seSogYmUgY2FsbGVk
IGluIElSUSByb3V0aW5lIGJlY3Vhc2UgaW4gSVJRIHJvdXRpbmUKKyAqIFJDVl9NU0dfVkFMSUQg
ZmlsZWQgb2YgQklGX0JYX1BGX01BSUxCT1hfQ09OVFJPTCBtdXN0IGFscmVhZHkgYmUgc2V0IHRv
IDEKKyAqIGJ5IGhvc3QuCisgKgorICogaWYgY2FsbGVkIG5vIGluIElSUSByb3V0aW5lLCB0aGlz
IHBlZWtfbXNnIGNhbm5vdCBndWFyYW50ZWVkIHRvIHJldHVybiB0aGUKKyAqIGNvcnJlY3QgdmFs
dWUgc2luY2UgaXQgZG9lc24ndCByZXR1cm4gdGhlIFJDVl9EVzAgdW5kZXIgdGhlIGNhc2UgdGhh
dAorICogUkNWX01TR19WQUxJRCBpcyBzZXQgYnkgaG9zdC4KKyAqLworc3RhdGljIGVudW0gaWRo
X2V2ZW50IHhncHVfbnZfbWFpbGJveF9wZWVrX21zZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
dikKK3sKKwlyZXR1cm4gUlJFRzMyX05PX0tJUShTT0MxNV9SRUdfT0ZGU0VUKE5CSU8sIDAsCisJ
CQkJbW1CSUZfQlhfUEZfTUFJTEJPWF9NU0dCVUZfUkNWX0RXMCkpOworfQorCisKK3N0YXRpYyBp
bnQgeGdwdV9udl9tYWlsYm94X3Jjdl9tc2coc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCisJ
CQkJICAgZW51bSBpZGhfZXZlbnQgZXZlbnQpCit7CisJdTMyIHJlZzsKKworCXJlZyA9IFJSRUcz
Ml9OT19LSVEoU09DMTVfUkVHX09GRlNFVChOQklPLCAwLAorCQkJCQkgICAgIG1tQklGX0JYX1BG
X01BSUxCT1hfTVNHQlVGX1JDVl9EVzApKTsKKwlpZiAocmVnICE9IGV2ZW50KQorCQlyZXR1cm4g
LUVOT0VOVDsKKworCXhncHVfbnZfbWFpbGJveF9zZW5kX2FjayhhZGV2KTsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgdWludDhfdCB4Z3B1X252X3BlZWtfYWNrKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KQoreworCXJldHVybiBSUkVHOChOVl9NQUlCT1hfQ09OVFJPTF9UUk5fT0ZGU0VU
X0JZVEUpICYgMjsKK30KKworc3RhdGljIGludCB4Z3B1X252X3BvbGxfYWNrKHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2KQoreworCWludCB0aW1lb3V0ICA9IE5WX01BSUxCT1hfUE9MTF9BQ0tf
VElNRURPVVQ7CisJdTggcmVnOworCisJZG8geworCQlyZWcgPSBSUkVHOChOVl9NQUlCT1hfQ09O
VFJPTF9UUk5fT0ZGU0VUX0JZVEUpOworCQlpZiAocmVnICYgMikKKwkJCXJldHVybiAwOworCisJ
CW1kZWxheSg1KTsKKwkJdGltZW91dCAtPSA1OworCX0gd2hpbGUgKHRpbWVvdXQgPiAxKTsKKwor
CXByX2VycigiRG9lc24ndCBnZXQgVFJOX01TR19BQ0sgZnJvbSBwZiBpbiAlZCBtc2VjXG4iLCBO
Vl9NQUlMQk9YX1BPTExfQUNLX1RJTUVET1VUKTsKKworCXJldHVybiAtRVRJTUU7Cit9CisKK3N0
YXRpYyBpbnQgeGdwdV9udl9wb2xsX21zZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgZW51
bSBpZGhfZXZlbnQgZXZlbnQpCit7CisJaW50IHIsIHRpbWVvdXQgPSBOVl9NQUlMQk9YX1BPTExf
TVNHX1RJTUVET1VUOworCisJZG8geworCQlyID0geGdwdV9udl9tYWlsYm94X3Jjdl9tc2coYWRl
diwgZXZlbnQpOworCQlpZiAoIXIpCisJCQlyZXR1cm4gMDsKKworCQltc2xlZXAoMTApOworCQl0
aW1lb3V0IC09IDEwOworCX0gd2hpbGUgKHRpbWVvdXQgPiAxKTsKKworCXByX2VycigiRG9lc24n
dCBnZXQgbXNnOiVkIGZyb20gcGYsIGVycm9yPSVkXG4iLCBldmVudCwgcik7CisKKwlyZXR1cm4g
LUVUSU1FOworfQorCitzdGF0aWMgdm9pZCB4Z3B1X252X21haWxib3hfdHJhbnNfbXNnIChzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKKwkgICAgICBlbnVtIGlkaF9yZXF1ZXN0IHJlcSwgdTMy
IGRhdGExLCB1MzIgZGF0YTIsIHUzMiBkYXRhMykKK3sKKwl1MzIgcmVnOworCWludCByOworCXVp
bnQ4X3QgdHJuOworCisJLyogSU1QT1JUQU5UOgorCSAqIGNsZWFyIFRSTl9NU0dfVkFMSUQgdmFs
aWQgdG8gY2xlYXIgaG9zdCdzIFJDVl9NU0dfQUNLCisJICogYW5kIHdpdGggaG9zdCdzIFJDVl9N
U0dfQUNLIGNsZWFyZWQgaHcgYXV0b21hdGljYWxseSBjbGVhciBob3N0J3MgUkNWX01TR19BQ0sK
KwkgKiB3aGljaCBsZWFkIHRvIFZGJ3MgVFJOX01TR19BQ0sgY2xlYXJlZCwgb3RoZXJ3aXNlIGJl
bG93IHhncHVfbnZfcG9sbF9hY2soKQorCSAqIHdpbGwgcmV0dXJuIGltbWVkaWF0bHkKKwkgKi8K
KwlkbyB7CisJCXhncHVfbnZfbWFpbGJveF9zZXRfdmFsaWQoYWRldiwgZmFsc2UpOworCQl0cm4g
PSB4Z3B1X252X3BlZWtfYWNrKGFkZXYpOworCQlpZiAodHJuKSB7CisJCQlwcl9lcnIoInRybj0l
eCBBQ0sgc2hvdWxkIG5vdCBhc3NlcnQhIHdhaXQgYWdhaW4gIVxuIiwgdHJuKTsKKwkJCW1zbGVl
cCgxKTsKKwkJfQorCX0gd2hpbGUgKHRybik7CisKKwlyZWcgPSBSUkVHMzJfTk9fS0lRKFNPQzE1
X1JFR19PRkZTRVQoTkJJTywgMCwKKwkJCQkJICAgICBtbUJJRl9CWF9QRl9NQUlMQk9YX01TR0JV
Rl9UUk5fRFcwKSk7CisJcmVnID0gUkVHX1NFVF9GSUVMRChyZWcsIEJJRl9CWF9QRl9NQUlMQk9Y
X01TR0JVRl9UUk5fRFcwLAorCQkJICAgIE1TR0JVRl9EQVRBLCByZXEpOworCVdSRUczMl9OT19L
SVEoU09DMTVfUkVHX09GRlNFVChOQklPLCAwLCBtbUJJRl9CWF9QRl9NQUlMQk9YX01TR0JVRl9U
Uk5fRFcwKSwKKwkJICAgICAgcmVnKTsKKwlXUkVHMzJfTk9fS0lRKFNPQzE1X1JFR19PRkZTRVQo
TkJJTywgMCwgbW1CSUZfQlhfUEZfTUFJTEJPWF9NU0dCVUZfVFJOX0RXMSksCisJCQkJZGF0YTEp
OworCVdSRUczMl9OT19LSVEoU09DMTVfUkVHX09GRlNFVChOQklPLCAwLCBtbUJJRl9CWF9QRl9N
QUlMQk9YX01TR0JVRl9UUk5fRFcyKSwKKwkJCQlkYXRhMik7CisJV1JFRzMyX05PX0tJUShTT0Mx
NV9SRUdfT0ZGU0VUKE5CSU8sIDAsIG1tQklGX0JYX1BGX01BSUxCT1hfTVNHQlVGX1RSTl9EVzMp
LAorCQkJCWRhdGEzKTsKKworCXhncHVfbnZfbWFpbGJveF9zZXRfdmFsaWQoYWRldiwgdHJ1ZSk7
CisKKwkvKiBzdGFydCB0byBwb2xsIGFjayAqLworCXIgPSB4Z3B1X252X3BvbGxfYWNrKGFkZXYp
OworCWlmIChyKQorCQlwcl9lcnIoIkRvZXNuJ3QgZ2V0IGFjayBmcm9tIHBmLCBjb250aW51ZVxu
Iik7CisKKwl4Z3B1X252X21haWxib3hfc2V0X3ZhbGlkKGFkZXYsIGZhbHNlKTsKK30KKworc3Rh
dGljIGludCB4Z3B1X252X3NlbmRfYWNjZXNzX3JlcXVlc3RzKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LAorCQkJCQllbnVtIGlkaF9yZXF1ZXN0IHJlcSkKK3sKKwlpbnQgcjsKKworCXhncHVf
bnZfbWFpbGJveF90cmFuc19tc2coYWRldiwgcmVxLCAwLCAwLCAwKTsKKworCS8qIHN0YXJ0IHRv
IGNoZWNrIG1zZyBpZiByZXF1ZXN0IGlzIGlkaF9yZXFfZ3B1X2luaXRfYWNjZXNzICovCisJaWYg
KHJlcSA9PSBJREhfUkVRX0dQVV9JTklUX0FDQ0VTUyB8fAorCQlyZXEgPT0gSURIX1JFUV9HUFVf
RklOSV9BQ0NFU1MgfHwKKwkJcmVxID09IElESF9SRVFfR1BVX1JFU0VUX0FDQ0VTUykgeworCQly
ID0geGdwdV9udl9wb2xsX21zZyhhZGV2LCBJREhfUkVBRFlfVE9fQUNDRVNTX0dQVSk7CisJCWlm
IChyKSB7CisJCQlwcl9lcnIoIkRvZXNuJ3QgZ2V0IFJFQURZX1RPX0FDQ0VTU19HUFUgZnJvbSBw
ZiwgZ2l2ZSB1cFxuIik7CisJCQlyZXR1cm4gcjsKKwkJfQorCQkvKiBSZXRyaWV2ZSBjaGVja3N1
bSBmcm9tIG1haWxib3gyICovCisJCWlmIChyZXEgPT0gSURIX1JFUV9HUFVfSU5JVF9BQ0NFU1Mg
fHwgcmVxID09IElESF9SRVFfR1BVX1JFU0VUX0FDQ0VTUykgeworCQkJYWRldi0+dmlydC5md19y
ZXNlcnZlLmNoZWNrc3VtX2tleSA9CisJCQkJUlJFRzMyX05PX0tJUShTT0MxNV9SRUdfT0ZGU0VU
KE5CSU8sIDAsCisJCQkJCW1tQklGX0JYX1BGX01BSUxCT1hfTVNHQlVGX1JDVl9EVzIpKTsKKwkJ
fQorCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHhncHVfbnZfcmVxdWVzdF9yZXNl
dChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKK3sKKwlyZXR1cm4geGdwdV9udl9zZW5kX2Fj
Y2Vzc19yZXF1ZXN0cyhhZGV2LCBJREhfUkVRX0dQVV9SRVNFVF9BQ0NFU1MpOworfQorCitzdGF0
aWMgaW50IHhncHVfbnZfcmVxdWVzdF9mdWxsX2dwdV9hY2Nlc3Moc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYsCisJCQkJCSAgIGJvb2wgaW5pdCkKK3sKKwllbnVtIGlkaF9yZXF1ZXN0IHJlcTsK
KworCXJlcSA9IGluaXQgPyBJREhfUkVRX0dQVV9JTklUX0FDQ0VTUyA6IElESF9SRVFfR1BVX0ZJ
TklfQUNDRVNTOworCXJldHVybiB4Z3B1X252X3NlbmRfYWNjZXNzX3JlcXVlc3RzKGFkZXYsIHJl
cSk7Cit9CisKK3N0YXRpYyBpbnQgeGdwdV9udl9yZWxlYXNlX2Z1bGxfZ3B1X2FjY2VzcyhzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKKwkJCQkJICAgYm9vbCBpbml0KQoreworCWVudW0gaWRo
X3JlcXVlc3QgcmVxOworCWludCByID0gMDsKKworCXJlcSA9IGluaXQgPyBJREhfUkVMX0dQVV9J
TklUX0FDQ0VTUyA6IElESF9SRUxfR1BVX0ZJTklfQUNDRVNTOworCXIgPSB4Z3B1X252X3NlbmRf
YWNjZXNzX3JlcXVlc3RzKGFkZXYsIHJlcSk7CisKKwlyZXR1cm4gcjsKK30KKworc3RhdGljIGlu
dCB4Z3B1X252X21haWxib3hfYWNrX2lycShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKKwkJ
CQkJc3RydWN0IGFtZGdwdV9pcnFfc3JjICpzb3VyY2UsCisJCQkJCXN0cnVjdCBhbWRncHVfaXZf
ZW50cnkgKmVudHJ5KQoreworCURSTV9ERUJVRygiZ2V0IGFjayBpbnRyIGFuZCBkbyBub3RoaW5n
LlxuIik7CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgeGdwdV9udl9zZXRfbWFpbGJveF9h
Y2tfaXJxKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorCQkJCQlzdHJ1Y3QgYW1kZ3B1X2ly
cV9zcmMgKnNvdXJjZSwKKwkJCQkJdW5zaWduZWQgdHlwZSwKKwkJCQkJZW51bSBhbWRncHVfaW50
ZXJydXB0X3N0YXRlIHN0YXRlKQoreworCXUzMiB0bXAgPSBSUkVHMzJfTk9fS0lRKFNPQzE1X1JF
R19PRkZTRVQoTkJJTywgMCwgbW1CSUZfQlhfUEZfTUFJTEJPWF9JTlRfQ05UTCkpOworCisJdG1w
ID0gUkVHX1NFVF9GSUVMRCh0bXAsIEJJRl9CWF9QRl9NQUlMQk9YX0lOVF9DTlRMLCBBQ0tfSU5U
X0VOLAorCQkJCShzdGF0ZSA9PSBBTURHUFVfSVJRX1NUQVRFX0VOQUJMRSkgPyAxIDogMCk7CisJ
V1JFRzMyX05PX0tJUShTT0MxNV9SRUdfT0ZGU0VUKE5CSU8sIDAsIG1tQklGX0JYX1BGX01BSUxC
T1hfSU5UX0NOVEwpLCB0bXApOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIHhncHVf
bnZfbWFpbGJveF9mbHJfd29yayhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCit7CisJc3RydWN0
IGFtZGdwdV92aXJ0ICp2aXJ0ID0gY29udGFpbmVyX29mKHdvcmssIHN0cnVjdCBhbWRncHVfdmly
dCwgZmxyX3dvcmspOworCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gY29udGFpbmVyX29m
KHZpcnQsIHN0cnVjdCBhbWRncHVfZGV2aWNlLCB2aXJ0KTsKKwlpbnQgdGltZW91dCA9IE5WX01B
SUxCT1hfUE9MTF9GTFJfVElNRURPVVQ7CisJaW50IGxvY2tlZDsKKworCS8qIGJsb2NrIGFtZGdw
dV9ncHVfcmVjb3ZlciB0aWxsIG1zZyBGTFIgQ09NUExFVEUgcmVjZWl2ZWQsCisJICogb3RoZXJ3
aXNlIHRoZSBtYWlsYm94IG1zZyB3aWxsIGJlIHJ1aW5lZC9yZXNldGVkIGJ5CisJICogdGhlIFZG
IEZMUi4KKwkgKgorCSAqIHdlIGNhbiB1bmxvY2sgdGhlIGxvY2tfcmVzZXQgdG8gYWxsb3cgImFt
ZGdwdV9qb2JfdGltZWRvdXQiCisJICogdG8gcnVuIGdwdV9yZWNvdmVyKCkgYWZ0ZXIgRkxSX05P
VElGSUNBVElPTl9DTVBMIHJlY2VpdmVkCisJICogd2hpY2ggbWVhbnMgaG9zdCBzaWRlIGhhZCBm
aW5pc2hlZCB0aGlzIFZGJ3MgRkxSLgorCSAqLworCWxvY2tlZCA9IG11dGV4X3RyeWxvY2soJmFk
ZXYtPmxvY2tfcmVzZXQpOworCWlmIChsb2NrZWQpCisJCWFkZXYtPmluX2dwdV9yZXNldCA9IDE7
CisKKwlkbyB7CisJCWlmICh4Z3B1X252X21haWxib3hfcGVla19tc2coYWRldikgPT0gSURIX0ZM
Ul9OT1RJRklDQVRJT05fQ01QTCkKKwkJCWdvdG8gZmxyX2RvbmU7CisKKwkJbXNsZWVwKDEwKTsK
KwkJdGltZW91dCAtPSAxMDsKKwl9IHdoaWxlICh0aW1lb3V0ID4gMSk7CisKK2Zscl9kb25lOgor
CWlmIChsb2NrZWQpIHsKKwkJYWRldi0+aW5fZ3B1X3Jlc2V0ID0gMDsKKwkJbXV0ZXhfdW5sb2Nr
KCZhZGV2LT5sb2NrX3Jlc2V0KTsKKwl9CisKKwkvKiBUcmlnZ2VyIHJlY292ZXJ5IGZvciB3b3Js
ZCBzd2l0Y2ggZmFpbHVyZSBpZiBubyBURFIgKi8KKwlpZiAoYW1kZ3B1X2RldmljZV9zaG91bGRf
cmVjb3Zlcl9ncHUoYWRldikpCisJCWFtZGdwdV9kZXZpY2VfZ3B1X3JlY292ZXIoYWRldiwgTlVM
TCk7Cit9CisKK3N0YXRpYyBpbnQgeGdwdV9udl9zZXRfbWFpbGJveF9yY3ZfaXJxKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LAorCQkJCSAgICAgICBzdHJ1Y3QgYW1kZ3B1X2lycV9zcmMgKnNy
YywKKwkJCQkgICAgICAgdW5zaWduZWQgdHlwZSwKKwkJCQkgICAgICAgZW51bSBhbWRncHVfaW50
ZXJydXB0X3N0YXRlIHN0YXRlKQoreworCXUzMiB0bXAgPSBSUkVHMzJfTk9fS0lRKFNPQzE1X1JF
R19PRkZTRVQoTkJJTywgMCwgbW1CSUZfQlhfUEZfTUFJTEJPWF9JTlRfQ05UTCkpOworCisJdG1w
ID0gUkVHX1NFVF9GSUVMRCh0bXAsIEJJRl9CWF9QRl9NQUlMQk9YX0lOVF9DTlRMLCBWQUxJRF9J
TlRfRU4sCisJCQkgICAgKHN0YXRlID09IEFNREdQVV9JUlFfU1RBVEVfRU5BQkxFKSA/IDEgOiAw
KTsKKwlXUkVHMzJfTk9fS0lRKFNPQzE1X1JFR19PRkZTRVQoTkJJTywgMCwgbW1CSUZfQlhfUEZf
TUFJTEJPWF9JTlRfQ05UTCksIHRtcCk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCB4
Z3B1X252X21haWxib3hfcmN2X2lycShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKKwkJCQkg
ICBzdHJ1Y3QgYW1kZ3B1X2lycV9zcmMgKnNvdXJjZSwKKwkJCQkgICBzdHJ1Y3QgYW1kZ3B1X2l2
X2VudHJ5ICplbnRyeSkKK3sKKwllbnVtIGlkaF9ldmVudCBldmVudCA9IHhncHVfbnZfbWFpbGJv
eF9wZWVrX21zZyhhZGV2KTsKKworCXN3aXRjaCAoZXZlbnQpIHsKKwljYXNlIElESF9GTFJfTk9U
SUZJQ0FUSU9OOgorCQlpZiAoYW1kZ3B1X3NyaW92X3J1bnRpbWUoYWRldikpCisJCQlzY2hlZHVs
ZV93b3JrKCZhZGV2LT52aXJ0LmZscl93b3JrKTsKKwkJYnJlYWs7CisJCS8qIFJFQURZX1RPX0FD
Q0VTU19HUFUgaXMgZmV0Y2hlZCBieSBrZXJuZWwgcG9sbGluZywgSVJRIGNhbiBpZ25vcmUKKwkJ
ICogaXQgYnlmYXIgc2luY2UgdGhhdCBwb2xsaW5nIHRocmVhZCB3aWxsIGhhbmRsZSBpdCwKKwkJ
ICogb3RoZXIgbXNnIGxpa2UgZmxyIGNvbXBsZXRlIGlzIG5vdCBoYW5kbGVkIGhlcmUuCisJCSAq
LworCWNhc2UgSURIX0NMUl9NU0dfQlVGOgorCWNhc2UgSURIX0ZMUl9OT1RJRklDQVRJT05fQ01Q
TDoKKwljYXNlIElESF9SRUFEWV9UT19BQ0NFU1NfR1BVOgorCWRlZmF1bHQ6CisJCWJyZWFrOwor
CX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGFtZGdwdV9pcnFfc3Jj
X2Z1bmNzIHhncHVfbnZfbWFpbGJveF9hY2tfaXJxX2Z1bmNzID0geworCS5zZXQgPSB4Z3B1X252
X3NldF9tYWlsYm94X2Fja19pcnEsCisJLnByb2Nlc3MgPSB4Z3B1X252X21haWxib3hfYWNrX2ly
cSwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgYW1kZ3B1X2lycV9zcmNfZnVuY3MgeGdwdV9u
dl9tYWlsYm94X3Jjdl9pcnFfZnVuY3MgPSB7CisJLnNldCA9IHhncHVfbnZfc2V0X21haWxib3hf
cmN2X2lycSwKKwkucHJvY2VzcyA9IHhncHVfbnZfbWFpbGJveF9yY3ZfaXJxLAorfTsKKwordm9p
ZCB4Z3B1X252X21haWxib3hfc2V0X2lycV9mdW5jcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
dikKK3sKKwlhZGV2LT52aXJ0LmFja19pcnEubnVtX3R5cGVzID0gMTsKKwlhZGV2LT52aXJ0LmFj
a19pcnEuZnVuY3MgPSAmeGdwdV9udl9tYWlsYm94X2Fja19pcnFfZnVuY3M7CisJYWRldi0+dmly
dC5yY3ZfaXJxLm51bV90eXBlcyA9IDE7CisJYWRldi0+dmlydC5yY3ZfaXJxLmZ1bmNzID0gJnhn
cHVfbnZfbWFpbGJveF9yY3ZfaXJxX2Z1bmNzOworfQorCitpbnQgeGdwdV9udl9tYWlsYm94X2Fk
ZF9pcnFfaWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCit7CisJaW50IHI7CisKKwlyID0g
YW1kZ3B1X2lycV9hZGRfaWQoYWRldiwgU09DMTVfSUhfQ0xJRU5USURfQklGLCAxMzUsICZhZGV2
LT52aXJ0LnJjdl9pcnEpOworCWlmIChyKQorCQlyZXR1cm4gcjsKKworCXIgPSBhbWRncHVfaXJx
X2FkZF9pZChhZGV2LCBTT0MxNV9JSF9DTElFTlRJRF9CSUYsIDEzOCwgJmFkZXYtPnZpcnQuYWNr
X2lycSk7CisJaWYgKHIpIHsKKwkJYW1kZ3B1X2lycV9wdXQoYWRldiwgJmFkZXYtPnZpcnQucmN2
X2lycSwgMCk7CisJCXJldHVybiByOworCX0KKworCXJldHVybiAwOworfQorCitpbnQgeGdwdV9u
dl9tYWlsYm94X2dldF9pcnEoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCit7CisJaW50IHI7
CisKKwlyID0gYW1kZ3B1X2lycV9nZXQoYWRldiwgJmFkZXYtPnZpcnQucmN2X2lycSwgMCk7CisJ
aWYgKHIpCisJCXJldHVybiByOworCXIgPSBhbWRncHVfaXJxX2dldChhZGV2LCAmYWRldi0+dmly
dC5hY2tfaXJxLCAwKTsKKwlpZiAocikgeworCQlhbWRncHVfaXJxX3B1dChhZGV2LCAmYWRldi0+
dmlydC5yY3ZfaXJxLCAwKTsKKwkJcmV0dXJuIHI7CisJfQorCisJSU5JVF9XT1JLKCZhZGV2LT52
aXJ0LmZscl93b3JrLCB4Z3B1X252X21haWxib3hfZmxyX3dvcmspOworCisJcmV0dXJuIDA7Cit9
CisKK3ZvaWQgeGdwdV9udl9tYWlsYm94X3B1dF9pcnEoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpCit7CisJYW1kZ3B1X2lycV9wdXQoYWRldiwgJmFkZXYtPnZpcnQuYWNrX2lycSwgMCk7CisJ
YW1kZ3B1X2lycV9wdXQoYWRldiwgJmFkZXYtPnZpcnQucmN2X2lycSwgMCk7Cit9CisKK2NvbnN0
IHN0cnVjdCBhbWRncHVfdmlydF9vcHMgeGdwdV9udl92aXJ0X29wcyA9IHsKKwkucmVxX2Z1bGxf
Z3B1CT0geGdwdV9udl9yZXF1ZXN0X2Z1bGxfZ3B1X2FjY2VzcywKKwkucmVsX2Z1bGxfZ3B1CT0g
eGdwdV9udl9yZWxlYXNlX2Z1bGxfZ3B1X2FjY2VzcywKKwkucmVzZXRfZ3B1ID0geGdwdV9udl9y
ZXF1ZXN0X3Jlc2V0LAorCS53YWl0X3Jlc2V0ID0gTlVMTCwKKwkudHJhbnNfbXNnID0geGdwdV9u
dl9tYWlsYm94X3RyYW5zX21zZywKK307CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9teGdwdV9udi5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbXhncHVfbnYu
aApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjk5YjE1ZjY4NjVjYgot
LS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L214Z3B1X252LmgK
QEAgLTAsMCArMSw0MSBAQAorLyoKKyAqIENvcHlyaWdodCAyMDE0IEFkdmFuY2VkIE1pY3JvIERl
dmljZXMsIEluYy4KKyAqCisgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9m
IGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQorICogY29weSBvZiB0aGlzIHNvZnR3
YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwK
KyAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGlu
ZyB3aXRob3V0IGxpbWl0YXRpb24KKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnks
IG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAorICogYW5kL29yIHNlbGwg
Y29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhl
CisgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxv
d2luZyBjb25kaXRpb25zOgorICoKKyAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0
aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCisgKiBhbGwgY29waWVz
IG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KKyAqCisgKiBUSEUgU09G
VFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwg
RVhQUkVTUyBPUgorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUg
V0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCisgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VM
QVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKKyAqIFRI
RSBDT1BZUklHSFQgSE9MREVSKFMpIE9SIEFVVEhPUihTKSBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJ
TSwgREFNQUdFUyBPUgorICogT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBP
RiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsCisgKiBBUklTSU5HIEZST00sIE9VVCBPRiBP
UiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IKKyAqIE9USEVS
IERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKi8KKworI2lmbmRlZiBfX01YR1BVX05W
X0hfXworI2RlZmluZSBfX01YR1BVX05WX0hfXworCisjZGVmaW5lIE5WX01BSUxCT1hfUE9MTF9B
Q0tfVElNRURPVVQJNTAwCisjZGVmaW5lIE5WX01BSUxCT1hfUE9MTF9NU0dfVElNRURPVVQJMTIw
MDAKKyNkZWZpbmUgTlZfTUFJTEJPWF9QT0xMX0ZMUl9USU1FRE9VVAk1MDAKKworZXh0ZXJuIGNv
bnN0IHN0cnVjdCBhbWRncHVfdmlydF9vcHMgeGdwdV9udl92aXJ0X29wczsKKwordm9pZCB4Z3B1
X252X21haWxib3hfc2V0X2lycV9mdW5jcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Citp
bnQgeGdwdV9udl9tYWlsYm94X2FkZF9pcnFfaWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
OworaW50IHhncHVfbnZfbWFpbGJveF9nZXRfaXJxKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KTsKK3ZvaWQgeGdwdV9udl9tYWlsYm94X3B1dF9pcnEoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpOworCisjZGVmaW5lIE5WX01BSUJPWF9DT05UUk9MX1RSTl9PRkZTRVRfQllURSAoU09DMTVf
UkVHX09GRlNFVChOQklPLCAwLCBtbUJJRl9CWF9QRl9NQUlMQk9YX0NPTlRST0wpICogNCkKKyNk
ZWZpbmUgTlZfTUFJQk9YX0NPTlRST0xfUkNWX09GRlNFVF9CWVRFIChTT0MxNV9SRUdfT0ZGU0VU
KE5CSU8sIDAsIG1tQklGX0JYX1BGX01BSUxCT1hfQ09OVFJPTCkgKiA0ICsgMSkKKworI2VuZGlm
Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
