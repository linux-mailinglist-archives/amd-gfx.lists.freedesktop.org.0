Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 95A04114062
	for <lists+amd-gfx@lfdr.de>; Thu,  5 Dec 2019 12:55:34 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0C1A46F5B5;
	Thu,  5 Dec 2019 11:55:33 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr700068.outbound.protection.outlook.com [40.107.70.68])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 63AB96F5B5
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 11:55:31 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=MHBeJTtkyUFRuw7D2dMBS4kbHKadAykwxvRs7X4sPlnwwAsPTBWgxinnvORlLlnjouloPaANszilUlyL5U1JRRhUsHrqBr0mYTyLJkQ+1PKibHYhyG3mkV8JSsQ4WRVG5VkpYbbXUVSf6FiX3kbFy+Lcs6DqKA3OZNatYA3EnDmrl/1YlkfBUthiAF57OPrJb1Rlp2pfOCmeo+JqSR209tnkCjeuIbTlRKB7FrbDliPsOQwHzI6LNO35JWwzYLx8yJikhaB6O2kxqtCtiMFHSjlCgAYeLWX7IbQAnUlPWLvl4hC6nAsUW3hEkcaHhLCjxzfkELeuEeHeKAw9r2rpCg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=npJF4ZIlVeagM2RC7k3qCxR9MOhRFRgJJ4Bx+zEteyE=;
 b=Ar0OyxPjIIJEgzfLfrkxj1crj0LLy7E8mUHdJn9z9TCHQsmUNPHAWc+c9JOfDYkxsNCRbonh1ErxFlHDdhEp5sCNsG5HKC1T6SihInH8Nmy5sQnqa4fiVBNa2gtzJDnz7i2iKt7DQODYobgWO1ounKXKU+jDd57kfGNgfVF/fn/AssGYqTimrjFz9GUCgW9heCsl9AHtCjGmVP+3lKj3aTv4g+TBQ/X9e2nHUiNqz+iC4aEC3bENF8FRyjs3DxwQvvUisahEay0QvFgdhNXtd5nk3xSX8BtqpIpDrrKvPIf1tZA8vVnrtRMjo26+e7SVAsaVTAmKsARSfMo2BAbCAQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM5PR12MB1705.namprd12.prod.outlook.com (10.175.88.22) by
 DM5PR12MB1482.namprd12.prod.outlook.com (10.172.37.14) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2495.18; Thu, 5 Dec 2019 11:55:29 +0000
Received: from DM5PR12MB1705.namprd12.prod.outlook.com
 ([fe80::80df:f8b:e547:df84]) by DM5PR12MB1705.namprd12.prod.outlook.com
 ([fe80::80df:f8b:e547:df84%12]) with mapi id 15.20.2495.026; Thu, 5 Dec 2019
 11:55:29 +0000
Subject: Re: [RFC PATCH] drm/scheduler: rework entity creation
To: Nirmoy Das <nirmoy.aiemd@gmail.com>, alexander.deucher@amd.com,
 kenny.ho@amd.com
References: <20191205105259.78636-1-nirmoy.das@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <christian.koenig@amd.com>
Message-ID: <68321afb-5444-fcc9-68e9-a2114c3a925a@amd.com>
Date: Thu, 5 Dec 2019 12:55:22 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
In-Reply-To: <20191205105259.78636-1-nirmoy.das@amd.com>
Content-Language: en-US
X-ClientProxiedBy: ZR0P278CA0033.CHEP278.PROD.OUTLOOK.COM
 (2603:10a6:910:1c::20) To DM5PR12MB1705.namprd12.prod.outlook.com
 (2603:10b6:3:10c::22)
MIME-Version: 1.0
X-Originating-IP: [2a02:908:1252:fb60:be8a:bd56:1f94:86e7]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: 53953187-65b2-4cf4-2680-08d7797a056d
X-MS-TrafficTypeDiagnostic: DM5PR12MB1482:|DM5PR12MB1482:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <DM5PR12MB148231BC402CDDFBD1841A0D835C0@DM5PR12MB1482.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:5516;
X-Forefront-PRVS: 02426D11FE
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(366004)(346002)(136003)(376002)(396003)(39860400002)(199004)(189003)(14454004)(36756003)(6486002)(31696002)(11346002)(6512007)(186003)(14444005)(316002)(99286004)(6506007)(2906002)(305945005)(229853002)(52116002)(230700001)(23676004)(86362001)(6636002)(76176011)(58126008)(30864003)(5660300002)(2616005)(6666004)(66476007)(66556008)(66946007)(4326008)(478600001)(25786009)(50466002)(65956001)(8676002)(81166006)(81156014)(8936002)(31686004);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM5PR12MB1482;
 H:DM5PR12MB1705.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: d+9dOHr9xmPo8leamrjLKAMBw6970a22mERYQn+Vvb+htbjWv0J9KhDnwRvNewrikHfQt4sl+q4ru8CqjQiwlbVI60SPs6ZoQZpK3SzddJvrDgUaIKBX7vjNRYaLJjfqgseNtwATjRGp/R2XuvZ74KTGuA5NgFcU3BiHd41AXtqOH4WQTwMqhiI2WF4ROmHVgGY4NWUMufyrTYH3/soMEqsdZXmp5ZKQMa4ZQvlsbTdLfHPAiiXwo/Dr2umoIUeYZNMy20Dc5LGEcX0xuq6FBUAGBzRK8urdWA/DfwoYVPKbUs2yRTbCCTfG7/rXym3qTufbe/RqCfaOzgYHpINsrJyR8O+tU1gzXE+JT/dtKykyKOKtP+9pjCx4p63fbJOIEeR/pCXzathC5CujvVpkBA+WZ8d3MnHqE7+kJSQaPUylRXj4UyW8wj5vzJhJu9tc
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 53953187-65b2-4cf4-2680-08d7797a056d
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 05 Dec 2019 11:55:28.8301 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: OY0TJA1mgdPRtd6MihT/AigJN7w+QaY5b5SQFURioTG7nIj0nQG28EpvhgdT/LRS
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5PR12MB1482
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=npJF4ZIlVeagM2RC7k3qCxR9MOhRFRgJJ4Bx+zEteyE=;
 b=tik5YKEGEsg6Zwh6G5He8UMYsfTD2OvNEucbDNp6TvcR7NQwYg3v6IwzbVr/Dp7g58mgnZDxUxUT9OQfR+mWcTt6MW0NKad6nbfnCbHMOMvTRLHn8ODmbOFIntzFhvDME9m5lxiUFp18XNvbxDdsdH1Ny2OzkzwxJbCx1QeN+t4=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Christian.Koenig@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: nirmoy.das@amd.com, amd-gfx@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMDUuMTIuMTkgdW0gMTE6NTIgc2NocmllYiBOaXJtb3kgRGFzOgo+IEVudGl0eSBjdXJyZW50
bHkga2VlcHMgYSBjb3B5IG9mIHJ1bl9xdWV1ZSBsaXN0IGFuZCBtb2RpZnkgaXQgaW4KPiBkcm1f
c2NoZWRfZW50aXR5X3NldF9wcmlvcml0eSgpLiBFbnRpdGllcyBzaG91bGRuJ3QgbW9kaWZ5IHJ1
bl9xdWV1ZQo+IGxpc3QuIFVzZSBkcm1fZ3B1X3NjaGVkdWxlciBsaXN0IGluc3RlYWQgb2YgZHJt
X3NjaGVkX3JxIGxpc3QKPiBpbiBkcm1fc2NoZWRfZW50aXR5IHN0cnVjdC4gSW4gdGhpcyB3YXkg
d2UgY2FuIHNlbGVjdCBhIHJ1bnF1ZXVlIGJhc2VkCj4gb24gZW50aXR5L2N0eCdzIHByaW9yaXR5
IGZvciBhICBkcm0gc2NoZWR1bGVyLgoKTG9va3MgZ29vZCB0byBtZSBpbiBnZW5lcmFsIG9ubHkg
YSBmZXcgbml0IHBpY2tzIGJlbG93LgoKPgo+IFNpZ25lZC1vZmYtYnk6IE5pcm1veSBEYXMgPG5p
cm1veS5kYXNAYW1kLmNvbT4KPiAtLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9jdHguYyAgfCAgNyArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV90dG0uYyAgfCAgNyArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91
dmQuYyAgfCAgNyArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92Y2Uu
YyAgfCAgNyArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jICAg
fCAxNCArKystLQo+ICAgZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuYyAgICB8
ICA4ICstLQo+ICAgZHJpdmVycy9ncHUvZHJtL2xpbWEvbGltYV9zY2hlZC5jICAgICAgICB8ICA1
ICstCj4gICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMgIHwgIDcgKy0t
Cj4gICBkcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jIHwgNjUgKysrKysr
KysrLS0tLS0tLS0tLS0tLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vdjNkL3YzZF9kcnYuYyAgICAg
ICAgICAgIHwgIDcgKy0tCj4gICBpbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmggICAgICAgICAg
ICAgIHwgIDkgKystLQo+ICAgMTEgZmlsZXMgY2hhbmdlZCwgNjkgaW5zZXJ0aW9ucygrKSwgNzQg
ZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2N0eC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2N0eC5jCj4g
aW5kZXggYTBkM2Q3Yjc1NmViLi5lOGY0NmMxM2QwNzMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2N0eC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2N0eC5jCj4gQEAgLTEyMiw3ICsxMjIsNyBAQCBzdGF0aWMgaW50IGFt
ZGdwdV9jdHhfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgIAo+ICAgCWZvciAo
aSA9IDA7IGkgPCBBTURHUFVfSFdfSVBfTlVNOyArK2kpIHsKPiAgIAkJc3RydWN0IGFtZGdwdV9y
aW5nICpyaW5nc1tBTURHUFVfTUFYX1JJTkdTXTsKPiAtCQlzdHJ1Y3QgZHJtX3NjaGVkX3JxICpy
cXNbQU1ER1BVX01BWF9SSU5HU107Cj4gKwkJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hl
ZF9saXN0W0FNREdQVV9NQVhfUklOR1NdOwo+ICAgCQl1bnNpZ25lZCBudW1fcmluZ3MgPSAwOwo+
ICAgCQl1bnNpZ25lZCBudW1fcnFzID0gMDsKPiAgIAo+IEBAIC0xODEsMTIgKzE4MSwxMyBAQCBz
dGF0aWMgaW50IGFtZGdwdV9jdHhfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAg
IAkJCWlmICghcmluZ3Nbal0tPmFkZXYpCj4gICAJCQkJY29udGludWU7Cj4gICAKPiAtCQkJcnFz
W251bV9ycXMrK10gPSAmcmluZ3Nbal0tPnNjaGVkLnNjaGVkX3JxW3ByaW9yaXR5XTsKPiArCQkJ
c2NoZWRfbGlzdFtudW1fcnFzKytdID0gJnJpbmdzW2pdLT5zY2hlZDsKPiAgIAkJfQo+ICAgCj4g
ICAJCWZvciAoaiA9IDA7IGogPCBhbWRncHVfY3R4X251bV9lbnRpdGllc1tpXTsgKytqKQo+ICAg
CQkJciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmY3R4LT5lbnRpdGllc1tpXVtqXS5lbnRpdHks
Cj4gLQkJCQkJCSAgcnFzLCBudW1fcnFzLCAmY3R4LT5ndWlsdHkpOwo+ICsJCQkJCQkgIHNjaGVk
X2xpc3QsIG51bV9ycXMsCj4gKwkJCQkJCSAgJmN0eC0+Z3VpbHR5LCBwcmlvcml0eSk7Cj4gICAJ
CWlmIChyKQo+ICAgCQkJZ290byBlcnJvcl9jbGVhbnVwX2VudGl0aWVzOwo+ICAgCX0KPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCj4gaW5kZXggMTlmZmUwMGQ5MDcyLi5h
OTYwZGQ3YzA3MTEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3R0bS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5j
Cj4gQEAgLTE5NTcsMTEgKzE5NTcsMTIgQEAgdm9pZCBhbWRncHVfdHRtX3NldF9idWZmZXJfZnVu
Y3Nfc3RhdHVzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBib29sIGVuYWJsZSkKPiAgIAo+
ICAgCWlmIChlbmFibGUpIHsKPiAgIAkJc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nOwo+IC0JCXN0
cnVjdCBkcm1fc2NoZWRfcnEgKnJxOwo+ICsJCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2No
ZWQ7Cj4gICAKPiAgIAkJcmluZyA9IGFkZXYtPm1tYW4uYnVmZmVyX2Z1bmNzX3Jpbmc7Cj4gLQkJ
cnEgPSAmcmluZy0+c2NoZWQuc2NoZWRfcnFbRFJNX1NDSEVEX1BSSU9SSVRZX0tFUk5FTF07Cj4g
LQkJciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmYWRldi0+bW1hbi5lbnRpdHksICZycSwgMSwg
TlVMTCk7Cj4gKwkJc2NoZWQgPSAmcmluZy0+c2NoZWQ7Cj4gKwkJciA9IGRybV9zY2hlZF9lbnRp
dHlfaW5pdCgmYWRldi0+bW1hbi5lbnRpdHksICZzY2hlZCwKPiArCQkJCQkgIDEsIE5VTEwsIERS
TV9TQ0hFRF9QUklPUklUWV9LRVJORUwpOwo+ICAgCQlpZiAocikgewo+ICAgCQkJRFJNX0VSUk9S
KCJGYWlsZWQgc2V0dGluZyB1cCBUVE0gQk8gbW92ZSBlbnRpdHkgKCVkKVxuIiwKPiAgIAkJCQkg
IHIpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdXZk
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdXZkLmMKPiBpbmRleCBlMzI0
YmZlNmM1OGYuLmI4MDNhODg4Mjg2NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfdXZkLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdXZkLmMKPiBAQCAtMzMwLDEyICszMzAsMTMgQEAgaW50IGFtZGdwdV91dmRfc3dfZmlu
aShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgIGludCBhbWRncHVfdXZkX2VudGl0eV9p
bml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgewo+ICAgCXN0cnVjdCBhbWRncHVf
cmluZyAqcmluZzsKPiAtCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOwo+ICsJc3RydWN0IGRybV9n
cHVfc2NoZWR1bGVyICpzY2hlZDsKPiAgIAlpbnQgcjsKPiAgIAo+ICAgCXJpbmcgPSAmYWRldi0+
dXZkLmluc3RbMF0ucmluZzsKPiAtCXJxID0gJnJpbmctPnNjaGVkLnNjaGVkX3JxW0RSTV9TQ0hF
RF9QUklPUklUWV9OT1JNQUxdOwo+IC0JciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmYWRldi0+
dXZkLmVudGl0eSwgJnJxLCAxLCBOVUxMKTsKPiArCXNjaGVkID0gJnJpbmctPnNjaGVkOwo+ICsJ
ciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmYWRldi0+dXZkLmVudGl0eSwgJnNjaGVkLAo+ICsJ
CQkJICAxLCBOVUxMLCBEUk1fU0NIRURfUFJJT1JJVFlfTk9STUFMKTsKPiAgIAlpZiAocikgewo+
ICAgCQlEUk1fRVJST1IoIkZhaWxlZCBzZXR0aW5nIHVwIFVWRCBrZXJuZWwgZW50aXR5LlxuIik7
Cj4gICAJCXJldHVybiByOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfdmNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmNlLmMK
PiBpbmRleCA0NmI1OTBhZjJmZDIuLmI0NGYyOGQ0NGZiNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmNlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdmNlLmMKPiBAQCAtMjQwLDEyICsyNDAsMTMgQEAgaW50IGFtZGdw
dV92Y2Vfc3dfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgIGludCBhbWRncHVf
dmNlX2VudGl0eV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgewo+ICAgCXN0
cnVjdCBhbWRncHVfcmluZyAqcmluZzsKPiAtCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOwo+ICsJ
c3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKPiAgIAlpbnQgcjsKPiAgIAo+ICAgCXJp
bmcgPSAmYWRldi0+dmNlLnJpbmdbMF07Cj4gLQlycSA9ICZyaW5nLT5zY2hlZC5zY2hlZF9ycVtE
Uk1fU0NIRURfUFJJT1JJVFlfTk9STUFMXTsKPiAtCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQo
JmFkZXYtPnZjZS5lbnRpdHksICZycSwgMSwgTlVMTCk7Cj4gKwlzY2hlZCA9ICZyaW5nLT5zY2hl
ZDsKPiArCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJmFkZXYtPnZjZS5lbnRpdHksICZzY2hl
ZCwKPiArCQkJCSAgMSwgTlVMTCwgRFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTCk7Cj4gICAJaWYg
KHIgIT0gMCkgewo+ICAgCQlEUk1fRVJST1IoIkZhaWxlZCBzZXR0aW5nIHVwIFZDRSBydW4gcXVl
dWUuXG4iKTsKPiAgIAkJcmV0dXJuIHI7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV92bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X3ZtLmMKPiBpbmRleCBhOTRjNGZhYTVhZjEuLmVjNjE0MTc3M2E5MiAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jCj4gQEAgLTI2ODcsNiArMjY4Nyw3IEBAIGludCBh
bWRncHVfdm1faW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgc3RydWN0IGFtZGdwdV92
bSAqdm0sCj4gICB7Cj4gICAJc3RydWN0IGFtZGdwdV9ib19wYXJhbSBicDsKPiAgIAlzdHJ1Y3Qg
YW1kZ3B1X2JvICpyb290Owo+ICsgICAgICAgIHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2No
ZWRfbGlzdFtBTURHUFVfTUFYX1JJTkdTXTsKPiAgIAlpbnQgciwgaTsKPiAgIAo+ICAgCXZtLT52
YSA9IFJCX1JPT1RfQ0FDSEVEOwo+IEBAIC0yNzAwLDE0ICsyNzAxLDE5IEBAIGludCBhbWRncHVf
dm1faW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgc3RydWN0IGFtZGdwdV92bSAqdm0s
Cj4gICAJc3Bpbl9sb2NrX2luaXQoJnZtLT5pbnZhbGlkYXRlZF9sb2NrKTsKPiAgIAlJTklUX0xJ
U1RfSEVBRCgmdm0tPmZyZWVkKTsKPiAgIAo+ICsgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhZGV2
LT52bV9tYW5hZ2VyLnZtX3B0ZV9udW1fcnFzOyBpKyspCj4gKwkgICAgICAgc2NoZWRfbGlzdFtp
XSA9IGFkZXYtPnZtX21hbmFnZXIudm1fcHRlX3Jxc1tpXS0+c2NoZWQ7Cj4gKwoKSXQgd291bGQg
YmUgYmV0dGVyIHRvIHR1cm4gdGhlIHZtX3B0ZV9ycXMgYXJyYXkgaW50byBhIHZtX3B0ZV9zY2hl
ZCAKYXJyYXkgaW5zdGVhZC4KCkJ1dCBjYW4gYmUgZG9uZSBpbiBhIGZvbGxvdyB1cCBjbGVhbnVw
IGFzIHdlbGwuCgo+ICAgCS8qIGNyZWF0ZSBzY2hlZHVsZXIgZW50aXRpZXMgZm9yIHBhZ2UgdGFi
bGUgdXBkYXRlcyAqLwo+IC0JciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmdm0tPmRpcmVjdCwg
YWRldi0+dm1fbWFuYWdlci52bV9wdGVfcnFzLAo+IC0JCQkJICBhZGV2LT52bV9tYW5hZ2VyLnZt
X3B0ZV9udW1fcnFzLCBOVUxMKTsKPiArCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJnZtLT5k
aXJlY3QsIHNjaGVkX2xpc3QsCj4gKwkJCQkgIGFkZXYtPnZtX21hbmFnZXIudm1fcHRlX251bV9y
cXMsCj4gKwkJCQkgIE5VTEwsIERSTV9TQ0hFRF9QUklPUklUWV9LRVJORUwpOwo+ICAgCWlmIChy
KQo+ICAgCQlyZXR1cm4gcjsKPiAgIAo+IC0JciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmdm0t
PmRlbGF5ZWQsIGFkZXYtPnZtX21hbmFnZXIudm1fcHRlX3JxcywKPiAtCQkJCSAgYWRldi0+dm1f
bWFuYWdlci52bV9wdGVfbnVtX3JxcywgTlVMTCk7Cj4gKwlyID0gZHJtX3NjaGVkX2VudGl0eV9p
bml0KCZ2bS0+ZGVsYXllZCwgc2NoZWRfbGlzdCwKPiArCQkJCSAgYWRldi0+dm1fbWFuYWdlci52
bV9wdGVfbnVtX3JxcywKPiArCQkJCSAgTlVMTCwgRFJNX1NDSEVEX1BSSU9SSVRZX0tFUk5FTCk7
Cj4gICAJaWYgKHIpCj4gICAJCWdvdG8gZXJyb3JfZnJlZV9kaXJlY3Q7Cj4gICAKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuYyBiL2RyaXZlcnMvZ3B1
L2RybS9ldG5hdml2L2V0bmF2aXZfZHJ2LmMKPiBpbmRleCAxZjljMDFiZTQwZDcuLmE2NWMxZTEx
NWUzNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2Rydi5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuYwo+IEBAIC02NSwx
MiArNjUsMTIgQEAgc3RhdGljIGludCBldG5hdml2X29wZW4oc3RydWN0IGRybV9kZXZpY2UgKmRl
diwgc3RydWN0IGRybV9maWxlICpmaWxlKQo+ICAgCj4gICAJZm9yIChpID0gMDsgaSA8IEVUTkFf
TUFYX1BJUEVTOyBpKyspIHsKPiAgIAkJc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUgPSBwcml2LT5n
cHVbaV07Cj4gLQkJc3RydWN0IGRybV9zY2hlZF9ycSAqcnE7Cj4gKwkJc3RydWN0IGRybV9ncHVf
c2NoZWR1bGVyICpzY2hlZDsKPiAgIAo+ICAgCQlpZiAoZ3B1KSB7Cj4gLQkJCXJxID0gJmdwdS0+
c2NoZWQuc2NoZWRfcnFbRFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTF07Cj4gLQkJCWRybV9zY2hl
ZF9lbnRpdHlfaW5pdCgmY3R4LT5zY2hlZF9lbnRpdHlbaV0sCj4gLQkJCQkJICAgICAgJnJxLCAx
LCBOVUxMKTsKPiArCQkJc2NoZWQgPSAmZ3B1LT5zY2hlZDsKPiArCQkJZHJtX3NjaGVkX2VudGl0
eV9pbml0KCZjdHgtPnNjaGVkX2VudGl0eVtpXSwgJnNjaGVkLAo+ICsJCQkJCSAgICAgIDEsIE5V
TEwsIERSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUwpOwo+ICAgCQkJfQo+ICAgCX0KPiAgIAo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbGltYS9saW1hX3NjaGVkLmMgYi9kcml2ZXJzL2dw
dS9kcm0vbGltYS9saW1hX3NjaGVkLmMKPiBpbmRleCBmNTIyYzVmOTk3MjkuLmE3ZTUzODc4ZDg0
MSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbGltYS9saW1hX3NjaGVkLmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vbGltYS9saW1hX3NjaGVkLmMKPiBAQCAtMTU5LDkgKzE1OSwxMCBA
QCBpbnQgbGltYV9zY2hlZF9jb250ZXh0X2luaXQoc3RydWN0IGxpbWFfc2NoZWRfcGlwZSAqcGlw
ZSwKPiAgIAkJCSAgICBzdHJ1Y3QgbGltYV9zY2hlZF9jb250ZXh0ICpjb250ZXh0LAo+ICAgCQkJ
ICAgIGF0b21pY190ICpndWlsdHkpCj4gICB7Cj4gLQlzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycSA9
IHBpcGUtPmJhc2Uuc2NoZWRfcnEgKyBEUk1fU0NIRURfUFJJT1JJVFlfTk9STUFMOwo+ICsJc3Ry
dWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCA9ICZwaXBlLT5iYXNlOwo+ICAgCj4gLQlyZXR1
cm4gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZjb250ZXh0LT5iYXNlLCAmcnEsIDEsIGd1aWx0eSk7
Cj4gKwlyZXR1cm4gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZjb250ZXh0LT5iYXNlLCAmc2NoZWQs
Cj4gKwkJCQkgICAgIDEsIGd1aWx0eSwgRFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTCk7Cj4gICB9
Cj4gICAKPiAgIHZvaWQgbGltYV9zY2hlZF9jb250ZXh0X2Zpbmkoc3RydWN0IGxpbWFfc2NoZWRf
cGlwZSAqcGlwZSwKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZy
b3N0X2pvYi5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gaW5k
ZXggZDQxMWViNmM4ZWI5Li44NDE3OGJjZjM1YzkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZy
b3N0L3BhbmZyb3N0X2pvYi5jCj4gQEAgLTU0MiwxMiArNTQyLDEzIEBAIGludCBwYW5mcm9zdF9q
b2Jfb3BlbihzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwYW5mcm9zdF9wcml2KQo+ICAgewo+
ICAgCXN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gcGFuZnJvc3RfcHJpdi0+cGZkZXY7
Cj4gICAJc3RydWN0IHBhbmZyb3N0X2pvYl9zbG90ICpqcyA9IHBmZGV2LT5qczsKPiAtCXN0cnVj
dCBkcm1fc2NoZWRfcnEgKnJxOwo+ICsJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZDsK
PiAgIAlpbnQgcmV0LCBpOwo+ICAgCj4gICAJZm9yIChpID0gMDsgaSA8IE5VTV9KT0JfU0xPVFM7
IGkrKykgewo+IC0JCXJxID0gJmpzLT5xdWV1ZVtpXS5zY2hlZC5zY2hlZF9ycVtEUk1fU0NIRURf
UFJJT1JJVFlfTk9STUFMXTsKPiAtCQlyZXQgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJnBhbmZy
b3N0X3ByaXYtPnNjaGVkX2VudGl0eVtpXSwgJnJxLCAxLCBOVUxMKTsKPiArCQlzY2hlZCA9ICZq
cy0+cXVldWVbaV0uc2NoZWQ7Cj4gKwkJcmV0ID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZwYW5m
cm9zdF9wcml2LT5zY2hlZF9lbnRpdHlbaV0sCj4gKwkJCQkJICAgICZzY2hlZCwgMSwgTlVMTCwg
RFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTCk7Cj4gICAJCWlmIChXQVJOX09OKHJldCkpCj4gICAJ
CQlyZXR1cm4gcmV0Owo+ICAgCX0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3NjaGVk
dWxlci9zY2hlZF9lbnRpdHkuYyBiL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfZW50
aXR5LmMKPiBpbmRleCA0NjFhN2E4MTI5ZjQuLmUxMGQzNzI2NjgzNiAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRpdHkuYwo+IEBAIC0zOCw5ICszOCw5IEBACj4gICAg
KiBzdWJtaXQgdG8gSFcgcmluZy4KPiAgICAqCj4gICAgKiBAZW50aXR5OiBzY2hlZHVsZXIgZW50
aXR5IHRvIGluaXQKPiAtICogQHJxX2xpc3Q6IHRoZSBsaXN0IG9mIHJ1biBxdWV1ZSBvbiB3aGlj
aCBqb2JzIGZyb20gdGhpcwo+ICsgKiBAc2NoZWRfbGlzdDogdGhlIGxpc3Qgb2YgZHJtIHNjaGVk
cyBvbiB3aGljaCBqb2JzIGZyb20gdGhpcwo+ICAgICogICAgICAgICAgIGVudGl0eSBjYW4gYmUg
c3VibWl0dGVkCj4gLSAqIEBudW1fcnFfbGlzdDogbnVtYmVyIG9mIHJ1biBxdWV1ZSBpbiBycV9s
aXN0Cj4gKyAqIEBudW1fc2NoZWRfbGlzdDogbnVtYmVyIG9mIGRybSBzY2hlZCBpbiBzY2hlZF9s
aXN0Cj4gICAgKiBAZ3VpbHR5OiBhdG9taWNfdCBzZXQgdG8gMSB3aGVuIGEgam9iIG9uIHRoaXMg
cXVldWUKPiAgICAqICAgICAgICAgIGlzIGZvdW5kIHRvIGJlIGd1aWx0eSBjYXVzaW5nIGEgdGlt
ZW91dAo+ICAgICoKPiBAQCAtNTAsMzIgKzUwLDM0IEBACj4gICAgKiBSZXR1cm5zIDAgb24gc3Vj
Y2VzcyBvciBhIG5lZ2F0aXZlIGVycm9yIGNvZGUgb24gZmFpbHVyZS4KPiAgICAqLwo+ICAgaW50
IGRybV9zY2hlZF9lbnRpdHlfaW5pdChzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5LAo+
IC0JCQkgIHN0cnVjdCBkcm1fc2NoZWRfcnEgKipycV9saXN0LAo+IC0JCQkgIHVuc2lnbmVkIGlu
dCBudW1fcnFfbGlzdCwKPiAtCQkJICBhdG9taWNfdCAqZ3VpbHR5KQo+ICsJCQkgIHN0cnVjdCBk
cm1fZ3B1X3NjaGVkdWxlciAqKnNjaGVkX2xpc3QsCj4gKwkJCSAgdW5zaWduZWQgaW50IG51bV9z
Y2hlZF9saXN0LAo+ICsJCQkgIGF0b21pY190ICpndWlsdHksIGVudW0gZHJtX3NjaGVkX3ByaW9y
aXR5IHByaW9yaXR5KQoKVGhlIHByaW9yaXR5IG5lZWRzIHRvIGJlIG1lbnRpb25lZCBpbiB0aGUg
a2VybmVsZG9jIGFzIHdlbGwgYW5kIG1heWJlIAphZGQgdGhlIHBhcmFtZXRlciBhcyB0aGUgZmly
c3Qgb25lIChhZnRlciBlbnRpdHkpLgoKPiAgIHsKPiAgIAlpbnQgaTsKPiAgIAo+IC0JaWYgKCEo
ZW50aXR5ICYmIHJxX2xpc3QgJiYgKG51bV9ycV9saXN0ID09IDAgfHwgcnFfbGlzdFswXSkpKQo+
ICsJaWYgKCEoZW50aXR5ICYmIHNjaGVkX2xpc3QgJiYgKG51bV9zY2hlZF9saXN0ID09IDAgfHwg
c2NoZWRfbGlzdFswXSkpKQo+ICAgCQlyZXR1cm4gLUVJTlZBTDsKPiAgIAo+ICAgCW1lbXNldChl
bnRpdHksIDAsIHNpemVvZihzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSkpOwo+ICAgCUlOSVRfTElT
VF9IRUFEKCZlbnRpdHktPmxpc3QpOwo+ICAgCWVudGl0eS0+cnEgPSBOVUxMOwo+ICAgCWVudGl0
eS0+Z3VpbHR5ID0gZ3VpbHR5Owo+IC0JZW50aXR5LT5udW1fcnFfbGlzdCA9IG51bV9ycV9saXN0
Owo+IC0JZW50aXR5LT5ycV9saXN0ID0ga2NhbGxvYyhudW1fcnFfbGlzdCwgc2l6ZW9mKHN0cnVj
dCBkcm1fc2NoZWRfcnEgKiksCj4gLQkJCQlHRlBfS0VSTkVMKTsKPiAtCWlmICghZW50aXR5LT5y
cV9saXN0KQo+ICsJZW50aXR5LT5udW1fc2NoZWRfbGlzdCA9IG51bV9zY2hlZF9saXN0Owo+ICsJ
ZW50aXR5LT5wcmlvcml0eSA9IHByaW9yaXR5Owo+ICsJZW50aXR5LT5zY2hlZF9saXN0ID0gIGtj
YWxsb2MobnVtX3NjaGVkX2xpc3QsCj4gKwkJCQkgICAgICBzaXplb2Yoc3RydWN0IGRybV9ncHVf
c2NoZWR1bGVyICopLCBHRlBfS0VSTkVMKTsKCkFzIGEgZm9sbG93IHVwIHdlIHdhbnQgdG8gZ2V0
IHJpZCBvZiB0aGlzIGFzIHdlbGwsIGJ1dCBrZWVwIGl0IGZvciBub3cgCnRvIG1ha2UgdGhlIHBh
dGNoIHNpbXBsZXIuCgo+ICsKPiArCWlmKCFlbnRpdHktPnNjaGVkX2xpc3QpCj4gICAJCXJldHVy
biAtRU5PTUVNOwo+ICAgCj4gICAJaW5pdF9jb21wbGV0aW9uKCZlbnRpdHktPmVudGl0eV9pZGxl
KTsKPiAgIAo+IC0JZm9yIChpID0gMDsgaSA8IG51bV9ycV9saXN0OyArK2kpCj4gLQkJZW50aXR5
LT5ycV9saXN0W2ldID0gcnFfbGlzdFtpXTsKPiArCWZvciAoaSA9IDA7IGkgPCBudW1fc2NoZWRf
bGlzdDsgaSsrKQo+ICsJCWVudGl0eS0+c2NoZWRfbGlzdFtpXSA9IHNjaGVkX2xpc3RbaV07Cj4g
ICAKPiAtCWlmIChudW1fcnFfbGlzdCkKPiAtCQllbnRpdHktPnJxID0gcnFfbGlzdFswXTsKPiAr
CWlmIChudW1fc2NoZWRfbGlzdCkKPiArCQllbnRpdHktPnJxID0gJmVudGl0eS0+c2NoZWRfbGlz
dFswXS0+c2NoZWRfcnFbZW50aXR5LT5wcmlvcml0eV07Cj4gICAKPiAgIAllbnRpdHktPmxhc3Rf
c2NoZWR1bGVkID0gTlVMTDsKPiAgIAo+IEBAIC0xMzksMTAgKzE0MSwxMCBAQCBkcm1fc2NoZWRf
ZW50aXR5X2dldF9mcmVlX3NjaGVkKHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkpCj4g
ICAJdW5zaWduZWQgaW50IG1pbl9qb2JzID0gVUlOVF9NQVgsIG51bV9qb2JzOwo+ICAgCWludCBp
Owo+ICAgCj4gLQlmb3IgKGkgPSAwOyBpIDwgZW50aXR5LT5udW1fcnFfbGlzdDsgKytpKSB7Cj4g
LQkJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCA9IGVudGl0eS0+cnFfbGlzdFtpXS0+
c2NoZWQ7Cj4gKwlmb3IgKGkgPSAwOyBpIDwgZW50aXR5LT5udW1fc2NoZWRfbGlzdDsgKytpKSB7
Cj4gKwkJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCA9IGVudGl0eS0+c2NoZWRfbGlz
dFtpXTsKPiAgIAo+IC0JCWlmICghZW50aXR5LT5ycV9saXN0W2ldLT5zY2hlZC0+cmVhZHkpIHsK
PiArCQlpZiAoIWVudGl0eS0+c2NoZWRfbGlzdFtpXS0+cmVhZHkpIHsKPiAgIAkJCURSTV9XQVJO
KCJzY2hlZCVzIGlzIG5vdCByZWFkeSwgc2tpcHBpbmciLCBzY2hlZC0+bmFtZSk7Cj4gICAJCQlj
b250aW51ZTsKPiAgIAkJfQo+IEBAIC0xNTAsNyArMTUyLDcgQEAgZHJtX3NjaGVkX2VudGl0eV9n
ZXRfZnJlZV9zY2hlZChzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KQo+ICAgCQludW1f
am9icyA9IGF0b21pY19yZWFkKCZzY2hlZC0+bnVtX2pvYnMpOwo+ICAgCQlpZiAobnVtX2pvYnMg
PCBtaW5fam9icykgewo+ICAgCQkJbWluX2pvYnMgPSBudW1fam9iczsKPiAtCQkJcnEgPSBlbnRp
dHktPnJxX2xpc3RbaV07Cj4gKwkJCXJxID0gJmVudGl0eS0+c2NoZWRfbGlzdFtpXS0+c2NoZWRf
cnFbZW50aXR5LT5wcmlvcml0eV07Cj4gICAJCX0KPiAgIAl9Cj4gICAKPiBAQCAtMzA4LDcgKzMx
MCw3IEBAIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9maW5pKHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5
ICplbnRpdHkpCj4gICAKPiAgIAlkbWFfZmVuY2VfcHV0KGVudGl0eS0+bGFzdF9zY2hlZHVsZWQp
Owo+ICAgCWVudGl0eS0+bGFzdF9zY2hlZHVsZWQgPSBOVUxMOwo+IC0Ja2ZyZWUoZW50aXR5LT5y
cV9saXN0KTsKPiArCWtmcmVlKGVudGl0eS0+c2NoZWRfbGlzdCk7Cj4gICB9Cj4gICBFWFBPUlRf
U1lNQk9MKGRybV9zY2hlZF9lbnRpdHlfZmluaSk7Cj4gICAKPiBAQCAtMzUzLDE1ICszNTUsNiBA
QCBzdGF0aWMgdm9pZCBkcm1fc2NoZWRfZW50aXR5X3dha2V1cChzdHJ1Y3QgZG1hX2ZlbmNlICpm
LAo+ICAgCWRybV9zY2hlZF93YWtldXAoZW50aXR5LT5ycS0+c2NoZWQpOwo+ICAgfQo+ICAgCj4g
LS8qKgo+IC0gKiBkcm1fc2NoZWRfZW50aXR5X3NldF9ycV9wcmlvcml0eSAtIGhlbHBlciBmb3Ig
ZHJtX3NjaGVkX2VudGl0eV9zZXRfcHJpb3JpdHkKPiAtICovCj4gLXN0YXRpYyB2b2lkIGRybV9z
Y2hlZF9lbnRpdHlfc2V0X3JxX3ByaW9yaXR5KHN0cnVjdCBkcm1fc2NoZWRfcnEgKipycSwKPiAt
CQkJCQkgICAgIGVudW0gZHJtX3NjaGVkX3ByaW9yaXR5IHByaW9yaXR5KQo+IC17Cj4gLQkqcnEg
PSAmKCpycSktPnNjaGVkLT5zY2hlZF9ycVtwcmlvcml0eV07Cj4gLX0KPiAtCj4gICAvKioKPiAg
ICAqIGRybV9zY2hlZF9lbnRpdHlfc2V0X3ByaW9yaXR5IC0gU2V0cyBwcmlvcml0eSBvZiB0aGUg
ZW50aXR5Cj4gICAgKgo+IEBAIC0zNzMsMjAgKzM2Niw4IEBAIHN0YXRpYyB2b2lkIGRybV9zY2hl
ZF9lbnRpdHlfc2V0X3JxX3ByaW9yaXR5KHN0cnVjdCBkcm1fc2NoZWRfcnEgKipycSwKPiAgIHZv
aWQgZHJtX3NjaGVkX2VudGl0eV9zZXRfcHJpb3JpdHkoc3RydWN0IGRybV9zY2hlZF9lbnRpdHkg
KmVudGl0eSwKPiAgIAkJCQkgICBlbnVtIGRybV9zY2hlZF9wcmlvcml0eSBwcmlvcml0eSkKPiAg
IHsKPiAtCXVuc2lnbmVkIGludCBpOwo+IC0KPiAtCXNwaW5fbG9jaygmZW50aXR5LT5ycV9sb2Nr
KTsKPiAgIAo+IC0JZm9yIChpID0gMDsgaSA8IGVudGl0eS0+bnVtX3JxX2xpc3Q7ICsraSkKPiAt
CQlkcm1fc2NoZWRfZW50aXR5X3NldF9ycV9wcmlvcml0eSgmZW50aXR5LT5ycV9saXN0W2ldLCBw
cmlvcml0eSk7Cj4gLQo+IC0JaWYgKGVudGl0eS0+cnEpIHsKPiAtCQlkcm1fc2NoZWRfcnFfcmVt
b3ZlX2VudGl0eShlbnRpdHktPnJxLCBlbnRpdHkpOwo+IC0JCWRybV9zY2hlZF9lbnRpdHlfc2V0
X3JxX3ByaW9yaXR5KCZlbnRpdHktPnJxLCBwcmlvcml0eSk7Cj4gLQkJZHJtX3NjaGVkX3JxX2Fk
ZF9lbnRpdHkoZW50aXR5LT5ycSwgZW50aXR5KTsKPiAtCX0KPiAtCj4gLQlzcGluX3VubG9jaygm
ZW50aXR5LT5ycV9sb2NrKTsKPiArCWVudGl0eS0+cHJpb3JpdHkgPSBwcmlvcml0eTsKCllvdSBw
cm9iYWJseSBzdGlsbCB3YW50IHRvIGdyYWIgdGhlIGxvY2suCgpSZWdhcmRzLApDaHJpc3RpYW4u
Cgo+ICAgfQo+ICAgRVhQT1JUX1NZTUJPTChkcm1fc2NoZWRfZW50aXR5X3NldF9wcmlvcml0eSk7
Cj4gICAKPiBAQCAtNDkwLDcgKzQ3MSw3IEBAIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9zZWxlY3Rf
cnEoc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSkKPiAgIAlzdHJ1Y3QgZG1hX2ZlbmNl
ICpmZW5jZTsKPiAgIAlzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycTsKPiAgIAo+IC0JaWYgKHNwc2Nf
cXVldWVfY291bnQoJmVudGl0eS0+am9iX3F1ZXVlKSB8fCBlbnRpdHktPm51bV9ycV9saXN0IDw9
IDEpCj4gKwlpZiAoc3BzY19xdWV1ZV9jb3VudCgmZW50aXR5LT5qb2JfcXVldWUpIHx8IGVudGl0
eS0+bnVtX3NjaGVkX2xpc3QgPD0gMSkKPiAgIAkJcmV0dXJuOwo+ICAgCj4gICAJZmVuY2UgPSBS
RUFEX09OQ0UoZW50aXR5LT5sYXN0X3NjaGVkdWxlZCk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS92M2QvdjNkX2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL3YzZC92M2RfZHJ2LmMKPiBp
bmRleCAxYTA3NDYyYjQ1MjguLmM2YWZmMWFlZGQyNyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vdjNkL3YzZF9kcnYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92M2QvdjNkX2Rydi5j
Cj4gQEAgLTE0MCw3ICsxNDAsNyBAQCB2M2Rfb3BlbihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBz
dHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCj4gICB7Cj4gICAJc3RydWN0IHYzZF9kZXYgKnYzZCA9IHRv
X3YzZF9kZXYoZGV2KTsKPiAgIAlzdHJ1Y3QgdjNkX2ZpbGVfcHJpdiAqdjNkX3ByaXY7Cj4gLQlz
dHJ1Y3QgZHJtX3NjaGVkX3JxICpycTsKPiArCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2No
ZWQ7Cj4gICAJaW50IGk7Cj4gICAKPiAgIAl2M2RfcHJpdiA9IGt6YWxsb2Moc2l6ZW9mKCp2M2Rf
cHJpdiksIEdGUF9LRVJORUwpOwo+IEBAIC0xNTAsOCArMTUwLDkgQEAgdjNkX29wZW4oc3RydWN0
IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxlKQo+ICAgCXYzZF9wcml2LT52
M2QgPSB2M2Q7Cj4gICAKPiAgIAlmb3IgKGkgPSAwOyBpIDwgVjNEX01BWF9RVUVVRVM7IGkrKykg
ewo+IC0JCXJxID0gJnYzZC0+cXVldWVbaV0uc2NoZWQuc2NoZWRfcnFbRFJNX1NDSEVEX1BSSU9S
SVRZX05PUk1BTF07Cj4gLQkJZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2M2RfcHJpdi0+c2NoZWRf
ZW50aXR5W2ldLCAmcnEsIDEsIE5VTEwpOwo+ICsJCXNjaGVkID0gJnYzZC0+cXVldWVbaV0uc2No
ZWQ7Cj4gKwkJZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2M2RfcHJpdi0+c2NoZWRfZW50aXR5W2ld
LCAmc2NoZWQsCj4gKwkJCQkgICAgICAxLCBOVUxMLCBEUk1fU0NIRURfUFJJT1JJVFlfTk9STUFM
KTsKPiAgIAl9Cj4gICAKPiAgIAlmaWxlLT5kcml2ZXJfcHJpdiA9IHYzZF9wcml2Owo+IGRpZmYg
LS1naXQgYS9pbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmggYi9pbmNsdWRlL2RybS9ncHVfc2No
ZWR1bGVyLmgKPiBpbmRleCA2ODQ2OTJhOGVkNzYuLjlkZjMyMmRmYWMzMCAxMDA2NDQKPiAtLS0g
YS9pbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmgKPiArKysgYi9pbmNsdWRlL2RybS9ncHVfc2No
ZWR1bGVyLmgKPiBAQCAtODEsOCArODEsOSBAQCBlbnVtIGRybV9zY2hlZF9wcmlvcml0eSB7Cj4g
ICBzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSB7Cj4gICAJc3RydWN0IGxpc3RfaGVhZAkJbGlzdDsK
PiAgIAlzdHJ1Y3QgZHJtX3NjaGVkX3JxCQkqcnE7Cj4gLQlzdHJ1Y3QgZHJtX3NjaGVkX3JxCQkq
KnJxX2xpc3Q7Cj4gLQl1bnNpZ25lZCBpbnQgICAgICAgICAgICAgICAgICAgIG51bV9ycV9saXN0
Owo+ICsJdW5zaWduZWQgaW50ICAgICAgICAgICAgICAgICAgICBudW1fc2NoZWRfbGlzdDsKPiAr
CXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAgICAgICAgKipzY2hlZF9saXN0Owo+ICsJZW51bSBk
cm1fc2NoZWRfcHJpb3JpdHkgICAgICAgICBwcmlvcml0eTsKPiAgIAlzcGlubG9ja190CQkJcnFf
bG9jazsKPiAgIAo+ICAgCXN0cnVjdCBzcHNjX3F1ZXVlCQlqb2JfcXVldWU7Cj4gQEAgLTMxMiw5
ICszMTMsOSBAQCB2b2lkIGRybV9zY2hlZF9ycV9yZW1vdmVfZW50aXR5KHN0cnVjdCBkcm1fc2No
ZWRfcnEgKnJxLAo+ICAgCQkJCXN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkpOwo+ICAg
Cj4gICBpbnQgZHJtX3NjaGVkX2VudGl0eV9pbml0KHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICpl
bnRpdHksCj4gLQkJCSAgc3RydWN0IGRybV9zY2hlZF9ycSAqKnJxX2xpc3QsCj4gKwkJCSAgc3Ry
dWN0IGRybV9ncHVfc2NoZWR1bGVyICoqc2NoZWRfbGlzdCwKPiAgIAkJCSAgdW5zaWduZWQgaW50
IG51bV9ycV9saXN0LAo+IC0JCQkgIGF0b21pY190ICpndWlsdHkpOwo+ICsJCQkgIGF0b21pY190
ICpndWlsdHksIGVudW0gZHJtX3NjaGVkX3ByaW9yaXR5IHByaW9yaXR5KTsKPiAgIGxvbmcgZHJt
X3NjaGVkX2VudGl0eV9mbHVzaChzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5LCBsb25n
IHRpbWVvdXQpOwo+ICAgdm9pZCBkcm1fc2NoZWRfZW50aXR5X2Zpbmkoc3RydWN0IGRybV9zY2hl
ZF9lbnRpdHkgKmVudGl0eSk7Cj4gICB2b2lkIGRybV9zY2hlZF9lbnRpdHlfZGVzdHJveShzdHJ1
Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KTsKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vYW1kLWdmeA==
