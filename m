Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6A81C274DA
	for <lists+amd-gfx@lfdr.de>; Thu, 23 May 2019 05:49:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AC0D889BF0;
	Thu, 23 May 2019 03:49:00 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F192B89BF0
 for <amd-gfx@lists.freedesktop.org>; Thu, 23 May 2019 03:48:59 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id c77so4208676wmd.1
 for <amd-gfx@lists.freedesktop.org>; Wed, 22 May 2019 20:48:59 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=Vp4d9tY3IZ2fOtvvXmWJSRHhpmvbhN9uQ4DcDZ87/fw=;
 b=N8ALgwfjDTRJc6DYTMm4eVFoMDbIXkW/ftWzWr8vVrOWVXwfUtivktVw7swzQ8gtQx
 hLBiwWruaSisWYoSYxP307De/fA/DjRwFhdsi3XdJmQckCd4+P2fyxzh+zUSNNX+96Lz
 LiwzmqvNQ3v4vfZTGfPVK1It1w8GrJoLvnKp3ffdRZ9wycQnrXRyBThYoZ5qIjFi5mkw
 iTHZqCWLj/1rwfkeyx8nICEKcX//o5CYvDF5U8Y0xt9uDSdxxqwRZZFK85gGbkrNl5sB
 jzoRmO64XmZfBFn7coJb09j8njfy1zYG44z1AOrRGrKohcbPQp6RYtm9CO0ePnu4X8ED
 GTow==
X-Gm-Message-State: APjAAAXzZWmBnJCOC0wT8WTmWHJ5oj0mwHlxBs1inMa3XS+dP3jGzhSe
 LPFMkfeQ76uAv4/hCW0LxSyGgp7Z+jIXT+eUYdI=
X-Google-Smtp-Source: APXvYqzeu0cKqUknAwFQ+JPKSuei/svDTVqeZr/lzeC2EIHTs+/IRBn1S064Cia8izgKvpv+Sgu35TN+FYqKXDHfYDw=
X-Received: by 2002:a1c:f50a:: with SMTP id t10mr9709149wmh.86.1558583338307; 
 Wed, 22 May 2019 20:48:58 -0700 (PDT)
MIME-Version: 1.0
References: <1558582017-7545-1-git-send-email-Emily.Deng@amd.com>
In-Reply-To: <1558582017-7545-1-git-send-email-Emily.Deng@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Wed, 22 May 2019 23:48:46 -0400
Message-ID: <CADnq5_Oa8WjT0_V6r+KJ3Jm-HXRUUiNoYg=fFQs-5VyU9ew0=Q@mail.gmail.com>
Subject: Re: [PATCH v2] drm/amdgpu: Need to set the baco cap before baco reset
To: Emily Deng <Emily.Deng@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=Vp4d9tY3IZ2fOtvvXmWJSRHhpmvbhN9uQ4DcDZ87/fw=;
 b=AIt2NX5eBkDOodiSpqf3sM0Ipe51458wGwtWWiyglVFg56c9hZMfcYhOOGzCofaNQA
 iEWFu9jGWMXXN/PTD8SUYZv1GASJqG64Nw2RGbv97wvjyjjKLTasCizhCt3EvSycLx/Q
 kb/ez54duCfA9L2+asjnuwYW32rm0R0Us0nFDg8rF2iciF3czt9HKO2m7YFU4MJDLeyX
 i/obPFVVqRAYybST/3Et1snIboldLvec9PSvB+LBaAottQksoHX8crgkv4AZM8KU18AD
 t5qwBK2zgf74ubO1y+aDyA1xRbwqfaqNUVqnfa0gHfcUETawvynBRkvHXG4fT7/9b0y3
 jSzw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCBNYXkgMjIsIDIwMTkgYXQgMTE6MjcgUE0gRW1pbHkgRGVuZyA8RW1pbHkuRGVuZ0Bh
bWQuY29tPiB3cm90ZToKPgoKUGxlYXNlIGluY2x1ZGUgYSBwYXRjaCBkZXNjcmlwdGlvbi4KCj4g
U2lnbmVkLW9mZi1ieTogRW1pbHkgRGVuZyA8RW1pbHkuRGVuZ0BhbWQuY29tPgo+IC0tLQo+ICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMgICAgICAgICB8IDEwICsr
KysrKysrKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2tnZF9wcF9pbnRlcmZhY2Uu
aCAgICAgfCAgMSArCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZF9wb3dlcnBs
YXkuYyAgICAgIHwgMTYgKysrKysrKysrKysrKysrKwo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL3Bv
d2VycGxheS9od21nci92ZWdhMTBfaHdtZ3IuYyB8ICAxICsKPiAgLi4uL2FtZC9wb3dlcnBsYXkv
aHdtZ3IvdmVnYTEwX3Byb2Nlc3NwcHRhYmxlcy5jICAgfCAyMiArKysrKysrKysrKysrKysrKysr
KysrCj4gIC4uLi9hbWQvcG93ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9wcm9jZXNzcHB0YWJsZXMuaCAg
IHwgIDEgKwo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvaHdtZ3IuaCAgICAg
ICAgICB8ICAxICsKPiAgNyBmaWxlcyBjaGFuZ2VkLCA1MSBpbnNlcnRpb25zKCspLCAxIGRlbGV0
aW9uKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCj4g
aW5kZXggZDYyODZlZC4uNTI4ODc2MyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZGV2aWNlLmMKPiBAQCAtMjYwNSw3ICsyNjA1LDE1IEBAIGludCBhbWRncHVfZGV2
aWNlX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAgICAgICAvKiBjaGVjayBp
ZiB3ZSBuZWVkIHRvIHJlc2V0IHRoZSBhc2ljCj4gICAgICAgICAgKiAgRS5nLiwgZHJpdmVyIHdh
cyBub3QgY2xlYW5seSB1bmxvYWRlZCBwcmV2aW91c2x5LCBldGMuCj4gICAgICAgICAgKi8KPiAt
ICAgICAgIGlmICghYW1kZ3B1X3NyaW92X3ZmKGFkZXYpICYmIGFtZGdwdV9hc2ljX25lZWRfcmVz
ZXRfb25faW5pdChhZGV2KSkgewo+ICsgICAgICAgaWYgKGFtZGdwdV9wYXNzdGhyb3VnaChhZGV2
KSAmJiBhbWRncHVfYXNpY19uZWVkX3Jlc2V0X29uX2luaXQoYWRldikpIHsKClRoaXMgd2lsbCBj
aGFuZ2UgdGhlIGN1cnJlbnQgYmVoYXZpb3Igb24gYmFyZW1ldGFsLgoKPiArICAgICAgICAgICAg
ICAgaWYgKGFkZXYtPnBvd2VycGxheS5wcF9mdW5jcyAmJiBhZGV2LT5wb3dlcnBsYXkucHBfZnVu
Y3MtPnNldF9hc2ljX2JhY29fY2FwKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgciA9IGFk
ZXYtPnBvd2VycGxheS5wcF9mdW5jcy0+c2V0X2FzaWNfYmFjb19jYXAoYWRldi0+cG93ZXJwbGF5
LnBwX2hhbmRsZSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGRldl9lcnIoYWRldi0+ZGV2LCAic2V0IGJhY28gY2Fw
YWJpbGl0eSBmYWlsZWRcbiIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290
byBmYWlsZWQ7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQo+ICsgICAgICAgICAgICAgICB9
Cj4gKwoKVGhpcyB3aWxsIGFsc28gY2hhbmdlIHRoZSBjdXJyZW50IGJlaGF2aW9yIG9uIGJhcmUg
bWV0YWwuCgpJIHRoaW5rIHlvdSBtYXkgd2FudCB0byByZXdvcmsgdGhpcyBhIGJpdCBvdGhlcndp
c2UgdGhpcyBjaGFuZ2Ugd29uJ3QKcmVhbGx5IG1ha2UgYW55IGRpZmZlcmVuY2UgZHVlIHRvIHRo
aXMgcGF0Y2g6Cmh0dHBzOi8vY2dpdC5mcmVlZGVza3RvcC5vcmcvfmFnZDVmL2xpbnV4L2NvbW1p
dC8/aD1hbWQtc3RhZ2luZy1kcm0tbmV4dCZpZD02MGFlMmNkNWFlYzk0ZGM2NDU5YmRlZTVjNjEw
YmI1Yzc2YTFkMGFlCldlIG5lZWQgdG8gYXZvaWQgYnJlYWtpbmcgbW9kdWxlIHJlbG9hZCAobW9k
ZXByb2JlIGFtZGdwdTsgbW9kcHJvYmUgLXIKYW1kZ3B1OyBtb2RlcHJvYmUgYW1kZ3B1KS4KSSB0
aGluayBpdCB3b3VsZCBiZSBjbGVhbmVyIHRvIGNhbGwgc2V0X2FzaWNfYmFjb19jYXAoKSBpbgpo
d21ncl9lYXJseV9pbml0KCkgYW5kIHRoZW4gcmV0dXJuIHRydWUgaW4gc29jMTVfbmVlZF9yZXNl
dF9vbl9pbml0KCkKaXMgaXQncyBwYXNzdGhyb3VnaCBtb2RlLiAgdGhlbiBldmVyeXRoaW5nIHNo
b3VsZCBqdXN0IHdvcmsgYXMgaXMuCgo+ICAgICAgICAgICAgICAgICByID0gYW1kZ3B1X2FzaWNf
cmVzZXQoYWRldik7Cj4gICAgICAgICAgICAgICAgIGlmIChyKSB7Cj4gICAgICAgICAgICAgICAg
ICAgICAgICAgZGV2X2VycihhZGV2LT5kZXYsICJhc2ljIHJlc2V0IG9uIGluaXQgZmFpbGVkXG4i
KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2tnZF9wcF9pbnRl
cmZhY2UuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvaW5jbHVkZS9rZ2RfcHBfaW50ZXJmYWNlLmgK
PiBpbmRleCAyYjU3OWJhLi4wZGNjMThkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvaW5jbHVkZS9rZ2RfcHBfaW50ZXJmYWNlLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2luY2x1ZGUva2dkX3BwX2ludGVyZmFjZS5oCj4gQEAgLTI4NSw2ICsyODUsNyBAQCBzdHJ1Y3Qg
YW1kX3BtX2Z1bmNzIHsKPiAgICAgICAgIGludCAoKnNldF9oYXJkX21pbl9mY2xrX2J5X2ZyZXEp
KHZvaWQgKmhhbmRsZSwgdWludDMyX3QgY2xvY2spOwo+ICAgICAgICAgaW50ICgqc2V0X21pbl9k
ZWVwX3NsZWVwX2RjZWZjbGspKHZvaWQgKmhhbmRsZSwgdWludDMyX3QgY2xvY2spOwo+ICAgICAg
ICAgaW50ICgqZ2V0X2FzaWNfYmFjb19jYXBhYmlsaXR5KSh2b2lkICpoYW5kbGUsIGJvb2wgKmNh
cCk7Cj4gKyAgICAgICBpbnQgKCpzZXRfYXNpY19iYWNvX2NhcCkodm9pZCAqaGFuZGxlKTsKPiAg
ICAgICAgIGludCAoKmdldF9hc2ljX2JhY29fc3RhdGUpKHZvaWQgKmhhbmRsZSwgaW50ICpzdGF0
ZSk7Cj4gICAgICAgICBpbnQgKCpzZXRfYXNpY19iYWNvX3N0YXRlKSh2b2lkICpoYW5kbGUsIGlu
dCBzdGF0ZSk7Cj4gICAgICAgICBpbnQgKCpnZXRfcHBmZWF0dXJlX3N0YXR1cykodm9pZCAqaGFu
ZGxlLCBjaGFyICpidWYpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2Vy
cGxheS9hbWRfcG93ZXJwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9hbWRf
cG93ZXJwbGF5LmMKPiBpbmRleCBiZWExNTg3Li45ODU2NzYwIDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZF9wb3dlcnBsYXkuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZF9wb3dlcnBsYXkuYwo+IEBAIC0xNDA0LDYgKzE0MDQs
MjEgQEAgc3RhdGljIGludCBwcF9zZXRfYWN0aXZlX2Rpc3BsYXlfY291bnQodm9pZCAqaGFuZGxl
LCB1aW50MzJfdCBjb3VudCkKPiAgICAgICAgIHJldHVybiByZXQ7Cj4gIH0KPgo+ICtzdGF0aWMg
aW50IHBwX3NldF9hc2ljX2JhY29fY2FwKHZvaWQgKmhhbmRsZSkKPiArewo+ICsgICAgICAgc3Ry
dWN0IHBwX2h3bWdyICpod21nciA9IGhhbmRsZTsKPiArCj4gKyAgICAgICBpZiAoIWh3bWdyKQo+
ICsgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiArCj4gKyAgICAgICBpZiAoIWh3bWdy
LT5wbV9lbiB8fCAhaHdtZ3ItPmh3bWdyX2Z1bmMtPnNldF9hc2ljX2JhY29fY2FwKQo+ICsgICAg
ICAgICAgICAgICByZXR1cm4gMDsKPiArCj4gKyAgICAgICBod21nci0+aHdtZ3JfZnVuYy0+c2V0
X2FzaWNfYmFjb19jYXAoaHdtZ3IpOwo+ICsKPiArICAgICAgIHJldHVybiAwOwo+ICt9Cj4gKwo+
ICBzdGF0aWMgaW50IHBwX2dldF9hc2ljX2JhY29fY2FwYWJpbGl0eSh2b2lkICpoYW5kbGUsIGJv
b2wgKmNhcCkKPiAgewo+ICAgICAgICAgc3RydWN0IHBwX2h3bWdyICpod21nciA9IGhhbmRsZTsK
PiBAQCAtMTU0Niw2ICsxNTYxLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBhbWRfcG1fZnVuY3Mg
cHBfZHBtX2Z1bmNzID0gewo+ICAgICAgICAgLnNldF9oYXJkX21pbl9kY2VmY2xrX2J5X2ZyZXEg
PSBwcF9zZXRfaGFyZF9taW5fZGNlZmNsa19ieV9mcmVxLAo+ICAgICAgICAgLnNldF9oYXJkX21p
bl9mY2xrX2J5X2ZyZXEgPSBwcF9zZXRfaGFyZF9taW5fZmNsa19ieV9mcmVxLAo+ICAgICAgICAg
LmdldF9hc2ljX2JhY29fY2FwYWJpbGl0eSA9IHBwX2dldF9hc2ljX2JhY29fY2FwYWJpbGl0eSwK
PiArICAgICAgIC5zZXRfYXNpY19iYWNvX2NhcCA9IHBwX3NldF9hc2ljX2JhY29fY2FwLAo+ICAg
ICAgICAgLmdldF9hc2ljX2JhY29fc3RhdGUgPSBwcF9nZXRfYXNpY19iYWNvX3N0YXRlLAo+ICAg
ICAgICAgLnNldF9hc2ljX2JhY29fc3RhdGUgPSBwcF9zZXRfYXNpY19iYWNvX3N0YXRlLAo+ICAg
ICAgICAgLmdldF9wcGZlYXR1cmVfc3RhdHVzID0gcHBfZ2V0X3BwZmVhdHVyZV9zdGF0dXMsCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9o
d21nci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX2h3bWdy
LmMKPiBpbmRleCBlZDZjNjM4Li44ZGMyM2ViIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvcG93ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9od21nci5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX2h3bWdyLmMKPiBAQCAtNTE3MSw2ICs1MTcx
LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwcF9od21ncl9mdW5jIHZlZ2ExMF9od21ncl9mdW5j
cyA9IHsKPiAgICAgICAgIC5vZG5fZWRpdF9kcG1fdGFibGUgPSB2ZWdhMTBfb2RuX2VkaXRfZHBt
X3RhYmxlLAo+ICAgICAgICAgLmdldF9wZXJmb3JtYW5jZV9sZXZlbCA9IHZlZ2ExMF9nZXRfcGVy
Zm9ybWFuY2VfbGV2ZWwsCj4gICAgICAgICAuZ2V0X2FzaWNfYmFjb19jYXBhYmlsaXR5ID0gc211
OV9iYWNvX2dldF9jYXBhYmlsaXR5LAo+ICsgICAgICAgLnNldF9hc2ljX2JhY29fY2FwID0gdmVn
YTEwX2JhY29fc2V0X2NhcCwKCkFueSBjaGFuY2UgeW91IGNhbiBhZGQgY2FsbGJhY2tzIGZvciB2
ZWdhMTIgYW5kIDIwIGFzIHdlbGw/Cgo+ICAgICAgICAgLmdldF9hc2ljX2JhY29fc3RhdGUgPSBz
bXU5X2JhY29fZ2V0X3N0YXRlLAo+ICAgICAgICAgLnNldF9hc2ljX2JhY29fc3RhdGUgPSB2ZWdh
MTBfYmFjb19zZXRfc3RhdGUsCj4gICAgICAgICAuZW5hYmxlX21ncHVfZmFuX2Jvb3N0ID0gdmVn
YTEwX2VuYWJsZV9tZ3B1X2Zhbl9ib29zdCwKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX3Byb2Nlc3NwcHRhYmxlcy5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX3Byb2Nlc3NwcHRhYmxlcy5jCj4gaW5k
ZXggYjY3NjdkNy4uOGZkZWIyMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bv
d2VycGxheS9od21nci92ZWdhMTBfcHJvY2Vzc3BwdGFibGVzLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL3Bvd2VycGxheS9od21nci92ZWdhMTBfcHJvY2Vzc3BwdGFibGVzLmMKPiBAQCAt
MTM3MSwzICsxMzcxLDI1IEBAIGludCB2ZWdhMTBfZ2V0X3Bvd2VycGxheV90YWJsZV9lbnRyeShz
dHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLAo+Cj4gICAgICAgICByZXR1cm4gcmVzdWx0Owo+ICB9Cj4g
Kwo+ICtpbnQgdmVnYTEwX2JhY29fc2V0X2NhcChzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyKQo+ICt7
Cj4gKyAgICAgICBpbnQgcmVzdWx0ID0gMDsKPiArICAgICAgIGNvbnN0IEFUT01fVmVnYTEwX1BP
V0VSUExBWVRBQkxFICpwb3dlcnBsYXlfdGFibGU7Cj4gKwo+ICsgICAgICAgcG93ZXJwbGF5X3Rh
YmxlID0gZ2V0X3Bvd2VycGxheV90YWJsZShod21ncik7Cj4gKwo+ICsgICAgICAgUFBfQVNTRVJU
X1dJVEhfQ09ERSgocG93ZXJwbGF5X3RhYmxlICE9IE5VTEwpLAo+ICsgICAgICAgICAgICAgICAi
TWlzc2luZyBQb3dlclBsYXkgVGFibGUhIiwgcmV0dXJuIC0xKTsKPiArCj4gKyAgICAgICByZXN1
bHQgPSBjaGVja19wb3dlcnBsYXlfdGFibGVzKGh3bWdyLCBwb3dlcnBsYXlfdGFibGUpOwo+ICsK
PiArICAgICAgIFBQX0FTU0VSVF9XSVRIX0NPREUoKHJlc3VsdCA9PSAwKSwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgImNoZWNrX3Bvd2VycGxheV90YWJsZXMgZmFpbGVkIiwgcmV0dXJu
IHJlc3VsdCk7Cj4gKwo+ICsgICAgICAgc2V0X2h3X2NhcCgKPiArICAgICAgICAgICAgICAgICAg
ICAgICBod21nciwKPiArICAgICAgICAgICAgICAgICAgICAgICAwICE9IChsZTMyX3RvX2NwdShw
b3dlcnBsYXlfdGFibGUtPnVsUGxhdGZvcm1DYXBzKSAmIEFUT01fVkVHQTEwX1BQX1BMQVRGT1JN
X0NBUF9CQUNPKSwKPiArICAgICAgICAgICAgICAgICAgICAgICBQSE1fUGxhdGZvcm1DYXBzX0JB
Q08pOwo+ICsgICAgICAgcmV0dXJuIHJlc3VsdDsKPiArfQo+IFwgTm8gbmV3bGluZSBhdCBlbmQg
b2YgZmlsZQoKTWlzc2luZyBuZXdsaW5lLgoKQWxleAoKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX3Byb2Nlc3NwcHRhYmxlcy5oIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX3Byb2Nlc3NwcHRhYmxlcy5o
Cj4gaW5kZXggZDgzZWQyYS4uZGE1ZmJlYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL3Bvd2VycGxheS9od21nci92ZWdhMTBfcHJvY2Vzc3BwdGFibGVzLmgKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci92ZWdhMTBfcHJvY2Vzc3BwdGFibGVzLmgK
PiBAQCAtNTksNCArNTksNSBAQCBleHRlcm4gaW50IHZlZ2ExMF9nZXRfbnVtYmVyX29mX3Bvd2Vy
cGxheV90YWJsZV9lbnRyaWVzKHN0cnVjdCBwcF9od21nciAqaHdtZ3IpOwo+ICBleHRlcm4gaW50
IHZlZ2ExMF9nZXRfcG93ZXJwbGF5X3RhYmxlX2VudHJ5KHN0cnVjdCBwcF9od21nciAqaHdtZ3Is
IHVpbnQzMl90IGVudHJ5X2luZGV4LAo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgcHBfcG93ZXJf
c3RhdGUgKnBvd2VyX3N0YXRlLCBpbnQgKCpjYWxsX2JhY2tfZnVuYykoc3RydWN0IHBwX2h3bWdy
ICosIHZvaWQgKiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBwcF9w
b3dlcl9zdGF0ZSAqLCB2b2lkICosIHVpbnQzMl90KSk7Cj4gK2V4dGVybiBpbnQgdmVnYTEwX2Jh
Y29fc2V0X2NhcChzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyKTsKPiAgI2VuZGlmCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9od21nci5oIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2h3bWdyLmgKPiBpbmRleCBiYWMzZDg1Li4xNDQ4MGFl
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9od21nci5o
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2h3bWdyLmgKPiBAQCAt
MzM5LDYgKzMzOSw3IEBAIHN0cnVjdCBwcF9od21ncl9mdW5jIHsKPiAgICAgICAgIGludCAoKnNl
dF9oYXJkX21pbl9kY2VmY2xrX2J5X2ZyZXEpKHN0cnVjdCBwcF9od21nciAqaHdtZ3IsIHVpbnQz
Ml90IGNsb2NrKTsKPiAgICAgICAgIGludCAoKnNldF9oYXJkX21pbl9mY2xrX2J5X2ZyZXEpKHN0
cnVjdCBwcF9od21nciAqaHdtZ3IsIHVpbnQzMl90IGNsb2NrKTsKPiAgICAgICAgIGludCAoKmdl
dF9hc2ljX2JhY29fY2FwYWJpbGl0eSkoc3RydWN0IHBwX2h3bWdyICpod21nciwgYm9vbCAqY2Fw
KTsKPiArICAgICAgIGludCAoKnNldF9hc2ljX2JhY29fY2FwKShzdHJ1Y3QgcHBfaHdtZ3IgKmh3
bWdyKTsKPiAgICAgICAgIGludCAoKmdldF9hc2ljX2JhY29fc3RhdGUpKHN0cnVjdCBwcF9od21n
ciAqaHdtZ3IsIGVudW0gQkFDT19TVEFURSAqc3RhdGUpOwo+ICAgICAgICAgaW50ICgqc2V0X2Fz
aWNfYmFjb19zdGF0ZSkoc3RydWN0IHBwX2h3bWdyICpod21nciwgZW51bSBCQUNPX1NUQVRFIHN0
YXRlKTsKPiAgICAgICAgIGludCAoKmdldF9wcGZlYXR1cmVfc3RhdHVzKShzdHJ1Y3QgcHBfaHdt
Z3IgKmh3bWdyLCBjaGFyICpidWYpOwo+IC0tCj4gMi43LjQKPgo+IF9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gYW1kLWdmeCBtYWlsaW5nIGxpc3QKPiBh
bWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeApfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2FtZC1nZng=
