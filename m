Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C8A1911061A
	for <lists+amd-gfx@lfdr.de>; Tue,  3 Dec 2019 21:45:24 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E5EE86F3FB;
	Tue,  3 Dec 2019 20:45:22 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr770078.outbound.protection.outlook.com [40.107.77.78])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5CD936F3FB
 for <amd-gfx@lists.freedesktop.org>; Tue,  3 Dec 2019 20:45:22 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=DaHt3pE0afUprrK77CzVIwxRNFIVI9Rg+s+rYRnnYDXgIcBGwVnHG0LA6S4Jy2cMBezRSPfXizDT4p60QMtAa5Ca6xOcKR7JqJ81kH+hs37cqfYFz1CJuAOlmN3ChxFXiaS5DCxNLflKasAn1kd/O11DKE+rRTyi3CqrbzBK59/ZniBvJrAbkOpJP7OULzBSX+632RQjfJHdUSumGFy4FVKd+jNzH2kwstsN73HZEa+c8+p3p0O7St+v/qo5wXHI2jchc0fKSVl0GawvFiF5SWI5uC5O3VjjgQKZ9JAMiM6XyQ71gzZbPVxKKg3uJKWRLbT+8FFdMvOeIHpq1S4Ruw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=cL9l6zqQ/phHFSLlFviAOfJapLoNO93hVeydAOayZe4=;
 b=LctQ4jGuC9C57KTn0xxf4IA5SCZXHPztVEcHPPkfvBPys7STsZkQZuPIQGdQZX4JZmMAmayhQizDpvoT4bEEzq+xpg/j8acSML2mbsmKMeiAJ9iMPYa5igTzWL2kABrBpGmX/DyTMi85Bqcj/QEeIP57ZWQau4wWyH/vUtldV+Xcn4Av73urVKRVIfEce5fZNzpvfek4CcjQct06ckcquDFXzlAfBnOZz4GkbjK5XsNE4rjBNoMS/36eMoYW/kvlFXLruShYvdsM7cDpkqKC3GzguzzdrRbB1AdTPBpO+0Uq1JodYGkNfU667tm0sBVyA8oBE/iKYx4a9OZUIzbnJQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from CY4PR12MB1254.namprd12.prod.outlook.com (10.168.169.17) by
 CY4PR12MB1256.namprd12.prod.outlook.com (10.168.167.19) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2495.22; Tue, 3 Dec 2019 20:45:20 +0000
Received: from CY4PR12MB1254.namprd12.prod.outlook.com
 ([fe80::a4e2:1fed:2676:7d16]) by CY4PR12MB1254.namprd12.prod.outlook.com
 ([fe80::a4e2:1fed:2676:7d16%6]) with mapi id 15.20.2495.014; Tue, 3 Dec 2019
 20:45:20 +0000
From: James Zhu <James.Zhu@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH] drm/amdgpu/gfx: Improvement on EDC GPR workarounds
Date: Tue,  3 Dec 2019 15:45:10 -0500
Message-Id: <1575405910-31409-1-git-send-email-James.Zhu@amd.com>
X-Mailer: git-send-email 2.7.4
X-ClientProxiedBy: YTOPR0101CA0041.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b00:14::18) To CY4PR12MB1254.namprd12.prod.outlook.com
 (2603:10b6:903:41::17)
MIME-Version: 1.0
X-Mailer: git-send-email 2.7.4
X-Originating-IP: [165.204.55.251]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: aeaa91c4-7b21-4c50-1cb2-08d77831b60f
X-MS-TrafficTypeDiagnostic: CY4PR12MB1256:|CY4PR12MB1256:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <CY4PR12MB1256BF6F20F29D970ACA9BD3E4420@CY4PR12MB1256.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:4941;
X-Forefront-PRVS: 02408926C4
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(346002)(39860400002)(396003)(366004)(136003)(376002)(189003)(199004)(316002)(6116002)(386003)(6506007)(50466002)(305945005)(3846002)(6436002)(25786009)(52116002)(99286004)(86362001)(81156014)(2906002)(8676002)(6916009)(8936002)(4326008)(6512007)(26005)(50226002)(16586007)(7736002)(2361001)(51416003)(186003)(6486002)(2616005)(478600001)(14454004)(6666004)(36756003)(5660300002)(2351001)(48376002)(66476007)(66556008)(66946007)(81166006);
 DIR:OUT; SFP:1101; SCL:1; SRVR:CY4PR12MB1256;
 H:CY4PR12MB1254.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: lM9579wFi93eI/3OCrNoOERXti2GfctN5F1K6ePtdBfdpWOWGBnCS2hNr+WF6qyfUvHfH1PR5wK7CQXf7dXm1HBW04SsyJPfSLVBF5gPDBV4JZ0o4AcDlk4seCujX3bWUS4vtPEAAd2myu+2Bzu4fIZq3rCOPncD423kK2uBKd21IFh7xajmsxZrL4gjxlx+24RiuhJYQDBaPrgiovX4BnEGJwNebdcCNLI+paqjrqdFa/a6l6h6VpjyBZp5I+WqIYw03Ut/zb36gvKR3RvN2AuGqw9qCvW68ZFtuqcjUt5xXK4jvbX7P3fFSgf8WiMeRTYI4S24I0WX1rdl+h+xBAYef47nO+cFUGeYAvp6oEAYoP9nN2F5Lx8kJhBvY+gJ2V5FGNNeG7s/Usi7I2rjXWF/r+cXktkh01wyNzXvlzWU4zAwFE/2rruiHdcz+QqJ
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: aeaa91c4-7b21-4c50-1cb2-08d77831b60f
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 03 Dec 2019 20:45:20.2087 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: u49xpsVTaFO73ClZ+XOtHQP2OTpL7qh/Aa7vSG+o8BN+XXzY9XCjnwU+gGSquX9t
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CY4PR12MB1256
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=cL9l6zqQ/phHFSLlFviAOfJapLoNO93hVeydAOayZe4=;
 b=yKCBA+3n3EfyhaRjVw0cLGqp0Ot6SP4nI44qKqbnh/qd65SIEl56tS+uoMP+zAl6s+grzrvGAS2k3Vg59o7aZOkKNepjS3coPC10qrQ2ihsumwyObfMYpLa0BKMR9vXEgtnZaMSSYz+xofhzgfv5juWBLcAJpxHXP9VrEWl7Exk=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=James.Zhu@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jamesz@amd.com, hawking.zhang@amd.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U1BJIGxpbWl0cyB0b3RhbCBDUyB3YXZlcyBpbiBmbGlnaHQgcGVyIFNFIHRvIG5vIG1vcmUgdGhh
biAzMiAqIG51bV9jdSBhbmQKd2UgbmVlZCB0byBzdHVmZiA0MCB3YXZlcyBvbiBhIENVIHRvIGNv
bXBsZXRlbHkgY2xlYW4gdGhlIFNHUFIuIFRoaXMgaXMKYWNjb21wbGlzaGVkIGluIHRoZSBXUiBi
eSBjbGVhbmluZyB0aGUgU0UgaW4gdHdvIHN0ZXBzLCBoYWxmIG9mIHRoZSBDVSBwZXIKc3RlcC4K
ClNpZ25lZC1vZmYtYnk6IEphbWVzIFpodSA8SmFtZXMuWmh1QGFtZC5jb20+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyB8IDgzICsrKysrKysrKysrKysrKysrKysr
KysrKysrLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNjMgaW5zZXJ0aW9ucygrKSwgMjAgZGVs
ZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5
XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMKaW5kZXggNmEyNTFh
My4uMTQ3YzA4ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5
XzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjlfMC5jCkBAIC0zOTM4
LDI0ICszOTM4LDM3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgc29jMTVfcmVnX2VudHJ5IHZncHJf
aW5pdF9yZWdzW10gPSB7CiAgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01QVVRFX1NU
QVRJQ19USFJFQURfTUdNVF9TRTEpLCAweGZmZmZmZmZmIH0sCiAgICB7IFNPQzE1X1JFR19FTlRS
WShHQywgMCwgbW1DT01QVVRFX1NUQVRJQ19USFJFQURfTUdNVF9TRTIpLCAweGZmZmZmZmZmIH0s
CiAgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01QVVRFX1NUQVRJQ19USFJFQURfTUdN
VF9TRTMpLCAweGZmZmZmZmZmIH0sCi0gICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01Q
VVRFX1JFU09VUkNFX0xJTUlUUyksIDB4MTAwMDAwMCB9LCAvKiBDVV9HUk9VUF9DT1VOVD0xICov
Ci0gICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01QVVRFX05VTV9USFJFQURfWCksIDI1
NioyIH0sCi0gICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01QVVRFX05VTV9USFJFQURf
WSksIDEgfSwKKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfUkVTT1VSQ0Vf
TElNSVRTKSwgMHgwMDAwMDAwIH0sCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01Q
VVRFX05VTV9USFJFQURfWCksIDB4NDAgfSwKKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBt
bUNPTVBVVEVfTlVNX1RIUkVBRF9ZKSwgNCB9LAogICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAs
IG1tQ09NUFVURV9OVU1fVEhSRUFEX1opLCAxIH0sCi0gICB7IFNPQzE1X1JFR19FTlRSWShHQywg
MCwgbW1DT01QVVRFX1BHTV9SU1JDMSksIDB4MTAwMDA3ZiB9LCAvKiBWR1BSUz0xNSAoMjU2IGxv
Z2ljYWwgVkdQUnMsIFNHUFJTPTEgKDE2IFNHUFJzLCBCVUxLWT0xICovCisgICB7IFNPQzE1X1JF
R19FTlRSWShHQywgMCwgbW1DT01QVVRFX1BHTV9SU1JDMSksIDB4M2YgfSwKICAgIHsgU09DMTVf
UkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfUEdNX1JTUkMyKSwgMHg0MDAwMDAgfSwgIC8qIDY0
S0IgTERTICovCiB9OwogCi1zdGF0aWMgY29uc3Qgc3RydWN0IHNvYzE1X3JlZ19lbnRyeSBzZ3By
X2luaXRfcmVnc1tdID0gewotICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9T
VEFUSUNfVEhSRUFEX01HTVRfU0UwKSwgMHhmZmZmZmZmZiB9LAotICAgeyBTT0MxNV9SRUdfRU5U
UlkoR0MsIDAsIG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0UxKSwgMHhmZmZmZmZmZiB9
LAotICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01H
TVRfU0UyKSwgMHhmZmZmZmZmZiB9LAotICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09N
UFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0UzKSwgMHhmZmZmZmZmZiB9LAotICAgeyBTT0MxNV9S
RUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9SRVNPVVJDRV9MSU1JVFMpLCAweDEwMDAwMDAgfSwg
LyogQ1VfR1JPVVBfQ09VTlQ9MSAqLwotICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09N
UFVURV9OVU1fVEhSRUFEX1gpLCAyNTYqMiB9LAotICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAs
IG1tQ09NUFVURV9OVU1fVEhSRUFEX1kpLCAxIH0sCitzdGF0aWMgY29uc3Qgc3RydWN0IHNvYzE1
X3JlZ19lbnRyeSBzZ3ByMV9pbml0X3JlZ3NbXSA9IHsKKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdD
LCAwLCBtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9NR01UX1NFMCksIDB4MDAwMDAwZmYgfSwKKyAg
IHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9NR01UX1NF
MSksIDB4MDAwMDAwZmYgfSwKKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVf
U1RBVElDX1RIUkVBRF9NR01UX1NFMiksIDB4MDAwMDAwZmYgfSwKKyAgIHsgU09DMTVfUkVHX0VO
VFJZKEdDLCAwLCBtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9NR01UX1NFMyksIDB4MDAwMDAwZmYg
fSwKKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfUkVTT1VSQ0VfTElNSVRT
KSwgMHgwMDAwMDAwIH0sCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1DT01QVVRFX05V
TV9USFJFQURfWCksIDB4NDAgfSwKKyAgIHsgU09DMTVfUkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBV
VEVfTlVNX1RIUkVBRF9ZKSwgOCB9LAorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09N
UFVURV9OVU1fVEhSRUFEX1opLCAxIH0sCisgICB7IFNPQzE1X1JFR19FTlRSWShHQywgMCwgbW1D
T01QVVRFX1BHTV9SU1JDMSksIDB4MjQwIH0sIC8qICg4MCBHUFJTKSAqLworICAgeyBTT0MxNV9S
RUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9QR01fUlNSQzIpLCAweDAgfSwKK307CisKK3N0YXRp
YyBjb25zdCBzdHJ1Y3Qgc29jMTVfcmVnX2VudHJ5IHNncHIyX2luaXRfcmVnc1tdID0geworICAg
eyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0Uw
KSwgMHgwMDAwZmYwMCB9LAorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9T
VEFUSUNfVEhSRUFEX01HTVRfU0UxKSwgMHgwMDAwZmYwMCB9LAorICAgeyBTT0MxNV9SRUdfRU5U
UlkoR0MsIDAsIG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0UyKSwgMHgwMDAwZmYwMCB9
LAorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01H
TVRfU0UzKSwgMHgwMDAwZmYwMCB9LAorICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09N
UFVURV9SRVNPVVJDRV9MSU1JVFMpLCAweDAwMDAwMDAgfSwKKyAgIHsgU09DMTVfUkVHX0VOVFJZ
KEdDLCAwLCBtbUNPTVBVVEVfTlVNX1RIUkVBRF9YKSwgMHg0MCB9LAorICAgeyBTT0MxNV9SRUdf
RU5UUlkoR0MsIDAsIG1tQ09NUFVURV9OVU1fVEhSRUFEX1kpLCA4IH0sCiAgICB7IFNPQzE1X1JF
R19FTlRSWShHQywgMCwgbW1DT01QVVRFX05VTV9USFJFQURfWiksIDEgfSwKLSAgIHsgU09DMTVf
UkVHX0VOVFJZKEdDLCAwLCBtbUNPTVBVVEVfUEdNX1JTUkMxKSwgMHgzNDAgfSwgLyogU0dQUlM9
MTMgKDExMiBHUFJTKSAqLworICAgeyBTT0MxNV9SRUdfRU5UUlkoR0MsIDAsIG1tQ09NUFVURV9Q
R01fUlNSQzEpLCAweDI0MCB9LCAvKiAoODAgR1BSUykgKi8KICAgIHsgU09DMTVfUkVHX0VOVFJZ
KEdDLCAwLCBtbUNPTVBVVEVfUEdNX1JTUkMyKSwgMHgwIH0sCiB9OwogCkBAIC00MDY1LDcgKzQw
NzgsOSBAQCBzdGF0aWMgaW50IGdmeF92OV8wX2RvX2VkY19ncHJfd29ya2Fyb3VuZHMoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJdG90YWxfc2l6ZSA9CiAJCSgoQVJSQVlfU0laRSh2Z3By
X2luaXRfcmVncykgKiAzKSArIDQgKyA1ICsgMikgKiA0OwogCXRvdGFsX3NpemUgKz0KLQkJKChB
UlJBWV9TSVpFKHNncHJfaW5pdF9yZWdzKSAqIDMpICsgNCArIDUgKyAyKSAqIDQ7CisJCSgoQVJS
QVlfU0laRShzZ3ByMV9pbml0X3JlZ3MpICogMykgKyA0ICsgNSArIDIpICogNDsKKwl0b3RhbF9z
aXplICs9CisJCSgoQVJSQVlfU0laRShzZ3ByMl9pbml0X3JlZ3MpICogMykgKyA0ICsgNSArIDIp
ICogNDsKIAl0b3RhbF9zaXplID0gQUxJR04odG90YWxfc2l6ZSwgMjU2KTsKIAl2Z3ByX29mZnNl
dCA9IHRvdGFsX3NpemU7CiAJdG90YWxfc2l6ZSArPSBBTElHTihzaXplb2Yodmdwcl9pbml0X2Nv
bXB1dGVfc2hhZGVyKSwgMjU2KTsKQEAgLTQxMDgsNyArNDEyMywzNSBAQCBzdGF0aWMgaW50IGdm
eF92OV8wX2RvX2VkY19ncHJfd29ya2Fyb3VuZHMoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
CiAKIAkvKiB3cml0ZSBkaXNwYXRjaCBwYWNrZXQgKi8KIAlpYi5wdHJbaWIubGVuZ3RoX2R3Kytd
ID0gUEFDS0VUMyhQQUNLRVQzX0RJU1BBVENIX0RJUkVDVCwgMyk7Ci0JaWIucHRyW2liLmxlbmd0
aF9kdysrXSA9IDI1NjsgLyogeCAqLworCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSAweDQwKjI7
IC8qIHggKi8KKwlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gMTsgLyogeSAqLworCWliLnB0cltp
Yi5sZW5ndGhfZHcrK10gPSAxOyAvKiB6ICovCisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9CisJ
CVJFR19TRVRfRklFTEQoMCwgQ09NUFVURV9ESVNQQVRDSF9JTklUSUFUT1IsIENPTVBVVEVfU0hB
REVSX0VOLCAxKTsKKworCS8qIHdyaXRlIENTIHBhcnRpYWwgZmx1c2ggcGFja2V0ICovCisJaWIu
cHRyW2liLmxlbmd0aF9kdysrXSA9IFBBQ0tFVDMoUEFDS0VUM19FVkVOVF9XUklURSwgMCk7CisJ
aWIucHRyW2liLmxlbmd0aF9kdysrXSA9IEVWRU5UX1RZUEUoNykgfCBFVkVOVF9JTkRFWCg0KTsK
KworCS8qIFNHUFIxICovCisJLyogd3JpdGUgdGhlIHJlZ2lzdGVyIHN0YXRlIGZvciB0aGUgY29t
cHV0ZSBkaXNwYXRjaCAqLworCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKHNncHIxX2luaXRf
cmVncyk7IGkrKykgeworCQlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gUEFDS0VUMyhQQUNLRVQz
X1NFVF9TSF9SRUcsIDEpOworCQlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gU09DMTVfUkVHX0VO
VFJZX09GRlNFVChzZ3ByMV9pbml0X3JlZ3NbaV0pCisJCQkJCQkJCS0gUEFDS0VUM19TRVRfU0hf
UkVHX1NUQVJUOworCQlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gc2dwcjFfaW5pdF9yZWdzW2ld
LnJlZ192YWx1ZTsKKwl9CisJLyogd3JpdGUgdGhlIHNoYWRlciBzdGFydCBhZGRyZXNzOiBtbUNP
TVBVVEVfUEdNX0xPLCBtbUNPTVBVVEVfUEdNX0hJICovCisJZ3B1X2FkZHIgPSAoaWIuZ3B1X2Fk
ZHIgKyAodTY0KXNncHJfb2Zmc2V0KSA+PiA4OworCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSBQ
QUNLRVQzKFBBQ0tFVDNfU0VUX1NIX1JFRywgMik7CisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9
IFNPQzE1X1JFR19PRkZTRVQoR0MsIDAsIG1tQ09NUFVURV9QR01fTE8pCisJCQkJCQkJLSBQQUNL
RVQzX1NFVF9TSF9SRUdfU1RBUlQ7CisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IGxvd2VyXzMy
X2JpdHMoZ3B1X2FkZHIpOworCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSB1cHBlcl8zMl9iaXRz
KGdwdV9hZGRyKTsKKworCS8qIHdyaXRlIGRpc3BhdGNoIHBhY2tldCAqLworCWliLnB0cltpYi5s
ZW5ndGhfZHcrK10gPSBQQUNLRVQzKFBBQ0tFVDNfRElTUEFUQ0hfRElSRUNULCAzKTsKKwlpYi5w
dHJbaWIubGVuZ3RoX2R3KytdID0gMHhBMCoyOyAvKiB4ICovCiAJaWIucHRyW2liLmxlbmd0aF9k
dysrXSA9IDE7IC8qIHkgKi8KIAlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gMTsgLyogeiAqLwog
CWliLnB0cltpYi5sZW5ndGhfZHcrK10gPQpAQCAtNDExOCwxMyArNDE2MSwxMyBAQCBzdGF0aWMg
aW50IGdmeF92OV8wX2RvX2VkY19ncHJfd29ya2Fyb3VuZHMoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpCiAJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IFBBQ0tFVDMoUEFDS0VUM19FVkVOVF9X
UklURSwgMCk7CiAJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IEVWRU5UX1RZUEUoNykgfCBFVkVO
VF9JTkRFWCg0KTsKIAotCS8qIFNHUFIgKi8KKwkvKiBTR1BSMiAqLwogCS8qIHdyaXRlIHRoZSBy
ZWdpc3RlciBzdGF0ZSBmb3IgdGhlIGNvbXB1dGUgZGlzcGF0Y2ggKi8KLQlmb3IgKGkgPSAwOyBp
IDwgQVJSQVlfU0laRShzZ3ByX2luaXRfcmVncyk7IGkrKykgeworCWZvciAoaSA9IDA7IGkgPCBB
UlJBWV9TSVpFKHNncHIyX2luaXRfcmVncyk7IGkrKykgewogCQlpYi5wdHJbaWIubGVuZ3RoX2R3
KytdID0gUEFDS0VUMyhQQUNLRVQzX1NFVF9TSF9SRUcsIDEpOwotCQlpYi5wdHJbaWIubGVuZ3Ro
X2R3KytdID0gU09DMTVfUkVHX0VOVFJZX09GRlNFVChzZ3ByX2luaXRfcmVnc1tpXSkKKwkJaWIu
cHRyW2liLmxlbmd0aF9kdysrXSA9IFNPQzE1X1JFR19FTlRSWV9PRkZTRVQoc2dwcjJfaW5pdF9y
ZWdzW2ldKQogCQkJCQkJCQktIFBBQ0tFVDNfU0VUX1NIX1JFR19TVEFSVDsKLQkJaWIucHRyW2li
Lmxlbmd0aF9kdysrXSA9IHNncHJfaW5pdF9yZWdzW2ldLnJlZ192YWx1ZTsKKwkJaWIucHRyW2li
Lmxlbmd0aF9kdysrXSA9IHNncHIyX2luaXRfcmVnc1tpXS5yZWdfdmFsdWU7CiAJfQogCS8qIHdy
aXRlIHRoZSBzaGFkZXIgc3RhcnQgYWRkcmVzczogbW1DT01QVVRFX1BHTV9MTywgbW1DT01QVVRF
X1BHTV9ISSAqLwogCWdwdV9hZGRyID0gKGliLmdwdV9hZGRyICsgKHU2NClzZ3ByX29mZnNldCkg
Pj4gODsKQEAgLTQxMzYsNyArNDE3OSw3IEBAIHN0YXRpYyBpbnQgZ2Z4X3Y5XzBfZG9fZWRjX2dw
cl93b3JrYXJvdW5kcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAogCS8qIHdyaXRlIGRp
c3BhdGNoIHBhY2tldCAqLwogCWliLnB0cltpYi5sZW5ndGhfZHcrK10gPSBQQUNLRVQzKFBBQ0tF
VDNfRElTUEFUQ0hfRElSRUNULCAzKTsKLQlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0gMjU2OyAv
KiB4ICovCisJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9IDB4QTAqMjsgLyogeCAqLwogCWliLnB0
cltpYi5sZW5ndGhfZHcrK10gPSAxOyAvKiB5ICovCiAJaWIucHRyW2liLmxlbmd0aF9kdysrXSA9
IDE7IC8qIHogKi8KIAlpYi5wdHJbaWIubGVuZ3RoX2R3KytdID0KLS0gCjIuNy40CgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcg
bGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
