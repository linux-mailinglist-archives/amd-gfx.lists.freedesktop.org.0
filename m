Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 58D3067531
	for <lists+amd-gfx@lfdr.de>; Fri, 12 Jul 2019 20:45:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CE16C89AEE;
	Fri, 12 Jul 2019 18:45:05 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7E28889AEE
 for <amd-gfx@lists.freedesktop.org>; Fri, 12 Jul 2019 18:45:03 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id x4so10928368wrt.6
 for <amd-gfx@lists.freedesktop.org>; Fri, 12 Jul 2019 11:45:03 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=/n/i7SsSLvXx//qN6SI7USU8ozwxeOvu/yoNR2eCfsg=;
 b=CcRyrrLJPZGv52by2K/6xBdMn8Q+fqiHiilUAHXbVJhavd3gTscUxhJinX331GnvGw
 uahkxgTar6jEd7v3BixE+QEcO5qhUTHNrRfodeOi5zoNijhbo67VPtLmFNCLQKEId2AL
 EZJc4U3gEgxnbW822hG9zhYZo1tHwk/C/CRQE3/bCotix6HOod5RWf0SDJ1YcVIpq+PQ
 dnnqKuB6cruWCz7FyvcvoNcO2A3tMr32fk23eFXACfjitOMymq9TsdvkfGQsYE6kSUXW
 17w+o2MKSEkLTXcIZ1SNcY17plOvD61i/VZ55GYoqKiFy/l1+UXibWGzcswlDw1DqEr5
 ekWg==
X-Gm-Message-State: APjAAAVFmKKP77IvAotRhPqZVBq7SAndP7ecOgU6qOG6w89XGj6Waadm
 4LcD3jp+bdfyNwA+iJjpMi1JV6D1XlnfB1IoblQ=
X-Google-Smtp-Source: APXvYqzdAPHBZK76ezFMewU2D5WUhDU7fytJhnn9lwqS6OD9zcKWRf9ZG8Rq7DrQfg+7kPHwiD+JhwKQ2fOcq0U3MhY=
X-Received: by 2002:adf:ebce:: with SMTP id v14mr11876826wrn.341.1562957102040; 
 Fri, 12 Jul 2019 11:45:02 -0700 (PDT)
MIME-Version: 1.0
References: <20190712183847.2897-1-jonathan.kim@amd.com>
In-Reply-To: <20190712183847.2897-1-jonathan.kim@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Fri, 12 Jul 2019 14:44:50 -0400
Message-ID: <CADnq5_P1XC5b2AFMoT3hxP+pkD16iNTeeH81JAFzVudPR_4d=g@mail.gmail.com>
Subject: Re: [PATCH 1/2] drm/amdgpu: add perfmon and fica atomics for df
To: "Kim, Jonathan" <Jonathan.Kim@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=/n/i7SsSLvXx//qN6SI7USU8ozwxeOvu/yoNR2eCfsg=;
 b=ppPr0rCh9FUwGmAmx2Orp/GR6QxFoP0rxOkCDMVKCntgl/sLpzLxTQ0hKoHcJmUKao
 orhTjOuvmdd+fob8mtBZw3DNEGMNzegndYtfOtwNYbslN9ogHvsYjj3XNxRmld+hjHPY
 UcQz+qIqzuaTmFNydjTuMOwMQXFTte6aJ45R/JfRFrWAwGgxYkjSPBLVO1l5Unk+r8HD
 t2GbkcxYQhZ11rnmZYh+uRYutcCQubsF/am0nc0S150PgsWeh2gJDbLPo9wkJ77Lv43j
 7pFaPQK+DIW2Xucc2AgJ5zL40CO0z50ZJE1fAYGPG+bIaiWc5JAvH3a06tER9V0e3iqq
 1now==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBKdWwgMTIsIDIwMTkgYXQgMjozOSBQTSBLaW0sIEpvbmF0aGFuIDxKb25hdGhhbi5L
aW1AYW1kLmNvbT4gd3JvdGU6Cj4KPiBhZGRpbmcgcGVyZm1vbiBhbmQgZmljYSBhdG9taWMgb3Bl
cmF0aW9ucyB0byBhZGhlcmUgdG8gZGF0YSBmYWJyaWNzIGZpbml0ZQo+IHN0YXRlIG1hY2hpbmUg
cmVxdWlyZW1lbnRzIGZvciBpbmRpcmVjdCByZWdpc3RlciBhY2Nlc3MuCj4KPiBDaGFuZ2UtSWQ6
IEkyYWIxN2ZkNTlkNTY2YjQyNTFjOWE5ZDBlNjdiODk3YjhjMjIxMjQ5Cj4gU2lnbmVkLW9mZi1i
eTogSm9uYXRoYW4gS2ltIDxKb25hdGhhbi5LaW1AYW1kLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmggIHwgICAzICsKPiAgZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvZGZfdjNfNi5jIHwgMjAyICsrKysrKysrKysrKysrKysrLS0tLS0tLS0tLQo+ICAy
IGZpbGVzIGNoYW5nZWQsIDEyOCBpbnNlcnRpb25zKCspLCA3NyBkZWxldGlvbnMoLSkKPgo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaCBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCj4gaW5kZXggZTY0NjllMjNiNzZmLi4xOThhYTYw
YzQzYmQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaAo+IEBAIC03MDcsNiAr
NzA3LDkgQEAgc3RydWN0IGFtZGdwdV9kZl9mdW5jcyB7Cj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpbnQgaXNfZGlzYWJsZSk7Cj4gICAgICAgICB2b2lkICgqcG1j
X2dldF9jb3VudCkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90IGNvbmZpZywK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90ICpjb3Vu
dCk7Cj4gKyAgICAgICB1aW50NjRfdCAoKmdldF9maWNhKShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiwgdWludDMyX3QgZmljYWFfdmFsKTsKPiArICAgICAgIHZvaWQgKCpzZXRfZmljYSkoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQzMl90IGZpY2FhX3ZhbCwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgdWludDMyX3QgZmljYWRsX3ZhbCwgdWludDMyX3QgZmljYWRoX3ZhbCk7
Cj4gIH07Cj4gIC8qIERlZmluZSB0aGUgSFcgSVAgYmxvY2tzIHdpbGwgYmUgdXNlZCBpbiBkcml2
ZXIgLCBhZGQgbW9yZSBpZiBuZWNlc3NhcnkgKi8KPiAgZW51bSBhbWRfaHdfaXBfYmxvY2tfdHlw
ZSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuYyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuYwo+IGluZGV4IGVmNmU5MWY5ZjUx
Yy4uZGNjN2JlMGM5ZDMwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2RmX3YzXzYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuYwo+
IEBAIC05Myw2ICs5Myw5NiBAQCBjb25zdCBzdHJ1Y3QgYXR0cmlidXRlX2dyb3VwICpkZl92M182
X2F0dHJfZ3JvdXBzW10gPSB7Cj4gICAgICAgICAgICAgICAgIE5VTEwKPiAgfTsKPgo+ICtzdGF0
aWMgdWludDY0X3QgZGZfdjNfNl9nZXRfZmljYShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBmaWNhYV92YWwpCj4g
K3sKPiArICAgICAgIHVuc2lnbmVkIGxvbmcgZmxhZ3MsIGFkZHJlc3MsIGRhdGE7Cj4gKyAgICAg
ICB1aW50MzJfdCBmaWNhZGxfdmFsLCBmaWNhZGhfdmFsOwo+ICsKPiArICAgICAgIGFkZHJlc3Mg
PSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNpZV9pbmRleF9vZmZzZXQoYWRldik7Cj4gKyAgICAg
ICBkYXRhID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfZGF0YV9vZmZzZXQoYWRldik7Cj4g
Kwo+ICsgICAgICAgc3Bpbl9sb2NrX2lycXNhdmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdz
KTsKPiArICAgICAgIFdSRUczMihhZGRyZXNzLCBzbW5ERl9QSUVfQU9OX0ZhYnJpY0luZGlyZWN0
Q29uZmlnQWNjZXNzQWRyZXNzNSk7Cj4gKyAgICAgICBXUkVHMzIoZGF0YSwgZmljYWFfdmFsKTsK
PiArCj4gKyAgICAgICBXUkVHMzIoYWRkcmVzcywgc21uREZfUElFX0FPTl9GYWJyaWNJbmRpcmVj
dENvbmZpZ0FjY2Vzc0RhdGFMbzUpOwo+ICsgICAgICAgZmljYWRsX3ZhbCA9IFJSRUczMihkYXRh
KTsKPiArCj4gKyAgICAgICBXUkVHMzIoYWRkcmVzcywgc21uREZfUElFX0FPTl9GYWJyaWNJbmRp
cmVjdENvbmZpZ0FjY2Vzc0RhdGFIaTUpOwo+ICsgICAgICAgZmljYWRoX3ZhbCA9IFJSRUczMihk
YXRhKTsKPiArCj4gKyAgICAgICBzcGluX3VubG9ja19pcnFyZXN0b3JlKCZhZGV2LT5wY2llX2lk
eF9sb2NrLCBmbGFncyk7CgpBbnkgcmVhc29uIHRvIG9wZW4gY29kZSB0aGUgdHJhbnNhY3Rpb25z
IHJhdGhlciB0aGFuIHVzaW5nIHRoZQpSUkVHMzJfUENJRS9XUkVHMzJfUENJRSBtYWNyb3M/CgpB
bGV4Cgo+ICsKPiArICAgICAgIHJldHVybiAoKChmaWNhZGhfdmFsICYgMHhGRkZGRkZGRkZGRkZG
RkZGKSA8PCAzMikgfCBmaWNhZGxfdmFsKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgZGZfdjNf
Nl9zZXRfZmljYShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgZmljYWFfdmFs
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgZmljYWRsX3ZhbCwgdWlu
dDMyX3QgZmljYWRoX3ZhbCkKPiArewo+ICsgICAgICAgdW5zaWduZWQgbG9uZyBmbGFncywgYWRk
cmVzcywgZGF0YTsKPiArCj4gKyAgICAgICBhZGRyZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0
X3BjaWVfaW5kZXhfb2Zmc2V0KGFkZXYpOwo+ICsgICAgICAgZGF0YSA9IGFkZXYtPm5iaW9fZnVu
Y3MtPmdldF9wY2llX2RhdGFfb2Zmc2V0KGFkZXYpOwo+ICsKPiArICAgICAgIHNwaW5fbG9ja19p
cnFzYXZlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7Cj4gKyAgICAgICBXUkVHMzIoYWRk
cmVzcywgc21uREZfUElFX0FPTl9GYWJyaWNJbmRpcmVjdENvbmZpZ0FjY2Vzc0FkcmVzczUpOwo+
ICsgICAgICAgV1JFRzMyKGRhdGEsIGZpY2FhX3ZhbCk7Cj4gKwo+ICsgICAgICAgV1JFRzMyKGFk
ZHJlc3MsIHNtbkRGX1BJRV9BT05fRmFicmljSW5kaXJlY3RDb25maWdBY2Nlc3NEYXRhTG81KTsK
PiArICAgICAgIFdSRUczMihkYXRhLCBmaWNhZGxfdmFsKTsKPiArCj4gKyAgICAgICBXUkVHMzIo
YWRkcmVzcywgc21uREZfUElFX0FPTl9GYWJyaWNJbmRpcmVjdENvbmZpZ0FjY2Vzc0RhdGFIaTUp
Owo+ICsgICAgICAgV1JFRzMyKGRhdGEsIGZpY2FkaF92YWwpOwo+ICsKPiArICAgICAgIHNwaW5f
dW5sb2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsKPiArfQo+ICsK
PiArLyoKPiArICogZGZfdjNfNl9wZXJmbW9uX3JyZWcgLSByZWFkIHBlcmZtb24gbG8gYW5kIGhp
Cj4gKyAqCj4gKyAqIHJlcXVpcmVkIHRvIGJlIGF0b21pYy4gIG5vIG1taW8gbWV0aG9kIHByb3Zp
ZGVkIHNvIHN1YnNlcXVlbnQgcmVhZHMgZm9yIGxvCj4gKyAqIGFuZCBoaSByZXF1aXJlIHRvIHBy
ZXNlcnZlIGRmIGZpbml0ZSBzdGF0ZSBtYWNoaW5lCj4gKyAqLwo+ICtzdGF0aWMgdm9pZCBkZl92
M182X3BlcmZtb25fcnJlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdWludDMyX3QgbG9fYWRkciwgdWludDMyX3QgKmxvX3ZhbCwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgaGlfYWRkciwgdWludDMyX3QgKmhp
X3ZhbCkKPiArewo+ICsgICAgICAgdW5zaWduZWQgbG9uZyBmbGFncywgYWRkcmVzcywgZGF0YTsK
PiArCj4gKyAgICAgICBhZGRyZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfaW5kZXhf
b2Zmc2V0KGFkZXYpOwo+ICsgICAgICAgZGF0YSA9IGFkZXYtPm5iaW9fZnVuY3MtPmdldF9wY2ll
X2RhdGFfb2Zmc2V0KGFkZXYpOwo+ICsKPiArICAgICAgIHNwaW5fbG9ja19pcnFzYXZlKCZhZGV2
LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7Cj4gKyAgICAgICBXUkVHMzIoYWRkcmVzcywgbG9fYWRk
cik7Cj4gKyAgICAgICAqbG9fdmFsID0gUlJFRzMyKGRhdGEpOwo+ICsgICAgICAgV1JFRzMyKGFk
ZHJlc3MsIGhpX2FkZHIpOwo+ICsgICAgICAgKmhpX3ZhbCA9IFJSRUczMihkYXRhKTsKPiArICAg
ICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsK
PiArfQo+ICsKPiArLyoKPiArICogZGZfdjNfNl9wZXJmbW9uX3dyZWcgLSB3cml0ZSB0byBwZXJm
bW9uIGxvIGFuZCBoaQo+ICsgKgo+ICsgKiByZXF1aXJlZCB0byBiZSBhdG9taWMuICBubyBtbWlv
IG1ldGhvZCBwcm92aWRlZCBzbyBzdWJzZXF1ZW50IHJlYWRzIGFmdGVyCj4gKyAqIGRhdGEgd3Jp
dGVzIGNhbm5vdCBvY2N1ciB0byBwcmVzZXJ2ZSBkYXRhIGZhYnJpY3MgZmluaXRlIHN0YXRlIG1h
Y2hpbmUuCj4gKyAqLwo+ICtzdGF0aWMgdm9pZCBkZl92M182X3BlcmZtb25fd3JlZyhzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgbG9fYWRkciwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdWludDMyX3QgbG9fdmFsLCB1aW50MzJfdCBoaV9hZGRyLCB1aW50MzJfdCBo
aV92YWwpCj4gK3sKPiArICAgICAgIHVuc2lnbmVkIGxvbmcgZmxhZ3MsIGFkZHJlc3MsIGRhdGE7
Cj4gKwo+ICsgICAgICAgYWRkcmVzcyA9IGFkZXYtPm5iaW9fZnVuY3MtPmdldF9wY2llX2luZGV4
X29mZnNldChhZGV2KTsKPiArICAgICAgIGRhdGEgPSBhZGV2LT5uYmlvX2Z1bmNzLT5nZXRfcGNp
ZV9kYXRhX29mZnNldChhZGV2KTsKPiArCj4gKyAgICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmYWRl
di0+cGNpZV9pZHhfbG9jaywgZmxhZ3MpOwo+ICsgICAgICAgV1JFRzMyKGFkZHJlc3MsIGxvX2Fk
ZHIpOwo+ICsgICAgICAgV1JFRzMyKGRhdGEsIGxvX3ZhbCk7Cj4gKyAgICAgICBXUkVHMzIoYWRk
cmVzcywgaGlfYWRkcik7Cj4gKyAgICAgICBXUkVHMzIoZGF0YSwgaGlfdmFsKTsKPiArICAgICAg
IHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsKPiAr
fQo+ICsKPiAgLyogZ2V0IHRoZSBudW1iZXIgb2YgZGYgY291bnRlcnMgYXZhaWxhYmxlICovCj4g
IHN0YXRpYyBzc2l6ZV90IGRmX3YzXzZfZ2V0X2RmX2NudHJfYXZhaWwoc3RydWN0IGRldmljZSAq
ZGV2LAo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwKPiBA
QCAtMjY4LDYgKzM1OCwxMCBAQCBzdGF0aWMgaW50IGRmX3YzXzZfcG1jX2dldF9jdHJsX3NldHRp
bmdzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVpbnQzMl90ICpsb192YWwsCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgKmhpX3ZhbCkKPiAgewo+ICsKPiArICAg
ICAgIHVpbnQzMl90IGV2ZW50c2VsLCBpbnN0YW5jZSwgdW5pdG1hc2s7Cj4gKyAgICAgICB1aW50
MzJfdCBpbnN0YW5jZV8xMCwgaW5zdGFuY2VfNTQzMiwgaW5zdGFuY2VfNzY7Cj4gKwo+ICAgICAg
ICAgZGZfdjNfNl9wbWNfZ2V0X2FkZHIoYWRldiwgY29uZmlnLCAxLCBsb19iYXNlX2FkZHIsIGhp
X2Jhc2VfYWRkcik7Cj4KPiAgICAgICAgIGlmICgoKmxvX2Jhc2VfYWRkciA9PSAwKSB8fCAoKmhp
X2Jhc2VfYWRkciA9PSAwKSkgewo+IEBAIC0yNzYsNDAgKzM3MCwzMyBAQCBzdGF0aWMgaW50IGRm
X3YzXzZfcG1jX2dldF9jdHJsX3NldHRpbmdzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+
ICAgICAgICAgICAgICAgICByZXR1cm4gLUVOWElPOwo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBp
ZiAobG9fdmFsICYmIGhpX3ZhbCkgewo+IC0gICAgICAgICAgICAgICB1aW50MzJfdCBldmVudHNl
bCwgaW5zdGFuY2UsIHVuaXRtYXNrOwo+IC0gICAgICAgICAgICAgICB1aW50MzJfdCBpbnN0YW5j
ZV8xMCwgaW5zdGFuY2VfNTQzMiwgaW5zdGFuY2VfNzY7Cj4gKyAgICAgICBldmVudHNlbCA9IERG
X1YzXzZfR0VUX0VWRU5UKGNvbmZpZykgJiAweDNmOwo+ICsgICAgICAgdW5pdG1hc2sgPSBERl9W
M182X0dFVF9VTklUTUFTSyhjb25maWcpICYgMHhmOwo+ICsgICAgICAgaW5zdGFuY2UgPSBERl9W
M182X0dFVF9JTlNUQU5DRShjb25maWcpOwo+Cj4gLSAgICAgICAgICAgICAgIGV2ZW50c2VsID0g
REZfVjNfNl9HRVRfRVZFTlQoY29uZmlnKSAmIDB4M2Y7Cj4gLSAgICAgICAgICAgICAgIHVuaXRt
YXNrID0gREZfVjNfNl9HRVRfVU5JVE1BU0soY29uZmlnKSAmIDB4ZjsKPiAtICAgICAgICAgICAg
ICAgaW5zdGFuY2UgPSBERl9WM182X0dFVF9JTlNUQU5DRShjb25maWcpOwo+ICsgICAgICAgaW5z
dGFuY2VfMTAgPSBpbnN0YW5jZSAmIDB4MzsKPiArICAgICAgIGluc3RhbmNlXzU0MzIgPSAoaW5z
dGFuY2UgPj4gMikgJiAweGY7Cj4gKyAgICAgICBpbnN0YW5jZV83NiA9IChpbnN0YW5jZSA+PiA2
KSAmIDB4MzsKPgo+IC0gICAgICAgICAgICAgICBpbnN0YW5jZV8xMCA9IGluc3RhbmNlICYgMHgz
Owo+IC0gICAgICAgICAgICAgICBpbnN0YW5jZV81NDMyID0gKGluc3RhbmNlID4+IDIpICYgMHhm
Owo+IC0gICAgICAgICAgICAgICBpbnN0YW5jZV83NiA9IChpbnN0YW5jZSA+PiA2KSAmIDB4MzsK
PiArICAgICAgICpsb192YWwgPSAodW5pdG1hc2sgPDwgOCkgfCAoaW5zdGFuY2VfMTAgPDwgNikg
fCBldmVudHNlbCB8ICgxIDw8IDIyKTsKPiArICAgICAgICpoaV92YWwgPSAoaW5zdGFuY2VfNzYg
PDwgMjkpIHwgaW5zdGFuY2VfNTQzMjsKPgo+IC0gICAgICAgICAgICAgICAqbG9fdmFsID0gKHVu
aXRtYXNrIDw8IDgpIHwgKGluc3RhbmNlXzEwIDw8IDYpIHwgZXZlbnRzZWw7Cj4gLSAgICAgICAg
ICAgICAgICpoaV92YWwgPSAoaW5zdGFuY2VfNzYgPDwgMjkpIHwgaW5zdGFuY2VfNTQzMjsKPiAt
ICAgICAgIH0KPiArICAgICAgIERSTV9ERUJVR19EUklWRVIoImNvbmZpZz0lbGx4IGFkZHI9JTA4
eDolMDh4IHZhbD0lMDh4OiUwOHgiLAo+ICsgICAgICAgICAgICAgICBjb25maWcsIGxvX2Jhc2Vf
YWRkciwgaGlfYmFzZV9hZGRyLCBsb192YWwsIGhpX3ZhbCk7Cj4KPiAgICAgICAgIHJldHVybiAw
Owo+ICB9Cj4KPiAtLyogYXNzaWduIGRmIHBlcmZvcm1hbmNlIGNvdW50ZXJzIGZvciByZWFkICov
Cj4gLXN0YXRpYyBpbnQgZGZfdjNfNl9wbWNfYXNzaWduX2NudHIoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBj
b25maWcsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgKmlzX2Fzc2ln
bmVkKQo+ICsvKiBhZGQgZGYgcGVyZm9ybWFuY2UgY291bnRlcnMgZm9yIHJlYWQgKi8KPiArc3Rh
dGljIGludCBkZl92M182X3BtY19hZGRfY250cihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IGNvbmZpZykKPiAg
ewo+ICAgICAgICAgaW50IGksIHRhcmdldF9jbnRyOwo+Cj4gLSAgICAgICAqaXNfYXNzaWduZWQg
PSAwOwo+IC0KPiAgICAgICAgIHRhcmdldF9jbnRyID0gZGZfdjNfNl9wbWNfY29uZmlnXzJfY250
cihhZGV2LCBjb25maWcpOwo+Cj4gLSAgICAgICBpZiAodGFyZ2V0X2NudHIgPj0gMCkgewo+IC0g
ICAgICAgICAgICAgICAqaXNfYXNzaWduZWQgPSAxOwo+ICsgICAgICAgaWYgKHRhcmdldF9jbnRy
ID49IDApCj4gICAgICAgICAgICAgICAgIHJldHVybiAwOwo+IC0gICAgICAgfQo+Cj4gICAgICAg
ICBmb3IgKGkgPSAwOyBpIDwgREZfVjNfNl9NQVhfQ09VTlRFUlM7IGkrKykgewo+ICAgICAgICAg
ICAgICAgICBpZiAoYWRldi0+ZGZfcGVyZm1vbl9jb25maWdfYXNzaWduX21hc2tbaV0gPT0gMFUp
IHsKPiBAQCAtMzQ0LDQ1ICs0MzEsMTMgQEAgc3RhdGljIHZvaWQgZGZfdjNfNl9yZXNldF9wZXJm
bW9uX2NudHIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAgICAgICBpZiAoKGxvX2Jh
c2VfYWRkciA9PSAwKSB8fCAoaGlfYmFzZV9hZGRyID09IDApKQo+ICAgICAgICAgICAgICAgICBy
ZXR1cm47Cj4KPiAtICAgICAgIFdSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkciwgMFVMKTsKPiAtICAg
ICAgIFdSRUczMl9QQ0lFKGhpX2Jhc2VfYWRkciwgMFVMKTsKPiAtfQo+IC0KPiAtCj4gLXN0YXRp
YyBpbnQgZGZfdjNfNl9hZGRfcGVyZm1vbl9jbnRyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3QgY29uZmln
KQo+IC17Cj4gLSAgICAgICB1aW50MzJfdCBsb19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRkciwgbG9f
dmFsLCBoaV92YWw7Cj4gLSAgICAgICBpbnQgcmV0LCBpc19hc3NpZ25lZDsKPiAtCj4gLSAgICAg
ICByZXQgPSBkZl92M182X3BtY19hc3NpZ25fY250cihhZGV2LCBjb25maWcsICZpc19hc3NpZ25l
ZCk7Cj4gLQo+IC0gICAgICAgaWYgKHJldCB8fCBpc19hc3NpZ25lZCkKPiAtICAgICAgICAgICAg
ICAgcmV0dXJuIHJldDsKPiAtCj4gLSAgICAgICByZXQgPSBkZl92M182X3BtY19nZXRfY3RybF9z
ZXR0aW5ncyhhZGV2LAo+IC0gICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZywKPiAtICAgICAg
ICAgICAgICAgICAgICAgICAmbG9fYmFzZV9hZGRyLAo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICZoaV9iYXNlX2FkZHIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgJmxvX3ZhbCwKPiAtICAg
ICAgICAgICAgICAgICAgICAgICAmaGlfdmFsKTsKPiAtCj4gLSAgICAgICBpZiAocmV0KQo+IC0g
ICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+IC0KPiAtICAgICAgIERSTV9ERUJVR19EUklWRVIo
ImNvbmZpZz0lbGx4IGFkZHI9JTA4eDolMDh4IHZhbD0lMDh4OiUwOHgiLAo+IC0gICAgICAgICAg
ICAgICAgICAgICAgIGNvbmZpZywgbG9fYmFzZV9hZGRyLCBoaV9iYXNlX2FkZHIsIGxvX3ZhbCwg
aGlfdmFsKTsKPiAtCj4gLSAgICAgICBXUkVHMzJfUENJRShsb19iYXNlX2FkZHIsIGxvX3ZhbCk7
Cj4gLSAgICAgICBXUkVHMzJfUENJRShoaV9iYXNlX2FkZHIsIGhpX3ZhbCk7Cj4gLQo+IC0gICAg
ICAgcmV0dXJuIHJldDsKPiArICAgICAgIGRmX3YzXzZfcGVyZm1vbl93cmVnKGFkZXYsIGxvX2Jh
c2VfYWRkciwgMCwgaGlfYmFzZV9hZGRyLCAwKTsKPiAgfQo+Cj4gIHN0YXRpYyBpbnQgZGZfdjNf
Nl9wbWNfc3RhcnQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90IGNvbmZpZywK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBpc19lbmFibGUpCj4gIHsKPiAtICAg
ICAgIHVpbnQzMl90IGxvX2Jhc2VfYWRkciwgaGlfYmFzZV9hZGRyLCBsb192YWw7Cj4gKyAgICAg
ICB1aW50MzJfdCBsb19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRkciwgbG9fdmFsLCBoaV92YWw7Cj4g
ICAgICAgICBpbnQgcmV0ID0gMDsKPgo+ICAgICAgICAgc3dpdGNoIChhZGV2LT5hc2ljX3R5cGUp
IHsKPiBAQCAtMzkxLDI0ICs0NDYsMjAgQEAgc3RhdGljIGludCBkZl92M182X3BtY19zdGFydChz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3QgY29uZmlnLAo+ICAgICAgICAgICAg
ICAgICBkZl92M182X3Jlc2V0X3BlcmZtb25fY250cihhZGV2LCBjb25maWcpOwo+Cj4gICAgICAg
ICAgICAgICAgIGlmIChpc19lbmFibGUpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICByZXQg
PSBkZl92M182X2FkZF9wZXJmbW9uX2NudHIoYWRldiwgY29uZmlnKTsKPiArICAgICAgICAgICAg
ICAgICAgICAgICByZXQgPSBkZl92M182X3BtY19hZGRfY250cihhZGV2LCBjb25maWcpOwo+ICAg
ICAgICAgICAgICAgICB9IGVsc2Ugewo+ICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IGRm
X3YzXzZfcG1jX2dldF9jdHJsX3NldHRpbmdzKGFkZXYsCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNvbmZpZywKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJmxvX2Jhc2VfYWRkciwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJmhpX2Jhc2VfYWRkciwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgTlVMTCwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgTlVMTCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZsb192
YWwsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZoaV92YWwpOwo+
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldCkKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4KPiAtICAgICAgICAgICAgICAgICAgICAgICBsb192
YWwgPSBSUkVHMzJfUENJRShsb19iYXNlX2FkZHIpOwo+IC0KPiAtICAgICAgICAgICAgICAgICAg
ICAgICBEUk1fREVCVUdfRFJJVkVSKCJjb25maWc9JWxseCBhZGRyPSUwOHg6JTA4eCB2YWw9JTA4
eCIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsIGxvX2Jhc2VfYWRk
ciwgaGlfYmFzZV9hZGRyLCBsb192YWwpOwo+IC0KPiAtICAgICAgICAgICAgICAgICAgICAgICBX
UkVHMzJfUENJRShsb19iYXNlX2FkZHIsIGxvX3ZhbCB8ICgxVUxMIDw8IDIyKSk7Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgZGZfdjNfNl9wZXJmbW9uX3dyZWcoYWRldiwgbG9fYmFzZV9hZGRy
LCBsb192YWwsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpX2Jh
c2VfYWRkciwgaGlfdmFsKTsKPiAgICAgICAgICAgICAgICAgfQo+Cj4gICAgICAgICAgICAgICAg
IGJyZWFrOwo+IEBAIC00MjIsNyArNDczLDcgQEAgc3RhdGljIGludCBkZl92M182X3BtY19zdGFy
dChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3QgY29uZmlnLAo+ICBzdGF0aWMg
aW50IGRmX3YzXzZfcG1jX3N0b3Aoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90
IGNvbmZpZywKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGlzX2Rpc2FibGUpCj4g
IHsKPiAtICAgICAgIHVpbnQzMl90IGxvX2Jhc2VfYWRkciwgaGlfYmFzZV9hZGRyLCBsb192YWw7
Cj4gKyAgICAgICB1aW50MzJfdCBsb19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRkciwgbG9fdmFsLCBo
aV92YWw7Cj4gICAgICAgICBpbnQgcmV0ID0gMDsKPgo+ICAgICAgICAgc3dpdGNoIChhZGV2LT5h
c2ljX3R5cGUpIHsKPiBAQCAtNDMxLDE4ICs0ODIsMTMgQEAgc3RhdGljIGludCBkZl92M182X3Bt
Y19zdG9wKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBjb25maWcsCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgY29uZmlnLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICZs
b19iYXNlX2FkZHIsCj4gICAgICAgICAgICAgICAgICAgICAgICAgJmhpX2Jhc2VfYWRkciwKPiAt
ICAgICAgICAgICAgICAgICAgICAgICBOVUxMLAo+IC0gICAgICAgICAgICAgICAgICAgICAgIE5V
TEwpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICZsb192YWwsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgJmhpX3ZhbCk7Cj4KPiAgICAgICAgICAgICAgICAgaWYgKHJldCkKPiAgICAgICAg
ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+Cj4gLSAgICAgICAgICAgICAgIGxvX3ZhbCA9
IFJSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkcik7Cj4gLQo+IC0gICAgICAgICAgICAgICBEUk1fREVC
VUdfRFJJVkVSKCJjb25maWc9JWxseCBhZGRyPSUwOHg6JTA4eCB2YWw9JTA4eCIsCj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsIGxvX2Jhc2VfYWRkciwgaGlfYmFzZV9h
ZGRyLCBsb192YWwpOwo+IC0KPiAtICAgICAgICAgICAgICAgV1JFRzMyX1BDSUUobG9fYmFzZV9h
ZGRyLCBsb192YWwgJiB+KDFVTEwgPDwgMjIpKTsKPiArICAgICAgICAgICAgICAgZGZfdjNfNl9w
ZXJmbW9uX3dyZWcoYWRldiwgbG9fYmFzZV9hZGRyLCAwLCBoaV9iYXNlX2FkZHIsIDApOwo+Cj4g
ICAgICAgICAgICAgICAgIGlmIChpc19kaXNhYmxlKQo+ICAgICAgICAgICAgICAgICAgICAgICAg
IGRmX3YzXzZfcG1jX3JlbGVhc2VfY250cihhZGV2LCBjb25maWcpOwo+IEBAIC00NzEsOCArNTE3
LDggQEAgc3RhdGljIHZvaWQgZGZfdjNfNl9wbWNfZ2V0X2NvdW50KHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2LAo+ICAgICAgICAgICAgICAgICBpZiAoKGxvX2Jhc2VfYWRkciA9PSAwKSB8fCAo
aGlfYmFzZV9hZGRyID09IDApKQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKPgo+
IC0gICAgICAgICAgICAgICBsb192YWwgPSBSUkVHMzJfUENJRShsb19iYXNlX2FkZHIpOwo+IC0g
ICAgICAgICAgICAgICBoaV92YWwgPSBSUkVHMzJfUENJRShoaV9iYXNlX2FkZHIpOwo+ICsgICAg
ICAgICAgICAgICBkZl92M182X3BlcmZtb25fcnJlZyhhZGV2LCBsb19iYXNlX2FkZHIsICZsb192
YWwsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaV9iYXNlX2FkZHIsICZoaV92
YWwpOwo+Cj4gICAgICAgICAgICAgICAgICpjb3VudCAgPSAoKGhpX3ZhbCB8IDBVTEwpIDw8IDMy
KSB8IChsb192YWwgfCAwVUxMKTsKPgo+IEBAIC00ODAsNyArNTI2LDcgQEAgc3RhdGljIHZvaWQg
ZGZfdjNfNl9wbWNfZ2V0X2NvdW50KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICpjb3VudCA9IDA7Cj4KPiAgICAgICAgICAgICAgICAgRFJNX0RF
QlVHX0RSSVZFUigiY29uZmlnPSVsbHggYWRkcj0lMDh4OiUwOHggdmFsPSUwOHg6JTA4eCIsCj4g
LSAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLCBsb19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRk
ciwgbG9fdmFsLCBoaV92YWwpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsIGxv
X2Jhc2VfYWRkciwgaGlfYmFzZV9hZGRyLCBsb192YWwsIGhpX3ZhbCk7Cj4KPiAgICAgICAgICAg
ICAgICAgYnJlYWs7Cj4KPiBAQCAtNDk5LDUgKzU0NSw3IEBAIGNvbnN0IHN0cnVjdCBhbWRncHVf
ZGZfZnVuY3MgZGZfdjNfNl9mdW5jcyA9IHsKPiAgICAgICAgIC5nZXRfY2xvY2tnYXRpbmdfc3Rh
dGUgPSBkZl92M182X2dldF9jbG9ja2dhdGluZ19zdGF0ZSwKPiAgICAgICAgIC5wbWNfc3RhcnQg
PSBkZl92M182X3BtY19zdGFydCwKPiAgICAgICAgIC5wbWNfc3RvcCA9IGRmX3YzXzZfcG1jX3N0
b3AsCj4gLSAgICAgICAucG1jX2dldF9jb3VudCA9IGRmX3YzXzZfcG1jX2dldF9jb3VudAo+ICsg
ICAgICAgLnBtY19nZXRfY291bnQgPSBkZl92M182X3BtY19nZXRfY291bnQsCj4gKyAgICAgICAu
Z2V0X2ZpY2EgPSBkZl92M182X2dldF9maWNhLAo+ICsgICAgICAgLnNldF9maWNhID0gZGZfdjNf
Nl9zZXRfZmljYQo+ICB9Owo+IC0tCj4gMi4xNy4xCj4KPiBfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwo+IGFtZC1nZnggbWFpbGluZyBsaXN0Cj4gYW1kLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2FtZC1nZngKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9h
bWQtZ2Z4
