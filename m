Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3780348F7B
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:32:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0776A89CAC;
	Mon, 17 Jun 2019 19:32:24 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x844.google.com (mail-qt1-x844.google.com
 [IPv6:2607:f8b0:4864:20::844])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0587689C99
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:32:21 +0000 (UTC)
Received: by mail-qt1-x844.google.com with SMTP id d17so7279366qtj.8
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:32:20 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=t/ukMNyA7RyE8Vf9yE4HURDAUn5Dm5lWKdWOHyKFyyc=;
 b=KfZDkS4A/yIs0ZhDj5U4LxVCxnCkR2/B+9kJ5Id0ExIfoxQceUmeW5TGKcoFXmnBVO
 luK1yg5MwG6f9hEj0BmNGYuAcxXTzbMzL2+CM80riz5CFmJulPVPllQ7dNqiDWjOBYVu
 EWEM931Pf49bzvn0fobX2b7iEWknxdUq7iFG17lgCRShKrUr/uKBVCAXbP6vCxqUrWLe
 RmCBfoy8CfGGTS0bwWwR0awz5mAnT0NWn6iDIDeRMcQj0Lfl0gdQY36hbRhMAfPSQmPI
 UhjwUQm4vbjPTfSSawgBwaTrrotijuoIg33y1lq/WlZ/0apOBcf/neBAZPVejgSA7tD0
 Q5qg==
X-Gm-Message-State: APjAAAW/cAbBt9mZNfVe0mW9bu0Mz0BySNyHjIR/fQfTat3ZHrz0YZKX
 zhPnQEJLxn3RfLzVStyVf38AV2FFdSs=
X-Google-Smtp-Source: APXvYqxBY55Jin5TnsFDknnkl8o6/7cRA9+g1RtaEGA5FBjA4IyBuxJcfUpFKv/1J2w280gyBkL/iA==
X-Received: by 2002:a0c:9332:: with SMTP id d47mr22947946qvd.222.1560799938609; 
 Mon, 17 Jun 2019 12:32:18 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id u2sm7474875qtj.97.2019.06.17.12.32.17
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:32:18 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 271/459] drm/amd/powerplay: move get_thermal_temperature_range
 to ppt funcs
Date: Mon, 17 Jun 2019 14:30:38 -0500
Message-Id: <20190617193106.18231-72-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617193106.18231-1-alexander.deucher@amd.com>
References: <20190617193106.18231-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=t/ukMNyA7RyE8Vf9yE4HURDAUn5Dm5lWKdWOHyKFyyc=;
 b=Dudcj5I7ngFrIzrS4KrVvNs/iSE8Rdqh6l/PkPiCiZNSMYYJOIx+QHg7Q6RUGYEuX8
 71BaATorTNbjM+y/g1zDAiv2wtR5HtICDNafDBPC40o5zxi0mXFZXvQK6Vi4EqiaFGe2
 461aicNSBECbMAlxiyWFLeqhZASQk9OMzopX28HGbn1VjpCBYJr4lzmRfgrjyGdIqieL
 iiNk8qh19veHg/w2UFeQhfYKf+14onT3eY0Q7EXuog5/cLMQRtLU2HjYT1SrCicpsGKr
 jsT776oiXQ9dUf7+DXvJTw6YAN42pn6tEQb0Yz6Xc8RiDofakjUeZ79Xyz42z8uRzPla
 W9yQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>,
 Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogSGF3a2luZyBaaGFuZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPgoKVGhlIHRoZXJtYWwg
cG9saWN5IGNvdWxkIGJlIEFTSUMgc3BlY2lmaWMgb25lcyBhbmQgZGVwZW5kcyBvbiBzdHJ1Y3R1
cmVzCmluIHBwdGFibGUuIEFzIGEgcmVzdWx0LCBnZXRfdGhlcm1hbF90ZW1wZXJhdHVyZV9yYW5n
ZSBzaG91bGQgYmUgaW1wbGVtZW50ZWQKYXMgcHB0IGZ1bmNzIGluc3RlYWQgb2Ygc211IGZ1bmNz
CgpTaWduZWQtb2ZmLWJ5OiBIYXdraW5nIFpoYW5nIDxIYXdraW5nLlpoYW5nQGFtZC5jb20+ClNp
Z25lZC1vZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNvbT4KLS0t
CiAuLi4vZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9hbWRncHVfc211LmggICAgfCAxNCArKysK
IGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jICAgICB8IDkwICsrKy0t
LS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3ZlZ2EyMF9wcHQu
YyAgICB8IDQ3ICsrKysrKysrKy0KIDMgZmlsZXMgY2hhbmdlZCwgNzAgaW5zZXJ0aW9ucygrKSwg
ODEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBs
YXkvaW5jL2FtZGdwdV9zbXUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9h
bWRncHVfc211LmgKaW5kZXggMGZkM2Q4OTM4NmJlLi5mODk5NzE5OTJlNmYgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9hbWRncHVfc211LmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2FtZGdwdV9zbXUuaApAQCAtMjYsNiArMjYs
MTAgQEAKICNpbmNsdWRlICJrZ2RfcHBfaW50ZXJmYWNlLmgiCiAjaW5jbHVkZSAiZG1fcHBfaW50
ZXJmYWNlLmgiCiAKKyNkZWZpbmUgU01VX1RIRVJNQUxfTUlOSU1VTV9BTEVSVF9URU1QCQkwCisj
ZGVmaW5lIFNNVV9USEVSTUFMX01BWElNVU1fQUxFUlRfVEVNUAkJMjU1CisjZGVmaW5lIFNNVV9U
RU1QRVJBVFVSRV9VTklUU19QRVJfQ0VOVElHUkFERVMJMTAwMAorCiBzdHJ1Y3Qgc211X2h3X3Bv
d2VyX3N0YXRlIHsKIAl1bnNpZ25lZCBpbnQgbWFnaWM7CiB9OwpAQCAtMTA2LDYgKzExMCwxMyBA
QCBzdHJ1Y3Qgc211X3N0YXRlX3NvZnR3YXJlX2FsZ29yaXRobV9ibG9jayB7CiBzdHJ1Y3Qgc211
X3RlbXBlcmF0dXJlX3JhbmdlIHsKIAlpbnQgbWluOwogCWludCBtYXg7CisJaW50IGVkZ2VfZW1l
cmdlbmN5X21heDsKKwlpbnQgaG90c3BvdF9taW47CisJaW50IGhvdHNwb3RfY3JpdF9tYXg7CisJ
aW50IGhvdHNwb3RfZW1lcmdlbmN5X21heDsKKwlpbnQgbWVtX21pbjsKKwlpbnQgbWVtX2NyaXRf
bWF4OworCWludCBtZW1fZW1lcmdlbmN5X21heDsKIH07CiAKIHN0cnVjdCBzbXVfc3RhdGVfdmFs
aWRhdGlvbl9ibG9jayB7CkBAIC01OTcsNiArNjA4LDcgQEAgc3RydWN0IHBwdGFibGVfZnVuY3Mg
ewogCWludCAoKmdldF9jdXJyZW50X2Nsa19mcmVxX2J5X3RhYmxlKShzdHJ1Y3Qgc211X2NvbnRl
eHQgKnNtdSwKIAkJCQkJICAgICBlbnVtIHNtdV9jbGtfdHlwZSBjbGtfdHlwZSwKIAkJCQkJICAg
ICB1aW50MzJfdCAqdmFsdWUpOworCWludCAoKmdldF90aGVybWFsX3RlbXBlcmF0dXJlX3Jhbmdl
KShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgc3RydWN0IHNtdV90ZW1wZXJhdHVyZV9yYW5nZSAq
cmFuZ2UpOwogfTsKIAogc3RydWN0IHNtdV9mdW5jcwpAQCAtODgxLDYgKzg5Myw4IEBAIHN0cnVj
dCBzbXVfZnVuY3MKIAkoKHNtdSktPnBwdF9mdW5jcy0+c2V0X3dhdGVybWFya3NfdGFibGUgPyAo
c211KS0+cHB0X2Z1bmNzLT5zZXRfd2F0ZXJtYXJrc190YWJsZSgoc211KSwgKHRhYiksIChjbG9j
a19yYW5nZXMpKSA6IDApCiAjZGVmaW5lIHNtdV9nZXRfY3VycmVudF9jbGtfZnJlcV9ieV90YWJs
ZShzbXUsIGNsa190eXBlLCB2YWx1ZSkgXAogCSgoc211KS0+cHB0X2Z1bmNzLT5nZXRfY3VycmVu
dF9jbGtfZnJlcV9ieV90YWJsZSA/IChzbXUpLT5wcHRfZnVuY3MtPmdldF9jdXJyZW50X2Nsa19m
cmVxX2J5X3RhYmxlKChzbXUpLCAoY2xrX3R5cGUpLCAodmFsdWUpKSA6IDApCisjZGVmaW5lIHNt
dV9nZXRfdGhlcm1hbF90ZW1wZXJhdHVyZV9yYW5nZShzbXUsIHJhbmdlKSBcCisJKChzbXUpLT5w
cHRfZnVuY3MtPmdldF90aGVybWFsX3RlbXBlcmF0dXJlX3JhbmdlPyAoc211KS0+cHB0X2Z1bmNz
LT5nZXRfdGhlcm1hbF90ZW1wZXJhdHVyZV9yYW5nZSgoc211KSwgKHJhbmdlKSkgOiAwKQogCiBl
eHRlcm4gaW50IHNtdV9nZXRfYXRvbV9kYXRhX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211
LCB1aW50MzJfdCB0YWJsZSwKIAkJCQkgICB1aW50MTZfdCAqc2l6ZSwgdWludDhfdCAqZnJldiwg
dWludDhfdCAqY3JldiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5
L3NtdV92MTFfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211X3YxMV8wLmMK
aW5kZXggMTc1NDYzZDlhYTJkLi5jNmRjMmE2ZDgwOTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
cG93ZXJwbGF5L3NtdV92MTFfMC5jCkBAIC0zMSw3ICszMSw2IEBACiAjaW5jbHVkZSAiYXRvbS5o
IgogI2luY2x1ZGUgInZlZ2EyMF9wcHQuaCIKICNpbmNsdWRlICJuYXZpMTBfcHB0LmgiCi0jaW5j
bHVkZSAicHBfdGhlcm1hbC5oIgogCiAjaW5jbHVkZSAiYXNpY19yZWcvdGhtL3RobV8xMV8wXzJf
b2Zmc2V0LmgiCiAjaW5jbHVkZSAiYXNpY19yZWcvdGhtL3RobV8xMV8wXzJfc2hfbWFzay5oIgpA
QCAtNDQsMTAgKzQzLDYgQEAKIE1PRFVMRV9GSVJNV0FSRSgiYW1kZ3B1L3ZlZ2EyMF9zbWMuYmlu
Iik7CiBNT0RVTEVfRklSTVdBUkUoImFtZGdwdS9uYXZpMTBfc21jLmJpbiIpOwogCi0jZGVmaW5l
IFNNVTExX1RIRVJNQUxfTUlOSU1VTV9BTEVSVF9URU1QICAgICAgMAotI2RlZmluZSBTTVUxMV9U
SEVSTUFMX01BWElNVU1fQUxFUlRfVEVNUCAgICAgIDI1NQotCi0jZGVmaW5lIFNNVTExX1RFTVBF
UkFUVVJFX1VOSVRTX1BFUl9DRU5USUdSQURFUyAxMDAwCiAjZGVmaW5lIFNNVTExX1ZPTFRBR0Vf
U0NBTEUgNAogCiBzdGF0aWMgaW50IHNtdV92MTFfMF9zZW5kX21zZ193aXRob3V0X3dhaXRpbmco
c3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCkBAIC0xMTEyLDM4ICsxMTA3LDE5IEBAIHN0YXRpYyBp
bnQgc211X3YxMV8wX2dldF9jdXJyZW50X2Nsa19mcmVxKHN0cnVjdCBzbXVfY29udGV4dCAqc211
LAogCXJldHVybiByZXQ7CiB9CiAKLXN0YXRpYyBpbnQgc211X3YxMV8wX2dldF90aGVybWFsX3Jh
bmdlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAotCQkJCXN0cnVjdCBQUF9UZW1wZXJhdHVyZVJh
bmdlICpyYW5nZSkKLXsKLQlQUFRhYmxlX3QgKnBwdGFibGUgPSBzbXUtPnNtdV90YWJsZS5kcml2
ZXJfcHB0YWJsZTsKLQltZW1jcHkocmFuZ2UsICZTTVU3VGhlcm1hbFdpdGhEZWxheVBvbGljeVsw
XSwgc2l6ZW9mKHN0cnVjdCBQUF9UZW1wZXJhdHVyZVJhbmdlKSk7Ci0KLQlyYW5nZS0+bWF4ID0g
cHB0YWJsZS0+VGVkZ2VMaW1pdCAqCi0JCVBQX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9DRU5USUdS
QURFUzsKLQlyYW5nZS0+ZWRnZV9lbWVyZ2VuY3lfbWF4ID0gKHBwdGFibGUtPlRlZGdlTGltaXQg
KyBDVEZfT0ZGU0VUX0VER0UpICoKLQkJUFBfVEVNUEVSQVRVUkVfVU5JVFNfUEVSX0NFTlRJR1JB
REVTOwotCXJhbmdlLT5ob3RzcG90X2NyaXRfbWF4ID0gcHB0YWJsZS0+VGhvdHNwb3RMaW1pdCAq
Ci0JCVBQX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9DRU5USUdSQURFUzsKLQlyYW5nZS0+aG90c3Bv
dF9lbWVyZ2VuY3lfbWF4ID0gKHBwdGFibGUtPlRob3RzcG90TGltaXQgKyBDVEZfT0ZGU0VUX0hP
VFNQT1QpICoKLQkJUFBfVEVNUEVSQVRVUkVfVU5JVFNfUEVSX0NFTlRJR1JBREVTOwotCXJhbmdl
LT5tZW1fY3JpdF9tYXggPSBwcHRhYmxlLT5UaGJtTGltaXQgKgotCQlQUF9URU1QRVJBVFVSRV9V
TklUU19QRVJfQ0VOVElHUkFERVM7Ci0JcmFuZ2UtPm1lbV9lbWVyZ2VuY3lfbWF4ID0gKHBwdGFi
bGUtPlRoYm1MaW1pdCArIENURl9PRkZTRVRfSEJNKSoKLQkJUFBfVEVNUEVSQVRVUkVfVU5JVFNf
UEVSX0NFTlRJR1JBREVTOwotCi0JcmV0dXJuIDA7Ci19Ci0KIHN0YXRpYyBpbnQgc211X3YxMV8w
X3NldF90aGVybWFsX3JhbmdlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAotCQkJc3RydWN0IFBQ
X1RlbXBlcmF0dXJlUmFuZ2UgKnJhbmdlKQorCQkJCSAgICAgICBzdHJ1Y3Qgc211X3RlbXBlcmF0
dXJlX3JhbmdlICpyYW5nZSkKIHsKIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHNtdS0+
YWRldjsKLQlpbnQgbG93ID0gU01VMTFfVEhFUk1BTF9NSU5JTVVNX0FMRVJUX1RFTVAgKgotCQlQ
UF9URU1QRVJBVFVSRV9VTklUU19QRVJfQ0VOVElHUkFERVM7Ci0JaW50IGhpZ2ggPSBTTVUxMV9U
SEVSTUFMX01BWElNVU1fQUxFUlRfVEVNUCAqCi0JCVBQX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9D
RU5USUdSQURFUzsKKwlpbnQgbG93ID0gU01VX1RIRVJNQUxfTUlOSU1VTV9BTEVSVF9URU1QICoK
KwkJU01VX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9DRU5USUdSQURFUzsKKwlpbnQgaGlnaCA9IFNN
VV9USEVSTUFMX01BWElNVU1fQUxFUlRfVEVNUCAqCisJCVNNVV9URU1QRVJBVFVSRV9VTklUU19Q
RVJfQ0VOVElHUkFERVM7CiAJdWludDMyX3QgdmFsOwogCisJaWYgKCFyYW5nZSkKKwkJcmV0dXJu
IC1FSU5WQUw7CisKIAlpZiAobG93IDwgcmFuZ2UtPm1pbikKIAkJbG93ID0gcmFuZ2UtPm1pbjsK
IAlpZiAoaGlnaCA+IHJhbmdlLT5tYXgpCkBAIC0xMTU1LDggKzExMzEsOCBAQCBzdGF0aWMgaW50
IHNtdV92MTFfMF9zZXRfdGhlcm1hbF9yYW5nZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKIAl2
YWwgPSBSUkVHMzJfU09DMTUoVEhNLCAwLCBtbVRITV9USEVSTUFMX0lOVF9DVFJMKTsKIAl2YWwg
PSBSRUdfU0VUX0ZJRUxEKHZhbCwgVEhNX1RIRVJNQUxfSU5UX0NUUkwsIE1BWF9JSF9DUkVESVQs
IDUpOwogCXZhbCA9IFJFR19TRVRfRklFTEQodmFsLCBUSE1fVEhFUk1BTF9JTlRfQ1RSTCwgVEhF
Uk1fSUhfSFdfRU5BLCAxKTsKLQl2YWwgPSBSRUdfU0VUX0ZJRUxEKHZhbCwgVEhNX1RIRVJNQUxf
SU5UX0NUUkwsIERJR19USEVSTV9JTlRILCAoaGlnaCAvIFBQX1RFTVBFUkFUVVJFX1VOSVRTX1BF
Ul9DRU5USUdSQURFUykpOwotCXZhbCA9IFJFR19TRVRfRklFTEQodmFsLCBUSE1fVEhFUk1BTF9J
TlRfQ1RSTCwgRElHX1RIRVJNX0lOVEwsIChsb3cgLyBQUF9URU1QRVJBVFVSRV9VTklUU19QRVJf
Q0VOVElHUkFERVMpKTsKKwl2YWwgPSBSRUdfU0VUX0ZJRUxEKHZhbCwgVEhNX1RIRVJNQUxfSU5U
X0NUUkwsIERJR19USEVSTV9JTlRILCAoaGlnaCAvIFNNVV9URU1QRVJBVFVSRV9VTklUU19QRVJf
Q0VOVElHUkFERVMpKTsKKwl2YWwgPSBSRUdfU0VUX0ZJRUxEKHZhbCwgVEhNX1RIRVJNQUxfSU5U
X0NUUkwsIERJR19USEVSTV9JTlRMLCAobG93IC8gU01VX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9D
RU5USUdSQURFUykpOwogCXZhbCA9IHZhbCAmICh+VEhNX1RIRVJNQUxfSU5UX0NUUkxfX1RIRVJN
X1RSSUdHRVJfTUFTS19NQVNLKTsKIAogCVdSRUczMl9TT0MxNShUSE0sIDAsIG1tVEhNX1RIRVJN
QUxfSU5UX0NUUkwsIHZhbCk7CkBAIC0xMTgxLDcgKzExNTcsNyBAQCBzdGF0aWMgaW50IHNtdV92
MTFfMF9lbmFibGVfdGhlcm1hbF9hbGVydChzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkKIHN0YXRp
YyBpbnQgc211X3YxMV8wX3N0YXJ0X3RoZXJtYWxfY29udHJvbChzdHJ1Y3Qgc211X2NvbnRleHQg
KnNtdSkKIHsKIAlpbnQgcmV0ID0gMDsKLQlzdHJ1Y3QgUFBfVGVtcGVyYXR1cmVSYW5nZSByYW5n
ZSA9IHsKKwlzdHJ1Y3Qgc211X3RlbXBlcmF0dXJlX3JhbmdlIHJhbmdlID0gewogCQlURU1QX1JB
TkdFX01JTiwKIAkJVEVNUF9SQU5HRV9NQVgsCiAJCVRFTVBfUkFOR0VfTUFYLApAQCAtMTE5NSw3
ICsxMTcxLDcgQEAgc3RhdGljIGludCBzbXVfdjExXzBfc3RhcnRfdGhlcm1hbF9jb250cm9sKHN0
cnVjdCBzbXVfY29udGV4dCAqc211KQogCiAJaWYgKCFzbXUtPnBtX2VuYWJsZWQpCiAJCXJldHVy
biByZXQ7Ci0Jc211X3YxMV8wX2dldF90aGVybWFsX3JhbmdlKHNtdSwgJnJhbmdlKTsKKwlyZXQg
PSBzbXVfZ2V0X3RoZXJtYWxfdGVtcGVyYXR1cmVfcmFuZ2Uoc211LCAmcmFuZ2UpOwogCiAJaWYg
KHNtdS0+c211X3RhYmxlLnRoZXJtYWxfY29udHJvbGxlcl90eXBlKSB7CiAJCXJldCA9IHNtdV92
MTFfMF9zZXRfdGhlcm1hbF9yYW5nZShzbXUsICZyYW5nZSk7CkBAIC0xMjIzLDQ4ICsxMTk5LDYg
QEAgc3RhdGljIGludCBzbXVfdjExXzBfc3RhcnRfdGhlcm1hbF9jb250cm9sKHN0cnVjdCBzbXVf
Y29udGV4dCAqc211KQogCXJldHVybiByZXQ7CiB9CiAKLXN0YXRpYyBpbnQgc211X3YxMV8wX3Ro
ZXJtYWxfZ2V0X3RlbXBlcmF0dXJlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAotCQkJCQkgICAg
IGVudW0gYW1kX3BwX3NlbnNvcnMgc2Vuc29yLAotCQkJCQkgICAgIHVpbnQzMl90ICp2YWx1ZSkK
LXsKLQlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHNtdS0+YWRldjsKLQlTbXVNZXRyaWNz
X3QgbWV0cmljczsKLQl1aW50MzJfdCB0ZW1wID0gMDsKLQlpbnQgcmV0ID0gMDsKLQotCWlmICgh
dmFsdWUpCi0JCXJldHVybiAtRUlOVkFMOwotCi0JcmV0ID0gc211X3YxMV8wX2dldF9tZXRyaWNz
X3RhYmxlKHNtdSwgJm1ldHJpY3MpOwotCWlmIChyZXQpCi0JCXJldHVybiByZXQ7Ci0KLQlzd2l0
Y2ggKHNlbnNvcikgewotCWNhc2UgQU1ER1BVX1BQX1NFTlNPUl9IT1RTUE9UX1RFTVA6Ci0JCXRl
bXAgPSBSUkVHMzJfU09DMTUoVEhNLCAwLCBtbUNHX01VTFRfVEhFUk1BTF9TVEFUVVMpOwotCQl0
ZW1wID0gKHRlbXAgJiBDR19NVUxUX1RIRVJNQUxfU1RBVFVTX19DVEZfVEVNUF9NQVNLKSA+Pgot
CQkJCUNHX01VTFRfVEhFUk1BTF9TVEFUVVNfX0NURl9URU1QX19TSElGVDsKLQotCQl0ZW1wID0g
dGVtcCAmIDB4MWZmOwotCQl0ZW1wICo9IFNNVTExX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9DRU5U
SUdSQURFUzsKLQotCQkqdmFsdWUgPSB0ZW1wOwotCQlicmVhazsKLQljYXNlIEFNREdQVV9QUF9T
RU5TT1JfRURHRV9URU1QOgotCQkqdmFsdWUgPSBtZXRyaWNzLlRlbXBlcmF0dXJlRWRnZSAqCi0J
CQlQUF9URU1QRVJBVFVSRV9VTklUU19QRVJfQ0VOVElHUkFERVM7Ci0JCWJyZWFrOwotCWNhc2Ug
QU1ER1BVX1BQX1NFTlNPUl9NRU1fVEVNUDoKLQkJKnZhbHVlID0gbWV0cmljcy5UZW1wZXJhdHVy
ZUhCTSAqCi0JCQlQUF9URU1QRVJBVFVSRV9VTklUU19QRVJfQ0VOVElHUkFERVM7Ci0JCWJyZWFr
OwotCWRlZmF1bHQ6Ci0JCXByX2VycigiSW52YWxpZCBzZW5zb3IgZm9yIHJldHJpZXZpbmcgdGVt
cFxuIik7Ci0JCXJldHVybiAtRUlOVkFMOwotCX0KLQotCXJldHVybiAwOwotfQogc3RhdGljIHVp
bnQxNl90IGNvbnZlcnRfdG9fdmRkYyh1aW50OF90IHZpZCkKIHsKIAlyZXR1cm4gKHVpbnQxNl90
KSAoKDYyMDAgLSAodmlkICogMjUpKSAvIFNNVTExX1ZPTFRBR0VfU0NBTEUpOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jCmluZGV4IDYyNTcxOGNjOGI2My4uMWQ5
MTczOWQxOGUwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS92ZWdh
MjBfcHB0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5j
CkBAIC0zNiwxMCArMzYsMTYgQEAKICNpbmNsdWRlICJ2ZWdhMjBfcHB0YWJsZS5oIgogI2luY2x1
ZGUgInZlZ2EyMF9wcHNtYy5oIgogI2luY2x1ZGUgIm5iaW8vbmJpb183XzRfc2hfbWFzay5oIgor
I2luY2x1ZGUgImFzaWNfcmVnL3RobS90aG1fMTFfMF8yX29mZnNldC5oIgorI2luY2x1ZGUgImFz
aWNfcmVnL3RobS90aG1fMTFfMF8yX3NoX21hc2suaCIKIAogI2RlZmluZSBzbW5QQ0lFX0xDX1NQ
RUVEX0NOVEwJCQkweDExMTQwMjkwCiAjZGVmaW5lIHNtblBDSUVfTENfTElOS19XSURUSF9DTlRM
CQkweDExMTQwMjg4CiAKKyNkZWZpbmUgQ1RGX09GRlNFVF9FREdFCQkJNQorI2RlZmluZSBDVEZf
T0ZGU0VUX0hPVFNQT1QJCTUKKyNkZWZpbmUgQ1RGX09GRlNFVF9IQk0JCQk1CisKICNkZWZpbmUg
TVNHX01BUChtc2cpIFwKIAlbU01VX01TR18jI21zZ10gPSBQUFNNQ19NU0dfIyNtc2cKIApAQCAt
MzAyMywxNyArMzAyOSwxNyBAQCBzdGF0aWMgaW50IHZlZ2EyMF90aGVybWFsX2dldF90ZW1wZXJh
dHVyZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKIAkJCQlDR19NVUxUX1RIRVJNQUxfU1RBVFVT
X19DVEZfVEVNUF9fU0hJRlQ7CiAKIAkJdGVtcCA9IHRlbXAgJiAweDFmZjsKLQkJdGVtcCAqPSBT
TVUxMV9URU1QRVJBVFVSRV9VTklUU19QRVJfQ0VOVElHUkFERVM7CisJCXRlbXAgKj0gU01VX1RF
TVBFUkFUVVJFX1VOSVRTX1BFUl9DRU5USUdSQURFUzsKIAogCQkqdmFsdWUgPSB0ZW1wOwogCQli
cmVhazsKIAljYXNlIEFNREdQVV9QUF9TRU5TT1JfRURHRV9URU1QOgogCQkqdmFsdWUgPSBtZXRy
aWNzLlRlbXBlcmF0dXJlRWRnZSAqCi0JCQlQUF9URU1QRVJBVFVSRV9VTklUU19QRVJfQ0VOVElH
UkFERVM7CisJCQlTTVVfVEVNUEVSQVRVUkVfVU5JVFNfUEVSX0NFTlRJR1JBREVTOwogCQlicmVh
azsKIAljYXNlIEFNREdQVV9QUF9TRU5TT1JfTUVNX1RFTVA6CiAJCSp2YWx1ZSA9IG1ldHJpY3Mu
VGVtcGVyYXR1cmVIQk0gKgotCQkJUFBfVEVNUEVSQVRVUkVfVU5JVFNfUEVSX0NFTlRJR1JBREVT
OworCQkJU01VX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9DRU5USUdSQURFUzsKIAkJYnJlYWs7CiAJ
ZGVmYXVsdDoKIAkJcHJfZXJyKCJJbnZhbGlkIHNlbnNvciBmb3IgcmV0cmlldmluZyB0ZW1wXG4i
KTsKQEAgLTMxMzksNiArMzE0NSw0MCBAQCBzdGF0aWMgaW50IHZlZ2EyMF9zZXRfd2F0ZXJtYXJr
c190YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKIAlyZXR1cm4gMDsKIH0KIAorc3RhdGlj
IGNvbnN0IHN0cnVjdCBzbXVfdGVtcGVyYXR1cmVfcmFuZ2UgdmVnYTIwX3RoZXJtYWxfcG9saWN5
W10gPQoreworCXstMjczMTUwLCAgOTkwMDAsIDk5MDAwLCAtMjczMTUwLCA5OTAwMCwgOTkwMDAs
IC0yNzMxNTAsIDk5MDAwLCA5OTAwMH0sCisJeyAxMjAwMDAsIDEyMDAwMCwgMTIwMDAwLCAxMjAw
MDAsIDEyMDAwMCwgMTIwMDAwLCAxMjAwMDAsIDEyMDAwMCwgMTIwMDAwfSwKK307CisKK3N0YXRp
YyBpbnQgdmVnYTIwX2dldF90aGVybWFsX3RlbXBlcmF0dXJlX3JhbmdlKHN0cnVjdCBzbXVfY29u
dGV4dCAqc211LAorCQkJCQkJc3RydWN0IHNtdV90ZW1wZXJhdHVyZV9yYW5nZSpyYW5nZSkKK3sK
KworCVBQVGFibGVfdCAqcHB0YWJsZSA9IHNtdS0+c211X3RhYmxlLmRyaXZlcl9wcHRhYmxlOwor
CisJaWYgKCFyYW5nZSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwltZW1jcHkocmFuZ2UsICZ2ZWdh
MjBfdGhlcm1hbF9wb2xpY3lbMF0sIHNpemVvZihzdHJ1Y3Qgc211X3RlbXBlcmF0dXJlX3Jhbmdl
KSk7CisKKwlyYW5nZS0+bWF4ID0gcHB0YWJsZS0+VGVkZ2VMaW1pdCAqCisJCVNNVV9URU1QRVJB
VFVSRV9VTklUU19QRVJfQ0VOVElHUkFERVM7CisJcmFuZ2UtPmVkZ2VfZW1lcmdlbmN5X21heCA9
IChwcHRhYmxlLT5UZWRnZUxpbWl0ICsgQ1RGX09GRlNFVF9FREdFKSAqCisJCVNNVV9URU1QRVJB
VFVSRV9VTklUU19QRVJfQ0VOVElHUkFERVM7CisJcmFuZ2UtPmhvdHNwb3RfY3JpdF9tYXggPSBw
cHRhYmxlLT5UaG90c3BvdExpbWl0ICoKKwkJU01VX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9DRU5U
SUdSQURFUzsKKwlyYW5nZS0+aG90c3BvdF9lbWVyZ2VuY3lfbWF4ID0gKHBwdGFibGUtPlRob3Rz
cG90TGltaXQgKyBDVEZfT0ZGU0VUX0hPVFNQT1QpICoKKwkJU01VX1RFTVBFUkFUVVJFX1VOSVRT
X1BFUl9DRU5USUdSQURFUzsKKwlyYW5nZS0+bWVtX2NyaXRfbWF4ID0gcHB0YWJsZS0+VGhibUxp
bWl0ICoKKwkJU01VX1RFTVBFUkFUVVJFX1VOSVRTX1BFUl9DRU5USUdSQURFUzsKKwlyYW5nZS0+
bWVtX2VtZXJnZW5jeV9tYXggPSAocHB0YWJsZS0+VGhibUxpbWl0ICsgQ1RGX09GRlNFVF9IQk0p
KgorCQlTTVVfVEVNUEVSQVRVUkVfVU5JVFNfUEVSX0NFTlRJR1JBREVTOworCisKKwlyZXR1cm4g
MDsKK30KKwogc3RhdGljIGNvbnN0IHN0cnVjdCBwcHRhYmxlX2Z1bmNzIHZlZ2EyMF9wcHRfZnVu
Y3MgPSB7CiAJLnRhYmxlc19pbml0ID0gdmVnYTIwX3RhYmxlc19pbml0LAogCS5hbGxvY19kcG1f
Y29udGV4dCA9IHZlZ2EyMF9hbGxvY2F0ZV9kcG1fY29udGV4dCwKQEAgLTMxODMsNiArMzIyMyw3
IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcHB0YWJsZV9mdW5jcyB2ZWdhMjBfcHB0X2Z1bmNzID0g
ewogCS5zZXRfdGhlcm1hbF9mYW5fdGFibGUgPSB2ZWdhMjBfc2V0X3RoZXJtYWxfZmFuX3RhYmxl
LAogCS5nZXRfZmFuX3NwZWVkX3BlcmNlbnQgPSB2ZWdhMjBfZ2V0X2Zhbl9zcGVlZF9wZXJjZW50
LAogCS5zZXRfd2F0ZXJtYXJrc190YWJsZSA9IHZlZ2EyMF9zZXRfd2F0ZXJtYXJrc190YWJsZSwK
KwkuZ2V0X3RoZXJtYWxfdGVtcGVyYXR1cmVfcmFuZ2UgPSB2ZWdhMjBfZ2V0X3RoZXJtYWxfdGVt
cGVyYXR1cmVfcmFuZ2UKIH07CiAKIHZvaWQgdmVnYTIwX3NldF9wcHRfZnVuY3Moc3RydWN0IHNt
dV9jb250ZXh0ICpzbXUpCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vYW1kLWdmeA==
