Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7D1B94CF8A
	for <lists+amd-gfx@lfdr.de>; Thu, 20 Jun 2019 15:50:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0B62C6E584;
	Thu, 20 Jun 2019 13:50:02 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F1CDF6E584
 for <amd-gfx@lists.freedesktop.org>; Thu, 20 Jun 2019 13:49:59 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id f17so3262818wme.2
 for <amd-gfx@lists.freedesktop.org>; Thu, 20 Jun 2019 06:49:59 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=JChHyzMdyycTPQlwCbA+CCsLm8iuIUufgqSA6AjF2EY=;
 b=rFmkbc/7CsKVE6DKSZCOWG4j5s+2RGteWGJPnRsXbsVoMPmqYR+bKTY1nDEcXsnygl
 XzM9eAKo+5G8de4Meh8ySw6qo8dmbEDmYs++6cBDTpyjIkd5eEBPr7dj98s3RQ8YV9J7
 L3N+uLEWUwMkRBy+UI6BgnjwGP8OSzUWLjHA8xpyJXM4XbwgpevPzOpqdL5pZ5V7foT8
 JvqmR+wud8TkuIyicsUmA/IhiGA37AFxx+QqytavJXBJQ7T0CtVUlnomlHrRMuzy8biL
 yZel9A+Hfm6vKzfq7bkTZDAUxziw81Z6Cor49t5DCFmsrexj4qcZ/CHfCr2eoENK5Od9
 +NqQ==
X-Gm-Message-State: APjAAAXB2JiUIX8JlcTjvTG8fTkjvcNlelQfBMepieMi4RxXJXd2xnLh
 liPIUgE+/hkWaCWlG2D7XrcdkT6uc15Qw1INi9U=
X-Google-Smtp-Source: APXvYqzEteEG0ELcwFweTKlI+gGUxXQ4nOQSJZPXsKjXBqqZyUPB20bdI0YO2n1udBuNYnOeAPv8turufp1EDtDCPyA=
X-Received: by 2002:a7b:c751:: with SMTP id w17mr3107889wmk.127.1561038598384; 
 Thu, 20 Jun 2019 06:49:58 -0700 (PDT)
MIME-Version: 1.0
References: <20190620005313.56371-1-jonathan.kim@amd.com>
In-Reply-To: <20190620005313.56371-1-jonathan.kim@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Thu, 20 Jun 2019 09:49:46 -0400
Message-ID: <CADnq5_O81Mmf=4N+EL8P6ARrbhAo8wXRVKZB78N5Dj7e6+upLw@mail.gmail.com>
Subject: Re: [PATCH 1/2] drm/amdgpu: update df_v3_6 for xgmi perfmons
To: "Kim, Jonathan" <Jonathan.Kim@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=JChHyzMdyycTPQlwCbA+CCsLm8iuIUufgqSA6AjF2EY=;
 b=at+GOyyNv014EVfKQSIWomfj/VmWmgPRCTvQrCebdVHT0fS3QxcquqlM5Wv2IZ1d4z
 CUyQfMQR/ap97x0ux2jfYoT0fIn3QgFCYH3qKSw3prckxmKWU14IS67uoHDgb3yM31to
 wbPOO9XkcVVINrHeCDitvR+KIUKU2rV5DJs8QhKuXeD7YE6AGakcJqAZ8HqmEegoIywi
 OSGqaHEajwWfotTC95VCc+QEHQNO/mX3h77e1WZwbZYKCxf3beifhkboR1Y8AXWWTAmB
 OChbQGgVzzLrUiBRKHYZ8bxa0d3iBEOPtsjXWgY9JgNz5tUBmsGncqdUheHp1PKPPlVa
 2BUQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCBKdW4gMTksIDIwMTkgYXQgODo1MyBQTSBLaW0sIEpvbmF0aGFuIDxKb25hdGhhbi5L
aW1AYW1kLmNvbT4gd3JvdGU6Cj4KPiB2NDogZml4ZWQga3phbGxvYyBlcnJvciBjaGVjayBhbmQg
bW9kaWZpZWQgZGYgZnVuYyBpbml0IHRvIHJldHVybiBlcnJvciBjb2RlCj4KPiB2MzogZml4ZWQg
Y2xlYW51cCBieSBhZGRpbmcgZmluaSB0byBmcmVlIHVwIGFkZXYgZGYgY29uZmlnIGNvdW50ZXJz
Cj4KPiB2Mjogc2ltcGxpZmllZCBieSByZW1vdmluZyB4Z21pIHJlZmVyZW5jZXMgaW4gZnVuY3Rp
b24gbmFtZXMgYW5kIG1vdmluZyB0bwo+IGdlbmVyaWMgZGYgZnVuY3Rpb24gbmFtZXMuICBmaXhl
ZCBpc3N1ZSBieSByZW1vdmluZyBoYXJkY29kZWQgY2FrZSB0eCBkYXRhCj4gZXZlbnRzLiBzdHJl
YW1saW5lZCBlcnJvciBoYW5kbGluZyBieSBoYXZpbmcgIGRmX3YzXzZfcG1jX2dldF9jdHJsIHJl
dHVybgo+IGVycm9yIGNvZGUuCj4KPiBhZGQgcG11IGF0dHJpYnV0ZSBncm91cHMgYW5kIHN0cnVj
dHVyZXMgZm9yIHBlcmYgZXZlbnRzLgo+IGFkZCBzeXNmcyB0byB0cmFjayBhdmFpbGFibGUgZGYg
cGVyZm1vbiBjb3VudGVycwo+IGZpeCBvdmVyZmxvdyBoYW5kbGluZyBpbiBwZXJmbW9uIGNvdW50
ZXIgcmVhZHMuCj4KPiBDaGFuZ2UtSWQ6IEk2MWY3MzFjMDA2NmIxNzgzNDY1NmM3NDZlN2VmZTAz
OGM0ZjYyYWNmCj4gU2lnbmVkLW9mZi1ieTogSm9uYXRoYW4gS2ltIDxKb25hdGhhbi5LaW1AYW1k
LmNvbT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmggIHwgIDE3
ICsKPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGZfdjNfNi5jIHwgNDQ5ICsrKysrKysr
KysrKy0tLS0tLS0tLS0tLS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kZl92M182
LmggfCAgMTkgKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc29jMTUuYyAgIHwgICA0
ICsKPiAgNCBmaWxlcyBjaGFuZ2VkLCAyMzEgaW5zZXJ0aW9ucygrKSwgMjU4IGRlbGV0aW9ucygt
KQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKPiBpbmRleCBkMzU1ZTlhMDlhZDEu
LjkxY2ZjYzdiZTVjMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHUuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCj4gQEAg
LTczMiw2ICs3MzIsNyBAQCBzdHJ1Y3QgYW1kX3Bvd2VycGxheSB7Cj4gIH07Cj4KPiAgI2RlZmlu
ZSBBTURHUFVfUkVTRVRfTUFHSUNfTlVNIDY0Cj4gKyNkZWZpbmUgQU1ER1BVX01BWF9ERl9QRVJG
TU9OUyAxNgo+ICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSB7Cj4gICAgICAgICBzdHJ1Y3QgZGV2aWNl
ICAgICAgICAgICAgICAgICAgICpkZXY7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAgICAg
ICAgICAgICAgICpkZGV2Owo+IEBAIC05NjIsNiArOTYzLDcgQEAgc3RydWN0IGFtZGdwdV9kZXZp
Y2Ugewo+ICAgICAgICAgbG9uZyAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlX3Rp
bWVvdXQ7Cj4KPiAgICAgICAgIHVpbnQ2NF90ICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVl
X2lkOwo+ICsgICAgICAgdWludDY0X3QgICAgICAgIGRmX3BlcmZtb25fY29uZmlnX2Fzc2lnbl9t
YXNrW0FNREdQVV9NQVhfREZfUEVSRk1PTlNdOwo+ICB9Owo+Cj4gIHN0YXRpYyBpbmxpbmUgc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFtZGdwdV90dG1fYWRldihzdHJ1Y3QgdHRtX2JvX2RldmljZSAq
YmRldikKPiBAQCAtMTIwMSw0ICsxMjAzLDE5IEBAIHN0YXRpYyBpbmxpbmUgaW50IGFtZGdwdV9k
bV9kaXNwbGF5X3Jlc3VtZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikgeyByZXR1cm4KPiAg
I2VuZGlmCj4KPiAgI2luY2x1ZGUgImFtZGdwdV9vYmplY3QuaCIKPiArCj4gKy8qIHVzZWQgYnkg
ZGZfdjNfNi5jIGFuZCBhbWRncHVfcG11LmMgKi8KPiArI2RlZmluZSBBTURHUFVfUE1VX0FUVFIo
X25hbWUsIF9vYmplY3QpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCj4gK3N0YXRp
YyBzc2l6ZV90ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgXAo+ICtfbmFtZSMjX3Nob3coc3RydWN0IGRldmljZSAqZGV2LCAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsICAgICAgICAgICBcCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIgKnBhZ2UpICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgXAo+ICt7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKPiArICAgICAgIEJVSUxEX0JVR19PTihzaXpl
b2YoX29iamVjdCkgPj0gUEFHRV9TSVpFIC0gMSk7ICAgICAgICAgICAgICAgICBcCj4gKyAgICAg
ICByZXR1cm4gc3ByaW50ZihwYWdlLCBfb2JqZWN0ICJcbiIpOyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgXAo+ICt9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCj4gK3N0YXRp
YyBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSBwbXVfYXR0cl8jI19uYW1lID0gX19BVFRSX1JPKF9u
YW1lKQo+ICsKPiAgI2VuZGlmCj4gKwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9kZl92M182LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kZl92M182LmMK
PiBpbmRleCA4YzA5YmY5OTRhY2QuLjEyZTNlNjcwMTNkOSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9kZl92M182LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9kZl92M182LmMKPiBAQCAtMzAsOCArMzAsMTA0IEBACj4gIHN0YXRpYyB1MzIgZGZf
djNfNl9jaGFubmVsX251bWJlcltdID0gezEsIDIsIDAsIDQsIDAsIDgsIDAsCj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTYsIDMyLCAwLCAwLCAwLCAyLCA0LCA4fTsK
Pgo+ICsvKiBpbml0IGRmIGZvcm1hdCBhdHRycyAqLwo+ICtBTURHUFVfUE1VX0FUVFIoZXZlbnQs
ICAgICAgICAgImNvbmZpZzowLTciKTsKPiArQU1ER1BVX1BNVV9BVFRSKGluc3RhbmNlLCAgICAg
ICJjb25maWc6OC0xNSIpOwo+ICtBTURHUFVfUE1VX0FUVFIodW1hc2ssICAgICAgICAgImNvbmZp
ZzoxNi0yMyIpOwo+ICsKPiArLyogZGYgZm9ybWF0IGF0dHJpYnV0ZXMgICovCj4gK3N0YXRpYyBz
dHJ1Y3QgYXR0cmlidXRlICpkZl92M182X2Zvcm1hdF9hdHRyc1tdID0gewo+ICsgICAgICAgJnBt
dV9hdHRyX2V2ZW50LmF0dHIsCj4gKyAgICAgICAmcG11X2F0dHJfaW5zdGFuY2UuYXR0ciwKPiAr
ICAgICAgICZwbXVfYXR0cl91bWFzay5hdHRyLAo+ICsgICAgICAgTlVMTAo+ICt9Owo+ICsKPiAr
LyogZGYgZm9ybWF0IGF0dHJpYnV0ZSBncm91cCAqLwo+ICtzdGF0aWMgc3RydWN0IGF0dHJpYnV0
ZV9ncm91cCBkZl92M182X2Zvcm1hdF9hdHRyX2dyb3VwID0gewo+ICsgICAgICAgLm5hbWUgPSAi
Zm9ybWF0IiwKPiArICAgICAgIC5hdHRycyA9IGRmX3YzXzZfZm9ybWF0X2F0dHJzLAo+ICt9Owo+
ICsKPiArLyogZGYgZXZlbnQgYXR0cnMgKi8KPiArQU1ER1BVX1BNVV9BVFRSKGNha2UwX3Bjc291
dF90eGRhdGEsCj4gKyAgICAgICAgICAgICAgICAgICAgICJldmVudD0weDcsaW5zdGFuY2U9MHg0
Nix1bWFzaz0weDIiKTsKPiArQU1ER1BVX1BNVV9BVFRSKGNha2UxX3Bjc291dF90eGRhdGEsCj4g
KyAgICAgICAgICAgICAgICAgICAgICJldmVudD0weDcsaW5zdGFuY2U9MHg0Nyx1bWFzaz0weDIi
KTsKPiArQU1ER1BVX1BNVV9BVFRSKGNha2UwX3Bjc291dF90eG1ldGEsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICJldmVudD0weDcsaW5zdGFuY2U9MHg0Nix1bWFzaz0weDQiKTsKPiArQU1ER1BV
X1BNVV9BVFRSKGNha2UxX3Bjc291dF90eG1ldGEsCj4gKyAgICAgICAgICAgICAgICAgICAgICJl
dmVudD0weDcsaW5zdGFuY2U9MHg0Nyx1bWFzaz0weDQiKTsKPiArQU1ER1BVX1BNVV9BVFRSKGNh
a2UwX2Z0aWluc3RhdF9yZXFhbGxvYywKPiArICAgICAgICAgICAgICAgICAgICAgImV2ZW50PTB4
YixpbnN0YW5jZT0weDQ2LHVtYXNrPTB4NCIpOwo+ICtBTURHUFVfUE1VX0FUVFIoY2FrZTFfZnRp
aW5zdGF0X3JlcWFsbG9jLAo+ICsgICAgICAgICAgICAgICAgICAgICAiZXZlbnQ9MHhiLGluc3Rh
bmNlPTB4NDcsdW1hc2s9MHg0Iik7Cj4gK0FNREdQVV9QTVVfQVRUUihjYWtlMF9mdGlpbnN0YXRf
cnNwYWxsb2MsCj4gKyAgICAgICAgICAgICAgICAgICAgICJldmVudD0weGIsaW5zdGFuY2U9MHg0
Nix1bWFzaz0weDgiKTsKPiArQU1ER1BVX1BNVV9BVFRSKGNha2UxX2Z0aWluc3RhdF9yc3BhbGxv
YywKPiArICAgICAgICAgICAgICAgICAgICAgImV2ZW50PTB4YixpbnN0YW5jZT0weDQ3LHVtYXNr
PTB4OCIpOwo+ICsKPiArLyogZGYgZXZlbnQgYXR0cmlidXRlcyAgKi8KPiArc3RhdGljIHN0cnVj
dCBhdHRyaWJ1dGUgKmRmX3YzXzZfZXZlbnRfYXR0cnNbXSA9IHsKPiArICAgICAgICZwbXVfYXR0
cl9jYWtlMF9wY3NvdXRfdHhkYXRhLmF0dHIsCj4gKyAgICAgICAmcG11X2F0dHJfY2FrZTFfcGNz
b3V0X3R4ZGF0YS5hdHRyLAo+ICsgICAgICAgJnBtdV9hdHRyX2Nha2UwX3Bjc291dF90eG1ldGEu
YXR0ciwKPiArICAgICAgICZwbXVfYXR0cl9jYWtlMV9wY3NvdXRfdHhtZXRhLmF0dHIsCj4gKyAg
ICAgICAmcG11X2F0dHJfY2FrZTBfZnRpaW5zdGF0X3JlcWFsbG9jLmF0dHIsCj4gKyAgICAgICAm
cG11X2F0dHJfY2FrZTFfZnRpaW5zdGF0X3JlcWFsbG9jLmF0dHIsCj4gKyAgICAgICAmcG11X2F0
dHJfY2FrZTBfZnRpaW5zdGF0X3JzcGFsbG9jLmF0dHIsCj4gKyAgICAgICAmcG11X2F0dHJfY2Fr
ZTFfZnRpaW5zdGF0X3JzcGFsbG9jLmF0dHIsCj4gKyAgICAgICBOVUxMCj4gK307Cj4gKwo+ICsv
KiBkZiBldmVudCBhdHRyaWJ1dGUgZ3JvdXAgKi8KPiArc3RhdGljIHN0cnVjdCBhdHRyaWJ1dGVf
Z3JvdXAgZGZfdjNfNl9ldmVudF9hdHRyX2dyb3VwID0gewo+ICsgICAgICAgLm5hbWUgPSAiZXZl
bnRzIiwKPiArICAgICAgIC5hdHRycyA9IGRmX3YzXzZfZXZlbnRfYXR0cnMKPiArfTsKPiArCj4g
Ky8qIGRmIGV2ZW50IGF0dHIgZ3JvdXBzICAqLwo+ICtjb25zdCBzdHJ1Y3QgYXR0cmlidXRlX2dy
b3VwICpkZl92M182X2F0dHJfZ3JvdXBzW10gPSB7Cj4gKyAgICAgICAgICAgICAgICZkZl92M182
X2Zvcm1hdF9hdHRyX2dyb3VwLAo+ICsgICAgICAgICAgICAgICAmZGZfdjNfNl9ldmVudF9hdHRy
X2dyb3VwLAo+ICsgICAgICAgICAgICAgICBOVUxMCj4gK307Cj4gKwo+ICsvKiBnZXQgdGhlIG51
bWJlciBvZiBkZiBjb3VudGVycyBhdmFpbGFibGUgKi8KPiArc3RhdGljIHNzaXplX3QgZGZfdjNf
Nl9nZXRfZGZfY250cl9hdmFpbChzdHJ1Y3QgZGV2aWNlICpkZXYsCj4gKyAgICAgICAgICAgICAg
IHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRyLAo+ICsgICAgICAgICAgICAgICBjaGFyICpi
dWYpCj4gK3sKPiArICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2Owo+ICsgICAgICAg
c3RydWN0IGRybV9kZXZpY2UgKmRkZXY7Cj4gKyAgICAgICBpbnQgaSwgY291bnQ7Cj4gKwo+ICsg
ICAgICAgZGRldiA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwo+ICsgICAgICAgYWRldiA9IGRkZXYt
PmRldl9wcml2YXRlOwo+ICsgICAgICAgY291bnQgPSAwOwo+ICsKPiArICAgICAgIGZvciAoaSA9
IDA7IGkgPCBERl9WM182X01BWF9DT1VOVEVSUzsgaSsrKSB7Cj4gKyAgICAgICAgICAgICAgIGlm
IChhZGV2LT5kZl9wZXJmbW9uX2NvbmZpZ19hc3NpZ25fbWFza1tpXSA9PSAwKQo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGNvdW50Kys7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcmV0dXJu
IHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAiJWlcbiIsIGNvdW50KTsKPiArfQo+ICsKPiArLyog
ZGV2aWNlIGF0dHIgZm9yIGF2YWlsYWJsZSBwZXJmbW9uIGNvdW50ZXJzICovCj4gK3N0YXRpYyBE
RVZJQ0VfQVRUUihkZl9jbnRyX2F2YWlsLCBTX0lSVUdPLCBkZl92M182X2dldF9kZl9jbnRyX2F2
YWlsLCBOVUxMKTsKPiArCj4gKy8qIGluaXQgcGVyZm1vbnMgKi8KPiAgc3RhdGljIHZvaWQgZGZf
djNfNl9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICB7Cj4gKyAgICAgICBpbnQg
aSwgcmV0Owo+ICsKPiArICAgICAgIHJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYs
ICZkZXZfYXR0cl9kZl9jbnRyX2F2YWlsKTsKPiArICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAg
ICAgICAgIERSTV9FUlJPUigiZmFpbGVkIHRvIGNyZWF0ZSBmaWxlIGZvciBhdmFpbGFibGUgZGYg
Y291bnRlcnNcbiIpOwo+ICsKPiArICAgICAgIGZvciAoaSA9IDA7IGkgPCBBTURHUFVfTUFYX0RG
X1BFUkZNT05TOyBpKyspCj4gKyAgICAgICAgICAgICAgIGFkZXYtPmRmX3BlcmZtb25fY29uZmln
X2Fzc2lnbl9tYXNrW2ldID0gMDsKPiAgfQoKWW91IG5ldmVyIGFkZHJlc3NlZCBteSBjb21tZW50
cyBhYm91dCBkZiBpbml0IGZyb20gYmVmb3JlLiAgZGZfaW5pdApnZXRzIGNhbGxlZCBmcm9tIGh3
X2luaXQsIHNvIHlvdSBzaG91bGRuJ3QgY3JlYXRlIGZpbGVzLiAgTW92ZSBkZiBpbml0CnRvIGJl
aW5nIGNhbGxlZCBmcm9tIHNvYzE1IHN3X2luaXQvZmluaSBhbmQgcHJvYmFibHkgcmVuYW1lIHRo
ZSBkZgpjYWxsYmFja3MgdG8gc3dfaW5pdCBhbmQgc3dfZmluaSBzbyB3ZSBrbm93IG5vdCB0byBh
ZGQgaHcgc3RhdGUgdG8KdGhvc2UgZnVuY3Rpb25zLiAgQXMgaXMgbm93LCB3ZSdsbCBlbmQgdXAg
bmVlZGxlc3NseSBjcmVhdGluZyBhbmQKZGVzdG9yeWluZyBmaWxlcyBvbiBzdXNwZW5kL3Jlc3Vt
ZS4KCkFsZXgKCgo+Cj4gIHN0YXRpYyB2b2lkIGRmX3YzXzZfZW5hYmxlX2Jyb2FkY2FzdF9tb2Rl
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+IEBAIC0xMDUsMjggKzIwMSwxOSBAQCBzdGF0
aWMgdm9pZCBkZl92M182X2dldF9jbG9ja2dhdGluZ19zdGF0ZShzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwKPiAgICAgICAgICAgICAgICAgKmZsYWdzIHw9IEFNRF9DR19TVVBQT1JUX0RGX01H
Q0c7Cj4gIH0KPgo+IC0vKiBob2xkIGNvdW50ZXIgYXNzaWdubWVudCBwZXIgZ3B1IHN0cnVjdCAq
Lwo+IC1zdHJ1Y3QgZGZfdjNfNl9ldmVudF9tYXNrIHsKPiAtICAgICAgICAgICAgICAgc3RydWN0
IGFtZGdwdV9kZXZpY2UgZ3B1Owo+IC0gICAgICAgICAgICAgICB1aW50NjRfdCBjb25maWdfYXNz
aWduX21hc2tbQU1ER1BVX0RGX01BWF9DT1VOVEVSU107Cj4gLX07Cj4gLQo+ICAvKiBnZXQgYXNz
aWduZWQgZGYgcGVyZm1vbiBjdHIgYXMgaW50ICovCj4gLXN0YXRpYyB2b2lkIGRmX3YzXzZfcG1j
X2NvbmZpZ18yX2NudHIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBjb25maWcsCj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgKmNvdW50ZXIpCj4gK3N0YXRpYyBpbnQgZGZf
djNfNl9wbWNfY29uZmlnXzJfY250cihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IGNvbmZpZykKPiAgewo+
IC0gICAgICAgc3RydWN0IGRmX3YzXzZfZXZlbnRfbWFzayAqbWFzazsKPiAgICAgICAgIGludCBp
Owo+Cj4gLSAgICAgICBtYXNrID0gY29udGFpbmVyX29mKGFkZXYsIHN0cnVjdCBkZl92M182X2V2
ZW50X21hc2ssIGdwdSk7Cj4gLQo+IC0gICAgICAgZm9yIChpID0gMDsgaSA8IEFNREdQVV9ERl9N
QVhfQ09VTlRFUlM7IGkrKykgewo+IC0gICAgICAgICAgICAgICBpZiAoKGNvbmZpZyAmIDB4MEZG
RkZGRlVMKSA9PSBtYXNrLT5jb25maWdfYXNzaWduX21hc2tbaV0pIHsKPiAtICAgICAgICAgICAg
ICAgICAgICAgICAqY291bnRlciA9IGk7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu
Owo+IC0gICAgICAgICAgICAgICB9Cj4gKyAgICAgICBmb3IgKGkgPSAwOyBpIDwgREZfVjNfNl9N
QVhfQ09VTlRFUlM7IGkrKykgewo+ICsgICAgICAgICAgICAgICBpZiAoKGNvbmZpZyAmIDB4MEZG
RkZGRlVMKSA9PQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGV2
LT5kZl9wZXJmbW9uX2NvbmZpZ19hc3NpZ25fbWFza1tpXSkKPiArICAgICAgICAgICAgICAgICAg
ICAgICByZXR1cm4gaTsKPiAgICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1cm4gLUVJTlZBTDsK
PiAgfQo+Cj4gIC8qIGdldCBhZGRyZXNzIGJhc2VkIG9uIGNvdW50ZXIgYXNzaWdubWVudCAqLwo+
IEBAIC0xMzYsMTAgKzIyMyw3IEBAIHN0YXRpYyB2b2lkIGRmX3YzXzZfcG1jX2dldF9hZGRyKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHVpbnQzMl90ICpsb19iYXNlX2FkZHIsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdWludDMyX3QgKmhpX2Jhc2VfYWRkcikKPiAgewo+IC0KPiAtICAgICAgIGludCB0YXJn
ZXRfY250ciA9IC0xOwo+IC0KPiAtICAgICAgIGRmX3YzXzZfcG1jX2NvbmZpZ18yX2NudHIoYWRl
diwgY29uZmlnLCAmdGFyZ2V0X2NudHIpOwo+ICsgICAgICAgaW50IHRhcmdldF9jbnRyID0gZGZf
djNfNl9wbWNfY29uZmlnXzJfY250cihhZGV2LCBjb25maWcpOwo+Cj4gICAgICAgICBpZiAodGFy
Z2V0X2NudHIgPCAwKQo+ICAgICAgICAgICAgICAgICByZXR1cm47Cj4gQEAgLTE3Nyw0MCArMjYx
LDM4IEBAIHN0YXRpYyB2b2lkIGRmX3YzXzZfcG1jX2dldF9yZWFkX3NldHRpbmdzKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LAo+ICB9Cj4KPiAgLyogZ2V0IGNvbnRyb2wgY291bnRlciBzZXR0
aW5ncyBpLmUuIGFkZHJlc3MgYW5kIHZhbHVlcyB0byBzZXQgKi8KPiAtc3RhdGljIHZvaWQgZGZf
djNfNl9wbWNfZ2V0X2N0cmxfc2V0dGluZ3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4g
K3N0YXRpYyBpbnQgZGZfdjNfNl9wbWNfZ2V0X2N0cmxfc2V0dGluZ3Moc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dWludDY0X3QgY29uZmlnLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHVpbnQzMl90ICpsb19iYXNlX2FkZHIsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdWludDMyX3QgKmhpX2Jhc2VfYWRkciwKPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCAqbG9fdmFsLAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90ICpoaV92YWwpCj4gIHsKPiAt
Cj4gLSAgICAgICB1aW50MzJfdCBldmVudHNlbCwgaW5zdGFuY2UsIHVuaXRtYXNrOwo+IC0gICAg
ICAgdWludDMyX3QgZXNfNV8wLCBlc18xM18wLCBlc18xM182LCBlc18xM18xMiwgZXNfMTFfOCwg
ZXNfN18wOwo+IC0KPiAgICAgICAgIGRmX3YzXzZfcG1jX2dldF9hZGRyKGFkZXYsIGNvbmZpZywg
MSwgbG9fYmFzZV9hZGRyLCBoaV9iYXNlX2FkZHIpOwo+Cj4gLSAgICAgICBpZiAobG9fdmFsID09
IE5VTEwgfHwgaGlfdmFsID09IE5VTEwpCj4gLSAgICAgICAgICAgICAgIHJldHVybjsKPiAtCj4g
ICAgICAgICBpZiAoKCpsb19iYXNlX2FkZHIgPT0gMCkgfHwgKCpoaV9iYXNlX2FkZHIgPT0gMCkp
IHsKPiAtICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJERiBQTUMgYWRkcmVzc2luZyBub3QgcmV0
cmlldmVkISBMbzogJXgsIEhpOiAleCIsCj4gKyAgICAgICAgICAgICAgIERSTV9FUlJPUigiW0RG
IFBNQ10gYWRkcmVzc2luZyBub3QgcmV0cmlldmVkISBMbzogJXgsIEhpOiAleCIsCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAqbG9fYmFzZV9hZGRyLCAqaGlfYmFzZV9hZGRyKTsK
PiAtICAgICAgICAgICAgICAgcmV0dXJuOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOWElP
Owo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIGlmIChsb192YWwgJiYgaGlfdmFsKSB7Cj4gKyAg
ICAgICAgICAgICAgIHVpbnQzMl90IGV2ZW50c2VsLCBpbnN0YW5jZSwgdW5pdG1hc2s7Cj4gKyAg
ICAgICAgICAgICAgIHVpbnQzMl90IGluc3RhbmNlXzEwLCBpbnN0YW5jZV81NDMyLCBpbnN0YW5j
ZV83NjsKPiArCj4gKyAgICAgICAgICAgICAgIGV2ZW50c2VsID0gREZfVjNfNl9HRVRfRVZFTlQo
Y29uZmlnKSAmIDB4M2Y7Cj4gKyAgICAgICAgICAgICAgIHVuaXRtYXNrID0gREZfVjNfNl9HRVRf
VU5JVE1BU0soY29uZmlnKSAmIDB4ZjsKPiArICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBERl9W
M182X0dFVF9JTlNUQU5DRShjb25maWcpOwo+ICsKPiArICAgICAgICAgICAgICAgaW5zdGFuY2Vf
MTAgPSBpbnN0YW5jZSAmIDB4MzsKPiArICAgICAgICAgICAgICAgaW5zdGFuY2VfNTQzMiA9IChp
bnN0YW5jZSA+PiAyKSAmIDB4ZjsKPiArICAgICAgICAgICAgICAgaW5zdGFuY2VfNzYgPSAoaW5z
dGFuY2UgPj4gNikgJiAweDM7Cj4gKwo+ICsgICAgICAgICAgICAgICAqbG9fdmFsID0gKHVuaXRt
YXNrIDw8IDgpIHwgKGluc3RhbmNlXzEwIDw8IDYpIHwgZXZlbnRzZWw7Cj4gKyAgICAgICAgICAg
ICAgICpoaV92YWwgPSAoaW5zdGFuY2VfNzYgPDwgMjkpIHwgaW5zdGFuY2VfNTQzMjsKPiAgICAg
ICAgIH0KPgo+IC0gICAgICAgZXZlbnRzZWwgPSBHRVRfRVZFTlQoY29uZmlnKTsKPiAtICAgICAg
IGluc3RhbmNlID0gR0VUX0lOU1RBTkNFKGNvbmZpZyk7Cj4gLSAgICAgICB1bml0bWFzayA9IEdF
VF9VTklUTUFTSyhjb25maWcpOwo+IC0KPiAtICAgICAgIGVzXzVfMCA9IGV2ZW50c2VsICYgMHgz
RlVMOwo+IC0gICAgICAgZXNfMTNfNiA9IGluc3RhbmNlOwo+IC0gICAgICAgZXNfMTNfMCA9IChl
c18xM182IDw8IDYpICsgZXNfNV8wOwo+IC0gICAgICAgZXNfMTNfMTIgPSAoZXNfMTNfMCAmIDB4
MDMwMDBVTCkgPj4gMTI7Cj4gLSAgICAgICBlc18xMV84ID0gKGVzXzEzXzAgJiAweDBGMDBVTCkg
Pj4gODsKPiAtICAgICAgIGVzXzdfMCA9IGVzXzEzXzAgJiAweDBGRlVMOwo+IC0gICAgICAgKmxv
X3ZhbCA9IChlc183XzAgJiAweEZGVUwpIHwgKCh1bml0bWFzayAmIDB4MEZVTCkgPDwgOCk7Cj4g
LSAgICAgICAqaGlfdmFsID0gKGVzXzExXzggfCAoKGVzXzEzXzEyKTw8KDI5KSkpOwo+ICsgICAg
ICAgcmV0dXJuIDA7Cj4gIH0KPgo+ICAvKiBhc3NpZ24gZGYgcGVyZm9ybWFuY2UgY291bnRlcnMg
Zm9yIHJlYWQgKi8KPiBAQCAtMjE4LDI2ICszMDAsMjEgQEAgc3RhdGljIGludCBkZl92M182X3Bt
Y19hc3NpZ25fY250cihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IGNvbmZpZywKPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGludCAqaXNfYXNzaWduZWQpCj4gIHsKPiAtCj4gLSAgICAgICBz
dHJ1Y3QgZGZfdjNfNl9ldmVudF9tYXNrICptYXNrOwo+ICAgICAgICAgaW50IGksIHRhcmdldF9j
bnRyOwo+Cj4gLSAgICAgICB0YXJnZXRfY250ciA9IC0xOwo+IC0KPiAgICAgICAgICppc19hc3Np
Z25lZCA9IDA7Cj4KPiAtICAgICAgIGRmX3YzXzZfcG1jX2NvbmZpZ18yX2NudHIoYWRldiwgY29u
ZmlnLCAmdGFyZ2V0X2NudHIpOwo+ICsgICAgICAgdGFyZ2V0X2NudHIgPSBkZl92M182X3BtY19j
b25maWdfMl9jbnRyKGFkZXYsIGNvbmZpZyk7Cj4KPiAgICAgICAgIGlmICh0YXJnZXRfY250ciA+
PSAwKSB7Cj4gICAgICAgICAgICAgICAgICppc19hc3NpZ25lZCA9IDE7Cj4gICAgICAgICAgICAg
ICAgIHJldHVybiAwOwo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBtYXNrID0gY29udGFpbmVyX29m
KGFkZXYsIHN0cnVjdCBkZl92M182X2V2ZW50X21hc2ssIGdwdSk7Cj4gLQo+IC0gICAgICAgZm9y
IChpID0gMDsgaSA8IEFNREdQVV9ERl9NQVhfQ09VTlRFUlM7IGkrKykgewo+IC0gICAgICAgICAg
ICAgICBpZiAobWFzay0+Y29uZmlnX2Fzc2lnbl9tYXNrW2ldID09IDBVTEwpIHsKPiAtICAgICAg
ICAgICAgICAgICAgICAgICBtYXNrLT5jb25maWdfYXNzaWduX21hc2tbaV0gPSBjb25maWcgJiAw
eDBGRkZGRkZVTDsKPiArICAgICAgIGZvciAoaSA9IDA7IGkgPCBERl9WM182X01BWF9DT1VOVEVS
UzsgaSsrKSB7Cj4gKyAgICAgICAgICAgICAgIGlmIChhZGV2LT5kZl9wZXJmbW9uX2NvbmZpZ19h
c3NpZ25fbWFza1tpXSA9PSAwVSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIGFkZXYtPmRm
X3BlcmZtb25fY29uZmlnX2Fzc2lnbl9tYXNrW2ldID0KPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyAmIDB4MEZGRkZGRlVMOwo+
ICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICAgICAgICAgICAgICAgICB9Cj4g
ICAgICAgICB9Cj4gQEAgLTI0OSw2NiArMzI2LDE3IEBAIHN0YXRpYyBpbnQgZGZfdjNfNl9wbWNf
YXNzaWduX2NudHIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gIHN0YXRpYyB2b2lkIGRm
X3YzXzZfcG1jX3JlbGVhc2VfY250cihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3QgY29uZmlnKQo+ICB7Cj4g
LQo+IC0gICAgICAgc3RydWN0IGRmX3YzXzZfZXZlbnRfbWFzayAqbWFzazsKPiAtICAgICAgIGlu
dCB0YXJnZXRfY250cjsKPiAtCj4gLSAgICAgICB0YXJnZXRfY250ciA9IC0xOwo+IC0KPiAtICAg
ICAgIGRmX3YzXzZfcG1jX2NvbmZpZ18yX2NudHIoYWRldiwgY29uZmlnLCAmdGFyZ2V0X2NudHIp
Owo+IC0KPiAtICAgICAgIG1hc2sgPSBjb250YWluZXJfb2YoYWRldiwgc3RydWN0IGRmX3YzXzZf
ZXZlbnRfbWFzaywgZ3B1KTsKPiArICAgICAgIGludCB0YXJnZXRfY250ciA9IGRmX3YzXzZfcG1j
X2NvbmZpZ18yX2NudHIoYWRldiwgY29uZmlnKTsKPgo+ICAgICAgICAgaWYgKHRhcmdldF9jbnRy
ID49IDApCj4gLSAgICAgICAgICAgICAgIG1hc2stPmNvbmZpZ19hc3NpZ25fbWFza1t0YXJnZXRf
Y250cl0gPSAwVUxMOwo+IC0KPiArICAgICAgICAgICAgICAgYWRldi0+ZGZfcGVyZm1vbl9jb25m
aWdfYXNzaWduX21hc2tbdGFyZ2V0X2NudHJdID0gMFVMTDsKPiAgfQo+Cj4gLS8qCj4gLSAqIGdl
dCB4Z21pIGxpbmsgY291bnRlcnMgdmlhIHByb2dyYW1tYWJsZSBkYXRhIGZhYnJpYyAoZGYpIGNv
dW50ZXJzIChtYXggNCkKPiAtICogdXNpbmcgY2FrZSB0eCBldmVudC4KPiAtICoKPiAtICogQGFk
ZXYgLT4gYW1kZ3B1IGRldmljZQo+IC0gKiBAaW5zdGFuY2UtPiBjdXJyZW50bHkgY2FrZSBoYXMg
MiBsaW5rcyB0byBwb2xsIG9uIHZlZ2EyMAo+IC0gKiBAY291bnQgLT4gY291bnRlcnMgdG8gcGFz
cwo+IC0gKgo+IC0gKi8KPiAtCj4gLXN0YXRpYyB2b2lkIGRmX3YzXzZfZ2V0X3hnbWlfbGlua19j
bnRyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGludCBpbnN0YW5jZSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB1aW50NjRfdCAqY291bnQpCj4gLXsKPiAtICAgICAgIHVpbnQzMl90IGxv
X2Jhc2VfYWRkciwgaGlfYmFzZV9hZGRyLCBsb192YWwsIGhpX3ZhbDsKPiAtICAgICAgIHVpbnQ2
NF90IGNvbmZpZzsKPiAtCj4gLSAgICAgICBjb25maWcgPSBHRVRfSU5TVEFOQ0VfQ09ORklHKGlu
c3RhbmNlKTsKPiAtCj4gLSAgICAgICBkZl92M182X3BtY19nZXRfcmVhZF9zZXR0aW5ncyhhZGV2
LCBjb25maWcsICZsb19iYXNlX2FkZHIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAmaGlfYmFzZV9hZGRyKTsKPiAtCj4gLSAgICAgICBpZiAoKGxvX2Jhc2VfYWRkciA9
PSAwKSB8fCAoaGlfYmFzZV9hZGRyID09IDApKQo+IC0gICAgICAgICAgICAgICByZXR1cm47Cj4g
LQo+IC0gICAgICAgbG9fdmFsID0gUlJFRzMyX1BDSUUobG9fYmFzZV9hZGRyKTsKPiAtICAgICAg
IGhpX3ZhbCA9IFJSRUczMl9QQ0lFKGhpX2Jhc2VfYWRkcik7Cj4KPiAtICAgICAgICpjb3VudCAg
PSAoKGhpX3ZhbCB8IDBVTEwpIDw8IDMyKSB8IChsb192YWwgfCAwVUxMKTsKPiAtfQo+IC0KPiAt
LyoKPiAtICogcmVzZXQgeGdtaSBsaW5rIGNvdW50ZXJzCj4gLSAqCj4gLSAqIEBhZGV2IC0+IGFt
ZGdwdSBkZXZpY2UKPiAtICogQGluc3RhbmNlLT4gY3VycmVudGx5IGNha2UgaGFzIDIgbGlua3Mg
dG8gcG9sbCBvbiB2ZWdhMjAKPiAtICoKPiAtICovCj4gLXN0YXRpYyB2b2lkIGRmX3YzXzZfcmVz
ZXRfeGdtaV9saW5rX2NudHIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgaW5zdGFuY2UpCj4gK3N0YXRpYyB2
b2lkIGRmX3YzXzZfcmVzZXRfcGVyZm1vbl9jbnRyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3QgY29u
ZmlnKQo+ICB7Cj4gICAgICAgICB1aW50MzJfdCBsb19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRkcjsK
PiAtICAgICAgIHVpbnQ2NF90IGNvbmZpZzsKPiAtCj4gLSAgICAgICBjb25maWcgPSAwVUxMIHwg
KDB4N1VMTCkgfCAoKDB4NDZVTEwgKyBpbnN0YW5jZSkgPDwgOCkgfCAoMHgyIDw8IDE2KTsKPgo+
ICAgICAgICAgZGZfdjNfNl9wbWNfZ2V0X3JlYWRfc2V0dGluZ3MoYWRldiwgY29uZmlnLCAmbG9f
YmFzZV9hZGRyLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmhpX2Jh
c2VfYWRkcik7Cj4gQEAgLTMyMCwxODUgKzM0OCwxMDYgQEAgc3RhdGljIHZvaWQgZGZfdjNfNl9y
ZXNldF94Z21pX2xpbmtfY250cihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAgICAg
IFdSRUczMl9QQ0lFKGhpX2Jhc2VfYWRkciwgMFVMKTsKPiAgfQo+Cj4gLS8qCj4gLSAqIGFkZCB4
Z21pIGxpbmsgY291bnRlcnMKPiAtICoKPiAtICogQGFkZXYgLT4gYW1kZ3B1IGRldmljZQo+IC0g
KiBAaW5zdGFuY2UtPiBjdXJyZW50bHkgY2FrZSBoYXMgMiBsaW5rcyB0byBwb2xsIG9uIHZlZ2Ey
MAo+IC0gKgo+IC0gKi8KPgo+IC1zdGF0aWMgaW50IGRmX3YzXzZfYWRkX3hnbWlfbGlua19jbnRy
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaW50IGluc3RhbmNlKQo+ICtzdGF0aWMgaW50IGRmX3YzXzZfYWRkX3BlcmZt
b25fY250cihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IGNvbmZpZykKPiAgewo+ICAgICAgICAgdWludDMy
X3QgbG9fYmFzZV9hZGRyLCBoaV9iYXNlX2FkZHIsIGxvX3ZhbCwgaGlfdmFsOwo+IC0gICAgICAg
dWludDY0X3QgY29uZmlnOwo+ICAgICAgICAgaW50IHJldCwgaXNfYXNzaWduZWQ7Cj4KPiAtICAg
ICAgIGlmIChpbnN0YW5jZSA8IDAgfHwgaW5zdGFuY2UgPiAxKQo+IC0gICAgICAgICAgICAgICBy
ZXR1cm4gLUVJTlZBTDsKPiAtCj4gLSAgICAgICBjb25maWcgPSBHRVRfSU5TVEFOQ0VfQ09ORklH
KGluc3RhbmNlKTsKPiAtCj4gICAgICAgICByZXQgPSBkZl92M182X3BtY19hc3NpZ25fY250cihh
ZGV2LCBjb25maWcsICZpc19hc3NpZ25lZCk7Cj4KPiAgICAgICAgIGlmIChyZXQgfHwgaXNfYXNz
aWduZWQpCj4gICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4KPiAtICAgICAgIGRmX3YzXzZf
cG1jX2dldF9jdHJsX3NldHRpbmdzKGFkZXYsCj4gKyAgICAgICByZXQgPSBkZl92M182X3BtY19n
ZXRfY3RybF9zZXR0aW5ncyhhZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZywK
PiAgICAgICAgICAgICAgICAgICAgICAgICAmbG9fYmFzZV9hZGRyLAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICZoaV9iYXNlX2FkZHIsCj4gICAgICAgICAgICAgICAgICAgICAgICAgJmxvX3Zh
bCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAmaGlfdmFsKTsKPgo+ICsgICAgICAgaWYgKHJl
dCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArCj4gKyAgICAgICBEUk1fREVCVUdf
RFJJVkVSKCJjb25maWc9JWxseCBhZGRyPSUwOHg6JTA4eCB2YWw9JTA4eDolMDh4IiwKPiArICAg
ICAgICAgICAgICAgICAgICAgICBjb25maWcsIGxvX2Jhc2VfYWRkciwgaGlfYmFzZV9hZGRyLCBs
b192YWwsIGhpX3ZhbCk7Cj4gKwo+ICAgICAgICAgV1JFRzMyX1BDSUUobG9fYmFzZV9hZGRyLCBs
b192YWwpOwo+ICAgICAgICAgV1JFRzMyX1BDSUUoaGlfYmFzZV9hZGRyLCBoaV92YWwpOwo+Cj4g
ICAgICAgICByZXR1cm4gcmV0Owo+ICB9Cj4KPiAtCj4gLS8qCj4gLSAqIHN0YXJ0IHhnbWkgbGlu
ayBjb3VudGVycwo+IC0gKgo+IC0gKiBAYWRldiAtPiBhbWRncHUgZGV2aWNlCj4gLSAqIEBpbnN0
YW5jZS0+IGN1cnJlbnRseSBjYWtlIGhhcyAyIGxpbmtzIHRvIHBvbGwgb24gdmVnYTIwCj4gLSAq
IEBpc19lbmFibGUgLT4gZWl0aGVyIHJlc3VtZSBvciBhc3NpZ24gZXZlbnQgdmlhIGRmIHBlcmZt
b24KPiAtICoKPiAtICovCj4gLQo+IC1zdGF0aWMgaW50IGRmX3YzXzZfc3RhcnRfeGdtaV9saW5r
X2NudHIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGludCBpbnN0YW5jZSwKPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgaW50IGlzX2VuYWJsZSkKPiArc3RhdGljIGludCBkZl92M182X3Bt
Y19zdGFydChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3QgY29uZmlnLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGlzX2VuYWJsZSkKPiAgewo+ICAgICAgICAg
dWludDMyX3QgbG9fYmFzZV9hZGRyLCBoaV9iYXNlX2FkZHIsIGxvX3ZhbDsKPiAtICAgICAgIHVp
bnQ2NF90IGNvbmZpZzsKPiAtICAgICAgIGludCByZXQ7Cj4gLQo+IC0gICAgICAgaWYgKGluc3Rh
bmNlIDwgMCB8fCBpbnN0YW5jZSA+IDEpCj4gLSAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFM
Owo+IC0KPiAtICAgICAgIGlmIChpc19lbmFibGUpIHsKPiArICAgICAgIGludCByZXQgPSAwOwo+
Cj4gLSAgICAgICAgICAgICAgIHJldCA9IGRmX3YzXzZfYWRkX3hnbWlfbGlua19jbnRyKGFkZXYs
IGluc3RhbmNlKTsKPiAtCj4gLSAgICAgICAgICAgICAgIGlmIChyZXQpCj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArICAgICAgIHN3aXRjaCAoYWRldi0+YXNpY190eXBl
KSB7Cj4gKyAgICAgICBjYXNlIENISVBfVkVHQTIwOgo+Cj4gLSAgICAgICB9IGVsc2Ugewo+ICsg
ICAgICAgICAgICAgICBkZl92M182X3Jlc2V0X3BlcmZtb25fY250cihhZGV2LCBjb25maWcpOwo+
Cj4gLSAgICAgICAgICAgICAgIGNvbmZpZyA9IEdFVF9JTlNUQU5DRV9DT05GSUcoaW5zdGFuY2Up
Owo+ICsgICAgICAgICAgICAgICBpZiAoaXNfZW5hYmxlKSB7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgcmV0ID0gZGZfdjNfNl9hZGRfcGVyZm1vbl9jbnRyKGFkZXYsIGNvbmZpZyk7Cj4gKyAg
ICAgICAgICAgICAgIH0gZWxzZSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gZGZf
djNfNl9wbWNfZ2V0X2N0cmxfc2V0dGluZ3MoYWRldiwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY29uZmlnLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAmbG9fYmFzZV9hZGRyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAmaGlfYmFzZV9hZGRyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBOVUxMLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBOVUxMKTsKPgo+IC0gICAgICAgICAgICAgICBkZl92M182X3BtY19nZXRfY3RybF9zZXR0aW5n
cyhhZGV2LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgJmxvX2Jhc2VfYWRkciwKPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICZoaV9iYXNlX2FkZHIsCj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBOVUxMLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCk7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldCkKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4KPiAtICAgICAgICAgICAgICAgaWYgKGxvX2Jhc2Vf
YWRkciA9PSAwKQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsg
ICAgICAgICAgICAgICAgICAgICAgIGxvX3ZhbCA9IFJSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkcik7
Cj4KPiAtICAgICAgICAgICAgICAgbG9fdmFsID0gUlJFRzMyX1BDSUUobG9fYmFzZV9hZGRyKTsK
PiArICAgICAgICAgICAgICAgICAgICAgICBEUk1fREVCVUdfRFJJVkVSKCJjb25maWc9JWxseCBh
ZGRyPSUwOHg6JTA4eCB2YWw9JTA4eCIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBjb25maWcsIGxvX2Jhc2VfYWRkciwgaGlfYmFzZV9hZGRyLCBsb192YWwpOwo+Cj4gLSAgICAg
ICAgICAgICAgIFdSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkciwgbG9fdmFsIHwgKDFVTEwgPDwgMjIp
KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBXUkVHMzJfUENJRShsb19iYXNlX2FkZHIsIGxv
X3ZhbCB8ICgxVUxMIDw8IDIyKSk7Cj4gKyAgICAgICAgICAgICAgIH0KPgo+IC0gICAgICAgICAg
ICAgICByZXQgPSAwOwo+ICsgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgIGRlZmF1bHQ6
Cj4gKyAgICAgICAgICAgICAgIGJyZWFrOwo+ICAgICAgICAgfQo+Cj4gICAgICAgICByZXR1cm4g
cmV0Owo+IC0KPiAgfQo+Cj4gLS8qCj4gLSAqIHN0YXJ0IHhnbWkgbGluayBjb3VudGVycwo+IC0g
Kgo+IC0gKiBAYWRldiAtPiBhbWRncHUgZGV2aWNlCj4gLSAqIEBpbnN0YW5jZS0+IGN1cnJlbnRs
eSBjYWtlIGhhcyAyIGxpbmtzIHRvIHBvbGwgb24gdmVnYTIwCj4gLSAqIEBpc19lbmFibGUgLT4g
ZWl0aGVyIHBhdXNlIG9yIHVuYXNzaWduIGV2ZW50IHZpYSBkZiBwZXJmbW9uCj4gLSAqCj4gLSAq
Lwo+IC0KPiAtc3RhdGljIGludCBkZl92M182X3N0b3BfeGdtaV9saW5rX2NudHIoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaW50IGluc3RhbmNlLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGludCBpc19kaXNhYmxlKQo+ICtzdGF0aWMgaW50IGRmX3YzXzZfcG1jX3N0b3Aoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90IGNvbmZpZywKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaW50IGlzX2Rpc2FibGUpCj4gIHsKPiAtCj4gICAgICAgICB1aW50MzJfdCBsb19i
YXNlX2FkZHIsIGhpX2Jhc2VfYWRkciwgbG9fdmFsOwo+IC0gICAgICAgdWludDY0X3QgY29uZmln
Owo+IC0KPiAtICAgICAgIGNvbmZpZyA9IEdFVF9JTlNUQU5DRV9DT05GSUcoaW5zdGFuY2UpOwo+
IC0KPiAtICAgICAgIGlmIChpc19kaXNhYmxlKSB7Cj4gLSAgICAgICAgICAgICAgIGRmX3YzXzZf
cmVzZXRfeGdtaV9saW5rX2NudHIoYWRldiwgaW5zdGFuY2UpOwo+IC0gICAgICAgICAgICAgICBk
Zl92M182X3BtY19yZWxlYXNlX2NudHIoYWRldiwgY29uZmlnKTsKPiAtICAgICAgIH0gZWxzZSB7
Cj4gLQo+IC0gICAgICAgICAgICAgICBkZl92M182X3BtY19nZXRfY3RybF9zZXR0aW5ncyhhZGV2
LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLAo+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgJmxvX2Jhc2VfYWRkciwKPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICZoaV9iYXNlX2FkZHIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBOVUxMLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCk7Cj4gLQo+
IC0gICAgICAgICAgICAgICBpZiAoKGxvX2Jhc2VfYWRkciA9PSAwKSB8fCAoaGlfYmFzZV9hZGRy
ID09IDApKQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+IC0KPiAt
ICAgICAgICAgICAgICAgbG9fdmFsID0gUlJFRzMyX1BDSUUobG9fYmFzZV9hZGRyKTsKPiAtCj4g
LSAgICAgICAgICAgICAgIFdSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkciwgbG9fdmFsICYgfigxVUxM
IDw8IDIyKSk7Cj4gLSAgICAgICB9Cj4gLQo+IC0gICAgICAgcmV0dXJuIDA7Cj4gLX0KPiAtCj4g
LXN0YXRpYyBpbnQgZGZfdjNfNl9wbWNfc3RhcnQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYs
IHVpbnQ2NF90IGNvbmZpZywKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBpc19l
bmFibGUpCj4gLXsKPiAtICAgICAgIGludCB4Z21pX3R4X2xpbmssIHJldCA9IDA7Cj4gKyAgICAg
ICBpbnQgcmV0ID0gMDsKPgo+ICAgICAgICAgc3dpdGNoIChhZGV2LT5hc2ljX3R5cGUpIHsKPiAg
ICAgICAgIGNhc2UgQ0hJUF9WRUdBMjA6Cj4gLSAgICAgICAgICAgICAgIHhnbWlfdHhfbGluayA9
IElTX0RGX1hHTUlfMF9UWChjb25maWcpID8gMAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICA6IChJU19ERl9YR01JXzFfVFgoY29uZmlnKSA/IDEgOiAtMSk7Cj4gLQo+
IC0gICAgICAgICAgICAgICBpZiAoeGdtaV90eF9saW5rID49IDApCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgcmV0ID0gZGZfdjNfNl9zdGFydF94Z21pX2xpbmtfY250cihhZGV2LCB4Z21pX3R4
X2xpbmssCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaXNfZW5hYmxlKTsKPiArICAgICAgICAgICAgICAgcmV0ID0gZGZfdjNfNl9wbWNfZ2V0
X2N0cmxfc2V0dGluZ3MoYWRldiwKPiArICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgJmxvX2Jhc2VfYWRkciwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAmaGlfYmFzZV9hZGRyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIE5VTEwsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgTlVMTCk7Cj4KPiAgICAgICAgICAgICAgICAgaWYgKHJl
dCkKPiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+Cj4gLSAgICAgICAgICAg
ICAgIHJldCA9IDA7Cj4gLSAgICAgICAgICAgICAgIGJyZWFrOwo+IC0gICAgICAgZGVmYXVsdDoK
PiAtICAgICAgICAgICAgICAgYnJlYWs7Cj4gLSAgICAgICB9Cj4gKyAgICAgICAgICAgICAgIGxv
X3ZhbCA9IFJSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkcik7Cj4KPiAtICAgICAgIHJldHVybiByZXQ7
Cj4gLX0KPiArICAgICAgICAgICAgICAgRFJNX0RFQlVHX0RSSVZFUigiY29uZmlnPSVsbHggYWRk
cj0lMDh4OiUwOHggdmFsPSUwOHgiLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
Y29uZmlnLCBsb19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRkciwgbG9fdmFsKTsKPgo+IC1zdGF0aWMg
aW50IGRmX3YzXzZfcG1jX3N0b3Aoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQ2NF90
IGNvbmZpZywKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGlzX2Rpc2FibGUpCj4g
LXsKPiAtICAgICAgIGludCB4Z21pX3R4X2xpbmssIHJldCA9IDA7Cj4gKyAgICAgICAgICAgICAg
IFdSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkciwgbG9fdmFsICYgfigxVUxMIDw8IDIyKSk7Cj4KPiAt
ICAgICAgIHN3aXRjaCAoYWRldi0+YXNpY190eXBlKSB7Cj4gLSAgICAgICBjYXNlIENISVBfVkVH
QTIwOgo+IC0gICAgICAgICAgICAgICAgICAgICAgIHhnbWlfdHhfbGluayA9IElTX0RGX1hHTUlf
MF9UWChjb25maWcpID8gMAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoSVNf
REZfWEdNSV8xX1RYKGNvbmZpZykgPyAxIDogLTEpOwo+IC0KPiAtICAgICAgICAgICAgICAgICAg
ICAgICBpZiAoeGdtaV90eF9saW5rID49IDApIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHJldCA9IGRmX3YzXzZfc3RvcF94Z21pX2xpbmtfY250cihhZGV2LAo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHhnbWlfdHhfbGluaywKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpc19kaXNhYmxlKTsKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIChyZXQpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHJldHVybiByZXQ7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgfQo+IC0KPiAt
ICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAwOwo+IC0gICAgICAgICAgICAgICAgICAgICAg
IGJyZWFrOwo+ICsgICAgICAgICAgICAgICBpZiAoaXNfZGlzYWJsZSkKPiArICAgICAgICAgICAg
ICAgICAgICAgICBkZl92M182X3BtY19yZWxlYXNlX2NudHIoYWRldiwgY29uZmlnKTsKPiArCj4g
KyAgICAgICAgICAgICAgIGJyZWFrOwo+ICAgICAgICAgZGVmYXVsdDoKPiAgICAgICAgICAgICAg
ICAgYnJlYWs7Cj4gICAgICAgICB9Cj4gQEAgLTUxMCwyNCArNDU5LDM0IEBAIHN0YXRpYyB2b2lk
IGRmX3YzXzZfcG1jX2dldF9jb3VudChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3QgY29uZmlnLAo+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCAqY291bnQpCj4gIHsKPiAtCj4gLSAg
ICAgICBpbnQgeGdtaV90eF9saW5rOwo+ICsgICAgICAgdWludDMyX3QgbG9fYmFzZV9hZGRyLCBo
aV9iYXNlX2FkZHIsIGxvX3ZhbCwgaGlfdmFsOwo+ICsgICAgICAgKmNvdW50ID0gMDsKPgo+ICAg
ICAgICAgc3dpdGNoIChhZGV2LT5hc2ljX3R5cGUpIHsKPiAgICAgICAgIGNhc2UgQ0hJUF9WRUdB
MjA6Cj4gLSAgICAgICAgICAgICAgIHhnbWlfdHhfbGluayA9IElTX0RGX1hHTUlfMF9UWChjb25m
aWcpID8gMAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChJU19E
Rl9YR01JXzFfVFgoY29uZmlnKSA/IDEgOiAtMSk7Cj4KPiAtICAgICAgICAgICAgICAgaWYgKHhn
bWlfdHhfbGluayA+PSAwKSB7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgZGZfdjNfNl9yZXNl
dF94Z21pX2xpbmtfY250cihhZGV2LCB4Z21pX3R4X2xpbmspOwo+IC0gICAgICAgICAgICAgICAg
ICAgICAgIGRmX3YzXzZfZ2V0X3hnbWlfbGlua19jbnRyKGFkZXYsIHhnbWlfdHhfbGluaywgY291
bnQpOwo+IC0gICAgICAgICAgICAgICB9Cj4gKyAgICAgICAgICAgICAgIGRmX3YzXzZfcG1jX2dl
dF9yZWFkX3NldHRpbmdzKGFkZXYsIGNvbmZpZywgJmxvX2Jhc2VfYWRkciwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICZoaV9iYXNlX2FkZHIpOwo+ICsKPiArICAgICAg
ICAgICAgICAgaWYgKChsb19iYXNlX2FkZHIgPT0gMCkgfHwgKGhpX2Jhc2VfYWRkciA9PSAwKSkK
PiArICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47Cj4gKwo+ICsgICAgICAgICAgICAgICBs
b192YWwgPSBSUkVHMzJfUENJRShsb19iYXNlX2FkZHIpOwo+ICsgICAgICAgICAgICAgICBoaV92
YWwgPSBSUkVHMzJfUENJRShoaV9iYXNlX2FkZHIpOwo+ICsKPiArICAgICAgICAgICAgICAgKmNv
dW50ICA9ICgoaGlfdmFsIHwgMFVMTCkgPDwgMzIpIHwgKGxvX3ZhbCB8IDBVTEwpOwo+ICsKPiAr
ICAgICAgICAgICAgICAgaWYgKCpjb3VudCA+PSBERl9WM182X1BFUkZNT05fT1ZFUkZMT1cpCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgKmNvdW50ID0gMDsKPiArCj4gKyAgICAgICAgICAgICAg
IERSTV9ERUJVR19EUklWRVIoImNvbmZpZz0lbGx4IGFkZHI9JTA4eDolMDh4IHZhbD0lMDh4OiUw
OHgiLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZywgbG9fYmFzZV9hZGRyLCBoaV9i
YXNlX2FkZHIsIGxvX3ZhbCwgaGlfdmFsKTsKPgo+ICAgICAgICAgICAgICAgICBicmVhazsKPiAr
Cj4gICAgICAgICBkZWZhdWx0Ogo+ICAgICAgICAgICAgICAgICBicmVhazsKPiAgICAgICAgIH0K
PiAtCj4gIH0KPgo+ICBjb25zdCBzdHJ1Y3QgYW1kZ3B1X2RmX2Z1bmNzIGRmX3YzXzZfZnVuY3Mg
PSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuaCBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuaAo+IGluZGV4IGZjZmZkODA3NzY0
ZC4uNzY5OTg1NDFiYzMwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2RmX3YzXzYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuaAo+
IEBAIC0zNiwyMiArMzYsMTUgQEAgZW51bSBERl9WM182X01HQ0cgewo+ICB9Owo+Cj4gIC8qIERl
ZmluZWQgaW4gZ2xvYmFsX2ZlYXR1cmVzLmggYXMgRlRJX1BFUkZNT05fVklTSUJMRSAqLwo+IC0j
ZGVmaW5lIEFNREdQVV9ERl9NQVhfQ09VTlRFUlMgICAgICAgICA0Cj4gKyNkZWZpbmUgREZfVjNf
Nl9NQVhfQ09VTlRFUlMgICAgICAgICAgIDQKPgo+ICAvKiBnZXQgZmxhZ3MgZnJvbSBkZiBwZXJm
bW9uIGNvbmZpZyAqLwo+IC0jZGVmaW5lIEdFVF9FVkVOVCh4KSAgICAgICAgICAgICAgICAgICAo
eCAmIDB4RkZVTCkKPiAtI2RlZmluZSBHRVRfSU5TVEFOQ0UoeCkgICAgICAgICAgICAgICAgICAg
ICAgICAoKHggPj4gOCkgJiAweEZGVUwpCj4gLSNkZWZpbmUgR0VUX1VOSVRNQVNLKHgpICAgICAg
ICAgICAgICAgICAgICAgICAgKCh4ID4+IDE2KSAmIDB4RkZVTCkKPiAtI2RlZmluZSBHRVRfSU5T
VEFOQ0VfQ09ORklHKHgpICAgICAgICAgKDBVTEwgfCAoMHgwN1VMTCkgXAo+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoMHgwNDZVTEwgKyB4KSA8PCA4KSBcCj4g
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKDB4MDIgPDwgMTYpKQo+
IC0KPiAtLyogZGYgZXZlbnQgY29uZiBtYWNyb3MgKi8KPiAtI2RlZmluZSBJU19ERl9YR01JXzBf
VFgoeCkgKEdFVF9FVkVOVCh4KSA9PSAweDcgXAo+IC0gICAgICAgICAgICAgICAmJiBHRVRfSU5T
VEFOQ0UoeCkgPT0gMHg0NiAmJiBHRVRfVU5JVE1BU0soeCkgPT0gMHgyKQo+IC0jZGVmaW5lIElT
X0RGX1hHTUlfMV9UWCh4KSAoR0VUX0VWRU5UKHgpID09IDB4NyBcCj4gLSAgICAgICAgICAgICAg
ICYmIEdFVF9JTlNUQU5DRSh4KSA9PSAweDQ3ICYmIEdFVF9VTklUTUFTSyh4KSA9PSAweDIpCj4g
KyNkZWZpbmUgREZfVjNfNl9HRVRfRVZFTlQoeCkgICAgICAgICAgICh4ICYgMHhGRlVMKQo+ICsj
ZGVmaW5lIERGX1YzXzZfR0VUX0lOU1RBTkNFKHgpICAgICAgICAgICAgICAgICgoeCA+PiA4KSAm
IDB4RkZVTCkKPiArI2RlZmluZSBERl9WM182X0dFVF9VTklUTUFTSyh4KSAgICAgICAgICAgICAg
ICAoKHggPj4gMTYpICYgMHhGRlVMKQo+ICsjZGVmaW5lIERGX1YzXzZfUEVSRk1PTl9PVkVSRkxP
VyAgICAgICAweEZGRkZGRkZGRkZGRlVMTAo+Cj4gK2V4dGVybiBjb25zdCBzdHJ1Y3QgYXR0cmli
dXRlX2dyb3VwICpkZl92M182X2F0dHJfZ3JvdXBzW107Cj4gIGV4dGVybiBjb25zdCBzdHJ1Y3Qg
YW1kZ3B1X2RmX2Z1bmNzIGRmX3YzXzZfZnVuY3M7Cj4KPiAgI2VuZGlmCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NvYzE1LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9zb2MxNS5jCj4gaW5kZXggNzhiZDRmYzA3YmFiLi43ZmVlMjRlYTc4NjMgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvc29jMTUuYwo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NvYzE1LmMKPiBAQCAtMTA2Niw2ICsxMDY2LDcgQEAgc3Rh
dGljIHZvaWQgc29jMTVfZG9vcmJlbGxfcmFuZ2VfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikKPiAgc3RhdGljIGludCBzb2MxNV9jb21tb25faHdfaW5pdCh2b2lkICpoYW5kbGUpCj4g
IHsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICopaGFuZGxlOwo+ICsgICAgICAgaW50IHJldDsKPgo+ICAgICAgICAgLyogZW5hYmxl
IHBjaWUgZ2VuMi8zIGxpbmsgKi8KPiAgICAgICAgIHNvYzE1X3BjaWVfZ2VuM19lbmFibGUoYWRl
dik7Cj4gQEAgLTEwNzksNiArMTA4MCw5IEBAIHN0YXRpYyBpbnQgc29jMTVfY29tbW9uX2h3X2lu
aXQodm9pZCAqaGFuZGxlKQo+ICAgICAgICAgICovCj4gICAgICAgICBpZiAoYWRldi0+bmJpb19m
dW5jcy0+cmVtYXBfaGRwX3JlZ2lzdGVycykKPiAgICAgICAgICAgICAgICAgYWRldi0+bmJpb19m
dW5jcy0+cmVtYXBfaGRwX3JlZ2lzdGVycyhhZGV2KTsKPiArCj4gKyAgICAgICBhZGV2LT5kZl9m
dW5jcy0+aW5pdChhZGV2KTsKPiArCj4gICAgICAgICAvKiBlbmFibGUgdGhlIGRvb3JiZWxsIGFw
ZXJ0dXJlICovCj4gICAgICAgICBzb2MxNV9lbmFibGVfZG9vcmJlbGxfYXBlcnR1cmUoYWRldiwg
dHJ1ZSk7Cj4gICAgICAgICAvKiBIVyBkb29yYmVsbCByb3V0aW5nIHBvbGljeTogZG9vcmJlbGwg
d3JpdGluZyBub3QKPiAtLQo+IDIuMTcuMQo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KPiBhbWQtZ2Z4IG1haWxpbmcgbGlzdAo+IGFtZC1nZnhAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9hbWQtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdm
eA==
