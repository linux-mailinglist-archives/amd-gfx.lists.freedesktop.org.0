Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1F500DFA07
	for <lists+amd-gfx@lfdr.de>; Tue, 22 Oct 2019 03:04:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 155926E2F3;
	Tue, 22 Oct 2019 01:03:59 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-BL2-obe.outbound.protection.outlook.com
 (mail-eopbgr750079.outbound.protection.outlook.com [40.107.75.79])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4E5E26E2F0
 for <amd-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 01:03:57 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=lmiK28Etx7S0L0nvHxNIfzM6BDezRgVotK2w3uXZuurUqQrtPxA6J2by4FiJwRrfmCWZpxYNygZsFE2/5i0AIjIqQ4hSKl9Q2gLTYt2eHHVefmvwCUJrn93+pk9b9zmbIIQBKRTMX15aPsWEbnTSIcxt1uWFWW6sUfrbraJ00+zvLVQUS/4p3wGalHV1da05PSp4jsd14c/ucHjtc06BeHen79A8Wf8DliqAZxFzF7tGH9AdB1H2hTScdDcCcDUcd2hzPF7ZyYK3XFuVsybhyBbsxdNAOZfNN323BMV9lepbuuEYpPNVEtJZeUlbFTrJyNwV4Lo5G3YkJ9i1/i4xpw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bA8ipovtsp92psboY6xxngO0WXBhG9X7Mup9mO6Vv0s=;
 b=VvswtIL29OPhnefW6ZhUgHQ84dwsg1CI88m3Pmre4gEi571PwdysJUfRAA6aL+We2IUOpVi9SKiMOwUCM50In5F4WtP2yYvIoRh643YsyoZSmqh6wMoBxf2u9nY/P8Bef3cWcih5G+WPM4lLIwOHI2AprZ8o6YJQNwgW86BC+hUJtGpeeveKCCRnBqHoB53Zttjy1Z7m1QfhtT8wlHbYJ1KnUNe4r9z2UYCzxXI5cVYdxAB7yw3LyaXzCR0FscCkchdgTQrCSqD2dMgQeo7GFRkXXwHVu5YSbY3GLd5WhLpW+m1Zo1xFkchsIR8xw8Omlj1yDoHZ00hxq8hO7O0n7g==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM6PR12MB3947.namprd12.prod.outlook.com (10.255.174.156) by
 DM6PR12MB3611.namprd12.prod.outlook.com (20.178.199.85) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2367.20; Tue, 22 Oct 2019 01:03:54 +0000
Received: from DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::e56a:1c63:d6bd:8034]) by DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::e56a:1c63:d6bd:8034%4]) with mapi id 15.20.2367.019; Tue, 22 Oct 2019
 01:03:54 +0000
From: "Kuehling, Felix" <Felix.Kuehling@amd.com>
To: "Yang, Philip" <Philip.Yang@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: Re: [PATCH] drm/amdkfd: don't use dqm lock during device
 reset/suspend/resume
Thread-Topic: [PATCH] drm/amdkfd: don't use dqm lock during device
 reset/suspend/resume
Thread-Index: AQHViFMuq9YMscmH4UyKlVOEPH6sbadl2H0A
Date: Tue, 22 Oct 2019 01:03:54 +0000
Message-ID: <fbdfee2b-e9f9-598c-14f3-719429b9f374@amd.com>
References: <20191021210436.10571-1-Philip.Yang@amd.com>
In-Reply-To: <20191021210436.10571-1-Philip.Yang@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [165.204.55.251]
user-agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
x-clientproxiedby: YT1PR01CA0011.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01::24)
 To DM6PR12MB3947.namprd12.prod.outlook.com
 (2603:10b6:5:1cb::28)
x-ms-exchange-messagesentrepresentingtype: 1
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: 5b022d4e-e3c0-4293-8d1c-08d7568bb54a
x-ms-traffictypediagnostic: DM6PR12MB3611:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM6PR12MB361141565606FFBEEFA2913492680@DM6PR12MB3611.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:7691;
x-forefront-prvs: 01986AE76B
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(136003)(376002)(396003)(366004)(346002)(189003)(199004)(446003)(2616005)(8936002)(11346002)(6246003)(71200400001)(316002)(86362001)(110136005)(58126008)(476003)(71190400001)(2906002)(31686004)(486006)(2501003)(186003)(36756003)(8676002)(81156014)(31696002)(81166006)(14444005)(256004)(64756008)(66066001)(66476007)(66556008)(102836004)(15650500001)(66446008)(6436002)(7736002)(5660300002)(478600001)(305945005)(25786009)(66946007)(65806001)(99286004)(26005)(65956001)(53546011)(6506007)(386003)(6116002)(76176011)(4001150100001)(6486002)(14454004)(229853002)(6512007)(52116002)(3846002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB3611;
 H:DM6PR12MB3947.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: ToOQ3d66sr5zRAVhEDL9MopT1Om49MPqkA+oX4mq0w9EEvhgrmMJgtpSz5luqWaqSTO7vKnuU8ydJueCrA1BrrWSoETsS+mRVdtL9q6FNb9a2VBOhy31FhhC5OlBL6JQzQJQRWLaS5S8sw3872At6VR/FqQEVJOvxsvkpmKLb9hwrqKGsgEb72d/sjgTQPOlPW3NxkblRsoj3/lPxwDTX1IQJRTCMbLXNeCgixLDuTlJxpXRSwYo0ym54De1tAnS5BbKXsK8Hp0CrLxOchhOuDpn3Im0Ze1osbuXswnPVmGYeZXtQdME4ru8TvsMb/N53/RBjBJnx7k1+CziRfqCTuNKII/i1U57DxezUfL+pvncljIe7Ia6x4u69e7KzlMRRnOYm0q2nxLjV7073NCVMpfNqNJ8nG4+e6PVa3Nw7zPwhfTdarYzw5uegkCq8fR0
Content-ID: <2FEA908B770A40498F2426B9B15F9B51@namprd12.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 5b022d4e-e3c0-4293-8d1c-08d7568bb54a
X-MS-Exchange-CrossTenant-originalarrivaltime: 22 Oct 2019 01:03:54.1017 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: tDjMiZcBiG5CWKd6ZzGygZgndYEXe2gdSlwwNAzztNSvHpQZ34odIXnQRM4xK3bZaiEJoQvWxlI/M5TUz40/AQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3611
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bA8ipovtsp92psboY6xxngO0WXBhG9X7Mup9mO6Vv0s=;
 b=HA+/GDpcVJUBKQttpPblL6KVo1LO2O/H3Lsc3k8kiGtau8ldGjMkjpqf+5kUMTmVQo/F9uORnnu6dOlOYYYofkaCfz4z7QETobBUseQvo1RsMwuQj3r1XkZ+q26d7Tpbt6bELJodBtmNgJVFtZZzd7zHcJoRXQ11Bep65Rv31QU=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Felix.Kuehling@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

DQpPbiAyMDE5LTEwLTIxIDU6MDQgcC5tLiwgWWFuZywgUGhpbGlwIHdyb3RlOg0KPiBJZiBkZXZp
Y2UgcmVzZXQvc3VzcGVuZC9yZXN1bWUgZmFpbGVkIGZvciBzb21lIHJlYXNvbiwgZHFtIGxvY2sg
aXMNCj4gaG9sZCBmb3JldmVyIGFuZCB0aGlzIGNhdXNlcyBkZWFkbG9jay4gQmVsb3cgaXMgYSBr
ZXJuZWwgYmFja3RyYWNlIHdoZW4NCj4gYXBwbGljYXRpb24gb3BlbiBrZmQgYWZ0ZXIgc3VzcGVu
ZC9yZXN1bWUgZmFpbGVkLg0KPg0KPiBJbnN0ZWFkIG9mIGhvbGRpbmcgZHFtIGxvY2sgaW4gcHJl
X3Jlc2V0IGFuZCByZWxlYXNpbmcgZHFtIGxvY2sgaW4NCj4gcG9zdF9yZXNldCwgYWRkIGRxbS0+
ZGV2aWNlX3N0b3BwZWQgZmxhZyB3aGljaCBpcyBtb2RpZmllZCBpbg0KPiBkcW0tPm9wcy5zdGFy
dCBhbmQgZHFtLT5vcHMuc3RvcC4gVGhlIGZsYWcgZG9lc24ndCBuZWVkIGxvY2sgcHJvdGVjdGlv
bg0KPiBiZWNhdXNlIHdyaXRlL3JlYWQgYXJlIGFsbCBpbnNpZGUgZHFtIGxvY2suDQo+DQo+IEZv
ciBIV1MgY2FzZSwgbWFwX3F1ZXVlc19jcHNjaCBhbmQgdW5tYXBfcXVldWVzX2Nwc2NoIGNoZWNr
cw0KPiBkZXZpY2Vfc3RvcHBlZCBmbGFnIGJlZm9yZSBzZW5kaW5nIHRoZSB1cGRhdGVkIHJ1bmxp
c3QuDQoNCldoYXQgYWJvdXQgdGhlIG5vbi1IV1MgY2FzZT8NCg0KSW4gdGhlb3J5IGluIG5vbi1I
V1MgY2FzZSBuZXcgcXVldWVzIHNob3VsZCBiZSBjcmVhdGVkIGluIGV2aWN0ZWQgc3RhdGUgDQp3
aGlsZSB0aGUgZGV2aWNlIChhbmQgYWxsIHByb2Nlc3NlcykgYXJlIHN1c3BlbmRlZC4gU28gd2Ug
c2hvdWxkIG5ldmVyIA0KdHJ5IHRvIG1hcCBvciB1bm1hcCBxdWV1ZXMgdG8gSFFEcyBkdXJpbmcg
c3VzcGVuZC4gQnV0IEknZCBmZWVsIGJldHRlciANCndpdGggYSBXQVJOX09OIGFuZCBlcnJvciBy
ZXR1cm4gaW4gdGhlIHJpZ2h0IHBsYWNlcyB0byBtYWtlIHN1cmUgd2UncmUgDQpub3QgbWlzc2lu
ZyBhbnl0aGluZy4gQmFzaWNhbGx5LCB3ZSBjYW4ndCBjYWxsIGFueSBvZiB0aGUgDQpsb2FkL2Rl
c3Ryb3lfbXFkIGZ1bmN0aW9ucyB3aGlsZSBzdXNwZW5kZWQuDQoNClRoYXQgcmVtaW5kcyBtZSwg
d2UgYWxzbyBoYXZlIHRvIGFkZCBzb21lIGNoZWNrcyBpbiB0aGUgZGVidWdmcyBjb2RlIHRvIA0K
YXZvaWQgZHVtcGluZyBIUURzIG9mIGEgRFFNIHRoYXQncyBzdG9wcGVkLg0KDQpMYXN0IGNvbW1l
bnQ6IGRxbS0+ZGV2aWNlX3N0b3BwZWQgbXVzdCBiZSBpbml0aWFsaXplZCBhcyB0cnVlLiBJdCB3
aWxsIA0KZ2V0IHNldCB0byBmYWxzZSB3aGVuIHRoZSBkZXZpY2UgaXMgZmlyc3Qgc3RhcnRlZC4g
SXQgbWF5IGJlIGVhc2llciB0byANCnJldmVyc2UgdGhlIGxvZ2ljLCBzb21ldGhpbmcgbGlrZSBk
cW0tPnNjaGVkX3J1bm5pbmcgdGhhdCBnZXRzIA0KaW1wbGljaXRseSBpbml0aWFsaXplZCBhcyBm
YWxzZS4NCg0KUmVnYXJkcywNCiDCoCBGZWxpeA0KDQoNCj4NCj4gQmFja3RyYWNlIG9mIGRxbSBs
b2NrIGRlYWRsb2NrOg0KPg0KPiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSBJTkZPOiB0YXNr
IHJvY21pbmZvOjMwMjQgYmxvY2tlZCBmb3IgbW9yZQ0KPiB0aGFuIDEyMCBzZWNvbmRzLg0KPiBb
VGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAgICAgICBOb3QgdGFpbnRlZA0KPiA1LjAuMC1yYzEt
a2ZkLWNvbXB1dGUtcm9jbS1ka21zLW5vLW5waS0xMTMxICMxDQo+IFtUaHUgT2N0IDE3IDE2OjQz
OjM3IDIwMTldICJlY2hvIDAgPg0KPiAvcHJvYy9zeXMva2VybmVsL2h1bmdfdGFza190aW1lb3V0
X3NlY3MiIGRpc2FibGVzIHRoaXMgbWVzc2FnZS4NCj4gW1RodSBPY3QgMTcgMTY6NDM6MzcgMjAx
OV0gcm9jbWluZm8gICAgICAgIEQgICAgMCAgMzAyNCAgIDI5NDcNCj4gMHg4MDAwMDAwMA0KPiBb
VGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSBDYWxsIFRyYWNlOg0KPiBbVGh1IE9jdCAxNyAxNjo0
MzozNyAyMDE5XSAgPyBfX3NjaGVkdWxlKzB4M2Q5LzB4OGEwDQo+IFtUaHUgT2N0IDE3IDE2OjQz
OjM3IDIwMTldICBzY2hlZHVsZSsweDMyLzB4NzANCj4gW1RodSBPY3QgMTcgMTY6NDM6MzcgMjAx
OV0gIHNjaGVkdWxlX3ByZWVtcHRfZGlzYWJsZWQrMHhhLzB4MTANCj4gW1RodSBPY3QgMTcgMTY6
NDM6MzcgMjAxOV0gIF9fbXV0ZXhfbG9jay5pc3JhLjkrMHgxZTMvMHg0ZTANCj4gW1RodSBPY3Qg
MTcgMTY6NDM6MzcgMjAxOV0gID8gX19jYWxsX3NyY3UrMHgyNjQvMHgzYjANCj4gW1RodSBPY3Qg
MTcgMTY6NDM6MzcgMjAxOV0gID8gcHJvY2Vzc190ZXJtaW5hdGlvbl9jcHNjaCsweDI0LzB4MmYw
DQo+IFthbWRncHVdDQo+IFtUaHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldICBwcm9jZXNzX3Rlcm1p
bmF0aW9uX2Nwc2NoKzB4MjQvMHgyZjANCj4gW2FtZGdwdV0NCj4gW1RodSBPY3QgMTcgMTY6NDM6
MzcgMjAxOV0NCj4ga2ZkX3Byb2Nlc3NfZGVxdWV1ZV9mcm9tX2FsbF9kZXZpY2VzKzB4NDIvMHg2
MCBbYW1kZ3B1XQ0KPiBbVGh1IE9jdCAxNyAxNjo0MzozNyAyMDE5XSAga2ZkX3Byb2Nlc3Nfbm90
aWZpZXJfcmVsZWFzZSsweDFiZS8weDIyMA0KPiBbYW1kZ3B1XQ0KPiBbVGh1IE9jdCAxNyAxNjo0
MzozNyAyMDE5XSAgX19tbXVfbm90aWZpZXJfcmVsZWFzZSsweDNlLzB4YzANCj4gW1RodSBPY3Qg
MTcgMTY6NDM6MzcgMjAxOV0gIGV4aXRfbW1hcCsweDE2MC8weDFhMA0KPiBbVGh1IE9jdCAxNyAx
Njo0MzozNyAyMDE5XSAgPyBfX2hhbmRsZV9tbV9mYXVsdCsweGJhMy8weDEyMDANCj4gW1RodSBP
Y3QgMTcgMTY6NDM6MzcgMjAxOV0gID8gZXhpdF9yb2J1c3RfbGlzdCsweDVhLzB4MTEwDQo+IFtU
aHUgT2N0IDE3IDE2OjQzOjM3IDIwMTldICBtbXB1dCsweDRhLzB4MTIwDQo+IFtUaHUgT2N0IDE3
IDE2OjQzOjM3IDIwMTldICBkb19leGl0KzB4Mjg0LzB4YjIwDQo+IFtUaHUgT2N0IDE3IDE2OjQz
OjM3IDIwMTldICA/IGhhbmRsZV9tbV9mYXVsdCsweGZhLzB4MjAwDQo+IFtUaHUgT2N0IDE3IDE2
OjQzOjM3IDIwMTldICBkb19ncm91cF9leGl0KzB4M2EvMHhhMA0KPiBbVGh1IE9jdCAxNyAxNjo0
MzozNyAyMDE5XSAgX194NjRfc3lzX2V4aXRfZ3JvdXArMHgxNC8weDIwDQo+IFtUaHUgT2N0IDE3
IDE2OjQzOjM3IDIwMTldICBkb19zeXNjYWxsXzY0KzB4NGYvMHgxMDANCj4gW1RodSBPY3QgMTcg
MTY6NDM6MzcgMjAxOV0gIGVudHJ5X1NZU0NBTExfNjRfYWZ0ZXJfaHdmcmFtZSsweDQ0LzB4YTkN
Cj4NCj4gU3VnZ2VzdGVkLWJ5OiBGZWxpeCBLdWVobGluZyA8RmVsaXguS3VlaGxpbmdAYW1kLmNv
bT4NCj4gU2lnbmVkLW9mZi1ieTogUGhpbGlwIFlhbmcgPFBoaWxpcC5ZYW5nQGFtZC5jb20+DQo+
IC0tLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMgICAgICAg
ICAgICB8ICA2ICsrKy0tLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZp
Y2UuYyAgICAgICAgICAgICB8ICA1IC0tLS0tDQo+ICAgLi4uL2dwdS9kcm0vYW1kL2FtZGtmZC9r
ZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuYyAgIHwgMTMgKysrKysrKysrKy0tLQ0KPiAgIC4uLi9n
cHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2VyLmggICB8ICAxICsNCj4g
ICA0IGZpbGVzIGNoYW5nZWQsIDE0IGluc2VydGlvbnMoKyksIDExIGRlbGV0aW9ucygtKQ0KPg0K
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2NoYXJkZXYuYyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMNCj4gaW5kZXggZDllMzZk
YmYxM2Q1Li40MGQ3NWMzOWYwOGUgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1ka2ZkL2tmZF9jaGFyZGV2LmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQv
a2ZkX2NoYXJkZXYuYw0KPiBAQCAtMTIwLDEzICsxMjAsMTMgQEAgc3RhdGljIGludCBrZmRfb3Bl
bihzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZXApDQo+ICAgCQlyZXR1cm4g
LUVQRVJNOw0KPiAgIAl9DQo+ICAgDQo+ICsJaWYgKGtmZF9pc19sb2NrZWQoKSkNCj4gKwkJcmV0
dXJuIC1FQUdBSU47DQo+ICsNCj4gICAJcHJvY2VzcyA9IGtmZF9jcmVhdGVfcHJvY2VzcyhmaWxl
cCk7DQo+ICAgCWlmIChJU19FUlIocHJvY2VzcykpDQo+ICAgCQlyZXR1cm4gUFRSX0VSUihwcm9j
ZXNzKTsNCj4gICANCj4gLQlpZiAoa2ZkX2lzX2xvY2tlZCgpKQ0KPiAtCQlyZXR1cm4gLUVBR0FJ
TjsNCj4gLQ0KPiAgIAlkZXZfZGJnKGtmZF9kZXZpY2UsICJwcm9jZXNzICVkIG9wZW5lZCwgY29t
cGF0IG1vZGUgKDMyIGJpdCkgLSAlZFxuIiwNCj4gICAJCXByb2Nlc3MtPnBhc2lkLCBwcm9jZXNz
LT5pc18zMmJpdF91c2VyX21vZGUpOw0KPiAgIA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQv
a2ZkX2RldmljZS5jDQo+IGluZGV4IDhmNGIyNGU4NDk2NC4uNGZhODgzNGNlN2NiIDEwMDY0NA0K
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlLmMNCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZS5jDQo+IEBAIC03MzAsOSArNzMw
LDYgQEAgaW50IGtnZDJrZmRfcHJlX3Jlc2V0KHN0cnVjdCBrZmRfZGV2ICprZmQpDQo+ICAgCQly
ZXR1cm4gMDsNCj4gICAJa2dkMmtmZF9zdXNwZW5kKGtmZCk7DQo+ICAgDQo+IC0JLyogaG9sZCBk
cW0tPmxvY2sgdG8gcHJldmVudCBmdXJ0aGVyIGV4ZWN1dGlvbiovDQo+IC0JZHFtX2xvY2soa2Zk
LT5kcW0pOw0KPiAtDQo+ICAgCWtmZF9zaWduYWxfcmVzZXRfZXZlbnQoa2ZkKTsNCj4gICAJcmV0
dXJuIDA7DQo+ICAgfQ0KPiBAQCAtNzUwLDggKzc0Nyw2IEBAIGludCBrZ2Qya2ZkX3Bvc3RfcmVz
ZXQoc3RydWN0IGtmZF9kZXYgKmtmZCkNCj4gICAJaWYgKCFrZmQtPmluaXRfY29tcGxldGUpDQo+
ICAgCQlyZXR1cm4gMDsNCj4gICANCj4gLQlkcW1fdW5sb2NrKGtmZC0+ZHFtKTsNCj4gLQ0KPiAg
IAlyZXQgPSBrZmRfcmVzdW1lKGtmZCk7DQo+ICAgCWlmIChyZXQpDQo+ICAgCQlyZXR1cm4gcmV0
Ow0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9x
dWV1ZV9tYW5hZ2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlX3F1
ZXVlX21hbmFnZXIuYw0KPiBpbmRleCA4MWZiNTQ1Y2Y0MmMuLjA0YTQwZmFiZTlkNyAxMDA2NDQN
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9tYW5h
Z2VyLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1
ZV9tYW5hZ2VyLmMNCj4gQEAgLTkxNSw3ICs5MTUsOCBAQCBzdGF0aWMgaW50IHN0YXJ0X25vY3Bz
Y2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0pDQo+ICAgCQ0KPiAgIAlpZiAoZHFt
LT5kZXYtPmRldmljZV9pbmZvLT5hc2ljX2ZhbWlseSA9PSBDSElQX0hBV0FJSSkNCj4gICAJCXJl
dHVybiBwbV9pbml0KCZkcW0tPnBhY2tldHMsIGRxbSk7DQo+IC0JDQo+ICsJZHFtLT5kZXZpY2Vf
c3RvcHBlZCA9IGZhbHNlOw0KPiArDQo+ICAgCXJldHVybiAwOw0KPiAgIH0NCj4gICANCj4gQEAg
LTkyMyw3ICs5MjQsOCBAQCBzdGF0aWMgaW50IHN0b3Bfbm9jcHNjaChzdHJ1Y3QgZGV2aWNlX3F1
ZXVlX21hbmFnZXIgKmRxbSkNCj4gICB7DQo+ICAgCWlmIChkcW0tPmRldi0+ZGV2aWNlX2luZm8t
PmFzaWNfZmFtaWx5ID09IENISVBfSEFXQUlJKQ0KPiAgIAkJcG1fdW5pbml0KCZkcW0tPnBhY2tl
dHMpOw0KPiAtCQ0KPiArCWRxbS0+ZGV2aWNlX3N0b3BwZWQgPSB0cnVlOw0KPiArDQo+ICAgCXJl
dHVybiAwOw0KPiAgIH0NCj4gICANCj4gQEAgLTEwNzQsNiArMTA3Niw3IEBAIHN0YXRpYyBpbnQg
c3RhcnRfY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0pDQo+ICAgCWRxbV9s
b2NrKGRxbSk7DQo+ICAgCS8qIGNsZWFyIGhhbmcgc3RhdHVzIHdoZW4gZHJpdmVyIHRyeSB0byBz
dGFydCB0aGUgaHcgc2NoZWR1bGVyICovDQo+ICAgCWRxbS0+aXNfaHdzX2hhbmcgPSBmYWxzZTsN
Cj4gKwlkcW0tPmRldmljZV9zdG9wcGVkID0gZmFsc2U7DQo+ICAgCWV4ZWN1dGVfcXVldWVzX2Nw
c2NoKGRxbSwgS0ZEX1VOTUFQX1FVRVVFU19GSUxURVJfRFlOQU1JQ19RVUVVRVMsIDApOw0KPiAg
IAlkcW1fdW5sb2NrKGRxbSk7DQo+ICAgDQo+IEBAIC0xMDg5LDYgKzEwOTIsNyBAQCBzdGF0aWMg
aW50IHN0b3BfY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0pDQo+ICAgew0K
PiAgIAlkcW1fbG9jayhkcW0pOw0KPiAgIAl1bm1hcF9xdWV1ZXNfY3BzY2goZHFtLCBLRkRfVU5N
QVBfUVVFVUVTX0ZJTFRFUl9BTExfUVVFVUVTLCAwKTsNCj4gKwlkcW0tPmRldmljZV9zdG9wcGVk
ID0gdHJ1ZTsNCj4gICAJZHFtX3VubG9jayhkcW0pOw0KPiAgIA0KPiAgIAlrZmRfZ3R0X3NhX2Zy
ZWUoZHFtLT5kZXYsIGRxbS0+ZmVuY2VfbWVtKTsNCj4gQEAgLTEyNzUsOSArMTI3OSwxMCBAQCBz
dGF0aWMgaW50IG1hcF9xdWV1ZXNfY3BzY2goc3RydWN0IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpk
cW0pDQo+ICAgew0KPiAgIAlpbnQgcmV0dmFsOw0KPiAgIA0KPiArCWlmIChkcW0tPmRldmljZV9z
dG9wcGVkKQ0KPiArCQlyZXR1cm4gMDsNCj4gICAJaWYgKGRxbS0+cXVldWVfY291bnQgPD0gMCB8
fCBkcW0tPnByb2Nlc3Nlc19jb3VudCA8PSAwKQ0KPiAgIAkJcmV0dXJuIDA7DQo+IC0NCj4gICAJ
aWYgKGRxbS0+YWN0aXZlX3J1bmxpc3QpDQo+ICAgCQlyZXR1cm4gMDsNCj4gICANCj4gQEAgLTEy
OTksNiArMTMwNCw4IEBAIHN0YXRpYyBpbnQgdW5tYXBfcXVldWVzX2Nwc2NoKHN0cnVjdCBkZXZp
Y2VfcXVldWVfbWFuYWdlciAqZHFtLA0KPiAgIHsNCj4gICAJaW50IHJldHZhbCA9IDA7DQo+ICAg
DQo+ICsJaWYgKGRxbS0+ZGV2aWNlX3N0b3BwZWQpDQo+ICsJCXJldHVybiAwOw0KPiAgIAlpZiAo
ZHFtLT5pc19od3NfaGFuZykNCj4gICAJCXJldHVybiAtRUlPOw0KPiAgIAlpZiAoIWRxbS0+YWN0
aXZlX3J1bmxpc3QpDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9r
ZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tm
ZF9kZXZpY2VfcXVldWVfbWFuYWdlci5oDQo+IGluZGV4IDJlYWVhNmIwNGNiZS4uNDRlY2RmOTk5
Y2E4IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNl
X3F1ZXVlX21hbmFnZXIuaA0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRf
ZGV2aWNlX3F1ZXVlX21hbmFnZXIuaA0KPiBAQCAtMjAxLDYgKzIwMSw3IEBAIHN0cnVjdCBkZXZp
Y2VfcXVldWVfbWFuYWdlciB7DQo+ICAgCWJvb2wJCQlpc19od3NfaGFuZzsNCj4gICAJc3RydWN0
IHdvcmtfc3RydWN0CWh3X2V4Y2VwdGlvbl93b3JrOw0KPiAgIAlzdHJ1Y3Qga2ZkX21lbV9vYmoJ
aGlxX3NkbWFfbXFkOw0KPiArCWJvb2wJCQlkZXZpY2Vfc3RvcHBlZDsNCj4gICB9Ow0KPiAgIA0K
PiAgIHZvaWQgZGV2aWNlX3F1ZXVlX21hbmFnZXJfaW5pdF9jaWsoDQpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
