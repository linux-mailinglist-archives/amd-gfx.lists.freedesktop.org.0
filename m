Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CA5A738C21E
	for <lists+amd-gfx@lfdr.de>; Fri, 21 May 2021 10:39:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3D7256F5DB;
	Fri, 21 May 2021 08:39:47 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-ed1-x530.google.com (mail-ed1-x530.google.com
 [IPv6:2a00:1450:4864:20::530])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C401B6F5D3
 for <amd-gfx@lists.freedesktop.org>; Fri, 21 May 2021 08:39:45 +0000 (UTC)
Received: by mail-ed1-x530.google.com with SMTP id r11so22372383edt.13
 for <amd-gfx@lists.freedesktop.org>; Fri, 21 May 2021 01:39:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=subject:to:references:from:message-id:date:user-agent:mime-version
 :in-reply-to:content-transfer-encoding:content-language;
 bh=lzKfhZsrRo7pES5JehubRVy7tqc8KEQILA1b0xX1/Cs=;
 b=oxAcB/+vnbDp1N1q9ClgqUWErjR0pvX3J2PlyngCH9u7GL+pASF/Z2FndweQvCgjwC
 2npGJV99rW5ZxyZpfHbS+3d2yoSo+UjW+7tQtPv7/HLnl2c9KTFWNL38uNsLVJlQ9g/P
 D53cf1oOCZL0lpUquJ9bhMQHs9AHrg5jFNY8eQJYq7ZwmJz8XJB+Wb14GqS1daTKbwPw
 8qBMlWLE2Q2aLbY1Dg1HjJSsZZHHGjSAVarJ2Aw5lgzizlBywlTQ16VQBInaL6+dfBS8
 1uARe0oy0QHdVAaMhXIwffD/r91Ubsdw2qVuRF3z1XJNoDjh21uFWbr0hsVR/Br969Rx
 MoJQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=lzKfhZsrRo7pES5JehubRVy7tqc8KEQILA1b0xX1/Cs=;
 b=pXTsAlFUkZLlVEPjGgLtt9r53QyKk10Vvr7L0sh6Q1enElyNTs/w3BuWZNDfudkP6U
 1g9opsOXn0QE/pJl4lCgMexL21Ha5sb8DZXQ4HDXEYJxswOy5qYoH/7Pzl95kZW0NEBf
 P47+eaWx0zy7PXXFJxuPsquOERR5VyuIDGKt4iGGT97k/EHvAT+yDyLGRLWKW45cX3vf
 9LlLNwqZRqOkIZXte4c1q4twlput8xT1VDFBcNwC5uCTZyc0VMbZJkSMMklXtE98lIiP
 Cc8rppBU8nKW0Sgy3146TkqB0BsmLFiXsh2jYbElVsFoI1PLgn6FKlWmV2+w6y2FxftQ
 maqg==
X-Gm-Message-State: AOAM533CAd7QOR0tipRViKtJSjaBAjt9Xgp0efF7TkIlXTdWHTgdBavC
 aVeBqUYlj5fPKUd32NsiEXbRGlI9FHU=
X-Google-Smtp-Source: ABdhPJx8ktl5NEb1vS7XX2Ff45n8ujxETp7V1C2l7DG5m9JVFYfz8dQudUFmHINxwRr2KtDEKYRqvA==
X-Received: by 2002:aa7:d9d0:: with SMTP id v16mr9983163eds.293.1621586384407; 
 Fri, 21 May 2021 01:39:44 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:b48f:ff97:fb4c:5b1d?
 ([2a02:908:1252:fb60:b48f:ff97:fb4c:5b1d])
 by smtp.gmail.com with ESMTPSA id g4sm3519799edw.8.2021.05.21.01.39.43
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Fri, 21 May 2021 01:39:43 -0700 (PDT)
Subject: Re: [PATCH v2 1/3] drm/amdgpu: Add new placement for preemptible SG
 BOs
To: Felix Kuehling <Felix.Kuehling@amd.com>, amd-gfx@lists.freedesktop.org
References: <20210521022256.14184-1-Felix.Kuehling@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <e859cbb5-8d7b-3607-82a7-1e68363e6056@gmail.com>
Date: Fri, 21 May 2021 10:39:42 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.8.1
MIME-Version: 1.0
In-Reply-To: <20210521022256.14184-1-Felix.Kuehling@amd.com>
Content-Language: en-US
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMjEuMDUuMjEgdW0gMDQ6MjIgc2NocmllYiBGZWxpeCBLdWVobGluZzoKPiBTRyBCT3Mgc3Vj
aCBhcyBkbWFidWYgaW1wb3J0cyBhbmQgdXNlcnB0ciBCT3MgZG8gbm90IGNvbnN1bWUgc3lzdGVt
Cj4gcmVzb3VyY2VzIGRpcmVjdGx5LiBJbnN0ZWFkIHRoZXkgcG9pbnQgdG8gcmVzb3VyY2VzIG93
bmVkIGVsc2V3aGVyZS4KPiBUaGV5IHR5cGljYWxseSBnZXQgZXZpY3RlZCBieSBETUFCdWYgbW92
ZSBub3RpZmllcnMgb2YgTU1VIG5vdGlmaWVycy4KPiBJZiB0aG9zZSBub3RpZmllcnMgZG9uJ3Qg
bmVlZCB0byB3YWl0IGZvciBoYXJkd2FyZSBmZW5jZXMgKGkuZS4gdGhlIFNHCj4gQk9zIGFyZSB1
c2VkIGluIGEgcHJlZW1wdGlibGUgY29udGV4dCksIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBsaW1p
dAo+IHRoZW0gdG8gdGhlIEdUVCBzaXplIGFuZCB3ZSBkb24ndCBuZWVkIFRUTSB0byBldmljdCB0
aGVtLgo+Cj4gQ3JlYXRlIGEgbmV3IHBsYWNlbWVudCBmb3Igc3VjaCBwcmVlbXB0aWJsZSBTRyBC
T3MgdGhhdCBkb2VzIG5vdCBpbXBvc2UKPiBhcnRpZmljaWFsIHNpemUgbGltaXRzIGFuZCBUVE0g
ZXZpY3Rpb25zLgo+Cj4gU2lnbmVkLW9mZi1ieTogRmVsaXggS3VlaGxpbmcgPEZlbGl4Lkt1ZWhs
aW5nQGFtZC5jb20+CgpSZXZpZXdlZC1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtv
ZW5pZ0BhbWQuY29tPgoKVGhpcyB3aWxsIGNsYXNoIHdpdGggdGhlIFRUTSBjaGFuZ2VzIEkgaGF2
ZSBpbiBwaXBlbGluZSwgc28gc29tZWJvZHkgCm5lZWRzIHRvIGhhbmRsZSB0aGUgbWVyZ2UgZmFs
bG91dCBhdCBzb21lIHBvaW50LgoKQnV0IEknbSBwcmV0dHkgc3VyZSB0aGF0IGFyZSBqdXN0IGEg
ZmV3IGxpbmVzIG9mIGNvZGUuCgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
TWFrZWZpbGUgICAgICAgICAgIHwgICA3ICstCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfb2JqZWN0LmMgICAgfCAgIDQgKy0KPiAgIC4uLi9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3ByZWVtcHRfbWdyLmMgICB8IDE5MCArKysrKysrKysrKysrKysrKysKPiAgIGRyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyAgICAgICB8ICAzNyArKystCj4gICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmggICAgICAgfCAgMTEgKwo+ICAg
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMgICAgICAgIHwgICAzICstCj4g
ICBpbmNsdWRlL3VhcGkvZHJtL2FtZGdwdV9kcm0uaCAgICAgICAgICAgICAgICAgfCAgIDQgKwo+
ICAgNyBmaWxlcyBjaGFuZ2VkLCAyNDcgaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlvbnMoLSkKPiAg
IGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHJl
ZW1wdF9tZ3IuYwo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L01h
a2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvTWFrZWZpbGUKPiBpbmRleCA2MzMx
YTExMjk5ZDAuLjZjZjBmZTg3MWQ2YyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9NYWtlZmlsZQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L01ha2Vm
aWxlCj4gQEAgLTUxLDkgKzUxLDEwIEBAIGFtZGdwdS15ICs9IGFtZGdwdV9kZXZpY2UubyBhbWRn
cHVfa21zLm8gXAo+ICAgCWF0b21iaW9zX2VuY29kZXJzLm8gYW1kZ3B1X3NhLm8gYXRvbWJpb3Nf
aTJjLm8gXAo+ICAgCWFtZGdwdV9kbWFfYnVmLm8gYW1kZ3B1X3ZtLm8gYW1kZ3B1X2liLm8gYW1k
Z3B1X3BsbC5vIFwKPiAgIAlhbWRncHVfdWNvZGUubyBhbWRncHVfYm9fbGlzdC5vIGFtZGdwdV9j
dHgubyBhbWRncHVfc3luYy5vIFwKPiAtCWFtZGdwdV9ndHRfbWdyLm8gYW1kZ3B1X3ZyYW1fbWdy
Lm8gYW1kZ3B1X3ZpcnQubyBhbWRncHVfYXRvbWZpcm13YXJlLm8gXAo+IC0JYW1kZ3B1X3ZmX2Vy
cm9yLm8gYW1kZ3B1X3NjaGVkLm8gYW1kZ3B1X2RlYnVnZnMubyBhbWRncHVfaWRzLm8gXAo+IC0J
YW1kZ3B1X2dtYy5vIGFtZGdwdV9tbWh1Yi5vIGFtZGdwdV94Z21pLm8gYW1kZ3B1X2NzYS5vIGFt
ZGdwdV9yYXMubyBhbWRncHVfdm1fY3B1Lm8gXAo+ICsJYW1kZ3B1X2d0dF9tZ3IubyBhbWRncHVf
cHJlZW1wdF9tZ3IubyBhbWRncHVfdnJhbV9tZ3IubyBhbWRncHVfdmlydC5vIFwKPiArCWFtZGdw
dV9hdG9tZmlybXdhcmUubyBhbWRncHVfdmZfZXJyb3IubyBhbWRncHVfc2NoZWQubyBcCj4gKwlh
bWRncHVfZGVidWdmcy5vIGFtZGdwdV9pZHMubyBhbWRncHVfZ21jLm8gYW1kZ3B1X21taHViLm8g
XAo+ICsJYW1kZ3B1X3hnbWkubyBhbWRncHVfY3NhLm8gYW1kZ3B1X3Jhcy5vIGFtZGdwdV92bV9j
cHUubyBcCj4gICAJYW1kZ3B1X3ZtX3NkbWEubyBhbWRncHVfZGlzY292ZXJ5Lm8gYW1kZ3B1X3Jh
c19lZXByb20ubyBhbWRncHVfbmJpby5vIFwKPiAgIAlhbWRncHVfdW1jLm8gc211X3YxMV8wX2ky
Yy5vIGFtZGdwdV9mcnVfZWVwcm9tLm8gYW1kZ3B1X3JhcC5vIFwKPiAgIAlhbWRncHVfZndfYXR0
ZXN0YXRpb24ubyBhbWRncHVfc2VjdXJlZGlzcGxheS5vIGFtZGdwdV9oZHAubwo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMKPiBpbmRleCA3NDVmY2YzZWE0NTAu
LjNmODViYTgyMjJlZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfb2JqZWN0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
b2JqZWN0LmMKPiBAQCAtMTU3LDcgKzE1Nyw5IEBAIHZvaWQgYW1kZ3B1X2JvX3BsYWNlbWVudF9m
cm9tX2RvbWFpbihzdHJ1Y3QgYW1kZ3B1X2JvICphYm8sIHUzMiBkb21haW4pCj4gICAJaWYgKGRv
bWFpbiAmIEFNREdQVV9HRU1fRE9NQUlOX0dUVCkgewo+ICAgCQlwbGFjZXNbY10uZnBmbiA9IDA7
Cj4gICAJCXBsYWNlc1tjXS5scGZuID0gMDsKPiAtCQlwbGFjZXNbY10ubWVtX3R5cGUgPSBUVE1f
UExfVFQ7Cj4gKwkJcGxhY2VzW2NdLm1lbV90eXBlID0KPiArCQkJYWJvLT5mbGFncyAmIEFNREdQ
VV9HRU1fQ1JFQVRFX1BSRUVNUFRJQkxFID8KPiArCQkJQU1ER1BVX1BMX1BSRUVNUFQgOiBUVE1f
UExfVFQ7Cj4gICAJCXBsYWNlc1tjXS5mbGFncyA9IDA7Cj4gICAJCWMrKzsKPiAgIAl9Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wcmVlbXB0X21nci5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ByZWVtcHRfbWdyLmMKPiBuZXcg
ZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAwMDAwMC4uZDYwN2YzMTRjYzFiCj4gLS0t
IC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wcmVl
bXB0X21nci5jCj4gQEAgLTAsMCArMSwxOTAgQEAKPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IEdQTC0yLjAgT1IgTUlUCj4gKy8qCj4gKyAqIENvcHlyaWdodCAyMDE2LTIwMjEgQWR2YW5j
ZWQgTWljcm8gRGV2aWNlcywgSW5jLgo+ICsgKgo+ICsgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBn
cmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQo+ICsgKiBj
b3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAo
dGhlICJTb2Z0d2FyZSIpLAo+ICsgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJl
c3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCj4gKyAqIHRoZSByaWdodHMg
dG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNl
bnNlLAo+ICsgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVy
bWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKPiArICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRv
IHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKPiArICoKPiArICogVGhl
IGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwg
YmUgaW5jbHVkZWQgaW4KPiArICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBv
ZiB0aGUgU29mdHdhcmUuCj4gKyAqCj4gKyAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMg
SVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCj4gKyAqIElNUExJ
RUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hB
TlRBQklMSVRZLAo+ICsgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9O
SU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKPiArICogVEhFIENPUFlSSUdIVCBIT0xE
RVIoUykgT1IgQVVUSE9SKFMpIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SCj4g
KyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRP
UlQgT1IgT1RIRVJXSVNFLAo+ICsgKiBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNU
SU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IKPiArICogT1RIRVIgREVBTElOR1Mg
SU4gVEhFIFNPRlRXQVJFLgo+ICsgKgo+ICsgKiBBdXRob3JzOiBDaHJpc3RpYW4gS8O2bmlnLCBG
ZWxpeCBLdWVobGluZwo+ICsgKi8KPiArCj4gKyNpbmNsdWRlICJhbWRncHUuaCIKPiArCj4gK3N0
YXRpYyBpbmxpbmUgc3RydWN0IGFtZGdwdV9wcmVlbXB0X21nciAqCj4gK3RvX3ByZWVtcHRfbWdy
KHN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuKQo+ICt7Cj4gKwlyZXR1cm4gY29udGFp
bmVyX29mKG1hbiwgc3RydWN0IGFtZGdwdV9wcmVlbXB0X21nciwgbWFuYWdlcik7Cj4gK30KPiAr
Cj4gKy8qKgo+ICsgKiBET0M6IG1lbV9pbmZvX3ByZWVtcHRfdXNlZAo+ICsgKgo+ICsgKiBUaGUg
YW1kZ3B1IGRyaXZlciBwcm92aWRlcyBhIHN5c2ZzIEFQSSBmb3IgcmVwb3J0aW5nIGN1cnJlbnQg
dG90YWwgYW1vdW50IG9mCj4gKyAqIHVzZWQgcHJlZW1wdGlibGUgbWVtb3J5Lgo+ICsgKiBUaGUg
ZmlsZSBtZW1faW5mb19wcmVlbXB0X3VzZWQgaXMgdXNlZCBmb3IgdGhpcywgYW5kIHJldHVybnMg
dGhlIGN1cnJlbnQKPiArICogdXNlZCBzaXplIG9mIHRoZSBwcmVlbXB0aWJsZSBibG9jaywgaW4g
Ynl0ZXMKPiArICovCj4gK3N0YXRpYyBzc2l6ZV90IG1lbV9pbmZvX3ByZWVtcHRfdXNlZF9zaG93
KHN0cnVjdCBkZXZpY2UgKmRldiwKPiArCQkJCQkgIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICph
dHRyLAo+ICsJCQkJCSAgY2hhciAqYnVmKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGRl
diA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwo+ICsJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYg
PSBkcm1fdG9fYWRldihkZGV2KTsKPiArCXN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFu
Owo+ICsKPiArCW1hbiA9IHR0bV9tYW5hZ2VyX3R5cGUoJmFkZXYtPm1tYW4uYmRldiwgQU1ER1BV
X1BMX1BSRUVNUFQpOwo+ICsJcmV0dXJuIHN5c2ZzX2VtaXQoYnVmLCAiJWxsdVxuIiwgYW1kZ3B1
X3ByZWVtcHRfbWdyX3VzYWdlKG1hbikpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgREVWSUNFX0FUVFJf
Uk8obWVtX2luZm9fcHJlZW1wdF91c2VkKTsKPiArCj4gKy8qKgo+ICsgKiBhbWRncHVfcHJlZW1w
dF9tZ3JfbmV3IC0gYWxsb2NhdGUgYSBuZXcgbm9kZQo+ICsgKgo+ICsgKiBAbWFuOiBUVE0gbWVt
b3J5IHR5cGUgbWFuYWdlcgo+ICsgKiBAdGJvOiBUVE0gQk8gd2UgbmVlZCB0aGlzIHJhbmdlIGZv
cgo+ICsgKiBAcGxhY2U6IHBsYWNlbWVudCBmbGFncyBhbmQgcmVzdHJpY3Rpb25zCj4gKyAqIEBt
ZW06IHRoZSByZXN1bHRpbmcgbWVtIG9iamVjdAo+ICsgKgo+ICsgKiBEdW1teSwganVzdCBjb3Vu
dCB0aGUgc3BhY2UgdXNlZCB3aXRob3V0IGFsbG9jYXRpbmcgcmVzb3VyY2VzIG9yIGFueSBsaW1p
dC4KPiArICovCj4gK3N0YXRpYyBpbnQgYW1kZ3B1X3ByZWVtcHRfbWdyX25ldyhzdHJ1Y3QgdHRt
X3Jlc291cmNlX21hbmFnZXIgKm1hbiwKPiArCQkJCSAgc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0
ICp0Ym8sCj4gKwkJCQkgIGNvbnN0IHN0cnVjdCB0dG1fcGxhY2UgKnBsYWNlLAo+ICsJCQkJICBz
dHJ1Y3QgdHRtX3Jlc291cmNlICptZW0pCj4gK3sKPiArCXN0cnVjdCBhbWRncHVfcHJlZW1wdF9t
Z3IgKm1nciA9IHRvX3ByZWVtcHRfbWdyKG1hbik7Cj4gKwo+ICsJYXRvbWljNjRfYWRkKG1lbS0+
bnVtX3BhZ2VzLCAmbWdyLT51c2VkKTsKPiArCj4gKwltZW0tPm1tX25vZGUgPSBOVUxMOwo+ICsJ
bWVtLT5zdGFydCA9IEFNREdQVV9CT19JTlZBTElEX09GRlNFVDsKPiArCXJldHVybiAwOwo+ICt9
Cj4gKwo+ICsvKioKPiArICogYW1kZ3B1X3ByZWVtcHRfbWdyX2RlbCAtIGZyZWUgcmFuZ2VzCj4g
KyAqCj4gKyAqIEBtYW46IFRUTSBtZW1vcnkgdHlwZSBtYW5hZ2VyCj4gKyAqIEBtZW06IFRUTSBt
ZW1vcnkgb2JqZWN0Cj4gKyAqCj4gKyAqIEZyZWUgdGhlIGFsbG9jYXRlZCBHVFQgYWdhaW4uCj4g
KyAqLwo+ICtzdGF0aWMgdm9pZCBhbWRncHVfcHJlZW1wdF9tZ3JfZGVsKHN0cnVjdCB0dG1fcmVz
b3VyY2VfbWFuYWdlciAqbWFuLAo+ICsJCQkJICAgc3RydWN0IHR0bV9yZXNvdXJjZSAqbWVtKQo+
ICt7Cj4gKwlzdHJ1Y3QgYW1kZ3B1X3ByZWVtcHRfbWdyICptZ3IgPSB0b19wcmVlbXB0X21nciht
YW4pOwo+ICsKPiArCWF0b21pYzY0X3N1YihtZW0tPm51bV9wYWdlcywgJm1nci0+dXNlZCk7Cj4g
K30KPiArCj4gKy8qKgo+ICsgKiBhbWRncHVfcHJlZW1wdF9tZ3JfdXNhZ2UgLSByZXR1cm4gdXNh
Z2Ugb2YgUFJFRU1QVCBkb21haW4KPiArICoKPiArICogQG1hbjogVFRNIG1lbW9yeSB0eXBlIG1h
bmFnZXIKPiArICoKPiArICogUmV0dXJuIGhvdyBtYW55IGJ5dGVzIGFyZSB1c2VkIGluIHRoZSBH
VFQgZG9tYWluCj4gKyAqLwo+ICt1aW50NjRfdCBhbWRncHVfcHJlZW1wdF9tZ3JfdXNhZ2Uoc3Ry
dWN0IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICptYW4pCj4gK3sKPiArCXN0cnVjdCBhbWRncHVfcHJl
ZW1wdF9tZ3IgKm1nciA9IHRvX3ByZWVtcHRfbWdyKG1hbik7Cj4gKwlzNjQgcmVzdWx0ID0gYXRv
bWljNjRfcmVhZCgmbWdyLT51c2VkKTsKPiArCj4gKwlyZXR1cm4gKHJlc3VsdCA+IDAgPyByZXN1
bHQgOiAwKSAqIFBBR0VfU0laRTsKPiArfQo+ICsKPiArLyoqCj4gKyAqIGFtZGdwdV9wcmVlbXB0
X21ncl9kZWJ1ZyAtIGR1bXAgVlJBTSB0YWJsZQo+ICsgKgo+ICsgKiBAbWFuOiBUVE0gbWVtb3J5
IHR5cGUgbWFuYWdlcgo+ICsgKiBAcHJpbnRlcjogRFJNIHByaW50ZXIgdG8gdXNlCj4gKyAqCj4g
KyAqIER1bXAgdGhlIHRhYmxlIGNvbnRlbnQgdXNpbmcgcHJpbnRrLgo+ICsgKi8KPiArc3RhdGlj
IHZvaWQgYW1kZ3B1X3ByZWVtcHRfbWdyX2RlYnVnKHN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdl
ciAqbWFuLAo+ICsJCQkJICAgICBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnByaW50ZXIpCj4gK3sKPiAr
CXN0cnVjdCBhbWRncHVfcHJlZW1wdF9tZ3IgKm1nciA9IHRvX3ByZWVtcHRfbWdyKG1hbik7Cj4g
Kwo+ICsJZHJtX3ByaW50ZihwcmludGVyLCAibWFuIHNpemU6JWxsdSBwYWdlcywgcHJlZW1wdCB1
c2VkOiVsbGQgcGFnZXNcbiIsCj4gKwkJICAgbWFuLT5zaXplLCAodTY0KWF0b21pYzY0X3JlYWQo
Jm1nci0+dXNlZCkpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IHR0bV9yZXNvdXJj
ZV9tYW5hZ2VyX2Z1bmMgYW1kZ3B1X3ByZWVtcHRfbWdyX2Z1bmMgPSB7Cj4gKwkuYWxsb2MgPSBh
bWRncHVfcHJlZW1wdF9tZ3JfbmV3LAo+ICsJLmZyZWUgPSBhbWRncHVfcHJlZW1wdF9tZ3JfZGVs
LAo+ICsJLmRlYnVnID0gYW1kZ3B1X3ByZWVtcHRfbWdyX2RlYnVnCj4gK307Cj4gKwo+ICsvKioK
PiArICogYW1kZ3B1X3ByZWVtcHRfbWdyX2luaXQgLSBpbml0IFBSRUVNUFQgbWFuYWdlciBhbmQg
RFJNIE1NCj4gKyAqCj4gKyAqIEBhZGV2OiBhbWRncHVfZGV2aWNlIHBvaW50ZXIKPiArICoKPiAr
ICogQWxsb2NhdGUgYW5kIGluaXRpYWxpemUgdGhlIEdUVCBtYW5hZ2VyLgo+ICsgKi8KPiAraW50
IGFtZGdwdV9wcmVlbXB0X21ncl9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICt7
Cj4gKwlzdHJ1Y3QgYW1kZ3B1X3ByZWVtcHRfbWdyICptZ3IgPSAmYWRldi0+bW1hbi5wcmVlbXB0
X21ncjsKPiArCXN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuID0gJm1nci0+bWFuYWdl
cjsKPiArCWludCByZXQ7Cj4gKwo+ICsJbWFuLT51c2VfdHQgPSB0cnVlOwo+ICsJbWFuLT5mdW5j
ID0gJmFtZGdwdV9wcmVlbXB0X21ncl9mdW5jOwo+ICsKPiArCXR0bV9yZXNvdXJjZV9tYW5hZ2Vy
X2luaXQobWFuLCAoMSA8PCAzMCkpOwo+ICsKPiArCWF0b21pYzY0X3NldCgmbWdyLT51c2VkLCAw
KTsKPiArCj4gKwlyZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJf
bWVtX2luZm9fcHJlZW1wdF91c2VkKTsKPiArCWlmIChyZXQpIHsKPiArCQlEUk1fRVJST1IoIkZh
aWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgbWVtX2luZm9fcHJlZW1wdF91c2VkXG4iKTsKPiAr
CQlyZXR1cm4gcmV0Owo+ICsJfQo+ICsKPiArCXR0bV9zZXRfZHJpdmVyX21hbmFnZXIoJmFkZXYt
Pm1tYW4uYmRldiwgQU1ER1BVX1BMX1BSRUVNUFQsCj4gKwkJCSAgICAgICAmbWdyLT5tYW5hZ2Vy
KTsKPiArCXR0bV9yZXNvdXJjZV9tYW5hZ2VyX3NldF91c2VkKG1hbiwgdHJ1ZSk7Cj4gKwlyZXR1
cm4gMDsKPiArfQo+ICsKPiArLyoqCj4gKyAqIGFtZGdwdV9wcmVlbXB0X21ncl9maW5pIC0gZnJl
ZSBhbmQgZGVzdHJveSBHVFQgbWFuYWdlcgo+ICsgKgo+ICsgKiBAYWRldjogYW1kZ3B1X2Rldmlj
ZSBwb2ludGVyCj4gKyAqCj4gKyAqIERlc3Ryb3kgYW5kIGZyZWUgdGhlIEdUVCBtYW5hZ2VyLCBy
ZXR1cm5zIC1FQlVTWSBpZiByYW5nZXMgYXJlIHN0aWxsCj4gKyAqIGFsbG9jYXRlZCBpbnNpZGUg
aXQuCj4gKyAqLwo+ICt2b2lkIGFtZGdwdV9wcmVlbXB0X21ncl9maW5pKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KQo+ICt7Cj4gKwlzdHJ1Y3QgYW1kZ3B1X3ByZWVtcHRfbWdyICptZ3IgPSAm
YWRldi0+bW1hbi5wcmVlbXB0X21ncjsKPiArCXN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAq
bWFuID0gJm1nci0+bWFuYWdlcjsKPiArCWludCByZXQ7Cj4gKwo+ICsJdHRtX3Jlc291cmNlX21h
bmFnZXJfc2V0X3VzZWQobWFuLCBmYWxzZSk7Cj4gKwo+ICsJcmV0ID0gdHRtX3Jlc291cmNlX21h
bmFnZXJfZXZpY3RfYWxsKCZhZGV2LT5tbWFuLmJkZXYsIG1hbik7Cj4gKwlpZiAocmV0KQo+ICsJ
CXJldHVybjsKPiArCj4gKwlkZXZpY2VfcmVtb3ZlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJf
bWVtX2luZm9fcHJlZW1wdF91c2VkKTsKPiArCj4gKwl0dG1fcmVzb3VyY2VfbWFuYWdlcl9jbGVh
bnVwKG1hbik7Cj4gKwl0dG1fc2V0X2RyaXZlcl9tYW5hZ2VyKCZhZGV2LT5tbWFuLmJkZXYsIEFN
REdQVV9QTF9QUkVFTVBULCBOVUxMKTsKPiArfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdHRtLmMKPiBpbmRleCA5NGQ0NzAxMDhmODMuLmMwYWVmMzI3MjkyYSAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKPiBAQCAtMTU4LDYgKzE1OCw3IEBA
IHN0YXRpYyB2b2lkIGFtZGdwdV9ldmljdF9mbGFncyhzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvLAo+ICAgCQl9Cj4gICAJCWJyZWFrOwo+ICAgCWNhc2UgVFRNX1BMX1RUOgo+ICsJY2FzZSBB
TURHUFVfUExfUFJFRU1QVDoKPiAgIAlkZWZhdWx0Ogo+ICAgCQlhbWRncHVfYm9fcGxhY2VtZW50
X2Zyb21fZG9tYWluKGFibywgQU1ER1BVX0dFTV9ET01BSU5fQ1BVKTsKPiAgIAkJYnJlYWs7Cj4g
QEAgLTIxNyw2ICsyMTgsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV90dG1fbWFwX2J1ZmZlcihzdHJ1
Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ICAgCj4gICAJQlVHX09OKGFkZXYtPm1tYW4uYnVm
ZmVyX2Z1bmNzLT5jb3B5X21heF9ieXRlcyA8Cj4gICAJICAgICAgIEFNREdQVV9HVFRfTUFYX1RS
QU5TRkVSX1NJWkUgKiA4KTsKPiArCUJVR19PTihtZW0tPm1lbV90eXBlID09IEFNREdQVV9QTF9Q
UkVFTVBUKTsKPiAgIAo+ICAgCS8qIE1hcCBvbmx5IHdoYXQgY2FuJ3QgYmUgYWNjZXNzZWQgZGly
ZWN0bHkgKi8KPiAgIAlpZiAoIXRteiAmJiBtZW0tPnN0YXJ0ICE9IEFNREdQVV9CT19JTlZBTElE
X09GRlNFVCkgewo+IEBAIC00ODAsNyArNDgyLDggQEAgc3RhdGljIGludCBhbWRncHVfYm9fbW92
ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0LAo+ICAgCXN0cnVjdCB0
dG1fcmVzb3VyY2UgKm9sZF9tZW0gPSAmYm8tPm1lbTsKPiAgIAlpbnQgcjsKPiAgIAo+IC0JaWYg
KG5ld19tZW0tPm1lbV90eXBlID09IFRUTV9QTF9UVCkgewo+ICsJaWYgKG5ld19tZW0tPm1lbV90
eXBlID09IFRUTV9QTF9UVCB8fAo+ICsJICAgIG5ld19tZW0tPm1lbV90eXBlID09IEFNREdQVV9Q
TF9QUkVFTVBUKSB7Cj4gICAJCXIgPSBhbWRncHVfdHRtX2JhY2tlbmRfYmluZChiby0+YmRldiwg
Ym8tPnR0bSwgbmV3X21lbSk7Cj4gICAJCWlmIChyKQo+ICAgCQkJcmV0dXJuIHI7Cj4gQEAgLTQ5
OCwxMSArNTAxLDEzIEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2JvX21vdmUoc3RydWN0IHR0bV9idWZm
ZXJfb2JqZWN0ICpibywgYm9vbCBldmljdCwKPiAgIAkJZ290byBvdXQ7Cj4gICAJfQo+ICAgCWlm
IChvbGRfbWVtLT5tZW1fdHlwZSA9PSBUVE1fUExfU1lTVEVNICYmCj4gLQkgICAgbmV3X21lbS0+
bWVtX3R5cGUgPT0gVFRNX1BMX1RUKSB7Cj4gKwkgICAgKG5ld19tZW0tPm1lbV90eXBlID09IFRU
TV9QTF9UVCB8fAo+ICsJICAgICBuZXdfbWVtLT5tZW1fdHlwZSA9PSBBTURHUFVfUExfUFJFRU1Q
VCkpIHsKPiAgIAkJdHRtX2JvX21vdmVfbnVsbChibywgbmV3X21lbSk7Cj4gICAJCWdvdG8gb3V0
Owo+ICAgCX0KPiAtCWlmIChvbGRfbWVtLT5tZW1fdHlwZSA9PSBUVE1fUExfVFQgJiYKPiArCWlm
ICgob2xkX21lbS0+bWVtX3R5cGUgPT0gVFRNX1BMX1RUIHx8Cj4gKwkgICAgIG9sZF9tZW0tPm1l
bV90eXBlID09IEFNREdQVV9QTF9QUkVFTVBUKSAmJgo+ICAgCSAgICBuZXdfbWVtLT5tZW1fdHlw
ZSA9PSBUVE1fUExfU1lTVEVNKSB7Cj4gICAJCXIgPSB0dG1fYm9fd2FpdF9jdHgoYm8sIGN0eCk7
Cj4gICAJCWlmIChyKQo+IEBAIC01ODcsNiArNTkyLDcgQEAgc3RhdGljIGludCBhbWRncHVfdHRt
X2lvX21lbV9yZXNlcnZlKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LAo+ICAgCQkvKiBzeXN0ZW0g
bWVtb3J5ICovCj4gICAJCXJldHVybiAwOwo+ICAgCWNhc2UgVFRNX1BMX1RUOgo+ICsJY2FzZSBB
TURHUFVfUExfUFJFRU1QVDoKPiAgIAkJYnJlYWs7Cj4gICAJY2FzZSBUVE1fUExfVlJBTToKPiAg
IAkJbWVtLT5idXMub2Zmc2V0ID0gbWVtLT5zdGFydCA8PCBQQUdFX1NISUZUOwo+IEBAIC0xMjk0
LDcgKzEzMDAsOCBAQCB1aW50NjRfdCBhbWRncHVfdHRtX3R0X3BkZV9mbGFncyhzdHJ1Y3QgdHRt
X3R0ICp0dG0sIHN0cnVjdCB0dG1fcmVzb3VyY2UgKm1lbSkKPiAgIAlpZiAobWVtICYmIG1lbS0+
bWVtX3R5cGUgIT0gVFRNX1BMX1NZU1RFTSkKPiAgIAkJZmxhZ3MgfD0gQU1ER1BVX1BURV9WQUxJ
RDsKPiAgIAo+IC0JaWYgKG1lbSAmJiBtZW0tPm1lbV90eXBlID09IFRUTV9QTF9UVCkgewo+ICsJ
aWYgKG1lbSAmJiAobWVtLT5tZW1fdHlwZSA9PSBUVE1fUExfVFQgfHwKPiArCQkgICAgbWVtLT5t
ZW1fdHlwZSA9PSBBTURHUFVfUExfUFJFRU1QVCkpIHsKPiAgIAkJZmxhZ3MgfD0gQU1ER1BVX1BU
RV9TWVNURU07Cj4gICAKPiAgIAkJaWYgKHR0bS0+Y2FjaGluZyA9PSB0dG1fY2FjaGVkKQo+IEBA
IC0xMzY4LDYgKzEzNzUsMTUgQEAgc3RhdGljIGJvb2wgYW1kZ3B1X3R0bV9ib19ldmljdGlvbl92
YWx1YWJsZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ICAgCX0KPiAgIAo+ICAgCXN3
aXRjaCAoYm8tPm1lbS5tZW1fdHlwZSkgewo+ICsJY2FzZSBBTURHUFVfUExfUFJFRU1QVDoKPiAr
CQkvKiBQcmVlbXB0aWJsZSBCT3MgZG9uJ3Qgb3duIHN5c3RlbSByZXNvdXJjZXMgbWFuYWdlZCBi
eSB0aGUKPiArCQkgKiBkcml2ZXIgKHBhZ2VzLCBWUkFNLCBHQVJUIHNwYWNlKS4gVGhleSBwb2lu
dCB0byByZXNvdXJjZXMKPiArCQkgKiBvd25lZCBieSBzb21lb25lIGVsc2UgKGUuZy4gcGFnZWFi
bGUgbWVtb3J5IGluIHVzZXIgbW9kZQo+ICsJCSAqIG9yIGEgRE1BQnVmKS4gVGhleSBhcmUgdXNl
ZCBpbiBhIHByZWVtcHRpYmxlIGNvbnRleHQgc28gd2UKPiArCQkgKiBjYW4gZ3VhcmFudGVlIG5v
IGRlYWRsb2NrcyBhbmQgZ29vZCBRb1MgaW4gY2FzZSBvZiBNTVUKPiArCQkgKiBub3RpZmllcnMg
b3IgRE1BQnVmIG1vdmUgbm90aWZpZXJzIGZyb20gdGhlIHJlc291cmNlIG93bmVyLgo+ICsJCSAq
Lwo+ICsJCXJldHVybiBmYWxzZTsKPiAgIAljYXNlIFRUTV9QTF9UVDoKPiAgIAkJaWYgKGFtZGdw
dV9ib19pc19hbWRncHVfYm8oYm8pICYmCj4gICAJCSAgICBhbWRncHVfYm9fZW5jcnlwdGVkKHR0
bV90b19hbWRncHVfYm8oYm8pKSkKPiBAQCAtMTc0OSw2ICsxNzY1LDEzIEBAIGludCBhbWRncHVf
dHRtX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAJRFJNX0lORk8oImFtZGdw
dTogJXVNIG9mIEdUVCBtZW1vcnkgcmVhZHkuXG4iLAo+ICAgCQkgKHVuc2lnbmVkKShndHRfc2l6
ZSAvICgxMDI0ICogMTAyNCkpKTsKPiAgIAo+ICsJLyogSW5pdGlhbGl6ZSBwcmVlbXB0aWJsZSBt
ZW1vcnkgcG9vbCAqLwo+ICsJciA9IGFtZGdwdV9wcmVlbXB0X21ncl9pbml0KGFkZXYpOwo+ICsJ
aWYgKHIpIHsKPiArCQlEUk1fRVJST1IoIkZhaWxlZCBpbml0aWFsaXppbmcgUFJFRU1QVCBoZWFw
LlxuIik7Cj4gKwkJcmV0dXJuIHI7Cj4gKwl9Cj4gKwo+ICAgCS8qIEluaXRpYWxpemUgdmFyaW91
cyBvbi1jaGlwIG1lbW9yeSBwb29scyAqLwo+ICAgCXIgPSBhbWRncHVfdHRtX2luaXRfb25fY2hp
cChhZGV2LCBBTURHUFVfUExfR0RTLCBhZGV2LT5nZHMuZ2RzX3NpemUpOwo+ICAgCWlmIChyKSB7
Cj4gQEAgLTE3OTMsNiArMTgxNiw3IEBAIHZvaWQgYW1kZ3B1X3R0bV9maW5pKHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2KQo+ICAgCj4gICAJYW1kZ3B1X3ZyYW1fbWdyX2ZpbmkoYWRldik7Cj4g
ICAJYW1kZ3B1X2d0dF9tZ3JfZmluaShhZGV2KTsKPiArCWFtZGdwdV9wcmVlbXB0X21ncl9maW5p
KGFkZXYpOwo+ICAgCXR0bV9yYW5nZV9tYW5fZmluaSgmYWRldi0+bW1hbi5iZGV2LCBBTURHUFVf
UExfR0RTKTsKPiAgIAl0dG1fcmFuZ2VfbWFuX2ZpbmkoJmFkZXYtPm1tYW4uYmRldiwgQU1ER1BV
X1BMX0dXUyk7Cj4gICAJdHRtX3JhbmdlX21hbl9maW5pKCZhZGV2LT5tbWFuLmJkZXYsIEFNREdQ
VV9QTF9PQSk7Cj4gQEAgLTE5ODcsNiArMjAxMSwxMSBAQCBpbnQgYW1kZ3B1X2ZpbGxfYnVmZmVy
KHN0cnVjdCBhbWRncHVfYm8gKmJvLAo+ICAgCQlyZXR1cm4gLUVJTlZBTDsKPiAgIAl9Cj4gICAK
PiArCWlmIChiby0+dGJvLm1lbS5tZW1fdHlwZSA9PSBBTURHUFVfUExfUFJFRU1QVCkgewo+ICsJ
CURSTV9FUlJPUigiVHJ5aW5nIHRvIGNsZWFyIHByZWVtcHRpYmxlIG1lbW9yeS5cbiIpOwo+ICsJ
CXJldHVybiAtRUlOVkFMOwo+ICsJfQo+ICsKPiAgIAlpZiAoYm8tPnRiby5tZW0ubWVtX3R5cGUg
PT0gVFRNX1BMX1RUKSB7Cj4gICAJCXIgPSBhbWRncHVfdHRtX2FsbG9jX2dhcnQoJmJvLT50Ym8p
Owo+ICAgCQlpZiAocikKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3R0bS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5oCj4g
aW5kZXggZWI4NGE2OWM0Yjc0Li4yODc3YTkyNDA4NmYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3R0bS5oCj4gQEAgLTMxLDYgKzMxLDcgQEAKPiAgICNkZWZpbmUgQU1E
R1BVX1BMX0dEUwkJKFRUTV9QTF9QUklWICsgMCkKPiAgICNkZWZpbmUgQU1ER1BVX1BMX0dXUwkJ
KFRUTV9QTF9QUklWICsgMSkKPiAgICNkZWZpbmUgQU1ER1BVX1BMX09BCQkoVFRNX1BMX1BSSVYg
KyAyKQo+ICsjZGVmaW5lIEFNREdQVV9QTF9QUkVFTVBUCShUVE1fUExfUFJJViArIDMpCj4gICAK
PiAgICNkZWZpbmUgQU1ER1BVX0dUVF9NQVhfVFJBTlNGRVJfU0laRQk1MTIKPiAgICNkZWZpbmUg
QU1ER1BVX0dUVF9OVU1fVFJBTlNGRVJfV0lORE9XUwkyCj4gQEAgLTU0LDYgKzU1LDExIEBAIHN0
cnVjdCBhbWRncHVfZ3R0X21nciB7Cj4gICAJYXRvbWljNjRfdCBhdmFpbGFibGU7Cj4gICB9Owo+
ICAgCj4gK3N0cnVjdCBhbWRncHVfcHJlZW1wdF9tZ3Igewo+ICsJc3RydWN0IHR0bV9yZXNvdXJj
ZV9tYW5hZ2VyIG1hbmFnZXI7Cj4gKwlhdG9taWM2NF90IHVzZWQ7Cj4gK307Cj4gKwo+ICAgc3Ry
dWN0IGFtZGdwdV9tbWFuIHsKPiAgIAlzdHJ1Y3QgdHRtX2RldmljZQkJYmRldjsKPiAgIAlib29s
CQkJCWluaXRpYWxpemVkOwo+IEBAIC03MCw2ICs3Niw3IEBAIHN0cnVjdCBhbWRncHVfbW1hbiB7
Cj4gICAKPiAgIAlzdHJ1Y3QgYW1kZ3B1X3ZyYW1fbWdyIHZyYW1fbWdyOwo+ICAgCXN0cnVjdCBh
bWRncHVfZ3R0X21nciBndHRfbWdyOwo+ICsJc3RydWN0IGFtZGdwdV9wcmVlbXB0X21nciBwcmVl
bXB0X21ncjsKPiAgIAo+ICAgCXVpbnQ2NF90CQlzdG9sZW5fdmdhX3NpemU7Cj4gICAJc3RydWN0
IGFtZGdwdV9ibwkqc3RvbGVuX3ZnYV9tZW1vcnk7Cj4gQEAgLTk3LDYgKzEwNCw4IEBAIHN0cnVj
dCBhbWRncHVfY29weV9tZW0gewo+ICAgCj4gICBpbnQgYW1kZ3B1X2d0dF9tZ3JfaW5pdChzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3QgZ3R0X3NpemUpOwo+ICAgdm9pZCBhbWRn
cHVfZ3R0X21ncl9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiAraW50IGFtZGdw
dV9wcmVlbXB0X21ncl9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiArdm9pZCBh
bWRncHVfcHJlZW1wdF9tZ3JfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Cj4gICBp
bnQgYW1kZ3B1X3ZyYW1fbWdyX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+ICAg
dm9pZCBhbWRncHVfdnJhbV9tZ3JfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Cj4g
ICAKPiBAQCAtMTA0LDYgKzExMyw4IEBAIGJvb2wgYW1kZ3B1X2d0dF9tZ3JfaGFzX2dhcnRfYWRk
cihzdHJ1Y3QgdHRtX3Jlc291cmNlICptZW0pOwo+ICAgdWludDY0X3QgYW1kZ3B1X2d0dF9tZ3Jf
dXNhZ2Uoc3RydWN0IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICptYW4pOwo+ICAgaW50IGFtZGdwdV9n
dHRfbWdyX3JlY292ZXIoc3RydWN0IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICptYW4pOwo+ICAgCj4g
K3VpbnQ2NF90IGFtZGdwdV9wcmVlbXB0X21ncl91c2FnZShzdHJ1Y3QgdHRtX3Jlc291cmNlX21h
bmFnZXIgKm1hbik7Cj4gKwo+ICAgdTY0IGFtZGdwdV92cmFtX21ncl9ib192aXNpYmxlX3NpemUo
c3RydWN0IGFtZGdwdV9ibyAqYm8pOwo+ICAgaW50IGFtZGdwdV92cmFtX21ncl9hbGxvY19zZ3Qo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAJCQkgICAgICBzdHJ1Y3QgdHRtX3Jlc291
cmNlICptZW0sCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV92bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMKPiBpbmRleCA1
NTk5MWYzOTM0ODEuLmRhMTU1YzI3NmM1MSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdm0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV92bS5jCj4gQEAgLTE4MTcsNyArMTgxNyw4IEBAIGludCBhbWRncHVfdm1fYm9fdXBk
YXRlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgYW1kZ3B1X2JvX3ZhICpib192
YSwKPiAgIAkJCQlibyA9IGdlbV90b19hbWRncHVfYm8oZ29iaik7Cj4gICAJCX0KPiAgIAkJbWVt
ID0gJmJvLT50Ym8ubWVtOwo+IC0JCWlmIChtZW0tPm1lbV90eXBlID09IFRUTV9QTF9UVCkKPiAr
CQlpZiAobWVtLT5tZW1fdHlwZSA9PSBUVE1fUExfVFQgfHwKPiArCQkgICAgbWVtLT5tZW1fdHlw
ZSA9PSBBTURHUFVfUExfUFJFRU1QVCkKPiAgIAkJCXBhZ2VzX2FkZHIgPSBiby0+dGJvLnR0bS0+
ZG1hX2FkZHJlc3M7Cj4gICAJfQo+ICAgCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0v
YW1kZ3B1X2RybS5oIGIvaW5jbHVkZS91YXBpL2RybS9hbWRncHVfZHJtLmgKPiBpbmRleCA5MGJj
ZDY0YzAxNDcuLmY3YTRmOWZkMmJlOCAxMDA2NDQKPiAtLS0gYS9pbmNsdWRlL3VhcGkvZHJtL2Ft
ZGdwdV9kcm0uaAo+ICsrKyBiL2luY2x1ZGUvdWFwaS9kcm0vYW1kZ3B1X2RybS5oCj4gQEAgLTEz
OSw2ICsxMzksMTAgQEAgZXh0ZXJuICJDIiB7Cj4gICAgKiBhY2Nlc3NpbmcgaXQgd2l0aCB2YXJp
b3VzIGh3IGJsb2Nrcwo+ICAgICovCj4gICAjZGVmaW5lIEFNREdQVV9HRU1fQ1JFQVRFX0VOQ1JZ
UFRFRAkJKDEgPDwgMTApCj4gKy8qIEZsYWcgdGhhdCBCTyB3aWxsIGJlIHVzZWQgb25seSBpbiBw
cmVlbXB0aWJsZSBjb250ZXh0LCB3aGljaCBkb2VzCj4gKyAqIG5vdCByZXF1aXJlIEdUVCBtZW1v
cnkgYWNjb3VudGluZwo+ICsgKi8KPiArI2RlZmluZSBBTURHUFVfR0VNX0NSRUFURV9QUkVFTVBU
SUJMRQkJKDEgPDwgMTEpCj4gICAKPiAgIHN0cnVjdCBkcm1fYW1kZ3B1X2dlbV9jcmVhdGVfaW4g
IHsKPiAgIAkvKiogdGhlIHJlcXVlc3RlZCBtZW1vcnkgc2l6ZSAqLwoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1k
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cg==
