Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CBB9419CD9C
	for <lists+amd-gfx@lfdr.de>; Fri,  3 Apr 2020 01:51:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D98B088052;
	Thu,  2 Apr 2020 23:51:16 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM11-CO1-obe.outbound.protection.outlook.com
 (mail-co1nam11on2046.outbound.protection.outlook.com [40.107.220.46])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9D0016E187
 for <amd-gfx@lists.freedesktop.org>; Thu,  2 Apr 2020 23:51:15 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Wu0hvTq0vOn+8e0JQ/fqwGI3ATpSCgTBwze0zI9clmUMGhx2CAEsaMzl1hgbp1ckxhsGgsBv03uRhAonp1i+dONmEsj8NjfjHhqpK0AY0picTPKousKlXqqC3OAz/Onleyj5Mb1PXzRi7HEZvD8dnYbqOACu9U5PzF3NEJeEDyei+vIvWGaZsk3OStbdz2S2tcERO1hlMkuwjUmC6yLS4Hzr+FOUOjng5rnTAOlkKSOwec5Dv6MN1AJxa4IxYkrDJJ51G3cK/sw8CSVfcTL8Avcye38y3LjZHTyK858RxpeEIzfk5tX6tKqPxx9+gRpo1uPMRZaqcGSV7ueFB87aFw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=+t1HB0SjlPc/i06A9dS6CwpJw9C5QJU+35abT+vU8LE=;
 b=PeiTYxFIWpFg3eQxvUOtFG2vMBas/PEB8vfZQIfl3UL4irPJPdolzHNRzaCkddD/vrPx7QeAVPq3GFeeK7aO9MIN7UnPbqdbLDaonXtL7HC2zt3PLWnunY5HYpk6CR1rMkgP0ttJ0dsK7Y2wv9vFU1pDRFPrZrr7PhLzU6gKWw2RPf5h39Li0BPAoNG5780MnmJkrvxVr27s1xg3l8RAu1E4Ur9u+LqKKBvwQB7MKMdigIdrxA51JM04jHoExVmB/KXpN1UsxutbeSkus2T4WWXBULkOPbBdEHFXcBdGbEhBLb1ttOcCub2j3cPbDj8b28Vh4q3vZ+btPOTTUPvx8w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=+t1HB0SjlPc/i06A9dS6CwpJw9C5QJU+35abT+vU8LE=;
 b=0q05v6WUlcDmtL+wqBCik8mDADgEKGavw9eFFYQUrGAUWYnq3QKS7s4YW5fZ9btScfldeCmwvUXL+G1iEaVnaBSQY/PEAGqlVII7ntSc/7qFRkNANoJ9FBPR7xnJ/LEATuk7CpZp1q84gJtjZrWinh5gF0vUnHXuqpIR6F2A4gg=
Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Felix.Kuehling@amd.com; 
Received: from SN1PR12MB2414.namprd12.prod.outlook.com (2603:10b6:802:2e::31)
 by SN1PR12MB2480.namprd12.prod.outlook.com (2603:10b6:802:22::21)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2856.20; Thu, 2 Apr
 2020 23:51:13 +0000
Received: from SN1PR12MB2414.namprd12.prod.outlook.com
 ([fe80::38ef:1510:9525:f806]) by SN1PR12MB2414.namprd12.prod.outlook.com
 ([fe80::38ef:1510:9525:f806%7]) with mapi id 15.20.2856.019; Thu, 2 Apr 2020
 23:51:12 +0000
Subject: Re: [PATCH v2] drm/amdkfd: Provide SMI events watch
To: Amber Lin <Amber.Lin@amd.com>, amd-gfx@lists.freedesktop.org
References: <1585860379-460-1-git-send-email-Amber.Lin@amd.com>
From: Felix Kuehling <felix.kuehling@amd.com>
Organization: AMD Inc.
Message-ID: <a29d9eeb-9cbb-9e5b-75aa-c1f21959e66d@amd.com>
Date: Thu, 2 Apr 2020 19:51:10 -0400
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.4.1
In-Reply-To: <1585860379-460-1-git-send-email-Amber.Lin@amd.com>
Content-Language: en-US
X-ClientProxiedBy: YT1PR01CA0009.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01::22)
 To SN1PR12MB2414.namprd12.prod.outlook.com
 (2603:10b6:802:2e::31)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from [172.27.226.80] (165.204.55.251) by
 YT1PR01CA0009.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01::22) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2878.15 via Frontend Transport; Thu, 2 Apr 2020 23:51:11 +0000
X-Originating-IP: [165.204.55.251]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: 23eafec9-3dea-4aa2-2dd2-08d7d760b945
X-MS-TrafficTypeDiagnostic: SN1PR12MB2480:|SN1PR12MB2480:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <SN1PR12MB2480F7FC1E2A3EEA8974F42892C60@SN1PR12MB2480.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:10000;
X-Forefront-PRVS: 0361212EA8
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:SN1PR12MB2414.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFTY:;
 SFS:(10009020)(4636009)(39860400002)(396003)(136003)(366004)(346002)(376002)(66946007)(8676002)(26005)(8936002)(16576012)(81166006)(66556008)(316002)(66476007)(86362001)(478600001)(81156014)(956004)(31696002)(52116002)(30864003)(31686004)(6486002)(36916002)(36756003)(44832011)(5660300002)(2616005)(186003)(53546011)(16526019)(2906002);
 DIR:OUT; SFP:1101; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: xiT81ey84FXUuFdrPg2S0xsTOgyuhOipjl0SM/RnYzT266NYd/0a4AL1LheROxe2Ooqt/Aw/fezIvoiexKuukfUYi2soGPsJUzxT/Ng7wthplpMBuXtZ0u8/tUaFgHP6q0IRj4DQgsuRi2gElIjGHw2yip0vdZ6ty3gghk5EYCLMw3stxzcWxJCIwvtRWva+266xiucg0DHgucAMpB4T5FejBCRrgVdn0q/5KiV64fGXHd6dPZ0i7Xtc6v11+fgfMLMPQ+G1XZbiJN1Uuta/5Le8tMwPBDACmT1YY6LSSxwe/zqTAjsxCZjvZCPKy4MVGgFbHjzshIrnmJ5mfhHZk2vlZZKXr5u5BSK0utTDCT/YTPHJCHyWJx7/a+T+LTiP2JOM8MigVYUhMNd84MgAAzn+VEIngAbMuTSGHBRedbgZXwR7cbW6SbeFWlXdBlyj
X-MS-Exchange-AntiSpam-MessageData: G62xaxD+VucUUEpBEA9xc6ZmSQoov5yZmB0X2pedtNa9+7TULBVGXwbviYBQDRF/VvRq9HAjcCVW+ihD9MR+i/wlNDWfpQ/mADAbosiLihvzNLZjeh9E5wlvnHl0wf+NT906ZgZi9+2MLWkzFqBRKw==
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 23eafec9-3dea-4aa2-2dd2-08d7d760b945
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 02 Apr 2020 23:51:12.3684 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: AqBwft3wR+U0XXnKWxGBMoovAiEPjjq9/WEgEzXdCH8sxp9QvphtFPLcQqv8KdPvPzEnQbOHRJgLKBSn/otdrw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: SN1PR12MB2480
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gMjAyMC0wNC0wMiA0OjQ2IHAubS4sIEFtYmVyIExpbiB3cm90ZToKPiBXaGVuIHRoZSBjb21w
dXRlIGlzIG1hbGZ1bmN0aW9uaW5nIG9yIHBlcmZvcm1hbmNlIGRyb3BzLCB0aGUgc3lzdGVtIGFk
bWluCj4gd2lsbCB1c2UgU01JIChTeXN0ZW0gTWFuYWdlbWVudCBJbnRlcmZhY2UpIHRvb2wgdG8g
bW9uaXRvci9kaWFnbm9zdGljIHdoYXQKPiB3ZW50IHdyb25nLiBUaGlzIHBhdGNoIHByb3ZpZGVz
IGFuIGV2ZW50IHdhdGNoIGludGVyZmFjZSBmb3IgdGhlIHVzZXIKPiBzcGFjZSB0byByZWdpc3Rl
ciBldmVudHMgdGhleSBhcmUgaW50ZXJlc3RlZC4gQWZ0ZXIgdGhlIGV2ZW50IGlzCj4gcmVnaXN0
ZXJlZCwgdGhlIHVzZXIgY2FuIHVzZSBhbm5veW1vdXMgZmlsZSBkZXNjcmlwdG9yJ3MgcG9sbCBm
dW5jdGlvbgo+IHdpdGggd2FpdC10aW1lIHNwZWNpZmllZCB0byB3YWl0IGZvciB0aGUgZXZlbnQg
dG8gaGFwcGVuLiBPbmNlIHRoZSBldmVudAo+IGhhcHBlbnMsIHRoZSB1c2VyIGNhbiB1c2UgcmVh
ZCgpIHRvIHJldHJpZXZlIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gdGhlCj4gZXZlbnQuCj4KPiBW
TSBmYXVsdCBldmVudCBpcyBkb25lIGluIHRoaXMgcGF0Y2guCj4KPiB2MjogLSByZW1vdmUgVU5S
RUdJU1RFUiBhbmQgYWRkIGV2ZW50IEVOQUJMRS9ESVNBQkxFCj4gICAgICAtIGNvcnJlY3Qga2Zp
Zm8gdXNhZ2UKPiAgICAgIC0gbW92ZSBldmVudCBtZXNzYWdlIEFQSSB0byBrZmRfaW9jdGwuaAo+
Cj4gU2lnbmVkLW9mZi1ieTogQW1iZXIgTGluIDxBbWJlci5MaW5AYW1kLmNvbT4KPiAtLS0KPiAg
IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL01ha2VmaWxlICAgICAgICAgICAgICB8ICAgMyAr
LQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQvY2lrX2V2ZW50X2ludGVycnVwdC5jIHwg
ICAyICsKPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMgICAgICAg
ICB8ICAzMCArKysrCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlLmMg
ICAgICAgICAgfCAgIDEgKwo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2ludF9w
cm9jZXNzX3Y5LmMgIHwgICAyICsKPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9w
cml2LmggICAgICAgICAgICB8ICAxMiArKwo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQv
a2ZkX3NtaV9ldmVudHMuYyAgICAgIHwgMTc3ICsrKysrKysrKysrKysrKysrKysrKysrCj4gICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfc21pX2V2ZW50cy5oICAgICAgfCAgMzEgKysr
Kwo+ICAgaW5jbHVkZS91YXBpL2xpbnV4L2tmZF9pb2N0bC5oICAgICAgICAgICAgICAgICAgIHwg
IDMwICsrKy0KPiAgIDkgZmlsZXMgY2hhbmdlZCwgMjg2IGluc2VydGlvbnMoKyksIDIgZGVsZXRp
b25zKC0pCj4gICBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQv
a2ZkX3NtaV9ldmVudHMuYwo+ICAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1ka2ZkL2tmZF9zbWlfZXZlbnRzLmgKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL01ha2Vm
aWxlCj4gaW5kZXggNjE0NzQ2Mi4uY2M5OGI0YSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9NYWtlZmlsZQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2Zk
L01ha2VmaWxlCj4gQEAgLTUzLDcgKzUzLDggQEAgQU1ES0ZEX0ZJTEVTCTo9ICQoQU1ES0ZEX1BB
VEgpL2tmZF9tb2R1bGUubyBcCj4gICAJCSQoQU1ES0ZEX1BBVEgpL2tmZF9pbnRfcHJvY2Vzc192
OS5vIFwKPiAgIAkJJChBTURLRkRfUEFUSCkva2ZkX2RiZ2Rldi5vIFwKPiAgIAkJJChBTURLRkRf
UEFUSCkva2ZkX2RiZ21nci5vIFwKPiAtCQkkKEFNREtGRF9QQVRIKS9rZmRfY3JhdC5vCj4gKwkJ
JChBTURLRkRfUEFUSCkva2ZkX2NyYXQubyBcCj4gKwkJJChBTURLRkRfUEFUSCkva2ZkX3NtaV9l
dmVudHMubwo+ICAgCj4gICBpZm5lcSAoJChDT05GSUdfQU1EX0lPTU1VX1YyKSwpCj4gICBBTURL
RkRfRklMRVMgKz0gJChBTURLRkRfUEFUSCkva2ZkX2lvbW11Lm8KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRrZmQvY2lrX2V2ZW50X2ludGVycnVwdC5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRrZmQvY2lrX2V2ZW50X2ludGVycnVwdC5jCj4gaW5kZXggOWY1OWJhOS4u
MjRiNDcxNyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9jaWtfZXZl
bnRfaW50ZXJydXB0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9jaWtfZXZl
bnRfaW50ZXJydXB0LmMKPiBAQCAtMjQsNiArMjQsNyBAQAo+ICAgI2luY2x1ZGUgImtmZF9ldmVu
dHMuaCIKPiAgICNpbmNsdWRlICJjaWtfaW50LmgiCj4gICAjaW5jbHVkZSAiYW1kZ3B1X2FtZGtm
ZC5oIgo+ICsjaW5jbHVkZSAia2ZkX3NtaV9ldmVudHMuaCIKPiAgIAo+ICAgc3RhdGljIGJvb2wg
Y2lrX2V2ZW50X2ludGVycnVwdF9pc3Ioc3RydWN0IGtmZF9kZXYgKmRldiwKPiAgIAkJCQkJY29u
c3QgdWludDMyX3QgKmloX3JpbmdfZW50cnksCj4gQEAgLTEwNyw2ICsxMDgsNyBAQCBzdGF0aWMg
dm9pZCBjaWtfZXZlbnRfaW50ZXJydXB0X3dxKHN0cnVjdCBrZmRfZGV2ICpkZXYsCj4gICAJCWlo
cmUtPnNvdXJjZV9pZCA9PSBDSUtfSU5UU1JDX0dGWF9NRU1fUFJPVF9GQVVMVCkgewo+ICAgCQlz
dHJ1Y3Qga2ZkX3ZtX2ZhdWx0X2luZm8gaW5mbzsKPiAgIAo+ICsJCWtmZF9zbWlfZXZlbnRfdXBk
YXRlX3ZtZmF1bHQoZGV2LCBwYXNpZCk7Cj4gICAJCWtmZF9wcm9jZXNzX3ZtX2ZhdWx0KGRldi0+
ZHFtLCBwYXNpZCk7Cj4gICAKPiAgIAkJbWVtc2V0KCZpbmZvLCAwLCBzaXplb2YoaW5mbykpOwo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfY2hhcmRldi5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2NoYXJkZXYuYwo+IGluZGV4IGY4ZmEwM2Eu
LjU5MWFjMjggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2No
YXJkZXYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMK
PiBAQCAtMzksNiArMzksNyBAQAo+ICAgI2luY2x1ZGUgImtmZF9kZXZpY2VfcXVldWVfbWFuYWdl
ci5oIgo+ICAgI2luY2x1ZGUgImtmZF9kYmdtZ3IuaCIKPiAgICNpbmNsdWRlICJhbWRncHVfYW1k
a2ZkLmgiCj4gKyNpbmNsdWRlICJrZmRfc21pX2V2ZW50cy5oIgo+ICAgCj4gICBzdGF0aWMgbG9u
ZyBrZmRfaW9jdGwoc3RydWN0IGZpbGUgKiwgdW5zaWduZWQgaW50LCB1bnNpZ25lZCBsb25nKTsK
PiAgIHN0YXRpYyBpbnQga2ZkX29wZW4oc3RydWN0IGlub2RlICosIHN0cnVjdCBmaWxlICopOwo+
IEBAIC0xMjQzLDYgKzEyNDQsMzIgQEAgc3RhdGljIGludCBrZmRfaW9jdGxfYWNxdWlyZV92bShz
dHJ1Y3QgZmlsZSAqZmlsZXAsIHN0cnVjdCBrZmRfcHJvY2VzcyAqcCwKPiAgIAlyZXR1cm4gcmV0
Owo+ICAgfQo+ICAgCj4gKy8qIEhhbmRsZSByZXF1ZXN0cyBmb3Igd2F0Y2hpbmcgU01JIGV2ZW50
cyAqLwo+ICtzdGF0aWMgaW50IGtmZF9pb2N0bF9zbWlfZXZlbnRzKHN0cnVjdCBmaWxlICpmaWxl
cCwKPiArCQkJCXN0cnVjdCBrZmRfcHJvY2VzcyAqcCwgdm9pZCAqZGF0YSkKPiArewo+ICsJc3Ry
dWN0IGtmZF9pb2N0bF9zbWlfZXZlbnRzX2FyZ3MgKmFyZ3MgPSBkYXRhOwo+ICsJc3RydWN0IGtm
ZF9kZXYgKmRldjsKPiArCj4gKwlkZXYgPSBrZmRfZGV2aWNlX2J5X2lkKGFyZ3MtPmdwdV9pZCk7
Cj4gKwlpZiAoIWRldikKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlzd2l0Y2ggKGFyZ3Mt
Pm9wKSB7Cj4gKwljYXNlIEtGRF9TTUlfRVZFTlRTX1JFR0lTVEVSOgo+ICsJCS8qIHJlZ2lzdGVy
IHRoZSBkZXZpY2UgKi8KPiArCQlyZXR1cm4ga2ZkX3NtaV9ldmVudF9yZWdpc3RlcihkZXYsICZh
cmdzLT5kYXRhKTsKPiArCWNhc2UgS0ZEX1NNSV9FVkVOVFNfRU5BQkxFOgo+ICsJCS8qIHN1YnNj
cmliZSBldmVudHMgdG8gdGhlIGRldmljZSAqLwo+ICsJCXJldHVybiBrZmRfc21pX2V2ZW50X2Vu
YWJsZShkZXYsIGFyZ3MtPmV2ZW50cyk7Cj4gKwljYXNlIEtGRF9TTUlfRVZFTlRTX0RJU0FCTEU6
Cj4gKwkJLyogdW5zdWJzY3JpYmUgZXZlbnRzICovCj4gKwkJcmV0dXJuIGtmZF9zbWlfZXZlbnRf
ZGlzYWJsZShkZXYsIGFyZ3MtPmV2ZW50cyk7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIC1FSU5WQUw7
Cj4gK30KPiArCj4gICBib29sIGtmZF9kZXZfaXNfbGFyZ2VfYmFyKHN0cnVjdCBrZmRfZGV2ICpk
ZXYpCj4gICB7Cj4gICAJc3RydWN0IGtmZF9sb2NhbF9tZW1faW5mbyBtZW1faW5mbzsKPiBAQCAt
MTgyNyw2ICsxODU0LDkgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBhbWRrZmRfaW9jdGxfZGVzYyBh
bWRrZmRfaW9jdGxzW10gPSB7Cj4gICAKPiAgIAlBTURLRkRfSU9DVExfREVGKEFNREtGRF9JT0Nf
QUxMT0NfUVVFVUVfR1dTLAo+ICAgCQkJa2ZkX2lvY3RsX2FsbG9jX3F1ZXVlX2d3cywgMCksCj4g
Kwo+ICsJQU1ES0ZEX0lPQ1RMX0RFRihBTURLRkRfSU9DX1NNSV9FVkVOVFMsCj4gKwkJCWtmZF9p
b2N0bF9zbWlfZXZlbnRzLCAwKSwKPiAgIH07Cj4gICAKPiAgICNkZWZpbmUgQU1ES0ZEX0NPUkVf
SU9DVExfQ09VTlQJQVJSQVlfU0laRShhbWRrZmRfaW9jdGxzKQo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGtmZC9rZmRfZGV2aWNlLmMKPiBpbmRleCAwNDkxYWIyLi42YWM2ZjMxIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2UuYwo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2UuYwo+IEBAIC01MzIsNiArNTMyLDcgQEAg
c3RydWN0IGtmZF9kZXYgKmtnZDJrZmRfcHJvYmUoc3RydWN0IGtnZF9kZXYgKmtnZCwKPiAgIAlr
ZmQtPmRldmljZV9pbmZvID0gZGV2aWNlX2luZm87Cj4gICAJa2ZkLT5wZGV2ID0gcGRldjsKPiAg
IAlrZmQtPmluaXRfY29tcGxldGUgPSBmYWxzZTsKPiArCWtmZC0+c21pX2V2ZW50cy5yZWdpc3Rl
cmVkID0gZmFsc2U7Cj4gICAJa2ZkLT5rZmQya2dkID0gZjJnOwo+ICAgCWF0b21pY19zZXQoJmtm
ZC0+Y29tcHV0ZV9wcm9maWxlLCAwKTsKPiAgIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfaW50X3Byb2Nlc3NfdjkuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1ka2ZkL2tmZF9pbnRfcHJvY2Vzc192OS5jCj4gaW5kZXggZTA1ZDc1ZS4uMTUxZTgzZSAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfaW50X3Byb2Nlc3Nfdjku
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9pbnRfcHJvY2Vzc192OS5j
Cj4gQEAgLTI0LDYgKzI0LDcgQEAKPiAgICNpbmNsdWRlICJrZmRfZXZlbnRzLmgiCj4gICAjaW5j
bHVkZSAic29jMTVfaW50LmgiCj4gICAjaW5jbHVkZSAia2ZkX2RldmljZV9xdWV1ZV9tYW5hZ2Vy
LmgiCj4gKyNpbmNsdWRlICJrZmRfc21pX2V2ZW50cy5oIgo+ICAgCj4gICBzdGF0aWMgYm9vbCBl
dmVudF9pbnRlcnJ1cHRfaXNyX3Y5KHN0cnVjdCBrZmRfZGV2ICpkZXYsCj4gICAJCQkJCWNvbnN0
IHVpbnQzMl90ICppaF9yaW5nX2VudHJ5LAo+IEBAIC0xMTcsNiArMTE4LDcgQEAgc3RhdGljIHZv
aWQgZXZlbnRfaW50ZXJydXB0X3dxX3Y5KHN0cnVjdCBrZmRfZGV2ICpkZXYsCj4gICAJCWluZm8u
cHJvdF9yZWFkICA9IHJpbmdfaWQgJiAweDEwOwo+ICAgCQlpbmZvLnByb3Rfd3JpdGUgPSByaW5n
X2lkICYgMHgyMDsKPiAgIAo+ICsJCWtmZF9zbWlfZXZlbnRfdXBkYXRlX3ZtZmF1bHQoZGV2LCBw
YXNpZCk7Cj4gICAJCWtmZF9wcm9jZXNzX3ZtX2ZhdWx0KGRldi0+ZHFtLCBwYXNpZCk7Cj4gICAJ
CWtmZF9zaWduYWxfdm1fZmF1bHRfZXZlbnQoZGV2LCBwYXNpZCwgJmluZm8pOwo+ICAgCX0KPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3ByaXYuaCBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcml2LmgKPiBpbmRleCA0M2I4ODhiLi5iMTBiNjY1
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcml2LmgKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJpdi5oCj4gQEAgLTIyMyw2ICsy
MjMsMTUgQEAgc3RydWN0IGtmZF92bWlkX2luZm8gewo+ICAgCXVpbnQzMl90IHZtaWRfbnVtX2tm
ZDsKPiAgIH07Cj4gICAKPiArc3RydWN0IGtmZF9zbWlfZXZlbnRzIHsKPiArCS8qIGRldmljZSBp
cyByZWdpc3RlcmVkIHRvIHdhdGNoIGV2ZW50cyAqLwo+ICsJYm9vbCByZWdpc3RlcmVkOwo+ICsJ
LyogZXZlbnRzIGVuYWJsZWQgKi8KPiArCXVpbnQzMl90IGV2ZW50czsKClRoaXMgc2hvdWxkIGJl
IDY0LWJpdCB0byBhbGxvdyBmb3IgbW9yZSBmdXR1cmUgZXhwYW5zaW9uLiBJdCBkb2Vzbid0IApt
YXR0ZXIgYXMgbXVjaCBoZXJlLCBiZWNhdXNlIHlvdSBjYW4gYWx3YXlzIGNoYW5nZSB0aGUgaW50
ZXJuYWwgaGVhZGVyIApsYXRlci4gQnV0IGluIHRoZSBpb2N0bCBBUEkgd2UgY2FuJ3QgY2hhbmdl
IGl0IGxhdGVyLCBzbyB3ZSBzaG91bGQgCmRlZmluZSBpdCBhcyA2NC1iaXQgZnJvbSB0aGUgc3Rh
cnQuCgoKPiArCURFQ0xBUkVfS0ZJRk9fUFRSKGZpZm8sIHVpbnQzMl90KTsKPiArCXdhaXRfcXVl
dWVfaGVhZF90IHdhaXRfcXVldWU7Cj4gK307Cj4gKwo+ICAgc3RydWN0IGtmZF9kZXYgewo+ICAg
CXN0cnVjdCBrZ2RfZGV2ICprZ2Q7Cj4gICAKPiBAQCAtMzA5LDYgKzMxOCw5IEBAIHN0cnVjdCBr
ZmRfZGV2IHsKPiAgIAo+ICAgCS8qIEdsb2JhbCBHV1MgcmVzb3VyY2Ugc2hhcmVkIGIvdCBwcm9j
ZXNzZXMqLwo+ICAgCXZvaWQgKmd3czsKPiArCj4gKwkvKiBpZiB0aGlzIGRldmljZSBpcyBpbiBT
TUkgZXZlbnRzIHdhdGNoICovCj4gKwlzdHJ1Y3Qga2ZkX3NtaV9ldmVudHMgc21pX2V2ZW50czsK
PiAgIH07Cj4gICAKPiAgIGVudW0ga2ZkX21lbXBvb2wgewo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfc21pX2V2ZW50cy5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRrZmQva2ZkX3NtaV9ldmVudHMuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXgg
MDAwMDAwMC4uYWFiNGRhYwo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGtmZC9rZmRfc21pX2V2ZW50cy5jCj4gQEAgLTAsMCArMSwxNzcgQEAKPiArLyoKPiAr
ICogQ29weXJpZ2h0IDIwMjAgQWR2YW5jZWQgTWljcm8gRGV2aWNlcywgSW5jLgo+ICsgKgo+ICsg
KiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBl
cnNvbiBvYnRhaW5pbmcgYQo+ICsgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0
ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAo+ICsgKiB0byBkZWFsIGlu
IHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1p
dGF0aW9uCj4gKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJs
aXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAo+ICsgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2Yg
dGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKPiArICogU29m
dHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29u
ZGl0aW9uczoKPiArICoKPiArICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMg
cGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KPiArICogYWxsIGNvcGllcyBv
ciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCj4gKyAqCj4gKyAqIFRIRSBT
T0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5E
LCBFWFBSRVNTIE9SCj4gKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8g
VEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAo+ICsgKiBGSVRORVNTIEZPUiBBIFBB
UlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwK
PiArICogVEhFIENPUFlSSUdIVCBIT0xERVIoUykgT1IgQVVUSE9SKFMpIEJFIExJQUJMRSBGT1Ig
QU5ZIENMQUlNLCBEQU1BR0VTIE9SCj4gKyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBB
TiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLAo+ICsgKiBBUklTSU5HIEZS
T00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0Ug
T1IKPiArICogT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgo+ICsgKi8KPiArCj4gKyNp
bmNsdWRlIDxsaW51eC9wb2xsLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC93YWl0Lmg+Cj4gKyNpbmNs
dWRlIDxsaW51eC9hbm9uX2lub2Rlcy5oPgo+ICsjaW5jbHVkZSA8dWFwaS9saW51eC9rZmRfaW9j
dGwuaD4KPiArI2luY2x1ZGUgImFtZGdwdV92bS5oIgo+ICsjaW5jbHVkZSAia2ZkX3ByaXYuaCIK
PiArI2luY2x1ZGUgImtmZF9zbWlfZXZlbnRzLmgiCj4gKwo+ICtzdGF0aWMgREVGSU5FX01VVEVY
KGtmZF9zbWlfbXV0ZXgpOwo+ICtzdHJ1Y3QgbXV0ZXggKmtmZF9nZXRfc21pX211dGV4KHZvaWQp
Cj4gK3sKPiArCXJldHVybiAma2ZkX3NtaV9tdXRleDsKPiArfQoKV2h5IGRvIHlvdSBuZWVkIGEg
ZnVuY3Rpb24gZm9yIHRoaXMuIEp1c3QgcmVmZXJlbmNlIGtmZF9zbWlfbXV0ZXggCmRpcmVjdGx5
IGJlbG93LiBCdXQgc2luY2UgdGhlIGZpZm8gaXMgcGVyIGRldmljZSwgc2hvdWxkIHRoZXJlIGFs
c28gYmUgCm9uZSBtdXRleCBwZXIgZGV2aWNlPwoKCj4gKwo+ICtzdGF0aWMgX19wb2xsX3Qga2Zk
X3NtaV9ldl9wb2xsKHN0cnVjdCBmaWxlICosIHN0cnVjdCBwb2xsX3RhYmxlX3N0cnVjdCAqKTsK
PiArc3RhdGljIHNzaXplX3Qga2ZkX3NtaV9ldl9yZWFkKHN0cnVjdCBmaWxlICosIGNoYXIgX191
c2VyICosIHNpemVfdCwgbG9mZl90ICopOwo+ICtzdGF0aWMgaW50IGtmZF9zbWlfZXZfcmVsZWFz
ZShzdHJ1Y3QgaW5vZGUgKiwgc3RydWN0IGZpbGUgKik7Cj4gKwo+ICtzdGF0aWMgdWludDMyX3Qg
c21pX2ZpZm9fbGVuOwoKVGhpcyBjb3VsZCBiZSBzdGF0aWNhbGx5IGluaXRpYWxpemVkIHJhdGhl
ciB0aGFuIGRvaW5nIGl0IGluIGEgZnVuY3Rpb24gCmJlbG93IGJlY2F1c2UgdGhpcyBjYW4gYmUg
Y2FsY3VsYXRlZCBhdCBjb21waWxlIHRpbWUuIEl0J3MgYWxzbyBjb25zdGFudDoKCnN0YXRpYyBj
b25zdCB1aW50MzJfdCBzbWlfZmlmb19sZW4gPSAzMiAqIChzaXplb2Yoc3RydWN0IAprZmRfc21p
X21zZ192bWZhdWx0KS9zaXplb2YodWludDMyX3QpICsgMSk7CgpPciB5b3UgY291bGQgcHJvYmFi
bHkgZXZlbiBtYWtlIGlzIGEgI2RlZmluZS4KCgo+ICtzdGF0aWMgY29uc3QgY2hhciBrZmRfc21p
X25hbWVbXSA9ICJrZmRfc21pX2V2IjsKPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9v
cGVyYXRpb25zIGtmZF9zbWlfZXZfZm9wcyA9IHsKPiArCS5vd25lciA9IFRISVNfTU9EVUxFLAo+
ICsJLnBvbGwgPSBrZmRfc21pX2V2X3BvbGwsCj4gKwkucmVhZCA9IGtmZF9zbWlfZXZfcmVhZCwK
PiArCS5yZWxlYXNlID0ga2ZkX3NtaV9ldl9yZWxlYXNlCj4gK307Cj4gKwo+ICtzdGF0aWMgX19w
b2xsX3Qga2ZkX3NtaV9ldl9wb2xsKHN0cnVjdCBmaWxlICpmaWxlcCwKPiArCQkJCXN0cnVjdCBw
b2xsX3RhYmxlX3N0cnVjdCAqd2FpdCkKPiArewo+ICsJX19wb2xsX3QgbWFzazsKPiArCXN0cnVj
dCBrZmRfZGV2ICpkZXYgPSBmaWxlcC0+cHJpdmF0ZV9kYXRhOwo+ICsKPiArCXBvbGxfd2FpdChm
aWxlcCwgJmRldi0+c21pX2V2ZW50cy53YWl0X3F1ZXVlLCB3YWl0KTsKPiArCW1hc2sgPSBrZmlm
b19pc19lbXB0eSgmZGV2LT5zbWlfZXZlbnRzLmZpZm8pID8gMDogUE9MTElOIHwgUE9MTFJETk9S
TTsKPiArCj4gKwlyZXR1cm4gbWFzazsKPiArfQo+ICsKPiArc3RhdGljIHNzaXplX3Qga2ZkX3Nt
aV9ldl9yZWFkKHN0cnVjdCBmaWxlICpmaWxlcCwgY2hhciBfX3VzZXIgKnVzZXIsCj4gKwkJCSAg
ICAgICBzaXplX3Qgc2l6ZSwgbG9mZl90ICpvZmZzZXQpCj4gK3sKPiArCWludCByZXQsIGNvcGll
ZCA9IDA7Cj4gKwlzdHJ1Y3Qga2ZkX2RldiAqZGV2ID0gZmlsZXAtPnByaXZhdGVfZGF0YTsKPiAr
Cj4gKwltdXRleF9sb2NrKGtmZF9nZXRfc21pX211dGV4KCkpOwo+ICsJcmV0ID0ga2ZpZm9fdG9f
dXNlcigmZGV2LT5zbWlfZXZlbnRzLmZpZm8sIHVzZXIsIHNpemUsICZjb3BpZWQpOwo+ICsJbXV0
ZXhfdW5sb2NrKGtmZF9nZXRfc21pX211dGV4KCkpOwo+ICsJaWYgKHJldCB8fCAhY29waWVkKSB7
Cj4gKwkJcHJfZGVidWcoInNtaS1ldmVudHM6IGZhaWwgdG8gc2VuZCBtc2cgKCVpKSAoJWkpXG4i
LAo+ICsJCQlyZXQsIGNvcGllZCk7Cj4gKwkJcmV0dXJuIHJldCA/IHJldCA6IC1FQUdBSU47Cj4g
Kwl9Cj4gKwo+ICsJcmV0dXJuIGNvcGllZDsKPiArfQo+ICsKPiArc3RhdGljIGludCBrZmRfc21p
X2V2X3JlbGVhc2Uoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbGVwKQo+ICt7
Cj4gKwlzdHJ1Y3Qga2ZkX2RldiAqZGV2ID0gZmlsZXAtPnByaXZhdGVfZGF0YTsKPiArCj4gKwlk
ZXYtPnNtaV9ldmVudHMuZXZlbnRzID0gMDsKPiArCWtmaWZvX2ZyZWUoJmRldi0+c21pX2V2ZW50
cy5maWZvKTsKClRoaXMgY2FuIGNhdXNlIHJhY2UgY29uZGl0aW9ucy4gWW91IHNob3VsZCBkbyB0
aGlzIHVuZGVyIHRoZSBmaWZvIG11dGV4LiAKQWxzbyBzZXQgZGV2LT5zbWlfZXZlbnRzLnJlZ2lz
dGVyZWQgPSBmYWxzZSB0byBhbGxvdyBhIG5ldyByZWdpc3RyYXRpb24gCmFmdGVyIHRoaXMuCgoK
PiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArdm9pZCBrZmRfc21pX2V2ZW50X3VwZGF0ZV92
bWZhdWx0KHN0cnVjdCBrZmRfZGV2ICpkZXYsIHVpbnQxNl90IHBhc2lkKQo+ICt7Cj4gKwlzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqKWRldi0+a2dk
Owo+ICsJc3RydWN0IGFtZGdwdV90YXNrX2luZm8gdGFza19pbmZvOwo+ICsJc3RydWN0IGtmZF9z
bWlfbXNnX3ZtZmF1bHQgbXNnOwo+ICsJdWludDMyX3QgKmZpZm9faW4gPSAodWludDMyX3QgKikm
bXNnOwo+ICsJdWludDMyX3QgZmlmb19pbl9sZW4gPSBzaXplb2YobXNnKSAvIHNpemVvZih1aW50
MzJfdCk7Cj4gKwo+ICsJaWYgKCEoZGV2LT5zbWlfZXZlbnRzLmV2ZW50cyAmIEtGRF9TTUlfRVZF
TlRfVk1GQVVMVCkpCj4gKwkJcmV0dXJuOwoKWW91IG5lZWQgdG8gZG8gdGhpcyB3aGlsZSBob2xk
aW5nIHRoZSBmaWZvIG11dGV4LCBvdGhlcndpc2UgdGhlIGZpZm8gY2FuIApiZSBkZXN0cm95ZWQg
YmVmb3JlIHlvdSBhY2Nlc3MgaXQgYmVsb3cuCgoKPiArCj4gKwlhbWRncHVfdm1fZ2V0X3Rhc2tf
aW5mbyhhZGV2LCBwYXNpZCwgJnRhc2tfaW5mbyk7Cj4gKwltc2cucGlkID0gdGFza19pbmZvLnBp
ZDsKPiArCXN0cm5jcHkobXNnLnRhc2tfbmFtZSwgdGFza19pbmZvLnRhc2tfbmFtZSwgMTYpOwo+
ICsKPiArCW11dGV4X2xvY2soa2ZkX2dldF9zbWlfbXV0ZXgoKSk7Cj4gKwlpZiAoKGZpZm9faW5f
bGVuICsgMSkgPgo+ICsJCQkoc21pX2ZpZm9fbGVuIC0ga2ZpZm9fbGVuKCZkZXYtPnNtaV9ldmVu
dHMuZmlmbykpKSB7CgpZb3UgY291bGQgdXNlIGtmaWZvX2F2YWlsIHRvIGdldCB0aGUgc3BhY2Ug
YXZhaWxhYmxlIGluIHRoZSBmaWZvLgoKCj4gKwkJcHJfZXJyKCJzbWlfZXZlbnQ6IG5vIHNwYWNl
IGxlZnQgZm9yIHZtZmF1bHQgZXZlbnRcbiIpOwo+ICsJCW11dGV4X3VubG9jayhrZmRfZ2V0X3Nt
aV9tdXRleCgpKTsKPiArCQlyZXR1cm47Cj4gKwl9Cj4gKwkvKiBBbHdheXMgc2VuZCB0aGUgZXZl
bnQgdHlwZSBmaXJzdCB0byBmdW5jdGlvbiBhcyBhIGhlYWRlciAqLwo+ICsJa2ZpZm9fcHV0KCZk
ZXYtPnNtaV9ldmVudHMuZmlmbywgS0ZEX1NNSV9FVkVOVF9WTUZBVUxUKTsKPiArCS8qIFRoZW4g
dGhlIG1zZyBhcyB0aGUgcGF5bG9hZC4gRXZlbnQgdHlwZSByZXZlYWxzIHRoZSBwYXlsb2FkIHNp
emUuICovCj4gKwlrZmlmb19pbigmZGV2LT5zbWlfZXZlbnRzLmZpZm8sIGZpZm9faW4sIGZpZm9f
aW5fbGVuKTsKPiArCW11dGV4X3VubG9jayhrZmRfZ2V0X3NtaV9tdXRleCgpKTsKPiArCj4gKwl3
YWtlX3VwX2FsbCgmZGV2LT5zbWlfZXZlbnRzLndhaXRfcXVldWUpOwo+ICt9Cj4gKwo+ICtpbnQg
a2ZkX3NtaV9ldmVudF9kaXNhYmxlKHN0cnVjdCBrZmRfZGV2ICpkZXYsIHVpbnQ2NF90IGV2ZW50
cykKPiArewo+ICsJbXV0ZXhfbG9jayhrZmRfZ2V0X3NtaV9tdXRleCgpKTsKPiArCWRldi0+c21p
X2V2ZW50cy5ldmVudHMgJj0gfmV2ZW50czsKPiArCW11dGV4X3VubG9jayhrZmRfZ2V0X3NtaV9t
dXRleCgpKTsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiAraW50IGtmZF9zbWlfZXZlbnRf
ZW5hYmxlKHN0cnVjdCBrZmRfZGV2ICpkZXYsIHVpbnQ2NF90IGV2ZW50cykKPiArewo+ICsJLyog
SWYgdGhlIHVzZXIgZGlkbid0IHJlZ2lzdGVyIFNNSSBldmVudHMgZm9yIHRoaXMgZGV2aWNlLCBr
ZmlmbyBpcyBub3QKPiArCSAqIGNyZWF0ZWQgdG8gcmVwb3J0IGV2ZW50cy4KPiArCSAqLwo+ICsJ
aWYgKCFkZXYtPnNtaV9ldmVudHMucmVnaXN0ZXJlZCkKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiAr
Cj4gKwltdXRleF9sb2NrKGtmZF9nZXRfc21pX211dGV4KCkpOwo+ICsJZGV2LT5zbWlfZXZlbnRz
LmV2ZW50cyB8PSBldmVudHM7Cj4gKwltdXRleF91bmxvY2soa2ZkX2dldF9zbWlfbXV0ZXgoKSk7
Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGFzc2lnbl9maWZvX2xl
bih2b2lkKQo+ICt7Cj4gKwkvKiBXaGVuIGEgbmV3IGV2ZW50IGlzIGFkZGVkIGludG8gc3VwcG9y
dCBhbmQgdGhpcyBuZXcgZXZlbnQgbXNnIHVzZXMKPiArCSAqIG1vcmUgbWVtb3J5LCByZXBsYWNl
IHRoZSBtc2cgc3RydWN0IGhlcmUuCj4gKwkgKi8KPiArCXVpbnQzMl90IG1heF9tc2cgPSBzaXpl
b2Yoc3RydWN0IGtmZF9zbWlfbXNnX3ZtZmF1bHQpL3NpemVvZih1aW50MzJfdCk7Cj4gKwkvKiAr
MSBmb3IgdGhlIGV2ZW50IHR5cGUgaW4gZnJvbnQgb2YgZXZlbnQgbWVzc2FnZS4gdXAgdG8gMzIg
ZW50cmllcyAqLwo+ICsJc21pX2ZpZm9fbGVuID0gKCsrbWF4X21zZykgKiAzMjsKClNlZSBhYm92
ZS4gVGhpcyBjb3VsZCBiZSBzdGF0aWNhbGx5IGluaXRpYWxpemVkLgoKCj4gK30KPiArCj4gK2lu
dCBrZmRfc21pX2V2ZW50X3JlZ2lzdGVyKHN0cnVjdCBrZmRfZGV2ICpkZXYsIGludCAqZmQpCj4g
K3sKPiArCWludCByZXQgPSAwOwoKVGhpcyBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGZhaWx1cmUg
aWYgdGhlIGV2ZW50IHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWQuIApZb3UgY2FuIG9ubHkgYWxsb3cg
b25lIEZEIHRvIGJlIGNyZWF0ZWQgcGVyIGRldmljZSwgYmVjYXVzZSB0aGF0IEZEIG93bnMgCnRo
ZSBGSUZPLgoKVGhpcyBlbnRpcmUgZnVuY3Rpb24gbXVzdCBiZSB1bmRlciB0aGUgZmlmbyBtdXRl
eC4KCgo+ICsKPiArCWlmICghc21pX2ZpZm9fbGVuKQo+ICsJCWFzc2lnbl9maWZvX2xlbigpOwo+
ICsKPiArCXJldCA9IGtmaWZvX2FsbG9jKCZkZXYtPnNtaV9ldmVudHMuZmlmbywgc21pX2ZpZm9f
bGVuLCBHRlBfS0VSTkVMKTsKPiArCWlmIChyZXQpIHsKPiArCQlwcl9lcnIoInNtaV9ldmVudDog
ZmFpbCB0byBhbGxvY2F0ZSBrZmlmb1xuIik7Cj4gKwkJcmV0dXJuIHJldDsKPiArCX0KPiArCWlu
aXRfd2FpdHF1ZXVlX2hlYWQoJmRldi0+c21pX2V2ZW50cy53YWl0X3F1ZXVlKTsKPiArCWRldi0+
c21pX2V2ZW50cy5ldmVudHMgPSAwOwo+ICsJZGV2LT5zbWlfZXZlbnRzLnJlZ2lzdGVyZWQgPSB0
cnVlOwo+ICsKPiArCXJldCA9IGFub25faW5vZGVfZ2V0ZmQoa2ZkX3NtaV9uYW1lLCAma2ZkX3Nt
aV9ldl9mb3BzLAo+ICsJCQkJKHZvaWQgKilkZXYsIDApOwo+ICsJKmZkID0gcmV0Owo+ICsKPiAr
CXJldHVybiByZXQ7Cj4gK30KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRr
ZmQva2ZkX3NtaV9ldmVudHMuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9zbWlf
ZXZlbnRzLmgKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAuLmUxMGJiNWQK
PiAtLS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Nt
aV9ldmVudHMuaAo+IEBAIC0wLDAgKzEsMzEgQEAKPiArLyoKPiArICogQ29weXJpZ2h0IDIwMjAg
QWR2YW5jZWQgTWljcm8gRGV2aWNlcywgSW5jLgo+ICsgKgo+ICsgKiBQZXJtaXNzaW9uIGlzIGhl
cmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQo+
ICsgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBm
aWxlcyAodGhlICJTb2Z0d2FyZSIpLAo+ICsgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRo
b3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCj4gKyAqIHRoZSBy
aWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBz
dWJsaWNlbnNlLAo+ICsgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQg
dG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKPiArICogU29mdHdhcmUgaXMgZnVybmlzaGVk
IHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKPiArICoKPiAr
ICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ug
c2hhbGwgYmUgaW5jbHVkZWQgaW4KPiArICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0
aW9ucyBvZiB0aGUgU29mdHdhcmUuCj4gKyAqCj4gKyAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURF
RCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCj4gKyAq
IElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Yg
TUVSQ0hBTlRBQklMSVRZLAo+ICsgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBB
TkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKPiArICogVEhFIENPUFlSSUdI
VCBIT0xERVIoUykgT1IgQVVUSE9SKFMpIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VT
IE9SCj4gKyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJB
Q1QsIFRPUlQgT1IgT1RIRVJXSVNFLAo+ICsgKiBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBD
T05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IKPiArICogT1RIRVIgREVB
TElOR1MgSU4gVEhFIFNPRlRXQVJFLgo+ICsgKi8KPiArCj4gKyNpZm5kZWYgS0ZEX1NNSV9FVkVO
VFNfSF9JTkNMVURFRAo+ICsjZGVmaW5lIEtGRF9TTUlfRVZFTlRTX0hfSU5DTFVERUQKPiArCj4g
K2ludCBrZmRfc21pX2V2ZW50X3JlZ2lzdGVyKHN0cnVjdCBrZmRfZGV2ICpkZXYsIGludCAqZmQp
Owo+ICtpbnQga2ZkX3NtaV9ldmVudF9lbmFibGUoc3RydWN0IGtmZF9kZXYgKmRldiwgdWludDY0
X3QgZXZlbnRzKTsKPiAraW50IGtmZF9zbWlfZXZlbnRfZGlzYWJsZShzdHJ1Y3Qga2ZkX2RldiAq
ZGV2LCB1aW50NjRfdCBldmVudHMpOwo+ICt2b2lkIGtmZF9zbWlfZXZlbnRfdXBkYXRlX3ZtZmF1
bHQoc3RydWN0IGtmZF9kZXYgKmRldiwgdWludDE2X3QgcGFzaWQpOwo+ICsKPiArI2VuZGlmCj4g
ZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9saW51eC9rZmRfaW9jdGwuaCBiL2luY2x1ZGUvdWFw
aS9saW51eC9rZmRfaW9jdGwuaAo+IGluZGV4IDRmNjY3NjQuLmRjOTMwOWUgMTAwNjQ0Cj4gLS0t
IGEvaW5jbHVkZS91YXBpL2xpbnV4L2tmZF9pb2N0bC5oCj4gKysrIGIvaW5jbHVkZS91YXBpL2xp
bnV4L2tmZF9pb2N0bC5oCj4gQEAgLTQ0Miw2ICs0NDIsMzEgQEAgc3RydWN0IGtmZF9pb2N0bF9p
bXBvcnRfZG1hYnVmX2FyZ3Mgewo+ICAgCV9fdTMyIGRtYWJ1Zl9mZDsJLyogdG8gS0ZEICovCj4g
ICB9Owo+ICAgCj4gKy8qCj4gKyAqIEtGRCBTTUkoU3lzdGVtIE1hbmFnZW1lbnQgSW50ZXJmYWNl
KSBldmVudHMKPiArICovCj4gK2VudW0ga2ZkX3NtaV9ldmVudHNfb3Agewo+ICsJS0ZEX1NNSV9F
VkVOVFNfUkVHSVNURVIgPSAxLAo+ICsJS0ZEX1NNSV9FVkVOVFNfRU5BQkxFLAo+ICsJS0ZEX1NN
SV9FVkVOVFNfRElTQUJMRQo+ICt9Owo+ICsKPiArLyogRXZlbnQgdHlwZSAoZGVmaW5lZCBieSBi
aXRtYXNrKSAqLwo+ICsjZGVmaW5lIEtGRF9TTUlfRVZFTlRfVk1GQVVMVCAgICAgMHgwMDAwMDAw
MQoKU2luY2UgeW91IGNhbiBvbmx5IGhhdmUgNjQgZXZlbnRzLCB5b3Ugb25seSBuZWVkIG9uZSBi
eXRlLiBZb3UgaGF2ZSAKcGxlbnR5IG9mIHNwYWNlIGluIHRoZSBoZWFkZXIgZHdvcmQgdG8gYWRk
IHRoZSBtZXNzYWdlIHNpemUuIFRoYXQgd291bGQgCm1ha2UgaXQgZWFzaWVyIHRvIHBhcnNlIHRo
ZSBldmVudHMgYW5kIGFsbG93IHZhcmlhYmxlIHNpemUgZXZlbnRzIGluIHRoZSAKZnV0dXJlLiBU
aGVuIHlvdSBzaG91bGQgZGVmaW5lIHRoZSBoZWFkZXIgYXMgYSBzdHJ1Y3QuIFNvbWV0aGluZyBs
aWtlIHRoaXM6CgpzdHJ1Y3Qga2ZkX3NtaV9tc2dfaGVhZGVyIHsKCV9fdTggdHlwZTsKCV9fdTgg
cGFkOwoJX191MTYgc2l6ZTsKfTsKCgo+ICsKPiArc3RydWN0IGtmZF9pb2N0bF9zbWlfZXZlbnRz
X2FyZ3Mgewo+ICsJX191MzIgb3A7ICAgICAgIC8qIHRvIEtGRCAqLwo+ICsJX191MzIgZXZlbnRz
OyAgIC8qIHRvIEtGRCAqLwoKSSB0aG91Z2h0IHRoaXMgc2hvdWxkIGJlIDY0LWJpdC4KCgo+ICsJ
X191MzIgZ3B1X2lkOyAgIC8qIHRvIEtGRCAqLwo+ICsJX191MzIgZGF0YTsgICAgLyogZnJvbSBL
RkQgKi8KPiArfTsKPiArCj4gKy8qIE1lc3NhZ2UgdG8gdXNlciBzcGFjZSBmb3IgZWFjaCBldmVu
dCAqLwo+ICtzdHJ1Y3Qga2ZkX3NtaV9tc2dfdm1mYXVsdCB7CgpJZiB5b3UgZGVmaW5lIHRoZSBo
ZWFkZXIgbGlrZSBzdWdnZXN0ZWQgYWJvdmUsIHlvdSBjb3VsZCBpbmNsdWRlIGl0IGhlcmUgCmFu
ZCBhdCB0aGUgc3RhcnQgb2YgYWxsIG1lc3NhZ2Ugc3RydWN0dXJlcy4gTWlnaHQgc2ltcGxpZnkg
dGhlIGNvZGUgYSAKbGl0dGxlOgoKCXN0cnVjdCBrZmRfc21pX21zZ19oZWFkZXIgaGVhZGVyOwoK
UmVnYXJkcywKIMKgIEZlbGl4Cgo+ICsJdWludDMyX3QgcGlkOwo+ICsJY2hhciB0YXNrX25hbWVb
MTZdOwo+ICt9Owo+ICsKPiAgIC8qIFJlZ2lzdGVyIG9mZnNldCBpbnNpZGUgdGhlIHJlbWFwcGVk
IG1taW8gcGFnZQo+ICAgICovCj4gICBlbnVtIGtmZF9tbWlvX3JlbWFwIHsKPiBAQCAtNTQ2LDcg
KzU3MSwxMCBAQCBlbnVtIGtmZF9tbWlvX3JlbWFwIHsKPiAgICNkZWZpbmUgQU1ES0ZEX0lPQ19B
TExPQ19RVUVVRV9HV1MJCVwKPiAgIAkJQU1ES0ZEX0lPV1IoMHgxRSwgc3RydWN0IGtmZF9pb2N0
bF9hbGxvY19xdWV1ZV9nd3NfYXJncykKPiAgIAo+ICsjZGVmaW5lIEFNREtGRF9JT0NfU01JX0VW
RU5UUwkJCVwKPiArCQlBTURLRkRfSU9XUigweDFGLCBzdHJ1Y3Qga2ZkX2lvY3RsX3NtaV9ldmVu
dHNfYXJncykKPiArCj4gICAjZGVmaW5lIEFNREtGRF9DT01NQU5EX1NUQVJUCQkweDAxCj4gLSNk
ZWZpbmUgQU1ES0ZEX0NPTU1BTkRfRU5ECQkweDFGCj4gKyNkZWZpbmUgQU1ES0ZEX0NPTU1BTkRf
RU5ECQkweDIwCj4gICAKPiAgICNlbmRpZgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2FtZC1nZngK
