Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 34684AB535
	for <lists+amd-gfx@lfdr.de>; Fri,  6 Sep 2019 12:01:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BB91E6E223;
	Fri,  6 Sep 2019 10:01:19 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-BN3-obe.outbound.protection.outlook.com
 (mail-eopbgr680071.outbound.protection.outlook.com [40.107.68.71])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DAEFC6E223
 for <amd-gfx@lists.freedesktop.org>; Fri,  6 Sep 2019 10:01:17 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=SAsP0HcrpiINn4voguGMxjTm7PzslOdcJc64/HOhd2ARVE5g+108cfaqSJ//Br7KOAc/bsTbpo0CWZrkyM3ciHy/M3uCud1ntPNlVlZAjIoGa0rqzW3gsTH34AYY7Bo5Cc3JLqEgqsJupwbAjvuMNg+VAdgxhQxliYbJhFnnpIPt7GSzqof3NuatoB7lojI/+tzTHFkcKWMKYf1liVTTGEhkEVZRZIzjnUs3pbrvCf3BTiMGzEfqEvu2kNDJ1/6OlCEGtTDLQA+Bt4yq7hxvyJPF988+K8cHu6ZDDCitRid01Tx4S1Wm1tls0hyuthj4o68rwa+9brzjzd2k/jwQQA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=h/UlPePtf8Nguh4JyoyCe0YfUSnIJIU8OeaLUbfruZA=;
 b=FQUqabWRETcAlYx2cB82+FHaTSE4q6lsKYOhWFJyaTmnsEizQ47fZXTeW0Mi3HrBK1y8a3RKIiz0QUwIgt6F+a+1x1T5yZMAgZu/0LfjruItwIESIl6NUu9xReG/gQ7NEbxicJkTmrZ8PLYqaAsyStEWwvcQ6auqtfypzPKsIra38RoSQbVDpvYpd6jQZu5kvc7RsTA0waGkZ2VOsjovdX7hxX6xG73oyi2HZeyFyKUtgldsz7s39kv371PyNp7VSOXgB9am8ROyV5XajIGkjEthgSs8dX4pHNKy36fTWsolPMED5JvIX1ttwZ1VZ0Us+/JBJKg2w608ncaplDpaJw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from BYAPR12MB2806.namprd12.prod.outlook.com (20.176.254.20) by
 BYAPR12MB3431.namprd12.prod.outlook.com (20.178.196.149) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2241.13; Fri, 6 Sep 2019 10:01:15 +0000
Received: from BYAPR12MB2806.namprd12.prod.outlook.com
 ([fe80::c416:d75c:9f2f:9f11]) by BYAPR12MB2806.namprd12.prod.outlook.com
 ([fe80::c416:d75c:9f2f:9f11%7]) with mapi id 15.20.2241.014; Fri, 6 Sep 2019
 10:01:15 +0000
From: "Chen, Guchun" <Guchun.Chen@amd.com>
To: "Zhou1, Tao" <Tao.Zhou1@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>, "Zhang, Hawking" <Hawking.Zhang@amd.com>
Subject: RE: [PATCH 1/3] drm/amdgpu: move umc late init from gmc to umc block
Thread-Topic: [PATCH 1/3] drm/amdgpu: move umc late init from gmc to umc block
Thread-Index: AQHVZJGI2Apq2LLJKUuTM87RSuXNj6ceajBQ
Date: Fri, 6 Sep 2019 10:01:15 +0000
Message-ID: <BYAPR12MB28068DED16FFF7844B430D83F1BA0@BYAPR12MB2806.namprd12.prod.outlook.com>
References: <20190906090011.20271-1-tao.zhou1@amd.com>
In-Reply-To: <20190906090011.20271-1-tao.zhou1@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: d79c1761-a510-4cee-1ff9-08d732b127cd
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:BYAPR12MB3431; 
x-ms-traffictypediagnostic: BYAPR12MB3431:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <BYAPR12MB34315578C00CAEF189BFE211F1BA0@BYAPR12MB3431.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:6108;
x-forefront-prvs: 0152EBA40F
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(346002)(39860400002)(366004)(136003)(396003)(199004)(189003)(13464003)(7696005)(86362001)(6506007)(8676002)(6246003)(53546011)(11346002)(2501003)(71190400001)(71200400001)(81156014)(81166006)(25786009)(8936002)(33656002)(14454004)(6636002)(478600001)(76176011)(7736002)(6116002)(3846002)(74316002)(256004)(305945005)(14444005)(316002)(110136005)(229853002)(99286004)(26005)(76116006)(52536014)(64756008)(6436002)(66446008)(66556008)(66476007)(66946007)(186003)(66066001)(5660300002)(9686003)(55016002)(102836004)(476003)(446003)(486006)(2906002)(53936002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BYAPR12MB3431;
 H:BYAPR12MB2806.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: Thc984W41Q2FFjT4OGgPZ4kJPB2WUDu85GPemugFUc9CEpkSnq5uPAS1nMg5sWMnEVgCzbjgcthHg3O12+g7EP5Vb/6PfwssAO9BJKD+vJWR75ZZoFgvyRwfAflkhQMKYDrzeEbka5y8bimu4mHenkxmUiU4ffuTk+Om9RAXGAT4TWqDxxTj91RN4CQ7oX8RhE5AU78C7/rUvC4VkQRglG3x7ULCDgzsA1BTBOAC+wAJP+kJcagX3ho+j/yJlWqLQmnlyVqp45Lov6gV/wSdhI2lXi55Cz0B3z87fSo1WepD+owB8xaxybrujTCfK45TKOhxvK2ui2biAAup5KRWTCJJTnu4Xnl5v3eC43CHDYgFYmTwYuKD4zAU5U4eXqpAfrnbw3048LU4D/kStQP47RCx7jzsGTV6hx1NeX03WbM=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: d79c1761-a510-4cee-1ff9-08d732b127cd
X-MS-Exchange-CrossTenant-originalarrivaltime: 06 Sep 2019 10:01:15.2760 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: NF1R555ahBCIWoiKOkZxWxq2t+gtghYLPoy1sRW7xG38vWCNUw/v7J1bvic1qRMtLcHLYH84zrnuZ1YG9Xqmxw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BYAPR12MB3431
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=h/UlPePtf8Nguh4JyoyCe0YfUSnIJIU8OeaLUbfruZA=;
 b=IYfD+1R/fdB1h32nycbqOgemvq5yv+TbFTnK38ilG8oehGZo8Oflg/ExREC+P3oHnSGjlW0vViKyi8J6qyHlIFGRy2/pUUx/OuAYh1QF/Npx4r/t8/LaiaBHJvXQ1IOft+YJEti2xZnG+kvMOWCbbrj99fmp+1nK8PzB7FzmKeU=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Guchun.Chen@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

CgotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQpGcm9tOiBaaG91MSwgVGFvIDxUYW8uWmhvdTFA
YW1kLmNvbT4gClNlbnQ6IEZyaWRheSwgU2VwdGVtYmVyIDYsIDIwMTkgNTowMSBQTQpUbzogYW1k
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmc7IFpoYW5nLCBIYXdraW5nIDxIYXdraW5nLlpoYW5n
QGFtZC5jb20+OyBDaGVuLCBHdWNodW4gPEd1Y2h1bi5DaGVuQGFtZC5jb20+CkNjOiBaaG91MSwg
VGFvIDxUYW8uWmhvdTFAYW1kLmNvbT4KU3ViamVjdDogW1BBVENIIDEvM10gZHJtL2FtZGdwdTog
bW92ZSB1bWMgbGF0ZSBpbml0IGZyb20gZ21jIHRvIHVtYyBibG9jawoKdW1jIGxhdGUgaW5pdCBp
cyB1bWMgc3BlY2lmaWMsIGl0J3MgbW9yZSBzdWl0YWJsZSB0byBiZSBwdXQgaW4gdW1jIGJsb2Nr
CgpTaWduZWQtb2ZmLWJ5OiBUYW8gWmhvdSA8dGFvLnpob3UxQGFtZC5jb20+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvTWFrZWZpbGUgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuYyB8IDQ4IC0tLS0tLS0tLS0tLS0tLS0gIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuaCB8ICAyIC0gIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV91bWMuYyB8IDczICsrKysrKysrKysrKysrKysrKysrKysrKysgIGRy
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91bWMuaCB8ICAyICsKIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgICB8ICA4ICsrLQogZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvdW1jX3Y2XzEuYyAgIHwgIDEgKwogNyBmaWxlcyBjaGFuZ2VkLCA4MiBpbnNlcnRp
b25zKCspLCA1NCBkZWxldGlvbnMoLSkgIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L01ha2VmaWxl
CmluZGV4IDg0NjE0YTcxYmI0ZC4uOTEzNjljODIzY2UyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9NYWtlZmlsZQpAQCAtNTUsNyArNTUsNyBAQCBhbWRncHUteSArPSBhbWRncHVfZGV2aWNlLm8g
YW1kZ3B1X2ttcy5vIFwKIAlhbWRncHVfdmZfZXJyb3IubyBhbWRncHVfc2NoZWQubyBhbWRncHVf
ZGVidWdmcy5vIGFtZGdwdV9pZHMubyBcCiAJYW1kZ3B1X2dtYy5vIGFtZGdwdV9tbWh1Yi5vIGFt
ZGdwdV94Z21pLm8gYW1kZ3B1X2NzYS5vIGFtZGdwdV9yYXMubyBhbWRncHVfdm1fY3B1Lm8gXAog
CWFtZGdwdV92bV9zZG1hLm8gYW1kZ3B1X3BtdS5vIGFtZGdwdV9kaXNjb3ZlcnkubyBhbWRncHVf
cmFzX2VlcHJvbS5vIGFtZGdwdV9uYmlvLm8gXAotCXNtdV92MTFfMF9pMmMubworCWFtZGdwdV91
bWMubyBzbXVfdjExXzBfaTJjLm8KIAogYW1kZ3B1LSQoQ09ORklHX1BFUkZfRVZFTlRTKSArPSBh
bWRncHVfcG11Lm8KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2dtYy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5jCmluZGV4
IDUxODkwYjFkODUyMi4uZGMwNDRlZWMxODhlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfZ21jLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2dtYy5jCkBAIC0zMDQsNTEgKzMwNCwzIEBAIGJvb2wgYW1kZ3B1X2dtY19maWx0ZXJf
ZmF1bHRzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBhZGRyLAogCWdtYy0+
ZmF1bHRfaGFzaFtoYXNoXS5pZHggPSBnbWMtPmxhc3RfZmF1bHQrKzsKIAlyZXR1cm4gZmFsc2U7
CiB9Ci0KLWludCBhbWRncHVfZ21jX3Jhc19sYXRlX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsCi0JCQkgICAgIHZvaWQgKnJhc19paF9pbmZvKQotewotCWludCByOwotCXN0cnVjdCBy
YXNfaWhfaWYgKmloX2luZm8gPSAoc3RydWN0IHJhc19paF9pZiAqKXJhc19paF9pbmZvOwotCXN0
cnVjdCByYXNfZnNfaWYgZnNfaW5mbyA9IHsKLQkJLnN5c2ZzX25hbWUgPSAidW1jX2Vycl9jb3Vu
dCIsCi0JCS5kZWJ1Z2ZzX25hbWUgPSAidW1jX2Vycl9pbmplY3QiLAotCX07Ci0KLQlpZiAoIWlo
X2luZm8pCi0JCXJldHVybiAtRUlOVkFMOwotCi0JaWYgKCFhZGV2LT5nbWMudW1jX3Jhc19pZikg
ewotCQlhZGV2LT5nbWMudW1jX3Jhc19pZiA9IGttYWxsb2Moc2l6ZW9mKHN0cnVjdCByYXNfY29t
bW9uX2lmKSwgR0ZQX0tFUk5FTCk7Ci0JCWlmICghYWRldi0+Z21jLnVtY19yYXNfaWYpCi0JCQly
ZXR1cm4gLUVOT01FTTsKLQkJYWRldi0+Z21jLnVtY19yYXNfaWYtPmJsb2NrID0gQU1ER1BVX1JB
U19CTE9DS19fVU1DOwotCQlhZGV2LT5nbWMudW1jX3Jhc19pZi0+dHlwZSA9IEFNREdQVV9SQVNf
RVJST1JfX01VTFRJX1VOQ09SUkVDVEFCTEU7Ci0JCWFkZXYtPmdtYy51bWNfcmFzX2lmLT5zdWJf
YmxvY2tfaW5kZXggPSAwOwotCQlzdHJjcHkoYWRldi0+Z21jLnVtY19yYXNfaWYtPm5hbWUsICJ1
bWMiKTsKLQl9Ci0JaWhfaW5mby0+aGVhZCA9IGZzX2luZm8uaGVhZCA9ICphZGV2LT5nbWMudW1j
X3Jhc19pZjsKLQotCXIgPSBhbWRncHVfcmFzX2xhdGVfaW5pdChhZGV2LCBhZGV2LT5nbWMudW1j
X3Jhc19pZiwKLQkJCQkgJmZzX2luZm8sIGloX2luZm8pOwotCWlmIChyKQotCQlnb3RvIGZyZWU7
Ci0KLQlpZiAoYW1kZ3B1X3Jhc19pc19zdXBwb3J0ZWQoYWRldiwgYWRldi0+Z21jLnVtY19yYXNf
aWYtPmJsb2NrKSkgewotCQlyID0gYW1kZ3B1X2lycV9nZXQoYWRldiwgJmFkZXYtPmdtYy5lY2Nf
aXJxLCAwKTsKLQkJaWYgKHIpCi0JCQlnb3RvIGxhdGVfZmluaTsKLQl9IGVsc2UgewotCQlyID0g
MDsKLQkJZ290byBmcmVlOwotCX0KLQotCXJldHVybiAwOwotCi1sYXRlX2Zpbmk6Ci0JYW1kZ3B1
X3Jhc19sYXRlX2ZpbmkoYWRldiwgYWRldi0+Z21jLnVtY19yYXNfaWYsIGloX2luZm8pOwotZnJl
ZToKLQlrZnJlZShhZGV2LT5nbWMudW1jX3Jhc19pZik7Ci0JYWRldi0+Z21jLnVtY19yYXNfaWYg
PSBOVUxMOwotCXJldHVybiByOwotfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2dtYy5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dt
Yy5oCmluZGV4IDMzMWNlNTBhM2E5ZS4uYjZlMWQ5OGVmMDFlIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2dtYy5oCkBAIC0yMzAsNyArMjMwLDUgQEAgdm9pZCBhbWRncHVfZ21j
X2FncF9sb2NhdGlvbihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAkJCSAgICAgc3RydWN0
IGFtZGdwdV9nbWMgKm1jKTsKIGJvb2wgYW1kZ3B1X2dtY19maWx0ZXJfZmF1bHRzKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBhZGRyLAogCQkJICAgICAgdWludDE2X3QgcGFz
aWQsIHVpbnQ2NF90IHRpbWVzdGFtcCk7IC1pbnQgYW1kZ3B1X2dtY19yYXNfbGF0ZV9pbml0KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAotCQkJICAgICB2b2lkICppaF9pbmZvKTsKIAogI2Vu
ZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmMKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5jOGRlMTI3MDk3YWIKLS0tIC9kZXYvbnVsbAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmMKQEAgLTAsMCArMSw3MyBA
QAorLyoKKyAqIENvcHlyaWdodCAyMDE5IEFkdmFuY2VkIE1pY3JvIERldmljZXMsIEluYy4KKyAq
CisgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55
IHBlcnNvbiAKK29idGFpbmluZyBhCisgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29j
aWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIAorIlNvZnR3YXJlIiksCisgKiB0byBkZWFs
IGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCAK
K2xpbWl0YXRpb24KKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBw
dWJsaXNoLCBkaXN0cmlidXRlLCAKK3N1YmxpY2Vuc2UsCisgKiBhbmQvb3Igc2VsbCBjb3BpZXMg
b2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSAKK3RoZQorICog
U29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcg
Y29uZGl0aW9uczoKKyAqCisgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBw
ZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSAKK2luY2x1ZGVkIGluCisgKiBhbGwgY29waWVzIG9y
IHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KKyAqCisgKiBUSEUgU09GVFdB
UkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgCitF
WFBSRVNTIE9SCisgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBX
QVJSQU5USUVTIE9GIAorTUVSQ0hBTlRBQklMSVRZLAorICogRklUTkVTUyBGT1IgQSBQQVJUSUNV
TEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIAorU0hBTEwKKyAq
IFRIRSBDT1BZUklHSFQgSE9MREVSKFMpIE9SIEFVVEhPUihTKSBCRSBMSUFCTEUgRk9SIEFOWSBD
TEFJTSwgCitEQU1BR0VTIE9SCisgKiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNU
SU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIAorT1RIRVJXSVNFLAorICogQVJJU0lORyBGUk9NLCBP
VVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIAorT1IK
KyAqIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKi8KKworI2luY2x1ZGUg
ImFtZGdwdS5oIgorI2luY2x1ZGUgImFtZGdwdV9yYXMuaCIKKworaW50IGFtZGdwdV91bWNfcmFz
X2xhdGVfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdm9pZCAKKypyYXNfaWhfaW5m
bykgeworCWludCByOworCXN0cnVjdCByYXNfaWhfaWYgKmloX2luZm8gPSAoc3RydWN0IHJhc19p
aF9pZiAqKXJhc19paF9pbmZvOworCXN0cnVjdCByYXNfZnNfaWYgZnNfaW5mbyA9IHsKKwkJLnN5
c2ZzX25hbWUgPSAidW1jX2Vycl9jb3VudCIsCisJCS5kZWJ1Z2ZzX25hbWUgPSAidW1jX2Vycl9p
bmplY3QiLAorCX07CisKKwlpZiAoIWloX2luZm8pCisJCXJldHVybiAtRUlOVkFMOworCisJaWYg
KCFhZGV2LT5nbWMudW1jX3Jhc19pZikgeworCQlhZGV2LT5nbWMudW1jX3Jhc19pZiA9CisJCQlr
bWFsbG9jKHNpemVvZihzdHJ1Y3QgcmFzX2NvbW1vbl9pZiksIEdGUF9LRVJORUwpOworCQlpZiAo
IWFkZXYtPmdtYy51bWNfcmFzX2lmKQorCQkJcmV0dXJuIC1FTk9NRU07CisJCWFkZXYtPmdtYy51
bWNfcmFzX2lmLT5ibG9jayA9IEFNREdQVV9SQVNfQkxPQ0tfX1VNQzsKKwkJYWRldi0+Z21jLnVt
Y19yYXNfaWYtPnR5cGUgPSBBTURHUFVfUkFTX0VSUk9SX19NVUxUSV9VTkNPUlJFQ1RBQkxFOwor
CQlhZGV2LT5nbWMudW1jX3Jhc19pZi0+c3ViX2Jsb2NrX2luZGV4ID0gMDsKKwkJc3RyY3B5KGFk
ZXYtPmdtYy51bWNfcmFzX2lmLT5uYW1lLCAidW1jIik7CisJfQorCWloX2luZm8tPmhlYWQgPSBm
c19pbmZvLmhlYWQgPSAqYWRldi0+Z21jLnVtY19yYXNfaWY7CltHdWNodW5dV2UgaGF2ZSBvbmUg
YW1kZ3B1X3VtYyBtZW1iZXIgaW4gYWRldiBzdHJ1Y3R1cmUsIHNvIGlzIGl0IHJlYXNvbmFibGUg
dG8gbW92ZSB1bWNfcmFzX2lmIGZyb20gZ21jIHRvIHRoaXMgdW1jIHNwZWNpZmljIHN0cnVjdHVy
ZT8KCisJciA9IGFtZGdwdV9yYXNfbGF0ZV9pbml0KGFkZXYsIGFkZXYtPmdtYy51bWNfcmFzX2lm
LAorCQkJCSAmZnNfaW5mbywgaWhfaW5mbyk7CisJaWYgKHIpCisJCWdvdG8gZnJlZTsKKworCWlm
IChhbWRncHVfcmFzX2lzX3N1cHBvcnRlZChhZGV2LCBhZGV2LT5nbWMudW1jX3Jhc19pZi0+Ymxv
Y2spKSB7CisJCXIgPSBhbWRncHVfaXJxX2dldChhZGV2LCAmYWRldi0+Z21jLmVjY19pcnEsIDAp
OworCQlpZiAocikKKwkJCWdvdG8gbGF0ZV9maW5pOworCX0gZWxzZSB7CisJCXIgPSAwOworCQln
b3RvIGZyZWU7CisJfQorCisJcmV0dXJuIDA7CisKK2xhdGVfZmluaToKKwlhbWRncHVfcmFzX2xh
dGVfZmluaShhZGV2LCBhZGV2LT5nbWMudW1jX3Jhc19pZiwgaWhfaW5mbyk7CitmcmVlOgorCWtm
cmVlKGFkZXYtPmdtYy51bWNfcmFzX2lmKTsKKwlhZGV2LT5nbWMudW1jX3Jhc19pZiA9IE5VTEw7
CisJcmV0dXJuIHI7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdW1jLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdW1jLmgKaW5k
ZXggOTc1YWZhMDRkZjA5Li42ZjIyYzk3MDQ1NTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV91bWMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfdW1jLmgKQEAgLTU1LDYgKzU1LDcgQEAKIAogc3RydWN0IGFtZGdwdV91bWNfZnVu
Y3MgewogCXZvaWQgKCpyYXNfaW5pdCkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOworCWlu
dCAoKnJhc19sYXRlX2luaXQpKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB2b2lkICpyYXNf
aWhfaW5mbyk7CiAJdm9pZCAoKnF1ZXJ5X3Jhc19lcnJvcl9jb3VudCkoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsCiAJCQkJCXZvaWQgKnJhc19lcnJvcl9zdGF0dXMpOwogCXZvaWQgKCpxdWVy
eV9yYXNfZXJyb3JfYWRkcmVzcykoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIEBAIC03OSw0
ICs4MCw1IEBAIHN0cnVjdCBhbWRncHVfdW1jIHsKIAljb25zdCBzdHJ1Y3QgYW1kZ3B1X3VtY19m
dW5jcyAqZnVuY3M7CiB9OwogCitpbnQgYW1kZ3B1X3VtY19yYXNfbGF0ZV9pbml0KHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LCB2b2lkIAorKnJhc19paF9pbmZvKTsKICNlbmRpZgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKaW5kZXggYmViNmM4NGFiOWUyLi4zZGI0MDM0MmI2
YzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYwpAQCAtNzkzLDkgKzc5Mywx
MSBAQCBzdGF0aWMgaW50IGdtY192OV8wX2VjY19sYXRlX2luaXQodm9pZCAqaGFuZGxlKQogCQku
Y2IgPSBnbWNfdjlfMF9wcm9jZXNzX3Jhc19kYXRhX2NiLAogCX07CiAKLQlyID0gYW1kZ3B1X2dt
Y19yYXNfbGF0ZV9pbml0KGFkZXYsICZ1bWNfaWhfaW5mbyk7Ci0JaWYgKHIpCi0JCXJldHVybiBy
OworCWlmIChhZGV2LT51bWMuZnVuY3MgJiYgYWRldi0+dW1jLmZ1bmNzLT5yYXNfbGF0ZV9pbml0
KSB7CisJCXIgPSBhZGV2LT51bWMuZnVuY3MtPnJhc19sYXRlX2luaXQoYWRldiwgJnVtY19paF9p
bmZvKTsKKwkJaWYgKHIpCisJCQlyZXR1cm4gcjsKKwl9CiAKIAlpZiAoYWRldi0+bW1odWJfZnVu
Y3MgJiYgYWRldi0+bW1odWJfZnVuY3MtPnJhc19sYXRlX2luaXQpIHsKIAkJciA9IGFkZXYtPm1t
aHViX2Z1bmNzLT5yYXNfbGF0ZV9pbml0KGFkZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3Vt
Y192Nl8xLmMKaW5kZXggMDllMzE2YTIyZjFhLi40Y2RiNWMwNGNkMTcgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3VtY192Nl8xLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvdW1jX3Y2XzEuYwpAQCAtMjczLDYgKzI3Myw3IEBAIHN0YXRpYyB2b2lkIHVt
Y192Nl8xX3Jhc19pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCiBjb25zdCBzdHJ1
Y3QgYW1kZ3B1X3VtY19mdW5jcyB1bWNfdjZfMV9mdW5jcyA9IHsKIAkucmFzX2luaXQgPSB1bWNf
djZfMV9yYXNfaW5pdCwKKwkucmFzX2xhdGVfaW5pdCA9IGFtZGdwdV91bWNfcmFzX2xhdGVfaW5p
dCwKIAkucXVlcnlfcmFzX2Vycm9yX2NvdW50ID0gdW1jX3Y2XzFfcXVlcnlfcmFzX2Vycm9yX2Nv
dW50LAogCS5xdWVyeV9yYXNfZXJyb3JfYWRkcmVzcyA9IHVtY192Nl8xX3F1ZXJ5X3Jhc19lcnJv
cl9hZGRyZXNzLAogCS5lbmFibGVfdW1jX2luZGV4X21vZGUgPSB1bWNfdjZfMV9lbmFibGVfdW1j
X2luZGV4X21vZGUsCi0tCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9h
bWQtZ2Z4
