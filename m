Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 13C947BC86
	for <lists+amd-gfx@lfdr.de>; Wed, 31 Jul 2019 11:04:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9868989C89;
	Wed, 31 Jul 2019 09:04:19 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM05-DM3-obe.outbound.protection.outlook.com
 (mail-eopbgr730055.outbound.protection.outlook.com [40.107.73.55])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6B3A989BA5
 for <amd-gfx@lists.freedesktop.org>; Wed, 31 Jul 2019 09:04:17 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=QtJYdhcRq4AsK8a4Ev0LrdGLw/wm/72J1ghD70L9+QakLk0zWBoQR4Ez5ahaMgXUC1sBN5fhHSFoxW0epJ7JSPnLzoTlVe0CXxks0qzJ7WgU2UtQatCAIwxjo8oJIgcTpSq+X1uDvPlHbSPqHmh3mgBhQteQzAlhP1li1eK1pGq6o+mVFg3MMahSbaLy1IAtPug+6pDZIwtWsAe0R6K4crAFmcO3McfAJ5f0sxJ/tuTEq2L5A7LAZW5PmpJHOf/voSttygTRUdkPwJtkCkxVPSNcJ2/uANXjqD3iGpCO/T4lElSS6ScP+0x5yqZ1AFTjrVN0lFDiiCvYof5Z6Min9Q==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=vz2Puwxgx7/cYLgnfnLFw6N2EupZlZpLpaiJ8cr0US4=;
 b=eayO9WR3mS6hCr+MPvDruZSZ8SLGtscyU/+YW86nwf3YCC6w3knPQfVvKVSlTMloIVVeddeys2HlWtW4mlgz5SoTtHtJRiolCAwnGltWXOvTb5VrlVAx9DYd+9yZiPYJDP6SfKh+1NRYtaHtuoGvfUxzfO1FUE5svK2PO94C6jP2D0273fDqmwlnRjaPRS6mjBIUOx4oXdQy6s72Z126SCOOhFXBxgVWSOKxB+7+HnbJflUhgitiYu2QUnPTVFUiavDoOPLzjdaU5BvEOlQz2x9BaHsfE4t7Q1fVtLbeiuWLAXi0jToAAM/xzE4cOyETJC4GTO+Pmw1T9bzBS+ZLrQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=amd.com;dmarc=pass action=none header.from=amd.com;dkim=pass
 header.d=amd.com;arc=none
Received: from MN2PR12MB2975.namprd12.prod.outlook.com (20.178.243.142) by
 MN2PR12MB3757.namprd12.prod.outlook.com (10.255.236.150) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2094.16; Wed, 31 Jul 2019 09:04:15 +0000
Received: from MN2PR12MB2975.namprd12.prod.outlook.com
 ([fe80::78b4:3df5:c92a:e02a]) by MN2PR12MB2975.namprd12.prod.outlook.com
 ([fe80::78b4:3df5:c92a:e02a%7]) with mapi id 15.20.2136.010; Wed, 31 Jul 2019
 09:04:15 +0000
From: "Deng, Emily" <Emily.Deng@amd.com>
To: "Liu, Monk" <Monk.Liu@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH] drm/amdgpu: fix double ucode load by PSP(v3)
Thread-Topic: [PATCH] drm/amdgpu: fix double ucode load by PSP(v3)
Thread-Index: AQHVR32WLR0q9XiRuUS7C59g8z0LNabkbqSg
Date: Wed, 31 Jul 2019 09:04:15 +0000
Message-ID: <MN2PR12MB2975165B4F9C506815EDAC798FDF0@MN2PR12MB2975.namprd12.prod.outlook.com>
References: <1564563264-30902-1-git-send-email-Monk.Liu@amd.com>
In-Reply-To: <1564563264-30902-1-git-send-email-Monk.Liu@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: e771a5fe-4fe7-4dc2-9445-08d715961030
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:MN2PR12MB3757; 
x-ms-traffictypediagnostic: MN2PR12MB3757:
x-ms-exchange-purlcount: 1
x-microsoft-antispam-prvs: <MN2PR12MB3757B90448E7BE7EDF8247028FDF0@MN2PR12MB3757.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:989;
x-forefront-prvs: 011579F31F
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(366004)(376002)(396003)(136003)(346002)(189003)(199004)(13464003)(8676002)(5660300002)(2906002)(3846002)(66476007)(14444005)(6116002)(71200400001)(66946007)(305945005)(14454004)(256004)(486006)(6506007)(66556008)(76176011)(66446008)(76116006)(316002)(86362001)(64756008)(7696005)(11346002)(55016002)(478600001)(229853002)(4326008)(53936002)(81166006)(6306002)(66066001)(2501003)(110136005)(446003)(81156014)(7736002)(476003)(186003)(6436002)(9686003)(68736007)(102836004)(52536014)(33656002)(74316002)(26005)(8936002)(99286004)(25786009)(6246003)(71190400001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3757;
 H:MN2PR12MB2975.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: 3hFrUms19ezzgVwiHpKeDI/hD5HABUWnr3cv7BBEVhqqP0Fji/f1tgRkwE4CkgcdIWuhY04SO08ftflpHx9TV4HLlsNkkXEVrGSjZ6hIGJW5TzTWiSrleu4X6YAk4pd02fW/2EZ5DIJgpJcCtA91r0WOpcM6qWDtr4U1DkIzxHZn57vyqICBUro+2J0+1y8jx3ntKhpz6h2gmgU29gs7jnPg8ZUNstPqLfIfBDncX523lfxSska6VlG08kUbNA4q7R8ZwzK61JvWwG9vOWAkWqmsSUgviOvVCa1bjisjEas9lXigZaWU4pDRjbCOtrfXO3epeX7WKr/kiukh7BdKKSlA0W62xOXeutI6FSSX7cGIQufQdLRXexOCjHIwNIgzuZEoUFwhV1bQvMr+27ZjwbeTHFWkJy2yaJBT3gOMJtU=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: e771a5fe-4fe7-4dc2-9445-08d715961030
X-MS-Exchange-CrossTenant-originalarrivaltime: 31 Jul 2019 09:04:15.6051 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: jqdeng@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3757
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=vz2Puwxgx7/cYLgnfnLFw6N2EupZlZpLpaiJ8cr0US4=;
 b=Djs3rcW+zMv/mY0MT/1r4MJClCfPM9uS0b9ogn2y+5+Azr9X0CKKuU9kNU61TyZ6Cj15olVz/qQsE4onSzrSKABnVvMQ1a+i1xJQ2Uiudqc2AH2gx1sy+Ksz5EP6XYX6FM6ufvU/2CTzK2Eg7RJNxrkjj1F6d1sMTAtOBZOGbBo=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Emily.Deng@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Liu, Monk" <Monk.Liu@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QWxsIGxvb2tzIGdvb2QgdG8gbWUuIFJldmlld2VkLWJ5OiBFbWlseSBEZW5nIDxFbWlseS5EZW5n
QGFtZC5jb20+Lg0KDQo+LS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj5Gcm9tOiBhbWQtZ2Z4
IDxhbWQtZ2Z4LWJvdW5jZXNAbGlzdHMuZnJlZWRlc2t0b3Aub3JnPiBPbiBCZWhhbGYgT2YgTW9u
aw0KPkxpdQ0KPlNlbnQ6IFdlZG5lc2RheSwgSnVseSAzMSwgMjAxOSA0OjU0IFBNDQo+VG86IGFt
ZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQo+Q2M6IExpdSwgTW9uayA8TW9uay5MaXVAYW1k
LmNvbT4NCj5TdWJqZWN0OiBbUEFUQ0hdIGRybS9hbWRncHU6IGZpeCBkb3VibGUgdWNvZGUgbG9h
ZCBieSBQU1AodjMpDQo+DQo+cHJldmlvdXNseSB0aGUgdWNvZGUgbG9hZGluZyBvZiBQU1Agd2Fz
IHJlcHJlYXRlZCwgb25lIGV4ZWN1dGVkIGluDQo+cGhhc2VfMSBpbml0L3JlLWluaXQvcmVzdW1l
IGFuZCB0aGUgb3RoZXIgaW4gZndfbG9hZGluZyByb3V0aW5lDQo+DQo+QXZvaWQgdGhpcyBkb3Vi
bGUgbG9hZGluZyBieSBjbGVhcmluZyBpcF9ibG9ja3Muc3RhdHVzLmh3IGluIHN1c3BlbmQgb3Ig
cmVzZXQNCj5wcmlvciB0byB0aGUgRlcgbG9hZGluZyBhbmQgYW55IGJsb2NrJ3MgaHdfaW5pdC9y
ZXN1bWUNCj4NCj52MjoNCj5zdGlsbCBkbyB0aGUgc211IGZ3IGxvYWRpbmcgc2luY2UgaXQgaXMg
bmVlZGVkIGJ5IGJhcmUtbWV0YWwNCj4NCj52MzoNCj5kcm9wIHRoZSBjaGFuZ2UgaW4gcmVpbml0
X2Vhcmx5X3NyaW92LCBqdXN0IGNsZWFyIGFsbCBibG9jaydzIHN0YXR1cy5odyBpbiB0aGUNCj5o
ZWFkIHBsYWNlIGFuZCBzZXQgdGhlIHN0YXR1cy5odyBhZnRlciBod19pbml0IGRvbmUgaXMgZW5v
dWdoDQo+DQo+U2lnbmVkLW9mZi1ieTogTW9uayBMaXUgPE1vbmsuTGl1QGFtZC5jb20+DQo+LS0t
DQo+IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYyB8IDU5DQo+Kysr
KysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tDQo+IDEgZmlsZSBjaGFuZ2VkLCAzOCBpbnNlcnRp
b25zKCspLCAyMSBkZWxldGlvbnMoLSkNCj4NCj5kaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jDQo+Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZGV2aWNlLmMNCj5pbmRleCA2Y2IzNThjLi4zMDQzNmJhIDEwMDY0NA0KPi0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KPkBAIC0xNjczLDI4ICsxNjcz
LDM0IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2RldmljZV9md19sb2FkaW5nKHN0cnVjdA0KPmFtZGdw
dV9kZXZpY2UgKmFkZXYpDQo+DQo+IAlpZiAoYWRldi0+YXNpY190eXBlID49IENISVBfVkVHQTEw
KSB7DQo+IAkJZm9yIChpID0gMDsgaSA8IGFkZXYtPm51bV9pcF9ibG9ja3M7IGkrKykgew0KPi0J
CQlpZiAoYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPnR5cGUgPT0NCj5BTURfSVBfQkxPQ0tf
VFlQRV9QU1ApIHsNCj4tCQkJCWlmIChhZGV2LT5pbl9ncHVfcmVzZXQgfHwgYWRldi0+aW5fc3Vz
cGVuZCkgew0KPi0JCQkJCWlmIChhbWRncHVfc3Jpb3ZfdmYoYWRldikgJiYgYWRldi0NCj4+aW5f
Z3B1X3Jlc2V0KQ0KPi0JCQkJCQlicmVhazsgLyogc3Jpb3YgZ3B1IHJlc2V0LCBwc3ANCj5uZWVk
IHRvIGRvIGh3X2luaXQgYmVmb3JlIElIIGJlY2F1c2Ugb2YgaHcgbGltaXQgKi8NCj4tCQkJCQly
ID0gYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLQ0KPj5yZXN1bWUoYWRldik7DQo+
LQkJCQkJaWYgKHIpIHsNCj4tCQkJCQkJRFJNX0VSUk9SKCJyZXN1bWUgb2YgSVANCj5ibG9jayA8
JXM+IGZhaWxlZCAlZFxuIiwNCj4rCQkJaWYgKGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT50
eXBlICE9DQo+QU1EX0lQX0JMT0NLX1RZUEVfUFNQKQ0KPisJCQkJY29udGludWU7DQo+Kw0KPisJ
CQkvKiBubyBuZWVkIHRvIGRvIHRoZSBmdyBsb2FkaW5nIGFnYWluIGlmIGFscmVhZHkNCj5kb25l
Ki8NCj4rCQkJaWYgKGFkZXYtPmlwX2Jsb2Nrc1tpXS5zdGF0dXMuaHcgPT0gdHJ1ZSkNCj4rCQkJ
CWJyZWFrOw0KPisNCj4rCQkJaWYgKGFkZXYtPmluX2dwdV9yZXNldCB8fCBhZGV2LT5pbl9zdXNw
ZW5kKSB7DQo+KwkJCQlyID0gYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLQ0KPj5y
ZXN1bWUoYWRldik7DQo+KwkJCQlpZiAocikgew0KPisJCQkJCURSTV9FUlJPUigicmVzdW1lIG9m
IElQIGJsb2NrIDwlcz4NCj5mYWlsZWQgJWRcbiIsDQo+IAkJCQkJCQkgIGFkZXYtDQo+PmlwX2Js
b2Nrc1tpXS52ZXJzaW9uLT5mdW5jcy0+bmFtZSwgcik7DQo+LQkJCQkJCXJldHVybiByOw0KPi0J
CQkJCX0NCj4tCQkJCX0gZWxzZSB7DQo+LQkJCQkJciA9IGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJz
aW9uLT5mdW5jcy0NCj4+aHdfaW5pdChhZGV2KTsNCj4tCQkJCQlpZiAocikgew0KPi0JCQkJCQlE
Uk1fRVJST1IoImh3X2luaXQgb2YgSVANCj5ibG9jayA8JXM+IGZhaWxlZCAlZFxuIiwNCj4tCQkJ
CQkJICBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0NCj4+ZnVuY3MtPm5hbWUsIHIpOw0KPi0J
CQkJCQlyZXR1cm4gcjsNCj4tCQkJCQl9DQo+KwkJCQkJcmV0dXJuIHI7DQo+KwkJCQl9DQo+KwkJ
CX0gZWxzZSB7DQo+KwkJCQlyID0gYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLQ0K
Pj5od19pbml0KGFkZXYpOw0KPisJCQkJaWYgKHIpIHsNCj4rCQkJCQlEUk1fRVJST1IoImh3X2lu
aXQgb2YgSVAgYmxvY2sgPCVzPg0KPmZhaWxlZCAlZFxuIiwNCj4rCQkJCQkJCSAgYWRldi0NCj4+
aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLT5uYW1lLCByKTsNCj4rCQkJCQlyZXR1cm4gcjsN
Cj4gCQkJCX0NCj4tCQkJCWFkZXYtPmlwX2Jsb2Nrc1tpXS5zdGF0dXMuaHcgPSB0cnVlOw0KPiAJ
CQl9DQo+Kw0KPisJCQlhZGV2LT5pcF9ibG9ja3NbaV0uc3RhdHVzLmh3ID0gdHJ1ZTsNCj4rCQkJ
YnJlYWs7DQo+IAkJfQ0KPiAJfQ0KPisNCj4gCXIgPSBhbWRncHVfcG1fbG9hZF9zbXVfZmlybXdh
cmUoYWRldiwgJnNtdV92ZXJzaW9uKTsNCj4NCj4gCXJldHVybiByOw0KPkBAIC0yMTM2LDcgKzIx
NDIsOSBAQCBzdGF0aWMgaW50DQo+YW1kZ3B1X2RldmljZV9pcF9zdXNwZW5kX3BoYXNlMShzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4gCQkJaWYgKHIpIHsNCj4gCQkJCURSTV9FUlJPUigi
c3VzcGVuZCBvZiBJUCBibG9jayA8JXM+DQo+ZmFpbGVkICVkXG4iLA0KPiAJCQkJCSAgYWRldi0+
aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLQ0KPj5uYW1lLCByKTsNCj4rCQkJCXJldHVybiBy
Ow0KPiAJCQl9DQo+KwkJCWFkZXYtPmlwX2Jsb2Nrc1tpXS5zdGF0dXMuaHcgPSBmYWxzZTsNCj4g
CQl9DQo+IAl9DQo+DQo+QEAgLTIxNzYsMTQgKzIxODQsMTYgQEAgc3RhdGljIGludA0KPmFtZGdw
dV9kZXZpY2VfaXBfc3VzcGVuZF9waGFzZTIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+
IAkJCWlmIChpc19zdXBwb3J0X3N3X3NtdShhZGV2KSkgew0KPiAJCQkJLyogdG9kbyAqLw0KPiAJ
CQl9IGVsc2UgaWYgKGFkZXYtPnBvd2VycGxheS5wcF9mdW5jcyAmJg0KPi0JCQkJICAgYWRldi0+
cG93ZXJwbGF5LnBwX2Z1bmNzLT5zZXRfbXAxX3N0YXRlKQ0KPnsNCj4rCQkJCQkgICBhZGV2LT5w
b3dlcnBsYXkucHBfZnVuY3MtDQo+PnNldF9tcDFfc3RhdGUpIHsNCj4gCQkJCXIgPSBhZGV2LT5w
b3dlcnBsYXkucHBfZnVuY3MtDQo+PnNldF9tcDFfc3RhdGUoDQo+IAkJCQkJYWRldi0+cG93ZXJw
bGF5LnBwX2hhbmRsZSwNCj4gCQkJCQlhZGV2LT5tcDFfc3RhdGUpOw0KPiAJCQkJaWYgKHIpIHsN
Cj4gCQkJCQlEUk1fRVJST1IoIlNNQyBmYWlsZWQgdG8gc2V0IG1wMQ0KPnN0YXRlICVkLCAlZFxu
IiwNCj4gCQkJCQkJICBhZGV2LT5tcDFfc3RhdGUsIHIpOw0KPisJCQkJCXJldHVybiByOw0KPiAJ
CQkJfQ0KPisJCQkJYWRldi0+aXBfYmxvY2tzW2ldLnN0YXR1cy5odyA9IGZhbHNlOw0KPiAJCQl9
DQo+IAkJfQ0KPiAJfQ0KPkBAIC0yMjM4LDYgKzIyNDgsNyBAQCBzdGF0aWMgaW50DQo+YW1kZ3B1
X2RldmljZV9pcF9yZWluaXRfZWFybHlfc3Jpb3Yoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
DQo+IAkJZm9yIChqID0gMDsgaiA8IGFkZXYtPm51bV9pcF9ibG9ja3M7IGorKykgew0KPiAJCQli
bG9jayA9ICZhZGV2LT5pcF9ibG9ja3Nbal07DQo+DQo+KwkJCWJsb2NrLT5zdGF0dXMuaHcgPSBm
YWxzZTsNCj4gCQkJaWYgKGJsb2NrLT52ZXJzaW9uLT50eXBlICE9IGlwX29yZGVyW2ldIHx8DQo+
IAkJCQkhYmxvY2stPnN0YXR1cy52YWxpZCkNCj4gCQkJCWNvbnRpbnVlOw0KPkBAIC0yMjQ2LDYg
KzIyNTcsNyBAQCBzdGF0aWMgaW50DQo+YW1kZ3B1X2RldmljZV9pcF9yZWluaXRfZWFybHlfc3Jp
b3Yoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+IAkJCURSTV9JTkZPKCJSRS1JTklULWVh
cmx5OiAlcyAlc1xuIiwgYmxvY2stPnZlcnNpb24tDQo+PmZ1bmNzLT5uYW1lLCByPyJmYWlsZWQi
OiJzdWNjZWVkZWQiKTsNCj4gCQkJaWYgKHIpDQo+IAkJCQlyZXR1cm4gcjsNCj4rCQkJYmxvY2st
PnN0YXR1cy5odyA9IHRydWU7DQo+IAkJfQ0KPiAJfQ0KPg0KPkBAIC0yMjczLDEzICsyMjg1LDE1
IEBAIHN0YXRpYyBpbnQNCj5hbWRncHVfZGV2aWNlX2lwX3JlaW5pdF9sYXRlX3NyaW92KHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2KQ0KPiAJCQlibG9jayA9ICZhZGV2LT5pcF9ibG9ja3Nbal07
DQo+DQo+IAkJCWlmIChibG9jay0+dmVyc2lvbi0+dHlwZSAhPSBpcF9vcmRlcltpXSB8fA0KPi0J
CQkJIWJsb2NrLT5zdGF0dXMudmFsaWQpDQo+KwkJCQkhYmxvY2stPnN0YXR1cy52YWxpZCB8fA0K
PisJCQkJYmxvY2stPnN0YXR1cy5odykNCj4gCQkJCWNvbnRpbnVlOw0KPg0KPiAJCQlyID0gYmxv
Y2stPnZlcnNpb24tPmZ1bmNzLT5od19pbml0KGFkZXYpOw0KPiAJCQlEUk1fSU5GTygiUkUtSU5J
VC1sYXRlOiAlcyAlc1xuIiwgYmxvY2stPnZlcnNpb24tDQo+PmZ1bmNzLT5uYW1lLCByPyJmYWls
ZWQiOiJzdWNjZWVkZWQiKTsNCj4gCQkJaWYgKHIpDQo+IAkJCQlyZXR1cm4gcjsNCj4rCQkJYmxv
Y2stPnN0YXR1cy5odyA9IHRydWU7DQo+IAkJfQ0KPiAJfQ0KPg0KPkBAIC0yMzAzLDE3ICsyMzE3
LDE5IEBAIHN0YXRpYyBpbnQNCj5hbWRncHVfZGV2aWNlX2lwX3Jlc3VtZV9waGFzZTEoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+IAlpbnQgaSwgcjsNCj4NCj4gCWZvciAoaSA9IDA7IGkg
PCBhZGV2LT5udW1faXBfYmxvY2tzOyBpKyspIHsNCj4tCQlpZiAoIWFkZXYtPmlwX2Jsb2Nrc1tp
XS5zdGF0dXMudmFsaWQpDQo+KwkJaWYgKCFhZGV2LT5pcF9ibG9ja3NbaV0uc3RhdHVzLnZhbGlk
IHx8IGFkZXYtDQo+PmlwX2Jsb2Nrc1tpXS5zdGF0dXMuaHcpDQo+IAkJCWNvbnRpbnVlOw0KPiAJ
CWlmIChhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+dHlwZSA9PQ0KPkFNRF9JUF9CTE9DS19U
WVBFX0NPTU1PTiB8fA0KPiAJCSAgICBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+dHlwZSA9
PQ0KPkFNRF9JUF9CTE9DS19UWVBFX0dNQyB8fA0KPiAJCSAgICBhZGV2LT5pcF9ibG9ja3NbaV0u
dmVyc2lvbi0+dHlwZSA9PQ0KPkFNRF9JUF9CTE9DS19UWVBFX0lIKSB7DQo+Kw0KPiAJCQlyID0g
YWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLT5yZXN1bWUoYWRldik7DQo+IAkJCWlm
IChyKSB7DQo+IAkJCQlEUk1fRVJST1IoInJlc3VtZSBvZiBJUCBibG9jayA8JXM+DQo+ZmFpbGVk
ICVkXG4iLA0KPiAJCQkJCSAgYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPmZ1bmNzLQ0KPj5u
YW1lLCByKTsNCj4gCQkJCXJldHVybiByOw0KPiAJCQl9DQo+KwkJCWFkZXYtPmlwX2Jsb2Nrc1tp
XS5zdGF0dXMuaHcgPSB0cnVlOw0KPiAJCX0NCj4gCX0NCj4NCj5AQCAtMjMzOCw3ICsyMzU0LDcg
QEAgc3RhdGljIGludCBhbWRncHVfZGV2aWNlX2lwX3Jlc3VtZV9waGFzZTIoc3RydWN0DQo+YW1k
Z3B1X2RldmljZSAqYWRldikNCj4gCWludCBpLCByOw0KPg0KPiAJZm9yIChpID0gMDsgaSA8IGFk
ZXYtPm51bV9pcF9ibG9ja3M7IGkrKykgew0KPi0JCWlmICghYWRldi0+aXBfYmxvY2tzW2ldLnN0
YXR1cy52YWxpZCkNCj4rCQlpZiAoIWFkZXYtPmlwX2Jsb2Nrc1tpXS5zdGF0dXMudmFsaWQgfHwg
YWRldi0NCj4+aXBfYmxvY2tzW2ldLnN0YXR1cy5odykNCj4gCQkJY29udGludWU7DQo+IAkJaWYg
KGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT50eXBlID09DQo+QU1EX0lQX0JMT0NLX1RZUEVf
Q09NTU9OIHx8DQo+IAkJICAgIGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT50eXBlID09DQo+
QU1EX0lQX0JMT0NLX1RZUEVfR01DIHx8IEBAIC0yMzUxLDYgKzIzNjcsNyBAQCBzdGF0aWMgaW50
DQo+YW1kZ3B1X2RldmljZV9pcF9yZXN1bWVfcGhhc2UyKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KQ0KPiAJCQkJICBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+ZnVuY3MtPm5hbWUsIHIp
Ow0KPiAJCQlyZXR1cm4gcjsNCj4gCQl9DQo+KwkJYWRldi0+aXBfYmxvY2tzW2ldLnN0YXR1cy5o
dyA9IHRydWU7DQo+IAl9DQo+DQo+IAlyZXR1cm4gMDsNCj4tLQ0KPjIuNy40DQo+DQo+X19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCj5hbWQtZ2Z4IG1haWxp
bmcgbGlzdA0KPmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQo+aHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4DQpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
