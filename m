Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7225361E8A0
	for <lists+amd-gfx@lfdr.de>; Mon,  7 Nov 2022 03:36:12 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 79C9410E021;
	Mon,  7 Nov 2022 02:36:09 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM10-MW2-obe.outbound.protection.outlook.com
 (mail-mw2nam10on2071.outbound.protection.outlook.com [40.107.94.71])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0DC4B10E021
 for <amd-gfx@lists.freedesktop.org>; Mon,  7 Nov 2022 02:36:07 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Gai+iLLINX8CH6Thxku0ObTQDOCETQZRwxI+5g/5pi+Wb6V+o457SZ7T15ZEeGgofzFDdWygzkQK4tw7OwgvEAJf/1QizA7D5ahmTrlAMrk+BKTpmS7CrNRQPnKXy84K4kizvlMpTKYkVRSIPIaStnuyf4GWwpWCSRCdi2VxNQZm/SrLTeEBfNSJzMcnb5YffZ5cHwTTtFl5tM2/MKiSAh+DCZ5jouP5E+At4SEi1wAAtqeqJrieB5a6O++Ux98vdmB7OC15hGj16mOWcFEuz/MnuQ9H1lubsjUVgazt4EK3Ly7J1jECt8lTNGb/1xfJ9cdrAJlDEU9WpKwQ5fJBHQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=yIk+AL6+ek6URYj8XM2Exyc+dGzcxYLYupkPNnUFdmQ=;
 b=hEuYCzgt60MjMeyOOs3vBYR6nUJ9D+F+mGyAZU1ssUWQZxZ+GLPowEDV322gR8cYyKZ9x+w/+/hyhq2lTJUpJPQ2Aq7sMXrUmuGcIpmOK8TRB/uWSDLwN85uRqNawpzPan4EtPSLhelx1CQavHPeeBjMWIpP7Uy9jo3VXePdFB1SVnaCDX40NbgJWpCt4wPP5j50djKTwP4qQuoeYhjKK4/YBbHLIov4W9laznQJKNqSKdKuH+h1nK7dHZl8+7DtvAfOaR+x/UzkDge4b3RtZKSOhPRhwGOYnUfhdjP+EBl659xGt0IAcodycCWqABR2FyApenr0SKmiGp7L09LTBw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=yIk+AL6+ek6URYj8XM2Exyc+dGzcxYLYupkPNnUFdmQ=;
 b=x6a+BNI4uk86xzNeUBW60CaNKQkGofxYEou08W+UaI/GXIdf7GvLSIywzx1qeiruTEZSb516L4JEjTlFy6W015P4yL1GlYf5Iex2fsXQ1ECLg5NiUwPK8taql7SG/ivGWjjeX42MNpBG72c09OYyM69Oz4fOCM/P+K1kpDgBozA=
Received: from DM4PR12MB6134.namprd12.prod.outlook.com (2603:10b6:8:ad::16) by
 CO6PR12MB5476.namprd12.prod.outlook.com (2603:10b6:303:138::17) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5791.26; Mon, 7 Nov
 2022 02:36:04 +0000
Received: from DM4PR12MB6134.namprd12.prod.outlook.com
 ([fe80::6e3e:b414:a2f9:5b7]) by DM4PR12MB6134.namprd12.prod.outlook.com
 ([fe80::6e3e:b414:a2f9:5b7%8]) with mapi id 15.20.5791.026; Mon, 7 Nov 2022
 02:36:04 +0000
From: "Liu01, Tong (Esther)" <Tong.Liu01@amd.com>
To: "Liu01, Tong (Esther)" <Tong.Liu01@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Koenig,
 Christian" <Christian.Koenig@amd.com>
Subject: RE: [PATCH] drm/amdgpu: add vram reservation logic based on
 vram_usagebyfirmware_v2_2
Thread-Topic: [PATCH] drm/amdgpu: add vram reservation logic based on
 vram_usagebyfirmware_v2_2
Thread-Index: AQHY8DzJNbgAz+mCHEes3QVgUjiMq64ywkIA
Date: Mon, 7 Nov 2022 02:36:04 +0000
Message-ID: <DM4PR12MB6134E3FBA374589E7DD5632E903C9@DM4PR12MB6134.namprd12.prod.outlook.com>
References: <20221104110113.85462-1-Tong.Liu01@amd.com>
In-Reply-To: <20221104110113.85462-1-Tong.Liu01@amd.com>
Accept-Language: zh-CN, en-US
Content-Language: en-US
X-Mentions: Christian.Koenig@amd.com
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_Enabled=true;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_SetDate=2022-11-07T02:33:49Z; 
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_Method=Standard;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_Name=General;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_ActionId=7804167d-07cd-4394-8102-7770bee16747;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_ContentBits=1
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_enabled: true
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_setdate: 2022-11-07T02:36:01Z
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_method: Standard
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_name: General
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_siteid: 3dd8961f-e488-4e60-8e11-a82d994e183d
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_actionid: eea6356b-9eac-41a8-a4f0-c76c01de1acf
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_contentbits: 0
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=amd.com;
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: DM4PR12MB6134:EE_|CO6PR12MB5476:EE_
x-ms-office365-filtering-correlation-id: 45c71442-0d88-4b1f-0cde-08dac068d134
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: kyjpTgSkkDF2qaY4tM2WxwmpF8A14D8xqKh8VDzX4Z1Nuh4dTg2C7w88SABNhhilG+zRuYEE7sfMx8nLONve8aQpm9Ef1r2imZR01urZh06E/JksrVqJxpyUZU9Ef1MCUeEOM4/BWRbeVdV7FZzoubE25t4FG0TQSZSdSDQCXBnVE8IRgv2A5Weu1ZItj14ZEflo01v7veH8sfALxtpUcq2skE/Ynop0Xywbx8W2NDIAJSb1E5MEGQfrE6VnerMfLl4pWIQOq+4bA3DsFkGmwnCD9qvtxjz8EB5WgOYGKqOUdfV/rA59Zoyd5ursgS5FEKSY2Y2HB2NUX2+MCbq/UaBxoCyPK8bwr9T1zo4rKwmx+t8hWGEft7P/qNBdmd4A3xr7lXAc/OI8MVnLgeE3/OG/ZPg/c2aV7BxSWyg+FA35F0gSwrEuqfms0/jQUq6DvG3aOlb73qth37VTxofP05C7H8a73vp8RYwdqtbmeVSXUBCWT1sittD/vi9xqZuzgL2jJ0ly54Z6MhxtA9dx29fZt+KnUeAyTMvsHL2h5H2nGHPeKbiDVAnuMnYHX/WK8Tdx1N8Lr3PayzHi5HqRUDPPJk9lidSnkGORHfsgOejgn3xQKl/+LmEUmCCMmMfZ1nJeUiMqXmzbyROOdyYZcLHWjFbFQ6SmgXeGTEY/OlgmhbqfNYr526Nw1mNasx/B6vF2cCZo8GVW/XGz+pmmmS3VOB9J6wlaxF8GwfyXk5wF0lMKKFFh3I4GPT8t373nc0KV/BVVqzqnwTc6ebqDiw==
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM4PR12MB6134.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(13230022)(4636009)(376002)(346002)(366004)(396003)(39860400002)(136003)(84040400005)(451199015)(53546011)(9686003)(26005)(186003)(7696005)(6506007)(122000001)(83380400001)(30864003)(2906002)(55016003)(8676002)(110136005)(316002)(6636002)(478600001)(54906003)(71200400001)(41300700001)(38100700002)(5660300002)(52536014)(8936002)(76116006)(4326008)(66446008)(66476007)(66556008)(64756008)(66946007)(33656002)(38070700005)(86362001);
 DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?cC95azk0MlFQWHVQRFJNL0lOZytmM21sb2JFN1BZb2ExTWlaMyszTTMrOVpy?=
 =?utf-8?B?RElTTUtPa29QQnJHRnFHS2V1WVJHdXJ4RllpT0JWOXhZVFV0QWJvSzhUT0NV?=
 =?utf-8?B?SkltZ21jSWdEVEdlMWk5VGFSbEtvbnloZjFXSXRuRHJyUEJhdUJNc01hSzhB?=
 =?utf-8?B?VFBWdFFtajZCNDRBVVk2cUE4dGJweURieHl1RXcrbi8vOGFDT1dxUk1qY00x?=
 =?utf-8?B?d2FmUkxMN3FpZmVIWi9oeDZDTVlTM3dNYWFvL1labU5YYUc5V0drYzU5YVVz?=
 =?utf-8?B?QzAwckdxeXg4MGdZa2xtU0U5ZDJpcUdvSzlUUTk5ZU9GczZoYTZ1dFVBQWxn?=
 =?utf-8?B?aWd0MlZ5QXhHd2ZZWTgxTzNJcVZha042MVladFJlRVJXOTAvUTJRY2c5aTZH?=
 =?utf-8?B?ZUhzaEVxc0NLMzVvdnVKMDRjRGJoU252MTBaek9ldUxWWmI1dlU4NlVGaXZt?=
 =?utf-8?B?cG1BRUVQSlFBU1VlZUsrdU5LcldmWkhsZGwybXhQRlpMWmdtZTUvdHMxTGZZ?=
 =?utf-8?B?WGNXRlE5Z2s4cS95NVJ6OE4yc3ZPdEd0Mml5bFU3YjhESmcxZE9XcHJrdXVW?=
 =?utf-8?B?OXRwQVRSWUNCL3R2N2FHQnoySktodDhWTjB5clNuWFR1YnRJdnFsMVlaclJ5?=
 =?utf-8?B?d29ZUlY3WUtYdjBUdG0zSFZMdkZiR0lUTDB6YkpBcUNoSkpTaHo2T2FYY0Fo?=
 =?utf-8?B?RHhhdWFOYjQ1ZzNBY0dVRGFqN0RuTHBhRFRiSmFOTWNyZmg5dFA0R3ovU0ZQ?=
 =?utf-8?B?MDJnZ3UwL3FhVDIvcVlCTlZJWVRmVm1LRHQ2Zzh6NCtoS1hrWmJ3OVBTbmpY?=
 =?utf-8?B?dktwelNkdE5wcEF4ZDN0WUxhN21xaEhOUFpLck4rVjhCQlRoT1pUM2NVWCt1?=
 =?utf-8?B?bFcxMlZOeUxqajlSaFlNM1dZcUJrRGRTOUo2L1crQUROWWJaNThxeEgvSHYv?=
 =?utf-8?B?MThxTVJBTUU0THhJdW4wMTllOGxBZWFYTTNQRkRZNFEvYmUyQ292eHptOURM?=
 =?utf-8?B?OUhtaFJqOTZwTTE3dDJjQVZodUprd2xhUEFiOU5aWjhYay8xQ29jVnpsckV6?=
 =?utf-8?B?dVNJc2JCakEvSzlMRGp1cTNzbk0yOUdZK0t4ei9MN0hiSUhmRWNRSURJSnpK?=
 =?utf-8?B?V0NwYi9WaU5aSGJiZGZsSFozSG9CTTZTQXpMSlp3TTdyUHN5akw4VWc2VFFr?=
 =?utf-8?B?a1M3MXhidnE4RDl1b3pUQ0RYbmJxVFA3eGJUV2NEdmRYSzFHVm52RHEyUnNW?=
 =?utf-8?B?ejR5eE1nc3RlVHc1L09nQU9zUktsSGN4cEw2bDFNVDNkWmNZM0hNMFRZNnZh?=
 =?utf-8?B?ZE9ibGEza1UzMmFRYTdtTlg1cXkrRDVzODFYWVVMZFJ1MS93RlJzMDFSNzIv?=
 =?utf-8?B?ZnJCODZhUzI1YS9LMTd0ODlMd2V3TDJQeHFtYU1mRDcrK0Urd3BpcnBqYS9Z?=
 =?utf-8?B?b0UyNEhsZjNSVjBKQUY5YWVxbE1HQkFrcW5ZZU43NTBzOEQraFB4M2VMeTE4?=
 =?utf-8?B?bEN4M1RoUXFoNXJPeG9lREw0MUhEL3N2Q0FRc2FEQ0hsMi9JVHh4dzBPVWc1?=
 =?utf-8?B?USsrU2lyd1A4bjBmWEVnc2lmUGwwa1Z2YXhuYnFveUIvRXptNWM0SDdSSGlC?=
 =?utf-8?B?aURjYUFzb3h3eHo0Q3B5bnpBSC83aVdKVjhPeXpUckRWWGxNYU00UGprTHNR?=
 =?utf-8?B?cERHTnoycFpXa2VuWXNteTdTZEhwT3ZwT0MzMjZPN1R1Q1FVTzhLSkR1YWZ5?=
 =?utf-8?B?aWhzVE0veVNPbGVjYytrMGUwaFVtTVZBb3QydVF3K0hUTkxzTkxadVlKQ2JF?=
 =?utf-8?B?VTRDTTAyMXhYRTFBUjUzN09CMUt5K0l1VHpEK2wxdmJMbHRkRTdhTzEwQTNk?=
 =?utf-8?B?aVlBUTQybkxzb2loa1ZlVjNVVEMwK1kxdXpoZ3IwRmtJK2IvYnZ6ZHpybjVN?=
 =?utf-8?B?Y2FIa1ZxZjh0UHRJZnVZY29LUVBLejVzd1FTN0Foeng5RGcwdmFTSUx5WVo2?=
 =?utf-8?B?SGliZTcrQXU2REJvQWgxNHRuWXVvc1dIM2huV0ZMdVVGR3RzVVFvNVZ6M3ZS?=
 =?utf-8?B?ME5xSGN1YU55MFJxMUNDaVJlMk45ZmZGR0prVmZwcGNNWjdKNytyTFlhL2ta?=
 =?utf-8?Q?1vAdc0G9w2MZFOSejkSxPu/VI?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DM4PR12MB6134.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 45c71442-0d88-4b1f-0cde-08dac068d134
X-MS-Exchange-CrossTenant-originalarrivaltime: 07 Nov 2022 02:36:04.4859 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: OrKed1iiAPSs8NBKQmBPgc7jprgTmArx/qCUoKVetMeki7e0rTQ++AJJZRMkhCysU/EPa1Ne/kht12CbABwCtQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CO6PR12MB5476
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Andrey Grodzovsky <Andrey.Grodzovsky@amd.com>, "Xiao,
 Jack" <Jack.Xiao@amd.com>, "Wang, 
 Yang\(Kevin\)" <KevinYang.Wang@amd.com>, "Xu, Feifei" <Feifei.Xu@amd.com>,
 "Chen, Horace" <Horace.Chen@amd.com>, "Tuikov, Luben" <Luben.Tuikov@amd.com>,
 "Deucher, Alexander" <Alexander.Deucher@amd.com>, "Quan,
 Evan" <Evan.Quan@amd.com>, "Liu, Monk" <Monk.Liu@amd.com>, "Zhang,
 Hawking" <Hawking.Zhang@amd.com>
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seSAtIEdlbmVyYWxdDQoNCkhpIEBLb2VuaWcsIENocmlzdGlh
biwNCg0KQ2FuIHlvdSBoZWxwIG1lIHJldmlldyB0aGUgbmV3IHBhdGNoIGJlbG93PyBUaGFua3Mh
DQoNCktpbmQgcmVnYXJkcywNCkVzdGhlcg0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0K
RnJvbTogVG9uZyBMaXUwMSA8VG9uZy5MaXUwMUBhbWQuY29tPiANClNlbnQ6IDIwMjLlubQxMeac
iDTml6XmmJ/mnJ/kupQg5LiL5Y2INzowMQ0KVG86IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnDQpDYzogQW5kcmV5IEdyb2R6b3Zza3kgPEFuZHJleS5Hcm9kem92c2t5QGFtZC5jb20+OyBR
dWFuLCBFdmFuIDxFdmFuLlF1YW5AYW1kLmNvbT47IENoZW4sIEhvcmFjZSA8SG9yYWNlLkNoZW5A
YW1kLmNvbT47IFR1aWtvdiwgTHViZW4gPEx1YmVuLlR1aWtvdkBhbWQuY29tPjsgS29lbmlnLCBD
aHJpc3RpYW4gPENocmlzdGlhbi5Lb2VuaWdAYW1kLmNvbT47IERldWNoZXIsIEFsZXhhbmRlciA8
QWxleGFuZGVyLkRldWNoZXJAYW1kLmNvbT47IFhpYW8sIEphY2sgPEphY2suWGlhb0BhbWQuY29t
PjsgWmhhbmcsIEhhd2tpbmcgPEhhd2tpbmcuWmhhbmdAYW1kLmNvbT47IExpdSwgTW9uayA8TW9u
ay5MaXVAYW1kLmNvbT47IFh1LCBGZWlmZWkgPEZlaWZlaS5YdUBhbWQuY29tPjsgV2FuZywgWWFu
ZyhLZXZpbikgPEtldmluWWFuZy5XYW5nQGFtZC5jb20+OyBMaXUwMSwgVG9uZyAoRXN0aGVyKSA8
VG9uZy5MaXUwMUBhbWQuY29tPg0KU3ViamVjdDogW1BBVENIXSBkcm0vYW1kZ3B1OiBhZGQgdnJh
bSByZXNlcnZhdGlvbiBsb2dpYyBiYXNlZCBvbiB2cmFtX3VzYWdlYnlmaXJtd2FyZV92Ml8yDQoN
Ck1vdmUgVE1SIHJlZ2lvbiBmcm9tIHRvcCBvZiBGQiB0byAyTUIgZm9yIEZGQk0sIHNvIHdlIG5l
ZWQgdG8gcmVzZXJ2ZSBUTVIgcmVnaW9uIGZpcnN0bHkgdG8gbWFrZSBzdXJlIFRNUiBjYW4gYmUg
YWxsb2NhdGVkIGF0IDJNQg0KDQpTaWduZWQtb2ZmLWJ5OiBUb25nIExpdTAxIDxUb25nLkxpdTAx
QGFtZC5jb20+DQotLS0NCiAuLi4vZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdh
cmUuYyAgfCAxMDYgKysrKysrKysrKysrKystLS0tDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3R0bS5jICAgICAgIHwgIDUyICsrKysrKysrKw0KIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV90dG0uaCAgICAgICB8ICAgNiArDQogZHJpdmVycy9ncHUvZHJtL2Ft
ZC9pbmNsdWRlL2F0b21maXJtd2FyZS5oICAgIHwgIDU2ICsrKysrKysrLQ0KIDQgZmlsZXMgY2hh
bmdlZCwgMTkyIGluc2VydGlvbnMoKyksIDI4IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jDQppbmRleCBiODFiNzdh
OWVmYTYuLjY1Y2YyMzgxOGY0ZSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jDQpAQCAtMTAxLDM5ICsxMDEsOTkgQEAgdm9pZCBhbWRn
cHVfYXRvbWZpcm13YXJlX3NjcmF0Y2hfcmVnc19pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KQ0KIAl9DQogfQ0KIA0KK3N0YXRpYyBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9hbGxvY2F0
ZV9mYl92Ml8xKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KKwkJc3RydWN0IHZyYW1fdXNh
Z2VieWZpcm13YXJlX3YyXzEgKmZpcm13YXJlX3VzYWdlX3YyXzEsDQorCQlpbnQgKnVzYWdlX2J5
dGVzKQ0KK3sNCisJdWludDMyX3Qgc3RhcnRfYWRkciwgc2l6ZTsNCisNCisJRFJNX0RFQlVHKCJh
dG9tIGZpcm13YXJlIHYyXzEgcmVxdWVzdGVkICUwOHggJWRrYiBmdyAlZGtiIGRydlxuIiwNCisJ
CWxlMzJfdG9fY3B1KGZpcm13YXJlX3VzYWdlX3YyXzEtPnN0YXJ0X2FkZHJlc3NfaW5fa2IpLA0K
KwkJbGUxNl90b19jcHUoZmlybXdhcmVfdXNhZ2VfdjJfMS0+dXNlZF9ieV9maXJtd2FyZV9pbl9r
YiksDQorCQlsZTE2X3RvX2NwdShmaXJtd2FyZV91c2FnZV92Ml8xLT51c2VkX2J5X2RyaXZlcl9p
bl9rYikpOw0KKw0KKwlzdGFydF9hZGRyID0gbGUzMl90b19jcHUoZmlybXdhcmVfdXNhZ2VfdjJf
MS0+c3RhcnRfYWRkcmVzc19pbl9rYik7DQorCXNpemUgPSBsZTE2X3RvX2NwdShmaXJtd2FyZV91
c2FnZV92Ml8xLT51c2VkX2J5X2Zpcm13YXJlX2luX2tiKTsNCisNCisJaWYgKCh1aW50MzJfdCko
c3RhcnRfYWRkciAmIEFUT01fVlJBTV9PUEVSQVRJT05fRkxBR1NfTUFTSykgPT0NCisJCSh1aW50
MzJfdCkoQVRPTV9WUkFNX0JMT0NLX1NSSU9WX01TR19TSEFSRV9SRVNFUlZBVElPTiA8PA0KKwkJ
QVRPTV9WUkFNX09QRVJBVElPTl9GTEFHU19TSElGVCkpIHsNCisJCS8qIEZpcm13YXJlIHJlcXVl
c3QgVlJBTSByZXNlcnZhdGlvbiBmb3IgU1ItSU9WICovDQorCQlhZGV2LT5tbWFuLmZ3X3ZyYW1f
dXNhZ2Vfc3RhcnRfb2Zmc2V0ID0gKHN0YXJ0X2FkZHIgJg0KKwkJCSh+QVRPTV9WUkFNX09QRVJB
VElPTl9GTEFHU19NQVNLKSkgPDwgMTA7DQorCQlhZGV2LT5tbWFuLmZ3X3ZyYW1fdXNhZ2Vfc2l6
ZSA9IHNpemUgPDwgMTA7DQorCQkvKiBVc2UgdGhlIGRlZmF1bHQgc2NyYXRjaCBzaXplICovDQor
CQl1c2FnZV9ieXRlcyA9IDA7DQorCX0gZWxzZSB7DQorCQl1c2FnZV9ieXRlcyA9DQorCQkJbGUx
Nl90b19jcHUoZmlybXdhcmVfdXNhZ2VfdjJfMS0+dXNlZF9ieV9kcml2ZXJfaW5fa2IpIDw8IDEw
Ow0KKwl9DQorCXJldHVybiAwOw0KK30NCisNCitzdGF0aWMgaW50IGFtZGdwdV9hdG9tZmlybXdh
cmVfYWxsb2NhdGVfZmJfdjJfMihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCisJCXN0cnVj
dCB2cmFtX3VzYWdlYnlmaXJtd2FyZV92Ml8yICpmaXJtd2FyZV91c2FnZV92Ml8yLA0KKwkJaW50
ICp1c2FnZV9ieXRlcykNCit7DQorCXVpbnQzMl90IGZ3X3N0YXJ0X2FkZHIsIGZ3X3NpemUsIGRy
dl9zdGFydF9hZGRyLCBkcnZfc2l6ZTsNCisNCisJRFJNX0RFQlVHKCJhdG9tIHJlcXVlc3RlZCBm
dyBzdGFydCBhdCAlMDh4ICVka2IgYW5kIGRydiBzdGFydCBhdCAlMDh4ICVka2JcbiIsDQorCQls
ZTMyX3RvX2NwdShmaXJtd2FyZV91c2FnZV92Ml8yLT5md19yZWdpb25fc3RhcnRfYWRkcmVzc19p
bl9rYiksDQorCQlsZTE2X3RvX2NwdShmaXJtd2FyZV91c2FnZV92Ml8yLT51c2VkX2J5X2Zpcm13
YXJlX2luX2tiKSwNCisJCWxlMzJfdG9fY3B1KGZpcm13YXJlX3VzYWdlX3YyXzItPmRyaXZlcl9y
ZWdpb24wX3N0YXJ0X2FkZHJlc3NfaW5fa2IpLA0KKwkJbGUzMl90b19jcHUoZmlybXdhcmVfdXNh
Z2VfdjJfMi0+dXNlZF9ieV9kcml2ZXJfcmVnaW9uMF9pbl9rYikpOw0KKw0KKwlmd19zdGFydF9h
ZGRyID0gbGUzMl90b19jcHUoZmlybXdhcmVfdXNhZ2VfdjJfMi0+ZndfcmVnaW9uX3N0YXJ0X2Fk
ZHJlc3NfaW5fa2IpOw0KKwlmd19zaXplID0gbGUxNl90b19jcHUoZmlybXdhcmVfdXNhZ2VfdjJf
Mi0+dXNlZF9ieV9maXJtd2FyZV9pbl9rYik7DQorDQorCWRydl9zdGFydF9hZGRyID0gbGUzMl90
b19jcHUoZmlybXdhcmVfdXNhZ2VfdjJfMi0+ZHJpdmVyX3JlZ2lvbjBfc3RhcnRfYWRkcmVzc19p
bl9rYik7DQorCWRydl9zaXplID0gDQorbGUzMl90b19jcHUoZmlybXdhcmVfdXNhZ2VfdjJfMi0+
dXNlZF9ieV9kcml2ZXJfcmVnaW9uMF9pbl9rYik7DQorDQorCWlmICgodWludDMyX3QpKGZ3X3N0
YXJ0X2FkZHIgJiAoQVRPTV9WUkFNX0JMT0NLX05FRURTX05PX1JFU0VSVkFUSU9OIDw8IDMwKSkg
PT0gMCkgew0KKwkJLyogRmlybXdhcmUgcmVxdWVzdCBWUkFNIHJlc2VydmF0aW9uIGZvciBTUi1J
T1YgKi8NCisJCWFkZXYtPm1tYW4uZndfdnJhbV91c2FnZV9zdGFydF9vZmZzZXQgPSAoZndfc3Rh
cnRfYWRkciAmDQorCQkJKH5BVE9NX1ZSQU1fT1BFUkFUSU9OX0ZMQUdTX01BU0spKSA8PCAxMDsN
CisJCWFkZXYtPm1tYW4uZndfdnJhbV91c2FnZV9zaXplID0gZndfc2l6ZSA8PCAxMDsNCisJfQ0K
Kw0KKwlpZiAoKHVpbnQzMl90KShkcnZfc3RhcnRfYWRkciAmIChBVE9NX1ZSQU1fQkxPQ0tfTkVF
RFNfTk9fUkVTRVJWQVRJT04gPDwgMzApKSA9PSAwKSB7DQorCQkvKiBkcml2ZXIgcmVxdWVzdCBW
UkFNIHJlc2VydmF0aW9uIGZvciBTUi1JT1YgKi8NCisJCWFkZXYtPm1tYW4uZHJ2X3ZyYW1fdXNh
Z2Vfc3RhcnRfb2Zmc2V0ID0gKGRydl9zdGFydF9hZGRyICYNCisJCQkofkFUT01fVlJBTV9PUEVS
QVRJT05fRkxBR1NfTUFTSykpIDw8IDEwOw0KKwkJYWRldi0+bW1hbi5kcnZfdnJhbV91c2FnZV9z
aXplID0gZHJ2X3NpemUgPDwgMTA7DQorCX0NCisNCisJdXNhZ2VfYnl0ZXMgPSAwOw0KKwlyZXR1
cm4gMDsNCit9DQorDQogaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfYWxsb2NhdGVfZmJfc2NyYXRj
aChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikgIHsNCiAJc3RydWN0IGF0b21fY29udGV4dCAq
Y3R4ID0gYWRldi0+bW9kZV9pbmZvLmF0b21fY29udGV4dDsNCiAJaW50IGluZGV4ID0gZ2V0X2lu
ZGV4X2ludG9fbWFzdGVyX3RhYmxlKGF0b21fbWFzdGVyX2xpc3Rfb2ZfZGF0YV90YWJsZXNfdjJf
MSwNCiAJCQkJCQl2cmFtX3VzYWdlYnlmaXJtd2FyZSk7DQotCXN0cnVjdCB2cmFtX3VzYWdlYnlm
aXJtd2FyZV92Ml8xICpmaXJtd2FyZV91c2FnZTsNCi0JdWludDMyX3Qgc3RhcnRfYWRkciwgc2l6
ZTsNCisJc3RydWN0IHZyYW1fdXNhZ2VieWZpcm13YXJlX3YyXzEgKmZpcm13YXJlX3VzYWdlX3Yy
XzE7DQorCXN0cnVjdCB2cmFtX3VzYWdlYnlmaXJtd2FyZV92Ml8yICpmaXJtd2FyZV91c2FnZV92
Ml8yOw0KIAl1aW50MTZfdCBkYXRhX29mZnNldDsNCisJdWludDhfdCBmcmV2LCBjcmV2Ow0KIAlp
bnQgdXNhZ2VfYnl0ZXMgPSAwOw0KIA0KLQlpZiAoYW1kZ3B1X2F0b21fcGFyc2VfZGF0YV9oZWFk
ZXIoY3R4LCBpbmRleCwgTlVMTCwgTlVMTCwgTlVMTCwgJmRhdGFfb2Zmc2V0KSkgew0KLQkJZmly
bXdhcmVfdXNhZ2UgPSAoc3RydWN0IHZyYW1fdXNhZ2VieWZpcm13YXJlX3YyXzEgKikoY3R4LT5i
aW9zICsgZGF0YV9vZmZzZXQpOw0KLQkJRFJNX0RFQlVHKCJhdG9tIGZpcm13YXJlIHJlcXVlc3Rl
ZCAlMDh4ICVka2IgZncgJWRrYiBkcnZcbiIsDQotCQkJICBsZTMyX3RvX2NwdShmaXJtd2FyZV91
c2FnZS0+c3RhcnRfYWRkcmVzc19pbl9rYiksDQotCQkJICBsZTE2X3RvX2NwdShmaXJtd2FyZV91
c2FnZS0+dXNlZF9ieV9maXJtd2FyZV9pbl9rYiksDQotCQkJICBsZTE2X3RvX2NwdShmaXJtd2Fy
ZV91c2FnZS0+dXNlZF9ieV9kcml2ZXJfaW5fa2IpKTsNCi0NCi0JCXN0YXJ0X2FkZHIgPSBsZTMy
X3RvX2NwdShmaXJtd2FyZV91c2FnZS0+c3RhcnRfYWRkcmVzc19pbl9rYik7DQotCQlzaXplID0g
bGUxNl90b19jcHUoZmlybXdhcmVfdXNhZ2UtPnVzZWRfYnlfZmlybXdhcmVfaW5fa2IpOw0KLQ0K
LQkJaWYgKCh1aW50MzJfdCkoc3RhcnRfYWRkciAmIEFUT01fVlJBTV9PUEVSQVRJT05fRkxBR1Nf
TUFTSykgPT0NCi0JCQkodWludDMyX3QpKEFUT01fVlJBTV9CTE9DS19TUklPVl9NU0dfU0hBUkVf
UkVTRVJWQVRJT04gPDwNCi0JCQlBVE9NX1ZSQU1fT1BFUkFUSU9OX0ZMQUdTX1NISUZUKSkgew0K
LQkJCS8qIEZpcm13YXJlIHJlcXVlc3QgVlJBTSByZXNlcnZhdGlvbiBmb3IgU1ItSU9WICovDQot
CQkJYWRldi0+bW1hbi5md192cmFtX3VzYWdlX3N0YXJ0X29mZnNldCA9IChzdGFydF9hZGRyICYN
Ci0JCQkJKH5BVE9NX1ZSQU1fT1BFUkFUSU9OX0ZMQUdTX01BU0spKSA8PCAxMDsNCi0JCQlhZGV2
LT5tbWFuLmZ3X3ZyYW1fdXNhZ2Vfc2l6ZSA9IHNpemUgPDwgMTA7DQotCQkJLyogVXNlIHRoZSBk
ZWZhdWx0IHNjcmF0Y2ggc2l6ZSAqLw0KLQkJCXVzYWdlX2J5dGVzID0gMDsNCi0JCX0gZWxzZSB7
DQotCQkJdXNhZ2VfYnl0ZXMgPSBsZTE2X3RvX2NwdShmaXJtd2FyZV91c2FnZS0+dXNlZF9ieV9k
cml2ZXJfaW5fa2IpIDw8IDEwOw0KKwlpZiAoYW1kZ3B1X2F0b21fcGFyc2VfZGF0YV9oZWFkZXIo
Y3R4LCBpbmRleCwgTlVMTCwgJmZyZXYsICZjcmV2LCAmZGF0YV9vZmZzZXQpKSB7DQorCQlpZiAo
ZnJldiA9PSAyICYmIGNyZXYgPT0gMSkgew0KKwkJCWZpcm13YXJlX3VzYWdlX3YyXzEgPQ0KKwkJ
CQkoc3RydWN0IHZyYW1fdXNhZ2VieWZpcm13YXJlX3YyXzEgKikoY3R4LT5iaW9zICsgZGF0YV9v
ZmZzZXQpOw0KKwkJCWFtZGdwdV9hdG9tZmlybXdhcmVfYWxsb2NhdGVfZmJfdjJfMShhZGV2LA0K
KwkJCQkJZmlybXdhcmVfdXNhZ2VfdjJfMSwNCisJCQkJCSZ1c2FnZV9ieXRlcyk7DQorCQl9IGVs
c2UgaWYgKGZyZXYgPj0gMiAmJiBjcmV2ID49IDIpIHsNCisJCQlmaXJtd2FyZV91c2FnZV92Ml8y
ID0NCisJCQkJKHN0cnVjdCB2cmFtX3VzYWdlYnlmaXJtd2FyZV92Ml8yICopKGN0eC0+YmlvcyAr
IGRhdGFfb2Zmc2V0KTsNCisJCQlhbWRncHVfYXRvbWZpcm13YXJlX2FsbG9jYXRlX2ZiX3YyXzIo
YWRldiwNCisJCQkJCWZpcm13YXJlX3VzYWdlX3YyXzIsDQorCQkJCQkmdXNhZ2VfYnl0ZXMpOw0K
IAkJfQ0KIAl9DQorDQogCWN0eC0+c2NyYXRjaF9zaXplX2J5dGVzID0gMDsNCiAJaWYgKHVzYWdl
X2J5dGVzID09IDApDQogCQl1c2FnZV9ieXRlcyA9IDIwICogMTAyNDsNCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdHRtLmMNCmluZGV4IDU4NTQ2MGFiOGRmZC4uMDk5NjA1MzgwYjA2
IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jDQor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMNCkBAIC0xNTc4LDYg
KzE1NzgsMjIgQEAgc3RhdGljIHZvaWQgYW1kZ3B1X3R0bV9md19yZXNlcnZlX3ZyYW1fZmluaShz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCiAJCU5VTEwsICZhZGV2LT5tbWFuLmZ3X3ZyYW1f
dXNhZ2VfdmEpOw0KIH0NCiANCisvKg0KKyAqIERyaXZlciBSZXNlcnZhdGlvbiBmdW5jdGlvbnMN
CisgKi8NCisvKioNCisgKiBhbWRncHVfdHRtX2Rydl9yZXNlcnZlX3ZyYW1fZmluaSAtIGZyZWUg
ZHJ2IHJlc2VydmVkIHZyYW0NCisgKg0KKyAqIEBhZGV2OiBhbWRncHVfZGV2aWNlIHBvaW50ZXIN
CisgKg0KKyAqIGZyZWUgZHJ2IHJlc2VydmVkIHZyYW0gaWYgaXQgaGFzIGJlZW4gcmVzZXJ2ZWQu
DQorICovDQorc3RhdGljIHZvaWQgYW1kZ3B1X3R0bV9kcnZfcmVzZXJ2ZV92cmFtX2Zpbmkoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgDQorKmFkZXYpIHsNCisJYW1kZ3B1X2JvX2ZyZWVfa2VybmVsKCZh
ZGV2LT5tbWFuLmRydl92cmFtX3VzYWdlX3Jlc2VydmVkX2JvLA0KKwkJTlVMTCwgJmFkZXYtPm1t
YW4uZHJ2X3ZyYW1fdXNhZ2VfdmEpOyB9DQorDQogLyoqDQogICogYW1kZ3B1X3R0bV9md19yZXNl
cnZlX3ZyYW1faW5pdCAtIGNyZWF0ZSBibyB2cmFtIHJlc2VydmF0aW9uIGZyb20gZncNCiAgKg0K
QEAgLTE2MDQsNiArMTYyMCwzMiBAQCBzdGF0aWMgaW50IGFtZGdwdV90dG1fZndfcmVzZXJ2ZV92
cmFtX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQogCQkJCQkgICZhZGV2LT5tbWFu
LmZ3X3ZyYW1fdXNhZ2VfdmEpOw0KIH0NCiANCisvKioNCisgKiBhbWRncHVfdHRtX2Rydl9yZXNl
cnZlX3ZyYW1faW5pdCAtIGNyZWF0ZSBibyB2cmFtIHJlc2VydmF0aW9uIGZyb20gDQorZHJpdmVy
DQorICoNCisgKiBAYWRldjogYW1kZ3B1X2RldmljZSBwb2ludGVyDQorICoNCisgKiBjcmVhdGUg
Ym8gdnJhbSByZXNlcnZhdGlvbiBmcm9tIGRydi4NCisgKi8NCitzdGF0aWMgaW50IGFtZGdwdV90
dG1fZHJ2X3Jlc2VydmVfdnJhbV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KSANCit7
DQorCXVpbnQ2NF90IHZyYW1fc2l6ZSA9IGFkZXYtPmdtYy52aXNpYmxlX3ZyYW1fc2l6ZTsNCisN
CisJYWRldi0+bW1hbi5kcnZfdnJhbV91c2FnZV92YSA9IE5VTEw7DQorCWFkZXYtPm1tYW4uZHJ2
X3ZyYW1fdXNhZ2VfcmVzZXJ2ZWRfYm8gPSBOVUxMOw0KKw0KKwlpZiAoYWRldi0+bW1hbi5kcnZf
dnJhbV91c2FnZV9zaXplID09IDAgfHwNCisJICAgIGFkZXYtPm1tYW4uZHJ2X3ZyYW1fdXNhZ2Vf
c2l6ZSA+IHZyYW1fc2l6ZSkNCisJCXJldHVybiAwOw0KKw0KKwlyZXR1cm4gYW1kZ3B1X2JvX2Ny
ZWF0ZV9rZXJuZWxfYXQoYWRldiwNCisJCQkJCSAgYWRldi0+bW1hbi5kcnZfdnJhbV91c2FnZV9z
dGFydF9vZmZzZXQsDQorCQkJCQkgIGFkZXYtPm1tYW4uZHJ2X3ZyYW1fdXNhZ2Vfc2l6ZSwNCisJ
CQkJCSAgQU1ER1BVX0dFTV9ET01BSU5fVlJBTSwNCisJCQkJCSAgJmFkZXYtPm1tYW4uZHJ2X3Zy
YW1fdXNhZ2VfcmVzZXJ2ZWRfYm8sDQorCQkJCQkgICZhZGV2LT5tbWFuLmRydl92cmFtX3VzYWdl
X3ZhKTsNCit9DQorDQogLyoNCiAgKiBNZW1veSB0cmFpbmluZyByZXNlcnZhdGlvbiBmdW5jdGlv
bnMNCiAgKi8NCkBAIC0xNzcxLDYgKzE4MTMsMTUgQEAgaW50IGFtZGdwdV90dG1faW5pdChzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCiAJCXJldHVybiByOw0KIAl9DQogDQorCS8qDQorCSAq
VGhlIHJlc2VydmVkIHZyYW0gZm9yIGRyaXZlciBtdXN0IGJlIHBpbm5lZCB0byB0aGUgc3BlY2lm
aWVkDQorCSAqcGxhY2Ugb24gdGhlIFZSQU0sIHNvIHJlc2VydmUgaXQgZWFybHkuDQorCSAqLw0K
KwlyID0gYW1kZ3B1X3R0bV9kcnZfcmVzZXJ2ZV92cmFtX2luaXQoYWRldik7DQorCWlmIChyKSB7
DQorCQlyZXR1cm4gcjsNCisJfQ0KKw0KIAkvKg0KIAkgKiBvbmx5IE5BVkkxMCBhbmQgb253YXJk
cyBBU0lDIHN1cHBvcnQgZm9yIElQIGRpc2NvdmVyeS4NCiAJICogSWYgSVAgZGlzY292ZXJ5IGVu
YWJsZWQsIGEgYmxvY2sgb2YgbWVtb3J5IHNob3VsZCBiZSBAQCAtMTg5Niw2ICsxOTQ3LDcgQEAg
dm9pZCBhbWRncHVfdHRtX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQogCWFtZGdw
dV9ib19mcmVlX2tlcm5lbCgmYWRldi0+bW1hbi5zZG1hX2FjY2Vzc19ibywgTlVMTCwNCiAJCQkJ
CSZhZGV2LT5tbWFuLnNkbWFfYWNjZXNzX3B0cik7DQogCWFtZGdwdV90dG1fZndfcmVzZXJ2ZV92
cmFtX2ZpbmkoYWRldik7DQorCWFtZGdwdV90dG1fZHJ2X3Jlc2VydmVfdnJhbV9maW5pKGFkZXYp
Ow0KIA0KIAlpZiAoZHJtX2Rldl9lbnRlcihhZGV2X3RvX2RybShhZGV2KSwgJmlkeCkpIHsNCiAN
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmggYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmgNCmluZGV4IDkxMjBhZTgwZWY1
Mi4uYzYwMjQ2ZjMyZjk4IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3R0bS5oDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRt
LmgNCkBAIC05Miw2ICs5MiwxMiBAQCBzdHJ1Y3QgYW1kZ3B1X21tYW4gew0KIAlzdHJ1Y3QgYW1k
Z3B1X2JvCSpmd192cmFtX3VzYWdlX3Jlc2VydmVkX2JvOw0KIAl2b2lkCQkqZndfdnJhbV91c2Fn
ZV92YTsNCiANCisJLyogZHJpdmVyIFZSQU0gcmVzZXJ2YXRpb24gKi8NCisJdTY0CQlkcnZfdnJh
bV91c2FnZV9zdGFydF9vZmZzZXQ7DQorCXU2NAkJZHJ2X3ZyYW1fdXNhZ2Vfc2l6ZTsNCisJc3Ry
dWN0IGFtZGdwdV9ibwkqZHJ2X3ZyYW1fdXNhZ2VfcmVzZXJ2ZWRfYm87DQorCXZvaWQJCSpkcnZf
dnJhbV91c2FnZV92YTsNCisNCiAJLyogUEFHRV9TSVpFJ2QgQk8gZm9yIHByb2Nlc3MgbWVtb3J5
IHIvdyBvdmVyIFNETUEuICovDQogCXN0cnVjdCBhbWRncHVfYm8JKnNkbWFfYWNjZXNzX2JvOw0K
IAl2b2lkCQkJKnNkbWFfYWNjZXNzX3B0cjsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2luY2x1ZGUvYXRvbWZpcm13YXJlLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2luY2x1ZGUv
YXRvbWZpcm13YXJlLmgNCmluZGV4IGZmODU1Y2IyMWQzZi4uOWY4NzYxNDA3MDk5IDEwMDY0NA0K
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2F0b21maXJtd2FyZS5oDQorKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2luY2x1ZGUvYXRvbWZpcm13YXJlLmgNCkBAIC03MDUsMTAgKzcw
NSw0NyBAQCBzdHJ1Y3QgYXRvbV9ncGlvX3Bpbl9sdXRfdjJfMSAgfTsNCiANCiANCi0vKg0KLSAg
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqDQotICAgIERhdGEgVGFibGUgdnJhbV91c2FnZWJ5ZmlybXdhcmUg
IHN0cnVjdHVyZQ0KLSAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQorLyoNCisgIFZCSU9TL1BSRS1PUyBh
bHdheXMgcmVzZXJ2ZSBhIEZCIHJlZ2lvbiBhdCB0aGUgdG9wIG9mIGZyYW1lIGJ1ZmZlci4gZHJp
dmVyIHNob3VsZCBub3Qgd3JpdGUgYWNjZXNzIHRoYXQgcmVnaW9uLg0KKyAgZHJpdmVyIGNhbiBh
bGxvY2F0ZSB0aGVpciBvd24gcmVzZXJ2YXRpb24gcmVnaW9uIGFzIGxvbmcgYXMgaXQgZG9lcyBu
b3Qgb3ZlcmxhcCBmaXJ3bWFyZSdzIHJlc2VydmF0aW9uIHJlZ2lvbi4NCisgIGlmKCBhdG9tIGRh
dGEgdGFibGUgZmlybXdhcmVJbmZvVGFibGUgdmVyc2lvbiA8IDMuMykgeyAvLyggcHJlLU5WMVgg
KQ0KKyAgICBpbiB0aGlzIGNhc2UsIGF0b20gZGF0YSB0YWJsZSB2cmFtX3VzYWdlYnlmaXJtd2Fy
ZVRhYmxlIHZlcnNpb24gYWx3YXlzIDw9IDIuMQ0KKyAgICBpZiggVkJJT1MvVUVGSSBHT1AgaXMg
cG9zdGVkICkgew0KKyAgICAgIFZCSU9TL1VFRklHT1AgdXBkYXRlIHVzZWRfYnlfZmlybXdhcmVf
aW5fa2IgPSB0b3RhbCByZXNlcnZlZCBzaXplIGJ5IFZCSU9TDQorICAgICAgdXBkYXRlIHN0YXJ0
X2FkZHJlc3NfaW5fa2IgPSB0b3RhbF9tZW1fc2l6ZV9pbl9rYiAtIHVzZWRfYnlfZmlybXdhcmVf
aW5fa2I7ICAoIHRvdGFsX21lbV9zaXplX2luX2tiID0gcmVnKENPTkZJR19NRU1TSVpFKTw8MTAp
DQorICAgICAgZHJpdmVyIGNhbiBhbGxvY2F0ZSBkcml2ZXIgcmVzZXJ2YXRpb24gcmVnaW9uIHVu
ZGVyIGZpcm13YXJlIHJlc2VydmF0aW9uLA0KKyAgICAgIHVzZWRfYnlfZHJpdmVyX2luX2tiID0g
ZHJpdmVyIHJlc2VydmF0aW9uIHNpemUNCisgICAgICBkcml2ZXIgcmVzZXJ2YXRpb24gc3RhcnQg
YWRkcmVzcyA9ICAoc3RhcnRfYWRkcmVzc19pbl9rYiAtIHVzZWRfYnlfZHJpdmVyX2luX2tiKQ0K
KyAgICBDb21tZW50MVtoY2hhbl06IFRoZXJlIGlzIG9ubHkgb25lIHJlc2VydmF0aW9uIGF0IHRo
ZSBiZWdpbm5pbmcgb2YgdGhlIEZCIHJlc2VydmVkIGJ5IEhvc3QgZHJpdmVyLg0KKyAgICBIb3N0
IGRyaXZlciB3b3VsZCBvdmVyd3JpdGUgdGhlIHRhYmxlIHdpdGggdGhlIGZvbGxvd2luZw0KKyAg
ICB1c2VkX2J5X2Zpcm13YXJlX2luX2tiID0gdG90YWwgcmVzZXJ2ZWQgc2l6ZSBmb3IgcGYtdmYg
aW5mbyBleGNoYW5nZSBhbmQNCisgICAgc2V0IFNSSU9WX01TR19TSEFSRV9SRVNFUlZBVElPTiBt
YXNrIHN0YXJ0X2FkZHJlc3NfaW5fa2IgPSAwDQorICAgIH0gZWxzZSB7DQorICAgICAgdGhlcmUg
aXMgbm8gVkJJT1MgcmVzZXJ2YXRpb24gcmVnaW9uDQorICAgICAgZHJpdmVyIG11c3QgYWxsb2Nh
dGUgZHJpdmVyIHJlc2VydmF0aW9uIHJlZ2lvbiBhdCB0b3Agb2YgRkIuDQorICAgICAgZHJpdmVy
IHNldCB1c2VkX2J5X2RyaXZlcl9pbl9rYiA9IGRyaXZlciByZXNlcnZhdGlvbiBzaXplDQorICAg
ICAgZHJpdmVyIHJlc2VydmF0aW9uIHN0YXJ0IGFkZHJlc3MgPSAgKHRvdGFsX21lbV9zaXplX2lu
X2tiIC0gdXNlZF9ieV9kcml2ZXJfaW5fa2IpDQorICAgICAgc2FtZSBhcyBDb21tZW50MQ0KKyAg
ICB9DQorICB9IGVsc2UgeyAvLyggTlYxWCBhbmQgYWZ0ZXIpDQorICAgIGlmKCBWQklPUy9VRUZJ
IEdPUCBpcyBwb3N0ZWQgKSB7DQorICAgICAgVkJJT1MvVUVGSUdPUCB1cGRhdGUgdXNlZF9ieV9m
aXJtd2FyZV9pbl9rYiA9IGF0b21fZmlybXdhcmVfSW5mb192M18zLmZ3X3Jlc2VydmVkX3NpemVf
aW5fa2I7DQorICAgICAgdXBkYXRlIHN0YXJ0X2FkZHJlc3NfaW5fa2IgPSB0b3RhbF9tZW1fc2l6
ZV9pbl9rYiAtIHVzZWRfYnlfZmlybXdhcmVfaW5fa2I7ICAoIHRvdGFsX21lbV9zaXplX2luX2ti
ID0gcmVnKENPTkZJR19NRU1TSVpFKTw8MTAgICkNCisgICAgfQ0KKyAgICBpZiggdnJhbV91c2Fn
ZWJ5ZmlybXdhcmVUYWJsZSB2ZXJzaW9uIDw9IDIuMSApIHsNCisgICAgICBkcml2ZXIgY2FuIGFs
bG9jYXRlIGRyaXZlciByZXNlcnZhdGlvbiByZWdpb24gdW5kZXIgZmlybXdhcmUgcmVzZXJ2YXRp
b24sDQorICAgICAgZHJpdmVyIHNldCB1c2VkX2J5X2RyaXZlcl9pbl9rYiA9IGRyaXZlciByZXNl
cnZhdGlvbiBzaXplDQorICAgICAgZHJpdmVyIHJlc2VydmF0aW9uIHN0YXJ0IGFkZHJlc3MgPSAg
KHN0YXJ0X2FkZHJlc3NfaW5fa2IgLSB1c2VkX2J5X2RyaXZlcl9pbl9rYikNCisgICAgICBzYW1l
IGFzIENvbW1lbnQxDQorICAgIH0gZWxzZSB7DQorICAgICAgZGlydmVyIGNhbiBhbGxvY2F0ZSBp
dCByZXNlcnZhdGlvbiBhbnkgcGxhY2UgYXMgbG9uZyBhcyBpdCBkb2VzIG92ZXJsYXAgcHJlLU9T
IEZXIHJlc2VydmF0aW9uIGFyZWENCisgICAgICBkcml2ZXIgc2V0IHVzZWRfYnlfZHJpdmVyX3Jl
Z2lvbjBfaW5fa2IgPSBkcml2ZXIgcmVzZXJ2YXRpb24gc2l6ZQ0KKyAgICAgIGRyaXZlciBzZXQg
ZHJpdmVyX3JlZ2lvbjBfc3RhcnRfYWRkcmVzc19pbl9rYiA9ICBkcml2ZXIgcmVzZXJ2YXRpb24g
cmVnaW9uIHN0YXJ0IGFkZHJlc3MNCisgICAgICBDb21tZW50MltoY2hhbl06IEhvc3QgZHJpdmVy
IGNhbiBzZXQgdXNlZF9ieV9maXJtd2FyZV9pbl9rYiBhbmQgc3RhcnRfYWRkcmVzc19pbl9rYiB0
byB6ZXJvDQorICAgICAgYXMgdGhlIHJlc2VydmF0aW9uIGZvciBWRiBhcyBpdCBkb2VzbuKAmXQg
ZXhpc3QuICBBbmQgSG9zdCBkcml2ZXIgc2hvdWxkIGFsc28NCisgICAgICB1cGRhdGUgYXRvbV9m
aXJtd2FyZV9JbmZvIHRhYmxlIHRvIHJlbW92ZSB0aGUgc2FtZSBWQklPUyByZXNlcnZhdGlvbiBh
cyB3ZWxsLg0KKyAgICB9DQorICB9DQogKi8NCiANCiBzdHJ1Y3QgdnJhbV91c2FnZWJ5ZmlybXdh
cmVfdjJfMQ0KQEAgLTcxNiw5ICs3NTMsMTggQEAgc3RydWN0IHZyYW1fdXNhZ2VieWZpcm13YXJl
X3YyXzENCiAgIHN0cnVjdCAgYXRvbV9jb21tb25fdGFibGVfaGVhZGVyICB0YWJsZV9oZWFkZXI7
DQogICB1aW50MzJfdCAgc3RhcnRfYWRkcmVzc19pbl9rYjsNCiAgIHVpbnQxNl90ICB1c2VkX2J5
X2Zpcm13YXJlX2luX2tiOw0KLSAgdWludDE2X3QgIHVzZWRfYnlfZHJpdmVyX2luX2tiOyANCisg
IHVpbnQxNl90ICB1c2VkX2J5X2RyaXZlcl9pbl9rYjsNCiB9Ow0KIA0KK3N0cnVjdCB2cmFtX3Vz
YWdlYnlmaXJtd2FyZV92Ml8yew0KKyAgc3RydWN0ICBhdG9tX2NvbW1vbl90YWJsZV9oZWFkZXIg
IHRhYmxlX2hlYWRlcjsNCisgIHVpbnQzMl90ICBmd19yZWdpb25fc3RhcnRfYWRkcmVzc19pbl9r
YjsNCisgIHVpbnQxNl90ICB1c2VkX2J5X2Zpcm13YXJlX2luX2tiOw0KKyAgdWludDE2X3QgIHJl
c2VydmVkOw0KKyAgdWludDMyX3QgIGRyaXZlcl9yZWdpb24wX3N0YXJ0X2FkZHJlc3NfaW5fa2I7
DQorICB1aW50MzJfdCAgdXNlZF9ieV9kcml2ZXJfcmVnaW9uMF9pbl9rYjsNCisgIHVpbnQzMl90
ICByZXNlcnZlZDMyWzddOw0KK307DQogDQogLyogDQogICAqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi0t
DQoyLjI1LjENCg==
