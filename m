Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BDB64D836F
	for <lists+amd-gfx@lfdr.de>; Wed, 16 Oct 2019 00:18:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 41E8D6E8A2;
	Tue, 15 Oct 2019 22:18:39 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x844.google.com (mail-qt1-x844.google.com
 [IPv6:2607:f8b0:4864:20::844])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 071A66E8A1
 for <amd-gfx@lists.freedesktop.org>; Tue, 15 Oct 2019 22:18:31 +0000 (UTC)
Received: by mail-qt1-x844.google.com with SMTP id m15so33112277qtq.2
 for <amd-gfx@lists.freedesktop.org>; Tue, 15 Oct 2019 15:18:30 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=40dcAdkiwvYi7zp/miHNatTL3320X2jjFrHY7QOEB90=;
 b=UhLcTa2+JP8rKeplGsEgMMvNoEcptO/sSzxHEdWllkf0up+Z6afh5pb3uxxWt6zHCL
 4x41q+uRy2YARgQ/exE1al1375jcdr9n4eJUUrB+H/wMXRiKOKvQJIEQjbiwMpt13GU7
 CBCg0n6MzYFqK6gIcOLxzdlJ4pAEn4TvnuSpXahZGWXwTc1mnChev6DAvMirODXj5gge
 HfpDGoediL9WnfivO8CQJKWQJ5Jmlr8zZm1hcEf3PFMADupJxpaeiz+UDRut/Uiog6EM
 1IG9gOeHDNbZCIK5KlMoG2DdExnSbqbaGKSJMyYWzHPPV1swJtBeiZfW0bMeNaB8KsKz
 uzfQ==
X-Gm-Message-State: APjAAAVpNWsmrdPj5SKwcLFdzXyDtur0RxeTMsC2yhLvj6OVJbl80YlO
 t8qzUHwWnbCBM0T6bqTzV+MrBJyr
X-Google-Smtp-Source: APXvYqy1L5CEds/9EU4baOJr79/8/LJqKU6kpprSaVvluYfV/86nhRzJcocW4I5PfLzHGfaBZ/H76A==
X-Received: by 2002:a0c:fd91:: with SMTP id p17mr4952000qvr.28.1571177909554; 
 Tue, 15 Oct 2019 15:18:29 -0700 (PDT)
Received: from localhost.localdomain ([71.51.171.205])
 by smtp.gmail.com with ESMTPSA id p4sm625424qkf.112.2019.10.15.15.18.28
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 15 Oct 2019 15:18:29 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 2/3] drm/amdgpu/uvd7: fix allocation size in enc ring test (v2)
Date: Tue, 15 Oct 2019 18:18:12 -0400
Message-Id: <20191015221813.625024-2-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191015221813.625024-1-alexander.deucher@amd.com>
References: <20191015221813.625024-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=40dcAdkiwvYi7zp/miHNatTL3320X2jjFrHY7QOEB90=;
 b=JW1vKvVdZMtWGCxDkt+tCOO+BtLzbz5ojryChHoW8vHHwiaEk+6htfnHJvtdaRPnvA
 lFnKia4On+Fl5zDw/atSKX1Ij1onc6TMs0qzffmnzZYyeeMtZnnQXCcDfsaSjqfeulX2
 FLni0D3GXHOxOlhSUU0W1VnrwR8TbKA+3jzFWb1RO0CWg+jpwG1YOEmJU6qQv1lUdleV
 iv74MpavZHBrEb7P97MuGasPdm5c6AqGYgLRt51erIddmMyIPvIGE9hpmeFJ1wkyIorl
 OXYyHRr7kX/dVXYBAoIUI7ZLo6dZc/PF3Eew6RdX2gvaEyHvca1dtrAfmwlEx8Yb/6Vt
 BKSQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

V2UgbmVlZCB0byBhbGxvY2F0ZSBhIGxhcmdlIGVub3VnaCBidWZmZXIgZm9yIHRoZQpzZXNzaW9u
IGluZm8sIG90aGVyd2lzZSB0aGUgSUIgdGVzdCBjYW4gb3ZlcndyaXRlCm90aGVyIG1lbW9yeS4K
CnYyOiAtIHNlc3Npb24gaW5mbyBpcyAxMjhLIGFjY29yZGluZyB0byBtZXNhCiAgICAtIHVzZSB0
aGUgc2FtZSBzZXNzaW9uIGluZm8gZm9yIGNyZWF0ZSBhbmQgZGVzdHJveQoKQnVnOiBodHRwczov
L2J1Z3ppbGxhLmtlcm5lbC5vcmcvc2hvd19idWcuY2dpP2lkPTIwNDI0MQpTaWduZWQtb2ZmLWJ5
OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvdXZkX3Y3XzAuYyB8IDMzICsrKysrKysrKysrKysrKysrKy0tLS0t
LS0tLQogMSBmaWxlIGNoYW5nZWQsIDIyIGluc2VydGlvbnMoKyksIDExIGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3V2ZF92N18wLmMgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS91dmRfdjdfMC5jCmluZGV4IDAxZjY1OGZhNzJjNi4uMDk5
NTM3OGQ4MjYzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS91dmRfdjdf
MC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3V2ZF92N18wLmMKQEAgLTIxNCwx
MyArMjE0LDE0IEBAIHN0YXRpYyBpbnQgdXZkX3Y3XzBfZW5jX3JpbmdfdGVzdF9yaW5nKHN0cnVj
dCBhbWRncHVfcmluZyAqcmluZykKICAqIE9wZW4gdXAgYSBzdHJlYW0gZm9yIEhXIHRlc3QKICAq
Lwogc3RhdGljIGludCB1dmRfdjdfMF9lbmNfZ2V0X2NyZWF0ZV9tc2coc3RydWN0IGFtZGdwdV9y
aW5nICpyaW5nLCB1aW50MzJfdCBoYW5kbGUsCisJCQkJICAgICAgIHN0cnVjdCBhbWRncHVfYm8g
KmJvLAogCQkJCSAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVuY2UpCiB7CiAJY29uc3QgdW5z
aWduZWQgaWJfc2l6ZV9kdyA9IDE2OwogCXN0cnVjdCBhbWRncHVfam9iICpqb2I7CiAJc3RydWN0
IGFtZGdwdV9pYiAqaWI7CiAJc3RydWN0IGRtYV9mZW5jZSAqZiA9IE5VTEw7Ci0JdWludDY0X3Qg
ZHVtbXk7CisJdWludDY0X3QgYWRkcjsKIAlpbnQgaSwgcjsKIAogCXIgPSBhbWRncHVfam9iX2Fs
bG9jX3dpdGhfaWIocmluZy0+YWRldiwgaWJfc2l6ZV9kdyAqIDQsICZqb2IpOwpAQCAtMjI4LDE1
ICsyMjksMTUgQEAgc3RhdGljIGludCB1dmRfdjdfMF9lbmNfZ2V0X2NyZWF0ZV9tc2coc3RydWN0
IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50MzJfdCBoYW5kbGUKIAkJcmV0dXJuIHI7CiAKIAlpYiA9
ICZqb2ItPmlic1swXTsKLQlkdW1teSA9IGliLT5ncHVfYWRkciArIDEwMjQ7CisJYWRkciA9IGFt
ZGdwdV9ib19ncHVfb2Zmc2V0KGJvKTsKIAogCWliLT5sZW5ndGhfZHcgPSAwOwogCWliLT5wdHJb
aWItPmxlbmd0aF9kdysrXSA9IDB4MDAwMDAwMTg7CiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3Kytd
ID0gMHgwMDAwMDAwMTsgLyogc2Vzc2lvbiBpbmZvICovCiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3
KytdID0gaGFuZGxlOwogCWliLT5wdHJbaWItPmxlbmd0aF9kdysrXSA9IDB4MDAwMDAwMDA7Ci0J
aWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0gdXBwZXJfMzJfYml0cyhkdW1teSk7Ci0JaWItPnB0
cltpYi0+bGVuZ3RoX2R3KytdID0gZHVtbXk7CisJaWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0g
dXBwZXJfMzJfYml0cyhhZGRyKTsKKwlpYi0+cHRyW2liLT5sZW5ndGhfZHcrK10gPSBhZGRyOwog
CiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0gMHgwMDAwMDAxNDsKIAlpYi0+cHRyW2liLT5s
ZW5ndGhfZHcrK10gPSAweDAwMDAwMDAyOyAvKiB0YXNrIGluZm8gKi8KQEAgLTI3NSwxMyArMjc2
LDE0IEBAIHN0YXRpYyBpbnQgdXZkX3Y3XzBfZW5jX2dldF9jcmVhdGVfbXNnKHN0cnVjdCBhbWRn
cHVfcmluZyAqcmluZywgdWludDMyX3QgaGFuZGxlCiAgKiBDbG9zZSB1cCBhIHN0cmVhbSBmb3Ig
SFcgdGVzdCBvciBpZiB1c2Vyc3BhY2UgZmFpbGVkIHRvIGRvIHNvCiAgKi8KIHN0YXRpYyBpbnQg
dXZkX3Y3XzBfZW5jX2dldF9kZXN0cm95X21zZyhzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsIHVp
bnQzMl90IGhhbmRsZSwKLQkJCQlzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVuY2UpCisJCQkJCXN0cnVj
dCBhbWRncHVfYm8gKmJvLAorCQkJCQlzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVuY2UpCiB7CiAJY29u
c3QgdW5zaWduZWQgaWJfc2l6ZV9kdyA9IDE2OwogCXN0cnVjdCBhbWRncHVfam9iICpqb2I7CiAJ
c3RydWN0IGFtZGdwdV9pYiAqaWI7CiAJc3RydWN0IGRtYV9mZW5jZSAqZiA9IE5VTEw7Ci0JdWlu
dDY0X3QgZHVtbXk7CisJdWludDY0X3QgYWRkcjsKIAlpbnQgaSwgcjsKIAogCXIgPSBhbWRncHVf
am9iX2FsbG9jX3dpdGhfaWIocmluZy0+YWRldiwgaWJfc2l6ZV9kdyAqIDQsICZqb2IpOwpAQCAt
Mjg5LDE1ICsyOTEsMTUgQEAgc3RhdGljIGludCB1dmRfdjdfMF9lbmNfZ2V0X2Rlc3Ryb3lfbXNn
KHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywgdWludDMyX3QgaGFuZGwKIAkJcmV0dXJuIHI7CiAK
IAlpYiA9ICZqb2ItPmlic1swXTsKLQlkdW1teSA9IGliLT5ncHVfYWRkciArIDEwMjQ7CisJYWRk
ciA9IGFtZGdwdV9ib19ncHVfb2Zmc2V0KGJvKTsKIAogCWliLT5sZW5ndGhfZHcgPSAwOwogCWli
LT5wdHJbaWItPmxlbmd0aF9kdysrXSA9IDB4MDAwMDAwMTg7CiAJaWItPnB0cltpYi0+bGVuZ3Ro
X2R3KytdID0gMHgwMDAwMDAwMTsKIAlpYi0+cHRyW2liLT5sZW5ndGhfZHcrK10gPSBoYW5kbGU7
CiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0gMHgwMDAwMDAwMDsKLQlpYi0+cHRyW2liLT5s
ZW5ndGhfZHcrK10gPSB1cHBlcl8zMl9iaXRzKGR1bW15KTsKLQlpYi0+cHRyW2liLT5sZW5ndGhf
ZHcrK10gPSBkdW1teTsKKwlpYi0+cHRyW2liLT5sZW5ndGhfZHcrK10gPSB1cHBlcl8zMl9iaXRz
KGFkZHIpOworCWliLT5wdHJbaWItPmxlbmd0aF9kdysrXSA9IGFkZHI7CiAKIAlpYi0+cHRyW2li
LT5sZW5ndGhfZHcrK10gPSAweDAwMDAwMDE0OwogCWliLT5wdHJbaWItPmxlbmd0aF9kdysrXSA9
IDB4MDAwMDAwMDI7CkBAIC0zMzQsMTMgKzMzNiwyMCBAQCBzdGF0aWMgaW50IHV2ZF92N18wX2Vu
Y19nZXRfZGVzdHJveV9tc2coc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50MzJfdCBoYW5k
bAogc3RhdGljIGludCB1dmRfdjdfMF9lbmNfcmluZ190ZXN0X2liKHN0cnVjdCBhbWRncHVfcmlu
ZyAqcmluZywgbG9uZyB0aW1lb3V0KQogewogCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlID0gTlVM
TDsKKwlzdHJ1Y3QgYW1kZ3B1X2JvICpibyA9IE5VTEw7CiAJbG9uZyByOwogCi0JciA9IHV2ZF92
N18wX2VuY19nZXRfY3JlYXRlX21zZyhyaW5nLCAxLCBOVUxMKTsKKwlyID0gYW1kZ3B1X2JvX2Ny
ZWF0ZV9yZXNlcnZlZChyaW5nLT5hZGV2LCAxMjggKiAxMDI0LCBQQUdFX1NJWkUsCisJCQkJICAg
ICAgQU1ER1BVX0dFTV9ET01BSU5fVlJBTSwKKwkJCQkgICAgICAmYm8sIE5VTEwsIE5VTEwpOwor
CWlmIChyKQorCQlyZXR1cm4gcjsKKworCXIgPSB1dmRfdjdfMF9lbmNfZ2V0X2NyZWF0ZV9tc2co
cmluZywgMSwgYm8sIE5VTEwpOwogCWlmIChyKQogCQlnb3RvIGVycm9yOwogCi0JciA9IHV2ZF92
N18wX2VuY19nZXRfZGVzdHJveV9tc2cocmluZywgMSwgJmZlbmNlKTsKKwlyID0gdXZkX3Y3XzBf
ZW5jX2dldF9kZXN0cm95X21zZyhyaW5nLCAxLCBibywgJmZlbmNlKTsKIAlpZiAocikKIAkJZ290
byBlcnJvcjsKIApAQCAtMzUyLDYgKzM2MSw4IEBAIHN0YXRpYyBpbnQgdXZkX3Y3XzBfZW5jX3Jp
bmdfdGVzdF9pYihzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsIGxvbmcgdGltZW91dCkKIAogZXJy
b3I6CiAJZG1hX2ZlbmNlX3B1dChmZW5jZSk7CisJYW1kZ3B1X2JvX3VucmVzZXJ2ZShibyk7CisJ
YW1kZ3B1X2JvX3VucmVmKCZibyk7CiAJcmV0dXJuIHI7CiB9CiAKLS0gCjIuMjMuMAoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5n
IGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
