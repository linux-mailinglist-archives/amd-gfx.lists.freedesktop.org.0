Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2553310C2DB
	for <lists+amd-gfx@lfdr.de>; Thu, 28 Nov 2019 04:32:07 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CEEF66E58A;
	Thu, 28 Nov 2019 03:32:04 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM01-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr820059.outbound.protection.outlook.com [40.107.82.59])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 51DBC6E58A
 for <amd-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 03:32:03 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=MuJn4z2UhWhC39kNQzE/nV077b144Zkzfg0pw1c4/4iU7uZawzRs2idtwkyZsIiTS3CsI0xV/+8jeZfpTmjxZQhkyGwdghlFDPfToxgM5+rNh6LXGchbPk2VW6L56BIDkeAiPmWqKeN7/+LriFIeueVQDbOYeNmywa+J5EMkLzglcnFN3/r5EGCfJRxN9/VZtcNmLhe9/moqpezD7ob7PQVg7j6Ej7nanCaYOMRjtP+hbnRu4E3z6A/0BWtcX4YQEC4frO+6p7r0QBhpzemnOXJoagGL1olYJgaoeE0GcWeHMLquvw/MflYARdkp4itP15/QG39jaIa5qp8QFLaQnw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=foLH6cHsSaGlxrugKkfptzbuzYiumx8rWSz/9IcsiNg=;
 b=Pn/ZVI3jTlOE36ts0PpVQ8QrxJgPTTfwuL+80w04r+ae4yE8PNgLvONChiuEnWxfJXdUglrcBW8AoBuQxdBgY4hTt9qiSXTDeJDLmDO6wb4BT5iXynm+yLljN9bnVNRRU3biV4y7XzbR0eDZG4wuxxD9NuvKbuhhBWw2k4DRoRFeB8uPfbwxCQJYQZtV457C0rfI0Hr82PJgjHx9Ehm3Nmdf9bXcl2/6jXYTR5cqm74PWAF/z7z7JLgEZjcx610FwC5MSe6/HDpzHkQjV00EoyVYPmqch9RZ+cA/fczBwPCyGDRbiC/GgIDxt4lUK1PJLS/quVlkoVlMOb8ag4AZYw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB3087.namprd12.prod.outlook.com (20.178.244.160) by
 MN2PR12MB4336.namprd12.prod.outlook.com (52.135.51.137) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2474.19; Thu, 28 Nov 2019 03:32:01 +0000
Received: from MN2PR12MB3087.namprd12.prod.outlook.com
 ([fe80::cccb:bf15:7930:7a15]) by MN2PR12MB3087.namprd12.prod.outlook.com
 ([fe80::cccb:bf15:7930:7a15%5]) with mapi id 15.20.2474.023; Thu, 28 Nov 2019
 03:32:01 +0000
From: "Yuan, Xiaojie" <Xiaojie.Yuan@amd.com>
To: "Liu, Monk" <Monk.Liu@amd.com>, "Deucher, Alexander"
 <Alexander.Deucher@amd.com>, "Koenig, Christian" <Christian.Koenig@amd.com>,
 "Zhang, Hawking" <Hawking.Zhang@amd.com>, "Xiao, Jack" <Jack.Xiao@amd.com>
Subject: Re: [PATCH 5/5] drm/amdgpu: fix calltrace during kmd unload
Thread-Topic: [PATCH 5/5] drm/amdgpu: fix calltrace during kmd unload
Thread-Index: AQHVpE+9VL5hSXtN4U6/WOvxhiRHPqedbPNogAJ4h4CAAAhJkw==
Date: Thu, 28 Nov 2019 03:32:01 +0000
Message-ID: <MN2PR12MB3087CC85D346F3135D97EEC489470@MN2PR12MB3087.namprd12.prod.outlook.com>
References: <1574769024-30611-1-git-send-email-Monk.Liu@amd.com>,
 <1574769024-30611-5-git-send-email-Monk.Liu@amd.com>
 <7D1BEE15-D37F-4821-9DFF-CC1DD258A2CB@amd.com>,
 <MN2PR12MB3933457BEF5A0AAAC37BE79184470@MN2PR12MB3933.namprd12.prod.outlook.com>
In-Reply-To: <MN2PR12MB3933457BEF5A0AAAC37BE79184470@MN2PR12MB3933.namprd12.prod.outlook.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Enabled=True;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_SetDate=2019-11-28T03:32:00.378Z;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Name=Internal
 Distribution
 Only; MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_ContentBits=0;
 MSIP_Label_76546daa-41b6-470c-bb85-f6f40f044d7f_Method=Standard; 
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: dc8c670b-867a-4186-ca64-08d773b387ed
x-ms-traffictypediagnostic: MN2PR12MB4336:|MN2PR12MB4336:
x-ms-exchange-purlcount: 1
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <MN2PR12MB4336EBE8E85FE958302E179589470@MN2PR12MB4336.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:8273;
x-forefront-prvs: 0235CBE7D0
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(136003)(346002)(366004)(39860400002)(376002)(396003)(199004)(189003)(13464003)(51914003)(66066001)(478600001)(9686003)(6246003)(110136005)(33656002)(14454004)(99286004)(7736002)(14444005)(6436002)(45080400002)(74316002)(256004)(52536014)(4326008)(966005)(5660300002)(305945005)(71190400001)(66946007)(2906002)(55016002)(66446008)(66556008)(76176011)(6636002)(91956017)(53546011)(81156014)(6306002)(102836004)(81166006)(7696005)(186003)(71200400001)(6506007)(26005)(76116006)(6116002)(8936002)(3846002)(316002)(11346002)(8676002)(446003)(86362001)(66476007)(25786009)(64756008)(229853002)(921003)(1121003)(357404004);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB4336;
 H:MN2PR12MB3087.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: tZ7hKyOesyKKbuJ70DwDcfN5PjBOPVZ+xrVg/0KC84cWLtJd4Jhem2JUgaTHo+8LefWPlxtTNyhYc+OJC7+AjMUC9/nraYdPL+Kjw5LGZcPJxNZx2L2aC2MI4jXgb4hVv3xy6y7HHtEMXT/sGvcYqdOcadKHnKEcpCuyLsjSPnr6Hzjyo6HfHVzAR/Lx6j7JHTcN3u9CgGuB04l56RJJ2hLO/rjNY11PEJdCc+adLiC9PML0V2JoH+ED5N/XJ3yCEYJgZVKeoMh+OQSkTM9+j7BWxc0pDXNJZ8L6DfFr8kHVPJORSN31ud5F87noA2kyA6hdjZqV0Mmp6BZON5I5AjYmLmnoQWLhKWl9H2xX713l790c2gWvWr4QhKqHcpgyCeMWiKmdoxuIEk+CL1HfyrjTpDMrchxxg/TVKNifyil9A2lWdOHQa44SpstfOYFU
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: dc8c670b-867a-4186-ca64-08d773b387ed
X-MS-Exchange-CrossTenant-originalarrivaltime: 28 Nov 2019 03:32:01.0814 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: 9yMPlKdLUco2czNvWlL+hXuR5QOSmmUrujEDqx4yaaBKV71enMGx5NBv8x0hKkxY
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB4336
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=foLH6cHsSaGlxrugKkfptzbuzYiumx8rWSz/9IcsiNg=;
 b=etdut0eEn6iWKKcUWGs1VzEq/iO6kpozV/SsysB7/6Ry0zQpbo/ByUJZJ2rZ7CCuE6Y+hun4rJ7L40tiH81rKZ828NW2YpQShn+99YXgP1szp7+q3NBO2Dj2bsmEXzw/Y4NkLR6oEVFK6yWu4Q0WOLVnDq+UrQk84/+eZRqbfCs=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Xiaojie.Yuan@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seSAtIEludGVybmFsIERpc3RyaWJ1dGlvbiBPbmx5XQoKSGkg
TW9uaywKCkFzIGxvbmcgYXMgdGhlIGNvbnRlbnQgb2YgQ1NJQiB3b24ndCBiZSBjaGFuZ2VkIGJ5
IENQIEZXIGluIHJ1bnRpbWUsIEkgaGF2ZSBubyBvYmplY3Rpb24gdG8gJ3JlLWluaXRpYWxpemUg
YWZ0ZXIgUzMgcmVzdW1lJy4KSSBhbSBub3QgcXVpdGUgc3VyZSBhYm91dCB0aGUgYWN0dWFsIGJl
aGF2aW9yLCBsZXQgbWUgZG8gYW4gZXhwZXJpbWVudCB0byBjb25maXJtIHRoYXQgYW5kIGFkZCBI
YXdraW5nIC8gSmFjayB3aG8gYWRkcyB0aGUgb3JpZ2luYWwgQ1NJQiBjb2RlIGZvciBjb21tZW50
LgoKQlRXLCBub3RlIHRoYXQgSSByZWNlbnRseSBoYXMgYSBwYXRjaCB0byByZS1pbml0aWFsaXpl
IENTSUIgaW4gYmFjbyBzZXF1ZW5jZSwgcGxlYXNlIGNvbnNpZGVyIHRvIHNxdWFzaCBpdCB3aGVu
IG1ha2luZyB5b3VyIGZpbmFsIGZpeDoKCmNvbW1pdCBjODQ5NDQ5N2ZlYjAwNTBhNjYxMjhjYTYy
NmYzODgzZDZmMDhkNzgzCkF1dGhvcjogWGlhb2ppZSBZdWFuIDx4aWFvamllLnl1YW5AYW1kLmNv
bT4KRGF0ZTogICBXZWQgTm92IDIwIDE0OjAyOjIyIDIwMTkgKzA4MDAKCiAgICBkcm0vYW1kZ3B1
L2dmeDEwOiByZS1pbml0IGNsZWFyIHN0YXRlIGJ1ZmZlciBhZnRlciBncHUgcmVzZXQKCiAgICBU
aGlzIHBhdGNoIGZpeGVzIDJuZCBiYWNvIHJlc2V0IGZhaWx1cmUgd2l0aCBnZnhvZmYgZW5hYmxl
ZCBvbiBuYXZpMXguCgogICAgY2xlYXIgc3RhdGUgYnVmZmVyIChyZXNpZGVzIGluIHZyYW0pIGlz
IGNvcnJ1cHRlZCBhZnRlciAxc3QgYmFjbyByZXNldCwKICAgIHVwb24gZ2Z4b2ZmIGV4aXQsIENQ
RiBnZXRzIGdhcmJhZ2UgaGVhZGVyIGluIENTSUIgYW5kIGhhbmdzLgoKICAgIFNpZ25lZC1vZmYt
Ynk6IFhpYW9qaWUgWXVhbiA8eGlhb2ppZS55dWFuQGFtZC5jb20+CiAgICBSZXZpZXdlZC1ieTog
SGF3a2luZyBaaGFuZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPgogICAgU2lnbmVkLW9mZi1ieTog
QWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgoKQlIsClhpYW9qaWUKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KRnJvbTogTGl1LCBNb25rIDxN
b25rLkxpdUBhbWQuY29tPgpTZW50OiBUaHVyc2RheSwgTm92ZW1iZXIgMjgsIDIwMTkgMTA6NTMg
QU0KVG86IFl1YW4sIFhpYW9qaWU7IERldWNoZXIsIEFsZXhhbmRlcjsgS29lbmlnLCBDaHJpc3Rp
YW4KQ2M6IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnClN1YmplY3Q6IFJFOiBbUEFUQ0gg
NS81XSBkcm0vYW1kZ3B1OiBmaXggY2FsbHRyYWNlIGR1cmluZyBrbWQgdW5sb2FkCgpIaSBYaWFv
amllCgpGb3IgU1JJT1Ygd2UgZG9uJ3QgdXNlIHN1c3BlbmQgc28gSSBkaWRuJ3QgdGhpbmsgdG8g
dGhhdCBwYXJ0LCB0aGFua3MgZm9yIHRoZSByZW1pbmQgIQpCdXQgd2Ugc3RpbGwgbmVlZCB0byBm
aXggdGhpcyBjYWxsIHRyYWNlIGlzc3VlIGFueXdheSAob3VyIGplbmtpbnMgdGVzdGluZyAgc3lz
dGVtIGNvbnNpZGVyIHN1Y2ggY2FsbCB0cmFjZSBhcyBhbiBlcnJvciApCgpIb3cgYWJvdXQgd2Ug
ZG8gIiAgYWRldi0+Z2Z4LnJsYy5mdW5jcy0+Z2V0X2NzYl9idWZmZXIoYWRldiwgZHN0X3B0cik7
IiBpbiB0aGUgaHdfaW5pdCgpID8gdGhpcyB3YXkKWW91IGRvbid0IG5lZWQgdG8gZXZpY3QgdGhl
IENTSUIgZHVyaW5nIHN1c3BlbmQgYW5kIHRoZSBDU0lCIGFsd2F5cyB3aWxsIGJlIHJlLWluaXRp
YWxpemVkIGFmdGVyIFMzIHJlc3VtZSA/CgpARGV1Y2hlciwgQWxleGFuZGVyIEBLb2VuaWcsIENo
cmlzdGlhbiB3aGF0J3MgeW91ciBvcGluaW9uID8KX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpNb25rIExpdXxHUFUgVmlydHVhbGl6YXRpb24gVGVhbSB8QU1ECgoKLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0KRnJvbTogWXVhbiwgWGlhb2ppZSA8WGlhb2ppZS5ZdWFuQGFt
ZC5jb20+ClNlbnQ6IFR1ZXNkYXksIE5vdmVtYmVyIDI2LCAyMDE5IDk6MTAgUE0KVG86IExpdSwg
TW9uayA8TW9uay5MaXVAYW1kLmNvbT4KQ2M6IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
ClN1YmplY3Q6IFJlOiBbUEFUQ0ggNS81XSBkcm0vYW1kZ3B1OiBmaXggY2FsbHRyYWNlIGR1cmlu
ZyBrbWQgdW5sb2FkCgpIaSBNb25rLAoKaHdfZmluaSgpIGlzIGNhbGxlZCBpbiBzdXNwZW5kIGNv
ZGUgcGF0aCBhcyB3ZWxsLiBJJ20gd29uZGVyaW5nIGhvdyBjc2IgY2FuIGJlIGV2aWN0ZWQgaWYg
aXQncyBub3QgdW5waW5lZCBiZWZvcmUgc3VzcGVuZC4KCkJSLApYaWFvamllCgo+IE9uIE5vdiAy
NiwgMjAxOSwgYXQgNzo1MCBQTSwgTW9uayBMaXUgPE1vbmsuTGl1QGFtZC5jb20+IHdyb3RlOgo+
Cj4ga2VybmVsIHdvdWxkIHJlcG9ydCBhIHdhcm5pbmcgb24gZG91YmxlIHVucGluIG9uIHRoZSBj
c2IgQk8gYmVjYXVzZSB3ZQo+IHVucGluIGl0IGR1cmluZyBod19maW5pIGJ1dCBhY3R1YWxseSB3
ZSBkb24ndCBuZWVkIHRvIHBpbi91bnBpbiBpdAo+IGR1cmluZyBod19pbml0L2Zpbmkgc2luY2Ug
aXQgaXMgY3JlYXRlZCB3aXRoIGtlcm5lbCBwaW5uZWQKPgo+IHJlbW92ZSBhbGwgdGhvc2UgdXNl
bGVzcyBjb2RlIGZvciBnZng5LzEwCj4KPiBTaWduZWQtb2ZmLWJ5OiBNb25rIExpdSA8TW9uay5M
aXVAYW1kLmNvbT4KPiAtLS0KPiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmxj
LmMgfCAgMSAtCj4gZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3YxMF8wLmMgIHwgMzgg
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBkcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9nZnhfdjlfMC5jICAgfCAzOSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
PiAzIGZpbGVzIGNoYW5nZWQsIDc4IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9ybGMuYwo+IGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3JsYy5jCj4gaW5kZXggYzg3OTNlNi4uMjg5ZmFkYSAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmxjLmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmxjLmMKPiBAQCAtMTQ1LDcgKzE0NSw2IEBA
IGludCBhbWRncHVfZ2Z4X3JsY19pbml0X2NzYihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikK
PiAgICBkc3RfcHRyID0gYWRldi0+Z2Z4LnJsYy5jc19wdHI7Cj4gICAgYWRldi0+Z2Z4LnJsYy5m
dW5jcy0+Z2V0X2NzYl9idWZmZXIoYWRldiwgZHN0X3B0cik7Cj4gICAgYW1kZ3B1X2JvX2t1bm1h
cChhZGV2LT5nZngucmxjLmNsZWFyX3N0YXRlX29iaik7Cj4gLSAgICBhbWRncHVfYm9fdW5waW4o
YWRldi0+Z2Z4LnJsYy5jbGVhcl9zdGF0ZV9vYmopOwo+ICAgIGFtZGdwdV9ib191bnJlc2VydmUo
YWRldi0+Z2Z4LnJsYy5jbGVhcl9zdGF0ZV9vYmopOwo+Cj4gICAgcmV0dXJuIDA7Cj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92MTBfMC5jCj4gYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjEwXzAuYwo+IGluZGV4IGE1NmNiYTkuLjVlZTc0Njcg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3YxMF8wLmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjEwXzAuYwo+IEBAIC05OTYsMzkg
Kzk5Niw2IEBAIHN0YXRpYyBpbnQgZ2Z4X3YxMF8wX3JsY19pbml0KHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KQo+ICAgIHJldHVybiAwOwo+IH0KPgo+IC1zdGF0aWMgaW50IGdmeF92MTBfMF9j
c2JfdnJhbV9waW4oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpIC17Cj4gLSAgICBpbnQgcjsK
PiAtCj4gLSAgICByID0gYW1kZ3B1X2JvX3Jlc2VydmUoYWRldi0+Z2Z4LnJsYy5jbGVhcl9zdGF0
ZV9vYmosIGZhbHNlKTsKPiAtICAgIGlmICh1bmxpa2VseShyICE9IDApKQo+IC0gICAgICAgIHJl
dHVybiByOwo+IC0KPiAtICAgIHIgPSBhbWRncHVfYm9fcGluKGFkZXYtPmdmeC5ybGMuY2xlYXJf
c3RhdGVfb2JqLAo+IC0gICAgICAgICAgICBBTURHUFVfR0VNX0RPTUFJTl9WUkFNKTsKPiAtICAg
IGlmICghcikKPiAtICAgICAgICBhZGV2LT5nZngucmxjLmNsZWFyX3N0YXRlX2dwdV9hZGRyID0K
PiAtICAgICAgICAgICAgYW1kZ3B1X2JvX2dwdV9vZmZzZXQoYWRldi0+Z2Z4LnJsYy5jbGVhcl9z
dGF0ZV9vYmopOwo+IC0KPiAtICAgIGFtZGdwdV9ib191bnJlc2VydmUoYWRldi0+Z2Z4LnJsYy5j
bGVhcl9zdGF0ZV9vYmopOwo+IC0KPiAtICAgIHJldHVybiByOwo+IC19Cj4gLQo+IC1zdGF0aWMg
dm9pZCBnZnhfdjEwXzBfY3NiX3ZyYW1fdW5waW4oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
IC17Cj4gLSAgICBpbnQgcjsKPiAtCj4gLSAgICBpZiAoIWFkZXYtPmdmeC5ybGMuY2xlYXJfc3Rh
dGVfb2JqKQo+IC0gICAgICAgIHJldHVybjsKPiAtCj4gLSAgICByID0gYW1kZ3B1X2JvX3Jlc2Vy
dmUoYWRldi0+Z2Z4LnJsYy5jbGVhcl9zdGF0ZV9vYmosIHRydWUpOwo+IC0gICAgaWYgKGxpa2Vs
eShyID09IDApKSB7Cj4gLSAgICAgICAgYW1kZ3B1X2JvX3VucGluKGFkZXYtPmdmeC5ybGMuY2xl
YXJfc3RhdGVfb2JqKTsKPiAtICAgICAgICBhbWRncHVfYm9fdW5yZXNlcnZlKGFkZXYtPmdmeC5y
bGMuY2xlYXJfc3RhdGVfb2JqKTsKPiAtICAgIH0KPiAtfQo+IC0KPiBzdGF0aWMgdm9pZCBnZnhf
djEwXzBfbWVjX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpIHsKPiAgICBhbWRncHVf
Ym9fZnJlZV9rZXJuZWwoJmFkZXYtPmdmeC5tZWMuaHBkX2VvcF9vYmosIE5VTEwsIE5VTEwpOyBA
QAo+IC0zNzgwLDEwICszNzQ3LDYgQEAgc3RhdGljIGludCBnZnhfdjEwXzBfaHdfaW5pdCh2b2lk
ICpoYW5kbGUpCj4gICAgaW50IHI7Cj4gICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7Cj4KPiAtICAgIHIgPSBnZnhfdjEwXzBfY3Ni
X3ZyYW1fcGluKGFkZXYpOwo+IC0gICAgaWYgKHIpCj4gLSAgICAgICAgcmV0dXJuIHI7Cj4gLQo+
ICAgIGlmICghYW1kZ3B1X2VtdV9tb2RlKQo+ICAgICAgICBnZnhfdjEwXzBfaW5pdF9nb2xkZW5f
cmVnaXN0ZXJzKGFkZXYpOwo+Cj4gQEAgLTM4NzEsNyArMzgzNCw2IEBAIHN0YXRpYyBpbnQgZ2Z4
X3YxMF8wX2h3X2Zpbmkodm9pZCAqaGFuZGxlKQo+ICAgIH0KPiAgICBnZnhfdjEwXzBfY3BfZW5h
YmxlKGFkZXYsIGZhbHNlKTsKPiAgICBnZnhfdjEwXzBfZW5hYmxlX2d1aV9pZGxlX2ludGVycnVw
dChhZGV2LCBmYWxzZSk7Cj4gLSAgICBnZnhfdjEwXzBfY3NiX3ZyYW1fdW5waW4oYWRldik7Cj4K
PiAgICByZXR1cm4gMDsKPiB9Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2dmeF92OV8wLmMKPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92OV8wLmMK
PiBpbmRleCA0Y2MyZTUwLi41MjRhN2JhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2dmeF92OV8wLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
ZnhfdjlfMC5jCj4gQEAgLTE2ODMsMzkgKzE2ODMsNiBAQCBzdGF0aWMgaW50IGdmeF92OV8wX3Js
Y19pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgIHJldHVybiAwOwo+IH0KPgo+
IC1zdGF0aWMgaW50IGdmeF92OV8wX2NzYl92cmFtX3BpbihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikgLXsKPiAtICAgIGludCByOwo+IC0KPiAtICAgIHIgPSBhbWRncHVfYm9fcmVzZXJ2ZShh
ZGV2LT5nZngucmxjLmNsZWFyX3N0YXRlX29iaiwgZmFsc2UpOwo+IC0gICAgaWYgKHVubGlrZWx5
KHIgIT0gMCkpCj4gLSAgICAgICAgcmV0dXJuIHI7Cj4gLQo+IC0gICAgciA9IGFtZGdwdV9ib19w
aW4oYWRldi0+Z2Z4LnJsYy5jbGVhcl9zdGF0ZV9vYmosCj4gLSAgICAgICAgICAgIEFNREdQVV9H
RU1fRE9NQUlOX1ZSQU0pOwo+IC0gICAgaWYgKCFyKQo+IC0gICAgICAgIGFkZXYtPmdmeC5ybGMu
Y2xlYXJfc3RhdGVfZ3B1X2FkZHIgPQo+IC0gICAgICAgICAgICBhbWRncHVfYm9fZ3B1X29mZnNl
dChhZGV2LT5nZngucmxjLmNsZWFyX3N0YXRlX29iaik7Cj4gLQo+IC0gICAgYW1kZ3B1X2JvX3Vu
cmVzZXJ2ZShhZGV2LT5nZngucmxjLmNsZWFyX3N0YXRlX29iaik7Cj4gLQo+IC0gICAgcmV0dXJu
IHI7Cj4gLX0KPiAtCj4gLXN0YXRpYyB2b2lkIGdmeF92OV8wX2NzYl92cmFtX3VucGluKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2KSAtewo+IC0gICAgaW50IHI7Cj4gLQo+IC0gICAgaWYgKCFh
ZGV2LT5nZngucmxjLmNsZWFyX3N0YXRlX29iaikKPiAtICAgICAgICByZXR1cm47Cj4gLQo+IC0g
ICAgciA9IGFtZGdwdV9ib19yZXNlcnZlKGFkZXYtPmdmeC5ybGMuY2xlYXJfc3RhdGVfb2JqLCB0
cnVlKTsKPiAtICAgIGlmIChsaWtlbHkociA9PSAwKSkgewo+IC0gICAgICAgIGFtZGdwdV9ib191
bnBpbihhZGV2LT5nZngucmxjLmNsZWFyX3N0YXRlX29iaik7Cj4gLSAgICAgICAgYW1kZ3B1X2Jv
X3VucmVzZXJ2ZShhZGV2LT5nZngucmxjLmNsZWFyX3N0YXRlX29iaik7Cj4gLSAgICB9Cj4gLX0K
PiAtCj4gc3RhdGljIHZvaWQgZ2Z4X3Y5XzBfbWVjX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpIHsKPiAgICBhbWRncHVfYm9fZnJlZV9rZXJuZWwoJmFkZXYtPmdmeC5tZWMuaHBkX2Vv
cF9vYmosIE5VTEwsIE5VTEwpOyBAQAo+IC0zNjk0LDEwICszNjYxLDYgQEAgc3RhdGljIGludCBn
ZnhfdjlfMF9od19pbml0KHZvaWQgKmhhbmRsZSkKPgo+ICAgIGdmeF92OV8wX2NvbnN0YW50c19p
bml0KGFkZXYpOwo+Cj4gLSAgICByID0gZ2Z4X3Y5XzBfY3NiX3ZyYW1fcGluKGFkZXYpOwo+IC0g
ICAgaWYgKHIpCj4gLSAgICAgICAgcmV0dXJuIHI7Cj4gLQo+ICAgIHIgPSBhZGV2LT5nZngucmxj
LmZ1bmNzLT5yZXN1bWUoYWRldik7Cj4gICAgaWYgKHIpCj4gICAgICAgIHJldHVybiByOwo+IEBA
IC0zNzc5LDggKzM3NDIsNiBAQCBzdGF0aWMgaW50IGdmeF92OV8wX2h3X2Zpbmkodm9pZCAqaGFu
ZGxlKQo+ICAgIGdmeF92OV8wX2NwX2VuYWJsZShhZGV2LCBmYWxzZSk7Cj4gICAgYWRldi0+Z2Z4
LnJsYy5mdW5jcy0+c3RvcChhZGV2KTsKPgo+IC0gICAgZ2Z4X3Y5XzBfY3NiX3ZyYW1fdW5waW4o
YWRldik7Cj4gLQo+ICAgIHJldHVybiAwOwo+IH0KPgo+IC0tCj4gMi43LjQKPgo+IF9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gYW1kLWdmeCBtYWlsaW5n
IGxpc3QKPiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbmFtMTEuc2Fm
ZWxpbmtzLnByb3RlY3Rpb24ub3V0bG9vay5jb20vP3VybD1odHRwcyUzQSUyRiUyRmxpc3QKPiBz
LmZyZWVkZXNrdG9wLm9yZyUyRm1haWxtYW4lMkZsaXN0aW5mbyUyRmFtZC1nZngmYW1wO2RhdGE9
MDIlN0MwMSU3Q1hpCj4gYW9qaWUuWXVhbiU0MGFtZC5jb20lN0M2NWUxNjJlNTA5ZWE0YTkwZjc5
MzA4ZDc3MjY2ZGU2NSU3QzNkZDg5NjFmZTQ4OAo+IDRlNjA4ZTExYTgyZDk5NGUxODNkJTdDMCU3
QzAlN0M2MzcxMDM2NTg0NjQ1MTI3NTEmYW1wO3NkYXRhPXI1ZnBpZDVJc1AKPiA4YW56ZyUyRlpJ
WUhuME44eGNlQnZHN3J0Ukc4MCUyQjc4NjhvJTNEJmFtcDtyZXNlcnZlZD0wCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0
CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
