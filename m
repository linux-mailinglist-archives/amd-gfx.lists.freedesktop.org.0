Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7B8EB37940C
	for <lists+amd-gfx@lfdr.de>; Mon, 10 May 2021 18:36:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6E00C6E88B;
	Mon, 10 May 2021 16:36:50 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM11-CO1-obe.outbound.protection.outlook.com
 (mail-co1nam11on2050.outbound.protection.outlook.com [40.107.220.50])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 17C5C6E88B;
 Mon, 10 May 2021 16:36:49 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=DTe+9Al9HPlBMoLwvE/CRIAu3vCgw3JyUnpdLKjRJSA/BxFkoMpnmn2xIThK1KpRdljEshno9hw+9yO84hdxzI5fVMqC+012/KYJFytA/da50iPXGU5dn5lwJoxP24IuqSQf53MSQFVQBCpOrNL/2Z6O4d+mxUGwdyACbxCFmgl2ZH/dORBmc7cwm63vd4x0XrLL5LzLs7DIt3TvKEfrQGAlf+BTDIX3flBRB8jFPAdD20hMFFA2L0SHWLOeeHWrf7EvsmDb9yosW9dxJWvnjQ7zqziImST/uMFI4EDWG9aGzhfNk91MaSbCNB2xJnZ7z4JnNTYPgMoiHuZ64egZdg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=9x9LOr31QXQh26mL0MRx+84J3JNefHzW2myk9ZEcHMw=;
 b=Mf6DhPPQRHmqOgfLc2fsOWZ6kXTbDV5HoNUdJFGLFemDpWfBmeYsToJAxnqIel66PZLjDwXcReyaqwbVoPybpyihyAIm4dTNzDHBUiqTnwkWLfHDRwGpn5wNopnckLgv31YlebsNPVBNVs5KEZcH8oRIGn8QqRfQsC5YewZN7LiPPmE/l+hY1mki2G4dLD3WuTGHIxg4Rnwbx5i69vnf6uJ3ZUTANXRIwQUsaskWRLsXxTRS0AD+Rzt5nlj43TsA51n6CeMaBukPOuqJBHAhfQQhtoZkGIKqFK4qfw8ACQuwxKs9FFhM6YZm49lEx4juQBindShj1Yj/ye+6z6NHMQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=9x9LOr31QXQh26mL0MRx+84J3JNefHzW2myk9ZEcHMw=;
 b=32/tcg0Fri9wi1kijUGM2yxYG85sOgVUjsRMKF1JhoA37wA2oVC6A+FgE1y4L699/ZCdAVIoe6L1L8iTz7zTsVXFS59IaRSkgWfFrD75PWomQ5qVesm3RM95D725ybV1fd7jmq2l2/ojn1XvnHcpHPwGfe0NbSKZ2YfFPoA7BOo=
Authentication-Results: lists.freedesktop.org; dkim=none (message not signed)
 header.d=none; lists.freedesktop.org;
 dmarc=none action=none header.from=amd.com;
Received: from SN6PR12MB4623.namprd12.prod.outlook.com (2603:10b6:805:e9::17)
 by SA0PR12MB4462.namprd12.prod.outlook.com (2603:10b6:806:95::22)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4108.25; Mon, 10 May
 2021 16:36:47 +0000
Received: from SN6PR12MB4623.namprd12.prod.outlook.com
 ([fe80::ad51:8c49:b171:856c]) by SN6PR12MB4623.namprd12.prod.outlook.com
 ([fe80::ad51:8c49:b171:856c%7]) with mapi id 15.20.4108.031; Mon, 10 May 2021
 16:36:47 +0000
From: Andrey Grodzovsky <andrey.grodzovsky@amd.com>
To: dri-devel@lists.freedesktop.org, amd-gfx@lists.freedesktop.org,
 linux-pci@vger.kernel.org, ckoenig.leichtzumerken@gmail.com,
 daniel.vetter@ffwll.ch, Harry.Wentland@amd.com
Subject: [PATCH v6 03/16] drm/amdgpu: Split amdgpu_device_fini into early and
 late
Date: Mon, 10 May 2021 12:36:12 -0400
Message-Id: <20210510163625.407105-4-andrey.grodzovsky@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20210510163625.407105-1-andrey.grodzovsky@amd.com>
References: <20210510163625.407105-1-andrey.grodzovsky@amd.com>
X-Originating-IP: [2607:fea8:3edf:49b0:6a5:47b8:e610:f6a3]
X-ClientProxiedBy: YT2PR01CA0020.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b01:38::25) To SN6PR12MB4623.namprd12.prod.outlook.com
 (2603:10b6:805:e9::17)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from agrodzovsky-All-Series.hitronhub.home
 (2607:fea8:3edf:49b0:6a5:47b8:e610:f6a3) by
 YT2PR01CA0020.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01:38::25) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.4108.31 via Frontend Transport; Mon, 10 May 2021 16:36:46 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 9d56f206-11c4-4c5c-5ff2-08d913d1cdf8
X-MS-TrafficTypeDiagnostic: SA0PR12MB4462:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <SA0PR12MB4462463F12E37F564D1D711BEA549@SA0PR12MB4462.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:862;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: //jvJRMNpu2/zegt8mfyEyGF+wbYwmMlWgImVwMYu/JUTAQ4mMawAFaASQKzJyhXYyUOKV8rGpsXEwK/FVv+8mu2bkFeeOM1AYqkDwgloTJiHlqraHxsjjkc+w51ZsIhLrILFooQM8aOLN1mRll2kKBr6FBWZFH4BCPC1M6O/YR5AYIpWtHRDdnAMp5/6mDlg+ltl0TyF5aVcpQ4jmlYgoQ9jZqq0OLrKDTBAHsT+YgEQx2oVa5p82X68GePeoU9qeN4FLLyIf0bR2pmHUKG0m+RdX198J9BJHE4LIwFf6nN+kYOTjBgfTjqgp9rvxo9Nsz9CehLuEFipTIsXQ9JJw0952FkVyOGjjHujV7TQZE3MV8PMNN5HFLW8bKGQJqJa6VtVdGhnosMFAzi8hVd+nYKSgkdQ5M5Y+NpBEI3XyB0YgriaovKIjN7PASFdh5CuE2BufPiCDge81VikiuKZLu0/mZHEDMtG+aEjOGsBDD1m4yboZ27zBEKcyk9DRiidyMaGiJBKgyZC1CeXsm9Td6oXbEaucS9yTc+UVGopfLfYuOE+4e+ljGC2D1kRLe0MC+oONua53D31VNRSFOY4p7YX2nCaceT+eboSogXle0=
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:SN6PR12MB4623.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(366004)(136003)(39860400002)(396003)(376002)(346002)(86362001)(6506007)(38100700002)(52116002)(6666004)(44832011)(8676002)(36756003)(5660300002)(478600001)(8936002)(2906002)(6486002)(54906003)(66946007)(30864003)(2616005)(66476007)(66556008)(1076003)(316002)(6636002)(6512007)(16526019)(186003)(83380400001)(4326008)(66574015);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: =?utf-8?B?dWxBM0VtUlR2RU9zSG1oMHg4c2UrRVNVUThMUTE5a1E2ZXVMUDZBQStIYnFk?=
 =?utf-8?B?OThIaGR0ay9tek45MWJtdk5GVENjSXEwRnZUVWllcGdMcUk4WHFtZ2lkWHpv?=
 =?utf-8?B?eGYvQU9ZbEJsbjRqUFd6WFk3RVJJOFVVc0JQR21pMFIrKy85UXRtNGZCendi?=
 =?utf-8?B?d29FRzVWSHJHd1QyTkV1aGRMSmtZczYzRURKVlNtSXRPV0NZeEtNZ1MyWXBy?=
 =?utf-8?B?elB1cnhGZ0ROSnAyQ2VNeUd1ZVZsaGtLbDhWQ1pqZDMyRjBFK09uU3l4aXZu?=
 =?utf-8?B?WE5EcGdRMUs5UUhaZHRubllnWWZ3d3FzTEhtcld2NFo3U0ZsWkZuQ0NMREpz?=
 =?utf-8?B?bkwzQUVDSlFGYVAyOFo3MFVaem9GQ1NtdVRqRXpHYUR0RElmZ2R5VDBqUHpi?=
 =?utf-8?B?dWxiV1NEdENDTi81WkYxMlBURytnalpMb0RDZkZSUXZyTi9acktiUlFRQysw?=
 =?utf-8?B?bzlaUFdhamErRGN1ektxOXUwQ0ZLeXlpb3JEMG9BNTBpUEZGcjVvV1VmZ3My?=
 =?utf-8?B?K3hXRlMxZG9mczIyOUlJemlxZVB6QWgrKytUUGdLM1lBVmZ1YnNKby80R0ZG?=
 =?utf-8?B?TnZ4aUVyTDdyWDRrZjNzeUVCaEhWcE56S1VTckJtT2N5dVhkV1BpZWFIYXBB?=
 =?utf-8?B?bmpTZlBMTnc0UEhMVHQ5R0hQZkRGWnFzK3JhQW5SK2tKSVI3T2NJMkdDdXdl?=
 =?utf-8?B?ekVyQXZSZGJjYWEraU82MFNLMGo0Mk12WnVMaGV0NFYzZnhYaFN0b3cwYk81?=
 =?utf-8?B?TzZXUDIreXJTdDRPWkhyc0ErSlFGNEFXNEVHcGFqc01DZ1NTWGt5aHIzQkRP?=
 =?utf-8?B?R2xXa0NQVzU1SzNlaVZpU29PcUJvU1pMWkhneXFZWnM3eDJPbmpFR2VyVW80?=
 =?utf-8?B?NDRGZFQzdzlzMU1ZeHZmQTdlUUU2TjZ1ZFRndyt3MWtqTldQYnE1MEFXT2t4?=
 =?utf-8?B?ckNVSjdFc2wwTWtXYWZnaHBwWFJQejl4NlkxeHgreTFrd1Myam9mTUxsUjhL?=
 =?utf-8?B?M3BzU2MxNFhNQUtNbTJNYXY4KzR5TEdwS1ZGMStmeXQ4ZG1YY3llVG5NcUR4?=
 =?utf-8?B?UkttY2JxL2lpZ0ExZ3lEc3VKdDk4L2s3cHJkWGhoZThlWHhYQ1IyOTdFZG9p?=
 =?utf-8?B?ci9lN0Q0QmRyR1VtT05LOVBYWGVPMWkwd2JMdGJxT3JXbHM2dEI4ZkZIaHlK?=
 =?utf-8?B?YkRvSERUWDF5YmhtU2g5eklUKzQ4cEdPZThMdVRJcTBsS3phS05rVVE1czc2?=
 =?utf-8?B?eTJtWlNXcFFscE5hVW9wSTZLQUVKbVJUOE1KYzhzczh4U1UyZmdqV3NMSVln?=
 =?utf-8?B?K1hJcEZMRWd6emt4RUNJaTdzT2NRcng0ZkI1cllEV1ozdlRGZHJNWlBSUlFO?=
 =?utf-8?B?YlpvRmhNOURGVmMrUkhkK0YxWE9sNFd0NHFhR0l1NUhpSmdUb01jMllXWi9j?=
 =?utf-8?B?Mk5jUjg0SitpRTVQbkxnL1pGbGhqUXNWUHl1STNmTFJpVCthTjdRRyswTlJ3?=
 =?utf-8?B?OUkvSkF4QWdWN29pNzk5elQwRVBtVElvWmplT1ZJV2QycnFTN0NicWRsN0N1?=
 =?utf-8?B?ZkFpaGFXTkdOdC9SL3hCV2Z1MEM2SzNUV2s2dXFCZkdSMUp4SmZ3K2ZpV1pM?=
 =?utf-8?B?NGpOZ3dpbHpFZEQxeHJUUGVreTBmV010NVZuYXM4UjBUVGdxbkpkR21aSW51?=
 =?utf-8?B?WXRodDhldjhmOHcyeVM1MXYyVFA2UGZLazFsckdLQzF2TEYzL3BHZi93NGRv?=
 =?utf-8?B?QWxMUXRMWk1rODhKTXhFODJSWTdqUDRudFlxY0M4RnFVbFRCRCtyNG1UcWV0?=
 =?utf-8?B?ZGt5SUdpSTN4RDZzdFN2aTFqRXYxaFN3L3d0bC9OVlg1RS8vTjh3Z2pSZlFi?=
 =?utf-8?Q?ac92mJ96WrzGw?=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 9d56f206-11c4-4c5c-5ff2-08d913d1cdf8
X-MS-Exchange-CrossTenant-AuthSource: SN6PR12MB4623.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 10 May 2021 16:36:47.5914 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: zqG7TWnqpjvUYDDVFzdQwFsOiej0qFZbchn4M4gVIa85XMhYjPUKVKMHGguEFntyZjNhI2C+bLHGK2f3p3n/RQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: SA0PR12MB4462
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Andrey Grodzovsky <andrey.grodzovsky@amd.com>, gregkh@linuxfoundation.org,
 Felix.Kuehling@amd.com, ppaalanen@gmail.com, helgaas@kernel.org,
 Alex Deucher <alexander.deucher@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U29tZSBvZiB0aGUgc3R1ZmYgaW4gYW1kZ3B1X2RldmljZV9maW5pIHN1Y2ggYXMgSFcgaW50ZXJy
dXB0cwpkaXNhYmxlIGFuZCBwZW5kaW5nIGZlbmNlcyBmaW5pbGl6YXRpb24gbXVzdCBiZSBkb25l
IHJpZ2h0IGF3YXkgb24KcGNpX3JlbW92ZSB3aGlsZSBtb3N0IG9mIHRoZSBzdHVmZiB3aGljaCBy
ZWxhdGVzIHRvIGZpbmlsaXppbmcgYW5kCnJlbGVhc2luZyBkcml2ZXIgZGF0YSBzdHJ1Y3R1cmVz
IGNhbiBiZSBrZXB0IHVudGlsCmRybV9kcml2ZXIucmVsZWFzZSBob29rIGlzIGNhbGxlZCwgaS5l
LiB3aGVuIHRoZSBsYXN0IGRldmljZQpyZWZlcmVuY2UgaXMgZHJvcHBlZC4KCnY0OiBDaGFuZ2Ug
ZnVuY3Rpb25zIHByZWZpeCBlYXJseS0+aHcgYW5kIGxhdGUtPnN3CgpTaWduZWQtb2ZmLWJ5OiBB
bmRyZXkgR3JvZHpvdnNreSA8YW5kcmV5Lmdyb2R6b3Zza3lAYW1kLmNvbT4KQWNrZWQtYnk6IENo
cmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IEFs
ZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHUuaCAgICAgICAgfCAgNiArKysrLQogZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIHwgMjYgKysrKysrKysrKysrKysrLS0tLS0tLQog
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rydi5jICAgIHwgIDcgKystLS0tCiBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYyAgfCAxNSArKysrKysrKysr
KystCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfaXJxLmMgICAgfCAyNiArKysr
KysrKysrKysrLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfaXJx
LmggICAgfCAgMyArKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYyAg
ICB8IDEyICsrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMu
YyAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yaW5nLmggICB8
ICAzICsrLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvY2lrX2loLmMgICAgICAgIHwgIDIg
Ky0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2N6X2loLmMgICAgICAgICB8ICAyICstCiBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9pY2VsYW5kX2loLmMgICAgfCAgMiArLQogZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvbmF2aTEwX2loLmMgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L3NpX2loLmMgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS90b25nYV9paC5jICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvdmVnYTEwX2loLmMgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L3ZlZ2EyMF9paC5jICAgICB8ICAyICstCiAxNyBmaWxlcyBjaGFuZ2VkLCA3OSBpbnNlcnRpb25z
KCspLCAzNiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCmluZGV4
IDM4MDgwMWI1OWIwNy4uZDgzMGE1NDFiYTg5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHUuaApAQCAtMTA5OSw3ICsxMDk5LDkgQEAgc3RhdGljIGlubGluZSBzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYW1kZ3B1X3R0bV9hZGV2KHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2KQogCiBpbnQgYW1k
Z3B1X2RldmljZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCQkgICAgICAgdWlu
dDMyX3QgZmxhZ3MpOwotdm9pZCBhbWRncHVfZGV2aWNlX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpOwordm9pZCBhbWRncHVfZGV2aWNlX2ZpbmlfaHcoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpOwordm9pZCBhbWRncHVfZGV2aWNlX2Zpbmlfc3coc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYpOworCiBpbnQgYW1kZ3B1X2dwdV93YWl0X2Zvcl9pZGxlKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KTsKIAogdm9pZCBhbWRncHVfZGV2aWNlX3ZyYW1fYWNjZXNzKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LCBsb2ZmX3QgcG9zLApAQCAtMTMxOSw2ICsxMzIxLDggQEAgdm9p
ZCBhbWRncHVfZHJpdmVyX2xhc3RjbG9zZV9rbXMoc3RydWN0IGRybV9kZXZpY2UgKmRldik7CiBp
bnQgYW1kZ3B1X2RyaXZlcl9vcGVuX2ttcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3Qg
ZHJtX2ZpbGUgKmZpbGVfcHJpdik7CiB2b2lkIGFtZGdwdV9kcml2ZXJfcG9zdGNsb3NlX2ttcyhz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCSBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdik7
Cit2b2lkIGFtZGdwdV9kcml2ZXJfcmVsZWFzZV9rbXMoc3RydWN0IGRybV9kZXZpY2UgKmRldik7
CisKIGludCBhbWRncHVfZGV2aWNlX2lwX3N1c3BlbmQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpOwogaW50IGFtZGdwdV9kZXZpY2Vfc3VzcGVuZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBi
b29sIGZiY29uKTsKIGludCBhbWRncHVfZGV2aWNlX3Jlc3VtZShzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LCBib29sIGZiY29uKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZp
Y2UuYwppbmRleCBiNGFkMWMwNTVjNzAuLjM3NjBjZTdkOGZmOCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYwpAQCAtMzY0OCwxNSArMzY0OCwxMyBAQCBpbnQg
YW1kZ3B1X2RldmljZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogICogVGVhciBk
b3duIHRoZSBkcml2ZXIgaW5mbyAoYWxsIGFzaWNzKS4KICAqIENhbGxlZCBhdCBkcml2ZXIgc2h1
dGRvd24uCiAgKi8KLXZvaWQgYW1kZ3B1X2RldmljZV9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2KQordm9pZCBhbWRncHVfZGV2aWNlX2ZpbmlfaHcoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpCiB7CiAJZGV2X2luZm8oYWRldi0+ZGV2LCAiYW1kZ3B1OiBmaW5pc2hpbmcgZGV2aWNl
LlxuIik7CiAJZmx1c2hfZGVsYXllZF93b3JrKCZhZGV2LT5kZWxheWVkX2luaXRfd29yayk7CiAJ
dHRtX2JvX2xvY2tfZGVsYXllZF93b3JrcXVldWUoJmFkZXYtPm1tYW4uYmRldik7CiAJYWRldi0+
c2h1dGRvd24gPSB0cnVlOwogCi0Ja2ZyZWUoYWRldi0+cGNpX3N0YXRlKTsKLQogCS8qIG1ha2Ug
c3VyZSBJQiB0ZXN0IGZpbmlzaGVkIGJlZm9yZSBlbnRlcmluZyBleGNsdXNpdmUgbW9kZQogCSAq
IHRvIGF2b2lkIHByZWVtcHRpb24gb24gSUIgdGVzdAogCSAqICovCkBAIC0zNjczLDExICszNjcx
LDI0IEBAIHZvaWQgYW1kZ3B1X2RldmljZV9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KQogCQllbHNlCiAJCQlkcm1fYXRvbWljX2hlbHBlcl9zaHV0ZG93bihhZGV2X3RvX2RybShhZGV2
KSk7CiAJfQotCWFtZGdwdV9mZW5jZV9kcml2ZXJfZmluaShhZGV2KTsKKwlhbWRncHVfZmVuY2Vf
ZHJpdmVyX2ZpbmlfaHcoYWRldik7CisKIAlpZiAoYWRldi0+cG1fc3lzZnNfZW4pCiAJCWFtZGdw
dV9wbV9zeXNmc19maW5pKGFkZXYpOworCWlmIChhZGV2LT51Y29kZV9zeXNmc19lbikKKwkJYW1k
Z3B1X3Vjb2RlX3N5c2ZzX2ZpbmkoYWRldik7CisJc3lzZnNfcmVtb3ZlX2ZpbGVzKCZhZGV2LT5k
ZXYtPmtvYmosIGFtZGdwdV9kZXZfYXR0cmlidXRlcyk7CisKKwogCWFtZGdwdV9mYmRldl9maW5p
KGFkZXYpOworCisJYW1kZ3B1X2lycV9maW5pX2h3KGFkZXYpOworfQorCit2b2lkIGFtZGdwdV9k
ZXZpY2VfZmluaV9zdyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKK3sKIAlhbWRncHVfZGV2
aWNlX2lwX2ZpbmkoYWRldik7CisJYW1kZ3B1X2ZlbmNlX2RyaXZlcl9maW5pX3N3KGFkZXYpOwog
CXJlbGVhc2VfZmlybXdhcmUoYWRldi0+ZmlybXdhcmUuZ3B1X2luZm9fZncpOwogCWFkZXYtPmZp
cm13YXJlLmdwdV9pbmZvX2Z3ID0gTlVMTDsKIAlhZGV2LT5hY2NlbF93b3JraW5nID0gZmFsc2U7
CkBAIC0zNzAzLDE0ICszNzE0LDEzIEBAIHZvaWQgYW1kZ3B1X2RldmljZV9maW5pKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2KQogCWFkZXYtPnJtbWlvID0gTlVMTDsKIAlhbWRncHVfZGV2aWNl
X2Rvb3JiZWxsX2ZpbmkoYWRldik7CiAKLQlpZiAoYWRldi0+dWNvZGVfc3lzZnNfZW4pCi0JCWFt
ZGdwdV91Y29kZV9zeXNmc19maW5pKGFkZXYpOwotCi0Jc3lzZnNfcmVtb3ZlX2ZpbGVzKCZhZGV2
LT5kZXYtPmtvYmosIGFtZGdwdV9kZXZfYXR0cmlidXRlcyk7CiAJaWYgKElTX0VOQUJMRUQoQ09O
RklHX1BFUkZfRVZFTlRTKSkKIAkJYW1kZ3B1X3BtdV9maW5pKGFkZXYpOwogCWlmIChhZGV2LT5t
bWFuLmRpc2NvdmVyeV9iaW4pCiAJCWFtZGdwdV9kaXNjb3ZlcnlfZmluaShhZGV2KTsKKworCWtm
cmVlKGFkZXYtPnBjaV9zdGF0ZSk7CisKIH0KIAogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfZHJ2LmMKaW5kZXggNmNmNTczMjkzODIzLi41ZWJlZDRjN2Q5YzAgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMKQEAgLTEzMTEsMTQgKzEzMTEsMTAgQEAgYW1k
Z3B1X3BjaV9yZW1vdmUoc3RydWN0IHBjaV9kZXYgKnBkZXYpCiB7CiAJc3RydWN0IGRybV9kZXZp
Y2UgKmRldiA9IHBjaV9nZXRfZHJ2ZGF0YShwZGV2KTsKIAotI2lmZGVmIE1PRFVMRQotCWlmIChU
SElTX01PRFVMRS0+c3RhdGUgIT0gTU9EVUxFX1NUQVRFX0dPSU5HKQotI2VuZGlmCi0JCURSTV9F
UlJPUigiSG90cGx1ZyByZW1vdmFsIGlzIG5vdCBzdXBwb3J0ZWRcbiIpOwogCWRybV9kZXZfdW5w
bHVnKGRldik7CiAJYW1kZ3B1X2RyaXZlcl91bmxvYWRfa21zKGRldik7CisKIAlwY2lfZGlzYWJs
ZV9kZXZpY2UocGRldik7Ci0JcGNpX3NldF9kcnZkYXRhKHBkZXYsIE5VTEwpOwogfQogCiBzdGF0
aWMgdm9pZApAQCAtMTc0OCw2ICsxNzQ0LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZHJp
dmVyIGFtZGdwdV9rbXNfZHJpdmVyID0gewogCS5kdW1iX2NyZWF0ZSA9IGFtZGdwdV9tb2RlX2R1
bWJfY3JlYXRlLAogCS5kdW1iX21hcF9vZmZzZXQgPSBhbWRncHVfbW9kZV9kdW1iX21tYXAsCiAJ
LmZvcHMgPSAmYW1kZ3B1X2RyaXZlcl9rbXNfZm9wcywKKwkucmVsZWFzZSA9ICZhbWRncHVfZHJp
dmVyX3JlbGVhc2Vfa21zLAogCiAJLnByaW1lX2hhbmRsZV90b19mZCA9IGRybV9nZW1fcHJpbWVf
aGFuZGxlX3RvX2ZkLAogCS5wcmltZV9mZF90b19oYW5kbGUgPSBkcm1fZ2VtX3ByaW1lX2ZkX3Rv
X2hhbmRsZSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9m
ZW5jZS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ZlbmNlLmMKaW5kZXgg
NDdlYTQ2ODU5NjE4Li4xZmZiMzZiZDBiMTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9mZW5jZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9mZW5jZS5jCkBAIC01MjMsNyArNTIzLDcgQEAgaW50IGFtZGdwdV9mZW5jZV9kcml2
ZXJfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKICAqCiAgKiBUZWFyIGRvd24gdGhl
IGZlbmNlIGRyaXZlciBmb3IgYWxsIHBvc3NpYmxlIHJpbmdzIChhbGwgYXNpY3MpLgogICovCi12
b2lkIGFtZGdwdV9mZW5jZV9kcml2ZXJfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikK
K3ZvaWQgYW1kZ3B1X2ZlbmNlX2RyaXZlcl9maW5pX2h3KHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KQogewogCXVuc2lnbmVkIGksIGo7CiAJaW50IHI7CkBAIC01NDUsNiArNTQ1LDE5IEBAIHZv
aWQgYW1kZ3B1X2ZlbmNlX2RyaXZlcl9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQog
CQkJCSAgICAgICByaW5nLT5mZW5jZV9kcnYuaXJxX3R5cGUpOwogCiAJCWRlbF90aW1lcl9zeW5j
KCZyaW5nLT5mZW5jZV9kcnYuZmFsbGJhY2tfdGltZXIpOworCX0KK30KKwordm9pZCBhbWRncHVf
ZmVuY2VfZHJpdmVyX2Zpbmlfc3coc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCit7CisJdW5z
aWduZWQgaW50IGksIGo7CisKKwlmb3IgKGkgPSAwOyBpIDwgQU1ER1BVX01BWF9SSU5HUzsgaSsr
KSB7CisJCXN0cnVjdCBhbWRncHVfcmluZyAqcmluZyA9IGFkZXYtPnJpbmdzW2ldOworCisJCWlm
ICghcmluZyB8fCAhcmluZy0+ZmVuY2VfZHJ2LmluaXRpYWxpemVkKQorCQkJY29udGludWU7CisK
IAkJZm9yIChqID0gMDsgaiA8PSByaW5nLT5mZW5jZV9kcnYubnVtX2ZlbmNlc19tYXNrOyArK2op
CiAJCQlkbWFfZmVuY2VfcHV0KHJpbmctPmZlbmNlX2Rydi5mZW5jZXNbal0pOwogCQlrZnJlZShy
aW5nLT5mZW5jZV9kcnYuZmVuY2VzKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9pcnEuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9p
cnEuYwppbmRleCA5MGY1MDU2MWI0M2EuLjIzM2I2NGRhYjk0YiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lycS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9pcnEuYwpAQCAtNDksNiArNDksNyBAQAogI2luY2x1ZGUgPGRybS9k
cm1faXJxLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV92YmxhbmsuaD4KICNpbmNsdWRlIDxkcm0vYW1k
Z3B1X2RybS5oPgorI2luY2x1ZGUgPGRybS9kcm1fZHJ2Lmg+CiAjaW5jbHVkZSAiYW1kZ3B1Lmgi
CiAjaW5jbHVkZSAiYW1kZ3B1X2loLmgiCiAjaW5jbHVkZSAiYXRvbS5oIgpAQCAtMzQ4LDYgKzM0
OSwyMCBAQCBpbnQgYW1kZ3B1X2lycV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQog
CXJldHVybiAwOwogfQogCisKK3ZvaWQgYW1kZ3B1X2lycV9maW5pX2h3KHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KQoreworCWlmIChhZGV2LT5pcnEuaW5zdGFsbGVkKSB7CisJCWRybV9pcnFf
dW5pbnN0YWxsKCZhZGV2LT5kZGV2KTsKKwkJYWRldi0+aXJxLmluc3RhbGxlZCA9IGZhbHNlOwor
CQlpZiAoYWRldi0+aXJxLm1zaV9lbmFibGVkKQorCQkJcGNpX2ZyZWVfaXJxX3ZlY3RvcnMoYWRl
di0+cGRldik7CisKKwkJaWYgKCFhbWRncHVfZGV2aWNlX2hhc19kY19zdXBwb3J0KGFkZXYpKQor
CQkJZmx1c2hfd29yaygmYWRldi0+aG90cGx1Z193b3JrKTsKKwl9Cit9CisKIC8qKgogICogYW1k
Z3B1X2lycV9maW5pIC0gc2h1dCBkb3duIGludGVycnVwdCBoYW5kbGluZwogICoKQEAgLTM1Nywx
OSArMzcyLDEwIEBAIGludCBhbWRncHVfaXJxX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpCiAgKiBmdW5jdGlvbmFsaXR5LCBzaHV0cyBkb3duIHZibGFuaywgaG90cGx1ZyBhbmQgcmVz
ZXQgaW50ZXJydXB0IGhhbmRsaW5nLAogICogdHVybnMgb2ZmIGludGVycnVwdHMgZnJvbSBhbGwg
c291cmNlcyAoYWxsIEFTSUNzKS4KICAqLwotdm9pZCBhbWRncHVfaXJxX2Zpbmkoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCit2b2lkIGFtZGdwdV9pcnFfZmluaV9zdyhzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldikKIHsKIAl1bnNpZ25lZCBpLCBqOwogCi0JaWYgKGFkZXYtPmlycS5pbnN0
YWxsZWQpIHsKLQkJZHJtX2lycV91bmluc3RhbGwoYWRldl90b19kcm0oYWRldikpOwotCQlhZGV2
LT5pcnEuaW5zdGFsbGVkID0gZmFsc2U7Ci0JCWlmIChhZGV2LT5pcnEubXNpX2VuYWJsZWQpCi0J
CQlwY2lfZnJlZV9pcnFfdmVjdG9ycyhhZGV2LT5wZGV2KTsKLQkJaWYgKCFhbWRncHVfZGV2aWNl
X2hhc19kY19zdXBwb3J0KGFkZXYpKQotCQkJZmx1c2hfd29yaygmYWRldi0+aG90cGx1Z193b3Jr
KTsKLQl9Ci0KIAlmb3IgKGkgPSAwOyBpIDwgQU1ER1BVX0lSUV9DTElFTlRJRF9NQVg7ICsraSkg
ewogCQlpZiAoIWFkZXYtPmlycS5jbGllbnRbaV0uc291cmNlcykKIAkJCWNvbnRpbnVlOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lycS5oIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lycS5oCmluZGV4IGNmNjExNjY0ODMyMi4uNzhh
ZDQ3ODRjYzc0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
aXJxLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lycS5oCkBAIC0x
MDMsNyArMTAzLDggQEAgdm9pZCBhbWRncHVfaXJxX2Rpc2FibGVfYWxsKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KTsKIGlycXJldHVybl90IGFtZGdwdV9pcnFfaGFuZGxlcihpbnQgaXJxLCB2
b2lkICphcmcpOwogCiBpbnQgYW1kZ3B1X2lycV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KTsKLXZvaWQgYW1kZ3B1X2lycV9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsK
K3ZvaWQgYW1kZ3B1X2lycV9maW5pX3N3KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKK3Zv
aWQgYW1kZ3B1X2lycV9maW5pX2h3KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIGludCBh
bWRncHVfaXJxX2FkZF9pZChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAkJICAgICAgdW5z
aWduZWQgY2xpZW50X2lkLCB1bnNpZ25lZCBzcmNfaWQsCiAJCSAgICAgIHN0cnVjdCBhbWRncHVf
aXJxX3NyYyAqc291cmNlKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYwpp
bmRleCAzOWVlODhkMjljY2EuLmYzZWNhZGEyMDhiMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9rbXMuYwpAQCAtMjgsNiArMjgsNyBAQAogCiAjaW5jbHVkZSAiYW1kZ3B1Lmgi
CiAjaW5jbHVkZSA8ZHJtL2FtZGdwdV9kcm0uaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2Rydi5oPgog
I2luY2x1ZGUgImFtZGdwdV91dmQuaCIKICNpbmNsdWRlICJhbWRncHVfdmNlLmgiCiAjaW5jbHVk
ZSAiYXRvbS5oIgpAQCAtOTIsNyArOTMsNyBAQCB2b2lkIGFtZGdwdV9kcml2ZXJfdW5sb2FkX2tt
cyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCX0KIAogCWFtZGdwdV9hY3BpX2ZpbmkoYWRldik7
Ci0JYW1kZ3B1X2RldmljZV9maW5pKGFkZXYpOworCWFtZGdwdV9kZXZpY2VfZmluaV9odyhhZGV2
KTsKIH0KIAogdm9pZCBhbWRncHVfcmVnaXN0ZXJfZ3B1X2luc3RhbmNlKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KQpAQCAtMTIxOSw2ICsxMjIwLDE1IEBAIHZvaWQgYW1kZ3B1X2RyaXZlcl9w
b3N0Y2xvc2Vfa21zKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJcG1fcnVudGltZV9wdXRfYXV0
b3N1c3BlbmQoZGV2LT5kZXYpOwogfQogCisKK3ZvaWQgYW1kZ3B1X2RyaXZlcl9yZWxlYXNlX2tt
cyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQoreworCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
ID0gZHJtX3RvX2FkZXYoZGV2KTsKKworCWFtZGdwdV9kZXZpY2VfZmluaV9zdyhhZGV2KTsKKwlw
Y2lfc2V0X2RydmRhdGEoYWRldi0+cGRldiwgTlVMTCk7Cit9CisKIC8qCiAgKiBWQmxhbmsgcmVs
YXRlZCBmdW5jdGlvbnMuCiAgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9yYXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMu
YwppbmRleCAwNTQxMTk2YWUxZWQuLjg0NGE2NjdmNjU1YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9yYXMuYwpAQCAtMjMyNSw2ICsyMzI1LDcgQEAgaW50IGFtZGdwdV9yYXNf
cHJlX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJaWYgKCFhZGV2LT5yYXNfZmVh
dHVyZXMgfHwgIWNvbikKIAkJcmV0dXJuIDA7CiAKKwogCS8qIE5lZWQgZGlzYWJsZSByYXMgb24g
YWxsIElQcyBoZXJlIGJlZm9yZSBpcCBbaHcvc3ddZmluaSAqLwogCWFtZGdwdV9yYXNfZGlzYWJs
ZV9hbGxfZmVhdHVyZXMoYWRldiwgMCk7CiAJYW1kZ3B1X3Jhc19yZWNvdmVyeV9maW5pKGFkZXYp
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3JpbmcuaCBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yaW5nLmgKaW5kZXggY2ExNjIyODM1
Mjk2Li5lN2QzZDBkYmRkOTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9yaW5nLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jp
bmcuaApAQCAtMTA3LDcgKzEwNyw4IEBAIHN0cnVjdCBhbWRncHVfZmVuY2VfZHJpdmVyIHsKIH07
CiAKIGludCBhbWRncHVfZmVuY2VfZHJpdmVyX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpOwotdm9pZCBhbWRncHVfZmVuY2VfZHJpdmVyX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpOwordm9pZCBhbWRncHVfZmVuY2VfZHJpdmVyX2ZpbmlfaHcoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYpOwordm9pZCBhbWRncHVfZmVuY2VfZHJpdmVyX2Zpbmlfc3coc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpOwogdm9pZCBhbWRncHVfZmVuY2VfZHJpdmVyX2ZvcmNlX2NvbXBs
ZXRpb24oc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nKTsKIAogaW50IGFtZGdwdV9mZW5jZV9kcml2
ZXJfaW5pdF9yaW5nKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Npa19paC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvY2lrX2loLmMKaW5kZXggZDM3NDU3MTFkNTVmLi4xODNkNDRhNjU4M2MgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Npa19paC5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2Npa19paC5jCkBAIC0zMDksNyArMzA5LDcgQEAgc3RhdGljIGludCBjaWtf
aWhfc3dfZmluaSh2b2lkICpoYW5kbGUpCiB7CiAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYg
PSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7CiAKLQlhbWRncHVfaXJxX2ZpbmkoYWRl
dik7CisJYW1kZ3B1X2lycV9maW5pX3N3KGFkZXYpOwogCWFtZGdwdV9paF9yaW5nX2ZpbmkoYWRl
diwgJmFkZXYtPmlycS5paCk7CiAJYW1kZ3B1X2lycV9yZW1vdmVfZG9tYWluKGFkZXYpOwogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9jel9paC5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvY3pfaWguYwppbmRleCAzMDdjMDEzMDFjODcuLmQzMjc0Mzk0OTAw
MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvY3pfaWguYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9jel9paC5jCkBAIC0zMDEsNyArMzAxLDcgQEAgc3Rh
dGljIGludCBjel9paF9zd19maW5pKHZvaWQgKmhhbmRsZSkKIHsKIAlzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqKWhhbmRsZTsKIAotCWFtZGdwdV9p
cnFfZmluaShhZGV2KTsKKwlhbWRncHVfaXJxX2Zpbmlfc3coYWRldik7CiAJYW1kZ3B1X2loX3Jp
bmdfZmluaShhZGV2LCAmYWRldi0+aXJxLmloKTsKIAlhbWRncHVfaXJxX3JlbW92ZV9kb21haW4o
YWRldik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2ljZWxhbmRf
aWguYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2ljZWxhbmRfaWguYwppbmRleCBjYzk1
NzQ3MWYzMWUuLmRhOTZjNjAxMzQ3NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvaWNlbGFuZF9paC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2ljZWxh
bmRfaWguYwpAQCAtMzAwLDcgKzMwMCw3IEBAIHN0YXRpYyBpbnQgaWNlbGFuZF9paF9zd19maW5p
KHZvaWQgKmhhbmRsZSkKIHsKIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqKWhhbmRsZTsKIAotCWFtZGdwdV9pcnFfZmluaShhZGV2KTsKKwlhbWRn
cHVfaXJxX2Zpbmlfc3coYWRldik7CiAJYW1kZ3B1X2loX3JpbmdfZmluaShhZGV2LCAmYWRldi0+
aXJxLmloKTsKIAlhbWRncHVfaXJxX3JlbW92ZV9kb21haW4oYWRldik7CiAKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L25hdmkxMF9paC5jIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvbmF2aTEwX2loLmMKaW5kZXggZjRlNDA0MGJiZDI1Li41ZWVhNDU1MGI4NTYg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L25hdmkxMF9paC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L25hdmkxMF9paC5jCkBAIC01NjksNyArNTY5LDcg
QEAgc3RhdGljIGludCBuYXZpMTBfaWhfc3dfZmluaSh2b2lkICpoYW5kbGUpCiB7CiAJc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7CiAK
LQlhbWRncHVfaXJxX2ZpbmkoYWRldik7CisJYW1kZ3B1X2lycV9maW5pX3N3KGFkZXYpOwogCWFt
ZGdwdV9paF9yaW5nX2ZpbmkoYWRldiwgJmFkZXYtPmlycS5paF9zb2Z0KTsKIAlhbWRncHVfaWhf
cmluZ19maW5pKGFkZXYsICZhZGV2LT5pcnEuaWgyKTsKIAlhbWRncHVfaWhfcmluZ19maW5pKGFk
ZXYsICZhZGV2LT5pcnEuaWgxKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L3NpX2loLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zaV9paC5jCmluZGV4IDUx
ODgwZjZlZjYzNC4uNzUxMzA3ZjMyNTJjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9zaV9paC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NpX2loLmMK
QEAgLTE3NSw3ICsxNzUsNyBAQCBzdGF0aWMgaW50IHNpX2loX3N3X2Zpbmkodm9pZCAqaGFuZGxl
KQogewogCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICopaGFuZGxlOwogCi0JYW1kZ3B1X2lycV9maW5pKGFkZXYpOworCWFtZGdwdV9pcnFfZmluaV9z
dyhhZGV2KTsKIAlhbWRncHVfaWhfcmluZ19maW5pKGFkZXYsICZhZGV2LT5pcnEuaWgpOwogCiAJ
cmV0dXJuIDA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS90b25nYV9p
aC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdG9uZ2FfaWguYwppbmRleCAyNDlmY2Jl
ZTc4NzEuLjk3M2Q4MGVjN2Y2YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvdG9uZ2FfaWguYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS90b25nYV9paC5j
CkBAIC0zMTIsNyArMzEyLDcgQEAgc3RhdGljIGludCB0b25nYV9paF9zd19maW5pKHZvaWQgKmhh
bmRsZSkKIHsKIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqKWhhbmRsZTsKIAotCWFtZGdwdV9pcnFfZmluaShhZGV2KTsKKwlhbWRncHVfaXJxX2Zp
bmlfc3coYWRldik7CiAJYW1kZ3B1X2loX3JpbmdfZmluaShhZGV2LCAmYWRldi0+aXJxLmloKTsK
IAlhbWRncHVfaXJxX3JlbW92ZV9kb21haW4oYWRldik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L3ZlZ2ExMF9paC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvdmVnYTEwX2loLmMKaW5kZXggY2E4ZWZhNWM2OTc4Li5kZWFkOWMyZmJkNGMgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZlZ2ExMF9paC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L3ZlZ2ExMF9paC5jCkBAIC01MTMsNyArNTEzLDcgQEAgc3RhdGlj
IGludCB2ZWdhMTBfaWhfc3dfZmluaSh2b2lkICpoYW5kbGUpCiB7CiAJc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7CiAKLQlhbWRncHVf
aXJxX2ZpbmkoYWRldik7CisJYW1kZ3B1X2lycV9maW5pX3N3KGFkZXYpOwogCWFtZGdwdV9paF9y
aW5nX2ZpbmkoYWRldiwgJmFkZXYtPmlycS5paF9zb2Z0KTsKIAlhbWRncHVfaWhfcmluZ19maW5p
KGFkZXYsICZhZGV2LT5pcnEuaWgyKTsKIAlhbWRncHVfaWhfcmluZ19maW5pKGFkZXYsICZhZGV2
LT5pcnEuaWgxKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZlZ2Ey
MF9paC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmVnYTIwX2loLmMKaW5kZXggOGEx
MjJiNDEzYmY1Li41ODk5M2FlMWZlMTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L3ZlZ2EyMF9paC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3ZlZ2Ey
MF9paC5jCkBAIC01NjUsNyArNTY1LDcgQEAgc3RhdGljIGludCB2ZWdhMjBfaWhfc3dfZmluaSh2
b2lkICpoYW5kbGUpCiB7CiAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKiloYW5kbGU7CiAKLQlhbWRncHVfaXJxX2ZpbmkoYWRldik7CisJYW1kZ3B1
X2lycV9maW5pX3N3KGFkZXYpOwogCWFtZGdwdV9paF9yaW5nX2ZpbmkoYWRldiwgJmFkZXYtPmly
cS5paF9zb2Z0KTsKIAlhbWRncHVfaWhfcmluZ19maW5pKGFkZXYsICZhZGV2LT5pcnEuaWgyKTsK
IAlhbWRncHVfaWhfcmluZ19maW5pKGFkZXYsICZhZGV2LT5pcnEuaWgxKTsKLS0gCjIuMjUuMQoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBt
YWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cg==
