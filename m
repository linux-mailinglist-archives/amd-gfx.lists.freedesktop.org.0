Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7B9E118040
	for <lists+amd-gfx@lfdr.de>; Wed,  8 May 2019 21:10:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 29CCD8946E;
	Wed,  8 May 2019 19:10:47 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x344.google.com (mail-wm1-x344.google.com
 [IPv6:2a00:1450:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E42698936B
 for <amd-gfx@lists.freedesktop.org>; Wed,  8 May 2019 19:10:44 +0000 (UTC)
Received: by mail-wm1-x344.google.com with SMTP id p21so1315wmc.0
 for <amd-gfx@lists.freedesktop.org>; Wed, 08 May 2019 12:10:44 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=QnZ8+POwfrKjcYuvUJ/3AS+1CbGFF68E2cgjIviy2FM=;
 b=MqUmaiH4S0Z8kXGQYvPGigrBa9/mcv3NzmaJqybLNOnahWbIz8wtV0XEjESCAqtGFM
 xhKmKD896FsdKlfEug3mB3k5HPWrDzH94gQd6b6nu+kKaDSMpGNMPGjz+FKpYoYNzx/i
 Y+I5KNZ0rRzG14XrUlijEnRlL12Zn2yGPXOkyGuShkB21+6z+T02jG+7esGWTrBN5z1+
 qoA3PlpuRTXdm5bZYpr7p+/btf8dMFkENU8ei71naD6QORM883aRXNNbvRHwVaKybcb3
 8I1/TouCUxvIwDal6tJ1wByryH+RR6fUIKQnG9uRHvaEb2W5dkDSlZlvK413081BQf+k
 KDhg==
X-Gm-Message-State: APjAAAVuTRDcvalkMCUGKyviSpBSJv630k6VlVAruG0EQFb74xSRRRQ0
 pHfPJbprJfqAUEB8AoOrDt7Aq3bOCVeXhOCLldE=
X-Google-Smtp-Source: APXvYqzCkddphf3o4UJcD5zHlBvER58RlDzgFWFcL6Yq2sfnD2NrPCHV8aLHRduuE5WKCII8MRqJc4saXNBWZ+AFLEE=
X-Received: by 2002:a1c:1902:: with SMTP id 2mr4061750wmz.153.1557342643474;
 Wed, 08 May 2019 12:10:43 -0700 (PDT)
MIME-Version: 1.0
References: <SN6PR12MB280057754F6035815F41314887320@SN6PR12MB2800.namprd12.prod.outlook.com>
In-Reply-To: <SN6PR12MB280057754F6035815F41314887320@SN6PR12MB2800.namprd12.prod.outlook.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Wed, 8 May 2019 15:10:31 -0400
Message-ID: <CADnq5_MUpL6tp2Qc1mxU97QpyOWn7v1PnWaihRBaNojPf2hJMA@mail.gmail.com>
Subject: Re: [PATCH v2] drm/amdgpu: add badpages sysfs interafce
To: "Pan, Xinhui" <Xinhui.Pan@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=QnZ8+POwfrKjcYuvUJ/3AS+1CbGFF68E2cgjIviy2FM=;
 b=n35gLrbVoZmoeGgQpDm1oiSau7eI8D2XEMPUM6wln8IdOZ1mgoWlhjTpIPtRkR8AV2
 nXm5NIIN2Lfx/7XG4Ma//WMSYhoRBsgBMyzaF2IEPR3yVbPcs/xX+sggwe3PXPB5y71C
 x5zFhr45J5VtPlsCTNMrP2T9Qf6pRf5hlGmp5jINTC0a2XlvddDV62LiMhmkPW3y27qh
 Amq8P6tJ6orJZHgFrvL7oO4gutwRnqM0V5U28IcyY43huB+JdFToYE7ps4n0PfYUhaHD
 gOlrYB7B3AOJWrlFgBzOr9iaCc2LdY6U+NvJNdQZ5J/hrmIdP/J7IsOGVVYTlu4Y01gE
 uU+Q==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCBNYXkgNywgMjAxOSBhdCAxMToxNSBQTSBQYW4sIFhpbmh1aSA8WGluaHVpLlBhbkBh
bWQuY29tPiB3cm90ZToKPgo+IGFkZCBiYWRwYWdlcyBub2RlLgo+IGl0IHdpbGwgb3V0cHV0IGJh
ZHBhZ2VzIGxpc3QgaW4gZm9ybWF0Cj4gcGFnZSA6IHNpemUgIDogZmxhZ3MKCmdwdSBwZm4gOiBn
cHUgcGFnZSBzaXplIDogZmxhZ3MKCj4KPiBwYWdlIGlzIFBGTi4KPiBmbGFncyBjYW4gYmUgUiwg
UCwgRi4KPgo+IGV4YW1wbGUKPiAweDAwMDAwMDAwIDogMHgwMDAwMTAwMCA6IFIKPiAweDAwMDAw
MDAxIDogMHgwMDAwMTAwMCA6IFIKPiAweDAwMDAwMDAyIDogMHgwMDAwMTAwMCA6IFIKPiAweDAw
MDAwMDAzIDogMHgwMDAwMTAwMCA6IFIKPiAweDAwMDAwMDA0IDogMHgwMDAwMTAwMCA6IFIKPiAw
eDAwMDAwMDA1IDogMHgwMDAwMTAwMCA6IFIKPiAweDAwMDAwMDA2IDogMHgwMDAwMTAwMCA6IFIK
PiAweDAwMDAwMDA3IDogMHgwMDAwMTAwMCA6IFAKPiAweDAwMDAwMDA4IDogMHgwMDAwMTAwMCA6
IFAKPiAweDAwMDAwMDA5IDogMHgwMDAwMTAwMCA6IFAKPgo+IFI6IHJlc2VydmVkLgo+IFA6IHBl
bmRpbmcKPiBGOiBmYWlsZWQgdG8gcmVzZXJ2ZSBmb3Igc29tZSByZWFzb24uCj4KPiBTaWduZWQt
b2ZmLWJ5OiB4aW5odWkgcGFuIDx4aW5odWkucGFuQGFtZC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuYyB8IDEzMyArKysrKysrKysrKysrKysrKysr
KysrKysKPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oIHwgICAxICsK
PiAgMiBmaWxlcyBjaGFuZ2VkLCAxMzQgaW5zZXJ0aW9ucygrKQo+Cj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9yYXMuYwo+IGluZGV4IDIyYmQyMWVmZTZiMS4uMmU5ZmI3ODUwMTlk
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuYwo+IEBAIC05MCw2
ICs5MCwxMiBAQCBzdHJ1Y3QgcmFzX21hbmFnZXIgewo+ICAgICAgICAgc3RydWN0IHJhc19lcnJf
ZGF0YSBlcnJfZGF0YTsKPiAgfTsKPgo+ICtzdHJ1Y3QgcmFzX2JhZHBhZ2Ugewo+ICsgICAgICAg
dW5zaWduZWQgaW50IGJwOwo+ICsgICAgICAgdW5zaWduZWQgaW50IHNpemU7Cj4gKyAgICAgICB1
bnNpZ25lZCBpbnQgZmxhZ3M7Cj4gK307Cj4gKwo+ICBjb25zdCBjaGFyICpyYXNfZXJyb3Jfc3Ry
aW5nW10gPSB7Cj4gICAgICAgICAibm9uZSIsCj4gICAgICAgICAicGFyaXR5IiwKPiBAQCAtNjkx
LDYgKzY5Nyw2MiBAQCBpbnQgYW1kZ3B1X3Jhc19xdWVyeV9lcnJvcl9jb3VudChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwKPgo+ICAvKiBzeXNmcyBiZWdpbiAqLwo+Cj4gK3N0YXRpYyBpbnQg
YW1kZ3B1X3Jhc19iYWRwYWdlc19yZWFkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICsg
ICAgICAgICAgICAgICBzdHJ1Y3QgcmFzX2JhZHBhZ2UgKipicHMsIHVuc2lnbmVkIGludCAqY291
bnQpOwo+ICsKPiArc3RhdGljIGNoYXIgKmFtZGdwdV9yYXNfYmFkcGFnZV9mbGFnc19zdHIodW5z
aWduZWQgaW50IGZsYWdzKQo+ICt7Cj4gKyAgICAgICBzd2l0Y2ggKGZsYWdzKSB7Cj4gKyAgICAg
ICBjYXNlIDA6Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAiUiI7Cj4gKyAgICAgICBjYXNlIDE6
Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAiUCI7Cj4gKyAgICAgICBjYXNlIDI6Cj4gKyAgICAg
ICBkZWZhdWx0Ogo+ICsgICAgICAgICAgICAgICByZXR1cm4gIkYiOwo+ICsgICAgICAgfTsKPiAr
fQo+ICsKPiArLyoKPiArICogZm9ybWF0OiBzdGFydCAtIGVuZCA6IFJ8UHxGCj4gKyAqIHN0YXJ0
LCBlbmQ6IHBhZ2UgZnJhbWUgbnVtYmVyLCBlbmQgaXMgbm90IGluY2x1ZGVkLgo+ICsgKiBSOiBy
ZXNlcnZlZAo+ICsgKiBQOiBwZWRuaW5nIGZvciByZXNlcnZlCgpwZW5kaW5nCgo+ICsgKiBGOiB1
bmFibGUgdG8gcmVzZXJ2ZS4KPiArICovCj4gKwo+ICtzdGF0aWMgc3NpemVfdCBhbWRncHVfcmFz
X3N5c2ZzX2JhZHBhZ2VzX3JlYWQoc3RydWN0IGZpbGUgKmYsCj4gKyAgICAgICAgICAgICAgIHN0
cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3QgYmluX2F0dHJpYnV0ZSAqYXR0ciwKPiArICAgICAg
ICAgICAgICAgY2hhciAqYnVmLCBsb2ZmX3QgcHBvcywgc2l6ZV90IGNvdW50KQo+ICt7Cj4gKyAg
ICAgICBzdHJ1Y3QgYW1kZ3B1X3JhcyAqY29uID0KPiArICAgICAgICAgICAgICAgY29udGFpbmVy
X29mKGF0dHIsIHN0cnVjdCBhbWRncHVfcmFzLCBiYWRwYWdlc19hdHRyKTsKPiArICAgICAgIHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gY29uLT5hZGV2Owo+ICsgICAgICAgY29uc3QgdW5z
aWduZWQgaW50IGVsZW1lbnRfc2l6ZSA9Cj4gKyAgICAgICAgICAgICAgIHNpemVvZigiMHhhYmNk
YWJjZCA6IDB4MTIzNDU2NzggOiBSXG4iKSAtIDE7Cj4gKyAgICAgICB1bnNpZ25lZCBpbnQgc3Rh
cnQgPSAocHBvcyArIGVsZW1lbnRfc2l6ZSAtIDEpIC8gZWxlbWVudF9zaXplOwo+ICsgICAgICAg
dW5zaWduZWQgaW50IGVuZCA9IChwcG9zICsgY291bnQgLSAxKSAvIGVsZW1lbnRfc2l6ZTsKPiAr
ICAgICAgIHNzaXplX3QgcyA9IDA7Cj4gKyAgICAgICBzdHJ1Y3QgcmFzX2JhZHBhZ2UgKmJwcyA9
IE5VTEw7Cj4gKyAgICAgICB1bnNpZ25lZCBpbnQgYnBzX2NvdW50ID0gMDsKPiArCj4gKyAgICAg
ICBtZW1zZXQoYnVmLCAwLCBjb3VudCk7Cj4gKwo+ICsgICAgICAgaWYgKGFtZGdwdV9yYXNfYmFk
cGFnZXNfcmVhZChhZGV2LCAmYnBzLCAmYnBzX2NvdW50KSkKPiArICAgICAgICAgICAgICAgcmV0
dXJuIDA7Cj4gKwo+ICsgICAgICAgZm9yICg7IHN0YXJ0IDwgZW5kICYmIHN0YXJ0IDwgYnBzX2Nv
dW50OyBzdGFydCsrKQo+ICsgICAgICAgICAgICAgICBzICs9IHNjbnByaW50ZigmYnVmW3NdLCBl
bGVtZW50X3NpemUgKyAxLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIjB4JTA4
eCA6IDB4JTA4eCA6ICUxc1xuIiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJw
c1tzdGFydF0uYnAsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicHNbc3RhcnRd
LnNpemUsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfcmFzX2JhZHBh
Z2VfZmxhZ3Nfc3RyKGJwc1tzdGFydF0uZmxhZ3MpKTsKPiArCj4gKyAgICAgICBrZnJlZShicHMp
Owo+ICsKPiArICAgICAgIHJldHVybiBzOwo+ICt9Cj4gKwo+ICBzdGF0aWMgc3NpemVfdCBhbWRn
cHVfcmFzX3N5c2ZzX2ZlYXR1cmVzX3JlYWQoc3RydWN0IGRldmljZSAqZGV2LAo+ICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKQo+ICB7Cj4g
QEAgLTczMSw5ICs3OTMsMTQgQEAgc3RhdGljIGludCBhbWRncHVfcmFzX3N5c2ZzX2NyZWF0ZV9m
ZWF0dXJlX25vZGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAgICAgICAgICAgICAg
ICZjb24tPmZlYXR1cmVzX2F0dHIuYXR0ciwKPiAgICAgICAgICAgICAgICAgTlVMTAo+ICAgICAg
ICAgfTsKPiArICAgICAgIHN0cnVjdCBiaW5fYXR0cmlidXRlICpiaW5fYXR0cnNbXSA9IHsKPiAr
ICAgICAgICAgICAgICAgJmNvbi0+YmFkcGFnZXNfYXR0ciwKPiArICAgICAgICAgICAgICAgTlVM
TAo+ICsgICAgICAgfTsKPiAgICAgICAgIHN0cnVjdCBhdHRyaWJ1dGVfZ3JvdXAgZ3JvdXAgPSB7
Cj4gICAgICAgICAgICAgICAgIC5uYW1lID0gInJhcyIsCj4gICAgICAgICAgICAgICAgIC5hdHRy
cyA9IGF0dHJzLAo+ICsgICAgICAgICAgICAgICAuYmluX2F0dHJzID0gYmluX2F0dHJzLAo+ICAg
ICAgICAgfTsKPgo+ICAgICAgICAgY29uLT5mZWF0dXJlc19hdHRyID0gKHN0cnVjdCBkZXZpY2Vf
YXR0cmlidXRlKSB7Cj4gQEAgLTc0Myw3ICs4MTAsMTkgQEAgc3RhdGljIGludCBhbWRncHVfcmFz
X3N5c2ZzX2NyZWF0ZV9mZWF0dXJlX25vZGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4g
ICAgICAgICAgICAgICAgIH0sCj4gICAgICAgICAgICAgICAgICAgICAgICAgLnNob3cgPSBhbWRn
cHVfcmFzX3N5c2ZzX2ZlYXR1cmVzX3JlYWQsCj4gICAgICAgICB9Owo+ICsKPiArICAgICAgIGNv
bi0+YmFkcGFnZXNfYXR0ciA9IChzdHJ1Y3QgYmluX2F0dHJpYnV0ZSkgewo+ICsgICAgICAgICAg
ICAgICAuYXR0ciA9IHsKPiArICAgICAgICAgICAgICAgICAgICAgICAubmFtZSA9ICJ1bWNfYmFk
cGFnZXMiLAoKSG93IGFib3V0ICJncHVfdnJhbV9iYWRfcGFnZXMiPwoKPiArICAgICAgICAgICAg
ICAgICAgICAgICAubW9kZSA9IFNfSVJVR08sCj4gKyAgICAgICAgICAgICAgIH0sCj4gKyAgICAg
ICAgICAgICAgIC5zaXplID0gMCwKPiArICAgICAgICAgICAgICAgLnByaXZhdGUgPSBOVUxMLAo+
ICsgICAgICAgICAgICAgICAucmVhZCA9IGFtZGdwdV9yYXNfc3lzZnNfYmFkcGFnZXNfcmVhZCwK
PiArICAgICAgIH07Cj4gKwo+ICAgICAgICAgc3lzZnNfYXR0cl9pbml0KGF0dHJzWzBdKTsKPiAr
ICAgICAgIHN5c2ZzX2Jpbl9hdHRyX2luaXQoYmluX2F0dHJzWzBdKTsKPgo+ICAgICAgICAgcmV0
dXJuIHN5c2ZzX2NyZWF0ZV9ncm91cCgmYWRldi0+ZGV2LT5rb2JqLCAmZ3JvdXApOwo+ICB9Cj4g
QEAgLTc1NSw5ICs4MzQsMTQgQEAgc3RhdGljIGludCBhbWRncHVfcmFzX3N5c2ZzX3JlbW92ZV9m
ZWF0dXJlX25vZGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAgICAgICAgICAgICAg
ICZjb24tPmZlYXR1cmVzX2F0dHIuYXR0ciwKPiAgICAgICAgICAgICAgICAgTlVMTAo+ICAgICAg
ICAgfTsKPiArICAgICAgIHN0cnVjdCBiaW5fYXR0cmlidXRlICpiaW5fYXR0cnNbXSA9IHsKPiAr
ICAgICAgICAgICAgICAgJmNvbi0+YmFkcGFnZXNfYXR0ciwKPiArICAgICAgICAgICAgICAgTlVM
TAo+ICsgICAgICAgfTsKPiAgICAgICAgIHN0cnVjdCBhdHRyaWJ1dGVfZ3JvdXAgZ3JvdXAgPSB7
Cj4gICAgICAgICAgICAgICAgIC5uYW1lID0gInJhcyIsCj4gICAgICAgICAgICAgICAgIC5hdHRy
cyA9IGF0dHJzLAo+ICsgICAgICAgICAgICAgICAuYmluX2F0dHJzID0gYmluX2F0dHJzLAo+ICAg
ICAgICAgfTsKPgo+ICAgICAgICAgc3lzZnNfcmVtb3ZlX2dyb3VwKCZhZGV2LT5kZXYtPmtvYmos
ICZncm91cCk7Cj4gQEAgLTEwODksNiArMTE3Myw1NSBAQCBzdGF0aWMgaW50IGFtZGdwdV9yYXNf
aW50ZXJydXB0X3JlbW92ZV9hbGwoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gIC8qIGlo
IGVuZCAqLwo+Cj4gIC8qIHJlY292ZXJ5IGJlZ2luICovCj4gKwo+ICsvKiByZXR1cm4gMCBvbiBz
dWNjZXNzLgo+ICsgKiBjYWxsZXIgbmVlZCBmcmVlIGJwcy4KPiArICovCj4gK3N0YXRpYyBpbnQg
YW1kZ3B1X3Jhc19iYWRwYWdlc19yZWFkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICsg
ICAgICAgICAgICAgICBzdHJ1Y3QgcmFzX2JhZHBhZ2UgKipicHMsIHVuc2lnbmVkIGludCAqY291
bnQpCj4gK3sKPiArICAgICAgIHN0cnVjdCBhbWRncHVfcmFzICpjb24gPSBhbWRncHVfcmFzX2dl
dF9jb250ZXh0KGFkZXYpOwo+ICsgICAgICAgc3RydWN0IHJhc19lcnJfaGFuZGxlcl9kYXRhICpk
YXRhOwo+ICsgICAgICAgaW50IGkgPSAwOwo+ICsgICAgICAgaW50IHJldCA9IDA7Cj4gKwo+ICsg
ICAgICAgaWYgKCFjb24gfHwgIWNvbi0+ZWhfZGF0YSB8fCAhYnBzIHx8ICFjb3VudCkKPiArICAg
ICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsgICAgICAgbXV0ZXhfbG9jaygmY29u
LT5yZWNvdmVyeV9sb2NrKTsKPiArICAgICAgIGRhdGEgPSBjb24tPmVoX2RhdGE7Cj4gKyAgICAg
ICBpZiAoIWRhdGEgfHwgZGF0YS0+Y291bnQgPT0gMCkgewo+ICsgICAgICAgICAgICAgICAqYnBz
ID0gTlVMTDsKPiArICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gKyAgICAgICB9Cj4gKwo+ICsg
ICAgICAgKmJwcyA9IGttYWxsb2Moc2l6ZW9mKHN0cnVjdCByYXNfYmFkcGFnZSkgKiBkYXRhLT5j
b3VudCwgR0ZQX0tFUk5FTCk7Cj4gKyAgICAgICBpZiAoISpicHMpIHsKPiArICAgICAgICAgICAg
ICAgcmV0ID0gLUVOT01FTTsKPiArICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gKyAgICAgICB9
Cj4gKyAgICAgICAvKiBUT0RPCj4gKyAgICAgICAgKiBXZSBjYW4gY29tYmluZSBOIG5lYXJieSBw
YWdlcyBpbnRvIG9uZSBlbnRyeSB3aXRoIHNpemUgKiBOLgo+ICsgICAgICAgICovCj4gKyAgICAg
ICBmb3IgKDsgaSA8IGRhdGEtPmNvdW50OyBpKyspIHsKPiArICAgICAgICAgICAgICAgKCpicHMp
W2ldID0gKHN0cnVjdCByYXNfYmFkcGFnZSl7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgLmJw
ID0gZGF0YS0+YnBzW2ldLmJwLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIC5zaXplID0gQU1E
R1BVX0dQVV9QQUdFX1NJWkUsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgLmZsYWdzID0gMCwK
PiArICAgICAgICAgICAgICAgfTsKPiArCj4gKyAgICAgICAgICAgICAgIGlmIChkYXRhLT5sYXN0
X3Jlc2VydmVkIDw9IGkpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgKCpicHMpW2ldLmZsYWdz
ID0gMTsKPiArICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS0+YnBzW2ldLmJvID09IE5VTEwp
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgKCpicHMpW2ldLmZsYWdzID0gMjsKPiArICAgICAg
IH0KPiArCj4gKyAgICAgICAqY291bnQgPSBkYXRhLT5jb3VudDsKPiArb3V0Ogo+ICsgICAgICAg
bXV0ZXhfdW5sb2NrKCZjb24tPnJlY292ZXJ5X2xvY2spOwo+ICsgICAgICAgcmV0dXJuIHJldDsK
PiArfQo+ICsKClBsZWFzZSBhZGQgYSBET0Mgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBzeXNmcyBp
bnRlcmZhY2VzIGFzIHdlbGwgb3IKdXBkYXRlIHRoZSBleGlzdGluZyBET0Mgc2VjdGlvbiB0byBj
b3ZlciB0aGUgc3lzZnMgZmlsZXMgYXMgd2VsbC4KCkFsZXgKCj4gIHN0YXRpYyB2b2lkIGFtZGdw
dV9yYXNfZG9fcmVjb3Zlcnkoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQo+ICB7Cj4gICAgICAg
ICBzdHJ1Y3QgYW1kZ3B1X3JhcyAqcmFzID0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3Jhcy5oCj4gaW5kZXggZWFlZjVlZGVmYzM0Li42MDBmNzM1ZDkyMDEgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oCj4gQEAgLTkzLDYgKzkzLDcgQEAgc3Ry
dWN0IGFtZGdwdV9yYXMgewo+ICAgICAgICAgc3RydWN0IGRlbnRyeSAqZW50Owo+ICAgICAgICAg
Lyogc3lzZnMgKi8KPiAgICAgICAgIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlIGZlYXR1cmVzX2F0
dHI7Cj4gKyAgICAgICBzdHJ1Y3QgYmluX2F0dHJpYnV0ZSBiYWRwYWdlc19hdHRyOwo+ICAgICAg
ICAgLyogYmxvY2sgYXJyYXkgKi8KPiAgICAgICAgIHN0cnVjdCByYXNfbWFuYWdlciAqb2JqczsK
Pgo+IC0tCj4gMi4xNy4xCj4KPiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwo+IGFtZC1nZnggbWFpbGluZyBsaXN0Cj4gYW1kLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2FtZC1nZngKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
YW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
