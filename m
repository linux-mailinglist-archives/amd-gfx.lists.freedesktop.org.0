Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E5F1A2F660F
	for <lists+amd-gfx@lfdr.de>; Thu, 14 Jan 2021 17:37:12 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3560B89AB9;
	Thu, 14 Jan 2021 16:37:10 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-oi1-x235.google.com (mail-oi1-x235.google.com
 [IPv6:2607:f8b0:4864:20::235])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 484F189AB9
 for <amd-gfx@lists.freedesktop.org>; Thu, 14 Jan 2021 16:37:09 +0000 (UTC)
Received: by mail-oi1-x235.google.com with SMTP id q25so6488057oij.10
 for <amd-gfx@lists.freedesktop.org>; Thu, 14 Jan 2021 08:37:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=NCiAqqjvNIkOW5xHP7jeRFOUoJHV0adatFPib92XO2I=;
 b=IlXFYa6BVmNc7MYjsFtzjCbiW7TXvpDx8s863FuXcHKj8pFrOgWaRn38S1sHt1h2RG
 Hbopzd5pSzYPwvlvFZpvgQMrooiLVocQ+mraItSiGL7Q65SuyE89DpMnlAjOcVxvSkOl
 GFEsFfoZeC9D/R8QTt/b6gC2lDeyJyvsXIUc8=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=NCiAqqjvNIkOW5xHP7jeRFOUoJHV0adatFPib92XO2I=;
 b=QwHfqzXsG4h44q2hl3k0eW/xVU9pXzgWsSbEj+8EWKhBJUs4g8R3XQVuHf5gadNUTe
 FsVwuUruJPvzoL9u+xbwifDJ0CXkq7iiRVpqbKZ6KGXHvTSHXCtvDWYsflf2Fmq2vzlF
 EVaOL/ZgVX63DW/gDDffwI8CkMoRxfe4732dbudftKEEMN9cBceVNXDVbnmb1uEHO0XK
 PS+xiPA77wDg/Y3U8IwgmzEGSd6An53ulAR5HNu0MjBDOJHYPar6g64cK3dp809BUvah
 wV//mT1YLzfL2WE/mET8mU2B4/EIwAdrgJNFYqCcH+MN9q6z9qMAHK7M3OxtBInnJrDy
 ekAQ==
X-Gm-Message-State: AOAM531pJmPmIFnjKM5h/qQZ444d50TX8b9Kv3bJV6MJg4az8bLB/EeZ
 fuEKmyu/+a2aFQ+H0SxeINA8MwRuMhZRGecf12M7kw==
X-Google-Smtp-Source: ABdhPJxbI1VBnJOYA4G6Xnj7ewm6Wbx12xl/f7igQeOvV0u1rKz13kdMmpAWhUgHs12A4F9grEtcv13Mh4N6el4w7kU=
X-Received: by 2002:aca:4e11:: with SMTP id c17mr2959360oib.14.1610642228517; 
 Thu, 14 Jan 2021 08:37:08 -0800 (PST)
MIME-Version: 1.0
References: <20210107030127.20393-1-Felix.Kuehling@amd.com>
 <X/bTFWL3HYVc8LEF@phenom.ffwll.local>
 <6daf9ebc-507e-6e83-04dd-d7c5fc6998d6@amd.com>
 <X/hux3eX8Ywf61h7@phenom.ffwll.local> <20210113165646.GB521755@redhat.com>
 <c1ecb381-20cc-850b-4491-99c6b413f7df@gmail.com>
 <CAKMK7uHXRwE7tgHM0K921pEyrpZWz7G5q_OcrS4tBPAN-f3k-g@mail.gmail.com>
 <5267b98d-05f4-9e8a-e424-b226f72ce066@amd.com>
 <CAKMK7uEWTGv69w4qDFtWZuX1OmcRi8hejQKuZnm8gpxmeRrCFw@mail.gmail.com>
 <0d400766-d000-aecc-747d-b5f2a2df2c2d@gmail.com>
 <CAKMK7uEgHpzGBKE5vTEpfvqgoK2DrQW4KGbvXMsAF_n85opbmg@mail.gmail.com>
 <55d283fc-10e1-d3de-0c2c-88e16c3af9c0@amd.com>
 <CAKMK7uGZbak7P-icLhPd=koExWmLHjnm0qJupd2toHuhGO7DZg@mail.gmail.com>
 <1591bedd-95b5-8a75-df40-f59cf8f35656@amd.com>
In-Reply-To: <1591bedd-95b5-8a75-df40-f59cf8f35656@amd.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Thu, 14 Jan 2021 17:36:57 +0100
Message-ID: <CAKMK7uHaOBzm3wNf7ZE7TMgZ4tNQKmmihQXQ-vD0TME6DMQs8Q@mail.gmail.com>
Subject: Re: HMM fence (was Re: [PATCH 00/35] Add HMM-based SVM memory manager
 to KFD)
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Sierra <alex.sierra@amd.com>, "Yang, Philip" <philip.yang@amd.com>,
 Felix Kuehling <felix.kuehling@amd.com>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>,
 Jerome Glisse <jglisse@redhat.com>,
 dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBKYW4gMTQsIDIwMjEgYXQgNTowMSBQTSBDaHJpc3RpYW4gS8O2bmlnCjxjaHJpc3Rp
YW4ua29lbmlnQGFtZC5jb20+IHdyb3RlOgo+Cj4gQW0gMTQuMDEuMjEgdW0gMTY6NDAgc2Nocmll
YiBEYW5pZWwgVmV0dGVyOgo+ID4gW1NOSVBdCj4gPj4gU28gSSB0aGluayB3ZSBoYXZlIHRvIHNv
bWVob3cgc29sdmUgdGhpcyBpbiB0aGUga2VybmVsIG9yIHdlIHdpbGwgZ28gaW4KPiA+PiBjaXJj
bGVzIGFsbCB0aGUgdGltZS4KPiA+Pgo+ID4+PiBTbyBmcm9tIHRoYXQgcG92IEkgdGhpbmsgdGhl
IGtlcm5lbCBzaG91bGQgYXQgbW9zdCBkZWFsIHdpdGggYW4KPiA+Pj4gaG1tX2ZlbmNlIGZvciBj
cm9zcy1wcm9jZXNzIGNvbW11bmljYXRpb24gYW5kIG1heWJlIHNvbWUgc3RhbmRhcmQgd2FpdAo+
ID4+PiBwcmltaXRpdmVzIChmb3IgdXNlcnNwYWNlIHRvIHVzZSwgbm90IGZvciB0aGUga2VybmVs
KS4KPiA+Pj4KPiA+Pj4gVGhlIG9ubHkgdXNlIGNhc2UgdGhpcyB3b3VsZCBmb3JiaWQgaXMgdXNp
bmcgcGFnZSBmYXVsdHMgZm9yIGxlZ2FjeQo+ID4+PiBpbXBsaWNpdC9leHBsaWNpdCBkbWFfZmVu
Y2Ugc3luY2VkIHdvcmtsb2FkcywgYW5kIEkgdGhpbmsgdGhhdCdzCj4gPj4+IHBlcmZlY3RseSBv
ayB0byBub3QgYWxsb3cuIEVzcGVjaWFsbHkgc2luY2UgdGhlIG1vdGl2YXRpb24gaGVyZSBmb3IK
PiA+Pj4gYWxsIHRoaXMgaXMgY29tcHV0ZSwgYW5kIGNvbXB1dGUgZG9lc24ndCBwYXNzIGFyb3Vu
ZCBkbWFfZmVuY2VzCj4gPj4+IGFueXdheS4KPiA+PiBBcyBBbGV4IHNhaWQgd2Ugd2lsbCByYXRo
ZXIgc29vbiBzZWUgdGhpcyBmb3IgZ2Z4IGFzIHdlbGwgYW5kIHdlIG1vc3QKPiA+PiBsaWtlbHkg
d2lsbCBzZWUgY29tYmluYXRpb25zIG9mIG9sZCBkbWFfZmVuY2UgYmFzZWQgaW50ZWdyYXRlZCBn
cmFwaGljcwo+ID4+IHdpdGggbmV3IGRlZGljYXRlZCBHUFVzLgo+ID4+Cj4gPj4gU28gSSBkb24n
dCB0aGluayB3ZSBjYW4gc2F5IHdlIHJlZHVjZSB0aGUgcHJvYmxlbSB0byBjb21wdXRlIGFuZCBk
b24ndAo+ID4+IHN1cHBvcnQgYW55dGhpbmcgZWxzZS4KPiA+IEknbSBub3QgYWdhaW5zdCBwYWdl
ZmF1bHRzIGZvciBnZngsIGp1c3QgaW4gcHVzaGluZyB0aGUgbWFnaWMgaW50byB0aGUKPiA+IGtl
cm5lbC4gSSBkb24ndCB0aGluayB0aGF0IHdvcmtzLCBiZWNhdXNlIGl0IG1lYW5zIHdlIGFkZCBz
dGFsbCBwb2ludHMKPiA+IHdoZXJlIHVzZXNwYWNlLCBlc3BlY2lhbGx5IHZrIHVzZXJzcGFjZSwg
cmVhbGx5IGRvZXNuJ3Qgd2FudCBpdC4gU28KPiA+IHNhbWUgd2F5IGxpa2UgdGltZWxpbmUgc3lu
Y29iaiwgd2UgbmVlZCB0byBwdXNoIHRoZSBjb21wYXQgd29yayBpbnRvCj4gPiB1c2Vyc3BhY2Uu
Cj4gPgo+ID4gVGhlcmUncyBnb2luZyB0byBiZSBhIGZldyBzdGFsbCBwb2ludHM6Cj4gPiAtIGZ1
bGx5IG5ldyBzdGFjaywgd2Ugd2FpdCBmb3IgdGhlIHVzZXJzcGFjZSBmZW5jZSBpbiB0aGUgYXRv
bWljCj4gPiBjb21taXQgcGF0aCAod2hpY2ggd2UgY2FuLCBpZiB3ZSdyZSByZWFsbHkgY2FyZWZ1
bCwgc2luY2Ugd2UgcGluIGFsbAo+ID4gYnVmZmVycyB1cGZyb250IGFuZCBzbyB0aGVyZSdzIG5v
IHJpc2spCj4gPiAtIHVzZXJzcGFjZSBmZW5jaW5nIGdwdSBpbiB0aGUgY2xpZW50LCBjb21wb3Np
dG9yIHByb3RvY29sIGNhbiBwYXNzCj4gPiBhcm91bmQgdXNlcnNwYWNlIGZlbmNlcywgYnV0IHRo
ZSBjb21wb3NpdG9yIHN0aWxsIHVzZXMgZG1hX2ZlbmNlIGZvcgo+ID4gaXRzZWxmLiBUaGVyZSdz
IHNvbWUgc3RhbGxpbmcgaW4gdGhlIGNvbXBvc2l0b3IsIHdoaWNoIGl0IGRvZXMgYWxyZWFkeQo+
ID4gYW55d2F5IHdoZW4gaXQncyBjb2xsZWN0aW5nIG5ldyBmcmFtZXMgZnJvbSBjbGllbnRzCj4g
PiAtIHVzZXJzcGFjZSBmZW5jaW5nIGdwdSBpbiB0aGUgY2xpZW50LCBidXQgbm8gY29tcG9zaXRv
ciBwcm90b2NvbDogV2UKPiA+IHdhaXQgaW4gdGhlIHN3YXBjaGFpbiwgYnV0IGluIGEgc2VwYXJh
dGUgdGhyZWFkIHNvIHRoYXQgbm90aGluZyBibG9ja3MKPiA+IHRoYXQgc2hvdWxkbid0IGJsb2Nr
Cj4gPgo+ID4gSWYgd2UgaW5zdGVhZCBnbyB3aXRoICJtYWdpYyB3YWl0cyBpbiB0aGUga2VybmVs
IGJlaGluZCB1c2Vyc3BhY2Uncwo+ID4gYmFjayIsIGxpa2Ugd2hhdCB5b3VyIGl0ZW0gNiB3b3Vs
ZCBpbXBseSwgdGhlbiB3ZSdyZSBub3QgcmVhbGx5Cj4gPiBzb2x2aW5nIGFueXRoaW5nLgo+ID4K
PiA+IEZvciBhY3R1YWwgaW1wbGVtZW50YXRpb24gSSB0aGluayB0aGUgYmVzdCB3b3VsZCBiZSBh
biBleHRlbnNpb24gb2YKPiA+IGRybV9zeW5jb2JqLiBUaG9zZSBhbHJlYWR5IGhhdmUgYXQgbGVh
c3QgY29uY2VwdHVhbGx5IGZ1dHVyZS9pbmZpbml0ZQo+ID4gZmVuY2VzLCBhbmQgd2UgYWxyZWFk
eSBoYXZlIGZkIHBhc3NpbmcsIHNvICJqdXN0IiBuZWVkIHNvbWUgcHJvdG9jb2wKPiA+IHRvIHBh
c3MgdGhlbSBhcm91bmQuIFBsdXMgd2UgY291bGQgdXNlIHRoZSBzYW1lIHVhcGkgZm9yIHRpbWVs
aW5lCj4gPiBzeW5jb2JqIHVzaW5nIGRtYV9mZW5jZSBhcyBmb3IgaG1tX2ZlbmNlLCBzbyBhbHNv
IGVhc2llciB0byB0cmFuc2l0aW9uCj4gPiBmb3IgdXNlcnNwYWNlIHRvIHRoZSBuZXcgd29ybGQg
c2luY2UgZG9uJ3QgbmVlZCB0aGUgbmV3IGh3IGNhcGFiaWxpdHkKPiA+IHRvIHJvbGwgb3V0IHRo
ZSBuZXcgdWFwaSBhbmQgcHJvdG9jb2xzLgo+ID4KPiA+IFRoYXQncyBub3QgdGhhdCBoYXJkIHRv
IHJvbGwgb3V0LCBhbmQgdGVjaG5pY2FsbHkgYSBsb3QgYmV0dGVyIHRoYW4KPiA+IGhhY2tpbmcg
dXAgZG1hX3Jlc3YgYW5kIGhvcGluZyB3ZSBkb24ndCBlbmQgdXAgc3RhbGxpbmcgaW4gd3JvbmcK
PiA+IHBsYWNlcywgd2hpY2ggc291bmRzIHZlcnkgImVlZWVrIiB0byBtZSA6LSkKPgo+IFllYWgs
IHRoYXQncyB3aGF0IEkgdG90YWxseSBhZ3JlZSB1cG9uIDopCj4KPiBNeSBpZGVhIHdhcyBqdXN0
IHRoZSBsYXN0IHJlc29ydCBzaW5jZSB3ZSBhcmUgbWl4aW5nIHVzZXJzcGFjZSBzeW5jIGFuZAo+
IG1lbW9yeSBtYW5hZ2VtZW50IHNvIGNyZWF0aXZlIGhlcmUuCj4KPiBTdGFsbGluZyBpbiB1c2Vy
c3BhY2Ugd2lsbCBwcm9iYWJseSBnZXQgc29tZSBwdXNoIGJhY2sgYXMgd2VsbCwgYnV0Cj4gbWF5
YmUgbm90IGFzIG11Y2ggYXMgc3RhbGxpbmcgaW4gdGhlIGtlcm5lbC4KCkkgZ3Vlc3Mgd2UgbmVl
ZCB0byBoYXZlIGxhc3QtcmVzb3J0IHN0YWxsaW5nIGluIHRoZSBrZXJuZWwsIGJ1dCBubwptb3Jl
IHRoYW4gd2hhdCB3ZSBkbyB3aXRoIGRybV9zeW5jb2JqIGZ1dHVyZSBmZW5jZXMgcmlnaHQgbm93
LiBMaWtlCndoZW4gYW55dGhpbmcgYXNrcyBmb3IgYSBkbWFfZmVuY2Ugb3V0IG9mIGFuIGhtbV9m
ZW5jZSBkcm1fc3luY29iLCB3ZQpqdXN0IHN0YWxsIHVudGlsIHRoZSBobW1fZmVuY2UgaXMgc2ln
bmFsbGVkLCBhbmQgdGhlbiBjcmVhdGUgYQpkbWFfZmVuY2UgdGhhdCdzIGFscmVhZHkgc2lnbmFs
bGVkIGFuZCByZXR1cm4gdGhhdCB0byB0aGUgY2FsbGVyLgpPYnZpb3VzbHkgdGhpcyBzaG91bGRu
J3QgaGFwcGVuLCBzaW5jZSBhbnlvbmUgd2hvJ3MgdGltZWxpbmUgYXdhcmUKd2lsbCBjaGVjayB3
aGV0aGVyIHRoZSBmZW5jZSBoYXMgYXQgbGVhc3QgbWF0ZXJpYWxpemVkIGZpcnN0IGFuZCBzdGFs
bApzb21ld2hlcmUgbW9yZSB1c2VmdWwgZm9yIHRoYXQgZmlyc3QuCgo+IE9rIGlmIHdlIGNhbiBh
dCBsZWFzdCByZW1vdmUgaW1wbGljaXQgc3luYyBmcm9tIHRoZSBwaWN0dXJlIHRoZW4gdGhlCj4g
cXVlc3Rpb24gcmVtYWlucyBob3cgZG8gd2UgaW50ZWdyYXRlIEhNTSBpbnRvIGRybV9zeW5jb2Jq
IHRoZW4/CgpGcm9tIGFuIHVhcGkgcG92IHByb2JhYmx5IGp1c3QgYW4gaW9jdGwgdG8gY3JlYXRl
IGFuIGhtbSBkcm1fc3luY29iaiwKYW5kIGEgc3luY29iaiBpb2N0bCB0byBxdWVyeSB3aGV0aGVy
IGl0J3MgYSBobW1fZmVuY2Ugb3IgZG1hX2ZlbmNlCnN5bmNvYmosIHNvIHRoYXQgdXNlcnNwYWNl
IGNhbiBiZSBhIGJpdCBtb3JlIGNsZXZlciB3aXRoIHdoZXJlIGl0CnNob3VsZCBzdGFsbCAtIGZv
ciBhbiBobW1fZmVuY2UgdGhlIHN0YWxsIHdpbGwgbW9zdCBsaWtlbHkgYmUgZGlyZWN0bHkKb24g
dGhlIGdwdSBpbiBtYW55IGNhc2VzIChzbyB0aGUgaW9jdGwgc2hvdWxkIGFsc28gZ2l2ZSB1cyBh
bGwgdGhlCmRldGFpbHMgYWJvdXQgdGhhdCBpZiBpdCdzIGFuIGhtbSBmZW5jZSkuCgpJIHRoaW5r
IHRoZSByZWFsIHdvcmsgaXMgZ29pbmcgdGhyb3VnaCBhbGwgdGhlIGhhcmR3YXJlIGFuZCB0cnlp
bmcgdG8KZmlndXJlIG91dCB3aGF0IHRoZSBjb21tb24gZ3JvdW5kIGZvciB1c2Vyc3BhY2UgZmVu
Y2VzIGFyZS4gU3R1ZmYgbGlrZQpjYW4gdGhleSBiZSBpbiBzeXN0ZW0gbWVtb3J5LCBvciBuZWVk
IHNvbWV0aGluZyBzcGVjaWFsICh3YyBtYXliZSwgYnV0CkkgaG9wZSBzeXN0ZW0gbWVtb3J5IHNo
b3VsZCBiZSBmaW5lIGZvciBldmVyeW9uZSksIGFuZCBob3cgeW91IGNvdW50LAp3cmFwIGFuZCBj
b21wYXJlLiBJIGFsc28gaGF2ZSBubyBpZGVhIGhvdy9pZiB3ZSBjYW4gb3B0aW1pemVkIGNwdQp3
YWl0cyBhY3Jvc3MgZGlmZmVyZW50IGRyaXZlcnMuCgpQbHVzIGlkZWFsbHkgd2UgZ2V0IHNvbWUg
YWN0dWFsIHdheWxhbmQgcHJvdG9jb2wgZ29pbmcgZm9yIHBhc3NpbmcKZHJtX3N5bmNvYmogYXJv
dW5kLCBzbyB3ZSBjYW4gdGVzdCBpdC4KLURhbmllbAotLSAKRGFuaWVsIFZldHRlcgpTb2Z0d2Fy
ZSBFbmdpbmVlciwgSW50ZWwgQ29ycG9yYXRpb24KaHR0cDovL2Jsb2cuZmZ3bGwuY2gKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5n
IGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cg==
