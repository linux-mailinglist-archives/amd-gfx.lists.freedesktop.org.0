Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5674049006
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:46:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 96E8689E69;
	Mon, 17 Jun 2019 19:46:46 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x841.google.com (mail-qt1-x841.google.com
 [IPv6:2607:f8b0:4864:20::841])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4447589E5B
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:46:45 +0000 (UTC)
Received: by mail-qt1-x841.google.com with SMTP id y57so12332437qtk.4
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:46:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=gpnqAjB2sTWUsv+/Z2SCstyhHGNYHlrrRrepyFvWgKk=;
 b=FtCAp5cAbUJXJdcTrNg174NkCRGMckSx27mmeMv+VFM7MTocMzh6IHw/uNZn1Kd2/j
 BG9qzIJ8+yJ70kZ28US3q8VLYh8ukyg2Z+puD4xOazAaFwl/fvBHMf2ZaAjq5NEVK0++
 RtGWfxzj4oKf6bIVE+2oBKSVzrw0JqG+tldQpK3L6cqIAMX7SYq8WYYDbT88s45tGIM4
 OVQ34GZ7up/t0Puqr2JT5O/OI2NdH890ciBLfyBI7TKM650aOQ5KfB3yVQcwkSjg7Da+
 dUryPnBvue9yLlwyKuVcFL7bD10qpc8h9sJb4tNC9Q6Nhq66nMK5A5TzF0245gGpMgMa
 Oc4g==
X-Gm-Message-State: APjAAAV6kh+wvtQ/Iro/k9uO095RgAYoFmWpv3YiwqGFVNzYikfLvH8s
 m+UTmKWnRD4+xEzza1MQXeeR7M486Bk=
X-Google-Smtp-Source: APXvYqx6x4XhdANZQa6qkrvtcIn7LXsaH766egLCmSxb8mrWsnW4gtvXkVUoPJZRQW4k+tYfqqmb5g==
X-Received: by 2002:a0c:d0fa:: with SMTP id b55mr23534434qvh.209.1560800804125; 
 Mon, 17 Jun 2019 12:46:44 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id u4sm6559420qkb.16.2019.06.17.12.46.43
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:46:43 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 346/459] drm/amd/display: Ensure DRR triggers in BP
Date: Mon, 17 Jun 2019 14:44:47 -0500
Message-Id: <20190617194540.18497-47-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617194540.18497-1-alexander.deucher@amd.com>
References: <20190617194540.18497-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=gpnqAjB2sTWUsv+/Z2SCstyhHGNYHlrrRrepyFvWgKk=;
 b=W0jib0QdjtrAA1dBEezQqxKdcy06vC8vLF1rn6mUWFxtVTGbgchNY9dh9uS/P0VHG9
 G52v1j6rBfqnOke7DinVNSAO/7yqZaarCiQ3/GIPlrkgy2znoRrr/4Kc4lvrbUj1atLB
 mH+mZQCx3HY2d+DpHjZ/hh2ZZfRCZyKmGqZa6MC31lS8VSkCIuSCKrWHVzgL1+4Ih8Cv
 QqryouOOCZpJ+pWBRPI5FiSaeAzhGsbvWKpFB1tfddPN+IYeYu/GMMt8zXqOiTtQwiiH
 cQVauis7Gq9UvB1WG9fx/6ixPzNvxQP2GKH/VWBZ+1EGBA4PLkz0yidovRB04j1Yki1c
 Mx3w==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Leo Li <sunpeng.li@amd.com>, Alex Deucher <alexander.deucher@amd.com>,
 Aric Cyr <Aric.Cyr@amd.com>, Eryk Brol <eryk.brol@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogRXJ5ayBCcm9sIDxlcnlrLmJyb2xAYW1kLmNvbT4KCltXaHldCkluIHRoZSBwcmV2aW91
cyBpbXBsZW1lbnRhdGlvbiBEUlIgZXZlbnQgc29tZXRpbWVzIGNhbWUKaW4gZHVyaW5nIEZQMiBy
ZWdpb24gd2hpY2ggaXMgYSBrZWVwLW91dCB6b25lLiBUaGlzCndvdWxkIGNhdXNlIHRoZSBmcmFt
ZSBub3QgdG8gbGF0Y2ggdW50aWwgdGhlIG5leHQgZnJhbWUKd2hpY2ggcmVzdWx0ZWQgaW4gaGVh
dnkgZmxpY2tlci4gVG8gZml4IHRoaXMgd2UgbmVlZAp0byBtYWtlIHN1cmUgdGhhdCBpdCB0cmln
Z2VycyBpbiB0aGUgQlAuCgpbSG93XQoxLiBSZW1vdmUgRFJSIHByb2dyYW1taW5nIGR1cmluZyBm
bGlwCjIuIFNldHVwIG1hbnVhbCB0cmlnZ2VyIGZvciBEUlIgZXZlbnQgYW5kIHRyaWdnZXIgaXQK
YWZ0ZXIgc3VyZmFjZSBwcm9ncmFtbWluZyBpcyBjb21wbGV0ZQoKU2lnbmVkLW9mZi1ieTogRXJ5
ayBCcm9sIDxlcnlrLmJyb2xAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IEFyaWMgQ3lyIDxBcmljLkN5
ckBhbWQuY29tPgpBY2tlZC1ieTogTGVvIExpIDxzdW5wZW5nLmxpQGFtZC5jb20+ClNpZ25lZC1v
ZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNvbT4KLS0tCiAuLi4v
Z3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9vcHRjLmMgfCAzMSArKysrKysrKysr
KysrKysrKysrCiAuLi4vZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9vcHRjLmgg
fCAgNyArKystLQogLi4uL2FtZC9kaXNwbGF5L2RjL2luYy9ody90aW1pbmdfZ2VuZXJhdG9yLmgg
IHwgIDEgKwogMyBmaWxlcyBjaGFuZ2VkLCAzNyBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24y
MF9vcHRjLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfb3B0
Yy5jCmluZGV4IGNlZTFlZDExZmZlMy4uNzI0YjVhOWU0N2QwIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfb3B0Yy5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9vcHRjLmMKQEAgLTM4MSw2ICszODEs
MzUgQEAgdm9pZCBvcHRjMl9sb2NrKHN0cnVjdCB0aW1pbmdfZ2VuZXJhdG9yICpvcHRjKQogCQkJ
CTEsIDEwKTsKIH0KIAordm9pZCBvcHRjMl9zZXR1cF9tYW51YWxfdHJpZ2dlcihzdHJ1Y3QgdGlt
aW5nX2dlbmVyYXRvciAqb3B0YykKK3sKKwlzdHJ1Y3Qgb3B0YyAqb3B0YzEgPSBEQ04xMFRHX0ZS
T01fVEcob3B0Yyk7CisKKwlSRUdfU0VUKE9UR19NQU5VQUxfRkxPV19DT05UUk9MLCAwLAorCQkJ
TUFOVUFMX0ZMT1dfQ09OVFJPTCwgMSk7CisKKwlSRUdfU0VUKE9UR19HTE9CQUxfQ09OVFJPTDIs
IDAsCisJCQlNQU5VQUxfRkxPV19DT05UUk9MX1NFTCwgb3B0Yy0+aW5zdCk7CisKKwlSRUdfU0VU
XzgoT1RHX1RSSUdBX0NOVEwsIDAsCisJCQlPVEdfVFJJR0FfU09VUkNFX1NFTEVDVCwgMjIsCisJ
CQlPVEdfVFJJR0FfU09VUkNFX1BJUEVfU0VMRUNULCBvcHRjLT5pbnN0LAorCQkJT1RHX1RSSUdB
X1JJU0lOR19FREdFX0RFVEVDVF9DTlRMLCAxLAorCQkJT1RHX1RSSUdBX0ZBTExJTkdfRURHRV9E
RVRFQ1RfQ05UTCwgMCwKKwkJCU9UR19UUklHQV9QT0xBUklUWV9TRUxFQ1QsIDAsCisJCQlPVEdf
VFJJR0FfRlJFUVVFTkNZX1NFTEVDVCwgMCwKKwkJCU9UR19UUklHQV9ERUxBWSwgMCwKKwkJCU9U
R19UUklHQV9DTEVBUiwgMSk7Cit9CisKK3ZvaWQgb3B0YzJfcHJvZ3JhbV9tYW51YWxfdHJpZ2dl
cihzdHJ1Y3QgdGltaW5nX2dlbmVyYXRvciAqb3B0YykKK3sKKwlzdHJ1Y3Qgb3B0YyAqb3B0YzEg
PSBEQ04xMFRHX0ZST01fVEcob3B0Yyk7CisKKwlSRUdfU0VUKE9UR19UUklHQV9NQU5VQUxfVFJJ
RywgMCwKKwkJCU9UR19UUklHQV9NQU5VQUxfVFJJRywgMSk7Cit9CisKIHN0YXRpYyBzdHJ1Y3Qg
dGltaW5nX2dlbmVyYXRvcl9mdW5jcyBkY24yMF90Z19mdW5jcyA9IHsKIAkJLnZhbGlkYXRlX3Rp
bWluZyA9IG9wdGMxX3ZhbGlkYXRlX3RpbWluZywKIAkJLnByb2dyYW1fdGltaW5nID0gb3B0YzFf
cHJvZ3JhbV90aW1pbmcsCkBAIC00MzUsNiArNDY0LDggQEAgc3RhdGljIHN0cnVjdCB0aW1pbmdf
Z2VuZXJhdG9yX2Z1bmNzIGRjbjIwX3RnX2Z1bmNzID0gewogCQkuc2V0X2dzbCA9IG9wdGMyX3Nl
dF9nc2wsCiAJCS5zZXRfZ3NsX3NvdXJjZV9zZWxlY3QgPSBvcHRjMl9zZXRfZ3NsX3NvdXJjZV9z
ZWxlY3QsCiAJCS5zZXRfdnRnX3BhcmFtcyA9IG9wdGMxX3NldF92dGdfcGFyYW1zLAorCQkucHJv
Z3JhbV9tYW51YWxfdHJpZ2dlciA9IG9wdGMyX3Byb2dyYW1fbWFudWFsX3RyaWdnZXIsCisJCS5z
ZXR1cF9tYW51YWxfdHJpZ2dlciA9IG9wdGMyX3NldHVwX21hbnVhbF90cmlnZ2VyCiB9OwogCiB2
b2lkIGRjbjIwX3RpbWluZ19nZW5lcmF0b3JfaW5pdChzdHJ1Y3Qgb3B0YyAqb3B0YzEpCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfb3B0Yy5o
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX29wdGMuaAppbmRl
eCBiOTM2YTRkYTE1ODMuLmEwMGJiMGQ5MmE0OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX29wdGMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfb3B0Yy5oCkBAIC00MCw3ICs0MCw4IEBACiAJU1JJ
KE9QVENfQllURVNfUEVSX1BJWEVMLCBPRE0sIGluc3QpLFwKIAlTUkkoT1BUQ19XSURUSF9DT05U
Uk9MLCBPRE0sIGluc3QpLFwKIAlTUkkoT1BUQ19NRU1PUllfQ09ORklHLCBPRE0sIGluc3QpLFwK
LQlTUihEV0JfU09VUkNFX1NFTEVDVCkKKwlTUihEV0JfU09VUkNFX1NFTEVDVCksXAorCVNSSShP
VEdfTUFOVUFMX0ZMT1dfQ09OVFJPTCwgT1RHLCBpbnN0KQogCiAjZGVmaW5lIFRHX0NPTU1PTl9N
QVNLX1NIX0xJU1RfRENOMl8wKG1hc2tfc2gpXAogCVRHX0NPTU1PTl9NQVNLX1NIX0xJU1RfRENO
KG1hc2tfc2gpLFwKQEAgLTcwLDcgKzcxLDggQEAKIAlTRihPRE0wX09QVENfV0lEVEhfQ09OVFJP
TCwgT1BUQ19EU0NfU0xJQ0VfV0lEVEgsIG1hc2tfc2gpLFwKIAlTRihPRE0wX09QVENfV0lEVEhf
Q09OVFJPTCwgT1BUQ19TRUdNRU5UX1dJRFRILCBtYXNrX3NoKSxcCiAJU0YoRFdCX1NPVVJDRV9T
RUxFQ1QsIE9QVENfRFdCMF9TT1VSQ0VfU0VMRUNULCBtYXNrX3NoKSxcCi0JU0YoRFdCX1NPVVJD
RV9TRUxFQ1QsIE9QVENfRFdCMV9TT1VSQ0VfU0VMRUNULCBtYXNrX3NoKQorCVNGKERXQl9TT1VS
Q0VfU0VMRUNULCBPUFRDX0RXQjFfU09VUkNFX1NFTEVDVCwgbWFza19zaCksXAorCVNGKE9URzBf
T1RHX01BTlVBTF9GTE9XX0NPTlRST0wsIE1BTlVBTF9GTE9XX0NPTlRST0wsIG1hc2tfc2gpCiAK
IHZvaWQgZGNuMjBfdGltaW5nX2dlbmVyYXRvcl9pbml0KHN0cnVjdCBvcHRjICpvcHRjKTsKIApA
QCAtMTA1LDUgKzEwNyw2IEBAIHZvaWQgb3B0YzJfdHJpcGxlYnVmZmVyX3VubG9jayhzdHJ1Y3Qg
dGltaW5nX2dlbmVyYXRvciAqb3B0Yyk7CiB2b2lkIG9wdGMyX2xvY2soc3RydWN0IHRpbWluZ19n
ZW5lcmF0b3IgKm9wdGMpOwogdm9pZCBvcHRjMl9sb2NrX2dsb2JhbChzdHJ1Y3QgdGltaW5nX2dl
bmVyYXRvciAqb3B0Yyk7CiB2b2lkIG9wdGMyX3NldHVwX2dsb2JhbF9sb2NrKHN0cnVjdCB0aW1p
bmdfZ2VuZXJhdG9yICpvcHRjKTsKK3ZvaWQgb3B0YzJfcHJvZ3JhbV9tYW51YWxfdHJpZ2dlcihz
dHJ1Y3QgdGltaW5nX2dlbmVyYXRvciAqb3B0Yyk7CiAKICNlbmRpZiAvKiBfX0RDX09QVENfRENO
MjBfSF9fICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvaW5j
L2h3L3RpbWluZ19nZW5lcmF0b3IuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9p
bmMvaHcvdGltaW5nX2dlbmVyYXRvci5oCmluZGV4IGVjZWQ2ZWMwNTg5OS4uMjUxYmFlYmU1Mzg2
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvaW5jL2h3L3RpbWlu
Z19nZW5lcmF0b3IuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvaW5jL2h3
L3RpbWluZ19nZW5lcmF0b3IuaApAQCAtMjU3LDYgKzI1Nyw3IEBAIHN0cnVjdCB0aW1pbmdfZ2Vu
ZXJhdG9yX2Z1bmNzIHsKIAogCXZvaWQgKCpzZXRfdnRnX3BhcmFtcykoc3RydWN0IHRpbWluZ19n
ZW5lcmF0b3IgKm9wdGMsCiAJCQljb25zdCBzdHJ1Y3QgZGNfY3J0Y190aW1pbmcgKmRjX2NydGNf
dGltaW5nKTsKKwogI2lmZGVmIENPTkZJR19EUk1fQU1EX0RDX0RDTjJfMAogI2lmZGVmIENPTkZJ
R19EUk1fQU1EX0RDX0RTQ19TVVBQT1JUCiAJdm9pZCAoKnNldF9kc2NfY29uZmlnKShzdHJ1Y3Qg
dGltaW5nX2dlbmVyYXRvciAqb3B0YywKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9hbWQtZ2Z4
