Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7C76648FFC
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:46:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E4BBB89E36;
	Mon, 17 Jun 2019 19:46:35 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x844.google.com (mail-qt1-x844.google.com
 [IPv6:2607:f8b0:4864:20::844])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 83E6E89DFF
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:46:34 +0000 (UTC)
Received: by mail-qt1-x844.google.com with SMTP id j19so12255089qtr.12
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:46:34 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=redAfGoohL8PCi2WlrP+unTa0cWl8vWO/5AQyPs8C54=;
 b=tWaQos4s8qqVhwAWGTyWzfwa92USiz88HU+5yNdB5x1ZfX6JZhL3zHskc8s3HaaFmv
 SQEU2YwE+G1UFn7DVbEV25f1giAgRULcV0ND9kmWSW60gbJAL+6FodjBJofTpf3yWAoC
 se6efchhNTieqvaRYTXSkv8AFidb2s+uOukwvf5XQ6lUFg+IQigjC1wlrYj2CT/k6aTo
 1QO+OOq5wMTvDt0+gDhRsrLhwL8krjnPqS/aDaUlXpXFwMSjLLWiIZFoFkKBLCOwF4j6
 P6emJBpDuKI/Pj13OBEQH7VValIdq4EuYTrB36k1mFiNVv2ixZywbWEe+Qdkl3Mtf3cw
 eVzw==
X-Gm-Message-State: APjAAAWbxCzZi3AhCMxdsqlzIWk3idj1oBoYtzrn55k9p7WV78x4pmi/
 gqVK2wpxRvH66OEiai3Rg0pl1ydrIw8=
X-Google-Smtp-Source: APXvYqzFgTRI9qVcRBbo03lzUrWV+rp5648KQj+dRkA5uL5MVfI5mysAdZ5GPTPoRXdyAgYb8BA66g==
X-Received: by 2002:ac8:234a:: with SMTP id b10mr41109391qtb.261.1560800792927; 
 Mon, 17 Jun 2019 12:46:32 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id u4sm6559420qkb.16.2019.06.17.12.46.32
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:46:32 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 337/459] drm/amd/display: hook navi10 pplib functions
Date: Mon, 17 Jun 2019 14:44:38 -0500
Message-Id: <20190617194540.18497-38-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617194540.18497-1-alexander.deucher@amd.com>
References: <20190617194540.18497-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=redAfGoohL8PCi2WlrP+unTa0cWl8vWO/5AQyPs8C54=;
 b=bqB9WC/kIvvvOM0Aj9Cl+QC65Nbo6bQbaAtmwyy3uNquVGHOESCAMHqkRcu+V61TUq
 0j4vl1Wvgfbx9sgmIqKoe7DvfqCFTvk03domQyKNb4ULbwmQEeZGivLH2XoRfGtGvpmr
 hb1EO7zrp5yKqKZrAY1BDaEIwVRhm7RLgs4t9iW9PjAAfF1BaQ63MGsbsOgviQ8Qk36G
 qzPYhynT8f5dkfqQ9Q3l7jwVaGuLvF+WFiUd4ijBg3DbAft09ZaxgDjoaGRU2xHG5QqC
 5YkLwzWbpqSghYDHG1KCbpGUIAAf/iZTxEYUxKCm6k9646O+YjLhWmZZlxT9OBkIo66N
 vNSg==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>, hersen wu <hersenxs.wu@amd.com>,
 Roman Li <Roman.Li@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogaGVyc2VuIHd1IDxoZXJzZW54cy53dUBhbWQuY29tPgoKZHVyaW5nIGJyaW5nIHVwIHRp
bWUsIGJlZm9yZSB3aW5kb3cgZGMtcHBwbGliIGludGVyZmFjZQpkZXNpZ24sIGxpbnV4IGRjIHVz
ZSByYXZlbiBkYy1wcGxpYiBpbnRlcmZhY2UuCm5vdyBudmFpMTAgZGMtcHBsaWItc211IGludGVy
ZmFjZSBpcyBjaGFuZ2VkIGFuZCB2ZXJpZmllZAp1bmRlciB3aW5kb3csIG5hdmkxMCBuZWVkIGl0
cyBzcGVjaWZpYyBkYy1wcGxpYi1zbXUKaW50ZXJmYWNlLiB0b2RvOiBob29rIHNldF9oYXJkX21p
bl91Y2xrX2J5X2ZyZXEsCmdldF9tYXhpbXVtX3N1c3RhaW5hYmxlX2Nsb2NrcwoKU2lnbmVkLW9m
Zi1ieTogaGVyc2VuIHd1IDxoZXJzZW54cy53dUBhbWQuY29tPgpBY2tlZC1ieTogQWxleCBEZXVj
aGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpSZXZpZXdlZC1ieTogUm9tYW4gTGkgPFJv
bWFuLkxpQGFtZC5jb20+ClNpZ25lZC1vZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRl
dWNoZXJAYW1kLmNvbT4KLS0tCiAuLi4vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9w
cF9zbXUuYyAgfCAyNzkgKysrKysrKysrKysrKysrKystCiAxIGZpbGUgY2hhbmdlZCwgMjcxIGlu
c2VydGlvbnMoKyksIDggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1fcHBfc211LmMgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9wcF9zbXUuYwppbmRleCBmNzhjYTJi
ZTY2NGYuLjRkNDUzMWMxOGMxNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2FtZGdwdV9kbS9hbWRncHVfZG1fcHBfc211LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1fcHBfc211LmMKQEAgLTY0NywxNiArNjQ3LDI3
OSBAQCB2b2lkIHBwX3J2X3NldF9oYXJkX21pbl9mY2xrX2J5X2ZyZXEoc3RydWN0IHBwX3NtdSAq
cHAsIGludCBtaHopCiAJcHBfZnVuY3MtPnNldF9oYXJkX21pbl9mY2xrX2J5X2ZyZXEocHBfaGFu
ZGxlLCBtaHopOwogfQogCitlbnVtIHBwX3NtdV9zdGF0dXMgcHBfbnZfc2V0X3dtX3Jhbmdlcyhz
dHJ1Y3QgcHBfc211ICpwcCwKKwkJc3RydWN0IHBwX3NtdV93bV9yYW5nZV9zZXRzICpyYW5nZXMp
Cit7CisJY29uc3Qgc3RydWN0IGRjX2NvbnRleHQgKmN0eCA9IHBwLT5kbTsKKwlzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiA9IGN0eC0+ZHJpdmVyX2NvbnRleHQ7CisJc3RydWN0IHNtdV9jb250
ZXh0ICpzbXUgPSAmYWRldi0+c211OworCXN0cnVjdCBkbV9wcF93bV9zZXRzX3dpdGhfY2xvY2tf
cmFuZ2VzX3NvYzE1IHdtX3dpdGhfY2xvY2tfcmFuZ2VzOworCXN0cnVjdCBkbV9wcF9jbG9ja19y
YW5nZV9mb3JfZG1pZl93bV9zZXRfc29jMTUgKndtX2RjZV9jbG9ja3MgPQorCQkJd21fd2l0aF9j
bG9ja19yYW5nZXMud21fZG1pZl9jbG9ja3NfcmFuZ2VzOworCXN0cnVjdCBkbV9wcF9jbG9ja19y
YW5nZV9mb3JfbWNpZl93bV9zZXRfc29jMTUgKndtX3NvY19jbG9ja3MgPQorCQkJd21fd2l0aF9j
bG9ja19yYW5nZXMud21fbWNpZl9jbG9ja3NfcmFuZ2VzOworCWludDMyX3QgaTsKKworCXdtX3dp
dGhfY2xvY2tfcmFuZ2VzLm51bV93bV9kbWlmX3NldHMgPSByYW5nZXMtPm51bV9yZWFkZXJfd21f
c2V0czsKKwl3bV93aXRoX2Nsb2NrX3Jhbmdlcy5udW1fd21fbWNpZl9zZXRzID0gcmFuZ2VzLT5u
dW1fd3JpdGVyX3dtX3NldHM7CisKKwlmb3IgKGkgPSAwOyBpIDwgd21fd2l0aF9jbG9ja19yYW5n
ZXMubnVtX3dtX2RtaWZfc2V0czsgaSsrKSB7CisJCWlmIChyYW5nZXMtPnJlYWRlcl93bV9zZXRz
W2ldLndtX2luc3QgPiAzKQorCQkJd21fZGNlX2Nsb2Nrc1tpXS53bV9zZXRfaWQgPSBXTV9TRVRf
QTsKKwkJZWxzZQorCQkJd21fZGNlX2Nsb2Nrc1tpXS53bV9zZXRfaWQgPQorCQkJCQlyYW5nZXMt
PnJlYWRlcl93bV9zZXRzW2ldLndtX2luc3Q7CisJCXdtX2RjZV9jbG9ja3NbaV0ud21fbWF4X2Rj
ZmNsa19jbGtfaW5fa2h6ID0KKwkJCXJhbmdlcy0+cmVhZGVyX3dtX3NldHNbaV0ubWF4X2RyYWlu
X2Nsa19taHogKiAxMDAwOworCQl3bV9kY2VfY2xvY2tzW2ldLndtX21pbl9kY2ZjbGtfY2xrX2lu
X2toeiA9CisJCQlyYW5nZXMtPnJlYWRlcl93bV9zZXRzW2ldLm1pbl9kcmFpbl9jbGtfbWh6ICog
MTAwMDsKKwkJd21fZGNlX2Nsb2Nrc1tpXS53bV9tYXhfbWVtX2Nsa19pbl9raHogPQorCQkJcmFu
Z2VzLT5yZWFkZXJfd21fc2V0c1tpXS5tYXhfZmlsbF9jbGtfbWh6ICogMTAwMDsKKwkJd21fZGNl
X2Nsb2Nrc1tpXS53bV9taW5fbWVtX2Nsa19pbl9raHogPQorCQkJcmFuZ2VzLT5yZWFkZXJfd21f
c2V0c1tpXS5taW5fZmlsbF9jbGtfbWh6ICogMTAwMDsKKwl9CisKKwlmb3IgKGkgPSAwOyBpIDwg
d21fd2l0aF9jbG9ja19yYW5nZXMubnVtX3dtX21jaWZfc2V0czsgaSsrKSB7CisJCWlmIChyYW5n
ZXMtPndyaXRlcl93bV9zZXRzW2ldLndtX2luc3QgPiAzKQorCQkJd21fc29jX2Nsb2Nrc1tpXS53
bV9zZXRfaWQgPSBXTV9TRVRfQTsKKwkJZWxzZQorCQkJd21fc29jX2Nsb2Nrc1tpXS53bV9zZXRf
aWQgPQorCQkJCQlyYW5nZXMtPndyaXRlcl93bV9zZXRzW2ldLndtX2luc3Q7CisJCXdtX3NvY19j
bG9ja3NbaV0ud21fbWF4X3NvY2Nsa19jbGtfaW5fa2h6ID0KKwkJCXJhbmdlcy0+d3JpdGVyX3dt
X3NldHNbaV0ubWF4X2ZpbGxfY2xrX21oeiAqIDEwMDA7CisJCXdtX3NvY19jbG9ja3NbaV0ud21f
bWluX3NvY2Nsa19jbGtfaW5fa2h6ID0KKwkJCXJhbmdlcy0+d3JpdGVyX3dtX3NldHNbaV0ubWlu
X2ZpbGxfY2xrX21oeiAqIDEwMDA7CisJCXdtX3NvY19jbG9ja3NbaV0ud21fbWF4X21lbV9jbGtf
aW5fa2h6ID0KKwkJCXJhbmdlcy0+d3JpdGVyX3dtX3NldHNbaV0ubWF4X2RyYWluX2Nsa19taHog
KiAxMDAwOworCQl3bV9zb2NfY2xvY2tzW2ldLndtX21pbl9tZW1fY2xrX2luX2toeiA9CisJCQly
YW5nZXMtPndyaXRlcl93bV9zZXRzW2ldLm1pbl9kcmFpbl9jbGtfbWh6ICogMTAwMDsKKwl9CisK
KwlpZiAoIXNtdS0+ZnVuY3MpCisJCXJldHVybiBQUF9TTVVfUkVTVUxUX1VOU1VQUE9SVEVEOwor
CisJLyogMDogc3VjY2Vzc2Z1bCBvciBzbXUuZnVuY3MtPnNldF93YXRlcm1hcmtzX2Zvcl9jbG9j
a19yYW5nZXMgPSBOVUxMOworCSAqIDE6IGZhaWwKKwkgKi8KKwlpZiAoc211X3NldF93YXRlcm1h
cmtzX2Zvcl9jbG9ja19yYW5nZXMoJmFkZXYtPnNtdSwKKwkJCSZ3bV93aXRoX2Nsb2NrX3Jhbmdl
cykpCisJCXJldHVybiBQUF9TTVVfUkVTVUxUX1VOU1VQUE9SVEVEOworCisJcmV0dXJuIFBQX1NN
VV9SRVNVTFRfT0s7Cit9CisKK2VudW0gcHBfc211X3N0YXR1cyBwcF9udl9zZXRfcG1lX3dhX2Vu
YWJsZShzdHJ1Y3QgcHBfc211ICpwcCkKK3sKKwljb25zdCBzdHJ1Y3QgZGNfY29udGV4dCAqY3R4
ID0gcHAtPmRtOworCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gY3R4LT5kcml2ZXJfY29u
dGV4dDsKKwlzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSA9ICZhZGV2LT5zbXU7CisKKwlpZiAoIXNt
dS0+ZnVuY3MpCisJCXJldHVybiBQUF9TTVVfUkVTVUxUX1VOU1VQUE9SVEVEOworCisJLyogMDog
c3VjY2Vzc2Z1bCBvciBzbXUuZnVuY3MtPnNldF9hemFsaWFfZDNfcG1lID0gTlVMTDsgIDE6IGZh
aWwgKi8KKwlpZiAoc211X3NldF9hemFsaWFfZDNfcG1lKHNtdSkpCisJCXJldHVybiBQUF9TTVVf
UkVTVUxUX0ZBSUw7CisKKwlyZXR1cm4gUFBfU01VX1JFU1VMVF9PSzsKK30KKworZW51bSBwcF9z
bXVfc3RhdHVzIHBwX252X3NldF9kaXNwbGF5X2NvdW50KHN0cnVjdCBwcF9zbXUgKnBwLCBpbnQg
Y291bnQpCit7CisJY29uc3Qgc3RydWN0IGRjX2NvbnRleHQgKmN0eCA9IHBwLT5kbTsKKwlzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGN0eC0+ZHJpdmVyX2NvbnRleHQ7CisJc3RydWN0IHNt
dV9jb250ZXh0ICpzbXUgPSAmYWRldi0+c211OworCisJaWYgKCFzbXUtPmZ1bmNzKQorCQlyZXR1
cm4gUFBfU01VX1JFU1VMVF9VTlNVUFBPUlRFRDsKKworCS8qIDA6IHN1Y2Nlc3NmdWwgb3Igc211
LmZ1bmNzLT5zZXRfZGlzcGxheV9jb3VudCA9IE5VTEw7ICAxOiBmYWlsICovCisJaWYgKHNtdV9z
ZXRfZGlzcGxheV9jb3VudChzbXUsIGNvdW50KSkKKwkJcmV0dXJuIFBQX1NNVV9SRVNVTFRfRkFJ
TDsKKworCXJldHVybiBQUF9TTVVfUkVTVUxUX09LOworfQorCitlbnVtIHBwX3NtdV9zdGF0dXMg
cHBfbnZfc2V0X21pbl9kZWVwX3NsZWVwX2RjZmNsayhzdHJ1Y3QgcHBfc211ICpwcCwgaW50IG1o
eikKK3sKKwljb25zdCBzdHJ1Y3QgZGNfY29udGV4dCAqY3R4ID0gcHAtPmRtOworCXN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2ID0gY3R4LT5kcml2ZXJfY29udGV4dDsKKwlzdHJ1Y3Qgc211X2Nv
bnRleHQgKnNtdSA9ICZhZGV2LT5zbXU7CisKKwlpZiAoIXNtdS0+ZnVuY3MpCisJCXJldHVybiBQ
UF9TTVVfUkVTVUxUX1VOU1VQUE9SVEVEOworCisJLyogMDogc3VjY2Vzc2Z1bCBvciBzbXUuZnVu
Y3MtPnNldF9kZWVwX3NsZWVwX2RjZWZjbGsgPSBOVUxMOzE6IGZhaWwgKi8KKwlpZiAoc211X3Nl
dF9kZWVwX3NsZWVwX2RjZWZjbGsoc211LCBtaHopKQorCQlyZXR1cm4gUFBfU01VX1JFU1VMVF9G
QUlMOworCisJcmV0dXJuIFBQX1NNVV9SRVNVTFRfT0s7Cit9CisKK2VudW0gcHBfc211X3N0YXR1
cyBwcF9udl9zZXRfaGFyZF9taW5fZGNlZmNsa19ieV9mcmVxKAorCQlzdHJ1Y3QgcHBfc211ICpw
cCwgaW50IG1oeikKK3sKKwljb25zdCBzdHJ1Y3QgZGNfY29udGV4dCAqY3R4ID0gcHAtPmRtOwor
CXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gY3R4LT5kcml2ZXJfY29udGV4dDsKKwlzdHJ1
Y3Qgc211X2NvbnRleHQgKnNtdSA9ICZhZGV2LT5zbXU7CisJc3RydWN0IHBwX2Rpc3BsYXlfY2xv
Y2tfcmVxdWVzdCBjbG9ja19yZXE7CisKKwlpZiAoIXNtdS0+ZnVuY3MpCisJCXJldHVybiBQUF9T
TVVfUkVTVUxUX1VOU1VQUE9SVEVEOworCisJY2xvY2tfcmVxLmNsb2NrX3R5cGUgPSBhbWRfcHBf
ZGNlZl9jbG9jazsKKwljbG9ja19yZXEuY2xvY2tfZnJlcV9pbl9raHogPSBtaHogKiAxMDAwOwor
CisJLyogMDogc3VjY2Vzc2Z1bCBvciBzbXUuZnVuY3MtPmRpc3BsYXlfY2xvY2tfdm9sdGFnZV9y
ZXF1ZXN0ID0gTlVMTAorCSAqIDE6IGZhaWwKKwkgKi8KKwlpZiAoc211X2Rpc3BsYXlfY2xvY2tf
dm9sdGFnZV9yZXF1ZXN0KHNtdSwgJmNsb2NrX3JlcSkpCisJCXJldHVybiBQUF9TTVVfUkVTVUxU
X0ZBSUw7CisKKwlyZXR1cm4gUFBfU01VX1JFU1VMVF9PSzsKK30KKworZW51bSBwcF9zbXVfc3Rh
dHVzIHBwX252X3NldF9oYXJkX21pbl91Y2xrX2J5X2ZyZXEoc3RydWN0IHBwX3NtdSAqcHAsIGlu
dCBtaHopCit7CisJY29uc3Qgc3RydWN0IGRjX2NvbnRleHQgKmN0eCA9IHBwLT5kbTsKKwlzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGN0eC0+ZHJpdmVyX2NvbnRleHQ7CisJc3RydWN0IHNt
dV9jb250ZXh0ICpzbXUgPSAmYWRldi0+c211OworCXN0cnVjdCBwcF9kaXNwbGF5X2Nsb2NrX3Jl
cXVlc3QgY2xvY2tfcmVxOworCisJaWYgKCFzbXUtPmZ1bmNzKQorCQlyZXR1cm4gUFBfU01VX1JF
U1VMVF9VTlNVUFBPUlRFRDsKKworCWNsb2NrX3JlcS5jbG9ja190eXBlID0gYW1kX3BwX21lbV9j
bG9jazsKKwljbG9ja19yZXEuY2xvY2tfZnJlcV9pbl9raHogPSBtaHogKiAxMDAwOworCisJLyog
MDogc3VjY2Vzc2Z1bCBvciBzbXUuZnVuY3MtPmRpc3BsYXlfY2xvY2tfdm9sdGFnZV9yZXF1ZXN0
ID0gTlVMTAorCSAqIDE6IGZhaWwKKwkgKi8KKwlpZiAoc211X2Rpc3BsYXlfY2xvY2tfdm9sdGFn
ZV9yZXF1ZXN0KHNtdSwgJmNsb2NrX3JlcSkpCisJCXJldHVybiBQUF9TTVVfUkVTVUxUX0ZBSUw7
CisKKwlyZXR1cm4gUFBfU01VX1JFU1VMVF9PSzsKK30KKworZW51bSBwcF9zbXVfc3RhdHVzIHBw
X252X3NldF92b2x0YWdlX2J5X2ZyZXEoc3RydWN0IHBwX3NtdSAqcHAsCisJCWVudW0gcHBfc211
X252X2Nsb2NrX2lkIGNsb2NrX2lkLCBpbnQgbWh6KQoreworCWNvbnN0IHN0cnVjdCBkY19jb250
ZXh0ICpjdHggPSBwcC0+ZG07CisJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBjdHgtPmRy
aXZlcl9jb250ZXh0OworCXN0cnVjdCBzbXVfY29udGV4dCAqc211ID0gJmFkZXYtPnNtdTsKKwlz
dHJ1Y3QgcHBfZGlzcGxheV9jbG9ja19yZXF1ZXN0IGNsb2NrX3JlcTsKKworCWlmICghc211LT5m
dW5jcykKKwkJcmV0dXJuIFBQX1NNVV9SRVNVTFRfVU5TVVBQT1JURUQ7CisKKwlzd2l0Y2ggKGNs
b2NrX2lkKSB7CisJY2FzZSBQUF9TTVVfTlZfRElTUENMSzoKKwkJY2xvY2tfcmVxLmNsb2NrX3R5
cGUgPSBhbWRfcHBfZGlzcF9jbG9jazsKKwkJYnJlYWs7CisJY2FzZSBQUF9TTVVfTlZfUEhZQ0xL
OgorCQljbG9ja19yZXEuY2xvY2tfdHlwZSA9IGFtZF9wcF9waHlfY2xvY2s7CisJCWJyZWFrOwor
CWNhc2UgUFBfU01VX05WX1BJWEVMQ0xLOgorCQljbG9ja19yZXEuY2xvY2tfdHlwZSA9IGFtZF9w
cF9waXhlbF9jbG9jazsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJYnJlYWs7CisJfQorCWNsb2Nr
X3JlcS5jbG9ja19mcmVxX2luX2toeiA9IG1oeiAqIDEwMDA7CisKKwkvKiAwOiBzdWNjZXNzZnVs
IG9yIHNtdS5mdW5jcy0+ZGlzcGxheV9jbG9ja192b2x0YWdlX3JlcXVlc3QgPSBOVUxMCisJICog
MTogZmFpbAorCSAqLworCWlmIChzbXVfZGlzcGxheV9jbG9ja192b2x0YWdlX3JlcXVlc3Qoc211
LCAmY2xvY2tfcmVxKSkKKwkJcmV0dXJuIFBQX1NNVV9SRVNVTFRfRkFJTDsKKworCXJldHVybiBQ
UF9TTVVfUkVTVUxUX09LOworfQorCitlbnVtIHBwX3NtdV9zdGF0dXMgcHBfbnZfZ2V0X21heGlt
dW1fc3VzdGFpbmFibGVfY2xvY2tzKAorCQlzdHJ1Y3QgcHBfc211ICpwcCwgc3RydWN0IHBwX3Nt
dV9udl9jbG9ja190YWJsZSAqbWF4X2Nsb2NrcykKK3sKKwljb25zdCBzdHJ1Y3QgZGNfY29udGV4
dCAqY3R4ID0gcHAtPmRtOworCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gY3R4LT5kcml2
ZXJfY29udGV4dDsKKwlzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSA9ICZhZGV2LT5zbXU7CisKKwlp
ZiAoIXNtdS0+ZnVuY3MpCisJCXJldHVybiBQUF9TTVVfUkVTVUxUX1VOU1VQUE9SVEVEOworCisJ
aWYgKCFzbXUtPmZ1bmNzLT5nZXRfbWF4X3N1c3RhaW5hYmxlX2Nsb2Nrc19ieV9kYykKKwkJcmV0
dXJuIFBQX1NNVV9SRVNVTFRfVU5TVVBQT1JURUQ7CisKKwlpZiAoIXNtdS0+ZnVuY3MtPmdldF9t
YXhfc3VzdGFpbmFibGVfY2xvY2tzX2J5X2RjKHNtdSwgbWF4X2Nsb2NrcykpCisJCXJldHVybiBQ
UF9TTVVfUkVTVUxUX09LOworCisJcmV0dXJuIFBQX1NNVV9SRVNVTFRfRkFJTDsKK30KKworZW51
bSBwcF9zbXVfc3RhdHVzIHBwX252X2dldF91Y2xrX2RwbV9zdGF0ZXMoc3RydWN0IHBwX3NtdSAq
cHAsCisJCXVuc2lnbmVkIGludCAqY2xvY2tfdmFsdWVzX2luX2toeiwgdW5zaWduZWQgaW50ICpu
dW1fc3RhdGVzKQoreworCWNvbnN0IHN0cnVjdCBkY19jb250ZXh0ICpjdHggPSBwcC0+ZG07CisJ
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBjdHgtPmRyaXZlcl9jb250ZXh0OworCXN0cnVj
dCBzbXVfY29udGV4dCAqc211ID0gJmFkZXYtPnNtdTsKKworCWlmICghc211LT5wcHRfZnVuY3Mp
CisJCXJldHVybiBQUF9TTVVfUkVTVUxUX1VOU1VQUE9SVEVEOworCisJaWYgKCFzbXUtPnBwdF9m
dW5jcy0+Z2V0X3VjbGtfZHBtX3N0YXRlcykKKwkJcmV0dXJuIFBQX1NNVV9SRVNVTFRfVU5TVVBQ
T1JURUQ7CisKKwlpZiAoIXNtdS0+cHB0X2Z1bmNzLT5nZXRfdWNsa19kcG1fc3RhdGVzKHNtdSwK
KwkJCWNsb2NrX3ZhbHVlc19pbl9raHosIG51bV9zdGF0ZXMpKQorCQlyZXR1cm4gUFBfU01VX1JF
U1VMVF9PSzsKKworCXJldHVybiBQUF9TTVVfUkVTVUxUX0ZBSUw7Cit9CisKIHZvaWQgZG1fcHBf
Z2V0X2Z1bmNzKAogCQlzdHJ1Y3QgZGNfY29udGV4dCAqY3R4LAogCQlzdHJ1Y3QgcHBfc211X2Z1
bmNzICpmdW5jcykKIHsKLQlmdW5jcy0+cnZfZnVuY3MucHBfc211LmRtID0gY3R4OwotCWZ1bmNz
LT5ydl9mdW5jcy5zZXRfd21fcmFuZ2VzID0gcHBfcnZfc2V0X3dtX3JhbmdlczsKLQlmdW5jcy0+
cnZfZnVuY3Muc2V0X3BtZV93YV9lbmFibGUgPSBwcF9ydl9zZXRfcG1lX3dhX2VuYWJsZTsKLQlm
dW5jcy0+cnZfZnVuY3Muc2V0X2Rpc3BsYXlfY291bnQgPSBwcF9ydl9zZXRfYWN0aXZlX2Rpc3Bs
YXlfY291bnQ7Ci0JZnVuY3MtPnJ2X2Z1bmNzLnNldF9taW5fZGVlcF9zbGVlcF9kY2ZjbGsgPSBw
cF9ydl9zZXRfbWluX2RlZXBfc2xlZXBfZGNmY2xrOwotCWZ1bmNzLT5ydl9mdW5jcy5zZXRfaGFy
ZF9taW5fZGNmY2xrX2J5X2ZyZXEgPSBwcF9ydl9zZXRfaGFyZF9taW5fZGNlZmNsa19ieV9mcmVx
OwotCWZ1bmNzLT5ydl9mdW5jcy5zZXRfaGFyZF9taW5fZmNsa19ieV9mcmVxID0gcHBfcnZfc2V0
X2hhcmRfbWluX2ZjbGtfYnlfZnJlcTsKKwlzd2l0Y2ggKGN0eC0+ZGNlX3ZlcnNpb24pIHsKKwlj
YXNlIERDTl9WRVJTSU9OXzFfMDoKKwljYXNlIERDTl9WRVJTSU9OXzFfMDE6CisJCWZ1bmNzLT5j
dHgudmVyID0gUFBfU01VX1ZFUl9SVjsKKwkJZnVuY3MtPnJ2X2Z1bmNzLnBwX3NtdS5kbSA9IGN0
eDsKKwkJZnVuY3MtPnJ2X2Z1bmNzLnNldF93bV9yYW5nZXMgPSBwcF9ydl9zZXRfd21fcmFuZ2Vz
OworCQlmdW5jcy0+cnZfZnVuY3Muc2V0X3BtZV93YV9lbmFibGUgPSBwcF9ydl9zZXRfcG1lX3dh
X2VuYWJsZTsKKwkJZnVuY3MtPnJ2X2Z1bmNzLnNldF9kaXNwbGF5X2NvdW50ID0KKwkJCQlwcF9y
dl9zZXRfYWN0aXZlX2Rpc3BsYXlfY291bnQ7CisJCWZ1bmNzLT5ydl9mdW5jcy5zZXRfbWluX2Rl
ZXBfc2xlZXBfZGNmY2xrID0KKwkJCQlwcF9ydl9zZXRfbWluX2RlZXBfc2xlZXBfZGNmY2xrOwor
CQlmdW5jcy0+cnZfZnVuY3Muc2V0X2hhcmRfbWluX2RjZmNsa19ieV9mcmVxID0KKwkJCQlwcF9y
dl9zZXRfaGFyZF9taW5fZGNlZmNsa19ieV9mcmVxOworCQlmdW5jcy0+cnZfZnVuY3Muc2V0X2hh
cmRfbWluX2ZjbGtfYnlfZnJlcSA9CisJCQkJcHBfcnZfc2V0X2hhcmRfbWluX2ZjbGtfYnlfZnJl
cTsKKwkJYnJlYWs7CisjaWZkZWYgQ09ORklHX0RSTV9BTURfRENfRENOMl8wCisJY2FzZSBEQ05f
VkVSU0lPTl8yXzA6CisJCWZ1bmNzLT5jdHgudmVyID0gUFBfU01VX1ZFUl9OVjsKKwkJZnVuY3Mt
Pm52X2Z1bmNzLnBwX3NtdS5kbSA9IGN0eDsKKwkJZnVuY3MtPm52X2Z1bmNzLnNldF9kaXNwbGF5
X2NvdW50ID0gcHBfbnZfc2V0X2Rpc3BsYXlfY291bnQ7CisJCWZ1bmNzLT5udl9mdW5jcy5zZXRf
aGFyZF9taW5fZGNmY2xrX2J5X2ZyZXEgPQorCQkJCXBwX252X3NldF9oYXJkX21pbl9kY2VmY2xr
X2J5X2ZyZXE7CisJCWZ1bmNzLT5udl9mdW5jcy5zZXRfbWluX2RlZXBfc2xlZXBfZGNmY2xrID0K
KwkJCQlwcF9udl9zZXRfbWluX2RlZXBfc2xlZXBfZGNmY2xrOworCQlmdW5jcy0+bnZfZnVuY3Mu
c2V0X3ZvbHRhZ2VfYnlfZnJlcSA9CisJCQkJcHBfbnZfc2V0X3ZvbHRhZ2VfYnlfZnJlcTsKKwkJ
ZnVuY3MtPm52X2Z1bmNzLnNldF93bV9yYW5nZXMgPSBwcF9udl9zZXRfd21fcmFuZ2VzOworCisJ
CS8qIHRvZG8gc2V0X3BtZV93YV9lbmFibGUgY2F1c2UgNGtANm9oeiBkaXNwbGF5IG5vdCBsaWdo
dCB1cCAqLworCQlmdW5jcy0+bnZfZnVuY3Muc2V0X3BtZV93YV9lbmFibGUgPSBOVUxMOworCQkv
KiB0b2RvIGRlYnVnIHdhcmluZyBtZXNzYWdlICovCisJCWZ1bmNzLT5udl9mdW5jcy5zZXRfaGFy
ZF9taW5fdWNsa19ieV9mcmVxID0gTlVMTDsKKwkJLyogdG9kbyAgY29tcGFyZSBkYXRhIHdpdGgg
d2luZG93IGRyaXZlciovCisJCWZ1bmNzLT5udl9mdW5jcy5nZXRfbWF4aW11bV9zdXN0YWluYWJs
ZV9jbG9ja3MgPSBOVUxMOworCQkvKnRvZG8gIGNvbXBhcmUgZGF0YSB3aXRoIHdpbmRvdyBkcml2
ZXIgKi8KKwkJZnVuY3MtPm52X2Z1bmNzLmdldF91Y2xrX2RwbV9zdGF0ZXMgPSBOVUxMOworCQli
cmVhazsKKyNlbmRpZgorCWRlZmF1bHQ6CisJCURSTV9FUlJPUigic211IHZlcnNpb24gaXMgbm90
IHN1cHBvcnRlZCAhXG4iKTsKKwkJYnJlYWs7CisJfQogfQotCi0tIAoyLjIwLjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBs
aXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
