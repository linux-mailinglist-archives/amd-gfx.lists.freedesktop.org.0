Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id F1FE1BF467
	for <lists+amd-gfx@lfdr.de>; Thu, 26 Sep 2019 15:51:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4D4776ED29;
	Thu, 26 Sep 2019 13:51:44 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 02CA46ED3E
 for <amd-gfx@lists.freedesktop.org>; Thu, 26 Sep 2019 13:51:43 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id f22so2674244wmc.2
 for <amd-gfx@lists.freedesktop.org>; Thu, 26 Sep 2019 06:51:42 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=F4S68EQe0T9mFB9kTqJgwHEKPU5eBx9nxy3BBXOxWmo=;
 b=Vsa6qLi5xx9XFiPCyN8vjmvCmlmJP5IXSw51psC1OOYWW5Mm+LKqOxqrLZ6Riwob0I
 Y2mNcMmcHo9PmVGDUjUl1lD+qd/NZKhTjXR4tElpAhhRfCdsyslIaR28UYCt5Xvx1IRB
 vZOlPlJpqzUKEnjpJGq+XLZ6ZK7GHUQ8n1kHl8hxoY+3FgOroz63Ccz265GBXpgphQg4
 juZDAqF9reCLfWYzTEYR9YSGNyk/ev/u38FXzRKzPy26qrahZlFmmoF04v2Ald1WRKkI
 JZ4PNrUYpRs3RO7t8Laxywy06t0tYDAYa5aVnp86urxZTMSvMLEaeziu2pE/1aFpFqMA
 6OqA==
X-Gm-Message-State: APjAAAX+3oWfe0NKYGrdyJvJeD2qsoUOz6wRDaqMXQLgAUxanreCsgD+
 +5tMvJMr9Mu5Sq6YKQUlZGFJ1rK4SpFWnT5hz47V53rP
X-Google-Smtp-Source: APXvYqysndJNAvaNc8piiRb6Ji2Dsc/iyWjPQ1PxLTwFTE63IJqxcASDMEshjY2vy7cVyIoTcNr5ughqLg+ccEMuGjQ=
X-Received: by 2002:a1c:1a45:: with SMTP id a66mr3105370wma.102.1569505901570; 
 Thu, 26 Sep 2019 06:51:41 -0700 (PDT)
MIME-Version: 1.0
References: <20190926080746.20765-1-xiaojie.yuan@amd.com>
 <BN8PR12MB36027CA5662543E7F956657589860@BN8PR12MB3602.namprd12.prod.outlook.com>
 <BN6PR12MB1809591CB4102B70BEC82E93F7860@BN6PR12MB1809.namprd12.prod.outlook.com>
 <608f4e8a-ef35-6fbc-cda6-51c3803af014@gmail.com>
 <CADnq5_PdWnfB1knhdi_fre1gSeE5ibMXvCrzq-id36BbR63ZfQ@mail.gmail.com>
 <1d7c307f-29c5-9286-636e-b06fa44ef9ae@amd.com>
In-Reply-To: <1d7c307f-29c5-9286-636e-b06fa44ef9ae@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Thu, 26 Sep 2019 09:51:29 -0400
Message-ID: <CADnq5_PiyWEd04YTEMbkPBquAn6nJvEjoxb9_LfPftjLzMeGxg@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu/gmc10: apply the 'invalidation from sdma'
 workaround for navi
To: "Koenig, Christian" <Christian.Koenig@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=F4S68EQe0T9mFB9kTqJgwHEKPU5eBx9nxy3BBXOxWmo=;
 b=WvF6jqlMajYUn+lqeVglvTpgJZXLDSC3RG/jXEtQODDmRjnDTVKWNrdNvbsZDBfiIU
 DVn27uyzy5pAauGEwQfdkioOpLqX8yCtoLO/qyqekDRYNcQIUYI+IybtzB9tpJTxflm4
 kD7l1FjrRigi9RVimew8hfDlJZKLVtZxualg7iHw1h8oFo9MwONpIH7iXuBCF6mbrS8p
 uQvBI1zYrnpFdCmZ6TMsSPrM2fAmU1WIz2myGmH2VZTDBqBqkLzkxT3vfINc331Vmoid
 OAC08lbRV88Zz4gHwr2nNpfaHmORFgicla45QGSH0023yJyuHSZ0cEfUf1saXd/1Eje8
 lqAg==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Yuan,
 Xiaojie" <Xiaojie.Yuan@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBTZXAgMjYsIDIwMTkgYXQgOTo0NyBBTSBLb2VuaWcsIENocmlzdGlhbgo8Q2hyaXN0
aWFuLktvZW5pZ0BhbWQuY29tPiB3cm90ZToKPgo+IEFtIDI2LjA5LjE5IHVtIDE1OjQwIHNjaHJp
ZWIgQWxleCBEZXVjaGVyOgo+ID4gT24gVGh1LCBTZXAgMjYsIDIwMTkgYXQgODoyOSBBTSBDaHJp
c3RpYW4gS8O2bmlnCj4gPiA8Y2tvZW5pZy5sZWljaHR6dW1lcmtlbkBnbWFpbC5jb20+IHdyb3Rl
Ogo+ID4+IFN0b3AsIHdhaXQgYSBzZWNvbmQgZ3V5cyEKPiA+Pgo+ID4+IFRoaXMgd2lsbCBkaXNh
YmxlIHRoZSB3b3JrYXJvdW5kIGZvciBOYXZpMTAgYW5kIHRoYXQgaXMgY2VydGFpbmx5IG5vdCBj
b3JyZWN0Ogo+ID4+Cj4gPj4gIShhZGV2LT5hc2ljX3R5cGUgPj0gQ0hJUF9OQVZJMTAgJiYgYWRl
di0+YXNpY190eXBlIDw9IENISVBfTkFWSTEyKQo+ID4+Cj4gPiBBY3R1YWxseSwgSSB0aGluayBp
dCdzIGNvcnJlY3QuIFdoZW4gSSBtZXJnZWQgdGhlIGJhY28gcGF0Y2gsIEkKPiA+IGFjY2lkZW50
YWxseSBkcm9wcGVkIHRoZSBuYXZpIGNoZWNrcy4gIEUuZy4sCj4gPiBAQCAtMjQ1LDggKzI0NSw5
IEBAIHN0YXRpYyB2b2lkIGdtY192MTBfMF9mbHVzaF9ncHVfdGxiKHN0cnVjdAo+ID4gYW1kZ3B1
X2RldmljZSAqYWRldiwKPiA+ICAgICAgICAgIG11dGV4X2xvY2soJmFkZXYtPm1tYW4uZ3R0X3dp
bmRvd19sb2NrKTsKPiA+Cj4gPiAgICAgICAgICBnbWNfdjEwXzBfZmx1c2hfdm1faHViKGFkZXYs
IHZtaWQsIEFNREdQVV9NTUhVQiwgMCk7Cj4gPiAtICAgICAgIGlmICghYWRldi0+bW1hbi5idWZm
ZXJfZnVuY3NfZW5hYmxlZCB8fCAhYWRldi0+aWJfcG9vbF9yZWFkeSB8fAo+ID4gLSAgICAgICAg
ICAgYWRldi0+YXNpY190eXBlICE9IENISVBfTkFWSTEwKSB7Cj4gPiArICAgICAgIGlmICghYWRl
di0+bW1hbi5idWZmZXJfZnVuY3NfZW5hYmxlZCB8fAo+ID4gKyAgICAgICAgICAgIWFkZXYtPmli
X3Bvb2xfcmVhZHkgfHwKPiA+ICsgICAgICAgICAgIGFkZXYtPmluX2dwdV9yZXNldCkgewo+ID4g
ICAgICAgICAgICAgICAgICBnbWNfdjEwXzBfZmx1c2hfdm1faHViKGFkZXYsIHZtaWQsIEFNREdQ
VV9HRlhIVUIsIDApOwo+ID4gICAgICAgICAgICAgICAgICBtdXRleF91bmxvY2soJmFkZXYtPm1t
YW4uZ3R0X3dpbmRvd19sb2NrKTsKPiA+ICAgICAgICAgICAgICAgICAgcmV0dXJuOwo+ID4gSSB0
aGluayBpdCBzaG91bGQgaGF2ZSBiZWVuCj4gPiBhZGV2LT5hc2ljX3R5cGUgIT0gQ0hJUF9OQVZJ
MTAgJiYgYWRldi0+YXNpY190eXBlICE9IENISVBfTkFWSTE0ICYmCj4gPiBhZGV2LT5hc2ljX3R5
cGUgIT0gQ0hJUF9OQVZJMTIKPgo+IE15IGxhc3Qgc3RhdHVzIGlzIHRoYXQgTmF2aTEyIGlzIG5v
dCBzdXBwb3NlZCB0byBuZWVkIHRoYXQgd29ya2Fyb3VuZCwKPiB0aGF0J3Mgd2h5IHdlIGNoZWNr
ZWQgTmF2aTEwIGFuZCBsYXRlciBOYXZpMTQgc2VwYXJhdGVseS4KPgo+IEl0J3MgcG9zc2libGUg
dGhhdCBJIG1pc3MtcmVhZCB0aGUgIShhZGV2LT5hc2ljX3R5cGUgPj0gQ0hJUF9OQVZJMTAgJiYK
PiBhZGV2LT5hc2ljX3R5cGUgPD0gQ0hJUF9OQVZJMTIpIGNoZWNrIGhlcmUsIGJ1dCBlaXRoZXIg
d2F5IHRoYXQgbG9va3MgdG8KPiBjb21wbGljYXRlZCB0byBtZS4KPgo+IFdlIHNob3VsZCByYXRo
ZXIgbWVudGlvbiBldmVyeSBhZmZlY3RlZCBhc2ljIHR5cGUgc2VwYXJhdGVseSBoZXJlLgoKR29v
ZCBwb2ludC4gIG5hdmkxMiBzaG91bGQgYmUgZHJvcHBlZCBmcm9tIHRoZSBjaGVjay4gIEhvdyBh
Ym91dCB0aGUgZm9sbG93aW5nPwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2dtY192MTBfMC5jCmIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMK
aW5kZXggMjQxYTRlNTdjZjRhLi4yODBiYmQ3Y2E4YTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2dtY192MTBfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2dtY192MTBfMC5jCkBAIC0yOTIsNyArMjkyLDggQEAgc3RhdGljIHZvaWQgZ21jX3YxMF8w
X2ZsdXNoX2dwdV90bGIoc3RydWN0CmFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQzMl90IHZtaWQs
CgogICAgICAgIGlmICghYWRldi0+bW1hbi5idWZmZXJfZnVuY3NfZW5hYmxlZCB8fAogICAgICAg
ICAgICAhYWRldi0+aWJfcG9vbF9yZWFkeSB8fAotICAgICAgICAgICBhZGV2LT5pbl9ncHVfcmVz
ZXQpIHsKKyAgICAgICAgICAgYWRldi0+aW5fZ3B1X3Jlc2V0IHx8CisgICAgICAgICAgIChhZGV2
LT5hc2ljX3R5cGUgPT0gQ0hJUF9OQVZJMTIpKSB7CiAgICAgICAgICAgICAgICBnbWNfdjEwXzBf
Zmx1c2hfdm1faHViKGFkZXYsIHZtaWQsIEFNREdQVV9HRlhIVUJfMCwgMCk7CiAgICAgICAgICAg
ICAgICBtdXRleF91bmxvY2soJmFkZXYtPm1tYW4uZ3R0X3dpbmRvd19sb2NrKTsKICAgICAgICAg
ICAgICAgIHJldHVybjsKCkFsZXgKCj4KPiBSZWdhcmRzLAo+IENocmlzdGlhbi4KPgo+ID4KPiA+
IEFsZXgKPiA+Cj4gPj4gQ2hyaXN0aWFuLgo+ID4+Cj4gPj4KPiA+PiBBbSAyNi4wOS4xOSB1bSAx
NDoyNiBzY2hyaWViIERldWNoZXIsIEFsZXhhbmRlcjoKPiA+Pgo+ID4+IFBsZWFzZSBhZGQgYSBw
YXRjaCBkZXNjcmlwdGlvbi4gIFdpdGggdGhhdCBmaXhlZDoKPiA+PiBSZXZpZXdlZC1ieTogQWxl
eCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgo+ID4+IF9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCj4gPj4gRnJvbTogYW1kLWdmeCA8YW1kLWdmeC1ib3VuY2VzQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZz4gb24gYmVoYWxmIG9mIFl1YW4sIFhpYW9qaWUgPFhpYW9qaWUu
WXVhbkBhbWQuY29tPgo+ID4+IFNlbnQ6IFRodXJzZGF5LCBTZXB0ZW1iZXIgMjYsIDIwMTkgNDow
OSBBTQo+ID4+IFRvOiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZyA8YW1kLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmc+Cj4gPj4gQ2M6IGFsZXhkZXVjaGVyQGdtYWlsLmNvbSA8YWxleGRl
dWNoZXJAZ21haWwuY29tPgo+ID4+IFN1YmplY3Q6IFJlOiBbUEFUQ0hdIGRybS9hbWRncHUvZ21j
MTA6IGFwcGx5IHRoZSAnaW52YWxpZGF0aW9uIGZyb20gc2RtYScgd29ya2Fyb3VuZCBmb3IgbmF2
aQo+ID4+Cj4gPj4gSGkgQWxleCwKPiA+Pgo+ID4+IFRoaXMgcGF0Y2ggaXMgdG8gYWRkIHRoZSBh
c2ljX3R5cGUgY2hlY2sgd2hpY2ggaXMgbWlzc2luZyBhZnRlciBkcm0tbmV4dCBicmFuY2ggcmVi
YXNlLgo+ID4+Cj4gPj4gQlIsCj4gPj4gWGlhb2ppZQo+ID4+IF9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCj4gPj4gRnJvbTogWXVhbiwgWGlhb2ppZSA8WGlhb2ppZS5ZdWFuQGFtZC5j
b20+Cj4gPj4gU2VudDogVGh1cnNkYXksIFNlcHRlbWJlciAyNiwgMjAxOSA0OjA4IFBNCj4gPj4g
VG86IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnIDxhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZz4KPiA+PiBDYzogYWxleGRldWNoZXJAZ21haWwuY29tIDxhbGV4ZGV1Y2hlckBnbWFp
bC5jb20+OyBZdWFuLCBYaWFvamllIDxYaWFvamllLll1YW5AYW1kLmNvbT4KPiA+PiBTdWJqZWN0
OiBbUEFUQ0hdIGRybS9hbWRncHUvZ21jMTA6IGFwcGx5IHRoZSAnaW52YWxpZGF0aW9uIGZyb20g
c2RtYScgd29ya2Fyb3VuZCBmb3IgbmF2aQo+ID4+Cj4gPj4gRml4ZXM6IDc2N2FjYWJkYWM4MSAo
ImRybS9hbWQvcG93ZXJwbGF5OiBhZGQgYmFjbyBzbXUgcmVzZXQgZnVuY3Rpb24gZm9yIHNtdTEx
IikKPiA+PiBTaWduZWQtb2ZmLWJ5OiBYaWFvamllIFl1YW4gPHhpYW9qaWUueXVhbkBhbWQuY29t
Pgo+ID4+IC0tLQo+ID4+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMg
fCAxICsKPiA+PiAgIDEgZmlsZSBjaGFuZ2VkLCAxIGluc2VydGlvbigrKQo+ID4+Cj4gPj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192MTBfMC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMKPiA+PiBpbmRleCBjYjNmNjE4NzNiYWEu
LmRjMmU2OGUwMTllYiAxMDA2NDQKPiA+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9nbWNfdjEwXzAuYwo+ID4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192
MTBfMC5jCj4gPj4gQEAgLTI5Miw2ICsyOTIsNyBAQCBzdGF0aWMgdm9pZCBnbWNfdjEwXzBfZmx1
c2hfZ3B1X3RsYihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3Qgdm1pZCwKPiA+
Pgo+ID4+ICAgICAgICAgICBpZiAoIWFkZXYtPm1tYW4uYnVmZmVyX2Z1bmNzX2VuYWJsZWQgfHwK
PiA+PiAgICAgICAgICAgICAgICFhZGV2LT5pYl9wb29sX3JlYWR5IHx8Cj4gPj4gKyAgICAgICAg
ICAgIShhZGV2LT5hc2ljX3R5cGUgPj0gQ0hJUF9OQVZJMTAgJiYgYWRldi0+YXNpY190eXBlIDw9
IENISVBfTkFWSTEyKSB8fAo+ID4+ICAgICAgICAgICAgICAgYWRldi0+aW5fZ3B1X3Jlc2V0KSB7
Cj4gPj4gICAgICAgICAgICAgICAgICAgZ21jX3YxMF8wX2ZsdXNoX3ZtX2h1YihhZGV2LCB2bWlk
LCBBTURHUFVfR0ZYSFVCXzAsIDApOwo+ID4+ICAgICAgICAgICAgICAgICAgIG11dGV4X3VubG9j
aygmYWRldi0+bW1hbi5ndHRfd2luZG93X2xvY2spOwo+ID4+IC0tCj4gPj4gMi4yMC4xCj4gPj4K
PiA+Pgo+ID4+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
Cj4gPj4gYW1kLWdmeCBtYWlsaW5nIGxpc3QKPiA+PiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwo+ID4+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
YW1kLWdmeAo+ID4+Cj4gPj4KPgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1n
Zng=
