Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 054A8D836E
	for <lists+amd-gfx@lfdr.de>; Wed, 16 Oct 2019 00:18:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5A98E6E8A0;
	Tue, 15 Oct 2019 22:18:33 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qk1-x741.google.com (mail-qk1-x741.google.com
 [IPv6:2607:f8b0:4864:20::741])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 20EB76E8A0
 for <amd-gfx@lists.freedesktop.org>; Tue, 15 Oct 2019 22:18:30 +0000 (UTC)
Received: by mail-qk1-x741.google.com with SMTP id q203so20823971qke.1
 for <amd-gfx@lists.freedesktop.org>; Tue, 15 Oct 2019 15:18:30 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=t8gu37rv+CMwdm623RHi1sqXqhKMlXFAs2fR20k9h9o=;
 b=YkqTacyTBkuttIql5Em94Ri++qgGzl2Wf24Z8/VOLTDaKKl1KW3pX9B5KFtBgtMW8Z
 7aCbqeU1jYbxSaN1r6CgDrVI+WITmTI3HFGprqvRKcTnEjitMCO+kgLGl31Sk5o2amc/
 a57T7MBHQoHZKW0KvWL3bnvfHHKWBbKt1/NsVPqs+/yFMSagRD0Zv9ZkPsUWz0MiZvFJ
 meC0hLMMbQycSuobQe2k2RtM/hWLvtN3q9RjYAUCGmNtqpukI4c2s4vz1Z/8vRkG5d7A
 xOi2Vpc5D3EROQjYYF4QsrZN6UVWEFO4DK4sHyiMZ7yjIH+KsR5kfBSeYPlRyVnIWyiL
 B5sw==
X-Gm-Message-State: APjAAAUhXpA3J5AiEW+KaNLyk2C0LDdPfdgY6I3Z3h66DwcokKlMd6no
 IvCEfrwALoaBlpdwX3Q3NHVx3+AQ
X-Google-Smtp-Source: APXvYqxl+q/H9hQqBGE7zuKPNSjlfEHhK1bgOBNUmLaks5exAN4t4KxgHTX6676PWtYlP7IOMChTqw==
X-Received: by 2002:a05:620a:140d:: with SMTP id
 d13mr37478547qkj.460.1571177908691; 
 Tue, 15 Oct 2019 15:18:28 -0700 (PDT)
Received: from localhost.localdomain ([71.51.171.205])
 by smtp.gmail.com with ESMTPSA id p4sm625424qkf.112.2019.10.15.15.18.27
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 15 Oct 2019 15:18:27 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 1/3] drm/amdgpu/uvd6: fix allocation size in enc ring test (v2)
Date: Tue, 15 Oct 2019 18:18:11 -0400
Message-Id: <20191015221813.625024-1-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=t8gu37rv+CMwdm623RHi1sqXqhKMlXFAs2fR20k9h9o=;
 b=BEARK28k93zSUDob2XPbWB1oWFtR1ybZBCe0GSJPxA4Bd9K942Gh9AAqA16XX7ObT1
 VpetIFgZrb44F86MRiOrzteoqKCN/vA8MPtAb8TgeNZxsz4/Fi1AfQ1jJNC6R/YkuMUq
 rmaTK2GrY0xnH7Jt6sl7AuHrR8TC3v1Njl+tQLqIqlvavqnTcIvNt5OH9pRXuBFegfiH
 3M/QMEmVOp38tmO77jNL9BU1crz2+DuKrMhKP3t+m/ocwo9rJUV71SO1clBouve0mp3Z
 YI97w/OECHS9N4kEXtmpaJWN8vffz08uZP7LZAuqbMPvJLswEGp4s01rgaTJX3WRTaSe
 1xnA==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

V2UgbmVlZCB0byBhbGxvY2F0ZSBhIGxhcmdlIGVub3VnaCBidWZmZXIgZm9yIHRoZQpzZXNzaW9u
IGluZm8sIG90aGVyd2lzZSB0aGUgSUIgdGVzdCBjYW4gb3ZlcndyaXRlCm90aGVyIG1lbW9yeS4K
CnYyOiAtIHNlc3Npb24gaW5mbyBpcyAxMjhLIGFjY29yZGluZyB0byBtZXNhCiAgICAtIHVzZSB0
aGUgc2FtZSBzZXNzaW9uIGluZm8gZm9yIGNyZWF0ZSBhbmQgZGVzdHJveQoKQnVnOiBodHRwczov
L2J1Z3ppbGxhLmtlcm5lbC5vcmcvc2hvd19idWcuY2dpP2lkPTIwNDI0MQpTaWduZWQtb2ZmLWJ5
OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvdXZkX3Y2XzAuYyB8IDMxICsrKysrKysrKysrKysrKysrKy0tLS0t
LS0tLQogMSBmaWxlIGNoYW5nZWQsIDIxIGluc2VydGlvbnMoKyksIDEwIGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3V2ZF92Nl8wLmMgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS91dmRfdjZfMC5jCmluZGV4IDY3MDc4NGE3ODUxMi4uMjE3
MDg0ZDU2YWI4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS91dmRfdjZf
MC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3V2ZF92Nl8wLmMKQEAgLTIwNiwx
MyArMjA2LDE0IEBAIHN0YXRpYyBpbnQgdXZkX3Y2XzBfZW5jX3JpbmdfdGVzdF9yaW5nKHN0cnVj
dCBhbWRncHVfcmluZyAqcmluZykKICAqIE9wZW4gdXAgYSBzdHJlYW0gZm9yIEhXIHRlc3QKICAq
Lwogc3RhdGljIGludCB1dmRfdjZfMF9lbmNfZ2V0X2NyZWF0ZV9tc2coc3RydWN0IGFtZGdwdV9y
aW5nICpyaW5nLCB1aW50MzJfdCBoYW5kbGUsCisJCQkJICAgICAgIHN0cnVjdCBhbWRncHVfYm8g
KmJvLAogCQkJCSAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVuY2UpCiB7CiAJY29uc3QgdW5z
aWduZWQgaWJfc2l6ZV9kdyA9IDE2OwogCXN0cnVjdCBhbWRncHVfam9iICpqb2I7CiAJc3RydWN0
IGFtZGdwdV9pYiAqaWI7CiAJc3RydWN0IGRtYV9mZW5jZSAqZiA9IE5VTEw7Ci0JdWludDY0X3Qg
ZHVtbXk7CisJdWludDY0X3QgYWRkcjsKIAlpbnQgaSwgcjsKIAogCXIgPSBhbWRncHVfam9iX2Fs
bG9jX3dpdGhfaWIocmluZy0+YWRldiwgaWJfc2l6ZV9kdyAqIDQsICZqb2IpOwpAQCAtMjIwLDE1
ICsyMjEsMTUgQEAgc3RhdGljIGludCB1dmRfdjZfMF9lbmNfZ2V0X2NyZWF0ZV9tc2coc3RydWN0
IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50MzJfdCBoYW5kbGUKIAkJcmV0dXJuIHI7CiAKIAlpYiA9
ICZqb2ItPmlic1swXTsKLQlkdW1teSA9IGliLT5ncHVfYWRkciArIDEwMjQ7CisJYWRkciA9IGFt
ZGdwdV9ib19ncHVfb2Zmc2V0KGJvKTsKIAogCWliLT5sZW5ndGhfZHcgPSAwOwogCWliLT5wdHJb
aWItPmxlbmd0aF9kdysrXSA9IDB4MDAwMDAwMTg7CiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3Kytd
ID0gMHgwMDAwMDAwMTsgLyogc2Vzc2lvbiBpbmZvICovCiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3
KytdID0gaGFuZGxlOwogCWliLT5wdHJbaWItPmxlbmd0aF9kdysrXSA9IDB4MDAwMTAwMDA7Ci0J
aWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0gdXBwZXJfMzJfYml0cyhkdW1teSk7Ci0JaWItPnB0
cltpYi0+bGVuZ3RoX2R3KytdID0gZHVtbXk7CisJaWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0g
dXBwZXJfMzJfYml0cyhhZGRyKTsKKwlpYi0+cHRyW2liLT5sZW5ndGhfZHcrK10gPSBhZGRyOwog
CiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0gMHgwMDAwMDAxNDsKIAlpYi0+cHRyW2liLT5s
ZW5ndGhfZHcrK10gPSAweDAwMDAwMDAyOyAvKiB0YXNrIGluZm8gKi8KQEAgLTI2OCwxMyArMjY5
LDE0IEBAIHN0YXRpYyBpbnQgdXZkX3Y2XzBfZW5jX2dldF9jcmVhdGVfbXNnKHN0cnVjdCBhbWRn
cHVfcmluZyAqcmluZywgdWludDMyX3QgaGFuZGxlCiAgKi8KIHN0YXRpYyBpbnQgdXZkX3Y2XzBf
ZW5jX2dldF9kZXN0cm95X21zZyhzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsCiAJCQkJCXVpbnQz
Ml90IGhhbmRsZSwKKwkJCQkJc3RydWN0IGFtZGdwdV9ibyAqYm8sCiAJCQkJCXN0cnVjdCBkbWFf
ZmVuY2UgKipmZW5jZSkKIHsKIAljb25zdCB1bnNpZ25lZCBpYl9zaXplX2R3ID0gMTY7CiAJc3Ry
dWN0IGFtZGdwdV9qb2IgKmpvYjsKIAlzdHJ1Y3QgYW1kZ3B1X2liICppYjsKIAlzdHJ1Y3QgZG1h
X2ZlbmNlICpmID0gTlVMTDsKLQl1aW50NjRfdCBkdW1teTsKKwl1aW50NjRfdCBhZGRyOwogCWlu
dCBpLCByOwogCiAJciA9IGFtZGdwdV9qb2JfYWxsb2Nfd2l0aF9pYihyaW5nLT5hZGV2LCBpYl9z
aXplX2R3ICogNCwgJmpvYik7CkBAIC0yODIsMTUgKzI4NCwxNSBAQCBzdGF0aWMgaW50IHV2ZF92
Nl8wX2VuY19nZXRfZGVzdHJveV9tc2coc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLAogCQlyZXR1
cm4gcjsKIAogCWliID0gJmpvYi0+aWJzWzBdOwotCWR1bW15ID0gaWItPmdwdV9hZGRyICsgMTAy
NDsKKwlhZGRyID0gYW1kZ3B1X2JvX2dwdV9vZmZzZXQoYm8pOwogCiAJaWItPmxlbmd0aF9kdyA9
IDA7CiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0gMHgwMDAwMDAxODsKIAlpYi0+cHRyW2li
LT5sZW5ndGhfZHcrK10gPSAweDAwMDAwMDAxOyAvKiBzZXNzaW9uIGluZm8gKi8KIAlpYi0+cHRy
W2liLT5sZW5ndGhfZHcrK10gPSBoYW5kbGU7CiAJaWItPnB0cltpYi0+bGVuZ3RoX2R3KytdID0g
MHgwMDAxMDAwMDsKLQlpYi0+cHRyW2liLT5sZW5ndGhfZHcrK10gPSB1cHBlcl8zMl9iaXRzKGR1
bW15KTsKLQlpYi0+cHRyW2liLT5sZW5ndGhfZHcrK10gPSBkdW1teTsKKwlpYi0+cHRyW2liLT5s
ZW5ndGhfZHcrK10gPSB1cHBlcl8zMl9iaXRzKGFkZHIpOworCWliLT5wdHJbaWItPmxlbmd0aF9k
dysrXSA9IGFkZHI7CiAKIAlpYi0+cHRyW2liLT5sZW5ndGhfZHcrK10gPSAweDAwMDAwMDE0Owog
CWliLT5wdHJbaWItPmxlbmd0aF9kdysrXSA9IDB4MDAwMDAwMDI7IC8qIHRhc2sgaW5mbyAqLwpA
QCAtMzI3LDEzICszMjksMjAgQEAgc3RhdGljIGludCB1dmRfdjZfMF9lbmNfZ2V0X2Rlc3Ryb3lf
bXNnKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywKIHN0YXRpYyBpbnQgdXZkX3Y2XzBfZW5jX3Jp
bmdfdGVzdF9pYihzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsIGxvbmcgdGltZW91dCkKIHsKIAlz
dHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSA9IE5VTEw7CisJc3RydWN0IGFtZGdwdV9ibyAqYm8gPSBO
VUxMOwogCWxvbmcgcjsKIAotCXIgPSB1dmRfdjZfMF9lbmNfZ2V0X2NyZWF0ZV9tc2cocmluZywg
MSwgTlVMTCk7CisJciA9IGFtZGdwdV9ib19jcmVhdGVfcmVzZXJ2ZWQocmluZy0+YWRldiwgMTI4
ICogMTAyNCwgUEFHRV9TSVpFLAorCQkJCSAgICAgIEFNREdQVV9HRU1fRE9NQUlOX1ZSQU0sCisJ
CQkJICAgICAgJmJvLCBOVUxMLCBOVUxMKTsKKwlpZiAocikKKwkJcmV0dXJuIHI7CisKKwlyID0g
dXZkX3Y2XzBfZW5jX2dldF9jcmVhdGVfbXNnKHJpbmcsIDEsIGJvLCBOVUxMKTsKIAlpZiAocikK
IAkJZ290byBlcnJvcjsKIAotCXIgPSB1dmRfdjZfMF9lbmNfZ2V0X2Rlc3Ryb3lfbXNnKHJpbmcs
IDEsICZmZW5jZSk7CisJciA9IHV2ZF92Nl8wX2VuY19nZXRfZGVzdHJveV9tc2cocmluZywgMSwg
Ym8sICZmZW5jZSk7CiAJaWYgKHIpCiAJCWdvdG8gZXJyb3I7CiAKQEAgLTM0NSw2ICszNTQsOCBA
QCBzdGF0aWMgaW50IHV2ZF92Nl8wX2VuY19yaW5nX3Rlc3RfaWIoc3RydWN0IGFtZGdwdV9yaW5n
ICpyaW5nLCBsb25nIHRpbWVvdXQpCiAKIGVycm9yOgogCWRtYV9mZW5jZV9wdXQoZmVuY2UpOwor
CWFtZGdwdV9ib191bnJlc2VydmUoYm8pOworCWFtZGdwdV9ib191bnJlZigmYm8pOwogCXJldHVy
biByOwogfQogCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1k
LWdmeA==
