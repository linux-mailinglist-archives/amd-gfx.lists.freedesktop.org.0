Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 12402F298
	for <lists+amd-gfx@lfdr.de>; Tue, 30 Apr 2019 11:15:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A818B8910A;
	Tue, 30 Apr 2019 09:15:18 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 85C808910A
 for <amd-gfx@lists.freedesktop.org>; Tue, 30 Apr 2019 09:15:17 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id k16so20124840wrn.5
 for <amd-gfx@lists.freedesktop.org>; Tue, 30 Apr 2019 02:15:17 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:cc:references:from
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-transfer-encoding:content-language;
 bh=OYbfVOpP3j5CCRJM0sQwEx3BaPjm0KX3aOTFpPUEH6k=;
 b=V8/9dxS22yVvFwClWoQdTEFoN1ZD+Nv0uDCF2dRljHsPKoX4UD8KV1vl2ZH/KXqW80
 0weIhVo2LdueWnY6Xt6rhTvv3ZEeUZ5q0oz/RBfhHquGVv3oLqlmZr5eQcTi1iOT+pxA
 ShnbL32kaz7EUM2HJSpN2WC2EFS5gL2YmEOAv5+0FBUBHT2NoYHrpyLVapYH+IHW6HHv
 T9uUwXFrAKud5evQg/Vk8ESG6mRjrmi6E9OsqSrSf77qsQE7mOAcnULmp+d07zMfF2wp
 15YjbVfQvEsduaS1mvVEpMEteqHwJh0wxZgYuwFpl7uFQU5aSHUjXs+X6qwqocVvRlVn
 ujAA==
X-Gm-Message-State: APjAAAWr7R41WdTus2s+j+5gMnypmWxqcLyd8uPBBlag7sCenjZiEcUV
 fszOz8w8hHiNEb7gsOmRq5bPRsfb
X-Google-Smtp-Source: APXvYqzdtig4dVuIJLCvtEF/KuUXyRzFHO5AWe4ZS5aRH/wWLYfiasi8gM79/TkKGkt2lgcnqwgwvQ==
X-Received: by 2002:adf:f852:: with SMTP id d18mr1357925wrq.71.1556615715907; 
 Tue, 30 Apr 2019 02:15:15 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id a6sm34563694wrp.49.2019.04.30.02.15.14
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 30 Apr 2019 02:15:15 -0700 (PDT)
Subject: Re: [PATCH] drm/amdgpu: enable separate timeout setting for every
 ring type V4
To: Alex Deucher <alexdeucher@gmail.com>, Evan Quan <evan.quan@amd.com>
References: <20190430031619.7906-1-evan.quan@amd.com>
 <CADnq5_Mw1h2gjQH671wyunQb8u4GshDH0Q8h5AqoC7d6ds7Oyg@mail.gmail.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <92d820e4-1c93-ed76-5abd-c07cfdfebee7@gmail.com>
Date: Tue, 30 Apr 2019 11:15:13 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <CADnq5_Mw1h2gjQH671wyunQb8u4GshDH0Q8h5AqoC7d6ds7Oyg@mail.gmail.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=reply-to:subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=OYbfVOpP3j5CCRJM0sQwEx3BaPjm0KX3aOTFpPUEH6k=;
 b=N3hoCQ0VjNOeGHl1zYXjlJ0ZLTJFZagMCuPiVr1XWFEPeQ15HziE76oY6gSUZi2sS5
 IvETTVoalPRUdmTpLLN3ZwWxyN6qRUjKSXHs6eXD5GdMQE2xg3358c8oAQqlkLXdvXe+
 Hns+IXu07V+8dfK7xm0g6+ARmkiPuHqIg+K+JvFFJcCPOMw5bGDLknVPjvy2r2XOGcTL
 sdEe+7XTqC3bDyWYPIuEJUDWRPObSKFdRc8bW87f+QD86wlfihXgwmvgxV7maHNoeu9u
 LSaiQIzqp/oAoRlWfORRzdy5VKjlugIr6hz8spB06wj3cujrh2AvSFtA0l5FFyRKRCtG
 DB2g==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>,
 wentalou <Wentao.Lou@amd.com>, "Daenzer, Michel" <michel.daenzer@amd.com>,
 Christian Koenig <Christian.Koenig@amd.com>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMzAuMDQuMTkgdW0gMDU6MjAgc2NocmllYiBBbGV4IERldWNoZXI6Cj4gT24gTW9uLCBBcHIg
MjksIDIwMTkgYXQgMTE6MTYgUE0gRXZhbiBRdWFuIDxldmFuLnF1YW5AYW1kLmNvbT4gd3JvdGU6
Cj4+IEV2ZXJ5IHJpbmcgdHlwZSBjYW4gaGF2ZSBpdHMgb3duIHRpbWVvdXQgc2V0dGluZy4KPj4K
Pj4gICAtIFYyOiB1cGRhdGUgbG9ja3VwX3RpbWVvdXQgcGFyYW1ldGVyIGZvcm1hdCBhbmQgY29z
bWV0aWMgZml4ZXMKPj4gICAtIFYzOiBpbnZhbGlkYXRlIDAgYW5kIG5lZ2F0aXZlIHZhbHVlcwo+
PiAgIC0gVjQ6IHVwZGF0ZSBsb2NrdXBfdGltZW91dCBwYXJhbWV0ZXIgZm9ybWF0Cj4+Cj4+IENo
YW5nZS1JZDogSTk5MmYyMjRmMzZiYjMzYWNkNTYwMTYyYmZmZDJjM2U5ODc4NDBhN2UKPj4gU2ln
bmVkLW9mZi1ieTogRXZhbiBRdWFuIDxldmFuLnF1YW5AYW1kLmNvbT4KPiBSZXZpZXdlZC1ieTog
QWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgoKT25lIG1vcmUgaXNzdWUg
YmVsb3csIHdpdGggdGhhdCBmaXhlZCB0aGUgcGF0Y2ggaXMgUmV2aWV3ZWQtYnk6IApDaHJpc3Rp
YW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cgo+Cj4+IC0tLQo+PiAgIGRyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oICAgICAgICB8ICA3ICstCj4+ICAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIHwgMTcgKysrLS0KPj4gICBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMgICAgfCA3OSArKysrKysrKysrKysr
KysrKysrKy0tCj4+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ZlbmNlLmMg
IHwgMzUgKysrKysrKystLQo+PiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L214Z3B1X2Fp
LmMgICAgICB8ICAyICstCj4+ICAgNSBmaWxlcyBjaGFuZ2VkLCAxMjEgaW5zZXJ0aW9ucygrKSwg
MTkgZGVsZXRpb25zKC0pCj4+Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCj4+IGlu
ZGV4IGY2OTY1Yjk0MDNlYi4uYzliNDRiOGMxOTY5IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaAo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHUuaAo+PiBAQCAtMTE4LDcgKzExOCw2IEBAIGV4dGVybiBpbnQgYW1kZ3B1X2Rp
c3BfcHJpb3JpdHk7Cj4+ICAgZXh0ZXJuIGludCBhbWRncHVfaHdfaTJjOwo+PiAgIGV4dGVybiBp
bnQgYW1kZ3B1X3BjaWVfZ2VuMjsKPj4gICBleHRlcm4gaW50IGFtZGdwdV9tc2k7Cj4+IC1leHRl
cm4gaW50IGFtZGdwdV9sb2NrdXBfdGltZW91dDsKPj4gICBleHRlcm4gaW50IGFtZGdwdV9kcG07
Cj4+ICAgZXh0ZXJuIGludCBhbWRncHVfZndfbG9hZF90eXBlOwo+PiAgIGV4dGVybiBpbnQgYW1k
Z3B1X2FzcG07Cj4+IEBAIC00MjgsNiArNDI3LDcgQEAgc3RydWN0IGFtZGdwdV9mcHJpdiB7Cj4+
ICAgfTsKPj4KPj4gICBpbnQgYW1kZ3B1X2ZpbGVfdG9fZnByaXYoc3RydWN0IGZpbGUgKmZpbHAs
IHN0cnVjdCBhbWRncHVfZnByaXYgKipmcHJpdik7Cj4+ICtpbnQgYW1kZ3B1X2RldmljZV9nZXRf
am9iX3RpbWVvdXRfc2V0dGluZ3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+Pgo+PiAg
IGludCBhbWRncHVfaWJfZ2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgYW1k
Z3B1X3ZtICp2bSwKPj4gICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIHNpemUsIHN0cnVjdCBh
bWRncHVfaWIgKmliKTsKPj4gQEAgLTEwMDEsNiArMTAwMSwxMSBAQCBzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSB7Cj4+ICAgICAgICAgIHN0cnVjdCB3b3JrX3N0cnVjdCAgICAgICAgICAgICAgeGdtaV9y
ZXNldF93b3JrOwo+Pgo+PiAgICAgICAgICBib29sICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGluX2JhY29fcmVzZXQ7Cj4+ICsKPj4gKyAgICAgICBsb25nICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGdmeF90aW1lb3V0Owo+PiArICAgICAgIGxvbmcgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2RtYV90aW1lb3V0Owo+PiArICAgICAgIGxvbmcgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdmlkZW9fdGltZW91dDsKPj4gKyAgICAgICBsb25nICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGNvbXB1dGVfdGltZW91dDsKPj4gICB9Owo+Pgo+PiAgIHN0YXRpYyBpbmxpbmUgc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFtZGdwdV90dG1fYWRldihzdHJ1Y3QgdHRtX2JvX2RldmljZSAq
YmRldikKPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9k
ZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYwo+PiBp
bmRleCA4MGJmNjA0MDE5YjEuLmIxMWFmMzhhMDIzOCAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYwo+PiBAQCAtOTEyLDggKzkxMiwxMCBAQCBzdGF0
aWMgdm9pZCBhbWRncHVfZGV2aWNlX2NoZWNrX3NtdV9wcnZfYnVmZmVyX3NpemUoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCj4+ICAgICogVmFsaWRhdGVzIGNlcnRhaW4gbW9kdWxlIHBhcmFt
ZXRlcnMgYW5kIHVwZGF0ZXMKPj4gICAgKiB0aGUgYXNzb2NpYXRlZCB2YWx1ZXMgdXNlZCBieSB0
aGUgZHJpdmVyIChhbGwgYXNpY3MpLgo+PiAgICAqLwo+PiAtc3RhdGljIHZvaWQgYW1kZ3B1X2Rl
dmljZV9jaGVja19hcmd1bWVudHMoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4+ICtzdGF0
aWMgaW50IGFtZGdwdV9kZXZpY2VfY2hlY2tfYXJndW1lbnRzKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2KQo+PiAgIHsKPj4gKyAgICAgICBpbnQgcmV0ID0gMDsKPj4gKwo+PiAgICAgICAgICBp
ZiAoYW1kZ3B1X3NjaGVkX2pvYnMgPCA0KSB7Cj4+ICAgICAgICAgICAgICAgICAgZGV2X3dhcm4o
YWRldi0+ZGV2LCAic2NoZWQgam9icyAoJWQpIG11c3QgYmUgYXQgbGVhc3QgNFxuIiwKPj4gICAg
ICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfc2NoZWRfam9icyk7Cj4+IEBAIC05NTgsMTMg
Kzk2MCwxNiBAQCBzdGF0aWMgdm9pZCBhbWRncHVfZGV2aWNlX2NoZWNrX2FyZ3VtZW50cyhzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPj4gICAgICAgICAgICAgICAgICBhbWRncHVfdnJhbV9w
YWdlX3NwbGl0ID0gMTAyNDsKPj4gICAgICAgICAgfQo+Pgo+PiAtICAgICAgIGlmIChhbWRncHVf
bG9ja3VwX3RpbWVvdXQgPT0gMCkgewo+PiAtICAgICAgICAgICAgICAgZGV2X3dhcm4oYWRldi0+
ZGV2LCAibG9ja3VwX3RpbWVvdXQgbXN1dCBiZSA+IDAsIGFkanVzdGluZyB0byAxMDAwMFxuIik7
Cj4+IC0gICAgICAgICAgICAgICBhbWRncHVfbG9ja3VwX3RpbWVvdXQgPSAxMDAwMDsKPj4gKyAg
ICAgICByZXQgPSBhbWRncHVfZGV2aWNlX2dldF9qb2JfdGltZW91dF9zZXR0aW5ncyhhZGV2KTsK
Pj4gKyAgICAgICBpZiAocmV0KSB7Cj4+ICsgICAgICAgICAgICAgICBkZXZfZXJyKGFkZXYtPmRl
diwgImludmFsaWQgbG9ja3VwX3RpbWVvdXQgcGFyYW1ldGVyIHN5bnRheFxuIik7Cj4+ICsgICAg
ICAgICAgICAgICByZXR1cm4gcmV0Owo+PiAgICAgICAgICB9Cj4+Cj4+ICAgICAgICAgIGFkZXYt
PmZpcm13YXJlLmxvYWRfdHlwZSA9IGFtZGdwdV91Y29kZV9nZXRfbG9hZF90eXBlKGFkZXYsIGFt
ZGdwdV9md19sb2FkX3R5cGUpOwo+PiAgICAgICAgICBhbWRncHVfZGlyZWN0X2dtYV9zaXplID0g
bWluKGFtZGdwdV9kaXJlY3RfZ21hX3NpemUsIDk2KTsKPj4gKwo+PiArICAgICAgIHJldHVybiBy
ZXQ7Cj4+ICAgfQo+Pgo+PiAgIC8qKgo+PiBAQCAtMjQ2OCw3ICsyNDczLDkgQEAgaW50IGFtZGdw
dV9kZXZpY2VfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPj4gICAgICAgICAgbXV0
ZXhfaW5pdCgmYWRldi0+bG9ja19yZXNldCk7Cj4+ICAgICAgICAgIG11dGV4X2luaXQoJmFkZXYt
PnZpcnQuZHBtX211dGV4KTsKPj4KPj4gLSAgICAgICBhbWRncHVfZGV2aWNlX2NoZWNrX2FyZ3Vt
ZW50cyhhZGV2KTsKPj4gKyAgICAgICByID0gYW1kZ3B1X2RldmljZV9jaGVja19hcmd1bWVudHMo
YWRldik7Cj4+ICsgICAgICAgaWYgKHIpCj4+ICsgICAgICAgICAgICAgICByZXR1cm4gcjsKPj4K
Pj4gICAgICAgICAgc3Bpbl9sb2NrX2luaXQoJmFkZXYtPm1taW9faWR4X2xvY2spOwo+PiAgICAg
ICAgICBzcGluX2xvY2tfaW5pdCgmYWRldi0+c21jX2lkeF9sb2NrKTsKPj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYwo+PiBpbmRleCA3MWRmMjdjZDAzZGUuLjYwOWM3YWY4
YTNmMCAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Ry
di5jCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYwo+PiBA
QCAtODMsNiArODMsOCBAQAo+Pgo+PiAgICNkZWZpbmUgQU1ER1BVX1ZFUlNJT04gICAgICAgICAi
MTkuMTAuOS40MTgiCj4+Cj4+ICsjZGVmaW5lIEFNREdQVV9NQVhfVElNRU9VVF9QQVJBTV9MRU5U
SCAyNTYKPj4gKwo+PiAgIGludCBhbWRncHVfdnJhbV9saW1pdCA9IDA7Cj4+ICAgaW50IGFtZGdw
dV92aXNfdnJhbV9saW1pdCA9IDA7Cj4+ICAgaW50IGFtZGdwdV9nYXJ0X3NpemUgPSAtMTsgLyog
YXV0byAqLwo+PiBAQCAtOTUsNyArOTcsNyBAQCBpbnQgYW1kZ3B1X2Rpc3BfcHJpb3JpdHkgPSAw
Owo+PiAgIGludCBhbWRncHVfaHdfaTJjID0gMDsKPj4gICBpbnQgYW1kZ3B1X3BjaWVfZ2VuMiA9
IC0xOwo+PiAgIGludCBhbWRncHVfbXNpID0gLTE7Cj4+IC1pbnQgYW1kZ3B1X2xvY2t1cF90aW1l
b3V0ID0gMTAwMDA7Cj4+ICtjaGFyIGFtZGdwdV9sb2NrdXBfdGltZW91dFtBTURHUFVfTUFYX1RJ
TUVPVVRfUEFSQU1fTEVOVEhdOwo+PiAgIGludCBhbWRncHVfZHBtID0gLTE7Cj4+ICAgaW50IGFt
ZGdwdV9md19sb2FkX3R5cGUgPSAtMTsKPj4gICBpbnQgYW1kZ3B1X2FzcG0gPSAtMTsKPj4gQEAg
LTIzMiwxMiArMjM0LDIxIEBAIE1PRFVMRV9QQVJNX0RFU0MobXNpLCAiTVNJIHN1cHBvcnQgKDEg
PSBlbmFibGUsIDAgPSBkaXNhYmxlLCAtMSA9IGF1dG8pIik7Cj4+ICAgbW9kdWxlX3BhcmFtX25h
bWVkKG1zaSwgYW1kZ3B1X21zaSwgaW50LCAwNDQ0KTsKPj4KPj4gICAvKioKPj4gLSAqIERPQzog
bG9ja3VwX3RpbWVvdXQgKGludCkKPj4gLSAqIFNldCBHUFUgc2NoZWR1bGVyIHRpbWVvdXQgdmFs
dWUgaW4gbXMuIFZhbHVlIDAgaXMgaW52YWxpZGF0ZWQsIHdpbGwgYmUgYWRqdXN0ZWQgdG8gMTAw
MDAuCj4+IC0gKiBOZWdhdGl2ZSB2YWx1ZXMgbWVhbiAnaW5maW5pdGUgdGltZW91dCcgKE1BWF9K
SUZGWV9PRkZTRVQpLiBUaGUgZGVmYXVsdCBpcyAxMDAwMC4KPj4gKyAqIERPQzogbG9ja3VwX3Rp
bWVvdXQgKHN0cmluZykKPj4gKyAqIFNldCBHUFUgc2NoZWR1bGVyIHRpbWVvdXQgdmFsdWUgaW4g
bXMuCj4+ICsgKgo+PiArICogVGhlIGZvcm1hdCBjYW4gYmUgW05vbi1Db21wdXRlXSBvciBbR0ZY
LENvbXB1dGUsU0RNQSxWaWRlb10uIFRoYXQgaXMgdGhlcmUgY2FuIGJlIG9uZSBvcgo+PiArICog
bXVsdGlwbGUgdmFsdWVzIHNwZWNpZmllZC4gMCBhbmQgbmVnYXRpdmUgdmFsdWVzIGFyZSBpbnZh
bGlkYXRlZC4gVGhleSB3aWxsIGJlIGFkanVzdGVkCj4+ICsgKiB0byBkZWZhdWx0IHRpbWVvdXQu
Cj4+ICsgKiAgLSBXaXRoIG9uZSB2YWx1ZSBzcGVjaWZpZWQsIHRoZSBzZXR0aW5nIHdpbGwgYXBw
bHkgdG8gYWxsIG5vbi1jb21wdXRlIGpvYnMuCj4+ICsgKiAgLSBXaXRoIG11bHRpcGxlIHZhbHVl
cyBzcGVjaWZpZWQsIHRoZSBmaXJzdCBvbmUgd2lsbCBiZSBmb3IgR0ZYLiBUaGUgc2Vjb25kIG9u
ZSBpcyBmb3IgQ29tcHV0ZS4KPj4gKyAqICAgIEFuZCB0aGUgdGhpcmQgYW5kIGZvdXJ0aCBvbmVz
IGFyZSBmb3IgU0RNQSBhbmQgVmlkZW8uCj4+ICsgKiBCeSBkZWZhdWx0KHdpdGggbm8gbG9ja3Vw
X3RpbWVvdXQgc2V0dGluZ3MpLCB0aGUgdGltZW91dCBmb3IgYWxsIG5vbi1jb21wdXRlKEdGWCwg
U0RNQSBhbmQgVmlkZW8pCj4+ICsgKiBqb2JzIGlzIDEwMDAwLiBBbmQgdGhlcmUgaXMgbm8gdGlt
ZW91dCBlbmZvcmNlZCBvbiBjb21wdXRlIGpvYnMuCj4+ICAgICovCj4+IC1NT0RVTEVfUEFSTV9E
RVNDKGxvY2t1cF90aW1lb3V0LCAiR1BVIGxvY2t1cCB0aW1lb3V0IGluIG1zID4gMCAoZGVmYXVs
dCAxMDAwMCkiKTsKPj4gLW1vZHVsZV9wYXJhbV9uYW1lZChsb2NrdXBfdGltZW91dCwgYW1kZ3B1
X2xvY2t1cF90aW1lb3V0LCBpbnQsIDA0NDQpOwo+PiArTU9EVUxFX1BBUk1fREVTQyhsb2NrdXBf
dGltZW91dCwgIkdQVSBsb2NrdXAgdGltZW91dCBpbiBtcyAoZGVmYXVsdDogMTAwMDAgZm9yIG5v
bi1jb21wdXRlIGpvYnMgYW5kIG5vIHRpbWVvdXQgZm9yIGNvbXB1dGUgam9icyksICIKPj4gKyAg
ICAgICAgICAgICAgICJmb3JtYXQgaXMgW05vbi1Db21wdXRlXSBvciBbR0ZYLENvbXB1dGUsU0RN
QSxWaWRlb10iKTsKPj4gK21vZHVsZV9wYXJhbV9zdHJpbmcobG9ja3VwX3RpbWVvdXQsIGFtZGdw
dV9sb2NrdXBfdGltZW91dCwgc2l6ZW9mKGFtZGdwdV9sb2NrdXBfdGltZW91dCksIDA0NDQpOwo+
Pgo+PiAgIC8qKgo+PiAgICAqIERPQzogZHBtIChpbnQpCj4+IEBAIC0xMzA3LDYgKzEzMTgsNjIg
QEAgaW50IGFtZGdwdV9maWxlX3RvX2Zwcml2KHN0cnVjdCBmaWxlICpmaWxwLCBzdHJ1Y3QgYW1k
Z3B1X2Zwcml2ICoqZnByaXYpCj4+ICAgICAgICAgIHJldHVybiAwOwo+PiAgIH0KPj4KPj4gK2lu
dCBhbWRncHVfZGV2aWNlX2dldF9qb2JfdGltZW91dF9zZXR0aW5ncyhzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldikKPj4gK3sKPj4gKyAgICAgICBjaGFyICppbnB1dCA9IGFtZGdwdV9sb2NrdXBf
dGltZW91dDsKPj4gKyAgICAgICBjaGFyICp0aW1lb3V0X3NldHRpbmcgPSBOVUxMOwo+PiArICAg
ICAgIGludCBpbmRleCA9IDA7Cj4+ICsgICAgICAgbG9uZyB0aW1lb3V0Owo+PiArICAgICAgIGlu
dCByZXQgPSAwOwo+PiArCj4+ICsgICAgICAgLyoKPj4gKyAgICAgICAgKiBCeSBkZWZhdWx0IHRp
bWVvdXQgZm9yIG5vbiBjb21wdXRlIGpvYnMgaXMgMTAwMDAuCj4+ICsgICAgICAgICogQW5kIHRo
ZXJlIGlzIG5vIHRpbWVvdXQgZW5mb3JjZWQgb24gY29tcHV0ZSBqb2JzLgo+PiArICAgICAgICAq
Lwo+PiArICAgICAgIGFkZXYtPmdmeF90aW1lb3V0ID0gYWRldi0+c2RtYV90aW1lb3V0ID0gYWRl
di0+dmlkZW9fdGltZW91dCA9IDEwMDAwOwo+PiArICAgICAgIGFkZXYtPmNvbXB1dGVfdGltZW91
dCA9IE1BWF9TQ0hFRFVMRV9USU1FT1VUOwo+PiArCj4+ICsgICAgICAgaWYgKHN0cm5sZW4oaW5w
dXQsIEFNREdQVV9NQVhfVElNRU9VVF9QQVJBTV9MRU5USCkpIHsKPj4gKyAgICAgICAgICAgICAg
IHdoaWxlICgodGltZW91dF9zZXR0aW5nID0gc3Ryc2VwKCZpbnB1dCwgIiwiKSkgJiYKPj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJubGVuKHRpbWVvdXRfc2V0dGluZywgQU1E
R1BVX01BWF9USU1FT1VUX1BBUkFNX0xFTlRIKSkgewo+PiArICAgICAgICAgICAgICAgICAgICAg
ICByZXQgPSBrc3RydG9sKHRpbWVvdXRfc2V0dGluZywgMCwgJnRpbWVvdXQpOwo+PiArICAgICAg
ICAgICAgICAgICAgICAgICBpZiAocmV0KQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHJldHVybiByZXQ7Cj4+ICsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgLyogSW52YWxp
ZGF0ZSAwIGFuZCBuZWdhdGl2ZSB2YWx1ZXMgKi8KPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
aWYgKHRpbWVvdXQgPD0gMCkgewo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlu
ZGV4Kys7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4+ICsg
ICAgICAgICAgICAgICAgICAgICAgIH0KCk5lZ2F0aXZlIHZhbHVlcyBhcmUgcGVyZmVjdGx5IHZh
bGlkIGFuZCBqdXN0IG1lYW4gaW5maW5pdGUgdGltZW91dC4gVGFrZSAKYSBsb29rIGF0IHRoZSBt
c2Vjc190b19qaWZmaWVzKCkgaW1wbGVtZW50YXRpb24uCgpDaHJpc3RpYW4uCgo+PiArCj4+ICsg
ICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaW5kZXgrKykgewo+PiArICAgICAgICAgICAg
ICAgICAgICAgICBjYXNlIDA6Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRl
di0+Z2Z4X3RpbWVvdXQgPSB0aW1lb3V0Owo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrOwo+PiArICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6Cj4+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgYWRldi0+Y29tcHV0ZV90aW1lb3V0ID0gdGltZW91dDsK
Pj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgY2FzZSAyOgo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFk
ZXYtPnNkbWFfdGltZW91dCA9IHRpbWVvdXQ7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgYnJlYWs7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKPj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBhZGV2LT52aWRlb190aW1lb3V0ID0gdGltZW91dDsK
Pj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgZGVmYXVsdDoKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBi
cmVhazsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQo+PiArICAgICAgICAgICAgICAgfQo+
PiArICAgICAgICAgICAgICAgLyoKPj4gKyAgICAgICAgICAgICAgICAqIFRoZXJlIGlzIG9ubHkg
b25lIHZhbHVlIHNwZWNpZmllZCBhbmQKPj4gKyAgICAgICAgICAgICAgICAqIGl0IHNob3VsZCBh
cHBseSB0byBhbGwgbm9uLWNvbXB1dGUgam9icy4KPj4gKyAgICAgICAgICAgICAgICAqLwo+PiAr
ICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDEpCj4+ICsgICAgICAgICAgICAgICAgICAgICAg
IGFkZXYtPnNkbWFfdGltZW91dCA9IGFkZXYtPnZpZGVvX3RpbWVvdXQgPSBhZGV2LT5nZnhfdGlt
ZW91dDsKPj4gKyAgICAgICB9Cj4+ICsKPj4gKyAgICAgICByZXR1cm4gcmV0Owo+PiArfQo+PiAr
Cj4+ICAgc3RhdGljIGJvb2wKPj4gICBhbWRncHVfZ2V0X2NydGNfc2Nhbm91dF9wb3NpdGlvbihz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25lZCBpbnQgcGlwZSwKPj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGJvb2wgaW5fdmJsYW5rX2lycSwgaW50ICp2cG9zLCBpbnQg
Kmhwb3MsCj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
ZmVuY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9mZW5jZS5jCj4+IGlu
ZGV4IGQxOWFkMzRiZWY3NS4uMTZiN2UzYTIyZTg5IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYwo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYwo+PiBAQCAtNDM2LDkgKzQzNiwxMyBAQCBpbnQgYW1k
Z3B1X2ZlbmNlX2RyaXZlcl9zdGFydF9yaW5nKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywKPj4g
ICBpbnQgYW1kZ3B1X2ZlbmNlX2RyaXZlcl9pbml0X3Jpbmcoc3RydWN0IGFtZGdwdV9yaW5nICpy
aW5nLAo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIG51bV9o
d19zdWJtaXNzaW9uKQo+PiAgIHsKPj4gKyAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
diA9IHJpbmctPmFkZXY7Cj4+ICAgICAgICAgIGxvbmcgdGltZW91dDsKPj4gICAgICAgICAgaW50
IHI7Cj4+Cj4+ICsgICAgICAgaWYgKCFhZGV2KQo+PiArICAgICAgICAgICAgICAgcmV0dXJuIC1F
SU5WQUw7Cj4+ICsKPj4gICAgICAgICAgLyogQ2hlY2sgdGhhdCBudW1faHdfc3VibWlzc2lvbiBp
cyBhIHBvd2VyIG9mIHR3byAqLwo+PiAgICAgICAgICBpZiAoKG51bV9od19zdWJtaXNzaW9uICYg
KG51bV9od19zdWJtaXNzaW9uIC0gMSkpICE9IDApCj4+ICAgICAgICAgICAgICAgICAgcmV0dXJu
IC1FSU5WQUw7Cj4+IEBAIC00NjUsMTIgKzQ2OSwzMSBAQCBpbnQgYW1kZ3B1X2ZlbmNlX2RyaXZl
cl9pbml0X3Jpbmcoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLAo+Pgo+PiAgICAgICAgICAvKiBO
byBuZWVkIHRvIHNldHVwIHRoZSBHUFUgc2NoZWR1bGVyIGZvciBLSVEgcmluZyAqLwo+PiAgICAg
ICAgICBpZiAocmluZy0+ZnVuY3MtPnR5cGUgIT0gQU1ER1BVX1JJTkdfVFlQRV9LSVEpIHsKPj4g
LSAgICAgICAgICAgICAgIC8qIGZvciBub24tc3Jpb3YgY2FzZSwgbm8gdGltZW91dCBlbmZvcmNl
IG9uIGNvbXB1dGUgcmluZyAqLwo+PiAtICAgICAgICAgICAgICAgaWYgKChyaW5nLT5mdW5jcy0+
dHlwZSA9PSBBTURHUFVfUklOR19UWVBFX0NPTVBVVEUpCj4+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJiYgIWFtZGdwdV9zcmlvdl92ZihyaW5nLT5hZGV2KSkKPj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgdGltZW91dCA9IE1BWF9TQ0hFRFVMRV9USU1FT1VUOwo+PiAtICAgICAg
ICAgICAgICAgZWxzZQo+PiAtICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbXNlY3Nf
dG9famlmZmllcyhhbWRncHVfbG9ja3VwX3RpbWVvdXQpOwo+PiArICAgICAgICAgICAgICAgc3dp
dGNoIChyaW5nLT5mdW5jcy0+dHlwZSkgewo+PiArICAgICAgICAgICAgICAgY2FzZSBBTURHUFVf
UklOR19UWVBFX0dGWDoKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IGFkZXYt
PmdmeF90aW1lb3V0Owo+PiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPj4gKyAgICAg
ICAgICAgICAgIGNhc2UgQU1ER1BVX1JJTkdfVFlQRV9DT01QVVRFOgo+PiArICAgICAgICAgICAg
ICAgICAgICAgICAvKgo+PiArICAgICAgICAgICAgICAgICAgICAgICAgKiBGb3Igbm9uLXNyaW92
IGNhc2UsIG5vIHRpbWVvdXQgZW5mb3JjZQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgKiBv
biBjb21wdXRlIHJpbmcgYnkgZGVmYXVsdC4gVW5sZXNzIHVzZXIKPj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICogc3BlY2lmaWVzIGEgdGltZW91dCBmb3IgY29tcHV0ZSByaW5nLgo+PiArICAg
ICAgICAgICAgICAgICAgICAgICAgKgo+PiArICAgICAgICAgICAgICAgICAgICAgICAgKiBGb3Ig
c3Jpb3YgY2FzZSwgYWx3YXlzIHVzZSB0aGUgdGltZW91dAo+PiArICAgICAgICAgICAgICAgICAg
ICAgICAgKiBhcyBnZnggcmluZwo+PiArICAgICAgICAgICAgICAgICAgICAgICAgKi8KPj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbWRncHVfc3Jpb3ZfdmYocmluZy0+YWRldikpCj4+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IGFkZXYtPmNvbXB1dGVf
dGltZW91dDsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgZWxzZQo+PiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBhZGV2LT5nZnhfdGltZW91dDsKPj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4+ICsgICAgICAgICAgICAgICBjYXNlIEFNREdQVV9S
SU5HX1RZUEVfU0RNQToKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IGFkZXYt
PnNkbWFfdGltZW91dDsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4+ICsgICAg
ICAgICAgICAgICBkZWZhdWx0Ogo+PiArICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0g
YWRldi0+dmlkZW9fdGltZW91dDsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4+
ICsgICAgICAgICAgICAgICB9Cj4+Cj4+ICAgICAgICAgICAgICAgICAgciA9IGRybV9zY2hlZF9p
bml0KCZyaW5nLT5zY2hlZCwgJmFtZGdwdV9zY2hlZF9vcHMsCj4+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG51bV9od19zdWJtaXNzaW9uLCBhbWRncHVfam9iX2hhbmdfbGlt
aXQsCj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9teGdwdV9haS5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbXhncHVfYWkuYwo+PiBpbmRleCA4ZGJhZDQ5
NmIyOWYuLjA4OTk1MmExZTZiMCAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvbXhncHVfYWkuYwo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9teGdw
dV9haS5jCj4+IEBAIC0zNDMsNyArMzQzLDcgQEAgc3RhdGljIHZvaWQgeGdwdV9haV9tYWlsYm94
X2Zscl93b3JrKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKPj4KPj4gICAgICAgICAgLyogVHJp
Z2dlciByZWNvdmVyeSBmb3Igd29ybGQgc3dpdGNoIGZhaWx1cmUgaWYgbm8gVERSICovCj4+ICAg
ICAgICAgIGlmIChhbWRncHVfZGV2aWNlX3Nob3VsZF9yZWNvdmVyX2dwdShhZGV2KQo+PiAtICAg
ICAgICAgICAgICAgJiYgYW1kZ3B1X2xvY2t1cF90aW1lb3V0ID09IE1BWF9TQ0hFRFVMRV9USU1F
T1VUKQo+PiArICAgICAgICAgICAgICAgJiYgYWRldi0+c2RtYV90aW1lb3V0ID09IE1BWF9TQ0hF
RFVMRV9USU1FT1VUKQo+PiAgICAgICAgICAgICAgICAgIGFtZGdwdV9kZXZpY2VfZ3B1X3JlY292
ZXIoYWRldiwgTlVMTCk7Cj4+ICAgfQo+Pgo+PiAtLQo+PiAyLjIxLjAKPj4KPj4gX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPj4gYW1kLWdmeCBtYWlsaW5n
IGxpc3QKPj4gYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPj4gaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cj4gX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBhbWQtZ2Z4IG1haWxpbmcgbGlzdAo+
IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4CgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2FtZC1nZng=
