Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 29B7423397B
	for <lists+amd-gfx@lfdr.de>; Thu, 30 Jul 2020 22:04:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1C6CD6E95F;
	Thu, 30 Jul 2020 20:04:30 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x843.google.com (mail-qt1-x843.google.com
 [IPv6:2607:f8b0:4864:20::843])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AAFA56E95F
 for <amd-gfx@lists.freedesktop.org>; Thu, 30 Jul 2020 20:04:28 +0000 (UTC)
Received: by mail-qt1-x843.google.com with SMTP id w9so21311998qts.6
 for <amd-gfx@lists.freedesktop.org>; Thu, 30 Jul 2020 13:04:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=NvYQ72PiH83n8kamwHxviaI/C1yh3EcealgWa7uRfjE=;
 b=gzHu+8C1/vOMjrvSJzLQUHzQZR2muqCYt4tnfc9f8lugdSnTGuoZd9hTzkpdrbYaBM
 IHSuUNuzgGZ706e7yb2JnrScLGd4w6TmvplB4h/jchinAhguuFtJrWrdUlm6l4JNBkY8
 JuW3+pwQv+ufDC7OLKbvTwsaUS2jXW7iqY15PQ9/xa8lB9zW/5Xk6cxcuueKnnIx2MZF
 FVJxMta3n4tsicV8OAfA5lqopiYMaZgn/DvpSXaqXS2LMiOboFDtBjyWWN1DMIx+2OYh
 jEzKpD6lC7KwyYwQlYmRK8axRnqzdXemRajX+zyuHFzXpEmhfjB2IlG7UOTXyLoRcyuQ
 cqiw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=NvYQ72PiH83n8kamwHxviaI/C1yh3EcealgWa7uRfjE=;
 b=UP6lJ2V5Fl/s2lb/R/+2192yICtdKif5HFUsviX9LlxefATEoQ4RKlL8EuhbfCmNmO
 W4akVC7DC3gmihbmArVkxNodQ+0PAHN7ytRbZcCa4jxNI0CNxKtodpW1eXvOsIclA7i7
 Dl/vz5Kulfa+2LKgTa3Yu5W9KNhTdlPk8Vi/kzTOd1C319RSBsJ4q5WvLA6JeSh5N+WW
 EQV5kQj/edFb+eLwW+neilgb9zaIMxtUVszeBgrF2vEwF38iRNRWcRCXZLSxRUE7RYrw
 nRhLYvlvqYB4rh+BtZRSl+46a7YvGKSgXg66W7vkJbJhpVU/AWWjPz/joss3xWcPjLDD
 61bg==
X-Gm-Message-State: AOAM5322t2BQGEa6dc2jOu+CJsxj/ARO5fVcztbs5f307XFsdOKo75zo
 D3Se3x+NdmcO2xsN55XyBH9vvlTW
X-Google-Smtp-Source: ABdhPJwjFi+yCIo6zpxube3cRy88pXoB//Z8RZDVqXc8Gwrl1RsFZ+VwQ4v2MVLZxFb36JJV0lg6xQ==
X-Received: by 2002:ac8:4b4d:: with SMTP id e13mr368371qts.256.1596139466512; 
 Thu, 30 Jul 2020 13:04:26 -0700 (PDT)
Received: from localhost.localdomain ([71.219.66.138])
 by smtp.gmail.com with ESMTPSA id d8sm5652757qtr.12.2020.07.30.13.04.25
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 30 Jul 2020 13:04:26 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 04/17] drm/amdgpu: move stolen vga bo from amdgpu to amdgpu.gmc
Date: Thu, 30 Jul 2020 16:04:01 -0400
Message-Id: <20200730200414.40485-5-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.25.4
In-Reply-To: <20200730200414.40485-1-alexander.deucher@amd.com>
References: <20200730200414.40485-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>,
 Felix Kuehling <Felix.Kuehling@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U2luY2UgdGhhdCBpcyB3aGVyZSB3ZSBzdG9yZSB0aGUgb3RoZXIgZGF0YSByZWxhdGVkIHRvCnRo
ZSBzdG9sZW4gdmdhIG1lbW9yeS4KClJldmlld2VkLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJp
c3RpYW4ua29lbmlnQGFtZC5jb20+ClJldmlld2VkLWJ5OiBGZWxpeCBLdWVobGluZyA8RmVsaXgu
S3VlaGxpbmdAYW1kLmNvbT4KU2lnbmVkLW9mZi1ieTogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIu
ZGV1Y2hlckBhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5o
ICAgICB8IDEgLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5oIHwgMyAr
Ky0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyB8IDYgKysrLS0tCiBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYyAgfCAyICstCiBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9nbWNfdjZfMC5jICAgfCAyICstCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9nbWNfdjdfMC5jICAgfCAyICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
bWNfdjhfMC5jICAgfCAyICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5j
ICAgfCA0ICsrLS0KIDggZmlsZXMgY2hhbmdlZCwgMTEgaW5zZXJ0aW9ucygrKSwgMTEgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1Lmgg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaAppbmRleCAyYTdmYmUyMTYxOWQu
Ljg5OTY2NDM1NzAxNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKQEAgLTc2Nyw3
ICs3NjcsNiBAQCBzdHJ1Y3QgYW1kZ3B1X2RldmljZSB7CiAJYm9vbAkJCQlpc19hdG9tX2Z3Owog
CXVpbnQ4X3QJCQkJKmJpb3M7CiAJdWludDMyX3QJCQliaW9zX3NpemU7Ci0Jc3RydWN0IGFtZGdw
dV9ibwkJKnN0b2xlbl92Z2FfbWVtb3J5OwogCXVpbnQzMl90CQkJYmlvc19zY3JhdGNoX3JlZ19v
ZmZzZXQ7CiAJdWludDMyX3QJCQliaW9zX3NjcmF0Y2hbQU1ER1BVX0JJT1NfTlVNX1NDUkFUQ0hd
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmgg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmgKaW5kZXggOWQ1OGM1NmY2
Y2ZjLi5kZGI2NGJlNjcwYzIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9nbWMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21j
LmgKQEAgLTIxMyw3ICsyMTMsOCBAQCBzdHJ1Y3QgYW1kZ3B1X2dtYyB7CiAJdWludDhfdAkJCXZy
YW1fdmVuZG9yOwogCXVpbnQzMl90ICAgICAgICAgICAgICAgIHNyYm1fc29mdF9yZXNldDsKIAli
b29sCQkJcHJ0X3dhcm5pbmc7Ci0JdWludDY0X3QJCXN0b2xlbl9zaXplOworCXVpbnQ2NF90CQlz
dG9sZW5fdmdhX3NpemU7CisJc3RydWN0IGFtZGdwdV9ibwkqc3RvbGVuX3ZnYV9tZW1vcnk7CiAJ
dWludDMyX3QJCXNkcGlmX3JlZ2lzdGVyOwogCS8qIGFwZXJ0dXJlcyAqLwogCXU2NAkJCXNoYXJl
ZF9hcGVydHVyZV9zdGFydDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV90dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwpp
bmRleCBhMTg4MjE2YmNjYzIuLjM5NzgxMTI3ZDA1OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV90dG0uYwpAQCAtMTk3OSw5ICsxOTc5LDkgQEAgaW50IGFtZGdwdV90dG1faW5p
dChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAkgKiBUaGlzIGlzIHVzZWQgZm9yIFZHQSBl
bXVsYXRpb24gYW5kIHByZS1PUyBzY2Fub3V0IGJ1ZmZlcnMgdG8KIAkgKiBhdm9pZCBkaXNwbGF5
IGFydGlmYWN0cyB3aGlsZSB0cmFuc2l0aW9uaW5nIGJldHdlZW4gcHJlLU9TCiAJICogYW5kIGRy
aXZlci4gICovCi0JciA9IGFtZGdwdV9ib19jcmVhdGVfa2VybmVsX2F0KGFkZXYsIDAsIGFkZXYt
PmdtYy5zdG9sZW5fc2l6ZSwKKwlyID0gYW1kZ3B1X2JvX2NyZWF0ZV9rZXJuZWxfYXQoYWRldiwg
MCwgYWRldi0+Z21jLnN0b2xlbl92Z2Ffc2l6ZSwKIAkJCQkgICAgICAgQU1ER1BVX0dFTV9ET01B
SU5fVlJBTSwKLQkJCQkgICAgICAgJmFkZXYtPnN0b2xlbl92Z2FfbWVtb3J5LAorCQkJCSAgICAg
ICAmYWRldi0+Z21jLnN0b2xlbl92Z2FfbWVtb3J5LAogCQkJCSAgICAgICAmc3RvbGVuX3ZnYV9i
dWYpOwogCWlmIChyKQogCQlyZXR1cm4gcjsKQEAgLTIwNDMsNyArMjA0Myw3IEBAIHZvaWQgYW1k
Z3B1X3R0bV9sYXRlX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiB7CiAJdm9pZCAq
c3RvbGVuX3ZnYV9idWY7CiAJLyogcmV0dXJuIHRoZSBWR0Egc3RvbGVuIG1lbW9yeSAoaWYgYW55
KSBiYWNrIHRvIFZSQU0gKi8KLQlhbWRncHVfYm9fZnJlZV9rZXJuZWwoJmFkZXYtPnN0b2xlbl92
Z2FfbWVtb3J5LCBOVUxMLCAmc3RvbGVuX3ZnYV9idWYpOworCWFtZGdwdV9ib19mcmVlX2tlcm5l
bCgmYWRldi0+Z21jLnN0b2xlbl92Z2FfbWVtb3J5LCBOVUxMLCAmc3RvbGVuX3ZnYV9idWYpOwog
fQogCiAvKioKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192MTBf
MC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMKaW5kZXggMDQwMjIw
ZTk3Y2YzLi4zMzdkNzA1MDM5NzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2dtY192MTBfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192MTBf
MC5jCkBAIC04MTIsNyArODEyLDcgQEAgc3RhdGljIGludCBnbWNfdjEwXzBfc3dfaW5pdCh2b2lk
ICpoYW5kbGUpCiAJaWYgKHIpCiAJCXJldHVybiByOwogCi0JYWRldi0+Z21jLnN0b2xlbl9zaXpl
ID0gZ21jX3YxMF8wX2dldF92Ymlvc19mYl9zaXplKGFkZXYpOworCWFkZXYtPmdtYy5zdG9sZW5f
dmdhX3NpemUgPSBnbWNfdjEwXzBfZ2V0X3ZiaW9zX2ZiX3NpemUoYWRldik7CiAKIAkvKiBNZW1v
cnkgbWFuYWdlciAqLwogCXIgPSBhbWRncHVfYm9faW5pdChhZGV2KTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192Nl8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9nbWNfdjZfMC5jCmluZGV4IDRkZTk5Njg2OGQzMi4uMjhkZGI0MWE3OGM4IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjZfMC5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192Nl8wLmMKQEAgLTg2Miw3ICs4NjIsNyBAQCBzdGF0
aWMgaW50IGdtY192Nl8wX3N3X2luaXQodm9pZCAqaGFuZGxlKQogCWlmIChyKQogCQlyZXR1cm4g
cjsKIAotCWFkZXYtPmdtYy5zdG9sZW5fc2l6ZSA9IGdtY192Nl8wX2dldF92Ymlvc19mYl9zaXpl
KGFkZXYpOworCWFkZXYtPmdtYy5zdG9sZW5fdmdhX3NpemUgPSBnbWNfdjZfMF9nZXRfdmJpb3Nf
ZmJfc2l6ZShhZGV2KTsKIAogCXIgPSBhbWRncHVfYm9faW5pdChhZGV2KTsKIAlpZiAocikKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192N18wLmMgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjdfMC5jCmluZGV4IDQxMTNmMmQzM2I3NS4uOGI4ZWNi
Yjk5ZDg0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjdfMC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192N18wLmMKQEAgLTEwMzUsNyAr
MTAzNSw3IEBAIHN0YXRpYyBpbnQgZ21jX3Y3XzBfc3dfaW5pdCh2b2lkICpoYW5kbGUpCiAJaWYg
KHIpCiAJCXJldHVybiByOwogCi0JYWRldi0+Z21jLnN0b2xlbl9zaXplID0gZ21jX3Y3XzBfZ2V0
X3ZiaW9zX2ZiX3NpemUoYWRldik7CisJYWRldi0+Z21jLnN0b2xlbl92Z2Ffc2l6ZSA9IGdtY192
N18wX2dldF92Ymlvc19mYl9zaXplKGFkZXYpOwogCiAJLyogTWVtb3J5IG1hbmFnZXIgKi8KIAly
ID0gYW1kZ3B1X2JvX2luaXQoYWRldik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9nbWNfdjhfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y4XzAu
YwppbmRleCBmMjlmZjlhZmNjMTAuLjhlMzc2M2VjMjY4ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y4XzAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9nbWNfdjhfMC5jCkBAIC0xMTYwLDcgKzExNjAsNyBAQCBzdGF0aWMgaW50IGdtY192OF8w
X3N3X2luaXQodm9pZCAqaGFuZGxlKQogCWlmIChyKQogCQlyZXR1cm4gcjsKIAotCWFkZXYtPmdt
Yy5zdG9sZW5fc2l6ZSA9IGdtY192OF8wX2dldF92Ymlvc19mYl9zaXplKGFkZXYpOworCWFkZXYt
PmdtYy5zdG9sZW5fdmdhX3NpemUgPSBnbWNfdjhfMF9nZXRfdmJpb3NfZmJfc2l6ZShhZGV2KTsK
IAogCS8qIE1lbW9yeSBtYW5hZ2VyICovCiAJciA9IGFtZGdwdV9ib19pbml0KGFkZXYpOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKaW5kZXggYWMxNWQ3Njc4ZDI0Li5iNjZjNjA2
ODBkYmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYwpAQCAtMTI0Myw3ICsx
MjQzLDcgQEAgc3RhdGljIGludCBnbWNfdjlfMF9zd19pbml0KHZvaWQgKmhhbmRsZSkKIAlpZiAo
cikKIAkJcmV0dXJuIHI7CiAKLQlhZGV2LT5nbWMuc3RvbGVuX3NpemUgPSBnbWNfdjlfMF9nZXRf
dmJpb3NfZmJfc2l6ZShhZGV2KTsKKwlhZGV2LT5nbWMuc3RvbGVuX3ZnYV9zaXplID0gZ21jX3Y5
XzBfZ2V0X3ZiaW9zX2ZiX3NpemUoYWRldik7CiAKIAkvKiBNZW1vcnkgbWFuYWdlciAqLwogCXIg
PSBhbWRncHVfYm9faW5pdChhZGV2KTsKQEAgLTEyODIsNyArMTI4Miw3IEBAIHN0YXRpYyBpbnQg
Z21jX3Y5XzBfc3dfZmluaSh2b2lkICpoYW5kbGUpCiAJYW1kZ3B1X3ZtX21hbmFnZXJfZmluaShh
ZGV2KTsKIAogCWlmIChnbWNfdjlfMF9rZWVwX3N0b2xlbl9tZW1vcnkoYWRldikpCi0JCWFtZGdw
dV9ib19mcmVlX2tlcm5lbCgmYWRldi0+c3RvbGVuX3ZnYV9tZW1vcnksIE5VTEwsICZzdG9sZW5f
dmdhX2J1Zik7CisJCWFtZGdwdV9ib19mcmVlX2tlcm5lbCgmYWRldi0+Z21jLnN0b2xlbl92Z2Ff
bWVtb3J5LCBOVUxMLCAmc3RvbGVuX3ZnYV9idWYpOwogCiAJYW1kZ3B1X2dhcnRfdGFibGVfdnJh
bV9mcmVlKGFkZXYpOwogCWFtZGdwdV9ib19maW5pKGFkZXYpOwotLSAKMi4yNS40CgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcg
bGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZngK
