Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E7F641AF1E
	for <lists+amd-gfx@lfdr.de>; Mon, 13 May 2019 05:26:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6AFB1892E5;
	Mon, 13 May 2019 03:26:28 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM05-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr720046.outbound.protection.outlook.com [40.107.72.46])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 038FD892E5
 for <amd-gfx@lists.freedesktop.org>; Mon, 13 May 2019 03:26:26 +0000 (UTC)
Received: from MN2PR12MB3582.namprd12.prod.outlook.com (20.178.243.76) by
 MN2PR12MB3166.namprd12.prod.outlook.com (20.179.81.208) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1878.21; Mon, 13 May 2019 03:26:24 +0000
Received: from MN2PR12MB3582.namprd12.prod.outlook.com
 ([fe80::e8f8:4e77:b611:1a25]) by MN2PR12MB3582.namprd12.prod.outlook.com
 ([fe80::e8f8:4e77:b611:1a25%4]) with mapi id 15.20.1878.024; Mon, 13 May 2019
 03:26:24 +0000
From: "Gui, Jack" <Jack.Gui@amd.com>
To: "Zhang, Hawking" <Hawking.Zhang@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH 2/2] drm/amd/powerplay: Enable "disable dpm" feature for
 vega20 power functions.
Thread-Topic: [PATCH 2/2] drm/amd/powerplay: Enable "disable dpm" feature for
 vega20 power functions.
Thread-Index: AQHVBw00Vyg6vbWSS024cpBj+ssn/KZm1JKAgAGTE9A=
Date: Mon, 13 May 2019 03:26:24 +0000
Message-ID: <MN2PR12MB358219B85CA0E1B4B159FB0C8B0F0@MN2PR12MB3582.namprd12.prod.outlook.com>
References: <1557478117-17823-1-git-send-email-Jack.Gui@amd.com>
 <1557478117-17823-2-git-send-email-Jack.Gui@amd.com>
 <BYAPR12MB263244237A28E226D34F348EFC0E0@BYAPR12MB2632.namprd12.prod.outlook.com>
In-Reply-To: <BYAPR12MB263244237A28E226D34F348EFC0E0@BYAPR12MB2632.namprd12.prod.outlook.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 4491201f-62f7-4005-2e78-08d6d752c6d7
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600141)(711020)(4605104)(4618075)(2017052603328)(7193020);
 SRVR:MN2PR12MB3166; 
x-ms-traffictypediagnostic: MN2PR12MB3166:
x-ms-exchange-purlcount: 1
x-microsoft-antispam-prvs: <MN2PR12MB316675A696D520EB2B39D3458B0F0@MN2PR12MB3166.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:6790;
x-forefront-prvs: 0036736630
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(396003)(136003)(346002)(39860400002)(376002)(366004)(13464003)(189003)(199004)(5660300002)(33656002)(52536014)(316002)(74316002)(7736002)(86362001)(305945005)(68736007)(6246003)(2501003)(8676002)(256004)(81156014)(81166006)(8936002)(14444005)(2906002)(6116002)(3846002)(53936002)(11346002)(486006)(446003)(478600001)(66556008)(76116006)(66446008)(64756008)(25786009)(66476007)(73956011)(71190400001)(71200400001)(66946007)(110136005)(66066001)(6306002)(9686003)(55016002)(6506007)(53546011)(26005)(14454004)(186003)(229853002)(102836004)(476003)(6436002)(7696005)(99286004)(76176011)(966005)(72206003);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3166;
 H:MN2PR12MB3582.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: MplnylD870wa74pE9N0DDKMUb2ZNlQ6xFdikZ5pbeyjtY1T+ySal/klEuZiGhOZL1HwhdtEv2651FZEWBpDroeVVccOHIcuwpQmZgUcosQXK2FHYDvsn1EywRElrk1KGuU+Ak4nR9dF6JENzNbJjRlYNCyEGo83R8sRJdtvFexJJpRpA7OAhvwkRbIx1I2aiMkzujlYYQTNl7t+2l/pjv6fKr2CcnLUlBa+1wmFVQcXmH1nj0dqk5qjzZn8lRXA86n1DUpoQ8f5tfcTDeN6p05mgY1uLolKiH5R18yqs//+oWtyYjqq5mKYO41+GpMwY2nerP2SZNIN03Je50JijqHMkuAorV1LAG9QPj+CMUI4XpLy/QNPPJyv7uf68gDlsaIYhn58v9CLOG30VbrEgO+INJLyFbSTuSaHNy2xijAg=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 4491201f-62f7-4005-2e78-08d6d752c6d7
X-MS-Exchange-CrossTenant-originalarrivaltime: 13 May 2019 03:26:24.2104 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3166
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amd-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bWvRKy/kDJiL4Yw/R7CF46iaEYOuFnJ4Fn76Oh7uDK4=;
 b=XRvT7nUr6Nophqgdslx1GHZZVMSIjAAi/pdt5+eaM1hK8z6uiEMgHdjPtJ+HoHTGoL6+z1Qml+dYcbouuY9Mosy4X9+YKYZNrJJ8oj31othLTlA2szEZsA4cACZw02Bzcw+3k7bdALScHDfEiRGayExF+bOSZg4ORlgJW8mUW7w=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Jack.Gui@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

SGkgSGF3a2luZywNCg0KSWYgbm8gb3RoZXIgdG9vbHMgKHN5c2ZzIGluZmVyZmFjZXMgaGF2ZSBi
ZWVuIGNvbnRyb2xsZWQgYnkgYWRldi0+ZHBtX2VuYWJsZWQpIGRpcmVjdGx5IHVzZSB0aGUgcHB0
IGZ1bmN0cywgUEFUQ0hbMS8yXSBjYW4gY292ZXIgYWxsIHRoZSBjYXNlcyBub3csIFBBVENIWzIv
Ml0gY2FuIGJlIGRyb3BwZWQuDQoNCkJSLA0KSmFjayBHdWkNCg0KLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCkZyb206IFpoYW5nLCBIYXdraW5nIDxIYXdraW5nLlpoYW5nQGFtZC5jb20+IA0K
U2VudDogU3VuZGF5LCBNYXkgMTIsIDIwMTkgMTE6MTggQU0NClRvOiBHdWksIEphY2sgPEphY2su
R3VpQGFtZC5jb20+OyBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KQ2M6IEd1aSwgSmFj
ayA8SmFjay5HdWlAYW1kLmNvbT4NClN1YmplY3Q6IFJFOiBbUEFUQ0ggMi8yXSBkcm0vYW1kL3Bv
d2VycGxheTogRW5hYmxlICJkaXNhYmxlIGRwbSIgZmVhdHVyZSBmb3IgdmVnYTIwIHBvd2VyIGZ1
bmN0aW9ucy4NCg0KSSdtIHdvbmRlcmluZyB3aGV0aGVyIHdlIGFyZSBhYmxlIHRvIGhhbmRsZSBh
bGwgYXNpYyBzcGVjaWZpYyBwcHQgZnVuY3Rpb24gZ3JhY2VmdWxseS4gQWRkIHBtX2VuYWJsZSBj
aGVjayBpbnRvIHBwdCBmdW5jdGlvbnMgd291bGQgYmUgYm9yaW5nIHNpbmNlIHdlIGhhdmUgdG8g
ZG8gc2ltaWxhciBqb2JzIGZvciBlYWNoIEFTSUMuIEluc3RlYWQsIGlzIGl0IHBvc3NpYmxlIHRv
IHJldHVybiBlYXJseSBmcm9tIGFtZGdwdV9zbXUgaW50ZXJmYWNlIGxldmVsPyANCg0KVGFrZSBz
bXVfaGFuZGxlX3Rhc2sgZm9yIHRoZSBleGFtcGxlLCBhbGwgdGhlIGFtZGdwdV9zbXUgbGV2ZWwg
aW50ZXJmYWNlIGludm9rZWQgZnJvbSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGJlIHN0b3BwZWQgaWYg
d2UgY2hlY2sgc211IHBtX2VuYWJsZSBmbGFnIGF0IHRoZSBiZWdpbm5pbmcgb2Ygc211X2hhbmRs
ZV90YXNrLiBXZSBwcm9iYWJseSBoYXZlIGJldHRlciBhcHByb2FjaCB0byBlbGltaW5hdGUgdGhp
cyBwYXRjaC4NCg0KUmVnYXJkcywNCkhhd2tpbmcgDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0t
LS0tDQpGcm9tOiBhbWQtZ2Z4IDxhbWQtZ2Z4LWJvdW5jZXNAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
PiBPbiBCZWhhbGYgT2YgQ2hlbmdtaW5nIEd1aQ0KU2VudDogMjAxOeW5tDXmnIgxMOaXpSAxNjo0
OQ0KVG86IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQpDYzogR3VpLCBKYWNrIDxKYWNr
Lkd1aUBhbWQuY29tPg0KU3ViamVjdDogW1BBVENIIDIvMl0gZHJtL2FtZC9wb3dlcnBsYXk6IEVu
YWJsZSAiZGlzYWJsZSBkcG0iIGZlYXR1cmUgZm9yIHZlZ2EyMCBwb3dlciBmdW5jdGlvbnMuDQoN
CltDQVVUSU9OOiBFeHRlcm5hbCBFbWFpbF0NCg0KdXNlIHBtX2VuYWJsZWQgdG8gY29udHJvbCBh
bGwgcG93ZXIgcmVsYXRlZCBmdW5jdGlvbnMgYWJvdXQgdmVnYTIwLg0KDQpTaWduZWQtb2ZmLWJ5
OiBDaGVuZ21pbmcgR3VpIDxKYWNrLkd1aUBhbWQuY29tPg0KLS0tDQogZHJpdmVycy9ncHUvZHJt
L2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jIHwgNDggKysrKysrKysrKysrKysrKysrKysrKyst
LS0tLS0tDQogMSBmaWxlIGNoYW5nZWQsIDM4IGluc2VydGlvbnMoKyksIDEwIGRlbGV0aW9ucygt
KQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3Bw
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvdmVnYTIwX3BwdC5jDQppbmRleCA4
ZmFmY2JkLi43ZmFhNmExIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBs
YXkvdmVnYTIwX3BwdC5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS92ZWdh
MjBfcHB0LmMNCkBAIC00MTEsNyArNDExLDggQEAgYW1kX3BtX3N0YXRlX3R5cGUgdmVnYTIwX2dl
dF9jdXJyZW50X3Bvd2VyX3N0YXRlKHN0cnVjdCBzbXVfY29udGV4dCAqc211KQ0KICAgICAgICBl
bnVtIGFtZF9wbV9zdGF0ZV90eXBlIHBtX3R5cGU7DQogICAgICAgIHN0cnVjdCBzbXVfZHBtX2Nv
bnRleHQgKnNtdV9kcG1fY3R4ID0gJihzbXUtPnNtdV9kcG0pOw0KDQotICAgICAgIGlmICghc211
X2RwbV9jdHgtPmRwbV9jb250ZXh0IHx8DQorICAgICAgIGlmICghc211LT5wbV9lbmFibGVkIHx8
DQorICAgICAgICAgICAhc211X2RwbV9jdHgtPmRwbV9jb250ZXh0IHx8DQogICAgICAgICAgICAh
c211X2RwbV9jdHgtPmRwbV9jdXJyZW50X3Bvd2VyX3N0YXRlKQ0KICAgICAgICAgICAgICAgIHJl
dHVybiAtRUlOVkFMOw0KDQpAQCAtNDkxLDEyICs0OTIsMTQgQEAgc3RhdGljIHZvaWQgdmVnYTIw
X2luaXRfc2luZ2xlX2RwbV9zdGF0ZShzdHJ1Y3QgdmVnYTIwX2RwbV9zdGF0ZSAqZHBtX3N0YXRl
KQ0KDQogc3RhdGljIGludCB2ZWdhMjBfc2V0X2RlZmF1bHRfZHBtX3RhYmxlKHN0cnVjdCBzbXVf
Y29udGV4dCAqc211KSAgew0KLSAgICAgICBpbnQgcmV0Ow0KKyAgICAgICBpbnQgcmV0ID0gMDsN
Cg0KICAgICAgICBzdHJ1Y3Qgc211X2RwbV9jb250ZXh0ICpzbXVfZHBtID0gJnNtdS0+c211X2Rw
bTsNCiAgICAgICAgc3RydWN0IHZlZ2EyMF9kcG1fdGFibGUgKmRwbV90YWJsZSA9IE5VTEw7DQog
ICAgICAgIHN0cnVjdCB2ZWdhMjBfc2luZ2xlX2RwbV90YWJsZSAqc2luZ2xlX2RwbV90YWJsZTsN
Cg0KKyAgICAgICBpZiAoc211LT5wbV9lbmFibGVkKQ0KKyAgICAgICAgICAgICAgIHJldHVybiBy
ZXQ7DQogICAgICAgIGRwbV90YWJsZSA9IHNtdV9kcG0tPmRwbV9jb250ZXh0Ow0KDQogICAgICAg
IC8qIHNvY2NsayAqLw0KQEAgLTczOCw2ICs3NDEsOCBAQCBzdGF0aWMgaW50IHZlZ2EyMF9wcmlu
dF9jbGtfbGV2ZWxzKHN0cnVjdCBzbXVfY29udGV4dCAqc211LA0KDQogICAgICAgIGRwbV90YWJs
ZSA9IHNtdV9kcG0tPmRwbV9jb250ZXh0Ow0KDQorICAgICAgIGlmICghc211LT5wbV9lbmFibGVk
KQ0KKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KICAgICAgICBzd2l0Y2ggKHR5cGUp
IHsNCiAgICAgICAgY2FzZSBQUF9TQ0xLOg0KICAgICAgICAgICAgICAgIHJldCA9IHNtdV9nZXRf
Y3VycmVudF9jbGtfZnJlcShzbXUsIFBQQ0xLX0dGWENMSywgJm5vdyk7IEBAIC05NjksNiArOTc0
LDggQEAgc3RhdGljIGludCB2ZWdhMjBfdXBsb2FkX2RwbV9sZXZlbChzdHJ1Y3Qgc211X2NvbnRl
eHQgKnNtdSwgYm9vbCBtYXgsDQogICAgICAgIHVpbnQzMl90IGZyZXE7DQogICAgICAgIGludCBy
ZXQgPSAwOw0KDQorICAgICAgIGlmICghc211LT5wbV9lbmFibGVkKQ0KKyAgICAgICAgICAgICAg
IHJldHVybiAtRUlOVkFMOw0KICAgICAgICBkcG1fdGFibGUgPSBzbXUtPnNtdV9kcG0uZHBtX2Nv
bnRleHQ7DQoNCiAgICAgICAgaWYgKHNtdV9mZWF0dXJlX2lzX2VuYWJsZWQoc211LCBGRUFUVVJF
X0RQTV9HRlhDTEtfQklUKSAmJiBAQCAtMTA1OCw2ICsxMDY1LDggQEAgc3RhdGljIGludCB2ZWdh
MjBfZm9yY2VfY2xrX2xldmVscyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwNCiAgICAgICAgc3Ry
dWN0IHNtdV9kcG1fY29udGV4dCAqc211X2RwbSA9ICZzbXUtPnNtdV9kcG07DQogICAgICAgIGlu
dCByZXQgPSAwOw0KDQorICAgICAgIGlmICghc211LT5wbV9lbmFibGVkKQ0KKyAgICAgICAgICAg
ICAgIHJldHVybiAtRUlOVkFMOw0KICAgICAgICBpZiAoc211X2RwbS0+ZHBtX2xldmVsICE9IEFN
RF9EUE1fRk9SQ0VEX0xFVkVMX01BTlVBTCkgew0KICAgICAgICAgICAgICAgIHByX2luZm8oImZv
cmNlIGNsb2NrIGxldmVsIGlzIGZvciBkcG0gbWFudWFsIG1vZGUgb25seS5cbiIpOw0KICAgICAg
ICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KQEAgLTEyMzIsOCArMTI0MSw5IEBAIHN0YXRpYyBp
bnQgdmVnYTIwX2dldF9jbG9ja19ieV90eXBlX3dpdGhfbGF0ZW5jeShzdHJ1Y3Qgc211X2NvbnRl
eHQgKnNtdSwNCg0KICAgICAgICBkcG1fdGFibGUgPSBzbXVfZHBtLT5kcG1fY29udGV4dDsNCg0K
KyAgICAgICBpZiAoIXNtdS0+cG1fZW5hYmxlZCkNCisgICAgICAgICAgICAgICByZXR1cm4gLUVJ
TlZBTDsNCiAgICAgICAgbXV0ZXhfbG9jaygmc211LT5tdXRleCk7DQotDQogICAgICAgIHN3aXRj
aCAodHlwZSkgew0KICAgICAgICBjYXNlIGFtZF9wcF9zeXNfY2xvY2s6DQogICAgICAgICAgICAg
ICAgc2luZ2xlX2RwbV90YWJsZSA9ICYoZHBtX3RhYmxlLT5nZnhfdGFibGUpOyBAQCAtMTI2NSw2
ICsxMjc1LDggQEAgc3RhdGljIGludCB2ZWdhMjBfb3ZlcmRyaXZlX2dldF9nZnhfY2xrX2Jhc2Vf
dm9sdGFnZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgIHsNCiAgICAgICAgaW50IHJldDsNCg0K
KyAgICAgICBpZiAoIXNtdS0+cG1fZW5hYmxlZCkNCisgICAgICAgICAgICAgICByZXR1cm4gLUVJ
TlZBTDsNCiAgICAgICAgcmV0ID0gc211X3NlbmRfc21jX21zZ193aXRoX3BhcmFtKHNtdSwNCiAg
ICAgICAgICAgICAgICAgICAgICAgIFNNVV9NU0dfR2V0QVZGU1ZvbHRhZ2VCeURwbSwNCiAgICAg
ICAgICAgICAgICAgICAgICAgICgoQVZGU19DVVJWRSA8PCAyNCkgfCAoT0Q4X0hPVENVUlZFX1RF
TVBFUkFUVVJFIDw8IDE2KSB8IGZyZXEpKTsgQEAgLTEyODcsNyArMTI5OSw3IEBAIHN0YXRpYyBp
bnQgdmVnYTIwX3NldF9kZWZhdWx0X29kOF9zZXR0dGluZ3Moc3RydWN0IHNtdV9jb250ZXh0ICpz
bXUpDQogICAgICAgIFBQVGFibGVfdCAqc21jX3BwdGFibGUgPSB0YWJsZV9jb250ZXh0LT5kcml2
ZXJfcHB0YWJsZTsNCiAgICAgICAgaW50IGksIHJldDsNCg0KLSAgICAgICBpZiAodGFibGVfY29u
dGV4dC0+b2Q4X3NldHRpbmdzKQ0KKyAgICAgICBpZiAoIXNtdS0+cG1fZW5hYmxlZCB8fCB0YWJs
ZV9jb250ZXh0LT5vZDhfc2V0dGluZ3MpDQogICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7
DQoNCiAgICAgICAgdGFibGVfY29udGV4dC0+b2Q4X3NldHRpbmdzID0ga3phbGxvYyhzaXplb2Yo
c3RydWN0IHZlZ2EyMF9vZDhfc2V0dGluZ3MpLCBHRlBfS0VSTkVMKTsgQEAgLTE0NzQsNiArMTQ4
Niw4IEBAIHN0YXRpYyBpbnQgdmVnYTIwX2dldF9vZF9wZXJjZW50YWdlKHN0cnVjdCBzbXVfY29u
dGV4dCAqc211LA0KICAgICAgICBkcG1fdGFibGUgPSBzbXVfZHBtLT5kcG1fY29udGV4dDsNCiAg
ICAgICAgZ29sZGVuX3RhYmxlID0gc211X2RwbS0+Z29sZGVuX2RwbV9jb250ZXh0Ow0KDQorICAg
ICAgIGlmICghc211LT5wbV9lbmFibGVkKQ0KKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFM
Ow0KICAgICAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgICAgY2FzZSBPRF9TQ0xLOg0KICAgICAg
ICAgICAgICAgIHNpbmdsZV9kcG1fdGFibGUgPSAmKGRwbV90YWJsZS0+Z2Z4X3RhYmxlKTsgQEAg
LTE1MDksNyArMTUyMyw3IEBAIHZlZ2EyMF9nZXRfcHJvZmlsaW5nX2Nsa19tYXNrKHN0cnVjdCBz
bXVfY29udGV4dCAqc211LA0KICAgICAgICBzdHJ1Y3QgdmVnYTIwX3NpbmdsZV9kcG1fdGFibGUg
Km1lbV9kcG1fdGFibGU7DQogICAgICAgIHN0cnVjdCB2ZWdhMjBfc2luZ2xlX2RwbV90YWJsZSAq
c29jX2RwbV90YWJsZTsNCg0KLSAgICAgICBpZiAoIXNtdS0+c211X2RwbS5kcG1fY29udGV4dCkN
CisgICAgICAgaWYgKCFzbXUtPnBtX2VuYWJsZWQgfHwgIXNtdS0+c211X2RwbS5kcG1fY29udGV4
dCkNCiAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsNCg0KICAgICAgICBnZnhfZHBtX3Rh
YmxlID0gJmRwbV90YWJsZS0+Z2Z4X3RhYmxlOyBAQCAtMTU3OSw3ICsxNTkzLDcgQEAgc3RhdGlj
IGludCB2ZWdhMjBfcHJlX2Rpc3BsYXlfY29uZmlnX2NoYW5nZWQoc3RydWN0IHNtdV9jb250ZXh0
ICpzbXUpDQogICAgICAgIGludCByZXQgPSAwOw0KICAgICAgICBzdHJ1Y3QgdmVnYTIwX2RwbV90
YWJsZSAqZHBtX3RhYmxlID0gc211LT5zbXVfZHBtLmRwbV9jb250ZXh0Ow0KDQotICAgICAgIGlm
ICghc211LT5zbXVfZHBtLmRwbV9jb250ZXh0KQ0KKyAgICAgICBpZiAoIXNtdS0+cG1fZW5hYmxl
ZCB8fCAhc211LT5zbXVfZHBtLmRwbV9jb250ZXh0KQ0KICAgICAgICAgICAgICAgIHJldHVybiAt
RUlOVkFMOw0KDQogICAgICAgIHNtdV9zZW5kX3NtY19tc2dfd2l0aF9wYXJhbShzbXUsIFNNVV9N
U0dfTnVtT2ZEaXNwbGF5cywgMCk7IEBAIC0xNTk0LDcgKzE2MDgsNyBAQCBzdGF0aWMgaW50IHZl
Z2EyMF9kaXNwbGF5X2NvbmZpZ19jaGFuZ2VkKHN0cnVjdCBzbXVfY29udGV4dCAqc211KSAgew0K
ICAgICAgICBpbnQgcmV0ID0gMDsNCg0KLSAgICAgICBpZiAoIXNtdS0+ZnVuY3MpDQorICAgICAg
IGlmICghc211LT5wbV9lbmFibGVkIHx8ICFzbXUtPmZ1bmNzKQ0KICAgICAgICAgICAgICAgIHJl
dHVybiAtRUlOVkFMOw0KDQogICAgICAgIGlmICghc211LT5zbXVfZHBtLmRwbV9jb250ZXh0IHx8
IEBAIC0xNjMyLDYgKzE2NDYsOCBAQCBzdGF0aWMgaW50IHZlZ2EyMF9hcHBseV9jbG9ja3NfYWRq
dXN0X3J1bGVzKHN0cnVjdCBzbXVfY29udGV4dCAqc211KQ0KICAgICAgICBib29sIGRpc2FibGVf
bWNsa19zd2l0Y2hpbmc7DQogICAgICAgIHVpbnQzMl90IGksIGxhdGVuY3k7DQoNCisgICAgICAg
aWYgKCFzbXUtPnBtX2VuYWJsZWQpDQorICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7DQog
ICAgICAgIGRpc2FibGVfbWNsa19zd2l0Y2hpbmcgPSAoKDEgPCBzbXUtPmRpc3BsYXlfY29uZmln
LT5udW1fZGlzcGxheSkgJiYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhc211
LT5kaXNwbGF5X2NvbmZpZy0+bXVsdGlfbW9uaXRvcl9pbl9zeW5jKSB8fCB2YmxhbmtfdG9vX3No
b3J0Ow0KICAgICAgICBsYXRlbmN5ID0gc211LT5kaXNwbGF5X2NvbmZpZy0+ZGNlX3RvbGVyYWJs
ZV9tY2xrX2luX2FjdGl2ZV9sYXRlbmN5Ow0KQEAgLTE3NzksNiArMTc5NSw4IEBAIHZlZ2EyMF9u
b3RpZnlfc21jX2Rpc3BhbHlfY29uZmlnKHN0cnVjdCBzbXVfY29udGV4dCAqc211KQ0KICAgICAg
ICBzdHJ1Y3QgcHBfZGlzcGxheV9jbG9ja19yZXF1ZXN0IGNsb2NrX3JlcTsNCiAgICAgICAgaW50
IHJldCA9IDA7DQoNCisgICAgICAgaWYgKCFzbXUtPnBtX2VuYWJsZWQpDQorICAgICAgICAgICAg
ICAgcmV0dXJuIC1FSU5WQUw7DQogICAgICAgIG1pbl9jbG9ja3MuZGNlZl9jbG9jayA9IHNtdS0+
ZGlzcGxheV9jb25maWctPm1pbl9kY2VmX3NldF9jbGs7DQogICAgICAgIG1pbl9jbG9ja3MuZGNl
Zl9jbG9ja19pbl9zciA9IHNtdS0+ZGlzcGxheV9jb25maWctPm1pbl9kY2VmX2RlZXBfc2xlZXBf
c2V0X2NsazsNCiAgICAgICAgbWluX2Nsb2Nrcy5tZW1vcnlfY2xvY2sgPSBzbXUtPmRpc3BsYXlf
Y29uZmlnLT5taW5fbWVtX3NldF9jbG9jazsNCkBAIC0xODY3LDYgKzE4ODUsOCBAQCBzdGF0aWMg
aW50IHZlZ2EyMF9mb3JjZV9kcG1fbGltaXRfdmFsdWUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUs
IGJvb2wgaGlnaGVzdCkNCiAgICAgICAgc3RydWN0IHZlZ2EyMF9kcG1fdGFibGUgKmRwbV90YWJs
ZSA9DQogICAgICAgICAgICAgICAgKHN0cnVjdCB2ZWdhMjBfZHBtX3RhYmxlICopc211LT5zbXVf
ZHBtLmRwbV9jb250ZXh0Ow0KDQorICAgICAgIGlmICghc211LT5wbV9lbmFibGVkKQ0KKyAgICAg
ICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KICAgICAgICBpZiAoaGlnaGVzdCkNCiAgICAgICAg
ICAgICAgICBzb2Z0X2xldmVsID0gdmVnYTIwX2ZpbmRfaGlnaGVzdF9kcG1fbGV2ZWwoJihkcG1f
dGFibGUtPmdmeF90YWJsZSkpOw0KICAgICAgICBlbHNlDQpAQCAtMTkxOCw2ICsxOTM4LDggQEAg
c3RhdGljIGludCB2ZWdhMjBfdW5mb3JjZV9kcG1fbGV2ZWxzKHN0cnVjdCBzbXVfY29udGV4dCAq
c211KQ0KICAgICAgICBzdHJ1Y3QgdmVnYTIwX2RwbV90YWJsZSAqZHBtX3RhYmxlID0NCiAgICAg
ICAgICAgICAgICAoc3RydWN0IHZlZ2EyMF9kcG1fdGFibGUgKilzbXUtPnNtdV9kcG0uZHBtX2Nv
bnRleHQ7DQoNCisgICAgICAgaWYgKCFzbXUtPnBtX2VuYWJsZWQpDQorICAgICAgICAgICAgICAg
cmV0dXJuIC1FSU5WQUw7DQogICAgICAgIHNvZnRfbWluX2xldmVsID0gdmVnYTIwX2ZpbmRfbG93
ZXN0X2RwbV9sZXZlbCgmKGRwbV90YWJsZS0+Z2Z4X3RhYmxlKSk7DQogICAgICAgIHNvZnRfbWF4
X2xldmVsID0gdmVnYTIwX2ZpbmRfaGlnaGVzdF9kcG1fbGV2ZWwoJihkcG1fdGFibGUtPmdmeF90
YWJsZSkpOw0KICAgICAgICBkcG1fdGFibGUtPmdmeF90YWJsZS5kcG1fc3RhdGUuc29mdF9taW5f
bGV2ZWwgPSBAQCAtMTk1Nyw5ICsxOTc5LDkgQEAgc3RhdGljIGludCB2ZWdhMjBfdW5mb3JjZV9k
cG1fbGV2ZWxzKHN0cnVjdCBzbXVfY29udGV4dCAqc211KSAgc3RhdGljIGVudW0gYW1kX2RwbV9m
b3JjZWRfbGV2ZWwgdmVnYTIwX2dldF9wZXJmb3JtYW5jZV9sZXZlbChzdHJ1Y3Qgc211X2NvbnRl
eHQgKnNtdSkgIHsNCiAgICAgICAgc3RydWN0IHNtdV9kcG1fY29udGV4dCAqc211X2RwbV9jdHgg
PSAmKHNtdS0+c211X2RwbSk7DQotICAgICAgIGlmICghc211X2RwbV9jdHgtPmRwbV9jb250ZXh0
KQ0KLSAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KDQorICAgICAgIGlmICghc211LT5w
bV9lbmFibGVkIHx8ICFzbXVfZHBtX2N0eC0+ZHBtX2NvbnRleHQpDQorICAgICAgICAgICAgICAg
cmV0dXJuIC1FSU5WQUw7DQogICAgICAgIGlmIChzbXVfZHBtX2N0eC0+ZHBtX2xldmVsICE9IHNt
dV9kcG1fY3R4LT5zYXZlZF9kcG1fbGV2ZWwpIHsNCiAgICAgICAgICAgICAgICBtdXRleF9sb2Nr
KCYoc211LT5tdXRleCkpOw0KICAgICAgICAgICAgICAgIHNtdV9kcG1fY3R4LT5zYXZlZF9kcG1f
bGV2ZWwgPSBzbXVfZHBtX2N0eC0+ZHBtX2xldmVsOyBAQCAtMTk3NSw3ICsxOTk3LDcgQEAgdmVn
YTIwX2ZvcmNlX3BlcmZvcm1hbmNlX2xldmVsKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBlbnVt
IGFtZF9kcG1fZm9yY2VkX2xldmUNCiAgICAgICAgaW50IGk7DQogICAgICAgIHN0cnVjdCBzbXVf
ZHBtX2NvbnRleHQgKnNtdV9kcG1fY3R4ID0gJihzbXUtPnNtdV9kcG0pOw0KDQotICAgICAgIGlm
ICghc211X2RwbV9jdHgtPmRwbV9jb250ZXh0KQ0KKyAgICAgICBpZiAoIXNtdS0+cG1fZW5hYmxl
ZCB8fCAhc211X2RwbV9jdHgtPmRwbV9jb250ZXh0KQ0KICAgICAgICAgICAgICAgIHJldHVybiAt
RUlOVkFMOw0KDQogICAgICAgIGZvciAoaSA9IDA7IGkgPCBzbXUtPmFkZXYtPm51bV9pcF9ibG9j
a3M7IGkrKykgeyBAQCAtMjAwNCw2ICsyMDI2LDggQEAgc3RhdGljIGludCB2ZWdhMjBfdXBkYXRl
X3NwZWNpZmllZF9vZDhfdmFsdWUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsDQogICAgICAgIHN0
cnVjdCB2ZWdhMjBfb2Q4X3NldHRpbmdzICpvZDhfc2V0dGluZ3MgPQ0KICAgICAgICAgICAgICAg
IChzdHJ1Y3QgdmVnYTIwX29kOF9zZXR0aW5ncyAqKXRhYmxlX2NvbnRleHQtPm9kOF9zZXR0aW5n
czsNCg0KKyAgICAgICBpZiAoIXNtdS0+cG1fZW5hYmxlZCkNCisgICAgICAgICAgICAgICByZXR1
cm4gLUVJTlZBTDsNCiAgICAgICAgc3dpdGNoIChpbmRleCkgew0KICAgICAgICBjYXNlIE9EOF9T
RVRUSU5HX0dGWENMS19GTUlOOg0KICAgICAgICAgICAgICAgIG9kX3RhYmxlLT5HZnhjbGtGbWlu
ID0gKHVpbnQxNl90KXZhbHVlOyBAQCAtMjA4NSw2ICsyMTA5LDggQEAgc3RhdGljIGludCB2ZWdh
MjBfc2V0X29kX3BlcmNlbnRhZ2Uoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsDQogICAgICAgIGlu
dCBmZWF0dXJlX2VuYWJsZWQ7DQogICAgICAgIFBQQ0xLX2UgY2xrX2lkOw0KDQorICAgICAgIGlm
ICghc211LT5wbV9lbmFibGVkKQ0KKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KICAg
ICAgICBtdXRleF9sb2NrKCYoc211LT5tdXRleCkpOw0KDQogICAgICAgIGRwbV90YWJsZSA9IHNt
dV9kcG0tPmRwbV9jb250ZXh0OyBAQCAtMjE2Myw2ICsyMTg5LDggQEAgc3RhdGljIGludCB2ZWdh
MjBfb2RuX2VkaXRfZHBtX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LA0KDQogICAgICAg
IGRwbV90YWJsZSA9IHNtdV9kcG0tPmRwbV9jb250ZXh0Ow0KDQorICAgICAgIGlmICghc211LT5w
bV9lbmFibGVkKQ0KKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KICAgICAgICBpZiAo
IWlucHV0KSB7DQogICAgICAgICAgICAgICAgcHJfd2FybigiTlVMTCB1c2VyIGlucHV0IGZvciBj
bG9jayBhbmQgdm9sdGFnZVxuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7DQot
LQ0KMi43LjQNCg0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18NCmFtZC1nZnggbWFpbGluZyBsaXN0DQphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0K
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4DQpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1h
aWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
