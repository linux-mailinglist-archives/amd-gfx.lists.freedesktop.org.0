Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 71481A1441
	for <lists+amd-gfx@lfdr.de>; Thu, 29 Aug 2019 11:00:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E29F58926F;
	Thu, 29 Aug 2019 09:00:10 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM05-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr720072.outbound.protection.outlook.com [40.107.72.72])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6537189270
 for <amd-gfx@lists.freedesktop.org>; Thu, 29 Aug 2019 09:00:09 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=nLhQfVFIQ2w+QVXGUOwE6mG3uDp4zX/4PTGftuW70F3+vSGGFSs/jPbsrW4jmw8GqklG3SoMgqgWNuIE1haYODGPkYlRmhOKEhTE+UNI7DU0ZGiD+CEXRytclM2ZOrhKCG/GoUtK3k2i5QkaiENNQ50DopwL9Ppkt/bxRhO0xPZjqN096xbtnhhD751b9ENVcSZL/ognpdIhNhGszyOKisRF8OA1nHBKhC1XVGddIP4GJnzVZu0qDqWEae33p2b17p2+batbjBbcqAyOTCgGBzZsvWru0+gkrU1/wjy//hI50aIOW6P6fQ4pdmOHU18q4IIcA8Z9TAxnics6SaPGmA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=LABu6XJZw598Jb7hFQVvE+Mz2QIQEX1pkU9q00h/FNI=;
 b=hRLxjwyhsovXyi21YgNN5yUTDcwyPKhQ3EJj6RKYByW13LwB1cKLy/I7ZSKyEUYl43SK3QTWyC+oX+WswXiny33Jk7rwBAtqcIqNdODzt5FZOhoXlyFz21ViwuVktZBq15cBWSvIHifwiewprfVXAEDI1R1MI8rhihDTajuGQeYUJBRgVG5MKBcJz/l8KBLXLw6TkrxUGwrEOxJxGiIRUT1fDIi/dLAnqrRPnvdg33yVkwiX7F7+LJAYh3ndhjh92sNhYpQ3LW4vRZih2pkI4hgLGQmojT9o1ml3PmmP+M1jzq5sceihQXaAbPlAviMi7rlK7QLp5cc0voH6LTDPgQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from DM5PR12CA0016.namprd12.prod.outlook.com (2603:10b6:4:1::26) by
 BN6PR12MB1267.namprd12.prod.outlook.com (2603:10b6:404:17::13) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2199.20; Thu, 29 Aug 2019 09:00:07 +0000
Received: from CO1NAM03FT017.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e48::207) by DM5PR12CA0016.outlook.office365.com
 (2603:10b6:4:1::26) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2199.15 via Frontend
 Transport; Thu, 29 Aug 2019 09:00:07 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV01.amd.com (165.204.84.17) by
 CO1NAM03FT017.mail.protection.outlook.com (10.152.80.172) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2220.16 via Frontend Transport; Thu, 29 Aug 2019 09:00:06 +0000
Received: from guchchen-System-Product-Name.amd.com (10.34.1.3) by
 SATLEXCHOV01.amd.com (10.181.40.71) with Microsoft SMTP Server (TLS) id
 14.3.389.1; Thu, 29 Aug 2019 03:59:59 -0500
From: Guchun Chen <guchun.chen@amd.com>
To: <amd-gfx@lists.freedesktop.org>, <Hawking.Zhang@amd.com>,
 <Dennis.Li@amd.com>, <christian.koenig@amd.com>, <alexander.deucher@amd.com>, 
 <Tao.Zhou1@amd.com>
Subject: [PATCH libdrm 3/4] amdgpu: add ras inject unit test
Date: Thu, 29 Aug 2019 16:59:16 +0800
Message-ID: <20190829085917.20439-4-guchun.chen@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190829085917.20439-1-guchun.chen@amd.com>
References: <20190829085917.20439-1-guchun.chen@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(39860400002)(346002)(136003)(396003)(2980300002)(428003)(189003)(199004)(36756003)(4326008)(305945005)(426003)(53416004)(446003)(11346002)(2616005)(476003)(126002)(7696005)(81166006)(486006)(8676002)(50226002)(26005)(81156014)(51416003)(186003)(336012)(76176011)(44832011)(8936002)(53936002)(2201001)(1076003)(478600001)(70206006)(5660300002)(356004)(6666004)(86362001)(47776003)(110136005)(50466002)(48376002)(54906003)(6636002)(16586007)(316002)(70586007)(2906002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BN6PR12MB1267; H:SATLEXCHOV01.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 337a4e93-ba4a-428c-6ab5-08d72c5f49c6
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(4618075)(2017052603328);
 SRVR:BN6PR12MB1267; 
X-MS-TrafficTypeDiagnostic: BN6PR12MB1267:
X-Microsoft-Antispam-PRVS: <BN6PR12MB12673876703F578AF51B0591F1A20@BN6PR12MB1267.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:3;
X-Forefront-PRVS: 0144B30E41
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: KVWRhhobNaMUUB5hEejyB0Ku6TRxdmMhywPX2eMBny5XrbVwxxDcz7FHFQwAWx5VqwHX8bwfD1qoO8P9rfeibZnwPoFasMQtRy6edKTvwpPK3n65lcat2JTgM9xNN5VG0RkHaIZA3HACJ7sIzBel1uvRzgMDaqlVnjSrb8kNiaQtWJWmDXQWw9q3Ffa3CwJFVwX86J9Q1zAw8fSKC2TFa6ni2N2nbHc4X4BELFLltCUDbyfwcha5i6kDDoqOpEZm89cGSrCzAVlPXGviOLGhX/GZSeEC/1olEYRR4XCpp7CZAVpicAnGkRvTDYbILhXGVUA5wozUZs0mL9vArpFCrbemSouI+9qAH3Lb3X/K+XqIi9MwTPhFaViii3PzsotIfIM80mgS8JhONoe8E7UFaJdYDsIfOtKbkMomIQyQ4Lw=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 29 Aug 2019 09:00:06.5578 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 337a4e93-ba4a-428c-6ab5-08d72c5f49c6
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV01.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN6PR12MB1267
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=LABu6XJZw598Jb7hFQVvE+Mz2QIQEX1pkU9q00h/FNI=;
 b=POfEf5WlreKYccE3lUzLWqXkSpLiACYDwHL/Cdckqip7J+mEehbHhEdgL5AJVlaiWza3n30BmHbLJ0XTw23HI1iiff5sM6h0suZZVd72hTjnKf+rnjAy3orpUHp3bIjzesH9EC5qZvokqEFstcDQ+PL1eQCcNL12fjKgZ1xlPZk=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Candice.Li@amd.com, Guchun Chen <guchun.chen@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

Qm90aCBVTUMgYW5kIEdGWCByYXMgc2luZ2xlX2NvcnJlY3RhYmxlCmluamVjdCB0ZXN0cyBhcmUg
YWRkZWQuCgpDaGFuZ2UtSWQ6IEk0NmMyOWI4NzYxMjk0MTIyZmM5YWNiNjIwNDQxYTdhYWNlNjUw
OWU0ClNpZ25lZC1vZmYtYnk6IEd1Y2h1biBDaGVuIDxndWNodW4uY2hlbkBhbWQuY29tPgotLS0K
IHRlc3RzL2FtZGdwdS9yYXNfdGVzdHMuYyB8IDE0NCArKysrKysrKysrKysrKysrKysrKysrKysr
KysrKy0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAxMDcgaW5zZXJ0aW9ucygrKSwgMzcgZGVs
ZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvdGVzdHMvYW1kZ3B1L3Jhc190ZXN0cy5jIGIvdGVzdHMv
YW1kZ3B1L3Jhc190ZXN0cy5jCmluZGV4IDg2YjQxMzdiLi5kNTEwYjY0NCAxMDA2NDQKLS0tIGEv
dGVzdHMvYW1kZ3B1L3Jhc190ZXN0cy5jCisrKyBiL3Rlc3RzL2FtZGdwdS9yYXNfdGVzdHMuYwpA
QCAtMzAsNyArMzAsOCBAQAogI2luY2x1ZGUgPGZjbnRsLmg+CiAjaW5jbHVkZSA8c3RkaW8uaD4K
ICNpbmNsdWRlICJ4Zjg2ZHJtLmgiCi0jaW5jbHVkZSAic3RkbGliLmgiCisKKyNkZWZpbmUgQVJS
QVlfU0laRShhKSAoc2l6ZW9mKGEpIC8gc2l6ZW9mKChhKVswXSkpCiAKIGNvbnN0IGNoYXIgKnJh
c19ibG9ja19zdHJpbmdbXSA9IHsKIAkidW1jIiwKQEAgLTMxMSwxMSArMzEyLDEwIEBAIGVudW0g
YW1kZ3B1X3Jhc19lcnJvcl90eXBlIHsKIAlBTURHUFVfUkFTX0VSUk9SX19QT0lTT04JCQkJPSA4
LAogfTsKIAotc3RydWN0IHJhc190ZXN0X2l0ZW0geworc3RydWN0IHJhc19pbmplY3RfdGVzdF9j
b25maWcgewogCWNoYXIgbmFtZVs2NF07Ci0JaW50IGJsb2NrOworCWNoYXIgYmxvY2tbMzJdOwog
CWludCBzdWJfYmxvY2s7Ci0JY2hhciBlcnJvcl90eXBlX3N0cls2NF07CiAJZW51bSBhbWRncHVf
cmFzX2Vycm9yX3R5cGUgdHlwZTsKIAl1aW50NjRfdCBhZGRyZXNzOwogCXVpbnQ2NF90IHZhbHVl
OwpAQCAtMzkwLDEyICszOTAsNzggQEAgc3RydWN0IHJhc19ESURfdGVzdF9tYXNrewogCURFRkFV
TFRfUkFTX0JMT0NLX01BU0tfQkFTSUNcCiB9CiAKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgcmFzX2lu
amVjdF90ZXN0X2NvbmZpZyB1bWNfcmFzX2luamVjdF90ZXN0W10gPSB7CisJeyJyYXNfdW1jLjEu
MCIsICJ1bWMiLCAwLCBBTURHUFVfUkFTX0VSUk9SX19TSU5HTEVfQ09SUkVDVEFCTEUsIDAsIDB9
LAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCByYXNfaW5qZWN0X3Rlc3RfY29uZmlnIGdmeF9y
YXNfaW5qZWN0X3Rlc3RbXSA9IHsKKwl7InJhc19nZnguMi4wIiwgImdmeCIsIEFNREdQVV9SQVNf
QkxPQ0tfX0dGWF9DUENfVUNPREUsCisJCUFNREdQVV9SQVNfRVJST1JfX1NJTkdMRV9DT1JSRUNU
QUJMRSwgMCwgMH0sCisJeyJyYXNfZ2Z4LjIuMSIsICJnZngiLCBBTURHUFVfUkFTX0JMT0NLX19H
RlhfQ1BGX1RBRywKKwkJQU1ER1BVX1JBU19FUlJPUl9fU0lOR0xFX0NPUlJFQ1RBQkxFLCAwLCAw
fSwKKwl7InJhc19nZnguMi4yIiwgImdmeCIsIEFNREdQVV9SQVNfQkxPQ0tfX0dGWF9DUEdfVEFH
LAorCQlBTURHUFVfUkFTX0VSUk9SX19TSU5HTEVfQ09SUkVDVEFCTEUsIDAsIDB9LAorCXsicmFz
X2dmeC4yLjMiLCAiZ2Z4IiwgQU1ER1BVX1JBU19CTE9DS19fR0ZYX1NRX0xEU19ELAorCQlBTURH
UFVfUkFTX0VSUk9SX19TSU5HTEVfQ09SUkVDVEFCTEUsIDAsIDB9LAorCXsicmFzX2dmeC4yLjQi
LCAiZ2Z4IiwgQU1ER1BVX1JBU19CTE9DS19fR0ZYX1NRQ19EQVRBX0NVMV9VVENMMV9MRklGTywK
KwkJQU1ER1BVX1JBU19FUlJPUl9fU0lOR0xFX0NPUlJFQ1RBQkxFLCAwLCAwfSwKKwl7InJhc19n
ZnguMi41IiwgImdmeCIsIEFNREdQVV9SQVNfQkxPQ0tfX0dGWF9TUUNfSU5TVF9CQU5LQV9UQUdf
UkFNLAorCQlBTURHUFVfUkFTX0VSUk9SX19TSU5HTEVfQ09SUkVDVEFCTEUsIDAsIDB9LAorCXsi
cmFzX2dmeC4yLjYiLCAiZ2Z4IiwgQU1ER1BVX1JBU19CTE9DS19fR0ZYX1NRQ19JTlNUX0JBTktC
X1RBR19SQU0sCisJCUFNREdQVV9SQVNfRVJST1JfX1NJTkdMRV9DT1JSRUNUQUJMRSwgMCwgMH0s
CisJeyJyYXNfZ2Z4LjIuNyIsICJnZngiLCBBTURHUFVfUkFTX0JMT0NLX19HRlhfVEFfRlNfREZJ
Rk8sCisJCUFNREdQVV9SQVNfRVJST1JfX1NJTkdMRV9DT1JSRUNUQUJMRSwgMCwgMH0sCisJeyJy
YXNfZ2Z4LjIuOCIsICJnZngiLCBBTURHUFVfUkFTX0JMT0NLX19HRlhfVENDX0NBQ0hFX0RBVEEs
CisJCUFNREdQVV9SQVNfRVJST1JfX1NJTkdMRV9DT1JSRUNUQUJMRSwgMCwgMH0sCisJeyJyYXNf
Z2Z4LjIuOSIsICJnZngiLCBBTURHUFVfUkFTX0JMT0NLX19HRlhfVENDX0NBQ0hFX0RBVEFfQkFO
S18wXzEsCisJCUFNREdQVV9SQVNfRVJST1JfX1NJTkdMRV9DT1JSRUNUQUJMRSwgMCwgMH0sCisJ
eyJyYXNfZ2Z4LjIuMTAiLCAiZ2Z4IiwgQU1ER1BVX1JBU19CTE9DS19fR0ZYX1RDQ19DQUNIRV9E
QVRBX0JBTktfMV8wLAorCQlBTURHUFVfUkFTX0VSUk9SX19TSU5HTEVfQ09SUkVDVEFCTEUsIDAs
IDB9LAorCXsicmFzX2dmeC4yLjExIiwgImdmeCIsIEFNREdQVV9SQVNfQkxPQ0tfX0dGWF9UQ0Nf
Q0FDSEVfREFUQV9CQU5LXzFfMSwKKwkJQU1ER1BVX1JBU19FUlJPUl9fU0lOR0xFX0NPUlJFQ1RB
QkxFLCAwLCAwfSwKKwl7InJhc19nZnguMi4xMiIsICJnZngiLCBBTURHUFVfUkFTX0JMT0NLX19H
RlhfVENQX0NBQ0hFX1JBTSwKKwkJQU1ER1BVX1JBU19FUlJPUl9fU0lOR0xFX0NPUlJFQ1RBQkxF
LCAwLCAwfSwKKwl7InJhc19nZnguMi4xMyIsICJnZngiLCBBTURHUFVfUkFTX0JMT0NLX19HRlhf
VERfU1NfRklGT19MTywKKwkJQU1ER1BVX1JBU19FUlJPUl9fU0lOR0xFX0NPUlJFQ1RBQkxFLCAw
LCAwfSwKKwl7InJhc19nZnguMi4xNCIsICJnZngiLCBBTURHUFVfUkFTX0JMT0NLX19HRlhfRUFf
RFJBTVJEX0NNRE1FTSwKKwkJQU1ER1BVX1JBU19FUlJPUl9fU0lOR0xFX0NPUlJFQ1RBQkxFLCAw
LCAwfSwKK307CisKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcmFzX0RJRF90ZXN0X21hc2sgcmFzX0RJ
RF9hcnJheVtdID0gewogCXsweDY2YTEsIDB4MDAsIFJBU19CTE9DS19NQVNLX0FMTH0sCiAJezB4
NjZhMSwgMHgwMSwgUkFTX0JMT0NLX01BU0tfQUxMfSwKIAl7MHg2NmExLCAweDA0LCBSQVNfQkxP
Q0tfTUFTS19BTEx9LAogfTsKIAorc3RhdGljIHVpbnQzMl90IGFtZGdwdV9yYXNfZmluZF9ibG9j
a19pZF9ieV9uYW1lKGNvbnN0IGNoYXIgKm5hbWUpCit7CisJaW50IGk7CisKKwlmb3IgKGkgPSAw
OyBpIDwgQVJSQVlfU0laRShyYXNfYmxvY2tfc3RyaW5nKTsgaSsrKSB7CisJCWlmIChzdHJjbXAo
bmFtZSwgcmFzX2Jsb2NrX3N0cmluZ1tpXSkgPT0gMCkKKwkJCXJldHVybiBpOworCX0KKworCXJl
dHVybiBBUlJBWV9TSVpFKHJhc19ibG9ja19zdHJpbmcpOworfQorCitzdGF0aWMgY2hhciAqYW1k
Z3B1X3Jhc19nZXRfZXJyb3JfdHlwZV9pZChlbnVtIGFtZGdwdV9yYXNfZXJyb3JfdHlwZSB0eXBl
KQoreworCXN3aXRjaCAodHlwZSkgeworCWNhc2UgQU1ER1BVX1JBU19FUlJPUl9fUEFSSVRZOgor
CQlyZXR1cm4gInBhcml0eSI7CisJY2FzZSBBTURHUFVfUkFTX0VSUk9SX19TSU5HTEVfQ09SUkVD
VEFCTEU6CisJCXJldHVybiAic2luZ2xlX2NvcnJlY3RhYmxlIjsKKwljYXNlIEFNREdQVV9SQVNf
RVJST1JfX01VTFRJX1VOQ09SUkVDVEFCTEU6CisJCXJldHVybiAibXVsdGlfdW5jb3JyZWN0YWJs
ZSI7CisJY2FzZSBBTURHUFVfUkFTX0VSUk9SX19QT0lTT046CisJCXJldHVybiAicG9pc29uIjsK
KwljYXNlIEFNREdQVV9SQVNfRVJST1JfX05PTkU6CisJZGVmYXVsdDoKKwkJcmV0dXJuIE5VTEw7
CisJfQorfQorCiBzdGF0aWMgc3RydWN0IHJhc190ZXN0X21hc2sgYW1kZ3B1X3Jhc19nZXRfdGVz
dF9tYXNrKGRybURldmljZVB0ciBkZXZpY2UpCiB7CiAJaW50IGk7CkBAIC03NzUsNDMgKzg0MSwz
NiBAQCBzdGF0aWMgdm9pZCBhbWRncHVfcmFzX2VuYWJsZV90ZXN0KHZvaWQpCiAJfQogfQogCi1z
dGF0aWMgaW50IGFtZGdwdV9yYXNfZ2V0X3Rlc3RfaXRlbXMoc3RydWN0IHJhc190ZXN0X2l0ZW0g
KipwaXRlbXMsIGludCAqc2l6ZSkKK3N0YXRpYyB2b2lkIF9fYW1kZ3B1X3Jhc19pcF9pbmplY3Rf
dGVzdChjb25zdCBzdHJ1Y3QgcmFzX2luamVjdF90ZXN0X2NvbmZpZyAqaXBfdGVzdCwKKwkJCQkJ
dWludDMyX3Qgc2l6ZSkKIHsKLQkqcGl0ZW1zID0gTlVMTDsKLQkqc2l6ZSA9IDA7Ci0KLQlyZXR1
cm4gMDsKLX0KLQotc3RhdGljIHZvaWQgX19hbWRncHVfcmFzX2luamVjdF90ZXN0KHZvaWQpCi17
Ci0Jc3RydWN0IHJhc190ZXN0X2l0ZW0gKml0ZW1zID0gTlVMTDsKLQlpbnQgaSwgc2l6ZTsKLQlp
bnQgcmV0OworCWludCBpLCByZXQ7CiAJdW5zaWduZWQgbG9uZyBvbGRfdWUsIG9sZF9jZTsKIAl1
bnNpZ25lZCBsb25nIHVlLCBjZTsKKwl1aW50MzJfdCBibG9jazsKIAlpbnQgdGltZW91dDsKIAli
b29sIHBhc3M7CiAKLQlyZXQgPSBhbWRncHVfcmFzX2dldF90ZXN0X2l0ZW1zKCZpdGVtcywgJnNp
emUpOwotCUNVX0FTU0VSVF9FUVVBTChyZXQsIDApOwotCWlmIChyZXQpCi0JCWdvdG8gbWVtX2Zy
ZWU7Ci0KLQlwcmludGYoIi4uLlxuIik7CiAJZm9yIChpID0gMDsgaSA8IHNpemU7IGkrKykgewog
CQl0aW1lb3V0ID0gMzsKIAkJcGFzcyA9IGZhbHNlOwogCi0JCXJldCA9IGFtZGdwdV9yYXNfcXVl
cnlfZXJyX2NvdW50KGl0ZW1zW2ldLmJsb2NrLCAmb2xkX3VlLAotCQkJCQkJICZvbGRfY2UpOwor
CQlibG9jayA9IGFtZGdwdV9yYXNfZmluZF9ibG9ja19pZF9ieV9uYW1lKGlwX3Rlc3RbaV0uYmxv
Y2spOworCisJCS8qIEVuc3VyZSBvbmUgdmFsaWQgaXAgYmxvY2sgKi8KKwkJaWYgKGJsb2NrID09
IEFSUkFZX1NJWkUocmFzX2Jsb2NrX3N0cmluZykpCisJCQlicmVhazsKKworCQlyZXQgPSBhbWRn
cHVfcmFzX3F1ZXJ5X2Vycl9jb3VudChibG9jaywgJm9sZF91ZSwgJm9sZF9jZSk7CiAJCUNVX0FT
U0VSVF9FUVVBTChyZXQsIDApOwogCQlpZiAocmV0KQogCQkJYnJlYWs7CiAKLQkJcmV0ID0gYW1k
Z3B1X3Jhc19pbmplY3QoaXRlbXNbaV0uYmxvY2ssIGl0ZW1zW2ldLnN1Yl9ibG9jaywKLQkJCQkJ
aXRlbXNbaV0udHlwZSwgaXRlbXNbaV0uYWRkcmVzcywKLQkJCQkJaXRlbXNbaV0udmFsdWUpOwor
CQlyZXQgPSBhbWRncHVfcmFzX2luamVjdChibG9jaywKKwkJCQkJaXBfdGVzdFtpXS5zdWJfYmxv
Y2ssCisJCQkJCWlwX3Rlc3RbaV0udHlwZSwKKwkJCQkJaXBfdGVzdFtpXS5hZGRyZXNzLAorCQkJ
CQlpcF90ZXN0W2ldLnZhbHVlKTsKIAkJQ1VfQVNTRVJUX0VRVUFMKHJldCwgMCk7CiAJCWlmIChy
ZXQpCiAJCQlicmVhazsKQEAgLTgxOSw4ICs4NzgsNyBAQCBzdGF0aWMgdm9pZCBfX2FtZGdwdV9y
YXNfaW5qZWN0X3Rlc3Qodm9pZCkKIAkJd2hpbGUgKHRpbWVvdXQgPiAwKSB7CiAJCQlzbGVlcCg1
KTsKIAotCQkJcmV0ID0gYW1kZ3B1X3Jhc19xdWVyeV9lcnJfY291bnQoaXRlbXNbaV0uYmxvY2ss
ICZ1ZSwKLQkJCQkJCQkgJmNlKTsKKwkJCXJldCA9IGFtZGdwdV9yYXNfcXVlcnlfZXJyX2NvdW50
KGJsb2NrLCAmdWUsICZjZSk7CiAJCQlDVV9BU1NFUlRfRVFVQUwocmV0LCAwKTsKIAkJCWlmIChy
ZXQpCiAJCQkJYnJlYWs7CkBAIC04MzIsMTYgKzg5MCwyOCBAQCBzdGF0aWMgdm9pZCBfX2FtZGdw
dV9yYXNfaW5qZWN0X3Rlc3Qodm9pZCkKIAkJCX0KIAkJCXRpbWVvdXQgLT0gMTsKIAkJfQotCQlw
cmludGYoIlx0IFRlc3QgJXNAJXMsIGFkZHJlc3MgJWxkLCB2YWx1ZSAlbGQ6ICVzXG4iLAotCQkJ
aXRlbXNbaV0ubmFtZSwgaXRlbXNbaV0uZXJyb3JfdHlwZV9zdHIsIGl0ZW1zW2ldLmFkZHJlc3Ms
Ci0JCQlpdGVtc1tpXS52YWx1ZSwJcGFzcyA/ICJQYXNzIiA6ICJGYWlsIik7CisJCXByaW50Zigi
XHQgVGVzdCAlc0BibG9jayAlcywgc3ViYmxvY2sgJWQsIGVycm9yX3R5cGUgJXMsIGFkZHJlc3Mg
JWxkLCB2YWx1ZSAlbGQ6ICVzXG4iLAorCQkJaXBfdGVzdFtpXS5uYW1lLAorCQkJaXBfdGVzdFtp
XS5ibG9jaywKKwkJCWlwX3Rlc3RbaV0uc3ViX2Jsb2NrLAorCQkJYW1kZ3B1X3Jhc19nZXRfZXJy
b3JfdHlwZV9pZChpcF90ZXN0W2ldLnR5cGUpLAorCQkJaXBfdGVzdFtpXS5hZGRyZXNzLAorCQkJ
aXBfdGVzdFtpXS52YWx1ZSwKKwkJCXBhc3MgPyAiUGFzcyIgOiAiRmFpbCIpOwogCX0KK30KIAot
bWVtX2ZyZWU6Ci0JaWYgKGl0ZW1zKSB7Ci0JCWZyZWUoaXRlbXMpOwotCQlpdGVtcyA9IE5VTEw7
Ci0JfQorc3RhdGljIHZvaWQgX19hbWRncHVfcmFzX2luamVjdF90ZXN0KHZvaWQpCit7CisJcHJp
bnRmKCIuLi5cbiIpOworCisJLyogcnVuIFVNQyByYXMgaW5qZWN0IHRlc3QgKi8KKwlfX2FtZGdw
dV9yYXNfaXBfaW5qZWN0X3Rlc3QodW1jX3Jhc19pbmplY3RfdGVzdCwKKwkJQVJSQVlfU0laRSh1
bWNfcmFzX2luamVjdF90ZXN0KSk7CisKKwkvKiBydW4gR0ZYIHJhcyBpbmplY3QgdGVzdCAqLwor
CV9fYW1kZ3B1X3Jhc19pcF9pbmplY3RfdGVzdChnZnhfcmFzX2luamVjdF90ZXN0LAorCQlBUlJB
WV9TSVpFKGdmeF9yYXNfaW5qZWN0X3Rlc3QpKTsKIH0KIAogc3RhdGljIHZvaWQgYW1kZ3B1X3Jh
c19pbmplY3RfdGVzdCh2b2lkKQotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2FtZC1nZng=
