Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 63978105606
	for <lists+amd-gfx@lfdr.de>; Thu, 21 Nov 2019 16:53:19 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CC4636F3DF;
	Thu, 21 Nov 2019 15:53:17 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM01-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr820087.outbound.protection.outlook.com [40.107.82.87])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 75E386F3DC
 for <amd-gfx@lists.freedesktop.org>; Thu, 21 Nov 2019 15:53:15 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=A0gCY8+/FRqMPA1YSHsWHgtO9+TJfuzWXCxmutLHhNsc7b5T/l4hWJZQ6pw6he5HYYmK3AsM71QYLuAK/uagTq2bNI9mY7ddB+RbFgy5+Ank9ylLdxB+Y8nsQjK9OggnH8TKNYH6LoPQ0hiq7zoaVu61I0eagoGo3Wn4fEIdrOsSUEdQZZF4rodvwQZBBB/E9goPFzJV6UruOuSe24NZPECSlNzJG0ADFXfD+vZoMTlKvtlUDgAWaKf7xu9cox6xGQqREtjTOvcixAXnOzaZiN5u4Z12k9WoKegrorXZ3JMuySOKDrgW8lJxJwet7MQvgjL9stkuQE9ctTdLFmNISw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=jh/Hcx5Mh+5QS/cPR00bth5TGoaOEfPo5WV1BCo9Uk0=;
 b=gMFwLKGIzyZ59Pe/2stt84GmbyK8BkeUZTq5HvPBUzpLLgT552bSofB7xp4KQsgCHo/TLFsj8gM/MU+IZhuNbJS2u/9XssE54lGWitpjeAvFxnbxRvN/4qRis5gvKRatUWV1LX07S94iUITMZD71duqSCO17xtpw7103zCx0KtPc374eQor8qH/VEVPKs5P8piyGe+9FDkhlvre/31RJumdUIJ48SKui5ePc8tz1JtHNLZsXqkYTlM6tpuHkGV5I5v8sdrwagNwoYxts635HkD54TJJrlp8xQS//nXPF3Do9W9DaSvKXd0Vvrnea34vECD7RSIvpbk9jiVIHGYnO6g==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB2896.namprd12.prod.outlook.com (20.179.80.214) by
 MN2PR12MB3165.namprd12.prod.outlook.com (20.179.81.27) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2474.17; Thu, 21 Nov 2019 15:53:13 +0000
Received: from MN2PR12MB2896.namprd12.prod.outlook.com
 ([fe80::9821:4373:684f:f580]) by MN2PR12MB2896.namprd12.prod.outlook.com
 ([fe80::9821:4373:684f:f580%6]) with mapi id 15.20.2451.031; Thu, 21 Nov 2019
 15:53:13 +0000
From: "Zhu, Changfeng" <Changfeng.Zhu@amd.com>
To: "Koenig, Christian" <Christian.Koenig@amd.com>, "Xiao, Jack"
 <Jack.Xiao@amd.com>, "Zhou1, Tao" <Tao.Zhou1@amd.com>, "Huang, Ray"
 <Ray.Huang@amd.com>, "Huang, Shimmer" <Xinmei.Huang@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH 2/2] drm/amdgpu: invalidate mmhub semphore workaround in
 gmc9/gmc10
Thread-Topic: [PATCH 2/2] drm/amdgpu: invalidate mmhub semphore workaround in
 gmc9/gmc10
Thread-Index: AQHVn4cdb7K5z5p590SGztZYgTWhFaeT67KAgAHbXmA=
Date: Thu, 21 Nov 2019 15:53:13 +0000
Message-ID: <MN2PR12MB28964D86D9C341FB98BC0E27FD4E0@MN2PR12MB2896.namprd12.prod.outlook.com>
References: <20191120094413.28045-1-changfeng.zhu@amd.com>
 <26de4192-ebd8-b54d-6820-09cf6cda6822@gmail.com>
In-Reply-To: <26de4192-ebd8-b54d-6820-09cf6cda6822@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [180.167.199.185]
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: 9e28fb25-bcd3-449d-c12e-08d76e9aea6c
x-ms-traffictypediagnostic: MN2PR12MB3165:|MN2PR12MB3165:
x-ms-exchange-purlcount: 1
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <MN2PR12MB3165F202DDE9010139D38421FD4E0@MN2PR12MB3165.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:8882;
x-forefront-prvs: 0228DDDDD7
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(366004)(396003)(376002)(346002)(136003)(39860400002)(13464003)(189003)(199004)(7696005)(99286004)(7736002)(33656002)(305945005)(2906002)(186003)(3846002)(71200400001)(74316002)(9686003)(6436002)(229853002)(6306002)(102836004)(53546011)(6506007)(6246003)(52536014)(110136005)(55016002)(71190400001)(66574012)(26005)(66066001)(14454004)(2501003)(6116002)(76176011)(966005)(478600001)(8936002)(5660300002)(25786009)(81166006)(76116006)(66946007)(316002)(8676002)(14444005)(81156014)(446003)(66476007)(64756008)(66446008)(256004)(86362001)(66556008)(11346002)(921003)(1121003);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3165;
 H:MN2PR12MB2896.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: iDc4lrvV83ZACWt7pWiyWG+FrttE1q5KYjOptwipHAMIqSI+DkeLGyGL47CX9JRJkJB8VHvZ/O9acOCome8uRXUcJQpmwBqKBXTNPt8SLOz4HFh3dYdo8h7QFOgmqcbP2jR8kdZudDWmM5hF7+sCqyRNlfG8fnyFHn0J951aBSN6bu85inVsU3edr09WHRytVkb/TpR5aiV4oYMaYmrBNpZX27oeschjZKwTpbADytVjx9mGU9x/jTByhNK4I9Lr1AI6BFO4O3ZvCUm7cR+1CLAyirPwjMSUhvxBNatiNPWYDKlT1B5Bp7giLGfyYW/j0bRRS0TaLP2aYqqEHgvF9wriHmeV+7SUAZ/ht+iZqZ0P+smboTqeJ/+35L22ELXwGzwXGEU/Va8GJtwdIovchc5m/YaA+ljHOuZ6Id0cZB4eO9kIWZeOcKvilNbnEDvdZX2nrbJB3njL8+l8c8u5Xe/g4sBdcGwtPIKRBFt11nw=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 9e28fb25-bcd3-449d-c12e-08d76e9aea6c
X-MS-Exchange-CrossTenant-originalarrivaltime: 21 Nov 2019 15:53:13.1970 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: Fe0l1TzIj2oKgws1ysTzSyDEHdryFvtmVH0igvr9aMXRaPrD9rLyD03RihaIrAgnd1bK58LKj8KsY9QWnRboIg==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3165
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=jh/Hcx5Mh+5QS/cPR00bth5TGoaOEfPo5WV1BCo9Uk0=;
 b=pPPWDcGbAkz1lRPB5kmCbkCyR5PhGctCQczMGbSuO/+Q42V+yyLCinBXeYF9jit8Kl74wE/Dobdga5IEtjF7+xn2IDweuXlmd6Zbn8qLW7/2jBTnYSIDkZ/Ljzy3tqF4m998tpPsmcl0bRjkwnPEt+5f1dmVkslCPovgXsfxe4A=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Changfeng.Zhu@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

SGkgQ2hyaXMsDQoNCkkgaGF2ZSByZW1vdmVkIERSTV9XQVJOX09OQ0UuDQoNCkkgdGhpbmsgd2Ug
Y2FuIHdyaXRlIG1taHViIHBhdGNoIGZpcnN0bHkuIEFuZCBJdCdzIGZvciB0aWNrZXQ6DQpodHRw
Oi8vb250cmFjay1pbnRlcm5hbC5hbWQuY29tL2Jyb3dzZS9TV0RFVi0yMDE0NTkNCg0KQWNjb3Jk
aW5nIHRvIFlhbmcsWmlsb25nJ3MgY29tbWVudHMgb24gdGhpcyBpc3N1ZSwNCkdGWEhVQiBpcyBu
b3QgYXBwbGljYWJsZSB0byB0aGUgYnVnIHRodXMgZG9lc24ndCBuZWVkIHRoZSB3L2EuDQoNCkkn
bGwgc2VlIGdmeGh1YiBoYW5nIHJvb3QgY2F1c2Ugd2l0aCBMaXNhIGluIHRoZSBmb2xsb3dpbmcg
dGltZS4NCg0KQ291bGQgeW91IHBsZWFzZSBoZWxwIHJldmlldyBteSBuZXcgcGF0Y2gocmVtb3Zl
IERSTV9XQVJOX09OQ0UpPw0KDQpCUiwNCkNoYW5nZmVuZy4NCg0KDQotLS0tLU9yaWdpbmFsIE1l
c3NhZ2UtLS0tLQ0KRnJvbTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2tvZW5pZy5sZWljaHR6dW1lcmtl
bkBnbWFpbC5jb20+IA0KU2VudDogV2VkbmVzZGF5LCBOb3ZlbWJlciAyMCwgMjAxOSA3OjI3IFBN
DQpUbzogWmh1LCBDaGFuZ2ZlbmcgPENoYW5nZmVuZy5aaHVAYW1kLmNvbT47IEtvZW5pZywgQ2hy
aXN0aWFuIDxDaHJpc3RpYW4uS29lbmlnQGFtZC5jb20+OyBYaWFvLCBKYWNrIDxKYWNrLlhpYW9A
YW1kLmNvbT47IFpob3UxLCBUYW8gPFRhby5aaG91MUBhbWQuY29tPjsgSHVhbmcsIFJheSA8UmF5
Lkh1YW5nQGFtZC5jb20+OyBIdWFuZywgU2hpbW1lciA8WGlubWVpLkh1YW5nQGFtZC5jb20+OyBh
bWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KU3ViamVjdDogUmU6IFtQQVRDSCAyLzJdIGRy
bS9hbWRncHU6IGludmFsaWRhdGUgbW1odWIgc2VtcGhvcmUgd29ya2Fyb3VuZCBpbiBnbWM5L2dt
YzEwDQoNCkFtIDIwLjExLjE5IHVtIDEwOjQ0IHNjaHJpZWIgQ2hhbmdmZW5nLlpodToNCj4gRnJv
bTogY2hhbmd6aHUgPENoYW5nZmVuZy5aaHVAYW1kLmNvbT4NCj4NCj4gSXQgbWF5IGxvc2UgZ3B1
dm0gaW52YWxpZGF0ZSBhY2tub3dsZGVnZSBzdGF0ZSBhY3Jvc3MgcG93ZXItZ2F0aW5nIG9mZiAN
Cj4gY3ljbGUuIFRvIGF2b2lkIHRoaXMgaXNzdWUgaW4gZ21jOS9nbWMxMCBpbnZhbGlkYXRpb24s
IGFkZCBzZW1hcGhvcmUgDQo+IGFjcXVpcmUgYmVmb3JlIGludmFsaWRhdGlvbiBhbmQgc2VtYXBo
b3JlIHJlbGVhc2UgYWZ0ZXIgaW52YWxpZGF0aW9uLg0KPg0KPiBBZnRlciBhZGRpbmcgc2VtYXBo
b3JlIGFjcXVpcmUgYmVmb3JlIGludmFsaWRhdGlvbiwgdGhlIHNlbWFwaG9yZSANCj4gcmVnaXN0
ZXIgYmVjb21lIHJlYWQtb25seSBpZiBhbm90aGVyIHByb2Nlc3MgdHJ5IHRvIGFjcXVpcmUgc2Vt
YXBob3JlLg0KPiBUaGVuIGl0IHdpbGwgbm90IGJlIGFibGUgdG8gcmVsZWFzZSB0aGlzIHNlbWFw
aG9yZS4gVGhlbiBpdCBtYXkgY2F1c2UgDQo+IGRlYWRsb2NrIHByb2JsZW0uIElmIHRoaXMgZGVh
ZGxvY2sgcHJvYmxlbSBoYXBwZW5zLCBpdCBuZWVkcyBhIA0KPiBzZW1hcGhvcmUgZmlybXdhcmUg
Zml4Lg0KDQpQbGVhc2UgcmVtb3ZlIHRoZSBEUk1fV0FSTl9PTkNFLCB0aGF0IGxvb2tzIGxpa2Ug
b3ZlcmtpbGwgdG8gbWUuDQoNCkFuZCBJJ20gbm90IHN1cmUgaG93IHVyZ2VudCB0aGF0IGlzc3Vl
IGhlcmUgaXMuIFdlIGNvdWxkIGFsc28gd2FpdCBhIGZldyBtb3JlIGRheXMgYW5kIHNlZSBpZiB0
aGUgaHcgZ3V5cyBmaWd1cmUgb3V0IHdoeSB0aGlzIGxvY2t1cHMgb24gdGhlIEdGWCByaW5nLg0K
DQpSZWdhcmRzLA0KQ2hyaXN0aWFuLg0KDQo+DQo+IENoYW5nZS1JZDogSTk5NDJhMmY0NTEyNjVj
MWYxMDM4Y2NmZTJmNzAwNDJjN2M4MTE4YWYNCj4gU2lnbmVkLW9mZi1ieTogY2hhbmd6aHUgPENo
YW5nZmVuZy5aaHVAYW1kLmNvbT4NCj4gLS0tDQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvZ21jX3YxMF8wLmMgfCA0OSArKysrKysrKysrKysrKysrKysrKysrKysrKw0KPiAgIGRyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgIHwgNDkgKysrKysrKysrKysrKysrKysr
KysrKysrKysNCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5oICAgICB8ICA0
ICstLQ0KPiAgIDMgZmlsZXMgY2hhbmdlZCwgMTAwIGluc2VydGlvbnMoKyksIDIgZGVsZXRpb25z
KC0pDQo+DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEw
XzAuYyANCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYw0KPiBpbmRl
eCBhZjI2MTViYTUyYWEuLjY4NWQwZDVlZjMxZSAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvZ21jX3YxMF8wLmMNCj4gQEAgLTIzNCw2ICsyMzQsMjQgQEAgc3RhdGljIHZvaWQgZ21j
X3YxMF8wX2ZsdXNoX3ZtX2h1YihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3Qg
dm1pZCwNCj4gICAJY29uc3QgdW5zaWduZWQgZW5nID0gMTc7DQo+ICAgCXVuc2lnbmVkIGludCBp
Ow0KPiAgIA0KPiArCXNwaW5fbG9jaygmYWRldi0+Z21jLmludmFsaWRhdGVfbG9jayk7DQo+ICsJ
LyoNCj4gKwkgKiBJdCBtYXkgbG9zZSBncHV2bSBpbnZhbGlkYXRlIGFja25vd2xkZWdlIHN0YXRl
IGFjcm9zcyBwb3dlci1nYXRpbmcNCj4gKwkgKiBvZmYgY3ljbGUsIGFkZCBzZW1hcGhvcmUgYWNx
dWlyZSBiZWZvcmUgaW52YWxpZGF0aW9uIGFuZCBzZW1hcGhvcmUNCj4gKwkgKiByZWxlYXNlIGFm
dGVyIGludmFsaWRhdGlvbiB0byBhdm9pZCBlbnRlcmluZyBwb3dlciBnYXRlZCBzdGF0ZQ0KPiAr
CSAqIHRvIFdBIHRoZSBJc3N1ZQ0KPiArCSAqLw0KPiArCWZvciAoaSA9IDA7IGkgPCBhZGV2LT51
c2VjX3RpbWVvdXQ7IGkrKykgew0KPiArCQkvKiBhIHJlYWQgcmV0dXJuIHZhbHVlIG9mIDEgbWVh
bnMgc2VtYXBob3JlIGFjdXFpcmUgKi8NCj4gKwkJdG1wID0gUlJFRzMyX05PX0tJUShodWItPnZt
X2ludl9lbmcwX3NlbSArIGVuZyk7DQo+ICsJCWlmICh0bXAgJiAweDEpDQo+ICsJCQlicmVhazsN
Cj4gKwkJdWRlbGF5KDEpOw0KPiArCX0NCj4gKw0KPiArCWlmIChpID49IGFkZXYtPnVzZWNfdGlt
ZW91dCkNCj4gKwkJRFJNX0VSUk9SKCJUaW1lb3V0IHdhaXRpbmcgZm9yIHNlbSBhY3F1aXJlIGlu
IFZNIGZsdXNoIVxuIik7DQo+ICsNCj4gICAJV1JFRzMyX05PX0tJUShodWItPnZtX2ludl9lbmcw
X3JlcSArIGVuZywgdG1wKTsNCj4gICANCj4gICAJLyoNCj4gQEAgLTI1Myw2ICsyNzEsMTQgQEAg
c3RhdGljIHZvaWQgZ21jX3YxMF8wX2ZsdXNoX3ZtX2h1YihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiwgdWludDMyX3Qgdm1pZCwNCj4gICAJCXVkZWxheSgxKTsNCj4gICAJfQ0KPiAgIA0KPiAr
CS8qDQo+ICsJICogYWRkIHNlbWFwaG9yZSByZWxlYXNlIGFmdGVyIGludmFsaWRhdGlvbiwNCj4g
KwkgKiB3cml0ZSB3aXRoIDAgbWVhbnMgc2VtYXBob3JlIHJlbGVhc2UNCj4gKwkgKi8NCj4gKwlX
UkVHMzJfTk9fS0lRKGh1Yi0+dm1faW52X2VuZzBfc2VtICsgZW5nLCAwKTsNCj4gKw0KPiArCXNw
aW5fdW5sb2NrKCZhZGV2LT5nbWMuaW52YWxpZGF0ZV9sb2NrKTsNCj4gKw0KPiAgIAlpZiAoaSA8
IGFkZXYtPnVzZWNfdGltZW91dCkNCj4gICAJCXJldHVybjsNCj4gICANCj4gQEAgLTMzOCw2ICsz
NjQsMjEgQEAgc3RhdGljIHVpbnQ2NF90IGdtY192MTBfMF9lbWl0X2ZsdXNoX2dwdV90bGIoc3Ry
dWN0IGFtZGdwdV9yaW5nICpyaW5nLA0KPiAgIAl1aW50MzJfdCByZXEgPSBnbWNfdjEwXzBfZ2V0
X2ludmFsaWRhdGVfcmVxKHZtaWQsIDApOw0KPiAgIAl1bnNpZ25lZCBlbmcgPSByaW5nLT52bV9p
bnZfZW5nOw0KPiAgIA0KPiArCS8qDQo+ICsJICogSXQgbWF5IGxvc2UgZ3B1dm0gaW52YWxpZGF0
ZSBhY2tub3dsZGVnZSBzdGF0ZSBhY3Jvc3MgcG93ZXItZ2F0aW5nDQo+ICsJICogb2ZmIGN5Y2xl
LCBhZGQgc2VtYXBob3JlIGFjcXVpcmUgYmVmb3JlIGludmFsaWRhdGlvbiBhbmQgc2VtYXBob3Jl
DQo+ICsJICogcmVsZWFzZSBhZnRlciBpbnZhbGlkYXRpb24gdG8gYXZvaWQgZW50ZXJpbmcgcG93
ZXIgZ2F0ZWQgc3RhdGUNCj4gKwkgKiB0byBXQSB0aGUgSXNzdWUNCj4gKwkgKi8NCj4gKw0KPiAr
CS8qIGEgcmVhZCByZXR1cm4gdmFsdWUgb2YgMSBtZWFucyBzZW1hcGhvcmUgYWN1cWlyZSAqLw0K
PiArCWlmIChyaW5nLT5mdW5jcy0+dm1odWIgPT0gQU1ER1BVX01NSFVCXzAgfHwNCj4gKwkgICAg
cmluZy0+ZnVuY3MtPnZtaHViID09IEFNREdQVV9NTUhVQl8xKSB7DQo+ICsJCWFtZGdwdV9yaW5n
X2VtaXRfcmVnX3dhaXQocmluZywNCj4gKwkJCQkJICBodWItPnZtX2ludl9lbmcwX3NlbSArIGVu
ZywgMHgxLCAweDEpOw0KPiArCQlEUk1fV0FSTl9PTkNFKCJBZGRpbmcgc2VtYXBob3JlIG1heSBj
YXVzZSBkZWFkbG9jayBhbmQgaXQgbmVlZHMgZmlybXdhcmUgZml4XG4iKTsNCj4gKwl9DQo+ICsN
Cj4gICAJYW1kZ3B1X3JpbmdfZW1pdF93cmVnKHJpbmcsIGh1Yi0+Y3R4MF9wdGJfYWRkcl9sbzMy
ICsgKDIgKiB2bWlkKSwNCj4gICAJCQkgICAgICBsb3dlcl8zMl9iaXRzKHBkX2FkZHIpKTsNCj4g
ICANCj4gQEAgLTM0OCw2ICszODksMTQgQEAgc3RhdGljIHVpbnQ2NF90IGdtY192MTBfMF9lbWl0
X2ZsdXNoX2dwdV90bGIoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLA0KPiAgIAkJCQkJICAgIGh1
Yi0+dm1faW52X2VuZzBfYWNrICsgZW5nLA0KPiAgIAkJCQkJICAgIHJlcSwgMSA8PCB2bWlkKTsN
Cj4gICANCj4gKwkvKg0KPiArCSAqIGFkZCBzZW1hcGhvcmUgcmVsZWFzZSBhZnRlciBpbnZhbGlk
YXRpb24sDQo+ICsJICogd3JpdGUgd2l0aCAwIG1lYW5zIHNlbWFwaG9yZSByZWxlYXNlDQo+ICsJ
ICovDQo+ICsJaWYgKHJpbmctPmZ1bmNzLT52bWh1YiA9PSBBTURHUFVfTU1IVUJfMCB8fA0KPiAr
CSAgICByaW5nLT5mdW5jcy0+dm1odWIgPT0gQU1ER1BVX01NSFVCXzEpDQo+ICsJCWFtZGdwdV9y
aW5nX2VtaXRfd3JlZyhyaW5nLCBodWItPnZtX2ludl9lbmcwX3NlbSArIGVuZywgMCk7DQo+ICsN
Cj4gICAJcmV0dXJuIHBkX2FkZHI7DQo+ICAgfQ0KPiAgIA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYyANCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9nbWNfdjlfMC5jDQo+IGluZGV4IDFhZTU5YWY3ODM2YS4uYzQxMThjYmIwZmJlIDEw
MDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jDQo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMNCj4gQEAgLTQ1Niw2ICs0
NTYsMjQgQEAgc3RhdGljIHZvaWQgZ21jX3Y5XzBfZmx1c2hfZ3B1X3RsYihzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiwgdWludDMyX3Qgdm1pZCwNCj4gICAJfQ0KPiAgIA0KPiAgIAlzcGluX2xv
Y2soJmFkZXYtPmdtYy5pbnZhbGlkYXRlX2xvY2spOw0KPiArDQo+ICsJLyoNCj4gKwkgKiBJdCBt
YXkgbG9zZSBncHV2bSBpbnZhbGlkYXRlIGFja25vd2xkZWdlIHN0YXRlIGFjcm9zcyBwb3dlci1n
YXRpbmcNCj4gKwkgKiBvZmYgY3ljbGUsIGFkZCBzZW1hcGhvcmUgYWNxdWlyZSBiZWZvcmUgaW52
YWxpZGF0aW9uIGFuZCBzZW1hcGhvcmUNCj4gKwkgKiByZWxlYXNlIGFmdGVyIGludmFsaWRhdGlv
biB0byBhdm9pZCBlbnRlcmluZyBwb3dlciBnYXRlZCBzdGF0ZQ0KPiArCSAqIHRvIFdBIHRoZSBJ
c3N1ZQ0KPiArCSAqLw0KPiArCWZvciAoaiA9IDA7IGogPCBhZGV2LT51c2VjX3RpbWVvdXQ7IGor
Kykgew0KPiArCQkvKiBhIHJlYWQgcmV0dXJuIHZhbHVlIG9mIDEgbWVhbnMgc2VtYXBob3JlIGFj
dXFpcmUgKi8NCj4gKwkJdG1wID0gUlJFRzMyX05PX0tJUShodWItPnZtX2ludl9lbmcwX3NlbSAr
IGVuZyk7DQo+ICsJCWlmICh0bXAgJiAweDEpDQo+ICsJCQlicmVhazsNCj4gKwkJdWRlbGF5KDEp
Ow0KPiArCX0NCj4gKw0KPiArCWlmIChqID49IGFkZXYtPnVzZWNfdGltZW91dCkNCj4gKwkJRFJN
X0VSUk9SKCJUaW1lb3V0IHdhaXRpbmcgZm9yIHNlbSBhY3F1aXJlIGluIFZNIGZsdXNoIVxuIik7
DQo+ICsNCj4gICAJV1JFRzMyX05PX0tJUShodWItPnZtX2ludl9lbmcwX3JlcSArIGVuZywgdG1w
KTsNCj4gICANCj4gICAJLyoNCj4gQEAgLTQ3MSw3ICs0ODksMTUgQEAgc3RhdGljIHZvaWQgZ21j
X3Y5XzBfZmx1c2hfZ3B1X3RsYihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3Qg
dm1pZCwNCj4gICAJCQlicmVhazsNCj4gICAJCXVkZWxheSgxKTsNCj4gICAJfQ0KPiArDQo+ICsJ
LyoNCj4gKwkgKiBhZGQgc2VtYXBob3JlIHJlbGVhc2UgYWZ0ZXIgaW52YWxpZGF0aW9uLA0KPiAr
CSAqIHdyaXRlIHdpdGggMCBtZWFucyBzZW1hcGhvcmUgcmVsZWFzZQ0KPiArCSAqLw0KPiArCVdS
RUczMl9OT19LSVEoaHViLT52bV9pbnZfZW5nMF9zZW0gKyBlbmcsIDApOw0KPiArDQo+ICAgCXNw
aW5fdW5sb2NrKCZhZGV2LT5nbWMuaW52YWxpZGF0ZV9sb2NrKTsNCj4gKw0KPiAgIAlpZiAoaiA8
IGFkZXYtPnVzZWNfdGltZW91dCkNCj4gICAJCXJldHVybjsNCj4gICANCj4gQEAgLTQ4Niw2ICs1
MTIsMjEgQEAgc3RhdGljIHVpbnQ2NF90IGdtY192OV8wX2VtaXRfZmx1c2hfZ3B1X3RsYihzdHJ1
Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsDQo+ICAgCXVpbnQzMl90IHJlcSA9IGdtY192OV8wX2dldF9p
bnZhbGlkYXRlX3JlcSh2bWlkLCAwKTsNCj4gICAJdW5zaWduZWQgZW5nID0gcmluZy0+dm1faW52
X2VuZzsNCj4gICANCj4gKwkvKg0KPiArCSAqIEl0IG1heSBsb3NlIGdwdXZtIGludmFsaWRhdGUg
YWNrbm93bGRlZ2Ugc3RhdGUgYWNyb3NzIHBvd2VyLWdhdGluZw0KPiArCSAqIG9mZiBjeWNsZSwg
YWRkIHNlbWFwaG9yZSBhY3F1aXJlIGJlZm9yZSBpbnZhbGlkYXRpb24gYW5kIHNlbWFwaG9yZQ0K
PiArCSAqIHJlbGVhc2UgYWZ0ZXIgaW52YWxpZGF0aW9uIHRvIGF2b2lkIGVudGVyaW5nIHBvd2Vy
IGdhdGVkIHN0YXRlDQo+ICsJICogdG8gV0EgdGhlIElzc3VlDQo+ICsJICovDQo+ICsNCj4gKwkv
KiBhIHJlYWQgcmV0dXJuIHZhbHVlIG9mIDEgbWVhbnMgc2VtYXBob3JlIGFjdXFpcmUgKi8NCj4g
KwlpZiAocmluZy0+ZnVuY3MtPnZtaHViID09IEFNREdQVV9NTUhVQl8wIHx8DQo+ICsJICAgIHJp
bmctPmZ1bmNzLT52bWh1YiA9PSBBTURHUFVfTU1IVUJfMSkgew0KPiArCQlhbWRncHVfcmluZ19l
bWl0X3JlZ193YWl0KHJpbmcsDQo+ICsJCQkJCSAgaHViLT52bV9pbnZfZW5nMF9zZW0gKyBlbmcs
IDB4MSwgMHgxKTsNCj4gKwkJRFJNX1dBUk5fT05DRSgiQWRkaW5nIHNlbWFwaG9yZSBtYXkgY2F1
c2UgZGVhZGxvY2sgYW5kIGl0IG5lZWRzIGZpcm13YXJlIGZpeFxuIik7DQo+ICsJfQ0KPiArDQo+
ICAgCWFtZGdwdV9yaW5nX2VtaXRfd3JlZyhyaW5nLCBodWItPmN0eDBfcHRiX2FkZHJfbG8zMiAr
ICgyICogdm1pZCksDQo+ICAgCQkJICAgICAgbG93ZXJfMzJfYml0cyhwZF9hZGRyKSk7DQo+ICAg
DQo+IEBAIC00OTYsNiArNTM3LDE0IEBAIHN0YXRpYyB1aW50NjRfdCBnbWNfdjlfMF9lbWl0X2Zs
dXNoX2dwdV90bGIoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLA0KPiAgIAkJCQkJICAgIGh1Yi0+
dm1faW52X2VuZzBfYWNrICsgZW5nLA0KPiAgIAkJCQkJICAgIHJlcSwgMSA8PCB2bWlkKTsNCj4g
ICANCj4gKwkvKg0KPiArCSAqIGFkZCBzZW1hcGhvcmUgcmVsZWFzZSBhZnRlciBpbnZhbGlkYXRp
b24sDQo+ICsJICogd3JpdGUgd2l0aCAwIG1lYW5zIHNlbWFwaG9yZSByZWxlYXNlDQo+ICsJICov
DQo+ICsJaWYgKHJpbmctPmZ1bmNzLT52bWh1YiA9PSBBTURHUFVfTU1IVUJfMCB8fA0KPiArCSAg
ICByaW5nLT5mdW5jcy0+dm1odWIgPT0gQU1ER1BVX01NSFVCXzEpDQo+ICsJCWFtZGdwdV9yaW5n
X2VtaXRfd3JlZyhyaW5nLCBodWItPnZtX2ludl9lbmcwX3NlbSArIGVuZywgMCk7DQo+ICsNCj4g
ICAJcmV0dXJuIHBkX2FkZHI7DQo+ICAgfQ0KPiAgIA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvc29jMTUuaCANCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9zb2MxNS5oDQo+IGluZGV4IDlhZjZjNmZmYmZhMi4uNTdhZjQ4OWE1ZGUzIDEwMDY0NA0KPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5oDQo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L3NvYzE1LmgNCj4gQEAgLTI4LDggKzI4LDggQEANCj4gICAjaW5j
bHVkZSAibmJpb192N18wLmgiDQo+ICAgI2luY2x1ZGUgIm5iaW9fdjdfNC5oIg0KPiAgIA0KPiAt
I2RlZmluZSBTT0MxNV9GTFVTSF9HUFVfVExCX05VTV9XUkVHCQk0DQo+IC0jZGVmaW5lIFNPQzE1
X0ZMVVNIX0dQVV9UTEJfTlVNX1JFR19XQUlUCTENCj4gKyNkZWZpbmUgU09DMTVfRkxVU0hfR1BV
X1RMQl9OVU1fV1JFRwkJNg0KPiArI2RlZmluZSBTT0MxNV9GTFVTSF9HUFVfVExCX05VTV9SRUdf
V0FJVAkzDQo+ICAgDQo+ICAgZXh0ZXJuIGNvbnN0IHN0cnVjdCBhbWRfaXBfZnVuY3Mgc29jMTVf
Y29tbW9uX2lwX2Z1bmNzOw0KPiAgIA0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2FtZC1nZng=
