Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B93C14C3DC
	for <lists+amd-gfx@lfdr.de>; Thu, 20 Jun 2019 00:50:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 521C06E485;
	Wed, 19 Jun 2019 22:50:16 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-BY2-obe.outbound.protection.outlook.com
 (mail-eopbgr780083.outbound.protection.outlook.com [40.107.78.83])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EFBA56E485
 for <amd-gfx@lists.freedesktop.org>; Wed, 19 Jun 2019 22:50:14 +0000 (UTC)
Received: from CH2PR12MB3831.namprd12.prod.outlook.com (52.132.245.141) by
 CH2PR12MB3655.namprd12.prod.outlook.com (10.255.155.213) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1987.11; Wed, 19 Jun 2019 22:50:13 +0000
Received: from CH2PR12MB3831.namprd12.prod.outlook.com
 ([fe80::3459:726f:43e7:a64c]) by CH2PR12MB3831.namprd12.prod.outlook.com
 ([fe80::3459:726f:43e7:a64c%4]) with mapi id 15.20.1987.014; Wed, 19 Jun 2019
 22:50:13 +0000
From: "Kim, Jonathan" <Jonathan.Kim@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 2/2] drm/amdgpu: add pmu counters
Thread-Topic: [PATCH 2/2] drm/amdgpu: add pmu counters
Thread-Index: AQHVJvFb80azSfW1/US7APv5UG9tMQ==
Date: Wed, 19 Jun 2019 22:50:13 +0000
Message-ID: <20190619224943.130022-2-jonathan.kim@amd.com>
References: <20190619224943.130022-1-jonathan.kim@amd.com>
In-Reply-To: <20190619224943.130022-1-jonathan.kim@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: YTOPR0101CA0034.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b00:15::47) To CH2PR12MB3831.namprd12.prod.outlook.com
 (2603:10b6:610:29::13)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [165.204.55.251]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 59b15aa4-e8a5-43a3-e3b5-08d6f5087d7c
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:CH2PR12MB3655; 
x-ms-traffictypediagnostic: CH2PR12MB3655:
x-microsoft-antispam-prvs: <CH2PR12MB36558E39F4E2E647E30EDBFA85E50@CH2PR12MB3655.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:260;
x-forefront-prvs: 0073BFEF03
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(396003)(346002)(366004)(376002)(136003)(39860400002)(199004)(189003)(3846002)(446003)(2906002)(7736002)(14444005)(71200400001)(6436002)(476003)(256004)(2501003)(66556008)(305945005)(6512007)(186003)(2616005)(25786009)(66476007)(73956011)(66446008)(66946007)(64756008)(6486002)(53936002)(71190400001)(486006)(102836004)(30864003)(316002)(81156014)(386003)(86362001)(99286004)(5640700003)(26005)(2351001)(6506007)(52116002)(4326008)(11346002)(6916009)(72206003)(8936002)(478600001)(36756003)(1076003)(5660300002)(76176011)(14454004)(6116002)(50226002)(68736007)(66066001)(81166006)(8676002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:CH2PR12MB3655;
 H:CH2PR12MB3831.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: 2fpKPwTmnvvG725jXIgJtL0sNgxugYqYCZwjlMB840dbNHSC4Sme/MhjVR3M229LscaxOCunaz5X91UY/jABcjEc3uuH9Vbb8DO0cTdOWjCU7hJK+8LnoNZ2fQgGjejVtDz3vnUCLutteq42wh0mVxcI0PD31hD8e/jjrP2g2gaFBTcQUFPtwUl/i3ueCTgp601q6gztYPPsCcc0Qv7kO1Dszv9xwEfVOO7/nWajnviDT/BTY9P67Kklv1Lz7kcV+YJygZIxewFaO43zXLOo0/Mr2YC6suoqAM4mJVo9vwuKrghYYlQC5Rc4V3feEUOwQoRUoAKVq7SB/BjHl1TFMSFx5vDH/3nkXL/K9kJYc/8VxJpAkIAKvnh866iIC63I1dXtfqEOFrJlYLa0l5CXNGP3cGts4MqILwgf5/nd6vU=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 59b15aa4-e8a5-43a3-e3b5-08d6f5087d7c
X-MS-Exchange-CrossTenant-originalarrivaltime: 19 Jun 2019 22:50:13.6362 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: jokim@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CH2PR12MB3655
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=bxU237yZiod5ccbaTo9jYF60PnaNnpmB4v3W59ZcJ5Y=;
 b=e/N3qYKOsWWTkayNYewN0n0JK01/aiZs1javAm0tuzwI9WVYJFiHTYc7et1VGjXFcbI1Y5KuRHdhSg9Lo1Vv3eIO8eSeX53TvhOexv3d/VvhcZlZqwHOPEMHFM23m2U9aBV3JRmZLz3hzYdiqN3cXm1z/CSB7aYOBuzVQUpQDDg=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Jonathan.Kim@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Kim, Jonathan" <Jonathan.Kim@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

YWRkaW5nIHBlcmYgZXZlbnQgY291bnRlcnMNCg0KQ2hhbmdlLUlkOiBJYjg4MDBjMmQ2NTJlM2U3
ODg4NzJiZDcyMTQ1OGFjNTQyMjg1OWI2Mg0KU2lnbmVkLW9mZi1ieTogSm9uYXRoYW4gS2ltIDxq
b25hdGhhbi5raW1AYW1kLmNvbT4NCi0tLQ0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L01h
a2VmaWxlICAgICAgICB8ICAgMiArLQ0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dS5oICAgICAgICB8ICAgMSArDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rl
dmljZS5jIHwgICA2ICsNCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcG11LmMg
ICAgfCAyODAgKysrKysrKysrKysrKysrKysrKysrDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3BtdS5oICAgIHwgIDM3ICsrKw0KIDUgZmlsZXMgY2hhbmdlZCwgMzI1IGluc2Vy
dGlvbnMoKyksIDEgZGVsZXRpb24oLSkNCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtdS5jDQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wbXUuaA0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9N
YWtlZmlsZQ0KaW5kZXggNTdjZTQ0Y2MzMjI2Li40YzlmZDI2NDVmNjQgMTAwNjQ0DQotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZQ0KKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvTWFrZWZpbGUNCkBAIC01NCw3ICs1NCw3IEBAIGFtZGdwdS15ICs9IGFtZGdw
dV9kZXZpY2UubyBhbWRncHVfa21zLm8gXA0KIAlhbWRncHVfZ3R0X21nci5vIGFtZGdwdV92cmFt
X21nci5vIGFtZGdwdV92aXJ0Lm8gYW1kZ3B1X2F0b21maXJtd2FyZS5vIFwNCiAJYW1kZ3B1X3Zm
X2Vycm9yLm8gYW1kZ3B1X3NjaGVkLm8gYW1kZ3B1X2RlYnVnZnMubyBhbWRncHVfaWRzLm8gXA0K
IAlhbWRncHVfZ21jLm8gYW1kZ3B1X3hnbWkubyBhbWRncHVfY3NhLm8gYW1kZ3B1X3Jhcy5vIGFt
ZGdwdV92bV9jcHUubyBcDQotCWFtZGdwdV92bV9zZG1hLm8NCisJYW1kZ3B1X3ZtX3NkbWEubyBh
bWRncHVfcG11Lm8NCiANCiAjIGFkZCBhc2ljIHNwZWNpZmljIGJsb2NrDQogYW1kZ3B1LSQoQ09O
RklHX0RSTV9BTURHUFVfQ0lLKSs9IGNpay5vIGNpa19paC5vIGt2X3NtYy5vIGt2X2RwbS5vIFwN
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaCBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oDQppbmRleCA1NzgwZTE1N2ZkNzIuLjkwYTE1
OTA3OTkxMiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5o
DQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaA0KQEAgLTk2NCw2ICs5
NjQsNyBAQCBzdHJ1Y3QgYW1kZ3B1X2RldmljZSB7DQogDQogCXVpbnQ2NF90CQkJdW5pcXVlX2lk
Ow0KIAl1aW50NjRfdAkJCSpkZl9wZXJmbW9uX2NvbmZpZ19hc3NpZ25fbWFzazsNCisJc3RydWN0
IG11dGV4CQlkZl9wZXJmbW9uX2xvY2s7DQogfTsNCiANCiBzdGF0aWMgaW5saW5lIHN0cnVjdCBh
bWRncHVfZGV2aWNlICphbWRncHVfdHRtX2FkZXYoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYp
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jDQppbmRleCAwMDMz
NTBhMmQyOTkuLmJjZmFiZDAyNWY1ZCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9kZXZpY2UuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2RldmljZS5jDQpAQCAtNjEsNiArNjEsNyBAQA0KIA0KICNpbmNsdWRlICJhbWRncHVf
eGdtaS5oIg0KICNpbmNsdWRlICJhbWRncHVfcmFzLmgiDQorI2luY2x1ZGUgImFtZGdwdV9wbXUu
aCINCiANCiBNT0RVTEVfRklSTVdBUkUoImFtZGdwdS92ZWdhMTBfZ3B1X2luZm8uYmluIik7DQog
TU9EVUxFX0ZJUk1XQVJFKCJhbWRncHUvdmVnYTEyX2dwdV9pbmZvLmJpbiIpOw0KQEAgLTI3NTcs
NiArMjc1OCwxMCBAQCBpbnQgYW1kZ3B1X2RldmljZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LA0KIAkJcmV0dXJuIHI7DQogCX0NCiANCisJciA9IGFtZGdwdV9wbXVfaW5pdChhZGV2
KTsNCisJaWYgKHIpDQorCQlkZXZfZXJyKGFkZXYtPmRldiwgImFtZGdwdV9wbXVfaW5pdCBmYWls
ZWRcbiIpOw0KKw0KIAlyZXR1cm4gMDsNCiANCiBmYWlsZWQ6DQpAQCAtMjgyMiw2ICsyODI3LDcg
QEAgdm9pZCBhbWRncHVfZGV2aWNlX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQog
CWFtZGdwdV9kZWJ1Z2ZzX3JlZ3NfY2xlYW51cChhZGV2KTsNCiAJZGV2aWNlX3JlbW92ZV9maWxl
KGFkZXYtPmRldiwgJmRldl9hdHRyX3BjaWVfcmVwbGF5X2NvdW50KTsNCiAJYW1kZ3B1X3Vjb2Rl
X3N5c2ZzX2ZpbmkoYWRldik7DQorCWFtZGdwdV9wbXVfZmluaShhZGV2KTsNCiB9DQogDQogDQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtdS5jIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtdS5jDQpuZXcgZmlsZSBtb2RlIDEwMDY0
NA0KaW5kZXggMDAwMDAwMDAwMDAwLi43M2ZkNzBhNTljOGINCi0tLSAvZGV2L251bGwNCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wbXUuYw0KQEAgLTAsMCArMSwyODAg
QEANCisvKg0KKyAqIENvcHlyaWdodCAyMDE5IEFkdmFuY2VkIE1pY3JvIERldmljZXMsIEluYy4N
CisgKg0KKyAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0
byBhbnkgcGVyc29uIG9idGFpbmluZyBhDQorICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBh
c3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwNCisgKiB0byBk
ZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91
dCBsaW1pdGF0aW9uDQorICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2Us
IHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsDQorICogYW5kL29yIHNlbGwgY29waWVz
IG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlDQorICog
U29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcg
Y29uZGl0aW9uczoNCisgKg0KKyAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlz
IHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluDQorICogYWxsIGNvcGllcyBv
ciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuDQorICoNCisgKiBUSEUgU09G
VFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwg
RVhQUkVTUyBPUg0KKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhF
IFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLA0KKyAqIEZJVE5FU1MgRk9SIEEgUEFSVElD
VUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTA0KKyAq
IFRIRSBDT1BZUklHSFQgSE9MREVSKFMpIE9SIEFVVEhPUihTKSBCRSBMSUFCTEUgRk9SIEFOWSBD
TEFJTSwgREFNQUdFUyBPUg0KKyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJ
T04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLA0KKyAqIEFSSVNJTkcgRlJPTSwgT1VU
IE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUg0KKyAq
IE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4NCisgKg0KKyAqIEF1dGhvcjogSm9uYXRo
YW4gS2ltIDxqb25hdGhhbi5raW1AYW1kLmNvbT4NCisgKg0KKyAqLw0KKw0KKyNpbmNsdWRlIDxs
aW51eC9wZXJmX2V2ZW50Lmg+DQorI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4NCisjaW5jbHVkZSAi
YW1kZ3B1LmgiDQorI2luY2x1ZGUgImFtZGdwdV9wbXUuaCINCisjaW5jbHVkZSAiZGZfdjNfNi5o
Ig0KKw0KKyNkZWZpbmUgUE1VX05BTUVfU0laRSAzMg0KKw0KKy8qIHJlY29yZCB0byBrZWVwIHRy
YWNrIG9mIHBtdSBlbnRyeSBwZXIgcG11IHR5cGUgcGVyIGRldmljZSAqLw0KK3N0cnVjdCBhbWRn
cHVfcG11X2VudHJ5IHsNCisJc3RydWN0IGxpc3RfaGVhZCBlbnRyeTsNCisJc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXY7DQorCXN0cnVjdCBwbXUgcG11Ow0KKwl1bnNpZ25lZCBpbnQgcG11X3Bl
cmZfdHlwZTsNCit9Ow0KKw0KK3N0YXRpYyBMSVNUX0hFQUQoYW1kZ3B1X3BtdV9saXN0KTsNCisN
CisNCisvKiBpbml0aWFsaXplIHBlcmYgY291bnRlciAqLw0KK3N0YXRpYyBpbnQgYW1kZ3B1X3Bl
cmZfZXZlbnRfaW5pdChzdHJ1Y3QgcGVyZl9ldmVudCAqZXZlbnQpDQorew0KKwlzdHJ1Y3QgaHdf
cGVyZl9ldmVudCAqaHdjID0gJmV2ZW50LT5odzsNCisNCisJLyogdGVzdCB0aGUgZXZlbnQgYXR0
ciB0eXBlIGNoZWNrIGZvciBQTVUgZW51bWVyYXRpb24gKi8NCisJaWYgKGV2ZW50LT5hdHRyLnR5
cGUgIT0gZXZlbnQtPnBtdS0+dHlwZSkNCisJCXJldHVybiAtRU5PRU5UOw0KKw0KKwkvKiB1cGRh
dGUgdGhlIGh3X3BlcmZfZXZlbnQgc3RydWN0IHdpdGggY29uZmlnIGRhdGEgKi8NCisJaHdjLT5j
b25mID0gZXZlbnQtPmF0dHIuY29uZmlnOw0KKw0KKwlyZXR1cm4gMDsNCit9DQorDQorLyogc3Rh
cnQgcGVyZiBjb3VudGVyICovDQorc3RhdGljIHZvaWQgYW1kZ3B1X3BlcmZfc3RhcnQoc3RydWN0
IHBlcmZfZXZlbnQgKmV2ZW50LCBpbnQgZmxhZ3MpDQorew0KKwlzdHJ1Y3QgaHdfcGVyZl9ldmVu
dCAqaHdjID0gJmV2ZW50LT5odzsNCisJc3RydWN0IGFtZGdwdV9wbXVfZW50cnkgKnBlID0gY29u
dGFpbmVyX29mKGV2ZW50LT5wbXUsDQorCQkJCQkJICBzdHJ1Y3QgYW1kZ3B1X3BtdV9lbnRyeSwN
CisJCQkJCQkgIHBtdSk7DQorDQorCWlmIChXQVJOX09OX09OQ0UoIShod2MtPnN0YXRlICYgUEVS
Rl9IRVNfU1RPUFBFRCkpKQ0KKwkJcmV0dXJuOw0KKw0KKwlXQVJOX09OX09OQ0UoIShod2MtPnN0
YXRlICYgUEVSRl9IRVNfVVBUT0RBVEUpKTsNCisJaHdjLT5zdGF0ZSA9IDA7DQorDQorCXN3aXRj
aCAocGUtPnBtdV9wZXJmX3R5cGUpIHsNCisJY2FzZSBQRVJGX1RZUEVfQU1ER1BVX0RGOg0KKwkJ
aWYgKCEoZmxhZ3MgJiBQRVJGX0VGX1JFTE9BRCkpDQorCQkJcGUtPmFkZXYtPmRmX2Z1bmNzLT5w
bWNfc3RhcnQocGUtPmFkZXYsIGh3Yy0+Y29uZiwgMSk7DQorDQorCQlwZS0+YWRldi0+ZGZfZnVu
Y3MtPnBtY19zdGFydChwZS0+YWRldiwgaHdjLT5jb25mLCAwKTsNCisJCWJyZWFrOw0KKwlkZWZh
dWx0Og0KKwkJYnJlYWs7DQorCX0NCisNCisJcGVyZl9ldmVudF91cGRhdGVfdXNlcnBhZ2UoZXZl
bnQpOw0KKw0KK30NCisNCisvKiByZWFkIHBlcmYgY291bnRlciAqLw0KK3N0YXRpYyB2b2lkIGFt
ZGdwdV9wZXJmX3JlYWQoc3RydWN0IHBlcmZfZXZlbnQgKmV2ZW50KQ0KK3sNCisJc3RydWN0IGh3
X3BlcmZfZXZlbnQgKmh3YyA9ICZldmVudC0+aHc7DQorCXN0cnVjdCBhbWRncHVfcG11X2VudHJ5
ICpwZSA9IGNvbnRhaW5lcl9vZihldmVudC0+cG11LA0KKwkJCQkJCSAgc3RydWN0IGFtZGdwdV9w
bXVfZW50cnksDQorCQkJCQkJICBwbXUpOw0KKw0KKwl1NjQgY291bnQsIHByZXY7DQorDQorCWRv
IHsNCisJCXByZXYgPSBsb2NhbDY0X3JlYWQoJmh3Yy0+cHJldl9jb3VudCk7DQorDQorCQlzd2l0
Y2ggKHBlLT5wbXVfcGVyZl90eXBlKSB7DQorCQljYXNlIFBFUkZfVFlQRV9BTURHUFVfREY6DQor
CQkJcGUtPmFkZXYtPmRmX2Z1bmNzLT5wbWNfZ2V0X2NvdW50KHBlLT5hZGV2LCBod2MtPmNvbmYs
DQorCQkJCQkJCSAgJmNvdW50KTsNCisJCQlicmVhazsNCisJCWRlZmF1bHQ6DQorCQkJY291bnQg
PSAwOw0KKwkJCWJyZWFrOw0KKwkJfTsNCisJfSB3aGlsZSAobG9jYWw2NF9jbXB4Y2hnKCZod2Mt
PnByZXZfY291bnQsIHByZXYsIGNvdW50KSAhPSBwcmV2KTsNCisNCisJbG9jYWw2NF9hZGQoY291
bnQgLSBwcmV2LCAmZXZlbnQtPmNvdW50KTsNCit9DQorDQorLyogc3RvcCBwZXJmIGNvdW50ZXIg
Ki8NCitzdGF0aWMgdm9pZCBhbWRncHVfcGVyZl9zdG9wKHN0cnVjdCBwZXJmX2V2ZW50ICpldmVu
dCwgaW50IGZsYWdzKQ0KK3sNCisJc3RydWN0IGh3X3BlcmZfZXZlbnQgKmh3YyA9ICZldmVudC0+
aHc7DQorCXN0cnVjdCBhbWRncHVfcG11X2VudHJ5ICpwZSA9IGNvbnRhaW5lcl9vZihldmVudC0+
cG11LA0KKwkJCQkJCSAgc3RydWN0IGFtZGdwdV9wbXVfZW50cnksDQorCQkJCQkJICBwbXUpOw0K
Kw0KKwlpZiAoaHdjLT5zdGF0ZSAmIFBFUkZfSEVTX1VQVE9EQVRFKQ0KKwkJcmV0dXJuOw0KKw0K
Kwlzd2l0Y2ggKHBlLT5wbXVfcGVyZl90eXBlKSB7DQorCWNhc2UgUEVSRl9UWVBFX0FNREdQVV9E
RjoNCisJCXBlLT5hZGV2LT5kZl9mdW5jcy0+cG1jX3N0b3AocGUtPmFkZXYsIGh3Yy0+Y29uZiwg
MCk7DQorCQlicmVhazsNCisJZGVmYXVsdDoNCisJCWJyZWFrOw0KKwl9Ow0KKw0KKwlXQVJOX09O
X09OQ0UoaHdjLT5zdGF0ZSAmIFBFUkZfSEVTX1NUT1BQRUQpOw0KKwlod2MtPnN0YXRlIHw9IFBF
UkZfSEVTX1NUT1BQRUQ7DQorDQorCWlmIChod2MtPnN0YXRlICYgUEVSRl9IRVNfVVBUT0RBVEUp
DQorCQlyZXR1cm47DQorDQorCWFtZGdwdV9wZXJmX3JlYWQoZXZlbnQpOw0KKwlod2MtPnN0YXRl
IHw9IFBFUkZfSEVTX1VQVE9EQVRFOw0KK30NCisNCisvKiBhZGQgcGVyZiBjb3VudGVyICAqLw0K
K3N0YXRpYyBpbnQgYW1kZ3B1X3BlcmZfYWRkKHN0cnVjdCBwZXJmX2V2ZW50ICpldmVudCwgaW50
IGZsYWdzKQ0KK3sNCisJc3RydWN0IGh3X3BlcmZfZXZlbnQgKmh3YyA9ICZldmVudC0+aHc7DQor
CWludCByZXR2YWw7DQorDQorCXN0cnVjdCBhbWRncHVfcG11X2VudHJ5ICpwZSA9IGNvbnRhaW5l
cl9vZihldmVudC0+cG11LA0KKwkJCQkJCSAgc3RydWN0IGFtZGdwdV9wbXVfZW50cnksDQorCQkJ
CQkJICBwbXUpOw0KKw0KKwlldmVudC0+aHcuc3RhdGUgPSBQRVJGX0hFU19VUFRPREFURSB8IFBF
UkZfSEVTX1NUT1BQRUQ7DQorDQorCXN3aXRjaCAocGUtPnBtdV9wZXJmX3R5cGUpIHsNCisJY2Fz
ZSBQRVJGX1RZUEVfQU1ER1BVX0RGOg0KKwkJcmV0dmFsID0gcGUtPmFkZXYtPmRmX2Z1bmNzLT5w
bWNfc3RhcnQocGUtPmFkZXYsIGh3Yy0+Y29uZiwgMSk7DQorCQlicmVhazsNCisJZGVmYXVsdDoN
CisJCXJldHVybiAwOw0KKwl9Ow0KKw0KKwlpZiAocmV0dmFsKQ0KKwkJcmV0dXJuIHJldHZhbDsN
CisNCisJaWYgKGZsYWdzICYgUEVSRl9FRl9TVEFSVCkNCisJCWFtZGdwdV9wZXJmX3N0YXJ0KGV2
ZW50LCBQRVJGX0VGX1JFTE9BRCk7DQorDQorCXJldHVybiByZXR2YWw7DQorDQorfQ0KKw0KKy8q
IGRlbGV0ZSBwZXJmIGNvdW50ZXIgICovDQorc3RhdGljIHZvaWQgYW1kZ3B1X3BlcmZfZGVsKHN0
cnVjdCBwZXJmX2V2ZW50ICpldmVudCwgaW50IGZsYWdzKQ0KK3sNCisJc3RydWN0IGh3X3BlcmZf
ZXZlbnQgKmh3YyA9ICZldmVudC0+aHc7DQorCXN0cnVjdCBhbWRncHVfcG11X2VudHJ5ICpwZSA9
IGNvbnRhaW5lcl9vZihldmVudC0+cG11LA0KKwkJCQkJCSAgc3RydWN0IGFtZGdwdV9wbXVfZW50
cnksDQorCQkJCQkJICBwbXUpOw0KKw0KKwlhbWRncHVfcGVyZl9zdG9wKGV2ZW50LCBQRVJGX0VG
X1VQREFURSk7DQorDQorCXN3aXRjaCAocGUtPnBtdV9wZXJmX3R5cGUpIHsNCisJY2FzZSBQRVJG
X1RZUEVfQU1ER1BVX0RGOg0KKwkJcGUtPmFkZXYtPmRmX2Z1bmNzLT5wbWNfc3RvcChwZS0+YWRl
diwgaHdjLT5jb25mLCAxKTsNCisJCWJyZWFrOw0KKwlkZWZhdWx0Og0KKwkJYnJlYWs7DQorCX07
DQorDQorCXBlcmZfZXZlbnRfdXBkYXRlX3VzZXJwYWdlKGV2ZW50KTsNCit9DQorDQorLyogdmVn
YTIwIHBtdXMgKi8NCisNCisvKiBpbml0IHBtdSB0cmFja2luZyBwZXIgcG11IHR5cGUgKi8NCitp
bnQgaW5pdF9wbXVfYnlfdHlwZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCisJCSAgY29u
c3Qgc3RydWN0IGF0dHJpYnV0ZV9ncm91cCAqYXR0cl9ncm91cHNbXSwNCisJCSAgY2hhciAqcG11
X3R5cGVfbmFtZSwgY2hhciAqcG11X2ZpbGVfcHJlZml4LA0KKwkJICB1bnNpZ25lZCBpbnQgcG11
X3BlcmZfdHlwZSkNCit7DQorCWNoYXIgcG11X25hbWVbUE1VX05BTUVfU0laRV07DQorCXN0cnVj
dCBhbWRncHVfcG11X2VudHJ5ICpwbXVfZW50cnk7DQorCWludCByZXQgPSAwOw0KKw0KKwlwbXVf
ZW50cnkgPSBremFsbG9jKHNpemVvZihzdHJ1Y3QgYW1kZ3B1X3BtdV9lbnRyeSksIEdGUF9LRVJO
RUwpOw0KKw0KKwlpZiAoIXBtdV9lbnRyeSkNCisJCXJldHVybiAtRU5PTUVNOw0KKw0KKwlwbXVf
ZW50cnktPmFkZXYgPSBhZGV2Ow0KKwlwbXVfZW50cnktPnBtdSA9IChzdHJ1Y3QgcG11KXsNCisJ
CS5ldmVudF9pbml0ID0gYW1kZ3B1X3BlcmZfZXZlbnRfaW5pdCwNCisJCS5hZGQgPSBhbWRncHVf
cGVyZl9hZGQsDQorCQkuZGVsID0gYW1kZ3B1X3BlcmZfZGVsLA0KKwkJLnN0YXJ0ID0gYW1kZ3B1
X3BlcmZfc3RhcnQsDQorCQkuc3RvcCA9IGFtZGdwdV9wZXJmX3N0b3AsDQorCQkucmVhZCA9IGFt
ZGdwdV9wZXJmX3JlYWQsDQorCQkudGFza19jdHhfbnIgPSBwZXJmX2ludmFsaWRfY29udGV4dCwN
CisJfTsNCisNCisJcG11X2VudHJ5LT5wbXUuYXR0cl9ncm91cHMgPSBhdHRyX2dyb3VwczsNCisJ
cG11X2VudHJ5LT5wbXVfcGVyZl90eXBlID0gcG11X3BlcmZfdHlwZTsNCisJc25wcmludGYocG11
X25hbWUsIFBNVV9OQU1FX1NJWkUsICIlc18lZCIsDQorCQkJCXBtdV9maWxlX3ByZWZpeCwgYWRl
di0+ZGRldi0+cHJpbWFyeS0+aW5kZXgpOw0KKw0KKwlyZXQgPSBwZXJmX3BtdV9yZWdpc3Rlcigm
cG11X2VudHJ5LT5wbXUsIHBtdV9uYW1lLCAtMSk7DQorDQorCWlmIChyZXQpIHsNCisJCWtmcmVl
KHBtdV9lbnRyeSk7DQorCQlwcl93YXJuKCJFcnJvciBpbml0aWFsaXppbmcgQU1ER1BVICVzIFBN
VXMuXG4iLCBwbXVfdHlwZV9uYW1lKTsNCisJCXJldHVybiByZXQ7DQorCX0NCisNCisJcHJfaW5m
bygiRGV0ZWN0ZWQgQU1ER1BVICVzIENvdW50ZXJzLiAjIG9mIENvdW50ZXJzID0gJWQuXG4iLA0K
KwkJCXBtdV90eXBlX25hbWUsIERGX1YzXzZfTUFYX0NPVU5URVJTKTsNCisNCisJbGlzdF9hZGRf
dGFpbCgmcG11X2VudHJ5LT5lbnRyeSwgJmFtZGdwdV9wbXVfbGlzdCk7DQorDQorCXJldHVybiAw
Ow0KK30NCisNCisvKiBpbml0IGFtZGdwdV9wbXUgKi8NCitpbnQgYW1kZ3B1X3BtdV9pbml0KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KK3sNCisNCisJaW50IHJldCA9IDA7DQorDQorCXN3
aXRjaCAoYWRldi0+YXNpY190eXBlKSB7DQorCWNhc2UgQ0hJUF9WRUdBMjA6DQorCQkvKiBpbml0
IGRmICovDQorCQlyZXQgPSBpbml0X3BtdV9ieV90eXBlKGFkZXYsIGRmX3YzXzZfYXR0cl9ncm91
cHMsDQorCQkJCSJERiIsICJhbWRncHVfZGYiLCBQRVJGX1RZUEVfQU1ER1BVX0RGKTsNCisNCisJ
CS8qIG90aGVyIHBtdSB0eXBlcyBnbyBoZXJlKi8NCisJCWJyZWFrOw0KKwlkZWZhdWx0Og0KKwkJ
cmV0dXJuIDA7DQorCX0NCisNCisJcmV0dXJuIDA7DQorDQorfQ0KKw0KKw0KKy8qIGRlc3Ryb3kg
YWxsIHBtdSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0YXJnZXQgZGV2aWNlICovDQordm9pZCBhbWRn
cHVfcG11X2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQorew0KKwlzdHJ1Y3QgYW1k
Z3B1X3BtdV9lbnRyeSAqcGUsICp0ZW1wOw0KKw0KKwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUo
cGUsIHRlbXAsICZhbWRncHVfcG11X2xpc3QsIGVudHJ5KSB7DQorCQlpZiAocGUtPmFkZXYgPT0g
YWRldikgew0KKwkJCWxpc3RfZGVsKCZwZS0+ZW50cnkpOw0KKwkJCXBlcmZfcG11X3VucmVnaXN0
ZXIoJnRlbXAtPnBtdSk7DQorCQkJa2ZyZWUodGVtcCk7DQorCQl9DQorCX0NCit9DQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtdS5oIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtdS5oDQpuZXcgZmlsZSBtb2RlIDEwMDY0NA0KaW5k
ZXggMDAwMDAwMDAwMDAwLi43ZGRkYjcxNjBhMTENCi0tLSAvZGV2L251bGwNCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wbXUuaA0KQEAgLTAsMCArMSwzNyBAQA0KKy8q
DQorICogQ29weXJpZ2h0IDIwMTkgQWR2YW5jZWQgTWljcm8gRGV2aWNlcywgSW5jLg0KKyAqDQor
ICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBw
ZXJzb24gb2J0YWluaW5nIGENCisgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0
ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLA0KKyAqIHRvIGRlYWwgaW4g
dGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0
YXRpb24NCisgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlz
aCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwNCisgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhl
IFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUNCisgKiBTb2Z0d2Fy
ZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRp
b25zOg0KKyAqDQorICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlz
c2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4NCisgKiBhbGwgY29waWVzIG9yIHN1YnN0
YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4NCisgKg0KKyAqIFRIRSBTT0ZUV0FSRSBJ
UyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNT
IE9SDQorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFO
VElFUyBPRiBNRVJDSEFOVEFCSUxJVFksDQorICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBV
UlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMDQorICogVEhFIENP
UFlSSUdIVCBIT0xERVIoUykgT1IgQVVUSE9SKFMpIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBE
QU1BR0VTIE9SDQorICogT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBD
T05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsDQorICogQVJJU0lORyBGUk9NLCBPVVQgT0YgT1Ig
SU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SDQorICogT1RIRVIg
REVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLg0KKyAqDQorICogQXV0aG9yOiBKb25hdGhhbiBLaW0g
PGpvbmF0aGFuLmtpbUBhbWQuY29tPg0KKyAqDQorICovDQorDQorI2lmbmRlZiBfQU1ER1BVX1BN
VV9IXw0KKyNkZWZpbmUgX0FNREdQVV9QTVVfSF8NCisNCitlbnVtIGFtZGdwdV9wbXVfcGVyZl90
eXBlIHsNCisJUEVSRl9UWVBFX0FNREdQVV9ERiA9IDAsDQorCVBFUkZfVFlQRV9BTURHUFVfTUFY
DQorfTsNCisNCitpbnQgYW1kZ3B1X3BtdV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KTsNCit2b2lkIGFtZGdwdV9wbXVfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7DQor
DQorI2VuZGlmIC8qIF9BTURHUFVfUE1VX0hfICovDQotLSANCjIuMTcuMQ0KDQpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlz
dAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
