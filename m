Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 280D4281EE
	for <lists+amd-gfx@lfdr.de>; Thu, 23 May 2019 17:56:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8A9776E029;
	Thu, 23 May 2019 15:56:47 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.101.70])
 by gabe.freedesktop.org (Postfix) with ESMTP id F023A89F2D;
 Thu, 23 May 2019 14:44:58 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.72.51.249])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id B972A80D;
 Thu, 23 May 2019 07:44:58 -0700 (PDT)
Received: from mbp (usa-sjc-mx-foss1.foss.arm.com [217.140.101.70])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 9DF2A3F690;
 Thu, 23 May 2019 07:44:52 -0700 (PDT)
Date: Thu, 23 May 2019 15:44:49 +0100
From: Catalin Marinas <catalin.marinas@arm.com>
To: Kees Cook <keescook@chromium.org>
Subject: Re: [PATCH v15 00/17] arm64: untag user pointers passed to the kernel
Message-ID: <20190523144449.waam2mkyzhjpqpur@mbp>
References: <cover.1557160186.git.andreyknvl@google.com>
 <20190517144931.GA56186@arrakis.emea.arm.com>
 <CAFKCwrj6JEtp4BzhqO178LFJepmepoMx=G+YdC8sqZ3bcBp3EQ@mail.gmail.com>
 <20190521182932.sm4vxweuwo5ermyd@mbp>
 <201905211633.6C0BF0C2@keescook>
 <20190522101110.m2stmpaj7seezveq@mbp>
 <CAJgzZoosKBwqXRyA6fb8QQSZXFqfHqe9qO9je5TogHhzuoGXJQ@mail.gmail.com>
 <20190522163527.rnnc6t4tll7tk5zw@mbp>
 <201905221316.865581CF@keescook>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <201905221316.865581CF@keescook>
User-Agent: NeoMutt/20170113 (1.7.2)
X-Mailman-Approved-At: Thu, 23 May 2019 15:56:46 +0000
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>, kvm@vger.kernel.org,
 Szabolcs Nagy <Szabolcs.Nagy@arm.com>, Will Deacon <will.deacon@arm.com>,
 dri-devel@lists.freedesktop.org,
 Linux Memory Management List <linux-mm@kvack.org>,
 Khalid Aziz <khalid.aziz@oracle.com>,
 "open list:KERNEL SELFTEST FRAMEWORK" <linux-kselftest@vger.kernel.org>,
 Vincenzo Frascino <vincenzo.frascino@arm.com>,
 Jacob Bramley <Jacob.Bramley@arm.com>, Leon Romanovsky <leon@kernel.org>,
 linux-rdma@vger.kernel.org, amd-gfx@lists.freedesktop.org,
 Dmitry Vyukov <dvyukov@google.com>, Dave Martin <Dave.Martin@arm.com>,
 Evgenii Stepanov <eugenis@google.com>, linux-media@vger.kernel.org,
 Kevin Brodsky <kevin.brodsky@arm.com>,
 Ruben Ayrapetyan <Ruben.Ayrapetyan@arm.com>,
 Andrey Konovalov <andreyknvl@google.com>,
 Ramana Radhakrishnan <Ramana.Radhakrishnan@arm.com>,
 Alex Williamson <alex.williamson@redhat.com>,
 Yishai Hadas <yishaih@mellanox.com>,
 Mauro Carvalho Chehab <mchehab@kernel.org>,
 Linux ARM <linux-arm-kernel@lists.infradead.org>,
 Kostya Serebryany <kcc@google.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Felix Kuehling <Felix.Kuehling@amd.com>, LKML <linux-kernel@vger.kernel.org>,
 Jens Wiklander <jens.wiklander@linaro.org>, Lee Smith <Lee.Smith@arm.com>,
 Alexander Deucher <Alexander.Deucher@amd.com>,
 Andrew Morton <akpm@linux-foundation.org>, enh <enh@google.com>,
 Robin Murphy <robin.murphy@arm.com>,
 Christian Koenig <Christian.Koenig@amd.com>,
 Luc Van Oostenryck <luc.vanoostenryck@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCBNYXkgMjIsIDIwMTkgYXQgMDE6NDc6MzZQTSAtMDcwMCwgS2VlcyBDb29rIHdyb3Rl
Ogo+IE9uIFdlZCwgTWF5IDIyLCAyMDE5IGF0IDA1OjM1OjI3UE0gKzAxMDAsIENhdGFsaW4gTWFy
aW5hcyB3cm90ZToKPiA+IFRoZSB0d28gaGFyZCByZXF1aXJlbWVudHMgSSBoYXZlIGZvciBzdXBw
b3J0aW5nIGFueSBuZXcgaGFyZHdhcmUgZmVhdHVyZQo+ID4gaW4gTGludXggYXJlICgxKSBhIHNp
bmdsZSBrZXJuZWwgaW1hZ2UgYmluYXJ5IGNvbnRpbnVlcyB0byBydW4gb24gb2xkCj4gPiBoYXJk
d2FyZSB3aGlsZSBtYWtpbmcgdXNlIG9mIHRoZSBuZXcgZmVhdHVyZSBpZiBhdmFpbGFibGUgYW5k
ICgyKSBvbGQKPiA+IHVzZXIgc3BhY2UgY29udGludWVzIHRvIHJ1biBvbiBuZXcgaGFyZHdhcmUg
d2hpbGUgbmV3IHVzZXIgc3BhY2UgY2FuCj4gPiB0YWtlIGFkdmFudGFnZSBvZiB0aGUgbmV3IGZl
YXR1cmUuCj4gCj4gQWdyZWVkISBBbmQgSSB0aGluayB0aGUgc2VyaWVzIG1lZXRzIHRoZXNlIHJl
cXVpcmVtZW50cywgeWVzPwoKWWVzLiBJIG1lbnRpb25lZCB0aGlzIGp1c3QgdG8gbWFrZSBzdXJl
IHBlb3BsZSBkb24ndCBleHBlY3QgZGlmZmVyZW50Cmtlcm5lbCBidWlsZHMgZm9yIGRpZmZlcmVu
dCBoYXJkd2FyZSBmZWF0dXJlcy4KClRoZXJlIGlzIGFsc28gdGhlIG9idmlvdXMgcmVxdWlyZW1l
bnQgd2hpY2ggSSBkaWRuJ3QgbWVudGlvbjogbmV3IHVzZXIKc3BhY2UgY29udGludWVzIHRvIHJ1
biBvbiBuZXcvc3Vic2VxdWVudCBrZXJuZWwgdmVyc2lvbnMuIFRoYXQncyBvbmUgb2YKdGhlIHBv
aW50cyBvZiBjb250ZW50aW9uIGZvciB0aGlzIHNlcmllcyAoaWdub3JpbmcgTVRFKSB3aXRoIHRo
ZQptYWludGFpbmVycyBoYXZpbmcgdG8gZ3VhcmFudGVlIHRoaXMgd2l0aG91dCBtdWNoIGVmZm9y
dC4gSU9XLCBkbyB0aGUKNTAwSysgbmV3IGxpbmVzIGluIGEgc3Vic2VxdWVudCBrZXJuZWwgdmVy
c2lvbiBicmVhayBhbnkgdXNlciBzcGFjZSBvdXQKdGhlcmU/IEknbSBvbmx5IHRhbGtpbmcgYWJv
dXQgdGhlIHJlbGF4ZWQgVEJJIEFCSS4gQXJlIHRoZSB1c3VhbCBMVFAsCnN5c2thbGxlciBzdWZm
aWNpZW50PyBCZXR0ZXIgc3RhdGljIGFuYWx5c2lzIHdvdWxkIGRlZmluaXRlbHkgaGVscC4KCj4g
PiBGb3IgTVRFLCB3ZSBqdXN0IGNhbid0IGVuYWJsZSBpdCBieSBkZWZhdWx0IHNpbmNlIHRoZXJl
IGFyZSBhcHBsaWNhdGlvbnMKPiA+IHdobyB1c2UgdGhlIHRvcCBieXRlIG9mIGEgcG9pbnRlciBh
bmQgZXhwZWN0IGl0IHRvIGJlIGlnbm9yZWQgcmF0aGVyCj4gPiB0aGFuIGZhaWxpbmcgd2l0aCBh
IG1pc21hdGNoZWQgdGFnLiBKdXN0IHRoaW5rIG9mIGEgaHdhc2FuIGNvbXBpbGVkCj4gPiBiaW5h
cnkgd2hlcmUgVEJJIGlzIGV4cGVjdGVkIHRvIHdvcmsgYW5kIHlvdSB0cnkgdG8gcnVuIGl0IHdp
dGggTVRFCj4gPiB0dXJuZWQgb24uCj4gCj4gQWghIE9rYXksIGhlcmUncyB0aGUgdXNlLWNhc2Ug
SSB3YXNuJ3QgdGhpbmtpbmcgb2Y6IHRoZSBjb25jZXJuIGlzIFRCSQo+IGNvbmZsaWN0aW5nIHdp
dGggTVRFLiBBbmQgYW55dGhpbmcgdGhhdCBzdGFydHMgdXNpbmcgVEJJIHN1ZGRlbmx5IGNhbid0
Cj4gcnVuIGluIHRoZSBmdXR1cmUgYmVjYXVzZSBpdCdzIGJlaW5nIGludGVycHJldGVkIGFzIE1U
RSBiaXRzPyAoSXMgdGhhdAo+IHRoZSBBQkkgY29uY2Vybj8KClRoYXQncyBhbm90aGVyIGFzcGVj
dCB0byBmaWd1cmUgb3V0IHdoZW4gd2UgYWRkIHRoZSBNVEUgc3VwcG9ydC4gSSBkb24ndAp0aGlu
ayB3ZSdkIGJlIGFibGUgdG8gZG8gdGhpcyB3aXRob3V0IGFuIGV4cGxpY2l0IG9wdC1pbiBieSB0
aGUgdXNlci4KCk9yLCBpZiB3ZSBldmVyIHdhbnQgTVRFIHRvIGJlIHR1cm5lZCBvbiBieSBkZWZh
dWx0IChpLmUuIHRhZyBjaGVja2luZyksCmV2ZW4gaWYgZXZlcnl0aGluZyBpcyB0YWdnZWQgd2l0
aCAwLCB3ZSBoYXZlIHRvIGRpc2FsbG93IFRCSSBmb3IgdXNlcgphbmQgdGhpcyBpbmNsdWRlcyBo
d2FzYW4uIFRoZXJlIHdlcmUgYSBzbWFsbCBudW1iZXIgb2YgcHJvZ3JhbXMgdXNpbmcKdGhlIFRC
SSAoSSB0aGluayBzb21lIEphdmFTY3JpcHQgY29tcGlsZXJzIHRyaWVkIHRoaXMpLiBCdXQgbm93
IHdlIGFyZQpicmluZ2luZyBpbiB0aGUgaHdhc2FuIHN1cHBvcnQgYW5kIHRoaXMgY2FuIGJlIGEg
bGFyZ2UgdXNlciBiYXNlLiBTaGFsbAp3ZSBhZGQgYW4gRUxGIG5vdGUgZm9yIHN1Y2ggYmluYXJp
ZXMgdGhhdCB1c2UgVEJJL2h3YXNhbj8KClRoaXMgc2VyaWVzIGlzIHN0aWxsIHJlcXVpcmVkIGZv
ciBNVEUgYnV0IHdlIG1heSBkZWNpZGUgbm90IHRvIHJlbGF4IHRoZQpBQkkgYmxpbmRseSwgdGhl
cmVmb3JlIHRoZSBvcHQtaW4gKHByY3RsKSBvciBwZXJzb25hbGl0eSBpZGVhLgoKPiBJIGZlZWwg
bGlrZSB3ZSBnb3QgaW50byB0aGUgd2VlZHMgYWJvdXQgaW9jdGwoKXMgYW5kIG9uZS1vZmYgYnVn
cy4uLikKClRoaXMgbmVlZHMgc29sdmluZyBhcyB3ZWxsLiBNb3N0IGRyaXZlciBkZXZlbG9wZXJz
IHdvbid0IGtub3cgd2h5CnVudGFnZ2VkX2FkZHIoKSBpcyBuZWVkZWQgdW5sZXNzIHdlIGhhdmUg
bW9yZSByaWdvcm91cyB0eXBlcyBvciB0eXBlCmFubm90YXRpb25zIGFuZCBhIHRvb2wgdG8gY2hl
Y2sgdGhlbSAod2Ugc2hvdWxkIHByb2JhYmx5IHJldml2ZSB0aGUgb2xkCnNwYXJzZSB0aHJlYWQp
LgoKPiBTbyB0aGVyZSBuZWVkcyB0byBiZSBzb21lIHdheSB0byBsZXQgdGhlIGtlcm5lbCBrbm93
IHdoaWNoIG9mIHRocmVlCj4gdGhpbmdzIGl0IHNob3VsZCBiZSBkb2luZzoKPiAxLSBsZWF2aW5n
IHVzZXJzcGFjZSBhZGRyZXNzZXMgYXMtaXMgKHByZXNlbnQpCj4gMi0gd2lwaW5nIHRoZSB0b3Ag
Yml0cyBiZWZvcmUgdXNpbmcgKHRoaXMgc2VyaWVzKQoKKEknZCBzYXkgdG9sZXJhdGluZyByYXRo
ZXIgdGhhbiB3aXBpbmcgc2luY2UgZ2V0X3VzZXIgc3RpbGwgdXNlcyB0aGUgdGFnCmluIHRoZSBj
dXJyZW50IHNlcmllcykKClRoZSBjdXJyZW50IHNlcmllcyBkb2VzIG5vdCBhbGxvdyBhbnkgY2hv
aWNlIGJldHdlZW4gMSBhbmQgMiwgdGhlCmRlZmF1bHQgQUJJIGJhc2ljYWxseSBiZWNvbWVzIG9w
dGlvbiAyLgoKPiAzLSB3aXBpbmcgdGhlIHRvcCBiaXRzIGZvciBtb3N0IHRoaW5ncywgYnV0IHJl
dGFpbmluZyB0aGVtIGZvciBNVEUgYXMKPiAgICBuZWVkZWQgKHRoZSBmdXR1cmUpCgoyIGFuZCAz
IGFyZSBub3QgZW50aXJlbHkgY29tcGF0aWJsZSBhcyBhIHRhZ2dlZCBwb2ludGVyIG1heSBiZSBj
aGVja2VkCmFnYWluc3QgdGhlIG1lbW9yeSBjb2xvdXIgYnkgdGhlIGhhcmR3YXJlLiBTbyB5b3Ug
Y2FuJ3QgaGF2ZSBod2FzYW4KYmluYXJ5IHdpdGggTVRFIGVuYWJsZWQuCgo+IEkgZXhwZWN0IE1U
RSB0byBiZSB0aGUgImRlZmF1bHQiIGluIHRoZSBmdXR1cmUuIE9uY2UgYSBzeXN0ZW0ncyBsaWJj
IGhhcwo+IGdyb3duIHN1cHBvcnQgZm9yIGl0LCBldmVyeXRoaW5nIHdpbGwgYmUgdHJ5aW5nIHRv
IHVzZSBNVEUuIFRCSSB3aWxsIGJlCj4gdGhlIHNwZWNpYWwgY2FzZSAoYnV0IFRCSSBpcyBlZmZl
Y3RpdmVseSBhIHByZXJlcXVpc2l0ZSkuCgpUaGUga2VybmVsIGhhbmRsaW5nIG9mIHRhZ2dlZCBw
b2ludGVycyBpcyBpbmRlZWQgYSBwcmVyZXF1aXNpdGUuIFRoZSBBQkkKZGlzdGluY3Rpb24gYmV0
d2VlbiB0aGUgYWJvdmUgMiBhbmQgMyBuZWVkcyB0byBiZSBzb2x2ZWQuCgo+IEFGQUlDVCwgdGhl
IG9ubHkgZGlmZmVyZW5jZSBJIHNlZSBiZXR3ZWVuIDIgYW5kIDMgd2lsbCBiZSB0aGUgdGFnIGhh
bmRsaW5nCj4gaW4gdXNlcmNvcHkgKGFsbCBvdGhlciBwbGFjZXMgd2lsbCBjb250aW51ZSB0byBp
Z25vcmUgdGhlIHRvcCBiaXRzKS4gSXMKPiB0aGF0IGFjY3VyYXRlPwoKWWVzLCBtb3N0bHkgKGZv
ciB0aGUga2VybmVsKS4gSWYgTVRFIGlzIGVuYWJsZWQgYnkgZGVmYXVsdCBmb3IgYSBod2FzYW4K
YmluYXJ5LCBpdCB3aWxsIFNFR0ZBVUxUIChlaXRoZXIgaW4gdXNlciBzcGFjZSBvciBpbiBrZXJu
ZWwgdWFjY2VzcykuCkhvdyBkb2VzIHRoZSBrZXJuZWwgY2hvb3NlIGJldHdlZW4gMiBhbmQgMz8K
Cj4gSXMgIjEiIGEgcGVyLXByb2Nlc3Mgc3RhdGUgd2Ugd2FudCB0byBrZWVwPyAoSSBhc3N1bWUg
bm90LCBidXQgcmF0aGVyIGl0Cj4gaXMgYXZhaWxhYmxlIHZpYSBubyBUQkkvTVRFIENPTkZJRyBv
ciBhIGJvb3QtdGltZSBvcHRpb24sIGlmIGF0IGFsbD8pCgpQb3NzaWJseSwgdGhvdWdoIG5vdCBu
ZWNlc3NhcmlseSBwZXIgcHJvY2Vzcy4gRm9yIHRlc3Rpbmcgb3IgaWYKc29tZXRoaW5nIGdvZXMg
d3JvbmcgZHVyaW5nIGJvb3QsIGEgY29tbWFuZCBsaW5lIG9wdGlvbiB3aXRoIGEgc3RhdGljCmxh
YmVsIHdvdWxkIGRvLiBUaGUgQVRfRkxBR1MgYml0IG5lZWRzIHRvIGJlIGNoZWNrZWQgYnkgdXNl
ciBzcGFjZS4gTXkKcHJlZmVyZW5jZSB3b3VsZCBiZSBwZXItcHJvY2Vzcy4KCj4gVG8gY2hvb3Nl
IGJldHdlZW4gIjIiIGFuZCAiMyIsIGl0IHNlZW1zIHdlIG5lZWQgYSBwZXItcHJvY2VzcyBmbGFn
IHRvCj4gb3B0IGludG8gVEJJIChhbmQgb3V0IG9mIE1URSkuCgpPciBsZWF2ZSBvcHRpb24gMiB0
aGUgZGVmYXVsdCBhbmQgZ2V0IGl0IHRvIG9wdCBpbiB0byBNVEUuCgo+IEZvciB1c2Vyc3BhY2Us
IGhvdyB3b3VsZCBhIGZ1dHVyZSBiaW5hcnkgY2hvb3NlIFRCSSBvdmVyIE1URT8gSWYgaXQncwo+
IGEgbGlicmFyeSBpc3N1ZSwgd2UgY2FuJ3QgdXNlIGFuIEVMRiBiaXQsIHNpbmNlIHRoZSBjaG9p
Y2UgbWF5IGJlCj4gImxhdGUiIGFmdGVyIEVMRiBsb2FkICh0aGlzIGltcGxpZXMgdGhlIG5lZWQg
Zm9yIGEgcHJjdGwoKS4pIElmIGl0J3MKPiBiaW5hcnktb25seSAoImJ1aWx0IHdpdGggSFdLQVNh
biIpIHRoZW4gYW4gRUxGIGJpdCBzZWVtcyBzdWZmaWNpZW50Lgo+IEFuZCB3aXRob3V0IHRoZSBt
YXJraW5nLCBJJ2QgZXhwZWN0IHRoZSBrZXJuZWwgdG8gZW5mb3JjZSBNVEUgd2hlbgo+IHRoZXJl
IGFyZSBoaWdoIGJpdHMuCgpUaGUgY3VycmVudCBwbGFuIGlzIHRoYXQgYSBmdXR1cmUgYmluYXJ5
IGlzc3VlcyBhIHByY3RsKCksIGFmdGVyCmNoZWNraW5nIHRoZSBIV0NBUF9NVEUgYml0IChhcyBJ
IHJlcGxpZWQgdG8gRWxsaW90LCB0aGUgTVRFIGluc3RydWN0aW9ucwphcmUgbm90IGluIHRoZSBj
dXJyZW50IE5PUCBzcGFjZSkuIEknZCBleHBlY3QgdGhpcyB0byBiZSBkb25lIGJ5IHRoZQpsaWJj
IG9yIGR5bmFtaWMgbG9hZGVyIHVuZGVyIHRoZSBhc3N1bXB0aW9uIHRoYXQgdGhlIGJpbmFyaWVz
IGl0IGxvYWRzCmRvIF9ub3RfIHVzZSB0aGUgdG9wIHBvaW50ZXIgYnl0ZSBmb3IgYW55dGhpbmcg
ZWxzZS4gV2l0aCBod2FzYW4KY29tcGlsZWQgb2JqZWN0cyB0aGlzIGdldHMgbW9yZSBjb25mdXNp
bmcgKGFueSBFTEYgbm90ZSB0byBpZGVudGlmeQp0aGVtPykuCgoodGhlcmUgaXMgYWxzbyB0aGUg
cmlzayBvZiBleGlzdGluZyBhcHBsaWNhdGlvbnMgdXNpbmcgVEJJIGFscmVhZHkgYnV0CkknbSBu
b3QgYXdhcmUgb2YgYW55IHN0aWxsIHVzaW5nIHRoaXMgZmVhdHVyZSBvdGhlciB0aGFuIGh3YXNh
bikKCi0tIApDYXRhbGluCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
