Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5A83FA59B5
	for <lists+amd-gfx@lfdr.de>; Mon,  2 Sep 2019 16:48:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9A79E891F8;
	Mon,  2 Sep 2019 14:48:04 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A1B7F891F8
 for <amd-gfx@lists.freedesktop.org>; Mon,  2 Sep 2019 14:48:02 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id h7so12966385wrt.13
 for <amd-gfx@lists.freedesktop.org>; Mon, 02 Sep 2019 07:48:02 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=CwtW+VlcsXyOgSPcQKKmTyKRory6rdrf6Io4VtFsEas=;
 b=FDoySXojKzy4B4ufjHioWl+H69rkG7Aoijmc9Y3SHP6xBT1JQaHcJwIJ5EnZRW1Mbs
 DsMZnHXRunWEqzrsMwuwYCFkDdKIXoqgljtGe5vB4ABymFSq+hztGqafyqtN3DQoIaT+
 O0NpZ2fdiRezMLAoa59zN9/HDdurXCglJJLqr5aYlmkxoGuHZ717Ac+qeCNFupFTLFxI
 bM/TcY1KaYe4K/aXdqfY57C0QEegNUqRD8DsF7US782rbZQtqgZuJyfEJkOl/k92O6za
 w+B/ElGFjoxkXKFaXRNxgQozRa8yoqWbFgDuCTPwA/MMMBRv+2wtXC9bedCkDsV5Dix+
 3VAQ==
X-Gm-Message-State: APjAAAXMsyGBQSyMuQaNLVUCbPCEqzKCYmi4sdRaaHlNQ8DnxhdFZ0Iz
 TwCGFm+jbADfIMFEnwZzOCYXhO8XP3FkDdi8dm8=
X-Google-Smtp-Source: APXvYqx46PEwWpwt516eo+XDl7KtfyAzhNa3QVByGjLkDKRrFNCdZpUZl18eLw6PCYU0D4eBsn7Yh868HlJBKzyt6VY=
X-Received: by 2002:adf:f543:: with SMTP id j3mr2996240wrp.243.1567435681070; 
 Mon, 02 Sep 2019 07:48:01 -0700 (PDT)
MIME-Version: 1.0
References: <20190902105219.2813-1-christian.koenig@amd.com>
 <20190902105219.2813-3-christian.koenig@amd.com>
 <CAOWid-dhHxhuPRmz26POaFKnAo3LfvayGnEqA-wLCRn3kNsKsw@mail.gmail.com>
 <4e8e46ea-4492-480e-bcd3-58cc563e4520@gmail.com>
In-Reply-To: <4e8e46ea-4492-480e-bcd3-58cc563e4520@gmail.com>
From: Kenny Ho <y2kenny@gmail.com>
Date: Mon, 2 Sep 2019 10:47:49 -0400
Message-ID: <CAOWid-cCsb3OifZhuKA3-uPxj=S9TS96HBYb5b-xM-7+yzNRXA@mail.gmail.com>
Subject: Re: [PATCH 3/3] drm/amdgpu: remove amdgpu_cs_try_evict
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=CwtW+VlcsXyOgSPcQKKmTyKRory6rdrf6Io4VtFsEas=;
 b=hi9Z5X9c57lfb5kbOWfqUmQOuMFMdvkrn+WhHjWS1bnRw61Gv+dmp0DRIBglxBYmZu
 cdx5wMLRvD4I46uGbEH5K6KQtRL0u5Mwt5KbZ2Qg3dWGuisLorO9K8+ZD+PM2YbmvquN
 M1K0nlZWnufC/nfdsBB4z9F23NfYz1k6JjCFLYtjMqbAeFC/m8XF9mhytEx2UmQ7J0gz
 g0X9d/4l+8NdcgN8xI1hHYWd1/h/2aU++kGXt/aDOMFYp2URgkd4XeTq+L6dkIenoJsa
 BbNmVjbAOGNDZf6Ou3FpzaKRqrrE0f2pJjm2SXi6mnYpCPKr9m1bX5ngEp6HwyR5XLCW
 a/ZQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QWggb2ssIHRoYW5rcyBmb3IgdGhlIGV4cGxhbmF0aW9uLiAgQWJvdXQgdGhlIGxhc3QgYml0LCB3
aGF0IGlzIHRoZQpyZWFzb24gYmVoaW5kIHRoZSBkaWZmZXJlbmNlcyBpbiBwYWdlIHNpemU/ICAo
SSBhc3N1bWUgdGhhdCdzIHdoYXQgeW91Cm1lYW50IGJ5IFBURT8gIE9yIGlzIHRoYXQgc29tZXRo
aW5nIGVsc2U/KQoKUmVnYXJkcywKS2VubnkKCk9uIE1vbiwgU2VwIDIsIDIwMTkgYXQgMTA6MzEg
QU0gQ2hyaXN0aWFuIEvDtm5pZwo8Y2tvZW5pZy5sZWljaHR6dW1lcmtlbkBnbWFpbC5jb20+IHdy
b3RlOgo+Cj4gSGkgS2VubnksCj4KPiBXaGVuIHdlIGRvIGEgQ1Mgd2UgaGF2ZSBhIGNlcnRhaW4g
c2V0IG9mIGJ1ZmZlcnMgd2hpY2ggdGhlIHN1Ym1pc3Npb24gaXMKPiB3b3JraW5nIHdpdGggYW5k
IGFyZSBsb2NrZWQgZG93biB3aGlsZSB3ZSBwcmVwYXJlIHRoZSBzdWJtaXNzaW9uLgo+Cj4gVGhp
cyB3b3JraW5nIHNldCBjb250YWlucyBvZiB0aGUgYnVmZmVycyBpbiB0aGUgQk8gbGlzdCBhcyB3
ZWxsIGFzIHRoZQo+IG9uZSBpbiB0aGUgVk0gcGx1cyBvbmUgb3IgdHdvIGZvciBDU0EgYW5kIHVz
ZXIgZmVuY2VzIGV0Yy4uCj4KPiBOb3cgd2hhdCBjYW4gaGFwcGVuIGlzIHRoYXQgd2UgZmluZCB0
aGF0IHdlIG5lZWQgdG8gYWxsb2NhdGUgc29tZSBwYWdlCj4gdGFibGVzIGR1cmluZyB0aGUgQ1Mg
YW5kIHdoZW4gYSBsb3Qgb2YgQk9zIGFyZSBsb2NrZWQgZG93biBhbGxvY2F0aW5nIGEKPiBwYWdl
IHRhYmxlIGNhbiBmYWlsIGJlY2F1c2Ugd2UgY2FuJ3QgZXZpY3Qgb3RoZXIgQk9zLgo+Cj4gV2hh
dCB0aGlzIGNvZGUgdHJpZXMgdG9kbyBpcyB0byBldmljdCBzdHVmZiBmcm9tIHRoZSBCTyBsaXN0
IHRvIG1ha2UKPiByb29tIGZvciBWTSBCT3MsIGJ1dCBzaW5jZSBub3cgbXVjaCBtb3JlIEJPcyBh
cmUgYm91bmQgdG8gdGhlIFZNIHRoaXMKPiBkb2Vzbid0IHdvcmsgYW55IG1vcmUuCj4KPgo+IFRo
ZSByb290IG9mIHRoZSBwcm9ibGVtIGlzIHRoYXQgaXQgaXMgcmVhbGx5IHRyaWNreSB0byBmaWd1
cmUgb3V0IGhvdwo+IG11Y2ggbWVtb3J5IHlvdSBuZWVkIGZvciB0aGUgcGFnZSB0YWJsZXMgaW4g
dGhlIGZpcnN0IHBsYWNlLiBTZWUgZm9yIGEKPiBCTyBpbiBWUkFNIHdlIHVzdWFsbHkgbmVlZCBv
bmx5IG9uZSBQVEUgZm9yIGVhY2ggMk1CLCBidXQgZm9yIGEgQk8gaW4KPiBzeXN0ZW0gbWVtb3J5
IHdlIG5lZWQgb25lIFBURSBmb3IgZWFjaCA0SyBvZiBtZW1vcnkuCj4KPiBTbyB3aGF0IGNhbiBo
YXBwZW4gaXMgdGhhdCB5b3UgZXZpY3Qgc29tZXRoaW5nIGZyb20gVlJBTSBiZWNhdXNlIHlvdQo+
IG5lZWQgcm9vbSBhbmQgdGhhdCBldmljdGlvbiBpbiB0dXJuIG1ha2VzIHlvdSBuZWVkIGV2ZW4g
bW9yZSByb29tLi4uLi4KPgo+IEl0IGNhbiB0YWtlIGEgd2hpbGUgdW50aWwgdGhpcyByZWFjaGVz
IGEgc3RhYmxlIHBvaW50LCBzbyB0aGlzIHBhdGNoIHNldAo+IGhlcmUgc3dpdGNoZWQgZnJvbSBh
IGR5bmFtaWMgYXBwcm9hY2ggdG8ganVzdCBhc3N1bWluZyB0aGUgd29yc3QgYW5kCj4gcmVzZXJ2
aW5nIHNvbWUgbWVtb3J5IGZvciBwYWdlIHRhYmxlcy4KPgo+IFJlZ2FyZHMsCj4gQ2hyaXN0aWFu
Lgo+Cj4gQW0gMDIuMDkuMTkgdW0gMTY6MDcgc2NocmllYiBLZW5ueSBIbzoKPiA+IEhleSBDaHJp
c3RpYW4sCj4gPgo+ID4gQ2FuIHlvdSBnbyBpbnRvIGRldGFpbHMgYSBiaXQgbW9yZSBvbiB0aGUg
aG93IGFuZCB3aHkgdGhpcyBkb2Vzbid0Cj4gPiB3b3JrIHdlbGwgYW55bW9yZT8gIChzdWNoIGFz
IGl0cyByZWxhdGlvbnNoaXAgd2l0aCBwZXIgVk0gQk9zPykgIEkgYW0KPiA+IGN1cmlvdXMgdG8g
bGVhcm4gbW9yZSBiZWNhdXNlIEkgd2FzIHJlYWRpbmcgaW50byB0aGlzIGNodW5rIG9mIGNvZGUK
PiA+IGVhcmxpZXIuICBJcyB0aGlzIHNvbWV0aGluZyB0aGF0IHRoZSBTaHJpbmtlciBBUEkgY2Fu
IGhlbHAgd2l0aD8KPiA+Cj4gPiBSZWdhcmRzLAo+ID4gS2VubnkKPiA+Cj4gPiBPbiBNb24sIFNl
cCAyLCAyMDE5IGF0IDY6NTIgQU0gQ2hyaXN0aWFuIEvDtm5pZwo+ID4gPGNrb2VuaWcubGVpY2h0
enVtZXJrZW5AZ21haWwuY29tPiB3cm90ZToKPiA+PiBUcnlpbmcgdG8gZXZpY3QgdGhpbmdzIGZy
b20gdGhlIGN1cnJlbnQgd29ya2luZyBzZXQgZG9lc24ndCB3b3JrIHRoYXQKPiA+PiB3ZWxsIGFu
eW1vcmUgYmVjYXVzZSBvZiBwZXIgVk0gQk9zLgo+ID4+Cj4gPj4gUmVseSBvbiByZXNlcnZpbmcg
VlJBTSBmb3IgcGFnZSB0YWJsZXMgdG8gYXZvaWQgY29udGVudGlvbi4KPiA+Pgo+ID4+IFNpZ25l
ZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KPiA+
PiAtLS0KPiA+PiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oICAgIHwgIDEg
LQo+ID4+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzLmMgfCA3MSArLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+ICAgMiBmaWxlcyBjaGFuZ2VkLCAxIGluc2VydGlv
bigrKSwgNzEgZGVsZXRpb25zKC0pCj4gPj4KPiA+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHUuaAo+ID4+IGluZGV4IGEyMzYyMTNmOGU4ZS4uZDE5OTUxNTY3MzNlIDEwMDY0NAo+ID4+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCj4gPj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKPiA+PiBAQCAtNDc4LDcgKzQ3OCw2IEBAIHN0
cnVjdCBhbWRncHVfY3NfcGFyc2VyIHsKPiA+PiAgICAgICAgICB1aW50NjRfdCAgICAgICAgICAg
ICAgICAgICAgICAgIGJ5dGVzX21vdmVkX3Zpc190aHJlc2hvbGQ7Cj4gPj4gICAgICAgICAgdWlu
dDY0X3QgICAgICAgICAgICAgICAgICAgICAgICBieXRlc19tb3ZlZDsKPiA+PiAgICAgICAgICB1
aW50NjRfdCAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzX21vdmVkX3ZpczsKPiA+PiAtICAg
ICAgIHN0cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRyeSAgICAgKmV2aWN0YWJsZTsKPiA+Pgo+ID4+
ICAgICAgICAgIC8qIHVzZXIgZmVuY2UgKi8KPiA+PiAgICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Jv
X2xpc3RfZW50cnkgICAgIHVmX2VudHJ5Owo+ID4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9jcy5jCj4gPj4gaW5kZXggZmQ5NWI1ODZiNTkwLi4wMzE4MmQ5NjhkM2QgMTAwNjQ0Cj4g
Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzLmMKPiA+PiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYwo+ID4+IEBAIC00NDcsNzUg
KzQ0NywxMiBAQCBzdGF0aWMgaW50IGFtZGdwdV9jc19ib192YWxpZGF0ZShzdHJ1Y3QgYW1kZ3B1
X2NzX3BhcnNlciAqcCwKPiA+PiAgICAgICAgICByZXR1cm4gcjsKPiA+PiAgIH0KPiA+Pgo+ID4+
IC0vKiBMYXN0IHJlc29ydCwgdHJ5IHRvIGV2aWN0IHNvbWV0aGluZyBmcm9tIHRoZSBjdXJyZW50
IHdvcmtpbmcgc2V0ICovCj4gPj4gLXN0YXRpYyBib29sIGFtZGdwdV9jc190cnlfZXZpY3Qoc3Ry
dWN0IGFtZGdwdV9jc19wYXJzZXIgKnAsCj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzdHJ1Y3QgYW1kZ3B1X2JvICp2YWxpZGF0ZWQpCj4gPj4gLXsKPiA+PiAtICAgICAgIHVp
bnQzMl90IGRvbWFpbiA9IHZhbGlkYXRlZC0+YWxsb3dlZF9kb21haW5zOwo+ID4+IC0gICAgICAg
c3RydWN0IHR0bV9vcGVyYXRpb25fY3R4IGN0eCA9IHsgdHJ1ZSwgZmFsc2UgfTsKPiA+PiAtICAg
ICAgIGludCByOwo+ID4+IC0KPiA+PiAtICAgICAgIGlmICghcC0+ZXZpY3RhYmxlKQo+ID4+IC0g
ICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7Cj4gPj4gLQo+ID4+IC0gICAgICAgZm9yICg7JnAt
PmV2aWN0YWJsZS0+dHYuaGVhZCAhPSAmcC0+dmFsaWRhdGVkOwo+ID4+IC0gICAgICAgICAgICBw
LT5ldmljdGFibGUgPSBsaXN0X3ByZXZfZW50cnkocC0+ZXZpY3RhYmxlLCB0di5oZWFkKSkgewo+
ID4+IC0KPiA+PiAtICAgICAgICAgICAgICAgc3RydWN0IGFtZGdwdV9ib19saXN0X2VudHJ5ICpj
YW5kaWRhdGUgPSBwLT5ldmljdGFibGU7Cj4gPj4gLSAgICAgICAgICAgICAgIHN0cnVjdCBhbWRn
cHVfYm8gKmJvID0gdHRtX3RvX2FtZGdwdV9ibyhjYW5kaWRhdGUtPnR2LmJvKTsKPiA+PiAtICAg
ICAgICAgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBhbWRncHVfdHRtX2FkZXYo
Ym8tPnRiby5iZGV2KTsKPiA+PiAtICAgICAgICAgICAgICAgYm9vbCB1cGRhdGVfYnl0ZXNfbW92
ZWRfdmlzOwo+ID4+IC0gICAgICAgICAgICAgICB1aW50MzJfdCBvdGhlcjsKPiA+PiAtCj4gPj4g
LSAgICAgICAgICAgICAgIC8qIElmIHdlIHJlYWNoZWQgb3VyIGN1cnJlbnQgQk8gd2UgY2FuIGZv
cmdldCBpdCAqLwo+ID4+IC0gICAgICAgICAgICAgICBpZiAoYm8gPT0gdmFsaWRhdGVkKQo+ID4+
IC0gICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ID4+IC0KPiA+PiAtICAgICAgICAgICAg
ICAgLyogV2UgY2FuJ3QgbW92ZSBwaW5uZWQgQk9zIGhlcmUgKi8KPiA+PiAtICAgICAgICAgICAg
ICAgaWYgKGJvLT5waW5fY291bnQpCj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgY29udGlu
dWU7Cj4gPj4gLQo+ID4+IC0gICAgICAgICAgICAgICBvdGhlciA9IGFtZGdwdV9tZW1fdHlwZV90
b19kb21haW4oYm8tPnRiby5tZW0ubWVtX3R5cGUpOwo+ID4+IC0KPiA+PiAtICAgICAgICAgICAg
ICAgLyogQ2hlY2sgaWYgdGhpcyBCTyBpcyBpbiBvbmUgb2YgdGhlIGRvbWFpbnMgd2UgbmVlZCBz
cGFjZSBmb3IgKi8KPiA+PiAtICAgICAgICAgICAgICAgaWYgKCEob3RoZXIgJiBkb21haW4pKQo+
ID4+IC0gICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+ID4+IC0KPiA+PiAtICAgICAg
ICAgICAgICAgLyogQ2hlY2sgaWYgd2UgY2FuIG1vdmUgdGhpcyBCTyBzb21ld2hlcmUgZWxzZSAq
Lwo+ID4+IC0gICAgICAgICAgICAgICBvdGhlciA9IGJvLT5hbGxvd2VkX2RvbWFpbnMgJiB+ZG9t
YWluOwo+ID4+IC0gICAgICAgICAgICAgICBpZiAoIW90aGVyKQo+ID4+IC0gICAgICAgICAgICAg
ICAgICAgICAgIGNvbnRpbnVlOwo+ID4+IC0KPiA+PiAtICAgICAgICAgICAgICAgLyogR29vZCB3
ZSBjYW4gdHJ5IHRvIG1vdmUgdGhpcyBCTyBzb21ld2hlcmUgZWxzZSAqLwo+ID4+IC0gICAgICAg
ICAgICAgICB1cGRhdGVfYnl0ZXNfbW92ZWRfdmlzID0KPiA+PiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICFhbWRncHVfZ21jX3ZyYW1fZnVsbF92aXNpYmxlKCZhZGV2LT5nbWMpICYm
Cj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfYm9faW5fY3B1X3Zp
c2libGVfdnJhbShibyk7Cj4gPj4gLSAgICAgICAgICAgICAgIGFtZGdwdV9ib19wbGFjZW1lbnRf
ZnJvbV9kb21haW4oYm8sIG90aGVyKTsKPiA+PiAtICAgICAgICAgICAgICAgciA9IHR0bV9ib192
YWxpZGF0ZSgmYm8tPnRibywgJmJvLT5wbGFjZW1lbnQsICZjdHgpOwo+ID4+IC0gICAgICAgICAg
ICAgICBwLT5ieXRlc19tb3ZlZCArPSBjdHguYnl0ZXNfbW92ZWQ7Cj4gPj4gLSAgICAgICAgICAg
ICAgIGlmICh1cGRhdGVfYnl0ZXNfbW92ZWRfdmlzKQo+ID4+IC0gICAgICAgICAgICAgICAgICAg
ICAgIHAtPmJ5dGVzX21vdmVkX3ZpcyArPSBjdHguYnl0ZXNfbW92ZWQ7Cj4gPj4gLQo+ID4+IC0g
ICAgICAgICAgICAgICBpZiAodW5saWtlbHkocikpCj4gPj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgYnJlYWs7Cj4gPj4gLQo+ID4+IC0gICAgICAgICAgICAgICBwLT5ldmljdGFibGUgPSBsaXN0
X3ByZXZfZW50cnkocC0+ZXZpY3RhYmxlLCB0di5oZWFkKTsKPiA+PiAtICAgICAgICAgICAgICAg
bGlzdF9tb3ZlKCZjYW5kaWRhdGUtPnR2LmhlYWQsICZwLT52YWxpZGF0ZWQpOwo+ID4+IC0KPiA+
PiAtICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7Cj4gPj4gLSAgICAgICB9Cj4gPj4gLQo+ID4+
IC0gICAgICAgcmV0dXJuIGZhbHNlOwo+ID4+IC19Cj4gPj4gLQo+ID4+ICAgc3RhdGljIGludCBh
bWRncHVfY3NfdmFsaWRhdGUodm9pZCAqcGFyYW0sIHN0cnVjdCBhbWRncHVfYm8gKmJvKQo+ID4+
ICAgewo+ID4+ICAgICAgICAgIHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwID0gcGFyYW07Cj4g
Pj4gICAgICAgICAgaW50IHI7Cj4gPj4KPiA+PiAtICAgICAgIGRvIHsKPiA+PiAtICAgICAgICAg
ICAgICAgciA9IGFtZGdwdV9jc19ib192YWxpZGF0ZShwLCBibyk7Cj4gPj4gLSAgICAgICB9IHdo
aWxlIChyID09IC1FTk9NRU0gJiYgYW1kZ3B1X2NzX3RyeV9ldmljdChwLCBibykpOwo+ID4+ICsg
ICAgICAgciA9IGFtZGdwdV9jc19ib192YWxpZGF0ZShwLCBibyk7Cj4gPj4gICAgICAgICAgaWYg
KHIpCj4gPj4gICAgICAgICAgICAgICAgICByZXR1cm4gcjsKPiA+Pgo+ID4+IEBAIC01NTQsOSAr
NDkxLDYgQEAgc3RhdGljIGludCBhbWRncHVfY3NfbGlzdF92YWxpZGF0ZShzdHJ1Y3QgYW1kZ3B1
X2NzX3BhcnNlciAqcCwKPiA+PiAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZ191c2Vy
cHRyID0gdHJ1ZTsKPiA+PiAgICAgICAgICAgICAgICAgIH0KPiA+Pgo+ID4+IC0gICAgICAgICAg
ICAgICBpZiAocC0+ZXZpY3RhYmxlID09IGxvYmopCj4gPj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgcC0+ZXZpY3RhYmxlID0gTlVMTDsKPiA+PiAtCj4gPj4gICAgICAgICAgICAgICAgICByID0g
YW1kZ3B1X2NzX3ZhbGlkYXRlKHAsIGJvKTsKPiA+PiAgICAgICAgICAgICAgICAgIGlmIChyKQo+
ID4+ICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjsKPiA+PiBAQCAtNjU5LDkgKzU5
Myw2IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3BhcnNlcl9ib3Moc3RydWN0IGFtZGdwdV9jc19w
YXJzZXIgKnAsCj4gPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICZwLT5ieXRlc19tb3ZlZF92aXNfdGhyZXNob2xkKTsKPiA+PiAgICAgICAgICBwLT5ieXRlc19t
b3ZlZCA9IDA7Cj4gPj4gICAgICAgICAgcC0+Ynl0ZXNfbW92ZWRfdmlzID0gMDsKPiA+PiAtICAg
ICAgIHAtPmV2aWN0YWJsZSA9IGxpc3RfbGFzdF9lbnRyeSgmcC0+dmFsaWRhdGVkLAo+ID4+IC0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBhbWRncHVfYm9fbGlz
dF9lbnRyeSwKPiA+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0di5o
ZWFkKTsKPiA+Pgo+ID4+ICAgICAgICAgIHIgPSBhbWRncHVfdm1fdmFsaWRhdGVfcHRfYm9zKHAt
PmFkZXYsICZmcHJpdi0+dm0sCj4gPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgYW1kZ3B1X2NzX3ZhbGlkYXRlLCBwKTsKPiA+PiAtLQo+ID4+IDIuMTcuMQo+ID4+Cj4g
Pj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiA+PiBh
bWQtZ2Z4IG1haWxpbmcgbGlzdAo+ID4+IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4g
Pj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
Cj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdm
eCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
