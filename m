Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BE3DF7D4F2
	for <lists+amd-gfx@lfdr.de>; Thu,  1 Aug 2019 07:35:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 636D76E366;
	Thu,  1 Aug 2019 05:35:55 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr690085.outbound.protection.outlook.com [40.107.69.85])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 014B76E366
 for <amd-gfx@lists.freedesktop.org>; Thu,  1 Aug 2019 05:35:53 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=LtGXuc11iqsm4o612S7qEuBdmOMMCiWG79mpKCLl2kY7rklKPRnK/AjvIMur7951UqHtnuDaJYKbzkTW0NIXzUsVE319HGy0JCTigOi43553IDEAY9oPOF5RAGmkKS/McCGd5VQckO3PUDcrkYftPJ5yuAqGAvnngElLRQrmhNADP/78FX/ZdDiSN4kQ4n/kaSL31+c9EbDNehP4eOKGWYdXX1Oe1m0SxvXnLzontViFvJkJ9BRxvPxW97WkmrJJ/3q/OQ4pfmujewPsLLuh1k+UL2y2gP5Bq2NV8qKpu76OQ42YJeAEWxtzAZAHzMtId3WkKe47klsY2ST6Fvq5iw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=rNvVY/hwb6da3IzhVN3s9nOaJ2zbB+XYFWrl5jOF09I=;
 b=RVrZHosrEVWHUGUvaInqRdPYgDq0zb41a+IjCAFpHjox7wvA6UmYysS1zfbyrye2LJJA0bf4x1DVX+DgW9IP1B9RKhdJFnHSnZ4VRN7JLGPjTsqfoMnqY18m/MV9M95mWoFuTo7GRAA1VIzrUO+Crn6x2efHTErVD/OJtyAV+zdiusGBHofTwT9pIof86QG0V2Q/DHASSbLIPIBq+yq/LWayRm3rSdb0GpkCd+tcRQyDn1eF2SI67IhEjSWjVQvOhoBoVsZO/oMoFeFFfrX4M/seWQnwDd3W2qpiY4Hj1Axs8JnRTw4HEHzkM9JS/1Hx4X5KfqlZ5a3XSSxz/QsRHg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=amd.com;dmarc=pass action=none header.from=amd.com;dkim=pass
 header.d=amd.com;arc=none
Received: from DM5PR12MB1418.namprd12.prod.outlook.com (10.168.240.15) by
 DM5SPR00MB248.namprd12.prod.outlook.com (10.168.180.152) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2115.15; Thu, 1 Aug 2019 05:35:51 +0000
Received: from DM5PR12MB1418.namprd12.prod.outlook.com
 ([fe80::9562:72ed:ddbe:868c]) by DM5PR12MB1418.namprd12.prod.outlook.com
 ([fe80::9562:72ed:ddbe:868c%6]) with mapi id 15.20.2136.010; Thu, 1 Aug 2019
 05:35:51 +0000
From: "Zhang, Hawking" <Hawking.Zhang@amd.com>
To: "Liu, Monk" <Monk.Liu@amd.com>, "Deucher, Alexander"
 <Alexander.Deucher@amd.com>, "Koenig, Christian" <Christian.Koenig@amd.com>
Subject: RE: [PATCH] drm/amdgpu: fix double ucode load by PSP(v3)
Thread-Topic: [PATCH] drm/amdgpu: fix double ucode load by PSP(v3)
Thread-Index: AQHVR32W6jvA2FapmUGUhHrz7eGVOabkbt+AgAE4dYCAABlxMA==
Date: Thu, 1 Aug 2019 05:35:51 +0000
Message-ID: <DM5PR12MB1418E31F293C38723E6384D2FCDE0@DM5PR12MB1418.namprd12.prod.outlook.com>
References: <1564563264-30902-1-git-send-email-Monk.Liu@amd.com>
 <MN2PR12MB2975165B4F9C506815EDAC798FDF0@MN2PR12MB2975.namprd12.prod.outlook.com>
 <MN2PR12MB393397B3BE08ED66816E861684DE0@MN2PR12MB3933.namprd12.prod.outlook.com>
In-Reply-To: <MN2PR12MB393397B3BE08ED66816E861684DE0@MN2PR12MB3933.namprd12.prod.outlook.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: e6e7edc8-616b-4fd8-9f03-08d716421db3
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:DM5SPR00MB248; 
x-ms-traffictypediagnostic: DM5SPR00MB248:
x-ms-exchange-purlcount: 1
x-microsoft-antispam-prvs: <DM5SPR00MB248E142255F771945FF9C24FCDE0@DM5SPR00MB248.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:3173;
x-forefront-prvs: 01165471DB
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(136003)(346002)(396003)(376002)(366004)(189003)(199004)(13464003)(11346002)(486006)(476003)(99286004)(68736007)(33656002)(71190400001)(6636002)(14444005)(446003)(256004)(74316002)(76176011)(102836004)(6506007)(26005)(186003)(66556008)(66066001)(71200400001)(305945005)(76116006)(6246003)(66446008)(64756008)(7696005)(53546011)(5660300002)(25786009)(66476007)(2906002)(229853002)(6116002)(81156014)(81166006)(53936002)(316002)(7736002)(4326008)(9686003)(14454004)(55016002)(6306002)(54906003)(110136005)(478600001)(86362001)(6436002)(52536014)(8936002)(66946007)(3846002)(8676002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM5SPR00MB248;
 H:DM5PR12MB1418.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: H5jBwNfWuouR5irbz6SDtPMEvISMMmL1mfXnk92ha346WWWpo/wIEv8n+RmLiZUE2dAOkwUzaD2w4uWK9RdXJPcyMqrSq99WPv/yOg0HOQuf3E1MjPO5uR4JRXtUCog/6B+S/Gnd3xbbbwA4wOF1ugIMN/MxtfX8Z/aFAAu2UxUYXEizq/UDEi6NupvVCGWfY4ykEZNQiInKNnxzbNTrFj6eoRgZZscrvd21DVNAcKR7v2uBAVXWMODa3YzdLVR72ERSeilNQJXpe8VvjO4mXIeTWffvLn4PYuiFkmzAaE6KUTis5mSeMgVhrmCZvSsysoAcGTv+SSR1J1vVYdlRntvN0DGH0rO8U4vvyk178U3P68tfAS/kHG45ASY+SpCkxg4TyVnO5WFmiBt2p4IwKFf5/W8F9e0VI2Btn7VrQrY=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: e6e7edc8-616b-4fd8-9f03-08d716421db3
X-MS-Exchange-CrossTenant-originalarrivaltime: 01 Aug 2019 05:35:51.7357 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: hawzhang@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5SPR00MB248
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=rNvVY/hwb6da3IzhVN3s9nOaJ2zbB+XYFWrl5jOF09I=;
 b=mEym93Fm+LdtIJgwdmP3xXrPiFZHHUtQkEUObMOLeJaLi2ugMGZdXxbDR9oDNdcRns1ZZANd0bfQn8PQJhSx3JpldQITWQIc0X3cprBhX4Zpw8+EQF3OoTgeJoud3hkzuc40nuuQxFizCk9Nbj/tRgdZZtKe52mjDJ3dmEawuiw=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Hawking.Zhang@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deng, Emily" <Emily.Deng@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

Tm8gb2JqZWN0aW9uIGZyb20gbWUgZm9yIHRoaXMgcGF0Y2guIEJ1dCBJIHdhcyByZWFsbHkgc2hv
Y2tlZCBhdCBmaXJzdCBnbGFuY2UgdG8gdGhlIHN1YmplY3QgYW5kIHRob3VnaHQgaG93IGFtZGdw
dSBkcml2ZXIgc3Vydml2ZSB3aXRoIHRoaXMgYnVnIGluIGJhcmUtbWV0YWwgY2FzZS4uLiBJdCB3
YXMgdGhlbiBwcm92ZWQgdG8gYmUgdGhpcyBpcyBTUklPViBzcGVjaWZpYyBidWcgYmVjYXVzZSBw
c3Agd2FzIGluaXRpYWxpemVkIGFoZWFkIG9mIGloIGluIHNyaW92IHVzZSBjYXNlLiBUaGUgc3Rh
dHVzLmh3IGZpeCBpbiBzdXNwZW5kL3Jlc3VtZSBjYWxsIHN0YWNrIGxvb2tzIHJlYXNvbmFibGUg
dG8gbWUuIFBhdGNoIGlzDQoNClJldmlld2VkLWJ5OiBIYXdraW5nIFpoYW5nIDxIYXdraW5nLlpo
YW5nQGFtZC5jb20+DQoNClJlZ2FyZHMsDQpIYXdraW5nDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2Ut
LS0tLQ0KRnJvbTogTGl1LCBNb25rIDxNb25rLkxpdUBhbWQuY29tPiANClNlbnQ6IDIwMTnlubQ4
5pyIMeaXpSAxMTo0Mw0KVG86IERldWNoZXIsIEFsZXhhbmRlciA8QWxleGFuZGVyLkRldWNoZXJA
YW1kLmNvbT47IEtvZW5pZywgQ2hyaXN0aWFuIDxDaHJpc3RpYW4uS29lbmlnQGFtZC5jb20+OyBa
aGFuZywgSGF3a2luZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPg0KQ2M6IERlbmcsIEVtaWx5IDxF
bWlseS5EZW5nQGFtZC5jb20+OyBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KU3ViamVj
dDogUkU6IFtQQVRDSF0gZHJtL2FtZGdwdTogZml4IGRvdWJsZSB1Y29kZSBsb2FkIGJ5IFBTUCh2
MykNCg0KSWYgbm8gb2JqZWN0aW9uIEkgd291bGQgc3VibWl0IHRob3NlIHRocmVlIHBhdGNoZXMs
IHRoYW5rcw0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQpNb25rIExp
dXxHUFUgVmlydHVhbGl6YXRpb24gVGVhbSB8QU1EDQoNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdl
LS0tLS0NCkZyb206IERlbmcsIEVtaWx5IDxFbWlseS5EZW5nQGFtZC5jb20+DQpTZW50OiBXZWRu
ZXNkYXksIEp1bHkgMzEsIDIwMTkgNTowNCBQTQ0KVG86IExpdSwgTW9uayA8TW9uay5MaXVAYW1k
LmNvbT47IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQpDYzogTGl1LCBNb25rIDxNb25r
LkxpdUBhbWQuY29tPg0KU3ViamVjdDogUkU6IFtQQVRDSF0gZHJtL2FtZGdwdTogZml4IGRvdWJs
ZSB1Y29kZSBsb2FkIGJ5IFBTUCh2MykNCg0KQWxsIGxvb2tzIGdvb2QgdG8gbWUuIFJldmlld2Vk
LWJ5OiBFbWlseSBEZW5nIDxFbWlseS5EZW5nQGFtZC5jb20+Lg0KDQo+LS0tLS1PcmlnaW5hbCBN
ZXNzYWdlLS0tLS0NCj5Gcm9tOiBhbWQtZ2Z4IDxhbWQtZ2Z4LWJvdW5jZXNAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnPiBPbiBCZWhhbGYgT2YgTW9uayANCj5MaXUNCj5TZW50OiBXZWRuZXNkYXksIEp1
bHkgMzEsIDIwMTkgNDo1NCBQTQ0KPlRvOiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0K
PkNjOiBMaXUsIE1vbmsgPE1vbmsuTGl1QGFtZC5jb20+DQo+U3ViamVjdDogW1BBVENIXSBkcm0v
YW1kZ3B1OiBmaXggZG91YmxlIHVjb2RlIGxvYWQgYnkgUFNQKHYzKQ0KPg0KPnByZXZpb3VzbHkg
dGhlIHVjb2RlIGxvYWRpbmcgb2YgUFNQIHdhcyByZXByZWF0ZWQsIG9uZSBleGVjdXRlZCBpbg0K
PnBoYXNlXzEgaW5pdC9yZS1pbml0L3Jlc3VtZSBhbmQgdGhlIG90aGVyIGluIGZ3X2xvYWRpbmcg
cm91dGluZQ0KPg0KPkF2b2lkIHRoaXMgZG91YmxlIGxvYWRpbmcgYnkgY2xlYXJpbmcgaXBfYmxv
Y2tzLnN0YXR1cy5odyBpbiBzdXNwZW5kIG9yIA0KPnJlc2V0IHByaW9yIHRvIHRoZSBGVyBsb2Fk
aW5nIGFuZCBhbnkgYmxvY2sncyBod19pbml0L3Jlc3VtZQ0KPg0KPnYyOg0KPnN0aWxsIGRvIHRo
ZSBzbXUgZncgbG9hZGluZyBzaW5jZSBpdCBpcyBuZWVkZWQgYnkgYmFyZS1tZXRhbA0KPg0KPnYz
Og0KPmRyb3AgdGhlIGNoYW5nZSBpbiByZWluaXRfZWFybHlfc3Jpb3YsIGp1c3QgY2xlYXIgYWxs
IGJsb2NrJ3Mgc3RhdHVzLmh3IA0KPmluIHRoZSBoZWFkIHBsYWNlIGFuZCBzZXQgdGhlIHN0YXR1
cy5odyBhZnRlciBod19pbml0IGRvbmUgaXMgZW5vdWdoDQo+DQo+U2lnbmVkLW9mZi1ieTogTW9u
ayBMaXUgPE1vbmsuTGl1QGFtZC5jb20+DQo+LS0tDQo+IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9kZXZpY2UuYyB8IDU5DQo+KysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0t
DQo+IDEgZmlsZSBjaGFuZ2VkLCAzOCBpbnNlcnRpb25zKCspLCAyMSBkZWxldGlvbnMoLSkNCj4N
Cj5kaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5j
DQo+Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMNCj5pbmRleCA2
Y2IzNThjLi4zMDQzNmJhIDEwMDY0NA0KPi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9kZXZpY2UuYw0KPisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9kZXZpY2UuYw0KPkBAIC0xNjczLDI4ICsxNjczLDM0IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2Rl
dmljZV9md19sb2FkaW5nKHN0cnVjdCANCj5hbWRncHVfZGV2aWNlICphZGV2KQ0KPg0KPiAJaWYg
KGFkZXYtPmFzaWNfdHlwZSA+PSBDSElQX1ZFR0ExMCkgew0KPiAJCWZvciAoaSA9IDA7IGkgPCBh
ZGV2LT5udW1faXBfYmxvY2tzOyBpKyspIHsNCj4tCQkJaWYgKGFkZXYtPmlwX2Jsb2Nrc1tpXS52
ZXJzaW9uLT50eXBlID09DQo+QU1EX0lQX0JMT0NLX1RZUEVfUFNQKSB7DQo+LQkJCQlpZiAoYWRl
di0+aW5fZ3B1X3Jlc2V0IHx8IGFkZXYtPmluX3N1c3BlbmQpIHsNCj4tCQkJCQlpZiAoYW1kZ3B1
X3NyaW92X3ZmKGFkZXYpICYmIGFkZXYtDQo+PmluX2dwdV9yZXNldCkNCj4tCQkJCQkJYnJlYWs7
IC8qIHNyaW92IGdwdSByZXNldCwgcHNwDQo+bmVlZCB0byBkbyBod19pbml0IGJlZm9yZSBJSCBi
ZWNhdXNlIG9mIGh3IGxpbWl0ICovDQo+LQkJCQkJciA9IGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJz
aW9uLT5mdW5jcy0NCj4+cmVzdW1lKGFkZXYpOw0KPi0JCQkJCWlmIChyKSB7DQo+LQkJCQkJCURS
TV9FUlJPUigicmVzdW1lIG9mIElQDQo+YmxvY2sgPCVzPiBmYWlsZWQgJWRcbiIsDQo+KwkJCWlm
IChhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+dHlwZSAhPQ0KPkFNRF9JUF9CTE9DS19UWVBF
X1BTUCkNCj4rCQkJCWNvbnRpbnVlOw0KPisNCj4rCQkJLyogbm8gbmVlZCB0byBkbyB0aGUgZncg
bG9hZGluZyBhZ2FpbiBpZiBhbHJlYWR5DQo+ZG9uZSovDQo+KwkJCWlmIChhZGV2LT5pcF9ibG9j
a3NbaV0uc3RhdHVzLmh3ID09IHRydWUpDQo+KwkJCQlicmVhazsNCj4rDQo+KwkJCWlmIChhZGV2
LT5pbl9ncHVfcmVzZXQgfHwgYWRldi0+aW5fc3VzcGVuZCkgew0KPisJCQkJciA9IGFkZXYtPmlw
X2Jsb2Nrc1tpXS52ZXJzaW9uLT5mdW5jcy0NCj4+cmVzdW1lKGFkZXYpOw0KPisJCQkJaWYgKHIp
IHsNCj4rCQkJCQlEUk1fRVJST1IoInJlc3VtZSBvZiBJUCBibG9jayA8JXM+DQo+ZmFpbGVkICVk
XG4iLA0KPiAJCQkJCQkJICBhZGV2LQ0KPj5pcF9ibG9ja3NbaV0udmVyc2lvbi0+ZnVuY3MtPm5h
bWUsIHIpOw0KPi0JCQkJCQlyZXR1cm4gcjsNCj4tCQkJCQl9DQo+LQkJCQl9IGVsc2Ugew0KPi0J
CQkJCXIgPSBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+ZnVuY3MtDQo+Pmh3X2luaXQoYWRl
dik7DQo+LQkJCQkJaWYgKHIpIHsNCj4tCQkJCQkJRFJNX0VSUk9SKCJod19pbml0IG9mIElQDQo+
YmxvY2sgPCVzPiBmYWlsZWQgJWRcbiIsDQo+LQkJCQkJCSAgYWRldi0+aXBfYmxvY2tzW2ldLnZl
cnNpb24tDQo+PmZ1bmNzLT5uYW1lLCByKTsNCj4tCQkJCQkJcmV0dXJuIHI7DQo+LQkJCQkJfQ0K
PisJCQkJCXJldHVybiByOw0KPisJCQkJfQ0KPisJCQl9IGVsc2Ugew0KPisJCQkJciA9IGFkZXYt
PmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT5mdW5jcy0NCj4+aHdfaW5pdChhZGV2KTsNCj4rCQkJCWlm
IChyKSB7DQo+KwkJCQkJRFJNX0VSUk9SKCJod19pbml0IG9mIElQIGJsb2NrIDwlcz4NCj5mYWls
ZWQgJWRcbiIsDQo+KwkJCQkJCQkgIGFkZXYtDQo+PmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT5mdW5j
cy0+bmFtZSwgcik7DQo+KwkJCQkJcmV0dXJuIHI7DQo+IAkJCQl9DQo+LQkJCQlhZGV2LT5pcF9i
bG9ja3NbaV0uc3RhdHVzLmh3ID0gdHJ1ZTsNCj4gCQkJfQ0KPisNCj4rCQkJYWRldi0+aXBfYmxv
Y2tzW2ldLnN0YXR1cy5odyA9IHRydWU7DQo+KwkJCWJyZWFrOw0KPiAJCX0NCj4gCX0NCj4rDQo+
IAlyID0gYW1kZ3B1X3BtX2xvYWRfc211X2Zpcm13YXJlKGFkZXYsICZzbXVfdmVyc2lvbik7DQo+
DQo+IAlyZXR1cm4gcjsNCj5AQCAtMjEzNiw3ICsyMTQyLDkgQEAgc3RhdGljIGludA0KPmFtZGdw
dV9kZXZpY2VfaXBfc3VzcGVuZF9waGFzZTEoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+
IAkJCWlmIChyKSB7DQo+IAkJCQlEUk1fRVJST1IoInN1c3BlbmQgb2YgSVAgYmxvY2sgPCVzPiBm
YWlsZWQgJWRcbiIsDQo+IAkJCQkJICBhZGV2LT5pcF9ibG9ja3NbaV0udmVyc2lvbi0+ZnVuY3Mt
DQo+Pm5hbWUsIHIpOw0KPisJCQkJcmV0dXJuIHI7DQo+IAkJCX0NCj4rCQkJYWRldi0+aXBfYmxv
Y2tzW2ldLnN0YXR1cy5odyA9IGZhbHNlOw0KPiAJCX0NCj4gCX0NCj4NCj5AQCAtMjE3NiwxNCAr
MjE4NCwxNiBAQCBzdGF0aWMgaW50DQo+YW1kZ3B1X2RldmljZV9pcF9zdXNwZW5kX3BoYXNlMihz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4gCQkJaWYgKGlzX3N1cHBvcnRfc3dfc211KGFk
ZXYpKSB7DQo+IAkJCQkvKiB0b2RvICovDQo+IAkJCX0gZWxzZSBpZiAoYWRldi0+cG93ZXJwbGF5
LnBwX2Z1bmNzICYmDQo+LQkJCQkgICBhZGV2LT5wb3dlcnBsYXkucHBfZnVuY3MtPnNldF9tcDFf
c3RhdGUpDQo+ew0KPisJCQkJCSAgIGFkZXYtPnBvd2VycGxheS5wcF9mdW5jcy0NCj4+c2V0X21w
MV9zdGF0ZSkgew0KPiAJCQkJciA9IGFkZXYtPnBvd2VycGxheS5wcF9mdW5jcy0NCj4+c2V0X21w
MV9zdGF0ZSgNCj4gCQkJCQlhZGV2LT5wb3dlcnBsYXkucHBfaGFuZGxlLA0KPiAJCQkJCWFkZXYt
Pm1wMV9zdGF0ZSk7DQo+IAkJCQlpZiAocikgew0KPiAJCQkJCURSTV9FUlJPUigiU01DIGZhaWxl
ZCB0byBzZXQgbXAxDQo+c3RhdGUgJWQsICVkXG4iLA0KPiAJCQkJCQkgIGFkZXYtPm1wMV9zdGF0
ZSwgcik7DQo+KwkJCQkJcmV0dXJuIHI7DQo+IAkJCQl9DQo+KwkJCQlhZGV2LT5pcF9ibG9ja3Nb
aV0uc3RhdHVzLmh3ID0gZmFsc2U7DQo+IAkJCX0NCj4gCQl9DQo+IAl9DQo+QEAgLTIyMzgsNiAr
MjI0OCw3IEBAIHN0YXRpYyBpbnQNCj5hbWRncHVfZGV2aWNlX2lwX3JlaW5pdF9lYXJseV9zcmlv
dihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4gCQlmb3IgKGogPSAwOyBqIDwgYWRldi0+
bnVtX2lwX2Jsb2NrczsgaisrKSB7DQo+IAkJCWJsb2NrID0gJmFkZXYtPmlwX2Jsb2Nrc1tqXTsN
Cj4NCj4rCQkJYmxvY2stPnN0YXR1cy5odyA9IGZhbHNlOw0KPiAJCQlpZiAoYmxvY2stPnZlcnNp
b24tPnR5cGUgIT0gaXBfb3JkZXJbaV0gfHwNCj4gCQkJCSFibG9jay0+c3RhdHVzLnZhbGlkKQ0K
PiAJCQkJY29udGludWU7DQo+QEAgLTIyNDYsNiArMjI1Nyw3IEBAIHN0YXRpYyBpbnQNCj5hbWRn
cHVfZGV2aWNlX2lwX3JlaW5pdF9lYXJseV9zcmlvdihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
dikNCj4gCQkJRFJNX0lORk8oIlJFLUlOSVQtZWFybHk6ICVzICVzXG4iLCBibG9jay0+dmVyc2lv
bi0NCj4+ZnVuY3MtPm5hbWUsIHI/ImZhaWxlZCI6InN1Y2NlZWRlZCIpOw0KPiAJCQlpZiAocikN
Cj4gCQkJCXJldHVybiByOw0KPisJCQlibG9jay0+c3RhdHVzLmh3ID0gdHJ1ZTsNCj4gCQl9DQo+
IAl9DQo+DQo+QEAgLTIyNzMsMTMgKzIyODUsMTUgQEAgc3RhdGljIGludA0KPmFtZGdwdV9kZXZp
Y2VfaXBfcmVpbml0X2xhdGVfc3Jpb3Yoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+IAkJ
CWJsb2NrID0gJmFkZXYtPmlwX2Jsb2Nrc1tqXTsNCj4NCj4gCQkJaWYgKGJsb2NrLT52ZXJzaW9u
LT50eXBlICE9IGlwX29yZGVyW2ldIHx8DQo+LQkJCQkhYmxvY2stPnN0YXR1cy52YWxpZCkNCj4r
CQkJCSFibG9jay0+c3RhdHVzLnZhbGlkIHx8DQo+KwkJCQlibG9jay0+c3RhdHVzLmh3KQ0KPiAJ
CQkJY29udGludWU7DQo+DQo+IAkJCXIgPSBibG9jay0+dmVyc2lvbi0+ZnVuY3MtPmh3X2luaXQo
YWRldik7DQo+IAkJCURSTV9JTkZPKCJSRS1JTklULWxhdGU6ICVzICVzXG4iLCBibG9jay0+dmVy
c2lvbi0NCj4+ZnVuY3MtPm5hbWUsIHI/ImZhaWxlZCI6InN1Y2NlZWRlZCIpOw0KPiAJCQlpZiAo
cikNCj4gCQkJCXJldHVybiByOw0KPisJCQlibG9jay0+c3RhdHVzLmh3ID0gdHJ1ZTsNCj4gCQl9
DQo+IAl9DQo+DQo+QEAgLTIzMDMsMTcgKzIzMTcsMTkgQEAgc3RhdGljIGludA0KPmFtZGdwdV9k
ZXZpY2VfaXBfcmVzdW1lX3BoYXNlMShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4gCWlu
dCBpLCByOw0KPg0KPiAJZm9yIChpID0gMDsgaSA8IGFkZXYtPm51bV9pcF9ibG9ja3M7IGkrKykg
ew0KPi0JCWlmICghYWRldi0+aXBfYmxvY2tzW2ldLnN0YXR1cy52YWxpZCkNCj4rCQlpZiAoIWFk
ZXYtPmlwX2Jsb2Nrc1tpXS5zdGF0dXMudmFsaWQgfHwgYWRldi0NCj4+aXBfYmxvY2tzW2ldLnN0
YXR1cy5odykNCj4gCQkJY29udGludWU7DQo+IAkJaWYgKGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJz
aW9uLT50eXBlID09IEFNRF9JUF9CTE9DS19UWVBFX0NPTU1PTiB8fA0KPiAJCSAgICBhZGV2LT5p
cF9ibG9ja3NbaV0udmVyc2lvbi0+dHlwZSA9PSBBTURfSVBfQkxPQ0tfVFlQRV9HTUMgfHwNCj4g
CQkgICAgYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPnR5cGUgPT0NCj5BTURfSVBfQkxPQ0tf
VFlQRV9JSCkgew0KPisNCj4gCQkJciA9IGFkZXYtPmlwX2Jsb2Nrc1tpXS52ZXJzaW9uLT5mdW5j
cy0+cmVzdW1lKGFkZXYpOw0KPiAJCQlpZiAocikgew0KPiAJCQkJRFJNX0VSUk9SKCJyZXN1bWUg
b2YgSVAgYmxvY2sgPCVzPiBmYWlsZWQgJWRcbiIsDQo+IAkJCQkJICBhZGV2LT5pcF9ibG9ja3Nb
aV0udmVyc2lvbi0+ZnVuY3MtDQo+Pm5hbWUsIHIpOw0KPiAJCQkJcmV0dXJuIHI7DQo+IAkJCX0N
Cj4rCQkJYWRldi0+aXBfYmxvY2tzW2ldLnN0YXR1cy5odyA9IHRydWU7DQo+IAkJfQ0KPiAJfQ0K
Pg0KPkBAIC0yMzM4LDcgKzIzNTQsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9kZXZpY2VfaXBfcmVz
dW1lX3BoYXNlMihzdHJ1Y3QNCj5hbWRncHVfZGV2aWNlICphZGV2KQ0KPiAJaW50IGksIHI7DQo+
DQo+IAlmb3IgKGkgPSAwOyBpIDwgYWRldi0+bnVtX2lwX2Jsb2NrczsgaSsrKSB7DQo+LQkJaWYg
KCFhZGV2LT5pcF9ibG9ja3NbaV0uc3RhdHVzLnZhbGlkKQ0KPisJCWlmICghYWRldi0+aXBfYmxv
Y2tzW2ldLnN0YXR1cy52YWxpZCB8fCBhZGV2LQ0KPj5pcF9ibG9ja3NbaV0uc3RhdHVzLmh3KQ0K
PiAJCQljb250aW51ZTsNCj4gCQlpZiAoYWRldi0+aXBfYmxvY2tzW2ldLnZlcnNpb24tPnR5cGUg
PT0gQU1EX0lQX0JMT0NLX1RZUEVfQ09NTU9OIHx8DQo+IAkJICAgIGFkZXYtPmlwX2Jsb2Nrc1tp
XS52ZXJzaW9uLT50eXBlID09IEFNRF9JUF9CTE9DS19UWVBFX0dNQyB8fCBAQA0KPi0yMzUxLDYg
KzIzNjcsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9kZXZpY2VfaXBfcmVzdW1lX3BoYXNlMihzdHJ1
Y3QNCj5hbWRncHVfZGV2aWNlICphZGV2KQ0KPiAJCQkJICBhZGV2LT5pcF9ibG9ja3NbaV0udmVy
c2lvbi0+ZnVuY3MtPm5hbWUsIHIpOw0KPiAJCQlyZXR1cm4gcjsNCj4gCQl9DQo+KwkJYWRldi0+
aXBfYmxvY2tzW2ldLnN0YXR1cy5odyA9IHRydWU7DQo+IAl9DQo+DQo+IAlyZXR1cm4gMDsNCj4t
LQ0KPjIuNy40DQo+DQo+X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18NCj5hbWQtZ2Z4IG1haWxpbmcgbGlzdA0KPmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnDQo+aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQt
Z2Z4DQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQt
Z2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
