Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5397950C25
	for <lists+amd-gfx@lfdr.de>; Mon, 24 Jun 2019 15:41:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C95DD89B20;
	Mon, 24 Jun 2019 13:41:18 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-DM3-obe.outbound.protection.outlook.com
 (mail-eopbgr800052.outbound.protection.outlook.com [40.107.80.52])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BF5D089B12
 for <amd-gfx@lists.freedesktop.org>; Mon, 24 Jun 2019 13:41:16 +0000 (UTC)
Received: from BL0PR12MB2580.namprd12.prod.outlook.com (52.132.27.147) by
 BL0PR12MB2403.namprd12.prod.outlook.com (52.132.11.21) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2008.16; Mon, 24 Jun 2019 13:41:14 +0000
Received: from BL0PR12MB2580.namprd12.prod.outlook.com
 ([fe80::991:7474:933e:d61]) by BL0PR12MB2580.namprd12.prod.outlook.com
 ([fe80::991:7474:933e:d61%4]) with mapi id 15.20.2008.014; Mon, 24 Jun 2019
 13:41:14 +0000
From: "Zeng, Oak" <Oak.Zeng@amd.com>
To: "Kuehling, Felix" <Felix.Kuehling@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH 1/1] drm/amdkfd: Add queue status indicator to HQD dump
Thread-Topic: [PATCH 1/1] drm/amdkfd: Add queue status indicator to HQD dump
Thread-Index: AQHVKGo4hraCzBsLlEmDeTvd8c+eV6aq0emQ
Date: Mon, 24 Jun 2019 13:41:14 +0000
Message-ID: <BL0PR12MB2580E815546C102A24AD52A180E00@BL0PR12MB2580.namprd12.prod.outlook.com>
References: <20190621194740.20332-1-Felix.Kuehling@amd.com>
In-Reply-To: <20190621194740.20332-1-Felix.Kuehling@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [165.204.54.211]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 696296c5-324b-4130-652b-08d6f8a9a076
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:BL0PR12MB2403; 
x-ms-traffictypediagnostic: BL0PR12MB2403:
x-ms-exchange-purlcount: 1
x-microsoft-antispam-prvs: <BL0PR12MB2403D760871F35C18DBE85E080E00@BL0PR12MB2403.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:1107;
x-forefront-prvs: 007814487B
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(136003)(39860400002)(396003)(366004)(346002)(376002)(13464003)(199004)(189003)(102836004)(66066001)(81156014)(8676002)(81166006)(2906002)(8936002)(9686003)(6506007)(53546011)(305945005)(7736002)(186003)(486006)(55016002)(446003)(476003)(11346002)(76116006)(73956011)(72206003)(6306002)(66556008)(66476007)(14454004)(64756008)(66446008)(66946007)(256004)(14444005)(74316002)(966005)(5660300002)(71190400001)(229853002)(6116002)(26005)(71200400001)(25786009)(99286004)(30864003)(86362001)(68736007)(110136005)(53936002)(6436002)(52536014)(33656002)(7696005)(6246003)(316002)(478600001)(2501003)(4326008)(53946003)(3846002)(76176011);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BL0PR12MB2403;
 H:BL0PR12MB2580.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: pBO7QvbA2+m8UgCm2d/yuLFOwO1+zm6bCzc6TYRM79FlWXdLQGq2ZU/Cqkx52AnqLT3Uf2UvQq9ZOdeAQAsh9pB2Ac+1WnqF6/UKBF2nJwRRQlA+gHvvRcblHe+gyEANqtmkBdjKXYcnkJbRh9D9vPXrmQMs3XEQHdhqJSG6+WOd2Sr+OTnwHWoN0KFaMbvoLlATwPSyw6I/OefkStP6Q6ZHfgI7PCpHXR23ntJPWhUYuYUVPAkLBNn4L4z1J4Q/1lwE7ffKy8DUxHNfI0ImxHP/ziDZBQgKmuatyDeIfh4Ho7Ftao3RPjUdfwP3Yw1AzKMdliXy7TYJnVcaagTccXik4/HtHq9vCyX4m7nIvYSPp2Hs/l0YJe4f2vMmLnP5+y5ZATvm4s+T+kntl7lo7LJTpouCeX8EMbZ6Xa49k2E=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 696296c5-324b-4130-652b-08d6f8a9a076
X-MS-Exchange-CrossTenant-originalarrivaltime: 24 Jun 2019 13:41:14.2130 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: ozeng@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BL0PR12MB2403
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=ns3cC3BYIiHPzCWZhY9+zvlqzG3WHmOF+j9xtKssuk0=;
 b=vGIDkO265fJM1MwhstYbNPwJ8mns1JyQUviznI7y26Cf1/SFGvbLrLQ/K2OY0I16UzUSSxptmgJbbIpb5Fhf2/ezcDnCjR4yMTEIYd5PwC7mRtLPfUppn5p9Ye8t7KkUjH9cd/JN30kwtUM+wkaNjGh1RDDal1Nzj4Fu9vo4jq8=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Oak.Zeng@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Kuehling, Felix" <Felix.Kuehling@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

SGkgRmVsaXgsDQoNClNlZSBvbmUgY29tbWVudCBpbmxpbmUNCg0KUmVnYXJkcywNCk9haw0KDQot
LS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogYW1kLWdmeCA8YW1kLWdmeC1ib3VuY2Vz
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZz4gT24gQmVoYWxmIE9mIEt1ZWhsaW5nLCBGZWxpeA0KU2Vu
dDogRnJpZGF5LCBKdW5lIDIxLCAyMDE5IDM6NDggUE0NClRvOiBhbWQtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZw0KQ2M6IEt1ZWhsaW5nLCBGZWxpeCA8RmVsaXguS3VlaGxpbmdAYW1kLmNvbT4N
ClN1YmplY3Q6IFtQQVRDSCAxLzFdIGRybS9hbWRrZmQ6IEFkZCBxdWV1ZSBzdGF0dXMgaW5kaWNh
dG9yIHRvIEhRRCBkdW1wDQoNCk1ha2UgaXQgZWFzeSB0byBkaXN0aW5ndWlzaCB1bm1hcHBlZCwg
aWRsZSBhbmQgYnVzeSBxdWV1ZXMgaW4gdGhlIEhRRCBkdW1wLg0KDQpBbHNvIHJlbW92ZSBDVSBt
YXNrIGZyb20gdGhlIEhRRCBkdW1wIGJlY2F1c2UgdGhlc2UgcmVnaXN0ZXJzIGFyZSBub3QgcGVy
LXF1ZXVlLCBidXQgcGVyIHBpcGUuDQoNClNpZ25lZC1vZmYtYnk6IEZlbGl4IEt1ZWhsaW5nIDxG
ZWxpeC5LdWVobGluZ0BhbWQuY29tPg0KLS0tDQogLi4uL2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9h
bWRrZmRfZ2Z4X3YxMC5jICAgIHwgMzUgKysrKysrKysrKysrKystLQ0KIC4uLi9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9nZnhfdjcuYyB8IDM5ICsrKysrKysrKysrKystLS0tLSAg
Li4uL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92OC5jIHwgMzkgKysrKysr
KysrKysrKy0tLS0tICAuLi4vZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4X3Y5
LmMgfCAzNSArKysrKysrKysrKysrKy0tICAuLi4vZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9x
dWV1ZV9tYW5hZ2VyLmMgfCA0MCArKysrKysrKysrKy0tLS0tLS0tDQogLi4uL2dwdS9kcm0vYW1k
L2luY2x1ZGUva2dkX2tmZF9pbnRlcmZhY2UuaCAgIHwgMTUgKysrKysrLQ0KIDYgZmlsZXMgY2hh
bmdlZCwgMTU3IGluc2VydGlvbnMoKyksIDQ2IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9nZnhfdjEwLmMgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92MTAuYw0KaW5kZXggMzlm
ZmIwNzhiZWI0Li40ODgyYjQxMTJhN2EgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92MTAuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9nZnhfdjEwLmMNCkBAIC02OCwxMiArNjgsMTQgQEAgc3Rh
dGljIGludCBrZ2RfaHFkX2xvYWQoc3RydWN0IGtnZF9kZXYgKmtnZCwgdm9pZCAqbXFkLCB1aW50
MzJfdCBwaXBlX2lkLA0KIAkJCXN0cnVjdCBtbV9zdHJ1Y3QgKm1tKTsNCiBzdGF0aWMgaW50IGtn
ZF9ocWRfZHVtcChzdHJ1Y3Qga2dkX2RldiAqa2dkLA0KIAkJCXVpbnQzMl90IHBpcGVfaWQsIHVp
bnQzMl90IHF1ZXVlX2lkLA0KLQkJCXVpbnQzMl90ICgqKmR1bXApWzJdLCB1aW50MzJfdCAqbl9y
ZWdzKTsNCisJCQl1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3QgKm5fcmVncywNCisJCQll
bnVtIGtmZF9xdWV1ZV9zdGF0dXMgKnN0YXR1cyk7DQogc3RhdGljIGludCBrZ2RfaHFkX3NkbWFf
bG9hZChzdHJ1Y3Qga2dkX2RldiAqa2dkLCB2b2lkICptcWQsDQogCQkJICAgICB1aW50MzJfdCBf
X3VzZXIgKndwdHIsIHN0cnVjdCBtbV9zdHJ1Y3QgKm1tKTsgIHN0YXRpYyBpbnQga2dkX2hxZF9z
ZG1hX2R1bXAoc3RydWN0IGtnZF9kZXYgKmtnZCwNCiAJCQkgICAgIHVpbnQzMl90IGVuZ2luZV9p
ZCwgdWludDMyX3QgcXVldWVfaWQsDQotCQkJICAgICB1aW50MzJfdCAoKipkdW1wKVsyXSwgdWlu
dDMyX3QgKm5fcmVncyk7DQorCQkJICAgICB1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3Qg
Km5fcmVncywNCisJCQkgICAgIGVudW0ga2ZkX3F1ZXVlX3N0YXR1cyAqc3RhdHVzKTsNCiBzdGF0
aWMgYm9vbCBrZ2RfaHFkX2lzX29jY3VwaWVkKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHVpbnQ2NF90
IHF1ZXVlX2FkZHJlc3MsDQogCQl1aW50MzJfdCBwaXBlX2lkLCB1aW50MzJfdCBxdWV1ZV9pZCk7
ICBzdGF0aWMgYm9vbCBrZ2RfaHFkX3NkbWFfaXNfb2NjdXBpZWQoc3RydWN0IGtnZF9kZXYgKmtn
ZCwgdm9pZCAqbXFkKTsgQEAgLTQ1NCw5ICs0NTYsMTcgQEAgc3RhdGljIGludCBrZ2RfaHFkX2xv
YWQoc3RydWN0IGtnZF9kZXYgKmtnZCwgdm9pZCAqbXFkLCB1aW50MzJfdCBwaXBlX2lkLA0KIA0K
IHN0YXRpYyBpbnQga2dkX2hxZF9kdW1wKHN0cnVjdCBrZ2RfZGV2ICprZ2QsDQogCQkJdWludDMy
X3QgcGlwZV9pZCwgdWludDMyX3QgcXVldWVfaWQsDQotCQkJdWludDMyX3QgKCoqZHVtcClbMl0s
IHVpbnQzMl90ICpuX3JlZ3MpDQorCQkJdWludDMyX3QgKCoqZHVtcClbMl0sIHVpbnQzMl90ICpu
X3JlZ3MsDQorCQkJZW51bSBrZmRfcXVldWVfc3RhdHVzICpzdGF0dXMpDQogew0KIAlzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiA9IGdldF9hbWRncHVfZGV2aWNlKGtnZCk7DQorCWNvbnN0IHVp
bnQzMl90DQorCQlocWRfYWN0aXZlID0gKFNPQzE1X1JFR19PRkZTRVQoR0MsIDAsIG1tQ1BfSFFE
X0FDVElWRSkgLQ0KKwkJCSAgICAgIFNPQzE1X1JFR19PRkZTRVQoR0MsIDAsIG1tQ1BfTVFEX0JB
U0VfQUREUikpLA0KW09ha10gSXMgYWJvdmUgbGluZSBhIGNvcHktcGFzdCB0eXBvPyBJIGRvbid0
IHVuZGVyc3RhbmQgd2h5IHlvdSBjYW4gdXNlIGEgYWN0aXZlIHJlZ2lzdGVyIC0gYSBiYXNlIHJl
Z2lzdGVyLg0KKwkJaHFkX3BxX3JwdHIgPSAoU09DMTVfUkVHX09GRlNFVChHQywgMCwgbW1DUF9I
UURfUFFfUlBUUikgLQ0KKwkJCSAgICAgICBTT0MxNV9SRUdfT0ZGU0VUKEdDLCAwLCBtbUNQX01R
RF9CQVNFX0FERFIpKSwNCisJCWhxZF9wcV93cHRyID0gKFNPQzE1X1JFR19PRkZTRVQoR0MsIDAs
IG1tQ1BfSFFEX1BRX1dQVFJfTE8pIC0NCisJCQkgICAgICAgU09DMTVfUkVHX09GRlNFVChHQywg
MCwgbW1DUF9NUURfQkFTRV9BRERSKSk7DQogCXVpbnQzMl90IGkgPSAwLCByZWc7DQogI2RlZmlu
ZSBIUURfTl9SRUdTIDU2DQogI2RlZmluZSBEVU1QX1JFRyhhZGRyKSBkbyB7CQkJCVwNCkBAIC00
ODEsNiArNDkxLDEyIEBAIHN0YXRpYyBpbnQga2dkX2hxZF9kdW1wKHN0cnVjdCBrZ2RfZGV2ICpr
Z2QsDQogCVdBUk5fT05fT05DRShpICE9IEhRRF9OX1JFR1MpOw0KIAkqbl9yZWdzID0gaTsNCiAN
CisJaWYgKCEoKmR1bXApW2hxZF9hY3RpdmVdWzFdKQ0KKwkJKnN0YXR1cyA9IEtGRF9RVUVVRV9V
Tk1BUFBFRDsNCisJZWxzZQ0KKwkJKnN0YXR1cyA9ICgqZHVtcClbaHFkX3BxX3JwdHJdWzFdID09
ICgqZHVtcClbaHFkX3BxX3dwdHJdWzFdID8NCisJCQlLRkRfUVVFVUVfSURMRSA6IEtGRF9RVUVV
RV9CVVNZOw0KKw0KIAlyZXR1cm4gMDsNCiB9DQogDQpAQCAtNTYxLDkgKzU3NywxNCBAQCBzdGF0
aWMgaW50IGtnZF9ocWRfc2RtYV9sb2FkKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwN
CiANCiBzdGF0aWMgaW50IGtnZF9ocWRfc2RtYV9kdW1wKHN0cnVjdCBrZ2RfZGV2ICprZ2QsDQog
CQkJICAgICB1aW50MzJfdCBlbmdpbmVfaWQsIHVpbnQzMl90IHF1ZXVlX2lkLA0KLQkJCSAgICAg
dWludDMyX3QgKCoqZHVtcClbMl0sIHVpbnQzMl90ICpuX3JlZ3MpDQorCQkJICAgICB1aW50MzJf
dCAoKipkdW1wKVsyXSwgdWludDMyX3QgKm5fcmVncywNCisJCQkgICAgIGVudW0ga2ZkX3F1ZXVl
X3N0YXR1cyAqc3RhdHVzKQ0KIHsNCiAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBnZXRf
YW1kZ3B1X2RldmljZShrZ2QpOw0KKwljb25zdCB1aW50MzJfdA0KKwkJcmxjX2Rvb3JiZWxsID0g
bW1TRE1BMF9STEMwX0RPT1JCRUxMIC0gbW1TRE1BMF9STEMwX1JCX0NOVEwsDQorCQlybGNfcmJf
cnB0ciA9IG1tU0RNQTBfUkxDMF9SQl9SUFRSIC0gbW1TRE1BMF9STEMwX1JCX0NOVEwsDQorCQly
bGNfcmJfd3B0ciA9IG1tU0RNQTBfUkxDMF9SQl9XUFRSIC0gbW1TRE1BMF9STEMwX1JCX0NOVEw7
DQogCXVpbnQzMl90IHNkbWFfYmFzZV9hZGRyID0gZ2V0X3NkbWFfYmFzZV9hZGRyKGFkZXYsIGVu
Z2luZV9pZCwgcXVldWVfaWQpOw0KIAl1aW50MzJfdCBpID0gMCwgcmVnOw0KICN1bmRlZiBIUURf
Tl9SRUdTDQpAQCAtNTkwLDYgKzYxMSwxMiBAQCBzdGF0aWMgaW50IGtnZF9ocWRfc2RtYV9kdW1w
KHN0cnVjdCBrZ2RfZGV2ICprZ2QsDQogCVdBUk5fT05fT05DRShpICE9IEhRRF9OX1JFR1MpOw0K
IAkqbl9yZWdzID0gaTsNCiANCisJaWYgKCEoKmR1bXApW3JsY19kb29yYmVsbF1bMV0pDQorCQkq
c3RhdHVzID0gS0ZEX1FVRVVFX1VOTUFQUEVEOw0KKwllbHNlDQorCQkqc3RhdHVzID0gKCpkdW1w
KVtybGNfcmJfcnB0cl1bMV0gPT0gKCpkdW1wKVtybGNfcmJfd3B0cl1bMV0gPw0KKwkJCUtGRF9R
VUVVRV9JRExFIDogS0ZEX1FVRVVFX0JVU1k7DQorDQogCXJldHVybiAwOw0KIH0NCiANCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92Ny5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9nZnhfdjcuYw0KaW5k
ZXggYzZhYmNmNzJlODIyLi4xMGIwZWM4Y2E4NTIgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92Ny5jDQorKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dmeF92Ny5jDQpAQCAtMTA0LDEyICsxMDQsMTQg
QEAgc3RhdGljIGludCBrZ2RfaHFkX2xvYWQoc3RydWN0IGtnZF9kZXYgKmtnZCwgdm9pZCAqbXFk
LCB1aW50MzJfdCBwaXBlX2lkLA0KIAkJCXN0cnVjdCBtbV9zdHJ1Y3QgKm1tKTsNCiBzdGF0aWMg
aW50IGtnZF9ocWRfZHVtcChzdHJ1Y3Qga2dkX2RldiAqa2dkLA0KIAkJCXVpbnQzMl90IHBpcGVf
aWQsIHVpbnQzMl90IHF1ZXVlX2lkLA0KLQkJCXVpbnQzMl90ICgqKmR1bXApWzJdLCB1aW50MzJf
dCAqbl9yZWdzKTsNCisJCQl1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3QgKm5fcmVncywN
CisJCQllbnVtIGtmZF9xdWV1ZV9zdGF0dXMgKnN0YXR1cyk7DQogc3RhdGljIGludCBrZ2RfaHFk
X3NkbWFfbG9hZChzdHJ1Y3Qga2dkX2RldiAqa2dkLCB2b2lkICptcWQsDQogCQkJICAgICB1aW50
MzJfdCBfX3VzZXIgKndwdHIsIHN0cnVjdCBtbV9zdHJ1Y3QgKm1tKTsgIHN0YXRpYyBpbnQga2dk
X2hxZF9zZG1hX2R1bXAoc3RydWN0IGtnZF9kZXYgKmtnZCwNCiAJCQkgICAgIHVpbnQzMl90IGVu
Z2luZV9pZCwgdWludDMyX3QgcXVldWVfaWQsDQotCQkJICAgICB1aW50MzJfdCAoKipkdW1wKVsy
XSwgdWludDMyX3QgKm5fcmVncyk7DQorCQkJICAgICB1aW50MzJfdCAoKipkdW1wKVsyXSwgdWlu
dDMyX3QgKm5fcmVncywNCisJCQkgICAgIGVudW0ga2ZkX3F1ZXVlX3N0YXR1cyAqc3RhdHVzKTsN
CiBzdGF0aWMgYm9vbCBrZ2RfaHFkX2lzX29jY3VwaWVkKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHVp
bnQ2NF90IHF1ZXVlX2FkZHJlc3MsDQogCQkJCXVpbnQzMl90IHBpcGVfaWQsIHVpbnQzMl90IHF1
ZXVlX2lkKTsNCiANCkBAIC0zNzMsMTEgKzM3NSwxNiBAQCBzdGF0aWMgaW50IGtnZF9ocWRfbG9h
ZChzdHJ1Y3Qga2dkX2RldiAqa2dkLCB2b2lkICptcWQsIHVpbnQzMl90IHBpcGVfaWQsDQogDQog
c3RhdGljIGludCBrZ2RfaHFkX2R1bXAoc3RydWN0IGtnZF9kZXYgKmtnZCwNCiAJCQl1aW50MzJf
dCBwaXBlX2lkLCB1aW50MzJfdCBxdWV1ZV9pZCwNCi0JCQl1aW50MzJfdCAoKipkdW1wKVsyXSwg
dWludDMyX3QgKm5fcmVncykNCisJCQl1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3QgKm5f
cmVncywNCisJCQllbnVtIGtmZF9xdWV1ZV9zdGF0dXMgKnN0YXR1cykNCiB7DQogCXN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2ID0gZ2V0X2FtZGdwdV9kZXZpY2Uoa2dkKTsNCisJY29uc3QgdWlu
dDMyX3QNCisJCWhxZF9hY3RpdmUgPSBtbUNQX0hRRF9BQ1RJVkUgLSBtbUNQX01RRF9CQVNFX0FE
RFIsDQorCQlocWRfcHFfcnB0ciA9IG1tQ1BfSFFEX1BRX1JQVFIgLSBtbUNQX01RRF9CQVNFX0FE
RFIsDQorCQlocWRfcHFfd3B0ciA9IG1tQ1BfSFFEX1BRX1dQVFIgLSBtbUNQX01RRF9CQVNFX0FE
RFI7DQogCXVpbnQzMl90IGkgPSAwLCByZWc7DQotI2RlZmluZSBIUURfTl9SRUdTICgzNSs0KQ0K
KyNkZWZpbmUgSFFEX05fUkVHUyAzNQ0KICNkZWZpbmUgRFVNUF9SRUcoYWRkcikgZG8gewkJCQlc
DQogCQlpZiAoV0FSTl9PTl9PTkNFKGkgPj0gSFFEX05fUkVHUykpCVwNCiAJCQlicmVhazsJCQkJ
XA0KQEAgLTM5MSwxMSArMzk4LDYgQEAgc3RhdGljIGludCBrZ2RfaHFkX2R1bXAoc3RydWN0IGtn
ZF9kZXYgKmtnZCwNCiANCiAJYWNxdWlyZV9xdWV1ZShrZ2QsIHBpcGVfaWQsIHF1ZXVlX2lkKTsN
CiANCi0JRFVNUF9SRUcobW1DT01QVVRFX1NUQVRJQ19USFJFQURfTUdNVF9TRTApOw0KLQlEVU1Q
X1JFRyhtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9NR01UX1NFMSk7DQotCURVTVBfUkVHKG1tQ09N
UFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0UyKTsNCi0JRFVNUF9SRUcobW1DT01QVVRFX1NUQVRJ
Q19USFJFQURfTUdNVF9TRTMpOw0KLQ0KIAlmb3IgKHJlZyA9IG1tQ1BfTVFEX0JBU0VfQUREUjsg
cmVnIDw9IG1tQ1BfTVFEX0NPTlRST0w7IHJlZysrKQ0KIAkJRFVNUF9SRUcocmVnKTsNCiANCkBA
IC00MDQsNiArNDA2LDEyIEBAIHN0YXRpYyBpbnQga2dkX2hxZF9kdW1wKHN0cnVjdCBrZ2RfZGV2
ICprZ2QsDQogCVdBUk5fT05fT05DRShpICE9IEhRRF9OX1JFR1MpOw0KIAkqbl9yZWdzID0gaTsN
CiANCisJaWYgKCEoKmR1bXApW2hxZF9hY3RpdmVdWzFdKQ0KKwkJKnN0YXR1cyA9IEtGRF9RVUVV
RV9VTk1BUFBFRDsNCisJZWxzZQ0KKwkJKnN0YXR1cyA9ICgqZHVtcClbaHFkX3BxX3JwdHJdWzFd
ID09ICgqZHVtcClbaHFkX3BxX3dwdHJdWzFdID8NCisJCQlLRkRfUVVFVUVfSURMRSA6IEtGRF9R
VUVVRV9CVVNZOw0KKw0KIAlyZXR1cm4gMDsNCiB9DQogDQpAQCAtNDczLDkgKzQ4MSwxNCBAQCBz
dGF0aWMgaW50IGtnZF9ocWRfc2RtYV9sb2FkKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1x
ZCwNCiANCiBzdGF0aWMgaW50IGtnZF9ocWRfc2RtYV9kdW1wKHN0cnVjdCBrZ2RfZGV2ICprZ2Qs
DQogCQkJICAgICB1aW50MzJfdCBlbmdpbmVfaWQsIHVpbnQzMl90IHF1ZXVlX2lkLA0KLQkJCSAg
ICAgdWludDMyX3QgKCoqZHVtcClbMl0sIHVpbnQzMl90ICpuX3JlZ3MpDQorCQkJICAgICB1aW50
MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3QgKm5fcmVncywNCisJCQkgICAgIGVudW0ga2ZkX3F1
ZXVlX3N0YXR1cyAqc3RhdHVzKQ0KIHsNCiAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBn
ZXRfYW1kZ3B1X2RldmljZShrZ2QpOw0KKwljb25zdCB1aW50MzJfdA0KKwkJcmxjX2Rvb3JiZWxs
ID0gbW1TRE1BMF9STEMwX0RPT1JCRUxMIC0gbW1TRE1BMF9STEMwX1JCX0NOVEwsDQorCQlybGNf
cmJfcnB0ciA9IG1tU0RNQTBfUkxDMF9SQl9SUFRSIC0gbW1TRE1BMF9STEMwX1JCX0NOVEwsDQor
CQlybGNfcmJfd3B0ciA9IG1tU0RNQTBfUkxDMF9SQl9XUFRSIC0gbW1TRE1BMF9STEMwX1JCX0NO
VEw7DQogCXVpbnQzMl90IHNkbWFfb2Zmc2V0ID0gZW5naW5lX2lkICogU0RNQTFfUkVHSVNURVJf
T0ZGU0VUICsNCiAJCXF1ZXVlX2lkICogS0ZEX0NJS19TRE1BX1FVRVVFX09GRlNFVDsNCiAJdWlu
dDMyX3QgaSA9IDAsIHJlZzsNCkBAIC00OTUsNiArNTA4LDEyIEBAIHN0YXRpYyBpbnQga2dkX2hx
ZF9zZG1hX2R1bXAoc3RydWN0IGtnZF9kZXYgKmtnZCwNCiAJV0FSTl9PTl9PTkNFKGkgIT0gSFFE
X05fUkVHUyk7DQogCSpuX3JlZ3MgPSBpOw0KIA0KKwlpZiAoISgqZHVtcClbcmxjX2Rvb3JiZWxs
XVsxXSkNCisJCSpzdGF0dXMgPSBLRkRfUVVFVUVfVU5NQVBQRUQ7DQorCWVsc2UNCisJCSpzdGF0
dXMgPSAoKmR1bXApW3JsY19yYl9ycHRyXVsxXSA9PSAoKmR1bXApW3JsY19yYl93cHRyXVsxXSA/
DQorCQkJS0ZEX1FVRVVFX0lETEUgOiBLRkRfUVVFVUVfQlVTWTsNCisNCiAJcmV0dXJuIDA7DQog
fQ0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRr
ZmRfZ2Z4X3Y4LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dm
eF92OC5jDQppbmRleCA0ZThiNGU5NDk5MjYuLjVkOTU4YmE5YzUyNCAxMDA2NDQNCi0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4X3Y4LmMNCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4X3Y4LmMNCkBAIC02MSwx
MiArNjEsMTQgQEAgc3RhdGljIGludCBrZ2RfaHFkX2xvYWQoc3RydWN0IGtnZF9kZXYgKmtnZCwg
dm9pZCAqbXFkLCB1aW50MzJfdCBwaXBlX2lkLA0KIAkJCXN0cnVjdCBtbV9zdHJ1Y3QgKm1tKTsN
CiBzdGF0aWMgaW50IGtnZF9ocWRfZHVtcChzdHJ1Y3Qga2dkX2RldiAqa2dkLA0KIAkJCXVpbnQz
Ml90IHBpcGVfaWQsIHVpbnQzMl90IHF1ZXVlX2lkLA0KLQkJCXVpbnQzMl90ICgqKmR1bXApWzJd
LCB1aW50MzJfdCAqbl9yZWdzKTsNCisJCQl1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3Qg
Km5fcmVncywNCisJCQllbnVtIGtmZF9xdWV1ZV9zdGF0dXMgKnN0YXR1cyk7DQogc3RhdGljIGlu
dCBrZ2RfaHFkX3NkbWFfbG9hZChzdHJ1Y3Qga2dkX2RldiAqa2dkLCB2b2lkICptcWQsDQogCQkJ
ICAgICB1aW50MzJfdCBfX3VzZXIgKndwdHIsIHN0cnVjdCBtbV9zdHJ1Y3QgKm1tKTsgIHN0YXRp
YyBpbnQga2dkX2hxZF9zZG1hX2R1bXAoc3RydWN0IGtnZF9kZXYgKmtnZCwNCiAJCQkgICAgIHVp
bnQzMl90IGVuZ2luZV9pZCwgdWludDMyX3QgcXVldWVfaWQsDQotCQkJICAgICB1aW50MzJfdCAo
KipkdW1wKVsyXSwgdWludDMyX3QgKm5fcmVncyk7DQorCQkJICAgICB1aW50MzJfdCAoKipkdW1w
KVsyXSwgdWludDMyX3QgKm5fcmVncywNCisJCQkgICAgIGVudW0ga2ZkX3F1ZXVlX3N0YXR1cyAq
c3RhdHVzKTsNCiBzdGF0aWMgYm9vbCBrZ2RfaHFkX2lzX29jY3VwaWVkKHN0cnVjdCBrZ2RfZGV2
ICprZ2QsIHVpbnQ2NF90IHF1ZXVlX2FkZHJlc3MsDQogCQl1aW50MzJfdCBwaXBlX2lkLCB1aW50
MzJfdCBxdWV1ZV9pZCk7ICBzdGF0aWMgYm9vbCBrZ2RfaHFkX3NkbWFfaXNfb2NjdXBpZWQoc3Ry
dWN0IGtnZF9kZXYgKmtnZCwgdm9pZCAqbXFkKTsgQEAgLTM1OCwxMSArMzYwLDE2IEBAIHN0YXRp
YyBpbnQga2dkX2hxZF9sb2FkKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwgdWludDMy
X3QgcGlwZV9pZCwNCiANCiBzdGF0aWMgaW50IGtnZF9ocWRfZHVtcChzdHJ1Y3Qga2dkX2RldiAq
a2dkLA0KIAkJCXVpbnQzMl90IHBpcGVfaWQsIHVpbnQzMl90IHF1ZXVlX2lkLA0KLQkJCXVpbnQz
Ml90ICgqKmR1bXApWzJdLCB1aW50MzJfdCAqbl9yZWdzKQ0KKwkJCXVpbnQzMl90ICgqKmR1bXAp
WzJdLCB1aW50MzJfdCAqbl9yZWdzLA0KKwkJCWVudW0ga2ZkX3F1ZXVlX3N0YXR1cyAqc3RhdHVz
KQ0KIHsNCiAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBnZXRfYW1kZ3B1X2RldmljZShr
Z2QpOw0KKwljb25zdCB1aW50MzJfdA0KKwkJaHFkX2FjdGl2ZSA9IG1tQ1BfSFFEX0FDVElWRSAt
IG1tQ1BfTVFEX0JBU0VfQUREUiwNCisJCWhxZF9wcV9ycHRyID0gbW1DUF9IUURfUFFfUlBUUiAt
IG1tQ1BfTVFEX0JBU0VfQUREUiwNCisJCWhxZF9wcV93cHRyID0gbW1DUF9IUURfUFFfV1BUUiAt
IG1tQ1BfTVFEX0JBU0VfQUREUjsNCiAJdWludDMyX3QgaSA9IDAsIHJlZzsNCi0jZGVmaW5lIEhR
RF9OX1JFR1MgKDU0KzQpDQorI2RlZmluZSBIUURfTl9SRUdTIDU0DQogI2RlZmluZSBEVU1QX1JF
RyhhZGRyKSBkbyB7CQkJCVwNCiAJCWlmIChXQVJOX09OX09OQ0UoaSA+PSBIUURfTl9SRUdTKSkJ
XA0KIAkJCWJyZWFrOwkJCQlcDQpAQCAtMzc2LDExICszODMsNiBAQCBzdGF0aWMgaW50IGtnZF9o
cWRfZHVtcChzdHJ1Y3Qga2dkX2RldiAqa2dkLA0KIA0KIAlhY3F1aXJlX3F1ZXVlKGtnZCwgcGlw
ZV9pZCwgcXVldWVfaWQpOw0KIA0KLQlEVU1QX1JFRyhtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9N
R01UX1NFMCk7DQotCURVTVBfUkVHKG1tQ09NUFVURV9TVEFUSUNfVEhSRUFEX01HTVRfU0UxKTsN
Ci0JRFVNUF9SRUcobW1DT01QVVRFX1NUQVRJQ19USFJFQURfTUdNVF9TRTIpOw0KLQlEVU1QX1JF
RyhtbUNPTVBVVEVfU1RBVElDX1RIUkVBRF9NR01UX1NFMyk7DQotDQogCWZvciAocmVnID0gbW1D
UF9NUURfQkFTRV9BRERSOyByZWcgPD0gbW1DUF9IUURfRU9QX0RPTkVTOyByZWcrKykNCiAJCURV
TVBfUkVHKHJlZyk7DQogDQpAQCAtMzg5LDYgKzM5MSwxMiBAQCBzdGF0aWMgaW50IGtnZF9ocWRf
ZHVtcChzdHJ1Y3Qga2dkX2RldiAqa2dkLA0KIAlXQVJOX09OX09OQ0UoaSAhPSBIUURfTl9SRUdT
KTsNCiAJKm5fcmVncyA9IGk7DQogDQorCWlmICghKCpkdW1wKVtocWRfYWN0aXZlXVsxXSkNCisJ
CSpzdGF0dXMgPSBLRkRfUVVFVUVfVU5NQVBQRUQ7DQorCWVsc2UNCisJCSpzdGF0dXMgPSAoKmR1
bXApW2hxZF9wcV9ycHRyXVsxXSA9PSAoKmR1bXApW2hxZF9wcV93cHRyXVsxXSA/DQorCQkJS0ZE
X1FVRVVFX0lETEUgOiBLRkRfUVVFVUVfQlVTWTsNCisNCiAJcmV0dXJuIDA7DQogfQ0KIA0KQEAg
LTQ1Nyw5ICs0NjUsMTQgQEAgc3RhdGljIGludCBrZ2RfaHFkX3NkbWFfbG9hZChzdHJ1Y3Qga2dk
X2RldiAqa2dkLCB2b2lkICptcWQsDQogDQogc3RhdGljIGludCBrZ2RfaHFkX3NkbWFfZHVtcChz
dHJ1Y3Qga2dkX2RldiAqa2dkLA0KIAkJCSAgICAgdWludDMyX3QgZW5naW5lX2lkLCB1aW50MzJf
dCBxdWV1ZV9pZCwNCi0JCQkgICAgIHVpbnQzMl90ICgqKmR1bXApWzJdLCB1aW50MzJfdCAqbl9y
ZWdzKQ0KKwkJCSAgICAgdWludDMyX3QgKCoqZHVtcClbMl0sIHVpbnQzMl90ICpuX3JlZ3MsDQor
CQkJICAgICBlbnVtIGtmZF9xdWV1ZV9zdGF0dXMgKnN0YXR1cykNCiB7DQogCXN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2ID0gZ2V0X2FtZGdwdV9kZXZpY2Uoa2dkKTsNCisJY29uc3QgdWludDMy
X3QNCisJCXJsY19kb29yYmVsbCA9IG1tU0RNQTBfUkxDMF9ET09SQkVMTCAtIG1tU0RNQTBfUkxD
MF9SQl9DTlRMLA0KKwkJcmxjX3JiX3JwdHIgPSBtbVNETUEwX1JMQzBfUkJfUlBUUiAtIG1tU0RN
QTBfUkxDMF9SQl9DTlRMLA0KKwkJcmxjX3JiX3dwdHIgPSBtbVNETUEwX1JMQzBfUkJfV1BUUiAt
IG1tU0RNQTBfUkxDMF9SQl9DTlRMOw0KIAl1aW50MzJfdCBzZG1hX29mZnNldCA9IGVuZ2luZV9p
ZCAqIFNETUExX1JFR0lTVEVSX09GRlNFVCArDQogCQlxdWV1ZV9pZCAqIEtGRF9WSV9TRE1BX1FV
RVVFX09GRlNFVDsNCiAJdWludDMyX3QgaSA9IDAsIHJlZzsNCkBAIC00ODgsNiArNTAxLDEyIEBA
IHN0YXRpYyBpbnQga2dkX2hxZF9zZG1hX2R1bXAoc3RydWN0IGtnZF9kZXYgKmtnZCwNCiAJV0FS
Tl9PTl9PTkNFKGkgIT0gSFFEX05fUkVHUyk7DQogCSpuX3JlZ3MgPSBpOw0KIA0KKwlpZiAoISgq
ZHVtcClbcmxjX2Rvb3JiZWxsXVsxXSkNCisJCSpzdGF0dXMgPSBLRkRfUVVFVUVfVU5NQVBQRUQ7
DQorCWVsc2UNCisJCSpzdGF0dXMgPSAoKmR1bXApW3JsY19yYl9ycHRyXVsxXSA9PSAoKmR1bXAp
W3JsY19yYl93cHRyXVsxXSA/DQorCQkJS0ZEX1FVRVVFX0lETEUgOiBLRkRfUVVFVUVfQlVTWTsN
CisNCiAJcmV0dXJuIDA7DQogfQ0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ2Z4X3Y5LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfYW1ka2ZkX2dmeF92OS5jDQppbmRleCBkNWFmNDExNDNkMTIuLjJlMWEzN2M0Njlj
NCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRf
Z2Z4X3Y5LmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRf
Z2Z4X3Y5LmMNCkBAIC03NSwxMiArNzUsMTQgQEAgc3RhdGljIGludCBrZ2RfaHFkX2xvYWQoc3Ry
dWN0IGtnZF9kZXYgKmtnZCwgdm9pZCAqbXFkLCB1aW50MzJfdCBwaXBlX2lkLA0KIAkJCXN0cnVj
dCBtbV9zdHJ1Y3QgKm1tKTsNCiBzdGF0aWMgaW50IGtnZF9ocWRfZHVtcChzdHJ1Y3Qga2dkX2Rl
diAqa2dkLA0KIAkJCXVpbnQzMl90IHBpcGVfaWQsIHVpbnQzMl90IHF1ZXVlX2lkLA0KLQkJCXVp
bnQzMl90ICgqKmR1bXApWzJdLCB1aW50MzJfdCAqbl9yZWdzKTsNCisJCQl1aW50MzJfdCAoKipk
dW1wKVsyXSwgdWludDMyX3QgKm5fcmVncywNCisJCQllbnVtIGtmZF9xdWV1ZV9zdGF0dXMgKnN0
YXR1cyk7DQogc3RhdGljIGludCBrZ2RfaHFkX3NkbWFfbG9hZChzdHJ1Y3Qga2dkX2RldiAqa2dk
LCB2b2lkICptcWQsDQogCQkJICAgICB1aW50MzJfdCBfX3VzZXIgKndwdHIsIHN0cnVjdCBtbV9z
dHJ1Y3QgKm1tKTsgIHN0YXRpYyBpbnQga2dkX2hxZF9zZG1hX2R1bXAoc3RydWN0IGtnZF9kZXYg
KmtnZCwNCiAJCQkgICAgIHVpbnQzMl90IGVuZ2luZV9pZCwgdWludDMyX3QgcXVldWVfaWQsDQot
CQkJICAgICB1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3QgKm5fcmVncyk7DQorCQkJICAg
ICB1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3QgKm5fcmVncywNCisJCQkgICAgIGVudW0g
a2ZkX3F1ZXVlX3N0YXR1cyAqc3RhdHVzKTsNCiBzdGF0aWMgYm9vbCBrZ2RfaHFkX2lzX29jY3Vw
aWVkKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHVpbnQ2NF90IHF1ZXVlX2FkZHJlc3MsDQogCQl1aW50
MzJfdCBwaXBlX2lkLCB1aW50MzJfdCBxdWV1ZV9pZCk7ICBzdGF0aWMgYm9vbCBrZ2RfaHFkX3Nk
bWFfaXNfb2NjdXBpZWQoc3RydWN0IGtnZF9kZXYgKmtnZCwgdm9pZCAqbXFkKTsgQEAgLTQ0MCw5
ICs0NDIsMTcgQEAgc3RhdGljIGludCBrZ2RfaHFkX2xvYWQoc3RydWN0IGtnZF9kZXYgKmtnZCwg
dm9pZCAqbXFkLCB1aW50MzJfdCBwaXBlX2lkLA0KIA0KIHN0YXRpYyBpbnQga2dkX2hxZF9kdW1w
KHN0cnVjdCBrZ2RfZGV2ICprZ2QsDQogCQkJdWludDMyX3QgcGlwZV9pZCwgdWludDMyX3QgcXVl
dWVfaWQsDQotCQkJdWludDMyX3QgKCoqZHVtcClbMl0sIHVpbnQzMl90ICpuX3JlZ3MpDQorCQkJ
dWludDMyX3QgKCoqZHVtcClbMl0sIHVpbnQzMl90ICpuX3JlZ3MsDQorCQkJZW51bSBrZmRfcXVl
dWVfc3RhdHVzICpzdGF0dXMpDQogew0KIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGdl
dF9hbWRncHVfZGV2aWNlKGtnZCk7DQorCWNvbnN0IHVpbnQzMl90DQorCQlocWRfYWN0aXZlID0g
KFNPQzE1X1JFR19PRkZTRVQoR0MsIDAsIG1tQ1BfSFFEX0FDVElWRSkgLQ0KKwkJCSAgICAgIFNP
QzE1X1JFR19PRkZTRVQoR0MsIDAsIG1tQ1BfTVFEX0JBU0VfQUREUikpLA0KKwkJaHFkX3BxX3Jw
dHIgPSAoU09DMTVfUkVHX09GRlNFVChHQywgMCwgbW1DUF9IUURfUFFfUlBUUikgLQ0KKwkJCSAg
ICAgICBTT0MxNV9SRUdfT0ZGU0VUKEdDLCAwLCBtbUNQX01RRF9CQVNFX0FERFIpKSwNCisJCWhx
ZF9wcV93cHRyID0gKFNPQzE1X1JFR19PRkZTRVQoR0MsIDAsIG1tQ1BfSFFEX1BRX1dQVFJfTE8p
IC0NCisJCQkgICAgICAgU09DMTVfUkVHX09GRlNFVChHQywgMCwgbW1DUF9NUURfQkFTRV9BRERS
KSk7DQogCXVpbnQzMl90IGkgPSAwLCByZWc7DQogI2RlZmluZSBIUURfTl9SRUdTIDU2DQogI2Rl
ZmluZSBEVU1QX1JFRyhhZGRyKSBkbyB7CQkJCVwNCkBAIC00NjcsNiArNDc3LDEyIEBAIHN0YXRp
YyBpbnQga2dkX2hxZF9kdW1wKHN0cnVjdCBrZ2RfZGV2ICprZ2QsDQogCVdBUk5fT05fT05DRShp
ICE9IEhRRF9OX1JFR1MpOw0KIAkqbl9yZWdzID0gaTsNCiANCisJaWYgKCEoKmR1bXApW2hxZF9h
Y3RpdmVdWzFdKQ0KKwkJKnN0YXR1cyA9IEtGRF9RVUVVRV9VTk1BUFBFRDsNCisJZWxzZQ0KKwkJ
KnN0YXR1cyA9ICgqZHVtcClbaHFkX3BxX3JwdHJdWzFdID09ICgqZHVtcClbaHFkX3BxX3dwdHJd
WzFdID8NCisJCQlLRkRfUVVFVUVfSURMRSA6IEtGRF9RVUVVRV9CVVNZOw0KKw0KIAlyZXR1cm4g
MDsNCiB9DQogDQpAQCAtNTQ2LDkgKzU2MiwxNCBAQCBzdGF0aWMgaW50IGtnZF9ocWRfc2RtYV9s
b2FkKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHZvaWQgKm1xZCwNCiANCiBzdGF0aWMgaW50IGtnZF9o
cWRfc2RtYV9kdW1wKHN0cnVjdCBrZ2RfZGV2ICprZ2QsDQogCQkJICAgICB1aW50MzJfdCBlbmdp
bmVfaWQsIHVpbnQzMl90IHF1ZXVlX2lkLA0KLQkJCSAgICAgdWludDMyX3QgKCoqZHVtcClbMl0s
IHVpbnQzMl90ICpuX3JlZ3MpDQorCQkJICAgICB1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMy
X3QgKm5fcmVncywNCisJCQkgICAgIGVudW0ga2ZkX3F1ZXVlX3N0YXR1cyAqc3RhdHVzKQ0KIHsN
CiAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBnZXRfYW1kZ3B1X2RldmljZShrZ2QpOw0K
Kwljb25zdCB1aW50MzJfdA0KKwkJcmxjX2Rvb3JiZWxsID0gbW1TRE1BMF9STEMwX0RPT1JCRUxM
IC0gbW1TRE1BMF9STEMwX1JCX0NOVEwsDQorCQlybGNfcmJfcnB0ciA9IG1tU0RNQTBfUkxDMF9S
Ql9SUFRSIC0gbW1TRE1BMF9STEMwX1JCX0NOVEwsDQorCQlybGNfcmJfd3B0ciA9IG1tU0RNQTBf
UkxDMF9SQl9XUFRSIC0gbW1TRE1BMF9STEMwX1JCX0NOVEw7DQogCXVpbnQzMl90IHNkbWFfYmFz
ZV9hZGRyID0gZ2V0X3NkbWFfYmFzZV9hZGRyKGFkZXYsIGVuZ2luZV9pZCwgcXVldWVfaWQpOw0K
IAl1aW50MzJfdCBpID0gMCwgcmVnOw0KICN1bmRlZiBIUURfTl9SRUdTDQpAQCAtNTcyLDYgKzU5
MywxMiBAQCBzdGF0aWMgaW50IGtnZF9ocWRfc2RtYV9kdW1wKHN0cnVjdCBrZ2RfZGV2ICprZ2Qs
DQogCVdBUk5fT05fT05DRShpICE9IEhRRF9OX1JFR1MpOw0KIAkqbl9yZWdzID0gaTsNCiANCisJ
aWYgKCEoKmR1bXApW3JsY19kb29yYmVsbF1bMV0pDQorCQkqc3RhdHVzID0gS0ZEX1FVRVVFX1VO
TUFQUEVEOw0KKwllbHNlDQorCQkqc3RhdHVzID0gKCpkdW1wKVtybGNfcmJfcnB0cl1bMV0gPT0g
KCpkdW1wKVtybGNfcmJfd3B0cl1bMV0gPw0KKwkJCUtGRF9RVUVVRV9JRExFIDogS0ZEX1FVRVVF
X0JVU1k7DQorDQogCXJldHVybiAwOw0KIH0NCiANCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jDQppbmRleCA5ZmZkZGE1N2U3
ZjAuLjA3ZDNiOTRjMzMxOSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2Zk
L2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfZGV2aWNlX3F1ZXVlX21hbmFnZXIuYw0KQEAgLTE4NzQsMjIgKzE4NzQsMjggQEAg
c3RhdGljIHZvaWQgc2VxX3JlZ19kdW1wKHN0cnVjdCBzZXFfZmlsZSAqbSwNCiANCiBpbnQgZHFt
X2RlYnVnZnNfaHFkcyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpICB7DQorCXN0YXRp
YyBjb25zdCBjaGFyICogY29uc3Qgc3RhdHVzX3N0cmluZ1tdID0gew0KKwkJW0tGRF9RVUVVRV9V
Tk1BUFBFRF0gPSAidW5tYXBwZWQiLA0KKwkJW0tGRF9RVUVVRV9JRExFXSA9ICJpZGxlIiwNCisJ
CVtLRkRfUVVFVUVfQlVTWV0gPSAiYnVzeSINCisJfTsNCiAJc3RydWN0IGRldmljZV9xdWV1ZV9t
YW5hZ2VyICpkcW0gPSBkYXRhOw0KIAl1aW50MzJfdCAoKmR1bXApWzJdLCBuX3JlZ3M7DQorCWVu
dW0ga2ZkX3F1ZXVlX3N0YXR1cyBzdGF0dXM7DQogCWludCBwaXBlLCBxdWV1ZTsNCiAJaW50IHIg
PSAwOw0KIA0KLSAgICAgICAgciA9IGRxbS0+ZGV2LT5rZmQya2dkLT5ocWRfZHVtcChkcW0tPmRl
di0+a2dkLA0KLSAgICAgICAgICAgICAgICBLRkRfQ0lLX0hJUV9QSVBFLCBLRkRfQ0lLX0hJUV9R
VUVVRSwgJmR1bXAsICZuX3JlZ3MpOw0KLSAgICAgICAgaWYgKCFyKSB7DQotICAgICAgICAgICAg
ICAgIHNlcV9wcmludGYobSwgIiAgSElRIG9uIE1FQyAlZCBQaXBlICVkIFF1ZXVlICVkXG4iLA0K
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgS0ZEX0NJS19ISVFfUElQRS9nZXRfcGlw
ZXNfcGVyX21lYyhkcW0pKzEsDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLRkRf
Q0lLX0hJUV9QSVBFJWdldF9waXBlc19wZXJfbWVjKGRxbSksDQotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBLRkRfQ0lLX0hJUV9RVUVVRSk7DQotICAgICAgICAgICAgICAgIHNlcV9y
ZWdfZHVtcChtLCBkdW1wLCBuX3JlZ3MpOw0KKwlyID0gZHFtLT5kZXYtPmtmZDJrZ2QtPmhxZF9k
dW1wKGRxbS0+ZGV2LT5rZ2QsDQorCQlLRkRfQ0lLX0hJUV9QSVBFLCBLRkRfQ0lLX0hJUV9RVUVV
RSwgJmR1bXAsICZuX3JlZ3MsICZzdGF0dXMpOw0KKwlpZiAoIXIpIHsNCisJCXNlcV9wcmludGYo
bSwgIiAgSElRIG9uIE1FQyAlZCBQaXBlICVkIFF1ZXVlICVkICglcylcbiIsDQorCQkJCUtGRF9D
SUtfSElRX1BJUEUvZ2V0X3BpcGVzX3Blcl9tZWMoZHFtKSsxLA0KKwkJCQlLRkRfQ0lLX0hJUV9Q
SVBFJWdldF9waXBlc19wZXJfbWVjKGRxbSksDQorCQkJCUtGRF9DSUtfSElRX1FVRVVFLCBzdGF0
dXNfc3RyaW5nW3N0YXR1c10pOw0KKwkJc2VxX3JlZ19kdW1wKG0sIGR1bXAsIG5fcmVncyk7DQog
DQotICAgICAgICAgICAgICAgIGtmcmVlKGR1bXApOw0KLSAgICAgICAgfQ0KKwkJa2ZyZWUoZHVt
cCk7DQorCX0NCiANCiAJZm9yIChwaXBlID0gMDsgcGlwZSA8IGdldF9waXBlc19wZXJfbWVjKGRx
bSk7IHBpcGUrKykgew0KIAkJaW50IHBpcGVfb2Zmc2V0ID0gcGlwZSAqIGdldF9xdWV1ZXNfcGVy
X3BpcGUoZHFtKTsgQEAgLTE5MDAsMTIgKzE5MDYsMTMgQEAgaW50IGRxbV9kZWJ1Z2ZzX2hxZHMo
c3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQ0KIAkJCQljb250aW51ZTsNCiANCiAJCQly
ID0gZHFtLT5kZXYtPmtmZDJrZ2QtPmhxZF9kdW1wKA0KLQkJCQlkcW0tPmRldi0+a2dkLCBwaXBl
LCBxdWV1ZSwgJmR1bXAsICZuX3JlZ3MpOw0KKwkJCQlkcW0tPmRldi0+a2dkLCBwaXBlLCBxdWV1
ZSwgJmR1bXAsICZuX3JlZ3MsDQorCQkJCSZzdGF0dXMpOw0KIAkJCWlmIChyKQ0KIAkJCQlicmVh
azsNCiANCi0JCQlzZXFfcHJpbnRmKG0sICIgIENQIFBpcGUgJWQsIFF1ZXVlICVkXG4iLA0KLQkJ
CQkgIHBpcGUsIHF1ZXVlKTsNCisJCQlzZXFfcHJpbnRmKG0sICIgIENQIFBpcGUgJWQsIFF1ZXVl
ICVkICglcylcbiIsDQorCQkJCSAgcGlwZSwgcXVldWUsIHN0YXR1c19zdHJpbmdbc3RhdHVzXSk7
DQogCQkJc2VxX3JlZ19kdW1wKG0sIGR1bXAsIG5fcmVncyk7DQogDQogCQkJa2ZyZWUoZHVtcCk7
DQpAQCAtMTkxNywxMiArMTkyNCwxMyBAQCBpbnQgZHFtX2RlYnVnZnNfaHFkcyhzdHJ1Y3Qgc2Vx
X2ZpbGUgKm0sIHZvaWQgKmRhdGEpDQogCQkgICAgIHF1ZXVlIDwgZHFtLT5kZXYtPmRldmljZV9p
bmZvLT5udW1fc2RtYV9xdWV1ZXNfcGVyX2VuZ2luZTsNCiAJCSAgICAgcXVldWUrKykgew0KIAkJ
CXIgPSBkcW0tPmRldi0+a2ZkMmtnZC0+aHFkX3NkbWFfZHVtcCgNCi0JCQkJZHFtLT5kZXYtPmtn
ZCwgcGlwZSwgcXVldWUsICZkdW1wLCAmbl9yZWdzKTsNCisJCQkJZHFtLT5kZXYtPmtnZCwgcGlw
ZSwgcXVldWUsICZkdW1wLCAmbl9yZWdzLA0KKwkJCQkmc3RhdHVzKTsNCiAJCQlpZiAocikNCiAJ
CQkJYnJlYWs7DQogDQotCQkJc2VxX3ByaW50ZihtLCAiICBTRE1BIEVuZ2luZSAlZCwgUkxDICVk
XG4iLA0KLQkJCQkgIHBpcGUsIHF1ZXVlKTsNCisJCQlzZXFfcHJpbnRmKG0sICIgIFNETUEgRW5n
aW5lICVkLCBSTEMgJWQgKCVzKVxuIiwNCisJCQkJICBwaXBlLCBxdWV1ZSwgc3RhdHVzX3N0cmlu
Z1tzdGF0dXNdKTsNCiAJCQlzZXFfcmVnX2R1bXAobSwgZHVtcCwgbl9yZWdzKTsNCiANCiAJCQlr
ZnJlZShkdW1wKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2luY2x1ZGUva2dk
X2tmZF9pbnRlcmZhY2UuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvaW5jbHVkZS9rZ2Rfa2ZkX2lu
dGVyZmFjZS5oDQppbmRleCA5OGI5NTMzZTY3MmIuLmJjNGFjYTM0OWM0YyAxMDA2NDQNCi0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvaW5jbHVkZS9rZ2Rfa2ZkX2ludGVyZmFjZS5oDQorKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2luY2x1ZGUva2dkX2tmZF9pbnRlcmZhY2UuaA0KQEAgLTE4Nyw2
ICsxODcsMTUgQEAgc3RydWN0IHRpbGVfY29uZmlnIHsNCiAjZGVmaW5lIEFMTE9DX01FTV9GTEFH
U19BUUxfUVVFVUVfTUVNCSgxIDw8IDI3KQ0KICNkZWZpbmUgQUxMT0NfTUVNX0ZMQUdTX0NPSEVS
RU5UCSgxIDw8IDI2KSAvKiBGb3IgR0ZYdjkgb3IgbGF0ZXIgKi8NCiANCisvKg0KKyAqIFF1ZXVl
IHN0YXR1cyBmb3IgSFFEIGR1bXANCisgKi8NCitlbnVtIGtmZF9xdWV1ZV9zdGF0dXMgew0KKwlL
RkRfUVVFVUVfVU5NQVBQRUQsIC8qIFF1ZXVlIGlzIG5vdCBtYXBwZWQgKi8NCisJS0ZEX1FVRVVF
X0lETEUsICAgICAvKiBRdWV1ZSBpcyBlbmFibGVkIGJ1dCBjdXJyZW50bHkgaWRsZSAqLw0KKwlL
RkRfUVVFVUVfQlVTWSAgICAgIC8qIFF1ZXVlIGlzIGVuYWJsZWQgYW5kIGhhcyB3b3JrIHBlbmRp
bmcgKi8NCit9Ow0KKw0KIC8qKg0KICAqIHN0cnVjdCBrZmQya2dkX2NhbGxzDQogICoNCkBAIC0y
NjEsMTEgKzI3MCwxMyBAQCBzdHJ1Y3Qga2ZkMmtnZF9jYWxscyB7DQogDQogCWludCAoKmhxZF9k
dW1wKShzdHJ1Y3Qga2dkX2RldiAqa2dkLA0KIAkJCXVpbnQzMl90IHBpcGVfaWQsIHVpbnQzMl90
IHF1ZXVlX2lkLA0KLQkJCXVpbnQzMl90ICgqKmR1bXApWzJdLCB1aW50MzJfdCAqbl9yZWdzKTsN
CisJCQl1aW50MzJfdCAoKipkdW1wKVsyXSwgdWludDMyX3QgKm5fcmVncywNCisJCQllbnVtIGtm
ZF9xdWV1ZV9zdGF0dXMgKnN0YXR1cyk7DQogDQogCWludCAoKmhxZF9zZG1hX2R1bXApKHN0cnVj
dCBrZ2RfZGV2ICprZ2QsDQogCQkJICAgICB1aW50MzJfdCBlbmdpbmVfaWQsIHVpbnQzMl90IHF1
ZXVlX2lkLA0KLQkJCSAgICAgdWludDMyX3QgKCoqZHVtcClbMl0sIHVpbnQzMl90ICpuX3JlZ3Mp
Ow0KKwkJCSAgICAgdWludDMyX3QgKCoqZHVtcClbMl0sIHVpbnQzMl90ICpuX3JlZ3MsDQorCQkJ
ICAgICBlbnVtIGtmZF9xdWV1ZV9zdGF0dXMgKnN0YXR1cyk7DQogDQogCWJvb2wgKCpocWRfaXNf
b2NjdXBpZWQpKHN0cnVjdCBrZ2RfZGV2ICprZ2QsIHVpbnQ2NF90IHF1ZXVlX2FkZHJlc3MsDQog
CQkJCXVpbnQzMl90IHBpcGVfaWQsIHVpbnQzMl90IHF1ZXVlX2lkKTsNCi0tDQoyLjE3LjENCg0K
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCmFtZC1nZngg
bWFpbGluZyBsaXN0DQphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4DQpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAph
bWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
