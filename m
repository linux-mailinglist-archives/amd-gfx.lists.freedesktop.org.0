Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 885AC49B93
	for <lists+amd-gfx@lfdr.de>; Tue, 18 Jun 2019 09:58:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CB09D89E41;
	Tue, 18 Jun 2019 07:58:33 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1BFCC89E41
 for <amd-gfx@lists.freedesktop.org>; Tue, 18 Jun 2019 07:58:32 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id a15so2072503wmj.5
 for <amd-gfx@lists.freedesktop.org>; Tue, 18 Jun 2019 00:58:32 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:cc:references:from
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-transfer-encoding:content-language;
 bh=qj3vmmF1RM/TOpDOGVFJMjFOf+WRly3yePeQHDL8yHg=;
 b=nAtGjX5mbhhh4XV0mqAZUx6JVSTEKpxcJYxelk71XyzlTA/FqYbvFnG4fAHQOWQzQB
 f7Di6qRBl2vXlFg5iinoQdzm1KeA23ZFQARXinLGvM+nFLCzU4G9GYHZKUohClmFfDm8
 9eLOT8wU0Id+/Kn0GNdl/HNcFFxTtLX1m6+qkptZgBDQvhLr9wFfHM69zikGfwAzPjZL
 q6+7UR09u/uYc5vZLJ1aG4sVvLeOiLqzfGp7TqnrFXNBdlvXjS8Ir8DKSIUd3CerpuNy
 XdTduhXJKdYNzG2ocjIuJWTe63cwAk0NHoW1Dq0oO9TaOFIl88pAUT7ceNBrE9naCGgH
 lY2w==
X-Gm-Message-State: APjAAAVL5H4eUS4SCjFad6XRidzQ4+ypdxjDG2BwhTlCrSxdRyuAdwiT
 ZOsjxS4+BV40X7IHGi4nKJmtLWbb
X-Google-Smtp-Source: APXvYqxlfnw1gpss52IbtEaVK39nbUOnKvGQ+8z0TIbCq8/74wbbqK35UK3UsxKqOHBAEoD5HFnCnw==
X-Received: by 2002:a1c:b782:: with SMTP id h124mr2226852wmf.20.1560844710755; 
 Tue, 18 Jun 2019 00:58:30 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id j17sm12074022wrw.6.2019.06.18.00.58.29
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 18 Jun 2019 00:58:30 -0700 (PDT)
Subject: Re: [PATCH 247/459] Revert "drm/amdgpu: mask some pm interfaces for
 navi10 because they are changed or not workable so far"
To: Alex Deucher <alexdeucher@gmail.com>, amd-gfx@lists.freedesktop.org
References: <20190617193106.18231-1-alexander.deucher@amd.com>
 <20190617193106.18231-48-alexander.deucher@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <693bbb9c-2ff2-f25b-2d32-7729b1a46d84@gmail.com>
Date: Tue, 18 Jun 2019 09:58:28 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.0
MIME-Version: 1.0
In-Reply-To: <20190617193106.18231-48-alexander.deucher@amd.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=reply-to:subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=qj3vmmF1RM/TOpDOGVFJMjFOf+WRly3yePeQHDL8yHg=;
 b=f/q1992ubK+w9rnoZR408bndzqqdxlRP8p+kBlcHBA9wIBwP8NsAVQ0uasjJt2dX8f
 3fdj0BTmTied2IwfmsaYPusjdnGj3hDzZwmdYadEhcC1gKAY6Shmlfo+eAP4aWhPepdS
 gJNnixDfCrIS+q0s1fK1ukSQnZwPOpBu7AckrRvZU+uf1v9iISiL0xwiNpth+hwtdoHJ
 wlrJdOD1KEaoNOxLO8L4CY1bS5Y8ODA1z1eZDioc66S3Bf2B9UmRa/PV6Qn8gWfJLGt7
 bVChnlEDnrOe6NrZYEViDMrEuFbI6Hw4GyKfKTsCUf/zvtYYTI0W8qSw6xveExRB5LQ0
 99kw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Cc: Alex Deucher <alexander.deucher@amd.com>, Kevin Wang <kevin1.wang@amd.com>,
 Huang Rui <ray.huang@amd.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMTcuMDYuMTkgdW0gMjE6MzAgc2NocmllYiBBbGV4IERldWNoZXI6Cj4gRnJvbTogS2V2aW4g
V2FuZyA8a2V2aW4xLndhbmdAYW1kLmNvbT4KPgo+IFRoaXMgcmV2ZXJ0cyBjb21taXQgZmQ5Yzc1
ZDIxN2Q1YjRlZDcyNjcyNzIyYjY2MjFlMjYzNTM2M2RmZS4KPgo+IFNpZ25lZC1vZmYtYnk6IEtl
dmluIFdhbmcgPGtldmluMS53YW5nQGFtZC5jb20+Cj4gUmV2aWV3ZWQtYnk6IEh1YW5nIFJ1aSA8
cmF5Lmh1YW5nQGFtZC5jb20+Cj4gU2lnbmVkLW9mZi1ieTogQWxleCBEZXVjaGVyIDxhbGV4YW5k
ZXIuZGV1Y2hlckBhbWQuY29tPgoKV291bGQgaXQgYmUgcG9zc2libGUgdG8gc3F1YXNoIHRoYXQg
aW50byB0aGUgb3JpZ2luYWwgY29tbWl0IHdoaWNoIApkaXNhYmxlZCB0aGluZ3M/CgpDaHJpc3Rp
YW4uCgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jIHwg
ICAyICstCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcG0uYyAgfCAxNTYg
KysrKysrKysrKystLS0tLS0tLS0tLS0tCj4gICAyIGZpbGVzIGNoYW5nZWQsIDczIGluc2VydGlv
bnMoKyksIDg1IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9rbXMuYwo+IGluZGV4IGFmODZkOWY0Nzc4NS4uZWQwNTFmZGI1MDlmIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYwo+IEBAIC02OTAsNyArNjkwLDcgQEAgc3Rh
dGljIGludCBhbWRncHVfaW5mb19pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpk
YXRhLCBzdHJ1Y3QgZHJtX2ZpbGUKPiAgIAkJZGV2X2luZm8ubnVtX3NoYWRlcl9hcnJheXNfcGVy
X2VuZ2luZSA9IGFkZXYtPmdmeC5jb25maWcubWF4X3NoX3Blcl9zZTsKPiAgIAkJLyogcmV0dXJu
IGFsbCBjbG9ja3MgaW4gS0h6ICovCj4gICAJCWRldl9pbmZvLmdwdV9jb3VudGVyX2ZyZXEgPSBh
bWRncHVfYXNpY19nZXRfeGNsayhhZGV2KSAqIDEwOwo+IC0JCWlmIChhZGV2LT5wbS5kcG1fZW5h
YmxlZCAmJiBhZGV2LT5hc2ljX3R5cGUgIT0gQ0hJUF9OQVZJMTApIHsKPiArCQlpZiAoYWRldi0+
cG0uZHBtX2VuYWJsZWQpIHsKPiAgIAkJCWRldl9pbmZvLm1heF9lbmdpbmVfY2xvY2sgPSBhbWRn
cHVfZHBtX2dldF9zY2xrKGFkZXYsIGZhbHNlKSAqIDEwOwo+ICAgCQkJZGV2X2luZm8ubWF4X21l
bW9yeV9jbG9jayA9IGFtZGdwdV9kcG1fZ2V0X21jbGsoYWRldiwgZmFsc2UpICogMTA7Cj4gICAJ
CX0gZWxzZSBpZiAoYW1kZ3B1X3NyaW92X3ZmKGFkZXYpICYmIGFtZGdpbV9pc19od3BlcmYoYWRl
dikgJiYKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Bt
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcG0uYwo+IGluZGV4IDhjMjhm
ODE2YjUwZi4uNmI5N2YzMDk4MTE4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9wbS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3BtLmMKPiBAQCAtMjc5MywzMyArMjc5MywzMiBAQCBpbnQgYW1kZ3B1X3BtX3N5c2ZzX2lu
aXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAJCXJldHVybiByZXQ7Cj4gICAJfQo+
ICAgCj4gLQlpZiAoYWRldi0+YXNpY190eXBlICE9IENISVBfTkFWSTEwKSB7Cj4gLQkJcmV0ID0g
ZGV2aWNlX2NyZWF0ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX3Bvd2VyX2RwbV9zdGF0ZSk7
Cj4gLQkJaWYgKHJldCkgewo+IC0JCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNl
IGZpbGUgZm9yIGRwbSBzdGF0ZVxuIik7Cj4gLQkJCXJldHVybiByZXQ7Cj4gLQkJfQo+IC0JCXJl
dCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wb3dlcl9kcG1fZm9y
Y2VfcGVyZm9ybWFuY2VfbGV2ZWwpOwo+IC0JCWlmIChyZXQpIHsKPiAtCQkJRFJNX0VSUk9SKCJm
YWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIGZvciBkcG0gc3RhdGVcbiIpOwo+IC0JCQlyZXR1
cm4gcmV0Owo+IC0JCX0KPiArCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZk
ZXZfYXR0cl9wb3dlcl9kcG1fc3RhdGUpOwo+ICsJaWYgKHJldCkgewo+ICsJCURSTV9FUlJPUigi
ZmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZSBmb3IgZHBtIHN0YXRlXG4iKTsKPiArCQlyZXR1
cm4gcmV0Owo+ICsJfQo+ICsJcmV0ID0gZGV2aWNlX2NyZWF0ZV9maWxlKGFkZXYtPmRldiwgJmRl
dl9hdHRyX3Bvd2VyX2RwbV9mb3JjZV9wZXJmb3JtYW5jZV9sZXZlbCk7Cj4gKwlpZiAocmV0KSB7
Cj4gKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIGZvciBkcG0gc3Rh
dGVcbiIpOwo+ICsJCXJldHVybiByZXQ7Cj4gKwl9Cj4gICAKPiAtCQlyZXQgPSBkZXZpY2VfY3Jl
YXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfbnVtX3N0YXRlcyk7Cj4gLQkJaWYgKHJl
dCkgewo+IC0JCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBfbnVt
X3N0YXRlc1xuIik7Cj4gLQkJCXJldHVybiByZXQ7Cj4gLQkJfQo+IC0JCXJldCA9IGRldmljZV9j
cmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9jdXJfc3RhdGUpOwo+IC0JCWlmIChy
ZXQpIHsKPiAtCQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX2N1
cl9zdGF0ZVxuIik7Cj4gLQkJCXJldHVybiByZXQ7Cj4gLQkJfQo+IC0JCXJldCA9IGRldmljZV9j
cmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9mb3JjZV9zdGF0ZSk7Cj4gLQkJaWYg
KHJldCkgewo+IC0JCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBf
Zm9yY2Vfc3RhdGVcbiIpOwo+IC0JCQlyZXR1cm4gcmV0Owo+IC0JCX0KPiArCj4gKwlyZXQgPSBk
ZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfbnVtX3N0YXRlcyk7Cj4g
KwlpZiAocmV0KSB7Cj4gKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxl
IHBwX251bV9zdGF0ZXNcbiIpOwo+ICsJCXJldHVybiByZXQ7Cj4gKwl9Cj4gKwlyZXQgPSBkZXZp
Y2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfY3VyX3N0YXRlKTsKPiArCWlm
IChyZXQpIHsKPiArCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBf
Y3VyX3N0YXRlXG4iKTsKPiArCQlyZXR1cm4gcmV0Owo+ICsJfQo+ICsJcmV0ID0gZGV2aWNlX2Ny
ZWF0ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX3BwX2ZvcmNlX3N0YXRlKTsKPiArCWlmIChy
ZXQpIHsKPiArCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBfZm9y
Y2Vfc3RhdGVcbiIpOwo+ICsJCXJldHVybiByZXQ7Cj4gICAJfQo+ICAgCXJldCA9IGRldmljZV9j
cmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF90YWJsZSk7Cj4gICAJaWYgKHJldCkg
ewo+IEBAIC0yODMyLDU1ICsyODMxLDUyIEBAIGludCBhbWRncHVfcG1fc3lzZnNfaW5pdChzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgIAkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRl
IGRldmljZSBmaWxlIHBwX2RwbV9zY2xrXG4iKTsKPiAgIAkJcmV0dXJuIHJldDsKPiAgIAl9Cj4g
LQo+IC0JaWYgKGFkZXYtPmFzaWNfdHlwZSAhPSBDSElQX05BVkkxMCkgewo+IC0JCXJldCA9IGRl
dmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fbWNsayk7Cj4gLQkJ
aWYgKHJldCkgewo+IC0JCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUg
cHBfZHBtX21jbGtcbiIpOwo+IC0JCQlyZXR1cm4gcmV0Owo+IC0JCX0KPiAtCQlpZiAoYWRldi0+
YXNpY190eXBlID49IENISVBfVkVHQTEwKSB7Cj4gLQkJCXJldCA9IGRldmljZV9jcmVhdGVfZmls
ZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fc29jY2xrKTsKPiAtCQkJaWYgKHJldCkgewo+
IC0JCQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX2RwbV9zb2Nj
bGtcbiIpOwo+IC0JCQkJcmV0dXJuIHJldDsKPiAtCQkJfQo+IC0JCQlyZXQgPSBkZXZpY2VfY3Jl
YXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfZHBtX2RjZWZjbGspOwo+IC0JCQlpZiAo
cmV0KSB7Cj4gLQkJCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBf
ZHBtX2RjZWZjbGtcbiIpOwo+IC0JCQkJcmV0dXJuIHJldDsKPiAtCQkJfQo+IC0JCX0KPiAtCQlp
ZiAoYWRldi0+YXNpY190eXBlID49IENISVBfVkVHQTIwKSB7Cj4gLQkJCXJldCA9IGRldmljZV9j
cmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fZmNsayk7Cj4gLQkJCWlmIChy
ZXQpIHsKPiAtCQkJCURSTV9FUlJPUigiZmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZSBwcF9k
cG1fZmNsa1xuIik7Cj4gLQkJCQlyZXR1cm4gcmV0Owo+IC0JCQl9Cj4gLQkJfQo+IC0JCXJldCA9
IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fcGNpZSk7Cj4g
LQkJaWYgKHJldCkgewo+IC0JCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZp
bGUgcHBfZHBtX3BjaWVcbiIpOwo+IC0JCQlyZXR1cm4gcmV0Owo+IC0JCX0KPiAtCQlyZXQgPSBk
ZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfc2Nsa19vZCk7Cj4gKwly
ZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfZHBtX21jbGsp
Owo+ICsJaWYgKHJldCkgewo+ICsJCURSTV9FUlJPUigiZmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2Ug
ZmlsZSBwcF9kcG1fbWNsa1xuIik7Cj4gKwkJcmV0dXJuIHJldDsKPiArCX0KPiArCWlmIChhZGV2
LT5hc2ljX3R5cGUgPj0gQ0hJUF9WRUdBMTApIHsKPiArCQlyZXQgPSBkZXZpY2VfY3JlYXRlX2Zp
bGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfZHBtX3NvY2Nsayk7Cj4gICAJCWlmIChyZXQpIHsK
PiAtCQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX3NjbGtfb2Rc
biIpOwo+ICsJCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgcHBfZHBt
X3NvY2Nsa1xuIik7Cj4gICAJCQlyZXR1cm4gcmV0Owo+ICAgCQl9Cj4gLQkJcmV0ID0gZGV2aWNl
X2NyZWF0ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX3BwX21jbGtfb2QpOwo+ICsJCXJldCA9
IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9wcF9kcG1fZGNlZmNsayk7
Cj4gICAJCWlmIChyZXQpIHsKPiAtCQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmlj
ZSBmaWxlIHBwX21jbGtfb2RcbiIpOwo+ICsJCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUg
ZGV2aWNlIGZpbGUgcHBfZHBtX2RjZWZjbGtcbiIpOwo+ICAgCQkJcmV0dXJuIHJldDsKPiAgIAkJ
fQo+IC0JCXJldCA9IGRldmljZV9jcmVhdGVfZmlsZShhZGV2LT5kZXYsCj4gLQkJCQkmZGV2X2F0
dHJfcHBfcG93ZXJfcHJvZmlsZV9tb2RlKTsKPiArCX0KPiArCWlmIChhZGV2LT5hc2ljX3R5cGUg
Pj0gQ0hJUF9WRUdBMjApIHsKPiArCQlyZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2
LCAmZGV2X2F0dHJfcHBfZHBtX2ZjbGspOwo+ICAgCQlpZiAocmV0KSB7Cj4gLQkJCURSTV9FUlJP
UigiZmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZQkiCj4gLQkJCQkJInBwX3Bvd2VyX3Byb2Zp
bGVfbW9kZVxuIik7Cj4gKwkJCURSTV9FUlJPUigiZmFpbGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmls
ZSBwcF9kcG1fZmNsa1xuIik7Cj4gICAJCQlyZXR1cm4gcmV0Owo+ICAgCQl9Cj4gICAJfQo+ICsJ
cmV0ID0gZGV2aWNlX2NyZWF0ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX3BwX2RwbV9wY2ll
KTsKPiArCWlmIChyZXQpIHsKPiArCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNl
IGZpbGUgcHBfZHBtX3BjaWVcbiIpOwo+ICsJCXJldHVybiByZXQ7Cj4gKwl9Cj4gKwlyZXQgPSBk
ZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfc2Nsa19vZCk7Cj4gKwlp
ZiAocmV0KSB7Cj4gKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBw
X3NjbGtfb2RcbiIpOwo+ICsJCXJldHVybiByZXQ7Cj4gKwl9Cj4gKwlyZXQgPSBkZXZpY2VfY3Jl
YXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfcHBfbWNsa19vZCk7Cj4gKwlpZiAocmV0KSB7
Cj4gKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBmaWxlIHBwX21jbGtfb2Rc
biIpOwo+ICsJCXJldHVybiByZXQ7Cj4gKwl9Cj4gKwlyZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUo
YWRldi0+ZGV2LAo+ICsJCQkmZGV2X2F0dHJfcHBfcG93ZXJfcHJvZmlsZV9tb2RlKTsKPiArCWlm
IChyZXQpIHsKPiArCQlEUk1fRVJST1IoImZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUJIgo+
ICsJCQkJInBwX3Bvd2VyX3Byb2ZpbGVfbW9kZVxuIik7Cj4gKwkJcmV0dXJuIHJldDsKPiArCX0K
PiAgIAlpZiAoKGlzX3N1cHBvcnRfc3dfc211KGFkZXYpICYmIGFkZXYtPnNtdS5vZF9lbmFibGVk
KSB8fAo+ICAgCSAgICAoIWlzX3N1cHBvcnRfc3dfc211KGFkZXYpICYmIGh3bWdyLT5vZF9lbmFi
bGVkKSkgewo+ICAgCQlyZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LAo+IEBAIC0z
MDU2LDI1ICszMDUyLDIxIEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2RlYnVnZnNfcG1faW5mb19wcChz
dHJ1Y3Qgc2VxX2ZpbGUgKm0sIHN0cnVjdCBhbWRncHVfZGV2aWNlICphCj4gICAJLyogR1BVIENs
b2NrcyAqLwo+ICAgCXNpemUgPSBzaXplb2YodmFsdWUpOwo+ICAgCXNlcV9wcmludGYobSwgIkdG
WCBDbG9ja3MgYW5kIFBvd2VyOlxuIik7Cj4gLQlpZiAoYWRldi0+YXNpY190eXBlICE9IENISVBf
TkFWSTEwKSB7Cj4gLQkJaWYgKCFhbWRncHVfZHBtX3JlYWRfc2Vuc29yKGFkZXYsIEFNREdQVV9Q
UF9TRU5TT1JfR0ZYX01DTEssICh2b2lkICopJnZhbHVlLCAmc2l6ZSkpCj4gLQkJCXNlcV9wcmlu
dGYobSwgIlx0JXUgTUh6IChNQ0xLKVxuIiwgdmFsdWUvMTAwKTsKPiAtCQlpZiAoIWFtZGdwdV9k
cG1fcmVhZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9HRlhfU0NMSywgKHZvaWQgKikm
dmFsdWUsICZzaXplKSkKPiAtCQkJc2VxX3ByaW50ZihtLCAiXHQldSBNSHogKFNDTEspXG4iLCB2
YWx1ZS8xMDApOwo+IC0JCWlmICghYW1kZ3B1X2RwbV9yZWFkX3NlbnNvcihhZGV2LCBBTURHUFVf
UFBfU0VOU09SX1NUQUJMRV9QU1RBVEVfU0NMSywgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKPiAt
CQkJc2VxX3ByaW50ZihtLCAiXHQldSBNSHogKFBTVEFURV9TQ0xLKVxuIiwgdmFsdWUvMTAwKTsK
PiAtCQlpZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9T
VEFCTEVfUFNUQVRFX01DTEssICh2b2lkICopJnZhbHVlLCAmc2l6ZSkpCj4gLQkJCXNlcV9wcmlu
dGYobSwgIlx0JXUgTUh6IChQU1RBVEVfTUNMSylcbiIsIHZhbHVlLzEwMCk7Cj4gLQl9Cj4gKwlp
ZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9HRlhfTUNM
SywgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKPiArCQlzZXFfcHJpbnRmKG0sICJcdCV1IE1IeiAo
TUNMSylcbiIsIHZhbHVlLzEwMCk7Cj4gKwlpZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5zb3IoYWRl
diwgQU1ER1BVX1BQX1NFTlNPUl9HRlhfU0NMSywgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKPiAr
CQlzZXFfcHJpbnRmKG0sICJcdCV1IE1IeiAoU0NMSylcbiIsIHZhbHVlLzEwMCk7Cj4gKwlpZiAo
IWFtZGdwdV9kcG1fcmVhZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9TVEFCTEVfUFNU
QVRFX1NDTEssICh2b2lkICopJnZhbHVlLCAmc2l6ZSkpCj4gKwkJc2VxX3ByaW50ZihtLCAiXHQl
dSBNSHogKFBTVEFURV9TQ0xLKVxuIiwgdmFsdWUvMTAwKTsKPiArCWlmICghYW1kZ3B1X2RwbV9y
ZWFkX3NlbnNvcihhZGV2LCBBTURHUFVfUFBfU0VOU09SX1NUQUJMRV9QU1RBVEVfTUNMSywgKHZv
aWQgKikmdmFsdWUsICZzaXplKSkKPiArCQlzZXFfcHJpbnRmKG0sICJcdCV1IE1IeiAoUFNUQVRF
X01DTEspXG4iLCB2YWx1ZS8xMDApOwo+ICAgCWlmICghYW1kZ3B1X2RwbV9yZWFkX3NlbnNvcihh
ZGV2LCBBTURHUFVfUFBfU0VOU09SX1ZEREdGWCwgKHZvaWQgKikmdmFsdWUsICZzaXplKSkKPiAg
IAkJc2VxX3ByaW50ZihtLCAiXHQldSBtViAoVkRER0ZYKVxuIiwgdmFsdWUpOwo+ICAgCWlmICgh
YW1kZ3B1X2RwbV9yZWFkX3NlbnNvcihhZGV2LCBBTURHUFVfUFBfU0VOU09SX1ZERE5CLCAodm9p
ZCAqKSZ2YWx1ZSwgJnNpemUpKQo+ICAgCQlzZXFfcHJpbnRmKG0sICJcdCV1IG1WIChWREROQilc
biIsIHZhbHVlKTsKPiAtCWlmIChhZGV2LT5hc2ljX3R5cGUgIT0gQ0hJUF9OQVZJMTApIHsKPiAt
CQlzaXplID0gc2l6ZW9mKHVpbnQzMl90KTsKPiAtCQlpZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5z
b3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9HUFVfUE9XRVIsICh2b2lkICopJnF1ZXJ5LCAmc2l6
ZSkpCj4gLQkJCXNlcV9wcmludGYobSwgIlx0JXUuJXUgVyAoYXZlcmFnZSBHUFUpXG4iLCBxdWVy
eSA+PiA4LCBxdWVyeSAmIDB4ZmYpOwo+IC0JfQo+ICsJc2l6ZSA9IHNpemVvZih1aW50MzJfdCk7
Cj4gKwlpZiAoIWFtZGdwdV9kcG1fcmVhZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9H
UFVfUE9XRVIsICh2b2lkICopJnF1ZXJ5LCAmc2l6ZSkpCj4gKwkJc2VxX3ByaW50ZihtLCAiXHQl
dS4ldSBXIChhdmVyYWdlIEdQVSlcbiIsIHF1ZXJ5ID4+IDgsIHF1ZXJ5ICYgMHhmZik7Cj4gICAJ
c2l6ZSA9IHNpemVvZih2YWx1ZSk7Cj4gICAJc2VxX3ByaW50ZihtLCAiXG4iKTsKPiAgIAo+IEBA
IC0zMDgyLDEwICszMDc0LDYgQEAgc3RhdGljIGludCBhbWRncHVfZGVidWdmc19wbV9pbmZvX3Bw
KHN0cnVjdCBzZXFfZmlsZSAqbSwgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmEKPiAgIAlpZiAoIWFt
ZGdwdV9kcG1fcmVhZF9zZW5zb3IoYWRldiwgQU1ER1BVX1BQX1NFTlNPUl9HUFVfVEVNUCwgKHZv
aWQgKikmdmFsdWUsICZzaXplKSkKPiAgIAkJc2VxX3ByaW50ZihtLCAiR1BVIFRlbXBlcmF0dXJl
OiAldSBDXG4iLCB2YWx1ZS8xMDAwKTsKPiAgIAo+IC0JLyogVE9ETzogd2lsbCBiZSByZW1vdmVk
IGFmdGVyIGdwdSBsb2FkLCBmZWF0dXJlIG1hc2ssIHV2ZC92Y2UgY2xvY2tzIGVuYWJsZWQgb24g
bmF2aTEwICovCj4gLQlpZiAoYWRldi0+YXNpY190eXBlID09IENISVBfTkFWSTEwKQo+IC0JCXJl
dHVybiAwOwo+IC0KPiAgIAkvKiBHUFUgTG9hZCAqLwo+ICAgCWlmICghYW1kZ3B1X2RwbV9yZWFk
X3NlbnNvcihhZGV2LCBBTURHUFVfUFBfU0VOU09SX0dQVV9MT0FELCAodm9pZCAqKSZ2YWx1ZSwg
JnNpemUpKQo+ICAgCQlzZXFfcHJpbnRmKG0sICJHUFUgTG9hZDogJXUgJSVcbiIsIHZhbHVlKTsK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZngg
bWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
