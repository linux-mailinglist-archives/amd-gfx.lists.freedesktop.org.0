Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4FE9548EF6
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:28:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 33C5089B0D;
	Mon, 17 Jun 2019 19:28:36 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x843.google.com (mail-qt1-x843.google.com
 [IPv6:2607:f8b0:4864:20::843])
 by gabe.freedesktop.org (Postfix) with ESMTPS id ECF9889A94
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:28:26 +0000 (UTC)
Received: by mail-qt1-x843.google.com with SMTP id w17so5815218qto.10
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:28:26 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=lSPjIpVuGUANL+f9Nl+aM1UXxkDzzRFrJCP2QTAjmaI=;
 b=Yky3JFa5GCra2R/6g/kv4vW8+c3FrJs68hXKVTpHftyFCCM9iUq3UTtU1tHzzW3LMD
 kBIfPzJXhaxI3SVJixiT1dgAnaL5ZYKr8NkORY3x27s6HtmTcWHmhRDZNJZ2bEpkaiTy
 VTRAfCdQ/6YSpt7CLKwFuemK1MEpINrlAxsvec8WYDPr344B/U21ET/VjzH23eTes367
 dtCRBlA9QAhKCG1kqR0IKv+IHwv0T5S7LYq3S6aQ/rQqSNMt9hbW6Cu4A5YSiboi/CEk
 fQqCBE2y6D1rkXRjBE5mHVTVAasWQdWsm9JS7ZXmLCEeIqDwh/unrjG9Tx18LJ8plhAq
 EgFA==
X-Gm-Message-State: APjAAAU1S9bt3P88w+8Y4MCHPQtnTxtHVBSc07IHlhS9rGsRFaUjW26u
 hZqjwDXjM2a61jzFgd4Cp79kdyJ55t0=
X-Google-Smtp-Source: APXvYqydYaT2Oduch/aClqVrlG8qbt3JNUFg/k4wtygXLDt+cRy/JifeQW0eVsOB95uYAsBsuwMLRQ==
X-Received: by 2002:ac8:ce:: with SMTP id d14mr53429415qtg.149.1560799705152; 
 Mon, 17 Jun 2019 12:28:25 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id p37sm7715622qtc.35.2019.06.17.12.28.24
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:28:24 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 178/459] drm/amd/powerplay: modify smu_update_table to use
 SMU_TABLE_xxx as the input
Date: Mon, 17 Jun 2019 14:26:43 -0500
Message-Id: <20190617192704.18038-79-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617192704.18038-1-alexander.deucher@amd.com>
References: <20190617192704.18038-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=lSPjIpVuGUANL+f9Nl+aM1UXxkDzzRFrJCP2QTAjmaI=;
 b=Lb6H7cNAnm8rUfT8DdwR2kZGhe2PT69HKKsxCSIP1AGt73LMaU/C2fUwKhc8UcZk0Z
 G/pVXgdjgwfP0sGaHtIgi6mFMgaEIIyMGrMt063LaMAcObdQ/mAxKU3ti2TcBDomV/ON
 2hPWkI5w4ni9NlnenIrk7Hu9l+my+wYQ+v3jLGcXdN6uU1F4GWm2td6+nHElp4aW/RSd
 tBVpn6KkmmeFiUfLBmsDYf6thtEwMrP5BCHt+skY+4MndcFklHzSezWTz7qPOi1j2Xzx
 nRMK6muTD+duSGCGRL/gvK2luYHnImfPbmm7inN4WqQd7vozv2Nmkt2nt51zGyYhK2bR
 mbLQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>, Huang Rui <ray.huang@amd.com>,
 Kevin Wang <kevin1.wang@amd.com>, Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogSHVhbmcgUnVpIDxyYXkuaHVhbmdAYW1kLmNvbT4KClRhYmxlIGlkIG1heSBiZSBkaWZm
ZXJlbnQgZm9yIGVhY2ggYXNpYywgc28gaXQncyBnb29kIHRvIHVzZSB0aGlzIGFzIHRoZSBpbnB1
dApmb3IgY29tbW9uIGludGVyZmFjZS4KClNpZ25lZC1vZmYtYnk6IEh1YW5nIFJ1aSA8cmF5Lmh1
YW5nQGFtZC5jb20+ClJldmlld2VkLWJ5OiBLZXZpbiBXYW5nIDxrZXZpbjEud2FuZ0BhbWQuY29t
PgpSZXZpZXdlZC1ieTogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpS
ZXZpZXdlZC1ieTogSGF3a2luZyBaaGFuZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPgpTaWduZWQt
b2ZmLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogZHJp
dmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvYW1kZ3B1X3NtdS5jIHwgIDggKysrKy0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jICB8IDI0ICsrKysrKysrKysr
KystLS0tLS0tLS0KIDIgZmlsZXMgY2hhbmdlZCwgMTggaW5zZXJ0aW9ucygrKSwgMTQgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvYW1kZ3B1
X3NtdS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvYW1kZ3B1X3NtdS5jCmluZGV4
IDhiYjc4ZmRjNzgyYS4uODU4Y2U1ZGI2ODdmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL3Bvd2VycGxheS9hbWRncHVfc211LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dl
cnBsYXkvYW1kZ3B1X3NtdS5jCkBAIC0xMjcsMTggKzEyNywxOCBAQCBpbnQgc211X2NvbW1vbl9y
ZWFkX3NlbnNvcihzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgZW51bSBhbWRfcHBfc2Vuc29ycyBz
ZW5zb3IsCiAJcmV0dXJuIHJldDsKIH0KIAotaW50IHNtdV91cGRhdGVfdGFibGUoc3RydWN0IHNt
dV9jb250ZXh0ICpzbXUsIHVpbnQzMl90IHRhYmxlX2luZGV4LAoraW50IHNtdV91cGRhdGVfdGFi
bGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGVudW0gc211X3RhYmxlX2lkIHRhYmxlX2luZGV4
LAogCQkgICAgIHZvaWQgKnRhYmxlX2RhdGEsIGJvb2wgZHJ2MnNtdSkKIHsKIAlzdHJ1Y3Qgc211
X3RhYmxlX2NvbnRleHQgKnNtdV90YWJsZSA9ICZzbXUtPnNtdV90YWJsZTsKIAlzdHJ1Y3Qgc211
X3RhYmxlICp0YWJsZSA9IE5VTEw7CiAJaW50IHJldCA9IDA7Ci0JaW50IHRhYmxlX2lkID0gdGFi
bGVfaW5kZXggJiAweGZmZmY7CisJaW50IHRhYmxlX2lkID0gc211X3RhYmxlX2dldF9pbmRleChz
bXUsIHRhYmxlX2luZGV4KTsKIAogCWlmICghdGFibGVfZGF0YSB8fCB0YWJsZV9pZCA+PSBzbXVf
dGFibGUtPnRhYmxlX2NvdW50KQogCQlyZXR1cm4gLUVJTlZBTDsKIAotCXRhYmxlID0gJnNtdV90
YWJsZS0+dGFibGVzW3RhYmxlX2lkXTsKKwl0YWJsZSA9ICZzbXVfdGFibGUtPnRhYmxlc1t0YWJs
ZV9pbmRleF07CiAKIAlpZiAoZHJ2MnNtdSkKIAkJbWVtY3B5KHRhYmxlLT5jcHVfYWRkciwgdGFi
bGVfZGF0YSwgdGFibGUtPnNpemUpOwpAQCAtMTU0LDcgKzE1NCw3IEBAIGludCBzbXVfdXBkYXRl
X3RhYmxlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCB1aW50MzJfdCB0YWJsZV9pbmRleCwKIAly
ZXQgPSBzbXVfc2VuZF9zbWNfbXNnX3dpdGhfcGFyYW0oc211LCBkcnYyc211ID8KIAkJCQkJICBT
TVVfTVNHX1RyYW5zZmVyVGFibGVEcmFtMlNtdSA6CiAJCQkJCSAgU01VX01TR19UcmFuc2ZlclRh
YmxlU211MkRyYW0sCi0JCQkJCSAgdGFibGVfaW5kZXgpOworCQkJCQkgIHRhYmxlX2lkKTsKIAlp
ZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L3Bvd2VycGxheS9zbXVfdjExXzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3Nt
dV92MTFfMC5jCmluZGV4IGJmZWUwYjQxM2NhMS4uM2UxMTQzMTZmMzg1IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9zbXVfdjExXzAuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL3Bvd2VycGxheS9zbXVfdjExXzAuYwpAQCAtNzA3LDE1ICs3MDcsMTcgQEAgc3Rh
dGljIGludCBzbXVfdjExXzBfd3JpdGVfcHB0YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSkK
IAlzdHJ1Y3Qgc211X3RhYmxlX2NvbnRleHQgKnRhYmxlX2NvbnRleHQgPSAmc211LT5zbXVfdGFi
bGU7CiAJaW50IHJldCA9IDA7CiAKLQlyZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgVEFCTEVf
UFBUQUJMRSwgdGFibGVfY29udGV4dC0+ZHJpdmVyX3BwdGFibGUsIHRydWUpOworCXJldCA9IHNt
dV91cGRhdGVfdGFibGUoc211LCBTTVVfVEFCTEVfUFBUQUJMRSwKKwkJCSAgICAgICB0YWJsZV9j
b250ZXh0LT5kcml2ZXJfcHB0YWJsZSwgdHJ1ZSk7CiAKIAlyZXR1cm4gcmV0OwogfQogCiBzdGF0
aWMgaW50IHNtdV92MTFfMF93cml0ZV93YXRlcm1hcmtzX3RhYmxlKHN0cnVjdCBzbXVfY29udGV4
dCAqc211KQogewotCXJldHVybiBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgVEFCTEVfV0FURVJNQVJL
UywKLQkJCQlzbXUtPnNtdV90YWJsZS50YWJsZXNbVEFCTEVfV0FURVJNQVJLU10uY3B1X2FkZHIs
IHRydWUpOworCXJldHVybiBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX1dBVEVSTUFS
S1MsCisJCQkJc211LT5zbXVfdGFibGUudGFibGVzW1NNVV9UQUJMRV9XQVRFUk1BUktTXS5jcHVf
YWRkciwKKwkJCQl0cnVlKTsKIH0KIAogc3RhdGljIGludCBzbXVfdjExXzBfc2V0X2RlZXBfc2xl
ZXBfZGNlZmNsayhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgdWludDMyX3QgY2xrKQpAQCAtNzQ2
LDcgKzc0OCw3IEBAIHN0YXRpYyBpbnQgc211X3YxMV8wX3NldF9taW5fZGNlZl9kZWVwX3NsZWVw
KHN0cnVjdCBzbXVfY29udGV4dCAqc211KQogc3RhdGljIGludCBzbXVfdjExXzBfc2V0X3Rvb2xf
dGFibGVfbG9jYXRpb24oc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpCiB7CiAJaW50IHJldCA9IDA7
Ci0Jc3RydWN0IHNtdV90YWJsZSAqdG9vbF90YWJsZSA9ICZzbXUtPnNtdV90YWJsZS50YWJsZXNb
VEFCTEVfUE1TVEFUVVNMT0ddOworCXN0cnVjdCBzbXVfdGFibGUgKnRvb2xfdGFibGUgPSAmc211
LT5zbXVfdGFibGUudGFibGVzW1NNVV9UQUJMRV9QTVNUQVRVU0xPR107CiAKIAlpZiAodG9vbF90
YWJsZS0+bWNfYWRkcmVzcykgewogCQlyZXQgPSBzbXVfc2VuZF9zbWNfbXNnX3dpdGhfcGFyYW0o
c211LApAQCAtMTIyNiw3ICsxMjI4LDcgQEAgc3RhdGljIGludCBzbXVfdjExXzBfZ2V0X21ldHJp
Y3NfdGFibGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCiAJaW50IHJldCA9IDA7CiAKIAlpZiAo
IXNtdS0+bWV0cmljc190aW1lIHx8IHRpbWVfYWZ0ZXIoamlmZmllcywgc211LT5tZXRyaWNzX3Rp
bWUgKyBIWiAvIDEwMDApKSB7Ci0JCXJldCA9IHNtdV91cGRhdGVfdGFibGUoc211LCBUQUJMRV9T
TVVfTUVUUklDUywKKwkJcmV0ID0gc211X3VwZGF0ZV90YWJsZShzbXUsIFNNVV9UQUJMRV9TTVVf
TUVUUklDUywKIAkJCQkodm9pZCAqKW1ldHJpY3NfdGFibGUsIGZhbHNlKTsKIAkJaWYgKHJldCkg
ewogCQkJcHJfaW5mbygiRmFpbGVkIHRvIGV4cG9ydCBTTVUgbWV0cmljcyB0YWJsZSFcbiIpOwpA
QCAtMTUyMSw3ICsxNTIzLDcgQEAgc211X3YxMV8wX3NldF93YXRlcm1hcmtzX2Zvcl9jbG9ja19y
YW5nZXMoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHN0cnVjdAogCQkJCQkgICpjbG9ja19yYW5n
ZXMpCiB7CiAJaW50IHJldCA9IDA7Ci0Jc3RydWN0IHNtdV90YWJsZSAqd2F0ZXJtYXJrcyA9ICZz
bXUtPnNtdV90YWJsZS50YWJsZXNbVEFCTEVfV0FURVJNQVJLU107CisJc3RydWN0IHNtdV90YWJs
ZSAqd2F0ZXJtYXJrcyA9ICZzbXUtPnNtdV90YWJsZS50YWJsZXNbU01VX1RBQkxFX1dBVEVSTUFS
S1NdOwogCVdhdGVybWFya3NfdCAqdGFibGUgPSB3YXRlcm1hcmtzLT5jcHVfYWRkcjsKIAogCWlm
ICghc211LT5kaXNhYmxlX3dhdGVybWFyayAmJgpAQCAtMTY2NSw3ICsxNjY3LDggQEAgc3RhdGlj
IGludCBzbXVfdjExXzBfc2V0X29kOF9kZWZhdWx0X3NldHRpbmdzKHN0cnVjdCBzbXVfY29udGV4
dCAqc211LAogCQlpZiAoIXRhYmxlX2NvbnRleHQtPm92ZXJkcml2ZV90YWJsZSkKIAkJCXJldHVy
biAtRU5PTUVNOwogCi0JCXJldCA9IHNtdV91cGRhdGVfdGFibGUoc211LCBUQUJMRV9PVkVSRFJJ
VkUsIHRhYmxlX2NvbnRleHQtPm92ZXJkcml2ZV90YWJsZSwgZmFsc2UpOworCQlyZXQgPSBzbXVf
dXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX09WRVJEUklWRSwKKwkJCQkgICAgICAgdGFibGVf
Y29udGV4dC0+b3ZlcmRyaXZlX3RhYmxlLCBmYWxzZSk7CiAJCWlmIChyZXQpIHsKIAkJCXByX2Vy
cigiRmFpbGVkIHRvIGV4cG9ydCBvdmVyIGRyaXZlIHRhYmxlIVxuIik7CiAJCQlyZXR1cm4gcmV0
OwpAQCAtMTY3NCw3ICsxNjc3LDggQEAgc3RhdGljIGludCBzbXVfdjExXzBfc2V0X29kOF9kZWZh
dWx0X3NldHRpbmdzKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAogCQlzbXVfc2V0X2RlZmF1bHRf
b2Q4X3NldHRpbmdzKHNtdSk7CiAJfQogCi0JcmV0ID0gc211X3VwZGF0ZV90YWJsZShzbXUsIFRB
QkxFX09WRVJEUklWRSwgdGFibGVfY29udGV4dC0+b3ZlcmRyaXZlX3RhYmxlLCB0cnVlKTsKKwly
ZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX09WRVJEUklWRSwKKwkJCSAgICAg
ICB0YWJsZV9jb250ZXh0LT5vdmVyZHJpdmVfdGFibGUsIHRydWUpOwogCWlmIChyZXQpIHsKIAkJ
cHJfZXJyKCJGYWlsZWQgdG8gaW1wb3J0IG92ZXIgZHJpdmUgdGFibGUhXG4iKTsKIAkJcmV0dXJu
IHJldDsKQEAgLTE2OTAsNyArMTY5NCw3IEBAIHN0YXRpYyBpbnQgc211X3YxMV8wX3VwZGF0ZV9v
ZDhfc2V0dGluZ3Moc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCiAJc3RydWN0IHNtdV90YWJsZV9j
b250ZXh0ICp0YWJsZV9jb250ZXh0ID0gJnNtdS0+c211X3RhYmxlOwogCWludCByZXQ7CiAKLQly
ZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgVEFCTEVfT1ZFUkRSSVZFLAorCXJldCA9IHNtdV91
cGRhdGVfdGFibGUoc211LCBTTVVfVEFCTEVfT1ZFUkRSSVZFLAogCQkJICAgICAgIHRhYmxlX2Nv
bnRleHQtPm92ZXJkcml2ZV90YWJsZSwgZmFsc2UpOwogCWlmIChyZXQpIHsKIAkJcHJfZXJyKCJG
YWlsZWQgdG8gZXhwb3J0IG92ZXIgZHJpdmUgdGFibGUhXG4iKTsKQEAgLTE2OTksNyArMTcwMyw3
IEBAIHN0YXRpYyBpbnQgc211X3YxMV8wX3VwZGF0ZV9vZDhfc2V0dGluZ3Moc3RydWN0IHNtdV9j
b250ZXh0ICpzbXUsCiAKIAlzbXVfdXBkYXRlX3NwZWNpZmllZF9vZDhfdmFsdWUoc211LCBpbmRl
eCwgdmFsdWUpOwogCi0JcmV0ID0gc211X3VwZGF0ZV90YWJsZShzbXUsIFRBQkxFX09WRVJEUklW
RSwKKwlyZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX09WRVJEUklWRSwKIAkJ
CSAgICAgICB0YWJsZV9jb250ZXh0LT5vdmVyZHJpdmVfdGFibGUsIHRydWUpOwogCWlmIChyZXQp
IHsKIAkJcHJfZXJyKCJGYWlsZWQgdG8gaW1wb3J0IG92ZXIgZHJpdmUgdGFibGUhXG4iKTsKLS0g
CjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
YW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
