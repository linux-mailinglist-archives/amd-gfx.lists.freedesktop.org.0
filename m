Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 91C9CE28F0
	for <lists+amd-gfx@lfdr.de>; Thu, 24 Oct 2019 05:37:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1E84C6E08C;
	Thu, 24 Oct 2019 03:37:05 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3FCDE6E08C
 for <amd-gfx@lists.freedesktop.org>; Thu, 24 Oct 2019 03:37:03 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id r19so1040103wmh.2
 for <amd-gfx@lists.freedesktop.org>; Wed, 23 Oct 2019 20:37:03 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=ILQrcvWSbJbInZMGH3Vs4STAjsTBdrUKs1ZQAuW4ZKo=;
 b=C5oy+7RYpSD5fK6hGC7zQzJzpNRakh/BAZ7PH9GeG4MyNp03HpRC/LJ9COGdbDquVB
 7Zq5gGQZ9c8CB9kGwmOV1onTbPQhnDcIuElIaYSz4Ub7nV31pNc66PeB8soAb5NqCcQN
 SYsHCZndJmiysEXHj55VKUauTRTxqQ+E8s6Zdz8KDdSuyVOpU4JCjKfrH5cgI3Xv4ZEh
 Dv4Nve6uw8dwO3lEunE46ZOeekADCKB3d1NtZBTpzNQ4wXD7h7Qv7R2gxnq9QlYIhW9U
 iIpb4FRR2Eh+9fqpgORPXvzssMMnEYp4aLBi3DoTBLtMlqvIuQ6XBl/PebYNe1p6JUJ7
 ox7Q==
X-Gm-Message-State: APjAAAW6ml3ZjwyXmpgsoFm9QCES0Vdng5zlu+xqwP0H/+RHKHeVzItk
 opRMxUUXBn+tVkAXdOZq9TPQVF0RvVrA8QHM+YmND+D5
X-Google-Smtp-Source: APXvYqznTeuTBzYV/Qf3ThekDD5qINScrkQN4/aBOPQBMz86kiJFZpRBP5c4kj+GatfLcLdct6L1fRPDVCs9J+gORKk=
X-Received: by 2002:a1c:c90f:: with SMTP id f15mr2802877wmb.127.1571888221512; 
 Wed, 23 Oct 2019 20:37:01 -0700 (PDT)
MIME-Version: 1.0
References: <20191023085246.24144-1-evan.quan@amd.com>
In-Reply-To: <20191023085246.24144-1-evan.quan@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Wed, 23 Oct 2019 23:36:49 -0400
Message-ID: <CADnq5_NnfGu03m=tYToOdo77djvR9GVBW0NvaWdwBdNZXsogNg@mail.gmail.com>
Subject: Re: [PATCH] drm/amd/powerplay: skip unsupported clock limit settings
 on Arcturus V2
To: "Quan, Evan" <Evan.Quan@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=ILQrcvWSbJbInZMGH3Vs4STAjsTBdrUKs1ZQAuW4ZKo=;
 b=mhXtd0NLjNH0+uCjQNN5GRNk46Zg2n1X8wT0bgZz/rPJdRgBJXydHgOPDPXBhcYVpB
 uupbfGWLLflgSPoXMSS2nPHmN+l0/k87kCS9H4yRWDJNplDE1HIfHv/sg6Kv7ngSJJ0v
 l/cYWGGDO9LXh3zvUmz5bGNBvmWJaFGAoreflJAD7hxXsd2Bpk7hnFDEyfS46k5uWVp+
 vBBYooEXa6XIPL/rus5mpMISTYYjIBk91SH4sOTgnnwSDn/5gR3VICn75PYqsq+/+2DV
 8EbzEL5Vz+uNDL+nVAC8v775H4N1A6JNCi8GgJrJ7BEtNpdQK+XgsnoUD3+XvQ6KHceW
 Hh0g==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Li, Candice" <Candice.Li@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCBPY3QgMjMsIDIwMTkgYXQgNDo1MyBBTSBRdWFuLCBFdmFuIDxFdmFuLlF1YW5AYW1k
LmNvbT4gd3JvdGU6Cj4KPiBGb3IgQXJjdHVydXMsIGNsb2NrIGxpbWl0IHNldHRpbmdzIG9uIHVj
bGsvc29jY2xrL2ZjbGsgZG9tYWlucwo+IGFyZSBub3Qgc3VwcG9ydGVkLgo+Cj4gVjI6IHNpbXBs
aWZ5IHRoZSBjb2RlIHRvIHN1cHBvcnQgYm90aCBTR1BVIGFuZCBNR1BVIGNhc2VzCj4KPiBDaGFu
Z2UtSWQ6IEkxMjg2Mjg5ZTM3NzBmMDQyMWYwZDIyOTg5NDM3ZTI2ZDNmN2IyZWM0Cj4gU2lnbmVk
LW9mZi1ieTogRXZhbiBRdWFuIDxldmFuLnF1YW5AYW1kLmNvbT4KCkFja2VkLWJ5OiBBbGV4IERl
dWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Cgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfcG0uYyAgICAgICB8ICAxMyArKwo+ICBkcml2ZXJzL2dwdS9k
cm0vYW1kL3Bvd2VycGxheS9hcmN0dXJ1c19wcHQuYyB8IDE0MiArKysrLS0tLS0tLS0tLS0tLS0t
Cj4gIDIgZmlsZXMgY2hhbmdlZCwgMzkgaW5zZXJ0aW9ucygrKSwgMTE2IGRlbGV0aW9ucygtKQo+
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wbS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3BtLmMKPiBpbmRleCAzNmYzNmIzNTAw
MGQuLjY2MGVmZTAwOTc0OSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfcG0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9w
bS5jCj4gQEAgLTI4ODEsNiArMjg4MSwxOSBAQCBpbnQgYW1kZ3B1X3BtX3N5c2ZzX2luaXQoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAgICAgICAgICAgICAgIERSTV9FUlJPUigiZmFp
bGVkIHRvIGNyZWF0ZSBkZXZpY2UgZmlsZSBwcF9kcG1fc2Nsa1xuIik7Cj4gICAgICAgICAgICAg
ICAgIHJldHVybiByZXQ7Cj4gICAgICAgICB9Cj4gKwo+ICsgICAgICAgLyogQXJjdHVydXMgZG9l
cyBub3Qgc3VwcG9ydCBzdGFuZGFsb25lIG1jbGsvc29jY2xrL2ZjbGsgbGV2ZWwgc2V0dGluZyAq
Lwo+ICsgICAgICAgaWYgKGFkZXYtPmFzaWNfdHlwZSA9PSBDSElQX0FSQ1RVUlVTKSB7Cj4gKyAg
ICAgICAgICAgICAgIGRldl9hdHRyX3BwX2RwbV9tY2xrLmF0dHIubW9kZSAmPSB+U19JV1VHTzsK
PiArICAgICAgICAgICAgICAgZGV2X2F0dHJfcHBfZHBtX21jbGsuc3RvcmUgPSBOVUxMOwo+ICsK
PiArICAgICAgICAgICAgICAgZGV2X2F0dHJfcHBfZHBtX3NvY2Nsay5hdHRyLm1vZGUgJj0gflNf
SVdVR087Cj4gKyAgICAgICAgICAgICAgIGRldl9hdHRyX3BwX2RwbV9zb2NjbGsuc3RvcmUgPSBO
VUxMOwo+ICsKPiArICAgICAgICAgICAgICAgZGV2X2F0dHJfcHBfZHBtX2ZjbGsuYXR0ci5tb2Rl
ICY9IH5TX0lXVUdPOwo+ICsgICAgICAgICAgICAgICBkZXZfYXR0cl9wcF9kcG1fZmNsay5zdG9y
ZSA9IE5VTEw7Cj4gKyAgICAgICB9Cj4gKwo+ICAgICAgICAgcmV0ID0gZGV2aWNlX2NyZWF0ZV9m
aWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX3BwX2RwbV9tY2xrKTsKPiAgICAgICAgIGlmIChyZXQp
IHsKPiAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGRldmljZSBm
aWxlIHBwX2RwbV9tY2xrXG4iKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9w
b3dlcnBsYXkvYXJjdHVydXNfcHB0LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9h
cmN0dXJ1c19wcHQuYwo+IGluZGV4IDlhNWZhYWMxY2VlYS4uMWJjYzVhYjI4NzNkIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2FyY3R1cnVzX3BwdC5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvYXJjdHVydXNfcHB0LmMKPiBAQCAtMzcs
NiArMzcsNyBAQAo+ICAjaW5jbHVkZSAic211X3YxMV8wX3BwdGFibGUuaCIKPiAgI2luY2x1ZGUg
ImFyY3R1cnVzX3Bwc21jLmgiCj4gICNpbmNsdWRlICJuYmlvL25iaW9fN180X3NoX21hc2suaCIK
PiArI2luY2x1ZGUgImFtZGdwdV94Z21pLmgiCj4KPiAgI2RlZmluZSBDVEZfT0ZGU0VUX0VER0Ug
ICAgICAgICAgICAgICAgICAgICAgICA1Cj4gICNkZWZpbmUgQ1RGX09GRlNFVF9IT1RTUE9UICAg
ICAgICAgICAgIDUKPiBAQCAtODQ5LDg0ICs4NTAsMTMgQEAgc3RhdGljIGludCBhcmN0dXJ1c19m
b3JjZV9jbGtfbGV2ZWxzKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAo+ICAgICAgICAgICAgICAg
ICBicmVhazsKPgo+ICAgICAgICAgY2FzZSBTTVVfTUNMSzoKPiAtICAgICAgICAgICAgICAgc2lu
Z2xlX2RwbV90YWJsZSA9ICYoZHBtX3RhYmxlLT5tZW1fdGFibGUpOwo+IC0KPiAtICAgICAgICAg
ICAgICAgaWYgKHNvZnRfbWF4X2xldmVsID49IHNpbmdsZV9kcG1fdGFibGUtPmNvdW50KSB7Cj4g
LSAgICAgICAgICAgICAgICAgICAgICAgcHJfZXJyKCJDbG9jayBsZXZlbCBzcGVjaWZpZWQgJWQg
aXMgb3ZlciBtYXggYWxsb3dlZCAlZFxuIiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc29mdF9tYXhfbGV2ZWwsIHNpbmdsZV9kcG1fdGFibGUtPmNvdW50IC0gMSk7
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gLUVJTlZBTDsKPiAtICAgICAgICAgICAg
ICAgICAgICAgICBicmVhazsKPiAtICAgICAgICAgICAgICAgfQo+IC0KPiAtICAgICAgICAgICAg
ICAgc2luZ2xlX2RwbV90YWJsZS0+ZHBtX3N0YXRlLnNvZnRfbWluX2xldmVsID0KPiAtICAgICAg
ICAgICAgICAgICAgICAgICBzaW5nbGVfZHBtX3RhYmxlLT5kcG1fbGV2ZWxzW3NvZnRfbWluX2xl
dmVsXS52YWx1ZTsKPiAtICAgICAgICAgICAgICAgc2luZ2xlX2RwbV90YWJsZS0+ZHBtX3N0YXRl
LnNvZnRfbWF4X2xldmVsID0KPiAtICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGVfZHBtX3Rh
YmxlLT5kcG1fbGV2ZWxzW3NvZnRfbWF4X2xldmVsXS52YWx1ZTsKPiAtCj4gLSAgICAgICAgICAg
ICAgIHJldCA9IGFyY3R1cnVzX3VwbG9hZF9kcG1fbGV2ZWwoc211LCBmYWxzZSwgRkVBVFVSRV9E
UE1fVUNMS19NQVNLKTsKPiAtICAgICAgICAgICAgICAgaWYgKHJldCkgewo+IC0gICAgICAgICAg
ICAgICAgICAgICAgIHByX2VycigiRmFpbGVkIHRvIHVwbG9hZCBib290IGxldmVsIHRvIGxvd2Vz
dCFcbiIpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+IC0gICAgICAgICAgICAg
ICB9Cj4gLQo+IC0gICAgICAgICAgICAgICByZXQgPSBhcmN0dXJ1c191cGxvYWRfZHBtX2xldmVs
KHNtdSwgdHJ1ZSwgRkVBVFVSRV9EUE1fVUNMS19NQVNLKTsKPiAtICAgICAgICAgICAgICAgaWYg
KHJldCkKPiAtICAgICAgICAgICAgICAgICAgICAgICBwcl9lcnIoIkZhaWxlZCB0byB1cGxvYWQg
ZHBtIG1heCBsZXZlbCB0byBoaWdoZXN0IVxuIik7Cj4gLQo+IC0gICAgICAgICAgICAgICBicmVh
azsKPiAtCj4gICAgICAgICBjYXNlIFNNVV9TT0NDTEs6Cj4gLSAgICAgICAgICAgICAgIHNpbmds
ZV9kcG1fdGFibGUgPSAmKGRwbV90YWJsZS0+c29jX3RhYmxlKTsKPiAtCj4gLSAgICAgICAgICAg
ICAgIGlmIChzb2Z0X21heF9sZXZlbCA+PSBzaW5nbGVfZHBtX3RhYmxlLT5jb3VudCkgewo+IC0g
ICAgICAgICAgICAgICAgICAgICAgIHByX2VycigiQ2xvY2sgbGV2ZWwgc3BlY2lmaWVkICVkIGlz
IG92ZXIgbWF4IGFsbG93ZWQgJWRcbiIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNvZnRfbWF4X2xldmVsLCBzaW5nbGVfZHBtX3RhYmxlLT5jb3VudCAtIDEpOwo+
IC0gICAgICAgICAgICAgICAgICAgICAgIHJldCA9IC1FSU5WQUw7Cj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgYnJlYWs7Cj4gLSAgICAgICAgICAgICAgIH0KPiAtCj4gLSAgICAgICAgICAgICAg
IHNpbmdsZV9kcG1fdGFibGUtPmRwbV9zdGF0ZS5zb2Z0X21pbl9sZXZlbCA9Cj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgc2luZ2xlX2RwbV90YWJsZS0+ZHBtX2xldmVsc1tzb2Z0X21pbl9sZXZl
bF0udmFsdWU7Cj4gLSAgICAgICAgICAgICAgIHNpbmdsZV9kcG1fdGFibGUtPmRwbV9zdGF0ZS5z
b2Z0X21heF9sZXZlbCA9Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlX2RwbV90YWJs
ZS0+ZHBtX2xldmVsc1tzb2Z0X21heF9sZXZlbF0udmFsdWU7Cj4gLQo+IC0gICAgICAgICAgICAg
ICByZXQgPSBhcmN0dXJ1c191cGxvYWRfZHBtX2xldmVsKHNtdSwgZmFsc2UsIEZFQVRVUkVfRFBN
X1NPQ0NMS19NQVNLKTsKPiAtICAgICAgICAgICAgICAgaWYgKHJldCkgewo+IC0gICAgICAgICAg
ICAgICAgICAgICAgIHByX2VycigiRmFpbGVkIHRvIHVwbG9hZCBib290IGxldmVsIHRvIGxvd2Vz
dCFcbiIpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+IC0gICAgICAgICAgICAg
ICB9Cj4gLQo+IC0gICAgICAgICAgICAgICByZXQgPSBhcmN0dXJ1c191cGxvYWRfZHBtX2xldmVs
KHNtdSwgdHJ1ZSwgRkVBVFVSRV9EUE1fU09DQ0xLX01BU0spOwo+IC0gICAgICAgICAgICAgICBp
ZiAocmV0KQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHByX2VycigiRmFpbGVkIHRvIHVwbG9h
ZCBkcG0gbWF4IGxldmVsIHRvIGhpZ2hlc3QhXG4iKTsKPiAtCj4gLSAgICAgICAgICAgICAgIGJy
ZWFrOwo+IC0KPiAgICAgICAgIGNhc2UgU01VX0ZDTEs6Cj4gLSAgICAgICAgICAgICAgIHNpbmds
ZV9kcG1fdGFibGUgPSAmKGRwbV90YWJsZS0+ZmNsa190YWJsZSk7Cj4gLQo+IC0gICAgICAgICAg
ICAgICBpZiAoc29mdF9tYXhfbGV2ZWwgPj0gc2luZ2xlX2RwbV90YWJsZS0+Y291bnQpIHsKPiAt
ICAgICAgICAgICAgICAgICAgICAgICBwcl9lcnIoIkNsb2NrIGxldmVsIHNwZWNpZmllZCAlZCBp
cyBvdmVyIG1heCBhbGxvd2VkICVkXG4iLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzb2Z0X21heF9sZXZlbCwgc2luZ2xlX2RwbV90YWJsZS0+Y291bnQgLSAxKTsK
PiAtICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAtRUlOVkFMOwo+IC0gICAgICAgICAgICAg
ICAgICAgICAgIGJyZWFrOwo+IC0gICAgICAgICAgICAgICB9Cj4gLQo+IC0gICAgICAgICAgICAg
ICBzaW5nbGVfZHBtX3RhYmxlLT5kcG1fc3RhdGUuc29mdF9taW5fbGV2ZWwgPQo+IC0gICAgICAg
ICAgICAgICAgICAgICAgIHNpbmdsZV9kcG1fdGFibGUtPmRwbV9sZXZlbHNbc29mdF9taW5fbGV2
ZWxdLnZhbHVlOwo+IC0gICAgICAgICAgICAgICBzaW5nbGVfZHBtX3RhYmxlLT5kcG1fc3RhdGUu
c29mdF9tYXhfbGV2ZWwgPQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZV9kcG1fdGFi
bGUtPmRwbV9sZXZlbHNbc29mdF9tYXhfbGV2ZWxdLnZhbHVlOwo+IC0KPiAtICAgICAgICAgICAg
ICAgcmV0ID0gYXJjdHVydXNfdXBsb2FkX2RwbV9sZXZlbChzbXUsIGZhbHNlLCBGRUFUVVJFX0RQ
TV9GQ0xLX01BU0spOwo+IC0gICAgICAgICAgICAgICBpZiAocmV0KSB7Cj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgcHJfZXJyKCJGYWlsZWQgdG8gdXBsb2FkIGJvb3QgbGV2ZWwgdG8gbG93ZXN0
IVxuIik7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gLSAgICAgICAgICAgICAg
IH0KPiAtCj4gLSAgICAgICAgICAgICAgIHJldCA9IGFyY3R1cnVzX3VwbG9hZF9kcG1fbGV2ZWwo
c211LCB0cnVlLCBGRUFUVVJFX0RQTV9GQ0xLX01BU0spOwo+IC0gICAgICAgICAgICAgICBpZiAo
cmV0KQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHByX2VycigiRmFpbGVkIHRvIHVwbG9hZCBk
cG0gbWF4IGxldmVsIHRvIGhpZ2hlc3QhXG4iKTsKPiAtCj4gKyAgICAgICAgICAgICAgIC8qCj4g
KyAgICAgICAgICAgICAgICAqIFNob3VsZCBub3QgYXJyaXZlIGhlcmUgc2luY2UgQXJjdHVydXMg
ZG9lcyBub3QKPiArICAgICAgICAgICAgICAgICogc3VwcG9ydCBtY2xrL3NvY2Nsay9mY2xrIHNv
ZnRtaW4vc29mdG1heCBzZXR0aW5ncwo+ICsgICAgICAgICAgICAgICAgKi8KPiArICAgICAgICAg
ICAgICAgcmV0ID0gLUVJTlZBTDsKPiAgICAgICAgICAgICAgICAgYnJlYWs7Cj4KPiAgICAgICAg
IGRlZmF1bHQ6Cj4gQEAgLTEyNDIsNiArMTE3Miw3IEBAIHN0YXRpYyBpbnQgYXJjdHVydXNfZm9y
Y2VfZHBtX2xpbWl0X3ZhbHVlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBib29sIGhpZ2hlc3Qp
Cj4gIHsKPiAgICAgICAgIHN0cnVjdCBhcmN0dXJ1c19kcG1fdGFibGUgKmRwbV90YWJsZSA9Cj4g
ICAgICAgICAgICAgICAgIChzdHJ1Y3QgYXJjdHVydXNfZHBtX3RhYmxlICopc211LT5zbXVfZHBt
LmRwbV9jb250ZXh0Owo+ICsgICAgICAgc3RydWN0IGFtZGdwdV9oaXZlX2luZm8gKmhpdmUgPSBh
bWRncHVfZ2V0X3hnbWlfaGl2ZShzbXUtPmFkZXYsIDApOwo+ICAgICAgICAgdWludDMyX3Qgc29m
dF9sZXZlbDsKPiAgICAgICAgIGludCByZXQgPSAwOwo+Cj4gQEAgLTEyNTUsNDAgKzExODYsMjcg
QEAgc3RhdGljIGludCBhcmN0dXJ1c19mb3JjZV9kcG1fbGltaXRfdmFsdWUoc3RydWN0IHNtdV9j
b250ZXh0ICpzbXUsIGJvb2wgaGlnaGVzdCkKPiAgICAgICAgICAgICAgICAgZHBtX3RhYmxlLT5n
ZnhfdGFibGUuZHBtX3N0YXRlLnNvZnRfbWF4X2xldmVsID0KPiAgICAgICAgICAgICAgICAgZHBt
X3RhYmxlLT5nZnhfdGFibGUuZHBtX2xldmVsc1tzb2Z0X2xldmVsXS52YWx1ZTsKPgo+IC0gICAg
ICAgLyogdWNsayAqLwo+IC0gICAgICAgaWYgKGhpZ2hlc3QpCj4gLSAgICAgICAgICAgICAgIHNv
ZnRfbGV2ZWwgPSBhcmN0dXJ1c19maW5kX2hpZ2hlc3RfZHBtX2xldmVsKCYoZHBtX3RhYmxlLT5t
ZW1fdGFibGUpKTsKPiAtICAgICAgIGVsc2UKPiAtICAgICAgICAgICAgICAgc29mdF9sZXZlbCA9
IGFyY3R1cnVzX2ZpbmRfbG93ZXN0X2RwbV9sZXZlbCgmKGRwbV90YWJsZS0+bWVtX3RhYmxlKSk7
Cj4gLQo+IC0gICAgICAgZHBtX3RhYmxlLT5tZW1fdGFibGUuZHBtX3N0YXRlLnNvZnRfbWluX2xl
dmVsID0KPiAtICAgICAgICAgICAgICAgZHBtX3RhYmxlLT5tZW1fdGFibGUuZHBtX3N0YXRlLnNv
ZnRfbWF4X2xldmVsID0KPiAtICAgICAgICAgICAgICAgZHBtX3RhYmxlLT5tZW1fdGFibGUuZHBt
X2xldmVsc1tzb2Z0X2xldmVsXS52YWx1ZTsKPiAtCj4gLSAgICAgICAvKiBzb2NjbGsgKi8KPiAt
ICAgICAgIGlmIChoaWdoZXN0KQo+IC0gICAgICAgICAgICAgICBzb2Z0X2xldmVsID0gYXJjdHVy
dXNfZmluZF9oaWdoZXN0X2RwbV9sZXZlbCgmKGRwbV90YWJsZS0+c29jX3RhYmxlKSk7Cj4gLSAg
ICAgICBlbHNlCj4gLSAgICAgICAgICAgICAgIHNvZnRfbGV2ZWwgPSBhcmN0dXJ1c19maW5kX2xv
d2VzdF9kcG1fbGV2ZWwoJihkcG1fdGFibGUtPnNvY190YWJsZSkpOwo+IC0KPiAtICAgICAgIGRw
bV90YWJsZS0+c29jX3RhYmxlLmRwbV9zdGF0ZS5zb2Z0X21pbl9sZXZlbCA9Cj4gLSAgICAgICAg
ICAgICAgIGRwbV90YWJsZS0+c29jX3RhYmxlLmRwbV9zdGF0ZS5zb2Z0X21heF9sZXZlbCA9Cj4g
LSAgICAgICAgICAgICAgIGRwbV90YWJsZS0+c29jX3RhYmxlLmRwbV9sZXZlbHNbc29mdF9sZXZl
bF0udmFsdWU7Cj4gLQo+IC0gICAgICAgcmV0ID0gYXJjdHVydXNfdXBsb2FkX2RwbV9sZXZlbChz
bXUsIGZhbHNlLCAweEZGRkZGRkZGKTsKPiArICAgICAgIHJldCA9IGFyY3R1cnVzX3VwbG9hZF9k
cG1fbGV2ZWwoc211LCBmYWxzZSwgRkVBVFVSRV9EUE1fR0ZYQ0xLX01BU0spOwo+ICAgICAgICAg
aWYgKHJldCkgewo+ICAgICAgICAgICAgICAgICBwcl9lcnIoIkZhaWxlZCB0byB1cGxvYWQgYm9v
dCBsZXZlbCB0byAlcyFcbiIsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdo
ZXN0ID8gImhpZ2hlc3QiIDogImxvd2VzdCIpOwo+ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0
Owo+ICAgICAgICAgfQo+Cj4gLSAgICAgICByZXQgPSBhcmN0dXJ1c191cGxvYWRfZHBtX2xldmVs
KHNtdSwgdHJ1ZSwgMHhGRkZGRkZGRik7Cj4gKyAgICAgICByZXQgPSBhcmN0dXJ1c191cGxvYWRf
ZHBtX2xldmVsKHNtdSwgdHJ1ZSwgRkVBVFVSRV9EUE1fR0ZYQ0xLX01BU0spOwo+ICAgICAgICAg
aWYgKHJldCkgewo+ICAgICAgICAgICAgICAgICBwcl9lcnIoIkZhaWxlZCB0byB1cGxvYWQgZHBt
IG1heCBsZXZlbCB0byAlcyFcbiEiLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
aGlnaGVzdCA/ICJoaWdoZXN0IiA6ICJsb3dlc3QiKTsKPiAgICAgICAgICAgICAgICAgcmV0dXJu
IHJldDsKPiAgICAgICAgIH0KPgo+ICsgICAgICAgaWYgKGhpdmUpCj4gKyAgICAgICAgICAgICAg
IC8qCj4gKyAgICAgICAgICAgICAgICAqIEZvcmNlIFhHTUkgUHN0YXRlIHRvIGhpZ2hlc3Qgb3Ig
bG93ZXN0Cj4gKyAgICAgICAgICAgICAgICAqIFRPRE86IHJldmlzZSB0aGlzIHdoZW4geGdtaSBk
cG0gaXMgZnVuY3Rpb25hbAo+ICsgICAgICAgICAgICAgICAgKi8KPiArICAgICAgICAgICAgICAg
cmV0ID0gc211X3YxMV8wX3NldF94Z21pX3BzdGF0ZShzbXUsIGhpZ2hlc3QgPyAxIDogMCk7Cj4g
Kwo+ICAgICAgICAgcmV0dXJuIHJldDsKPiAgfQo+Cj4gQEAgLTEyOTYsNiArMTIxNCw3IEBAIHN0
YXRpYyBpbnQgYXJjdHVydXNfdW5mb3JjZV9kcG1fbGV2ZWxzKHN0cnVjdCBzbXVfY29udGV4dCAq
c211KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgYXJjdHVydXNfZHBtX3RhYmxlICpkcG1fdGFibGUg
PQo+ICAgICAgICAgICAgICAgICAoc3RydWN0IGFyY3R1cnVzX2RwbV90YWJsZSAqKXNtdS0+c211
X2RwbS5kcG1fY29udGV4dDsKPiArICAgICAgIHN0cnVjdCBhbWRncHVfaGl2ZV9pbmZvICpoaXZl
ID0gYW1kZ3B1X2dldF94Z21pX2hpdmUoc211LT5hZGV2LCAwKTsKPiAgICAgICAgIHVpbnQzMl90
IHNvZnRfbWluX2xldmVsLCBzb2Z0X21heF9sZXZlbDsKPiAgICAgICAgIGludCByZXQgPSAwOwo+
Cj4gQEAgLTEzMDcsMzQgKzEyMjYsMjUgQEAgc3RhdGljIGludCBhcmN0dXJ1c191bmZvcmNlX2Rw
bV9sZXZlbHMoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpCj4gICAgICAgICBkcG1fdGFibGUtPmdm
eF90YWJsZS5kcG1fc3RhdGUuc29mdF9tYXhfbGV2ZWwgPQo+ICAgICAgICAgICAgICAgICBkcG1f
dGFibGUtPmdmeF90YWJsZS5kcG1fbGV2ZWxzW3NvZnRfbWF4X2xldmVsXS52YWx1ZTsKPgo+IC0g
ICAgICAgLyogdWNsayAqLwo+IC0gICAgICAgc29mdF9taW5fbGV2ZWwgPSBhcmN0dXJ1c19maW5k
X2xvd2VzdF9kcG1fbGV2ZWwoJihkcG1fdGFibGUtPm1lbV90YWJsZSkpOwo+IC0gICAgICAgc29m
dF9tYXhfbGV2ZWwgPSBhcmN0dXJ1c19maW5kX2hpZ2hlc3RfZHBtX2xldmVsKCYoZHBtX3RhYmxl
LT5tZW1fdGFibGUpKTsKPiAtICAgICAgIGRwbV90YWJsZS0+bWVtX3RhYmxlLmRwbV9zdGF0ZS5z
b2Z0X21pbl9sZXZlbCA9Cj4gLSAgICAgICAgICAgICAgIGRwbV90YWJsZS0+Z2Z4X3RhYmxlLmRw
bV9sZXZlbHNbc29mdF9taW5fbGV2ZWxdLnZhbHVlOwo+IC0gICAgICAgZHBtX3RhYmxlLT5tZW1f
dGFibGUuZHBtX3N0YXRlLnNvZnRfbWF4X2xldmVsID0KPiAtICAgICAgICAgICAgICAgZHBtX3Rh
YmxlLT5nZnhfdGFibGUuZHBtX2xldmVsc1tzb2Z0X21heF9sZXZlbF0udmFsdWU7Cj4gLQo+IC0g
ICAgICAgLyogc29jY2xrICovCj4gLSAgICAgICBzb2Z0X21pbl9sZXZlbCA9IGFyY3R1cnVzX2Zp
bmRfbG93ZXN0X2RwbV9sZXZlbCgmKGRwbV90YWJsZS0+c29jX3RhYmxlKSk7Cj4gLSAgICAgICBz
b2Z0X21heF9sZXZlbCA9IGFyY3R1cnVzX2ZpbmRfaGlnaGVzdF9kcG1fbGV2ZWwoJihkcG1fdGFi
bGUtPnNvY190YWJsZSkpOwo+IC0gICAgICAgZHBtX3RhYmxlLT5zb2NfdGFibGUuZHBtX3N0YXRl
LnNvZnRfbWluX2xldmVsID0KPiAtICAgICAgICAgICAgICAgZHBtX3RhYmxlLT5zb2NfdGFibGUu
ZHBtX2xldmVsc1tzb2Z0X21pbl9sZXZlbF0udmFsdWU7Cj4gLSAgICAgICBkcG1fdGFibGUtPnNv
Y190YWJsZS5kcG1fc3RhdGUuc29mdF9tYXhfbGV2ZWwgPQo+IC0gICAgICAgICAgICAgICBkcG1f
dGFibGUtPnNvY190YWJsZS5kcG1fbGV2ZWxzW3NvZnRfbWF4X2xldmVsXS52YWx1ZTsKPiAtCj4g
LSAgICAgICByZXQgPSBhcmN0dXJ1c191cGxvYWRfZHBtX2xldmVsKHNtdSwgZmFsc2UsIDB4RkZG
RkZGRkYpOwo+ICsgICAgICAgcmV0ID0gYXJjdHVydXNfdXBsb2FkX2RwbV9sZXZlbChzbXUsIGZh
bHNlLCBGRUFUVVJFX0RQTV9HRlhDTEtfTUFTSyk7Cj4gICAgICAgICBpZiAocmV0KSB7Cj4gICAg
ICAgICAgICAgICAgIHByX2VycigiRmFpbGVkIHRvIHVwbG9hZCBEUE0gQm9vdHVwIExldmVscyEi
KTsKPiAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiAgICAgICAgIH0KPgo+IC0gICAgICAg
cmV0ID0gYXJjdHVydXNfdXBsb2FkX2RwbV9sZXZlbChzbXUsIHRydWUsIDB4RkZGRkZGRkYpOwo+
ICsgICAgICAgcmV0ID0gYXJjdHVydXNfdXBsb2FkX2RwbV9sZXZlbChzbXUsIHRydWUsIEZFQVRV
UkVfRFBNX0dGWENMS19NQVNLKTsKPiAgICAgICAgIGlmIChyZXQpIHsKPiAgICAgICAgICAgICAg
ICAgcHJfZXJyKCJGYWlsZWQgdG8gdXBsb2FkIERQTSBNYXggTGV2ZWxzISIpOwo+ICAgICAgICAg
ICAgICAgICByZXR1cm4gcmV0Owo+ICAgICAgICAgfQo+Cj4gKyAgICAgICBpZiAoaGl2ZSkKPiAr
ICAgICAgICAgICAgICAgLyoKPiArICAgICAgICAgICAgICAgICogUmVzZXQgWEdNSSBQc3RhdGUg
YmFjayB0byBkZWZhdWx0Cj4gKyAgICAgICAgICAgICAgICAqIFRPRE86IHJldmlzZSB0aGlzIHdo
ZW4geGdtaSBkcG0gaXMgZnVuY3Rpb25hbAo+ICsgICAgICAgICAgICAgICAgKi8KPiArICAgICAg
ICAgICAgICAgcmV0ID0gc211X3YxMV8wX3NldF94Z21pX3BzdGF0ZShzbXUsIDApOwo+ICsKPiAg
ICAgICAgIHJldHVybiByZXQ7Cj4gIH0KPgo+IC0tCj4gMi4yMy4wCj4KPiBfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+IGFtZC1nZnggbWFpbGluZyBsaXN0
Cj4gYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZngKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9hbWQtZ2Z4
