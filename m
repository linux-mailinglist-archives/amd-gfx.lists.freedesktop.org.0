Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 566C6BC590
	for <lists+amd-gfx@lfdr.de>; Tue, 24 Sep 2019 12:15:22 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D257689D61;
	Tue, 24 Sep 2019 10:15:20 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM01-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr820048.outbound.protection.outlook.com [40.107.82.48])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 74BC689D61
 for <amd-gfx@lists.freedesktop.org>; Tue, 24 Sep 2019 10:15:19 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=bXCr//ToIWEwUKtFL6nezzS6ngVcBymXwVNWEm4MutM0Euz0hRZ/t+F2wefqQ+imqcVbg7lheUJ3WqiZXoTjTSiKgEnUjRcne7ngxDBfQWwJo1BVrw7Z/P4nG0IprIVbeZI3TCaGncTQNFw4jtZWRcwnECgMfD2r3VB12iy9zzQ8bPIcN6btkx0mtIsLcmjUMy1KHHQwaoBAkONWCLyLRyd3L0jYKo7uZzVx8NYaWkVxNTJkA8oZr5VR9a2sPt72AQPTlrZhItArTr9RpaFVXVzFn7jJM/09daLW5rJ4l+xFXo/NkKtglTR+mUFMhYNVV7P7LNiL0niDOssqeKwkaA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=vrcZ6utCdeUpKiEE+8KrPVrF5NK3jm+zrYCSKIfzgjY=;
 b=kx2WO7wqHnAEqUb1qT7fRJKoCOikDE8GBcpt0bV7+NPSXTRr5Up25xXrZUJpB7HcsGEV2EsRXmYmfej5rVPMPFlfaaY7Yxa18ZshyC/Bj91MJy4ntVvsXsxI1HpwBp3JyZ75vX9XpR30+2KPmP5Uy4GbMfeBP/wLhrKL9rnbQR0AXkq5UA13bxzyy+EmJAhgQjvvoWXMX2kZmCM2ryKcD42NmlbDPn+VBLlSYUZgYvS6vbWkxV60Y6cpmzOoO2ljBHpW7C5IOVeR3KrZHRtDprnBkn6NliyFEoTdV2Zj5Vqg/f+V0jVK8/ppmvbB8CSO+B5BLEZWbfDqAlsJDQxVDQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from BN8PR12MB3602.namprd12.prod.outlook.com (20.178.212.86) by
 BN8PR12MB3633.namprd12.prod.outlook.com (20.178.212.92) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2284.19; Tue, 24 Sep 2019 10:15:17 +0000
Received: from BN8PR12MB3602.namprd12.prod.outlook.com
 ([fe80::55d8:90a7:d1dc:e9e3]) by BN8PR12MB3602.namprd12.prod.outlook.com
 ([fe80::55d8:90a7:d1dc:e9e3%7]) with mapi id 15.20.2284.023; Tue, 24 Sep 2019
 10:15:17 +0000
From: "Yuan, Xiaojie" <Xiaojie.Yuan@amd.com>
To: Alex Deucher <alexdeucher@gmail.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: Re: [PATCH 2/2] drm/amdgpu/atomfirmware: simplify the interface to
 get vram info
Thread-Topic: [PATCH 2/2] drm/amdgpu/atomfirmware: simplify the interface to
 get vram info
Thread-Index: AQHVck6DsdvOd7IiL0ygTBMD2dmJhac6nTef
Date: Tue, 24 Sep 2019 10:15:17 +0000
Message-ID: <BN8PR12MB3602EC6E7F459DB9B47D874689840@BN8PR12MB3602.namprd12.prod.outlook.com>
References: <20190923203537.3301-1-alexander.deucher@amd.com>,
 <20190923203537.3301-2-alexander.deucher@amd.com>
In-Reply-To: <20190923203537.3301-2-alexander.deucher@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 59708fbf-9404-4b19-1d32-08d740d81967
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600167)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:BN8PR12MB3633; 
x-ms-traffictypediagnostic: BN8PR12MB3633:
x-ms-exchange-purlcount: 1
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <BN8PR12MB36338EA582288B9F86AC066189840@BN8PR12MB3633.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:6790;
x-forefront-prvs: 0170DAF08C
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(396003)(39860400002)(346002)(366004)(136003)(199004)(189003)(11346002)(52536014)(229853002)(25786009)(86362001)(91956017)(14454004)(3846002)(7696005)(110136005)(76116006)(305945005)(7736002)(102836004)(6116002)(486006)(5660300002)(476003)(446003)(6436002)(256004)(66946007)(66556008)(2906002)(8676002)(6506007)(53546011)(66476007)(316002)(4326008)(64756008)(66446008)(55016002)(2501003)(478600001)(966005)(186003)(14444005)(74316002)(6306002)(33656002)(8936002)(71190400001)(26005)(66066001)(81166006)(81156014)(6246003)(99286004)(9686003)(76176011)(71200400001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BN8PR12MB3633;
 H:BN8PR12MB3602.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: fkXYZTZk8/GTktK4xrkgFgWcKrWtGA245PkKvLxCY0mZ0Nk6Z2p/oeUmgQ8rZB06HokxQ37YGe5j1jNR4yEXhpAZJJQMYqM4PR47OB6F0KfgTHy2XNlTXADq/vn+2ji900IKEwduiT44fqDxSmzLDNjJ1k2IveQPHuq2/REQpOlBvrhYoxDca529Qd5tWQ9F8MwB5tiELGVYNxdRy0y4hpmX96yKYvIhbIuFMGQY5kr+YwM9NgryUCm2FTjDAxK26QE0A6nBgjtcdQfURM7Kax/LXL7MUTYrCzMWBzW82BnzQpZhGlZw8EVCGq/0tekIA0O8B54HjzmPBDBJVVhGQ7fBZlE7imK+Nppu/xtP7TiWlvdkgzTFUQ22ykPypyH5IfjCbSfn8lsUJx0AckV+bMVc/ZwqmSwTjfAnh1MBOphBAa0TEnLUgVi84sxaTB6xIIIBuhj/886wtHcHZqImAA==
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 59708fbf-9404-4b19-1d32-08d740d81967
X-MS-Exchange-CrossTenant-originalarrivaltime: 24 Sep 2019 10:15:17.8506 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: +7I6u+bfDsxFJlbvOE3GB246PUE+LvlTBpgox9WSpdHq+lXKk1nhJsKOS0uGOWs5
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN8PR12MB3633
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=vrcZ6utCdeUpKiEE+8KrPVrF5NK3jm+zrYCSKIfzgjY=;
 b=p9I+lrgOyKLDuJKl86/O9moxGnyBedbHDEe+ZB+u52Pk4uk4zEPBinq0J3GQgjVdCikcNopF0oui8RSA0SzwPxxNTgGh9efJnyJqeQYymlQPLIaOjJB1m3NCTwTvkeFGWWledKSngiQL76jZraS1AvMd8fer+xFUdeJmo3Z5UgU=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Xiaojie.Yuan@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U2VyaWVzIGlzIFJldmlld2VkLWJ5OiBYaWFvamllIFl1YW4gPHhpYW9qaWUueXVhbkBhbWQuY29t
PgoKQlIsClhpYW9qaWUKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
RnJvbTogYW1kLWdmeCA8YW1kLWdmeC1ib3VuY2VzQGxpc3RzLmZyZWVkZXNrdG9wLm9yZz4gb24g
YmVoYWxmIG9mIEFsZXggRGV1Y2hlciA8YWxleGRldWNoZXJAZ21haWwuY29tPgpTZW50OiBUdWVz
ZGF5LCBTZXB0ZW1iZXIgMjQsIDIwMTkgNDozNSBBTQpUbzogYW1kLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKQ2M6IERldWNoZXIsIEFsZXhhbmRlcgpTdWJqZWN0OiBbUEFUQ0ggMi8yXSBkcm0v
YW1kZ3B1L2F0b21maXJtd2FyZTogc2ltcGxpZnkgdGhlIGludGVyZmFjZSB0byBnZXQgdnJhbSBp
bmZvCgpmZXRjaCBib3RoIHRoZSB2cmFtIHR5cGUgYW5kIHdpZHRoIGluIG9uZSBmdW5jdGlvbiBj
YWxsLiAgVGhpcwphdm9pZHMgaGF2aW5nIHRvIHBhcnNlIHRoZSBzYW1lIGRhdGEgdGFibGUgdHdp
Y2UgdG8gZ2V0IHRoZSB0d28KcGllY2VzIG9mIGRhdGEuCgpTaWduZWQtb2ZmLWJ5OiBBbGV4IERl
dWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogLi4uL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMgIHwgMzQgKy0tLS0tLS0tLS0tLQogLi4uL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmggIHwgIDQgKy0KIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2dtY192MTBfMC5jICAgICAgICB8IDIxICsrKy0tLS0tCiBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jICAgICAgICAgfCA0OSArKysrKysrKysrLS0t
LS0tLS0tCiA0IGZpbGVzIGNoYW5nZWQsIDM3IGluc2VydGlvbnMoKyksIDcxIGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmly
bXdhcmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUu
YwppbmRleCA5ZmVjY2VjMmVhNWQuLjE5OTEzYzM5NTg4YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuYwpAQCAtMTY5LDkgKzE2OSw4IEBA
IHN0YXRpYyBpbnQgY29udmVydF9hdG9tX21lbV90eXBlX3RvX3ZyYW1fdHlwZShzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwKICAgICAgICByZXR1cm4gdnJhbV90eXBlOwogfQoKLXN0YXRpYyBp
bnQKLWFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCAqdnJhbV93aWR0
aCwgaW50ICp2cmFtX3R5cGUpCitpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZv
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGludCAqdnJhbV93aWR0aCwgaW50ICp2cmFtX3R5cGUpCiB7CiAgICAgICAgc3Ry
dWN0IGFtZGdwdV9tb2RlX2luZm8gKm1vZGVfaW5mbyA9ICZhZGV2LT5tb2RlX2luZm87CiAgICAg
ICAgaW50IGluZGV4LCBpID0gMDsKQEAgLTE4NSw3ICsxODQsNiBAQCBhbWRncHVfYXRvbWZpcm13
YXJlX2dldF92cmFtX2luZm8oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAgICAgICAgdTMy
IG1lbV9jaGFubmVsX3dpZHRoOwogICAgICAgIHUzMiBtb2R1bGVfaWQ7CgotCiAgICAgICAgaWYg
KGFkZXYtPmZsYWdzICYgQU1EX0lTX0FQVSkKICAgICAgICAgICAgICAgIGluZGV4ID0gZ2V0X2lu
ZGV4X2ludG9fbWFzdGVyX3RhYmxlKGF0b21fbWFzdGVyX2xpc3Rfb2ZfZGF0YV90YWJsZXNfdjJf
MSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlu
dGVncmF0ZWRzeXN0ZW1pbmZvKTsKQEAgLTI2MSwzNCArMjU5LDYgQEAgYW1kZ3B1X2F0b21maXJt
d2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogICAgICAgIHJl
dHVybiAwOwogfQoKLS8qCi0gKiBSZXR1cm4gdnJhbSB3aWR0aCBmcm9tIGludGVncmF0ZWQgc3lz
dGVtIGluZm8gdGFibGUsIGlmIGF2YWlsYWJsZSwKLSAqIG9yIDAgaWYgbm90LgotICovCi1pbnQg
YW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV93aWR0aChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikKLXsKLSAgICAgICBpbnQgdnJhbV93aWR0aCA9IDAsIHZyYW1fdHlwZSA9IDA7Ci0gICAg
ICAgaW50IHIgPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8oYWRldiwgJnZyYW1f
d2lkdGgsICZ2cmFtX3R5cGUpOwotICAgICAgIGlmIChyKQotICAgICAgICAgICAgICAgcmV0dXJu
IDA7Ci0KLSAgICAgICByZXR1cm4gdnJhbV93aWR0aDsKLX0KLQotLyoKLSAqIFJldHVybiB2cmFt
IHR5cGUgZnJvbSBlaXRoZXIgaW50ZWdyYXRlZCBzeXN0ZW0gaW5mbyB0YWJsZQotICogb3IgdW1j
IGluZm8gdGFibGUsIGlmIGF2YWlsYWJsZSwgb3IgMCAoVFlQRV9VTktOT1dOKSBpZiBub3QKLSAq
LwotaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1fdHlwZShzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldikKLXsKLSAgICAgICBpbnQgdnJhbV93aWR0aCA9IDAsIHZyYW1fdHlwZSA9IDA7
Ci0gICAgICAgaW50IHIgPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8oYWRldiwg
JnZyYW1fd2lkdGgsICZ2cmFtX3R5cGUpOwotICAgICAgIGlmIChyKQotICAgICAgICAgICAgICAg
cmV0dXJuIDA7Ci0KLSAgICAgICByZXR1cm4gdnJhbV90eXBlOwotfQotCiAvKgogICogUmV0dXJu
IHRydWUgaWYgdmJpb3MgZW5hYmxlZCBlY2MgYnkgZGVmYXVsdCwgaWYgdW1jIGluZm8gdGFibGUg
aXMgYXZhaWxhYmxlCiAgKiBvciBmYWxzZSBpZiBlY2MgaXMgbm90IGVuYWJsZWQgb3IgdW1jIGlu
Zm8gdGFibGUgaXMgbm90IGF2YWlsYWJsZQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2F0b21maXJtd2FyZS5oCmluZGV4IDVlYzZmOTJmMzUzYy4uODI4MTlmMDNlNDQ0
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13
YXJlLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2Fy
ZS5oCkBAIC0yOSw4ICsyOSw4IEBACiBib29sIGFtZGdwdV9hdG9tZmlybXdhcmVfZ3B1X3N1cHBv
cnRzX3ZpcnR1YWxpemF0aW9uKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIHZvaWQgYW1k
Z3B1X2F0b21maXJtd2FyZV9zY3JhdGNoX3JlZ3NfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldik7CiBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9hbGxvY2F0ZV9mYl9zY3JhdGNoKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2KTsKLWludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFt
X3dpZHRoKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKLWludCBhbWRncHVfYXRvbWZpcm13
YXJlX2dldF92cmFtX3R5cGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOworaW50IGFtZGdw
dV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgKnZyYW1fd2lkdGgsIGlu
dCAqdnJhbV90eXBlKTsKIGludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF9jbG9ja19pbmZvKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIGludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF9n
ZnhfaW5mbyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7CiBib29sIGFtZGdwdV9hdG9tZmly
bXdhcmVfbWVtX2VjY19zdXBwb3J0ZWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYwppbmRleCAwYTExZDc4ZDFmYjIuLmNiM2Y2
MTg3M2JhYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8w
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMKQEAgLTUzOSwx
NyArNTM5LDYgQEAgc3RhdGljIHZvaWQgZ21jX3YxMF8wX3ZyYW1fZ3R0X2xvY2F0aW9uKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2LAogICovCiBzdGF0aWMgaW50IGdtY192MTBfMF9tY19pbml0
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogewotICAgICAgIGludCBjaGFuc2l6ZSwgbnVt
Y2hhbjsKLQotICAgICAgIGlmICghYW1kZ3B1X2VtdV9tb2RlKQotICAgICAgICAgICAgICAgYWRl
di0+Z21jLnZyYW1fd2lkdGggPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX3dpZHRoKGFk
ZXYpOwotICAgICAgIGVsc2UgewotICAgICAgICAgICAgICAgLyogaGFyZCBjb2RlIHZyYW1fd2lk
dGggZm9yIGVtdWxhdGlvbiAqLwotICAgICAgICAgICAgICAgY2hhbnNpemUgPSAxMjg7Ci0gICAg
ICAgICAgICAgICBudW1jaGFuID0gMTsKLSAgICAgICAgICAgICAgIGFkZXYtPmdtYy52cmFtX3dp
ZHRoID0gbnVtY2hhbiAqIGNoYW5zaXplOwotICAgICAgIH0KLQogICAgICAgIC8qIENvdWxkIGFw
ZXIgc2l6ZSByZXBvcnQgMCA/ICovCiAgICAgICAgYWRldi0+Z21jLmFwZXJfYmFzZSA9IHBjaV9y
ZXNvdXJjZV9zdGFydChhZGV2LT5wZGV2LCAwKTsKICAgICAgICBhZGV2LT5nbWMuYXBlcl9zaXpl
ID0gcGNpX3Jlc291cmNlX2xlbihhZGV2LT5wZGV2LCAwKTsKQEAgLTYzNSw3ICs2MjQsNyBAQCBz
dGF0aWMgdW5zaWduZWQgZ21jX3YxMF8wX2dldF92Ymlvc19mYl9zaXplKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KQoKIHN0YXRpYyBpbnQgZ21jX3YxMF8wX3N3X2luaXQodm9pZCAqaGFuZGxl
KQogewotICAgICAgIGludCByOworICAgICAgIGludCByLCB2cmFtX3dpZHRoID0gMCwgdnJhbV90
eXBlID0gMDsKICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqKWhhbmRsZTsKCiAgICAgICAgZ2Z4aHViX3YyXzBfaW5pdChhZGV2KTsKQEAg
LTY0Myw3ICs2MzIsMTMgQEAgc3RhdGljIGludCBnbWNfdjEwXzBfc3dfaW5pdCh2b2lkICpoYW5k
bGUpCgogICAgICAgIHNwaW5fbG9ja19pbml0KCZhZGV2LT5nbWMuaW52YWxpZGF0ZV9sb2NrKTsK
Ci0gICAgICAgYWRldi0+Z21jLnZyYW1fdHlwZSA9IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3Zy
YW1fdHlwZShhZGV2KTsKKyAgICAgICByID0gYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9p
bmZvKGFkZXYsICZ2cmFtX3dpZHRoLCAmdnJhbV90eXBlKTsKKyAgICAgICBpZiAoIWFtZGdwdV9l
bXVfbW9kZSkKKyAgICAgICAgICAgICAgIGFkZXYtPmdtYy52cmFtX3dpZHRoID0gdnJhbV93aWR0
aDsKKyAgICAgICBlbHNlCisgICAgICAgICAgICAgICBhZGV2LT5nbWMudnJhbV93aWR0aCA9IDEg
KiAxMjg7IC8qIG51bWNoYW4gKiBjaGFuc2l6ZSAqLworCisgICAgICAgYWRldi0+Z21jLnZyYW1f
dHlwZSA9IHZyYW1fdHlwZTsKICAgICAgICBzd2l0Y2ggKGFkZXYtPmFzaWNfdHlwZSkgewogICAg
ICAgIGNhc2UgQ0hJUF9OQVZJMTA6CiAgICAgICAgY2FzZSBDSElQX05BVkkxNDoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jCmluZGV4IDYxMDJkZWFhMDNjYS4uYjQ0NTFhNTg3NDNj
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKQEAgLTg5NSwzMCArODk1LDgg
QEAgc3RhdGljIHZvaWQgZ21jX3Y5XzBfdnJhbV9ndHRfbG9jYXRpb24oc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsCiAgKi8KIHN0YXRpYyBpbnQgZ21jX3Y5XzBfbWNfaW5pdChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldikKIHsKLSAgICAgICBpbnQgY2hhbnNpemUsIG51bWNoYW47CiAgICAg
ICAgaW50IHI7CgotICAgICAgIGlmIChhbWRncHVfc3Jpb3ZfdmYoYWRldikpIHsKLSAgICAgICAg
ICAgICAgIC8qIEZvciBWZWdhMTAgU1ItSU9WLCB2cmFtX3dpZHRoIGNhbid0IGJlIHJlYWQgZnJv
bSBBVE9NIGFzIFJBVkVOLAotICAgICAgICAgICAgICAgICogYW5kIERGIHJlbGF0ZWQgcmVnaXN0
ZXJzIGlzIG5vdCByZWFkYWJsZSwgc2VlbXMgaGFyZGNvcmQgaXMgdGhlCi0gICAgICAgICAgICAg
ICAgKiBvbmx5IHdheSB0byBzZXQgdGhlIGNvcnJlY3QgdnJhbV93aWR0aAotICAgICAgICAgICAg
ICAgICovCi0gICAgICAgICAgICAgICBhZGV2LT5nbWMudnJhbV93aWR0aCA9IDIwNDg7Ci0gICAg
ICAgfSBlbHNlIGlmIChhbWRncHVfZW11X21vZGUgIT0gMSkgewotICAgICAgICAgICAgICAgYWRl
di0+Z21jLnZyYW1fd2lkdGggPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX3dpZHRoKGFk
ZXYpOwotICAgICAgIH0KLQotICAgICAgIGlmICghYWRldi0+Z21jLnZyYW1fd2lkdGgpIHsKLSAg
ICAgICAgICAgICAgIC8qIGhibSBtZW1vcnkgY2hhbm5lbCBzaXplICovCi0gICAgICAgICAgICAg
ICBpZiAoYWRldi0+ZmxhZ3MgJiBBTURfSVNfQVBVKQotICAgICAgICAgICAgICAgICAgICAgICBj
aGFuc2l6ZSA9IDY0OwotICAgICAgICAgICAgICAgZWxzZQotICAgICAgICAgICAgICAgICAgICAg
ICBjaGFuc2l6ZSA9IDEyODsKLQotICAgICAgICAgICAgICAgbnVtY2hhbiA9IGFkZXYtPmRmX2Z1
bmNzLT5nZXRfaGJtX2NoYW5uZWxfbnVtYmVyKGFkZXYpOwotICAgICAgICAgICAgICAgYWRldi0+
Z21jLnZyYW1fd2lkdGggPSBudW1jaGFuICogY2hhbnNpemU7Ci0gICAgICAgfQotCiAgICAgICAg
Lyogc2l6ZSBpbiBNQiBvbiBzaSAqLwogICAgICAgIGFkZXYtPmdtYy5tY192cmFtX3NpemUgPQog
ICAgICAgICAgICAgICAgYWRldi0+bmJpby5mdW5jcy0+Z2V0X21lbXNpemUoYWRldikgKiAxMDI0
VUxMICogMTAyNFVMTDsKQEAgLTEwMzMsNyArMTAxMSw3IEBAIHN0YXRpYyB1bnNpZ25lZCBnbWNf
djlfMF9nZXRfdmJpb3NfZmJfc2l6ZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKCiBzdGF0
aWMgaW50IGdtY192OV8wX3N3X2luaXQodm9pZCAqaGFuZGxlKQogewotICAgICAgIGludCByOwor
ICAgICAgIGludCByLCB2cmFtX3dpZHRoID0gMCwgdnJhbV90eXBlID0gMDsKICAgICAgICBzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqKWhhbmRsZTsK
CiAgICAgICAgZ2Z4aHViX3YxXzBfaW5pdChhZGV2KTsKQEAgLTEwNDQsNyArMTAyMiwzMCBAQCBz
dGF0aWMgaW50IGdtY192OV8wX3N3X2luaXQodm9pZCAqaGFuZGxlKQoKICAgICAgICBzcGluX2xv
Y2tfaW5pdCgmYWRldi0+Z21jLmludmFsaWRhdGVfbG9jayk7CgotICAgICAgIGFkZXYtPmdtYy52
cmFtX3R5cGUgPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX3R5cGUoYWRldik7CisgICAg
ICAgciA9IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhhZGV2LCAmdnJhbV93aWR0
aCwgJnZyYW1fdHlwZSk7CisgICAgICAgaWYgKGFtZGdwdV9zcmlvdl92ZihhZGV2KSkKKyAgICAg
ICAgICAgICAgIC8qIEZvciBWZWdhMTAgU1ItSU9WLCB2cmFtX3dpZHRoIGNhbid0IGJlIHJlYWQg
ZnJvbSBBVE9NIGFzIFJBVkVOLAorICAgICAgICAgICAgICAgICogYW5kIERGIHJlbGF0ZWQgcmVn
aXN0ZXJzIGlzIG5vdCByZWFkYWJsZSwgc2VlbXMgaGFyZGNvcmQgaXMgdGhlCisgICAgICAgICAg
ICAgICAgKiBvbmx5IHdheSB0byBzZXQgdGhlIGNvcnJlY3QgdnJhbV93aWR0aAorICAgICAgICAg
ICAgICAgICovCisgICAgICAgICAgICAgICBhZGV2LT5nbWMudnJhbV93aWR0aCA9IDIwNDg7Cisg
ICAgICAgZWxzZSBpZiAoYW1kZ3B1X2VtdV9tb2RlICE9IDEpCisgICAgICAgICAgICAgICBhZGV2
LT5nbWMudnJhbV93aWR0aCA9IHZyYW1fd2lkdGg7CisKKyAgICAgICBpZiAoIWFkZXYtPmdtYy52
cmFtX3dpZHRoKSB7CisgICAgICAgICAgICAgICBpbnQgY2hhbnNpemUsIG51bWNoYW47CisKKyAg
ICAgICAgICAgICAgIC8qIGhibSBtZW1vcnkgY2hhbm5lbCBzaXplICovCisgICAgICAgICAgICAg
ICBpZiAoYWRldi0+ZmxhZ3MgJiBBTURfSVNfQVBVKQorICAgICAgICAgICAgICAgICAgICAgICBj
aGFuc2l6ZSA9IDY0OworICAgICAgICAgICAgICAgZWxzZQorICAgICAgICAgICAgICAgICAgICAg
ICBjaGFuc2l6ZSA9IDEyODsKKworICAgICAgICAgICAgICAgbnVtY2hhbiA9IGFkZXYtPmRmX2Z1
bmNzLT5nZXRfaGJtX2NoYW5uZWxfbnVtYmVyKGFkZXYpOworICAgICAgICAgICAgICAgYWRldi0+
Z21jLnZyYW1fd2lkdGggPSBudW1jaGFuICogY2hhbnNpemU7CisgICAgICAgfQorCisgICAgICAg
YWRldi0+Z21jLnZyYW1fdHlwZSA9IHZyYW1fdHlwZTsKICAgICAgICBzd2l0Y2ggKGFkZXYtPmFz
aWNfdHlwZSkgewogICAgICAgIGNhc2UgQ0hJUF9SQVZFTjoKICAgICAgICAgICAgICAgIGFkZXYt
Pm51bV92bWh1YnMgPSAyOwotLQoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vYW1kLWdmeApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
