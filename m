Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9A3101AFC49
	for <lists+amd-gfx@lfdr.de>; Sun, 19 Apr 2020 19:03:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 13F5489ACD;
	Sun, 19 Apr 2020 17:03:22 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C9CC289ACD
 for <amd-gfx@lists.freedesktop.org>; Sun, 19 Apr 2020 17:03:20 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id j2so9077598wrs.9
 for <amd-gfx@lists.freedesktop.org>; Sun, 19 Apr 2020 10:03:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=reply-to:subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=SjKPQ0VuMDyqoxs0FonWuidSD1N/JjbkGOAmDDdqdYU=;
 b=BIDzsX04XeJ8tPNl2H4M/K3w33MuhD5LPj5r861jKAt3Vh+tFUo/zx6vg6X6oV8LGr
 CanEdE2pvpoUwSvO2eabWB9feEAvQfJiG2DfHTZX+5fAbmC96YVR2yOl4aGhQABy/Mri
 h8b/Wm5vs1uspVasEqkcFN+EtclNs358mF4sAsY4sUmcoq9zRGNcjhA3C52S0LfCz44b
 lzDQL9Vq4Xt5UiQLgHlpP8Hsebj1rqNh3M1ncJ+IzlsG4lkabpAsMyZ6x3oNtcCYyaWk
 GXoXpcjFO1LG4pywfJR4WXibM65V8LxI6/HQap+yA1RAGFor2gChZ1kJRH7e0iVdJweE
 01Kg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:cc:references:from
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-transfer-encoding:content-language;
 bh=SjKPQ0VuMDyqoxs0FonWuidSD1N/JjbkGOAmDDdqdYU=;
 b=S8RWTv+GxpOxmaQMfCa5ZRqZ3DrJVPJr2jlRZYZBHZ/cAtFhNgy/JcLQjA54DRvgIW
 MgUNsJHnVXWWgHJP3Mnp5uGxCDu6IYFsLkYF2BaE7btUDKMgoDdZyBLOf1sQNY5D/sDG
 6U8FByLTu30SsOIdjtAmc4Ubf3wM49x4kJ32ROdFuVTbMQ0GJWhugjSxKiM9TlF+ZdQU
 KvHdtTU3/t7ReP6cH2Zgfu8+FD0gtvD1XaE2/NF6jtaep8kSsVGmalx6JjJLBOCtF0UM
 HNP37CfXp9JZMeJl4rntMI0tHAIGyHZKbmgSyVTo8myWEiYhYzcMYSCtMpPLEihFr8sO
 iSeQ==
X-Gm-Message-State: AGi0PubzCdslUSjU3IDc9SI2xxL7yjCSVXDEpA2l88+CTdbxZDmIZJ2s
 7pDg8gNdh31Uak3bp563j8SMgfGR
X-Google-Smtp-Source: APiQypIjTlxhCOOZJf5BiSfsUz7FmNuu4moTP/3y8oFnV+twHmyUgfpNtOmfkUIKu14eUePeP82pzQ==
X-Received: by 2002:adf:f1c5:: with SMTP id z5mr14304683wro.100.1587315799034; 
 Sun, 19 Apr 2020 10:03:19 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id e2sm21824131wrv.89.2020.04.19.10.03.18
 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128);
 Sun, 19 Apr 2020 10:03:18 -0700 (PDT)
Subject: Re: [PATCH] drm/amdgpu: refine kiq read register
To: Felix Kuehling <felix.kuehling@amd.com>, Yintian Tao <yttao@amd.com>,
 monk.liu@amd.com
References: <20200417065310.21108-1-yttao@amd.com>
 <2359153a-853b-6cdd-acbc-21ff0fb0b473@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <e719f52f-557d-e67b-b22b-1ba20243b636@gmail.com>
Date: Sun, 19 Apr 2020 19:03:17 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <2359153a-853b-6cdd-acbc-21ff0fb0b473@amd.com>
Content-Language: en-US
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Cc: amd-gfx@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMTcuMDQuMjAgdW0gMTc6Mzkgc2NocmllYiBGZWxpeCBLdWVobGluZzoKPiBBbSAyMDIwLTA0
LTE3IHVtIDI6NTMgYS5tLiBzY2hyaWViIFlpbnRpYW4gVGFvOgo+PiBBY2NvcmRpbmcgdG8gdGhl
IGN1cnJlbnQga2lxIHJlYWQgcmVnaXN0ZXIgbWV0aG9kLAo+PiB0aGVyZSB3aWxsIGJlIHJhY2Ug
Y29uZGl0aW9uIHdoZW4gdXNpbmcgS0lRIHRvIHJlYWQKPj4gcmVnaXN0ZXIgaWYgbXVsdGlwbGUg
Y2xpZW50cyB3YW50IHRvIHJlYWQgYXQgc2FtZSB0aW1lCj4+IGp1c3QgbGlrZSB0aGUgZXhwYW1w
bGUgYmVsb3c6Cj4+IDEuIGNsaWVudC1BIHN0YXJ0IHRvIHJlYWQgUkVHLTAgdGhyb2d1aCBLSVEK
Pj4gMi4gY2xpZW50LUEgcG9sbCB0aGUgc2Vxbm8tMAo+PiAzLiBjbGllbnQtQiBzdGFydCB0byBy
ZWFkIFJFRy0xIHRocm91Z2ggS0lRCj4+IDQuIGNsaWVudC1CIHBvbGwgdGhlIHNlcW5vLTEKPj4g
NS4gdGhlIGtpcSBjb21wbGV0ZSB0aGVzZSB0d28gcmVhZCBvcGVyYXRpb24KPj4gNi4gY2xpZW50
LUEgdG8gcmVhZCB0aGUgcmVnaXN0ZXIgYXQgdGhlIHdiIGJ1ZmZlciBhbmQKPj4gICAgIGdldCBS
RUctMSB2YWx1ZQo+Pgo+PiBUaGVyZWZvcmUsIGRpcmVjdGx5IG1ha2Uga2lxIHdyaXRlIHRoZSBy
ZWdpc3RlciB2YWx1ZSBhdAo+PiB0aGUgcmluZyBidWZmZXIgdGhlbiB0aGVyZSB3aWxsIGJlIG5v
IHJhY2UgY29uZGl0aW9uIGZvcgo+PiB0aGUgd2IgYnVmZmVyLgo+Pgo+PiB2Mjogc3VwcGx5IHRo
ZSByZWFkX2Nsb2NrIGFuZCBtb3ZlIHRoZSByZWdfdmFsX29mZnMgYmFjawo+Pgo+PiBTaWduZWQt
b2ZmLWJ5OiBZaW50aWFuIFRhbyA8eXR0YW9AYW1kLmNvbT4KPj4gLS0tCj4+ICAgZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dmeC5jICB8IDExICsrKystLS0tLS0KPj4gICBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2Z4LmggIHwgIDEgLQo+PiAgIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yaW5nLmggfCAgNSArKystLQo+PiAgIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dmeF92MTBfMC5jICAgfCAxNCArKysrKy0tLS0tLS0KPj4gICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjhfMC5jICAgIHwgMTQgKysrKystLS0tLS0t
Cj4+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYyAgICB8IDI4ICsrKysr
KysrKysrKy0tLS0tLS0tLS0tLQo+PiAgIDYgZmlsZXMgY2hhbmdlZCwgMzMgaW5zZXJ0aW9ucygr
KSwgNDAgZGVsZXRpb25zKC0pCj4+Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfZ2Z4LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
Z2Z4LmMKPj4gaW5kZXggZWE1NzZiNDI2MGE0Li40ZTFjMDIzOWU1NjEgMTAwNjQ0Cj4+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nZnguYwo+PiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2Z4LmMKPj4gQEAgLTMwNCwxMCArMzA0LDYgQEAg
aW50IGFtZGdwdV9nZnhfa2lxX2luaXRfcmluZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwK
Pj4gICAKPj4gICAJc3Bpbl9sb2NrX2luaXQoJmtpcS0+cmluZ19sb2NrKTsKPj4gICAKPj4gLQly
ID0gYW1kZ3B1X2RldmljZV93Yl9nZXQoYWRldiwgJmtpcS0+cmVnX3ZhbF9vZmZzKTsKPj4gLQlp
ZiAocikKPj4gLQkJcmV0dXJuIHI7Cj4+IC0KPj4gICAJcmluZy0+YWRldiA9IE5VTEw7Cj4+ICAg
CXJpbmctPnJpbmdfb2JqID0gTlVMTDsKPj4gICAJcmluZy0+dXNlX2Rvb3JiZWxsID0gdHJ1ZTsK
Pj4gQEAgLTMzMSw3ICszMjcsNiBAQCBpbnQgYW1kZ3B1X2dmeF9raXFfaW5pdF9yaW5nKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2LAo+PiAgIAo+PiAgIHZvaWQgYW1kZ3B1X2dmeF9raXFfZnJl
ZV9yaW5nKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZykKPj4gICB7Cj4+IC0JYW1kZ3B1X2Rldmlj
ZV93Yl9mcmVlKHJpbmctPmFkZXYsIHJpbmctPmFkZXYtPmdmeC5raXEucmVnX3ZhbF9vZmZzKTsK
Pj4gICAJYW1kZ3B1X3JpbmdfZmluaShyaW5nKTsKPj4gICB9Cj4+ICAgCj4+IEBAIC02NzUsMTIg
KzY3MCwxNCBAQCB1aW50MzJfdCBhbWRncHVfa2lxX3JyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsIHVpbnQzMl90IHJlZykKPj4gICAJdWludDMyX3Qgc2VxOwo+PiAgIAlzdHJ1Y3QgYW1k
Z3B1X2tpcSAqa2lxID0gJmFkZXYtPmdmeC5raXE7Cj4+ICAgCXN0cnVjdCBhbWRncHVfcmluZyAq
cmluZyA9ICZraXEtPnJpbmc7Cj4+ICsJdWludDY0X3QgcmVnX3ZhbF9vZmZzID0gMDsKPj4gICAK
Pj4gICAJQlVHX09OKCFyaW5nLT5mdW5jcy0+ZW1pdF9ycmVnKTsKPj4gICAKPj4gICAJc3Bpbl9s
b2NrX2lycXNhdmUoJmtpcS0+cmluZ19sb2NrLCBmbGFncyk7Cj4+ICAgCWFtZGdwdV9yaW5nX2Fs
bG9jKHJpbmcsIDMyKTsKPj4gLQlhbWRncHVfcmluZ19lbWl0X3JyZWcocmluZywgcmVnKTsKPj4g
KwlyZWdfdmFsX29mZnMgPSAocmluZy0+d3B0ciAmIHJpbmctPmJ1Zl9tYXNrKSArIDMwOwo+IEkg
dGhpbmsgdGhhdCBzaG91bGQgYmUgKHJpbmctPndwdHIgKyAzMCkgJiByaW5nLT5idWZfbWFzay4g
T3RoZXJ3aXNlIHRoZQo+IHJlZ192YWxfb2Zmc2V0IGNhbiBiZSBwYXN0IHRoZSBlbmQgb2YgdGhl
IHJpbmcuCj4KPiBCdXQgdGhhdCBzdGlsbCBsZWF2ZXMgYSBwcm9ibGVtIGlmIGFub3RoZXIgY29t
bWFuZCBpcyBzdWJtaXR0ZWQgdG8gdGhlCj4gS0lRIGJlZm9yZSB5b3UgcmVhZCB0aGUgcmV0dXJu
ZWQgcmVnX3ZhbCBmcm9tIHRoZSByaW5nLiBZb3VyIHJlZ192YWwgY2FuCj4gYmUgb3ZlcndyaXR0
ZW4gYnkgdGhlIG5ldyBjb21tYW5kIGFuZCB5b3UgZ2V0IHRoZSB3cm9uZyByZXN1bHQuIE9yIHRo
ZQo+IGNvbW1hbmQgY2FuIGJlIG92ZXJ3cml0dGVuIHdpdGggdGhlIHJlZ192YWwsIHdoaWNoIHdp
bGwgbW9zdCBsaWtlbHkgaGFuZwo+IHRoZSBDUC4KPgo+IFlvdSBjb3VsZCBhbGxvY2F0ZSBzcGFj
ZSBvbiB0aGUgS0lRIHJpbmcgd2l0aCBhIE5PUCBjb21tYW5kIHRvIHByZXZlbnQKPiB0aGF0IHNw
YWNlIGZyb20gYmVpbmcgb3ZlcndyaXR0ZW4gYnkgb3RoZXIgY29tbWFuZHMuCgpXZWxsIEkgd2Fz
IHVuZGVyIHRoZSBhc3N1bXB0aW9uIHRoYXQgdGhpcyBpcyBhY3R1YWxseSB3aGF0IGlzIGRvbmUg
aGVyZS4gCklmIHRoYXQgaXMgbm90IHRoZSBjYXNlIHRoZSBwYXRjaCBpcyBhIHJhdGhlciBjbGVh
ciBOQUsuCgpSZWdhcmRzLApDaHJpc3RpYW4uCgo+Cj4gUmVnYXJkcywKPiAgwqAgRmVsaXgKPgo+
Cj4+ICsJYW1kZ3B1X3JpbmdfZW1pdF9ycmVnKHJpbmcsIHJlZywgcmVnX3ZhbF9vZmZzKTsKPj4g
ICAJYW1kZ3B1X2ZlbmNlX2VtaXRfcG9sbGluZyhyaW5nLCAmc2VxKTsKPj4gICAJYW1kZ3B1X3Jp
bmdfY29tbWl0KHJpbmcpOwo+PiAgIAlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZraXEtPnJpbmdf
bG9jaywgZmxhZ3MpOwo+PiBAQCAtNzA3LDcgKzcwNCw3IEBAIHVpbnQzMl90IGFtZGdwdV9raXFf
cnJlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgcmVnKQo+PiAgIAlpZiAo
Y250ID4gTUFYX0tJUV9SRUdfVFJZKQo+PiAgIAkJZ290byBmYWlsZWRfa2lxX3JlYWQ7Cj4+ICAg
Cj4+IC0JcmV0dXJuIGFkZXYtPndiLndiW2tpcS0+cmVnX3ZhbF9vZmZzXTsKPj4gKwlyZXR1cm4g
cmluZy0+cmluZ1tyZWdfdmFsX29mZnNdOwo+PiAgIAo+PiAgIGZhaWxlZF9raXFfcmVhZDoKPj4g
ICAJcHJfZXJyKCJmYWlsZWQgdG8gcmVhZCByZWc6JXhcbiIsIHJlZyk7Cj4+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2Z4LmggYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZ2Z4LmgKPj4gaW5kZXggNjM0NzQ2ODI5MDI0Li5lZTY5OGYw
MjQ2ZDggMTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9n
ZnguaAo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2Z4LmgKPj4g
QEAgLTEwMyw3ICsxMDMsNiBAQCBzdHJ1Y3QgYW1kZ3B1X2tpcSB7Cj4+ICAgCXN0cnVjdCBhbWRn
cHVfcmluZwlyaW5nOwo+PiAgIAlzdHJ1Y3QgYW1kZ3B1X2lycV9zcmMJaXJxOwo+PiAgIAljb25z
dCBzdHJ1Y3Qga2lxX3BtNF9mdW5jcyAqcG1mOwo+PiAtCXVpbnQzMl90CQkJcmVnX3ZhbF9vZmZz
Owo+PiAgIH07Cj4+ICAgCj4+ICAgLyoKPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9yaW5nLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfcmluZy5oCj4+IGluZGV4IGY2MTY2NGVlNDk0MC4uYTNkODhmMmFhOWY0IDEwMDY0NAo+PiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmluZy5oCj4+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yaW5nLmgKPj4gQEAgLTE4MSw3ICsxODEs
OCBAQCBzdHJ1Y3QgYW1kZ3B1X3JpbmdfZnVuY3Mgewo+PiAgIAl2b2lkICgqZW5kX3VzZSkoc3Ry
dWN0IGFtZGdwdV9yaW5nICpyaW5nKTsKPj4gICAJdm9pZCAoKmVtaXRfc3dpdGNoX2J1ZmZlcikg
KHN0cnVjdCBhbWRncHVfcmluZyAqcmluZyk7Cj4+ICAgCXZvaWQgKCplbWl0X2NudHhjbnRsKSAo
c3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50MzJfdCBmbGFncyk7Cj4+IC0Jdm9pZCAoKmVt
aXRfcnJlZykoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50MzJfdCByZWcpOwo+PiArCXZv
aWQgKCplbWl0X3JyZWcpKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywgdWludDMyX3QgcmVnLAo+
PiArCQkJICB1aW50NjRfdCByZWdfdmFsX29mZnMpOwo+PiAgIAl2b2lkICgqZW1pdF93cmVnKShz
dHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsIHVpbnQzMl90IHJlZywgdWludDMyX3QgdmFsKTsKPj4g
ICAJdm9pZCAoKmVtaXRfcmVnX3dhaXQpKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywgdWludDMy
X3QgcmVnLAo+PiAgIAkJCSAgICAgIHVpbnQzMl90IHZhbCwgdWludDMyX3QgbWFzayk7Cj4+IEBA
IC0yNjUsNyArMjY2LDcgQEAgc3RydWN0IGFtZGdwdV9yaW5nIHsKPj4gICAjZGVmaW5lIGFtZGdw
dV9yaW5nX2VtaXRfaGRwX2ZsdXNoKHIpIChyKS0+ZnVuY3MtPmVtaXRfaGRwX2ZsdXNoKChyKSkK
Pj4gICAjZGVmaW5lIGFtZGdwdV9yaW5nX2VtaXRfc3dpdGNoX2J1ZmZlcihyKSAociktPmZ1bmNz
LT5lbWl0X3N3aXRjaF9idWZmZXIoKHIpKQo+PiAgICNkZWZpbmUgYW1kZ3B1X3JpbmdfZW1pdF9j
bnR4Y250bChyLCBkKSAociktPmZ1bmNzLT5lbWl0X2NudHhjbnRsKChyKSwgKGQpKQo+PiAtI2Rl
ZmluZSBhbWRncHVfcmluZ19lbWl0X3JyZWcociwgZCkgKHIpLT5mdW5jcy0+ZW1pdF9ycmVnKChy
KSwgKGQpKQo+PiArI2RlZmluZSBhbWRncHVfcmluZ19lbWl0X3JyZWcociwgZCwgbykgKHIpLT5m
dW5jcy0+ZW1pdF9ycmVnKChyKSwgKGQpLCAobykpCj4+ICAgI2RlZmluZSBhbWRncHVfcmluZ19l
bWl0X3dyZWcociwgZCwgdikgKHIpLT5mdW5jcy0+ZW1pdF93cmVnKChyKSwgKGQpLCAodikpCj4+
ICAgI2RlZmluZSBhbWRncHVfcmluZ19lbWl0X3JlZ193YWl0KHIsIGQsIHYsIG0pIChyKS0+ZnVu
Y3MtPmVtaXRfcmVnX3dhaXQoKHIpLCAoZCksICh2KSwgKG0pKQo+PiAgICNkZWZpbmUgYW1kZ3B1
X3JpbmdfZW1pdF9yZWdfd3JpdGVfcmVnX3dhaXQociwgZDAsIGQxLCB2LCBtKSAociktPmZ1bmNz
LT5lbWl0X3JlZ193cml0ZV9yZWdfd2FpdCgociksIChkMCksIChkMSksICh2KSwgKG0pKQo+PiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3YxMF8wLmMgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjEwXzAuYwo+PiBpbmRleCAwYTAzZTJhZDVkOTUu
LjdjOWE1ZTQ0MDUwOSAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
Z2Z4X3YxMF8wLmMKPj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3YxMF8w
LmMKPj4gQEAgLTc1OTQsMjEgKzc1OTQsMTkgQEAgc3RhdGljIHZvaWQgZ2Z4X3YxMF8wX3Jpbmdf
ZW1pdF9mcmFtZV9jbnRsKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywgYm9vbCBzdGFydCwKPj4g
ICAJYW1kZ3B1X3Jpbmdfd3JpdGUocmluZywgdiB8IEZSQU1FX0NNRChzdGFydCA/IDAgOiAxKSk7
Cj4+ICAgfQo+PiAgIAo+PiAtc3RhdGljIHZvaWQgZ2Z4X3YxMF8wX3JpbmdfZW1pdF9ycmVnKHN0
cnVjdCBhbWRncHVfcmluZyAqcmluZywgdWludDMyX3QgcmVnKQo+PiArc3RhdGljIHZvaWQgZ2Z4
X3YxMF8wX3JpbmdfZW1pdF9ycmVnKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywgdWludDMyX3Qg
cmVnLAo+PiArCQkJCSAgICAgdWludDY0X3QgcmVnX3ZhbF9vZmZzKQo+PiAgIHsKPj4gLQlzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHJpbmctPmFkZXY7Cj4+IC0Jc3RydWN0IGFtZGdwdV9r
aXEgKmtpcSA9ICZhZGV2LT5nZngua2lxOwo+PiAtCj4+ICAgCWFtZGdwdV9yaW5nX3dyaXRlKHJp
bmcsIFBBQ0tFVDMoUEFDS0VUM19DT1BZX0RBVEEsIDQpKTsKPj4gICAJYW1kZ3B1X3Jpbmdfd3Jp
dGUocmluZywgMCB8CS8qIHNyYzogcmVnaXN0ZXIqLwo+PiAgIAkJCQkoNSA8PCA4KSB8CS8qIGRz
dDogbWVtb3J5ICovCj4+ICAgCQkJCSgxIDw8IDIwKSk7CS8qIHdyaXRlIGNvbmZpcm0gKi8KPj4g
ICAJYW1kZ3B1X3Jpbmdfd3JpdGUocmluZywgcmVnKTsKPj4gICAJYW1kZ3B1X3Jpbmdfd3JpdGUo
cmluZywgMCk7Cj4+IC0JYW1kZ3B1X3Jpbmdfd3JpdGUocmluZywgbG93ZXJfMzJfYml0cyhhZGV2
LT53Yi5ncHVfYWRkciArCj4+IC0JCQkJa2lxLT5yZWdfdmFsX29mZnMgKiA0KSk7Cj4+IC0JYW1k
Z3B1X3Jpbmdfd3JpdGUocmluZywgdXBwZXJfMzJfYml0cyhhZGV2LT53Yi5ncHVfYWRkciArCj4+
IC0JCQkJa2lxLT5yZWdfdmFsX29mZnMgKiA0KSk7Cj4+ICsJYW1kZ3B1X3Jpbmdfd3JpdGUocmlu
ZywgbG93ZXJfMzJfYml0cyhyaW5nLT5ncHVfYWRkciArCj4+ICsJCQkJCSAgICAgIHJlZ192YWxf
b2ZmcyAqIDQpKTsKPj4gKwlhbWRncHVfcmluZ193cml0ZShyaW5nLCB1cHBlcl8zMl9iaXRzKHJp
bmctPmdwdV9hZGRyICsKPj4gKwkJCQkJICAgICAgcmVnX3ZhbF9vZmZzICogNCkpOwo+PiAgIH0K
Pj4gICAKPj4gICBzdGF0aWMgdm9pZCBnZnhfdjEwXzBfcmluZ19lbWl0X3dyZWcoc3RydWN0IGFt
ZGdwdV9yaW5nICpyaW5nLCB1aW50MzJfdCByZWcsCj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9nZnhfdjhfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
Z2Z4X3Y4XzAuYwo+PiBpbmRleCBmYzZjMmYyYmM3NmMuLjhlN2VlZTc4MzhlMCAxMDA2NDQKPj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y4XzAuYwo+PiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjhfMC5jCj4+IEBAIC02MzgzLDIxICs2MzgzLDE5
IEBAIHN0YXRpYyB2b2lkIGdmeF92OF8wX3JpbmdfZW1pdF9wYXRjaF9jb25kX2V4ZWMoc3RydWN0
IGFtZGdwdV9yaW5nICpyaW5nLCB1bnNpZ25lCj4+ICAgCQlyaW5nLT5yaW5nW29mZnNldF0gPSAo
cmluZy0+cmluZ19zaXplID4+IDIpIC0gb2Zmc2V0ICsgY3VyOwo+PiAgIH0KPj4gICAKPj4gLXN0
YXRpYyB2b2lkIGdmeF92OF8wX3JpbmdfZW1pdF9ycmVnKHN0cnVjdCBhbWRncHVfcmluZyAqcmlu
ZywgdWludDMyX3QgcmVnKQo+PiArc3RhdGljIHZvaWQgZ2Z4X3Y4XzBfcmluZ19lbWl0X3JyZWco
c3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50MzJfdCByZWcsCj4+ICsJCQkJICAgIHVpbnQ2
NF90IHJlZ192YWxfb2ZmcykKPj4gICB7Cj4+IC0Jc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYg
PSByaW5nLT5hZGV2Owo+PiAtCXN0cnVjdCBhbWRncHVfa2lxICpraXEgPSAmYWRldi0+Z2Z4Lmtp
cTsKPj4gLQo+PiAgIAlhbWRncHVfcmluZ193cml0ZShyaW5nLCBQQUNLRVQzKFBBQ0tFVDNfQ09Q
WV9EQVRBLCA0KSk7Cj4+ICAgCWFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIDAgfAkvKiBzcmM6IHJl
Z2lzdGVyKi8KPj4gICAJCQkJKDUgPDwgOCkgfAkvKiBkc3Q6IG1lbW9yeSAqLwo+PiAgIAkJCQko
MSA8PCAyMCkpOwkvKiB3cml0ZSBjb25maXJtICovCj4+ICAgCWFtZGdwdV9yaW5nX3dyaXRlKHJp
bmcsIHJlZyk7Cj4+ICAgCWFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIDApOwo+PiAtCWFtZGdwdV9y
aW5nX3dyaXRlKHJpbmcsIGxvd2VyXzMyX2JpdHMoYWRldi0+d2IuZ3B1X2FkZHIgKwo+PiAtCQkJ
CWtpcS0+cmVnX3ZhbF9vZmZzICogNCkpOwo+PiAtCWFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIHVw
cGVyXzMyX2JpdHMoYWRldi0+d2IuZ3B1X2FkZHIgKwo+PiAtCQkJCWtpcS0+cmVnX3ZhbF9vZmZz
ICogNCkpOwo+PiArCWFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIGxvd2VyXzMyX2JpdHMocmluZy0+
Z3B1X2FkZHIgKwo+PiArCQkJCQkgICAgICByZWdfdmFsX29mZnMgKiA0KSk7Cj4+ICsJYW1kZ3B1
X3Jpbmdfd3JpdGUocmluZywgdXBwZXJfMzJfYml0cyhyaW5nLT5ncHVfYWRkciArCj4+ICsJCQkJ
CSAgICAgIHJlZ192YWxfb2ZmcyAqIDQpKTsKPj4gICB9Cj4+ICAgCj4+ICAgc3RhdGljIHZvaWQg
Z2Z4X3Y4XzBfcmluZ19lbWl0X3dyZWcoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50MzJf
dCByZWcsCj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nZnhfdjlf
MC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ2Z4X3Y5XzAuYwo+PiBpbmRleCA4NGZj
Zjg0MjMxNmQuLmZmMjc5YjFmNWMyNCAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvZ2Z4X3Y5XzAuYwo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9n
ZnhfdjlfMC5jCj4+IEBAIC00MDQ2LDExICs0MDQ2LDEzIEBAIHN0YXRpYyB1aW50NjRfdCBnZnhf
djlfMF9raXFfcmVhZF9jbG9jayhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPj4gICAJdWlu
dDMyX3Qgc2VxOwo+PiAgIAlzdHJ1Y3QgYW1kZ3B1X2tpcSAqa2lxID0gJmFkZXYtPmdmeC5raXE7
Cj4+ICAgCXN0cnVjdCBhbWRncHVfcmluZyAqcmluZyA9ICZraXEtPnJpbmc7Cj4+ICsJdWludDY0
X3QgcmVnX3ZhbF9vZmZzID0gMDsKPj4gICAKPj4gICAJQlVHX09OKCFyaW5nLT5mdW5jcy0+ZW1p
dF9ycmVnKTsKPj4gICAKPj4gICAJc3Bpbl9sb2NrX2lycXNhdmUoJmtpcS0+cmluZ19sb2NrLCBm
bGFncyk7Cj4+ICAgCWFtZGdwdV9yaW5nX2FsbG9jKHJpbmcsIDMyKTsKPj4gKwlyZWdfdmFsX29m
ZnMgPSAocmluZy0+d3B0ciAmIHJpbmctPmJ1Zl9tYXNrKSArIDMwOwo+PiAgIAlhbWRncHVfcmlu
Z193cml0ZShyaW5nLCBQQUNLRVQzKFBBQ0tFVDNfQ09QWV9EQVRBLCA0KSk7Cj4+ICAgCWFtZGdw
dV9yaW5nX3dyaXRlKHJpbmcsIDkgfAkvKiBzcmM6IHJlZ2lzdGVyKi8KPj4gICAJCQkJKDUgPDwg
OCkgfAkvKiBkc3Q6IG1lbW9yeSAqLwo+PiBAQCAtNDA1OCwxMCArNDA2MCwxMCBAQCBzdGF0aWMg
dWludDY0X3QgZ2Z4X3Y5XzBfa2lxX3JlYWRfY2xvY2soc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpCj4+ICAgCQkJCSgxIDw8IDIwKSk7CS8qIHdyaXRlIGNvbmZpcm0gKi8KPj4gICAJYW1kZ3B1
X3Jpbmdfd3JpdGUocmluZywgMCk7Cj4+ICAgCWFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIDApOwo+
PiAtCWFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIGxvd2VyXzMyX2JpdHMoYWRldi0+d2IuZ3B1X2Fk
ZHIgKwo+PiAtCQkJCWtpcS0+cmVnX3ZhbF9vZmZzICogNCkpOwo+PiAtCWFtZGdwdV9yaW5nX3dy
aXRlKHJpbmcsIHVwcGVyXzMyX2JpdHMoYWRldi0+d2IuZ3B1X2FkZHIgKwo+PiAtCQkJCWtpcS0+
cmVnX3ZhbF9vZmZzICogNCkpOwo+PiArCWFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIGxvd2VyXzMy
X2JpdHMocmluZy0+Z3B1X2FkZHIgKwo+PiArCQkJCQkgICAgICByZWdfdmFsX29mZnMgKiA0KSk7
Cj4+ICsJYW1kZ3B1X3Jpbmdfd3JpdGUocmluZywgdXBwZXJfMzJfYml0cyhyaW5nLT5ncHVfYWRk
ciArCj4+ICsJCQkJCSAgICAgIHJlZ192YWxfb2ZmcyAqIDQpKTsKPj4gICAJYW1kZ3B1X2ZlbmNl
X2VtaXRfcG9sbGluZyhyaW5nLCAmc2VxKTsKPj4gICAJYW1kZ3B1X3JpbmdfY29tbWl0KHJpbmcp
Owo+PiAgIAlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZraXEtPnJpbmdfbG9jaywgZmxhZ3MpOwo+
PiBAQCAtNDA4OCw4ICs0MDkwLDggQEAgc3RhdGljIHVpbnQ2NF90IGdmeF92OV8wX2tpcV9yZWFk
X2Nsb2NrKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+PiAgIAlpZiAoY250ID4gTUFYX0tJ
UV9SRUdfVFJZKQo+PiAgIAkJZ290byBmYWlsZWRfa2lxX3JlYWQ7Cj4+ICAgCj4+IC0JcmV0dXJu
ICh1aW50NjRfdClhZGV2LT53Yi53YltraXEtPnJlZ192YWxfb2Zmc10gfAo+PiAtCQkodWludDY0
X3QpYWRldi0+d2Iud2Jba2lxLT5yZWdfdmFsX29mZnMgKyAxIF0gPDwgMzJVTEw7Cj4+ICsJcmV0
dXJuICh1aW50NjRfdClyaW5nLT5yaW5nW3JlZ192YWxfb2Zmc10gfAo+PiArCQkodWludDY0X3Qp
cmluZy0+cmluZ1tyZWdfdmFsX29mZnMgKyAxIF0gPDwgMzJVTEw7Cj4+ICAgCj4+ICAgZmFpbGVk
X2tpcV9yZWFkOgo+PiAgIAlwcl9lcnIoImZhaWxlZCB0byByZWFkIGdwdSBjbG9ja1xuIik7Cj4+
IEBAIC01NDgyLDIxICs1NDg0LDE5IEBAIHN0YXRpYyB2b2lkIGdmeF92OV8wX3JpbmdfZW1pdF9w
YXRjaF9jb25kX2V4ZWMoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCB1bnNpZ25lCj4+ICAgCQly
aW5nLT5yaW5nW29mZnNldF0gPSAocmluZy0+cmluZ19zaXplPj4yKSAtIG9mZnNldCArIGN1cjsK
Pj4gICB9Cj4+ICAgCj4+IC1zdGF0aWMgdm9pZCBnZnhfdjlfMF9yaW5nX2VtaXRfcnJlZyhzdHJ1
Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsIHVpbnQzMl90IHJlZykKPj4gK3N0YXRpYyB2b2lkIGdmeF92
OV8wX3JpbmdfZW1pdF9ycmVnKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywgdWludDMyX3QgcmVn
LAo+PiArCQkJCSAgICB1aW50NjRfdCByZWdfdmFsX29mZnMpCj4+ICAgewo+PiAtCXN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2ID0gcmluZy0+YWRldjsKPj4gLQlzdHJ1Y3QgYW1kZ3B1X2tpcSAq
a2lxID0gJmFkZXYtPmdmeC5raXE7Cj4+IC0KPj4gICAJYW1kZ3B1X3Jpbmdfd3JpdGUocmluZywg
UEFDS0VUMyhQQUNLRVQzX0NPUFlfREFUQSwgNCkpOwo+PiAgIAlhbWRncHVfcmluZ193cml0ZShy
aW5nLCAwIHwJLyogc3JjOiByZWdpc3RlciovCj4+ICAgCQkJCSg1IDw8IDgpIHwJLyogZHN0OiBt
ZW1vcnkgKi8KPj4gICAJCQkJKDEgPDwgMjApKTsJLyogd3JpdGUgY29uZmlybSAqLwo+PiAgIAlh
bWRncHVfcmluZ193cml0ZShyaW5nLCByZWcpOwo+PiAgIAlhbWRncHVfcmluZ193cml0ZShyaW5n
LCAwKTsKPj4gLQlhbWRncHVfcmluZ193cml0ZShyaW5nLCBsb3dlcl8zMl9iaXRzKGFkZXYtPndi
LmdwdV9hZGRyICsKPj4gLQkJCQlraXEtPnJlZ192YWxfb2ZmcyAqIDQpKTsKPj4gLQlhbWRncHVf
cmluZ193cml0ZShyaW5nLCB1cHBlcl8zMl9iaXRzKGFkZXYtPndiLmdwdV9hZGRyICsKPj4gLQkJ
CQlraXEtPnJlZ192YWxfb2ZmcyAqIDQpKTsKPj4gKwlhbWRncHVfcmluZ193cml0ZShyaW5nLCBs
b3dlcl8zMl9iaXRzKHJpbmctPmdwdV9hZGRyICsKPj4gKwkJCQkJICAgICAgcmVnX3ZhbF9vZmZz
ICogNCkpOwo+PiArCWFtZGdwdV9yaW5nX3dyaXRlKHJpbmcsIHVwcGVyXzMyX2JpdHMocmluZy0+
Z3B1X2FkZHIgKwo+PiArCQkJCQkgICAgICByZWdfdmFsX29mZnMgKiA0KSk7Cj4+ICAgfQo+PiAg
IAo+PiAgIHN0YXRpYyB2b2lkIGdmeF92OV8wX3JpbmdfZW1pdF93cmVnKHN0cnVjdCBhbWRncHVf
cmluZyAqcmluZywgdWludDMyX3QgcmVnLAo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCj4gYW1kLWdmeCBtYWlsaW5nIGxpc3QKPiBhbWQtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vYW1kLWdmeAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
Cg==
