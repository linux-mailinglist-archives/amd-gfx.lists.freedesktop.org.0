Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1DE3228229
	for <lists+amd-gfx@lfdr.de>; Thu, 23 May 2019 18:09:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AAB646E029;
	Thu, 23 May 2019 16:09:13 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 963CA6E029
 for <amd-gfx@lists.freedesktop.org>; Thu, 23 May 2019 16:09:11 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id e15so6929794wrs.4
 for <amd-gfx@lists.freedesktop.org>; Thu, 23 May 2019 09:09:11 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=y6Tsc5fkQOj0Cofdp2rpiPBDk2eI0KSkvnvJHpsvFxY=;
 b=rO/+4pMYJCmoIteSfIe3nj6J0xCBr9wQVg54Z51vrIlBSjxjaFzjnuvoyV2M5Zl+O1
 o55JfBy7/wASVq6GrddQ3e3ZpXBIKPK3W55Yx+IZ7gxELMJ6ZyfbCZ4nRuFvq4NfQTcK
 KfTXRSaGeMzToPZ8gNoXTc4uYXK0AW/fwZivJtnbVKpeHEt75GykVkF/K7wcVKPVruSL
 +c5g07iJmMTWSyLu0zOd7xewHj/OWx+7lqc2YPgl32DlhWepClr3fATc2JK7NjHnplvU
 +4CHm09INXrhAmsTfTBN8Kb7PF0DzzuZiKxqYacKLG3gAAcBupef6Wgipm1lyBRpxWn7
 Aw2Q==
X-Gm-Message-State: APjAAAW23ap9NS/cnsBm5W53FVgX3bDYfOZokTNxAFDp/+js6rGyqH3Q
 fH2lIE5iPD3qoruNTY48ncR5Ze3MYsqpLH48mX6/qVOv
X-Google-Smtp-Source: APXvYqwnYsLdcENlCGxfjmhrAEPfuVVnF+S1cpsnavm4B6WhlWb7hWC5wAIx1RIKl5vw4JbHePY6Oajw+C81AbAtHrc=
X-Received: by 2002:adf:cd11:: with SMTP id w17mr26096816wrm.83.1558627750181; 
 Thu, 23 May 2019 09:09:10 -0700 (PDT)
MIME-Version: 1.0
References: <1558606921-1537-1-git-send-email-Emily.Deng@amd.com>
In-Reply-To: <1558606921-1537-1-git-send-email-Emily.Deng@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Thu, 23 May 2019 12:08:58 -0400
Message-ID: <CADnq5_NhONFSC2C=0npCx4AKGKAphAsWq1Kq7jZhmeY+ODQ6-Q@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu: Need to set the baco cap before baco reset
To: Emily Deng <Emily.Deng@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=y6Tsc5fkQOj0Cofdp2rpiPBDk2eI0KSkvnvJHpsvFxY=;
 b=Q1B6y9ZZ7nHHRL1u92KYHeIJAJyjdBOqaVKM5uUc1rumv1LVkjL/cU4T0jBiZxaaAQ
 aRRjzp/4nEhkIn5EzV1s4ebWXcvmU6wAlaXAnXcNIJFfIpuvqn4pZxTsiHgqJi5xatog
 icPAq0Nodo2XPU7IJQ7PiCNcbGCzPUnsjftW2UG9uv5qSIvCXWeFqEXfFWtkfoQMmWGE
 wmcI98CAMKrMmR7Xu9dUZo3/3gf8DQCX5ESH0LWOM3rj2joq3H2MM3QDCEv9XVXIOSxa
 lROYIRGnH35XIQd5FUH65WaPoEsdT2mqxXroKJzieSLGRhzgGcVGP5XN392EUMTcb8pw
 rcHQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBNYXkgMjMsIDIwMTkgYXQgNjoyMiBBTSBFbWlseSBEZW5nIDxFbWlseS5EZW5nQGFt
ZC5jb20+IHdyb3RlOgo+Cj4gRm9yIHBhc3N0aHJvdWdoLCBhZnRlciByZWJvb3RlZCB0aGUgVk0s
IGRyaXZlciB3aWxsIGRvCj4gYSBiYWNvIHJlc2V0IGJlZm9yZSBkb2luZyBvdGhlciBkcml2ZXIg
aW5pdGlhbGl6YXRpb24gZHVyaW5nIGxvYWRpbmcKPiAgZHJpdmVyLiBGb3IgZG9pbmcgdGhlIGJh
Y28gcmVzZXQsIGl0IHdpbGwgZmlyc3QKPiBjaGVjayB0aGUgYmFjbyByZXNldCBjYXBhYmlsaXR5
LiBTbyBmaXJzdCBuZWVkIHRvIHNldCB0aGUKPiBjYXAgZnJvbSB0aGUgdmJpb3MgaW5mb3JtYXRp
b24gb3IgYmFjbyByZXNldCB3b24ndCBiZQo+IGVuYWJsZWQuCj4KPiBTaWduZWQtb2ZmLWJ5OiBF
bWlseSBEZW5nIDxFbWlseS5EZW5nQGFtZC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYyAgICAgICAgIHwgIDggKysrKysrKysKPiAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvc29jMTUuYyAgICAgICAgICAgICAgICAgfCAgMyArKy0KPiAg
ZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2tnZF9wcF9pbnRlcmZhY2UuaCAgICAgfCAgMSAr
Cj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZF9wb3dlcnBsYXkuYyAgICAgIHwg
MTYgKysrKysrKysrKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdy
L3ZlZ2ExMF9od21nci5jIHwgIDEgKwo+ICAuLi4vYW1kL3Bvd2VycGxheS9od21nci92ZWdhMTBf
cHJvY2Vzc3BwdGFibGVzLmMgICB8IDI0ICsrKysrKysrKysrKysrKysrKysrKysKPiAgLi4uL2Ft
ZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX3Byb2Nlc3NwcHRhYmxlcy5oICAgfCAgMSArCj4gIGRy
aXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9od21nci5oICAgICAgICAgIHwgIDEgKwo+
ICA4IGZpbGVzIGNoYW5nZWQsIDU0IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKPgo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKPiBpbmRleCBiZGQxZmU3
My4uMmRkZTY3MiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfZGV2aWNlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2
aWNlLmMKPiBAQCAtMjYxMSw2ICsyNjExLDE0IEBAIGludCBhbWRncHVfZGV2aWNlX2luaXQoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAgICAgICAgKiAgRS5nLiwgZHJpdmVyIHdhcyBu
b3QgY2xlYW5seSB1bmxvYWRlZCBwcmV2aW91c2x5LCBldGMuCj4gICAgICAgICAgKi8KPiAgICAg
ICAgIGlmICghYW1kZ3B1X3NyaW92X3ZmKGFkZXYpICYmIGFtZGdwdV9hc2ljX25lZWRfcmVzZXRf
b25faW5pdChhZGV2KSkgewo+ICsgICAgICAgICAgICAgICBpZiAoYW1kZ3B1X3Bhc3N0aHJvdWdo
KGFkZXYpICYmIGFkZXYtPnBvd2VycGxheS5wcF9mdW5jcyAmJiBhZGV2LT5wb3dlcnBsYXkucHBf
ZnVuY3MtPnNldF9hc2ljX2JhY29fY2FwKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgciA9
IGFkZXYtPnBvd2VycGxheS5wcF9mdW5jcy0+c2V0X2FzaWNfYmFjb19jYXAoYWRldi0+cG93ZXJw
bGF5LnBwX2hhbmRsZSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldl9lcnIoYWRldi0+ZGV2LCAic2V0IGJhY28g
Y2FwYWJpbGl0eSBmYWlsZWRcbiIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
Z290byBmYWlsZWQ7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQo+ICsgICAgICAgICAgICAg
ICB9Cj4gKwoKSSB0aGluayBpdCB3b3VsZCBiZSBjbGVhbmVyIHRvIGFkZCB0aGlzIHRvIGh3bWdy
X2Vhcmx5X2luaXQoKSBvcgpzb21ldGhpbmcgY2FsbGVkIGZyb20gZWFybHkgaW5pdCBmb3IgcG93
ZXJwbGF5LgoKQWxleAoKPiAgICAgICAgICAgICAgICAgciA9IGFtZGdwdV9hc2ljX3Jlc2V0KGFk
ZXYpOwo+ICAgICAgICAgICAgICAgICBpZiAocikgewo+ICAgICAgICAgICAgICAgICAgICAgICAg
IGRldl9lcnIoYWRldi0+ZGV2LCAiYXNpYyByZXNldCBvbiBpbml0IGZhaWxlZFxuIik7Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NvYzE1LmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5jCj4gaW5kZXggNzhiZDRmYy4uZDlmZGQ5NSAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvc29jMTUuYwo+IEBAIC03NjQsNyArNzY0LDggQEAgc3RhdGlj
IGJvb2wgc29jMTVfbmVlZF9yZXNldF9vbl9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KQo+ICAgICAgICAgLyogSnVzdCByZXR1cm4gZmFsc2UgZm9yIHNvYzE1IEdQVXMuICBSZXNldCBk
b2VzIG5vdCBzZWVtIHRvCj4gICAgICAgICAgKiBiZSBuZWNlc3NhcnkuCj4gICAgICAgICAgKi8K
PiAtICAgICAgIHJldHVybiBmYWxzZTsKPiArICAgICAgIGlmICghYW1kZ3B1X3Bhc3N0aHJvdWdo
KGFkZXYpKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7Cj4KPiAgICAgICAgIGlmIChh
ZGV2LT5mbGFncyAmIEFNRF9JU19BUFUpCj4gICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2tnZF9wcF9pbnRlcmZh
Y2UuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvaW5jbHVkZS9rZ2RfcHBfaW50ZXJmYWNlLmgKPiBp
bmRleCA5ZjY2MWJmLi5jNmUyYTUxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
aW5jbHVkZS9rZ2RfcHBfaW50ZXJmYWNlLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2lu
Y2x1ZGUva2dkX3BwX2ludGVyZmFjZS5oCj4gQEAgLTI5Niw2ICsyOTYsNyBAQCBzdHJ1Y3QgYW1k
X3BtX2Z1bmNzIHsKPiAgICAgICAgIGludCAoKnNldF9oYXJkX21pbl9mY2xrX2J5X2ZyZXEpKHZv
aWQgKmhhbmRsZSwgdWludDMyX3QgY2xvY2spOwo+ICAgICAgICAgaW50ICgqc2V0X21pbl9kZWVw
X3NsZWVwX2RjZWZjbGspKHZvaWQgKmhhbmRsZSwgdWludDMyX3QgY2xvY2spOwo+ICAgICAgICAg
aW50ICgqZ2V0X2FzaWNfYmFjb19jYXBhYmlsaXR5KSh2b2lkICpoYW5kbGUsIGJvb2wgKmNhcCk7
Cj4gKyAgICAgICBpbnQgKCpzZXRfYXNpY19iYWNvX2NhcCkodm9pZCAqaGFuZGxlKTsKPiAgICAg
ICAgIGludCAoKmdldF9hc2ljX2JhY29fc3RhdGUpKHZvaWQgKmhhbmRsZSwgaW50ICpzdGF0ZSk7
Cj4gICAgICAgICBpbnQgKCpzZXRfYXNpY19iYWNvX3N0YXRlKSh2b2lkICpoYW5kbGUsIGludCBz
dGF0ZSk7Cj4gICAgICAgICBpbnQgKCpnZXRfcHBmZWF0dXJlX3N0YXR1cykodm9pZCAqaGFuZGxl
LCBjaGFyICpidWYpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxh
eS9hbWRfcG93ZXJwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9hbWRfcG93
ZXJwbGF5LmMKPiBpbmRleCBiZWExNTg3Li45ODU2NzYwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZF9wb3dlcnBsYXkuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvcG93ZXJwbGF5L2FtZF9wb3dlcnBsYXkuYwo+IEBAIC0xNDA0LDYgKzE0MDQsMjEg
QEAgc3RhdGljIGludCBwcF9zZXRfYWN0aXZlX2Rpc3BsYXlfY291bnQodm9pZCAqaGFuZGxlLCB1
aW50MzJfdCBjb3VudCkKPiAgICAgICAgIHJldHVybiByZXQ7Cj4gIH0KPgo+ICtzdGF0aWMgaW50
IHBwX3NldF9hc2ljX2JhY29fY2FwKHZvaWQgKmhhbmRsZSkKPiArewo+ICsgICAgICAgc3RydWN0
IHBwX2h3bWdyICpod21nciA9IGhhbmRsZTsKPiArCj4gKyAgICAgICBpZiAoIWh3bWdyKQo+ICsg
ICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiArCj4gKyAgICAgICBpZiAoIWh3bWdyLT5w
bV9lbiB8fCAhaHdtZ3ItPmh3bWdyX2Z1bmMtPnNldF9hc2ljX2JhY29fY2FwKQo+ICsgICAgICAg
ICAgICAgICByZXR1cm4gMDsKPiArCj4gKyAgICAgICBod21nci0+aHdtZ3JfZnVuYy0+c2V0X2Fz
aWNfYmFjb19jYXAoaHdtZ3IpOwo+ICsKPiArICAgICAgIHJldHVybiAwOwo+ICt9Cj4gKwo+ICBz
dGF0aWMgaW50IHBwX2dldF9hc2ljX2JhY29fY2FwYWJpbGl0eSh2b2lkICpoYW5kbGUsIGJvb2wg
KmNhcCkKPiAgewo+ICAgICAgICAgc3RydWN0IHBwX2h3bWdyICpod21nciA9IGhhbmRsZTsKPiBA
QCAtMTU0Niw2ICsxNTYxLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBhbWRfcG1fZnVuY3MgcHBf
ZHBtX2Z1bmNzID0gewo+ICAgICAgICAgLnNldF9oYXJkX21pbl9kY2VmY2xrX2J5X2ZyZXEgPSBw
cF9zZXRfaGFyZF9taW5fZGNlZmNsa19ieV9mcmVxLAo+ICAgICAgICAgLnNldF9oYXJkX21pbl9m
Y2xrX2J5X2ZyZXEgPSBwcF9zZXRfaGFyZF9taW5fZmNsa19ieV9mcmVxLAo+ICAgICAgICAgLmdl
dF9hc2ljX2JhY29fY2FwYWJpbGl0eSA9IHBwX2dldF9hc2ljX2JhY29fY2FwYWJpbGl0eSwKPiAr
ICAgICAgIC5zZXRfYXNpY19iYWNvX2NhcCA9IHBwX3NldF9hc2ljX2JhY29fY2FwLAo+ICAgICAg
ICAgLmdldF9hc2ljX2JhY29fc3RhdGUgPSBwcF9nZXRfYXNpY19iYWNvX3N0YXRlLAo+ICAgICAg
ICAgLnNldF9hc2ljX2JhY29fc3RhdGUgPSBwcF9zZXRfYXNpY19iYWNvX3N0YXRlLAo+ICAgICAg
ICAgLmdldF9wcGZlYXR1cmVfc3RhdHVzID0gcHBfZ2V0X3BwZmVhdHVyZV9zdGF0dXMsCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9od21n
ci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX2h3bWdyLmMK
PiBpbmRleCBjZTZhZWI1Li5lNWJjYmM4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9od21nci5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX2h3bWdyLmMKPiBAQCAtNTMwMiw2ICs1MzAyLDcg
QEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwcF9od21ncl9mdW5jIHZlZ2ExMF9od21ncl9mdW5jcyA9
IHsKPiAgICAgICAgIC5vZG5fZWRpdF9kcG1fdGFibGUgPSB2ZWdhMTBfb2RuX2VkaXRfZHBtX3Rh
YmxlLAo+ICAgICAgICAgLmdldF9wZXJmb3JtYW5jZV9sZXZlbCA9IHZlZ2ExMF9nZXRfcGVyZm9y
bWFuY2VfbGV2ZWwsCj4gICAgICAgICAuZ2V0X2FzaWNfYmFjb19jYXBhYmlsaXR5ID0gc211OV9i
YWNvX2dldF9jYXBhYmlsaXR5LAo+ICsgICAgICAgLnNldF9hc2ljX2JhY29fY2FwID0gdmVnYTEw
X2JhY29fc2V0X2NhcCwKPiAgICAgICAgIC5nZXRfYXNpY19iYWNvX3N0YXRlID0gc211OV9iYWNv
X2dldF9zdGF0ZSwKPiAgICAgICAgIC5zZXRfYXNpY19iYWNvX3N0YXRlID0gdmVnYTEwX2JhY29f
c2V0X3N0YXRlLAo+ICAgICAgICAgLmVuYWJsZV9tZ3B1X2Zhbl9ib29zdCA9IHZlZ2ExMF9lbmFi
bGVfbWdwdV9mYW5fYm9vc3QsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93
ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9wcm9jZXNzcHB0YWJsZXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9wcm9jZXNzcHB0YWJsZXMuYwo+IGluZGV4IGI2NzY3
ZDcuLjgzZDIyY2QgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkv
aHdtZ3IvdmVnYTEwX3Byb2Nlc3NwcHRhYmxlcy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9wb3dlcnBsYXkvaHdtZ3IvdmVnYTEwX3Byb2Nlc3NwcHRhYmxlcy5jCj4gQEAgLTEzNzEsMyAr
MTM3MSwyNyBAQCBpbnQgdmVnYTEwX2dldF9wb3dlcnBsYXlfdGFibGVfZW50cnkoc3RydWN0IHBw
X2h3bWdyICpod21nciwKPgo+ICAgICAgICAgcmV0dXJuIHJlc3VsdDsKPiAgfQo+ICsKPiAraW50
IHZlZ2ExMF9iYWNvX3NldF9jYXAoc3RydWN0IHBwX2h3bWdyICpod21ncikKPiArewo+ICsgICAg
ICAgaW50IHJlc3VsdCA9IDA7Cj4gKwo+ICsgICAgICAgY29uc3QgQVRPTV9WZWdhMTBfUE9XRVJQ
TEFZVEFCTEUgKnBvd2VycGxheV90YWJsZTsKPiArCj4gKyAgICAgICBwb3dlcnBsYXlfdGFibGUg
PSBnZXRfcG93ZXJwbGF5X3RhYmxlKGh3bWdyKTsKPiArCj4gKyAgICAgICBQUF9BU1NFUlRfV0lU
SF9DT0RFKChwb3dlcnBsYXlfdGFibGUgIT0gTlVMTCksCj4gKyAgICAgICAgICAgICAgICJNaXNz
aW5nIFBvd2VyUGxheSBUYWJsZSEiLCByZXR1cm4gLTEpOwo+ICsKPiArICAgICAgIHJlc3VsdCA9
IGNoZWNrX3Bvd2VycGxheV90YWJsZXMoaHdtZ3IsIHBvd2VycGxheV90YWJsZSk7Cj4gKwo+ICsg
ICAgICAgUFBfQVNTRVJUX1dJVEhfQ09ERSgocmVzdWx0ID09IDApLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAiY2hlY2tfcG93ZXJwbGF5X3RhYmxlcyBmYWlsZWQiLCByZXR1cm4gcmVz
dWx0KTsKPiArCj4gKyAgICAgICBzZXRfaHdfY2FwKAo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGh3bWdyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIDAgIT0gKGxlMzJfdG9fY3B1KHBvd2Vy
cGxheV90YWJsZS0+dWxQbGF0Zm9ybUNhcHMpICYgQVRPTV9WRUdBMTBfUFBfUExBVEZPUk1fQ0FQ
X0JBQ08pLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIFBITV9QbGF0Zm9ybUNhcHNfQkFDTyk7
Cj4gKyAgICAgICByZXR1cm4gcmVzdWx0Owo+ICt9Cj4gKwo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci92ZWdhMTBfcHJvY2Vzc3BwdGFibGVzLmggYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9od21nci92ZWdhMTBfcHJvY2Vzc3BwdGFibGVz
LmgKPiBpbmRleCBkODNlZDJhLi5kYTVmYmVjIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvcG93ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9wcm9jZXNzcHB0YWJsZXMuaAo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2h3bWdyL3ZlZ2ExMF9wcm9jZXNzcHB0YWJsZXMu
aAo+IEBAIC01OSw0ICs1OSw1IEBAIGV4dGVybiBpbnQgdmVnYTEwX2dldF9udW1iZXJfb2ZfcG93
ZXJwbGF5X3RhYmxlX2VudHJpZXMoc3RydWN0IHBwX2h3bWdyICpod21ncik7Cj4gIGV4dGVybiBp
bnQgdmVnYTEwX2dldF9wb3dlcnBsYXlfdGFibGVfZW50cnkoc3RydWN0IHBwX2h3bWdyICpod21n
ciwgdWludDMyX3QgZW50cnlfaW5kZXgsCj4gICAgICAgICAgICAgICAgIHN0cnVjdCBwcF9wb3dl
cl9zdGF0ZSAqcG93ZXJfc3RhdGUsIGludCAoKmNhbGxfYmFja19mdW5jKShzdHJ1Y3QgcHBfaHdt
Z3IgKiwgdm9pZCAqLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHBw
X3Bvd2VyX3N0YXRlICosIHZvaWQgKiwgdWludDMyX3QpKTsKPiArZXh0ZXJuIGludCB2ZWdhMTBf
YmFjb19zZXRfY2FwKHN0cnVjdCBwcF9od21nciAqaHdtZ3IpOwo+ICAjZW5kaWYKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2h3bWdyLmggYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvaHdtZ3IuaAo+IGluZGV4IGJhYzNkODUuLjE0NDgw
YWUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2h3bWdy
LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9pbmMvaHdtZ3IuaAo+IEBA
IC0zMzksNiArMzM5LDcgQEAgc3RydWN0IHBwX2h3bWdyX2Z1bmMgewo+ICAgICAgICAgaW50ICgq
c2V0X2hhcmRfbWluX2RjZWZjbGtfYnlfZnJlcSkoc3RydWN0IHBwX2h3bWdyICpod21nciwgdWlu
dDMyX3QgY2xvY2spOwo+ICAgICAgICAgaW50ICgqc2V0X2hhcmRfbWluX2ZjbGtfYnlfZnJlcSko
c3RydWN0IHBwX2h3bWdyICpod21nciwgdWludDMyX3QgY2xvY2spOwo+ICAgICAgICAgaW50ICgq
Z2V0X2FzaWNfYmFjb19jYXBhYmlsaXR5KShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBib29sICpj
YXApOwo+ICsgICAgICAgaW50ICgqc2V0X2FzaWNfYmFjb19jYXApKHN0cnVjdCBwcF9od21nciAq
aHdtZ3IpOwo+ICAgICAgICAgaW50ICgqZ2V0X2FzaWNfYmFjb19zdGF0ZSkoc3RydWN0IHBwX2h3
bWdyICpod21nciwgZW51bSBCQUNPX1NUQVRFICpzdGF0ZSk7Cj4gICAgICAgICBpbnQgKCpzZXRf
YXNpY19iYWNvX3N0YXRlKShzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyLCBlbnVtIEJBQ09fU1RBVEUg
c3RhdGUpOwo+ICAgICAgICAgaW50ICgqZ2V0X3BwZmVhdHVyZV9zdGF0dXMpKHN0cnVjdCBwcF9o
d21nciAqaHdtZ3IsIGNoYXIgKmJ1Zik7Cj4gLS0KPiAyLjcuNAo+Cj4gX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBhbWQtZ2Z4IG1haWxpbmcgbGlzdAo+
IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vYW1kLWdmeA==
