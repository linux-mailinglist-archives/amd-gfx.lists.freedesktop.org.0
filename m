Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A95E17CB2F
	for <lists+amd-gfx@lfdr.de>; Wed, 31 Jul 2019 19:58:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BC10C6E193;
	Wed, 31 Jul 2019 17:58:42 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-vs1-xe44.google.com (mail-vs1-xe44.google.com
 [IPv6:2607:f8b0:4864:20::e44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D4EDE89D8E
 for <amd-gfx@lists.freedesktop.org>; Wed, 31 Jul 2019 17:58:39 +0000 (UTC)
Received: by mail-vs1-xe44.google.com with SMTP id m23so46827829vso.1
 for <amd-gfx@lists.freedesktop.org>; Wed, 31 Jul 2019 10:58:39 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=n/rwoDbWgzfKA4Co6W59MPfx1x6ctqzCxTKg5gQlQDw=;
 b=n+S/qviZ9lV91pYaBXM+7ylOEkXqqOKlTxaD62XJcj2LuwP2U5jTJkz4HojVUXcHAG
 AHOlbDD28UWtxkxStWHRpRvQ5PHznPvz6O5RttsMiFMpwCRGgNtU5E+zUuYBuzVG+8I0
 gO3D2MCYPwnj6ISJZqj/VVwv1K2QSrgeVYsnyXeh1rGwy0DA/aeUrknuRIGMwquJSJBm
 KFq6p31tMFZaJqOYlGSRIdrPH7Q00Vj70niSPX4GAjZ8/81VYJHkOUPC+RESFu2QN1fF
 YDlq7RhijXeaWJyFfcdA45ilppY+zmJzuMSrkTfQkW8LEAr7Fn3npL3jeo7hK8SFL17V
 h4qA==
X-Gm-Message-State: APjAAAVHif0Cr+MahhLtI7XMZsaUmqF20vs77phF3IWQeMxFzWFD0KBD
 27uW/BJ6O2xLchYEEs8p3Cq8mqA/
X-Google-Smtp-Source: APXvYqziZ6ZaOoHyu4q5kwC+KCKC/e1H42nCLyQJI1wyEIFTQp7jlH7ZQyvF1HG5hMrxOJzH0gWSmw==
X-Received: by 2002:a67:fe4d:: with SMTP id m13mr35122387vsr.177.1564595915320; 
 Wed, 31 Jul 2019 10:58:35 -0700 (PDT)
Received: from localhost.localdomain ([71.219.6.100])
 by smtp.gmail.com with ESMTPSA id m123sm18189707vsm.30.2019.07.31.10.58.34
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 31 Jul 2019 10:58:34 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 10/26] drm/amdgpu: add RREG64/WREG64(_PCIE) operations
Date: Wed, 31 Jul 2019 12:58:02 -0500
Message-Id: <20190731175818.20159-11-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190731175818.20159-1-alexander.deucher@amd.com>
References: <20190731175818.20159-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=n/rwoDbWgzfKA4Co6W59MPfx1x6ctqzCxTKg5gQlQDw=;
 b=aUwL4DQzxD/uQi93cmK6ZQoOat4A1vml5n6/VsE/mnijKSnOClZt0J88pMTH2Vm9Mn
 ToHtf65TnV0pIm0a0/s1ymFTKM52YBw945xncmkPGw0NUoV3y0hLaXc1XO5dflaFMWZn
 hzYgyyqBvfRqDRu+8hLRiqOgcaS+2NRbhRQTJyIm/6oGY6kriRr5djCxW99330Yv8Eqp
 CMHOskfb79OFSIeHE/hajjac+HtfPHog9OZg9+aeSck0tE7Koo5yRFc5Q9XobrtMT4bU
 wUuIgvyVW5/nsqDqryQt1SU8bXJJdP0wIWIr83tODdUuqfmyg0eoDChbkjqiyEnaisy5
 6j7A==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Tao Zhou <tao.zhou1@amd.com>, Dennis Li <dennis.li@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogVGFvIFpob3UgPHRhby56aG91MUBhbWQuY29tPgoKYWRkIDY0IGJpdHMgcmVnaXN0ZXIg
YWNjZXNzIGZ1bmN0aW9ucwoKdjI6IGltcGxlbWVudCA2NCBiaXQgZnVuY3Rpb25zIGluIGxvdyBs
ZXZlbAoKU2lnbmVkLW9mZi1ieTogVGFvIFpob3UgPHRhby56aG91MUBhbWQuY29tPgpSZXZpZXdl
ZC1ieTogRGVubmlzIExpIDxkZW5uaXMubGlAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHUuaCAgICAgICAgfCAxMSArKysrCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfZGV2aWNlLmMgfCA3MyArKysrKysrKysrKysrKysrKysrKysrCiBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5jICAgICAgICAgfCA0NSArKysrKysrKysrKysr
CiAzIGZpbGVzIGNoYW5nZWQsIDEyOSBpbnNlcnRpb25zKCspCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHUuaAppbmRleCA3MmQwMzMxZjRjYTEuLjNlMmI2MjNkODZjNyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1LmgKQEAgLTY0MCw2ICs2NDAsOSBAQCB2b2lkIGFtZGdwdV9jZ3Nf
ZGVzdHJveV9kZXZpY2Uoc3RydWN0IGNnc19kZXZpY2UgKmNnc19kZXZpY2UpOwogdHlwZWRlZiB1
aW50MzJfdCAoKmFtZGdwdV9ycmVnX3QpKHN0cnVjdCBhbWRncHVfZGV2aWNlKiwgdWludDMyX3Qp
OwogdHlwZWRlZiB2b2lkICgqYW1kZ3B1X3dyZWdfdCkoc3RydWN0IGFtZGdwdV9kZXZpY2UqLCB1
aW50MzJfdCwgdWludDMyX3QpOwogCit0eXBlZGVmIHVpbnQ2NF90ICgqYW1kZ3B1X3JyZWc2NF90
KShzdHJ1Y3QgYW1kZ3B1X2RldmljZSosIHVpbnQzMl90KTsKK3R5cGVkZWYgdm9pZCAoKmFtZGdw
dV93cmVnNjRfdCkoc3RydWN0IGFtZGdwdV9kZXZpY2UqLCB1aW50MzJfdCwgdWludDY0X3QpOwor
CiB0eXBlZGVmIHVpbnQzMl90ICgqYW1kZ3B1X2Jsb2NrX3JyZWdfdCkoc3RydWN0IGFtZGdwdV9k
ZXZpY2UqLCB1aW50MzJfdCwgdWludDMyX3QpOwogdHlwZWRlZiB2b2lkICgqYW1kZ3B1X2Jsb2Nr
X3dyZWdfdCkoc3RydWN0IGFtZGdwdV9kZXZpY2UqLCB1aW50MzJfdCwgdWludDMyX3QsIHVpbnQz
Ml90KTsKIApAQCAtODMzLDYgKzgzNiw4IEBAIHN0cnVjdCBhbWRncHVfZGV2aWNlIHsKIAlhbWRn
cHVfd3JlZ190CQkJcGNpZV93cmVnOwogCWFtZGdwdV9ycmVnX3QJCQlwY2llcF9ycmVnOwogCWFt
ZGdwdV93cmVnX3QJCQlwY2llcF93cmVnOworCWFtZGdwdV9ycmVnNjRfdAkJCXBjaWVfcnJlZzY0
OworCWFtZGdwdV93cmVnNjRfdAkJCXBjaWVfd3JlZzY0OwogCS8qIHByb3RlY3RzIGNvbmN1cnJl
bnQgVVZEIHJlZ2lzdGVyIGFjY2VzcyAqLwogCXNwaW5sb2NrX3QgdXZkX2N0eF9pZHhfbG9jazsK
IAlhbWRncHVfcnJlZ190CQkJdXZkX2N0eF9ycmVnOwpAQCAtMTAzMyw2ICsxMDM4LDggQEAgdm9p
ZCBhbWRncHVfbW1fd3JlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgcmVn
LCB1aW50MzJfdCB2LAogCQkgICAgdWludDMyX3QgYWNjX2ZsYWdzKTsKIHZvaWQgYW1kZ3B1X21t
X3dyZWc4KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50MzJfdCBvZmZzZXQsIHVpbnQ4
X3QgdmFsdWUpOwogdWludDhfdCBhbWRncHVfbW1fcnJlZzgoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsIHVpbnQzMl90IG9mZnNldCk7Cit1aW50NjRfdCBhbWRncHVfbW1fcnJlZzY0KHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50MzJfdCByZWcpOwordm9pZCBhbWRncHVfbW1fd3Jl
ZzY0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50MzJfdCByZWcsIHVpbnQ2NF90IHYp
OwogCiB1MzIgYW1kZ3B1X2lvX3JyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHUzMiBy
ZWcpOwogdm9pZCBhbWRncHVfaW9fd3JlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdTMy
IHJlZywgdTMyIHYpOwpAQCAtMTA2MCwxMiArMTA2NywxNiBAQCBpbnQgZW11X3NvY19hc2ljX2lu
aXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwogI2RlZmluZSBEUkVHMzIocmVnKSBwcmlu
dGsoS0VSTl9JTkZPICJSRUdJU1RFUjogIiAjcmVnICIgOiAweCUwOFhcbiIsIGFtZGdwdV9tbV9y
cmVnKGFkZXYsIChyZWcpLCAwKSkKICNkZWZpbmUgV1JFRzMyKHJlZywgdikgYW1kZ3B1X21tX3dy
ZWcoYWRldiwgKHJlZyksICh2KSwgMCkKICNkZWZpbmUgV1JFRzMyX0lEWChyZWcsIHYpIGFtZGdw
dV9tbV93cmVnKGFkZXYsIChyZWcpLCAodiksIEFNREdQVV9SRUdTX0lEWCkKKyNkZWZpbmUgUlJF
RzY0KHJlZykgYW1kZ3B1X21tX3JyZWc2NChhZGV2LCAocmVnKSkKKyNkZWZpbmUgV1JFRzY0KHJl
ZywgdikgYW1kZ3B1X21tX3dyZWc2NChhZGV2LCAocmVnKSwgKHYpKQogI2RlZmluZSBSRUdfU0VU
KEZJRUxELCB2KSAoKCh2KSA8PCBGSUVMRCMjX1NISUZUKSAmIEZJRUxEIyNfTUFTSykKICNkZWZp
bmUgUkVHX0dFVChGSUVMRCwgdikgKCgodikgPDwgRklFTEQjI19TSElGVCkgJiBGSUVMRCMjX01B
U0spCiAjZGVmaW5lIFJSRUczMl9QQ0lFKHJlZykgYWRldi0+cGNpZV9ycmVnKGFkZXYsIChyZWcp
KQogI2RlZmluZSBXUkVHMzJfUENJRShyZWcsIHYpIGFkZXYtPnBjaWVfd3JlZyhhZGV2LCAocmVn
KSwgKHYpKQogI2RlZmluZSBSUkVHMzJfUENJRV9QT1JUKHJlZykgYWRldi0+cGNpZXBfcnJlZyhh
ZGV2LCAocmVnKSkKICNkZWZpbmUgV1JFRzMyX1BDSUVfUE9SVChyZWcsIHYpIGFkZXYtPnBjaWVw
X3dyZWcoYWRldiwgKHJlZyksICh2KSkKKyNkZWZpbmUgUlJFRzY0X1BDSUUocmVnKSBhZGV2LT5w
Y2llX3JyZWc2NChhZGV2LCAocmVnKSkKKyNkZWZpbmUgV1JFRzY0X1BDSUUocmVnLCB2KSBhZGV2
LT5wY2llX3dyZWc2NChhZGV2LCAocmVnKSwgKHYpKQogI2RlZmluZSBSUkVHMzJfU01DKHJlZykg
YWRldi0+c21jX3JyZWcoYWRldiwgKHJlZykpCiAjZGVmaW5lIFdSRUczMl9TTUMocmVnLCB2KSBh
ZGV2LT5zbWNfd3JlZyhhZGV2LCAocmVnKSwgKHYpKQogI2RlZmluZSBSUkVHMzJfVVZEX0NUWChy
ZWcpIGFkZXYtPnV2ZF9jdHhfcnJlZyhhZGV2LCAocmVnKSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9kZXZpY2UuYwppbmRleCAxMjdlZDAxZWQ4ZmQuLjA4YmEwNWMzNDc4MiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYwpAQCAtMjYwLDYg
KzI2MCw0MyBAQCB2b2lkIGFtZGdwdV9tbV93cmVnKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LCB1aW50MzJfdCByZWcsIHVpbnQzMl90IHYsCiAJfQogfQogCisvKioKKyAqIGFtZGdwdV9tbV9y
cmVnNjQgLSByZWFkIGEgNjQgYml0IG1lbW9yeSBtYXBwZWQgSU8gcmVnaXN0ZXIKKyAqCisgKiBA
YWRldjogYW1kZ3B1X2RldmljZSBwb2ludGVyCisgKiBAcmVnOiBkd29yZCBhbGlnbmVkIHJlZ2lz
dGVyIG9mZnNldAorICoKKyAqIFJldHVybnMgdGhlIDY0IGJpdCB2YWx1ZSBmcm9tIHRoZSBvZmZz
ZXQgc3BlY2lmaWVkLgorICovCit1aW50NjRfdCBhbWRncHVfbW1fcnJlZzY0KHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2LCB1aW50MzJfdCByZWcpCit7CisJdWludDY0X3QgcmV0OworCisJaWYg
KChyZWcgKiA0KSA8IGFkZXYtPnJtbWlvX3NpemUpCisJCXJldCA9IHJlYWRxKCgodm9pZCBfX2lv
bWVtICopYWRldi0+cm1taW8pICsgKHJlZyAqIDQpKTsKKwllbHNlCisJCUJVRygpOworCisJcmV0
dXJuIHJldDsKK30KKworLyoqCisgKiBhbWRncHVfbW1fd3JlZzY0IC0gd3JpdGUgdG8gYSA2NCBi
aXQgbWVtb3J5IG1hcHBlZCBJTyByZWdpc3RlcgorICoKKyAqIEBhZGV2OiBhbWRncHVfZGV2aWNl
IHBvaW50ZXIKKyAqIEByZWc6IGR3b3JkIGFsaWduZWQgcmVnaXN0ZXIgb2Zmc2V0CisgKiBAdjog
NjQgYml0IHZhbHVlIHRvIHdyaXRlIHRvIHRoZSByZWdpc3RlcgorICoKKyAqIFdyaXRlcyB0aGUg
dmFsdWUgc3BlY2lmaWVkIHRvIHRoZSBvZmZzZXQgc3BlY2lmaWVkLgorICovCit2b2lkIGFtZGdw
dV9tbV93cmVnNjQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQzMl90IHJlZywgdWlu
dDY0X3QgdikKK3sKKwlpZiAoKHJlZyAqIDQpIDwgYWRldi0+cm1taW9fc2l6ZSkKKwkJd3JpdGVx
KHYsICgodm9pZCBfX2lvbWVtICopYWRldi0+cm1taW8pICsgKHJlZyAqIDQpKTsKKwllbHNlCisJ
CUJVRygpOworfQorCiAvKioKICAqIGFtZGdwdV9pb19ycmVnIC0gcmVhZCBhbiBJTyByZWdpc3Rl
cgogICoKQEAgLTQxNSw2ICs0NTIsNDAgQEAgc3RhdGljIHZvaWQgYW1kZ3B1X2ludmFsaWRfd3Jl
ZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgcmVnLCB1aW50MzIKIAlCVUco
KTsKIH0KIAorLyoqCisgKiBhbWRncHVfaW52YWxpZF9ycmVnNjQgLSBkdW1teSA2NCBiaXQgcmVn
IHJlYWQgZnVuY3Rpb24KKyAqCisgKiBAYWRldjogYW1kZ3B1IGRldmljZSBwb2ludGVyCisgKiBA
cmVnOiBvZmZzZXQgb2YgcmVnaXN0ZXIKKyAqCisgKiBEdW1teSByZWdpc3RlciByZWFkIGZ1bmN0
aW9uLiAgVXNlZCBmb3IgcmVnaXN0ZXIgYmxvY2tzCisgKiB0aGF0IGNlcnRhaW4gYXNpY3MgZG9u
J3QgaGF2ZSAoYWxsIGFzaWNzKS4KKyAqIFJldHVybnMgdGhlIHZhbHVlIGluIHRoZSByZWdpc3Rl
ci4KKyAqLworc3RhdGljIHVpbnQ2NF90IGFtZGdwdV9pbnZhbGlkX3JyZWc2NChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgcmVnKQoreworCURSTV9FUlJPUigiSW52YWxpZCBj
YWxsYmFjayB0byByZWFkIDY0IGJpdCByZWdpc3RlciAweCUwNFhcbiIsIHJlZyk7CisJQlVHKCk7
CisJcmV0dXJuIDA7Cit9CisKKy8qKgorICogYW1kZ3B1X2ludmFsaWRfd3JlZzY0IC0gZHVtbXkg
cmVnIHdyaXRlIGZ1bmN0aW9uCisgKgorICogQGFkZXY6IGFtZGdwdSBkZXZpY2UgcG9pbnRlcgor
ICogQHJlZzogb2Zmc2V0IG9mIHJlZ2lzdGVyCisgKiBAdjogdmFsdWUgdG8gd3JpdGUgdG8gdGhl
IHJlZ2lzdGVyCisgKgorICogRHVtbXkgcmVnaXN0ZXIgcmVhZCBmdW5jdGlvbi4gIFVzZWQgZm9y
IHJlZ2lzdGVyIGJsb2NrcworICogdGhhdCBjZXJ0YWluIGFzaWNzIGRvbid0IGhhdmUgKGFsbCBh
c2ljcykuCisgKi8KK3N0YXRpYyB2b2lkIGFtZGdwdV9pbnZhbGlkX3dyZWc2NChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgcmVnLCB1aW50NjRfdCB2KQoreworCURSTV9FUlJP
UigiSW52YWxpZCBjYWxsYmFjayB0byB3cml0ZSA2NCBiaXQgcmVnaXN0ZXIgMHglMDRYIHdpdGgg
MHglMDhsbFhcbiIsCisJCSAgcmVnLCB2KTsKKwlCVUcoKTsKK30KKwogLyoqCiAgKiBhbWRncHVf
YmxvY2tfaW52YWxpZF9ycmVnIC0gZHVtbXkgcmVnIHJlYWQgZnVuY3Rpb24KICAqCkBAIC0yNTM2
LDYgKzI2MDcsOCBAQCBpbnQgYW1kZ3B1X2RldmljZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LAogCWFkZXYtPnBjaWVfd3JlZyA9ICZhbWRncHVfaW52YWxpZF93cmVnOwogCWFkZXYt
PnBjaWVwX3JyZWcgPSAmYW1kZ3B1X2ludmFsaWRfcnJlZzsKIAlhZGV2LT5wY2llcF93cmVnID0g
JmFtZGdwdV9pbnZhbGlkX3dyZWc7CisJYWRldi0+cGNpZV9ycmVnNjQgPSAmYW1kZ3B1X2ludmFs
aWRfcnJlZzY0OworCWFkZXYtPnBjaWVfd3JlZzY0ID0gJmFtZGdwdV9pbnZhbGlkX3dyZWc2NDsK
IAlhZGV2LT51dmRfY3R4X3JyZWcgPSAmYW1kZ3B1X2ludmFsaWRfcnJlZzsKIAlhZGV2LT51dmRf
Y3R4X3dyZWcgPSAmYW1kZ3B1X2ludmFsaWRfd3JlZzsKIAlhZGV2LT5kaWR0X3JyZWcgPSAmYW1k
Z3B1X2ludmFsaWRfcnJlZzsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L3NvYzE1LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9zb2MxNS5jCmluZGV4IDM0N2E0
NGYyNzU3YS4uMjE0ZmM5ZDg4MGU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9zb2MxNS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3NvYzE1LmMKQEAg
LTExNSw2ICsxMTUsNDkgQEAgc3RhdGljIHZvaWQgc29jMTVfcGNpZV93cmVnKHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2LCB1MzIgcmVnLCB1MzIgdikKIAlzcGluX3VubG9ja19pcnFyZXN0b3Jl
KCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7CiB9CiAKK3N0YXRpYyB1NjQgc29jMTVfcGNp
ZV9ycmVnNjQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHUzMiByZWcpCit7CisJdW5zaWdu
ZWQgbG9uZyBmbGFncywgYWRkcmVzcywgZGF0YTsKKwl1NjQgcjsKKwlhZGRyZXNzID0gYWRldi0+
bmJpb19mdW5jcy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFkZXYpOworCWRhdGEgPSBhZGV2LT5u
YmlvX2Z1bmNzLT5nZXRfcGNpZV9kYXRhX29mZnNldChhZGV2KTsKKworCXNwaW5fbG9ja19pcnFz
YXZlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7CisJLyogcmVhZCBsb3cgMzIgYml0ICov
CisJV1JFRzMyKGFkZHJlc3MsIHJlZyk7CisJKHZvaWQpUlJFRzMyKGFkZHJlc3MpOworCXIgPSBS
UkVHMzIoZGF0YSk7CisKKwkvKiByZWFkIGhpZ2ggMzIgYml0Ki8KKwlXUkVHMzIoYWRkcmVzcywg
cmVnICsgNCk7CisJKHZvaWQpUlJFRzMyKGFkZHJlc3MpOworCXIgfD0gKCh1NjQpUlJFRzMyKGRh
dGEpIDw8IDMyKTsKKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZhZGV2LT5wY2llX2lkeF9sb2Nr
LCBmbGFncyk7CisJcmV0dXJuIHI7Cit9CisKK3N0YXRpYyB2b2lkIHNvYzE1X3BjaWVfd3JlZzY0
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1MzIgcmVnLCB1NjQgdikKK3sKKwl1bnNpZ25l
ZCBsb25nIGZsYWdzLCBhZGRyZXNzLCBkYXRhOworCisJYWRkcmVzcyA9IGFkZXYtPm5iaW9fZnVu
Y3MtPmdldF9wY2llX2luZGV4X29mZnNldChhZGV2KTsKKwlkYXRhID0gYWRldi0+bmJpb19mdW5j
cy0+Z2V0X3BjaWVfZGF0YV9vZmZzZXQoYWRldik7CisKKwlzcGluX2xvY2tfaXJxc2F2ZSgmYWRl
di0+cGNpZV9pZHhfbG9jaywgZmxhZ3MpOworCS8qIHdyaXRlIGxvdyAzMiBiaXQgKi8KKwlXUkVH
MzIoYWRkcmVzcywgcmVnKTsKKwkodm9pZClSUkVHMzIoYWRkcmVzcyk7CisJV1JFRzMyKGRhdGEs
ICh1MzIpKHYgJiAweGZmZmZmZmZmVUxMKSk7CisJKHZvaWQpUlJFRzMyKGRhdGEpOworCisJLyog
d3JpdGUgaGlnaCAzMiBiaXQgKi8KKwlXUkVHMzIoYWRkcmVzcywgcmVnICsgNCk7CisJKHZvaWQp
UlJFRzMyKGFkZHJlc3MpOworCVdSRUczMihkYXRhLCAodTMyKSh2ID4+IDMyKSk7CisJKHZvaWQp
UlJFRzMyKGRhdGEpOworCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xv
Y2ssIGZsYWdzKTsKK30KKwogc3RhdGljIHUzMiBzb2MxNV91dmRfY3R4X3JyZWcoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsIHUzMiByZWcpCiB7CiAJdW5zaWduZWQgbG9uZyBmbGFncywgYWRk
cmVzcywgZGF0YTsKQEAgLTg2NSw2ICs5MDgsOCBAQCBzdGF0aWMgaW50IHNvYzE1X2NvbW1vbl9l
YXJseV9pbml0KHZvaWQgKmhhbmRsZSkKIAlhZGV2LT5zbWNfd3JlZyA9IE5VTEw7CiAJYWRldi0+
cGNpZV9ycmVnID0gJnNvYzE1X3BjaWVfcnJlZzsKIAlhZGV2LT5wY2llX3dyZWcgPSAmc29jMTVf
cGNpZV93cmVnOworCWFkZXYtPnBjaWVfcnJlZzY0ID0gJnNvYzE1X3BjaWVfcnJlZzY0OworCWFk
ZXYtPnBjaWVfd3JlZzY0ID0gJnNvYzE1X3BjaWVfd3JlZzY0OwogCWFkZXYtPnV2ZF9jdHhfcnJl
ZyA9ICZzb2MxNV91dmRfY3R4X3JyZWc7CiAJYWRldi0+dXZkX2N0eF93cmVnID0gJnNvYzE1X3V2
ZF9jdHhfd3JlZzsKIAlhZGV2LT5kaWR0X3JyZWcgPSAmc29jMTVfZGlkdF9ycmVnOwotLSAKMi4y
MC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQt
Z2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
