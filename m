Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CE225BF94E
	for <lists+amd-gfx@lfdr.de>; Thu, 26 Sep 2019 20:38:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2CD7A6EDDD;
	Thu, 26 Sep 2019 18:38:50 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-CY1-obe.outbound.protection.outlook.com
 (mail-eopbgr760058.outbound.protection.outlook.com [40.107.76.58])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0DEF56EDD8
 for <amd-gfx@lists.freedesktop.org>; Thu, 26 Sep 2019 18:38:49 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=mnyJ5xeB1kJw1g/BmqubM4zqHyS1nhIjL/Q9MkgKlPuybqM5DfNJUGWpWxmOzUtIw1tUdlIk1DDTI+d79i8wwHfZ7cvpcZDo7mgeZ5esFn/IfsPQv9pNxPyQJhZQXFIrd+ydGPhXdS+IeYIoDcTh6xi/fj2Mrg6frb5e0sk6e+GgccT9i4gueEKw7mbo38ebMZ7Ti+WxN8Pa/FUhPlFRK9hFJRuf5cR3DrDrkMVTjdrorXpB20Dq8FVu8YPAgS8IjZV4jIENeFaEapCGMPKLMXdISQGu2xWiTjn/un5OpjId1N0jfBXGTib/WRlur9+t8JBoZOOS5JaLR1ko1EyHyg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=yA1keNIfjfmZE3Vwc++jlLu+M4kP1ktrBeylClXbveU=;
 b=ak8vfwbZ2l8ILYeDQMHBHOOJWcFX6LmQWYkLYwfOeJ0Qi1rhZ4GG3eJtp8xIxVP+Nn8r02WgACig53W5EiU/1eRDfVNC5FoQF1VGtuWMgn71yhsFEyGkKEn2S0yJ+yrA/9S52tk+PwnzsMqnnvSkaUWHkMjuEi7mQX788e3VX0Mwko520hVsYGC1f9vuoEPs1Vids94syT7mHAglTPCLMy+PMjaK5PlDYGQHjA/DRxsT+5Of8UVa4T/PwbAUkkLEgNY6+n4OeaFcAuQpuN2EHDGTYUJUjZfT4aFRRt5Y961g9nhbxOfMtSd3AmWMOOiyLYCjeV2VCuF6noK3kCUB5Q==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM6PR12MB2778.namprd12.prod.outlook.com (20.176.114.145) by
 DM6PR12MB3466.namprd12.prod.outlook.com (20.178.198.225) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2284.26; Thu, 26 Sep 2019 18:38:47 +0000
Received: from DM6PR12MB2778.namprd12.prod.outlook.com
 ([fe80::81aa:9739:a2c2:12fa]) by DM6PR12MB2778.namprd12.prod.outlook.com
 ([fe80::81aa:9739:a2c2:12fa%4]) with mapi id 15.20.2284.023; Thu, 26 Sep 2019
 18:38:47 +0000
From: "Zhao, Yong" <Yong.Zhao@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 3/6] drm/amdkfd: Use hex print format for pasid
Thread-Topic: [PATCH 3/6] drm/amdkfd: Use hex print format for pasid
Thread-Index: AQHVdJmiYVx9KVUW0kCrxUeBCA/Arw==
Date: Thu, 26 Sep 2019 18:38:47 +0000
Message-ID: <20190926183826.18813-3-Yong.Zhao@amd.com>
References: <20190926183826.18813-1-Yong.Zhao@amd.com>
In-Reply-To: <20190926183826.18813-1-Yong.Zhao@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: YT1PR01CA0031.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01::44)
 To DM6PR12MB2778.namprd12.prod.outlook.com
 (2603:10b6:5:50::17)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [165.204.55.251]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: edb5d309-4df7-4bd1-8861-08d742b0c471
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600167)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:DM6PR12MB3466; 
x-ms-traffictypediagnostic: DM6PR12MB3466:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM6PR12MB346632B7DB9A10130D5A55ECF0860@DM6PR12MB3466.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:439;
x-forefront-prvs: 0172F0EF77
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(136003)(39860400002)(366004)(396003)(346002)(189003)(199004)(11346002)(476003)(6436002)(305945005)(7736002)(50226002)(14454004)(8936002)(81156014)(81166006)(30864003)(8676002)(256004)(5660300002)(14444005)(2351001)(6512007)(4326008)(86362001)(316002)(76176011)(2501003)(2906002)(186003)(3846002)(6116002)(99286004)(52116002)(71200400001)(71190400001)(102836004)(25786009)(1076003)(26005)(36756003)(66066001)(6916009)(6506007)(45080400002)(386003)(478600001)(64756008)(66556008)(5640700003)(486006)(66446008)(446003)(66946007)(2616005)(6486002)(66476007);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB3466;
 H:DM6PR12MB2778.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: b4heIeYkL6EynQRSBzjbbC9id3GSiYWx3MxoXVHxXBFVsaD7J+k64C4q+V2+HgzOB/L7fabXpToFBclkJri4FEtHz9NQ2Ez7KzsvjGoBBHHOK2cO1n/tGUCHsM7O3PCN0vbMxvrTCPleORT/qVURtUDCT3xM+4//xwUQkFKwHQpPY4d7TWhGxZv7WvqET8w2F2/73HXA1s8Ljsl+OiQhwu9XLot/Ii1EF9WcXiyAU529BB6/nrO8+2TQY+z/yLXeU10dTNfYerlz4H/a9AhQEf+gEnl++82bBy8gsVkDtseM1uuY1vfOYSp2GK4EyJnoZ0tP28zQ3zUtNLChBpokZ5CmiL6tVeu+kvTAVwXr0gskHgetC1qPvlgWrxQ9SbCkpNv6+J2Az3OnbHdZV0DV3XHmT3jofR7oBVK0ZiHD0Sw=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: edb5d309-4df7-4bd1-8861-08d742b0c471
X-MS-Exchange-CrossTenant-originalarrivaltime: 26 Sep 2019 18:38:47.6055 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: GGoQJFTT7GV3fcjm5QaS+OUlQUeMpSgJwC4qbn0j9mjtc7lZvmZJ+0i7KtpPn6ZJ
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3466
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=yA1keNIfjfmZE3Vwc++jlLu+M4kP1ktrBeylClXbveU=;
 b=yuRxasOL4aA1yi66yQXh9XjIcC82WnXLMqVl7FwQ3T4aWFMvR5fvKx5Yl3iyuwhIqva6AVCitC/MG7cbWdtSaHdmwIHtdIPRwCqG1o5I6B5BkYsTrHnwe86kn9xNgFz1mitjkAh3HZOIAHFhpwlG/DUHX3F1V1eJxG8LWPfHXn8=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Yong.Zhao@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Zhao, Yong" <Yong.Zhao@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U2luY2UgS0ZEIHBhc2lkIHN0YXJ0cyBmcm9tIDB4ODAwMCAoMzI3NjggaW4gZGVjaW1hbCksIGl0
IGlzIGJldHRlcgpwZXJjZWl2ZWQgYXMgYSBoZXggbnVtYmVyLiBNZWFud2hpbGUsIGNoYW5nZSB0
aGUgcGFzaWQgdHlwZSBmcm9tCnVuc2lnbmVkIGludCB0byB1aW50MTZfdCB0byBiZSBjb25zaXN0
ZW50IHRocm91Z2hvdXQgdGhlIGNvZGUuCgpDaGFuZ2UtSWQ6IEk1NjVmZTM5ZjY5ZTc4Mjc0OWE2
OTdmMTg1NDU3NzUzNTRjN2E4OWY4ClNpZ25lZC1vZmYtYnk6IFlvbmcgWmhhbyA8WW9uZy5aaGFv
QGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2NoYXJkZXYuYyAg
ICAgIHwgMTIgKysrKystLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kYmdk
ZXYuYyAgICAgICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kYmdt
Z3IuYyAgICAgICB8ICA4ICsrKystLS0tCiAuLi4vZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9x
dWV1ZV9tYW5hZ2VyLmMgfCAxMiArKysrKy0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRr
ZmQva2ZkX2Rvb3JiZWxsLmMgICAgIHwgIDggKysrKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1ka2ZkL2tmZF9ldmVudHMuYyAgICAgICB8IDEyICsrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfaW9tbXUuYyAgICAgICAgfCAgNiArKystLS0KIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1ka2ZkL2tmZF9wcml2LmggICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzcy5jICAgICAgfCAyMCArKysrKysrKystLS0tLS0tLS0t
CiAuLi4vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzc19xdWV1ZV9tYW5hZ2VyLmMgICAgfCAgNiArKyst
LS0KIDEwIGZpbGVzIGNoYW5nZWQsIDQ1IGluc2VydGlvbnMoKyksIDQ1IGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2LmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfY2hhcmRldi5jCmluZGV4IGU1ZmY3NzI4NjJj
ZC4uMTA2ZDQ1YWU3YzliIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9r
ZmRfY2hhcmRldi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9jaGFyZGV2
LmMKQEAgLTMwMSw3ICszMDEsNyBAQCBzdGF0aWMgaW50IGtmZF9pb2N0bF9jcmVhdGVfcXVldWUo
c3RydWN0IGZpbGUgKmZpbGVwLCBzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnAsCiAJCWdvdG8gZXJyX2Jp
bmRfcHJvY2VzczsKIAl9CiAKLQlwcl9kZWJ1ZygiQ3JlYXRpbmcgcXVldWUgZm9yIFBBU0lEICVk
IG9uIGdwdSAweCV4XG4iLAorCXByX2RlYnVnKCJDcmVhdGluZyBxdWV1ZSBmb3IgUEFTSUQgMHgl
eCBvbiBncHUgMHgleFxuIiwKIAkJCXAtPnBhc2lkLAogCQkJZGV2LT5pZCk7CiAKQEAgLTM1MSw3
ICszNTEsNyBAQCBzdGF0aWMgaW50IGtmZF9pb2N0bF9kZXN0cm95X3F1ZXVlKHN0cnVjdCBmaWxl
ICpmaWxwLCBzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnAsCiAJaW50IHJldHZhbDsKIAlzdHJ1Y3Qga2Zk
X2lvY3RsX2Rlc3Ryb3lfcXVldWVfYXJncyAqYXJncyA9IGRhdGE7CiAKLQlwcl9kZWJ1ZygiRGVz
dHJveWluZyBxdWV1ZSBpZCAlZCBmb3IgcGFzaWQgJWRcbiIsCisJcHJfZGVidWcoIkRlc3Ryb3lp
bmcgcXVldWUgaWQgJWQgZm9yIHBhc2lkIDB4JXhcbiIsCiAJCQkJYXJncy0+cXVldWVfaWQsCiAJ
CQkJcC0+cGFzaWQpOwogCkBAIC0zOTcsNyArMzk3LDcgQEAgc3RhdGljIGludCBrZmRfaW9jdGxf
dXBkYXRlX3F1ZXVlKHN0cnVjdCBmaWxlICpmaWxwLCBzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnAsCiAJ
cHJvcGVydGllcy5xdWV1ZV9wZXJjZW50ID0gYXJncy0+cXVldWVfcGVyY2VudGFnZTsKIAlwcm9w
ZXJ0aWVzLnByaW9yaXR5ID0gYXJncy0+cXVldWVfcHJpb3JpdHk7CiAKLQlwcl9kZWJ1ZygiVXBk
YXRpbmcgcXVldWUgaWQgJWQgZm9yIHBhc2lkICVkXG4iLAorCXByX2RlYnVnKCJVcGRhdGluZyBx
dWV1ZSBpZCAlZCBmb3IgcGFzaWQgMHgleFxuIiwKIAkJCWFyZ3MtPnF1ZXVlX2lkLCBwLT5wYXNp
ZCk7CiAKIAltdXRleF9sb2NrKCZwLT5tdXRleCk7CkBAIC04NTQsNyArODU0LDcgQEAgc3RhdGlj
IGludCBrZmRfaW9jdGxfZ2V0X3Byb2Nlc3NfYXBlcnR1cmVzKHN0cnVjdCBmaWxlICpmaWxwLAog
CXN0cnVjdCBrZmRfcHJvY2Vzc19kZXZpY2VfYXBlcnR1cmVzICpwQXBlcnR1cmU7CiAJc3RydWN0
IGtmZF9wcm9jZXNzX2RldmljZSAqcGRkOwogCi0JZGV2X2RiZyhrZmRfZGV2aWNlLCAiZ2V0IGFw
ZXJ0dXJlcyBmb3IgUEFTSUQgJWQiLCBwLT5wYXNpZCk7CisJZGV2X2RiZyhrZmRfZGV2aWNlLCAi
Z2V0IGFwZXJ0dXJlcyBmb3IgUEFTSUQgMHgleCIsIHAtPnBhc2lkKTsKIAogCWFyZ3MtPm51bV9v
Zl9ub2RlcyA9IDA7CiAKQEAgLTkxMiw3ICs5MTIsNyBAQCBzdGF0aWMgaW50IGtmZF9pb2N0bF9n
ZXRfcHJvY2Vzc19hcGVydHVyZXNfbmV3KHN0cnVjdCBmaWxlICpmaWxwLAogCXVpbnQzMl90IG5v
ZGVzID0gMDsKIAlpbnQgcmV0OwogCi0JZGV2X2RiZyhrZmRfZGV2aWNlLCAiZ2V0IGFwZXJ0dXJl
cyBmb3IgUEFTSUQgJWQiLCBwLT5wYXNpZCk7CisJZGV2X2RiZyhrZmRfZGV2aWNlLCAiZ2V0IGFw
ZXJ0dXJlcyBmb3IgUEFTSUQgMHgleCIsIHAtPnBhc2lkKTsKIAogCWlmIChhcmdzLT5udW1fb2Zf
bm9kZXMgPT0gMCkgewogCQkvKiBSZXR1cm4gbnVtYmVyIG9mIG5vZGVzLCBzbyB0aGF0IHVzZXIg
c3BhY2UgY2FuIGFsbG9hY2F0ZQpAQCAtMzA2Myw3ICszMDYzLDcgQEAgc3RhdGljIGludCBrZmRf
bW1pb19tbWFwKHN0cnVjdCBrZmRfZGV2ICpkZXYsIHN0cnVjdCBrZmRfcHJvY2VzcyAqcHJvY2Vz
cywKIAogCXZtYS0+dm1fcGFnZV9wcm90ID0gcGdwcm90X25vbmNhY2hlZCh2bWEtPnZtX3BhZ2Vf
cHJvdCk7CiAKLQlwcl9kZWJ1ZygiUHJvY2VzcyAlZCBtYXBwaW5nIG1taW8gcGFnZVxuIgorCXBy
X2RlYnVnKCJwYXNpZCAweCV4IG1hcHBpbmcgbW1pbyBwYWdlXG4iCiAJCSAiICAgICB0YXJnZXQg
dXNlciBhZGRyZXNzID09IDB4JTA4bGxYXG4iCiAJCSAiICAgICBwaHlzaWNhbCBhZGRyZXNzICAg
ID09IDB4JTA4bGxYXG4iCiAJCSAiICAgICB2bV9mbGFncyAgICAgICAgICAgID09IDB4JTA0bFhc
biIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kYmdkZXYuYyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kYmdkZXYuYwppbmRleCAzNjM1ZTBiNGIz
YjcuLjQ5Mjk1MWNhZDE0MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQv
a2ZkX2RiZ2Rldi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kYmdkZXYu
YwpAQCAtODAwLDcgKzgwMCw3IEBAIGludCBkYmdkZXZfd2F2ZV9yZXNldF93YXZlZnJvbnRzKHN0
cnVjdCBrZmRfZGV2ICpkZXYsIHN0cnVjdCBrZmRfcHJvY2VzcyAqcCkKIAkJCQkoZGV2LT5rZ2Qs
IHZtaWQpKSB7CiAJCQlpZiAoZGV2LT5rZmQya2dkLT5nZXRfYXRjX3ZtaWRfcGFzaWRfbWFwcGlu
Z19wYXNpZAogCQkJCQkoZGV2LT5rZ2QsIHZtaWQpID09IHAtPnBhc2lkKSB7Ci0JCQkJcHJfZGVi
dWcoIktpbGxpbmcgd2F2ZSBmcm9udHMgb2Ygdm1pZCAlZCBhbmQgcGFzaWQgJWRcbiIsCisJCQkJ
cHJfZGVidWcoIktpbGxpbmcgd2F2ZSBmcm9udHMgb2Ygdm1pZCAlZCBhbmQgcGFzaWQgMHgleFxu
IiwKIAkJCQkJCXZtaWQsIHAtPnBhc2lkKTsKIAkJCQlicmVhazsKIAkJCX0KQEAgLTgwOCw3ICs4
MDgsNyBAQCBpbnQgZGJnZGV2X3dhdmVfcmVzZXRfd2F2ZWZyb250cyhzdHJ1Y3Qga2ZkX2RldiAq
ZGV2LCBzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnApCiAJfQogCiAJaWYgKHZtaWQgPiBsYXN0X3ZtaWRf
dG9fc2NhbikgewotCQlwcl9lcnIoIkRpZG4ndCBmaW5kIHZtaWQgZm9yIHBhc2lkICVkXG4iLCBw
LT5wYXNpZCk7CisJCXByX2VycigiRGlkbid0IGZpbmQgdm1pZCBmb3IgcGFzaWQgMHgleFxuIiwg
cC0+cGFzaWQpOwogCQlyZXR1cm4gLUVGQVVMVDsKIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kYmdtZ3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
a2ZkL2tmZF9kYmdtZ3IuYwppbmRleCA5ZDRhZjk2MWM1ZDEuLjliZmE1MDYzMzY1NCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RiZ21nci5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kYmdtZ3IuYwpAQCAtOTYsNyArOTYsNyBAQCBib29s
IGtmZF9kYmdtZ3JfY3JlYXRlKHN0cnVjdCBrZmRfZGJnbWdyICoqcHBtZ3IsIHN0cnVjdCBrZmRf
ZGV2ICpwZGV2KQogbG9uZyBrZmRfZGJnbWdyX3JlZ2lzdGVyKHN0cnVjdCBrZmRfZGJnbWdyICpw
bWdyLCBzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnApCiB7CiAJaWYgKHBtZ3ItPnBhc2lkICE9IDApIHsK
LQkJcHJfZGVidWcoIkgvVyBkZWJ1Z2dlciBpcyBhbHJlYWR5IGFjdGl2ZSB1c2luZyBwYXNpZCAl
ZFxuIiwKKwkJcHJfZGVidWcoIkgvVyBkZWJ1Z2dlciBpcyBhbHJlYWR5IGFjdGl2ZSB1c2luZyBw
YXNpZCAweCV4XG4iLAogCQkJCXBtZ3ItPnBhc2lkKTsKIAkJcmV0dXJuIC1FQlVTWTsKIAl9CkBA
IC0xMTcsNyArMTE3LDcgQEAgbG9uZyBrZmRfZGJnbWdyX3VucmVnaXN0ZXIoc3RydWN0IGtmZF9k
YmdtZ3IgKnBtZ3IsIHN0cnVjdCBrZmRfcHJvY2VzcyAqcCkKIHsKIAkvKiBJcyB0aGUgcmVxdWVz
dHMgY29taW5nIGZyb20gdGhlIGFscmVhZHkgcmVnaXN0ZXJlZCBwcm9jZXNzPyAqLwogCWlmIChw
bWdyLT5wYXNpZCAhPSBwLT5wYXNpZCkgewotCQlwcl9kZWJ1ZygiSC9XIGRlYnVnZ2VyIGlzIG5v
dCByZWdpc3RlcmVkIGJ5IGNhbGxpbmcgcGFzaWQgJWRcbiIsCisJCXByX2RlYnVnKCJIL1cgZGVi
dWdnZXIgaXMgbm90IHJlZ2lzdGVyZWQgYnkgY2FsbGluZyBwYXNpZCAweCV4XG4iLAogCQkJCXAt
PnBhc2lkKTsKIAkJcmV0dXJuIC1FSU5WQUw7CiAJfQpAQCAtMTM0LDcgKzEzNCw3IEBAIGxvbmcg
a2ZkX2RiZ21ncl93YXZlX2NvbnRyb2woc3RydWN0IGtmZF9kYmdtZ3IgKnBtZ3IsCiB7CiAJLyog
SXMgdGhlIHJlcXVlc3RzIGNvbWluZyBmcm9tIHRoZSBhbHJlYWR5IHJlZ2lzdGVyZWQgcHJvY2Vz
cz8gKi8KIAlpZiAocG1nci0+cGFzaWQgIT0gd2FjX2luZm8tPnByb2Nlc3MtPnBhc2lkKSB7Ci0J
CXByX2RlYnVnKCJIL1cgZGVidWdnZXIgc3VwcG9ydCB3YXMgbm90IHJlZ2lzdGVyZWQgZm9yIHJl
cXVlc3RlciBwYXNpZCAlZFxuIiwKKwkJcHJfZGVidWcoIkgvVyBkZWJ1Z2dlciBzdXBwb3J0IHdh
cyBub3QgcmVnaXN0ZXJlZCBmb3IgcmVxdWVzdGVyIHBhc2lkIDB4JXhcbiIsCiAJCQkJd2FjX2lu
Zm8tPnByb2Nlc3MtPnBhc2lkKTsKIAkJcmV0dXJuIC1FSU5WQUw7CiAJfQpAQCAtMTQ3LDcgKzE0
Nyw3IEBAIGxvbmcga2ZkX2RiZ21ncl9hZGRyZXNzX3dhdGNoKHN0cnVjdCBrZmRfZGJnbWdyICpw
bWdyLAogewogCS8qIElzIHRoZSByZXF1ZXN0cyBjb21pbmcgZnJvbSB0aGUgYWxyZWFkeSByZWdp
c3RlcmVkIHByb2Nlc3M/ICovCiAJaWYgKHBtZ3ItPnBhc2lkICE9IGFkd19pbmZvLT5wcm9jZXNz
LT5wYXNpZCkgewotCQlwcl9kZWJ1ZygiSC9XIGRlYnVnZ2VyIHN1cHBvcnQgd2FzIG5vdCByZWdp
c3RlcmVkIGZvciByZXF1ZXN0ZXIgcGFzaWQgJWRcbiIsCisJCXByX2RlYnVnKCJIL1cgZGVidWdn
ZXIgc3VwcG9ydCB3YXMgbm90IHJlZ2lzdGVyZWQgZm9yIHJlcXVlc3RlciBwYXNpZCAweCV4XG4i
LAogCQkJCWFkd19pbmZvLT5wcm9jZXNzLT5wYXNpZCk7CiAJCXJldHVybiAtRUlOVkFMOwogCX0K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVf
bWFuYWdlci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2RldmljZV9xdWV1ZV9t
YW5hZ2VyLmMKaW5kZXggMzcyMjQzMWNjZTc5Li5lN2YwYTMyZTBlNDQgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9kZXZpY2VfcXVldWVfbWFuYWdlci5jCkBA
IC02MzAsNyArNjMwLDcgQEAgc3RhdGljIGludCBzdXNwZW5kX3NpbmdsZV9xdWV1ZShzdHJ1Y3Qg
ZGV2aWNlX3F1ZXVlX21hbmFnZXIgKmRxbSwKIHsKIAlpbnQgcmV0dmFsID0gMDsKIAotCXByX2Rl
YnVnKCJTdXNwZW5kaW5nIFBBU0lEICV1IHF1ZXVlIFslaV1cbiIsCisJcHJfZGVidWcoIlN1c3Bl
bmRpbmcgUEFTSUQgMHgleCBxdWV1ZSBbJWldXG4iLAogCQkJcGRkLT5wcm9jZXNzLT5wYXNpZCwK
IAkJCXEtPnByb3BlcnRpZXMucXVldWVfaWQpOwogCkBAIC02NjcsNyArNjY3LDcgQEAgc3RhdGlj
IGludCByZXN1bWVfc2luZ2xlX3F1ZXVlKHN0cnVjdCBkZXZpY2VfcXVldWVfbWFuYWdlciAqZHFt
LAogCS8qIFJldHJpZXZlIFBEIGJhc2UgKi8KIAlwZF9iYXNlID0gYW1kZ3B1X2FtZGtmZF9ncHV2
bV9nZXRfcHJvY2Vzc19wYWdlX2RpcihwZGQtPnZtKTsKIAotCXByX2RlYnVnKCJSZXN0b3Jpbmcg
ZnJvbSBzdXNwZW5kIFBBU0lEICV1IHF1ZXVlIFslaV1cbiIsCisJcHJfZGVidWcoIlJlc3Rvcmlu
ZyBmcm9tIHN1c3BlbmQgUEFTSUQgMHgleCBxdWV1ZSBbJWldXG4iLAogCQkJICAgIHBkZC0+cHJv
Y2Vzcy0+cGFzaWQsCiAJCQkgICAgcS0+cHJvcGVydGllcy5xdWV1ZV9pZCk7CiAKQEAgLTY5Nyw3
ICs2OTcsNyBAQCBzdGF0aWMgaW50IGV2aWN0X3Byb2Nlc3NfcXVldWVzX25vY3BzY2goc3RydWN0
IGRldmljZV9xdWV1ZV9tYW5hZ2VyICpkcW0sCiAJCWdvdG8gb3V0OwogCiAJcGRkID0gcXBkX3Rv
X3BkZChxcGQpOwotCXByX2luZm9fcmF0ZWxpbWl0ZWQoIkV2aWN0aW5nIFBBU0lEICV1IHF1ZXVl
c1xuIiwKKwlwcl9pbmZvX3JhdGVsaW1pdGVkKCJFdmljdGluZyBQQVNJRCAweCV4IHF1ZXVlc1xu
IiwKIAkJCSAgICBwZGQtPnByb2Nlc3MtPnBhc2lkKTsKIAogCS8qIE1hcmsgYWxsIHF1ZXVlcyBh
cyBldmljdGVkLiBEZWFjdGl2YXRlIGFsbCBhY3RpdmUgcXVldWVzIG9uCkBAIC03NDMsNyArNzQz
LDcgQEAgc3RhdGljIGludCBldmljdF9wcm9jZXNzX3F1ZXVlc19jcHNjaChzdHJ1Y3QgZGV2aWNl
X3F1ZXVlX21hbmFnZXIgKmRxbSwKIAkJZ290byBvdXQ7CiAKIAlwZGQgPSBxcGRfdG9fcGRkKHFw
ZCk7Ci0JcHJfaW5mb19yYXRlbGltaXRlZCgiRXZpY3RpbmcgUEFTSUQgJXUgcXVldWVzXG4iLAor
CXByX2luZm9fcmF0ZWxpbWl0ZWQoIkV2aWN0aW5nIFBBU0lEIDB4JXggcXVldWVzXG4iLAogCQkJ
ICAgIHBkZC0+cHJvY2Vzcy0+cGFzaWQpOwogCiAJLyogTWFyayBhbGwgcXVldWVzIGFzIGV2aWN0
ZWQuIERlYWN0aXZhdGUgYWxsIGFjdGl2ZSBxdWV1ZXMgb24KQEAgLTc5NCw3ICs3OTQsNyBAQCBz
dGF0aWMgaW50IHJlc3RvcmVfcHJvY2Vzc19xdWV1ZXNfbm9jcHNjaChzdHJ1Y3QgZGV2aWNlX3F1
ZXVlX21hbmFnZXIgKmRxbSwKIAkJZ290byBvdXQ7CiAJfQogCi0JcHJfaW5mb19yYXRlbGltaXRl
ZCgiUmVzdG9yaW5nIFBBU0lEICV1IHF1ZXVlc1xuIiwKKwlwcl9pbmZvX3JhdGVsaW1pdGVkKCJS
ZXN0b3JpbmcgUEFTSUQgMHgleCBxdWV1ZXNcbiIsCiAJCQkgICAgcGRkLT5wcm9jZXNzLT5wYXNp
ZCk7CiAKIAkvKiBVcGRhdGUgUEQgQmFzZSBpbiBRUEQgKi8KQEAgLTg3MCw3ICs4NzAsNyBAQCBz
dGF0aWMgaW50IHJlc3RvcmVfcHJvY2Vzc19xdWV1ZXNfY3BzY2goc3RydWN0IGRldmljZV9xdWV1
ZV9tYW5hZ2VyICpkcW0sCiAJCWdvdG8gb3V0OwogCX0KIAotCXByX2luZm9fcmF0ZWxpbWl0ZWQo
IlJlc3RvcmluZyBQQVNJRCAldSBxdWV1ZXNcbiIsCisJcHJfaW5mb19yYXRlbGltaXRlZCgiUmVz
dG9yaW5nIFBBU0lEIDB4JXggcXVldWVzXG4iLAogCQkJICAgIHBkZC0+cHJvY2Vzcy0+cGFzaWQp
OwogCiAJLyogVXBkYXRlIFBEIEJhc2UgaW4gUVBEICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGtmZC9rZmRfZG9vcmJlbGwuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
a2ZkL2tmZF9kb29yYmVsbC5jCmluZGV4IDZhZDBhN2JjNTE3NS4uNWVmZmNmZjA5ZTllIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZG9vcmJlbGwuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZG9vcmJlbGwuYwpAQCAtMTU4LDcgKzE1OCw3
IEBAIHN0YXRpYyB2bV9mYXVsdF90IGtmZF9kb29yYmVsbF92bV9mYXVsdChzdHJ1Y3Qgdm1fZmF1
bHQgKnZtZikKIAlpZiAoIXBkZCkKIAkJcmV0dXJuIFZNX0ZBVUxUX1NJR0JVUzsKIAotCXByX2Rl
YnVnKCJQcm9jZXNzICVkIGRvb3JiZWxsIHZtIHBhZ2UgZmF1bHRcbiIsIHBkZC0+cHJvY2Vzcy0+
cGFzaWQpOworCXByX2RlYnVnKCJwYXNpZCAweCV4IGRvb3JiZWxsIHZtIHBhZ2UgZmF1bHRcbiIs
IHBkZC0+cHJvY2Vzcy0+cGFzaWQpOwogCiAJa2ZkX3Byb2Nlc3NfcmVtYXBfZG9vcmJlbGxzX2xv
Y2tlZChwZGQtPnByb2Nlc3MpOwogCkBAIC0yMjAsMTIgKzIyMCwxMiBAQCBpbnQga2ZkX2Rvb3Ji
ZWxsX3JlbWFwKHN0cnVjdCBrZmRfcHJvY2Vzc19kZXZpY2UgKnBkZCkKIAl2bWEgPSBwZGQtPnFw
ZC5kb29yYmVsbF92bWE7CiAJc2l6ZSA9IGtmZF9kb29yYmVsbF9wcm9jZXNzX3NsaWNlKHBkZC0+
ZGV2KTsKIAotCXByX2RlYnVnKCJQcm9jZXNzICVkIHJlbWFwIGRvb3JiZWxsIDB4JWx4XG4iLCBw
cm9jZXNzLT5wYXNpZCwKKwlwcl9kZWJ1ZygicGFzaWQgMHgleCByZW1hcCBkb29yYmVsbCAweCVs
eFxuIiwgcHJvY2Vzcy0+cGFzaWQsCiAJCXZtYS0+dm1fc3RhcnQpOwogCiAJcmV0ID0gdm1faW9t
YXBfbWVtb3J5KHZtYSwgYWRkcmVzcywgc2l6ZSk7CiAJaWYgKHJldCkKLQkJcHJfZXJyKCJQcm9j
ZXNzICVkIGZhaWxlZCB0byByZW1hcCBkb29yYmVsbCAweCVseFxuIiwKKwkJcHJfZXJyKCJwYXNp
ZCAweCV4IGZhaWxlZCB0byByZW1hcCBkb29yYmVsbCAweCVseFxuIiwKIAkJCXByb2Nlc3MtPnBh
c2lkLCB2bWEtPnZtX3N0YXJ0KTsKIAogb3V0X3VubG9jazoKQEAgLTI1Nyw3ICsyNTcsNyBAQCBp
bnQga2ZkX2Rvb3JiZWxsX21tYXAoc3RydWN0IGtmZF9kZXYgKmRldiwgc3RydWN0IGtmZF9wcm9j
ZXNzICpwcm9jZXNzLAogCiAJdm1hLT52bV9wYWdlX3Byb3QgPSBwZ3Byb3Rfbm9uY2FjaGVkKHZt
YS0+dm1fcGFnZV9wcm90KTsKIAotCXByX2RlYnVnKCJQcm9jZXNzICVkIG1hcHBpbmcgZG9vcmJl
bGwgcGFnZVxuIgorCXByX2RlYnVnKCJwYXNpZCAweCV4IG1hcHBpbmcgZG9vcmJlbGwgcGFnZVxu
IgogCQkgIiAgICAgdGFyZ2V0IHVzZXIgYWRkcmVzcyA9PSAweCUwOGxsWFxuIgogCQkgIiAgICAg
cGh5c2ljYWwgYWRkcmVzcyAgICA9PSAweCUwOGxsWFxuIgogCQkgIiAgICAgdm1fZmxhZ3MgICAg
ICAgICAgICA9PSAweCUwNGxYXG4iCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfZXZlbnRzLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfZXZlbnRz
LmMKaW5kZXggMzhhOTliYTkxYTg4Li42YmFmNzhjOTI0NWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9ldmVudHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGtmZC9rZmRfZXZlbnRzLmMKQEAgLTg1Miw4ICs4NTIsOCBAQCBzdGF0aWMgdm9pZCBsb29r
dXBfZXZlbnRzX2J5X3R5cGVfYW5kX3NpZ25hbChzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnAsCiAKIAlp
ZiAodHlwZSA9PSBLRkRfRVZFTlRfVFlQRV9NRU1PUlkpIHsKIAkJZGV2X3dhcm4oa2ZkX2Rldmlj
ZSwKLQkJCSJTZW5kaW5nIFNJR1NFR1YgdG8gSFNBIFByb2Nlc3Mgd2l0aCBQSUQgJWQgIiwKLQkJ
CQlwLT5sZWFkX3RocmVhZC0+cGlkKTsKKwkJCSJTZW5kaW5nIFNJR1NFR1YgdG8gcHJvY2VzcyAl
ZCAocGFzaWQgMHgleCkiLAorCQkJCXAtPmxlYWRfdGhyZWFkLT5waWQsIHAtPnBhc2lkKTsKIAkJ
c2VuZF9zaWcoU0lHU0VHViwgcC0+bGVhZF90aHJlYWQsIDApOwogCX0KIApAQCAtODYxLDEzICs4
NjEsMTMgQEAgc3RhdGljIHZvaWQgbG9va3VwX2V2ZW50c19ieV90eXBlX2FuZF9zaWduYWwoc3Ry
dWN0IGtmZF9wcm9jZXNzICpwLAogCWlmIChzZW5kX3NpZ25hbCkgewogCQlpZiAoc2VuZF9zaWd0
ZXJtKSB7CiAJCQlkZXZfd2FybihrZmRfZGV2aWNlLAotCQkJCSJTZW5kaW5nIFNJR1RFUk0gdG8g
SFNBIFByb2Nlc3Mgd2l0aCBQSUQgJWQgIiwKLQkJCQkJcC0+bGVhZF90aHJlYWQtPnBpZCk7CisJ
CQkJIlNlbmRpbmcgU0lHVEVSTSB0byBwcm9jZXNzICVkIChwYXNpZCAweCV4KSIsCisJCQkJCXAt
PmxlYWRfdGhyZWFkLT5waWQsIHAtPnBhc2lkKTsKIAkJCXNlbmRfc2lnKFNJR1RFUk0sIHAtPmxl
YWRfdGhyZWFkLCAwKTsKIAkJfSBlbHNlIHsKIAkJCWRldl9lcnIoa2ZkX2RldmljZSwKLQkJCQki
SFNBIFByb2Nlc3MgKFBJRCAlZCkgZ290IHVuaGFuZGxlZCBleGNlcHRpb24iLAotCQkJCXAtPmxl
YWRfdGhyZWFkLT5waWQpOworCQkJCSJQcm9jZXNzICVkIChwYXNpZCAweCV4KSBnb3QgdW5oYW5k
bGVkIGV4Y2VwdGlvbiIsCisJCQkJcC0+bGVhZF90aHJlYWQtPnBpZCwgcC0+cGFzaWQpOwogCQl9
CiAJfQogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2lvbW11
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfaW9tbXUuYwppbmRleCA1ZjM1ZGYy
M2ZiMTguLjE5M2UyODM1YmQ0ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRr
ZmQva2ZkX2lvbW11LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX2lvbW11
LmMKQEAgLTE2MCw3ICsxNjAsNyBAQCBzdGF0aWMgdm9pZCBpb21tdV9wYXNpZF9zaHV0ZG93bl9j
YWxsYmFjayhzdHJ1Y3QgcGNpX2RldiAqcGRldiwgaW50IHBhc2lkKQogCWlmICghcCkKIAkJcmV0
dXJuOwogCi0JcHJfZGVidWcoIlVuYmluZGluZyBwcm9jZXNzICVkIGZyb20gSU9NTVVcbiIsIHBh
c2lkKTsKKwlwcl9kZWJ1ZygiVW5iaW5kaW5nIHByb2Nlc3MgMHgleCBmcm9tIElPTU1VXG4iLCBw
YXNpZCk7CiAKIAltdXRleF9sb2NrKGtmZF9nZXRfZGJnbWdyX211dGV4KCkpOwogCkBAIC0xOTQs
NyArMTk0LDcgQEAgc3RhdGljIGludCBpb21tdV9pbnZhbGlkX3Bwcl9jYihzdHJ1Y3QgcGNpX2Rl
diAqcGRldiwgaW50IHBhc2lkLAogCXN0cnVjdCBrZmRfZGV2ICpkZXY7CiAKIAlkZXZfd2Fybl9y
YXRlbGltaXRlZChrZmRfZGV2aWNlLAotCQkJIkludmFsaWQgUFBSIGRldmljZSAleDoleC4leCBw
YXNpZCAlZCBhZGRyZXNzIDB4JWxYIGZsYWdzIDB4JVgiLAorCQkJIkludmFsaWQgUFBSIGRldmlj
ZSAleDoleC4leCBwYXNpZCAweCV4IGFkZHJlc3MgMHglbFggZmxhZ3MgMHglWCIsCiAJCQlQQ0lf
QlVTX05VTShwZGV2LT5kZXZmbiksCiAJCQlQQ0lfU0xPVChwZGV2LT5kZXZmbiksCiAJCQlQQ0lf
RlVOQyhwZGV2LT5kZXZmbiksCkBAIC0yMzUsNyArMjM1LDcgQEAgc3RhdGljIGludCBrZmRfYmlu
ZF9wcm9jZXNzZXNfdG9fZGV2aWNlKHN0cnVjdCBrZmRfZGV2ICprZmQpCiAJCWVyciA9IGFtZF9p
b21tdV9iaW5kX3Bhc2lkKGtmZC0+cGRldiwgcC0+cGFzaWQsCiAJCQkJcC0+bGVhZF90aHJlYWQp
OwogCQlpZiAoZXJyIDwgMCkgewotCQkJcHJfZXJyKCJVbmV4cGVjdGVkIHBhc2lkICVkIGJpbmRp
bmcgZmFpbHVyZVxuIiwKKwkJCXByX2VycigiVW5leHBlY3RlZCBwYXNpZCAweCV4IGJpbmRpbmcg
ZmFpbHVyZVxuIiwKIAkJCQkJcC0+cGFzaWQpOwogCQkJbXV0ZXhfdW5sb2NrKCZwLT5tdXRleCk7
CiAJCQlicmVhazsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9w
cml2LmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJpdi5oCmluZGV4IDQzN2Y5
NDMwOTQ4OS4uMGQyYzdmYTFmYTQ2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfcHJpdi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcml2
LmgKQEAgLTgxMiw3ICs4MTIsNyBAQCBzdHJ1Y3Qga2ZkX3Byb2Nlc3MgewogCS8qIFVzZSBmb3Ig
ZGVsYXllZCBmcmVlaW5nIG9mIGtmZF9wcm9jZXNzIHN0cnVjdHVyZSAqLwogCXN0cnVjdCByY3Vf
aGVhZAlyY3U7CiAKLQl1bnNpZ25lZCBpbnQgcGFzaWQ7CisJdWludDE2X3QgcGFzaWQ7CiAJdW5z
aWduZWQgaW50IGRvb3JiZWxsX2luZGV4OwogCiAJLyoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1ka2ZkL2tmZF9wcm9jZXNzLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtm
ZC9rZmRfcHJvY2Vzcy5jCmluZGV4IDVkNDEwYzdkMTVhNC4uY2U1ZjVkM2M5ZDU0IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzcy5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcm9jZXNzLmMKQEAgLTQ0Nyw3ICs0NDcsNyBAQCBz
dGF0aWMgdm9pZCBrZmRfcHJvY2Vzc19kZXN0cm95X3BkZHMoc3RydWN0IGtmZF9wcm9jZXNzICpw
KQogCiAJbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKHBkZCwgdGVtcCwgJnAtPnBlcl9kZXZpY2Vf
ZGF0YSwKIAkJCQkgcGVyX2RldmljZV9saXN0KSB7Ci0JCXByX2RlYnVnKCJSZWxlYXNpbmcgcGRk
ICh0b3BvbG9neSBpZCAlZCkgZm9yIHByb2Nlc3MgKHBhc2lkICVkKVxuIiwKKwkJcHJfZGVidWco
IlJlbGVhc2luZyBwZGQgKHRvcG9sb2d5IGlkICVkKSBmb3IgcHJvY2VzcyAocGFzaWQgMHgleClc
biIsCiAJCQkJcGRkLT5kZXYtPmlkLCBwLT5wYXNpZCk7CiAKIAkJaWYgKHBkZC0+ZHJtX2ZpbGUp
IHsKQEAgLTEyODAsNyArMTI4MCw3IEBAIHN0YXRpYyB2b2lkIGV2aWN0X3Byb2Nlc3Nfd29ya2Vy
KHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKIAogCXAtPmxhc3RfZXZpY3RfdGltZXN0YW1wID0g
Z2V0X2ppZmZpZXNfNjQoKTsKIAotCXByX2luZm8oIlN0YXJ0ZWQgZXZpY3RpbmcgcGFzaWQgJWRc
biIsIHAtPnBhc2lkKTsKKwlwcl9pbmZvKCJTdGFydGVkIGV2aWN0aW5nIHBhc2lkIDB4JXhcbiIs
IHAtPnBhc2lkKTsKIAlyZXQgPSBrZmRfcHJvY2Vzc19ldmljdF9xdWV1ZXMocCk7CiAJaWYgKCFy
ZXQpIHsKIAkJZG1hX2ZlbmNlX3NpZ25hbChwLT5lZik7CkBAIC0xMjkzLDkgKzEyOTMsOSBAQCBz
dGF0aWMgdm9pZCBldmljdF9wcm9jZXNzX3dvcmtlcihzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmsp
CiAJCQlwcl9kZWJ1ZygiUHJvY2VzcyAlZCBxdWV1ZXMgaWRsZSwgZG9vcmJlbGwgdW5tYXBwZWRc
biIsCiAJCQkJcC0+cGFzaWQpOwogCi0JCXByX2luZm8oIkZpbmlzaGVkIGV2aWN0aW5nIHBhc2lk
ICVkXG4iLCBwLT5wYXNpZCk7CisJCXByX2luZm8oIkZpbmlzaGVkIGV2aWN0aW5nIHBhc2lkIDB4
JXhcbiIsIHAtPnBhc2lkKTsKIAl9IGVsc2UKLQkJcHJfZXJyKCJGYWlsZWQgdG8gZXZpY3QgcXVl
dWVzIG9mIHBhc2lkICVkXG4iLCBwLT5wYXNpZCk7CisJCXByX2VycigiRmFpbGVkIHRvIGV2aWN0
IHF1ZXVlcyBvZiBwYXNpZCAweCV4XG4iLCBwLT5wYXNpZCk7CiAJdHJhY2Vfa2ZkX2V2aWN0X3By
b2Nlc3Nfd29ya2VyX2VuZChwLCByZXQgPyAiRmFpbGVkIiA6ICJTdWNjZXNzIik7CiB9CiAKQEAg
LTEzMTIsNyArMTMxMiw3IEBAIHN0YXRpYyB2b2lkIHJlc3RvcmVfcHJvY2Vzc193b3JrZXIoc3Ry
dWN0IHdvcmtfc3RydWN0ICp3b3JrKQogCSAqLwogCXAgPSBjb250YWluZXJfb2YoZHdvcmssIHN0
cnVjdCBrZmRfcHJvY2VzcywgcmVzdG9yZV93b3JrKTsKIAl0cmFjZV9rZmRfcmVzdG9yZV9wcm9j
ZXNzX3dvcmtlcl9zdGFydChwKTsKLQlwcl9pbmZvKCJTdGFydGVkIHJlc3RvcmluZyBwYXNpZCAl
ZFxuIiwgcC0+cGFzaWQpOworCXByX2luZm8oIlN0YXJ0ZWQgcmVzdG9yaW5nIHBhc2lkIDB4JXhc
biIsIHAtPnBhc2lkKTsKIAogCS8qIFNldHRpbmcgbGFzdF9yZXN0b3JlX3RpbWVzdGFtcCBiZWZv
cmUgc3VjY2Vzc2Z1bCByZXN0b3JhdGlvbi4KIAkgKiBPdGhlcndpc2UgdGhpcyB3b3VsZCBoYXZl
IHRvIGJlIHNldCBieSBLR0QgKHJlc3RvcmVfcHJvY2Vzc19ib3MpCkBAIC0xMzI4LDcgKzEzMjgs
NyBAQCBzdGF0aWMgdm9pZCByZXN0b3JlX3Byb2Nlc3Nfd29ya2VyKHN0cnVjdCB3b3JrX3N0cnVj
dCAqd29yaykKIAlyZXQgPSBhbWRncHVfYW1ka2ZkX2dwdXZtX3Jlc3RvcmVfcHJvY2Vzc19ib3Mo
cC0+a2dkX3Byb2Nlc3NfaW5mbywKIAkJCQkJCSAgICAgJnAtPmVmKTsKIAlpZiAocmV0KSB7Ci0J
CXByX2luZm8oIkZhaWxlZCB0byByZXN0b3JlIEJPcyBvZiBwYXNpZCAlZCwgcmV0cnkgYWZ0ZXIg
JWQgbXNcbiIsCisJCXByX2luZm8oIkZhaWxlZCB0byByZXN0b3JlIEJPcyBvZiBwYXNpZCAweCV4
LCByZXRyeSBhZnRlciAlZCBtc1xuIiwKIAkJCSBwLT5wYXNpZCwgUFJPQ0VTU19CQUNLX09GRl9U
SU1FX01TKTsKIAogCQlyZXQgPSBxdWV1ZV9kZWxheWVkX3dvcmsoa2ZkX3Jlc3RvcmVfd3EsICZw
LT5yZXN0b3JlX3dvcmssCkBAIC0xMzQzLDkgKzEzNDMsOSBAQCBzdGF0aWMgdm9pZCByZXN0b3Jl
X3Byb2Nlc3Nfd29ya2VyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKIAlyZXQgPSBrZmRfcHJv
Y2Vzc19yZXN0b3JlX3F1ZXVlcyhwKTsKIAl0cmFjZV9rZmRfcmVzdG9yZV9wcm9jZXNzX3dvcmtl
cl9lbmQocCwJcmV0ID8gIkZhaWxlZCIgOiAiU3VjY2VzcyIpOwogCWlmICghcmV0KQotCQlwcl9p
bmZvKCJGaW5pc2hlZCByZXN0b3JpbmcgcGFzaWQgJWRcbiIsIHAtPnBhc2lkKTsKKwkJcHJfaW5m
bygiRmluaXNoZWQgcmVzdG9yaW5nIHBhc2lkIDB4JXhcbiIsIHAtPnBhc2lkKTsKIAllbHNlCi0J
CXByX2VycigiRmFpbGVkIHRvIHJlc3RvcmUgcXVldWVzIG9mIHBhc2lkICVkXG4iLCBwLT5wYXNp
ZCk7CisJCXByX2VycigiRmFpbGVkIHRvIHJlc3RvcmUgcXVldWVzIG9mIHBhc2lkIDB4JXhcbiIs
IHAtPnBhc2lkKTsKIH0KIAogdm9pZCBrZmRfc3VzcGVuZF9hbGxfcHJvY2Vzc2VzKHZvaWQpCkBA
IC0xMzU5LDcgKzEzNTksNyBAQCB2b2lkIGtmZF9zdXNwZW5kX2FsbF9wcm9jZXNzZXModm9pZCkK
IAkJY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCZwLT5yZXN0b3JlX3dvcmspOwogCiAJCWlmIChr
ZmRfcHJvY2Vzc19ldmljdF9xdWV1ZXMocCkpCi0JCQlwcl9lcnIoIkZhaWxlZCB0byBzdXNwZW5k
IHByb2Nlc3MgJWRcbiIsIHAtPnBhc2lkKTsKKwkJCXByX2VycigiRmFpbGVkIHRvIHN1c3BlbmQg
cHJvY2VzcyAweCV4XG4iLCBwLT5wYXNpZCk7CiAJCWRtYV9mZW5jZV9zaWduYWwocC0+ZWYpOwog
CQlkbWFfZmVuY2VfcHV0KHAtPmVmKTsKIAkJcC0+ZWYgPSBOVUxMOwpAQCAtMTQ0Miw3ICsxNDQy
LDcgQEAgaW50IGtmZF9kZWJ1Z2ZzX21xZHNfYnlfcHJvY2VzcyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0s
IHZvaWQgKmRhdGEpCiAJaW50IGlkeCA9IHNyY3VfcmVhZF9sb2NrKCZrZmRfcHJvY2Vzc2VzX3Ny
Y3UpOwogCiAJaGFzaF9mb3JfZWFjaF9yY3Uoa2ZkX3Byb2Nlc3Nlc190YWJsZSwgdGVtcCwgcCwg
a2ZkX3Byb2Nlc3NlcykgewotCQlzZXFfcHJpbnRmKG0sICJQcm9jZXNzICVkIFBBU0lEICVkOlxu
IiwKKwkJc2VxX3ByaW50ZihtLCAiUHJvY2VzcyAlZCBQQVNJRCAweCV4OlxuIiwKIAkJCSAgIHAt
PmxlYWRfdGhyZWFkLT50Z2lkLCBwLT5wYXNpZCk7CiAKIAkJbXV0ZXhfbG9jaygmcC0+bXV0ZXgp
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3NfcXVl
dWVfbWFuYWdlci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3NfcXVl
dWVfbWFuYWdlci5jCmluZGV4IGE1OTQ5NDUwOTdhMy4uMjI3ZmIwZWM4MTE1IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vzc19xdWV1ZV9tYW5hZ2VyLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3NfcXVldWVfbWFuYWdl
ci5jCkBAIC01Myw3ICs1Myw3IEBAIHN0YXRpYyBpbnQgZmluZF9hdmFpbGFibGVfcXVldWVfc2xv
dChzdHJ1Y3QgcHJvY2Vzc19xdWV1ZV9tYW5hZ2VyICpwcW0sCiAJcHJfZGVidWcoIlRoZSBuZXcg
c2xvdCBpZCAlbHVcbiIsIGZvdW5kKTsKIAogCWlmIChmb3VuZCA+PSBLRkRfTUFYX05VTV9PRl9R
VUVVRVNfUEVSX1BST0NFU1MpIHsKLQkJcHJfaW5mbygiQ2Fubm90IG9wZW4gbW9yZSBxdWV1ZXMg
Zm9yIHByb2Nlc3Mgd2l0aCBwYXNpZCAlZFxuIiwKKwkJcHJfaW5mbygiQ2Fubm90IG9wZW4gbW9y
ZSBxdWV1ZXMgZm9yIHByb2Nlc3Mgd2l0aCBwYXNpZCAweCV4XG4iLAogCQkJCXBxbS0+cHJvY2Vz
cy0+cGFzaWQpOwogCQlyZXR1cm4gLUVOT01FTTsKIAl9CkBAIC0yOTgsNyArMjk4LDcgQEAgaW50
IHBxbV9jcmVhdGVfcXVldWUoc3RydWN0IHByb2Nlc3NfcXVldWVfbWFuYWdlciAqcHFtLAogCX0K
IAogCWlmIChyZXR2YWwgIT0gMCkgewotCQlwcl9lcnIoIlBhc2lkICVkIERRTSBjcmVhdGUgcXVl
dWUgJWQgZmFpbGVkLiByZXQgJWRcbiIsCisJCXByX2VycigiUGFzaWQgMHgleCBEUU0gY3JlYXRl
IHF1ZXVlICVkIGZhaWxlZC4gcmV0ICVkXG4iLAogCQkJcHFtLT5wcm9jZXNzLT5wYXNpZCwgdHlw
ZSwgcmV0dmFsKTsKIAkJZ290byBlcnJfY3JlYXRlX3F1ZXVlOwogCX0KQEAgLTM3OCw3ICszNzgs
NyBAQCBpbnQgcHFtX2Rlc3Ryb3lfcXVldWUoc3RydWN0IHByb2Nlc3NfcXVldWVfbWFuYWdlciAq
cHFtLCB1bnNpZ25lZCBpbnQgcWlkKQogCQlkcW0gPSBwcW4tPnEtPmRldmljZS0+ZHFtOwogCQly
ZXR2YWwgPSBkcW0tPm9wcy5kZXN0cm95X3F1ZXVlKGRxbSwgJnBkZC0+cXBkLCBwcW4tPnEpOwog
CQlpZiAocmV0dmFsKSB7Ci0JCQlwcl9lcnIoIlBhc2lkICVkIGRlc3Ryb3kgcXVldWUgJWQgZmFp
bGVkLCByZXQgJWRcbiIsCisJCQlwcl9lcnIoIlBhc2lkIDB4JXggZGVzdHJveSBxdWV1ZSAlZCBm
YWlsZWQsIHJldCAlZFxuIiwKIAkJCQlwcW0tPnByb2Nlc3MtPnBhc2lkLAogCQkJCXBxbi0+cS0+
cHJvcGVydGllcy5xdWV1ZV9pZCwgcmV0dmFsKTsKIAkJCWlmIChyZXR2YWwgIT0gLUVUSU1FKQot
LSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
