Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F38C23F6D76
	for <lists+amd-gfx@lfdr.de>; Wed, 25 Aug 2021 04:43:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 082E76E0FD;
	Wed, 25 Aug 2021 02:43:10 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-DM3-obe.outbound.protection.outlook.com
 (mail-dm3nam07on2057.outbound.protection.outlook.com [40.107.95.57])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 61F676E0FD
 for <amd-gfx@lists.freedesktop.org>; Wed, 25 Aug 2021 02:43:08 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=ePVqSEmyR/wS0wwcpEWPcM+plGk9WMNSqcAndVjv3wl/3DyyOoXJNUDFaR5JnudNEBh1IyjgEKcPRbxEVLBtfdpF65gu5f08jEE1Fy4PG7AVPUBm/okYdGOJ4iNX2U4MFzLaC1LUnYeQj1q3/t2YBDqP5sKx6sHt//QU6aGN9+EjLcvcXsxiuT7xmy7EybIW7L1L+ayNf6yk3ab3LeoR7yQwtxA/KiFc83Eq6QEbGJHdL8oRIRaUghhIfQjeainJ7gDBZzV0hHxDt0fNaXbnIGkTfS2VubXYi82yFTQv2j91TzTsI9g5jEHWHnQ54EvD2sdiMPIQcZ0LYmNiyazSjA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=wC9icFqKpYCtdxIhnRW6BM3QB7m3Be9H93LjvJ37PVg=;
 b=mT4JzxCg7Kc5CwmCMUAkX+IDj5Y8jL2IKKTX0u0lGFCM7Er3Ca7/KMxNMzS1DlCtpsutp+PhHUBOto+KVKtorSw7GJ00zsdF/SMal3Q8vurKzDBEaNXsnUFGr6eE2pjp6ra/Wmn1Jzyj+VSaPXkEvan+vDnUQNQqHpEoW+rISpA5q6ZVMiccP3heKs+QxP/Tv3i0cQim2sDyKtDOW6EbGb7Lblwv8wQjsx3FK7lYu4tnpmVwN6BS/hdMhaeis5cJjrchp0VHThyhqvMCToEeRwRpOxIcDHGS2wsg2BC3NRdP3r0ju4BAmPjOtzNkw5K8dgJfAefY2jIRAFGH950fKA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=wC9icFqKpYCtdxIhnRW6BM3QB7m3Be9H93LjvJ37PVg=;
 b=hrnpp4nLBgJ0WVt0L1p848Wrh1wnPBAOQPLOj2xDweHFO+w1VycjANU95sVqAAgObC+rDaXVhLIZAXbb4AOYZVLTgmJIibmWRC1AVN6K4avo4T8NK0gAUkqNKQ+/XcKuWJMNrRJmlvtNIdHS34q4190Tv4f7XqkZIzuk06XJXEY=
Received: from DM6PR12MB3355.namprd12.prod.outlook.com (2603:10b6:5:115::26)
 by DM6PR12MB3067.namprd12.prod.outlook.com (2603:10b6:5:115::10) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4457.17; Wed, 25 Aug
 2021 01:11:42 +0000
Received: from DM6PR12MB3355.namprd12.prod.outlook.com
 ([fe80::20e9:5b33:7000:207]) by DM6PR12MB3355.namprd12.prod.outlook.com
 ([fe80::20e9:5b33:7000:207%2]) with mapi id 15.20.4436.025; Wed, 25 Aug 2021
 01:11:41 +0000
From: "Keely, Sean" <Sean.Keely@amd.com>
To: "Kuehling, Felix" <Felix.Kuehling@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH v2] drm/amdkfd: Account for SH/SE count when setting up cu
 masks.
Thread-Topic: [PATCH v2] drm/amdkfd: Account for SH/SE count when setting up
 cu masks.
Thread-Index: AQHXmIAw3Ez5tQikYEW3fnoeJC78DquDZkWAgAAEw7A=
Date: Wed, 25 Aug 2021 01:11:41 +0000
Message-ID: <DM6PR12MB3355752133F2B67586D56D9494C69@DM6PR12MB3355.namprd12.prod.outlook.com>
References: <20210824003658.84092-1-Sean.Keely@amd.com>
 <f9ed210c-470d-61f7-bbad-79a83b8659f2@amd.com>
In-Reply-To: <f9ed210c-470d-61f7-bbad-79a83b8659f2@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_ActionId=997d7a6f-9a55-419e-a679-7dbfb55cc3a9;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_ContentBits=0;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_Enabled=true;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_Method=Standard;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_Name=AMD
 Official Use Only-AIP 2.0;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_SetDate=2021-08-25T01:10:39Z;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
authentication-results: amd.com; dkim=none (message not signed)
 header.d=none;amd.com; dmarc=none action=none header.from=amd.com;
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 7a15f31f-0b2f-4996-d007-08d967654c44
x-ms-traffictypediagnostic: DM6PR12MB3067:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM6PR12MB3067D8CD8A1DE8E39B75AE2E94C69@DM6PR12MB3067.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:7219;
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: JTEHPQRQnI5DrNSLA50ekBcpvoRdp2BtLzJShxSN+Gm2HZFvNiG8ZSloOd6ZaRITbtHYXSr6eeG4gsxH5Cwqshhf6lWCtz7nYzMPGSd8R3b/UYc4WrhJBs5AUyE45rJGnQFaDMovthSAlxjCmuQQ0gLMICtp2TxkbWZqp8zMX1C/YX5MaaNp54M57SjyKEioogqo+f+A+c5pqPsxhc/0tFA4mL0ynLufO2yMEFfSS5UBigrT3JrvBd9Ttc17H1JzLMsSfDBrxQU1dlmgfqRo/A7F4NKet1cBJ55ryWBF46uolPxED96xByVMsfIXsI7+XvDU2X1/M123jIxDVdb2hiPJ9zMnw5kZkj5R1HCpvPfoSda23uVM1ZeaVcWXbSyF1aES1RfJNmIJlFxbjzTF6QTY4TM54tFbH3iwhmSkg14e7PzBBbiqHaQwp2wxnw7AJboLAgKtc1s3ZMYBgSeK2uYYmwEREjeEo8hygYFmjlt8xpdCxFWlFpg+ub3w6nqUwXLao7xOWrNcwJ55S3zK6L/ocmZWdKZ5EuJnHtDF+K0GcFnV+aP+GR7enYUr7GRKgGtlkYqW2npLOpuKhUkL5rJE3jI7SC0z7Fvt9PJir6sbrgCM5bPppZ04q9Xhe7qA3unXSsnYUsxYO1x0BtIqcJZu72bC4jXStFn1E47VwEhASFo6tAJyqX2KRKdxpGFtL49CJftLPbQxvbNmvlZPlg==
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM6PR12MB3355.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(396003)(376002)(136003)(39850400004)(366004)(346002)(33656002)(83380400001)(86362001)(478600001)(5660300002)(52536014)(9686003)(76116006)(38100700002)(8936002)(66946007)(66556008)(64756008)(66446008)(38070700005)(66476007)(8676002)(186003)(26005)(53546011)(6506007)(15650500001)(7696005)(2906002)(110136005)(71200400001)(316002)(122000001)(55016002);
 DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?eGtIa3BvYVZ1Mm04L09CMEt0QkdqN0UrdUdzNTZ1L3cwb1ZVL3oySS9hNnpm?=
 =?utf-8?B?ZXpwSVN5bWQ3VzNoZk5jbk50RXpGQ3dRNEZETzdFMUwyMkVXcTVEc1RwdDFH?=
 =?utf-8?B?TWFNd0hLTkJNdSt4WEx6QWpJUGRrQjRldG9EMVJQbGRZelcrWFF4REdRT0Jl?=
 =?utf-8?B?QlcrbmRhTzd3RW0rdzk1aFp6ejluSjRVR0RHZk4wZ2dEemFXUjFOWkIvWDlh?=
 =?utf-8?B?b0NIcThuN1d2S2NvZkd0SGpxSUxLRXRTMVNnMWV5Y1RVd3pLT2ZnQkFHMUxS?=
 =?utf-8?B?RUY3K0xsU2tkOGNWM3p5K3pzbmNZUCtWd1JyMkd1dzNPV05Uemt1TFpJczls?=
 =?utf-8?B?amUyQ1ZUNCtmVzRQcFNKZDYxOC9UUkd3MVMvS1FGS1V2eUI3NTNLTURsTmxT?=
 =?utf-8?B?cHUrd0xTZ0MyajA3TThITEVWNHVFbzhicjgvQW5XaDg0eWJsVzdOV3g3c1Z6?=
 =?utf-8?B?dDkvMXkySFFLc0VrU0J0NXNCMzg3L3dvRzkyOWdvN09ZM29CYXhFWWlYN0M5?=
 =?utf-8?B?N09jMlY2Slh0bmlidWpLZFZwbHJXQ1JESjhZOGdvaWhRUW5pSEhRRkREeDFL?=
 =?utf-8?B?cEFGTHR5UndUNjRKek15OE5sSXQxWG1GVitJSDB1aXRYZHhyaW54S3lqM3h5?=
 =?utf-8?B?b2JmM0NCQkNESVNVYVlOcmpLL1BPQmdzWHBKbFFPcHhpdHExZGZWNzFOVDdL?=
 =?utf-8?B?Nk5PQmJrTkV4TWUyTCttN3c5OGxIRzl3cGMyNlVDMGloNWx3YUNCUGNRc2E5?=
 =?utf-8?B?emhCRkFKMGtaeGN1blY1VHRzODZDMHdZT0dXWkU2ckNUbDYvbzU4czNPdW1q?=
 =?utf-8?B?U3d0R3ZOY1Q0VU8zb3Yxb0VjM3FxQVcvSTdONTM2NENnTk1BMTVFRVFlVTZ0?=
 =?utf-8?B?aFRYMlJ1TENGTmUvODR5a3hZRmdFc3V1MlVRM21Gek1zbTl3dEJ3dE53cVI2?=
 =?utf-8?B?YUFnWWZoMEtuME9ibHErekVKTWNmdk5GS3BoU244VVRDZHFwcDI4NGtyeHpk?=
 =?utf-8?B?b2VnS0FEakJNQjVSU2FRRk9HOUU4UitVZTN4dzhFenBpbDJhdjRXWVNXT3Vo?=
 =?utf-8?B?N3ovZjBNL3k2aHc3cmxLN3I5cWFzanJIWS9LU3VrQnRIMFBKYkl3WStoNUlO?=
 =?utf-8?B?c2hBQVozSk5BdzdMaDhQQ252VnNWcHZLYXFlWnJvYklKV3JMZXJzdE5wLzIy?=
 =?utf-8?B?Z3FGUHBibHFOODVnK3VKaEx2dys2Mk9ZYkZNQWUrejVEdU5OTitXSFhyUlpW?=
 =?utf-8?B?LzBzbXVNbk80dWp2Y2FDZmxtalpXaDc1d1hEdHhWVElweWZKWG9tQmNFZ3pK?=
 =?utf-8?B?QTlGVEhDcGdIL3cyak1ha1JmdEhNL2NDbHAzeEtDNE5RMnpUTncxRlBEeVFQ?=
 =?utf-8?B?blVMUmpsRHEwY0lxcXptYXE5L09uNVJydko0d2lkVHJBNm1hcnE1QkNMaU1C?=
 =?utf-8?B?NzkzbnVjcnRsVGZyaVVPNWRrWTVnUFdrckF0Q2NTVkJsdVF6b0VMU1pzUXF0?=
 =?utf-8?B?cGRtdm1PeTJWZWdpN0VwZWU4UE9VRTU0WjZtSHBiOXVUbS8zbm9VUTFER3FB?=
 =?utf-8?B?bDdHRWtqVFZUZFZDd0RwbExXNzlQa0RkUHBETFdyZGRwSEc5d2xnOEFDYnI2?=
 =?utf-8?B?S3U2cC81eWcwRmFxa0J2Vmw4bHZ1WHR3TENoamM3a2REYVRCc3hjcjRmWEgy?=
 =?utf-8?B?enVRaVdHTDdBaGtjYmdabmpSYndIMjJTb1lNbjBxak1OZURjSUZlTkVqdE5D?=
 =?utf-8?Q?8xPZakNI3NFPjEOwwI=3D?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DM6PR12MB3355.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 7a15f31f-0b2f-4996-d007-08d967654c44
X-MS-Exchange-CrossTenant-originalarrivaltime: 25 Aug 2021 01:11:41.7362 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: orayZHw5cEZ7Pl3COzN4KyM1Ze2RxNrybYQsmO0UhWqKwPpUHzZ2yGqYxjuLHSdA
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3067
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seV0NCg0KUmlnaHQsIHNvcnJ5LiAgVGhlc2Ugd2VyZSB0d28g
c2VwYXJhdGUgYnJhbmNoZXMgdW50aWwgY2hlY2twYXRjaCBjb21wbGFpbmVkIGFib3V0IHRoZSBu
ZXN0aW5nIGxldmVsLiAgVGhlbiBJIGJyb2tlIGl0Lg0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2Ut
LS0tLQ0KRnJvbTogS3VlaGxpbmcsIEZlbGl4IDxGZWxpeC5LdWVobGluZ0BhbWQuY29tPg0KU2Vu
dDogVHVlc2RheSwgQXVndXN0IDI0LCAyMDIxIDc6NTQgUE0NClRvOiBhbWQtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZzsgS2VlbHksIFNlYW4gPFNlYW4uS2VlbHlAYW1kLmNvbT4NClN1YmplY3Q6
IFJlOiBbUEFUQ0ggdjJdIGRybS9hbWRrZmQ6IEFjY291bnQgZm9yIFNIL1NFIGNvdW50IHdoZW4g
c2V0dGluZyB1cCBjdSBtYXNrcy4NCg0KQW0gMjAyMS0wOC0yMyB1bSA4OjM2IHAubS4gc2Nocmll
YiBTZWFuIEtlZWx5Og0KPiBPbiBzeXN0ZW1zIHdpdGggbXVsdGlwbGUgU0ggcGVyIFNFIGNvbXB1
dGVfc3RhdGljX3RocmVhZF9tZ210X3NlIw0KPiBpcyBzcGxpdCBpbnRvIGluZGVwZW5kZW50IG1h
c2tzLCBvbmUgZm9yIGVhY2ggU0gsIGluIHRoZSB1cHBlciBhbmQNCj4gbG93ZXIgMTYgYml0cy4g
IFdlIG5lZWQgdG8gZGV0ZWN0IHRoaXMgYW5kIGFwcGx5IGN1IG1hc2tpbmcgdG8gZWFjaA0KPiBT
SC4gIFRoZSBjdSBtYXNrIGJpdHMgYXJlIGFzc2lnbmVkIGZpcnN0IHRvIGVhY2ggU0UsIHRoZW4g
dG8NCj4gYWx0ZXJuYXRlIFNIcywgdGhlbiBmaW5hbGx5IHRvIGhpZ2hlciBDVSBpZC4gIFRoaXMg
ZW5zdXJlcyB0aGF0DQo+IHRoZSBtYXhpbXVtIG51bWJlciBvZiBTUElzIGFyZSBlbmdhZ2VkIGFz
IGVhcmx5IGFzIHBvc3NpYmxlIHdoaWxlDQo+IGJhbGFuY2luZyBDVSBhc3NpZ25tZW50IHRvIGVh
Y2ggU0guDQo+DQo+IHYyOiBVc2UgbWF4IFNIL1NFIHJhdGhlciB0aGFuIG1heCBTSCBpbiBjdV9w
ZXJfc2guDQo+DQo+IFNpZ25lZC1vZmYtYnk6IFNlYW4gS2VlbHkgPFNlYW4uS2VlbHlAYW1kLmNv
bT4NCj4gLS0tDQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfbXFkX21hbmFnZXIu
YyB8IDc5ICsrKysrKysrKysrKysrLS0tLS0tDQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtm
ZC9rZmRfbXFkX21hbmFnZXIuaCB8ICAxICsNCj4gIDIgZmlsZXMgY2hhbmdlZCwgNTkgaW5zZXJ0
aW9ucygrKSwgMjEgZGVsZXRpb25zKC0pDQo+DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGtmZC9rZmRfbXFkX21hbmFnZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
a2ZkL2tmZF9tcWRfbWFuYWdlci5jDQo+IGluZGV4IDg4ODEzZGFkNzMxZi4uNWQ3MDE2OTI4ZDI0
IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfbXFkX21hbmFn
ZXIuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfbXFkX21hbmFnZXIu
Yw0KPiBAQCAtOTgsMzYgKzk4LDczIEBAIHZvaWQgbXFkX3N5bW1ldHJpY2FsbHlfbWFwX2N1X21h
c2soc3RydWN0IG1xZF9tYW5hZ2VyICptbSwNCj4gICAgICAgICAgICAgICB1aW50MzJfdCAqc2Vf
bWFzaykNCj4gIHsNCj4gICAgICAgc3RydWN0IGtmZF9jdV9pbmZvIGN1X2luZm87DQo+IC0gICAg
IHVpbnQzMl90IGN1X3Blcl9zZVtLRkRfTUFYX05VTV9TRV0gPSB7MH07DQo+IC0gICAgIGludCBp
LCBzZSwgc2gsIGN1ID0gMDsNCj4gLQ0KPiArICAgICB1aW50MzJfdCBjdV9wZXJfc2hbS0ZEX01B
WF9OVU1fU0VdW0tGRF9NQVhfTlVNX1NIX1BFUl9TRV0gPSB7MH07DQo+ICsgICAgIGludCBpLCBz
ZSwgc2gsIGN1Ow0KPiAgICAgICBhbWRncHVfYW1ka2ZkX2dldF9jdV9pbmZvKG1tLT5kZXYtPmtn
ZCwgJmN1X2luZm8pOw0KPg0KPiAgICAgICBpZiAoY3VfbWFza19jb3VudCA+IGN1X2luZm8uY3Vf
YWN0aXZlX251bWJlcikNCj4gICAgICAgICAgICAgICBjdV9tYXNrX2NvdW50ID0gY3VfaW5mby5j
dV9hY3RpdmVfbnVtYmVyOw0KPg0KPiArICAgICAvLyBFeGNlZWRpbmcgdGhlc2UgYm91bmRzIGNv
cnJ1cHRzIHRoZSBzdGFjayBhbmQgaW5kaWNhdGVzIGEgY29kaW5nIGVycm9yLg0KPiArICAgICAv
LyBSZXR1cm5pbmcgd2l0aCBubyBDVSdzIGVuYWJsZWQgd2lsbCBoYW5nIHRoZSBxdWV1ZSwgd2hp
Y2ggc2hvdWxkIGJlDQo+ICsgICAgIC8vIGF0dGVudGlvbiBncmFiYmluZy4NCj4gKyAgICAgaWYg
KGN1X2luZm8ubnVtX3NoYWRlcl9lbmdpbmVzID4gS0ZEX01BWF9OVU1fU0UpIHsNCj4gKyAgICAg
ICAgICAgICBwcl9lcnIoIkV4Y2VlZGVkIEtGRF9NQVhfTlVNX1NFLCBjaGlwIHJlcG9ydHMgJWRc
biIsIGN1X2luZm8ubnVtX3NoYWRlcl9lbmdpbmVzKTsNCj4gKyAgICAgICAgICAgICByZXR1cm47
DQo+ICsgICAgIH0NCj4gKyAgICAgaWYgKGN1X2luZm8ubnVtX3NoYWRlcl9hcnJheXNfcGVyX2Vu
Z2luZSA+IEtGRF9NQVhfTlVNX1NIX1BFUl9TRSkgew0KPiArICAgICAgICAgICAgIHByX2Vycigi
RXhjZWVkZWQgS0ZEX01BWF9OVU1fU0gsIGNoaXAgcmVwb3J0cyAlZFxuIiwNCj4gKyAgICAgICAg
ICAgICAgICAgICAgIGN1X2luZm8ubnVtX3NoYWRlcl9hcnJheXNfcGVyX2VuZ2luZSAqIGN1X2lu
Zm8ubnVtX3NoYWRlcl9lbmdpbmVzKTsNCj4gKyAgICAgICAgICAgICByZXR1cm47DQo+ICsgICAg
IH0NCj4gKw0KPiArICAgICAvKiBDb3VudCBhY3RpdmUgQ1VzIHBlciBTSC4NCj4gKyAgICAgICoN
Cj4gKyAgICAgICogU29tZSBDVXMgaW4gYW4gU0ggbWF5IGJlIGRpc2FibGVkLiAgIEhXIGV4cGVj
dHMgZGlzYWJsZWQgQ1VzIHRvIGJlDQo+ICsgICAgICAqIHJlcHJlc2VudGVkIGluIHRoZSBoaWdo
IGJpdHMgb2YgZWFjaCBTSCdzIGVuYWJsZSBtYXNrICh0aGUgdXBwZXIgYW5kIGxvd2VyDQo+ICsg
ICAgICAqIDE2IGJpdHMgb2Ygc2VfbWFzaykgYW5kIHdpbGwgdGFrZSBjYXJlIG9mIHRoZSBhY3R1
YWwgZGlzdHJpYnV0aW9uIG9mDQo+ICsgICAgICAqIGRpc2FibGVkIENVcyB3aXRoaW4gZWFjaCBT
SCBhdXRvbWF0aWNhbGx5Lg0KPiArICAgICAgKiBFYWNoIGhhbGYgb2Ygc2VfbWFzayBtdXN0IGJl
IGZpbGxlZCBjb21wYWN0bHksIExTQiBmaXJzdC4NCj4gKyAgICAgICoNCj4gKyAgICAgICogU2Vl
IG5vdGUgb24gQXJjdHVydXMgY3VfYml0bWFwIGxheW91dCBpbiBnZnhfdjlfMF9nZXRfY3VfaW5m
by4NCj4gKyAgICAgICovDQo+ICAgICAgIGZvciAoc2UgPSAwOyBzZSA8IGN1X2luZm8ubnVtX3No
YWRlcl9lbmdpbmVzOyBzZSsrKQ0KPiAgICAgICAgICAgICAgIGZvciAoc2ggPSAwOyBzaCA8IGN1
X2luZm8ubnVtX3NoYWRlcl9hcnJheXNfcGVyX2VuZ2luZTsgc2grKykNCj4gLSAgICAgICAgICAg
ICAgICAgICAgIGN1X3Blcl9zZVtzZV0gKz0gaHdlaWdodDMyKGN1X2luZm8uY3VfYml0bWFwW3Nl
ICUgNF1bc2ggKyAoc2UgLyA0KV0pOw0KPiAtDQo+IC0gICAgIC8qIFN5bW1ldHJpY2FsbHkgbWFw
IGN1X21hc2sgdG8gYWxsIFNFczoNCj4gLSAgICAgICogY3VfbWFza1swXSBiaXQwIC0+IHNlX21h
c2tbMF0gYml0MDsNCj4gLSAgICAgICogY3VfbWFza1swXSBiaXQxIC0+IHNlX21hc2tbMV0gYml0
MDsNCj4gLSAgICAgICogLi4uIChpZiAjIFNFIGlzIDQpDQo+IC0gICAgICAqIGN1X21hc2tbMF0g
Yml0NCAtPiBzZV9tYXNrWzBdIGJpdDE7DQo+ICsgICAgICAgICAgICAgICAgICAgICBjdV9wZXJf
c2hbc2VdW3NoXSA9IGh3ZWlnaHQzMihjdV9pbmZvLmN1X2JpdG1hcFtzZSAlIDRdW3NoICsgKHNl
IC8gNCldKTsNCj4gKw0KPiArICAgICAvKiBTeW1tZXRyaWNhbGx5IG1hcCBjdV9tYXNrIHRvIGFs
bCBTRXMgJiBTSHM6DQo+ICsgICAgICAqIHNlX21hc2sgcHJvZ3JhbXMgdXAgdG8gMiBTSCBpbiB0
aGUgdXBwZXIgYW5kIGxvd2VyIDE2IGJpdHMuDQo+ICsgICAgICAqDQo+ICsgICAgICAqIEV4YW1w
bGVzDQo+ICsgICAgICAqIEFzc3VtaW5nIDEgU0gvU0UsIDQgU0VzOg0KPiArICAgICAgKiBjdV9t
YXNrWzBdIGJpdDAgLT4gc2VfbWFza1swXSBiaXQwDQo+ICsgICAgICAqIGN1X21hc2tbMF0gYml0
MSAtPiBzZV9tYXNrWzFdIGJpdDANCj4gKyAgICAgICogLi4uDQo+ICsgICAgICAqIGN1X21hc2tb
MF0gYml0NCAtPiBzZV9tYXNrWzBdIGJpdDENCj4gKyAgICAgICogLi4uDQo+ICsgICAgICAqDQo+
ICsgICAgICAqIEFzc3VtaW5nIDIgU0gvU0UsIDQgU0VzDQo+ICsgICAgICAqIGN1X21hc2tbMF0g
Yml0MCAtPiBzZV9tYXNrWzBdIGJpdDAgKFNFMCxTSDAsQ1UwKQ0KPiArICAgICAgKiBjdV9tYXNr
WzBdIGJpdDEgLT4gc2VfbWFza1sxXSBiaXQwIChTRTEsU0gwLENVMCkNCj4gKyAgICAgICogLi4u
DQo+ICsgICAgICAqIGN1X21hc2tbMF0gYml0NCAtPiBzZV9tYXNrWzBdIGJpdDE2IChTRTAsU0gx
LENVMCkNCj4gKyAgICAgICogY3VfbWFza1swXSBiaXQ1IC0+IHNlX21hc2tbMV0gYml0MTYgKFNF
MSxTSDEsQ1UwKQ0KPiArICAgICAgKiAuLi4NCj4gKyAgICAgICogY3VfbWFza1swXSBiaXQ4IC0+
IHNlX21hc2tbMF0gYml0MSAoU0UwLFNIMCxDVTEpDQo+ICAgICAgICAqIC4uLg0KPiAgICAgICAg
Ki8NCj4gLSAgICAgc2UgPSAwOw0KPiAtICAgICBmb3IgKGkgPSAwOyBpIDwgY3VfbWFza19jb3Vu
dDsgaSsrKSB7DQo+IC0gICAgICAgICAgICAgaWYgKGN1X21hc2tbaSAvIDMyXSAmICgxIDw8IChp
ICUgMzIpKSkNCj4gLSAgICAgICAgICAgICAgICAgICAgIHNlX21hc2tbc2VdIHw9IDEgPDwgY3U7
DQo+IC0NCj4gLSAgICAgICAgICAgICBkbyB7DQo+IC0gICAgICAgICAgICAgICAgICAgICBzZSsr
Ow0KPiAtICAgICAgICAgICAgICAgICAgICAgaWYgKHNlID09IGN1X2luZm8ubnVtX3NoYWRlcl9l
bmdpbmVzKSB7DQo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlID0gMDsNCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY3UrKzsNCj4gKyAgICAgaSA9IDA7DQo+ICsgICAg
IGZvciAoY3UgPSAwOyBjdSA8IDE2OyBjdSsrKSB7DQo+ICsgICAgICAgICAgICAgZm9yIChzaCA9
IDA7IHNoIDwgY3VfaW5mby5udW1fc2hhZGVyX2FycmF5c19wZXJfZW5naW5lOyBzaCsrKSB7DQo+
ICsgICAgICAgICAgICAgICAgICAgICBmb3IgKHNlID0gMDsgc2UgPCBjdV9pbmZvLm51bV9zaGFk
ZXJfZW5naW5lczsgc2UrKykgew0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo
KGN1X21hc2tbaSAvIDMyXSAmICgxIDw8IChpICUgMzIpKSkgJiYNCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAoY3VfcGVyX3NoW3NlXVtzaF0gPiBjdSkpIHsNCg0KWW91
IG5lZWQgdG8gaW5jcmVtZW50IGkgd2hlbiBjdV9tYXNrW2kvMzJdICYgKDEgPDwgKGkgJSAzMikp
IGlzIDAuDQpPdGhlcndpc2UgeW91J2xsIGdldCBzdHVjayBvbiBhbnkgMCBiaXQgaW4gdGhlIENV
IG1hc2suDQoNClJlZ2FyZHMsDQogIEZlbGl4DQoNCg0KPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlX21hc2tbc2VdIHw9IDEgPDwgKGN1ICsgc2ggKiAxNik7DQo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IGN1X21hc2tfY291bnQpDQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIH0NCj4gICAgICAgICAgICAgICAgICAgICAgIH0NCj4g
LSAgICAgICAgICAgICB9IHdoaWxlIChjdSA+PSBjdV9wZXJfc2Vbc2VdICYmIGN1IDwgMzIpOw0K
PiArICAgICAgICAgICAgIH0NCj4gICAgICAgfQ0KPiAgfQ0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX21xZF9tYW5hZ2VyLmggYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGtmZC9rZmRfbXFkX21hbmFnZXIuaA0KPiBpbmRleCBiNWUyZWE3NTUwZDQuLjZlNjkx
OGNjZWRmZCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX21x
ZF9tYW5hZ2VyLmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX21xZF9t
YW5hZ2VyLmgNCj4gQEAgLTI3LDYgKzI3LDcgQEANCj4gICNpbmNsdWRlICJrZmRfcHJpdi5oIg0K
Pg0KPiAgI2RlZmluZSBLRkRfTUFYX05VTV9TRSA4DQo+ICsjZGVmaW5lIEtGRF9NQVhfTlVNX1NI
X1BFUl9TRSAyDQo+DQo+ICAvKioNCj4gICAqIHN0cnVjdCBtcWRfbWFuYWdlcg0K
