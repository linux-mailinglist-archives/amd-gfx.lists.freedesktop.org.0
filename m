Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2B4BC48F96
	for <lists+amd-gfx@lfdr.de>; Mon, 17 Jun 2019 21:32:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 97B0589D5C;
	Mon, 17 Jun 2019 19:32:40 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x842.google.com (mail-qt1-x842.google.com
 [IPv6:2607:f8b0:4864:20::842])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DF0C889D52
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 19:32:36 +0000 (UTC)
Received: by mail-qt1-x842.google.com with SMTP id d17so7280570qtj.8
 for <amd-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 12:32:36 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=mYflthVQoyw2tx24/3ANuBKpD0bHhkaQKKRSN+9OdFQ=;
 b=klbAyY83tJj4UbvSBskEynMu1eV6IxaKKMS0TMqkeruBq1Gtyacs2UXAZvKOo/DdJR
 dVcLzr3+SccTWCOCgTgRVnia2bXEGYFtJUbIESj/IbUdz0AaiDdB907HjIxoc069s/1F
 0syFgnAS4w/ZnUWOXJMLNcSzER7u+0H29ALVQCkuoFBGDWsPQMqUYtHV34Hu/30Td3vU
 pnDN1d64PDwk0Yr8JO7XFqgB832rzSqMIOh0GqcP4jG07xZcnygGaDMXvd6l8ree8nrf
 4YGEHeTetvzJdDOq8Hi/N/IzMJu104IeCxMeKaML7TCFbe5dZTXz5+1h8QXbKN94U1tc
 6TXQ==
X-Gm-Message-State: APjAAAVHhnfu5Qw7pjAtNw/aKqaUS5D53lPWNlm+QoOrdBggNOsrYvrW
 o1dMN8a+cNbbOVmZFGCObndqG8bEhFY=
X-Google-Smtp-Source: APXvYqwT1TKmwXlzrroC5x7X0pF4IAEb7R0BUoZJyzn/WFmnvnxzXa4wMQgWu6wWZqs1WayN/lMVbA==
X-Received: by 2002:ac8:1010:: with SMTP id z16mr85002590qti.367.1560799955004; 
 Mon, 17 Jun 2019 12:32:35 -0700 (PDT)
Received: from localhost.localdomain ([71.219.5.136])
 by smtp.gmail.com with ESMTPSA id u2sm7474875qtj.97.2019.06.17.12.32.33
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 12:32:34 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 290/459] drm/amdgpu/VCN2.0: add DPG mode start and stop (v2)
Date: Mon, 17 Jun 2019 14:30:57 -0500
Message-Id: <20190617193106.18231-91-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617193106.18231-1-alexander.deucher@amd.com>
References: <20190617193106.18231-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=mYflthVQoyw2tx24/3ANuBKpD0bHhkaQKKRSN+9OdFQ=;
 b=Fr/K4yYv1Z4+CoWq0CkqrS+44BBDGk6PY8lIMi35WsqhegK/FmSG+D0k6PKGW3/jPo
 3Bynk+87Cmv7f2p+u/7yHnF/8NJjXhotlBs0OJsbXAa9aWboNEfmef4kMCPjhDEIY0IR
 ibUP2STpiaJsa/iGtMbLWT+WgL0KWLwbst5iuqMquFf5UjGlup2F4pMv30W7s+GjFHxK
 uHktq0jwm3xqt+FyY7AAxlBPMSyXZK9pSHkNtunzMx3QickJZxastRNoajbNlgrK3Rsx
 ReDT35maQuVk7YTL+mVz1ECow/JRaXip047yopeeW7tqooRrhd4mTlR5eG9AWseOaZl9
 G1qA==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>, James Zhu <James.Zhu@amd.com>,
 Leo Liu <leo.liu@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogTGVvIExpdSA8bGVvLmxpdUBhbWQuY29tPgoKVGhpcyBpcyBmb3IgdXNpbmcgU1JBTSBk
aXJlY3RseQoKdjI6IHJlYmFzZSAoQWxleCkKClNpZ25lZC1vZmYtYnk6IExlbyBMaXUgPGxlby5s
aXVAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJA
YW1kLmNvbT4KUmV2aWV3ZWQtYnk6IEphbWVzIFpodSA8SmFtZXMuWmh1QGFtZC5jb20+ClNpZ25l
ZC1vZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNvbT4KLS0tCiBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92Y25fdjJfMC5jIHwgMjk5ICsrKysrKysrKysrKysr
KysrKysrKysrKystCiAxIGZpbGUgY2hhbmdlZCwgMjk2IGluc2VydGlvbnMoKyksIDMgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmNuX3YyXzAu
YyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3Zjbl92Ml8wLmMKaW5kZXggNTc4MmY3OWRi
ZTA0Li4zMDY4YjA4NzBjOGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L3Zjbl92Ml8wLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmNuX3YyXzAuYwpA
QCAtNjYsNiArNjYsMTEgQEAKIAogI2RlZmluZSBKUkJDX0RFQ19FWFRFUk5BTF9SRUdfV1JJVEVf
QUREUgkJCQkweDE4MDAwCiAKKyNkZWZpbmUgbW1VVkRfUkJDX1hYX0lCX1JFR19DSEVDSyAJCQkJ
CTB4MDI2YgorI2RlZmluZSBtbVVWRF9SQkNfWFhfSUJfUkVHX0NIRUNLX0JBU0VfSURYIAkJCQkx
CisjZGVmaW5lIG1tVVZEX1JFR19YWF9NQVNLIAkJCQkJCTB4MDI2YworI2RlZmluZSBtbVVWRF9S
RUdfWFhfTUFTS19CQVNFX0lEWCAJCQkJCTEKKwogc3RhdGljIHZvaWQgdmNuX3YyXzBfc2V0X2Rl
Y19yaW5nX2Z1bmNzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIHN0YXRpYyB2b2lkIHZj
bl92Ml8wX3NldF9lbmNfcmluZ19mdW5jcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7CiBz
dGF0aWMgdm9pZCB2Y25fdjJfMF9zZXRfanBlZ19yaW5nX2Z1bmNzKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KTsKQEAgLTI1Nyw3ICsyNjIsOCBAQCBzdGF0aWMgaW50IHZjbl92Ml8wX2h3X2lu
aXQodm9pZCAqaGFuZGxlKQogCiBkb25lOgogCWlmICghcikKLQkJRFJNX0lORk8oIlZDTiBkZWNv
ZGUgYW5kIGVuY29kZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHkuXG4iKTsKKwkJRFJNX0lORk8o
IlZDTiBkZWNvZGUgYW5kIGVuY29kZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHkodW5kZXIgJXMp
LlxuIiwKKwkJCShhZGV2LT5wZ19mbGFncyAmIEFNRF9QR19TVVBQT1JUX1ZDTl9EUEcpPyJEUEcg
TW9kZSI6IlNQRyBNb2RlIik7CiAKIAlyZXR1cm4gcjsKIH0KQEAgLTI3NSw4ICsyODEsOSBAQCBz
dGF0aWMgaW50IHZjbl92Ml8wX2h3X2Zpbmkodm9pZCAqaGFuZGxlKQogCXN0cnVjdCBhbWRncHVf
cmluZyAqcmluZyA9ICZhZGV2LT52Y24ucmluZ19kZWM7CiAJaW50IGk7CiAKLQlpZiAoYWRldi0+
dmNuLmN1cl9zdGF0ZSAhPSBBTURfUEdfU1RBVEVfR0FURSAmJgotCSAgICBSUkVHMzJfU09DMTUo
VkNOLCAwLCBtbVVWRF9TVEFUVVMpKQorCWlmICgoYWRldi0+cGdfZmxhZ3MgJiBBTURfUEdfU1VQ
UE9SVF9WQ05fRFBHKSB8fAorCSAgICAoYWRldi0+dmNuLmN1cl9zdGF0ZSAhPSBBTURfUEdfU1RB
VEVfR0FURSAmJgorCSAgICAgIFJSRUczMl9TT0MxNShWQ04sIDAsIG1tVVZEX1NUQVRVUykpKQog
CQl2Y25fdjJfMF9zZXRfcG93ZXJnYXRpbmdfc3RhdGUoYWRldiwgQU1EX1BHX1NUQVRFX0dBVEUp
OwogCiAJcmluZy0+c2NoZWQucmVhZHkgPSBmYWxzZTsKQEAgLTM4OSw2ICszOTYsNzcgQEAgc3Rh
dGljIHZvaWQgdmNuX3YyXzBfbWNfcmVzdW1lKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQog
CVdSRUczMl9TT0MxNShVVkQsIDAsIG1tSlBFR19ERUNfR0ZYMTBfQUREUl9DT05GSUcsIGFkZXYt
PmdmeC5jb25maWcuZ2JfYWRkcl9jb25maWcpOwogfQogCitzdGF0aWMgdm9pZCB2Y25fdjJfMF9t
Y19yZXN1bWVfZHBnX21vZGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIGJvb2wgaW5kaXJl
Y3QpCit7CisJdWludDMyX3Qgc2l6ZSA9IEFNREdQVV9HUFVfUEFHRV9BTElHTihhZGV2LT52Y24u
ZnctPnNpemUgKyA0KTsKKwl1aW50MzJfdCBvZmZzZXQ7CisKKwkvKiBjYWNoZSB3aW5kb3cgMDog
ZncgKi8KKwlpZiAoYWRldi0+ZmlybXdhcmUubG9hZF90eXBlID09IEFNREdQVV9GV19MT0FEX1BT
UCkgeworCQlXUkVHMzJfU09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8y
XzAoCisJCQlVVkQsIDAsIG1tVVZEX0xNSV9WQ1BVX0NBQ0hFXzY0QklUX0JBUl9MT1cpLAorCQkJ
KGFkZXYtPmZpcm13YXJlLnVjb2RlW0FNREdQVV9VQ09ERV9JRF9WQ05dLnRtcl9tY19hZGRyX2xv
KSwgMCwgaW5kaXJlY3QpOworCQlXUkVHMzJfU09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19N
T0RFX09GRlNFVF8yXzAoCisJCQlVVkQsIDAsIG1tVVZEX0xNSV9WQ1BVX0NBQ0hFXzY0QklUX0JB
Ul9ISUdIKSwKKwkJCShhZGV2LT5maXJtd2FyZS51Y29kZVtBTURHUFVfVUNPREVfSURfVkNOXS50
bXJfbWNfYWRkcl9oaSksIDAsIGluZGlyZWN0KTsKKwkJV1JFRzMyX1NPQzE1X0RQR19NT0RFXzJf
MChTT0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8wKAorCQkJVVZELCAwLCBtbVVWRF9WQ1BVX0NBQ0hF
X09GRlNFVDApLCAwLCAwLCBpbmRpcmVjdCk7CisJCW9mZnNldCA9IDA7CisJfSBlbHNlIHsKKwkJ
V1JFRzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8wKAorCQkJ
VVZELCAwLCBtbVVWRF9MTUlfVkNQVV9DQUNIRV82NEJJVF9CQVJfTE9XKSwKKwkJCWxvd2VyXzMy
X2JpdHMoYWRldi0+dmNuLmdwdV9hZGRyKSwgMCwgaW5kaXJlY3QpOworCQlXUkVHMzJfU09DMTVf
RFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCQlVVkQsIDAsIG1tVVZE
X0xNSV9WQ1BVX0NBQ0hFXzY0QklUX0JBUl9ISUdIKSwKKwkJCXVwcGVyXzMyX2JpdHMoYWRldi0+
dmNuLmdwdV9hZGRyKSwgMCwgaW5kaXJlY3QpOworCQlvZmZzZXQgPSBzaXplOworCQlXUkVHMzJf
U09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCQlVVkQsIDAs
IG1tVVZEX1ZDUFVfQ0FDSEVfT0ZGU0VUMCksCisJCQlBTURHUFVfVVZEX0ZJUk1XQVJFX09GRlNF
VCA+PiAzLCAwLCBpbmRpcmVjdCk7CisJfQorCisJV1JFRzMyX1NPQzE1X0RQR19NT0RFXzJfMChT
T0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8wKAorCQlVVkQsIDAsIG1tVVZEX1ZDUFVfQ0FDSEVfU0la
RTApLCBzaXplLCAwLCBpbmRpcmVjdCk7CisKKwkvKiBjYWNoZSB3aW5kb3cgMTogc3RhY2sgKi8K
KwlXUkVHMzJfU09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJ
CVVWRCwgMCwgbW1VVkRfTE1JX1ZDUFVfQ0FDSEUxXzY0QklUX0JBUl9MT1cpLAorCQlsb3dlcl8z
Ml9iaXRzKGFkZXYtPnZjbi5ncHVfYWRkciArIG9mZnNldCksIDAsIGluZGlyZWN0KTsKKwlXUkVH
MzJfU09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwg
MCwgbW1VVkRfTE1JX1ZDUFVfQ0FDSEUxXzY0QklUX0JBUl9ISUdIKSwKKwkJdXBwZXJfMzJfYml0
cyhhZGV2LT52Y24uZ3B1X2FkZHIgKyBvZmZzZXQpLCAwLCBpbmRpcmVjdCk7CisJV1JFRzMyX1NP
QzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8wKAorCQlVVkQsIDAsIG1t
VVZEX1ZDUFVfQ0FDSEVfT0ZGU0VUMSksIDAsIDAsIGluZGlyZWN0KTsKKwlXUkVHMzJfU09DMTVf
RFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwgMCwgbW1VVkRf
VkNQVV9DQUNIRV9TSVpFMSksIEFNREdQVV9WQ05fU1RBQ0tfU0laRSwgMCwgaW5kaXJlY3QpOwor
CisJLyogY2FjaGUgd2luZG93IDI6IGNvbnRleHQgKi8KKwlXUkVHMzJfU09DMTVfRFBHX01PREVf
Ml8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwgMCwgbW1VVkRfTE1JX1ZDUFVf
Q0FDSEUyXzY0QklUX0JBUl9MT1cpLAorCQlsb3dlcl8zMl9iaXRzKGFkZXYtPnZjbi5ncHVfYWRk
ciArIG9mZnNldCArIEFNREdQVV9WQ05fU1RBQ0tfU0laRSksIDAsIGluZGlyZWN0KTsKKwlXUkVH
MzJfU09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwg
MCwgbW1VVkRfTE1JX1ZDUFVfQ0FDSEUyXzY0QklUX0JBUl9ISUdIKSwKKwkJdXBwZXJfMzJfYml0
cyhhZGV2LT52Y24uZ3B1X2FkZHIgKyBvZmZzZXQgKyBBTURHUFVfVkNOX1NUQUNLX1NJWkUpLCAw
LCBpbmRpcmVjdCk7CisJV1JFRzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9ERV9P
RkZTRVRfMl8wKAorCQlVVkQsIDAsIG1tVVZEX1ZDUFVfQ0FDSEVfT0ZGU0VUMiksIDAsIDAsIGlu
ZGlyZWN0KTsKKwlXUkVHMzJfU09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNF
VF8yXzAoCisJCVVWRCwgMCwgbW1VVkRfVkNQVV9DQUNIRV9TSVpFMiksIEFNREdQVV9WQ05fQ09O
VEVYVF9TSVpFLCAwLCBpbmRpcmVjdCk7CisKKwkvKiBub24tY2FjaGUgd2luZG93ICovCisJV1JF
RzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8wKAorCQlVVkQs
IDAsIG1tVVZEX0xNSV9WQ1BVX05DMF82NEJJVF9CQVJfTE9XKSwgMCwgMCwgaW5kaXJlY3QpOwor
CVdSRUczMl9TT0MxNV9EUEdfTU9ERV8yXzAoU09DMTVfRFBHX01PREVfT0ZGU0VUXzJfMCgKKwkJ
VVZELCAwLCBtbVVWRF9MTUlfVkNQVV9OQzBfNjRCSVRfQkFSX0hJR0gpLCAwLCAwLCBpbmRpcmVj
dCk7CisJV1JFRzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8w
KAorCQlVVkQsIDAsIG1tVVZEX1ZDUFVfTk9OQ0FDSEVfT0ZGU0VUMCksIDAsIDAsIGluZGlyZWN0
KTsKKwlXUkVHMzJfU09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAo
CisJCVVWRCwgMCwgbW1VVkRfVkNQVV9OT05DQUNIRV9TSVpFMCksIDAsIDAsIGluZGlyZWN0KTsK
KworCS8qIFZDTiBnbG9iYWwgdGlsaW5nIHJlZ2lzdGVycyAqLworCVdSRUczMl9TT0MxNV9EUEdf
TU9ERV8yXzAoU09DMTVfRFBHX01PREVfT0ZGU0VUXzJfMCgKKwkJVVZELCAwLCBtbVVWRF9HRlgx
MF9BRERSX0NPTkZJRyksIGFkZXYtPmdmeC5jb25maWcuZ2JfYWRkcl9jb25maWcsIDAsIGluZGly
ZWN0KTsKK30KKwogLyoqCiAgKiB2Y25fdjJfMF9kaXNhYmxlX2Nsb2NrX2dhdGluZyAtIGRpc2Fi
bGUgVkNOIGNsb2NrIGdhdGluZwogICoKQEAgLTQ5OSw2ICs1NzcsNTQgQEAgc3RhdGljIHZvaWQg
dmNuX3YyXzBfZGlzYWJsZV9jbG9ja19nYXRpbmcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
CiAJV1JFRzMyX1NPQzE1KFZDTiwgMCwgbW1VVkRfU1VWRF9DR0NfQ1RSTCwgZGF0YSk7CiB9CiAK
K3N0YXRpYyB2b2lkIHZjbl92Ml8wX2Nsb2NrX2dhdGluZ19kcGdfbW9kZShzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiwKKwkJdWludDhfdCBzcmFtX3NlbCwgdWludDhfdCBpbmRpcmVjdCkKK3sK
Kwl1aW50MzJfdCByZWdfZGF0YSA9IDA7CisKKwkvKiBlbmFibGUgc3cgY2xvY2sgZ2F0aW5nIGNv
bnRyb2wgKi8KKwlpZiAoYWRldi0+Y2dfZmxhZ3MgJiBBTURfQ0dfU1VQUE9SVF9WQ05fTUdDRykK
KwkJcmVnX2RhdGEgPSAxIDw8IFVWRF9DR0NfQ1RSTF9fRFlOX0NMT0NLX01PREVfX1NISUZUOwor
CWVsc2UKKwkJcmVnX2RhdGEgPSAwIDw8IFVWRF9DR0NfQ1RSTF9fRFlOX0NMT0NLX01PREVfX1NI
SUZUOworCXJlZ19kYXRhIHw9IDEgPDwgVVZEX0NHQ19DVFJMX19DTEtfR0FURV9ETFlfVElNRVJf
X1NISUZUOworCXJlZ19kYXRhIHw9IDQgPDwgVVZEX0NHQ19DVFJMX19DTEtfT0ZGX0RFTEFZX19T
SElGVDsKKwlyZWdfZGF0YSAmPSB+KFVWRF9DR0NfQ1RSTF9fVURFQ19SRV9NT0RFX01BU0sgfAor
CQkgVVZEX0NHQ19DVFJMX19VREVDX0NNX01PREVfTUFTSyB8CisJCSBVVkRfQ0dDX0NUUkxfX1VE
RUNfSVRfTU9ERV9NQVNLIHwKKwkJIFVWRF9DR0NfQ1RSTF9fVURFQ19EQl9NT0RFX01BU0sgfAor
CQkgVVZEX0NHQ19DVFJMX19VREVDX01QX01PREVfTUFTSyB8CisJCSBVVkRfQ0dDX0NUUkxfX1NZ
U19NT0RFX01BU0sgfAorCQkgVVZEX0NHQ19DVFJMX19VREVDX01PREVfTUFTSyB8CisJCSBVVkRf
Q0dDX0NUUkxfX01QRUcyX01PREVfTUFTSyB8CisJCSBVVkRfQ0dDX0NUUkxfX1JFR1NfTU9ERV9N
QVNLIHwKKwkJIFVWRF9DR0NfQ1RSTF9fUkJDX01PREVfTUFTSyB8CisJCSBVVkRfQ0dDX0NUUkxf
X0xNSV9NQ19NT0RFX01BU0sgfAorCQkgVVZEX0NHQ19DVFJMX19MTUlfVU1DX01PREVfTUFTSyB8
CisJCSBVVkRfQ0dDX0NUUkxfX0lEQ1RfTU9ERV9NQVNLIHwKKwkJIFVWRF9DR0NfQ1RSTF9fTVBS
RF9NT0RFX01BU0sgfAorCQkgVVZEX0NHQ19DVFJMX19NUENfTU9ERV9NQVNLIHwKKwkJIFVWRF9D
R0NfQ1RSTF9fTEJTSV9NT0RFX01BU0sgfAorCQkgVVZEX0NHQ19DVFJMX19MUkJCTV9NT0RFX01B
U0sgfAorCQkgVVZEX0NHQ19DVFJMX19XQ0JfTU9ERV9NQVNLIHwKKwkJIFVWRF9DR0NfQ1RSTF9f
VkNQVV9NT0RFX01BU0sgfAorCQkgVVZEX0NHQ19DVFJMX19TQ1BVX01PREVfTUFTSyk7CisJV1JF
RzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8wKAorCQlVVkQs
IDAsIG1tVVZEX0NHQ19DVFJMKSwgcmVnX2RhdGEsIHNyYW1fc2VsLCBpbmRpcmVjdCk7CisKKwkv
KiB0dXJuIG9mZiBjbG9jayBnYXRpbmcgKi8KKwlXUkVHMzJfU09DMTVfRFBHX01PREVfMl8wKFNP
QzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwgMCwgbW1VVkRfQ0dDX0dBVEUpLCAwLCBz
cmFtX3NlbCwgaW5kaXJlY3QpOworCisJLyogdHVybiBvbiBTVVZEIGNsb2NrIGdhdGluZyAqLwor
CVdSRUczMl9TT0MxNV9EUEdfTU9ERV8yXzAoU09DMTVfRFBHX01PREVfT0ZGU0VUXzJfMCgKKwkJ
VVZELCAwLCBtbVVWRF9TVVZEX0NHQ19HQVRFKSwgMSwgc3JhbV9zZWwsIGluZGlyZWN0KTsKKwor
CS8qIHR1cm4gb24gc3cgbW9kZSBpbiBVVkRfU1VWRF9DR0NfQ1RSTCAqLworCVdSRUczMl9TT0Mx
NV9EUEdfTU9ERV8yXzAoU09DMTVfRFBHX01PREVfT0ZGU0VUXzJfMCgKKwkJVVZELCAwLCBtbVVW
RF9TVVZEX0NHQ19DVFJMKSwgMCwgc3JhbV9zZWwsIGluZGlyZWN0KTsKK30KKwogLyoqCiAgKiBq
cGVnX3YyXzBfc3RhcnQgLSBzdGFydCBKUEVHIGJsb2NrCiAgKgpAQCAtNzY4LDYgKzg5NCwxMjQg
QEAgc3RhdGljIHZvaWQgdmNuX3YyXzBfZW5hYmxlX3N0YXRpY19wb3dlcl9nYXRpbmcoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJfQogfQogCitzdGF0aWMgaW50IHZjbl92Ml8wX3N0YXJ0
X2RwZ19tb2RlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBib29sIGluZGlyZWN0KQorewor
CXN0cnVjdCBhbWRncHVfcmluZyAqcmluZyA9ICZhZGV2LT52Y24ucmluZ19kZWM7CisJdWludDMy
X3QgcmJfYnVmc3osIHRtcDsKKworCXZjbl92Ml8wX2VuYWJsZV9zdGF0aWNfcG93ZXJfZ2F0aW5n
KGFkZXYpOworCisJLyogZW5hYmxlIGR5bmFtaWMgcG93ZXIgZ2F0aW5nIG1vZGUgKi8KKwl0bXAg
PSBSUkVHMzJfU09DMTUoVVZELCAwLCBtbVVWRF9QT1dFUl9TVEFUVVMpOworCXRtcCB8PSBVVkRf
UE9XRVJfU1RBVFVTX19VVkRfUEdfTU9ERV9NQVNLOworCXRtcCB8PSBVVkRfUE9XRVJfU1RBVFVT
X19VVkRfUEdfRU5fTUFTSzsKKwlXUkVHMzJfU09DMTUoVVZELCAwLCBtbVVWRF9QT1dFUl9TVEFU
VVMsIHRtcCk7CisKKwkvKiBlbmFibGUgY2xvY2sgZ2F0aW5nICovCisJdmNuX3YyXzBfY2xvY2tf
Z2F0aW5nX2RwZ19tb2RlKGFkZXYsIDAsIGluZGlyZWN0KTsKKworCS8qIGVuYWJsZSBWQ1BVIGNs
b2NrICovCisJdG1wID0gKDB4RkYgPDwgVVZEX1ZDUFVfQ05UTF9fUFJCX1RJTUVPVVRfVkFMX19T
SElGVCk7CisJdG1wIHw9IFVWRF9WQ1BVX0NOVExfX0NMS19FTl9NQVNLOworCXRtcCB8PSBVVkRf
VkNQVV9DTlRMX19NSUZfV1JfTE9XX1RIUkVTSE9MRF9CUF9NQVNLOworCVdSRUczMl9TT0MxNV9E
UEdfTU9ERV8yXzAoU09DMTVfRFBHX01PREVfT0ZGU0VUXzJfMCgKKwkJVVZELCAwLCBtbVVWRF9W
Q1BVX0NOVEwpLCB0bXAsIDAsIGluZGlyZWN0KTsKKworCS8qIGRpc2FibGUgbWFzdGVyIGludGVy
dXB0ICovCisJV1JFRzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9ERV9PRkZTRVRf
Ml8wKAorCQlVVkQsIDAsIG1tVVZEX01BU1RJTlRfRU4pLCAwLCAwLCBpbmRpcmVjdCk7CisKKwkv
KiBzZXR1cCBtbVVWRF9MTUlfQ1RSTCAqLworCXRtcCA9IChVVkRfTE1JX0NUUkxfX1dSSVRFX0NM
RUFOX1RJTUVSX0VOX01BU0sgfAorCQlVVkRfTE1JX0NUUkxfX1JFUV9NT0RFX01BU0sgfAorCQlV
VkRfTE1JX0NUUkxfX0NSQ19SRVNFVF9NQVNLIHwKKwkJVVZEX0xNSV9DVFJMX19NQVNLX01DX1VS
R0VOVF9NQVNLIHwKKwkJVVZEX0xNSV9DVFJMX19EQVRBX0NPSEVSRU5DWV9FTl9NQVNLIHwKKwkJ
VVZEX0xNSV9DVFJMX19WQ1BVX0RBVEFfQ09IRVJFTkNZX0VOX01BU0sgfAorCQkoOCA8PCBVVkRf
TE1JX0NUUkxfX1dSSVRFX0NMRUFOX1RJTUVSX19TSElGVCkgfAorCQkweDAwMTAwMDAwTCk7CisJ
V1JFRzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8wKAorCQlV
VkQsIDAsIG1tVVZEX0xNSV9DVFJMKSwgdG1wLCAwLCBpbmRpcmVjdCk7CisKKwlXUkVHMzJfU09D
MTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwgMCwgbW1V
VkRfTVBDX0NOVEwpLAorCQkweDIgPDwgVVZEX01QQ19DTlRMX19SRVBMQUNFTUVOVF9NT0RFX19T
SElGVCwgMCwgaW5kaXJlY3QpOworCisJV1JFRzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9E
UEdfTU9ERV9PRkZTRVRfMl8wKAorCQlVVkQsIDAsIG1tVVZEX01QQ19TRVRfTVVYQTApLAorCQko
KDB4MSA8PCBVVkRfTVBDX1NFVF9NVVhBMF9fVkFSQV8xX19TSElGVCkgfAorCQkgKDB4MiA8PCBV
VkRfTVBDX1NFVF9NVVhBMF9fVkFSQV8yX19TSElGVCkgfAorCQkgKDB4MyA8PCBVVkRfTVBDX1NF
VF9NVVhBMF9fVkFSQV8zX19TSElGVCkgfAorCQkgKDB4NCA8PCBVVkRfTVBDX1NFVF9NVVhBMF9f
VkFSQV80X19TSElGVCkpLCAwLCBpbmRpcmVjdCk7CisKKwlXUkVHMzJfU09DMTVfRFBHX01PREVf
Ml8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwgMCwgbW1VVkRfTVBDX1NFVF9N
VVhCMCksCisJCSgoMHgxIDw8IFVWRF9NUENfU0VUX01VWEIwX19WQVJCXzFfX1NISUZUKSB8CisJ
CSAoMHgyIDw8IFVWRF9NUENfU0VUX01VWEIwX19WQVJCXzJfX1NISUZUKSB8CisJCSAoMHgzIDw8
IFVWRF9NUENfU0VUX01VWEIwX19WQVJCXzNfX1NISUZUKSB8CisJCSAoMHg0IDw8IFVWRF9NUENf
U0VUX01VWEIwX19WQVJCXzRfX1NISUZUKSksIDAsIGluZGlyZWN0KTsKKworCVdSRUczMl9TT0Mx
NV9EUEdfTU9ERV8yXzAoU09DMTVfRFBHX01PREVfT0ZGU0VUXzJfMCgKKwkJVVZELCAwLCBtbVVW
RF9NUENfU0VUX01VWCksCisJCSgoMHgwIDw8IFVWRF9NUENfU0VUX01VWF9fU0VUXzBfX1NISUZU
KSB8CisJCSAoMHgxIDw8IFVWRF9NUENfU0VUX01VWF9fU0VUXzFfX1NISUZUKSB8CisJCSAoMHgy
IDw8IFVWRF9NUENfU0VUX01VWF9fU0VUXzJfX1NISUZUKSksIDAsIGluZGlyZWN0KTsKKworCXZj
bl92Ml8wX21jX3Jlc3VtZV9kcGdfbW9kZShhZGV2LCBpbmRpcmVjdCk7CisKKwlXUkVHMzJfU09D
MTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwgMCwgbW1V
VkRfUkVHX1hYX01BU0spLCAweDEwLCAwLCBpbmRpcmVjdCk7CisJV1JFRzMyX1NPQzE1X0RQR19N
T0RFXzJfMChTT0MxNV9EUEdfTU9ERV9PRkZTRVRfMl8wKAorCQlVVkQsIDAsIG1tVVZEX1JCQ19Y
WF9JQl9SRUdfQ0hFQ0spLCAweDMsIDAsIGluZGlyZWN0KTsKKworCS8qIHJlbGVhc2UgVkNQVSBy
ZXNldCB0byBib290ICovCisJV1JFRzMyX1NPQzE1X0RQR19NT0RFXzJfMChTT0MxNV9EUEdfTU9E
RV9PRkZTRVRfMl8wKAorCQlVVkQsIDAsIG1tVVZEX1NPRlRfUkVTRVQpLCAwLCAwLCBpbmRpcmVj
dCk7CisKKwkvKiBlbmFibGUgTE1JIE1DIGFuZCBVTUMgY2hhbm5lbHMgKi8KKwlXUkVHMzJfU09D
MTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8yXzAoCisJCVVWRCwgMCwgbW1V
VkRfTE1JX0NUUkwyKSwKKwkJMHgxRiA8PCBVVkRfTE1JX0NUUkwyX19SRV9PRkxEX01JRl9XUl9S
RVFfTlVNX19TSElGVCwgMCwgaW5kaXJlY3QpOworCisJLyogZW5hYmxlIG1hc3RlciBpbnRlcnJ1
cHQgKi8KKwlXUkVHMzJfU09DMTVfRFBHX01PREVfMl8wKFNPQzE1X0RQR19NT0RFX09GRlNFVF8y
XzAoCisJCVVWRCwgMCwgbW1VVkRfTUFTVElOVF9FTiksCisJCVVWRF9NQVNUSU5UX0VOX19WQ1BV
X0VOX01BU0ssIDAsIGluZGlyZWN0KTsKKworCS8qIGZvcmNlIFJCQyBpbnRvIGlkbGUgc3RhdGUg
Ki8KKwlyYl9idWZzeiA9IG9yZGVyX2Jhc2VfMihyaW5nLT5yaW5nX3NpemUpOworCXRtcCA9IFJF
R19TRVRfRklFTEQoMCwgVVZEX1JCQ19SQl9DTlRMLCBSQl9CVUZTWiwgcmJfYnVmc3opOworCXRt
cCA9IFJFR19TRVRfRklFTEQodG1wLCBVVkRfUkJDX1JCX0NOVEwsIFJCX0JMS1NaLCAxKTsKKwl0
bXAgPSBSRUdfU0VUX0ZJRUxEKHRtcCwgVVZEX1JCQ19SQl9DTlRMLCBSQl9OT19GRVRDSCwgMSk7
CisJdG1wID0gUkVHX1NFVF9GSUVMRCh0bXAsIFVWRF9SQkNfUkJfQ05UTCwgUkJfTk9fVVBEQVRF
LCAxKTsKKwl0bXAgPSBSRUdfU0VUX0ZJRUxEKHRtcCwgVVZEX1JCQ19SQl9DTlRMLCBSQl9SUFRS
X1dSX0VOLCAxKTsKKwlXUkVHMzJfU09DMTUoVVZELCAwLCBtbVVWRF9SQkNfUkJfQ05UTCwgdG1w
KTsKKworCS8qIHNldCB0aGUgd3JpdGUgcG9pbnRlciBkZWxheSAqLworCVdSRUczMl9TT0MxNShV
VkQsIDAsIG1tVVZEX1JCQ19SQl9XUFRSX0NOVEwsIDApOworCisJLyogc2V0IHRoZSB3YiBhZGRy
ZXNzICovCisJV1JFRzMyX1NPQzE1KFVWRCwgMCwgbW1VVkRfUkJDX1JCX1JQVFJfQUREUiwKKwkJ
KHVwcGVyXzMyX2JpdHMocmluZy0+Z3B1X2FkZHIpID4+IDIpKTsKKworCS8qIHByb2dyYW1tIHRo
ZSBSQl9CQVNFIGZvciByaW5nIGJ1ZmZlciAqLworCVdSRUczMl9TT0MxNShVVkQsIDAsIG1tVVZE
X0xNSV9SQkNfUkJfNjRCSVRfQkFSX0xPVywKKwkJbG93ZXJfMzJfYml0cyhyaW5nLT5ncHVfYWRk
cikpOworCVdSRUczMl9TT0MxNShVVkQsIDAsIG1tVVZEX0xNSV9SQkNfUkJfNjRCSVRfQkFSX0hJ
R0gsCisJCXVwcGVyXzMyX2JpdHMocmluZy0+Z3B1X2FkZHIpKTsKKworCS8qIEluaXRpYWxpemUg
dGhlIHJpbmcgYnVmZmVyJ3MgcmVhZCBhbmQgd3JpdGUgcG9pbnRlcnMgKi8KKwlXUkVHMzJfU09D
MTUoVVZELCAwLCBtbVVWRF9SQkNfUkJfUlBUUiwgMCk7CisKKwlXUkVHMzJfU09DMTUoVVZELCAw
LCBtbVVWRF9TQ1JBVENIMiwgMCk7CisKKwlyaW5nLT53cHRyID0gUlJFRzMyX1NPQzE1KFVWRCwg
MCwgbW1VVkRfUkJDX1JCX1JQVFIpOworCVdSRUczMl9TT0MxNShVVkQsIDAsIG1tVVZEX1JCQ19S
Ql9XUFRSLAorCQlsb3dlcl8zMl9iaXRzKHJpbmctPndwdHIpKTsKKworCXJldHVybiAwOworfQor
CiBzdGF0aWMgaW50IHZjbl92Ml8wX3N0YXJ0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQog
ewogCXN0cnVjdCBhbWRncHVfcmluZyAqcmluZyA9ICZhZGV2LT52Y24ucmluZ19kZWM7CkBAIC03
NzgsNiArMTAyMiwxMyBAQCBzdGF0aWMgaW50IHZjbl92Ml8wX3N0YXJ0KHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KQogCWlmIChhZGV2LT5wbS5kcG1fZW5hYmxlZCkKIAkJYW1kZ3B1X2RwbV9l
bmFibGVfdXZkKGFkZXYsIHRydWUpOwogCisJaWYgKGFkZXYtPnBnX2ZsYWdzICYgQU1EX1BHX1NV
UFBPUlRfVkNOX0RQRykgeworCQlyID0gdmNuX3YyXzBfc3RhcnRfZHBnX21vZGUoYWRldiwgMCk7
CisJCWlmIChyKQorCQkJcmV0dXJuIHI7CisJCWdvdG8ganBlZzsKKwl9CisKIAl2Y25fdjJfMF9k
aXNhYmxlX3N0YXRpY19wb3dlcl9nYXRpbmcoYWRldik7CiAKIAkvKiBzZXQgdXZkIHN0YXR1cyBi
dXN5ICovCkBAIC05MjgsMTEgKzExNzksNDQgQEAgc3RhdGljIGludCB2Y25fdjJfMF9zdGFydChz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAlXUkVHMzJfU09DMTUoVVZELCAwLCBtbVVWRF9S
Ql9CQVNFX0hJMiwgdXBwZXJfMzJfYml0cyhyaW5nLT5ncHVfYWRkcikpOwogCVdSRUczMl9TT0Mx
NShVVkQsIDAsIG1tVVZEX1JCX1NJWkUyLCByaW5nLT5yaW5nX3NpemUgLyA0KTsKIAoranBlZzoK
IAlyID0ganBlZ192Ml8wX3N0YXJ0KGFkZXYpOwogCiAJcmV0dXJuIHI7CiB9CiAKK3N0YXRpYyBp
bnQgdmNuX3YyXzBfc3RvcF9kcGdfbW9kZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKK3sK
KwlpbnQgcmV0X2NvZGUgPSAwOworCXVpbnQzMl90IHRtcDsKKworCS8qIFdhaXQgZm9yIHBvd2Vy
IHN0YXR1cyB0byBiZSAxICovCisJU09DMTVfV0FJVF9PTl9SUkVHKFVWRCwgMCwgbW1VVkRfUE9X
RVJfU1RBVFVTLCAxLAorCQlVVkRfUE9XRVJfU1RBVFVTX19VVkRfUE9XRVJfU1RBVFVTX01BU0ss
IHJldF9jb2RlKTsKKworCS8qIHdhaXQgZm9yIHJlYWQgcHRyIHRvIGJlIGVxdWFsIHRvIHdyaXRl
IHB0ciAqLworCXRtcCA9IFJSRUczMl9TT0MxNShVVkQsIDAsIG1tVVZEX1JCX1dQVFIpOworCVNP
QzE1X1dBSVRfT05fUlJFRyhVVkQsIDAsIG1tVVZEX1JCX1JQVFIsIHRtcCwgMHhGRkZGRkZGRiwg
cmV0X2NvZGUpOworCisJdG1wID0gUlJFRzMyX1NPQzE1KFVWRCwgMCwgbW1VVkRfUkJfV1BUUjIp
OworCVNPQzE1X1dBSVRfT05fUlJFRyhVVkQsIDAsIG1tVVZEX1JCX1JQVFIyLCB0bXAsIDB4RkZG
RkZGRkYsIHJldF9jb2RlKTsKKworCXRtcCA9IFJSRUczMl9TT0MxNShVVkQsIDAsIG1tVVZEX0pS
QkNfUkJfV1BUUik7CisJU09DMTVfV0FJVF9PTl9SUkVHKFVWRCwgMCwgbW1VVkRfSlJCQ19SQl9S
UFRSLCB0bXAsIDB4RkZGRkZGRkYsIHJldF9jb2RlKTsKKworCXRtcCA9IFJSRUczMl9TT0MxNShV
VkQsIDAsIG1tVVZEX1JCQ19SQl9XUFRSKSAmIDB4N0ZGRkZGRkY7CisJU09DMTVfV0FJVF9PTl9S
UkVHKFVWRCwgMCwgbW1VVkRfUkJDX1JCX1JQVFIsIHRtcCwgMHhGRkZGRkZGRiwgcmV0X2NvZGUp
OworCisJU09DMTVfV0FJVF9PTl9SUkVHKFVWRCwgMCwgbW1VVkRfUE9XRVJfU1RBVFVTLCAxLAor
CQlVVkRfUE9XRVJfU1RBVFVTX19VVkRfUE9XRVJfU1RBVFVTX01BU0ssIHJldF9jb2RlKTsKKwor
CS8qIGRpc2FibGUgZHluYW1pYyBwb3dlciBnYXRpbmcgbW9kZSAqLworCVdSRUczMl9QKFNPQzE1
X1JFR19PRkZTRVQoVVZELCAwLCBtbVVWRF9QT1dFUl9TVEFUVVMpLCAwLAorCQkJflVWRF9QT1dF
Ul9TVEFUVVNfX1VWRF9QR19NT0RFX01BU0spOworCisJcmV0dXJuIDA7Cit9CisKIHN0YXRpYyBp
bnQgdmNuX3YyXzBfc3RvcChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIHsKIAl1aW50MzJf
dCB0bXA7CkBAIC05NDEsNiArMTIyNSwxNCBAQCBzdGF0aWMgaW50IHZjbl92Ml8wX3N0b3Aoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJciA9IGpwZWdfdjJfMF9zdG9wKGFkZXYpOwogCWlm
IChyKQogCQlyZXR1cm4gcjsKKworCWlmIChhZGV2LT5wZ19mbGFncyAmIEFNRF9QR19TVVBQT1JU
X1ZDTl9EUEcpIHsKKwkJciA9IHZjbl92Ml8wX3N0b3BfZHBnX21vZGUoYWRldik7CisJCWlmIChy
KQorCQkJcmV0dXJuIHI7CisJCWdvdG8gcG93ZXJfb2ZmOworCX0KKwogCS8qIHdhaXQgZm9yIHV2
ZCBpZGxlICovCiAJU09DMTVfV0FJVF9PTl9SUkVHKFZDTiwgMCwgbW1VVkRfU1RBVFVTLCBVVkRf
U1RBVFVTX19JRExFLCAweDcsIHIpOwogCWlmIChyKQpAQCAtOTkwLDYgKzEyODIsNyBAQCBzdGF0
aWMgaW50IHZjbl92Ml8wX3N0b3Aoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJdmNuX3Yy
XzBfZW5hYmxlX2Nsb2NrX2dhdGluZyhhZGV2KTsKIAl2Y25fdjJfMF9lbmFibGVfc3RhdGljX3Bv
d2VyX2dhdGluZyhhZGV2KTsKIAorcG93ZXJfb2ZmOgogCWlmIChhZGV2LT5wbS5kcG1fZW5hYmxl
ZCkKIAkJYW1kZ3B1X2RwbV9lbmFibGVfdXZkKGFkZXYsIGZhbHNlKTsKIAotLSAKMi4yMC4xCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1h
aWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
