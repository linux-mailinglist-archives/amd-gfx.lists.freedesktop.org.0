Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 719E71141EE
	for <lists+amd-gfx@lfdr.de>; Thu,  5 Dec 2019 14:49:24 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BDDA86E02F;
	Thu,  5 Dec 2019 13:49:22 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x343.google.com (mail-wm1-x343.google.com
 [IPv6:2a00:1450:4864:20::343])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 288126F63D
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 10:53:22 +0000 (UTC)
Received: by mail-wm1-x343.google.com with SMTP id f4so7036135wmj.1
 for <amd-gfx@lists.freedesktop.org>; Thu, 05 Dec 2019 02:53:22 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=DsUut5bhx0rfvXHWoGzhX/XDzj/xtjNfBeBDLungmi0=;
 b=S6FE1pLKRSmdEcXoJIdEx0Twc8fCwC81GtuRWYtdoB8aIAz6m62p0LElegoFKxcYxp
 qGoGungZZmR41YGRLM0tVwAErGYebnf1WmxNRth4OfL960yXUPJ+oNCpQK1/1PsRbScf
 1zPO7/aGRFdUCH5RwmMg8AeB1DgR7lGh4FtFCa57PqFfsUEGObMysdjsvGNflcv11koB
 /pncJsto0ofZqWkkrI2MDLuDjUemhg+wpHPuRJC4vdDwxxvyQ++Wg1TPZaSX2crLHzN7
 o+NU0RESisbpOkjy18YIynGBS8VSXqi3/B5gn1HHxjy2m3Tjf9GIG1/nUMxicqzI5tzs
 2+JA==
X-Gm-Message-State: APjAAAW9SNJos9+qi08zdUYaNlND4YVyrlbKFF+iX126jIRqO/SyemSB
 SqdQXcBSFsACgRKlm4iZz6s=
X-Google-Smtp-Source: APXvYqzVEZd8s+FPDoVfFZwX0XmNBt07JjnHDMLeZCwgs265KqAbk0s2vRn7lYzKfE96F/0JOM8Djw==
X-Received: by 2002:a1c:1dc4:: with SMTP id d187mr4704977wmd.46.1575543200413; 
 Thu, 05 Dec 2019 02:53:20 -0800 (PST)
Received: from brihaspati.fritz.box
 (p200300C58F2D01000D60DB7F8DFB835C.dip0.t-ipconnect.de.
 [2003:c5:8f2d:100:d60:db7f:8dfb:835c])
 by smtp.gmail.com with ESMTPSA id f2sm9247215wmh.46.2019.12.05.02.53.16
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 05 Dec 2019 02:53:19 -0800 (PST)
From: Nirmoy Das <nirmoy.aiemd@gmail.com>
X-Google-Original-From: Nirmoy Das <nirmoy.das@amd.com>
To: alexander.deucher@amd.com,
	kenny.ho@amd.com,
	christian.koenig@amd.com
Subject: [RFC PATCH] drm/scheduler: rework entity creation
Date: Thu,  5 Dec 2019 11:52:59 +0100
Message-Id: <20191205105259.78636-1-nirmoy.das@amd.com>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
X-Mailman-Approved-At: Thu, 05 Dec 2019 13:49:21 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=DsUut5bhx0rfvXHWoGzhX/XDzj/xtjNfBeBDLungmi0=;
 b=UUQE9XikJgwM1iaOLbl3A/WjFG0HEpeZkOaT7guclC4QXkzVPPcclBQ/uC5CJMEwBD
 J/xC0j1pjMAVzzlHpsm6fbXYuT4uDeJUiy4H/t+ZURaZLU1Se+vOHpYx1dBr18DEXng7
 Jhnzkkxk8455Q6Pavbyo44v7IggE0wieOozjtQmO+b/u9JjNxpdPGYnFvIzwoOTb9Bcw
 tbTspujZKeysysa238JSvGL/OtqKqSYhxO9sZ+jY+xUpR6/8TzgKdJ3QmBLNKoi9r+ho
 O4d4beSY6tpQe7WGX3U2vuTtKN0hazzKsfpmCYs3W2QKuafAFVcLg5H6W6FW7GdY9roK
 dhLw==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: nirmoy.das@amd.com, amd-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RW50aXR5IGN1cnJlbnRseSBrZWVwcyBhIGNvcHkgb2YgcnVuX3F1ZXVlIGxpc3QgYW5kIG1vZGlm
eSBpdCBpbgpkcm1fc2NoZWRfZW50aXR5X3NldF9wcmlvcml0eSgpLiBFbnRpdGllcyBzaG91bGRu
J3QgbW9kaWZ5IHJ1bl9xdWV1ZQpsaXN0LiBVc2UgZHJtX2dwdV9zY2hlZHVsZXIgbGlzdCBpbnN0
ZWFkIG9mIGRybV9zY2hlZF9ycSBsaXN0CmluIGRybV9zY2hlZF9lbnRpdHkgc3RydWN0LiBJbiB0
aGlzIHdheSB3ZSBjYW4gc2VsZWN0IGEgcnVucXVldWUgYmFzZWQKb24gZW50aXR5L2N0eCdzIHBy
aW9yaXR5IGZvciBhICBkcm0gc2NoZWR1bGVyLgoKU2lnbmVkLW9mZi1ieTogTmlybW95IERhcyA8
bmlybW95LmRhc0BhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9jdHguYyAgfCAgNyArLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0u
YyAgfCAgNyArLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91dmQuYyAgfCAg
NyArLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92Y2UuYyAgfCAgNyArLS0K
IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jICAgfCAxNCArKystLQogZHJp
dmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuYyAgICB8ICA4ICstLQogZHJpdmVycy9n
cHUvZHJtL2xpbWEvbGltYV9zY2hlZC5jICAgICAgICB8ICA1ICstCiBkcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMgIHwgIDcgKy0tCiBkcml2ZXJzL2dwdS9kcm0vc2NoZWR1
bGVyL3NjaGVkX2VudGl0eS5jIHwgNjUgKysrKysrKysrLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJz
L2dwdS9kcm0vdjNkL3YzZF9kcnYuYyAgICAgICAgICAgIHwgIDcgKy0tCiBpbmNsdWRlL2RybS9n
cHVfc2NoZWR1bGVyLmggICAgICAgICAgICAgIHwgIDkgKystLQogMTEgZmlsZXMgY2hhbmdlZCwg
NjkgaW5zZXJ0aW9ucygrKSwgNzQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2N0eC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2N0eC5jCmluZGV4IGEwZDNkN2I3NTZlYi4uZThmNDZjMTNkMDczIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3R4LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2N0eC5jCkBAIC0xMjIsNyArMTIyLDcgQEAgc3Rh
dGljIGludCBhbWRncHVfY3R4X2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAKIAlm
b3IgKGkgPSAwOyBpIDwgQU1ER1BVX0hXX0lQX05VTTsgKytpKSB7CiAJCXN0cnVjdCBhbWRncHVf
cmluZyAqcmluZ3NbQU1ER1BVX01BWF9SSU5HU107Ci0JCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJx
c1tBTURHUFVfTUFYX1JJTkdTXTsKKwkJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZF9s
aXN0W0FNREdQVV9NQVhfUklOR1NdOwogCQl1bnNpZ25lZCBudW1fcmluZ3MgPSAwOwogCQl1bnNp
Z25lZCBudW1fcnFzID0gMDsKIApAQCAtMTgxLDEyICsxODEsMTMgQEAgc3RhdGljIGludCBhbWRn
cHVfY3R4X2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJCQlpZiAoIXJpbmdzW2pd
LT5hZGV2KQogCQkJCWNvbnRpbnVlOwogCi0JCQlycXNbbnVtX3JxcysrXSA9ICZyaW5nc1tqXS0+
c2NoZWQuc2NoZWRfcnFbcHJpb3JpdHldOworCQkJc2NoZWRfbGlzdFtudW1fcnFzKytdID0gJnJp
bmdzW2pdLT5zY2hlZDsKIAkJfQogCiAJCWZvciAoaiA9IDA7IGogPCBhbWRncHVfY3R4X251bV9l
bnRpdGllc1tpXTsgKytqKQogCQkJciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmY3R4LT5lbnRp
dGllc1tpXVtqXS5lbnRpdHksCi0JCQkJCQkgIHJxcywgbnVtX3JxcywgJmN0eC0+Z3VpbHR5KTsK
KwkJCQkJCSAgc2NoZWRfbGlzdCwgbnVtX3JxcywKKwkJCQkJCSAgJmN0eC0+Z3VpbHR5LCBwcmlv
cml0eSk7CiAJCWlmIChyKQogCQkJZ290byBlcnJvcl9jbGVhbnVwX2VudGl0aWVzOwogCX0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwppbmRleCAxOWZmZTAwZDkwNzIuLmE5
NjBkZDdjMDcxMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X3R0bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwpAQCAt
MTk1NywxMSArMTk1NywxMiBAQCB2b2lkIGFtZGdwdV90dG1fc2V0X2J1ZmZlcl9mdW5jc19zdGF0
dXMoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIGJvb2wgZW5hYmxlKQogCiAJaWYgKGVuYWJs
ZSkgewogCQlzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmc7Ci0JCXN0cnVjdCBkcm1fc2NoZWRfcnEg
KnJxOworCQlzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVkOwogCiAJCXJpbmcgPSBhZGV2
LT5tbWFuLmJ1ZmZlcl9mdW5jc19yaW5nOwotCQlycSA9ICZyaW5nLT5zY2hlZC5zY2hlZF9ycVtE
Uk1fU0NIRURfUFJJT1JJVFlfS0VSTkVMXTsKLQkJciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgm
YWRldi0+bW1hbi5lbnRpdHksICZycSwgMSwgTlVMTCk7CisJCXNjaGVkID0gJnJpbmctPnNjaGVk
OworCQlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZhZGV2LT5tbWFuLmVudGl0eSwgJnNjaGVk
LAorCQkJCQkgIDEsIE5VTEwsIERSTV9TQ0hFRF9QUklPUklUWV9LRVJORUwpOwogCQlpZiAocikg
ewogCQkJRFJNX0VSUk9SKCJGYWlsZWQgc2V0dGluZyB1cCBUVE0gQk8gbW92ZSBlbnRpdHkgKCVk
KVxuIiwKIAkJCQkgIHIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3V2ZC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3V2ZC5jCmlu
ZGV4IGUzMjRiZmU2YzU4Zi4uYjgwM2E4ODgyODY0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdXZkLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3V2ZC5jCkBAIC0zMzAsMTIgKzMzMCwxMyBAQCBpbnQgYW1kZ3B1X3V2ZF9zd19m
aW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogaW50IGFtZGdwdV91dmRfZW50aXR5X2lu
aXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiB7CiAJc3RydWN0IGFtZGdwdV9yaW5nICpy
aW5nOwotCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOworCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxl
ciAqc2NoZWQ7CiAJaW50IHI7CiAKIAlyaW5nID0gJmFkZXYtPnV2ZC5pbnN0WzBdLnJpbmc7Ci0J
cnEgPSAmcmluZy0+c2NoZWQuc2NoZWRfcnFbRFJNX1NDSEVEX1BSSU9SSVRZX05PUk1BTF07Ci0J
ciA9IGRybV9zY2hlZF9lbnRpdHlfaW5pdCgmYWRldi0+dXZkLmVudGl0eSwgJnJxLCAxLCBOVUxM
KTsKKwlzY2hlZCA9ICZyaW5nLT5zY2hlZDsKKwlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZh
ZGV2LT51dmQuZW50aXR5LCAmc2NoZWQsCisJCQkJICAxLCBOVUxMLCBEUk1fU0NIRURfUFJJT1JJ
VFlfTk9STUFMKTsKIAlpZiAocikgewogCQlEUk1fRVJST1IoIkZhaWxlZCBzZXR0aW5nIHVwIFVW
RCBrZXJuZWwgZW50aXR5LlxuIik7CiAJCXJldHVybiByOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZjZS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3ZjZS5jCmluZGV4IDQ2YjU5MGFmMmZkMi4uYjQ0ZjI4ZDQ0ZmI0IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmNlLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZjZS5jCkBAIC0yNDAsMTIgKzI0MCwxMyBAQCBp
bnQgYW1kZ3B1X3ZjZV9zd19maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogaW50IGFt
ZGdwdV92Y2VfZW50aXR5X2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiB7CiAJc3Ry
dWN0IGFtZGdwdV9yaW5nICpyaW5nOwotCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOworCXN0cnVj
dCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQ7CiAJaW50IHI7CiAKIAlyaW5nID0gJmFkZXYtPnZj
ZS5yaW5nWzBdOwotCXJxID0gJnJpbmctPnNjaGVkLnNjaGVkX3JxW0RSTV9TQ0hFRF9QUklPUklU
WV9OT1JNQUxdOwotCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJmFkZXYtPnZjZS5lbnRpdHks
ICZycSwgMSwgTlVMTCk7CisJc2NoZWQgPSAmcmluZy0+c2NoZWQ7CisJciA9IGRybV9zY2hlZF9l
bnRpdHlfaW5pdCgmYWRldi0+dmNlLmVudGl0eSwgJnNjaGVkLAorCQkJCSAgMSwgTlVMTCwgRFJN
X1NDSEVEX1BSSU9SSVRZX05PUk1BTCk7CiAJaWYgKHIgIT0gMCkgewogCQlEUk1fRVJST1IoIkZh
aWxlZCBzZXR0aW5nIHVwIFZDRSBydW4gcXVldWUuXG4iKTsKIAkJcmV0dXJuIHI7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jCmluZGV4IGE5NGM0ZmFhNWFmMS4uZWM2MTQxNzcz
YTkyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYwpAQCAtMjY4Nyw2ICsy
Njg3LDcgQEAgaW50IGFtZGdwdV92bV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBz
dHJ1Y3QgYW1kZ3B1X3ZtICp2bSwKIHsKIAlzdHJ1Y3QgYW1kZ3B1X2JvX3BhcmFtIGJwOwogCXN0
cnVjdCBhbWRncHVfYm8gKnJvb3Q7CisgICAgICAgIHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAq
c2NoZWRfbGlzdFtBTURHUFVfTUFYX1JJTkdTXTsKIAlpbnQgciwgaTsKIAogCXZtLT52YSA9IFJC
X1JPT1RfQ0FDSEVEOwpAQCAtMjcwMCwxNCArMjcwMSwxOSBAQCBpbnQgYW1kZ3B1X3ZtX2luaXQo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBhbWRncHVfdm0gKnZtLAogCXNwaW5f
bG9ja19pbml0KCZ2bS0+aW52YWxpZGF0ZWRfbG9jayk7CiAJSU5JVF9MSVNUX0hFQUQoJnZtLT5m
cmVlZCk7CiAKKyAgICAgICAgZm9yIChpID0gMDsgaSA8IGFkZXYtPnZtX21hbmFnZXIudm1fcHRl
X251bV9ycXM7IGkrKykKKwkgICAgICAgc2NoZWRfbGlzdFtpXSA9IGFkZXYtPnZtX21hbmFnZXIu
dm1fcHRlX3Jxc1tpXS0+c2NoZWQ7CisKIAkvKiBjcmVhdGUgc2NoZWR1bGVyIGVudGl0aWVzIGZv
ciBwYWdlIHRhYmxlIHVwZGF0ZXMgKi8KLQlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2bS0+
ZGlyZWN0LCBhZGV2LT52bV9tYW5hZ2VyLnZtX3B0ZV9ycXMsCi0JCQkJICBhZGV2LT52bV9tYW5h
Z2VyLnZtX3B0ZV9udW1fcnFzLCBOVUxMKTsKKwlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2
bS0+ZGlyZWN0LCBzY2hlZF9saXN0LAorCQkJCSAgYWRldi0+dm1fbWFuYWdlci52bV9wdGVfbnVt
X3JxcywKKwkJCQkgIE5VTEwsIERSTV9TQ0hFRF9QUklPUklUWV9LRVJORUwpOwogCWlmIChyKQog
CQlyZXR1cm4gcjsKIAotCXIgPSBkcm1fc2NoZWRfZW50aXR5X2luaXQoJnZtLT5kZWxheWVkLCBh
ZGV2LT52bV9tYW5hZ2VyLnZtX3B0ZV9ycXMsCi0JCQkJICBhZGV2LT52bV9tYW5hZ2VyLnZtX3B0
ZV9udW1fcnFzLCBOVUxMKTsKKwlyID0gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZ2bS0+ZGVsYXll
ZCwgc2NoZWRfbGlzdCwKKwkJCQkgIGFkZXYtPnZtX21hbmFnZXIudm1fcHRlX251bV9ycXMsCisJ
CQkJICBOVUxMLCBEUk1fU0NIRURfUFJJT1JJVFlfS0VSTkVMKTsKIAlpZiAocikKIAkJZ290byBl
cnJvcl9mcmVlX2RpcmVjdDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYv
ZXRuYXZpdl9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZHJ2LmMKaW5k
ZXggMWY5YzAxYmU0MGQ3Li5hNjVjMWUxMTVlMzUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9ldG5hdml2L2V0bmF2aXZfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRu
YXZpdl9kcnYuYwpAQCAtNjUsMTIgKzY1LDEyIEBAIHN0YXRpYyBpbnQgZXRuYXZpdl9vcGVuKHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKIAogCWZvciAoaSA9
IDA7IGkgPCBFVE5BX01BWF9QSVBFUzsgaSsrKSB7CiAJCXN0cnVjdCBldG5hdml2X2dwdSAqZ3B1
ID0gcHJpdi0+Z3B1W2ldOwotCQlzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycTsKKwkJc3RydWN0IGRy
bV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKIAogCQlpZiAoZ3B1KSB7Ci0JCQlycSA9ICZncHUtPnNj
aGVkLnNjaGVkX3JxW0RSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUxdOwotCQkJZHJtX3NjaGVkX2Vu
dGl0eV9pbml0KCZjdHgtPnNjaGVkX2VudGl0eVtpXSwKLQkJCQkJICAgICAgJnJxLCAxLCBOVUxM
KTsKKwkJCXNjaGVkID0gJmdwdS0+c2NoZWQ7CisJCQlkcm1fc2NoZWRfZW50aXR5X2luaXQoJmN0
eC0+c2NoZWRfZW50aXR5W2ldLCAmc2NoZWQsCisJCQkJCSAgICAgIDEsIE5VTEwsIERSTV9TQ0hF
RF9QUklPUklUWV9OT1JNQUwpOwogCQkJfQogCX0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2xpbWEvbGltYV9zY2hlZC5jIGIvZHJpdmVycy9ncHUvZHJtL2xpbWEvbGltYV9zY2hlZC5j
CmluZGV4IGY1MjJjNWY5OTcyOS4uYTdlNTM4NzhkODQxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vbGltYS9saW1hX3NjaGVkLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2xpbWEvbGltYV9z
Y2hlZC5jCkBAIC0xNTksOSArMTU5LDEwIEBAIGludCBsaW1hX3NjaGVkX2NvbnRleHRfaW5pdChz
dHJ1Y3QgbGltYV9zY2hlZF9waXBlICpwaXBlLAogCQkJICAgIHN0cnVjdCBsaW1hX3NjaGVkX2Nv
bnRleHQgKmNvbnRleHQsCiAJCQkgICAgYXRvbWljX3QgKmd1aWx0eSkKIHsKLQlzdHJ1Y3QgZHJt
X3NjaGVkX3JxICpycSA9IHBpcGUtPmJhc2Uuc2NoZWRfcnEgKyBEUk1fU0NIRURfUFJJT1JJVFlf
Tk9STUFMOworCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQgPSAmcGlwZS0+YmFzZTsK
IAotCXJldHVybiBkcm1fc2NoZWRfZW50aXR5X2luaXQoJmNvbnRleHQtPmJhc2UsICZycSwgMSwg
Z3VpbHR5KTsKKwlyZXR1cm4gZHJtX3NjaGVkX2VudGl0eV9pbml0KCZjb250ZXh0LT5iYXNlLCAm
c2NoZWQsCisJCQkJICAgICAxLCBndWlsdHksIERSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUwpOwog
fQogCiB2b2lkIGxpbWFfc2NoZWRfY29udGV4dF9maW5pKHN0cnVjdCBsaW1hX3NjaGVkX3BpcGUg
KnBpcGUsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9i
LmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMKaW5kZXggZDQxMWVi
NmM4ZWI5Li44NDE3OGJjZjM1YzkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9qb2IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rf
am9iLmMKQEAgLTU0MiwxMiArNTQyLDEzIEBAIGludCBwYW5mcm9zdF9qb2Jfb3BlbihzdHJ1Y3Qg
cGFuZnJvc3RfZmlsZV9wcml2ICpwYW5mcm9zdF9wcml2KQogewogCXN0cnVjdCBwYW5mcm9zdF9k
ZXZpY2UgKnBmZGV2ID0gcGFuZnJvc3RfcHJpdi0+cGZkZXY7CiAJc3RydWN0IHBhbmZyb3N0X2pv
Yl9zbG90ICpqcyA9IHBmZGV2LT5qczsKLQlzdHJ1Y3QgZHJtX3NjaGVkX3JxICpycTsKKwlzdHJ1
Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVkOwogCWludCByZXQsIGk7CiAKIAlmb3IgKGkgPSAw
OyBpIDwgTlVNX0pPQl9TTE9UUzsgaSsrKSB7Ci0JCXJxID0gJmpzLT5xdWV1ZVtpXS5zY2hlZC5z
Y2hlZF9ycVtEUk1fU0NIRURfUFJJT1JJVFlfTk9STUFMXTsKLQkJcmV0ID0gZHJtX3NjaGVkX2Vu
dGl0eV9pbml0KCZwYW5mcm9zdF9wcml2LT5zY2hlZF9lbnRpdHlbaV0sICZycSwgMSwgTlVMTCk7
CisJCXNjaGVkID0gJmpzLT5xdWV1ZVtpXS5zY2hlZDsKKwkJcmV0ID0gZHJtX3NjaGVkX2VudGl0
eV9pbml0KCZwYW5mcm9zdF9wcml2LT5zY2hlZF9lbnRpdHlbaV0sCisJCQkJCSAgICAmc2NoZWQs
IDEsIE5VTEwsIERSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUwpOwogCQlpZiAoV0FSTl9PTihyZXQp
KQogCQkJcmV0dXJuIHJldDsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1
bGVyL3NjaGVkX2VudGl0eS5jIGIvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRp
dHkuYwppbmRleCA0NjFhN2E4MTI5ZjQuLmUxMGQzNzI2NjgzNiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRpdHkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
c2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jCkBAIC0zOCw5ICszOCw5IEBACiAgKiBzdWJtaXQgdG8g
SFcgcmluZy4KICAqCiAgKiBAZW50aXR5OiBzY2hlZHVsZXIgZW50aXR5IHRvIGluaXQKLSAqIEBy
cV9saXN0OiB0aGUgbGlzdCBvZiBydW4gcXVldWUgb24gd2hpY2ggam9icyBmcm9tIHRoaXMKKyAq
IEBzY2hlZF9saXN0OiB0aGUgbGlzdCBvZiBkcm0gc2NoZWRzIG9uIHdoaWNoIGpvYnMgZnJvbSB0
aGlzCiAgKiAgICAgICAgICAgZW50aXR5IGNhbiBiZSBzdWJtaXR0ZWQKLSAqIEBudW1fcnFfbGlz
dDogbnVtYmVyIG9mIHJ1biBxdWV1ZSBpbiBycV9saXN0CisgKiBAbnVtX3NjaGVkX2xpc3Q6IG51
bWJlciBvZiBkcm0gc2NoZWQgaW4gc2NoZWRfbGlzdAogICogQGd1aWx0eTogYXRvbWljX3Qgc2V0
IHRvIDEgd2hlbiBhIGpvYiBvbiB0aGlzIHF1ZXVlCiAgKiAgICAgICAgICBpcyBmb3VuZCB0byBi
ZSBndWlsdHkgY2F1c2luZyBhIHRpbWVvdXQKICAqCkBAIC01MCwzMiArNTAsMzQgQEAKICAqIFJl
dHVybnMgMCBvbiBzdWNjZXNzIG9yIGEgbmVnYXRpdmUgZXJyb3IgY29kZSBvbiBmYWlsdXJlLgog
ICovCiBpbnQgZHJtX3NjaGVkX2VudGl0eV9pbml0KHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICpl
bnRpdHksCi0JCQkgIHN0cnVjdCBkcm1fc2NoZWRfcnEgKipycV9saXN0LAotCQkJICB1bnNpZ25l
ZCBpbnQgbnVtX3JxX2xpc3QsCi0JCQkgIGF0b21pY190ICpndWlsdHkpCisJCQkgIHN0cnVjdCBk
cm1fZ3B1X3NjaGVkdWxlciAqKnNjaGVkX2xpc3QsCisJCQkgIHVuc2lnbmVkIGludCBudW1fc2No
ZWRfbGlzdCwKKwkJCSAgYXRvbWljX3QgKmd1aWx0eSwgZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkg
cHJpb3JpdHkpCiB7CiAJaW50IGk7CiAKLQlpZiAoIShlbnRpdHkgJiYgcnFfbGlzdCAmJiAobnVt
X3JxX2xpc3QgPT0gMCB8fCBycV9saXN0WzBdKSkpCisJaWYgKCEoZW50aXR5ICYmIHNjaGVkX2xp
c3QgJiYgKG51bV9zY2hlZF9saXN0ID09IDAgfHwgc2NoZWRfbGlzdFswXSkpKQogCQlyZXR1cm4g
LUVJTlZBTDsKIAogCW1lbXNldChlbnRpdHksIDAsIHNpemVvZihzdHJ1Y3QgZHJtX3NjaGVkX2Vu
dGl0eSkpOwogCUlOSVRfTElTVF9IRUFEKCZlbnRpdHktPmxpc3QpOwogCWVudGl0eS0+cnEgPSBO
VUxMOwogCWVudGl0eS0+Z3VpbHR5ID0gZ3VpbHR5OwotCWVudGl0eS0+bnVtX3JxX2xpc3QgPSBu
dW1fcnFfbGlzdDsKLQllbnRpdHktPnJxX2xpc3QgPSBrY2FsbG9jKG51bV9ycV9saXN0LCBzaXpl
b2Yoc3RydWN0IGRybV9zY2hlZF9ycSAqKSwKLQkJCQlHRlBfS0VSTkVMKTsKLQlpZiAoIWVudGl0
eS0+cnFfbGlzdCkKKwllbnRpdHktPm51bV9zY2hlZF9saXN0ID0gbnVtX3NjaGVkX2xpc3Q7CisJ
ZW50aXR5LT5wcmlvcml0eSA9IHByaW9yaXR5OworCWVudGl0eS0+c2NoZWRfbGlzdCA9ICBrY2Fs
bG9jKG51bV9zY2hlZF9saXN0LAorCQkJCSAgICAgIHNpemVvZihzdHJ1Y3QgZHJtX2dwdV9zY2hl
ZHVsZXIgKiksIEdGUF9LRVJORUwpOworCisJaWYoIWVudGl0eS0+c2NoZWRfbGlzdCkKIAkJcmV0
dXJuIC1FTk9NRU07CiAKIAlpbml0X2NvbXBsZXRpb24oJmVudGl0eS0+ZW50aXR5X2lkbGUpOwog
Ci0JZm9yIChpID0gMDsgaSA8IG51bV9ycV9saXN0OyArK2kpCi0JCWVudGl0eS0+cnFfbGlzdFtp
XSA9IHJxX2xpc3RbaV07CisJZm9yIChpID0gMDsgaSA8IG51bV9zY2hlZF9saXN0OyBpKyspCisJ
CWVudGl0eS0+c2NoZWRfbGlzdFtpXSA9IHNjaGVkX2xpc3RbaV07CiAKLQlpZiAobnVtX3JxX2xp
c3QpCi0JCWVudGl0eS0+cnEgPSBycV9saXN0WzBdOworCWlmIChudW1fc2NoZWRfbGlzdCkKKwkJ
ZW50aXR5LT5ycSA9ICZlbnRpdHktPnNjaGVkX2xpc3RbMF0tPnNjaGVkX3JxW2VudGl0eS0+cHJp
b3JpdHldOwogCiAJZW50aXR5LT5sYXN0X3NjaGVkdWxlZCA9IE5VTEw7CiAKQEAgLTEzOSwxMCAr
MTQxLDEwIEBAIGRybV9zY2hlZF9lbnRpdHlfZ2V0X2ZyZWVfc2NoZWQoc3RydWN0IGRybV9zY2hl
ZF9lbnRpdHkgKmVudGl0eSkKIAl1bnNpZ25lZCBpbnQgbWluX2pvYnMgPSBVSU5UX01BWCwgbnVt
X2pvYnM7CiAJaW50IGk7CiAKLQlmb3IgKGkgPSAwOyBpIDwgZW50aXR5LT5udW1fcnFfbGlzdDsg
KytpKSB7Ci0JCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQgPSBlbnRpdHktPnJxX2xp
c3RbaV0tPnNjaGVkOworCWZvciAoaSA9IDA7IGkgPCBlbnRpdHktPm51bV9zY2hlZF9saXN0OyAr
K2kpIHsKKwkJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCA9IGVudGl0eS0+c2NoZWRf
bGlzdFtpXTsKIAotCQlpZiAoIWVudGl0eS0+cnFfbGlzdFtpXS0+c2NoZWQtPnJlYWR5KSB7CisJ
CWlmICghZW50aXR5LT5zY2hlZF9saXN0W2ldLT5yZWFkeSkgewogCQkJRFJNX1dBUk4oInNjaGVk
JXMgaXMgbm90IHJlYWR5LCBza2lwcGluZyIsIHNjaGVkLT5uYW1lKTsKIAkJCWNvbnRpbnVlOwog
CQl9CkBAIC0xNTAsNyArMTUyLDcgQEAgZHJtX3NjaGVkX2VudGl0eV9nZXRfZnJlZV9zY2hlZChz
dHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KQogCQludW1fam9icyA9IGF0b21pY19yZWFk
KCZzY2hlZC0+bnVtX2pvYnMpOwogCQlpZiAobnVtX2pvYnMgPCBtaW5fam9icykgewogCQkJbWlu
X2pvYnMgPSBudW1fam9iczsKLQkJCXJxID0gZW50aXR5LT5ycV9saXN0W2ldOworCQkJcnEgPSAm
ZW50aXR5LT5zY2hlZF9saXN0W2ldLT5zY2hlZF9ycVtlbnRpdHktPnByaW9yaXR5XTsKIAkJfQog
CX0KIApAQCAtMzA4LDcgKzMxMCw3IEBAIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9maW5pKHN0cnVj
dCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkpCiAKIAlkbWFfZmVuY2VfcHV0KGVudGl0eS0+bGFz
dF9zY2hlZHVsZWQpOwogCWVudGl0eS0+bGFzdF9zY2hlZHVsZWQgPSBOVUxMOwotCWtmcmVlKGVu
dGl0eS0+cnFfbGlzdCk7CisJa2ZyZWUoZW50aXR5LT5zY2hlZF9saXN0KTsKIH0KIEVYUE9SVF9T
WU1CT0woZHJtX3NjaGVkX2VudGl0eV9maW5pKTsKIApAQCAtMzUzLDE1ICszNTUsNiBAQCBzdGF0
aWMgdm9pZCBkcm1fc2NoZWRfZW50aXR5X3dha2V1cChzdHJ1Y3QgZG1hX2ZlbmNlICpmLAogCWRy
bV9zY2hlZF93YWtldXAoZW50aXR5LT5ycS0+c2NoZWQpOwogfQogCi0vKioKLSAqIGRybV9zY2hl
ZF9lbnRpdHlfc2V0X3JxX3ByaW9yaXR5IC0gaGVscGVyIGZvciBkcm1fc2NoZWRfZW50aXR5X3Nl
dF9wcmlvcml0eQotICovCi1zdGF0aWMgdm9pZCBkcm1fc2NoZWRfZW50aXR5X3NldF9ycV9wcmlv
cml0eShzdHJ1Y3QgZHJtX3NjaGVkX3JxICoqcnEsCi0JCQkJCSAgICAgZW51bSBkcm1fc2NoZWRf
cHJpb3JpdHkgcHJpb3JpdHkpCi17Ci0JKnJxID0gJigqcnEpLT5zY2hlZC0+c2NoZWRfcnFbcHJp
b3JpdHldOwotfQotCiAvKioKICAqIGRybV9zY2hlZF9lbnRpdHlfc2V0X3ByaW9yaXR5IC0gU2V0
cyBwcmlvcml0eSBvZiB0aGUgZW50aXR5CiAgKgpAQCAtMzczLDIwICszNjYsOCBAQCBzdGF0aWMg
dm9pZCBkcm1fc2NoZWRfZW50aXR5X3NldF9ycV9wcmlvcml0eShzdHJ1Y3QgZHJtX3NjaGVkX3Jx
ICoqcnEsCiB2b2lkIGRybV9zY2hlZF9lbnRpdHlfc2V0X3ByaW9yaXR5KHN0cnVjdCBkcm1fc2No
ZWRfZW50aXR5ICplbnRpdHksCiAJCQkJICAgZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgcHJpb3Jp
dHkpCiB7Ci0JdW5zaWduZWQgaW50IGk7Ci0KLQlzcGluX2xvY2soJmVudGl0eS0+cnFfbG9jayk7
CiAKLQlmb3IgKGkgPSAwOyBpIDwgZW50aXR5LT5udW1fcnFfbGlzdDsgKytpKQotCQlkcm1fc2No
ZWRfZW50aXR5X3NldF9ycV9wcmlvcml0eSgmZW50aXR5LT5ycV9saXN0W2ldLCBwcmlvcml0eSk7
Ci0KLQlpZiAoZW50aXR5LT5ycSkgewotCQlkcm1fc2NoZWRfcnFfcmVtb3ZlX2VudGl0eShlbnRp
dHktPnJxLCBlbnRpdHkpOwotCQlkcm1fc2NoZWRfZW50aXR5X3NldF9ycV9wcmlvcml0eSgmZW50
aXR5LT5ycSwgcHJpb3JpdHkpOwotCQlkcm1fc2NoZWRfcnFfYWRkX2VudGl0eShlbnRpdHktPnJx
LCBlbnRpdHkpOwotCX0KLQotCXNwaW5fdW5sb2NrKCZlbnRpdHktPnJxX2xvY2spOworCWVudGl0
eS0+cHJpb3JpdHkgPSBwcmlvcml0eTsKIH0KIEVYUE9SVF9TWU1CT0woZHJtX3NjaGVkX2VudGl0
eV9zZXRfcHJpb3JpdHkpOwogCkBAIC00OTAsNyArNDcxLDcgQEAgdm9pZCBkcm1fc2NoZWRfZW50
aXR5X3NlbGVjdF9ycShzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KQogCXN0cnVjdCBk
bWFfZmVuY2UgKmZlbmNlOwogCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJxOwogCi0JaWYgKHNwc2Nf
cXVldWVfY291bnQoJmVudGl0eS0+am9iX3F1ZXVlKSB8fCBlbnRpdHktPm51bV9ycV9saXN0IDw9
IDEpCisJaWYgKHNwc2NfcXVldWVfY291bnQoJmVudGl0eS0+am9iX3F1ZXVlKSB8fCBlbnRpdHkt
Pm51bV9zY2hlZF9saXN0IDw9IDEpCiAJCXJldHVybjsKIAogCWZlbmNlID0gUkVBRF9PTkNFKGVu
dGl0eS0+bGFzdF9zY2hlZHVsZWQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3YzZC92
M2RfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vdjNkL3YzZF9kcnYuYwppbmRleCAxYTA3NDYyYjQ1
MjguLmM2YWZmMWFlZGQyNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3YzZC92M2RfZHJ2
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3YzZC92M2RfZHJ2LmMKQEAgLTE0MCw3ICsxNDAsNyBA
QCB2M2Rfb3BlbihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUp
CiB7CiAJc3RydWN0IHYzZF9kZXYgKnYzZCA9IHRvX3YzZF9kZXYoZGV2KTsKIAlzdHJ1Y3QgdjNk
X2ZpbGVfcHJpdiAqdjNkX3ByaXY7Ci0Jc3RydWN0IGRybV9zY2hlZF9ycSAqcnE7CisJc3RydWN0
IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZDsKIAlpbnQgaTsKIAogCXYzZF9wcml2ID0ga3phbGxv
YyhzaXplb2YoKnYzZF9wcml2KSwgR0ZQX0tFUk5FTCk7CkBAIC0xNTAsOCArMTUwLDkgQEAgdjNk
X29wZW4oc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxlKQogCXYz
ZF9wcml2LT52M2QgPSB2M2Q7CiAKIAlmb3IgKGkgPSAwOyBpIDwgVjNEX01BWF9RVUVVRVM7IGkr
KykgewotCQlycSA9ICZ2M2QtPnF1ZXVlW2ldLnNjaGVkLnNjaGVkX3JxW0RSTV9TQ0hFRF9QUklP
UklUWV9OT1JNQUxdOwotCQlkcm1fc2NoZWRfZW50aXR5X2luaXQoJnYzZF9wcml2LT5zY2hlZF9l
bnRpdHlbaV0sICZycSwgMSwgTlVMTCk7CisJCXNjaGVkID0gJnYzZC0+cXVldWVbaV0uc2NoZWQ7
CisJCWRybV9zY2hlZF9lbnRpdHlfaW5pdCgmdjNkX3ByaXYtPnNjaGVkX2VudGl0eVtpXSwgJnNj
aGVkLAorCQkJCSAgICAgIDEsIE5VTEwsIERSTV9TQ0hFRF9QUklPUklUWV9OT1JNQUwpOwogCX0K
IAogCWZpbGUtPmRyaXZlcl9wcml2ID0gdjNkX3ByaXY7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2Ry
bS9ncHVfc2NoZWR1bGVyLmggYi9pbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmgKaW5kZXggNjg0
NjkyYThlZDc2Li45ZGYzMjJkZmFjMzAgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL2dwdV9zY2hl
ZHVsZXIuaAorKysgYi9pbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmgKQEAgLTgxLDggKzgxLDkg
QEAgZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgewogc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgewog
CXN0cnVjdCBsaXN0X2hlYWQJCWxpc3Q7CiAJc3RydWN0IGRybV9zY2hlZF9ycQkJKnJxOwotCXN0
cnVjdCBkcm1fc2NoZWRfcnEJCSoqcnFfbGlzdDsKLQl1bnNpZ25lZCBpbnQgICAgICAgICAgICAg
ICAgICAgIG51bV9ycV9saXN0OworCXVuc2lnbmVkIGludCAgICAgICAgICAgICAgICAgICAgbnVt
X3NjaGVkX2xpc3Q7CisJc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICAgICAgICAqKnNjaGVkX2xp
c3Q7CisJZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgICAgICAgICBwcmlvcml0eTsKIAlzcGlubG9j
a190CQkJcnFfbG9jazsKIAogCXN0cnVjdCBzcHNjX3F1ZXVlCQlqb2JfcXVldWU7CkBAIC0zMTIs
OSArMzEzLDkgQEAgdm9pZCBkcm1fc2NoZWRfcnFfcmVtb3ZlX2VudGl0eShzdHJ1Y3QgZHJtX3Nj
aGVkX3JxICpycSwKIAkJCQlzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KTsKIAogaW50
IGRybV9zY2hlZF9lbnRpdHlfaW5pdChzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5LAot
CQkJICBzdHJ1Y3QgZHJtX3NjaGVkX3JxICoqcnFfbGlzdCwKKwkJCSAgc3RydWN0IGRybV9ncHVf
c2NoZWR1bGVyICoqc2NoZWRfbGlzdCwKIAkJCSAgdW5zaWduZWQgaW50IG51bV9ycV9saXN0LAot
CQkJICBhdG9taWNfdCAqZ3VpbHR5KTsKKwkJCSAgYXRvbWljX3QgKmd1aWx0eSwgZW51bSBkcm1f
c2NoZWRfcHJpb3JpdHkgcHJpb3JpdHkpOwogbG9uZyBkcm1fc2NoZWRfZW50aXR5X2ZsdXNoKHN0
cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHksIGxvbmcgdGltZW91dCk7CiB2b2lkIGRybV9z
Y2hlZF9lbnRpdHlfZmluaShzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KTsKIHZvaWQg
ZHJtX3NjaGVkX2VudGl0eV9kZXN0cm95KHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkp
OwotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
