Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E625DCE82F
	for <lists+amd-gfx@lfdr.de>; Mon,  7 Oct 2019 17:47:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 70EA76E07B;
	Mon,  7 Oct 2019 15:47:43 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0025C6E07B
 for <amd-gfx@lists.freedesktop.org>; Mon,  7 Oct 2019 15:47:41 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id n14so15878986wrw.9
 for <amd-gfx@lists.freedesktop.org>; Mon, 07 Oct 2019 08:47:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=kdfkMyLzQ8rBcFpG1vNGhYmGvBnxRQSkv3mGiZPhwAA=;
 b=UoNtAw00FpdKKPqFnvi66O8W4jW0+BLcxnUNntJx1NglNrIGr5zPH3h5tdduv6cU8g
 IQHMQiz2/VAeWU3mbsqD/DvgKk0ppkWHZ1Ih1h/Cxy5Op2f+qsbaZ2ejd9Zm2//uI9hM
 Uchd22eRenmm8cNXtqan9S/Fo/wZ3Na59zVAgAFhIeshvzacwwwryPo+JMH1u4p5fC0O
 5HkAgrgV/o24seKSebiV1QNhy26NNMWNOcz9VPuwbWRKKjxcJ5Y2ul4wJg1CVA8p/3xv
 3ZFyBIffIIrM7lR+z3brglJ+sNqSGuf2wAaAQa5hrDhkoKsBx25+v0tz1l45Jp56aXQY
 wDLA==
X-Gm-Message-State: APjAAAVGR6Urpba0kEiZxjq29lNXpiVpg/RW7fpLjsS51bXpeBRah20b
 ZEyDEFTZnjS9PApwoh4x7HwoYU3KBsX+GXRciJQN1g==
X-Google-Smtp-Source: APXvYqwKNmM5/GUuvZTCKxwBu1uBElv6E+SVqp4T/qx7PLoHDCyhGn+YG7xCSy9SQ4BdFFgau1t9ZIK+wSGTEEpiUwc=
X-Received: by 2002:adf:fc07:: with SMTP id i7mr8188412wrr.50.1570463260433;
 Mon, 07 Oct 2019 08:47:40 -0700 (PDT)
MIME-Version: 1.0
References: <20191007153501.7194-1-Ori.Messinger@amd.com>
In-Reply-To: <20191007153501.7194-1-Ori.Messinger@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Mon, 7 Oct 2019 11:47:28 -0400
Message-ID: <CADnq5_PJG6eZaby-0Y2VufaELjNFqzkXf6i=9bDJZ0jzVgZqUQ@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu: Report vram vendor with sysfs (v2)
To: "Messinger, Ori" <Ori.Messinger@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=kdfkMyLzQ8rBcFpG1vNGhYmGvBnxRQSkv3mGiZPhwAA=;
 b=DTDik36Ibm9ymtB7nNVerlH09uvJldmk4PWcrZ1rJKhOL8BM2+B9DdzGvcuA8RRzH9
 ipaQjHnaMmoMdi1Wv9zRu+jMO962xtxofC1qa/LpLbITCb+3WIp4990pc7oSYBelhqF7
 g4HCu0oBssQa5ynA/SrmL56faMNsoa2siHLzGFflXOVoZFAHOaB55bpT6KR0JYx7fqc/
 15WRvJ0BIWLlMrMWEdCFGEwNDpSRKIXFEHrJYn/doPqadkvu2J9V5KmAkYW58NNR58Z4
 6AjgwUoXn7UeG81Kl6+zW9frP3KJGFhjKLe70B1lSeCtpbDb74JXunLExWheNkkOR8M1
 6xgA==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCBPY3QgNywgMjAxOSBhdCAxMTozNSBBTSBNZXNzaW5nZXIsIE9yaSA8T3JpLk1lc3Np
bmdlckBhbWQuY29tPiB3cm90ZToKPgo+IFRoZSB2cmFtIHZlbmRvciBjYW4gYmUgZm91bmQgYXMg
YSBzZXBhcmF0ZSBzeXNmcyBmaWxlIGF0Ogo+IC9zeXMvY2xhc3MvZHJtL2NhcmRbWF0vZGV2aWNl
L21lbV9pbmZvX3ZyYW1fdmVuZG9yCj4gVGhlIHZyYW0gdmVuZG9yIGlzIGRpc3BsYXllZCBhcyBh
IHN0cmluZyB2YWx1ZS4KPgo+IHYyOiBVc2UgY29ycmVjdCBiaXQgbWFza2luZywgYW5kIGNhY2hl
IHZyYW1fdmVuZG9yIGluIGdtYwo+Cj4gQ2hhbmdlLUlkOiBJYWEzY2NmM2Y0ODNlZTY1MzYyODFm
ZTc3Nzc3MmJhMjQxYTZlMGQ0Mwo+IFNpZ25lZC1vZmYtYnk6IE9yaSBNZXNzaW5nZXIgPG9yaS5t
ZXNzaW5nZXJAYW1kLmNvbT4KPiAtLS0KPiAgLi4uL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
YXRvbWZpcm13YXJlLmMgIHwgNjMgKysrKysrKysrKysrKysrKysrLQo+ICAuLi4vZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuaCAgfCAgNSArLQo+ICBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmggICAgICAgfCAgMSArCj4gIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV92cmFtX21nci5jICB8IDQzICsrKysrKysrKysrKysKPiAgZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8wLmMgICAgICAgIHwgIDYgKy0KPiAgZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYyAgICAgICAgIHwgIDYgKy0KPiAgNiBm
aWxlcyBjaGFuZ2VkLCAxMTcgaW5zZXJ0aW9ucygrKSwgNyBkZWxldGlvbnMoLSkKPgo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMKPiBpbmRl
eCAxOTkxM2MzOTU4OGIuLjRlMzQyOTZkMDcwNyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMKPiBAQCAtMTY5LDggKzE2OSwxMSBA
QCBzdGF0aWMgaW50IGNvbnZlcnRfYXRvbV9tZW1fdHlwZV90b192cmFtX3R5cGUoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAgICAgICByZXR1cm4gdnJhbV90eXBlOwo+ICB9Cj4KPiAt
aW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCAqdnJh
bV93aWR0aCwgaW50ICp2cmFtX3R5cGUpCj4gKwo+ICtpbnQKPiArYW1kZ3B1X2F0b21maXJtd2Fy
ZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBpbnQgKnZyYW1fd2lkdGgsIGludCAqdnJhbV90eXBlLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgKnZyYW1fdmVuZG9yKQo+ICB7
Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X21vZGVfaW5mbyAqbW9kZV9pbmZvID0gJmFkZXYtPm1v
ZGVfaW5mbzsKPiAgICAgICAgIGludCBpbmRleCwgaSA9IDA7Cj4gQEAgLTE4MCw2ICsxODMsNyBA
QCBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2LAo+ICAgICAgICAgdW5pb24gdnJhbV9tb2R1bGUgKnZyYW1fbW9kdWxlOwo+ICAg
ICAgICAgdTggZnJldiwgY3JldjsKPiAgICAgICAgIHU4IG1lbV90eXBlOwo+ICsgICAgICAgdTgg
bWVtX3ZlbmRvcjsKPiAgICAgICAgIHUzMiBtZW1fY2hhbm5lbF9udW1iZXI7Cj4gICAgICAgICB1
MzIgbWVtX2NoYW5uZWxfd2lkdGg7Cj4gICAgICAgICB1MzIgbW9kdWxlX2lkOwo+IEBAIC0yMzEs
NiArMjM1LDkgQEAgaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1l
bV9jaGFubmVsX3dpZHRoID0gdnJhbV9tb2R1bGUtPnY5LmNoYW5uZWxfd2lkdGg7Cj4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJhbV93aWR0aCkKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgKnZyYW1fd2lkdGggPSBtZW1fY2hhbm5lbF9udW1i
ZXIgKiAoMSA8PCBtZW1fY2hhbm5lbF93aWR0aCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBtZW1fdmVuZG9yID0gKHZyYW1fbW9kdWxlLT52OS52ZW5kZXJfcmV2X2lkKSAmIDB4
RjsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmFtX3ZlbmRvcikKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKnZyYW1fdmVuZG9yID0gbWVt
X3ZlbmRvcjsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICAgICAg
ICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIChtb2R1bGVfaWQgPiB2cmFtX2luZm8tPnYyNC52cmFtX21vZHVsZV9udW0pCj4gQEAg
LTI0OCw2ICsyNTUsOSBAQCBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgbWVtX2NoYW5uZWxfd2lkdGggPSB2cmFtX21vZHVsZS0+djEwLmNoYW5uZWxfd2lkdGg7Cj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJhbV93aWR0aCkKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKnZyYW1fd2lkdGggPSBtZW1fY2hhbm5l
bF9udW1iZXIgKiAoMSA8PCBtZW1fY2hhbm5lbF93aWR0aCk7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBtZW1fdmVuZG9yID0gKHZyYW1fbW9kdWxlLT52MTAudmVuZGVyX3Jldl9p
ZCkgJiAweEY7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJhbV92ZW5k
b3IpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICp2cmFtX3ZlbmRv
ciA9IG1lbV92ZW5kb3I7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsK
PiAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Ogo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gQEAgLTI1OSw2ICsyNjksNTUgQEAgaW50IGFt
ZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
diwKPiAgICAgICAgIHJldHVybiAwOwo+ICB9Cj4KPiArLyoKPiArICogUmV0dXJuIHZyYW0gd2lk
dGggZnJvbSBpbnRlZ3JhdGVkIHN5c3RlbSBpbmZvIHRhYmxlLCBpZiBhdmFpbGFibGUsCj4gKyAq
IG9yIDAgaWYgbm90Lgo+ICsgKi8KPiAraW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1f
d2lkdGgoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gK3sKPiArICAgICAgIGludCB2cmFt
X3dpZHRoID0gMCwgdnJhbV90eXBlID0gMCwgdnJhbV92ZW5kb3IgPSAwOwo+ICsgICAgICAgaW50
IHIgPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8oYWRldiwKPiArICAgICAgICZ2
cmFtX3dpZHRoLCAmdnJhbV90eXBlLCAmdnJhbV92ZW5kb3IpOwo+ICsKPiArICAgICAgIGlmIChy
KQo+ICsgICAgICAgICAgICAgICByZXR1cm4gMDsKPiArCj4gKyAgICAgICByZXR1cm4gdnJhbV93
aWR0aDsKPiArfQo+ICsKPiArLyoKPiArICogUmV0dXJuIHZyYW0gdHlwZSBmcm9tIGVpdGhlciBp
bnRlZ3JhdGVkIHN5c3RlbSBpbmZvIHRhYmxlCj4gKyAqIG9yIHVtYyBpbmZvIHRhYmxlLCBpZiBh
dmFpbGFibGUsIG9yIDAgKFRZUEVfVU5LTk9XTikgaWYgbm90Cj4gKyAqLwo+ICtpbnQgYW1kZ3B1
X2F0b21maXJtd2FyZV9nZXRfdnJhbV90eXBlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+
ICt7Cj4gKyAgICAgICBpbnQgdnJhbV93aWR0aCA9IDAsIHZyYW1fdHlwZSA9IDAsIHZyYW1fdmVu
ZG9yID0gMDsKPiArICAgICAgIGludCByID0gYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9p
bmZvKGFkZXYsCj4gKyAgICAgICAmdnJhbV93aWR0aCwgJnZyYW1fdHlwZSwgJnZyYW1fdmVuZG9y
KTsKPiArCj4gKyAgICAgICBpZiAocikKPiArICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gKwo+
ICsgICAgICAgcmV0dXJuIHZyYW1fdHlwZTsKPiArfQo+ICsKPiArLyoKPiArICogUmV0dXJuIHZy
YW0gdmVuZG9yIGZyb20gZWl0aGVyIGludGVncmF0ZWQgc3lzdGVtIGluZm8gdGFibGUKPiArICog
b3IgdW1jIGluZm8gdGFibGUsIGlmIGF2YWlsYWJsZSwgb3IgMCAoVFlQRV9VTktOT1dOKSBpZiBu
b3QKPiArICovCj4gK2ludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX3ZlbmRvcihzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiArewo+ICsgICAgICAgaW50IHZyYW1fd2lkdGggPSAw
LCB2cmFtX3R5cGUgPSAwLCB2cmFtX3ZlbmRvciA9IDA7Cj4gKyAgICAgICBpbnQgciA9IGFtZGdw
dV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhhZGV2LAo+ICsgICAgICAgJnZyYW1fd2lkdGgs
ICZ2cmFtX3R5cGUsICZ2cmFtX3ZlbmRvcik7Cj4gKwo+ICsgICAgICAgaWYgKHIpCj4gKyAgICAg
ICAgICAgICAgIHJldHVybiAwOwo+ICsKPiArICAgICAgIHJldHVybiB2cmFtX3ZlbmRvcjsKPiAr
Cj4gK30KCkRyb3AgdGhlc2UgdGhyZWUgdW51c2VkIGZ1bmN0aW9ucyBhbmQgdGhlaXIgZGVmaW5p
dGlvbnMuICBXaXRoIHRoYXQgZml4ZWQ6ClJldmlld2VkLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhh
bmRlci5kZXVjaGVyQGFtZC5jb20+Cgo+ICsKPiAgLyoKPiAgICogUmV0dXJuIHRydWUgaWYgdmJp
b3MgZW5hYmxlZCBlY2MgYnkgZGVmYXVsdCwgaWYgdW1jIGluZm8gdGFibGUgaXMgYXZhaWxhYmxl
Cj4gICAqIG9yIGZhbHNlIGlmIGVjYyBpcyBub3QgZW5hYmxlZCBvciB1bWMgaW5mbyB0YWJsZSBp
cyBub3QgYXZhaWxhYmxlCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9hdG9tZmlybXdhcmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9hdG9tZmlybXdhcmUuaAo+IGluZGV4IDgyODE5ZjAzZTQ0NC4uNzM4ZTUzOGVlMjZjIDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUu
aAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUu
aAo+IEBAIC0zMCw3ICszMCwxMCBAQCBib29sIGFtZGdwdV9hdG9tZmlybXdhcmVfZ3B1X3N1cHBv
cnRzX3ZpcnR1YWxpemF0aW9uKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICB2b2lkIGFt
ZGdwdV9hdG9tZmlybXdhcmVfc2NyYXRjaF9yZWdzX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpOwo+ICBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9hbGxvY2F0ZV9mYl9zY3JhdGNoKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiAgaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0
X3ZyYW1faW5mbyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGludCAqdnJhbV93aWR0aCwgaW50ICp2cmFtX3R5cGUpOwo+
ICsgICAgICAgaW50ICp2cmFtX3dpZHRoLCBpbnQgKnZyYW1fdHlwZSwgaW50ICp2cmFtX3ZlbmRv
cik7Cj4gK2ludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX3dpZHRoKHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2KTsKPiAraW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1fdHlw
ZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Cj4gK2ludCBhbWRncHVfYXRvbWZpcm13YXJl
X2dldF92cmFtX3ZlbmRvcihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Cj4gIGludCBhbWRn
cHVfYXRvbWZpcm13YXJlX2dldF9jbG9ja19pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KTsKPiAgaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X2dmeF9pbmZvKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KTsKPiAgYm9vbCBhbWRncHVfYXRvbWZpcm13YXJlX21lbV9lY2Nfc3VwcG9y
dGVkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2dtYy5oCj4gaW5kZXggZDU5MWIzNzVkMWRmLi41NTVkOGU1N2ZhZTkgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5oCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5oCj4gQEAgLTE1Nyw2ICsxNTcs
NyBAQCBzdHJ1Y3QgYW1kZ3B1X2dtYyB7Cj4gICAgICAgICB1aW50MzJfdCAgICAgICAgICAgICAg
ICBmd192ZXJzaW9uOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9pcnFfc3JjICAgdm1fZmF1bHQ7
Cj4gICAgICAgICB1aW50MzJfdCAgICAgICAgICAgICAgICB2cmFtX3R5cGU7Cj4gKyAgICAgICB1
aW50OF90ICAgICAgICAgICAgICAgICB2cmFtX3ZlbmRvcjsKPiAgICAgICAgIHVpbnQzMl90ICAg
ICAgICAgICAgICAgIHNyYm1fc29mdF9yZXNldDsKPiAgICAgICAgIGJvb2wgICAgICAgICAgICAg
ICAgICAgIHBydF93YXJuaW5nOwo+ICAgICAgICAgdWludDY0X3QgICAgICAgICAgICAgICAgc3Rv
bGVuX3NpemU7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV92cmFtX21nci5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZyYW1fbWdy
LmMKPiBpbmRleCA4ODg3YjM5NjRlNDMuLjgyYTMyOTllNTNjMCAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92cmFtX21nci5jCj4gQEAgLTI0LDYgKzI0LDggQEAK
Pgo+ICAjaW5jbHVkZSAiYW1kZ3B1LmgiCj4gICNpbmNsdWRlICJhbWRncHVfdm0uaCIKPiArI2lu
Y2x1ZGUgImFtZGdwdV9hdG9tZmlybXdhcmUuaCIKPiArI2luY2x1ZGUgImF0b20uaCIKPgo+ICBz
dHJ1Y3QgYW1kZ3B1X3ZyYW1fbWdyIHsKPiAgICAgICAgIHN0cnVjdCBkcm1fbW0gbW07Cj4gQEAg
LTEwMiw2ICsxMDQsMzkgQEAgc3RhdGljIHNzaXplX3QgYW1kZ3B1X21lbV9pbmZvX3Zpc192cmFt
X3VzZWRfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsCj4gICAgICAgICAgICAgICAgIGFtZGdwdV92
cmFtX21ncl92aXNfdXNhZ2UoJmFkZXYtPm1tYW4uYmRldi5tYW5bVFRNX1BMX1ZSQU1dKSk7Cj4g
IH0KPgo+ICtzdGF0aWMgc3NpemVfdCBhbWRncHVfbWVtX2luZm9fdnJhbV92ZW5kb3Ioc3RydWN0
IGRldmljZSAqZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhciAqYnVmKQo+ICt7Cj4gKyAgICAg
ICBzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwo+ICsgICAg
ICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBkZGV2LT5kZXZfcHJpdmF0ZTsKPiArCj4g
KyAgICAgICBzd2l0Y2ggKGFkZXYtPmdtYy52cmFtX3ZlbmRvcikgewo+ICsgICAgICAgY2FzZSBT
QU1TVU5HOgo+ICsgICAgICAgICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUs
ICJzYW1zdW5nXG4iKTsKPiArICAgICAgIGNhc2UgSU5GSU5FT046Cj4gKyAgICAgICAgICAgICAg
IHJldHVybiBzbnByaW50ZihidWYsIFBBR0VfU0laRSwgImluZmluZW9uXG4iKTsKPiArICAgICAg
IGNhc2UgRUxQSURBOgo+ICsgICAgICAgICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQQUdF
X1NJWkUsICJlbHBpZGFcbiIpOwo+ICsgICAgICAgY2FzZSBFVFJPTjoKPiArICAgICAgICAgICAg
ICAgcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAiZXRyb25cbiIpOwo+ICsgICAgICAg
Y2FzZSBOQU5ZQToKPiArICAgICAgICAgICAgICAgcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9T
SVpFLCAibmFueWFcbiIpOwo+ICsgICAgICAgY2FzZSBIWU5JWDoKPiArICAgICAgICAgICAgICAg
cmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAiaHluaXhcbiIpOwo+ICsgICAgICAgY2Fz
ZSBNT1NFTDoKPiArICAgICAgICAgICAgICAgcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpF
LCAibW9zZWxcbiIpOwo+ICsgICAgICAgY2FzZSBXSU5CT05EOgo+ICsgICAgICAgICAgICAgICBy
ZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJ3aW5ib25kXG4iKTsKPiArICAgICAgIGNh
c2UgRVNNVDoKPiArICAgICAgICAgICAgICAgcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpF
LCAiZXNtdFxuIik7Cj4gKyAgICAgICBjYXNlIE1JQ1JPTjoKPiArICAgICAgICAgICAgICAgcmV0
dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAibWljcm9uXG4iKTsKPiArICAgICAgIGRlZmF1
bHQ6Cj4gKyAgICAgICAgICAgICAgIHJldHVybiBzbnByaW50ZihidWYsIFBBR0VfU0laRSwgInVu
a25vd25cbiIpOwo+ICsgICAgICAgfQo+ICt9Cj4gKwo+ICBzdGF0aWMgREVWSUNFX0FUVFIobWVt
X2luZm9fdnJhbV90b3RhbCwgU19JUlVHTywKPiAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X21l
bV9pbmZvX3ZyYW1fdG90YWxfc2hvdywgTlVMTCk7Cj4gIHN0YXRpYyBERVZJQ0VfQVRUUihtZW1f
aW5mb192aXNfdnJhbV90b3RhbCwgU19JUlVHTywKPiBAQCAtMTEwLDYgKzE0NSw4IEBAIHN0YXRp
YyBERVZJQ0VfQVRUUihtZW1faW5mb192cmFtX3VzZWQsIFNfSVJVR08sCj4gICAgICAgICAgICAg
ICAgICAgIGFtZGdwdV9tZW1faW5mb192cmFtX3VzZWRfc2hvdywgTlVMTCk7Cj4gIHN0YXRpYyBE
RVZJQ0VfQVRUUihtZW1faW5mb192aXNfdnJhbV91c2VkLCBTX0lSVUdPLAo+ICAgICAgICAgICAg
ICAgICAgICBhbWRncHVfbWVtX2luZm9fdmlzX3ZyYW1fdXNlZF9zaG93LCBOVUxMKTsKPiArc3Rh
dGljIERFVklDRV9BVFRSKG1lbV9pbmZvX3ZyYW1fdmVuZG9yLCBTX0lSVUdPLAo+ICsgICAgICAg
ICAgICAgICAgICBhbWRncHVfbWVtX2luZm9fdnJhbV92ZW5kb3IsIE5VTEwpOwo+Cj4gIC8qKgo+
ICAgKiBhbWRncHVfdnJhbV9tZ3JfaW5pdCAtIGluaXQgVlJBTSBtYW5hZ2VyIGFuZCBEUk0gTU0K
PiBAQCAtMTU1LDYgKzE5MiwxMSBAQCBzdGF0aWMgaW50IGFtZGdwdV92cmFtX21ncl9pbml0KHN0
cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciAqbWFuLAo+ICAgICAgICAgICAgICAgICBEUk1fRVJS
T1IoIkZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgbWVtX2luZm9fdmlzX3ZyYW1fdXNlZFxu
Iik7Cj4gICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gICAgICAgICB9Cj4gKyAgICAgICBy
ZXQgPSBkZXZpY2VfY3JlYXRlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfbWVtX2luZm9fdnJh
bV92ZW5kb3IpOwo+ICsgICAgICAgaWYgKHJldCkgewo+ICsgICAgICAgICAgICAgICBEUk1fRVJS
T1IoIkZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgbWVtX2luZm9fdnJhbV92ZW5kb3JcbiIp
Owo+ICsgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ICsgICAgICAgfQo+Cj4gICAgICAgICBy
ZXR1cm4gMDsKPiAgfQo+IEBAIC0xODEsNiArMjIzLDcgQEAgc3RhdGljIGludCBhbWRncHVfdnJh
bV9tZ3JfZmluaShzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXIgKm1hbikKPiAgICAgICAgIGRl
dmljZV9yZW1vdmVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9tZW1faW5mb192aXNfdnJhbV90
b3RhbCk7Cj4gICAgICAgICBkZXZpY2VfcmVtb3ZlX2ZpbGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJf
bWVtX2luZm9fdnJhbV91c2VkKTsKPiAgICAgICAgIGRldmljZV9yZW1vdmVfZmlsZShhZGV2LT5k
ZXYsICZkZXZfYXR0cl9tZW1faW5mb192aXNfdnJhbV91c2VkKTsKPiArICAgICAgIGRldmljZV9y
ZW1vdmVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9tZW1faW5mb192cmFtX3ZlbmRvcik7Cj4g
ICAgICAgICByZXR1cm4gMDsKPiAgfQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2dtY192MTBfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Yx
MF8wLmMKPiBpbmRleCBjYjNmNjE4NzNiYWEuLmZiNDg2MjJjMmFiZCAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2dtY192MTBfMC5jCj4gQEAgLTYyNCw3ICs2MjQsNyBAQCBzdGF0aWMg
dW5zaWduZWQgZ21jX3YxMF8wX2dldF92Ymlvc19mYl9zaXplKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2KQo+Cj4gIHN0YXRpYyBpbnQgZ21jX3YxMF8wX3N3X2luaXQodm9pZCAqaGFuZGxlKQo+
ICB7Cj4gLSAgICAgICBpbnQgciwgdnJhbV93aWR0aCA9IDAsIHZyYW1fdHlwZSA9IDA7Cj4gKyAg
ICAgICBpbnQgciwgdnJhbV93aWR0aCA9IDAsIHZyYW1fdHlwZSA9IDAsIHZyYW1fdmVuZG9yID0g
MDsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICopaGFuZGxlOwo+Cj4gICAgICAgICBnZnhodWJfdjJfMF9pbml0KGFkZXYpOwo+IEBA
IC02MzIsMTMgKzYzMiwxNSBAQCBzdGF0aWMgaW50IGdtY192MTBfMF9zd19pbml0KHZvaWQgKmhh
bmRsZSkKPgo+ICAgICAgICAgc3Bpbl9sb2NrX2luaXQoJmFkZXYtPmdtYy5pbnZhbGlkYXRlX2xv
Y2spOwo+Cj4gLSAgICAgICByID0gYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKGFk
ZXYsICZ2cmFtX3dpZHRoLCAmdnJhbV90eXBlKTsKPiArICAgICAgIHIgPSBhbWRncHVfYXRvbWZp
cm13YXJlX2dldF92cmFtX2luZm8oYWRldiwKPiArICAgICAgICAgICAgICAgJnZyYW1fd2lkdGgs
ICZ2cmFtX3R5cGUsICZ2cmFtX3ZlbmRvcik7Cj4gICAgICAgICBpZiAoIWFtZGdwdV9lbXVfbW9k
ZSkKPiAgICAgICAgICAgICAgICAgYWRldi0+Z21jLnZyYW1fd2lkdGggPSB2cmFtX3dpZHRoOwo+
ICAgICAgICAgZWxzZQo+ICAgICAgICAgICAgICAgICBhZGV2LT5nbWMudnJhbV93aWR0aCA9IDEg
KiAxMjg7IC8qIG51bWNoYW4gKiBjaGFuc2l6ZSAqLwo+Cj4gICAgICAgICBhZGV2LT5nbWMudnJh
bV90eXBlID0gdnJhbV90eXBlOwo+ICsgICAgICAgYWRldi0+Z21jLnZyYW1fdmVuZG9yID0gdnJh
bV92ZW5kb3I7Cj4gICAgICAgICBzd2l0Y2ggKGFkZXYtPmFzaWNfdHlwZSkgewo+ICAgICAgICAg
Y2FzZSBDSElQX05BVkkxMDoKPiAgICAgICAgIGNhc2UgQ0hJUF9OQVZJMTQ6Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jCj4gaW5kZXggNGIxMWY3ZTYxMDA0Li5kZWZlYjZhZmNi
NWQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKPiBAQCAtOTMwLDcg
KzkzMCw3IEBAIHN0YXRpYyB1bnNpZ25lZCBnbWNfdjlfMF9nZXRfdmJpb3NfZmJfc2l6ZShzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPgo+ICBzdGF0aWMgaW50IGdtY192OV8wX3N3X2luaXQo
dm9pZCAqaGFuZGxlKQo+ICB7Cj4gLSAgICAgICBpbnQgciwgdnJhbV93aWR0aCA9IDAsIHZyYW1f
dHlwZSA9IDA7Cj4gKyAgICAgICBpbnQgciwgdnJhbV93aWR0aCA9IDAsIHZyYW1fdHlwZSA9IDAs
IHZyYW1fdmVuZG9yID0gMDsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0g
KHN0cnVjdCBhbWRncHVfZGV2aWNlICopaGFuZGxlOwo+Cj4gICAgICAgICBnZnhodWJfdjFfMF9p
bml0KGFkZXYpOwo+IEBAIC05NDEsNyArOTQxLDggQEAgc3RhdGljIGludCBnbWNfdjlfMF9zd19p
bml0KHZvaWQgKmhhbmRsZSkKPgo+ICAgICAgICAgc3Bpbl9sb2NrX2luaXQoJmFkZXYtPmdtYy5p
bnZhbGlkYXRlX2xvY2spOwo+Cj4gLSAgICAgICByID0gYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRf
dnJhbV9pbmZvKGFkZXYsICZ2cmFtX3dpZHRoLCAmdnJhbV90eXBlKTsKPiArICAgICAgIHIgPSBh
bWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8oYWRldiwKPiArICAgICAgICAgICAgICAg
JnZyYW1fd2lkdGgsICZ2cmFtX3R5cGUsICZ2cmFtX3ZlbmRvcik7Cj4gICAgICAgICBpZiAoYW1k
Z3B1X3NyaW92X3ZmKGFkZXYpKQo+ICAgICAgICAgICAgICAgICAvKiBGb3IgVmVnYTEwIFNSLUlP
ViwgdnJhbV93aWR0aCBjYW4ndCBiZSByZWFkIGZyb20gQVRPTSBhcyBSQVZFTiwKPiAgICAgICAg
ICAgICAgICAgICogYW5kIERGIHJlbGF0ZWQgcmVnaXN0ZXJzIGlzIG5vdCByZWFkYWJsZSwgc2Vl
bXMgaGFyZGNvcmQgaXMgdGhlCj4gQEAgLTk2NSw2ICs5NjYsNyBAQCBzdGF0aWMgaW50IGdtY192
OV8wX3N3X2luaXQodm9pZCAqaGFuZGxlKQo+ICAgICAgICAgfQo+Cj4gICAgICAgICBhZGV2LT5n
bWMudnJhbV90eXBlID0gdnJhbV90eXBlOwo+ICsgICAgICAgYWRldi0+Z21jLnZyYW1fdmVuZG9y
ID0gdnJhbV92ZW5kb3I7Cj4gICAgICAgICBzd2l0Y2ggKGFkZXYtPmFzaWNfdHlwZSkgewo+ICAg
ICAgICAgY2FzZSBDSElQX1JBVkVOOgo+ICAgICAgICAgICAgICAgICBhZGV2LT5udW1fdm1odWJz
ID0gMjsKPiAtLQo+IDIuMTcuMQo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KPiBhbWQtZ2Z4IG1haWxpbmcgbGlzdAo+IGFtZC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9hbWQtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
