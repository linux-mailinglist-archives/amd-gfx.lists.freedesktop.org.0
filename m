Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 434B84B9616
	for <lists+amd-gfx@lfdr.de>; Thu, 17 Feb 2022 03:48:36 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7E74E10E700;
	Thu, 17 Feb 2022 02:48:34 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM11-CO1-obe.outbound.protection.outlook.com
 (mail-co1nam11on2045.outbound.protection.outlook.com [40.107.220.45])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8E9BA10E700
 for <amd-gfx@lists.freedesktop.org>; Thu, 17 Feb 2022 02:48:33 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=jd3aKF1TlTYEBEbJrY3sJCoZnGyLurwFrxYWtqeD7orjWG0I1DJeTUR3mLPfpxKj4ZooEoPuJelOOMnlA9nmaIrBU4Ecs7059DiYr3SP5oXZeJJ71CSi2PGmoSdYo+ptvovPAH2SCfiSiaBFxJw/4R2ckSEjTXFc1+CyjRj0OCBD8FJxoXAZEg/3Swmp/duyug+w2NaxIL5tHqU6Y6YbcYyr5J1Kp5jGIF7NB12uZkMY/ykbeCEhHGFDY/cNnGiivIPk3kFId2SYLe30tsWrDFGppbtshw7ZAEu94DvMh2q9lX/MvsFDHuMJLrEAS0HGaXDkXqp5y0JXNUbNYXUciQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=HoarRJfndFYYcQyP++tQP4+CntzG3PlkbUxpzyEr0kY=;
 b=H68F3zsQAzA5e+fla3FFvu003SwtnLtRna233xiEKh2mmtRAJ0sbVjdvbgc/Mdf09xW+PUOiW4rzfG0Ru6N0sy5XbMRnmwdkmSH0b5NFz0QWEK5eHfAqrNO/77lQTUtptswiXuIVAcaoaLriX0Komj06NGvend5jlCtkgEeg135NA4Dx/AVrWTJ33hJHd2xrMhUFyfzeWuUFdsfvByV6Y1m/ZIKybka8lgr1F1CYvvMeuQ/2RADuItEakwx/1bLNHFVwL2A4EoA+4A3foWCGTzTNSpJroF8/OsKfpw3EtaMKBVmUs9jeNytnIi5Zj6uVk3YlgsIbw1VvwzQ/yoVnxQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none; dmarc=none;
 dkim=none; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HoarRJfndFYYcQyP++tQP4+CntzG3PlkbUxpzyEr0kY=;
 b=AXzCefT3cyElx9T/oDsLZeQ06UCJIhT2gV9Y9LhOWfyhudvl/fsx52i+bB33qa6SYZ0RI/cYTOCE812qqIsI3XWhnR8r2NY0rOkof1bNfsewVHt265GQCUxo6afz7wSKfDUbPgSU0ekxjibFNtjmOiW0Bh8q4Zfh5UVz1PZZYAU=
Received: from DM6PR12MB2619.namprd12.prod.outlook.com (2603:10b6:5:45::18) by
 DS7PR12MB5839.namprd12.prod.outlook.com (2603:10b6:8:7a::21) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.4975.15; Thu, 17 Feb 2022 02:48:31 +0000
Received: from DM6PR12MB2619.namprd12.prod.outlook.com
 ([fe80::7d61:f517:f3f8:9ea]) by DM6PR12MB2619.namprd12.prod.outlook.com
 ([fe80::7d61:f517:f3f8:9ea%5]) with mapi id 15.20.4975.019; Thu, 17 Feb 2022
 02:48:31 +0000
From: "Quan, Evan" <Evan.Quan@amd.com>
To: "Lazar, Lijo" <Lijo.Lazar@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH 07/12] drm/amd/pm: correct the checks for granting gpu
 reset APIs
Thread-Topic: [PATCH 07/12] drm/amd/pm: correct the checks for granting gpu
 reset APIs
Thread-Index: AQHYHxxfST4C491c7UyVxXpaPr0FMayScaaAgASe8dA=
Date: Thu, 17 Feb 2022 02:48:31 +0000
Message-ID: <DM6PR12MB2619BDE08C13C9F3FD5C1FADE4369@DM6PR12MB2619.namprd12.prod.outlook.com>
References: <20220211075209.894833-1-evan.quan@amd.com>
 <20220211075209.894833-7-evan.quan@amd.com>
 <80a49c9c-77f6-5047-6584-da24f49596f7@amd.com>
In-Reply-To: <80a49c9c-77f6-5047-6584-da24f49596f7@amd.com>
Accept-Language: en-US, zh-CN
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_Enabled=true;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_SetDate=2022-02-17T02:48:27Z; 
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_Method=Standard;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_Name=AMD Official Use
 Only-AIP 2.0;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_ActionId=ccdaa336-7868-4d47-a4a9-c397906d1443;
 MSIP_Label_88914ebd-7e6c-4e12-a031-a9906be2db14_ContentBits=1
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=amd.com;
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 31a89380-c60c-41a2-b062-08d9f1bffba2
x-ms-traffictypediagnostic: DS7PR12MB5839:EE_
x-microsoft-antispam-prvs: <DS7PR12MB58392C1384916406A2CDCAC6E4369@DS7PR12MB5839.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:8882;
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: F3bPtlE0YVJ1eTerzMjjQv4PYBfjubLx5JLvwixX0HY/+XhkgE97Pl1JTLMexMrg7XizSuzSqQRQCvPnnH5CQpl/hQVP0HBaFYnDNR+NWaB29e2P8MkIiiA4SGBMTQe3GnYb7ESAcYGB6Ms1kd1Z63BNWVeTv0MgnwHd+qX+sZVAtIgnGOV7VcJCuh/XE3chJhkDiyKnp64KFPI3vjq0ZkQbdrWe2DfyS+RdE//j5dVemW7EfbZ5Eh7nuqgFwqnAucLuXd1W92vn6UN+hl7KimgUINf90U6GY7g+pgCmXJNHeUrJsFGO0Zdhch8n2qYExO6a+Csg81urLV9xqHPlNf/1cjkXihCSJUFEcOQX3GIDwgk10XR+h7WLYj05BCMoc079XYD2q9dNXvXbYGkC6+L5oe/k2fnRfMcNh37+FRHtYStg9pxB0cZJG+XR3eYyOhC2MNauO0a2D+RFY9O4jqatM3vuZ2evZioftcKEVb5QOYvLjX3gDjIhs+LVVgCM5aOJ/Kg7nHLiCpuTfNzEdTQsK9WE49fjWOQuFCaliJN5gxUSmnw9gonBjbMWkVVzUUW4qEPC8AZ/Hz1bZ7+PKMHCun4xp2Je/RwFTn6+eBZhwGX/CGymghv0saJXoIQVWze2W84/2Y8+AY317R5ykJ0UWFXKjuJ2d9MGHCVmViySScBOU8lkipO/PjQz7KRZCed8lXHtpLzgrhJpc28LxQ==
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM6PR12MB2619.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(13230001)(4636009)(366004)(122000001)(66476007)(316002)(33656002)(38100700002)(64756008)(66946007)(66446008)(55016003)(76116006)(66556008)(26005)(186003)(4326008)(71200400001)(53546011)(38070700005)(2906002)(9686003)(86362001)(8676002)(110136005)(508600001)(54906003)(30864003)(8936002)(7696005)(6506007)(52536014)(5660300002)(83380400001);
 DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?Y0JheSs1ZEZnVHB6WkRCNzBVYzRhRkF1YnZLWk8wQkxrTkVlaWRmN3dRWElV?=
 =?utf-8?B?VUxRUFJIdDljRWhWZ3VzVTJ0UTAzWjY0SEMyamJzNy9xRW9HZitLclM3Q25E?=
 =?utf-8?B?Rk12eWtETW5LeU84QU9LbTF6bHlzc3FuYWpWSEFCaEhoOEJ4NjBxUkZaWDFs?=
 =?utf-8?B?R1RpL05haHUyZWE4eVJDdjlyVXR0V1ozM3dhQllqOG5WVzViNnZXY05KMnVu?=
 =?utf-8?B?ZWtZOUVIU2twbDVDL0RmVG5EcTlrMFg0Tk5QeFFlMUhBa0h1eG96MkxkeklS?=
 =?utf-8?B?Y3IrNXBXMU1hblBNNm9tRDY3TEVGUFdEZWhIbXFrUkd3ZTRaNm5aLzJqeWs4?=
 =?utf-8?B?Q21WVUY3QXV4YUpQL002cWszQkRMbVEyVEhzVjdUOG5vOG85NE5kd2MrczVY?=
 =?utf-8?B?eHdpemE5YVh2Zzd1K0NrSE4zTFdZZmFXdE1IcDlPSythQkM0ZzNIMHorZUlU?=
 =?utf-8?B?SXgraml2ZmlTaWllUnRIdWE3SG1uMVFPa3hmaVdwY1g3OGxSclhIckNaQnFj?=
 =?utf-8?B?RVlYaHpTL2lDamhnc1RCamxIdkw0NUV5d1lqNUdoMExmUWNCU09MemlkOVJ4?=
 =?utf-8?B?THFvcmwzQVc5L0VrZUxDdC9weTVVWDZqN3VuM0pIWGRoM3R5eFFPMjBjdlJ6?=
 =?utf-8?B?bWxIODY4Wm5BeDBUQTcvTHlUNi8rOHl2QnVnZVR4aDdjR0NlOUlGOENueXpR?=
 =?utf-8?B?Z29UUytVOHNoUkRoa3l0NXdiL0NTTmk4bGh3QzdKME5QRSs5bU5ZdUF5eG5C?=
 =?utf-8?B?bFlzanA5V2lLWCtsTEFHUWw1eGV4NWtLU2VJVWlwKzh0NkR2clBzcUtDUVhh?=
 =?utf-8?B?dUVjSG5EUk5uL296ZVBkdjcyaThOWGptaWcwc0ZRaytCckc0eExKOUJ3eW5W?=
 =?utf-8?B?djgvZUd5cjd3THVVNFRaNFFkamtyQVYzMVM1Ukw1VmE0YkgvZnFSRCtiMUJD?=
 =?utf-8?B?bnRrTUhTYVM4eHBaSXdLWTMxS2RCT2pvY2pWYURXNVA1cDdTSjdGZWc0ZGk1?=
 =?utf-8?B?Q3FzKzR3bzcrb2UyaXdkcjlJSXpmSnQxK0llbjkvQzEyanM2TEhvMTFsejMr?=
 =?utf-8?B?Uy9qdVkzOEhzakgzcXVuWmJGV1RjZG1CVTdnbERYTFMwZklDNCtmWHN1YS9l?=
 =?utf-8?B?ZmhIeDRici93N0t2emtiMHJHbHFmemVuRWY5MTJUOHc5UXB3Ri9NVC9LOTdL?=
 =?utf-8?B?aWNjeWhDKys4VytTbEFxWm5vbi81eGp2OW5sWTRJYzBFVTV2YlVjYkVoa2lJ?=
 =?utf-8?B?MWo3NDNwVEs4bmlEdkhvdE5zaDU3elRXdi84VHhEcjJyenMranA1QzJTWGsx?=
 =?utf-8?B?UlBpTldzeUFuZk8ybWgxN2drNlNwRW5IelVBVVN2Sm1qQm9xRE9tbHViM2Ex?=
 =?utf-8?B?cjB4dXRaV0Q3Mnc0YlR3bUhDbWxXRC9FMEQ4dHdJU2U0MGNaUVVJY0lTTkE1?=
 =?utf-8?B?Tk03aE9TcHBWdUtoa3FWSjJGREZGVzZPMmJoUTMwSktlSENma3ZHeENOdXB6?=
 =?utf-8?B?NHlFN0tzb2hhQ0t4anFEaEVnQzV5RS9hOEJGVUpUWVR4RGhRakhyNFdkMGFP?=
 =?utf-8?B?bjd3N1lFbUFZMXUrdDFuckFpVVFMdFY4dC84cTA0WHYwcGx6TjJ5VStJTlFo?=
 =?utf-8?B?Tkx1b0NHN1BmSDllaU5YNk4vVm5kL3RhMlI0dGZNeDFLQy9OS29yMjhhcTdR?=
 =?utf-8?B?YlVEZzlSOTVGeUoyd1V0RFZUTHhVTGt0Tm9mQnh0UGlsQnZIamhBSkR4SmFv?=
 =?utf-8?B?TUlDYU9Wck84YmNjdXBqYWNSSktIZnJsNGNMdS9TaWNjeW01T3QzcWdObW5V?=
 =?utf-8?B?YXBWc2UzbUhsSzN0U2xTaGVEclhCZHNHWGpiQ00zM0RsY1BIOUt0eUdOSFV2?=
 =?utf-8?B?VDZwSGNoUGUzRHBUVXcxNEFxYVZQWjQzZUE5REFtOG5RbWI3RkFCRGkzK0x3?=
 =?utf-8?B?cGVtWXlPUHN2ZlAvaUpnRlh1a0hvNnVCbWJxWUVwenJkUXFieFpVaDhNMk1P?=
 =?utf-8?B?V2xkazZacFFBemY5MFVkbFkva1NLMGVnVFVxN3VoYy9mQ1JlMTJtSkJVanNl?=
 =?utf-8?B?UDlBYncrOXRjMk5KRE93WHBDWndTbW9RQ0FHOStOZ0lSeXJVY3hRS01zYXlO?=
 =?utf-8?Q?MgSs=3D?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: DM6PR12MB2619.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 31a89380-c60c-41a2-b062-08d9f1bffba2
X-MS-Exchange-CrossTenant-originalarrivaltime: 17 Feb 2022 02:48:31.0707 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: 97u65Xc9heG3pfJ6oYWiucWEoTa/hbcanYGBRoDN2k1KO/yBXcjQk3tytd9Prf9q
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DS7PR12MB5839
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Deucher, Alexander" <Alexander.Deucher@amd.com>,
 "rui.huang@amd.com" <rui.huang@amd.com>
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seV0NCg0KDQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0t
LS0NCj4gRnJvbTogTGF6YXIsIExpam8gPExpam8uTGF6YXJAYW1kLmNvbT4NCj4gU2VudDogTW9u
ZGF5LCBGZWJydWFyeSAxNCwgMjAyMiAxMjowNCBQTQ0KPiBUbzogUXVhbiwgRXZhbiA8RXZhbi5R
dWFuQGFtZC5jb20+OyBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KPiBDYzogRGV1Y2hl
ciwgQWxleGFuZGVyIDxBbGV4YW5kZXIuRGV1Y2hlckBhbWQuY29tPjsNCj4gcnVpLmh1YW5nQGFt
ZC5jb20NCj4gU3ViamVjdDogUmU6IFtQQVRDSCAwNy8xMl0gZHJtL2FtZC9wbTogY29ycmVjdCB0
aGUgY2hlY2tzIGZvciBncmFudGluZyBncHUNCj4gcmVzZXQgQVBJcw0KPiANCj4gDQo+IA0KPiBP
biAyLzExLzIwMjIgMToyMiBQTSwgRXZhbiBRdWFuIHdyb3RlOg0KPiA+IFRob3NlIGdwdSByZXNl
dCBBUElzIGNhbiBiZSBncmFudGVkIHdoZW46DQo+ID4gICAgLSBTeXN0ZW0gaXMgdXAgYW5kIGRw
bSBmZWF0dXJlcyBhcmUgZW5hYmxlZC4NCj4gPiAgICAtIFN5c3RlbSBpcyB1bmRlciByZXN1bWlu
ZyBhbmQgZHBtIGZlYXR1cmVzIGFyZSBub3QgeWV0IGVuYWJsZWQuDQo+ID4gICAgICBVbmRlciBz
dWNoIHNjZW5hcmlvLCB0aGUgUE1GVyBpcyBhbHJlYWR5IGFsaXZlIGFuZCBjYW4gc3VwcG9ydA0K
PiA+ICAgICAgdGhvc2UgZ3B1IHJlc2V0IGZ1bmN0aW9uYWxpdGllcy4NCj4gPg0KPiA+IFNpZ25l
ZC1vZmYtYnk6IEV2YW4gUXVhbiA8ZXZhbi5xdWFuQGFtZC5jb20+DQo+ID4gQ2hhbmdlLUlkOiBJ
OGMyZjA3MTM4OTIxZWI1M2EyYmQ3ZmI5NGY5YjM2MjJhZjBlYWNmOA0KPiA+IC0tLQ0KPiA+ICAg
Li4uL2dwdS9kcm0vYW1kL2luY2x1ZGUva2dkX3BwX2ludGVyZmFjZS5oICAgIHwgIDEgKw0KPiA+
ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9wbS9hbWRncHVfZHBtLmMgICAgICAgICAgIHwgMzQgKysr
KysrKysrKysrKysrDQo+ID4gICAuLi4vZ3B1L2RybS9hbWQvcG0vcG93ZXJwbGF5L2FtZF9wb3dl
cnBsYXkuYyAgfCA0Mg0KPiArKysrKysrKysrKysrKystLS0tDQo+ID4gICAuLi4vZHJtL2FtZC9w
bS9wb3dlcnBsYXkvaHdtZ3Ivc211N19od21nci5jICAgfCAgMSArDQo+ID4gICAuLi4vZHJtL2Ft
ZC9wbS9wb3dlcnBsYXkvaHdtZ3Ivc211OF9od21nci5jICAgfCAxNyArKysrKysrKw0KPiA+ICAg
ZHJpdmVycy9ncHUvZHJtL2FtZC9wbS9wb3dlcnBsYXkvaW5jL2h3bWdyLmggIHwgIDEgKw0KPiA+
ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9wbS9zd3NtdS9hbWRncHVfc211LmMgICAgIHwgMzIgKysr
KysrKy0tLS0tLS0NCj4gPiAgIDcgZmlsZXMgY2hhbmdlZCwgMTAxIGluc2VydGlvbnMoKyksIDI3
IGRlbGV0aW9ucygtKQ0KPiA+DQo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
aW5jbHVkZS9rZ2RfcHBfaW50ZXJmYWNlLmgNCj4gPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvaW5j
bHVkZS9rZ2RfcHBfaW50ZXJmYWNlLmgNCj4gPiBpbmRleCBhNGMyNjdmMTU5NTkuLjg5MjY0OGE0
YTM1MyAxMDA2NDQNCj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2luY2x1ZGUva2dkX3Bw
X2ludGVyZmFjZS5oDQo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9pbmNsdWRlL2tnZF9w
cF9pbnRlcmZhY2UuaA0KPiA+IEBAIC00MDksNiArNDA5LDcgQEAgc3RydWN0IGFtZF9wbV9mdW5j
cyB7DQo+ID4gICAJCQkJICAgc3RydWN0IGRwbV9jbG9ja3MgKmNsb2NrX3RhYmxlKTsNCj4gPiAg
IAlpbnQgKCpnZXRfc211X3Bydl9idWZfZGV0YWlscykodm9pZCAqaGFuZGxlLCB2b2lkICoqYWRk
ciwgc2l6ZV90DQo+ICpzaXplKTsNCj4gPiAgIAl2b2lkICgqcG1fY29tcHV0ZV9jbG9ja3MpKHZv
aWQgKmhhbmRsZSk7DQo+ID4gKwlib29sICgqaXNfc21jX2FsaXZlKSh2b2lkICpoYW5kbGUpOw0K
PiA+ICAgfTsNCj4gPg0KPiA+ICAgc3RydWN0IG1ldHJpY3NfdGFibGVfaGVhZGVyIHsNCj4gPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wbS9hbWRncHVfZHBtLmMNCj4gPiBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvcG0vYW1kZ3B1X2RwbS5jDQo+ID4gaW5kZXggYjQ2YWUwMDYzMDQ3
Li41ZjFkMzM0MmY4N2IgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wbS9h
bWRncHVfZHBtLmMNCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL2FtZGdwdV9kcG0u
Yw0KPiA+IEBAIC0xMjAsMTIgKzEyMCwyNSBAQCBpbnQNCj4gYW1kZ3B1X2RwbV9zZXRfcG93ZXJn
YXRpbmdfYnlfc211KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KPiB1aW50MzJfdCBibG9j
aw0KPiA+ICAgCXJldHVybiByZXQ7DQo+ID4gICB9DQo+ID4NCj4gPiArc3RhdGljIGJvb2wgYW1k
Z3B1X2RwbV9pc19zbWNfYWxpdmUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpIHsNCj4gPiAr
CWNvbnN0IHN0cnVjdCBhbWRfcG1fZnVuY3MgKnBwX2Z1bmNzID0gYWRldi0+cG93ZXJwbGF5LnBw
X2Z1bmNzOw0KPiA+ICsNCj4gPiArCWlmICghcHBfZnVuY3MgfHwgIXBwX2Z1bmNzLT5pc19zbWNf
YWxpdmUpDQo+ID4gKwkJcmV0dXJuIGZhbHNlOw0KPiA+ICsNCj4gPiArCXJldHVybiBwcF9mdW5j
cy0+aXNfc21jX2FsaXZlOw0KPiA+ICt9DQo+ID4gKw0KPiA+ICAgaW50IGFtZGdwdV9kcG1fYmFj
b19lbnRlcihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikNCj4gPiAgIHsNCj4gPiAgIAljb25z
dCBzdHJ1Y3QgYW1kX3BtX2Z1bmNzICpwcF9mdW5jcyA9IGFkZXYtPnBvd2VycGxheS5wcF9mdW5j
czsNCj4gPiAgIAl2b2lkICpwcF9oYW5kbGUgPSBhZGV2LT5wb3dlcnBsYXkucHBfaGFuZGxlOw0K
PiA+ICAgCWludCByZXQgPSAwOw0KPiA+DQo+ID4gKwlpZiAoIWFtZGdwdV9kcG1faXNfc21jX2Fs
aXZlKGFkZXYpKQ0KPiA+ICsJCXJldHVybiAtRU9QTk9UU1VQUDsNCj4gPiArDQo+ID4gICAJaWYg
KCFwcF9mdW5jcyB8fCAhcHBfZnVuY3MtPnNldF9hc2ljX2JhY29fc3RhdGUpDQo+ID4gICAJCXJl
dHVybiAtRU5PRU5UOw0KPiA+DQo+ID4gQEAgLTE0NSw2ICsxNTgsOSBAQCBpbnQgYW1kZ3B1X2Rw
bV9iYWNvX2V4aXQoc3RydWN0IGFtZGdwdV9kZXZpY2UNCj4gKmFkZXYpDQo+ID4gICAJdm9pZCAq
cHBfaGFuZGxlID0gYWRldi0+cG93ZXJwbGF5LnBwX2hhbmRsZTsNCj4gPiAgIAlpbnQgcmV0ID0g
MDsNCj4gPg0KPiA+ICsJaWYgKCFhbWRncHVfZHBtX2lzX3NtY19hbGl2ZShhZGV2KSkNCj4gPiAr
CQlyZXR1cm4gLUVPUE5PVFNVUFA7DQo+ID4gKw0KPiA+ICAgCWlmICghcHBfZnVuY3MgfHwgIXBw
X2Z1bmNzLT5zZXRfYXNpY19iYWNvX3N0YXRlKQ0KPiA+ICAgCQlyZXR1cm4gLUVOT0VOVDsNCj4g
Pg0KPiA+IEBAIC0xNjQsNiArMTgwLDkgQEAgaW50IGFtZGdwdV9kcG1fc2V0X21wMV9zdGF0ZShz
dHJ1Y3QNCj4gYW1kZ3B1X2RldmljZSAqYWRldiwNCj4gPiAgIAlpbnQgcmV0ID0gMDsNCj4gPiAg
IAljb25zdCBzdHJ1Y3QgYW1kX3BtX2Z1bmNzICpwcF9mdW5jcyA9IGFkZXYtPnBvd2VycGxheS5w
cF9mdW5jczsNCj4gPg0KPiA+ICsJaWYgKCFhbWRncHVfZHBtX2lzX3NtY19hbGl2ZShhZGV2KSkN
Cj4gPiArCQlyZXR1cm4gLUVPUE5PVFNVUFA7DQo+ID4gKw0KPiA+ICAgCWlmIChwcF9mdW5jcyAm
JiBwcF9mdW5jcy0+c2V0X21wMV9zdGF0ZSkgew0KPiA+ICAgCQltdXRleF9sb2NrKCZhZGV2LT5w
bS5tdXRleCk7DQo+ID4NCj4gPiBAQCAtMTg0LDYgKzIwMyw5IEBAIGJvb2wgYW1kZ3B1X2RwbV9p
c19iYWNvX3N1cHBvcnRlZChzdHJ1Y3QNCj4gYW1kZ3B1X2RldmljZSAqYWRldikNCj4gPiAgIAli
b29sIGJhY29fY2FwOw0KPiA+ICAgCWludCByZXQgPSAwOw0KPiA+DQo+ID4gKwlpZiAoIWFtZGdw
dV9kcG1faXNfc21jX2FsaXZlKGFkZXYpKQ0KPiA+ICsJCXJldHVybiBmYWxzZTsNCj4gPiArDQo+
ID4gICAJaWYgKCFwcF9mdW5jcyB8fCAhcHBfZnVuY3MtPmdldF9hc2ljX2JhY29fY2FwYWJpbGl0
eSkNCj4gPiAgIAkJcmV0dXJuIGZhbHNlOw0KPiA+DQo+ID4gQEAgLTIwMyw2ICsyMjUsOSBAQCBp
bnQgYW1kZ3B1X2RwbV9tb2RlMl9yZXNldChzdHJ1Y3QNCj4gYW1kZ3B1X2RldmljZSAqYWRldikN
Cj4gPiAgIAl2b2lkICpwcF9oYW5kbGUgPSBhZGV2LT5wb3dlcnBsYXkucHBfaGFuZGxlOw0KPiA+
ICAgCWludCByZXQgPSAwOw0KPiA+DQo+ID4gKwlpZiAoIWFtZGdwdV9kcG1faXNfc21jX2FsaXZl
KGFkZXYpKQ0KPiA+ICsJCXJldHVybiAtRU9QTk9UU1VQUDsNCj4gPiArDQo+ID4gICAJaWYgKCFw
cF9mdW5jcyB8fCAhcHBfZnVuY3MtPmFzaWNfcmVzZXRfbW9kZV8yKQ0KPiA+ICAgCQlyZXR1cm4g
LUVOT0VOVDsNCj4gPg0KPiA+IEBAIC0yMjEsNiArMjQ2LDkgQEAgaW50IGFtZGdwdV9kcG1fYmFj
b19yZXNldChzdHJ1Y3QNCj4gYW1kZ3B1X2RldmljZSAqYWRldikNCj4gPiAgIAl2b2lkICpwcF9o
YW5kbGUgPSBhZGV2LT5wb3dlcnBsYXkucHBfaGFuZGxlOw0KPiA+ICAgCWludCByZXQgPSAwOw0K
PiA+DQo+ID4gKwlpZiAoIWFtZGdwdV9kcG1faXNfc21jX2FsaXZlKGFkZXYpKQ0KPiA+ICsJCXJl
dHVybiAtRU9QTk9UU1VQUDsNCj4gPiArDQo+ID4gICAJaWYgKCFwcF9mdW5jcyB8fCAhcHBfZnVu
Y3MtPnNldF9hc2ljX2JhY29fc3RhdGUpDQo+ID4gICAJCXJldHVybiAtRU5PRU5UOw0KPiA+DQo+
ID4gQEAgLTI0NCw2ICsyNzIsOSBAQCBib29sDQo+IGFtZGdwdV9kcG1faXNfbW9kZTFfcmVzZXRf
c3VwcG9ydGVkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQ0KPiA+ICAgCXN0cnVjdCBzbXVf
Y29udGV4dCAqc211ID0gYWRldi0+cG93ZXJwbGF5LnBwX2hhbmRsZTsNCj4gPiAgIAlib29sIHN1
cHBvcnRfbW9kZTFfcmVzZXQgPSBmYWxzZTsNCj4gPg0KPiA+ICsJaWYgKCFhbWRncHVfZHBtX2lz
X3NtY19hbGl2ZShhZGV2KSkNCj4gPiArCQlyZXR1cm4gZmFsc2U7DQo+ID4gKw0KPiA+ICAgCWlm
IChpc19zdXBwb3J0X3N3X3NtdShhZGV2KSkgew0KPiA+ICAgCQltdXRleF9sb2NrKCZhZGV2LT5w
bS5tdXRleCk7DQo+ID4gICAJCXN1cHBvcnRfbW9kZTFfcmVzZXQgPQ0KPiBzbXVfbW9kZTFfcmVz
ZXRfaXNfc3VwcG9ydChzbXUpOyBAQCAtMjU4LDYNCj4gPiArMjg5LDkgQEAgaW50IGFtZGdwdV9k
cG1fbW9kZTFfcmVzZXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpDQo+ID4gICAJc3RydWN0
IHNtdV9jb250ZXh0ICpzbXUgPSBhZGV2LT5wb3dlcnBsYXkucHBfaGFuZGxlOw0KPiA+ICAgCWlu
dCByZXQgPSAtRU9QTk9UU1VQUDsNCj4gPg0KPiA+ICsJaWYgKCFhbWRncHVfZHBtX2lzX3NtY19h
bGl2ZShhZGV2KSkNCj4gPiArCQlyZXR1cm4gLUVPUE5PVFNVUFA7DQo+ID4gKw0KPiA+ICAgCWlm
IChpc19zdXBwb3J0X3N3X3NtdShhZGV2KSkgew0KPiA+ICAgCQltdXRleF9sb2NrKCZhZGV2LT5w
bS5tdXRleCk7DQo+ID4gICAJCXJldCA9IHNtdV9tb2RlMV9yZXNldChzbXUpOw0KPiA+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL3Bvd2VycGxheS9hbWRfcG93ZXJwbGF5LmMN
Cj4gPiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG0vcG93ZXJwbGF5L2FtZF9wb3dlcnBsYXkuYw0K
PiA+IGluZGV4IGJiYTkyM2NmZTA4Yy4uNGM3MDlmN2JjZDUxIDEwMDY0NA0KPiA+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvcG0vcG93ZXJwbGF5L2FtZF9wb3dlcnBsYXkuYw0KPiA+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvcG0vcG93ZXJwbGF5L2FtZF9wb3dlcnBsYXkuYw0KPiA+IEBA
IC04NDQsOSArODQ0LDYgQEAgc3RhdGljIGludCBwcF9kcG1fc2V0X21wMV9zdGF0ZSh2b2lkICpo
YW5kbGUsDQo+IGVudW0gcHBfbXAxX3N0YXRlIG1wMV9zdGF0ZSkNCj4gPiAgIAlpZiAoIWh3bWdy
KQ0KPiA+ICAgCQlyZXR1cm4gLUVJTlZBTDsNCj4gPg0KPiA+IC0JaWYgKCFod21nci0+cG1fZW4p
DQo+ID4gLQkJcmV0dXJuIDA7DQo+ID4gLQ0KPiA+ICAgCWlmIChod21nci0+aHdtZ3JfZnVuYy0+
c2V0X21wMV9zdGF0ZSkNCj4gPiAgIAkJcmV0dXJuIGh3bWdyLT5od21ncl9mdW5jLT5zZXRfbXAx
X3N0YXRlKGh3bWdyLA0KPiBtcDFfc3RhdGUpOw0KPiA+DQo+ID4gQEAgLTEzMDUsOCArMTMwMiw3
IEBAIHN0YXRpYyBpbnQgcHBfZ2V0X2FzaWNfYmFjb19jYXBhYmlsaXR5KHZvaWQNCj4gKmhhbmRs
ZSwgYm9vbCAqY2FwKQ0KPiA+ICAgCWlmICghaHdtZ3IpDQo+ID4gICAJCXJldHVybiAtRUlOVkFM
Ow0KPiA+DQo+ID4gLQlpZiAoIShod21nci0+bm90X3ZmICYmIGFtZGdwdV9kcG0pIHx8DQo+ID4g
LQkJIWh3bWdyLT5od21ncl9mdW5jLT5nZXRfYXNpY19iYWNvX2NhcGFiaWxpdHkpDQo+ID4gKwlp
ZiAoIWh3bWdyLT5od21ncl9mdW5jLT5nZXRfYXNpY19iYWNvX2NhcGFiaWxpdHkpDQo+ID4gICAJ
CXJldHVybiAwOw0KPiA+DQo+ID4gICAJaHdtZ3ItPmh3bWdyX2Z1bmMtPmdldF9hc2ljX2JhY29f
Y2FwYWJpbGl0eShod21nciwgY2FwKTsgQEAgLQ0KPiAxMzIxLDcNCj4gPiArMTMxNyw3IEBAIHN0
YXRpYyBpbnQgcHBfZ2V0X2FzaWNfYmFjb19zdGF0ZSh2b2lkICpoYW5kbGUsIGludCAqc3RhdGUp
DQo+ID4gICAJaWYgKCFod21ncikNCj4gPiAgIAkJcmV0dXJuIC1FSU5WQUw7DQo+ID4NCj4gPiAt
CWlmICghaHdtZ3ItPnBtX2VuIHx8ICFod21nci0+aHdtZ3JfZnVuYy0+Z2V0X2FzaWNfYmFjb19z
dGF0ZSkNCj4gPiArCWlmICghaHdtZ3ItPmh3bWdyX2Z1bmMtPmdldF9hc2ljX2JhY29fc3RhdGUp
DQo+ID4gICAJCXJldHVybiAwOw0KPiA+DQo+ID4gICAJaHdtZ3ItPmh3bWdyX2Z1bmMtPmdldF9h
c2ljX2JhY29fc3RhdGUoaHdtZ3IsIChlbnVtDQo+IEJBQ09fU1RBVEUNCj4gPiAqKXN0YXRlKTsg
QEAgLTEzMzYsOCArMTMzMiw3IEBAIHN0YXRpYyBpbnQgcHBfc2V0X2FzaWNfYmFjb19zdGF0ZSh2
b2lkDQo+ICpoYW5kbGUsIGludCBzdGF0ZSkNCj4gPiAgIAlpZiAoIWh3bWdyKQ0KPiA+ICAgCQly
ZXR1cm4gLUVJTlZBTDsNCj4gPg0KPiA+IC0JaWYgKCEoaHdtZ3ItPm5vdF92ZiAmJiBhbWRncHVf
ZHBtKSB8fA0KPiA+IC0JCSFod21nci0+aHdtZ3JfZnVuYy0+c2V0X2FzaWNfYmFjb19zdGF0ZSkN
Cj4gPiArCWlmICghaHdtZ3ItPmh3bWdyX2Z1bmMtPnNldF9hc2ljX2JhY29fc3RhdGUpDQo+ID4g
ICAJCXJldHVybiAwOw0KPiA+DQo+ID4gICAJaHdtZ3ItPmh3bWdyX2Z1bmMtPnNldF9hc2ljX2Jh
Y29fc3RhdGUoaHdtZ3IsIChlbnVtDQo+ID4gQkFDT19TVEFURSlzdGF0ZSk7IEBAIC0xMzc5LDcg
KzEzNzQsNyBAQCBzdGF0aWMgaW50DQo+IHBwX2FzaWNfcmVzZXRfbW9kZV8yKHZvaWQgKmhhbmRs
ZSkNCj4gPiAgIHsNCj4gPiAgIAlzdHJ1Y3QgcHBfaHdtZ3IgKmh3bWdyID0gaGFuZGxlOw0KPiA+
DQo+ID4gLQlpZiAoIWh3bWdyIHx8ICFod21nci0+cG1fZW4pDQo+ID4gKwlpZiAoIWh3bWdyKQ0K
PiA+ICAgCQlyZXR1cm4gLUVJTlZBTDsNCj4gPg0KPiA+ICAgCWlmIChod21nci0+aHdtZ3JfZnVu
Yy0+YXNpY19yZXNldCA9PSBOVUxMKSB7IEBAIC0xNTE3LDYNCj4gKzE1MTIsMzQgQEANCj4gPiBz
dGF0aWMgdm9pZCBwcF9wbV9jb21wdXRlX2Nsb2Nrcyh2b2lkICpoYW5kbGUpDQo+ID4gICAJCQkg
ICAgICBOVUxMKTsNCj4gPiAgIH0NCj4gPg0KPiA+ICsvKiBNUCBBcGVydHVyZXMgKi8NCj4gPiAr
I2RlZmluZSBNUDFfUHVibGljCQkJCQkweDAzYjAwMDAwDQo+ID4gKyNkZWZpbmUgc21uTVAxX0ZJ
Uk1XQVJFX0ZMQUdTDQo+IAkweDMwMTAwMjgNCj4gPiArI2RlZmluZSBNUDFfRklSTVdBUkVfRkxB
R1NfX0lOVEVSUlVQVFNfRU5BQkxFRF9NQVNLDQo+IAkweDAwMDAwMDAxTA0KPiA+ICsNCj4gPiAr
c3RhdGljIGJvb2wgcHBfaXNfc21jX2FsaXZlKHZvaWQgKmhhbmRsZSkgew0KPiA+ICsJc3RydWN0
IHBwX2h3bWdyICpod21nciA9IGhhbmRsZTsNCj4gPiArCXN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2ID0gaHdtZ3ItPmFkZXY7DQo+ID4gKwl1aW50MzJfdCBtcDFfZndfZmxhZ3M7DQo+ID4gKw0K
PiA+ICsJLyoNCj4gPiArCSAqIElmIHNvbWUgQVNJQyhlLmcuIHNtdTcvc211OCkgbmVlZHMgc3Bl
Y2lhbCBoYW5kbGluZyBmb3INCj4gPiArCSAqIGNoZWNraW5nIHNtYyBhbGl2ZSwgaXQgc2hvdWxk
IGhhdmUgaXRzIG93biBpbXBsZW1lbnRhdGlvbg0KPiA+ICsJICogZm9yIC0+aXNfc21jX2FsaXZl
Lg0KPiA+ICsJICovDQo+ID4gKwlpZiAoaHdtZ3ItPmh3bWdyX2Z1bmMtPmlzX3NtY19hbGl2ZSkN
Cj4gPiArCQlyZXR1cm4gaHdtZ3ItPmh3bWdyX2Z1bmMtPmlzX3NtY19hbGl2ZShod21ncik7DQo+
ID4gKw0KPiA+ICsJbXAxX2Z3X2ZsYWdzID0gUlJFRzMyX1BDSUUoTVAxX1B1YmxpYyB8DQo+ID4g
KwkJCQkgICAoc21uTVAxX0ZJUk1XQVJFX0ZMQUdTICYgMHhmZmZmZmZmZikpOw0KPiA+ICsNCj4g
DQo+IFRoZSBmbGFncyBjaGVjayBkb2Vzbid0IHRlbGwgd2hldGhlciBQTUZXIGlzIGh1bmcgb3Ig
bm90LiBJdCBpcyBhIG1pbmltYWwNCj4gdGhpbmcgdGhhdCBpcyBzZXQgYWZ0ZXIgUE1GVyBib290
LiBUbyBjYWxsIHRoZSBBUEkgdGhpcyBjb25kaXRpb24gaXMgbmVjZXNzYXJ5IGluDQo+IGFuIGlt
cGxpY2l0IHdheS4gRHJpdmVyIGFsd2F5cyBjaGVjayB0aGlzIG9uIGJvb3QsIGlmIG5vdCBkcml2
ZXIgYWJvcnRzIHNtdSBpbml0Lg0KPiANCj4gU28gYmV0dGVyIHRoaW5nIGlzIHRvIGdvIGFoZWFk
IGFuZCBzZW5kIHRoZSBtZXNzYWdlIHdpdGhvdXQgYW55IGNoZWNrLCBpdCB3aWxsDQo+IHRlbGwg
dGhlIHJlc3VsdCB3aGV0aGVyIFBNRlcgaXMgcmVhbGx5IHdvcmtpbmcgb3Igbm90Lg0KPiANCj4g
SW4gc2hvcnQgdGhpcyBBUEkgaXMgbm90IG5lZWRlZC4NCltRdWFuLCBFdmFuXSBJdCB3YXMgbm90
IGRlc2lnbmVkIHRvIGNvdmVyICJQTUZXIGh1bmciLiBJbnN0ZWFkLCBpdCB3YXMgZGVzaWduZWQg
dG8gYmUgc3VwcG9ydCBlYXJseSBwaGFzZSBvZiBwb3N0LXNpbGljb24gYnJpbmd1cC4NCkF0IHRo
YXQgdGltZSwgdGhlIFNNVSBtYXkgYmUgbm90IGVuYWJsZWQvdXAuIFdlIG5lZWQgdG8gcHJldmVu
dCB0aGlzIEFQSSBmcm9tIHdyb25nbHkgY2FsbGVkLg0KDQpCUg0KRXZhbg0KPiANCj4gVGhhbmtz
LA0KPiBMaWpvDQo+IA0KPiA+ICsJaWYgKG1wMV9md19mbGFncyAmDQo+IE1QMV9GSVJNV0FSRV9G
TEFHU19fSU5URVJSVVBUU19FTkFCTEVEX01BU0spDQo+ID4gKwkJcmV0dXJuIHRydWU7DQo+ID4g
Kw0KPiA+ICsJcmV0dXJuIGZhbHNlOw0KPiA+ICt9DQo+ID4gKw0KPiA+ICAgc3RhdGljIGNvbnN0
IHN0cnVjdCBhbWRfcG1fZnVuY3MgcHBfZHBtX2Z1bmNzID0gew0KPiA+ICAgCS5sb2FkX2Zpcm13
YXJlID0gcHBfZHBtX2xvYWRfZncsDQo+ID4gICAJLndhaXRfZm9yX2Z3X2xvYWRpbmdfY29tcGxl
dGUgPSBwcF9kcG1fZndfbG9hZGluZ19jb21wbGV0ZSwNCj4gQEANCj4gPiAtMTU4Miw0ICsxNjA1
LDUgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBhbWRfcG1fZnVuY3MgcHBfZHBtX2Z1bmNzID0gew0K
PiA+ICAgCS5nZnhfc3RhdGVfY2hhbmdlX3NldCA9IHBwX2dmeF9zdGF0ZV9jaGFuZ2Vfc2V0LA0K
PiA+ICAgCS5nZXRfc211X3Bydl9idWZfZGV0YWlscyA9IHBwX2dldF9wcnZfYnVmZmVyX2RldGFp
bHMsDQo+ID4gICAJLnBtX2NvbXB1dGVfY2xvY2tzID0gcHBfcG1fY29tcHV0ZV9jbG9ja3MsDQo+
ID4gKwkuaXNfc21jX2FsaXZlID0gcHBfaXNfc21jX2FsaXZlLA0KPiA+ICAgfTsNCj4gPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wbS9wb3dlcnBsYXkvaHdtZ3Ivc211N19od21n
ci5jDQo+ID4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL3Bvd2VycGxheS9od21nci9zbXU3X2h3
bWdyLmMNCj4gPiBpbmRleCBhMWUxMTAzNzgzMWEuLjExODAzOWI5NjUyNCAxMDA2NDQNCj4gPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL3Bvd2VycGxheS9od21nci9zbXU3X2h3bWdyLmMN
Cj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL3Bvd2VycGxheS9od21nci9zbXU3X2h3
bWdyLmMNCj4gPiBAQCAtNTczNSw2ICs1NzM1LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwcF9o
d21ncl9mdW5jDQo+IHNtdTdfaHdtZ3JfZnVuY3MgPSB7DQo+ID4gICAJLmdldF9hc2ljX2JhY29f
c3RhdGUgPSBzbXU3X2JhY29fZ2V0X3N0YXRlLA0KPiA+ICAgCS5zZXRfYXNpY19iYWNvX3N0YXRl
ID0gc211N19iYWNvX3NldF9zdGF0ZSwNCj4gPiAgIAkucG93ZXJfb2ZmX2FzaWMgPSBzbXU3X3Bv
d2VyX29mZl9hc2ljLA0KPiA+ICsJLmlzX3NtY19hbGl2ZSA9IHNtdTdfaXNfc21jX3JhbV9ydW5u
aW5nLA0KPiA+ICAgfTsNCj4gPg0KPiA+ICAgdWludDhfdCBzbXU3X2dldF9zbGVlcF9kaXZpZGVy
X2lkX2Zyb21fY2xvY2sodWludDMyX3QgY2xvY2ssIGRpZmYNCj4gPiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvcG0vcG93ZXJwbGF5L2h3bWdyL3NtdThfaHdtZ3IuYw0KPiA+IGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9wbS9wb3dlcnBsYXkvaHdtZ3Ivc211OF9od21nci5jDQo+ID4gaW5kZXgg
YjUwZmQ0YTRhM2QxLi5mYzRkNTgzMjlmNmQgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9wbS9wb3dlcnBsYXkvaHdtZ3Ivc211OF9od21nci5jDQo+ID4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9wbS9wb3dlcnBsYXkvaHdtZ3Ivc211OF9od21nci5jDQo+ID4gQEAgLTIw
MTUsNiArMjAxNSwyMiBAQCBzdGF0aWMgdm9pZCBzbXU4X2RwbV9wb3dlcmdhdGVfdmNlKHN0cnVj
dA0KPiBwcF9od21nciAqaHdtZ3IsIGJvb2wgYmdhdGUpDQo+ID4gICAJfQ0KPiA+ICAgfQ0KPiA+
DQo+ID4gKyNkZWZpbmUgaXhNUDFfRklSTVdBUkVfRkxBR1MNCj4gCTB4MzAwODIxMA0KPiA+ICsj
ZGVmaW5lIE1QMV9GSVJNV0FSRV9GTEFHU19fSU5URVJSVVBUU19FTkFCTEVEX01BU0sNCj4gCTB4
MDAwMDAwMDFMDQo+ID4gKw0KPiA+ICtzdGF0aWMgYm9vbCBzbXU4X2lzX3NtY19ydW5uaW5nKHN0
cnVjdCBwcF9od21nciAqaHdtZ3IpIHsNCj4gPiArCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
ID0gaHdtZ3ItPmFkZXY7DQo+ID4gKwl1aW50MzJfdCBtcDFfZndfZmxhZ3M7DQo+ID4gKw0KPiA+
ICsJbXAxX2Z3X2ZsYWdzID0gUlJFRzMyX1NNQyhpeE1QMV9GSVJNV0FSRV9GTEFHUyk7DQo+ID4g
Kw0KPiA+ICsJaWYgKG1wMV9md19mbGFncyAmDQo+IE1QMV9GSVJNV0FSRV9GTEFHU19fSU5URVJS
VVBUU19FTkFCTEVEX01BU0spDQo+ID4gKwkJcmV0dXJuIHRydWU7DQo+ID4gKw0KPiA+ICsJcmV0
dXJuIGZhbHNlOw0KPiA+ICt9DQo+ID4gKw0KPiA+ICAgc3RhdGljIGNvbnN0IHN0cnVjdCBwcF9o
d21ncl9mdW5jIHNtdThfaHdtZ3JfZnVuY3MgPSB7DQo+ID4gICAJLmJhY2tlbmRfaW5pdCA9IHNt
dThfaHdtZ3JfYmFja2VuZF9pbml0LA0KPiA+ICAgCS5iYWNrZW5kX2ZpbmkgPSBzbXU4X2h3bWdy
X2JhY2tlbmRfZmluaSwgQEAgLTIwNDcsNiArMjA2Myw3DQo+IEBADQo+ID4gc3RhdGljIGNvbnN0
IHN0cnVjdCBwcF9od21ncl9mdW5jIHNtdThfaHdtZ3JfZnVuY3MgPSB7DQo+ID4gICAJLmR5bmFt
aWNfc3RhdGVfbWFuYWdlbWVudF9kaXNhYmxlID0gc211OF9kaXNhYmxlX2RwbV90YXNrcywNCj4g
PiAgIAkubm90aWZ5X2NhY19idWZmZXJfaW5mbyA9IHNtdThfbm90aWZ5X2NhY19idWZmZXJfaW5m
bywNCj4gPiAgIAkuZ2V0X3RoZXJtYWxfdGVtcGVyYXR1cmVfcmFuZ2UgPQ0KPiA+IHNtdThfZ2V0
X3RoZXJtYWxfdGVtcGVyYXR1cmVfcmFuZ2UsDQo+ID4gKwkuaXNfc21jX2FsaXZlID0gc211OF9p
c19zbWNfcnVubmluZywNCj4gPiAgIH07DQo+ID4NCj4gPiAgIGludCBzbXU4X2luaXRfZnVuY3Rp
b25fcG9pbnRlcnMoc3RydWN0IHBwX2h3bWdyICpod21ncikgZGlmZiAtLWdpdA0KPiA+IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9wbS9wb3dlcnBsYXkvaW5jL2h3bWdyLmgNCj4gPiBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvcG0vcG93ZXJwbGF5L2luYy9od21nci5oDQo+ID4gaW5kZXggNGY3ZjJmNDU1
MzAxLi43OTBmYzM4Nzc1MmMgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9w
bS9wb3dlcnBsYXkvaW5jL2h3bWdyLmgNCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bt
L3Bvd2VycGxheS9pbmMvaHdtZ3IuaA0KPiA+IEBAIC0zNjQsNiArMzY0LDcgQEAgc3RydWN0IHBw
X2h3bWdyX2Z1bmMgew0KPiA+ICAgCQkJCQlib29sIGRpc2FibGUpOw0KPiA+ICAgCXNzaXplX3Qg
KCpnZXRfZ3B1X21ldHJpY3MpKHN0cnVjdCBwcF9od21nciAqaHdtZ3IsIHZvaWQgKip0YWJsZSk7
DQo+ID4gICAJaW50ICgqZ2Z4X3N0YXRlX2NoYW5nZSkoc3RydWN0IHBwX2h3bWdyICpod21nciwg
dWludDMyX3Qgc3RhdGUpOw0KPiA+ICsJYm9vbCAoKmlzX3NtY19hbGl2ZSkoc3RydWN0IHBwX2h3
bWdyICpod21ncik7DQo+ID4gICB9Ow0KPiA+DQo+ID4gICBzdHJ1Y3QgcHBfdGFibGVfZnVuYyB7
DQo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG0vc3dzbXUvYW1kZ3B1X3Nt
dS5jDQo+ID4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL3BtL3N3c211L2FtZGdwdV9zbXUuYw0KPiA+
IGluZGV4IDhiOGZlYWY3YWEwZS4uMjdhNDUzZmI0ZGI3IDEwMDY0NA0KPiA+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvcG0vc3dzbXUvYW1kZ3B1X3NtdS5jDQo+ID4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9wbS9zd3NtdS9hbWRncHVfc211LmMNCj4gPiBAQCAtMTg0NSw5ICsxODQ1LDYg
QEAgc3RhdGljIGludCBzbXVfc2V0X21wMV9zdGF0ZSh2b2lkICpoYW5kbGUsDQo+ID4gICAJc3Ry
dWN0IHNtdV9jb250ZXh0ICpzbXUgPSBoYW5kbGU7DQo+ID4gICAJaW50IHJldCA9IDA7DQo+ID4N
Cj4gPiAtCWlmICghc211LT5wbV9lbmFibGVkKQ0KPiA+IC0JCXJldHVybiAtRU9QTk9UU1VQUDsN
Cj4gPiAtDQo+ID4gICAJaWYgKHNtdS0+cHB0X2Z1bmNzICYmDQo+ID4gICAJICAgIHNtdS0+cHB0
X2Z1bmNzLT5zZXRfbXAxX3N0YXRlKQ0KPiA+ICAgCQlyZXQgPSBzbXUtPnBwdF9mdW5jcy0+c2V0
X21wMV9zdGF0ZShzbXUsIG1wMV9zdGF0ZSk7DQo+IEBAIC0yNTEzLDkNCj4gPiArMjUxMCw2IEBA
IHN0YXRpYyBpbnQgc211X2dldF9iYWNvX2NhcGFiaWxpdHkodm9pZCAqaGFuZGxlLCBib29sICpj
YXApDQo+ID4NCj4gPiAgIAkqY2FwID0gZmFsc2U7DQo+ID4NCj4gPiAtCWlmICghc211LT5wbV9l
bmFibGVkKQ0KPiA+IC0JCXJldHVybiAwOw0KPiA+IC0NCj4gPiAgIAlpZiAoc211LT5wcHRfZnVu
Y3MgJiYgc211LT5wcHRfZnVuY3MtPmJhY29faXNfc3VwcG9ydCkNCj4gPiAgIAkJKmNhcCA9IHNt
dS0+cHB0X2Z1bmNzLT5iYWNvX2lzX3N1cHBvcnQoc211KTsNCj4gPg0KPiA+IEBAIC0yNTI3LDkg
KzI1MjEsNiBAQCBzdGF0aWMgaW50IHNtdV9iYWNvX3NldF9zdGF0ZSh2b2lkICpoYW5kbGUsIGlu
dA0KPiBzdGF0ZSkNCj4gPiAgIAlzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSA9IGhhbmRsZTsNCj4g
PiAgIAlpbnQgcmV0ID0gMDsNCj4gPg0KPiA+IC0JaWYgKCFzbXUtPnBtX2VuYWJsZWQpDQo+ID4g
LQkJcmV0dXJuIC1FT1BOT1RTVVBQOw0KPiA+IC0NCj4gPiAgIAlpZiAoc3RhdGUgPT0gMCkgew0K
PiA+ICAgCQlpZiAoc211LT5wcHRfZnVuY3MtPmJhY29fZXhpdCkNCj4gPiAgIAkJCXJldCA9IHNt
dS0+cHB0X2Z1bmNzLT5iYWNvX2V4aXQoc211KTsgQEAgLTI1NTEsOQ0KPiArMjU0Miw2IEBAIGJv
b2wNCj4gPiBzbXVfbW9kZTFfcmVzZXRfaXNfc3VwcG9ydChzdHJ1Y3Qgc211X2NvbnRleHQgKnNt
dSkNCj4gPiAgIHsNCj4gPiAgIAlib29sIHJldCA9IGZhbHNlOw0KPiA+DQo+ID4gLQlpZiAoIXNt
dS0+cG1fZW5hYmxlZCkNCj4gPiAtCQlyZXR1cm4gZmFsc2U7DQo+ID4gLQ0KPiA+ICAgCWlmIChz
bXUtPnBwdF9mdW5jcyAmJiBzbXUtPnBwdF9mdW5jcy0+bW9kZTFfcmVzZXRfaXNfc3VwcG9ydCkN
Cj4gPiAgIAkJcmV0ID0gc211LT5wcHRfZnVuY3MtPm1vZGUxX3Jlc2V0X2lzX3N1cHBvcnQoc211
KTsNCj4gPg0KPiA+IEBAIC0yNTY0LDkgKzI1NTIsNiBAQCBpbnQgc211X21vZGUxX3Jlc2V0KHN0
cnVjdCBzbXVfY29udGV4dCAqc211KQ0KPiA+ICAgew0KPiA+ICAgCWludCByZXQgPSAwOw0KPiA+
DQo+ID4gLQlpZiAoIXNtdS0+cG1fZW5hYmxlZCkNCj4gPiAtCQlyZXR1cm4gLUVPUE5PVFNVUFA7
DQo+ID4gLQ0KPiA+ICAgCWlmIChzbXUtPnBwdF9mdW5jcy0+bW9kZTFfcmVzZXQpDQo+ID4gICAJ
CXJldCA9IHNtdS0+cHB0X2Z1bmNzLT5tb2RlMV9yZXNldChzbXUpOw0KPiA+DQo+ID4gQEAgLTI1
NzgsOSArMjU2Myw2IEBAIHN0YXRpYyBpbnQgc211X21vZGUyX3Jlc2V0KHZvaWQgKmhhbmRsZSkN
Cj4gPiAgIAlzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSA9IGhhbmRsZTsNCj4gPiAgIAlpbnQgcmV0
ID0gMDsNCj4gPg0KPiA+IC0JaWYgKCFzbXUtPnBtX2VuYWJsZWQpDQo+ID4gLQkJcmV0dXJuIC1F
T1BOT1RTVVBQOw0KPiA+IC0NCj4gPiAgIAlpZiAoc211LT5wcHRfZnVuY3MtPm1vZGUyX3Jlc2V0
KQ0KPiA+ICAgCQlyZXQgPSBzbXUtPnBwdF9mdW5jcy0+bW9kZTJfcmVzZXQoc211KTsNCj4gPg0K
PiA+IEBAIC0yNzEyLDYgKzI2OTQsMTkgQEAgc3RhdGljIGludCBzbXVfZ2V0X3Bydl9idWZmZXJf
ZGV0YWlscyh2b2lkDQo+ICpoYW5kbGUsIHZvaWQgKiphZGRyLCBzaXplX3QgKnNpemUpDQo+ID4g
ICAJcmV0dXJuIDA7DQo+ID4gICB9DQo+ID4NCj4gPiArc3RhdGljIGJvb2wgc211X2lzX3NtY19h
bGl2ZSh2b2lkICpoYW5kbGUpIHsNCj4gPiArCXN0cnVjdCBzbXVfY29udGV4dCAqc211ID0gaGFu
ZGxlOw0KPiA+ICsNCj4gPiArCWlmICghc211LT5wcHRfZnVuY3MtPmNoZWNrX2Z3X3N0YXR1cykN
Cj4gPiArCQlyZXR1cm4gZmFsc2U7DQo+ID4gKw0KPiA+ICsJaWYgKCFzbXUtPnBwdF9mdW5jcy0+
Y2hlY2tfZndfc3RhdHVzKHNtdSkpDQo+ID4gKwkJcmV0dXJuIHRydWU7DQo+ID4gKw0KPiA+ICsJ
cmV0dXJuIGZhbHNlOw0KPiA+ICt9DQo+ID4gKw0KPiA+ICAgc3RhdGljIGNvbnN0IHN0cnVjdCBh
bWRfcG1fZnVuY3Mgc3dzbXVfcG1fZnVuY3MgPSB7DQo+ID4gICAJLyogZXhwb3J0IGZvciBzeXNm
cyAqLw0KPiA+ICAgCS5zZXRfZmFuX2NvbnRyb2xfbW9kZSAgICA9IHNtdV9zZXRfZmFuX2NvbnRy
b2xfbW9kZSwNCj4gPiBAQCAtMjc2NSw2ICsyNzYwLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBh
bWRfcG1fZnVuY3MNCj4gc3dzbXVfcG1fZnVuY3MgPSB7DQo+ID4gICAJLmdldF91Y2xrX2RwbV9z
dGF0ZXMgICAgICAgICAgICAgID0gc211X2dldF91Y2xrX2RwbV9zdGF0ZXMsDQo+ID4gICAJLmdl
dF9kcG1fY2xvY2tfdGFibGUgICAgICAgICAgICAgID0gc211X2dldF9kcG1fY2xvY2tfdGFibGUs
DQo+ID4gICAJLmdldF9zbXVfcHJ2X2J1Zl9kZXRhaWxzID0gc211X2dldF9wcnZfYnVmZmVyX2Rl
dGFpbHMsDQo+ID4gKwkuaXNfc21jX2FsaXZlID0gc211X2lzX3NtY19hbGl2ZSwNCj4gPiAgIH07
DQo+ID4NCj4gPiAgIGludCBzbXVfd2FpdF9mb3JfZXZlbnQoc3RydWN0IHNtdV9jb250ZXh0ICpz
bXUsIGVudW0NCj4gc211X2V2ZW50X3R5cGUNCj4gPiBldmVudCwNCj4gPg0K
