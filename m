Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D2E5D9A5C5
	for <lists+amd-gfx@lfdr.de>; Fri, 23 Aug 2019 04:47:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 079156EAE1;
	Fri, 23 Aug 2019 02:47:41 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr700066.outbound.protection.outlook.com [40.107.70.66])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1C7D46E505
 for <amd-gfx@lists.freedesktop.org>; Fri, 23 Aug 2019 02:47:38 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=TLfgFgb4XxP6cCsqcivPxv+6WSjuPBNTo2He8RtoGN5R6iKoBUMKC0A7asGc7RptDi545zlXhLHoG2la19HZghhiEe4KNrsQUn++VYlD1fnO5jMXu63mA1Wc5//aFFc1twxy4Yf6eOeRiVfYE04wND29nslFfbj8TApg3od82iEX3VgdhKcupvlbQLo4vx5UIC9pRQq7wmo0UCG3QqH6NYfobxZxixRocipSPMx/rHKkAYaC1uZV+ZZvez7XBIu6i/JJtiiF7rEjVizgxGf3T7cBbVDWVjXiMpWIk7Zt6cqAo8a9clG+84qPgNcTQ2cQZbRN2bRdIWawgonYwmXrvw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=sxORcedknYFjBfOGq5Il/wD666U22k84xDgisgftHCE=;
 b=HKyWL0QN26tYYGS0TpZUAhAyq3gjXDKLKLaWLco+jGuDMepQUr1l4dd+ztm71Kfq7hN6+dNLQ6iEzptKRDvqtHpW4lsXUpXvadb1L/tbGbNPSt+iMUtxzM9jS4ciXy3N9g9KBzFQ/nqDjI/3qleIO3tqMZCAVG2TIDYGDJmJEcEmSFgak0pSdXt3E5mxA+55ec/OsVFsnxLQ4uyBxr01QXuLd6ut7+glMPca4mDrOPFKSEAxUpKWIfjh8QA0Y95b3BGPa016CCXSa2ZyC/FkS7T9UHLAk+xHESIK0pGpAdSFZzCRsUv+XhjazGKA2RYJ2Cpsv6dOveIoCR/kyhkwOw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MWHPR12MB1453.namprd12.prod.outlook.com (10.172.55.22) by
 MWHPR12MB1549.namprd12.prod.outlook.com (10.172.56.9) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2178.19; Fri, 23 Aug 2019 02:47:36 +0000
Received: from MWHPR12MB1453.namprd12.prod.outlook.com
 ([fe80::5908:18f0:da19:177c]) by MWHPR12MB1453.namprd12.prod.outlook.com
 ([fe80::5908:18f0:da19:177c%10]) with mapi id 15.20.2178.020; Fri, 23 Aug
 2019 02:47:36 +0000
From: "Grodzovsky, Andrey" <Andrey.Grodzovsky@amd.com>
To: "Zhou1, Tao" <Tao.Zhou1@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: Re: [PATCH v4 1/4] drm/amdgpu: Add RAS EEPROM table.
Thread-Topic: [PATCH v4 1/4] drm/amdgpu: Add RAS EEPROM table.
Thread-Index: AQHVWFtfgTKTvci2DUCiGF4FBWEJN6cGjw4AgAC2woCAALslAIAACG60
Date: Fri, 23 Aug 2019 02:47:36 +0000
Message-ID: <MWHPR12MB14535ED457B55E3F92D1E6F0EAA40@MWHPR12MB1453.namprd12.prod.outlook.com>
References: <1566417719-1528-1-git-send-email-andrey.grodzovsky@amd.com>
 <1566417719-1528-2-git-send-email-andrey.grodzovsky@amd.com>
 <MN2PR12MB3054832C9FC9C73A7F9AD539B0A50@MN2PR12MB3054.namprd12.prod.outlook.com>
 <ce52910d-0d1f-402c-7cd0-a8a283a2cda8@amd.com>,
 <MN2PR12MB305437611047FDE19ACC251AB0A40@MN2PR12MB3054.namprd12.prod.outlook.com>
In-Reply-To: <MN2PR12MB305437611047FDE19ACC251AB0A40@MN2PR12MB3054.namprd12.prod.outlook.com>
Accept-Language: en-GB, en-US
Content-Language: en-GB
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [2607:fea8:3edf:fe95:59bb:f878:a083:c528]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 3aa4c4dd-d221-4b21-ca68-08d727744196
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(5600166)(711020)(4605104)(1401327)(4618075)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(2017052603328)(7193020);
 SRVR:MWHPR12MB1549; 
x-ms-traffictypediagnostic: MWHPR12MB1549:
x-ms-exchange-purlcount: 1
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <MWHPR12MB15493A132F0C632E74402299EAA40@MWHPR12MB1549.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:10000;
x-forefront-prvs: 0138CD935C
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(136003)(346002)(39860400002)(396003)(366004)(376002)(13464003)(189003)(199004)(256004)(14444005)(186003)(66476007)(46003)(64756008)(66556008)(66446008)(66946007)(476003)(446003)(11346002)(7696005)(53546011)(6506007)(102836004)(486006)(33656002)(76116006)(2501003)(54906003)(30864003)(229853002)(86362001)(110136005)(6246003)(76176011)(8936002)(71200400001)(74316002)(6116002)(4326008)(2906002)(55016002)(53936002)(6306002)(53946003)(478600001)(14454004)(966005)(52536014)(9686003)(6436002)(7736002)(305945005)(71190400001)(316002)(5660300002)(25786009)(99286004)(8676002)(81156014)(81166006)(461764006)(559001)(579004);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MWHPR12MB1549;
 H:MWHPR12MB1453.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: 8sHtDIPOR2SiuKdWru84X/7K9Bc4eBPhFQcTc2BmjU/VAWmdv8Q6p8db85uFawIluyHyT1/dLAl6XsWPoz1VciZrsoUjQR76iLwdivbur/ZBSJn9HchVzFTDLRj2Ru/Q3nR7HpaK5yOKQjMMkZkDBU/Ty9DQqhorAfj6Yifw0COHL6UCNIJJ2Z7JGfLmV0RMy5itk8ALFKxbVBcdKpHqEqDDsxYSs4nC3xLaTuH83CLebrRgyGFiFtZsDMrqOJIzJRze+qAkzsX0uH2FN2ELnvjGAyTyqMrKaSZDIe88BeY9FvJaFFHBGxbjvHbHAgogkcEktPF3wXW7DzcxD/PrPtTyh6K7wWu+ABOhHKvB1xZlYhAEagS+JTxGxi5rLDAzD6FgsHH3scH3+BIm8ttCuaIGdNsdIRWYWGiumm/aAYE=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 3aa4c4dd-d221-4b21-ca68-08d727744196
X-MS-Exchange-CrossTenant-originalarrivaltime: 23 Aug 2019 02:47:36.3316 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: /XISYMs50vTo7Z6b9kzIDWDufGvHBgerN2iS5EPrdJvN6lN6cTHN/sAEIe1FqorZ/j+Q8QpEUTqB1vN0WPVw4w==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MWHPR12MB1549
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=sxORcedknYFjBfOGq5Il/wD666U22k84xDgisgftHCE=;
 b=fSLsL0sjBHObKN5zdrKPUi0Nxq2rs812ZEDRYrA+xUmvbTcKDY7bbUacEHNvhB6HNtYv5/sSgbj8/pGtszhTla90xBEorzO/8fYjCEijRhkRHgvK9KxVKoO8T8KHeLeyekU/teEF5jm1DidRYRJLVO5Tgw/iq9f0HG3jp6HGuKU=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Andrey.Grodzovsky@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Panariti, David" <David.Panariti@amd.com>, "Lazar,
 Lijo" <Lijo.Lazar@amd.com>, "Pan, Xinhui" <Xinhui.Pan@amd.com>, "Tuikov, 
 Luben" <Luben.Tuikov@amd.com>, "Russell, Kent" <Kent.Russell@amd.com>, "Deucher,
 Alexander" <Alexander.Deucher@amd.com>, "Quan, 
 Evan" <Evan.Quan@amd.com>, "Zhang, Hawking" <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

U3VyZSwgd2lsbCBhZGQgY2xhcmlmaWNhdGlvbiBjb21tZW50LgoKQW5kcmV5CgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkZyb206IFpob3UxLCBUYW8gPFRhby5aaG91
MUBhbWQuY29tPgpTZW50OiAyMiBBdWd1c3QgMjAxOSAyMjoxNjo1NgpUbzogR3JvZHpvdnNreSwg
QW5kcmV5OyBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpDYzogRGV1Y2hlciwgQWxleGFu
ZGVyOyBQYW4sIFhpbmh1aTsgWmhhbmcsIEhhd2tpbmc7IFR1aWtvdiwgTHViZW47IExhemFyLCBM
aWpvOyBRdWFuLCBFdmFuOyBQYW5hcml0aSwgRGF2aWQ7IFJ1c3NlbGwsIEtlbnQKU3ViamVjdDog
UkU6IFtQQVRDSCB2NCAxLzRdIGRybS9hbWRncHU6IEFkZCBSQVMgRUVQUk9NIHRhYmxlLgoKCgpG
cm9tOiBHcm9kem92c2t5LCBBbmRyZXkgPEFuZHJleS5Hcm9kem92c2t5QGFtZC5jb20+ClNlbnQ6
IDIwMTnlubQ45pyIMjLml6UgMjM6MDcKVG86IFpob3UxLCBUYW8gPFRhby5aaG91MUBhbWQuY29t
PjsgYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKQ2M6IERldWNoZXIsIEFsZXhhbmRlciA8
QWxleGFuZGVyLkRldWNoZXJAYW1kLmNvbT47IFBhbiwgWGluaHVpIDxYaW5odWkuUGFuQGFtZC5j
b20+OyBaaGFuZywgSGF3a2luZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPjsgVHVpa292LCBMdWJl
biA8THViZW4uVHVpa292QGFtZC5jb20+OyBMYXphciwgTGlqbyA8TGlqby5MYXphckBhbWQuY29t
PjsgUXVhbiwgRXZhbiA8RXZhbi5RdWFuQGFtZC5jb20+OyBQYW5hcml0aSwgRGF2aWQgPERhdmlk
LlBhbmFyaXRpQGFtZC5jb20+OyBSdXNzZWxsLCBLZW50IDxLZW50LlJ1c3NlbGxAYW1kLmNvbT4K
U3ViamVjdDogUmU6IFtQQVRDSCB2NCAxLzRdIGRybS9hbWRncHU6IEFkZCBSQVMgRUVQUk9NIHRh
YmxlLgoKCk9uIDgvMjIvMTkgMTI6MTMgQU0sIFpob3UxLCBUYW8gd3JvdGU6CgoKLS0tLS1Pcmln
aW5hbCBNZXNzYWdlLS0tLS0KRnJvbTogQW5kcmV5IEdyb2R6b3Zza3kgbWFpbHRvOmFuZHJleS5n
cm9kem92c2t5QGFtZC5jb20KU2VudDogMjAxOeW5tDjmnIgyMuaXpSA0OjAyClRvOiBtYWlsdG86
YW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKQ2M6IERldWNoZXIsIEFsZXhhbmRlciBtYWls
dG86QWxleGFuZGVyLkRldWNoZXJAYW1kLmNvbTsgUGFuLCBYaW5odWkKbWFpbHRvOlhpbmh1aS5Q
YW5AYW1kLmNvbTsgWmhhbmcsIEhhd2tpbmcgbWFpbHRvOkhhd2tpbmcuWmhhbmdAYW1kLmNvbTsK
VHVpa292LCBMdWJlbiBtYWlsdG86THViZW4uVHVpa292QGFtZC5jb207IExhemFyLCBMaWpvIG1h
aWx0bzpMaWpvLkxhemFyQGFtZC5jb207ClF1YW4sIEV2YW4gbWFpbHRvOkV2YW4uUXVhbkBhbWQu
Y29tOyBQYW5hcml0aSwgRGF2aWQKbWFpbHRvOkRhdmlkLlBhbmFyaXRpQGFtZC5jb207IFJ1c3Nl
bGwsIEtlbnQgbWFpbHRvOktlbnQuUnVzc2VsbEBhbWQuY29tOyBaaG91MSwKVGFvIG1haWx0bzpU
YW8uWmhvdTFAYW1kLmNvbTsgR3JvZHpvdnNreSwgQW5kcmV5Cm1haWx0bzpBbmRyZXkuR3JvZHpv
dnNreUBhbWQuY29tClN1YmplY3Q6IFtQQVRDSCB2NCAxLzRdIGRybS9hbWRncHU6IEFkZCBSQVMg
RUVQUk9NIHRhYmxlLgoKQWRkIFJBUyBFRVBST00gdGFibGUgbWFuYWdlciB0byBlYW5ibGUgUkFT
IGVycm9ycyB0byBiZSBzdG9yZWQgdXBvbgphcHBlYXJhbmNlIGFuZCByZXRyaXZlZCBvbiBkcml2
ZXIgbG9hZC4KCnYyOiBGaXggc29tZSBwcmludHMuCgp2MzoKRml4IGNoZWNrc3VtIGNhbGN1bGF0
aW9uLgpNYWtlIHRhYmxlIHJlY29yZCBhbmQgaGVhZGVyIHN0cnVjdHMgcGFja2VkIHRvIGRvIGNv
cnJlY3QgYnl0ZSB2YWx1ZSBzdW0uCkZpeCByZWNvcmQgY3Jvc3NpbmcgRUVQUk9NIHBhZ2UgYm91
bmRyeS4KCnY0OgpGaXggYnl0ZSBzdW0gdmFsIGNhbGN1bGF0aW9uIGZvciByZWNvcmQgLSBsb29r
IGF0IHNpemVvZihyZWNvcmQpLgpGaXggc29tZSBzdHlsZSBjb21tZW50cy4KClNpZ25lZC1vZmYt
Ynk6IEFuZHJleSBHcm9kem92c2t5IG1haWx0bzphbmRyZXkuZ3JvZHpvdnNreUBhbWQuY29tCi0t
LQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvTWFrZWZpbGUgICAgICAgICAgICB8ICAgMiAr
LQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oICAgICAgICB8ICAgMyAr
CiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzX2VlcHJvbS5jIHwgNDgyCisr
KysrKysrKysrKysrKysrKysrKysrKysKZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X3Jhc19lZXByb20uaCB8ICA5MCArKysrKwogNCBmaWxlcyBjaGFuZ2VkLCA1NzYgaW5zZXJ0aW9u
cygrKSwgMSBkZWxldGlvbigtKSAgY3JlYXRlIG1vZGUgMTAwNjQ0CmRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9yYXNfZWVwcm9tLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NApkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmFzX2VlcHJvbS5oCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvTWFrZWZpbGUKYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9NYWtlZmlsZQppbmRleCAyOGQ3NmJkLi5mMDE2Y2YxIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9NYWtlZmlsZQpAQCAtNTQsNyArNTQsNyBAQCBhbWRncHUteSArPSBhbWRncHVfZGV2aWNl
Lm8gYW1kZ3B1X2ttcy5vIFwKICAgICAgICBhbWRncHVfZ3R0X21nci5vIGFtZGdwdV92cmFtX21n
ci5vIGFtZGdwdV92aXJ0Lm8KYW1kZ3B1X2F0b21maXJtd2FyZS5vIFwKICAgICAgICBhbWRncHVf
dmZfZXJyb3IubyBhbWRncHVfc2NoZWQubyBhbWRncHVfZGVidWdmcy5vCmFtZGdwdV9pZHMubyBc
CiAgICAgICAgYW1kZ3B1X2dtYy5vIGFtZGdwdV94Z21pLm8gYW1kZ3B1X2NzYS5vIGFtZGdwdV9y
YXMubwphbWRncHVfdm1fY3B1Lm8gXAotICAgICAgIGFtZGdwdV92bV9zZG1hLm8gYW1kZ3B1X2Rp
c2NvdmVyeS5vCisgICAgICAgYW1kZ3B1X3ZtX3NkbWEubyBhbWRncHVfcG11Lm8gYW1kZ3B1X2Rp
c2NvdmVyeS5vCmFtZGdwdV9yYXNfZWVwcm9tLm8KCiBhbWRncHUtJChDT05GSUdfUEVSRl9FVkVO
VFMpICs9IGFtZGdwdV9wbXUubwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9yYXMuaApiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMu
aAppbmRleCAyNzY1ZjJkLi44ZDViY2Q4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfcmFzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3Jhcy5oCkBAIC0yOSw2ICsyOSw3IEBACiAjaW5jbHVkZSAiYW1kZ3B1LmgiCiAjaW5jbHVk
ZSAiYW1kZ3B1X3BzcC5oIgogI2luY2x1ZGUgInRhX3Jhc19pZi5oIgorI2luY2x1ZGUgImFtZGdw
dV9yYXNfZWVwcm9tLmgiCgogZW51bSBhbWRncHVfcmFzX2Jsb2NrIHsKICAgICAgICBBTURHUFVf
UkFTX0JMT0NLX19VTUMgPSAwLApAQCAtMzMzLDYgKzMzNCw4IEBAIHN0cnVjdCBhbWRncHVfcmFz
IHsKICAgICAgICBzdHJ1Y3QgbXV0ZXggcmVjb3ZlcnlfbG9jazsKCiAgICAgICAgdWludDMyX3Qg
ZmxhZ3M7CisKKyAgICAgICBzdHJ1Y3QgYW1kZ3B1X3Jhc19lZXByb21fY29udHJvbCBlZXByb21f
Y29udHJvbDsKIH07Cgogc3RydWN0IHJhc19mc19kYXRhIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXNfZWVwcm9tLmMKYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfcmFzX2VlcHJvbS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAuLmJmMDc1MTUKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfcmFzX2VlcHJvbS5jCkBAIC0wLDAgKzEsNDgyIEBACisvKgorICogQ29w
eXJpZ2h0IDIwMTkgQWR2YW5jZWQgTWljcm8gRGV2aWNlcywgSW5jLgorICoKKyAqIFBlcm1pc3Np
b24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uCitvYnRh
aW5pbmcgYQorICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50
YXRpb24gZmlsZXMgKHRoZQorIlNvZnR3YXJlIiksCisgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2Fy
ZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dAorbGltaXRhdGlvbgorICog
dGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1
dGUsCitzdWJsaWNlbnNlLAorICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwg
YW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20KK3RoZQorICogU29mdHdhcmUgaXMgZnVybmlz
aGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKKyAqCisg
KiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBz
aGFsbCBiZQoraW5jbHVkZWQgaW4KKyAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlv
bnMgb2YgdGhlIFNvZnR3YXJlLgorICoKKyAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMg
SVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELAorRVhQUkVTUyBPUgorICogSU1QTElF
RCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgorTUVSQ0hB
TlRBQklMSVRZLAorICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklO
RlJJTkdFTUVOVC4gIElOIE5PCkVWRU5UCitTSEFMTAorICogVEhFIENPUFlSSUdIVCBIT0xERVIo
UykgT1IgQVVUSE9SKFMpIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAorREFNQUdFUyBPUgorICog
T1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBP
UgorT1RIRVJXSVNFLAorICogQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBX
SVRIIFRIRSBTT0ZUV0FSRSBPUgpUSEUgVVNFCitPUgorICogT1RIRVIgREVBTElOR1MgSU4gVEhF
IFNPRlRXQVJFLgorICoKKyAqLworCisjaW5jbHVkZSAiYW1kZ3B1X3Jhc19lZXByb20uaCIKKyNp
bmNsdWRlICJhbWRncHUuaCIKKyNpbmNsdWRlICJhbWRncHVfcmFzLmgiCisjaW5jbHVkZSA8bGlu
dXgvYml0cy5oPgorCisjZGVmaW5lIEVFUFJPTV9JMkNfVEFSR0VUX0FERFIgMHhBMAorCisjZGVm
aW5lIEVFUFJPTV9UQUJMRV9IRUFERVJfU0laRSAyMAorI2RlZmluZSBFRVBST01fVEFCTEVfUkVD
T1JEX1NJWkUgMjQKW1Rhb10gc2hvdWxkIHdlIHJlcGxhY2UgZml4ZWQgdmFsdWUgd2l0aCBzaXpl
b2YgZm9yIHRoZSB0d28gbWFjcm9zPwoKTm8sIGFzIEkgYWxyZWFkeSBleHBsYWluZWQgYmVmb3Jl
IHRoZSBFRVBST01fVEFCTEVfSEVBREVSL1JFQ09SRF9TSVpFIHJlcHJlc2VudCB0aGUgYWN0dWFs
IHNpemUgaW4gYnl0ZXMgdGhhdCB0aG9zZSBlbnRpdGllcyBvY2N1cHkgaW4gdGhlIEVFUFJPTSBt
ZW1vcnkgYW5kIGFzIGRlZmluZWQgaW4gdGhlIEVFUFJPTSB0YWJsZSBkZXNjcmlwdGlvbiB3aGls
ZSBzdHJ1Y3QgZWVwcm9tX3RhYmxlX3JlY29yZCB3b3VsZCBiZSBsYXJnZXIgYmVjYXVzZSBmb3Ig
ZXhhbXBsZSB0byBzdG9yZSA2YiBvZiBSZXRpZWRQYWdlIEkgaGF2ZSB0byB1c2UgdWludDY0IHdo
aWNoIGlzIDhiLiBJIGNvdWxkIG9mIGNvdXJzZSB1c2Ugc29tZSBraW5kIG9mIGJpdHZlY3RvciAo
Yml0c2V0KSB0byBzdG9yZSB0aGVtIGNvbXBhY3RseSBidXQgaXQgc2VlbXMgdG8gbWUgYXMgYW4g
b3ZlcmtpbGwuIEkgd2FzIHRvbGQgd2UgYXJlIG5vdCBleHBlY3RpbmcgdG8gbXVjaCByZWNvcmRz
IGZvciBhbnkgZ2l2ZW4gc3lzdGVtIGFueXdheSBkdXJpbmcgaXQncyBsaWZlIHRpbWUgc28gdGhl
IGR5bmFtaWMgbWVtb3J5IHNhdmVkIHdvdWxkIGJlIHNtYWxsIGFueXdheS4KCltUYW9dIE9LLCBj
b3VsZCB5b3UgYWRkIGEgY29tbWVudCBpbiB0aGUgY29kZSB0byBjbGFyaWZ5IHRoZSB0d28gdHlw
ZXMgb2YgU0laRT8KCgoKKyNkZWZpbmUgRUVQUk9NX0FERFJFU1NfU0laRSAweDIKKworLyogVGFi
bGUgaGRyIGlzICdBTURSJyAqLworI2RlZmluZSBFRVBST01fVEFCTEVfSERSX1ZBTCAweDQxNGQ0
NDUyICNkZWZpbmUKRUVQUk9NX1RBQkxFX1ZFUgorMHgwMDAxMDAwMAorCisvKiBBc3N1bWUgMiBN
Yml0IHNpemUgKi8KKyNkZWZpbmUgRUVQUk9NX1NJWkVfQllURVMgMjU2MDAwCisjZGVmaW5lIEVF
UFJPTV9QQUdFX19TSVpFX0JZVEVTIDI1NgorI2RlZmluZSBFRVBST01fSERSX1NUQVJUIDAKKyNk
ZWZpbmUgRUVQUk9NX1JFQ09SRF9TVEFSVCAoRUVQUk9NX0hEUl9TVEFSVCArCitFRVBST01fVEFC
TEVfSEVBREVSX1NJWkUpICNkZWZpbmUgRUVQUk9NX01BWF9SRUNPUkRfTlVNCisoKEVFUFJPTV9T
SVpFX0JZVEVTIC0gRUVQUk9NX1RBQkxFX0hFQURFUl9TSVpFKSAvCitFRVBST01fVEFCTEVfUkVD
T1JEX1NJWkUpICNkZWZpbmUgRUVQUk9NX0FERFJfTVNCX01BU0sKR0VOTUFTSygxNywgOCkKKwor
I2RlZmluZSB0b19hbWRncHVfZGV2aWNlKHgpIChjb250YWluZXJfb2YoeCwgc3RydWN0IGFtZGdw
dV9yYXMsCitlZXByb21fY29udHJvbCkpLT5hZGV2CisKK3N0YXRpYyB2b2lkIF9fZW5jb2RlX3Rh
YmxlX2hlYWRlcl90b19idWZmKHN0cnVjdAphbWRncHVfcmFzX2VlcHJvbV90YWJsZV9oZWFkZXIg
KmhkciwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQg
Y2hhciAqYnVmZikKK3sKKyAgICAgICB1aW50MzJfdCAqcHAgPSAodWludDMyX3QgKikgYnVmZjsK
KworICAgICAgIHBwWzBdID0gY3B1X3RvX2xlMzIoaGRyLT5oZWFkZXIpOworICAgICAgIHBwWzFd
ID0gY3B1X3RvX2xlMzIoaGRyLT52ZXJzaW9uKTsKKyAgICAgICBwcFsyXSA9IGNwdV90b19sZTMy
KGhkci0+Zmlyc3RfcmVjX29mZnNldCk7CisgICAgICAgcHBbM10gPSBjcHVfdG9fbGUzMihoZHIt
PnRibF9zaXplKTsKKyAgICAgICBwcFs0XSA9IGNwdV90b19sZTMyKGhkci0+Y2hlY2tzdW0pOwor
fQorCitzdGF0aWMgdm9pZCBfX2RlY29kZV90YWJsZV9oZWFkZXJfZnJvbV9idWZmKHN0cnVjdAph
bWRncHVfcmFzX2VlcHJvbV90YWJsZV9oZWFkZXIgKmhkciwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgY2hhciAqYnVmZikKK3sKKyAgICAgICB1aW50
MzJfdCAqcHAgPSAodWludDMyX3QgKilidWZmOworCisgICAgICAgaGRyLT5oZWFkZXIgICAgICAg
ICAgID0gbGUzMl90b19jcHUocHBbMF0pOworICAgICAgIGhkci0+dmVyc2lvbiAgICAgICAgICA9
IGxlMzJfdG9fY3B1KHBwWzFdKTsKKyAgICAgICBoZHItPmZpcnN0X3JlY19vZmZzZXQgPSBsZTMy
X3RvX2NwdShwcFsyXSk7CisgICAgICAgaGRyLT50Ymxfc2l6ZSAgICAgICAgID0gbGUzMl90b19j
cHUocHBbM10pOworICAgICAgIGhkci0+Y2hlY2tzdW0gICAgICAgICA9IGxlMzJfdG9fY3B1KHBw
WzRdKTsKK30KKworc3RhdGljIGludCBfX3VwZGF0ZV90YWJsZV9oZWFkZXIoc3RydWN0IGFtZGdw
dV9yYXNfZWVwcm9tX2NvbnRyb2wKKmNvbnRyb2wsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHVuc2lnbmVkIGNoYXIgKmJ1ZmYpCit7CisgICAgICAgaW50IHJldCA9IDA7CisgICAg
ICAgc3RydWN0IGkyY19tc2cgbXNnID0geworICAgICAgICAgICAgICAgICAgICAgICAuYWRkciAg
ID0gRUVQUk9NX0kyQ19UQVJHRVRfQUREUiwKKyAgICAgICAgICAgICAgICAgICAgICAgLmZsYWdz
ICA9IDAsCisgICAgICAgICAgICAgICAgICAgICAgIC5sZW4gICAgPSBFRVBST01fQUREUkVTU19T
SVpFICsKRUVQUk9NX1RBQkxFX0hFQURFUl9TSVpFLAorICAgICAgICAgICAgICAgICAgICAgICAu
YnVmICAgID0gYnVmZiwKKyAgICAgICB9OworCisKKyAgICAgICAqKHVpbnQxNl90ICopYnVmZiA9
IEVFUFJPTV9IRFJfU1RBUlQ7CisgICAgICAgX19lbmNvZGVfdGFibGVfaGVhZGVyX3RvX2J1ZmYo
JmNvbnRyb2wtPnRibF9oZHIsIGJ1ZmYgKworRUVQUk9NX0FERFJFU1NfU0laRSk7CisKKyAgICAg
ICByZXQgPSBpMmNfdHJhbnNmZXIoJmNvbnRyb2wtPmVlcHJvbV9hY2Nlc3NvciwgJm1zZywgMSk7
CisgICAgICAgaWYgKHJldCA8IDEpCisgICAgICAgICAgICAgICBEUk1fRVJST1IoIkZhaWxlZCB0
byB3cml0ZSBFRVBST00gdGFibGUgaGVhZGVyLCByZXQ6JWQiLApyZXQpOworCisgICAgICAgcmV0
dXJuIHJldDsKK30KKworc3RhdGljIHVpbnQzMl90ICBfX2NhbGNfaGRyX2J5dGVfc3VtKHN0cnVj
dCBhbWRncHVfcmFzX2VlcHJvbV9jb250cm9sCisqY29udHJvbCk7CisKK2ludCBhbWRncHVfcmFz
X2VlcHJvbV9pbml0KHN0cnVjdCBhbWRncHVfcmFzX2VlcHJvbV9jb250cm9sICpjb250cm9sKQp7
CisgICAgICAgaW50IHJldCA9IDA7CisgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYg
PSB0b19hbWRncHVfZGV2aWNlKGNvbnRyb2wpOworICAgICAgIHVuc2lnbmVkIGNoYXIgYnVmZltF
RVBST01fQUREUkVTU19TSVpFICsKRUVQUk9NX1RBQkxFX0hFQURFUl9TSVpFXSA9IHsgMCB9Owor
ICAgICAgIHN0cnVjdCBhbWRncHVfcmFzX2VlcHJvbV90YWJsZV9oZWFkZXIgKmhkciA9ICZjb250
cm9sLT50YmxfaGRyOworICAgICAgIHN0cnVjdCBpMmNfbXNnIG1zZyA9IHsKKyAgICAgICAgICAg
ICAgICAgICAgICAgLmFkZHIgICA9IEVFUFJPTV9JMkNfVEFSR0VUX0FERFIsCisgICAgICAgICAg
ICAgICAgICAgICAgIC5mbGFncyAgPSBJMkNfTV9SRCwKKyAgICAgICAgICAgICAgICAgICAgICAg
LmxlbiAgICA9IEVFUFJPTV9BRERSRVNTX1NJWkUgKwpFRVBST01fVEFCTEVfSEVBREVSX1NJWkUs
CisgICAgICAgICAgICAgICAgICAgICAgIC5idWYgICAgPSBidWZmLAorICAgICAgIH07CisKKyAg
ICAgICBtdXRleF9pbml0KCZjb250cm9sLT50YmxfbXV0ZXgpOworCisgICAgICAgc3dpdGNoIChh
ZGV2LT5hc2ljX3R5cGUpIHsKKyAgICAgICBjYXNlIENISVBfVkVHQTIwOgorICAgICAgIC8qVE9E
TyBBZGQgTUktNjAgKi8KKyAgICAgICAgICAgICAgIGJyZWFrOworCisgICAgICAgZGVmYXVsdDoK
KyAgICAgICAgICAgICAgIHJldHVybiAwOworICAgICAgIH0KKworICAgICAgIGlmIChyZXQpIHsK
KyAgICAgICAgICAgICAgIERSTV9FUlJPUigiRmFpbGVkIHRvIGluaXQgSTJDIGNvbnRyb2xsZXIs
IHJldDolZCIsIHJldCk7CisgICAgICAgICAgICAgICByZXR1cm4gcmV0OworICAgICAgIH0KKwor
ICAgICAgIC8qIFJlYWQvQ3JlYXRlIHRhYmxlIGhlYWRlciBmcm9tIEVFUFJPTSBhZGRyZXNzIDAg
Ki8KKyAgICAgICByZXQgPSBpMmNfdHJhbnNmZXIoJmNvbnRyb2wtPmVlcHJvbV9hY2Nlc3Nvciwg
Jm1zZywgMSk7CisgICAgICAgaWYgKHJldCA8IDEpIHsKKyAgICAgICAgICAgICAgIERSTV9FUlJP
UigiRmFpbGVkIHRvIHJlYWQgRUVQUk9NIHRhYmxlIGhlYWRlciwgcmV0OiVkIiwKcmV0KTsKKyAg
ICAgICAgICAgICAgIHJldHVybiByZXQ7CisgICAgICAgfQorCisgICAgICAgX19kZWNvZGVfdGFi
bGVfaGVhZGVyX2Zyb21fYnVmZihoZHIsICZidWZmWzJdKTsKKworICAgICAgIGlmIChoZHItPmhl
YWRlciA9PSBFRVBST01fVEFCTEVfSERSX1ZBTCkgeworICAgICAgICAgICAgICAgY29udHJvbC0+
bnVtX3JlY3MgPSAoaGRyLT50Ymxfc2l6ZSAtCkVFUFJPTV9UQUJMRV9IRUFERVJfU0laRSkgLwor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFRVBST01fVEFCTEVfUkVDT1JEX1NJ
WkU7CisgICAgICAgICAgICAgICBEUk1fREVCVUdfRFJJVkVSKCJGb3VuZCBleGlzdGluZyBFRVBS
T00gdGFibGUgd2l0aCAlZApyZWNvcmRzIiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgY29udHJvbC0+bnVtX3JlY3MpOworCisgICAgICAgfSBlbHNlIHsKKyAgICAgICAgICAgICAg
IERSTV9JTkZPKCJDcmVhdGluZyBuZXcgRUVQUk9NIHRhYmxlIik7CisKKyAgICAgICAgICAgICAg
IGhkci0+aGVhZGVyID0gRUVQUk9NX1RBQkxFX0hEUl9WQUw7CisgICAgICAgICAgICAgICBoZHIt
PnZlcnNpb24gPSBFRVBST01fVEFCTEVfVkVSOworICAgICAgICAgICAgICAgaGRyLT5maXJzdF9y
ZWNfb2Zmc2V0ID0gRUVQUk9NX1JFQ09SRF9TVEFSVDsKKyAgICAgICAgICAgICAgIGhkci0+dGJs
X3NpemUgPSBFRVBST01fVEFCTEVfSEVBREVSX1NJWkU7CisKKyAgICAgICAgICAgICAgIGFkZXYt
PnBzcC5yYXMucmFzLT5lZXByb21fY29udHJvbC50YmxfYnl0ZV9zdW0gPQorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIF9fY2FsY19oZHJfYnl0ZV9zdW0oJmFkZXYtPnBzcC5yYXMucmFz
LQplZXByb21fY29udHJvbCk7CisgICAgICAgICAgICAgICByZXQgPSBfX3VwZGF0ZV90YWJsZV9o
ZWFkZXIoY29udHJvbCwgYnVmZik7CisgICAgICAgfQorCisgICAgICAgLyogU3RhcnQgaW5zZXJ0
aW5nIHJlY29yZHMgZnJvbSBoZXJlICovCisgICAgICAgYWRldi0+cHNwLnJhcy5yYXMtPmVlcHJv
bV9jb250cm9sLm5leHRfYWRkciA9CkVFUFJPTV9SRUNPUkRfU1RBUlQ7CisKKyAgICAgICByZXR1
cm4gcmV0ID09IDEgPyAwIDogLUVJTzsKK30KKwordm9pZCBhbWRncHVfcmFzX2VlcHJvbV9maW5p
KHN0cnVjdCBhbWRncHVfcmFzX2VlcHJvbV9jb250cm9sCipjb250cm9sKQoreworICAgICAgIHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gdG9fYW1kZ3B1X2RldmljZShjb250cm9sKTsKKwor
ICAgICAgIHN3aXRjaCAoYWRldi0+YXNpY190eXBlKSB7CisgICAgICAgY2FzZSBDSElQX1ZFR0Ey
MDoKKyAgICAgICAgICAgICAgIC8qVE9ETyBBZGQgTUktNjAgKi8KKyAgICAgICAgICAgICAgIGJy
ZWFrOworCisgICAgICAgZGVmYXVsdDoKKyAgICAgICAgICAgICAgIHJldHVybjsKKyAgICAgICB9
Cit9CisKK3N0YXRpYyB2b2lkIF9fZW5jb2RlX3RhYmxlX3JlY29yZF90b19idWZmKHN0cnVjdAph
bWRncHVfcmFzX2VlcHJvbV9jb250cm9sICpjb250cm9sLAorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZWVwcm9tX3RhYmxlX3JlY29yZCAqcmVjb3JkLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBjaGFyICpi
dWZmKQoreworICAgICAgIF9fbGU2NCB0bXAgPSAwOworICAgICAgIGludCBpID0gMDsKKworICAg
ICAgIC8qIE5leHQgYXJlIGFsbCByZWNvcmQgZmllbGRzIGFjY29yZGluZyB0byBFRVBST00gcGFn
ZSBzcGVjIGluIExFCmZvcmFtdCAqLworICAgICAgIGJ1ZmZbaSsrXSA9IHJlY29yZC0+ZXJyX3R5
cGU7CisKKyAgICAgICBidWZmW2krK10gPSByZWNvcmQtPmJhbms7CisKKyAgICAgICB0bXAgPSBj
cHVfdG9fbGU2NChyZWNvcmQtPnRzKTsKKyAgICAgICBtZW1jcHkoYnVmZiArIGksICZ0bXAsIDgp
OworICAgICAgIGkgKz0gODsKW1Rhb10gSSB0aGluayBzaXplb2YocmVjb3JkLT50cykgaXMgYmV0
dGVyCgorCisgICAgICAgdG1wID0gY3B1X3RvX2xlNjQoKHJlY29yZC0+b2Zmc2V0ICYgMHhmZmZm
ZmZmZmZmZmYpKTsKW1Rhb10gKDB4MVVMTCA8PCA0OSAtIDEpIGlzIG1vcmUgcmVhZGFibGUgdGhh
biAmIDB4ZmZmZmZmZmZmZmZmLCBvciBhIG1hY3JvIGNhbiBiZSBkZWZpbmVkLCBidXQgZWl0aGVy
IHdheSBpcyBPSy4KCisgICAgICAgbWVtY3B5KGJ1ZmYgKyBpLCAmdG1wLCA2KTsKKyAgICAgICBp
ICs9IDY7CisKKyAgICAgICBidWZmW2krK10gPSByZWNvcmQtPm1lbV9jaGFubmVsOworICAgICAg
IGJ1ZmZbaSsrXSA9IHJlY29yZC0+bWN1bWNfaWQ7CisKKyAgICAgICB0bXAgPSBjcHVfdG9fbGU2
NCgocmVjb3JkLT5yZXRpcmVkX3BhZ2UgJiAweGZmZmZmZmZmZmZmZikpOworICAgICAgIG1lbWNw
eShidWZmICsgaSwgJnRtcCwgNik7Cit9CisKK3N0YXRpYyB2b2lkIF9fZGVjb2RlX3RhYmxlX3Jl
Y29yZF9mcm9tX2J1ZmYoc3RydWN0CmFtZGdwdV9yYXNfZWVwcm9tX2NvbnRyb2wgKmNvbnRyb2ws
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGVlcHJv
bV90YWJsZV9yZWNvcmQKKnJlY29yZCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1bnNpZ25lZCBjaGFyICpidWZmKQoreworICAgICAgIF9fbGU2NCB0bXAgPSAw
OworICAgICAgIGludCBpID0gIDA7CisKKyAgICAgICAvKiBOZXh0IGFyZSBhbGwgcmVjb3JkIGZp
ZWxkcyBhY2NvcmRpbmcgdG8gRUVQUk9NIHBhZ2Ugc3BlYyBpbiBMRQpmb3JhbXQgKi8KKyAgICAg
ICByZWNvcmQtPmVycl90eXBlID0gYnVmZltpKytdOworCisgICAgICAgcmVjb3JkLT5iYW5rID0g
YnVmZltpKytdOworCisgICAgICAgbWVtY3B5KCZ0bXAsIGJ1ZmYgKyBpLCA4KTsKKyAgICAgICBy
ZWNvcmQtPnRzID0gbGU2NF90b19jcHUodG1wKTsKKyAgICAgICBpICs9IDg7CisKKyAgICAgICBt
ZW1jcHkoJnRtcCwgYnVmZiArIGksIDYpOworICAgICAgIHJlY29yZC0+b2Zmc2V0ID0gKGxlNjRf
dG9fY3B1KHRtcCkgJiAweGZmZmZmZmZmZmZmZik7CisgICAgICAgaSArPSA2OworCisgICAgICAg
YnVmZltpKytdID0gcmVjb3JkLT5tZW1fY2hhbm5lbDsKKyAgICAgICBidWZmW2krK10gPSByZWNv
cmQtPm1jdW1jX2lkOworCisgICAgICAgbWVtY3B5KCZ0bXAsIGJ1ZmYgKyBpLCAgNik7CisgICAg
ICAgcmVjb3JkLT5yZXRpcmVkX3BhZ2UgPSAobGU2NF90b19jcHUodG1wKSAmIDB4ZmZmZmZmZmZm
ZmZmKTsgfQorCisvKgorICogV2hlbiByZWFjaGluZyBlbmQgb2YgRUVQUk9NIG1lbW9yeSBqdW1w
IGJhY2sgdG8gMCByZWNvcmQgYWRkcmVzcworICogV2hlbiBuZXh0IHJlY29yZCBhY2Nlc3Mgd2ls
bCBnbyBiZXlvbmQgRUVQUk9NIHBhZ2UgYm91bmRhcnkgbW9kaWZ5CitiaXRzIEExNy9BOAorICog
aW4gSTJDIHNlbGVjdG9yIHRvIGdvIHRvIG5leHQgcGFnZQorICovCitzdGF0aWMgdWludDMyX3Qg
X19jb3JyZWN0X2VlcHJvbV9kZXN0X2FkZHJlc3ModWludDMyX3QgY3Vycl9hZGRyZXNzKSB7Cisg
ICAgICAgdWludDMyX3QgbmV4dF9hZGRyZXNzID0gY3Vycl9hZGRyZXNzICsKRUVQUk9NX1RBQkxF
X1JFQ09SRF9TSVpFOworCisgICAgICAgLyogV2hlbiBhbGwgRUVQUk9NIG1lbW9yeSB1c2VkIGp1
bXAgYmFjayB0byAwIGFkZHJlc3MgKi8KKyAgICAgICBpZiAobmV4dF9hZGRyZXNzID4gRUVQUk9N
X1NJWkVfQllURVMpIHsKKyAgICAgICAgICAgICAgIERSTV9JTkZPKCJSZWFjaGVkIGVuZCBvZiBF
RVBST00gbWVtb3J5LCBqdW1waW5nIHRvIDAKIgorICAgICAgICAgICAgICAgICAgICAgICAgImFu
ZCBvdmVycmlkaW5nIG9sZCByZWNvcmQiKTsKKyAgICAgICAgICAgICAgIHJldHVybiBFRVBST01f
UkVDT1JEX1NUQVJUOworICAgICAgIH0KKworICAgICAgIC8qCisgICAgICAgICogVG8gY2hlY2sg
aWYgd2Ugb3ZlcmZsb3cgcGFnZSBib3VuZGFyeSAgY29tcGFyZSBuZXh0IGFkZHJlc3MKd2l0aAor
ICAgICAgICAqIGN1cnJlbnQgYW5kIHNlZSBpZiBiaXRzIDE3Lzggb2YgdGhlIEVFUFJPTSBhZGRy
ZXNzIHdpbGwgY2hhbmdlCisgICAgICAgICogSWYgdGhleSBkbyBzdGFydCBmcm9tIHRoZSBuZXh0
IDI1NmIgcGFnZQorICAgICAgICAqCisgICAgICAgICogaHR0cHM6Ly93d3cuc3QuY29tL3Jlc291
cmNlL2VuL2RhdGFzaGVldC9tMjRtMDItZHIucGRmIHNlYy4KNS4xLjIKKyAgICAgICAgKi8KKyAg
ICAgICBpZiAoKGN1cnJfYWRkcmVzcyAmIEVFUFJPTV9BRERSX01TQl9NQVNLKSAhPSAobmV4dF9h
ZGRyZXNzICYKRUVQUk9NX0FERFJfTVNCX01BU0spKSB7CisgICAgICAgICAgICAgICBEUk1fREVC
VUdfRFJJVkVSKCJSZWFjaGVkIGVuZCBvZiBFRVBST00gbWVtb3J5CnBhZ2UsIGp1bXBpbW5nIHRv
IG5leHQ6ICVseCIsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5leHRfYWRkcmVz
cyAmCkVFUFJPTV9BRERSX01TQl9NQVNLKSk7CisKKyAgICAgICAgICAgICAgIHJldHVybiAgKG5l
eHRfYWRkcmVzcyAmIEVFUFJPTV9BRERSX01TQl9NQVNLKTsKKyAgICAgICB9CisKKyAgICAgICBy
ZXR1cm4gY3Vycl9hZGRyZXNzOworfQorCisKK3N0YXRpYyB1aW50MzJfdCAgX19jYWxjX2hkcl9i
eXRlX3N1bShzdHJ1Y3QgYW1kZ3B1X3Jhc19lZXByb21fY29udHJvbAorKmNvbnRyb2wpIHsKKyAg
ICAgICBpbnQgaTsKKyAgICAgICB1aW50MzJfdCB0Ymxfc3VtID0gMDsKKworICAgICAgIC8qIEhl
YWRlciBjaGVja3N1bSwgc2tpcCBjaGVja3N1bSBmaWVsZCBpbiB0aGUgY2FsY3VsYXRpb24gKi8K
KyAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2l6ZW9mKGNvbnRyb2wtPnRibF9oZHIpIC0gc2l6ZW9m
KGNvbnRyb2wtCnRibF9oZHIuY2hlY2tzdW0pOyBpKyspCisgICAgICAgICAgICAgICB0Ymxfc3Vt
ICs9ICooKCh1bnNpZ25lZCBjaGFyICopJmNvbnRyb2wtPnRibF9oZHIpICsgaSk7CisKKyAgICAg
ICByZXR1cm4gdGJsX3N1bTsKK30KKworc3RhdGljIHVpbnQzMl90ICBfX2NhbGNfcmVjc19ieXRl
X3N1bShzdHJ1Y3QgZWVwcm9tX3RhYmxlX3JlY29yZCAqcmVjb3JkcywKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBpbnQgbnVtKQoreworICAgICAgIGludCBpLCBqOworICAg
ICAgIHVpbnQzMl90IHRibF9zdW0gPSAwOworCisgICAgICAgLyogUmVjb3JkcyBjaGVja3N1bSAq
LworICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW07IGkrKykgeworICAgICAgICAgICAgICAgc3Ry
dWN0IGVlcHJvbV90YWJsZV9yZWNvcmQgKnJlY29yZCA9ICZyZWNvcmRzW2ldOworCisgICAgICAg
ICAgICAgICBmb3IgKGogPSAwOyBqIDwgc2l6ZW9mKCpyZWNvcmQpOyBqKyspIHsKKyAgICAgICAg
ICAgICAgICAgICAgICAgdGJsX3N1bSArPSAqKCgodW5zaWduZWQgY2hhciAqKXJlY29yZCkgKyBq
KTsKKyAgICAgICAgICAgICAgIH0KKyAgICAgICB9CisKKyAgICAgICByZXR1cm4gdGJsX3N1bTsK
K30KKworc3RhdGljIGlubGluZSB1aW50MzJfdCAgX19jYWxjX3RibF9ieXRlX3N1bShzdHJ1Y3QK
YW1kZ3B1X3Jhc19lZXByb21fY29udHJvbCAqY29udHJvbCwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCBlZXByb21fdGFibGVfcmVjb3JkICpyZWNvcmRzLCBpbnQKbnVt
KSB7CisgICAgICAgcmV0dXJuIF9fY2FsY19oZHJfYnl0ZV9zdW0oY29udHJvbCkgKwpfX2NhbGNf
cmVjc19ieXRlX3N1bShyZWNvcmRzLAorbnVtKTsgfQorCisvKiBDaGVja3N1bSA9IDI1NiAtKChz
dW0gb2YgYWxsIHRhYmxlIGVudHJpZXMpIG1vZCAyNTYpICovIHN0YXRpYyB2b2lkCitfX3VwZGF0
ZV90YmxfY2hlY2tzdW0oc3RydWN0IGFtZGdwdV9yYXNfZWVwcm9tX2NvbnRyb2wgKmNvbnRyb2ws
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZWVwcm9tX3RhYmxlX3Jl
Y29yZCAqcmVjb3JkcywgaW50Cm51bSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHVpbnQzMl90IG9sZF9oZHJfYnl0ZV9zdW0pCit7CisgICAgICAgLyoKKyAgICAgICAgKiBUaGlz
IHdpbGwgdXBkYXRlIHRoZSB0YWJsZSBzdW0gd2l0aCBuZXcgcmVjb3Jkcy4KKyAgICAgICAgKgor
ICAgICAgICAqIFRPRE86IFdoYXQgaGFwcGVucyB3aGVuIHRoZSBFRVBST00gdGFibGUgaXMgdG8g
YmUgd3JhcHBlZAphcm91bmQKKyAgICAgICAgKiBhbmQgb2xkIHJlY29yZHMgZnJvbSBzdGFydCB3
aWxsIGdldCBvdmVycmlkZGVuLgorICAgICAgICAqLworCisgICAgICAgLyogbmVlZCB0byByZWNh
bGN1bGF0ZSB1cGRhdGVkIGhlYWRlciBieXRlIHN1bSAqLworICAgICAgIGNvbnRyb2wtPnRibF9i
eXRlX3N1bSAtPSBvbGRfaGRyX2J5dGVfc3VtOworICAgICAgIGNvbnRyb2wtPnRibF9ieXRlX3N1
bSArPSBfX2NhbGNfdGJsX2J5dGVfc3VtKGNvbnRyb2wsIHJlY29yZHMsCm51bSk7CisKKyAgICAg
ICBjb250cm9sLT50YmxfaGRyLmNoZWNrc3VtID0gMjU2IC0gKGNvbnRyb2wtPnRibF9ieXRlX3N1
bSAlIDI1Nik7IH0KW1Rhb10gd2UgY2FuIGNoYW5nZSAyNTYgdG8gRUVQUk9NX1BBR0VfX1NJWkVf
QllURVMKClRoaXMgMjU2IGp1c3QgYWNjaWRlbnRhbGx5IGhhcyBzYW1lIHZhbHVlIGFzICBFRVBS
T01fUEFHRV9fU0laRV9CWVRFUyBidXQgZG9lc24ndCByZWxhdGUgaW4gYW55IHdheSwgaXQncyBw
YXJ0IG9mIGJ5dGUgdmFsdWUgY2hlY2tzdW0gYWxnb3JpdGhtIEkgd2FzIGdpdmVuLgpBbmRyZXkK
CgoKKworLyogdGFibGUgc3VtIG1vZCAyNTYgKyBjaGVja3N1bSBtdXN0IGVxdWFscyAyNTYgKi8g
c3RhdGljIGJvb2wKK19fdmFsaWRhdGVfdGJsX2NoZWNrc3VtKHN0cnVjdCBhbWRncHVfcmFzX2Vl
cHJvbV9jb250cm9sICpjb250cm9sLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IGVlcHJvbV90YWJsZV9yZWNvcmQgKnJlY29yZHMsIGludCBudW0pIHsKKyAgICAgICBjb250cm9s
LT50YmxfYnl0ZV9zdW0gPSBfX2NhbGNfdGJsX2J5dGVfc3VtKGNvbnRyb2wsIHJlY29yZHMsIG51
bSk7CisKKyAgICAgICBpZiAoY29udHJvbC0+dGJsX2hkci5jaGVja3N1bSArIChjb250cm9sLT50
YmxfYnl0ZV9zdW0gJSAyNTYpICE9IDI1NikKeworICAgICAgICAgICAgICAgRFJNX1dBUk4oIkNo
ZWNrc3VtIG1pc21hdGNoLCBjaGVja3N1bTogJXUgIiwgY29udHJvbC0KdGJsX2hkci5jaGVja3N1
bSk7CisgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CisgICAgICAgfQorCisgICAgICAgcmV0
dXJuIHRydWU7Cit9CisKK2ludCBhbWRncHVfcmFzX2VlcHJvbV9wcm9jZXNzX3JlY29kcyhzdHJ1
Y3QKYW1kZ3B1X3Jhc19lZXByb21fY29udHJvbCAqY29udHJvbCwKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZWVwcm9tX3RhYmxlX3JlY29yZAoqcmVj
b3JkcywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHdy
aXRlLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBudW0p
Cit7CisgICAgICAgaW50IGksIHJldCA9IDA7CisgICAgICAgc3RydWN0IGkyY19tc2cgKm1zZ3M7
CisgICAgICAgdW5zaWduZWQgY2hhciAqYnVmZnM7CisgICAgICAgc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYgPSB0b19hbWRncHVfZGV2aWNlKGNvbnRyb2wpOworCisgICAgICAgaWYgKGFkZXYt
PmFzaWNfdHlwZSAhPSBDSElQX1ZFR0EyMCkKKyAgICAgICAgICAgICAgIHJldHVybiAwOworCisg
ICAgICAgYnVmZnMgPSBrY2FsbG9jKG51bSwgRUVQUk9NX0FERFJFU1NfU0laRSArCkVFUFJPTV9U
QUJMRV9SRUNPUkRfU0laRSwKKyAgICAgICAgICAgICAgICAgICAgICAgIEdGUF9LRVJORUwpOwor
ICAgICAgIGlmICghYnVmZnMpCisgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKKworICAg
ICAgIG11dGV4X2xvY2soJmNvbnRyb2wtPnRibF9tdXRleCk7CisKKyAgICAgICBtc2dzID0ga2Nh
bGxvYyhudW0sIHNpemVvZigqbXNncyksIEdGUF9LRVJORUwpOworICAgICAgIGlmICghbXNncykg
eworICAgICAgICAgICAgICAgcmV0ID0gLUVOT01FTTsKKyAgICAgICAgICAgICAgIGdvdG8gZnJl
ZV9idWZmOworICAgICAgIH0KKworICAgICAgIC8qIEluIGNhc2Ugb2Ygb3ZlcmZsb3cganVzdCBz
dGFydCBmcm9tIGJlZ2lubmluZyB0byBub3QgbG9zZSBuZXdlc3QKcmVjb3JkcyAqLworICAgICAg
IGlmICh3cml0ZSAmJiAoY29udHJvbC0+bmV4dF9hZGRyICsgRUVQUk9NX1RBQkxFX1JFQ09SRF9T
SVpFICoKbnVtID4gRUVQUk9NX1NJWkVfQllURVMpKQorICAgICAgICAgICAgICAgY29udHJvbC0+
bmV4dF9hZGRyID0gRUVQUk9NX1JFQ09SRF9TVEFSVDsKKworCisgICAgICAgLyoKKyAgICAgICAg
KiBUT0RPIEN1cnJlbnRseSBtYWtlcyBFRVBST00gd3JpdGVzIGZvciBlYWNoIHJlY29yZCwgdGhp
cwpjcmVhdGVzCisgICAgICAgICogaW50ZXJuYWwgZnJhZ21lbnRhdGlvbi4gT3B0aW1pemVkIHRo
ZSBjb2RlIHRvIGRvIGZ1bGwgcGFnZSB3cml0ZSBvZgorICAgICAgICAqIDI1NmIKKyAgICAgICAg
Ki8KKyAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtOyBpKyspIHsKKyAgICAgICAgICAgICAgIHVu
c2lnbmVkIGNoYXIgKmJ1ZmYgPSAmYnVmZnNbaSooRUVQUk9NX0FERFJFU1NfU0laRSArCkVFUFJP
TV9UQUJMRV9SRUNPUkRfU0laRSldOworICAgICAgICAgICAgICAgc3RydWN0IGVlcHJvbV90YWJs
ZV9yZWNvcmQgKnJlY29yZCA9ICZyZWNvcmRzW2ldOworICAgICAgICAgICAgICAgc3RydWN0IGky
Y19tc2cgKm1zZyA9ICZtc2dzW2ldOworCisgICAgICAgICAgICAgICBjb250cm9sLT5uZXh0X2Fk
ZHIgPQorX19jb3JyZWN0X2VlcHJvbV9kZXN0X2FkZHJlc3MoY29udHJvbC0+bmV4dF9hZGRyKTsK
KworICAgICAgICAgICAgICAgLyoKKyAgICAgICAgICAgICAgICAqIFVwZGF0ZSBiaXRzIDE2LDE3
IG9mIEVFUFJPTSBhZGRyZXNzIGluIEkyQyBhZGRyZXNzIGJ5CnNldHRpbmcgdGhlbQorICAgICAg
ICAgICAgICAgICogdG8gYml0cyAxLDIgb2YgRGV2aWNlIGFkZHJlc3MgYnl0ZQorICAgICAgICAg
ICAgICAgICovCisgICAgICAgICAgICAgICBtc2ctPmFkZHIgPSBFRVBST01fSTJDX1RBUkdFVF9B
RERSIHwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoY29udHJvbC0+bmV4dF9hZGRy
ICYKRUVQUk9NX0FERFJfTVNCX01BU0spID4+IDE1KTsKKyAgICAgICAgICAgICAgIG1zZy0+Zmxh
Z3MgICAgICA9IHdyaXRlID8gMCA6IEkyQ19NX1JEOworICAgICAgICAgICAgICAgbXNnLT5sZW4g
ICAgICAgID0gRUVQUk9NX0FERFJFU1NfU0laRSArCkVFUFJPTV9UQUJMRV9SRUNPUkRfU0laRTsK
KyAgICAgICAgICAgICAgIG1zZy0+YnVmICAgICAgICA9IGJ1ZmY7CisKKyAgICAgICAgICAgICAg
IC8qIEluc2VydCB0aGUgRUVQUk9NIGRlc3QgYWRkZXNzLCBiaXRzIDAtMTUgKi8KKyAgICAgICAg
ICAgICAgIGJ1ZmZbMF0gPSAoKGNvbnRyb2wtPm5leHRfYWRkciA+PiA4KSAmIDB4ZmYpOworICAg
ICAgICAgICAgICAgYnVmZlsxXSA9IChjb250cm9sLT5uZXh0X2FkZHIgJiAweGZmKTsKKworICAg
ICAgICAgICAgICAgLyogRUVQUk9NIHRhYmxlIGNvbnRlbnQgaXMgc3RvcmVkIGluIExFIGZvcm1h
dCAqLworICAgICAgICAgICAgICAgaWYgKHdyaXRlKQorICAgICAgICAgICAgICAgICAgICAgICBf
X2VuY29kZV90YWJsZV9yZWNvcmRfdG9fYnVmZihjb250cm9sLCByZWNvcmQsIGJ1ZmYKKworRUVQ
Uk9NX0FERFJFU1NfU0laRSk7CisKKyAgICAgICAgICAgICAgIC8qCisgICAgICAgICAgICAgICAg
KiBUaGUgZGVzdGluYXRpb24gRUVQUk9NIGFkZHJlc3MgbWlnaHQgbmVlZCB0byBiZQpjb3JyZWN0
ZWQgdG8gYWNjb3VudAorICAgICAgICAgICAgICAgICogZm9yIHBhZ2Ugb3IgZW50aXJlIG1lbW9y
eSB3cmFwcGluZworICAgICAgICAgICAgICAgICovCisgICAgICAgICAgICAgICBjb250cm9sLT5u
ZXh0X2FkZHIgKz0gRUVQUk9NX1RBQkxFX1JFQ09SRF9TSVpFOworICAgICAgIH0KKworICAgICAg
IHJldCA9IGkyY190cmFuc2ZlcigmY29udHJvbC0+ZWVwcm9tX2FjY2Vzc29yLCBtc2dzLCBudW0p
OworICAgICAgIGlmIChyZXQgPCAxKSB7CisgICAgICAgICAgICAgICBEUk1fRVJST1IoIkZhaWxl
ZCB0byBwcm9jZXNzIEVFUFJPTSB0YWJsZSByZWNvcmRzLApyZXQ6JWQiLCByZXQpOworCisgICAg
ICAgICAgICAgICAvKiBUT0RPIFJlc3RvcmUgcHJldiBuZXh0IEVFUFJPTSBhZGRyZXNzID8gKi8K
KyAgICAgICAgICAgICAgIGdvdG8gZnJlZV9tc2dzOworICAgICAgIH0KKworCisgICAgICAgaWYg
KCF3cml0ZSkgeworICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bTsgaSsrKSB7Cisg
ICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGNoYXIgKmJ1ZmYgPQomYnVmZnNbaSooRUVQ
Uk9NX0FERFJFU1NfU0laRSArIEVFUFJPTV9UQUJMRV9SRUNPUkRfU0laRSldOwpbVGFvXSBzcGFj
ZSBpcyBuZWVkZWQgYmVmb3JlIGFuZCBhZnRlciAiKiIKCisgICAgICAgICAgICAgICAgICAgICAg
IHN0cnVjdCBlZXByb21fdGFibGVfcmVjb3JkICpyZWNvcmQgPSAmcmVjb3Jkc1tpXTsKW1Rhb10g
YWRkIGEgc3BhY2UgYWZ0ZXIgIioiCgorCisgICAgICAgICAgICAgICAgICAgICAgIF9fZGVjb2Rl
X3RhYmxlX3JlY29yZF9mcm9tX2J1ZmYoY29udHJvbCwgcmVjb3JkLApidWZmICsgRUVQUk9NX0FE
RFJFU1NfU0laRSk7CisgICAgICAgICAgICAgICB9CisgICAgICAgfQorCisgICAgICAgaWYgKHdy
aXRlKSB7CisgICAgICAgICAgICAgICB1aW50MzJfdCBvbGRfaGRyX2J5dGVfc3VtID0gX19jYWxj
X2hkcl9ieXRlX3N1bShjb250cm9sKTsKKworICAgICAgICAgICAgICAgLyoKKyAgICAgICAgICAg
ICAgICAqIFVwZGF0ZSB0YWJsZSBoZWFkZXIgd2l0aCBzaXplIGFuZCBDUkMgYW5kIGFjY291bnQg
Zm9yCnRhYmxlCisgICAgICAgICAgICAgICAgKiB3cmFwIGFyb3VuZCB3aGVyZSB0aGUgYXNzdW1w
dGlvbiBpcyB0aGF0IHdlIHRyZWF0IGl0IGFzCmVtcHR5CisgICAgICAgICAgICAgICAgKiB0YWJs
ZQorICAgICAgICAgICAgICAgICoKKyAgICAgICAgICAgICAgICAqIFRPRE8gLSBDaGVjayB0aGUg
YXNzdW1wdGlvbiBpcyBjb3JyZWN0CisgICAgICAgICAgICAgICAgKi8KKyAgICAgICAgICAgICAg
IGNvbnRyb2wtPm51bV9yZWNzICs9IG51bTsKKyAgICAgICAgICAgICAgIGNvbnRyb2wtPm51bV9y
ZWNzICU9IEVFUFJPTV9NQVhfUkVDT1JEX05VTTsKKyAgICAgICAgICAgICAgIGNvbnRyb2wtPnRi
bF9oZHIudGJsX3NpemUgKz0gRUVQUk9NX1RBQkxFX1JFQ09SRF9TSVpFICoKbnVtOworICAgICAg
ICAgICAgICAgaWYgKGNvbnRyb2wtPnRibF9oZHIudGJsX3NpemUgPiBFRVBST01fU0laRV9CWVRF
UykKKyAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC0+dGJsX2hkci50Ymxfc2l6ZSA9CkVF
UFJPTV9UQUJMRV9IRUFERVJfU0laRSArCisgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wt
Pm51bV9yZWNzICogRUVQUk9NX1RBQkxFX1JFQ09SRF9TSVpFOworCisgICAgICAgICAgICAgICBf
X3VwZGF0ZV90YmxfY2hlY2tzdW0oY29udHJvbCwgcmVjb3JkcywgbnVtLApvbGRfaGRyX2J5dGVf
c3VtKTsKKworICAgICAgICAgICAgICAgX191cGRhdGVfdGFibGVfaGVhZGVyKGNvbnRyb2wsIGJ1
ZmZzKTsKKyAgICAgICB9IGVsc2UgaWYgKCFfX3ZhbGlkYXRlX3RibF9jaGVja3N1bShjb250cm9s
LCByZWNvcmRzLCBudW0pKSB7CisgICAgICAgICAgICAgICBEUk1fV0FSTigiRUVQUk9NIFRhYmxl
IGNoZWNrc3VtIG1pc21hdGNoISIpOworICAgICAgICAgICAgICAgLyogVE9ETyBVbmNvbW1lbnQg
d2hlbiBFRVBST00gcmVhZC93cml0ZSBpcyByZWxsaWFibGUKKi8KKyAgICAgICAgICAgICAgIC8q
IHJldCA9IC1FSU87ICovCisgICAgICAgfQorCitmcmVlX21zZ3M6CisgICAgICAga2ZyZWUobXNn
cyk7CisKK2ZyZWVfYnVmZjoKKyAgICAgICBrZnJlZShidWZmcyk7CisKKyAgICAgICBtdXRleF91
bmxvY2soJmNvbnRyb2wtPnRibF9tdXRleCk7CisKKyAgICAgICByZXR1cm4gcmV0ID09IG51bSA/
IDAgOiAtRUlPOworfQorCit2b2lkIGFtZGdwdV9yYXNfZWVwcm9tX3Rlc3Qoc3RydWN0IGFtZGdw
dV9yYXNfZWVwcm9tX2NvbnRyb2wKKmNvbnRyb2wpCit7CisgICAgICAgaW50IGk7CisgICAgICAg
c3RydWN0IGVlcHJvbV90YWJsZV9yZWNvcmQgKnJlY3MgPSBrY2FsbG9jKDEsIHNpemVvZigqcmVj
cyksCitHRlBfS0VSTkVMKTsKKworICAgICAgIGlmICghcmVjcykKKyAgICAgICAgICAgICAgIHJl
dHVybjsKKworICAgICAgIGZvciAoaSA9IDA7IGkgPCAxIDsgaSsrKSB7CisgICAgICAgICAgICAg
ICByZWNzW2ldLmFkZHJlc3MgPSAweGRlYWRiZWVmOworICAgICAgICAgICAgICAgcmVjc1tpXS5y
ZXRpcmVkX3BhZ2UgPSBpOworICAgICAgIH0KKworICAgICAgIGlmICghYW1kZ3B1X3Jhc19lZXBy
b21fcHJvY2Vzc19yZWNvZHMoY29udHJvbCwgcmVjcywgdHJ1ZSwgMSkpIHsKKworICAgICAgICAg
ICAgICAgbWVtc2V0KHJlY3MsIDAsIHNpemVvZigqcmVjcykgKiAxKTsKKworICAgICAgICAgICAg
ICAgY29udHJvbC0+bmV4dF9hZGRyID0gRUVQUk9NX1JFQ09SRF9TVEFSVDsKKworICAgICAgICAg
ICAgICAgaWYgKCFhbWRncHVfcmFzX2VlcHJvbV9wcm9jZXNzX3JlY29kcyhjb250cm9sLCByZWNz
LCBmYWxzZSwKMSkpIHsKKyAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDE7
IGkrKykKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fSU5GTygicmVjLmFkZHJl
c3MgOjB4JWxseCwKcmVjLnJldGlyZWRfcGFnZSA6JWxsdSIsCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcmVjc1tpXS5hZGRyZXNzLCByZWNzW2ldLnJldGlyZWRfcGFn
ZSk7CisgICAgICAgICAgICAgICB9IGVsc2UKKyAgICAgICAgICAgICAgICAgICAgICAgRFJNX0VS
Uk9SKCJGYWlsZWQgaW4gcmVhZGluZyBmcm9tIHRhYmxlIik7CisKKyAgICAgICB9IGVsc2UKKyAg
ICAgICAgICAgICAgIERSTV9FUlJPUigiRmFpbGVkIGluIHdyaXRpbmcgdG8gdGFibGUiKTsgfQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhc19lZXByb20u
aApiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXNfZWVwcm9tLmgKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNDFmM2ZjYgotLS0gL2Rldi9udWxsCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXNfZWVwcm9tLmgKQEAgLTAsMCAr
MSw5MCBAQAorLyoKKyAqIENvcHlyaWdodCAyMDE5IEFkdmFuY2VkIE1pY3JvIERldmljZXMsIElu
Yy4KKyAqCisgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwg
dG8gYW55IHBlcnNvbgorb2J0YWluaW5nIGEKKyAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQg
YXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKKyJTb2Z0d2FyZSIpLAorICogdG8g
ZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhv
dXQKK2xpbWl0YXRpb24KKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdl
LCBwdWJsaXNoLCBkaXN0cmlidXRlLAorc3VibGljZW5zZSwKKyAqIGFuZC9vciBzZWxsIGNvcGll
cyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tCit0aGUKKyAq
IFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5n
IGNvbmRpdGlvbnM6CisgKgorICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMg
cGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKK2luY2x1ZGVkIGluCisgKiBhbGwgY29waWVzIG9y
IHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KKyAqCisgKiBUSEUgU09GVFdB
UkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwKK0VY
UFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdB
UlJBTlRJRVMgT0YKK01FUkNIQU5UQUJJTElUWSwKKyAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxB
UiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTwpFVkVOVAorU0hBTEwKKyAqIFRI
RSBDT1BZUklHSFQgSE9MREVSKFMpIE9SIEFVVEhPUihTKSBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJ
TSwKK0RBTUFHRVMgT1IKKyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04g
T0YgQ09OVFJBQ1QsIFRPUlQgT1IKK09USEVSV0lTRSwKKyAqIEFSSVNJTkcgRlJPTSwgT1VUIE9G
IE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IKVEhFIFVTRQorT1IKKyAqIE9U
SEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKi8KKworI2lmbmRlZiBfQU1ER1BV
X1JBU19FRVBST01fSAorI2RlZmluZSBfQU1ER1BVX1JBU19FRVBST01fSAorCisjaW5jbHVkZSA8
bGludXgvaTJjLmg+CisKK3N0cnVjdCBhbWRncHVfZGV2aWNlOworCitlbnVtIGFtZGdwdV9yYXNf
ZWVwcm9tX2Vycl90eXBleworICAgICAgIEFNREdQVV9SQVNfRUVQUk9NX0VSUl9QTEFDRV9IT0xE
RVIsCisgICAgICAgQU1ER1BVX1JBU19FRVBST01fRVJSX1JFQ09WRVJBQkxFLAorICAgICAgIEFN
REdQVV9SQVNfRUVQUk9NX0VSUl9OT05fUkVDT1ZFUkFCTEUKK307CisKK3N0cnVjdCBhbWRncHVf
cmFzX2VlcHJvbV90YWJsZV9oZWFkZXIgeworICAgICAgIHVpbnQzMl90IGhlYWRlcjsKKyAgICAg
ICB1aW50MzJfdCB2ZXJzaW9uOworICAgICAgIHVpbnQzMl90IGZpcnN0X3JlY19vZmZzZXQ7Cisg
ICAgICAgdWludDMyX3QgdGJsX3NpemU7CisgICAgICAgdWludDMyX3QgY2hlY2tzdW07Cit9X19h
dHRyaWJ1dGVfXygoX19wYWNrZWRfXykpOworCitzdHJ1Y3QgYW1kZ3B1X3Jhc19lZXByb21fY29u
dHJvbCB7CisgICAgICAgc3RydWN0IGFtZGdwdV9yYXNfZWVwcm9tX3RhYmxlX2hlYWRlciB0Ymxf
aGRyOworICAgICAgIHN0cnVjdCBpMmNfYWRhcHRlciBlZXByb21fYWNjZXNzb3I7CisgICAgICAg
dWludDMyX3QgbmV4dF9hZGRyOworICAgICAgIHVuc2lnbmVkIGludCBudW1fcmVjczsKKyAgICAg
ICBzdHJ1Y3QgbXV0ZXggdGJsX211dGV4OworICAgICAgIGJvb2wgYnVzX2xvY2tlZDsKKyAgICAg
ICB1aW50MzJfdCB0YmxfYnl0ZV9zdW07Cit9OworCisvKgorICogUmVwcmVzZW50cyBzaW5nbGUg
dGFibGUgcmVjb3JkLiBQYWNrZWQgdG8gYmUgZWFzaWx5IHNlcmlhbGl6ZWQgaW50bworYnl0ZQor
ICogc3RyZWFtLgorICovCitzdHJ1Y3QgZWVwcm9tX3RhYmxlX3JlY29yZCB7CisKKyAgICAgICB1
bmlvbiB7CisgICAgICAgICAgICAgICB1aW50NjRfdCBhZGRyZXNzOworICAgICAgICAgICAgICAg
dWludDY0X3Qgb2Zmc2V0OworICAgICAgIH07CisKKyAgICAgICB1aW50NjRfdCByZXRpcmVkX3Bh
Z2U7CisgICAgICAgdWludDY0X3QgdHM7CisKKyAgICAgICBlbnVtIGFtZGdwdV9yYXNfZWVwcm9t
X2Vycl90eXBlIGVycl90eXBlOworCisgICAgICAgdW5pb24geworICAgICAgICAgICAgICAgdW5z
aWduZWQgY2hhciBiYW5rOworICAgICAgICAgICAgICAgdW5zaWduZWQgY2hhciBjdTsKKyAgICAg
ICB9OworCisgICAgICAgdW5zaWduZWQgY2hhciBtZW1fY2hhbm5lbDsKKyAgICAgICB1bnNpZ25l
ZCBjaGFyIG1jdW1jX2lkOworfV9fYXR0cmlidXRlX18oKF9fcGFja2VkX18pKTsKKworaW50IGFt
ZGdwdV9yYXNfZWVwcm9tX2luaXQoc3RydWN0IGFtZGdwdV9yYXNfZWVwcm9tX2NvbnRyb2wgKmNv
bnRyb2wpOwordm9pZCBhbWRncHVfcmFzX2VlcHJvbV9maW5pKHN0cnVjdCBhbWRncHVfcmFzX2Vl
cHJvbV9jb250cm9sCipjb250cm9sKTsKKworaW50IGFtZGdwdV9yYXNfZWVwcm9tX3Byb2Nlc3Nf
cmVjb2RzKHN0cnVjdAphbWRncHVfcmFzX2VlcHJvbV9jb250cm9sICpjb250cm9sLAorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBlZXByb21fdGFibGVf
cmVjb3JkCipyZWNvcmRzLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGJvb2wgd3JpdGUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaW50IG51bSk7CisKK3ZvaWQgYW1kZ3B1X3Jhc19lZXByb21fdGVzdChzdHJ1Y3QgYW1kZ3B1
X3Jhc19lZXByb21fY29udHJvbAoqY29udHJvbCk7CisKKyNlbmRpZiAvLyBfQU1ER1BVX1JBU19F
RVBST01fSAotLQoyLjcuNAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
