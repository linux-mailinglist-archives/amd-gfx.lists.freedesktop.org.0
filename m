Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 570907CB2C
	for <lists+amd-gfx@lfdr.de>; Wed, 31 Jul 2019 19:58:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 523816E15E;
	Wed, 31 Jul 2019 17:58:42 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-vs1-xe42.google.com (mail-vs1-xe42.google.com
 [IPv6:2607:f8b0:4864:20::e42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0E3EC89B65
 for <amd-gfx@lists.freedesktop.org>; Wed, 31 Jul 2019 17:58:33 +0000 (UTC)
Received: by mail-vs1-xe42.google.com with SMTP id u3so46780285vsh.6
 for <amd-gfx@lists.freedesktop.org>; Wed, 31 Jul 2019 10:58:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=v0QLAPgETMWgwH7sgHC/jGY6P9k8UFSt4/k2q8nINco=;
 b=ElYpsbc2c7AIayYagvOA5EBx5YrSHT8FbPQXjJsCICIXLo69gR3wJvtsFePiK6NJHc
 Fn0nZHK1e6XW5vtxPP0K4IqDJpNKGLHyw9CbLuPT/v5ZGftEBg2zEr/cQf6Xy8tnh7UO
 W96CEu4VTZuM92QmHdqG4HhLrvc9qnwqWroSXsiAa/WUyRqGJ0EW2MZQsVqDjg+9Tafv
 vw4taTUB5acV1DS39rItlOq6QrzGQ2Emtb890RNB1frIRxiJm6m59xwUrn0kIwZap9No
 hnCesJS+dO+OabRDnrsF/0QbtbJCdpHucSKTsFjgSmhlx1LQqXecgneXwENxhnDQPmeA
 tzPQ==
X-Gm-Message-State: APjAAAVp3AqA4dKGMyg55WCHwixgvENdBoOWPqOBgfEsk0ZD0OKx9wmr
 CIOgVhDB9Em31Y4HgZpGcMwo0bDc
X-Google-Smtp-Source: APXvYqxOlrEi9p0fOFJDxCfeURoJfl/UZBhlE+l14Pt9fOdj0ypyYUlSqbe9XxfcOmxnhU4AkvLEcQ==
X-Received: by 2002:a67:c419:: with SMTP id c25mr78106752vsk.136.1564595911678; 
 Wed, 31 Jul 2019 10:58:31 -0700 (PDT)
Received: from localhost.localdomain ([71.219.6.100])
 by smtp.gmail.com with ESMTPSA id m123sm18189707vsm.30.2019.07.31.10.58.30
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 31 Jul 2019 10:58:31 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 06/26] drm/amdgpu: add umc v6_1 query error count support
Date: Wed, 31 Jul 2019 12:57:58 -0500
Message-Id: <20190731175818.20159-7-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190731175818.20159-1-alexander.deucher@amd.com>
References: <20190731175818.20159-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=v0QLAPgETMWgwH7sgHC/jGY6P9k8UFSt4/k2q8nINco=;
 b=FF1Ui5DyZufI8yZWb3xnnH8sBfekl0VDvKX2QQexqOEL0RXLEtqKBIOG3x3aAupVqe
 AvjWdHxv2obtX36hQ4MPb77eSaRohOFKWnU9Ptp9JgAbM1qG3Lrfu/8++0GQJIj2MUzm
 aAAwEAEckgzctEYKcNtHzkFQBCt1WUoGAsHk0BbloYuDXTTBGepdfv9/FheG+bUJEkqQ
 zAp7Gyh8CjKDVq1ALJ5I+qRRD2uXhtRuFE/GeVI4VrxUWvXfTCKyWT8U4CKGQPvgBrF3
 QIHE18g+jNIoBwFOX/AlVqDco1n2OhLSyHNmLjU3EcRsH0AeIdtTZVx5oDP0acnrbpm9
 GZdg==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Tao Zhou <tao.zhou1@amd.com>, Dennis Li <dennis.li@amd.com>,
 Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogSGF3a2luZyBaaGFuZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPgoKSW1wbGVtZW50IHVt
YyBxdWVyeV9yYXNfZXJyb3JfY291bnQgZnVuY3Rpb24gdG8gc3VwcG9ydCBxdWVycnkKYm90aCBj
b3JyZWN0YWJsZSBhbmQgdW5jb3JyZWN0YWJsZSBlcnJvcgoKU2lnbmVkLW9mZi1ieTogSGF3a2lu
ZyBaaGFuZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPgpTaWduZWQtb2ZmLWJ5OiBUYW8gWmhvdSA8
dGFvLnpob3UxQGFtZC5jb20+ClJldmlld2VkLWJ5OiBEZW5uaXMgTGkgPGRlbm5pcy5saUBhbWQu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L01ha2VmaWxlICAgfCAgIDQgKwog
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEuYyB8IDE2MiArKysrKysrKysrKysr
KysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEuaCB8ICAz
OSArKysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDIwNSBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9k
ZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEuYwogY3JlYXRlIG1v
ZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3VtY192Nl8xLmgKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L01ha2VmaWxlCmluZGV4IDdhMWE3OGM3YjMyOS4uY2MzOGE2ODM2ODI1IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZQorKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9NYWtlZmlsZQpAQCAtODEsNiArODEsMTAgQEAgYW1kZ3B1
LXkgKz0gXAogCWdmeGh1Yl92MV8wLm8gbW1odWJfdjFfMC5vIGdtY192OV8wLm8gZ2Z4aHViX3Yx
XzEubyBtbWh1Yl92OV80Lm8gXAogCWdmeGh1Yl92Ml8wLm8gbW1odWJfdjJfMC5vIGdtY192MTBf
MC5vCiAKKyMgYWRkIFVNQyBibG9jaworYW1kZ3B1LXkgKz0gXAorCXVtY192Nl8xLm8KKwogIyBh
ZGQgSUggYmxvY2sKIGFtZGdwdS15ICs9IFwKIAlhbWRncHVfaXJxLm8gXApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEuYyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L3VtY192Nl8xLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAw
MDAwLi4xY2E1YWU2NDI5NDYKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS91bWNfdjZfMS5jCkBAIC0wLDAgKzEsMTYyIEBACisvKgorICogQ29weXJpZ2h0IDIw
MTkgQWR2YW5jZWQgTWljcm8gRGV2aWNlcywgSW5jLgorICoKKyAqIFBlcm1pc3Npb24gaXMgaGVy
ZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCisg
KiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxl
cyAodGhlICJTb2Z0d2FyZSIpLAorICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCBy
ZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgorICogdGhlIHJpZ2h0cyB0
byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vu
c2UsCisgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0
IHBlcnNvbnMgdG8gd2hvbSB0aGUKKyAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywg
c3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CisgKgorICogVGhlIGFib3ZlIGNv
cHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVk
ZWQgaW4KKyAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3
YXJlLgorICoKKyAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdB
UlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCisgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVU
IE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKKyAqIEZJ
VE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBO
TyBFVkVOVCBTSEFMTAorICogVEhFIENPUFlSSUdIVCBIT0xERVIoUykgT1IgQVVUSE9SKFMpIEJF
IExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SCisgKiBPVEhFUiBMSUFCSUxJVFksIFdI
RVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwKKyAqIEFS
SVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1Ig
VEhFIFVTRSBPUgorICogT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgorICoKKyAqLwor
I2luY2x1ZGUgInVtY192Nl8xLmgiCisjaW5jbHVkZSAiYW1kZ3B1X3Jhcy5oIgorI2luY2x1ZGUg
ImFtZGdwdS5oIgorCisjaW5jbHVkZSAicnNtdS9yc211XzBfMF8yX29mZnNldC5oIgorI2luY2x1
ZGUgInJzbXUvcnNtdV8wXzBfMl9zaF9tYXNrLmgiCisjaW5jbHVkZSAidW1jL3VtY182XzFfMV9v
ZmZzZXQuaCIKKyNpbmNsdWRlICJ1bWMvdW1jXzZfMV8xX3NoX21hc2suaCIKKworc3RhdGljIHZv
aWQgdW1jX3Y2XzFfZW5hYmxlX3VtY19pbmRleF9tb2RlKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2LAorCQkJCQkgICB1aW50MzJfdCB1bWNfaW5zdGFuY2UpCit7CisJdWludDMyX3QgcnNtdV91
bWNfaW5kZXg7CisKKwlyc211X3VtY19pbmRleCA9IFJSRUczMl9TT0MxNShSU01VLCAwLAorCQkJ
bW1SU01VX1VNQ19JTkRFWF9SRUdJU1RFUl9OQklGX1ZHMjBfR1BVKTsKKwlyc211X3VtY19pbmRl
eCA9IFJFR19TRVRfRklFTEQocnNtdV91bWNfaW5kZXgsCisJCQlSU01VX1VNQ19JTkRFWF9SRUdJ
U1RFUl9OQklGX1ZHMjBfR1BVLAorCQkJUlNNVV9VTUNfSU5ERVhfTU9ERV9FTiwgMSk7CisJcnNt
dV91bWNfaW5kZXggPSBSRUdfU0VUX0ZJRUxEKHJzbXVfdW1jX2luZGV4LAorCQkJUlNNVV9VTUNf
SU5ERVhfUkVHSVNURVJfTkJJRl9WRzIwX0dQVSwKKwkJCVJTTVVfVU1DX0lOREVYX0lOU1RBTkNF
LCB1bWNfaW5zdGFuY2UpOworCXJzbXVfdW1jX2luZGV4ID0gUkVHX1NFVF9GSUVMRChyc211X3Vt
Y19pbmRleCwKKwkJCVJTTVVfVU1DX0lOREVYX1JFR0lTVEVSX05CSUZfVkcyMF9HUFUsCisJCQlS
U01VX1VNQ19JTkRFWF9XUkVOLCAxIDw8IHVtY19pbnN0YW5jZSk7CisJV1JFRzMyX1NPQzE1KFJT
TVUsIDAsIG1tUlNNVV9VTUNfSU5ERVhfUkVHSVNURVJfTkJJRl9WRzIwX0dQVSwKKwkJCQlyc211
X3VtY19pbmRleCk7Cit9CisKK3N0YXRpYyB2b2lkIHVtY192Nl8xX2Rpc2FibGVfdW1jX2luZGV4
X21vZGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCit7CisJV1JFRzMyX0ZJRUxEMTUoUlNN
VSwgMCwgUlNNVV9VTUNfSU5ERVhfUkVHSVNURVJfTkJJRl9WRzIwX0dQVSwKKwkJCVJTTVVfVU1D
X0lOREVYX01PREVfRU4sIDApOworfQorCitzdGF0aWMgdm9pZCB1bWNfdjZfMV9xdWVyeV9jb3Jy
ZWN0YWJsZV9lcnJvcl9jb3VudChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKKwkJCQkJCSAg
IHVpbnQzMl90IHVtY19yZWdfb2Zmc2V0LAorCQkJCQkJICAgdW5zaWduZWQgbG9uZyAqZXJyb3Jf
Y291bnQpCit7CisJdWludDMyX3QgZWNjX2Vycl9jbnRfc2VsLCBlY2NfZXJyX2NudF9zZWxfYWRk
cjsKKwl1aW50MzJfdCBlY2NfZXJyX2NudCwgZWNjX2Vycl9jbnRfYWRkcjsKKwl1aW50NjRfdCBt
Y191bWNfc3RhdHVzOworCXVpbnQzMl90IG1jX3VtY19zdGF0dXNfYWRkcjsKKworCWVjY19lcnJf
Y250X3NlbF9hZGRyID0KKwkJU09DMTVfUkVHX09GRlNFVChVTUMsIDAsIG1tVU1DQ0gwXzBfRWNj
RXJyQ250U2VsKTsKKwllY2NfZXJyX2NudF9hZGRyID0KKwkJU09DMTVfUkVHX09GRlNFVChVTUMs
IDAsIG1tVU1DQ0gwXzBfRWNjRXJyQ250KTsKKwltY191bWNfc3RhdHVzX2FkZHIgPQorCQlTT0Mx
NV9SRUdfT0ZGU0VUKFVNQywgMCwgbW1NQ0FfVU1DX1VNQzBfTUNVTUNfU1RBVFVTVDApOworCisJ
Lyogc2VsZWN0IHRoZSBsb3dlciBjaGlwIGFuZCBjaGVjayB0aGUgZXJyb3IgY291bnQgKi8KKwll
Y2NfZXJyX2NudF9zZWwgPSBSUkVHMzIoZWNjX2Vycl9jbnRfc2VsX2FkZHIgKyB1bWNfcmVnX29m
ZnNldCk7CisJZWNjX2Vycl9jbnRfc2VsID0gUkVHX1NFVF9GSUVMRChlY2NfZXJyX2NudF9zZWws
IFVNQ0NIMF8wX0VjY0VyckNudFNlbCwKKwkJCQkJRWNjRXJyQ250Q3NTZWwsIDApOworCVdSRUcz
MihlY2NfZXJyX2NudF9zZWxfYWRkciArIHVtY19yZWdfb2Zmc2V0LCBlY2NfZXJyX2NudF9zZWwp
OworCWVjY19lcnJfY250ID0gUlJFRzMyKGVjY19lcnJfY250X2FkZHIgKyB1bWNfcmVnX29mZnNl
dCk7CisJKmVycm9yX2NvdW50ICs9CisJCVJFR19HRVRfRklFTEQoZWNjX2Vycl9jbnQsIFVNQ0NI
MF8wX0VjY0VyckNudCwgRWNjRXJyQ250KTsKKwkvKiBjbGVhciB0aGUgbG93ZXIgY2hpcCBlcnIg
Y291bnQgKi8KKwlXUkVHMzIoZWNjX2Vycl9jbnRfYWRkciArIHVtY19yZWdfb2Zmc2V0LCAwKTsK
KworCS8qIHNlbGVjdCB0aGUgaGlnaGVyIGNoaXAgYW5kIGNoZWNrIHRoZSBlcnIgY291bnRlciAq
LworCWVjY19lcnJfY250X3NlbCA9IFJFR19TRVRfRklFTEQoZWNjX2Vycl9jbnRfc2VsLCBVTUND
SDBfMF9FY2NFcnJDbnRTZWwsCisJCQkJCUVjY0VyckNudENzU2VsLCAxKTsKKwlXUkVHMzIoZWNj
X2Vycl9jbnRfc2VsX2FkZHIgKyB1bWNfcmVnX29mZnNldCwgZWNjX2Vycl9jbnRfc2VsKTsKKwll
Y2NfZXJyX2NudCA9IFJSRUczMihlY2NfZXJyX2NudF9hZGRyICsgdW1jX3JlZ19vZmZzZXQpOwor
CSplcnJvcl9jb3VudCArPQorCQlSRUdfR0VUX0ZJRUxEKGVjY19lcnJfY250LCBVTUNDSDBfMF9F
Y2NFcnJDbnQsIEVjY0VyckNudCk7CisJLyogY2xlYXIgdGhlIGhpZ2hlciBjaGlwIGVyciBjb3Vu
dCAqLworCVdSRUczMihlY2NfZXJyX2NudF9hZGRyICsgdW1jX3JlZ19vZmZzZXQsIDApOworCisJ
LyogY2hlY2sgZm9yIFNSQU0gY29ycmVjdGFibGUgZXJyb3IKKwkgIE1DVU1DX1NUQVRVUyBpcyBh
IDY0IGJpdCByZWdpc3RlciAqLworCW1jX3VtY19zdGF0dXMgPQorCQlSUkVHMzIobWNfdW1jX3N0
YXR1c19hZGRyICsgdW1jX3JlZ19vZmZzZXQpOworCW1jX3VtY19zdGF0dXMgfD0KKwkJKHVpbnQ2
NF90KVJSRUczMihtY191bWNfc3RhdHVzX2FkZHIgKyB1bWNfcmVnX29mZnNldCArIDEpIDw8IDMy
OworCWlmIChSRUdfR0VUX0ZJRUxEKG1jX3VtY19zdGF0dXMsIE1DQV9VTUNfVU1DMF9NQ1VNQ19T
VEFUVVNUMCwgRXJyb3JDb2RlRXh0KSA9PSA2ICYmCisJICAgIFJFR19HRVRfRklFTEQobWNfdW1j
X3N0YXR1cywgTUNBX1VNQ19VTUMwX01DVU1DX1NUQVRVU1QwLCBWYWwpID09IDEgJiYKKwkgICAg
UkVHX0dFVF9GSUVMRChtY191bWNfc3RhdHVzLCBNQ0FfVU1DX1VNQzBfTUNVTUNfU1RBVFVTVDAs
IENFQ0MpID09IDEpCisJCSplcnJvcl9jb3VudCArPSAxOworCisJLyogY2xlYXIgdGhlIE1DVU1D
X1NUQVRVUyAqLworCVdSRUczMihtY191bWNfc3RhdHVzX2FkZHIgKyB1bWNfcmVnX29mZnNldCwg
MCk7CisJV1JFRzMyKG1jX3VtY19zdGF0dXNfYWRkciArIHVtY19yZWdfb2Zmc2V0ICsgMSwgMCk7
Cit9CisKK3N0YXRpYyB2b2lkIHVtY192Nl8xX3F1ZXJyeV91bmNvcnJlY3RhYmxlX2Vycm9yX2Nv
dW50KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorCQkJCQkJICAgICAgdWludDMyX3QgdW1j
X3JlZ19vZmZzZXQsCisJCQkJCQkgICAgICB1bnNpZ25lZCBsb25nICplcnJvcl9jb3VudCkKK3sK
Kwl1aW50NjRfdCBtY191bWNfc3RhdHVzOworCXVpbnQzMl90IG1jX3VtY19zdGF0dXNfYWRkcjsK
KworCW1jX3VtY19zdGF0dXNfYWRkciA9CisgICAgICAgICAgICAgICAgU09DMTVfUkVHX09GRlNF
VChVTUMsIDAsIG1tTUNBX1VNQ19VTUMwX01DVU1DX1NUQVRVU1QwKTsKKworCS8qIGNoZWNrIHRo
ZSBNQ1VNQ19TVEFUVVMgKi8KKwltY191bWNfc3RhdHVzID0gUlJFRzMyKG1jX3VtY19zdGF0dXNf
YWRkciArIHVtY19yZWdfb2Zmc2V0KTsKKwltY191bWNfc3RhdHVzIHw9CisJCSh1aW50NjRfdClS
UkVHMzIobWNfdW1jX3N0YXR1c19hZGRyICsgdW1jX3JlZ19vZmZzZXQgKyAxKSA8PCAzMjsKKwor
CWlmIChSRUdfR0VUX0ZJRUxEKG1jX3VtY19zdGF0dXMsIE1DQV9VTUNfVU1DMF9NQ1VNQ19TVEFU
VVNUMCwgVmFsKSA9PSAxICYmCisJCVJFR19HRVRfRklFTEQobWNfdW1jX3N0YXR1cywgTUNBX1VN
Q19VTUMwX01DVU1DX1NUQVRVU1QwLCBFcnJvckNvZGVFeHQpID09IDYgJiYKKwkJKFJFR19HRVRf
RklFTEQobWNfdW1jX3N0YXR1cywgTUNBX1VNQ19VTUMwX01DVU1DX1NUQVRVU1QwLCBVRUNDKSA9
PSAxIHx8CisJCVJFR19HRVRfRklFTEQobWNfdW1jX3N0YXR1cywgTUNBX1VNQ19VTUMwX01DVU1D
X1NUQVRVU1QwLCBQQ0MpID09IDEgfHwKKwkJUkVHX0dFVF9GSUVMRChtY191bWNfc3RhdHVzLCBN
Q0FfVU1DX1VNQzBfTUNVTUNfU1RBVFVTVDAsIFVDKSA9PSAxIHx8CisJCVJFR19HRVRfRklFTEQo
bWNfdW1jX3N0YXR1cywgTUNBX1VNQ19VTUMwX01DVU1DX1NUQVRVU1QwLCBUQ0MpID09IDEpKQor
CQkqZXJyb3JfY291bnQgKz0gMTsKKworCS8qIGNsZWFyIHRoZSBNQ1VNQ19TVEFUVVMgKi8KKwlX
UkVHMzIobWNfdW1jX3N0YXR1c19hZGRyICsgdW1jX3JlZ19vZmZzZXQsIDApOworCVdSRUczMiht
Y191bWNfc3RhdHVzX2FkZHIgKyB1bWNfcmVnX29mZnNldCArIDEsIDApOworfQorCitzdGF0aWMg
dm9pZCB1bWNfdjZfMV9xdWVyeV9yYXNfZXJyb3JfY291bnQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsCisJCQkJCSAgIHZvaWQgKnJhc19lcnJvcl9zdGF0dXMpCit7CisJc3RydWN0IHJhc19l
cnJfZGF0YSAqZXJyX2RhdGEgPSAoc3RydWN0IHJhc19lcnJfZGF0YSAqKXJhc19lcnJvcl9zdGF0
dXM7CisJdWludDMyX3QgdW1jX2luc3QsIGNoYW5uZWxfaW5zdCwgdW1jX3JlZ19vZmZzZXQ7CisK
Kwlmb3IgKHVtY19pbnN0ID0gMDsgdW1jX2luc3QgPCBVTUNfVjZfMV9VTUNfSU5TVEFOQ0VfTlVN
OyB1bWNfaW5zdCsrKSB7CisJCS8qIGVuYWJsZSB0aGUgaW5kZXggbW9kZSB0byBxdWVyeSBlcm9y
IGNvdW50IHBlciBjaGFubmVsICovCisJCXVtY192Nl8xX2VuYWJsZV91bWNfaW5kZXhfbW9kZShh
ZGV2LCB1bWNfaW5zdCk7CisJCWZvciAoY2hhbm5lbF9pbnN0ID0gMDsgY2hhbm5lbF9pbnN0IDwg
VU1DX1Y2XzFfQ0hBTk5FTF9JTlNUQU5DRV9OVU07IGNoYW5uZWxfaW5zdCsrKSB7CisJCQkvKiBj
YWxjIHRoZSByZWdpc3RlciBvZmZzZXQgYWNjb3JkaW5nIHRvIGNoYW5uZWwgaW5zdGFuY2UgKi8K
KwkJCXVtY19yZWdfb2Zmc2V0ID0gVU1DX1Y2XzFfUEVSX0NIQU5ORUxfT0ZGU0VUICogY2hhbm5l
bF9pbnN0OworCQkJdW1jX3Y2XzFfcXVlcnlfY29ycmVjdGFibGVfZXJyb3JfY291bnQoYWRldiwg
dW1jX3JlZ19vZmZzZXQsCisJCQkJCQkJICAgICAgICYoZXJyX2RhdGEtPmNlX2NvdW50KSk7CisJ
CQl1bWNfdjZfMV9xdWVycnlfdW5jb3JyZWN0YWJsZV9lcnJvcl9jb3VudChhZGV2LCB1bWNfcmVn
X29mZnNldCwKKwkJCQkJCQkJICAmKGVycl9kYXRhLT51ZV9jb3VudCkpOworCQl9CisJfQorCXVt
Y192Nl8xX2Rpc2FibGVfdW1jX2luZGV4X21vZGUoYWRldik7Cit9CisKK2NvbnN0IHN0cnVjdCBh
bWRncHVfdW1jX2Z1bmNzIHVtY192Nl8xX2Z1bmNzID0geworCS5xdWVyeV9yYXNfZXJyb3JfY291
bnQgPSB1bWNfdjZfMV9xdWVyeV9yYXNfZXJyb3JfY291bnQsCit9OwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdW1jX3Y2XzEuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L3VtY192Nl8xLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAw
Li5kMjVhZTQxNGY0ZDgKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS91bWNfdjZfMS5oCkBAIC0wLDAgKzEsMzkgQEAKKy8qCisgKiBDb3B5cmlnaHQgMjAxOSBB
ZHZhbmNlZCBNaWNybyBEZXZpY2VzLCBJbmMuCisgKgorICogUGVybWlzc2lvbiBpcyBoZXJlYnkg
Z3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKKyAqIGNv
cHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0
aGUgIlNvZnR3YXJlIiksCisgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3Ry
aWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCisgKiB0aGUgcmlnaHRzIHRvIHVz
ZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwK
KyAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVy
c29ucyB0byB3aG9tIHRoZQorICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJq
ZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKKyAqCisgKiBUaGUgYWJvdmUgY29weXJp
Z2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBp
bgorICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUu
CisgKgorICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFO
VFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9U
IExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAorICogRklUTkVT
UyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVW
RU5UIFNIQUxMCisgKiBUSEUgQ09QWVJJR0hUIEhPTERFUihTKSBPUiBBVVRIT1IoUykgQkUgTElB
QkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IKKyAqIE9USEVSIExJQUJJTElUWSwgV0hFVEhF
UiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLAorICogQVJJU0lO
RyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUg
VVNFIE9SCisgKiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCisgKgorICovCisjaWZu
ZGVmIF9fVU1DX1Y2XzFfSF9fCisjZGVmaW5lIF9fVU1DX1Y2XzFfSF9fCisKKyNpbmNsdWRlICJz
b2MxNV9jb21tb24uaCIKKworLyogSEJNICBNZW1vcnkgQ2hhbm5lbCBXaWR0aCAqLworI2RlZmlu
ZSBVTUNfVjZfMV9IQk1fTUVNT1JZX0NIQU5ORUxfV0lEVEgJMTI4CisvKiBudW1iZXIgb2YgdW1j
IGNoYW5uZWwgaW5zdGFuY2Ugd2l0aCBtZW1vcnkgbWFwIHJlZ2lzdGVyIGFjY2VzcyAqLworI2Rl
ZmluZSBVTUNfVjZfMV9DSEFOTkVMX0lOU1RBTkNFX05VTQkJNAorLyogbnVtYmVyIG9mIHVtYyBp
bnN0YW5jZSB3aXRoIG1lbW9yeSBtYXAgcmVnaXN0ZXIgYWNjZXNzICovCisjZGVmaW5lIFVNQ19W
Nl8xX1VNQ19JTlNUQU5DRV9OVU0JCTgKKy8qIFVNQyByZWdpc2VyIHBlciBjaGFubmVsIG9mZnNl
dCAqLworI2RlZmluZSBVTUNfVjZfMV9QRVJfQ0hBTk5FTF9PRkZTRVQJCTB4ODAwCisKK2V4dGVy
biBjb25zdCBzdHJ1Y3QgYW1kZ3B1X3VtY19mdW5jcyB1bWNfdjZfMV9mdW5jczsKKworI2VuZGlm
Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vYW1kLWdmeA==
