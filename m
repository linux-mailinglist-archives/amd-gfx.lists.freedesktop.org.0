Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C834D113890
	for <lists+amd-gfx@lfdr.de>; Thu,  5 Dec 2019 01:15:26 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C11086F533;
	Thu,  5 Dec 2019 00:15:24 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM04-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr690077.outbound.protection.outlook.com [40.107.69.77])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8FEA16F533
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 00:15:23 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=AaJaGm0SulM3EXnTW77+XM+QNFVE3l0WXu7Bc9SY8uzhsVCQuQc/kEJbwIKYM95/IyrXy0UI67ZvxWqf2OU7b8XE7rx0706yFW/bvXOr/OkAean2/sqiQ4fAhccro30Ro3Qill7NItuffHk6PxUsn4ySqD2vzmpvnGAAsCnSmogF3iVhZ8+M9iS6I8Ieh4LICBBhVaqGlDjrfBiBJP3861OMDX4UFGvOlWl3+0ecY/TNtaPVfRILnTdT4ohuPrQhdBM2kunghFFLNmzMlng9g+Z6M+9/Sef0QvpK/HGaFoa36AU3EXWtfG0bDuZxZakEXdpBPvy6udN0B9ZmldGs4A==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=/fL1urh/7ZxZC+BuZTQVikGXvsaNJw1pmUq7Zm0qRjA=;
 b=IpfKi9KeBghZJpQaEXpweiW2rdE6C3/pYKv30NiD6jnVhr5rncuEWePvOF08cqrGhtUKqetYctWXQZUTCSR9F3Vzwo6rDs8S5p1oftxhE60cVO6qjCe5V+6pnZh7wSeTIvVt3Pd+v3SSd4ZZ2hJfC2nYlsNtiagA3qLAqyN7EByqLmPrYN+eY0AsWA1+X7ENUOPfD1bUDLWvvD47qd0X90vDTJFCDUpG21sYnjflZgHDuZqF6qKsfmRE2bd8ODMTfsij1T74OgqKiZ7m9ZxGaGGSij+1NO72gmI+QxSWzdF2xHyfBI1XtFtXuArE8Q0nieQ/VY70I8OOULPiHzp2ZQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM6PR12MB3947.namprd12.prod.outlook.com (10.255.175.222) by
 DM6PR12MB3385.namprd12.prod.outlook.com (20.178.198.80) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2495.20; Thu, 5 Dec 2019 00:15:21 +0000
Received: from DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::a099:6fd7:e4d6:f560]) by DM6PR12MB3947.namprd12.prod.outlook.com
 ([fe80::a099:6fd7:e4d6:f560%3]) with mapi id 15.20.2516.014; Thu, 5 Dec 2019
 00:15:21 +0000
Subject: Re: [PATCH 3/3] drm/amdgpu: stop adding VM updates fences to the resv
 obj
To: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>,
 amd-gfx@lists.freedesktop.org, philip.yang@amd.com,
 "Sierra Guiza, Alejandro (Alex)" <Alex.Sierra@amd.com>
References: <20191204153822.2199-1-christian.koenig@amd.com>
 <20191204153822.2199-3-christian.koenig@amd.com>
From: Felix Kuehling <felix.kuehling@amd.com>
Organization: AMD Inc.
Message-ID: <ca6a717f-1ca4-1e9a-11b3-76f73d3b3485@amd.com>
Date: Wed, 4 Dec 2019 19:15:16 -0500
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.2.1
In-Reply-To: <20191204153822.2199-3-christian.koenig@amd.com>
Content-Language: en-US
X-ClientProxiedBy: YTOPR0101CA0032.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b00:15::45) To DM6PR12MB3947.namprd12.prod.outlook.com
 (2603:10b6:5:148::30)
MIME-Version: 1.0
X-Originating-IP: [165.204.55.251]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: 65d99557-98a3-47c8-2c05-08d77918375c
X-MS-TrafficTypeDiagnostic: DM6PR12MB3385:|DM6PR12MB3385:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <DM6PR12MB3385AB9F0CD79775A7655287925C0@DM6PR12MB3385.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:8882;
X-Forefront-PRVS: 02426D11FE
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(376002)(366004)(396003)(136003)(346002)(199004)(189003)(66946007)(66556008)(5660300002)(6512007)(316002)(31686004)(6436002)(6486002)(6116002)(3846002)(478600001)(31696002)(65956001)(14444005)(110136005)(229853002)(36916002)(58126008)(50466002)(44832011)(66476007)(6246003)(81156014)(8936002)(8676002)(86362001)(6636002)(25786009)(7736002)(53546011)(81166006)(23676004)(6506007)(36756003)(11346002)(186003)(6666004)(66574012)(26005)(14454004)(15650500001)(52116002)(305945005)(2906002)(2616005)(2870700001)(99286004)(76176011);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR12MB3385;
 H:DM6PR12MB3947.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 6qF5xN1J/44TsMlLLOgzb8Q/7on51ufXOCagFOC2U7l3jRDVyiZT5TOtnzkmAewCISpaggLJg64loxwV/vqi9sDGLQ6eQ3ly5jMHH1O6Mn1ubIc5k++8YaoGhvZZCuPk6M5Aix+BcRIQgOEUO5p68KAT8rNcEDm47NYGPGMfdS5v8HdnnDe5GvETkUoSzUW+SAG0U+S/GhQG2Zzu3gt8H3JMCG6tffXN6m5LSpssfyfoercS7fEi5e61PnPufrDWMq8uvPc4l3Nt2IsRhxzoDnRpG+myHBjkUb+WBhqKXaU4pWvXUJuOadwqBhZj26OD89mhwqBePQsW+2bdDNQ5uX6CVdrYZvyHfw17/L0LFQosvouXjJUfoJ51ZHise+ynFGFzuLJJ7BPD6EYLKfHwC1pHwdzcUetsQH2FnZbsRrIFL5q0awdbs2/QhJ+0far7
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 65d99557-98a3-47c8-2c05-08d77918375c
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 05 Dec 2019 00:15:21.3406 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: DhKdgdYx6LY9ueJtKJGNN7QMXZ1JyBv0tEFO8JU2iHKUT6jce30vIVC12QYrQkHwFvxminB20F3IaDQxirq5nQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB3385
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=/fL1urh/7ZxZC+BuZTQVikGXvsaNJw1pmUq7Zm0qRjA=;
 b=LyKwOXXvfsqTsKPLf9MIxQgWMxX78FWxJdYFCTFedUMgoMR6ZbRDsqX/ctXasRo6wDJjuwGUe86sEwR8HxjNkbEjX6TiAzPknxjDDv0irUGsAQyc5yG90izZq1R+7Ck7KOs5FPwj4wwIiq+VeEe6nhoogVQkefz3Pxe0A7CfgAU=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Felix.Kuehling@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

WytBbGVqYW5kcm9dCgpPbiAyMDE5LTEyLTA0IDEwOjM4IGEubS4sIENocmlzdGlhbiBLw7ZuaWcg
d3JvdGU6Cj4gVGhpcyB3YXkgd2UgY2FuIGRvIHVwZGF0ZXMgZXZlbiB3aXRob3V0IHRoZSByZXN2
IG9iaiBsb2NrZWQuCgpUaGlzIGNvdWxkIHVzZSBhIGJpdCBtb3JlIGV4cGxhbmF0aW9uLiBUaGlz
IGNoYW5nZSBkZXBlbmRzIG9uIHRoZSAKcHJldmlvdXMgb25lIHRoYXQgYWRkcyBleHBsaWNpdCBz
eW5jaHJvbml6YXRpb24gd2l0aCBwYWdlIHRhYmxlIHVwZGF0ZXMgCmR1cmluZyBjb21tYW5kIHN1
Ym1pc3Npb24gaW4gYW1kZ3B1X2NzLmMuIFlvdSdyZSBhZGRpbmcgdHdvIGZlbmNlcyB0byAKdGhl
IFZNIGZvciB0aGUgbGFzdCBkaXJlY3QvZGVsYXllZCBwYWdlIHRhYmxlIHVwZGF0ZSB0aGF0IGlz
IHVzZWQgdG8gCnByZXZlbnQgZXZpY3Rpb24gb2YgYnVzeSBwYWdlIHRhYmxlcyAodGhhdCBubyBs
b25nZXIgaGF2ZSB0aGUgdXBkYXRlIApmZW5jZSBpbiB0aGVpciByZXN2KSBhbmQgdG8gaW1wbGVt
ZW50IGFtZGdwdV92bV93YWl0X2lkbGUuCgpJbiBhZGRpdGlvbiB0byB0aGlzIHBhdGNoLCB1cGRh
dGluZyBwYWdlIHRhYmxlcyB3aXRob3V0IHRoZSByZXN2IGxvY2tlZCAKc3RpbGwgbmVlZHMgYWRk
aXRpb25hbCBzYWZlZ3VhcmRzIHRvIGVuc3VyZSB0aGUgcGFnZSB0YWJsZXMgYXJlIHJlc2lkZW50
IAp3aGlsZSBwcmVwYXJpbmcgdGhlIHBhZ2UgdGFibGUgdXBkYXRlLiBUaGF0IHdpbGwgY29tZSBp
biBBbGVqYW5kcm8ncyAKY2hhbmdlcyBmb3IgaW52YWxpZGF0aW5nIFBURXMgaW4gTU1VIG5vdGlm
aWVycy4KCgo+Cj4gU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtv
ZW5pZ0BhbWQuY29tPgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X3N5bmMuYyAgICB8ICA2ICsrLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdm0uYyAgICAgIHwgMzAgKysrKysrKysrKysrKysrKysrLS0tCj4gICBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uaCAgICAgIHwgIDQgKysrCj4gICBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdm1fc2RtYS5jIHwgMTEgKysrKystLS0KPiAgIDQgZmlsZXMg
Y2hhbmdlZCwgNDAgaW5zZXJ0aW9ucygrKSwgMTEgZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zeW5jLmMKPiBpbmRleCA5YjI4YzFlYjVmNDkuLjdmMTdj
MDZiOGEzZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
c3luYy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuYwo+
IEBAIC0yNDEsMTAgKzI0MSw4IEBAIGludCBhbWRncHVfc3luY19yZXN2KHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LAo+ICAgCQkJLyogVk0gdXBkYXRlcyBhcmUgb25seSBpbnRlcmVzdGluZwo+
ICAgCQkJICogZm9yIG90aGVyIFZNIHVwZGF0ZXMgYW5kIG1vdmVzLgo+ICAgCQkJICovCj4gLQkJ
CWlmICgob3duZXIgIT0gQU1ER1BVX0ZFTkNFX09XTkVSX1VOREVGSU5FRCkgJiYKPiAtCQkJICAg
IChmZW5jZV9vd25lciAhPSBBTURHUFVfRkVOQ0VfT1dORVJfVU5ERUZJTkVEKSAmJgo+IC0JCQkg
ICAgKChvd25lciA9PSBBTURHUFVfRkVOQ0VfT1dORVJfVk0pICE9Cj4gLQkJCSAgICAgKGZlbmNl
X293bmVyID09IEFNREdQVV9GRU5DRV9PV05FUl9WTSkpKQo+ICsJCQlpZiAob3duZXIgPT0gQU1E
R1BVX0ZFTkNFX09XTkVSX1ZNICYmCj4gKwkJCSAgICBmZW5jZV9vd25lciAhPSBBTURHUFVfRkVO
Q0VfT1dORVJfVU5ERUZJTkVEKQoKSSBkb24ndCByZWFsbHkgdW5kZXJzdGFuZCB0aGlzIGNvbmRp
dGlvbiBub3cuIFdoeSBkb2VzIHRoaXMgZnVuY3Rpb24gCm5lZWQgdG8gY2hhbmdlIGF0IGFsbD8g
VGhpcyBmdW5jdGlvbiBkb2Vzbid0IGFkZCBmZW5jZXMgdG8gcmVzdnMsIGl0IAphZGRzIGZlbmNl
cyBmcm9tIGEgcmVzdiB0byBhIHN5bmNfb2JqLiBJcyB0aGlzIGp1c3QgYSBzaW1wbGlmaWNhdGlv
biAKYmVjYXVzZSB5b3UgYXNzdW1lIHRoYXQgVk0gZmVuY2VzIGNhbiBubyBsb25nZXIgYmUgZm91
bmQgaW4gcmVzdnM/IFdvdWxkIAppdCBiZSB3b3J0aCBhZGRpbmcgYSBXQVJOX09OQ0UgdG8gY2hl
Y2sgdGhpcyBhc3N1bXB0aW9uPwoKTWF5YmUgdGhlIGNvbW1lbnQgYWJvdmUgc2hvdWxkIGFsc28g
YmUgdXBkYXRlZC4gSSB0aGluayB3aGF0IHRoaXMgCmNvbmRpdGlvbiBub3cgc3RhdGVzIGlzIHNv
bWV0aGluZyBsaWtlIC8qIFZNIHVwZGF0ZXMgZG9uJ3Qgd2FpdCBmb3IgdXNlciAKbW9kZSBmZW5j
ZXMuICovCgoKPiAgIAkJCQljb250aW51ZTsKPiAgIAo+ICAgCQkJLyogSWdub3JlIGZlbmNlIGZy
b20gdGhlIHNhbWUgb3duZXIgYW5kIGV4cGxpY2l0IG9uZSBhcwo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV92bS5jCj4gaW5kZXggYTIyYmQ1NzEyOWQxLi4wZDcwMGU4MTU0YzQgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYwo+IEBAIC01NjIsOCArNTYy
LDggQEAgdm9pZCBhbWRncHVfdm1fZ2V0X3BkX2JvKHN0cnVjdCBhbWRncHVfdm0gKnZtLAo+ICAg
ewo+ICAgCWVudHJ5LT5wcmlvcml0eSA9IDA7Cj4gICAJZW50cnktPnR2LmJvID0gJnZtLT5yb290
LmJhc2UuYm8tPnRibzsKPiAtCS8qIE9uZSBmb3IgdGhlIFZNIHVwZGF0ZXMsIG9uZSBmb3IgVFRN
IGFuZCBvbmUgZm9yIHRoZSBDUyBqb2IgKi8KPiAtCWVudHJ5LT50di5udW1fc2hhcmVkID0gMzsK
PiArCS8qIE9uZSBmb3IgVFRNIGFuZCBvbmUgZm9yIHRoZSBDUyBqb2IgKi8KPiArCWVudHJ5LT50
di5udW1fc2hhcmVkID0gMjsKPiAgIAllbnRyeS0+dXNlcl9wYWdlcyA9IE5VTEw7Cj4gICAJbGlz
dF9hZGQoJmVudHJ5LT50di5oZWFkLCB2YWxpZGF0ZWQpOwo+ICAgfQo+IEBAIC0yNTIyLDYgKzI1
MjIsMTEgQEAgYm9vbCBhbWRncHVfdm1fZXZpY3RhYmxlKHN0cnVjdCBhbWRncHVfYm8gKmJvKQo+
ICAgCWlmICghZG1hX3Jlc3ZfdGVzdF9zaWduYWxlZF9yY3UoYm8tPnRiby5iYXNlLnJlc3YsIHRy
dWUpKQo+ICAgCQlyZXR1cm4gZmFsc2U7Cj4gICAKPiArCS8qIERvbid0IGV2aWN0IFZNIHBhZ2Ug
dGFibGVzIHdoaWxlIHRoZXkgYXJlIHVwZGF0ZWQgKi8KPiArCWlmICghZG1hX2ZlbmNlX2lzX3Np
Z25hbGVkKGJvX2Jhc2UtPnZtLT5sYXN0X2RpcmVjdCkgfHwKPiArCSAgICAhZG1hX2ZlbmNlX2lz
X3NpZ25hbGVkKGJvX2Jhc2UtPnZtLT5sYXN0X2RlbGF5ZWQpKQo+ICsJCXJldHVybiBmYWxzZTsK
PiArCj4gICAJcmV0dXJuIHRydWU7Cj4gICB9Cj4gICAKPiBAQCAtMjY4Nyw4ICsyNjkyLDE2IEBA
IHZvaWQgYW1kZ3B1X3ZtX2FkanVzdF9zaXplKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1
aW50MzJfdCBtaW5fdm1fc2l6ZSwKPiAgICAqLwo+ICAgbG9uZyBhbWRncHVfdm1fd2FpdF9pZGxl
KHN0cnVjdCBhbWRncHVfdm0gKnZtLCBsb25nIHRpbWVvdXQpCj4gICB7Cj4gLQlyZXR1cm4gZG1h
X3Jlc3Zfd2FpdF90aW1lb3V0X3JjdSh2bS0+cm9vdC5iYXNlLmJvLT50Ym8uYmFzZS5yZXN2LAo+
IC0JCQkJCQkgICB0cnVlLCB0cnVlLCB0aW1lb3V0KTsKPiArCXRpbWVvdXQgPSBkbWFfcmVzdl93
YWl0X3RpbWVvdXRfcmN1KHZtLT5yb290LmJhc2UuYm8tPnRiby5iYXNlLnJlc3YsCj4gKwkJCQkJ
ICAgIHRydWUsIHRydWUsIHRpbWVvdXQpOwo+ICsJaWYgKHRpbWVvdXQgPD0gMCkKPiArCQlyZXR1
cm4gdGltZW91dDsKPiArCj4gKwl0aW1lb3V0ID0gZG1hX2ZlbmNlX3dhaXRfdGltZW91dCh2bS0+
bGFzdF9kaXJlY3QsIHRydWUsIHRpbWVvdXQpOwo+ICsJaWYgKHRpbWVvdXQgPD0gMCkKPiArCQly
ZXR1cm4gdGltZW91dDsKPiArCj4gKwlyZXR1cm4gZG1hX2ZlbmNlX3dhaXRfdGltZW91dCh2bS0+
bGFzdF9kZWxheWVkLCB0cnVlLCB0aW1lb3V0KTsKPiAgIH0KPiAgIAo+ICAgLyoqCj4gQEAgLTI3
NTcsNiArMjc3MCw4IEBAIGludCBhbWRncHVfdm1faW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiwgc3RydWN0IGFtZGdwdV92bSAqdm0sCj4gICAJZWxzZQo+ICAgCQl2bS0+dXBkYXRlX2Z1
bmNzID0gJmFtZGdwdV92bV9zZG1hX2Z1bmNzOwo+ICAgCXZtLT5sYXN0X3VwZGF0ZSA9IE5VTEw7
Cj4gKwl2bS0+bGFzdF9kaXJlY3QgPSBkbWFfZmVuY2VfZ2V0X3N0dWIoKTsKPiArCXZtLT5sYXN0
X2RlbGF5ZWQgPSBkbWFfZmVuY2VfZ2V0X3N0dWIoKTsKPiAgIAo+ICAgCWFtZGdwdV92bV9ib19w
YXJhbShhZGV2LCB2bSwgYWRldi0+dm1fbWFuYWdlci5yb290X2xldmVsLCBmYWxzZSwgJmJwKTsK
PiAgIAlpZiAodm1fY29udGV4dCA9PSBBTURHUFVfVk1fQ09OVEVYVF9DT01QVVRFKQo+IEBAIC0y
ODA3LDYgKzI4MjIsOCBAQCBpbnQgYW1kZ3B1X3ZtX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsIHN0cnVjdCBhbWRncHVfdm0gKnZtLAo+ICAgCXZtLT5yb290LmJhc2UuYm8gPSBOVUxM
Owo+ICAgCj4gICBlcnJvcl9mcmVlX2RlbGF5ZWQ6Cj4gKwlkbWFfZmVuY2VfcHV0KHZtLT5sYXN0
X2RpcmVjdCk7Cj4gKwlkbWFfZmVuY2VfcHV0KHZtLT5sYXN0X2RlbGF5ZWQpOwo+ICAgCWRybV9z
Y2hlZF9lbnRpdHlfZGVzdHJveSgmdm0tPmRlbGF5ZWQpOwo+ICAgCj4gICBlcnJvcl9mcmVlX2Rp
cmVjdDoKPiBAQCAtMzAwNyw2ICszMDI0LDExIEBAIHZvaWQgYW1kZ3B1X3ZtX2Zpbmkoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBhbWRncHVfdm0gKnZtKQo+ICAgCQl2bS0+cGFz
aWQgPSAwOwo+ICAgCX0KPiAgIAo+ICsJZG1hX2ZlbmNlX3dhaXQodm0tPmxhc3RfZGlyZWN0LCBm
YWxzZSk7Cj4gKwlkbWFfZmVuY2VfcHV0KHZtLT5sYXN0X2RpcmVjdCk7Cj4gKwlkbWFfZmVuY2Vf
d2FpdCh2bS0+bGFzdF9kZWxheWVkLCBmYWxzZSk7Cj4gKwlkbWFfZmVuY2VfcHV0KHZtLT5sYXN0
X2RlbGF5ZWQpOwo+ICsKPiAgIAlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUobWFwcGluZywgdG1w
LCAmdm0tPmZyZWVkLCBsaXN0KSB7Cj4gICAJCWlmIChtYXBwaW5nLT5mbGFncyAmIEFNREdQVV9Q
VEVfUFJUICYmIHBydF9maW5pX25lZWRlZCkgewo+ICAgCQkJYW1kZ3B1X3ZtX3BydF9maW5pKGFk
ZXYsIHZtKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X3ZtLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uaAo+IGluZGV4IGRi
NTYxNzY1NDUzYi4uZDkzZWE5YWQ4NzllIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV92bS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3ZtLmgKPiBAQCAtMjY5LDYgKzI2OSwxMCBAQCBzdHJ1Y3QgYW1kZ3B1X3ZtIHsKPiAg
IAlzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eQlkaXJlY3Q7Cj4gICAJc3RydWN0IGRybV9zY2hlZF9l
bnRpdHkJZGVsYXllZDsKPiAgIAo+ICsJLyogTGFzdCBzdWJtaXNzaW9uIHRvIHRoZSBzY2hlZHVs
ZXIgZW50aXRpZXMgKi8KPiArCXN0cnVjdCBkbWFfZmVuY2UJKmxhc3RfZGlyZWN0Owo+ICsJc3Ry
dWN0IGRtYV9mZW5jZQkqbGFzdF9kZWxheWVkOwo+ICsKPiAgIAl1bnNpZ25lZCBpbnQJCXBhc2lk
Owo+ICAgCS8qIGRlZGljYXRlZCB0byB2bSAqLwo+ICAgCXN0cnVjdCBhbWRncHVfdm1pZAkqcmVz
ZXJ2ZWRfdm1pZFtBTURHUFVfTUFYX1ZNSFVCU107Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bV9zZG1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfdm1fc2RtYS5jCj4gaW5kZXggODMyZGI1OWY0NDFlLi4wNGU3OWM3NWM4N2Ug
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtX3NkbWEu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bV9zZG1hLmMKPiBA
QCAtOTUsMTEgKzk1LDEwIEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3ZtX3NkbWFfcHJlcGFyZShzdHJ1
Y3QgYW1kZ3B1X3ZtX3VwZGF0ZV9wYXJhbXMgKnAsCj4gICBzdGF0aWMgaW50IGFtZGdwdV92bV9z
ZG1hX2NvbW1pdChzdHJ1Y3QgYW1kZ3B1X3ZtX3VwZGF0ZV9wYXJhbXMgKnAsCj4gICAJCQkJIHN0
cnVjdCBkbWFfZmVuY2UgKipmZW5jZSkKPiAgIHsKPiAtCXN0cnVjdCBhbWRncHVfYm8gKnJvb3Qg
PSBwLT52bS0+cm9vdC5iYXNlLmJvOwo+ICAgCXN0cnVjdCBhbWRncHVfaWIgKmliID0gcC0+am9i
LT5pYnM7Cj4gICAJc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eTsKPiArCXN0cnVjdCBk
bWFfZmVuY2UgKmYsICp0bXA7Cj4gICAJc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nOwo+IC0Jc3Ry
dWN0IGRtYV9mZW5jZSAqZjsKPiAgIAlpbnQgcjsKPiAgIAo+ICAgCWVudGl0eSA9IHAtPmRpcmVj
dCA/ICZwLT52bS0+ZGlyZWN0IDogJnAtPnZtLT5kZWxheWVkOwo+IEBAIC0xMTIsNyArMTExLDEz
IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3ZtX3NkbWFfY29tbWl0KHN0cnVjdCBhbWRncHVfdm1fdXBk
YXRlX3BhcmFtcyAqcCwKPiAgIAlpZiAocikKPiAgIAkJZ290byBlcnJvcjsKPiAgIAo+IC0JYW1k
Z3B1X2JvX2ZlbmNlKHJvb3QsIGYsIHRydWUpOwoKVGhpcyBzZWVtcyB0byBiZSB0aGUgY2hhbmdl
IGFkdmVydGlzZWQgaW4gdGhlIGhlYWRsaW5lLCB3aGVyZSBpdCBubyAKbG9uZ2VyIGFkZHMgdGhl
IHNoYXJlZCBWTSBmZW5jZSB0byB0aGUgUEQgcmVzdi4gQWxsIHRoZSByZXN0IG9mIHRoaXMgCnBh
dGNoIEknbSB0cnlpbmcgdG8gZXhwbGFpbiB0byBteXNlbGYgYXMgSSdtIHJldmlld2luZyBpdC4g
RG8gbXkgCmNvbW1lbnRzIGFib3ZlIHNvdW5kIGFib3V0IHJpZ2h0PyBBIGJldHRlciBwYXRjaCBk
ZXNjcmlwdGlvbiB3b3VsZCBoYXZlIApzYXZlZCBtZSBhYm91dCBoYWxmIGFuIGhvdXIgb2YgaGVh
ZC1zY3JhdGNoaW5nLgoKVGhhbmtzLAogwqAgRmVsaXgKCj4gKwl0bXAgPSBkbWFfZmVuY2VfZ2V0
KGYpOwo+ICsJaWYgKHAtPmRpcmVjdCkKPiArCQlzd2FwKHAtPnZtLT5sYXN0X2RpcmVjdCwgdG1w
KTsKPiArCWVsc2UKPiArCQlzd2FwKHAtPnZtLT5sYXN0X2RlbGF5ZWQsIHRtcCk7Cj4gKwlkbWFf
ZmVuY2VfcHV0KHRtcCk7Cj4gKwo+ICAgCWlmIChmZW5jZSAmJiAhcC0+ZGlyZWN0KQo+ICAgCQlz
d2FwKCpmZW5jZSwgZik7Cj4gICAJZG1hX2ZlbmNlX3B1dChmKTsKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9hbWQtZ2Z4
