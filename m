Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4BE3C53A48E
	for <lists+amd-gfx@lfdr.de>; Wed,  1 Jun 2022 14:09:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5DB4110E805;
	Wed,  1 Jun 2022 12:09:10 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM10-BN7-obe.outbound.protection.outlook.com
 (mail-bn7nam10on2081.outbound.protection.outlook.com [40.107.92.81])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5B5BB10E805
 for <amd-gfx@lists.freedesktop.org>; Wed,  1 Jun 2022 12:09:09 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=BWPFu5EjC8+gL0cHpyK5dWbhphjeWpyetjrLyUMNb6gRPG1CnAmsgQlGtwYO0gWyhmWmOlvizFLXkL5vG07cObShfISLQu9Zni3rn0B+UaWlt8pNqpOOfuxm8q3Y4LOugjOhUODdmbjs2B0nSb9nVvOUdbOiejiEkDx44sHjwhlJAjSNJsbuPs5Q26bPBS5BHT5gWTqtl9F72FNmnlKzRgkK81qg2XVfjzSgayoKAOQQo9caLfWLpXBXfCKstif0djCysT1vMQcTQrUppQpLQbRu/kNw9CdkmZUDZckDr0ttive3p4fckeFbT+GCR3EHzggHOv5u/R7sHNjrgzZYew==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=uQIL4pV3WRE+mQup0I5TPgLoBu5JVmcd3xSXl85vP3M=;
 b=jjpq1tKRPBkKUCBjmBxjU0ZpenjEskkK0ABgQDhKwu4oFlkAhc9svt1a3FFne5ZUc7bRSTfMXo4EMqS4Gh0OrdN5aQ+LS8gkWA+HEBvPqU4yLczvckYhn2hfIJFwbUcHOzGvIj0QWlx1Edwz9zEynK6ByRi6Vp0SSoAtK8QN7y1Ad5F/xCiSNnQypgmjYnfqYJiO0rysshg77E/S+VcLScU2DNRN9KQaxtcBv1SyBMuj9iBVb6YM35dPt+ovDw45cZsuYRqSLSKV8jHN5qiXrxP9KR6zMarBtThiCk6OmScygKgNCuBslp9erioiynUkJSIzgL7YiUU6X5VaqiIySQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=uQIL4pV3WRE+mQup0I5TPgLoBu5JVmcd3xSXl85vP3M=;
 b=yxRIgVICwH5j8YsM+JdEBdFkFTR9QXJFX4b0QVFWKHfxD5SEVi2CzeUgbJrxhg+opbrNxYMLtS+BXrNwv+jJDvu4jE7ODEIKX4TGwzoFgHFuNQ5fTBpnPH1u4CujQtmu8dAvSrVgzezzYTkO6Umjc7PX/ENZCzrSGLQwTWQUGh4=
Received: from BL3PR12MB6619.namprd12.prod.outlook.com (2603:10b6:208:38e::5)
 by CY4PR12MB1239.namprd12.prod.outlook.com (2603:10b6:903:3d::14)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5314.13; Wed, 1 Jun
 2022 12:09:06 +0000
Received: from BL3PR12MB6619.namprd12.prod.outlook.com
 ([fe80::d121:cab5:e77:8ee2]) by BL3PR12MB6619.namprd12.prod.outlook.com
 ([fe80::d121:cab5:e77:8ee2%8]) with mapi id 15.20.5314.013; Wed, 1 Jun 2022
 12:09:06 +0000
From: "Mohan Marimuthu, Yogesh" <Yogesh.Mohanmarimuthu@amd.com>
To: =?utf-8?B?Q2hyaXN0aWFuIEvDtm5pZw==?= <ckoenig.leichtzumerken@gmail.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>, "Olsak,
 Marek" <Marek.Olsak@amd.com>
Subject: RE: [PATCH 10/10] drm/amdgpu: add gang submit frontend
Thread-Topic: [PATCH 10/10] drm/amdgpu: add gang submit frontend
Thread-Index: AQHYLtf2HQTmabF910u+d8CEcSHOAK07AhsQ
Date: Wed, 1 Jun 2022 12:09:05 +0000
Message-ID: <BL3PR12MB66193C104060707AE4900848FFDF9@BL3PR12MB6619.namprd12.prod.outlook.com>
References: <20220303082308.38217-1-christian.koenig@amd.com>
 <20220303082308.38217-11-christian.koenig@amd.com>
In-Reply-To: <20220303082308.38217-11-christian.koenig@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_Enabled=true;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_SetDate=2022-06-01T12:05:34Z; 
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_Method=Standard;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_Name=General;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_SiteId=3dd8961f-e488-4e60-8e11-a82d994e183d;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_ActionId=d0fabb26-addd-48bd-bfb9-dc9051fbf17c;
 MSIP_Label_4342314e-0df4-4b58-84bf-38bed6170a0f_ContentBits=1
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_enabled: true
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_setdate: 2022-06-01T12:09:01Z
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_method: Standard
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_name: General
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_siteid: 3dd8961f-e488-4e60-8e11-a82d994e183d
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_actionid: 73c14e95-8609-4ccd-bf9a-82be159b616c
msip_label_4342314e-0df4-4b58-84bf-38bed6170a0f_contentbits: 0
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=amd.com;
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 82136b0b-17f7-4274-808f-08da43c78675
x-ms-traffictypediagnostic: CY4PR12MB1239:EE_
x-microsoft-antispam-prvs: <CY4PR12MB12398846ED5A83AF2BFCC2E8FFDF9@CY4PR12MB1239.namprd12.prod.outlook.com>
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: /nqDJe5Q3mANfIhpeThJSEHH7GjwAODgidX6ZbJCdtBf9leWIyN2VDxmwcxy84pTExpx05HA6UyXQ8aqajAQ7Oe0K+Iepb87P68LiB4qPlYYlgyacvL/w4aRjaviy+vrpKJkmWRoTsbTAyE3gVmxSifOqPReuXtXuckfBhNksOmGDEq6qM2MgHrTipUSQ14sZYpnOGfPyvOewiZAKwH3QW5rni7+H67x8AhMl6BBNdzmPk24mh6BGzq++KuJOmxkkqd78pDXT7KFaYXvBIiyNVv2hL1tWTRs7ODUSJkiiiubt8Pc/AaQSgHw/xxgMgaPdfRiK+EidcuRjroNP1eOY9oySrvWDEiRAMF1uLI/BQFYnj1UgEXQ417PcY1Fe7kAdDZt6hZB2BU5IrjwQf5oLOUKb9QECxn7xCSNuCVZo/zTaF5LQ+pwDYuPMzFIRpkjnS44nd6PCax1JDVQcGiDQPZ2zxdIl35r6Q+JYk8fzZkScMRvBGgz9mkwp36JfgxKIcBLaXUFfsNwa9WvdybV/Y2wCl4y6C1zzUdeXxbgNRmXq74c8KNOYIHrQoZgUnMEDopsQtPIXtgqwv2xtPqciQUpiX3rgCMkVhwATvKakSDU7De4CRjz5FIU1ixhUwuuz20/ZlgpxvUBh3oM1VMiKQKkNpndQIxY05fB8UZSq/UWW+p0NlyQUxanrAPPjmaKyhVOZlJBi6o5zTyrTWXu8w==
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:BL3PR12MB6619.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(13230001)(4636009)(366004)(76116006)(66946007)(66446008)(66556008)(66476007)(4326008)(8676002)(64756008)(316002)(8936002)(110136005)(86362001)(6636002)(186003)(83380400001)(55016003)(5660300002)(30864003)(52536014)(33656002)(2906002)(53546011)(7696005)(55236004)(38100700002)(26005)(71200400001)(9686003)(508600001)(38070700005)(122000001)(66574015)(6506007)(579004);
 DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?Q2RvZ3FsWGRXR1B6Mnd0WWVGMG4vdWNzVXpOQnBxNXRIRWlzNy9FcGFtaURh?=
 =?utf-8?B?dGdXdHVGR3pYczk1dFFuMnUyTnh4cHhMdVRRdGtDQndETUdXbE1hSU1YT3hC?=
 =?utf-8?B?eUFHdUlyQXVMUUdjVTYra3p5ZDdmdS9vLzRRcjl5TkFrQVY5K214cHBMUTBj?=
 =?utf-8?B?SXVOYjJRUU5NNHpROUhUUDd2a3RXb2dEWUVOZ2Y3TlZHQis2eFRNSnNLUVlq?=
 =?utf-8?B?Q3RLbGI1OElDYWFBdWtYY25HYmJkck0vSTlNbjN3SjZUSmFKaW4vTTBlQVVN?=
 =?utf-8?B?dHoxTW5wK2pFMjBRcnEzcGgwTjAwN1hHc2dFbkVnRkFQN3pKTE1GZGl3TUVr?=
 =?utf-8?B?WEkwR0VqQW8xdTM3dWFmdVNOSUhXVU14YXl3UnVhZlN6UjFjL1Z6dGZERlpB?=
 =?utf-8?B?YUs3WGxwYjZWQnZwOVJNeTVQYncrMDVQMFpjTVkzeE9UMm14dGRjeDBReGRW?=
 =?utf-8?B?Z2xOam1TZmlsdkVpRnI3c0NhMEFVWW5rYk9tTis5TE1VQVlwVG9USmMwbTho?=
 =?utf-8?B?L3dLNmdCaDlzTEJNamFzaUkwS2p5eU1vaFhSWEpDR2ErOGIyd1pUeWN0K1lL?=
 =?utf-8?B?R3F4UzE1blNidUdGM0VOV1FMZy9xcjhIYnpsZWpUTHVKVWpUQlRiU01DMWVO?=
 =?utf-8?B?RmEyNkRrSUtFNU9TU0FVYWI4UjU4R3grVDM3V0FwNEdjUTBDUmlOM0xvMGRv?=
 =?utf-8?B?cHluY1RWYUhoSU5WNm1YRmtxeFRRUFJhN2ROSXEyM2l5SzhSZmUwVmhaTGlj?=
 =?utf-8?B?aFJKVENFNkc2bk1wT2w1dFZnMUk5cFY4d3FSWExYdXFrcHhxdFJMUkpKS1Qr?=
 =?utf-8?B?MTBXOTFXQk4rQVIzbVVnbGpxRS9FZzBaUWdncEd0VzRLNzI1eVhlMGJhU2to?=
 =?utf-8?B?bnR5UDgzVnpZRUNNWDBWZFBYN1duQ3JERmt0dnJVS0cwVm5MM25YL0UwcjBy?=
 =?utf-8?B?Q3BMUzhrTWF2YWF4d09EWm95SjI4YlVuNjVUaFo2eUEvcS83cjIraGREcjZj?=
 =?utf-8?B?MysyZ2V6VHM5ZU1TY0VQV2tIa2FUenBlcjRoZFVBTEFSZDJmYTlSR0w5aVAy?=
 =?utf-8?B?U3dTZVRONm41NENVUTI0ZlFGcVVWbk9hdmp2dCtXRWw0N29JT3IzWGtLdk1h?=
 =?utf-8?B?Y2M0RG0wVHJBcUYrUXpoZnBmMmZvVUVNbzYzdUNEazdGSEdiMzV4NzQ5RC9B?=
 =?utf-8?B?UVdnQXFtYThnVWIyeEMvRks1WDNzYkQ1eHY4NWcxd0hoL3hYOTM5OVZjVEhX?=
 =?utf-8?B?Vk8vQzF4NUUzcGI2OGVVcEhVUDFzSjBXNjI1OGhBdkduSEo0WFJGMUlTanR6?=
 =?utf-8?B?L3hSd2RXMVlOYUM3OHN5RUh4TW1IMGF2by9KdWtIcWoycS8wVTN0WGozTmh1?=
 =?utf-8?B?RjVCZEFOVmJRU1dMSlJHK1pBakJ5MXRtN3lCbmxEMitUWTVINVdHUU0zNmdB?=
 =?utf-8?B?bDZnck1uak5pNUx4ZXJia3luKzBiU3d6NTF2aW1GeWpTOXZDQ0c0WDlCSnlq?=
 =?utf-8?B?ZmE0VXFSMnBYc1c5THFVMVo1dFZkRXh2SStwU3diVm90dVJkNXhya0x2ZFZY?=
 =?utf-8?B?WHZsMzV4Qk9Wa041WXpDMkY1Vnk1SUR5cW1qQjgwQmo5eElpb0FyZzNBZkVq?=
 =?utf-8?B?Sm9XUTY5Z0hWdk5iODVMWG5WODlGY1hXYk1zY29tRXhCOVpBQk9xcHQ5MDJF?=
 =?utf-8?B?YzZacytQbm9GMGxLRm9NKzhZU29STzZSUEUxWFA4V3R6ZUlLNm1vbTNRWWhv?=
 =?utf-8?B?OEhrT3JDQ1dhSDVuejZJTFVUNXpPdGpwRzZ0bEZzSENuZnpkZ1lUdThvUnNW?=
 =?utf-8?B?SzVDQVBXNGVwY1M1cWxVUUMxOFcxd2JlMlhKZXN5Sjd4UXFwWC9adXFJaS9u?=
 =?utf-8?B?Ym85R2dGSkM3VGlWREx0dzRUTDdadnRqVm02UUx0Qkdvcm56bkFxYWNVazBx?=
 =?utf-8?B?QnV1RVlEbmtsZlVidWovZ0s4MXZMY21KTm81TjZtMW9zSyswYnpLNXJIbGpS?=
 =?utf-8?B?SE1JdzlzNUg2YUlaMXZJSGFnS2FVZGRmWXBDVVJDVlJiNlIvOEJRSFhxVjY3?=
 =?utf-8?B?eFRkaGt4czJjZTJuUUhZaGxVamdDL1VJQ3ZiWkdyMnpvMjNVUVp5TUh6bGxj?=
 =?utf-8?B?SGt0SG9Oa2MxNE9sUGYwUjhzaG1ncGJoaWloNEZPbWNFbFNMQ0N3VEV0WTdh?=
 =?utf-8?B?bmJBWHBNek1qZEtiaHN1Rk1ZazFRYlVtNWVyblYwRlpRTWpiVTBSOS9ocDA5?=
 =?utf-8?B?Qk9JL3BhVGhxRVhIQjE4Um8yd3ptTEVlSUZyQ3RjR0ZkVlR5RzU5MkNXVHEr?=
 =?utf-8?B?amJRUnpHUFZDWVpscVduRlZnZEF0RXlwSTl5WFhneHVJcXNGbU9yQT09?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: BL3PR12MB6619.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 82136b0b-17f7-4274-808f-08da43c78675
X-MS-Exchange-CrossTenant-originalarrivaltime: 01 Jun 2022 12:09:05.9434 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: w8XwZLRv0zzrsERJc6ac8W+DWW8rpJwnoAlU77/ObaDeBqcUmKBuaG/a1mGiCeRSzodYcJIRntQ10IUaRdOHhw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CY4PR12MB1239
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Koenig, Christian" <Christian.Koenig@amd.com>
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

W0FNRCBPZmZpY2lhbCBVc2UgT25seSAtIEdlbmVyYWxdDQoNCg0KDQotLS0tLU9yaWdpbmFsIE1l
c3NhZ2UtLS0tLQ0KRnJvbTogYW1kLWdmeCA8YW1kLWdmeC1ib3VuY2VzQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZz4gT24gQmVoYWxmIE9mIENocmlzdGlhbiBLw7ZuaWcNClNlbnQ6IFRodXJzZGF5LCBN
YXJjaCAzLCAyMDIyIDE6NTMgUE0NClRvOiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZzsg
T2xzYWssIE1hcmVrIDxNYXJlay5PbHNha0BhbWQuY29tPg0KQ2M6IEtvZW5pZywgQ2hyaXN0aWFu
IDxDaHJpc3RpYW4uS29lbmlnQGFtZC5jb20+DQpTdWJqZWN0OiBbUEFUQ0ggMTAvMTBdIGRybS9h
bWRncHU6IGFkZCBnYW5nIHN1Ym1pdCBmcm9udGVuZA0KDQpBbGxvd3Mgc3VibWl0dGluZyBqb2Jz
IGFzIGdhbmcgd2hpY2ggbmVlZHMgdG8gcnVuIG9uIG11bHRpcGxlIGVuZ2luZXMgYXQgdGhlIHNh
bWUgdGltZS4NCg0KQWxsIG1lbWJlcnMgb2YgdGhlIGdhbmcgZ2V0IHRoZSBzYW1lIGltcGxpY2l0
LCBleHBsaWNpdCBhbmQgVk0gZGVwZW5kZW5jaWVzLiBTbyBubyBnYW5nIG1lbWJlciB3aWxsIHN0
YXJ0IHJ1bm5pbmcgdW50aWwgZXZlcnl0aGluZyBlbHNlIGlzIHJlYWR5Lg0KDQpUaGUgbGFzdCBq
b2IgaXMgY29uc2lkZXJlZCB0aGUgZ2FuZyBsZWFkZXIgKHVzdWFsbHkgYSBzdWJtaXNzaW9uIHRv
IHRoZSBHRlgNCnJpbmcpIGFuZCB1c2VkIGZvciBzaWduYWxpbmcgb3V0cHV0IGRlcGVuZGVuY2ll
cy4NCg0KRWFjaCBqb2IgaXMgcmVtZW1iZXJlZCBpbmRpdmlkdWFsbHkgYXMgdXNlciBvZiBhIGJ1
ZmZlciBvYmplY3QsIHNvIHRoZXJlIGlzIG5vIGpvaW5pbmcgb2Ygd29yayBhdCB0aGUgZW5kLg0K
DQpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5j
b20+DQotLS0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYyAgICB8IDI0
NCArKysrKysrKysrKysrKy0tLS0tLS0tDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2NzLmggICAgfCAgIDkgKy0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
dHJhY2UuaCB8ICAxMiArLQ0KIDMgZmlsZXMgY2hhbmdlZCwgMTczIGluc2VydGlvbnMoKyksIDky
IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2NzLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYw0KaW5k
ZXggYzY1NDFmN2I4ZjU0Li43NDI5ZTY0OTE5ZmUgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2NzLmMNCkBAIC02OSw2ICs2OSw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3Ax
X2liKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLA0KIAkJCSAgIHVuc2lnbmVkIGludCAqbnVt
X2licykNCiB7DQogCXN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHk7DQorCXVuc2lnbmVk
IGludCBpOw0KIAlpbnQgcjsNCiANCiAJciA9IGFtZGdwdV9jdHhfZ2V0X2VudGl0eShwLT5jdHgs
IGNodW5rX2liLT5pcF90eXBlLCBAQCAtODMsMTEgKzg0LDE5IEBAIHN0YXRpYyBpbnQgYW1kZ3B1
X2NzX3AxX2liKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLA0KIAkJcmV0dXJuIC1FSU5WQUw7
DQogDQogCS8qIEN1cnJlbnRseSB3ZSBkb24ndCBzdXBwb3J0IHN1Ym1pdHRpbmcgdG8gbXVsdGlw
bGUgZW50aXRpZXMgKi8NCi0JaWYgKHAtPmVudGl0eSAmJiBwLT5lbnRpdHkgIT0gZW50aXR5KQ0K
Kwlmb3IgKGkgPSAwOyBpIDwgcC0+Z2FuZ19zaXplOyArK2kpIHsNCisJCWlmIChwLT5lbnRpdGll
c1tpXSA9PSBlbnRpdHkpDQorCQkJZ290byBmb3VuZDsNCisJfQ0KKw0KKwlpZiAoaSA9PSBBTURH
UFVfQ1NfR0FOR19TSVpFKQ0KIAkJcmV0dXJuIC1FSU5WQUw7DQogDQotCXAtPmVudGl0eSA9IGVu
dGl0eTsNCi0JKysoKm51bV9pYnMpOw0KKwlwLT5lbnRpdGllc1tpXSA9IGVudGl0eTsNCisJcC0+
Z2FuZ19zaXplID0gaSArIDE7DQorDQorZm91bmQ6DQorCSsrKG51bV9pYnNbaV0pOw0KIAlyZXR1
cm4gMDsNCiB9DQogDQpAQCAtMTYxLDExICsxNzAsMTIgQEAgc3RhdGljIGludCBhbWRncHVfY3Nf
cGFzczEoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAsDQogCQkJICAgdW5pb24gZHJtX2FtZGdw
dV9jcyAqY3MpDQogew0KIAlzdHJ1Y3QgYW1kZ3B1X2Zwcml2ICpmcHJpdiA9IHAtPmZpbHAtPmRy
aXZlcl9wcml2Ow0KKwl1bnNpZ25lZCBpbnQgbnVtX2lic1tBTURHUFVfQ1NfR0FOR19TSVpFXSA9
IHsgfTsNCiAJc3RydWN0IGFtZGdwdV92bSAqdm0gPSAmZnByaXYtPnZtOw0KIAl1aW50NjRfdCAq
Y2h1bmtfYXJyYXlfdXNlcjsNCiAJdWludDY0X3QgKmNodW5rX2FycmF5Ow0KLQl1bnNpZ25lZCBz
aXplLCBudW1faWJzID0gMDsNCiAJdWludDMyX3QgdWZfb2Zmc2V0ID0gMDsNCisJdW5zaWduZWQg
aW50IHNpemU7DQogCWludCByZXQ7DQogCWludCBpOw0KIA0KQEAgLTIyOCw3ICsyMzgsNyBAQCBz
dGF0aWMgaW50IGFtZGdwdV9jc19wYXNzMShzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwNCiAJ
CQlpZiAoc2l6ZSA8IHNpemVvZihzdHJ1Y3QgZHJtX2FtZGdwdV9jc19jaHVua19pYikpDQogCQkJ
CWdvdG8gZnJlZV9wYXJ0aWFsX2tkYXRhOw0KIA0KLQkJCXJldCA9IGFtZGdwdV9jc19wMV9pYihw
LCBwLT5jaHVua3NbaV0ua2RhdGEsICZudW1faWJzKTsNCisJCQlyZXQgPSBhbWRncHVfY3NfcDFf
aWIocCwgcC0+Y2h1bmtzW2ldLmtkYXRhLCBudW1faWJzKTsNCiAJCQlpZiAocmV0KQ0KIAkJCQln
b3RvIGZyZWVfcGFydGlhbF9rZGF0YTsNCiAJCQlicmVhazsNCkBAIC0yNjUsMjEgKzI3NSwyNyBA
QCBzdGF0aWMgaW50IGFtZGdwdV9jc19wYXNzMShzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwN
CiAJCX0NCiAJfQ0KIA0KLQlyZXQgPSBhbWRncHVfam9iX2FsbG9jKHAtPmFkZXYsIG51bV9pYnMs
ICZwLT5qb2IsIHZtKTsNCi0JaWYgKHJldCkNCi0JCWdvdG8gZnJlZV9hbGxfa2RhdGE7DQorCWlm
ICghcC0+Z2FuZ19zaXplKQ0KKwkJcmV0dXJuIC1FSU5WQUw7DQogDQotCXJldCA9IGRybV9zY2hl
ZF9qb2JfaW5pdCgmcC0+am9iLT5iYXNlLCBwLT5lbnRpdHksICZmcHJpdi0+dm0pOw0KLQlpZiAo
cmV0KQ0KLQkJZ290byBmcmVlX2FsbF9rZGF0YTsNCisJZm9yIChpID0gMDsgaSA8IHAtPmdhbmdf
c2l6ZTsgKytpKSB7DQorCQlyZXQgPSBhbWRncHVfam9iX2FsbG9jKHAtPmFkZXYsIG51bV9pYnNb
aV0sICZwLT5qb2JzW2ldLCB2bSk7DQorCQlpZiAocmV0KQ0KKwkJCWdvdG8gZnJlZV9hbGxfa2Rh
dGE7DQorDQorCQlyZXQgPSBkcm1fc2NoZWRfam9iX2luaXQoJnAtPmpvYnNbaV0tPmJhc2UsIHAt
PmVudGl0aWVzW2ldLA0KKwkJCQkJICZmcHJpdi0+dm0pOw0KKwkJaWYgKHJldCkNCisJCQlnb3Rv
IGZyZWVfYWxsX2tkYXRhOw0KKwl9DQogDQotCWlmIChwLT5jdHgtPnZyYW1fbG9zdF9jb3VudGVy
ICE9IHAtPmpvYi0+dnJhbV9sb3N0X2NvdW50ZXIpIHsNCisJaWYgKHAtPmN0eC0+dnJhbV9sb3N0
X2NvdW50ZXIgIT0gcC0+am9ic1swXS0+dnJhbV9sb3N0X2NvdW50ZXIpIHsNCiAJCXJldCA9IC1F
Q0FOQ0VMRUQ7DQogCQlnb3RvIGZyZWVfYWxsX2tkYXRhOw0KIAl9DQogDQogCWlmIChwLT51Zl9l
bnRyeS50di5ibykNCi0JCXAtPmpvYi0+dWZfYWRkciA9IHVmX29mZnNldDsNCisJCXAtPmpvYnNb
cC0+Z2FuZ19zaXplIC0gMV0tPnVmX2FkZHIgPSB1Zl9vZmZzZXQ7DQogCWt2ZnJlZShjaHVua19h
cnJheSk7DQogDQogCS8qIFVzZSB0aGlzIG9wcG9ydHVuaXR5IHRvIGZpbGwgaW4gdGFzayBpbmZv
IGZvciB0aGUgdm0gKi8gQEAgLTMwMSwyMiArMzE3LDE4IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2Nz
X3Bhc3MxKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLA0KIAlyZXR1cm4gcmV0Ow0KIH0NCiAN
Ci1zdGF0aWMgaW50IGFtZGdwdV9jc19wMl9pYihzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwN
Ci0JCQkgICBzdHJ1Y3QgYW1kZ3B1X2NzX2NodW5rICpjaHVuaywNCi0JCQkgICB1bnNpZ25lZCBp
bnQgKm51bV9pYnMsDQotCQkJICAgdW5zaWduZWQgaW50ICpjZV9wcmVlbXB0LA0KLQkJCSAgIHVu
c2lnbmVkIGludCAqZGVfcHJlZW1wdCkNCitzdGF0aWMgaW50IGFtZGdwdV9jc19wMl9pYihzdHJ1
Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwgc3RydWN0IGFtZGdwdV9qb2IgKmpvYiwNCisJCQkgICBz
dHJ1Y3QgYW1kZ3B1X2liICppYiwgc3RydWN0IGFtZGdwdV9jc19jaHVuayAqY2h1bmssDQorCQkJ
ICAgdW5zaWduZWQgaW50ICpjZV9wcmVlbXB0LCB1bnNpZ25lZCBpbnQgKmRlX3ByZWVtcHQpDQog
ew0KLQlzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcgPSB0b19hbWRncHVfcmluZyhwLT5qb2ItPmJh
c2Uuc2NoZWQpOw0KKwlzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcgPSB0b19hbWRncHVfcmluZyhq
b2ItPmJhc2Uuc2NoZWQpOw0KIAlzdHJ1Y3QgZHJtX2FtZGdwdV9jc19jaHVua19pYiAqY2h1bmtf
aWIgPSBjaHVuay0+a2RhdGE7DQogCXN0cnVjdCBhbWRncHVfZnByaXYgKmZwcml2ID0gcC0+Zmls
cC0+ZHJpdmVyX3ByaXY7DQotCXN0cnVjdCBhbWRncHVfaWIgKmliID0gJnAtPmpvYi0+aWJzWypu
dW1faWJzXTsNCiAJc3RydWN0IGFtZGdwdV92bSAqdm0gPSAmZnByaXYtPnZtOw0KIAlpbnQgcjsN
CiANCi0NCiAJLyogTU0gZW5naW5lIGRvZXNuJ3Qgc3VwcG9ydCB1c2VyIGZlbmNlcyAqLw0KLQlp
ZiAocC0+am9iLT51Zl9hZGRyICYmIHJpbmctPmZ1bmNzLT5ub191c2VyX2ZlbmNlKQ0KKwlpZiAo
am9iLT51Zl9hZGRyICYmIHJpbmctPmZ1bmNzLT5ub191c2VyX2ZlbmNlKQ0KIAkJcmV0dXJuIC1F
SU5WQUw7DQogDQogCWlmIChjaHVua19pYi0+aXBfdHlwZSA9PSBBTURHUFVfSFdfSVBfR0ZYICYm
IEBAIC0zMzMsNyArMzQ1LDcgQEAgc3RhdGljIGludCBhbWRncHVfY3NfcDJfaWIoc3RydWN0IGFt
ZGdwdV9jc19wYXJzZXIgKnAsDQogCX0NCiANCiAJaWYgKGNodW5rX2liLT5mbGFncyAmIEFNREdQ
VV9JQl9GTEFHX1BSRUFNQkxFKQ0KLQkJcC0+am9iLT5wcmVhbWJsZV9zdGF0dXMgfD0gQU1ER1BV
X1BSRUFNQkxFX0lCX1BSRVNFTlQ7DQorCQlqb2ItPnByZWFtYmxlX3N0YXR1cyB8PSBBTURHUFVf
UFJFQU1CTEVfSUJfUFJFU0VOVDsNCiANCiAJciA9ICBhbWRncHVfaWJfZ2V0KHAtPmFkZXYsIHZt
LCByaW5nLT5mdW5jcy0+cGFyc2VfY3MgPw0KIAkJCSAgIGNodW5rX2liLT5pYl9ieXRlcyA6IDAs
DQpAQCAtMzQ2LDggKzM1OCw2IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3AyX2liKHN0cnVjdCBh
bWRncHVfY3NfcGFyc2VyICpwLA0KIAlpYi0+Z3B1X2FkZHIgPSBjaHVua19pYi0+dmFfc3RhcnQ7
DQogCWliLT5sZW5ndGhfZHcgPSBjaHVua19pYi0+aWJfYnl0ZXMgLyA0Ow0KIAlpYi0+ZmxhZ3Mg
PSBjaHVua19pYi0+ZmxhZ3M7DQotDQotCSgqbnVtX2licykrKzsNCiAJcmV0dXJuIDA7DQogfQ0K
IA0KQEAgLTM5Niw3ICs0MDYsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9jc19wMl9kZXBlbmRlbmNp
ZXMoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAsDQogCQkJZG1hX2ZlbmNlX3B1dChvbGQpOw0K
IAkJfQ0KIA0KLQkJciA9IGFtZGdwdV9zeW5jX2ZlbmNlKCZwLT5qb2ItPnN5bmMsIGZlbmNlKTsN
CisJCXIgPSBhbWRncHVfc3luY19mZW5jZSgmcC0+am9ic1swXS0+c3luYywgZmVuY2UpOw0KIAkJ
ZG1hX2ZlbmNlX3B1dChmZW5jZSk7DQogCQlpZiAocikNCiAJCQlyZXR1cm4gcjsNCkBAIC00MTgs
NyArNDI4LDcgQEAgc3RhdGljIGludCBhbWRncHVfc3luY29ial9sb29rdXBfYW5kX2FkZChzdHJ1
Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwNCiAJCXJldHVybiByOw0KIAl9DQogDQotCXIgPSBhbWRn
cHVfc3luY19mZW5jZSgmcC0+am9iLT5zeW5jLCBmZW5jZSk7DQorCXIgPSBhbWRncHVfc3luY19m
ZW5jZSgmcC0+am9ic1swXS0+c3luYywgZmVuY2UpOw0KIAlkbWFfZmVuY2VfcHV0KGZlbmNlKTsN
CiANCiAJcmV0dXJuIHI7DQpAQCAtNTQxLDIwICs1NTEsMzAgQEAgc3RhdGljIGludCBhbWRncHVf
Y3NfcDJfc3luY29ial90aW1lbGluZV9zaWduYWwoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAs
DQogDQogc3RhdGljIGludCBhbWRncHVfY3NfcGFzczIoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIg
KnApICB7DQotCXVuc2lnbmVkIGludCBudW1faWJzID0gMCwgY2VfcHJlZW1wdCA9IDAsIGRlX3By
ZWVtcHQgPSAwOw0KKwl1bnNpZ25lZCBpbnQgY2VfcHJlZW1wdCA9IDAsIGRlX3ByZWVtcHQgPSAw
Ow0KKwl1bnNpZ25lZCBpbnQgam9iX2lkeCA9IDAsIGliX2lkeCA9IDA7DQogCWludCBpLCByOw0K
IA0KIAlmb3IgKGkgPSAwOyBpIDwgcC0+bmNodW5rczsgKytpKSB7DQogCQlzdHJ1Y3QgYW1kZ3B1
X2NzX2NodW5rICpjaHVuazsNCisJCXN0cnVjdCBhbWRncHVfam9iICpqb2I7DQogDQogCQljaHVu
ayA9ICZwLT5jaHVua3NbaV07DQogDQogCQlzd2l0Y2ggKGNodW5rLT5jaHVua19pZCkgew0KIAkJ
Y2FzZSBBTURHUFVfQ0hVTktfSURfSUI6DQotCQkJciA9IGFtZGdwdV9jc19wMl9pYihwLCBjaHVu
aywgJm51bV9pYnMsDQorCQkJam9iID0gcC0+am9ic1tqb2JfaWR4XTsNCisJCQlyID0gYW1kZ3B1
X2NzX3AyX2liKHAsIGpvYiwgJmpvYi0+aWJzW2liX2lkeF0sIGNodW5rLA0KIAkJCQkJICAgICZj
ZV9wcmVlbXB0LCAmZGVfcHJlZW1wdCk7DQogCQkJaWYgKHIpDQogCQkJCXJldHVybiByOw0KKw0K
KwkJCWlmICgrK2liX2lkeCA9PSBqb2ItPm51bV9pYnMpIHsNCisJCQkJKytqb2JfaWR4Ow0KKwkJ
CQlpYl9pZHggPSAwOw0KKwkJCQljZV9wcmVlbXB0ID0gMDsNCisJCQkJZGVfcHJlZW1wdCA9IDA7
DQorCQkJfQ0KIAkJCWJyZWFrOw0KIAkJY2FzZSBBTURHUFVfQ0hVTktfSURfREVQRU5ERU5DSUVT
Og0KIAkJY2FzZSBBTURHUFVfQ0hVTktfSURfU0NIRURVTEVEX0RFUEVOREVOQ0lFUzoNCkBAIC04
MjUsNiArODQ1LDcgQEAgc3RhdGljIGludCBhbWRncHVfY3NfcGFyc2VyX2JvcyhzdHJ1Y3QgYW1k
Z3B1X2NzX3BhcnNlciAqcCwNCiAJc3RydWN0IGFtZGdwdV92bSAqdm0gPSAmZnByaXYtPnZtOw0K
IAlzdHJ1Y3QgYW1kZ3B1X2JvX2xpc3RfZW50cnkgKmU7DQogCXN0cnVjdCBsaXN0X2hlYWQgZHVw
bGljYXRlczsNCisJdW5zaWduZWQgaW50IGk7DQogCWludCByOw0KIA0KIAlJTklUX0xJU1RfSEVB
RCgmcC0+dmFsaWRhdGVkKTsNCkBAIC05MDUsMTYgKzkyNiw2IEBAIHN0YXRpYyBpbnQgYW1kZ3B1
X2NzX3BhcnNlcl9ib3Moc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAsDQogCQllLT5ib192YSA9
IGFtZGdwdV92bV9ib19maW5kKHZtLCBibyk7DQogCX0NCiANCi0JLyogTW92ZSBmZW5jZSB3YWl0
aW5nIGFmdGVyIGdldHRpbmcgcmVzZXJ2YXRpb24gbG9jayBvZg0KLQkgKiBQRCByb290LiBUaGVu
IHRoZXJlIGlzIG5vIG5lZWQgb24gYSBjdHggbXV0ZXggbG9jay4NCi0JICovDQotCXIgPSBhbWRn
cHVfY3R4X3dhaXRfcHJldl9mZW5jZShwLT5jdHgsIHAtPmVudGl0eSk7DQotCWlmICh1bmxpa2Vs
eShyICE9IDApKSB7DQotCQlpZiAociAhPSAtRVJFU1RBUlRTWVMpDQotCQkJRFJNX0VSUk9SKCJh
bWRncHVfY3R4X3dhaXRfcHJldl9mZW5jZSBmYWlsZWQuXG4iKTsNCi0JCWdvdG8gZXJyb3JfdmFs
aWRhdGU7DQotCX0NCi0NCiAJYW1kZ3B1X2NzX2dldF90aHJlc2hvbGRfZm9yX21vdmVzKHAtPmFk
ZXYsICZwLT5ieXRlc19tb3ZlZF90aHJlc2hvbGQsDQogCQkJCQkgICZwLT5ieXRlc19tb3ZlZF92
aXNfdGhyZXNob2xkKTsNCiAJcC0+Ynl0ZXNfbW92ZWQgPSAwOw0KQEAgLTkzOCwxNCArOTQ5LDE2
IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3BhcnNlcl9ib3Moc3RydWN0IGFtZGdwdV9jc19wYXJz
ZXIgKnAsDQogCWFtZGdwdV9jc19yZXBvcnRfbW92ZWRfYnl0ZXMocC0+YWRldiwgcC0+Ynl0ZXNf
bW92ZWQsDQogCQkJCSAgICAgcC0+Ynl0ZXNfbW92ZWRfdmlzKTsNCiANCi0JYW1kZ3B1X2pvYl9z
ZXRfcmVzb3VyY2VzKHAtPmpvYiwgcC0+Ym9fbGlzdC0+Z2RzX29iaiwNCi0JCQkJIHAtPmJvX2xp
c3QtPmd3c19vYmosIHAtPmJvX2xpc3QtPm9hX29iaik7DQorCWZvciAoaSA9IDA7IGkgPCBwLT5n
YW5nX3NpemU7ICsraSkNCisJCWFtZGdwdV9qb2Jfc2V0X3Jlc291cmNlcyhwLT5qb2JzW2ldLCBw
LT5ib19saXN0LT5nZHNfb2JqLA0KKwkJCQkJIHAtPmJvX2xpc3QtPmd3c19vYmosDQorCQkJCQkg
cC0+Ym9fbGlzdC0+b2Ffb2JqKTsNCiANCiAJaWYgKCFyICYmIHAtPnVmX2VudHJ5LnR2LmJvKSB7
DQogCQlzdHJ1Y3QgYW1kZ3B1X2JvICp1ZiA9IHR0bV90b19hbWRncHVfYm8ocC0+dWZfZW50cnku
dHYuYm8pOw0KIA0KIAkJciA9IGFtZGdwdV90dG1fYWxsb2NfZ2FydCgmdWYtPnRibyk7DQotCQlw
LT5qb2ItPnVmX2FkZHIgKz0gYW1kZ3B1X2JvX2dwdV9vZmZzZXQodWYpOw0KKwkJcC0+am9ic1tw
LT5nYW5nX3NpemUgLSAxXS0+dWZfYWRkciArPSBhbWRncHVfYm9fZ3B1X29mZnNldCh1Zik7DQog
CX0NCiANCiBlcnJvcl92YWxpZGF0ZToNCkBAIC05NTUsMjAgKzk2OCwyNCBAQCBzdGF0aWMgaW50
IGFtZGdwdV9jc19wYXJzZXJfYm9zKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLA0KIAlyZXR1
cm4gcjsNCiB9DQogDQotc3RhdGljIHZvaWQgdHJhY2VfYW1kZ3B1X2NzX2licyhzdHJ1Y3QgYW1k
Z3B1X2NzX3BhcnNlciAqcGFyc2VyKQ0KK3N0YXRpYyB2b2lkIHRyYWNlX2FtZGdwdV9jc19pYnMo
c3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnApDQogew0KLQlpbnQgaTsNCisJaW50IGksIGo7DQog
DQogCWlmICghdHJhY2VfYW1kZ3B1X2NzX2VuYWJsZWQoKSkNCiAJCXJldHVybjsNCiANCi0JZm9y
IChpID0gMDsgaSA8IHBhcnNlci0+am9iLT5udW1faWJzOyBpKyspDQotCQl0cmFjZV9hbWRncHVf
Y3MocGFyc2VyLCBpKTsNCisJZm9yIChpID0gMDsgaSA8IHAtPmdhbmdfc2l6ZTsgKytpKSB7DQor
CQlzdHJ1Y3QgYW1kZ3B1X2pvYiAqam9iID0gcC0+am9ic1tpXTsNCisNCisJCWZvciAoaiA9IDA7
IGogPCBqb2ItPm51bV9pYnM7ICsraikNCisJCQl0cmFjZV9hbWRncHVfY3MocCwgam9iLCAmam9i
LT5pYnNbal0pOw0KKwl9DQogfQ0KIA0KLXN0YXRpYyBpbnQgYW1kZ3B1X2NzX3BhdGNoX2licyhz
dHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCkNCitzdGF0aWMgaW50IGFtZGdwdV9jc19wYXRjaF9p
YnMoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAsDQorCQkJICAgICAgIHN0cnVjdCBhbWRncHVf
am9iICpqb2IpDQogew0KLQlzdHJ1Y3QgYW1kZ3B1X2pvYiAqam9iID0gcC0+am9iOw0KIAlzdHJ1
Y3QgYW1kZ3B1X3JpbmcgKnJpbmcgPSB0b19hbWRncHVfcmluZyhqb2ItPmJhc2Uuc2NoZWQpOw0K
IAl1bnNpZ25lZCBpbnQgaTsNCiAJaW50IHI7DQpAQCAtMTAwNywxNCArMTAyNCwxMyBAQCBzdGF0
aWMgaW50IGFtZGdwdV9jc19wYXRjaF9pYnMoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnApDQog
CQkJbWVtY3B5KGliLT5wdHIsIGtwdHIsIGpvYi0+aWJzW2ldLmxlbmd0aF9kdyAqIDQpOw0KIAkJ
CWFtZGdwdV9ib19rdW5tYXAoYW9iaik7DQogDQotCQkJciA9IGFtZGdwdV9yaW5nX3BhcnNlX2Nz
KHJpbmcsIHAsIHAtPmpvYiwNCi0JCQkJCQkgJnAtPmpvYi0+aWJzW2ldKTsNCisJCQlyID0gYW1k
Z3B1X3JpbmdfcGFyc2VfY3MocmluZywgcCwgam9iLCAmam9iLT5pYnNbaV0pOw0KIAkJCWlmIChy
KQ0KIAkJCQlyZXR1cm4gcjsNCiAJCX0gZWxzZSB7DQogCQkJaWItPnB0ciA9ICh1aW50MzJfdCAq
KWtwdHI7DQotCQkJciA9IGFtZGdwdV9yaW5nX3BhdGNoX2NzX2luX3BsYWNlKHJpbmcsIHAsIHAt
PmpvYiwNCi0JCQkJCQkJICAmcC0+am9iLT5pYnNbaV0pOw0KKwkJCXIgPSBhbWRncHVfcmluZ19w
YXRjaF9jc19pbl9wbGFjZShyaW5nLCBwLCBqb2IsDQorCQkJCQkJCSAgJmpvYi0+aWJzW2ldKTsN
CiAJCQlhbWRncHVfYm9fa3VubWFwKGFvYmopOw0KIAkJCWlmIChyKQ0KIAkJCQlyZXR1cm4gcjsN
CkBAIC0xMDI0LDE0ICsxMDQwLDI5IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3BhdGNoX2licyhz
dHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCkNCiAJcmV0dXJuIDA7DQogfQ0KIA0KK3N0YXRpYyBp
bnQgYW1kZ3B1X2NzX3BhdGNoX2pvYnMoc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnApIHsNCisJ
dW5zaWduZWQgaW50IGk7DQorCWludCByOw0KKw0KKwlmb3IgKGkgPSAwOyBpIDwgcC0+Z2FuZ19z
aXplOyArK2kpIHsNCisJCXIgPSBhbWRncHVfY3NfcGF0Y2hfaWJzKHAsIHAtPmpvYnNbaV0pOw0K
KwkJaWYgKHIpDQorCQkJcmV0dXJuIHI7DQorCX0NCisJcmV0dXJuIDA7DQorfQ0KKw0KIHN0YXRp
YyBpbnQgYW1kZ3B1X2NzX3ZtX2hhbmRsaW5nKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwKSAg
ew0KIAlzdHJ1Y3QgYW1kZ3B1X2Zwcml2ICpmcHJpdiA9IHAtPmZpbHAtPmRyaXZlcl9wcml2Ow0K
IAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IHAtPmFkZXY7DQorCXN0cnVjdCBhbWRncHVf
am9iICpqb2IgPSBwLT5qb2JzWzBdOw0KIAlzdHJ1Y3QgYW1kZ3B1X3ZtICp2bSA9ICZmcHJpdi0+
dm07DQogCXN0cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRyeSAqZTsNCiAJc3RydWN0IGFtZGdwdV9i
b192YSAqYm9fdmE7DQogCXN0cnVjdCBhbWRncHVfYm8gKmJvOw0KKwl1bnNpZ25lZCBpbnQgaTsN
CiAJaW50IHI7DQogDQogCXIgPSBhbWRncHVfdm1fY2xlYXJfZnJlZWQoYWRldiwgdm0sIE5VTEwp
OyBAQCAtMTA0Miw3ICsxMDczLDcgQEAgc3RhdGljIGludCBhbWRncHVfY3Nfdm1faGFuZGxpbmco
c3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnApDQogCWlmIChyKQ0KIAkJcmV0dXJuIHI7DQogDQot
CXIgPSBhbWRncHVfc3luY192bV9mZW5jZSgmcC0+am9iLT5zeW5jLCBmcHJpdi0+cHJ0X3ZhLT5s
YXN0X3B0X3VwZGF0ZSk7DQorCXIgPSBhbWRncHVfc3luY192bV9mZW5jZSgmam9iLT5zeW5jLCBm
cHJpdi0+cHJ0X3ZhLT5sYXN0X3B0X3VwZGF0ZSk7DQogCWlmIChyKQ0KIAkJcmV0dXJuIHI7DQog
DQpAQCAtMTA1Miw3ICsxMDgzLDcgQEAgc3RhdGljIGludCBhbWRncHVfY3Nfdm1faGFuZGxpbmco
c3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnApDQogCQlpZiAocikNCiAJCQlyZXR1cm4gcjsNCiAN
Ci0JCXIgPSBhbWRncHVfc3luY192bV9mZW5jZSgmcC0+am9iLT5zeW5jLCBib192YS0+bGFzdF9w
dF91cGRhdGUpOw0KKwkJciA9IGFtZGdwdV9zeW5jX3ZtX2ZlbmNlKCZqb2ItPnN5bmMsIGJvX3Zh
LT5sYXN0X3B0X3VwZGF0ZSk7DQogCQlpZiAocikNCiAJCQlyZXR1cm4gcjsNCiAJfQ0KQEAgLTEw
NzEsNyArMTEwMiw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3ZtX2hhbmRsaW5nKHN0cnVjdCBh
bWRncHVfY3NfcGFyc2VyICpwKQ0KIAkJaWYgKHIpDQogCQkJcmV0dXJuIHI7DQogDQotCQlyID0g
YW1kZ3B1X3N5bmNfdm1fZmVuY2UoJnAtPmpvYi0+c3luYywgYm9fdmEtPmxhc3RfcHRfdXBkYXRl
KTsNCisJCXIgPSBhbWRncHVfc3luY192bV9mZW5jZSgmam9iLT5zeW5jLCBib192YS0+bGFzdF9w
dF91cGRhdGUpOw0KIAkJaWYgKHIpDQogCQkJcmV0dXJuIHI7DQogCX0NCkBAIC0xMDg0LDExICsx
MTE1LDE4IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3ZtX2hhbmRsaW5nKHN0cnVjdCBhbWRncHVf
Y3NfcGFyc2VyICpwKQ0KIAlpZiAocikNCiAJCXJldHVybiByOw0KIA0KLQlyID0gYW1kZ3B1X3N5
bmNfdm1fZmVuY2UoJnAtPmpvYi0+c3luYywgdm0tPmxhc3RfdXBkYXRlKTsNCisJciA9IGFtZGdw
dV9zeW5jX3ZtX2ZlbmNlKCZqb2ItPnN5bmMsIHZtLT5sYXN0X3VwZGF0ZSk7DQogCWlmIChyKQ0K
IAkJcmV0dXJuIHI7DQogDQotCXAtPmpvYi0+dm1fcGRfYWRkciA9IGFtZGdwdV9nbWNfcGRfYWRk
cih2bS0+cm9vdC5ibyk7DQorCWZvciAoaSA9IDA7IGkgPCBwLT5nYW5nX3NpemU7ICsraSkgew0K
KwkJam9iID0gcC0+am9ic1tpXTsNCisNCisJCWlmICgham9iLT52bSkNCisJCQljb250aW51ZTsN
CisNCisJCWpvYi0+dm1fcGRfYWRkciA9IGFtZGdwdV9nbWNfcGRfYWRkcih2bS0+cm9vdC5ibyk7
DQorCX0NCiANCiAJaWYgKGFtZGdwdV92bV9kZWJ1Zykgew0KIAkJLyogSW52YWxpZGF0ZSBhbGwg
Qk9zIHRvIHRlc3QgZm9yIHVzZXJzcGFjZSBidWdzICovIEBAIC0xMTA5LDcgKzExNDcsOSBAQCBz
dGF0aWMgaW50IGFtZGdwdV9jc192bV9oYW5kbGluZyhzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAq
cCkgIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3N5bmNfcmluZ3Moc3RydWN0IGFtZGdwdV9jc19wYXJz
ZXIgKnApICB7DQogCXN0cnVjdCBhbWRncHVfZnByaXYgKmZwcml2ID0gcC0+ZmlscC0+ZHJpdmVy
X3ByaXY7DQorCXN0cnVjdCBhbWRncHVfam9iICpqb2IgPSBwLT5qb2JzWzBdOw0KIAlzdHJ1Y3Qg
YW1kZ3B1X2JvX2xpc3RfZW50cnkgKmU7DQorCXVuc2lnbmVkIGludCBpOw0KIAlpbnQgcjsNCiAN
CiAJbGlzdF9mb3JfZWFjaF9lbnRyeShlLCAmcC0+dmFsaWRhdGVkLCB0di5oZWFkKSB7IEBAIC0x
MTE5LDEyICsxMTU5LDIzIEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3N5bmNfcmluZ3Moc3RydWN0
IGFtZGdwdV9jc19wYXJzZXIgKnApDQogDQogCQlzeW5jX21vZGUgPSBhbWRncHVfYm9fZXhwbGlj
aXRfc3luYyhibykgPw0KIAkJCUFNREdQVV9TWU5DX0VYUExJQ0lUIDogQU1ER1BVX1NZTkNfTkVf
T1dORVI7DQotCQlyID0gYW1kZ3B1X3N5bmNfcmVzdihwLT5hZGV2LCAmcC0+am9iLT5zeW5jLCBy
ZXN2LCBzeW5jX21vZGUsDQorCQlyID0gYW1kZ3B1X3N5bmNfcmVzdihwLT5hZGV2LCAmam9iLT5z
eW5jLCByZXN2LCBzeW5jX21vZGUsDQogCQkJCSAgICAgJmZwcml2LT52bSk7DQogCQlpZiAocikN
CiAJCQlyZXR1cm4gcjsNCiAJfQ0KLQlyZXR1cm4gMDsNCisNCisJZm9yIChpID0gMTsgaSA8IHAt
Pmdhbmdfc2l6ZTsgKytpKSB7DQorCQlyID0gYW1kZ3B1X3N5bmNfY2xvbmUoJmpvYi0+c3luYywg
JnAtPmpvYnNbaV0tPnN5bmMpOw0KKwkJaWYgKHIpDQorCQkJcmV0dXJuIHI7DQorCX0NCisNCisJ
ciA9IGFtZGdwdV9jdHhfd2FpdF9wcmV2X2ZlbmNlKHAtPmN0eCwgcC0+ZW50aXRpZXNbcC0+Z2Fu
Z19zaXplIC0gMV0pOw0KKwlpZiAociAmJiByICE9IC1FUkVTVEFSVFNZUykNCisJCURSTV9FUlJP
UigiYW1kZ3B1X2N0eF93YWl0X3ByZXZfZmVuY2UgZmFpbGVkLlxuIik7DQorDQorCXJldHVybiBy
Ow0KIH0NCiANCiBzdGF0aWMgdm9pZCBhbWRncHVfY3NfcG9zdF9kZXBlbmRlbmNpZXMoc3RydWN0
IGFtZGdwdV9jc19wYXJzZXIgKnApIEBAIC0xMTQ3LDE3ICsxMTk4LDI3IEBAIHN0YXRpYyB2b2lk
IGFtZGdwdV9jc19wb3N0X2RlcGVuZGVuY2llcyhzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCkg
IHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3N1Ym1pdChzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwN
CiAJCQkgICAgdW5pb24gZHJtX2FtZGdwdV9jcyAqY3MpDQogew0KKwlzdHJ1Y3QgYW1kZ3B1X2pv
YiAqbGFzdCA9IHAtPmpvYnNbcC0+Z2FuZ19zaXplIC0gMV07DQogCXN0cnVjdCBhbWRncHVfZnBy
aXYgKmZwcml2ID0gcC0+ZmlscC0+ZHJpdmVyX3ByaXY7DQotCXN0cnVjdCBkcm1fc2NoZWRfZW50
aXR5ICplbnRpdHkgPSBwLT5lbnRpdHk7DQogCXN0cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRyeSAq
ZTsNCi0Jc3RydWN0IGFtZGdwdV9qb2IgKmpvYjsNCisJdW5zaWduZWQgaW50IGk7DQogCXVpbnQ2
NF90IHNlcTsNCiAJaW50IHI7DQogDQotCWpvYiA9IHAtPmpvYjsNCi0JcC0+am9iID0gTlVMTDsN
CisJZm9yIChpID0gMDsgaSA8IHAtPmdhbmdfc2l6ZTsgKytpKQ0KKwkJZHJtX3NjaGVkX2pvYl9h
cm0oJnAtPmpvYnNbaV0tPmJhc2UpOw0KIA0KLQlkcm1fc2NoZWRfam9iX2FybSgmam9iLT5iYXNl
KTsNCisJZm9yIChpID0gMDsgaSA8IChwLT5nYW5nX3NpemUgLSAxKTsgKytpKSB7DQorCQlzdHJ1
Y3QgZG1hX2ZlbmNlICpmZW5jZTsNCisNCisJCWZlbmNlID0gJnAtPmpvYnNbaV0tPmJhc2Uuc19m
ZW5jZS0+c2NoZWR1bGVkOw0KKwkJciA9IGFtZGdwdV9zeW5jX2ZlbmNlKCZsYXN0LT5zeW5jLCBm
ZW5jZSk7DQorCQlpZiAocikNCisJCQlnb3RvIGVycm9yX2NsZWFudXA7DQorCX0NCisNCisJZm9y
IChpID0gMDsgaSA8IHAtPmdhbmdfc2l6ZTsgKytpKQ0KKwkJYW1kZ3B1X2pvYl9zZXRfZ2FuZ19s
ZWFkZXIocC0+am9ic1tpXSwgbGFzdCk7DQogDQogCS8qIE5vIG1lbW9yeSBhbGxvY2F0aW9uIGlz
IGFsbG93ZWQgd2hpbGUgaG9sZGluZyB0aGUgbm90aWZpZXIgbG9jay4NCiAJICogVGhlIGxvY2sg
aXMgaGVsZCB1bnRpbCBhbWRncHVfY3Nfc3VibWl0IGlzIGZpbmlzaGVkIGFuZCBmZW5jZSBpcyBA
QCAtMTE3NSw0NCArMTIzNiw1OCBAQCBzdGF0aWMgaW50IGFtZGdwdV9jc19zdWJtaXQoc3RydWN0
IGFtZGdwdV9jc19wYXJzZXIgKnAsDQogCX0NCiAJaWYgKHIpIHsNCiAJCXIgPSAtRUFHQUlOOw0K
LQkJZ290byBlcnJvcl9hYm9ydDsNCisJCWdvdG8gZXJyb3JfdW5sb2NrOw0KIAl9DQogDQotCXAt
PmZlbmNlID0gZG1hX2ZlbmNlX2dldCgmam9iLT5iYXNlLnNfZmVuY2UtPmZpbmlzaGVkKTsNCisJ
cC0+ZmVuY2UgPSBkbWFfZmVuY2VfZ2V0KCZsYXN0LT5iYXNlLnNfZmVuY2UtPmZpbmlzaGVkKTsN
CiANCi0JYW1kZ3B1X2N0eF9hZGRfZmVuY2UocC0+Y3R4LCBlbnRpdHksIHAtPmZlbmNlLCAmc2Vx
KTsNCisJYW1kZ3B1X2N0eF9hZGRfZmVuY2UocC0+Y3R4LCBwLT5lbnRpdGllc1twLT5nYW5nX3Np
emUgLSAxXSwgcC0+ZmVuY2UsDQorCQkJICAgICAmc2VxKTsNCiAJYW1kZ3B1X2NzX3Bvc3RfZGVw
ZW5kZW5jaWVzKHApOw0KIA0KLQlpZiAoKGpvYi0+cHJlYW1ibGVfc3RhdHVzICYgQU1ER1BVX1BS
RUFNQkxFX0lCX1BSRVNFTlQpICYmDQorCWlmICgobGFzdC0+cHJlYW1ibGVfc3RhdHVzICYgQU1E
R1BVX1BSRUFNQkxFX0lCX1BSRVNFTlQpICYmDQogCSAgICAhcC0+Y3R4LT5wcmVhbWJsZV9wcmVz
ZW50ZWQpIHsNCi0JCWpvYi0+cHJlYW1ibGVfc3RhdHVzIHw9IEFNREdQVV9QUkVBTUJMRV9JQl9Q
UkVTRU5UX0ZJUlNUOw0KKwkJbGFzdC0+cHJlYW1ibGVfc3RhdHVzIHw9IEFNREdQVV9QUkVBTUJM
RV9JQl9QUkVTRU5UX0ZJUlNUOw0KIAkJcC0+Y3R4LT5wcmVhbWJsZV9wcmVzZW50ZWQgPSB0cnVl
Ow0KIAl9DQogDQogCWNzLT5vdXQuaGFuZGxlID0gc2VxOw0KLQlqb2ItPnVmX3NlcXVlbmNlID0g
c2VxOw0KLQ0KLQlhbWRncHVfam9iX2ZyZWVfcmVzb3VyY2VzKGpvYik7DQorCWxhc3QtPnVmX3Nl
cXVlbmNlID0gc2VxOw0KIA0KLQl0cmFjZV9hbWRncHVfY3NfaW9jdGwoam9iKTsNCiAJYW1kZ3B1
X3ZtX2JvX3RyYWNlX2NzKCZmcHJpdi0+dm0sICZwLT50aWNrZXQpOw0KLQlkcm1fc2NoZWRfZW50
aXR5X3B1c2hfam9iKCZqb2ItPmJhc2UpOw0KKwlmb3IgKGkgPSAwOyBpIDwgcC0+Z2FuZ19zaXpl
OyArK2kpIHsNCisJCWFtZGdwdV9qb2JfZnJlZV9yZXNvdXJjZXMocC0+am9ic1tpXSk7DQorCQl0
cmFjZV9hbWRncHVfY3NfaW9jdGwocC0+am9ic1tpXSk7DQorCQlkcm1fc2NoZWRfZW50aXR5X3B1
c2hfam9iKCZwLT5qb2JzW2ldLT5iYXNlKTsNCisJCXAtPmpvYnNbaV0gPSBOVUxMOw0KKwl9DQog
DQogCWFtZGdwdV92bV9tb3ZlX3RvX2xydV90YWlsKHAtPmFkZXYsICZmcHJpdi0+dm0pOw0KIA0K
LQkvKiBNYWtlIHN1cmUgYWxsIEJPcyBhcmUgcmVtZW1iZXJlZCBhcyB3cml0ZXJzICovDQotCWFt
ZGdwdV9ib19saXN0X2Zvcl9lYWNoX2VudHJ5KGUsIHAtPmJvX2xpc3QpDQorCWxpc3RfZm9yX2Vh
Y2hfZW50cnkoZSwgJnAtPnZhbGlkYXRlZCwgdHYuaGVhZCkgew0KKw0KKwkJLyogRXZlcnlib2R5
IGV4Y2VwdCBmb3IgdGhlIGdhbmcgbGVhZGVyIHVzZXMgQk9PS0tFRVAgKi8NCisJCWZvciAoaSA9
IDA7IGkgPCAocC0+Z2FuZ19zaXplIC0gMSk7ICsraSkgew0KKwkJCWRtYV9yZXN2X2FkZF9mZW5j
ZShlLT50di5iby0+YmFzZS5yZXN2LA0KKwkJCQkJICAgJnAtPmpvYnNbaV0tPmJhc2Uuc19mZW5j
ZS0+ZmluaXNoZWQsDQorCQkJCQkgICBETUFfUkVTVl9VU0FHRV9CT09LS0VFUCk7DQorCQl9DQor
DQorCQkvKiBUaGUgZ2FuZyBsZWFkZXIgYXMgcmVtZW1iZXJlZCBhcyB3cml0ZXIgKi8NCiAJCWUt
PnR2Lm51bV9zaGFyZWQgPSAwOw0KKwl9DQoNCg0KcC0+am9ic1tpXSA9IE5VTEwgaXMgZG9uZSBp
biBwcmV2aW91cyBsb29wLiBOb3cgd2hlbiBydW5uaW5nICZwLT5qb2JzW2ldLT5iYXNlLnNfZmVu
Y2UtPmZpbmlzaGVkIHRoZXJlIGlzIE5VTEwgcG9pbnRlciBjcmFzaC4NCg0KVGhhbmsgeW91LA0K
WW9nZXNoDQogDQoNCg0KIAl0dG1fZXVfZmVuY2VfYnVmZmVyX29iamVjdHMoJnAtPnRpY2tldCwg
JnAtPnZhbGlkYXRlZCwgcC0+ZmVuY2UpOw0KIAltdXRleF91bmxvY2soJnAtPmFkZXYtPm5vdGlm
aWVyX2xvY2spOw0KIA0KIAlyZXR1cm4gMDsNCiANCi1lcnJvcl9hYm9ydDoNCi0JZHJtX3NjaGVk
X2pvYl9jbGVhbnVwKCZqb2ItPmJhc2UpOw0KK2Vycm9yX3VubG9jazoNCiAJbXV0ZXhfdW5sb2Nr
KCZwLT5hZGV2LT5ub3RpZmllcl9sb2NrKTsNCi0JYW1kZ3B1X2pvYl9mcmVlKGpvYik7DQorDQor
ZXJyb3JfY2xlYW51cDoNCisJZm9yIChpID0gMDsgaSA8IHAtPmdhbmdfc2l6ZTsgKytpKQ0KKwkJ
ZHJtX3NjaGVkX2pvYl9jbGVhbnVwKCZwLT5qb2JzW2ldLT5iYXNlKTsNCiAJcmV0dXJuIHI7DQog
fQ0KIA0KQEAgLTEyMjksMTcgKzEzMDQsMTggQEAgc3RhdGljIHZvaWQgYW1kZ3B1X2NzX3BhcnNl
cl9maW5pKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwYXJzZXIpDQogDQogCWRtYV9mZW5jZV9w
dXQocGFyc2VyLT5mZW5jZSk7DQogDQotCWlmIChwYXJzZXItPmN0eCkgew0KKwlpZiAocGFyc2Vy
LT5jdHgpDQogCQlhbWRncHVfY3R4X3B1dChwYXJzZXItPmN0eCk7DQotCX0NCiAJaWYgKHBhcnNl
ci0+Ym9fbGlzdCkNCiAJCWFtZGdwdV9ib19saXN0X3B1dChwYXJzZXItPmJvX2xpc3QpOw0KIA0K
IAlmb3IgKGkgPSAwOyBpIDwgcGFyc2VyLT5uY2h1bmtzOyBpKyspDQogCQlrdmZyZWUocGFyc2Vy
LT5jaHVua3NbaV0ua2RhdGEpOw0KIAlrdmZyZWUocGFyc2VyLT5jaHVua3MpOw0KLQlpZiAocGFy
c2VyLT5qb2IpDQotCQlhbWRncHVfam9iX2ZyZWUocGFyc2VyLT5qb2IpOw0KKwlmb3IgKGkgPSAw
OyBpIDwgcGFyc2VyLT5nYW5nX3NpemU7ICsraSkgew0KKwkJaWYgKHBhcnNlci0+am9ic1tpXSkN
CisJCQlhbWRncHVfam9iX2ZyZWUocGFyc2VyLT5qb2JzW2ldKTsNCisJfQ0KIAlpZiAocGFyc2Vy
LT51Zl9lbnRyeS50di5ibykgew0KIAkJc3RydWN0IGFtZGdwdV9ibyAqdWYgPSB0dG1fdG9fYW1k
Z3B1X2JvKHBhcnNlci0+dWZfZW50cnkudHYuYm8pOw0KIA0KQEAgLTEyODMsNyArMTM1OSw3IEBA
IGludCBhbWRncHVfY3NfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwg
c3RydWN0IGRybV9maWxlICpmaWxwKQ0KIAkJZ290byBlcnJvcl9maW5pOw0KIAl9DQogDQotCXIg
PSBhbWRncHVfY3NfcGF0Y2hfaWJzKCZwYXJzZXIpOw0KKwlyID0gYW1kZ3B1X2NzX3BhdGNoX2pv
YnMoJnBhcnNlcik7DQogCWlmIChyKQ0KIAkJZ290byBlcnJvcl9iYWNrb2ZmOw0KIA0KZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5oIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzLmgNCmluZGV4IDY1MmI1NTkzNDk5Zi4uYmE1ODYw
YzA4MjcwIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Nz
LmgNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5oDQpAQCAtMjcs
NiArMjcsOCBAQA0KICNpbmNsdWRlICJhbWRncHVfYm9fbGlzdC5oIg0KICNpbmNsdWRlICJhbWRn
cHVfcmluZy5oIg0KIA0KKyNkZWZpbmUgQU1ER1BVX0NTX0dBTkdfU0laRQk0DQorDQogc3RydWN0
IGFtZGdwdV9ib192YV9tYXBwaW5nOw0KIA0KIHN0cnVjdCBhbWRncHVfY3NfY2h1bmsgew0KQEAg
LTUwLDkgKzUyLDEwIEBAIHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyIHsNCiAJdW5zaWduZWQJCW5j
aHVua3M7DQogCXN0cnVjdCBhbWRncHVfY3NfY2h1bmsJKmNodW5rczsNCiANCi0JLyogc2NoZWR1
bGVyIGpvYiBvYmplY3QgKi8NCi0Jc3RydWN0IGRybV9zY2hlZF9lbnRpdHkJKmVudGl0eTsNCi0J
c3RydWN0IGFtZGdwdV9qb2IJKmpvYjsNCisJLyogc2NoZWR1bGVyIGpvYiBvYmplY3RzICovDQor
CXVuc2lnbmVkIGludAkJZ2FuZ19zaXplOw0KKwlzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eQkqZW50
aXRpZXNbQU1ER1BVX0NTX0dBTkdfU0laRV07DQorCXN0cnVjdCBhbWRncHVfam9iCSpqb2JzW0FN
REdQVV9DU19HQU5HX1NJWkVdOw0KIA0KIAkvKiBidWZmZXIgb2JqZWN0cyAqLw0KIAlzdHJ1Y3Qg
d3dfYWNxdWlyZV9jdHgJCXRpY2tldDsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfdHJhY2UuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV90cmFjZS5oDQppbmRleCBkODU1Y2I1M2M3ZTAuLmE1MTY3Y2I5MWJhNSAxMDA2NDQNCi0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90cmFjZS5oDQorKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHJhY2UuaA0KQEAgLTE0MCw4ICsxNDAsMTAgQEAg
VFJBQ0VfRVZFTlQoYW1kZ3B1X2JvX2NyZWF0ZSwgICk7DQogDQogVFJBQ0VfRVZFTlQoYW1kZ3B1
X2NzLA0KLQkgICAgVFBfUFJPVE8oc3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAsIGludCBpKSwN
Ci0JICAgIFRQX0FSR1MocCwgaSksDQorCSAgICBUUF9QUk9UTyhzdHJ1Y3QgYW1kZ3B1X2NzX3Bh
cnNlciAqcCwNCisJCSAgICAgc3RydWN0IGFtZGdwdV9qb2IgKmpvYiwNCisJCSAgICAgc3RydWN0
IGFtZGdwdV9pYiAqaWIpLA0KKwkgICAgVFBfQVJHUyhwLCBqb2IsIGliKSwNCiAJICAgIFRQX1NU
UlVDVF9fZW50cnkoDQogCQkJICAgICBfX2ZpZWxkKHN0cnVjdCBhbWRncHVfYm9fbGlzdCAqLCBi
b19saXN0KQ0KIAkJCSAgICAgX19maWVsZCh1MzIsIHJpbmcpDQpAQCAtMTUxLDEwICsxNTMsMTAg
QEAgVFJBQ0VfRVZFTlQoYW1kZ3B1X2NzLA0KIA0KIAkgICAgVFBfZmFzdF9hc3NpZ24oDQogCQkJ
ICAgX19lbnRyeS0+Ym9fbGlzdCA9IHAtPmJvX2xpc3Q7DQotCQkJICAgX19lbnRyeS0+cmluZyA9
IHRvX2FtZGdwdV9yaW5nKHAtPmVudGl0eS0+cnEtPnNjaGVkKS0+aWR4Ow0KLQkJCSAgIF9fZW50
cnktPmR3ID0gcC0+am9iLT5pYnNbaV0ubGVuZ3RoX2R3Ow0KKwkJCSAgIF9fZW50cnktPnJpbmcg
PSB0b19hbWRncHVfcmluZyhqb2ItPmJhc2Uuc2NoZWQpLT5pZHg7DQorCQkJICAgX19lbnRyeS0+
ZHcgPSBpYi0+bGVuZ3RoX2R3Ow0KIAkJCSAgIF9fZW50cnktPmZlbmNlcyA9IGFtZGdwdV9mZW5j
ZV9jb3VudF9lbWl0dGVkKA0KLQkJCQl0b19hbWRncHVfcmluZyhwLT5lbnRpdHktPnJxLT5zY2hl
ZCkpOw0KKwkJCQl0b19hbWRncHVfcmluZyhqb2ItPmJhc2Uuc2NoZWQpKTsNCiAJCQkgICApLA0K
IAkgICAgVFBfcHJpbnRrKCJib19saXN0PSVwLCByaW5nPSV1LCBkdz0ldSwgZmVuY2VzPSV1IiwN
CiAJCSAgICAgIF9fZW50cnktPmJvX2xpc3QsIF9fZW50cnktPnJpbmcsIF9fZW50cnktPmR3LA0K
LS0NCjIuMjUuMQ0K
