Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0AD4926FCAA
	for <lists+amd-gfx@lfdr.de>; Fri, 18 Sep 2020 14:38:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2C7756E154;
	Fri, 18 Sep 2020 12:38:10 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM11-DM6-obe.outbound.protection.outlook.com
 (mail-dm6nam11on2054.outbound.protection.outlook.com [40.107.223.54])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9B84F6E154
 for <amd-gfx@lists.freedesktop.org>; Fri, 18 Sep 2020 12:38:08 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=MrDsMMTK6fOvwMVC/wWIlBHL5CezsDf3n9WX49R+rPj2/lUURLCXZPbRywPl9TLVScNC/f+lrMybHFOLOawNVN/NG5t05itP/mpX7gbI6neXkADSOGukMzrXSlShVmGNZ6cZ+r3mIzYsKRtDEFIXeUiZjGA7PQZ/2B/31XyaQnbxcnAHZ4q2/POvt7I9AmPGMQ2fLpFvTR/p5wYC1Bopt1XRC0ByXb3eYW/Aezu3nAIWdBkSHQ7bbgAJldH3HcYUAx+XsRZiKjY6UY1IdlHpa2QzkrO5dROXLy+Xet1Q1Z2htUY7Kib2ezSP9eqrsy5Vx7QkXRtjOclUg3GRLRI08Q==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HLuOcrFAHV0Vs0ALLg2winlwxQyUxMx7SdLiWfLctcU=;
 b=MsyZ2xA2eScoHeWTKyPuFQe+xdeZAOWzbY0tJhziSdtSvAjanUn7YmGGd3kL4dmQa2FuI4Eayotq/CsPefsm2PEo8lVM6PBeMFNhcxUJ8QGvZaqsJ7eVB8CcmHF75olBbgWBDLNkMxRSEgWhDb2r/wQnMzF/Kx2XYXhoikKAq/qlS0x3e/vIzMZaPES27xKnx1kWVdpopY3paerQhrU5xva3wd5PkFxS6+3oi/iFm6yg/F/1JMmcaF14jx2N4R+lbv92qRWiDSZQjHKIucLp/k0I8vFbFNGF4/FuLOnhBXLfenmtfMYgEwmGb2NxwGL5fHG+ZGN34Px5XEpEQPLhJA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HLuOcrFAHV0Vs0ALLg2winlwxQyUxMx7SdLiWfLctcU=;
 b=zbzrVUo8/ZlYNio0ieqdeed9kBj0teH+mYVB+5wZ/HM0OanDZfu57teo0Q9tbpr7ijSRdFxZAcGD/pXLP13KliPkusKQwLdnC4MWstSO/LuSsTrXMuNiybIDw4FDIHOLr0HD14o6V4GsXB/U2npoWfHIW6qFnyrA78bekrEjtoY=
Authentication-Results: lists.freedesktop.org; dkim=none (message not signed)
 header.d=none; lists.freedesktop.org;
 dmarc=none action=none header.from=amd.com;
Received: from DM6PR12MB4075.namprd12.prod.outlook.com (2603:10b6:5:21d::8) by
 DM6PR12MB2889.namprd12.prod.outlook.com (2603:10b6:5:18a::26) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3391.11; Fri, 18 Sep 2020 12:38:07 +0000
Received: from DM6PR12MB4075.namprd12.prod.outlook.com
 ([fe80::b51c:2b0e:7e1:b233]) by DM6PR12MB4075.namprd12.prod.outlook.com
 ([fe80::b51c:2b0e:7e1:b233%9]) with mapi id 15.20.3391.014; Fri, 18 Sep 2020
 12:38:06 +0000
From: Hawking Zhang <Hawking.Zhang@amd.com>
To: amd-gfx@lists.freedesktop.org, Alex Deucher <alexander.deucher@amd.com>,
 Kevin Wang <kevin1.wang@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Guchun Chen <guchun.chen@amd.com>
Subject: [PATCH 1/3] drm/amdgpu: add helper function for indirect reg access
 (v3)
Date: Fri, 18 Sep 2020 20:37:45 +0800
Message-Id: <20200918123747.7843-1-Hawking.Zhang@amd.com>
X-Mailer: git-send-email 2.17.1
X-ClientProxiedBy: HK2PR02CA0181.apcprd02.prod.outlook.com
 (2603:1096:201:21::17) To DM6PR12MB4075.namprd12.prod.outlook.com
 (2603:10b6:5:21d::8)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from hawzhang-System-Product-Master.amd.com (58.247.170.242) by
 HK2PR02CA0181.apcprd02.prod.outlook.com (2603:1096:201:21::17) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3391.17 via Frontend Transport; Fri, 18 Sep 2020 12:38:04 +0000
X-Mailer: git-send-email 2.17.1
X-Originating-IP: [58.247.170.242]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: 426ce9d4-cc01-4aca-26a0-08d85bcfb157
X-MS-TrafficTypeDiagnostic: DM6PR12MB2889:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <DM6PR12MB28893282784FF959034AA4FBFC3F0@DM6PR12MB2889.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:6430;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: sy+aP/+/Rd2Wb9/wiQqTQ/QjLPmokmvl9zNdC3HV6xMq8iatAuNty0/jB4zw8FoMWJPDnIgssDyT2pz6s4JWU07yaZFQs5Xa0/eNA2NlnAiMwJ8HByE+Vsj3D5l+QSYou2VD7hB4x3BG/BrTOEEPlI2xibsEF6bMaYD2jbDiCYMQ1geXkFJ5HVptf0l5KbOAVIfRPzLajY4AkBpgT/eJ4qsD+DlAY/7DyuhLqkfigh7FLy6MsuUwMOngzPRVJ0UrtVcjRsQXcIcfLB20op1apvitVIqS5B5LhqdTC8wFJtq7DLSyGCCmt9MAu6wVbG8yi8CmfFJ/CafxSIR7GhIvZw==
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM6PR12MB4075.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(346002)(396003)(376002)(39860400002)(136003)(366004)(66476007)(26005)(66556008)(6486002)(186003)(6666004)(316002)(6636002)(8936002)(110136005)(52116002)(4326008)(36756003)(478600001)(956004)(2616005)(16526019)(7696005)(83380400001)(66946007)(66574015)(1076003)(86362001)(5660300002)(8676002)(2906002);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: NDq2BiFNtNFFi1dz0hkD5Uyrg5wobg86maexyuP0LMB3bKoMXdbEsO0KsoOyPuITS+TuJGV5yIqmSnusWYU4qfCmUYVDjY37pzPfQhvdpFbHWeyk+ki77/Af1flXav/ZDG5jW2T5qp2M5D/kzCw/zlpTOMACrKJtxeqyb/fLuPPLgFvXJX/jTL3klQICFO2BbefrdA7on4QkmnDsqAV2XBUyygbK8oV/lYU9FpxEQ/E5j8RklxzReQCVAHL04izuALweUf7z3pY8Qp++2z7ym4t6D9CDwU7YIUgay5kT8vupF7wND0GRsfkVRDHzoCgfL0zfaLLCdmX5V6ypFVprT5Fn5Q1vRMf0gtJGczy4ENDQW1DVkcamm+2Da+P8mzYebKU1K+LFLMNgZ0j72I/f7qsg02IVqApXX7vm8Fx4JycnLnB24i0f+40/M+NP07yevAv5jF7XZnxK+5ZVE51E2PcoIVZGKoVRXx/1uR1KKOBsDwVYHHR9q1TJ3VijWOzJzizcaN14unOBzZ2Yi26Y1qx9nTxR3iPsoB+lqExLzs4VJcXEIpvwkA/1U33i8/yaxyVjFn/HGb0WGidlsURe+mcF4DvKbVrt5dWZ+6rN8bcmaFMirzRZMZyHq0DK1XuCvGSuL0cKT+SHLsYP73QOuw==
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 426ce9d4-cc01-4aca-26a0-08d85bcfb157
X-MS-Exchange-CrossTenant-AuthSource: DM6PR12MB4075.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 18 Sep 2020 12:38:06.7150 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: iTzTQKAUqvY9zA1UxbWDxKy8+qTxFUDBZBwcczeh2H1qLpspnKqBUud5m8PEC5EmEc0Twk+MngzdBIBYscdApg==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR12MB2889
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QWRkIGhlbHBlciBmdW5jdGlvbiBpbiBvcmRlciB0byByZW1vdmUgUlJFRzMyL1dSRUczMgppbiBj
dXJyZW50IHBjaWVfcnJlZy93cmVnIGZ1bmN0aW9uIGZvciBzb2MxNSBhbmQKb253YXJkcyBhZGFw
dGVycy4KUENJRV9JTkRFWC9EQVRBIHBhaXJzIGFyZSB1c2VkIHRvIGFjY2VzcyByZWdzaXRlcnMK
b3V0c2lkZSBvZiBtbWlvIGJhciBpbiB0aGUgaGVscGVyIGZ1bmN0aW9ucy4KVGhlIG5ldyBoZWxw
ZXIgZnVuY3Rpb25zIGhlbHAgcmVtb3ZlIHRoZSByZWN1cnNpb24Kb2YgYW1kZ3B1X21tX3JyZWcv
d3JlZyBmcm9tIHBjaWVfcnJlZy93cmVnIGFuZApwcm92aWRlIHRoZSBvcHBvdHVuaXR5IHRvIGNl
bnRyYWxpemUgZGlyZWN0IGFuZAppbmRpcmVjdCBhY2Nlc3MgaW4gYSBzaW5nbGUgZnVuY3Rpb24u
Cgp2MjogRml4ZWQgdHlwbyBhbmQgcmVmaW5lIHRoZSBjb21tZW50cwoKdjM6IFJlbW92ZSB1bm5l
Y2Vzc2FyeSB2b2xhdGlsZSBsb2NhbCB2YXJpYWJsZQoKU2lnbmVkLW9mZi1ieTogSGF3a2luZyBa
aGFuZyA8SGF3a2luZy5aaGFuZ0BhbWQuY29tPgpSZXZpZXdlZC1ieTogQWxleCBEZXVjaGVyIDxh
bGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpSZXZpZXdlZC1ieTogS2V2aW4gV2FuZyA8a2V2aW4x
LndhbmdAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5r
b2VuaWdAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IEd1Y2h1biBDaGVuIDxndWNodW4uY2hlbkBhbWQu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oICAgICAgICB8ICAx
MyArKysKIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kZXZpY2UuYyB8IDEyOSAr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAxNDIgaW5zZXJ0
aW9ucygrKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5o
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKaW5kZXggMTNmOTJkZS4uNDBl
ZTQ0YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgKQEAgLTEwMzEsNiArMTAzMSwx
OSBAQCB1aW50OF90IGFtZGdwdV9tbV9ycmVnOChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwg
dWludDMyX3Qgb2Zmc2V0KTsKIHUzMiBhbWRncHVfaW9fcnJlZyhzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwgdTMyIHJlZyk7CiB2b2lkIGFtZGdwdV9pb193cmVnKHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2LCB1MzIgcmVnLCB1MzIgdik7CiAKK3UzMiBhbWRncHVfZGV2aWNlX2luZGlyZWN0
X3JyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCisJCQkJdTMyIHBjaWVfaW5kZXgsIHUz
MiBwY2llX2RhdGEsCisJCQkJdTMyIHJlZ19hZGRyKTsKK3U2NCBhbWRncHVfZGV2aWNlX2luZGly
ZWN0X3JyZWc2NChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKKwkJCQkgIHUzMiBwY2llX2lu
ZGV4LCB1MzIgcGNpZV9kYXRhLAorCQkJCSAgdTMyIHJlZ19hZGRyKTsKK3ZvaWQgYW1kZ3B1X2Rl
dmljZV9pbmRpcmVjdF93cmVnKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorCQkJCSB1MzIg
cGNpZV9pbmRleCwgdTMyIHBjaWVfZGF0YSwKKwkJCQkgdTMyIHJlZ19hZGRyLCB1MzIgcmVnX2Rh
dGEpOwordm9pZCBhbWRncHVfZGV2aWNlX2luZGlyZWN0X3dyZWc2NChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwKKwkJCQkgICB1MzIgcGNpZV9pbmRleCwgdTMyIHBjaWVfZGF0YSwKKwkJCQkg
ICB1MzIgcmVnX2FkZHIsIHU2NCByZWdfZGF0YSk7CisKIGJvb2wgYW1kZ3B1X2RldmljZV9hc2lj
X2hhc19kY19zdXBwb3J0KGVudW0gYW1kX2FzaWNfdHlwZSBhc2ljX3R5cGUpOwogYm9vbCBhbWRn
cHVfZGV2aWNlX2hhc19kY19zdXBwb3J0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIApk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCmluZGV4IDVjMmViNDYu
Ljc3Nzg1YjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9k
ZXZpY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMK
QEAgLTU5NSw2ICs1OTUsMTM1IEBAIHZvaWQgYW1kZ3B1X21tX3dkb29yYmVsbDY0KHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2LCB1MzIgaW5kZXgsIHU2NCB2KQogfQogCiAvKioKKyAqIGFtZGdw
dV9kZXZpY2VfaW5kaXJlY3RfcnJlZyAtIHJlYWQgYW4gaW5kaXJlY3QgcmVnaXN0ZXIKKyAqCisg
KiBAYWRldjogYW1kZ3B1X2RldmljZSBwb2ludGVyCisgKiBAcGNpZV9pbmRleDogbW1pbyByZWdp
c3RlciBvZmZzZXQKKyAqIEBwY2llX2RhdGE6IG1taW8gcmVnaXN0ZXIgb2Zmc2V0CisgKgorICog
UmV0dXJucyB0aGUgdmFsdWUgb2YgaW5kaXJlY3QgcmVnaXN0ZXIgQHJlZ19hZGRyCisgKi8KK3Uz
MiBhbWRncHVfZGV2aWNlX2luZGlyZWN0X3JyZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYs
CisJCQkJdTMyIHBjaWVfaW5kZXgsIHUzMiBwY2llX2RhdGEsCisJCQkJdTMyIHJlZ19hZGRyKQor
eworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CisJdTMyIHI7CisJdm9pZCBfX2lvbWVtICpwY2llX2lu
ZGV4X29mZnNldDsKKwl2b2lkIF9faW9tZW0gKnBjaWVfZGF0YV9vZmZzZXQ7CisKKwlzcGluX2xv
Y2tfaXJxc2F2ZSgmYWRldi0+cGNpZV9pZHhfbG9jaywgZmxhZ3MpOworCXBjaWVfaW5kZXhfb2Zm
c2V0ID0gKHZvaWQgX19pb21lbSAqKWFkZXYtPnJtbWlvICsgcGNpZV9pbmRleCAqIDQ7CisJcGNp
ZV9kYXRhX29mZnNldCA9ICh2b2lkIF9faW9tZW0gKilhZGV2LT5ybW1pbyArIHBjaWVfZGF0YSAq
IDQ7CisKKwl3cml0ZWwocmVnX2FkZHIsIHBjaWVfaW5kZXhfb2Zmc2V0KTsKKwlyZWFkbChwY2ll
X2luZGV4X29mZnNldCk7CisJciA9IHJlYWRsKHBjaWVfZGF0YV9vZmZzZXQpOworCXNwaW5fdW5s
b2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsKKworCXJldHVybiBy
OworfQorCisvKioKKyAqIGFtZGdwdV9kZXZpY2VfaW5kaXJlY3RfcnJlZzY0IC0gcmVhZCBhIDY0
Yml0cyBpbmRpcmVjdCByZWdpc3RlcgorICoKKyAqIEBhZGV2OiBhbWRncHVfZGV2aWNlIHBvaW50
ZXIKKyAqIEBwY2llX2luZGV4OiBtbWlvIHJlZ2lzdGVyIG9mZnNldAorICogQHBjaWVfZGF0YTog
bW1pbyByZWdpc3RlciBvZmZzZXQKKyAqCisgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBpbmRpcmVj
dCByZWdpc3RlciBAcmVnX2FkZHIKKyAqLwordTY0IGFtZGdwdV9kZXZpY2VfaW5kaXJlY3RfcnJl
ZzY0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorCQkJCSAgdTMyIHBjaWVfaW5kZXgsIHUz
MiBwY2llX2RhdGEsCisJCQkJICB1MzIgcmVnX2FkZHIpCit7CisJdW5zaWduZWQgbG9uZyBmbGFn
czsKKwl1NjQgcjsKKwl2b2lkIF9faW9tZW0gKnBjaWVfaW5kZXhfb2Zmc2V0OworCXZvaWQgX19p
b21lbSAqcGNpZV9kYXRhX29mZnNldDsKKworCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2ll
X2lkeF9sb2NrLCBmbGFncyk7CisJcGNpZV9pbmRleF9vZmZzZXQgPSAodm9pZCBfX2lvbWVtICop
YWRldi0+cm1taW8gKyBwY2llX2luZGV4ICogNDsKKwlwY2llX2RhdGFfb2Zmc2V0ID0gKHZvaWQg
X19pb21lbSAqKWFkZXYtPnJtbWlvICsgcGNpZV9kYXRhICogNDsKKworCS8qIHJlYWQgbG93IDMy
IGJpdHMgKi8KKwl3cml0ZWwocmVnX2FkZHIsIHBjaWVfaW5kZXhfb2Zmc2V0KTsKKwlyZWFkbChw
Y2llX2luZGV4X29mZnNldCk7CisJciA9IHJlYWRsKHBjaWVfZGF0YV9vZmZzZXQpOworCS8qIHJl
YWQgaGlnaCAzMiBiaXRzICovCisJd3JpdGVsKHJlZ19hZGRyICsgNCwgcGNpZV9pbmRleF9vZmZz
ZXQpOworCXJlYWRsKHBjaWVfaW5kZXhfb2Zmc2V0KTsKKwlyIHw9ICgodTY0KXJlYWRsKHBjaWVf
ZGF0YV9vZmZzZXQpIDw8IDMyKTsKKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZhZGV2LT5wY2ll
X2lkeF9sb2NrLCBmbGFncyk7CisKKwlyZXR1cm4gcjsKK30KKworLyoqCisgKiBhbWRncHVfZGV2
aWNlX2luZGlyZWN0X3dyZWcgLSB3cml0ZSBhbiBpbmRpcmVjdCByZWdpc3RlciBhZGRyZXNzCisg
KgorICogQGFkZXY6IGFtZGdwdV9kZXZpY2UgcG9pbnRlcgorICogQHBjaWVfaW5kZXg6IG1taW8g
cmVnaXN0ZXIgb2Zmc2V0CisgKiBAcGNpZV9kYXRhOiBtbWlvIHJlZ2lzdGVyIG9mZnNldAorICog
QHJlZ19hZGRyOiBpbmRpcmVjdCByZWdpc3RlciBvZmZzZXQKKyAqIEByZWdfZGF0YTogaW5kaXJl
Y3QgcmVnaXN0ZXIgZGF0YQorICoKKyAqLwordm9pZCBhbWRncHVfZGV2aWNlX2luZGlyZWN0X3dy
ZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCisJCQkJIHUzMiBwY2llX2luZGV4LCB1MzIg
cGNpZV9kYXRhLAorCQkJCSB1MzIgcmVnX2FkZHIsIHUzMiByZWdfZGF0YSkKK3sKKwl1bnNpZ25l
ZCBsb25nIGZsYWdzOworCXZvaWQgX19pb21lbSAqcGNpZV9pbmRleF9vZmZzZXQ7CisJdm9pZCBf
X2lvbWVtICpwY2llX2RhdGFfb2Zmc2V0OworCisJc3Bpbl9sb2NrX2lycXNhdmUoJmFkZXYtPnBj
aWVfaWR4X2xvY2ssIGZsYWdzKTsKKwlwY2llX2luZGV4X29mZnNldCA9ICh2b2lkIF9faW9tZW0g
KilhZGV2LT5ybW1pbyArIHBjaWVfaW5kZXggKiA0OworCXBjaWVfZGF0YV9vZmZzZXQgPSAodm9p
ZCBfX2lvbWVtICopYWRldi0+cm1taW8gKyBwY2llX2RhdGEgKiA0OworCisJd3JpdGVsKHJlZ19h
ZGRyLCBwY2llX2luZGV4X29mZnNldCk7CisJcmVhZGwocGNpZV9pbmRleF9vZmZzZXQpOworCXdy
aXRlbChyZWdfZGF0YSwgcGNpZV9kYXRhX29mZnNldCk7CisJcmVhZGwocGNpZV9kYXRhX29mZnNl
dCk7CisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmYWRldi0+cGNpZV9pZHhfbG9jaywgZmxhZ3Mp
OworfQorCisvKioKKyAqIGFtZGdwdV9kZXZpY2VfaW5kaXJlY3Rfd3JlZzY0IC0gd3JpdGUgYSA2
NGJpdHMgaW5kaXJlY3QgcmVnaXN0ZXIgYWRkcmVzcworICoKKyAqIEBhZGV2OiBhbWRncHVfZGV2
aWNlIHBvaW50ZXIKKyAqIEBwY2llX2luZGV4OiBtbWlvIHJlZ2lzdGVyIG9mZnNldAorICogQHBj
aWVfZGF0YTogbW1pbyByZWdpc3RlciBvZmZzZXQKKyAqIEByZWdfYWRkcjogaW5kaXJlY3QgcmVn
aXN0ZXIgb2Zmc2V0CisgKiBAcmVnX2RhdGE6IGluZGlyZWN0IHJlZ2lzdGVyIGRhdGEKKyAqCisg
Ki8KK3ZvaWQgYW1kZ3B1X2RldmljZV9pbmRpcmVjdF93cmVnNjQoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYsCisJCQkJICAgdTMyIHBjaWVfaW5kZXgsIHUzMiBwY2llX2RhdGEsCisJCQkJICAg
dTMyIHJlZ19hZGRyLCB1NjQgcmVnX2RhdGEpCit7CisJdW5zaWduZWQgbG9uZyBmbGFnczsKKwl2
b2lkIF9faW9tZW0gKnBjaWVfaW5kZXhfb2Zmc2V0OworCXZvaWQgX19pb21lbSAqcGNpZV9kYXRh
X29mZnNldDsKKworCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFn
cyk7CisJcGNpZV9pbmRleF9vZmZzZXQgPSAodm9pZCBfX2lvbWVtICopYWRldi0+cm1taW8gKyBw
Y2llX2luZGV4ICogNDsKKwlwY2llX2RhdGFfb2Zmc2V0ID0gKHZvaWQgX19pb21lbSAqKWFkZXYt
PnJtbWlvICsgcGNpZV9kYXRhICogNDsKKworCS8qIHdyaXRlIGxvdyAzMiBiaXRzICovCisJd3Jp
dGVsKHJlZ19hZGRyLCBwY2llX2luZGV4X29mZnNldCk7CisJcmVhZGwocGNpZV9pbmRleF9vZmZz
ZXQpOworCXdyaXRlbCgodTMyKShyZWdfZGF0YSAmIDB4ZmZmZmZmZmZVTEwpLCBwY2llX2RhdGFf
b2Zmc2V0KTsKKwlyZWFkbChwY2llX2RhdGFfb2Zmc2V0KTsKKwkvKiB3cml0ZSBoaWdoIDMyIGJp
dHMgKi8KKwl3cml0ZWwocmVnX2FkZHIgKyA0LCBwY2llX2luZGV4X29mZnNldCk7CisJcmVhZGwo
cGNpZV9pbmRleF9vZmZzZXQpOworCXdyaXRlbCgodTMyKShyZWdfZGF0YSA+PiAzMiksIHBjaWVf
ZGF0YV9vZmZzZXQpOworCXJlYWRsKHBjaWVfZGF0YV9vZmZzZXQpOworCXNwaW5fdW5sb2NrX2ly
cXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsKK30KKworLyoqCiAgKiBhbWRn
cHVfaW52YWxpZF9ycmVnIC0gZHVtbXkgcmVnIHJlYWQgZnVuY3Rpb24KICAqCiAgKiBAYWRldjog
YW1kZ3B1IGRldmljZSBwb2ludGVyCi0tIAoyLjcuNAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9hbWQtZ2Z4Cg==
