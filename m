Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 86A63CE7AC
	for <lists+amd-gfx@lfdr.de>; Mon,  7 Oct 2019 17:35:22 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DAD9189216;
	Mon,  7 Oct 2019 15:35:19 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM05-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr720075.outbound.protection.outlook.com [40.107.72.75])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 48E9C6E5F8
 for <amd-gfx@lists.freedesktop.org>; Mon,  7 Oct 2019 15:35:17 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=hC981ao4i8kCLKxan3RdXKbVAvcoBEH9wz7mguYZBDXbL7zmo4amhKHbWSql3Oz5I+HTOLabwVUxwkM4ILI2EdD/S0uGRh1DDcQQswmUF5fyTeLUhGP9hjR1zikhOlTYwCLgRtfMdczaU2SJQ04Y7wqYjwAl2Fav0krtaboUQCC6+txnFhJpw29jYatTmede3k1+Wa0oRLBo/49lnJX1n9jNR1X5kAw+9MGPQI57bsT1CAWcwXN8sp+IxT4pm5zykk8qlhoK+H705CpORKIiU1fYmAoqQx4VeyxYYM0A0EoijPlB8v9clnCG1wAELDR2D8Oz5xVP4OsmeVHjHn0KBg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=sBkuPcA2TJXAu5vBLlBgkALL4wc0NzGaDMVa2K/QjSM=;
 b=QOind2eyQ/EbOoktAoKeBU3Kf0/HBrSFY9EvMgY1Ms42Akbk+xLOa5fo2CabfWq07irIKGRMwaj+qhVWgQnC5CACx5PTnec9FVI9PVKgyAfFuy/1cQyN0cMyf59RsUn8y0l+Aprs0FXsiohJr22pjnYvUKSN5L36NLWbXrfT9a0cn3qgBbiRVPmDDR3dVHxiv7/iXrLQLZJYH09yVdnRycrxaMXybUDrL2eNm0KMRljyZmomH13bkAZQ5Ed9r4gtsnWSUrcqLObVGNAimotSbKh8/RRd1/jDyjSWetvLu7jwQfSD/nDk5f1om/PF9/qxUv2rxV0P3SbrbGzNWuvdKA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from DM5PR1201MB2521.namprd12.prod.outlook.com (10.172.91.8) by
 DM5PR1201MB2505.namprd12.prod.outlook.com (10.172.91.16) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2327.24; Mon, 7 Oct 2019 15:35:15 +0000
Received: from DM5PR1201MB2521.namprd12.prod.outlook.com
 ([fe80::8049:424e:df38:e58d]) by DM5PR1201MB2521.namprd12.prod.outlook.com
 ([fe80::8049:424e:df38:e58d%3]) with mapi id 15.20.2327.026; Mon, 7 Oct 2019
 15:35:15 +0000
From: "Messinger, Ori" <Ori.Messinger@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: [PATCH] drm/amdgpu: Report vram vendor with sysfs (v2)
Thread-Topic: [PATCH] drm/amdgpu: Report vram vendor with sysfs (v2)
Thread-Index: AQHVfSTQluWho+fT3E21uCmNB40ExQ==
Date: Mon, 7 Oct 2019 15:35:15 +0000
Message-ID: <20191007153501.7194-1-Ori.Messinger@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: YT1PR01CA0022.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01::35)
 To DM5PR1201MB2521.namprd12.prod.outlook.com
 (2603:10b6:3:ea::8)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [165.204.55.251]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 4a751a8c-0404-4d95-3d37-08d74b3bf33f
x-ms-office365-filtering-ht: Tenant
x-ms-traffictypediagnostic: DM5PR1201MB2505:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DM5PR1201MB2505682507A71F57EFE1F936F89B0@DM5PR1201MB2505.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:785;
x-forefront-prvs: 01834E39B7
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(346002)(39860400002)(366004)(136003)(396003)(189003)(199004)(26005)(6116002)(3846002)(7736002)(52116002)(186003)(99286004)(66066001)(86362001)(386003)(8936002)(8676002)(81156014)(81166006)(50226002)(102836004)(6506007)(5660300002)(486006)(1076003)(36756003)(30864003)(305945005)(2906002)(6916009)(2616005)(2501003)(476003)(478600001)(66946007)(256004)(14444005)(54906003)(5640700003)(14454004)(25786009)(6512007)(4326008)(71190400001)(6436002)(66476007)(66556008)(71200400001)(316002)(64756008)(66446008)(6486002)(2351001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM5PR1201MB2505;
 H:DM5PR1201MB2521.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: muKveNpJeSjdrWmP370ykJ3LPWR6I2OY/2KhGIsG8ScTr6NwscXQV4CKCnVK5At5QozR2iGOrwkHeCmMvKBIJPd1YHHl2o6F2dRf5qM8Ay1mnNAuY5/F64vbWScP3yIV1SRfmf/+Kdmshu9Lmfy2xb6NNzcNGqhhLacJqeSTpUglPHmYGthuJPJZKAAznPmaX7kAbEGlh9oJn5v+Ns6gIYOoaA6RmYTIdVwQs31OWPAXYXTZhIVOWbwMmeCRb1WWf5dMmUKUcT0jnQuTovOUo6Qq3Mf+MBFvt2v0ytgdsYb/0A4ZbJ2mj680oCGt68gSs5Lfi1lgIrXoogvAPlhukRCTKiVeA5R1wn/B1N7aHu3eN1UtAktKKMjzQaovhBFZbzwxhePBhDjlJrfslwUX1bN0Ht8XW8XJeRhMLVSP29Y=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 4a751a8c-0404-4d95-3d37-08d74b3bf33f
X-MS-Exchange-CrossTenant-originalarrivaltime: 07 Oct 2019 15:35:15.5864 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: Vnfp9vCSpAdE45nA2UhH6oZi0p9qp8o0wNSIfo4b57XQ8MSrP96ouB0twumYU7AK6nK7bPy8ZXkCP8eRSugttw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5PR1201MB2505
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=sBkuPcA2TJXAu5vBLlBgkALL4wc0NzGaDMVa2K/QjSM=;
 b=i0gNpTHM+iIptvpnSzoqSTzbNeAGrGTVmAaFHxNZeGe2+OMRV4jrQEKLyREmZzHFUVOPqJcSWH8s3GU1+A8MRPa+rMg6vCZ9vNJF3t1GGbC/SWOhbTrhmV7YwajW34BzQlnZFjJdOnG/htBJUkmHwFmvhrs1nDsl3m5XYQTlRsk=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Ori.Messinger@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Messinger, Ori" <Ori.Messinger@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

VGhlIHZyYW0gdmVuZG9yIGNhbiBiZSBmb3VuZCBhcyBhIHNlcGFyYXRlIHN5c2ZzIGZpbGUgYXQ6
Ci9zeXMvY2xhc3MvZHJtL2NhcmRbWF0vZGV2aWNlL21lbV9pbmZvX3ZyYW1fdmVuZG9yClRoZSB2
cmFtIHZlbmRvciBpcyBkaXNwbGF5ZWQgYXMgYSBzdHJpbmcgdmFsdWUuCgp2MjogVXNlIGNvcnJl
Y3QgYml0IG1hc2tpbmcsIGFuZCBjYWNoZSB2cmFtX3ZlbmRvciBpbiBnbWMKCkNoYW5nZS1JZDog
SWFhM2NjZjNmNDgzZWU2NTM2MjgxZmU3Nzc3NzJiYTI0MWE2ZTBkNDMKU2lnbmVkLW9mZi1ieTog
T3JpIE1lc3NpbmdlciA8b3JpLm1lc3NpbmdlckBhbWQuY29tPgotLS0KIC4uLi9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jICB8IDYzICsrKysrKysrKysrKysrKysrKy0K
IC4uLi9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5oICB8ICA1ICstCiBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmggICAgICAgfCAgMSArCiBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYyAgfCA0MyArKysrKysrKysr
KysrCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYyAgICAgICAgfCAgNiAr
LQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYyAgICAgICAgIHwgIDYgKy0K
IDYgZmlsZXMgY2hhbmdlZCwgMTE3IGluc2VydGlvbnMoKyksIDcgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jCmluZGV4
IDE5OTEzYzM5NTg4Yi4uNGUzNDI5NmQwNzA3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jCkBAIC0xNjksOCArMTY5LDExIEBAIHN0YXRp
YyBpbnQgY29udmVydF9hdG9tX21lbV90eXBlX3RvX3ZyYW1fdHlwZShzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwKIAlyZXR1cm4gdnJhbV90eXBlOwogfQogCi1pbnQgYW1kZ3B1X2F0b21maXJt
d2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAotCQkJCSAgICAg
IGludCAqdnJhbV93aWR0aCwgaW50ICp2cmFtX3R5cGUpCisKK2ludAorYW1kZ3B1X2F0b21maXJt
d2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAorCQkJCSAgaW50
ICp2cmFtX3dpZHRoLCBpbnQgKnZyYW1fdHlwZSwKKwkJCQkgIGludCAqdnJhbV92ZW5kb3IpCiB7
CiAJc3RydWN0IGFtZGdwdV9tb2RlX2luZm8gKm1vZGVfaW5mbyA9ICZhZGV2LT5tb2RlX2luZm87
CiAJaW50IGluZGV4LCBpID0gMDsKQEAgLTE4MCw2ICsxODMsNyBAQCBpbnQgYW1kZ3B1X2F0b21m
aXJtd2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCXVuaW9u
IHZyYW1fbW9kdWxlICp2cmFtX21vZHVsZTsKIAl1OCBmcmV2LCBjcmV2OwogCXU4IG1lbV90eXBl
OworCXU4IG1lbV92ZW5kb3I7CiAJdTMyIG1lbV9jaGFubmVsX251bWJlcjsKIAl1MzIgbWVtX2No
YW5uZWxfd2lkdGg7CiAJdTMyIG1vZHVsZV9pZDsKQEAgLTIzMSw2ICsyMzUsOSBAQCBpbnQgYW1k
Z3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LAogCQkJCW1lbV9jaGFubmVsX3dpZHRoID0gdnJhbV9tb2R1bGUtPnY5LmNoYW5uZWxfd2lkdGg7
CiAJCQkJaWYgKHZyYW1fd2lkdGgpCiAJCQkJCSp2cmFtX3dpZHRoID0gbWVtX2NoYW5uZWxfbnVt
YmVyICogKDEgPDwgbWVtX2NoYW5uZWxfd2lkdGgpOworCQkJCW1lbV92ZW5kb3IgPSAodnJhbV9t
b2R1bGUtPnY5LnZlbmRlcl9yZXZfaWQpICYgMHhGOworCQkJCWlmICh2cmFtX3ZlbmRvcikKKwkJ
CQkJKnZyYW1fdmVuZG9yID0gbWVtX3ZlbmRvcjsKIAkJCQlicmVhazsKIAkJCWNhc2UgNDoKIAkJ
CQlpZiAobW9kdWxlX2lkID4gdnJhbV9pbmZvLT52MjQudnJhbV9tb2R1bGVfbnVtKQpAQCAtMjQ4
LDYgKzI1NSw5IEBAIGludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8oc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJCQkJbWVtX2NoYW5uZWxfd2lkdGggPSB2cmFtX21vZHVs
ZS0+djEwLmNoYW5uZWxfd2lkdGg7CiAJCQkJaWYgKHZyYW1fd2lkdGgpCiAJCQkJCSp2cmFtX3dp
ZHRoID0gbWVtX2NoYW5uZWxfbnVtYmVyICogKDEgPDwgbWVtX2NoYW5uZWxfd2lkdGgpOworCQkJ
CW1lbV92ZW5kb3IgPSAodnJhbV9tb2R1bGUtPnYxMC52ZW5kZXJfcmV2X2lkKSAmIDB4RjsKKwkJ
CQlpZiAodnJhbV92ZW5kb3IpCisJCQkJCSp2cmFtX3ZlbmRvciA9IG1lbV92ZW5kb3I7CiAJCQkJ
YnJlYWs7CiAJCQlkZWZhdWx0OgogCQkJCXJldHVybiAtRUlOVkFMOwpAQCAtMjU5LDYgKzI2OSw1
NSBAQCBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LAogCXJldHVybiAwOwogfQogCisvKgorICogUmV0dXJuIHZyYW0gd2lkdGgg
ZnJvbSBpbnRlZ3JhdGVkIHN5c3RlbSBpbmZvIHRhYmxlLCBpZiBhdmFpbGFibGUsCisgKiBvciAw
IGlmIG5vdC4KKyAqLworaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1fd2lkdGgoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCit7CisJaW50IHZyYW1fd2lkdGggPSAwLCB2cmFtX3R5
cGUgPSAwLCB2cmFtX3ZlbmRvciA9IDA7CisJaW50IHIgPSBhbWRncHVfYXRvbWZpcm13YXJlX2dl
dF92cmFtX2luZm8oYWRldiwKKwkmdnJhbV93aWR0aCwgJnZyYW1fdHlwZSwgJnZyYW1fdmVuZG9y
KTsKKworCWlmIChyKQorCQlyZXR1cm4gMDsKKworCXJldHVybiB2cmFtX3dpZHRoOworfQorCisv
KgorICogUmV0dXJuIHZyYW0gdHlwZSBmcm9tIGVpdGhlciBpbnRlZ3JhdGVkIHN5c3RlbSBpbmZv
IHRhYmxlCisgKiBvciB1bWMgaW5mbyB0YWJsZSwgaWYgYXZhaWxhYmxlLCBvciAwIChUWVBFX1VO
S05PV04pIGlmIG5vdAorICovCitpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV90eXBl
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQoreworCWludCB2cmFtX3dpZHRoID0gMCwgdnJh
bV90eXBlID0gMCwgdnJhbV92ZW5kb3IgPSAwOworCWludCByID0gYW1kZ3B1X2F0b21maXJtd2Fy
ZV9nZXRfdnJhbV9pbmZvKGFkZXYsCisJJnZyYW1fd2lkdGgsICZ2cmFtX3R5cGUsICZ2cmFtX3Zl
bmRvcik7CisKKwlpZiAocikKKwkJcmV0dXJuIDA7CisKKwlyZXR1cm4gdnJhbV90eXBlOworfQor
CisvKgorICogUmV0dXJuIHZyYW0gdmVuZG9yIGZyb20gZWl0aGVyIGludGVncmF0ZWQgc3lzdGVt
IGluZm8gdGFibGUKKyAqIG9yIHVtYyBpbmZvIHRhYmxlLCBpZiBhdmFpbGFibGUsIG9yIDAgKFRZ
UEVfVU5LTk9XTikgaWYgbm90CisgKi8KK2ludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFt
X3ZlbmRvcihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKK3sKKwlpbnQgdnJhbV93aWR0aCA9
IDAsIHZyYW1fdHlwZSA9IDAsIHZyYW1fdmVuZG9yID0gMDsKKwlpbnQgciA9IGFtZGdwdV9hdG9t
ZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhhZGV2LAorCSZ2cmFtX3dpZHRoLCAmdnJhbV90eXBlLCAm
dnJhbV92ZW5kb3IpOworCisJaWYgKHIpCisJCXJldHVybiAwOworCisJcmV0dXJuIHZyYW1fdmVu
ZG9yOworCit9CisKIC8qCiAgKiBSZXR1cm4gdHJ1ZSBpZiB2YmlvcyBlbmFibGVkIGVjYyBieSBk
ZWZhdWx0LCBpZiB1bWMgaW5mbyB0YWJsZSBpcyBhdmFpbGFibGUKICAqIG9yIGZhbHNlIGlmIGVj
YyBpcyBub3QgZW5hYmxlZCBvciB1bWMgaW5mbyB0YWJsZSBpcyBub3QgYXZhaWxhYmxlCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmgg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmgKaW5kZXgg
ODI4MTlmMDNlNDQ0Li43MzhlNTM4ZWUyNmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfYXRvbWZpcm13YXJlLmgKQEAgLTMwLDcgKzMwLDEwIEBAIGJvb2wgYW1k
Z3B1X2F0b21maXJtd2FyZV9ncHVfc3VwcG9ydHNfdmlydHVhbGl6YXRpb24oc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYpCiB2b2lkIGFtZGdwdV9hdG9tZmlybXdhcmVfc2NyYXRjaF9yZWdzX2lu
aXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwogaW50IGFtZGdwdV9hdG9tZmlybXdhcmVf
YWxsb2NhdGVfZmJfc2NyYXRjaChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7CiBpbnQgYW1k
Z3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
LAotCQkJCSAgICAgIGludCAqdnJhbV93aWR0aCwgaW50ICp2cmFtX3R5cGUpOworCWludCAqdnJh
bV93aWR0aCwgaW50ICp2cmFtX3R5cGUsIGludCAqdnJhbV92ZW5kb3IpOworaW50IGFtZGdwdV9h
dG9tZmlybXdhcmVfZ2V0X3ZyYW1fd2lkdGgoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwor
aW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1fdHlwZShzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldik7CitpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV92ZW5kb3Ioc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwogaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X2Nsb2Nr
X2luZm8oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwogaW50IGFtZGdwdV9hdG9tZmlybXdh
cmVfZ2V0X2dmeF9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIGJvb2wgYW1kZ3B1
X2F0b21maXJtd2FyZV9tZW1fZWNjX3N1cHBvcnRlZChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
dik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmgg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmgKaW5kZXggZDU5MWIzNzVk
MWRmLi41NTVkOGU1N2ZhZTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9nbWMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21j
LmgKQEAgLTE1Nyw2ICsxNTcsNyBAQCBzdHJ1Y3QgYW1kZ3B1X2dtYyB7CiAJdWludDMyX3QgICAg
ICAgICAgICAgICAgZndfdmVyc2lvbjsKIAlzdHJ1Y3QgYW1kZ3B1X2lycV9zcmMJdm1fZmF1bHQ7
CiAJdWludDMyX3QJCXZyYW1fdHlwZTsKKwl1aW50OF90CQkJdnJhbV92ZW5kb3I7CiAJdWludDMy
X3QgICAgICAgICAgICAgICAgc3JibV9zb2Z0X3Jlc2V0OwogCWJvb2wJCQlwcnRfd2FybmluZzsK
IAl1aW50NjRfdAkJc3RvbGVuX3NpemU7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV92cmFtX21nci5jCmluZGV4IDg4ODdiMzk2NGU0My4uODJhMzI5OWU1M2MwIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYwpAQCAtMjQsNiArMjQs
OCBAQAogCiAjaW5jbHVkZSAiYW1kZ3B1LmgiCiAjaW5jbHVkZSAiYW1kZ3B1X3ZtLmgiCisjaW5j
bHVkZSAiYW1kZ3B1X2F0b21maXJtd2FyZS5oIgorI2luY2x1ZGUgImF0b20uaCIKIAogc3RydWN0
IGFtZGdwdV92cmFtX21nciB7CiAJc3RydWN0IGRybV9tbSBtbTsKQEAgLTEwMiw2ICsxMDQsMzkg
QEAgc3RhdGljIHNzaXplX3QgYW1kZ3B1X21lbV9pbmZvX3Zpc192cmFtX3VzZWRfc2hvdyhzdHJ1
Y3QgZGV2aWNlICpkZXYsCiAJCWFtZGdwdV92cmFtX21ncl92aXNfdXNhZ2UoJmFkZXYtPm1tYW4u
YmRldi5tYW5bVFRNX1BMX1ZSQU1dKSk7CiB9CiAKK3N0YXRpYyBzc2l6ZV90IGFtZGdwdV9tZW1f
aW5mb192cmFtX3ZlbmRvcihzdHJ1Y3QgZGV2aWNlICpkZXYsCisJCQkJCQkgc3RydWN0IGRldmlj
ZV9hdHRyaWJ1dGUgKmF0dHIsCisJCQkJCQkgY2hhciAqYnVmKQoreworCXN0cnVjdCBkcm1fZGV2
aWNlICpkZGV2ID0gZGV2X2dldF9kcnZkYXRhKGRldik7CisJc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYgPSBkZGV2LT5kZXZfcHJpdmF0ZTsKKworCXN3aXRjaCAoYWRldi0+Z21jLnZyYW1fdmVu
ZG9yKSB7CisJY2FzZSBTQU1TVU5HOgorCQlyZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUs
ICJzYW1zdW5nXG4iKTsKKwljYXNlIElORklORU9OOgorCQlyZXR1cm4gc25wcmludGYoYnVmLCBQ
QUdFX1NJWkUsICJpbmZpbmVvblxuIik7CisJY2FzZSBFTFBJREE6CisJCXJldHVybiBzbnByaW50
ZihidWYsIFBBR0VfU0laRSwgImVscGlkYVxuIik7CisJY2FzZSBFVFJPTjoKKwkJcmV0dXJuIHNu
cHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAiZXRyb25cbiIpOworCWNhc2UgTkFOWUE6CisJCXJldHVy
biBzbnByaW50ZihidWYsIFBBR0VfU0laRSwgIm5hbnlhXG4iKTsKKwljYXNlIEhZTklYOgorCQly
ZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJoeW5peFxuIik7CisJY2FzZSBNT1NFTDoK
KwkJcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAibW9zZWxcbiIpOworCWNhc2UgV0lO
Qk9ORDoKKwkJcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAid2luYm9uZFxuIik7CisJ
Y2FzZSBFU01UOgorCQlyZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJlc210XG4iKTsK
KwljYXNlIE1JQ1JPTjoKKwkJcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAibWljcm9u
XG4iKTsKKwlkZWZhdWx0OgorCQlyZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJ1bmtu
b3duXG4iKTsKKwl9Cit9CisKIHN0YXRpYyBERVZJQ0VfQVRUUihtZW1faW5mb192cmFtX3RvdGFs
LCBTX0lSVUdPLAogCQkgICBhbWRncHVfbWVtX2luZm9fdnJhbV90b3RhbF9zaG93LCBOVUxMKTsK
IHN0YXRpYyBERVZJQ0VfQVRUUihtZW1faW5mb192aXNfdnJhbV90b3RhbCwgU19JUlVHTywKQEAg
LTExMCw2ICsxNDUsOCBAQCBzdGF0aWMgREVWSUNFX0FUVFIobWVtX2luZm9fdnJhbV91c2VkLCBT
X0lSVUdPLAogCQkgICBhbWRncHVfbWVtX2luZm9fdnJhbV91c2VkX3Nob3csIE5VTEwpOwogc3Rh
dGljIERFVklDRV9BVFRSKG1lbV9pbmZvX3Zpc192cmFtX3VzZWQsIFNfSVJVR08sCiAJCSAgIGFt
ZGdwdV9tZW1faW5mb192aXNfdnJhbV91c2VkX3Nob3csIE5VTEwpOworc3RhdGljIERFVklDRV9B
VFRSKG1lbV9pbmZvX3ZyYW1fdmVuZG9yLCBTX0lSVUdPLAorCQkgICBhbWRncHVfbWVtX2luZm9f
dnJhbV92ZW5kb3IsIE5VTEwpOwogCiAvKioKICAqIGFtZGdwdV92cmFtX21ncl9pbml0IC0gaW5p
dCBWUkFNIG1hbmFnZXIgYW5kIERSTSBNTQpAQCAtMTU1LDYgKzE5MiwxMSBAQCBzdGF0aWMgaW50
IGFtZGdwdV92cmFtX21ncl9pbml0KHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciAqbWFuLAog
CQlEUk1fRVJST1IoIkZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgbWVtX2luZm9fdmlzX3Zy
YW1fdXNlZFxuIik7CiAJCXJldHVybiByZXQ7CiAJfQorCXJldCA9IGRldmljZV9jcmVhdGVfZmls
ZShhZGV2LT5kZXYsICZkZXZfYXR0cl9tZW1faW5mb192cmFtX3ZlbmRvcik7CisJaWYgKHJldCkg
eworCQlEUk1fRVJST1IoIkZhaWxlZCB0byBjcmVhdGUgZGV2aWNlIGZpbGUgbWVtX2luZm9fdnJh
bV92ZW5kb3JcbiIpOworCQlyZXR1cm4gcmV0OworCX0KIAogCXJldHVybiAwOwogfQpAQCAtMTgx
LDYgKzIyMyw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3ZyYW1fbWdyX2Zpbmkoc3RydWN0IHR0bV9t
ZW1fdHlwZV9tYW5hZ2VyICptYW4pCiAJZGV2aWNlX3JlbW92ZV9maWxlKGFkZXYtPmRldiwgJmRl
dl9hdHRyX21lbV9pbmZvX3Zpc192cmFtX3RvdGFsKTsKIAlkZXZpY2VfcmVtb3ZlX2ZpbGUoYWRl
di0+ZGV2LCAmZGV2X2F0dHJfbWVtX2luZm9fdnJhbV91c2VkKTsKIAlkZXZpY2VfcmVtb3ZlX2Zp
bGUoYWRldi0+ZGV2LCAmZGV2X2F0dHJfbWVtX2luZm9fdmlzX3ZyYW1fdXNlZCk7CisJZGV2aWNl
X3JlbW92ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX21lbV9pbmZvX3ZyYW1fdmVuZG9yKTsK
IAlyZXR1cm4gMDsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
Z21jX3YxMF8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYwppbmRl
eCBjYjNmNjE4NzNiYWEuLmZiNDg2MjJjMmFiZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvZ21jX3YxMF8wLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
Z21jX3YxMF8wLmMKQEAgLTYyNCw3ICs2MjQsNyBAQCBzdGF0aWMgdW5zaWduZWQgZ21jX3YxMF8w
X2dldF92Ymlvc19mYl9zaXplKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCiBzdGF0aWMg
aW50IGdtY192MTBfMF9zd19pbml0KHZvaWQgKmhhbmRsZSkKIHsKLQlpbnQgciwgdnJhbV93aWR0
aCA9IDAsIHZyYW1fdHlwZSA9IDA7CisJaW50IHIsIHZyYW1fd2lkdGggPSAwLCB2cmFtX3R5cGUg
PSAwLCB2cmFtX3ZlbmRvciA9IDA7CiAJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7CiAKIAlnZnhodWJfdjJfMF9pbml0KGFkZXYpOwpA
QCAtNjMyLDEzICs2MzIsMTUgQEAgc3RhdGljIGludCBnbWNfdjEwXzBfc3dfaW5pdCh2b2lkICpo
YW5kbGUpCiAKIAlzcGluX2xvY2tfaW5pdCgmYWRldi0+Z21jLmludmFsaWRhdGVfbG9jayk7CiAK
LQlyID0gYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKGFkZXYsICZ2cmFtX3dpZHRo
LCAmdnJhbV90eXBlKTsKKwlyID0gYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKGFk
ZXYsCisJCSZ2cmFtX3dpZHRoLCAmdnJhbV90eXBlLCAmdnJhbV92ZW5kb3IpOwogCWlmICghYW1k
Z3B1X2VtdV9tb2RlKQogCQlhZGV2LT5nbWMudnJhbV93aWR0aCA9IHZyYW1fd2lkdGg7CiAJZWxz
ZQogCQlhZGV2LT5nbWMudnJhbV93aWR0aCA9IDEgKiAxMjg7IC8qIG51bWNoYW4gKiBjaGFuc2l6
ZSAqLwogCiAJYWRldi0+Z21jLnZyYW1fdHlwZSA9IHZyYW1fdHlwZTsKKwlhZGV2LT5nbWMudnJh
bV92ZW5kb3IgPSB2cmFtX3ZlbmRvcjsKIAlzd2l0Y2ggKGFkZXYtPmFzaWNfdHlwZSkgewogCWNh
c2UgQ0hJUF9OQVZJMTA6CiAJY2FzZSBDSElQX05BVkkxNDoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9nbWNfdjlfMC5jCmluZGV4IDRiMTFmN2U2MTAwNC4uZGVmZWI2YWZjYjVkIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMKQEAgLTkzMCw3ICs5MzAsNyBAQCBzdGF0aWMgdW5z
aWduZWQgZ21jX3Y5XzBfZ2V0X3ZiaW9zX2ZiX3NpemUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpCiAKIHN0YXRpYyBpbnQgZ21jX3Y5XzBfc3dfaW5pdCh2b2lkICpoYW5kbGUpCiB7Ci0JaW50
IHIsIHZyYW1fd2lkdGggPSAwLCB2cmFtX3R5cGUgPSAwOworCWludCByLCB2cmFtX3dpZHRoID0g
MCwgdnJhbV90eXBlID0gMCwgdnJhbV92ZW5kb3IgPSAwOwogCXN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2ID0gKHN0cnVjdCBhbWRncHVfZGV2aWNlICopaGFuZGxlOwogCiAJZ2Z4aHViX3YxXzBf
aW5pdChhZGV2KTsKQEAgLTk0MSw3ICs5NDEsOCBAQCBzdGF0aWMgaW50IGdtY192OV8wX3N3X2lu
aXQodm9pZCAqaGFuZGxlKQogCiAJc3Bpbl9sb2NrX2luaXQoJmFkZXYtPmdtYy5pbnZhbGlkYXRl
X2xvY2spOwogCi0JciA9IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhhZGV2LCAm
dnJhbV93aWR0aCwgJnZyYW1fdHlwZSk7CisJciA9IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3Zy
YW1faW5mbyhhZGV2LAorCQkmdnJhbV93aWR0aCwgJnZyYW1fdHlwZSwgJnZyYW1fdmVuZG9yKTsK
IAlpZiAoYW1kZ3B1X3NyaW92X3ZmKGFkZXYpKQogCQkvKiBGb3IgVmVnYTEwIFNSLUlPViwgdnJh
bV93aWR0aCBjYW4ndCBiZSByZWFkIGZyb20gQVRPTSBhcyBSQVZFTiwKIAkJICogYW5kIERGIHJl
bGF0ZWQgcmVnaXN0ZXJzIGlzIG5vdCByZWFkYWJsZSwgc2VlbXMgaGFyZGNvcmQgaXMgdGhlCkBA
IC05NjUsNiArOTY2LDcgQEAgc3RhdGljIGludCBnbWNfdjlfMF9zd19pbml0KHZvaWQgKmhhbmRs
ZSkKIAl9CiAKIAlhZGV2LT5nbWMudnJhbV90eXBlID0gdnJhbV90eXBlOworCWFkZXYtPmdtYy52
cmFtX3ZlbmRvciA9IHZyYW1fdmVuZG9yOwogCXN3aXRjaCAoYWRldi0+YXNpY190eXBlKSB7CiAJ
Y2FzZSBDSElQX1JBVkVOOgogCQlhZGV2LT5udW1fdm1odWJzID0gMjsKLS0gCjIuMTcuMQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWls
aW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
