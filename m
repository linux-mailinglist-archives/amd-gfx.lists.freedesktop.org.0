Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B8A50CC3C1
	for <lists+amd-gfx@lfdr.de>; Fri,  4 Oct 2019 21:49:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4F1776EC22;
	Fri,  4 Oct 2019 19:49:07 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4ABE36EC22
 for <amd-gfx@lists.freedesktop.org>; Fri,  4 Oct 2019 19:49:06 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id y21so6991984wmi.0
 for <amd-gfx@lists.freedesktop.org>; Fri, 04 Oct 2019 12:49:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=fDbM/FKTiYbWWuNEbzsqKbLgU1NgVCbc+0pI0tyW9gc=;
 b=hS6t55BZwzLilpsm0zDSyvdWwm1Cxgt0Mo1Fs3nXOs7PNEcQUqD6MLv1l+ugV8wQjz
 K0KmePfoCK7pxgaSaknhW56K3TRl/XaFhXn36Nr4Uuwgh8rg3KHECLSciM21yy/DfD/T
 pcFGqBCSMlMkf7ghgZuFFcC37nc2925WrUPPax6/mg8kTAdXdRTusncERuyTNeJNaewp
 /92SqxjJ4C0dFP/mkRsw8nLX+Zs7vh9goeuyas0J7CVz4/Yzx2x5YdshGocBW9vn+irc
 M5EqE6tY7ZZlDe1dWsIXE+9I5bmheF/Vg+YwvzinxYwK+NKqnX6/18tpVVaWYoKn4xMN
 foDw==
X-Gm-Message-State: APjAAAU1GQx7RGw12aG5Z/nLMw8g7rj2Zb1oKrJ4X41L/iEqyxDq4CQA
 bmdrkTQvpKz2xx/5RbzNOATcU/Jt3W1f/KxgeUs=
X-Google-Smtp-Source: APXvYqxJiRCl9sGa1ObMf2Bjq4iCZH0Ou9Pohl7W2lu+PBpJkMnjZz/ZehqfLfdhmjufGlFk5NmN3dN+jFKES1sdLZw=
X-Received: by 2002:a1c:7d92:: with SMTP id
 y140mr12050710wmc.141.1570218544614; 
 Fri, 04 Oct 2019 12:49:04 -0700 (PDT)
MIME-Version: 1.0
References: <20191004190051.21743-1-Ori.Messinger@amd.com>
In-Reply-To: <20191004190051.21743-1-Ori.Messinger@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Fri, 4 Oct 2019 15:48:51 -0400
Message-ID: <CADnq5_P76vCz2igQi3zmwZQicWu_3wX5LeWTit4dYNyLrR3Udg@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu: Report vram vendor with sysfs
To: "Messinger, Ori" <Ori.Messinger@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=fDbM/FKTiYbWWuNEbzsqKbLgU1NgVCbc+0pI0tyW9gc=;
 b=N3L7Cs7IcByw8J2QXuNO9Y5+jtm8jVBlikhehASDMIOWj+P7y1llH+ilAOX8+ug8S0
 IMc8Sb95oM3hi0sNC5X95AvKNpI5agNxLTkRMOTkh5Ri2PiwUc6UG7nXCASv9zkP5WcG
 OYWc/u0oisOgWvjJyQkDwFiqASZGa1S+b4xmwxDYrjTtkYtQG0J3eJSkTjAbEJPwP/S/
 m/8WkFgI96GnpXfrhV8BUKL/dtCvz8C2RqTgpCbqyrGcgbbxw5qNkJ0Nm7TkF8bhm5A7
 VbnyuqMSP5vYNum33rlu9cyYX9sMTPbWc1Dk1gxDcVnMb4HBdGVsm97IcHgHQQaCazX/
 gP5w==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBPY3QgNCwgMjAxOSBhdCAzOjAxIFBNIE1lc3NpbmdlciwgT3JpIDxPcmkuTWVzc2lu
Z2VyQGFtZC5jb20+IHdyb3RlOgo+Cj4gVGhlIHZyYW0gdmVuZG9yIGNhbiBiZSBmb3VuZCBhcyBh
IHNlcGFyYXRlIHN5c2ZzIGZpbGUgYXQ6Cj4gL3N5cy9jbGFzcy9kcm0vY2FyZFtYXS9kZXZpY2Uv
bWVtX2luZm9fdnJhbV92ZW5kb3IKPiBUaGUgdnJhbSB2ZW5kb3IgaXMgZGlzcGxheWVkIGFzIGEg
c3RyaW5nIHZhbHVlLgo+Cj4gQ2hhbmdlLUlkOiBJYWEzY2NmM2Y0ODNlZTY1MzYyODFmZTc3Nzc3
MmJhMjQxYTZlMGQ0Mwo+IFNpZ25lZC1vZmYtYnk6IE9yaSBNZXNzaW5nZXIgPG9yaS5tZXNzaW5n
ZXJAYW1kLmNvbT4KPiAtLS0KPiAgLi4uL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWZp
cm13YXJlLmMgIHwgNjMgKysrKysrKysrKysrKysrKysrLQo+ICAuLi4vZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuaCAgfCAgNSArLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYyAgfCA0MyArKysrKysrKysrKysrCj4gIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dtY192MTBfMC5jICAgICAgICB8ICA1ICstCj4gIGRyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8wLmMgICAgICAgICB8ICA1ICstCj4gIDUgZmlsZXMg
Y2hhbmdlZCwgMTE0IGluc2VydGlvbnMoKyksIDcgZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jCj4gaW5kZXggMTk5
MTNjMzk1ODhiLi41OTAwOTcyNjQ5NGIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2FyZS5jCj4gQEAgLTE2OSw4ICsxNjksMTEgQEAgc3Rh
dGljIGludCBjb252ZXJ0X2F0b21fbWVtX3R5cGVfdG9fdnJhbV90eXBlKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LAo+ICAgICAgICAgcmV0dXJuIHZyYW1fdHlwZTsKPiAgfQo+Cj4gLWludCBh
bWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgKnZyYW1fd2lk
dGgsIGludCAqdnJhbV90eXBlKQo+ICsKPiAraW50Cj4gK2FtZGdwdV9hdG9tZmlybXdhcmVfZ2V0
X3ZyYW1faW5mbyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgaW50ICp2cmFtX3dpZHRoLCBpbnQgKnZyYW1fdHlwZSwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ICp2cmFtX3ZlbmRvcikKPiAgewo+ICAg
ICAgICAgc3RydWN0IGFtZGdwdV9tb2RlX2luZm8gKm1vZGVfaW5mbyA9ICZhZGV2LT5tb2RlX2lu
Zm87Cj4gICAgICAgICBpbnQgaW5kZXgsIGkgPSAwOwo+IEBAIC0xODAsNiArMTgzLDcgQEAgaW50
IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiwKPiAgICAgICAgIHVuaW9uIHZyYW1fbW9kdWxlICp2cmFtX21vZHVsZTsKPiAgICAgICAg
IHU4IGZyZXYsIGNyZXY7Cj4gICAgICAgICB1OCBtZW1fdHlwZTsKPiArICAgICAgIHU4IG1lbV92
ZW5kb3I7Cj4gICAgICAgICB1MzIgbWVtX2NoYW5uZWxfbnVtYmVyOwo+ICAgICAgICAgdTMyIG1l
bV9jaGFubmVsX3dpZHRoOwo+ICAgICAgICAgdTMyIG1vZHVsZV9pZDsKPiBAQCAtMjMxLDYgKzIz
NSw5IEBAIGludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8oc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fY2hh
bm5lbF93aWR0aCA9IHZyYW1fbW9kdWxlLT52OS5jaGFubmVsX3dpZHRoOwo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgKHZyYW1fd2lkdGgpCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICp2cmFtX3dpZHRoID0gbWVtX2NoYW5uZWxfbnVtYmVyICog
KDEgPDwgbWVtX2NoYW5uZWxfd2lkdGgpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgbWVtX3ZlbmRvciA9IHZyYW1fbW9kdWxlLT52OS52ZW5kZXJfcmV2X2lkOwoKRG9uJ3QgeW91
IG5lZWQgdG8gbWFzayB0aGlzPyAgSSB0aGluayBvbmx5IHRoZSBsb3dlciA0IGJpdHMgYXJlIHRo
ZSB2ZW5kb3IuCgo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZyYW1fdmVu
ZG9yKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqdnJhbV92ZW5k
b3IgPSBtZW1fdmVuZG9yOwo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0Ogo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgKG1vZHVsZV9pZCA+IHZyYW1faW5mby0+djI0LnZyYW1fbW9kdWxlX251
bSkKPiBAQCAtMjQ4LDYgKzI1NSw5IEBAIGludCBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFt
X2luZm8oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBtZW1fY2hhbm5lbF93aWR0aCA9IHZyYW1fbW9kdWxlLT52MTAuY2hhbm5lbF93
aWR0aDsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmFtX3dpZHRoKQo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqdnJhbV93aWR0aCA9IG1l
bV9jaGFubmVsX251bWJlciAqICgxIDw8IG1lbV9jaGFubmVsX3dpZHRoKTsKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG1lbV92ZW5kb3IgPSB2cmFtX21vZHVsZS0+djEwLnZlbmRl
cl9yZXZfaWQ7CgpTYW1lIGNvbW1lbnQgaGVyZS4KCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZiAodnJhbV92ZW5kb3IpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICp2cmFtX3ZlbmRvciA9IG1lbV92ZW5kb3I7Cj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBicmVhazsKPiAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Ogo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gQEAgLTI1
OSw2ICsyNjksNTUgQEAgaW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAgICAgIHJldHVybiAwOwo+ICB9Cj4KPiArLyoK
PiArICogUmV0dXJuIHZyYW0gd2lkdGggZnJvbSBpbnRlZ3JhdGVkIHN5c3RlbSBpbmZvIHRhYmxl
LCBpZiBhdmFpbGFibGUsCj4gKyAqIG9yIDAgaWYgbm90Lgo+ICsgKi8KPiAraW50IGFtZGdwdV9h
dG9tZmlybXdhcmVfZ2V0X3ZyYW1fd2lkdGgoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4g
K3sKPiArICAgICAgIGludCB2cmFtX3dpZHRoID0gMCwgdnJhbV90eXBlID0gMCwgdnJhbV92ZW5k
b3IgPSAwOwo+ICsgICAgICAgaW50IHIgPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2lu
Zm8oYWRldiwKPiArICAgICAgICZ2cmFtX3dpZHRoLCAmdnJhbV90eXBlLCAmdnJhbV92ZW5kb3Ip
Owo+ICsKPiArICAgICAgIGlmIChyKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gMDsKPiArCj4g
KyAgICAgICByZXR1cm4gdnJhbV93aWR0aDsKPiArfQo+ICsKPiArLyoKPiArICogUmV0dXJuIHZy
YW0gdHlwZSBmcm9tIGVpdGhlciBpbnRlZ3JhdGVkIHN5c3RlbSBpbmZvIHRhYmxlCj4gKyAqIG9y
IHVtYyBpbmZvIHRhYmxlLCBpZiBhdmFpbGFibGUsIG9yIDAgKFRZUEVfVU5LTk9XTikgaWYgbm90
Cj4gKyAqLwo+ICtpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV90eXBlKHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2KQo+ICt7Cj4gKyAgICAgICBpbnQgdnJhbV93aWR0aCA9IDAsIHZy
YW1fdHlwZSA9IDAsIHZyYW1fdmVuZG9yID0gMDsKPiArICAgICAgIGludCByID0gYW1kZ3B1X2F0
b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKGFkZXYsCj4gKyAgICAgICAmdnJhbV93aWR0aCwgJnZy
YW1fdHlwZSwgJnZyYW1fdmVuZG9yKTsKPiArCj4gKyAgICAgICBpZiAocikKPiArICAgICAgICAg
ICAgICAgcmV0dXJuIDA7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHZyYW1fdHlwZTsKPiArfQo+ICsK
PiArLyoKPiArICogUmV0dXJuIHZyYW0gdmVuZG9yIGZyb20gZWl0aGVyIGludGVncmF0ZWQgc3lz
dGVtIGluZm8gdGFibGUKPiArICogb3IgdW1jIGluZm8gdGFibGUsIGlmIGF2YWlsYWJsZSwgb3Ig
MCAoVFlQRV9VTktOT1dOKSBpZiBub3QKPiArICovCj4gK2ludCBhbWRncHVfYXRvbWZpcm13YXJl
X2dldF92cmFtX3ZlbmRvcihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiArewo+ICsgICAg
ICAgaW50IHZyYW1fd2lkdGggPSAwLCB2cmFtX3R5cGUgPSAwLCB2cmFtX3ZlbmRvciA9IDA7Cj4g
KyAgICAgICBpbnQgciA9IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1faW5mbyhhZGV2LAo+
ICsgICAgICAgJnZyYW1fd2lkdGgsICZ2cmFtX3R5cGUsICZ2cmFtX3ZlbmRvcik7Cj4gKwo+ICsg
ICAgICAgaWYgKHIpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsKPiArICAgICAgIHJl
dHVybiB2cmFtX3ZlbmRvcjsKPiArCj4gK30KClRoZXkgYXJlbid0IHVzZWQuICBEcm9wIHRoZW0u
ICBTZWUgbXkgY29tbWVudCBiZWxvdy4KCj4gKwo+ICAvKgo+ICAgKiBSZXR1cm4gdHJ1ZSBpZiB2
YmlvcyBlbmFibGVkIGVjYyBieSBkZWZhdWx0LCBpZiB1bWMgaW5mbyB0YWJsZSBpcyBhdmFpbGFi
bGUKPiAgICogb3IgZmFsc2UgaWYgZWNjIGlzIG5vdCBlbmFibGVkIG9yIHVtYyBpbmZvIHRhYmxl
IGlzIG5vdCBhdmFpbGFibGUKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2F0b21maXJtd2FyZS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2F0b21maXJtd2FyZS5oCj4gaW5kZXggODI4MTlmMDNlNDQ0Li43MzhlNTM4ZWUyNmMgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2Fy
ZS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2F0b21maXJtd2Fy
ZS5oCj4gQEAgLTMwLDcgKzMwLDEwIEBAIGJvb2wgYW1kZ3B1X2F0b21maXJtd2FyZV9ncHVfc3Vw
cG9ydHNfdmlydHVhbGl6YXRpb24oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gIHZvaWQg
YW1kZ3B1X2F0b21maXJtd2FyZV9zY3JhdGNoX3JlZ3NfaW5pdChzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldik7Cj4gIGludCBhbWRncHVfYXRvbWZpcm13YXJlX2FsbG9jYXRlX2ZiX3NjcmF0Y2go
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+ICBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9n
ZXRfdnJhbV9pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+IC0gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgaW50ICp2cmFtX3dpZHRoLCBpbnQgKnZyYW1fdHlwZSk7
Cj4gKyAgICAgICBpbnQgKnZyYW1fd2lkdGgsIGludCAqdnJhbV90eXBlLCBpbnQgKnZyYW1fdmVu
ZG9yKTsKPiAraW50IGFtZGdwdV9hdG9tZmlybXdhcmVfZ2V0X3ZyYW1fd2lkdGgoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpOwo+ICtpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV90
eXBlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiAraW50IGFtZGdwdV9hdG9tZmlybXdh
cmVfZ2V0X3ZyYW1fdmVuZG9yKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiAgaW50IGFt
ZGdwdV9hdG9tZmlybXdhcmVfZ2V0X2Nsb2NrX2luZm8oc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYpOwo+ICBpbnQgYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfZ2Z4X2luZm8oc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYpOwo+ICBib29sIGFtZGdwdV9hdG9tZmlybXdhcmVfbWVtX2VjY19zdXBw
b3J0ZWQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV92cmFtX21nci5jCj4gaW5kZXggODg4N2IzOTY0ZTQzLi4xZThkZmZl
MzMyM2EgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Zy
YW1fbWdyLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9t
Z3IuYwo+IEBAIC0yNCw2ICsyNCw4IEBACj4KPiAgI2luY2x1ZGUgImFtZGdwdS5oIgo+ICAjaW5j
bHVkZSAiYW1kZ3B1X3ZtLmgiCj4gKyNpbmNsdWRlICJhbWRncHVfYXRvbWZpcm13YXJlLmgiCj4g
KyNpbmNsdWRlICJhdG9tLmgiCj4KPiAgc3RydWN0IGFtZGdwdV92cmFtX21nciB7Cj4gICAgICAg
ICBzdHJ1Y3QgZHJtX21tIG1tOwo+IEBAIC0xMDIsNiArMTA0LDM5IEBAIHN0YXRpYyBzc2l6ZV90
IGFtZGdwdV9tZW1faW5mb192aXNfdnJhbV91c2VkX3Nob3coc3RydWN0IGRldmljZSAqZGV2LAo+
ICAgICAgICAgICAgICAgICBhbWRncHVfdnJhbV9tZ3JfdmlzX3VzYWdlKCZhZGV2LT5tbWFuLmJk
ZXYubWFuW1RUTV9QTF9WUkFNXSkpOwo+ICB9Cj4KPiArc3RhdGljIHNzaXplX3QgYW1kZ3B1X21l
bV9pbmZvX3ZyYW1fdmVuZG9yKHN0cnVjdCBkZXZpY2UgKmRldiwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUg
KmF0dHIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNoYXIgKmJ1ZikKPiArewo+ICsgICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRkZXYgPSBkZXZf
Z2V0X2RydmRhdGEoZGV2KTsKPiArICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0g
ZGRldi0+ZGV2X3ByaXZhdGU7Cj4gKwo+ICsgICAgICAgc3dpdGNoIChhbWRncHVfYXRvbWZpcm13
YXJlX2dldF92cmFtX3ZlbmRvcihhZGV2KSkgewoKTGV0J3Mgbm90IHBhcnNlIHRoZSB2YmlvcyBl
dmVyeSB0aW1lIHRoZSB1c2VyIHdhbnRzIHRvIHJlYWQgdGhlIHZyYW0KdmVuZG9yLiAgTGV0J3Mg
Y2FjaGUgaXQgaW4gYWRldi0+Z21jIGFuZCBwb3B1bGF0ZSBpdCBpbiBnbWMgc3dfaW5pdAphbmQg
anVzdCB1c2UgdGhhdCBoZXJlLgoKCj4gKyAgICAgICBjYXNlIFNBTVNVTkc6Cj4gKyAgICAgICAg
ICAgICAgIHJldHVybiBzbnByaW50ZihidWYsIFBBR0VfU0laRSwgInNhbXN1bmdcbiIpOwo+ICsg
ICAgICAgY2FzZSBJTkZJTkVPTjoKPiArICAgICAgICAgICAgICAgcmV0dXJuIHNucHJpbnRmKGJ1
ZiwgUEFHRV9TSVpFLCAiaW5maW5lb25cbiIpOwo+ICsgICAgICAgY2FzZSBFTFBJREE6Cj4gKyAg
ICAgICAgICAgICAgIHJldHVybiBzbnByaW50ZihidWYsIFBBR0VfU0laRSwgImVscGlkYVxuIik7
Cj4gKyAgICAgICBjYXNlIEVUUk9OOgo+ICsgICAgICAgICAgICAgICByZXR1cm4gc25wcmludGYo
YnVmLCBQQUdFX1NJWkUsICJldHJvblxuIik7Cj4gKyAgICAgICBjYXNlIE5BTllBOgo+ICsgICAg
ICAgICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJuYW55YVxuIik7Cj4g
KyAgICAgICBjYXNlIEhZTklYOgo+ICsgICAgICAgICAgICAgICByZXR1cm4gc25wcmludGYoYnVm
LCBQQUdFX1NJWkUsICJoeW5peFxuIik7Cj4gKyAgICAgICBjYXNlIE1PU0VMOgo+ICsgICAgICAg
ICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJtb3NlbFxuIik7Cj4gKyAg
ICAgICBjYXNlIFdJTkJPTkQ6Cj4gKyAgICAgICAgICAgICAgIHJldHVybiBzbnByaW50ZihidWYs
IFBBR0VfU0laRSwgIndpbmJvbmRcbiIpOwo+ICsgICAgICAgY2FzZSBFU01UOgo+ICsgICAgICAg
ICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICJlc210XG4iKTsKPiArICAg
ICAgIGNhc2UgTUlDUk9OOgo+ICsgICAgICAgICAgICAgICByZXR1cm4gc25wcmludGYoYnVmLCBQ
QUdFX1NJWkUsICJtaWNyb25cbiIpOwo+ICsgICAgICAgZGVmYXVsdDoKPiArICAgICAgICAgICAg
ICAgcmV0dXJuIHNucHJpbnRmKGJ1ZiwgUEFHRV9TSVpFLCAidW5rbm93blxuIik7Cj4gKyAgICAg
ICB9Cj4gK30KPiArCj4gIHN0YXRpYyBERVZJQ0VfQVRUUihtZW1faW5mb192cmFtX3RvdGFsLCBT
X0lSVUdPLAo+ICAgICAgICAgICAgICAgICAgICBhbWRncHVfbWVtX2luZm9fdnJhbV90b3RhbF9z
aG93LCBOVUxMKTsKPiAgc3RhdGljIERFVklDRV9BVFRSKG1lbV9pbmZvX3Zpc192cmFtX3RvdGFs
LCBTX0lSVUdPLAo+IEBAIC0xMTAsNiArMTQ1LDggQEAgc3RhdGljIERFVklDRV9BVFRSKG1lbV9p
bmZvX3ZyYW1fdXNlZCwgU19JUlVHTywKPiAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X21lbV9p
bmZvX3ZyYW1fdXNlZF9zaG93LCBOVUxMKTsKPiAgc3RhdGljIERFVklDRV9BVFRSKG1lbV9pbmZv
X3Zpc192cmFtX3VzZWQsIFNfSVJVR08sCj4gICAgICAgICAgICAgICAgICAgIGFtZGdwdV9tZW1f
aW5mb192aXNfdnJhbV91c2VkX3Nob3csIE5VTEwpOwo+ICtzdGF0aWMgREVWSUNFX0FUVFIobWVt
X2luZm9fdnJhbV92ZW5kb3IsIFNfSVJVR08sCj4gKyAgICAgICAgICAgICAgICAgIGFtZGdwdV9t
ZW1faW5mb192cmFtX3ZlbmRvciwgTlVMTCk7Cj4KPiAgLyoqCj4gICAqIGFtZGdwdV92cmFtX21n
cl9pbml0IC0gaW5pdCBWUkFNIG1hbmFnZXIgYW5kIERSTSBNTQo+IEBAIC0xNTUsNiArMTkyLDEx
IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3ZyYW1fbWdyX2luaXQoc3RydWN0IHR0bV9tZW1fdHlwZV9t
YW5hZ2VyICptYW4sCj4gICAgICAgICAgICAgICAgIERSTV9FUlJPUigiRmFpbGVkIHRvIGNyZWF0
ZSBkZXZpY2UgZmlsZSBtZW1faW5mb192aXNfdnJhbV91c2VkXG4iKTsKPiAgICAgICAgICAgICAg
ICAgcmV0dXJuIHJldDsKPiAgICAgICAgIH0KPiArICAgICAgIHJldCA9IGRldmljZV9jcmVhdGVf
ZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9tZW1faW5mb192cmFtX3ZlbmRvcik7Cj4gKyAgICAg
ICBpZiAocmV0KSB7Cj4gKyAgICAgICAgICAgICAgIERSTV9FUlJPUigiRmFpbGVkIHRvIGNyZWF0
ZSBkZXZpY2UgZmlsZSBtZW1faW5mb192cmFtX3ZlbmRvclxuIik7Cj4gKyAgICAgICAgICAgICAg
IHJldHVybiByZXQ7Cj4gKyAgICAgICB9Cj4KPiAgICAgICAgIHJldHVybiAwOwo+ICB9Cj4gQEAg
LTE4MSw2ICsyMjMsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV92cmFtX21ncl9maW5pKHN0cnVjdCB0
dG1fbWVtX3R5cGVfbWFuYWdlciAqbWFuKQo+ICAgICAgICAgZGV2aWNlX3JlbW92ZV9maWxlKGFk
ZXYtPmRldiwgJmRldl9hdHRyX21lbV9pbmZvX3Zpc192cmFtX3RvdGFsKTsKPiAgICAgICAgIGRl
dmljZV9yZW1vdmVfZmlsZShhZGV2LT5kZXYsICZkZXZfYXR0cl9tZW1faW5mb192cmFtX3VzZWQp
Owo+ICAgICAgICAgZGV2aWNlX3JlbW92ZV9maWxlKGFkZXYtPmRldiwgJmRldl9hdHRyX21lbV9p
bmZvX3Zpc192cmFtX3VzZWQpOwo+ICsgICAgICAgZGV2aWNlX3JlbW92ZV9maWxlKGFkZXYtPmRl
diwgJmRldl9hdHRyX21lbV9pbmZvX3ZyYW1fdmVuZG9yKTsKPiAgICAgICAgIHJldHVybiAwOwo+
ICB9Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3YxMF8w
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjEwXzAuYwo+IGluZGV4IGNiM2Y2
MTg3M2JhYS4uYzQzNDQ4M2E3NzkxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2dtY192MTBfMC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21j
X3YxMF8wLmMKPiBAQCAtNjI0LDcgKzYyNCw3IEBAIHN0YXRpYyB1bnNpZ25lZCBnbWNfdjEwXzBf
Z2V0X3ZiaW9zX2ZiX3NpemUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4KPiAgc3RhdGlj
IGludCBnbWNfdjEwXzBfc3dfaW5pdCh2b2lkICpoYW5kbGUpCj4gIHsKPiAtICAgICAgIGludCBy
LCB2cmFtX3dpZHRoID0gMCwgdnJhbV90eXBlID0gMDsKPiArICAgICAgIGludCByLCB2cmFtX3dp
ZHRoID0gMCwgdnJhbV90eXBlID0gMCwgdnJhbV92ZW5kb3IgPSAwOwo+ICAgICAgICAgc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSAoc3RydWN0IGFtZGdwdV9kZXZpY2UgKiloYW5kbGU7Cj4K
PiAgICAgICAgIGdmeGh1Yl92Ml8wX2luaXQoYWRldik7Cj4gQEAgLTYzMiw3ICs2MzIsOCBAQCBz
dGF0aWMgaW50IGdtY192MTBfMF9zd19pbml0KHZvaWQgKmhhbmRsZSkKPgo+ICAgICAgICAgc3Bp
bl9sb2NrX2luaXQoJmFkZXYtPmdtYy5pbnZhbGlkYXRlX2xvY2spOwo+Cj4gLSAgICAgICByID0g
YW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKGFkZXYsICZ2cmFtX3dpZHRoLCAmdnJh
bV90eXBlKTsKPiArICAgICAgIHIgPSBhbWRncHVfYXRvbWZpcm13YXJlX2dldF92cmFtX2luZm8o
YWRldiwKPiArICAgICAgICAgICAgICAgJnZyYW1fd2lkdGgsICZ2cmFtX3R5cGUsICZ2cmFtX3Zl
bmRvcik7Cj4gICAgICAgICBpZiAoIWFtZGdwdV9lbXVfbW9kZSkKPiAgICAgICAgICAgICAgICAg
YWRldi0+Z21jLnZyYW1fd2lkdGggPSB2cmFtX3dpZHRoOwo+ICAgICAgICAgZWxzZQo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYwo+IGluZGV4IDRiMTFmN2U2MTAwNC4uYmNkMzA1
ODEzNzg4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OV8w
LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5jCj4gQEAgLTkz
MCw3ICs5MzAsNyBAQCBzdGF0aWMgdW5zaWduZWQgZ21jX3Y5XzBfZ2V0X3ZiaW9zX2ZiX3NpemUo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4KPiAgc3RhdGljIGludCBnbWNfdjlfMF9zd19p
bml0KHZvaWQgKmhhbmRsZSkKPiAgewo+IC0gICAgICAgaW50IHIsIHZyYW1fd2lkdGggPSAwLCB2
cmFtX3R5cGUgPSAwOwo+ICsgICAgICAgaW50IHIsIHZyYW1fd2lkdGggPSAwLCB2cmFtX3R5cGUg
PSAwLCB2cmFtX3ZlbmRvciA9IDA7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
diA9IChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqKWhhbmRsZTsKPgo+ICAgICAgICAgZ2Z4aHViX3Yx
XzBfaW5pdChhZGV2KTsKPiBAQCAtOTQxLDcgKzk0MSw4IEBAIHN0YXRpYyBpbnQgZ21jX3Y5XzBf
c3dfaW5pdCh2b2lkICpoYW5kbGUpCj4KPiAgICAgICAgIHNwaW5fbG9ja19pbml0KCZhZGV2LT5n
bWMuaW52YWxpZGF0ZV9sb2NrKTsKPgo+IC0gICAgICAgciA9IGFtZGdwdV9hdG9tZmlybXdhcmVf
Z2V0X3ZyYW1faW5mbyhhZGV2LCAmdnJhbV93aWR0aCwgJnZyYW1fdHlwZSk7Cj4gKyAgICAgICBy
ID0gYW1kZ3B1X2F0b21maXJtd2FyZV9nZXRfdnJhbV9pbmZvKGFkZXYsCj4gKyAgICAgICAgICAg
ICAgICZ2cmFtX3dpZHRoLCAmdnJhbV90eXBlLCAmdnJhbV92ZW5kb3IpOwo+ICAgICAgICAgaWYg
KGFtZGdwdV9zcmlvdl92ZihhZGV2KSkKPiAgICAgICAgICAgICAgICAgLyogRm9yIFZlZ2ExMCBT
Ui1JT1YsIHZyYW1fd2lkdGggY2FuJ3QgYmUgcmVhZCBmcm9tIEFUT00gYXMgUkFWRU4sCj4gICAg
ICAgICAgICAgICAgICAqIGFuZCBERiByZWxhdGVkIHJlZ2lzdGVycyBpcyBub3QgcmVhZGFibGUs
IHNlZW1zIGhhcmRjb3JkIGlzIHRoZQo+IC0tCj4gMi4xNy4xCj4KPiBfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+IGFtZC1nZnggbWFpbGluZyBsaXN0Cj4g
YW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZngKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9hbWQtZ2Z4
