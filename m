Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 072F26A4DF
	for <lists+amd-gfx@lfdr.de>; Tue, 16 Jul 2019 11:27:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7EACB89D4F;
	Tue, 16 Jul 2019 09:27:18 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8916A89D4F
 for <amd-gfx@lists.freedesktop.org>; Tue, 16 Jul 2019 09:27:17 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id v19so17926442wmj.5
 for <amd-gfx@lists.freedesktop.org>; Tue, 16 Jul 2019 02:27:17 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:references:from:message-id
 :date:user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=BBlcF4GBojr6+eDug+aHrQ6qJwg0jI2ooRwl/oCAS5c=;
 b=Wx7pEgxp5Zyx707d7em1f6XgpKgth3pHGOqECCIUCWNcujCS0S7BDt49Ux8p6r1JUU
 FT3BAi8oLcayGSpGIb7ucOQMAI7zUYQ+q/xImF57It+M7Ri8MztniPiiuNlisdr9irqT
 ecaPcMhVEJsckb0KQGx6kMvEpFJ0HwyowgntwcR6mtKuQq7R+YqLYqwPYULV5DQsnQ2+
 7WAfHKKgYdXZalwMxo8vHzg6lukIwI+COTBJYX6+/guiFf8jNBxNYgqXmDM4aCJ05w36
 3WHhPO0Vq6No8e+54R4lIlSEMC/mtVdQUfHyz3TPNaJx9+Vh+pjmGkFRU6REMfxrVLYh
 VscQ==
X-Gm-Message-State: APjAAAUk0fqVQTRT3IEY3PgJUtI8tN2PmxRAkUiu3aJAhsF+7RyDbzGW
 jPglEp821H/YAWc+n04eXQ+rgava
X-Google-Smtp-Source: APXvYqzjMbYl03mzQN+ZYOlDFgKcDAShbgfvZZO2JhdJGiOhklquqNJXgVyhxeFmNAX/m3ItukdGrg==
X-Received: by 2002:a1c:9e4d:: with SMTP id h74mr31179815wme.9.1563269235658; 
 Tue, 16 Jul 2019 02:27:15 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id t24sm18328722wmj.14.2019.07.16.02.27.14
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 16 Jul 2019 02:27:14 -0700 (PDT)
Subject: Re: [PATCH 1/2] drm/amdgpu: Dump PDEs and PTEs on VM faults (v3)
To: "Kuehling, Felix" <Felix.Kuehling@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
References: <20190713064211.20047-1-Felix.Kuehling@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <79761463-5821-006a-6537-4cf28d43452b@gmail.com>
Date: Tue, 16 Jul 2019 11:27:14 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <20190713064211.20047-1-Felix.Kuehling@amd.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=reply-to:subject:to:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=BBlcF4GBojr6+eDug+aHrQ6qJwg0jI2ooRwl/oCAS5c=;
 b=LsvkP6X+BJacTFLdRRWBVYNUq6QgCGGyhbCxEd0E9FQLdOdJyMxaVZVwgzydFHdGix
 y8fXVr/cYGBvrQcxI9xQAv1ZPXCbhzTAlyC6jAYYP4NbxSGId3HyDe6eiAvWRj97jdpR
 2QlLHnF/Jw9TCkzxZbG7BQrqrAkZs4z0+BUeBbZD8+z+Qxm5uMcEaCwiBKpRPnKY6ECu
 0qblqqpkG+VHm/lI+JhYqWT3FVMpjw0iMx7bgZAk7265+ED/46+6nmcF5+U8ogWMphYi
 R7N/N2Z6FLC6FStlMiAHQjI/qSY5yLxHic5OETNRAnodF8eu5sldiJbiZl9+X0brIZ3c
 CEqA==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMTMuMDcuMTkgdW0gMDg6NDIgc2NocmllYiBLdWVobGluZywgRmVsaXg6Cj4gV2FsayBwYWdl
IHRhYmxlIGZvciB0aGUgZmF1bHRpbmcgYWRkcmVzcyBhbmQgZHVtcCBQREVzIGFuZCBQVEVzIGF0
Cj4gYWxsIGxldmVscy4gQWxzbyBmbGFnIGRpc2NyZXBhbmNpZXMgd2hlcmUgYSBQREUgcG9pbnRz
IHRvIGEgZGlmZmVyZW50Cj4gYWRkcmVzcyB0aGFuIHRoZSBuZXh0IGxldmVsIFBEQiBvciBQVEIg
Qk8uCj4KPiB2MjoKPiAqIEZpeCBhZGRyZXNzIHNoaWZ0IGZvciBHRlh2OAo+ICogUmVkbyBQREIv
UFRCIGFkZHJlc3MgY2hlY2tpbmcgdG8gd29yayBvbiBhbGwgZ2VuZXJhdGlvbnMKPgo+IHYzOgo+
ICogU2ltcGxpZmllZCBwZGUgYWRkcmVzcyBhbmQgZmxhZyBjaGVjawo+Cj4gU2lnbmVkLW9mZi1i
eTogRmVsaXggS3VlaGxpbmcgPEZlbGl4Lkt1ZWhsaW5nQGFtZC5jb20+Cj4gLS0tCj4gICBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgfCAgNSArLQo+ICAgZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5oIHwgIDIgKwo+ICAgZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMgIHwgNzkgKysrKysrKysrKysrKysrKysrKysrKysrLQo+
ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmggIHwgIDcgKystCj4gICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjhfMC5jICAgfCAgNiArLQo+ICAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYyAgIHwgIDUgKy0KPiAgIDYgZmlsZXMgY2hh
bmdlZCwgOTUgaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKPiBpbmRleCBiYmJmMDY5ZWZiNzcuLjc4NDQwNzQ4Yzg3
ZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKPiBAQCAtMTUw
NSw5ICsxNTA1LDggQEAgc3RhdGljIGJvb2wgYW1kZ3B1X3R0bV9ib19ldmljdGlvbl92YWx1YWJs
ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ICAgICogVGhpcyBpcyB1c2VkIHRvIGFj
Y2VzcyBWUkFNIHRoYXQgYmFja3MgYSBidWZmZXIgb2JqZWN0IHZpYSBNTUlPCj4gICAgKiBhY2Nl
c3MgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy4KPiAgICAqLwo+IC1zdGF0aWMgaW50IGFtZGdwdV90
dG1fYWNjZXNzX21lbW9yeShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+IC0JCQkJICAg
IHVuc2lnbmVkIGxvbmcgb2Zmc2V0LAo+IC0JCQkJICAgIHZvaWQgKmJ1ZiwgaW50IGxlbiwgaW50
IHdyaXRlKQo+ICtpbnQgYW1kZ3B1X3R0bV9hY2Nlc3NfbWVtb3J5KHN0cnVjdCB0dG1fYnVmZmVy
X29iamVjdCAqYm8sIHVuc2lnbmVkIGxvbmcgb2Zmc2V0LAo+ICsJCQkgICAgIHZvaWQgKmJ1Ziwg
aW50IGxlbiwgaW50IHdyaXRlKQo+ICAgewo+ICAgCXN0cnVjdCBhbWRncHVfYm8gKmFibyA9IHR0
bV90b19hbWRncHVfYm8oYm8pOwo+ICAgCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gYW1k
Z3B1X3R0bV9hZGV2KGFiby0+dGJvLmJkZXYpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdHRtLmgKPiBpbmRleCBiY2NiOGM0OWU1OTcuLmNmZmJhZmZmYTlkNyAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmgKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmgKPiBAQCAtODMsNiArODMsOCBAQCB2
b2lkIGFtZGdwdV90dG1fZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldik7Cj4gICB2b2lk
IGFtZGdwdV90dG1fc2V0X2J1ZmZlcl9mdW5jc19zdGF0dXMoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsCj4gICAJCQkJCWJvb2wgZW5hYmxlKTsKPiAgIAo+ICtpbnQgYW1kZ3B1X3R0bV9hY2Nl
c3NfbWVtb3J5KHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sIHVuc2lnbmVkIGxvbmcgb2Zm
c2V0LAo+ICsJCQkgICAgIHZvaWQgKmJ1ZiwgaW50IGxlbiwgaW50IHdyaXRlKTsKPiAgIGludCBh
bWRncHVfY29weV9idWZmZXIoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50NjRfdCBzcmNf
b2Zmc2V0LAo+ICAgCQkgICAgICAgdWludDY0X3QgZHN0X29mZnNldCwgdWludDMyX3QgYnl0ZV9j
b3VudCwKPiAgIAkJICAgICAgIHN0cnVjdCByZXNlcnZhdGlvbl9vYmplY3QgKnJlc3YsCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMKPiBpbmRleCAxOTUxZjJhYmJkYmMuLjY0
ZWU0NmVhYTA0MSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdm0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jCj4g
QEAgLTU0NCw2ICs1NDQsNzggQEAgc3RhdGljIHZvaWQgYW1kZ3B1X3ZtX3B0X25leHRfZGZzKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICAgCSAgICAgYW1kZ3B1X3ZtX3B0X2NvbnRpbnVl
X2Rmcygoc3RhcnQpLCAoZW50cnkpKTsJCQlcCj4gICAJICAgICAoZW50cnkpID0gKGN1cnNvciku
ZW50cnksIGFtZGdwdV92bV9wdF9uZXh0X2RmcygoYWRldiksICYoY3Vyc29yKSkpCj4gICAKPiAr
LyoqCj4gKyAqIGFtZGdwdV92bV9kdW1wX3B0ZSAtIGR1bXAgUFRFcyBhbG9uZyBhIHBhZ2UgdGFi
bGUgd2Fsawo+ICsgKgo+ICsgKiBAYWRldjogYW1kZ3B1IGRldmljZSBwb2ludGVyCj4gKyAqIEB2
bTogVk0gYWRkcmVzcyBzcGFjZQo+ICsgKiBAYWRkcjogdmlydHVhbCBhZGRyZXNzCj4gKyAqCj4g
KyAqIFdhbGtzIHRoZSBwYWdlIHRhYmxlIG9mIEB2bSBhdCB0aGUgZ2l2ZW4gQGFkZHIgYW5kIHBy
aW50cyB0aGUgUERFcwo+ICsgKiBhbmQgUFRFcyBhbG9uZyB0aGUgd2F5IG9uIGEgc2luZ2xlIGxp
bmUuCj4gKyAqLwo+ICt2b2lkIGFtZGdwdV92bV9kdW1wX3B0ZShzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwgc3RydWN0IGFtZGdwdV92bSAqdm0sCj4gKwkJCXVpbnQ2NF90IGFkZHIpCj4gK3sK
PiArCXN0YXRpYyBjb25zdCBjaGFyICpsZXZlbF9lbnRyeVs0XSA9IHsiUERFMiIsICJQREUxIiwg
IlBERTAiLCAiUFRFIn07Cj4gKwlzdGF0aWMgY29uc3QgY2hhciAqbGV2ZWxfYmxvY2tbNF0gPSB7
IlBEQjIiLCAiUERCMSIsICJQREIwIiwgIlBUQiJ9Owo+ICsJc3RydWN0IGFtZGdwdV92bV9wdF9j
dXJzb3IgY3Vyc29yOwo+ICsJdWludDY0X3QgcGRlX2FkZHIsIHBkZV9mbGFncywgbGFzdF9wZGU7
Cj4gKwljaGFyIGJ1ZlsxMjhdOwo+ICsJaW50IGkgPSAwOwo+ICsKPiArCWFtZGdwdV9nbWNfZ2V0
X3BkZV9mb3JfYm8odm0tPnJvb3QuYmFzZS5ibywgYWRldi0+dm1fbWFuYWdlci5yb290X2xldmVs
LAo+ICsJCQkJICAmcGRlX2FkZHIsICZwZGVfZmxhZ3MpOwo+ICsJbGFzdF9wZGUgPSBwZGVfYWRk
ciB8IHBkZV9mbGFnczsKPiArCj4gKwlhbWRncHVfdm1fcHRfc3RhcnQoYWRldiwgdm0sIGFkZHIg
Pj4gUEFHRV9TSElGVCwgJmN1cnNvcik7CgpXYWxraW5nIHRoZSBWTSBzdHJ1Y3R1cmUgd2l0aG91
dCBhIGxvY2sgaXMgZGFuZ2Vyb3VzLCBidXQgd2UgY2FuIG9ubHkgCnRha2UgdGhlIGxvY2sgaW4g
dGhlIGZhdWx0IHdvcmtlciBvbiBWZWdhMTAuCgo+ICsKPiArCWRvIHsKPiArCQl1bnNpZ25lZCBp
bnQgbWFzaywgc2hpZnQsIGlkeDsKPiArCQlzdHJ1Y3QgYW1kZ3B1X2JvICpibzsKPiArCQl1aW50
NjRfdCBwdGU7Cj4gKwo+ICsJCW1hc2sgPSBhbWRncHVfdm1fZW50cmllc19tYXNrKGFkZXYsIGN1
cnNvci5sZXZlbCk7Cj4gKwkJc2hpZnQgPSBhbWRncHVfdm1fbGV2ZWxfc2hpZnQoYWRldiwgY3Vy
c29yLmxldmVsKTsKPiArCQlpZHggPSAoY3Vyc29yLnBmbiA+PiBzaGlmdCkgJiBtYXNrOwo+ICsK
PiArCQlibyA9IGN1cnNvci5lbnRyeS0+YmFzZS5ibzsKPiArCQlpZiAoYm8pIHsKPiArCQkJLyog
RmxhZyBkaXNjcmVwYW5jeSBiZXR3ZWVuIHByZXZpb3VzIGxldmVsIFBERQo+ICsJCQkgKiBhbmQg
dGhlIGFjdHVhbCBhZGRyZXNzIG9mIHRoaXMgUFRCIG9yIFBEQi4KPiArCQkJICovCj4gKwkJCWFt
ZGdwdV9nbWNfZ2V0X3BkZV9mb3JfYm8oYm8sIGN1cnNvci5sZXZlbCwKPiArCQkJCQkJICAmcGRl
X2FkZHIsICZwZGVfZmxhZ3MpOwo+ICsJCQlpZiAoKHBkZV9hZGRyIHwgcGRlX2ZsYWdzKSAhPSBs
YXN0X3BkZSkKPiArCQkJCWkgKz0gc25wcmludGYoYnVmICsgaSwgc2l6ZW9mKGJ1ZikgLSBpLCAi
ISIpOwo+ICsKPiArCQkJYW1kZ3B1X3R0bV9hY2Nlc3NfbWVtb3J5KCZiby0+dGJvLCBpZHggKiBz
aXplb2YocHRlKSwKPiArCQkJCQkJICZwdGUsIHNpemVvZihwdGUpLCBmYWxzZSk7Cj4gKwkJCWkg
Kz0gc25wcmludGYoYnVmICsgaSwgc2l6ZW9mKGJ1ZikgLSBpLAo+ICsJCQkJICAgICAgIiVzWyVk
XT0weCVsbHggIiwKPiArCQkJCSAgICAgIGxldmVsX2VudHJ5W2N1cnNvci5sZXZlbF0sIGlkeCwg
cHRlKTsKPiArCQkJbGFzdF9wZGUgPSBwdGU7Cj4gKwkJfSBlbHNlIHsKPiArCQkJLyogRmxhZyBk
aXNjcmVwYW5jeSBpZiBwcmV2aW91cyBsZXZlbCBQREUgaGFkCj4gKwkJCSAqIGEgdmFsaWQgZW50
cnkgYnV0IHRoZXJlIGlzIG5vIFBUQiBvciBQREIgQk8uCj4gKwkJCSAqLwo+ICsJCQlpZiAoKGxh
c3RfcGRlICYgQU1ER1BVX1BURV9WQUxJRCkgJiYKPiArCQkJICAgICEobGFzdF9wZGUgJiBBTURH
UFVfUERFX1BURSkpCj4gKwkJCQlpICs9IHNucHJpbnRmKGJ1ZiArIGksIHNpemVvZihidWYpIC0g
aSwgIiEiKTsKPiArCQkJaSArPSBzbnByaW50ZihidWYgKyBpLCBzaXplb2YoYnVmKSAtIGksCj4g
KwkJCQkgICAgICAibm8gJXMgIiwgbGV2ZWxfYmxvY2tbY3Vyc29yLmxldmVsXSk7Cj4gKwkJCWxh
c3RfcGRlID0gMDsKPiArCQl9Cj4gKwo+ICsJCSsrY3Vyc29yLmxldmVsOwo+ICsJCWN1cnNvci5w
YXJlbnQgPSBjdXJzb3IuZW50cnk7Cj4gKwkJaWYgKCFjdXJzb3IuZW50cnktPmVudHJpZXMpCj4g
KwkJCWJyZWFrOwo+ICsJCWN1cnNvci5lbnRyeSA9ICZjdXJzb3IuZW50cnktPmVudHJpZXNbaWR4
XTsKPiArCX0gd2hpbGUgKGN1cnNvci5lbnRyeSk7Cj4gKwlkZXZfZXJyKGFkZXYtPmRldiwgIiVz
IiwgYnVmKTsKPiArfQo+ICsKPiAgIC8qKgo+ICAgICogYW1kZ3B1X3ZtX2dldF9wZF9ibyAtIGFk
ZCB0aGUgVk0gUEQgdG8gYSB2YWxpZGF0aW9uIGxpc3QKPiAgICAqCj4gQEAgLTMwODEsOCArMzE1
Myw5IEBAIGludCBhbWRncHVfdm1faW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAq
ZGF0YSwgc3RydWN0IGRybV9maWxlICpmaWxwKQo+ICAgICogQHBhc2lkOiBQQVNJRCBpZGVudGlm
aWVyIGZvciBWTQo+ICAgICogQHRhc2tfaW5mbzogdGFza19pbmZvIHRvIGZpbGwuCj4gICAgKi8K
PiAtdm9pZCBhbWRncHVfdm1fZ2V0X3Rhc2tfaW5mbyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
diwgdW5zaWduZWQgaW50IHBhc2lkLAo+IC0JCQkgc3RydWN0IGFtZGdwdV90YXNrX2luZm8gKnRh
c2tfaW5mbykKPiArc3RydWN0IGFtZGdwdV92bSAqYW1kZ3B1X3ZtX2dldF90YXNrX2luZm8oc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gKwkJCQkJICB1bnNpZ25lZCBpbnQgcGFzaWQsCj4g
KwkJCQkJICBzdHJ1Y3QgYW1kZ3B1X3Rhc2tfaW5mbyAqdGFza19pbmZvKQo+ICAgewo+ICAgCXN0
cnVjdCBhbWRncHVfdm0gKnZtOwo+ICAgCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4gQEAgLTMwOTQs
NiArMzE2Nyw4IEBAIHZvaWQgYW1kZ3B1X3ZtX2dldF90YXNrX2luZm8oc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsIHVuc2lnbmVkIGludCBwYXNpZCwKPiAgIAkJKnRhc2tfaW5mbyA9IHZtLT50
YXNrX2luZm87Cj4gICAKPiAgIAlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZhZGV2LT52bV9tYW5h
Z2VyLnBhc2lkX2xvY2ssIGZsYWdzKTsKPiArCj4gKwlyZXR1cm4gdm07CgpUaGlzIGlzIGRhbmdl
cm91cyBhcyB3ZWxsIHdoZW4gd2UgYXJlIGluIHRoZSBpbnRlcnJ1cHQgaGFuZGxlci4KCkFzIHNv
b24gYXMgdGhlIHNwaW5sb2NrIGlzIGRyb3BwZWQgdGhlIFZNIHN0cnVjdHVyZSBjYW4gYmUgZnJl
ZWQgYnkgCmFub3RoZXIgdGhyZWFkLgoKQ2hyaXN0aWFuLgoKCj4gICB9Cj4gICAKPiAgIC8qKgo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uaCBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5oCj4gaW5kZXggNDg5YTE2MmNhNjIw
Li42YThiODMzZDE4MGUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3ZtLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0u
aAo+IEBAIC0zNDgsNiArMzQ4LDggQEAgaW50IGFtZGdwdV92bV9pbml0KHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LCBzdHJ1Y3QgYW1kZ3B1X3ZtICp2bSwKPiAgIGludCBhbWRncHVfdm1fbWFr
ZV9jb21wdXRlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgYW1kZ3B1X3ZtICp2
bSwgdW5zaWduZWQgaW50IHBhc2lkKTsKPiAgIHZvaWQgYW1kZ3B1X3ZtX3JlbGVhc2VfY29tcHV0
ZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgc3RydWN0IGFtZGdwdV92bSAqdm0pOwo+ICAg
dm9pZCBhbWRncHVfdm1fZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgc3RydWN0IGFt
ZGdwdV92bSAqdm0pOwo+ICt2b2lkIGFtZGdwdV92bV9kdW1wX3B0ZShzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwgc3RydWN0IGFtZGdwdV92bSAqdm0sCj4gKwkJCXVpbnQ2NF90IGFkZHIpOwo+
ICAgdm9pZCBhbWRncHVfdm1fZ2V0X3BkX2JvKHN0cnVjdCBhbWRncHVfdm0gKnZtLAo+ICAgCQkJ
IHN0cnVjdCBsaXN0X2hlYWQgKnZhbGlkYXRlZCwKPiAgIAkJCSBzdHJ1Y3QgYW1kZ3B1X2JvX2xp
c3RfZW50cnkgKmVudHJ5KTsKPiBAQCAtNDAxLDggKzQwMyw5IEBAIGJvb2wgYW1kZ3B1X3ZtX25l
ZWRfcGlwZWxpbmVfc3luYyhzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsCj4gICAJCQkJICBzdHJ1
Y3QgYW1kZ3B1X2pvYiAqam9iKTsKPiAgIHZvaWQgYW1kZ3B1X3ZtX2NoZWNrX2NvbXB1dGVfYnVn
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKPiAgIAo+IC12b2lkIGFtZGdwdV92bV9nZXRf
dGFza19pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1bnNpZ25lZCBpbnQgcGFzaWQs
Cj4gLQkJCSAgICAgc3RydWN0IGFtZGdwdV90YXNrX2luZm8gKnRhc2tfaW5mbyk7Cj4gK3N0cnVj
dCBhbWRncHVfdm0gKmFtZGdwdV92bV9nZXRfdGFza19pbmZvKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2LAo+ICsJCQkJCSAgdW5zaWduZWQgaW50IHBhc2lkLAo+ICsJCQkJCSAgc3RydWN0IGFt
ZGdwdV90YXNrX2luZm8gKnRhc2tfaW5mbyk7Cj4gICAKPiAgIHZvaWQgYW1kZ3B1X3ZtX3NldF90
YXNrX2luZm8oc3RydWN0IGFtZGdwdV92bSAqdm0pOwo+ICAgCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OF8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9nbWNfdjhfMC5jCj4gaW5kZXggOGJmMmJhMzEwZmQ5Li4xODIwN2VjZmQ4NWMgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y4XzAuYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2dtY192OF8wLmMKPiBAQCAtMTQ0OCw5ICsxNDQ4LDEw
IEBAIHN0YXRpYyBpbnQgZ21jX3Y4XzBfcHJvY2Vzc19pbnRlcnJ1cHQoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsCj4gICAKPiAgIAlpZiAocHJpbnRrX3JhdGVsaW1pdCgpKSB7Cj4gICAJCXN0
cnVjdCBhbWRncHVfdGFza19pbmZvIHRhc2tfaW5mbzsKPiArCQlzdHJ1Y3QgYW1kZ3B1X3ZtICp2
bTsKPiAgIAo+ICAgCQltZW1zZXQoJnRhc2tfaW5mbywgMCwgc2l6ZW9mKHN0cnVjdCBhbWRncHVf
dGFza19pbmZvKSk7Cj4gLQkJYW1kZ3B1X3ZtX2dldF90YXNrX2luZm8oYWRldiwgZW50cnktPnBh
c2lkLCAmdGFza19pbmZvKTsKPiArCQl2bSA9IGFtZGdwdV92bV9nZXRfdGFza19pbmZvKGFkZXYs
IGVudHJ5LT5wYXNpZCwgJnRhc2tfaW5mbyk7Cj4gICAKPiAgIAkJZGV2X2VycihhZGV2LT5kZXYs
ICJHUFUgZmF1bHQgZGV0ZWN0ZWQ6ICVkIDB4JTA4eCBmb3IgcHJvY2VzcyAlcyBwaWQgJWQgdGhy
ZWFkICVzIHBpZCAlZFxuIiwKPiAgIAkJCWVudHJ5LT5zcmNfaWQsIGVudHJ5LT5zcmNfZGF0YVsw
XSwgdGFza19pbmZvLnByb2Nlc3NfbmFtZSwKPiBAQCAtMTQ2MSw2ICsxNDYyLDkgQEAgc3RhdGlj
IGludCBnbWNfdjhfMF9wcm9jZXNzX2ludGVycnVwdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
diwKPiAgIAkJCXN0YXR1cyk7Cj4gICAJCWdtY192OF8wX3ZtX2RlY29kZV9mYXVsdChhZGV2LCBz
dGF0dXMsIGFkZHIsIG1jX2NsaWVudCwKPiAgIAkJCQkJIGVudHJ5LT5wYXNpZCk7Cj4gKwkJaWYg
KHZtKQo+ICsJCQlhbWRncHVfdm1fZHVtcF9wdGUoYWRldiwgdm0sICh1aW50NjRfdClhZGRyCj4g
KwkJCQkJICAgPDwgQU1ER1BVX0dQVV9QQUdFX1NISUZUKTsKPiAgIAl9Cj4gICAKPiAgIAl2bWlk
ID0gUkVHX0dFVF9GSUVMRChzdGF0dXMsIFZNX0NPTlRFWFQxX1BST1RFQ1RJT05fRkFVTFRfU1RB
VFVTLAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlfMC5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZ21jX3Y5XzAuYwo+IGluZGV4IGJkNWQzNjk0
NDQ4MS4uZjI3ZTg4YWY0MDE2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2dtY192OV8wLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9nbWNfdjlf
MC5jCj4gQEAgLTMzMSw5ICszMzEsMTAgQEAgc3RhdGljIGludCBnbWNfdjlfMF9wcm9jZXNzX2lu
dGVycnVwdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgIAo+ICAgCWlmIChwcmludGtf
cmF0ZWxpbWl0KCkpIHsKPiAgIAkJc3RydWN0IGFtZGdwdV90YXNrX2luZm8gdGFza19pbmZvOwo+
ICsJCXN0cnVjdCBhbWRncHVfdm0gKnZtOwo+ICAgCj4gICAJCW1lbXNldCgmdGFza19pbmZvLCAw
LCBzaXplb2Yoc3RydWN0IGFtZGdwdV90YXNrX2luZm8pKTsKPiAtCQlhbWRncHVfdm1fZ2V0X3Rh
c2tfaW5mbyhhZGV2LCBlbnRyeS0+cGFzaWQsICZ0YXNrX2luZm8pOwo+ICsJCXZtID0gYW1kZ3B1
X3ZtX2dldF90YXNrX2luZm8oYWRldiwgZW50cnktPnBhc2lkLCAmdGFza19pbmZvKTsKPiAgIAo+
ICAgCQlkZXZfZXJyKGFkZXYtPmRldiwKPiAgIAkJCSJbJXNdICVzIHBhZ2UgZmF1bHQgKHNyY19p
ZDoldSByaW5nOiV1IHZtaWQ6JXUgIgo+IEBAIC0zNDksNiArMzUwLDggQEAgc3RhdGljIGludCBn
bWNfdjlfMF9wcm9jZXNzX2ludGVycnVwdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAg
IAkJCWRldl9lcnIoYWRldi0+ZGV2LAo+ICAgCQkJCSJWTV9MMl9QUk9URUNUSU9OX0ZBVUxUX1NU
QVRVUzoweCUwOFhcbiIsCj4gICAJCQkJc3RhdHVzKTsKPiArCQlpZiAodm0pCj4gKwkJCWFtZGdw
dV92bV9kdW1wX3B0ZShhZGV2LCB2bSwgYWRkcik7Cj4gICAJfQo+ICAgCj4gICAJcmV0dXJuIDA7
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4
IG1haWxpbmcgbGlzdAphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
