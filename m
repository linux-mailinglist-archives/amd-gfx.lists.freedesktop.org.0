Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 225FFD380F
	for <lists+amd-gfx@lfdr.de>; Fri, 11 Oct 2019 05:51:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 948236EB9A;
	Fri, 11 Oct 2019 03:51:18 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM03-DM3-obe.outbound.protection.outlook.com
 (mail-eopbgr800071.outbound.protection.outlook.com [40.107.80.71])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CA70B6EB9A
 for <amd-gfx@lists.freedesktop.org>; Fri, 11 Oct 2019 03:51:16 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=FjDU/f0cGIQjQv33Usoj+p5hGjVXVSWFTnKGM9CbSve3/79oxk9z8rqSmN1HAEbeQY5YB5n2ynVlNKaMOlkBDfEC407bNTNgMK2QzkmVivuKrhrKG5D072UGdhqhy8hTdcvlJDpn1f5i+zUuJSZN840to0XpkmSQaQaz2mpa49fpj9FqIdrgmpcBoQcROVigty5zRI4vd4e8hv7PRC9V93CnM/iwlCA3jPw/W2djRM9+3i5rpuViiGlu2KMgLI+s2ZoM307o8K2y7KlaNScoivzNt58yJ8HUJAjyZOVaa+eRQb9Lst+PyMvQnzImwQ1yTF/Q9O9yMtoXVZmtgsxcYg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Ia9yZpLQjf3PUfUakIADyqyyB4IX475Pqs9ZiV+Gj/I=;
 b=c2pjQ25yhMefXpda6ipoAykwZlaZ9x1hPbKzaNhrZr+FYv1daBjenu2KHOJXxUu2QGAvZJXq1dZVlKMeDl2AxYR1ZHCo93b+8x/VP5qg2FVS/ha4Bkmqq6D3vYtUwyzba4P2gEMFNmFFrCGokUm59UCqRBFb5tcEMsI5NXPc84rQA3LC0EkFBN2RMJwL+LAb4UbLodK4qj4v8uHnNZRncqL81o1GOJ6FtcF1NqbgocjF9/KEo9u9yT6cdYImFuhKVrpoZsocH12FvUOdhZND1iA/Vwj4qEWpHqjLwx3U1SKJHuUeXUj7OBbsYjTtoWD19tsBKWil2WCqFzo/rTioiw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from BN4PR12CA0004.namprd12.prod.outlook.com (2603:10b6:403:2::14)
 by MWHPR1201MB0239.namprd12.prod.outlook.com (2603:10b6:301:50::15) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2347.18; Fri, 11 Oct
 2019 03:51:15 +0000
Received: from BY2NAM03FT041.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e4a::201) by BN4PR12CA0004.outlook.office365.com
 (2603:10b6:403:2::14) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id 15.20.2347.16 via Frontend
 Transport; Fri, 11 Oct 2019 03:51:14 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV01.amd.com (165.204.84.17) by
 BY2NAM03FT041.mail.protection.outlook.com (10.152.85.246) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2327.20 via Frontend Transport; Fri, 11 Oct 2019 03:51:13 +0000
Received: from rico-code.amd.com (10.180.168.240) by SATLEXCHOV01.amd.com
 (10.181.40.71) with Microsoft SMTP Server id 14.3.389.1; Thu, 10 Oct 2019
 22:51:12 -0500
From: Tianci Yin <tianci.yin@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH 8/8] drm/amdgpu/psp: add psp memory training implementation
Date: Fri, 11 Oct 2019 11:50:33 +0800
Message-ID: <20191011035033.24935-8-tianci.yin@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191011035033.24935-1-tianci.yin@amd.com>
References: <20191011035033.24935-1-tianci.yin@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(376002)(346002)(396003)(136003)(39860400002)(428003)(189003)(199004)(48376002)(76176011)(446003)(4326008)(486006)(47776003)(476003)(126002)(426003)(6666004)(356004)(5660300002)(86362001)(7696005)(11346002)(44832011)(2616005)(8936002)(336012)(50466002)(50226002)(36756003)(81166006)(81156014)(14444005)(8676002)(54906003)(53416004)(305945005)(478600001)(70586007)(70206006)(186003)(1076003)(51416003)(26005)(6916009)(16586007)(2351001)(2906002)(316002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MWHPR1201MB0239; H:SATLEXCHOV01.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 974534fc-643f-4c35-2b62-08d74dfe4390
X-MS-TrafficTypeDiagnostic: MWHPR1201MB0239:
X-Microsoft-Antispam-PRVS: <MWHPR1201MB02393F671F9355A0D18F651B95970@MWHPR1201MB0239.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:751;
X-Forefront-PRVS: 0187F3EA14
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: yp4o/Br7JGS4D529MK+JV9NCN09Zo3wb/FwC6ekahhxl9m7Lyjg/3cr3Dgwlribiz7MN2igkvFyITMwzAneCHrM7mwniS2Q5DLMmoagCg3kDReg+Yb4M7eBVfa9vza77oWxdNgp3gH/Bzk4aFTXFyg2bhSM5xSxaYx457KRKwHlFNSen7TVb8+HhoWAdH6YES7dA3elG7AdqclCvr9bKGssNQSG9z50KrFDGA7r5Pzcl9bopQv4RGqr+4GxokpPwtK85roD0R9gFM4BqHKd28LvHk9CbNH61HVaFF7qar2TVHdfW2mY+jr4ahvOewH3tqszhmpi2PIdD9187JoXxx+auCZ0W//FAKwM8Xb9lEbwJYsZrQH/dMQkhueSrv6yPX4plRBEeRxxPVzwVRpqnz0P62bxZE+J6geiEcrlWUts=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 11 Oct 2019 03:51:13.9099 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 974534fc-643f-4c35-2b62-08d74dfe4390
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV01.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MWHPR1201MB0239
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Ia9yZpLQjf3PUfUakIADyqyyB4IX475Pqs9ZiV+Gj/I=;
 b=in5H9DxA1BUNylAbcJY/cfTr+VpyiKkAqHSOhXlymvtfoOIip/PTZV2ZE7PyHAmEPoH3Y4wGRb9m2T+JLl266TGl+ZAg1YVYafHhVM0c7x44lgI7anjzsjKHImheOTH5vsB8udxaIxKWBhQ+ICM1RKKBSMwnyBu08Mor7bdB6q0=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Deucher Alexander <Alexander.Deucher@amd.com>,
 Tuikov Luben <Luben.Tuikov@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Tianci Yin <tianci.yin@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogIlRpYW5jaS5ZaW4iIDx0aWFuY2kueWluQGFtZC5jb20+CgphZGQgbWVtb3J5IHRyYWlu
aW5nIGltcGxlbWVudGF0aW9uIGNvZGUgdG8gc2F2ZSByZXN1bWUgdGltZS4KCkNoYW5nZS1JZDog
STYyNTc5NGE3ODBiMTFkODI0YWI1N2VmMzljYzMzYjg3MmM2ZGM2YzkKUmV2aWV3ZWQtYnk6IEFs
ZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNvbT4KU2lnbmVkLW9mZi1ieTogVGlh
bmNpLllpbiA8dGlhbmNpLnlpbkBhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdS5oICAgICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfZHJ2LmMgfCAgIDkgKysKIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTFfMC5j
ICB8IDE3MSArKysrKysrKysrKysrKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwgMTgxIGlu
c2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCmluZGV4IGUzZDcxNWMz
MWFjOS4uMDNjNWMxOGJiNTFlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaApAQCAt
MTUxLDYgKzE1MSw3IEBAIGV4dGVybiB1aW50IGFtZGdwdV9zZG1hX3BoYXNlX3F1YW50dW07CiBl
eHRlcm4gY2hhciAqYW1kZ3B1X2Rpc2FibGVfY3U7CiBleHRlcm4gY2hhciAqYW1kZ3B1X3ZpcnR1
YWxfZGlzcGxheTsKIGV4dGVybiB1aW50IGFtZGdwdV9wcF9mZWF0dXJlX21hc2s7CitleHRlcm4g
dWludCBhbWRncHVfZm9yY2VfbG9uZ190cmFpbmluZzsKIGV4dGVybiBpbnQgYW1kZ3B1X2pvYl9o
YW5nX2xpbWl0OwogZXh0ZXJuIGludCBhbWRncHVfbGJwdzsKIGV4dGVybiBpbnQgYW1kZ3B1X2Nv
bXB1dGVfbXVsdGlwaXBlOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rydi5jCmlu
ZGV4IDU5ODViZDc5MjE2ZC4uZjAzZGNjNWQxODVkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2Rydi5jCkBAIC0xMjcsNiArMTI3LDcgQEAgY2hhciAqYW1kZ3B1X2Rpc2FibGVf
Y3UgPSBOVUxMOwogY2hhciAqYW1kZ3B1X3ZpcnR1YWxfZGlzcGxheSA9IE5VTEw7CiAvKiBPdmVy
RHJpdmUoYml0IDE0KSBkaXNhYmxlZCBieSBkZWZhdWx0Ki8KIHVpbnQgYW1kZ3B1X3BwX2ZlYXR1
cmVfbWFzayA9IDB4ZmZmZmJmZmY7Cit1aW50IGFtZGdwdV9mb3JjZV9sb25nX3RyYWluaW5nID0g
MDsKIGludCBhbWRncHVfam9iX2hhbmdfbGltaXQgPSAwOwogaW50IGFtZGdwdV9sYnB3ID0gLTE7
CiBpbnQgYW1kZ3B1X2NvbXB1dGVfbXVsdGlwaXBlID0gLTE7CkBAIC0zOTAsNiArMzkxLDE0IEBA
IG1vZHVsZV9wYXJhbV9uYW1lZChzY2hlZF9od19zdWJtaXNzaW9uLCBhbWRncHVfc2NoZWRfaHdf
c3VibWlzc2lvbiwgaW50LCAwNDQ0KTsKIE1PRFVMRV9QQVJNX0RFU0MocHBmZWF0dXJlbWFzaywg
ImFsbCBwb3dlciBmZWF0dXJlcyBlbmFibGVkIChkZWZhdWx0KSkiKTsKIG1vZHVsZV9wYXJhbV9u
YW1lZChwcGZlYXR1cmVtYXNrLCBhbWRncHVfcHBfZmVhdHVyZV9tYXNrLCB1aW50LCAwNDQ0KTsK
IAorLyoqCisgKiBET0M6IGZvcmNlbG9uZ3RyYWluaW5nICh1aW50KQorICogRm9yY2UgbG9uZyBt
ZW1vcnkgdHJhaW5pbmcgaW4gcmVzdW1lLgorICogVGhlIGRlZmF1bHQgaXMgemVybywgaW5kaWNh
dGVzIHNob3J0IHRyYWluaW5nIGluIHJlc3VtZS4KKyAqLworTU9EVUxFX1BBUk1fREVTQyhmb3Jj
ZWxvbmd0cmFpbmluZywgImZvcmNlIG1lbW9yeSBsb25nIHRyYWluaW5nIik7Cittb2R1bGVfcGFy
YW1fbmFtZWQoZm9yY2Vsb25ndHJhaW5pbmcsIGFtZGdwdV9mb3JjZV9sb25nX3RyYWluaW5nLCB1
aW50LCAwNDQ0KTsKKwogLyoqCiAgKiBET0M6IHBjaWVfZ2VuX2NhcCAodWludCkKICAqIE92ZXJy
aWRlIFBDSUUgZ2VuIHNwZWVkIGNhcGFiaWxpdGllcy4gU2VlIHRoZSBDQUlMIGZsYWdzIGluIGRy
aXZlcnMvZ3B1L2RybS9hbWQvaW5jbHVkZS9hbWRfcGNpZS5oLgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMV8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9wc3BfdjExXzAuYwppbmRleCAyYmEwZjY4Y2VkMTAuLjA3NGYyM2M4NDZjYiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMV8wLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMV8wLmMKQEAgLTkwMiw2ICs5MDIsMTc0IEBAIHN0
YXRpYyBpbnQgcHNwX3YxMV8wX3JsY19hdXRvbG9hZF9zdGFydChzdHJ1Y3QgcHNwX2NvbnRleHQg
KnBzcCkKIAlyZXR1cm4gcHNwX3JsY19hdXRvbG9hZF9zdGFydChwc3ApOwogfQogCitzdGF0aWMg
aW50IHBzcF92MTFfMF9tZW1vcnlfdHJhaW5pbmdfc2VuZF9tc2coc3RydWN0IHBzcF9jb250ZXh0
ICpwc3AsIGludCBtc2cpCit7CisJaW50IHJldCA9IDA7CisJaW50IGkgPSAwOworCXVpbnQzMl90
IGRhdGFfMzIgPSAwOworCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gcHNwLT5hZGV2Owor
CisJZGF0YV8zMiA9IChwc3AtPm1lbV90cmFpbl9jdHguYzJwX3RyYWluX2RhdGFfb2Zmc2V0ID4+
IDIwKTsKKwlXUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzM2LCBkYXRhXzMy
KTsKKwlXUkVHMzJfU09DMTUoTVAwLCAwLCBtbU1QMF9TTU5fQzJQTVNHXzM1LCBtc2cpOworCisJ
LyptYXggNXMqLworCXdoaWxlIChpIDwgNTApIHsKKwkJcmV0ID0gcHNwX3dhaXRfZm9yKHBzcCwg
U09DMTVfUkVHX09GRlNFVChNUDAsIDAsIG1tTVAwX1NNTl9DMlBNU0dfMzUpLAorCQkJCSAgIDB4
ODAwMDAwMDAsIDB4ODAwMDAwMDAsIGZhbHNlKTsKKwkJaWYgKHJldCA9PSAwKQorCQkJYnJlYWs7
CisJCWkrKzsKKwl9CisJRFJNX0RFQlVHKCIlcyB0cmFpbmluZyAlcywgY29zdCAlZCAqICVkbXMu
XG4iLAorCQkgIChtc2cgPT0gUFNQX0JMX19EUkFNX1NIT1JUX1RSQUlOKSA/ICJzaG9ydCIgOiAi
bG9uZyIsCisJCSAgKHJldCA9PSAwKSA/ICJzdWNjZWVkIiA6ICJmYWlsZWQiLAorCQkgIGksIGFk
ZXYtPnVzZWNfdGltZW91dC8xMDAwKTsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IHBz
cF92MTFfMF9tZW1vcnlfdHJhaW5pbmdfZmluaShzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCkKK3sK
KwlpbnQgcmV0ID0gMDsKKwlzdHJ1Y3QgcHNwX21lbW9yeV90cmFpbmluZ19jb250ZXh0ICpjdHgg
PSAmcHNwLT5tZW1fdHJhaW5fY3R4OworCisJY3R4LT5pbml0ID0gUFNQX01FTV9UUkFJTl9OT1Rf
U1VQUE9SVDsKKwlpZihjdHgtPnN5c19jYWNoZSkgeworCQlrZnJlZShjdHgtPnN5c19jYWNoZSk7
CisJCWN0eC0+c3lzX2NhY2hlID0gTlVMTDsKKwl9CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0
aWMgaW50IHBzcF92MTFfMF9tZW1vcnlfdHJhaW5pbmdfaW5pdChzdHJ1Y3QgcHNwX2NvbnRleHQg
KnBzcCkKK3sKKwlpbnQgcmV0ID0gMDsKKwlzdHJ1Y3QgcHNwX21lbW9yeV90cmFpbmluZ19jb250
ZXh0ICpjdHggPSAmcHNwLT5tZW1fdHJhaW5fY3R4OworCisJaWYoY3R4LT5pbml0ICE9IFBTUF9N
RU1fVFJBSU5fUkVTRVJWRV9TVUNDRVNTKSB7CisJCURSTV9ERUJVRygibWVtb3J5IHRyYWluaW5n
IGRvZXMgbm90IHN1cHBvcnQhXG4iKTsKKwkJcmV0dXJuIDA7CisJfQorCisJY3R4LT5zeXNfY2Fj
aGUgPSBremFsbG9jKGN0eC0+dHJhaW5fZGF0YV9zaXplLCBHRlBfS0VSTkVMKTsKKwlpZihjdHgt
PnN5c19jYWNoZSA9PSBOVUxMKSB7CisJCURSTV9FUlJPUigiYWxsb2MgbWVtX3RyYWluX2N0eC5z
eXNfY2FjaGUgZmFpbGVkKCVkKSFcbiIsIHJldCk7CisJCXJldCA9IC1FTk9NRU07CisJCWdvdG8g
ZXJyX291dDsKKwl9CisKKwlEUk1fREVCVUcoInRyYWluX2RhdGFfc2l6ZTolbGx4LHAyY190cmFp
bl9kYXRhX29mZnNldDolbGx4LGMycF90cmFpbl9kYXRhX29mZnNldDolbGx4LlxuIiwKKwkJICBj
dHgtPnRyYWluX2RhdGFfc2l6ZSwKKwkJICBjdHgtPnAyY190cmFpbl9kYXRhX29mZnNldCwKKwkJ
ICBjdHgtPmMycF90cmFpbl9kYXRhX29mZnNldCk7CisJY3R4LT5pbml0ID0gUFNQX01FTV9UUkFJ
Tl9JTklUX1NVQ0NFU1M7CisJcmV0dXJuIDA7CisKK2Vycl9vdXQ6CisJcHNwX3YxMV8wX21lbW9y
eV90cmFpbmluZ19maW5pKHBzcCk7CisJcmV0dXJuIHJldDsKK30KKworLyoKKyAqIHNhdmUgYW5k
IHJlc3RvcmUgcHJvY2VzCisgKi8KK3N0YXRpYyBpbnQgcHNwX3YxMV8wX21lbW9yeV90cmFpbmlu
ZyhzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwgdWludDMyX3Qgb3BzKQoreworCWludCByZXQgPSAw
OworCXVpbnQzMl90IHAyY19oZWFkZXJbNF07CisJc3RydWN0IHBzcF9tZW1vcnlfdHJhaW5pbmdf
Y29udGV4dCAqY3R4ID0gJnBzcC0+bWVtX3RyYWluX2N0eDsKKwl1aW50MzJfdCAqcGNhY2hlID0g
KHVpbnQzMl90KiljdHgtPnN5c19jYWNoZTsKKworCWlmIChjdHgtPmluaXQgPT0gUFNQX01FTV9U
UkFJTl9OT1RfU1VQUE9SVCkgeworCQlEUk1fREVCVUcoIk1lbW9yeSB0cmFpbmluZyBkb2VzIG5v
dCBzdXBwb3J0LlxuIik7CisJCXJldHVybiAwOworCX0gZWxzZSBpZiAoY3R4LT5pbml0ICE9IFBT
UF9NRU1fVFJBSU5fSU5JVF9TVUNDRVNTKSB7CisJCURSTV9FUlJPUigiUGxlYXNlIGNoZWNrIGlu
aXRpYWxpemF0aW9uIGZhaWx1cmUuXG4iKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJaWYg
KHBzcF92MTFfMF9pc19zb3NfYWxpdmUocHNwKSkgeworCQlEUk1fREVCVUcoInNvcyBpcyBhbGl2
ZSwgc2tpcCBtZW1vcnkgdHJhaW5pbmcuXG4iKTsKKwkJcmV0dXJuIDA7CisJfQorCisJcmV0ID0g
YW1kZ3B1X2RldmljZV92cmFtX2FjY2Vzcyhwc3AtPmFkZXYsIGN0eC0+cDJjX3RyYWluX2RhdGFf
b2Zmc2V0LCBwMmNfaGVhZGVyLCBzaXplb2YocDJjX2hlYWRlciksIGZhbHNlKTsKKwlpZiAocmV0
KSB7CisJCURSTV9FUlJPUigicmVhZCBwMmMgaGVhZGVyIGZhaWxlZC5cbiIpOworCQlyZXR1cm4g
cmV0OworCX0KKwlEUk1fREVCVUcoInN5c19jYWNoZVslMDh4LCUwOHgsJTA4eCwlMDh4XSBwMmNf
aGVhZGVyWyUwOHgsJTA4eCwlMDh4LCUwOHhdXG4iLAorCQkgIHBjYWNoZVswXSwgcGNhY2hlWzFd
LCBwY2FjaGVbMl0sIHBjYWNoZVszXSwKKwkJICBwMmNfaGVhZGVyWzBdLCBwMmNfaGVhZGVyWzFd
LCBwMmNfaGVhZGVyWzJdLCBwMmNfaGVhZGVyWzNdKTsKKworCWlmIChvcHMgJiBQU1BfTUVNX1RS
QUlOX1NFTkRfU0hPUlRfTVNHKSB7CisJCURSTV9ERUJVRygic2hvcnQgdHJhaW5pbmcgZGVwZW5k
IG9uIHJlc3RvcmUuXG4iKTsKKwkJb3BzIHw9IFBTUF9NRU1fVFJBSU5fUkVTVE9SRTsKKwl9CisK
KwlpZiAoKG9wcyAmIFBTUF9NRU1fVFJBSU5fUkVTVE9SRSkgJiYKKwkgICAgcGNhY2hlWzBdICE9
IE1FTV9UUkFJTl9TWVNURU1fU0lHTkFUVVJFKSB7CisJCURSTV9ERUJVRygic3lzX2NhY2hlWzBd
IGlzIGludmFsaWQsIHJlc3RvcmUgZGVwZW5kIG9uIHNhdmUuXG4iKTsKKwkJb3BzIHw9IFBTUF9N
RU1fVFJBSU5fU0FWRTsKKwl9CisKKwlpZiAocDJjX2hlYWRlclswXSA9PSBNRU1fVFJBSU5fU1lT
VEVNX1NJR05BVFVSRSAmJgorCSAgICAhKHBjYWNoZVswXSA9PSBNRU1fVFJBSU5fU1lTVEVNX1NJ
R05BVFVSRSAmJgorCSAgICAgIHBjYWNoZVszXSA9PSBwMmNfaGVhZGVyWzNdKSkgeworCQlEUk1f
REVCVUcoInN5c19jYWNoZSBpcyBpbnZhbGlkIG9yIG91dC1vZi1kYXRlLCBuZWVkIHNhdmUgdHJh
aW5pbmcgZGF0YSB0byBzeXNfY2FjaGUuXG4iKTsKKwkJb3BzIHw9IFBTUF9NRU1fVFJBSU5fU0FW
RTsKKwl9CisKKwlpZiAoKG9wcyAmIFBTUF9NRU1fVFJBSU5fU0FWRSkgJiYKKwkgICAgcDJjX2hl
YWRlclswXSAhPSBNRU1fVFJBSU5fU1lTVEVNX1NJR05BVFVSRSkgeworCQlEUk1fREVCVUcoInAy
Y19oZWFkZXJbMF0gaXMgaW52YWxpZCwgc2F2ZSBkZXBlbmQgb24gbG9uZyB0cmFpbmluZy5cbiIp
OworCQlvcHMgfD0gUFNQX01FTV9UUkFJTl9TRU5EX0xPTkdfTVNHOworCX0KKworCWlmIChvcHMg
JiBQU1BfTUVNX1RSQUlOX1NFTkRfTE9OR19NU0cpIHsKKwkJb3BzICY9IH5QU1BfTUVNX1RSQUlO
X1NFTkRfU0hPUlRfTVNHOworCQlvcHMgfD0gUFNQX01FTV9UUkFJTl9TQVZFOworCX0KKworCURS
TV9ERUJVRygibWVtIHRyYWluaW5nIG9wczoleC5cbiIsIG9wcyk7CisKKwlpZiAob3BzICYgUFNQ
X01FTV9UUkFJTl9TRU5EX0xPTkdfTVNHKSB7CisJCXJldCA9IHBzcF92MTFfMF9tZW1vcnlfdHJh
aW5pbmdfc2VuZF9tc2cocHNwLCBQU1BfQkxfX0RSQU1fTE9OR19UUkFJTik7CisJCWlmIChyZXQp
IHsKKwkJCURSTV9FUlJPUigic2VuZCBsb25nIHRyYWluaW5nIG1zZyBmYWlsZWQuXG4iKTsKKwkJ
CXJldHVybiByZXQ7CisJCX0KKwl9CisKKwlpZiAob3BzICYgUFNQX01FTV9UUkFJTl9TQVZFKSB7
CisJCXJldCA9IGFtZGdwdV9kZXZpY2VfdnJhbV9hY2Nlc3MocHNwLT5hZGV2LCBjdHgtPnAyY190
cmFpbl9kYXRhX29mZnNldCwgY3R4LT5zeXNfY2FjaGUsIGN0eC0+dHJhaW5fZGF0YV9zaXplLCBm
YWxzZSk7CisJCWlmIChyZXQpIHsKKwkJCURSTV9FUlJPUigicmVhZCB0cmFpbmluZyBkYXRhIGZy
b20gdnJhbSBmYWlsZWQuXG4iKTsKKwkJCXJldHVybiByZXQ7CisJCX0KKwl9CisKKwlpZiAob3Bz
ICYgUFNQX01FTV9UUkFJTl9SRVNUT1JFKSB7CisJCXJldCA9IGFtZGdwdV9kZXZpY2VfdnJhbV9h
Y2Nlc3MocHNwLT5hZGV2LCBjdHgtPmMycF90cmFpbl9kYXRhX29mZnNldCwgY3R4LT5zeXNfY2Fj
aGUsIGN0eC0+dHJhaW5fZGF0YV9zaXplLCB0cnVlKTsKKwkJaWYgKHJldCkgeworCQkJRFJNX0VS
Uk9SKCJ3cml0ZSB0cmFpbmluZyBkYXRhIHRvIHZyYW0gZmFpbGVkLlxuIik7CisJCQlyZXR1cm4g
cmV0OworCQl9CisJfQorCisJaWYgKG9wcyAmIFBTUF9NRU1fVFJBSU5fU0VORF9TSE9SVF9NU0cp
IHsKKwkJcmV0ID0gcHNwX3YxMV8wX21lbW9yeV90cmFpbmluZ19zZW5kX21zZyhwc3AsIChhbWRn
cHVfZm9yY2VfbG9uZ190cmFpbmluZyA+IDApID8KKwkJCQkJCQkgUFNQX0JMX19EUkFNX0xPTkdf
VFJBSU4gOiBQU1BfQkxfX0RSQU1fU0hPUlRfVFJBSU4pOworCQlpZiAocmV0KSB7CisJCQlEUk1f
RVJST1IoInNlbmQgdHJhaW5pbmcgbXNnIGZhaWxlZC5cbiIpOworCQkJcmV0dXJuIHJldDsKKwkJ
fQorCX0KKwljdHgtPnRyYWluaW5nX2NudCsrOworCXJldHVybiByZXQ7Cit9CisKIHN0YXRpYyBj
b25zdCBzdHJ1Y3QgcHNwX2Z1bmNzIHBzcF92MTFfMF9mdW5jcyA9IHsKIAkuaW5pdF9taWNyb2Nv
ZGUgPSBwc3BfdjExXzBfaW5pdF9taWNyb2NvZGUsCiAJLmJvb3Rsb2FkZXJfbG9hZF9rZGIgPSBw
c3BfdjExXzBfYm9vdGxvYWRlcl9sb2FkX2tkYiwKQEAgLTkyMiw2ICsxMDkwLDkgQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBwc3BfZnVuY3MgcHNwX3YxMV8wX2Z1bmNzID0gewogCS5yYXNfdHJpZ2dl
cl9lcnJvciA9IHBzcF92MTFfMF9yYXNfdHJpZ2dlcl9lcnJvciwKIAkucmFzX2N1cmVfcG9zaW9u
ID0gcHNwX3YxMV8wX3Jhc19jdXJlX3Bvc2lvbiwKIAkucmxjX2F1dG9sb2FkX3N0YXJ0ID0gcHNw
X3YxMV8wX3JsY19hdXRvbG9hZF9zdGFydCwKKwkubWVtX3RyYWluaW5nX2luaXQgPSBwc3BfdjEx
XzBfbWVtb3J5X3RyYWluaW5nX2luaXQsCisJLm1lbV90cmFpbmluZ19maW5pID0gcHNwX3YxMV8w
X21lbW9yeV90cmFpbmluZ19maW5pLAorCS5tZW1fdHJhaW5pbmcgPSBwc3BfdjExXzBfbWVtb3J5
X3RyYWluaW5nLAogfTsKIAogdm9pZCBwc3BfdjExXzBfc2V0X3BzcF9mdW5jcyhzdHJ1Y3QgcHNw
X2NvbnRleHQgKnBzcCkKLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9hbWQtZ2Z4
