Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6F1D4D2D0E
	for <lists+amd-gfx@lfdr.de>; Thu, 10 Oct 2019 16:58:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0051D6EB6D;
	Thu, 10 Oct 2019 14:58:41 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr770054.outbound.protection.outlook.com [40.107.77.54])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8AE846EB6C
 for <amd-gfx@lists.freedesktop.org>; Thu, 10 Oct 2019 14:58:39 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Vowur2DwK3SqX6pxeUFll0zGWGzBL/GizZ317vnANoylGdcmwan/27VqqFspgp+t9sho1jFxsBzDBSTkh/5ynRQfPk426Eti1OQQg/KrpSoH9iwWc/72kTsQQVCxAjj8yWROK7D+CbpZRMagb+ZXoTGP59nIHCnEGWjISkvCEd0mOvmuxLzC59Nrb1JtsFYT1C+pPCyPZrTaVU89lYMdsmgeu0h+hR3RyjBJrrMFVxqiwV4T0x70l3ZV3nly/74L3kuRKYdGg/qfMnlh9jZ1yCEuhVwxjqGQemnDJe1Aywz5heotBhSdvtNjzR3J36sScY2kVK88BV1R1EREW5EmAQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=wQjQs64ui1r8BJtOkmr/50so3rXjmeScqpDQN7pK8PI=;
 b=X92MoFIoe5vc4SUsZjGh4/9B/xuNmbyOWgCLhfhIOkJvH4MRlqCEcEC4xLlnRKpeFC90SmUCFIp76j/NJJQ3rDoevEeux6CLt8q7kb0696rioa5Gt7988bAlRnz6FKZUlosgrunn0fOHR9b7iCz0DgPyRi3uGHBpfYibrj2SYQOEDhgTrdXq1qxCFt/NazkLw/1LuVZ8mlVFDquITqjpQhzGMnfq0ipgLQMyZGCnR47vbR3/c62Y3ToCtE8xy0MmF3OdlB+PtgwWxn51qBg5JtXXJlBHUDpMM/+SND2uXqsZbBk4tHGJqs5i7AgJJ7l9qaXQtyxUG2+3ln3z7sH3lQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=none (sender ip is
 165.204.84.17) smtp.rcpttodomain=lists.freedesktop.org smtp.mailfrom=amd.com; 
 dmarc=permerror action=none header.from=amd.com; dkim=none (message not
 signed); arc=none
Received: from DM3PR12CA0054.namprd12.prod.outlook.com (2603:10b6:0:56::22) by
 DM5PR12MB1241.namprd12.prod.outlook.com (2603:10b6:3:72::19) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2347.16; Thu, 10 Oct 2019 14:58:37 +0000
Received: from CO1NAM03FT035.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e48::201) by DM3PR12CA0054.outlook.office365.com
 (2603:10b6:0:56::22) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id 15.20.2347.16 via Frontend
 Transport; Thu, 10 Oct 2019 14:58:37 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV02.amd.com (165.204.84.17) by
 CO1NAM03FT035.mail.protection.outlook.com (10.152.80.179) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.2327.20 via Frontend Transport; Thu, 10 Oct 2019 14:58:37 +0000
Received: from hersenwu-System-Product-Name.amd.com (10.180.168.240) by
 SATLEXCHOV02.amd.com (10.181.40.72) with Microsoft SMTP Server id 14.3.389.1; 
 Thu, 10 Oct 2019 09:58:17 -0500
From: Hersen Wu <hersenxs.wu@amd.com>
To: <amd-gfx@lists.freedesktop.org>
Subject: [PATCH] drm/amdgpu/powerplay: add renoir funcs to support dc
Date: Thu, 10 Oct 2019 10:58:05 -0400
Message-ID: <20191010145805.4832-1-hersenxs.wu@amd.com>
X-Mailer: git-send-email 2.17.1
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(4636009)(396003)(346002)(376002)(136003)(39860400002)(428003)(199004)(189003)(26005)(356004)(186003)(5660300002)(426003)(6666004)(1076003)(478600001)(2616005)(30864003)(336012)(8936002)(50466002)(81166006)(81156014)(4326008)(70586007)(70206006)(2351001)(8676002)(47776003)(316002)(16586007)(54906003)(50226002)(486006)(476003)(51416003)(126002)(53416004)(2906002)(305945005)(6916009)(36756003)(48376002)(7696005)(14444005)(86362001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM5PR12MB1241; H:SATLEXCHOV02.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; A:1; MX:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 79217837-3d74-4b87-9952-08d74d925489
X-MS-TrafficTypeDiagnostic: DM5PR12MB1241:
X-Microsoft-Antispam-PRVS: <DM5PR12MB1241ED63D0E6B1A38E90B592FD940@DM5PR12MB1241.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:1388;
X-Forefront-PRVS: 018632C080
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: e6HQ1lOmnyn3c3yzJGTWi0pMSVybyG7rZufDgYg7kPS1XDK52btRCplpQBqha//V6+jbcY6Dpr9dLprkfwBjvwVaAEKPI5x0N7qGQCNdOlNbxdD7AVz6tREDE5ZFKAEhnxBIb9IEEdVorctyCJ92m1V2VtmvwVxCG4vqRP9hbwp+OMdlgp45ThctGEf39WY1/sPWDRJHgjMJNlzebet9/Oe6iMinnRSxVBgSvZYohDpL0j+Yn8m6k2qFDcz4vJ4UMuYIhSBOqy1DtImZDh304HBltTQZdi2IvIzxQeBlebT0pM8Wo3kp0xAcliVacTygjQlcA7OgUocaLBKiSmYwQRNPCsWgGi54FDvTteirsNEVGa+xJdiBEkgY4WN+Hx8eCvmq0N4qECE4Q1EaeF9VZwMgHFvirujnHKXrtmAeVTU=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 10 Oct 2019 14:58:37.3200 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 79217837-3d74-4b87-9952-08d74d925489
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV02.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5PR12MB1241
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=wQjQs64ui1r8BJtOkmr/50so3rXjmeScqpDQN7pK8PI=;
 b=zghcSz9Jh7nEwWvDArdEE/NP015vybSw1j3aoVNf5Ua8vwgQ5LqUy/ZVQT+1YdJQ9QuP3rFS0ODDanAl9TvJ5p/U8K6cB1uyDSRM+1/x0nCfrbjrGwQ3iVEH71HzADnGS3tKM/oCfXGQB9LeKmZURH7Ke644XXdgg1kHSCWVOfY=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; lists.freedesktop.org; dkim=none (message not signed)
 header.d=none;lists.freedesktop.org; dmarc=permerror action=none
 header.from=amd.com;
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Hersen Wu <hersenxs.wu@amd.com>, Kevin1.Wang@amd.com,
 harry.wentland@amd.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

dGhlcmUgYXJlIHR3byBwYXRocyBmb3IgcmVub2lyIGRjIGFjY2VzcyBzbXUuCm9uZSBkYyBhY2Nl
c3Mgc211IGRpcmVjdGx5IHVzaW5nIGJpb3Mgc21jCmludGVyZmFjZTogc2V0IGRpc3BseSwgZHBy
ZWZjbGssIGV0Yy4KYW5vdGhlciBnb2VzIHRocm91Z2ggcHBsaWIgZm9yIGdldCBkcG0gY2xvY2sK
dGFibGUgYW5kIHNldCB3YXRlcm1tYXJrLgoKU2lnbmVkLW9mZi1ieTogSGVyc2VuIFd1IDxoZXJz
ZW54cy53dUBhbWQuY29tPgotLS0KIC4uLi9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2Rt
X3BwX3NtdS5jICB8IDE2ICstLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L2FtZGdw
dV9zbXUuYyAgICB8IDM1ICsrKysrKysKIC4uLi9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2Ft
ZGdwdV9zbXUuaCAgICB8IDE2ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3Jl
bm9pcl9wcHQuYyAgICB8IDk2ICsrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jICAgICB8IDM5IC0tLS0tLS0tCiA1IGZpbGVzIGNoYW5n
ZWQsIDE0MSBpbnNlcnRpb25zKCspLCA2MSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9wcF9zbXUuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtX3BwX3NtdS5jCmlu
ZGV4IGY0Y2ZhMGNhZWJhOC4uOTU1NjRiOGRlM2NlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9wcF9zbXUuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9wcF9zbXUuYwpAQCAtNTg5
LDEwICs1ODksOSBAQCB2b2lkIHBwX3J2X3NldF93bV9yYW5nZXMoc3RydWN0IHBwX3NtdSAqcHAs
CiAJaWYgKHBwX2Z1bmNzICYmIHBwX2Z1bmNzLT5zZXRfd2F0ZXJtYXJrc19mb3JfY2xvY2tzX3Jh
bmdlcykKIAkJcHBfZnVuY3MtPnNldF93YXRlcm1hcmtzX2Zvcl9jbG9ja3NfcmFuZ2VzKHBwX2hh
bmRsZSwKIAkJCQkJCQkgICAmd21fd2l0aF9jbG9ja19yYW5nZXMpOwotCWVsc2UgaWYgKGFkZXYt
PnNtdS5mdW5jcyAmJgotCQkgYWRldi0+c211LmZ1bmNzLT5zZXRfd2F0ZXJtYXJrc19mb3JfY2xv
Y2tfcmFuZ2VzKQorCWVsc2UKIAkJc211X3NldF93YXRlcm1hcmtzX2Zvcl9jbG9ja19yYW5nZXMo
JmFkZXYtPnNtdSwKLQkJCQkJCSAgICAmd21fd2l0aF9jbG9ja19yYW5nZXMpOworCQkJCSZ3bV93
aXRoX2Nsb2NrX3Jhbmdlcyk7CiB9CiAKIHZvaWQgcHBfcnZfc2V0X3BtZV93YV9lbmFibGUoc3Ry
dWN0IHBwX3NtdSAqcHApCkBAIC02NjUsNyArNjY0LDYgQEAgZW51bSBwcF9zbXVfc3RhdHVzIHBw
X252X3NldF93bV9yYW5nZXMoc3RydWN0IHBwX3NtdSAqcHAsCiB7CiAJY29uc3Qgc3RydWN0IGRj
X2NvbnRleHQgKmN0eCA9IHBwLT5kbTsKIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGN0
eC0+ZHJpdmVyX2NvbnRleHQ7Ci0Jc3RydWN0IHNtdV9jb250ZXh0ICpzbXUgPSAmYWRldi0+c211
OwogCXN0cnVjdCBkbV9wcF93bV9zZXRzX3dpdGhfY2xvY2tfcmFuZ2VzX3NvYzE1IHdtX3dpdGhf
Y2xvY2tfcmFuZ2VzOwogCXN0cnVjdCBkbV9wcF9jbG9ja19yYW5nZV9mb3JfZG1pZl93bV9zZXRf
c29jMTUgKndtX2RjZV9jbG9ja3MgPQogCQkJd21fd2l0aF9jbG9ja19yYW5nZXMud21fZG1pZl9j
bG9ja3NfcmFuZ2VzOwpAQCAtNzA4LDE1ICs3MDYsNyBAQCBlbnVtIHBwX3NtdV9zdGF0dXMgcHBf
bnZfc2V0X3dtX3JhbmdlcyhzdHJ1Y3QgcHBfc211ICpwcCwKIAkJCXJhbmdlcy0+d3JpdGVyX3dt
X3NldHNbaV0ubWluX2RyYWluX2Nsa19taHogKiAxMDAwOwogCX0KIAotCWlmICghc211LT5mdW5j
cykKLQkJcmV0dXJuIFBQX1NNVV9SRVNVTFRfVU5TVVBQT1JURUQ7Ci0KLQkvKiAwOiBzdWNjZXNz
ZnVsIG9yIHNtdS5mdW5jcy0+c2V0X3dhdGVybWFya3NfZm9yX2Nsb2NrX3JhbmdlcyA9IE5VTEw7
Ci0JICogMTogZmFpbAotCSAqLwotCWlmIChzbXVfc2V0X3dhdGVybWFya3NfZm9yX2Nsb2NrX3Jh
bmdlcygmYWRldi0+c211LAotCQkJJndtX3dpdGhfY2xvY2tfcmFuZ2VzKSkKLQkJcmV0dXJuIFBQ
X1NNVV9SRVNVTFRfVU5TVVBQT1JURUQ7CisJc211X3NldF93YXRlcm1hcmtzX2Zvcl9jbG9ja19y
YW5nZXMoJmFkZXYtPnNtdSwJJndtX3dpdGhfY2xvY2tfcmFuZ2VzKTsKIAogCXJldHVybiBQUF9T
TVVfUkVTVUxUX09LOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBs
YXkvYW1kZ3B1X3NtdS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvYW1kZ3B1X3Nt
dS5jCmluZGV4IGM5MjY2ZWE3MDMzMS4uMWI3MWMzOGNkZjk2IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL3Bvd2VycGxheS9hbWRncHVfc211LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9wb3dlcnBsYXkvYW1kZ3B1X3NtdS5jCkBAIC0xODM0LDYgKzE4MzQsNDEgQEAgaW50IHNt
dV9zZXRfbXAxX3N0YXRlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LAogCXJldHVybiByZXQ7CiB9
CiAKK2ludCBzbXVfd3JpdGVfd2F0ZXJtYXJrc190YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNt
dSkKK3sKKwlpbnQgcmV0ID0gMDsKKwlzdHJ1Y3Qgc211X3RhYmxlX2NvbnRleHQgKnNtdV90YWJs
ZSA9ICZzbXUtPnNtdV90YWJsZTsKKwlzdHJ1Y3Qgc211X3RhYmxlICp0YWJsZSA9IE5VTEw7CisK
Kwl0YWJsZSA9ICZzbXVfdGFibGUtPnRhYmxlc1tTTVVfVEFCTEVfV0FURVJNQVJLU107CisKKwlp
ZiAoIXRhYmxlLT5jcHVfYWRkcikKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlyZXQgPSBzbXVfdXBk
YXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX1dBVEVSTUFSS1MsIDAsIHRhYmxlLT5jcHVfYWRkciwK
KwkJCQl0cnVlKTsKKworCXJldHVybiByZXQ7Cit9CisKK2ludCBzbXVfc2V0X3dhdGVybWFya3Nf
Zm9yX2Nsb2NrX3JhbmdlcyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKKwkJc3RydWN0IGRtX3Bw
X3dtX3NldHNfd2l0aF9jbG9ja19yYW5nZXNfc29jMTUgKmNsb2NrX3JhbmdlcykKK3sKKwlpbnQg
cmV0ID0gMDsKKwlzdHJ1Y3Qgc211X3RhYmxlICp3YXRlcm1hcmtzID0gJnNtdS0+c211X3RhYmxl
LnRhYmxlc1tTTVVfVEFCTEVfV0FURVJNQVJLU107CisJdm9pZCAqdGFibGUgPSB3YXRlcm1hcmtz
LT5jcHVfYWRkcjsKKworCWlmICghc211LT5kaXNhYmxlX3dhdGVybWFyayAmJgorCQkJc211X2Zl
YXR1cmVfaXNfZW5hYmxlZChzbXUsIFNNVV9GRUFUVVJFX0RQTV9EQ0VGQ0xLX0JJVCkgJiYKKwkJ
CXNtdV9mZWF0dXJlX2lzX2VuYWJsZWQoc211LCBTTVVfRkVBVFVSRV9EUE1fU09DQ0xLX0JJVCkp
IHsKKwkJc211X3NldF93YXRlcm1hcmtzX3RhYmxlKHNtdSwgdGFibGUsIGNsb2NrX3Jhbmdlcyk7
CisJCXNtdS0+d2F0ZXJtYXJrc19iaXRtYXAgfD0gV0FURVJNQVJLU19FWElTVDsKKwkJc211LT53
YXRlcm1hcmtzX2JpdG1hcCAmPSB+V0FURVJNQVJLU19MT0FERUQ7CisJfQorCisJcmV0dXJuIHJl
dDsKK30KKwogY29uc3Qgc3RydWN0IGFtZF9pcF9mdW5jcyBzbXVfaXBfZnVuY3MgPSB7CiAJLm5h
bWUgPSAic211IiwKIAkuZWFybHlfaW5pdCA9IHNtdV9lYXJseV9pbml0LApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5jL2FtZGdwdV9zbXUuaCBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvcG93ZXJwbGF5L2luYy9hbWRncHVfc211LmgKaW5kZXggY2NmNzExYzMyN2M4
Li4xNDY5MTQ2ZGExYWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5
L2luYy9hbWRncHVfc211LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvaW5j
L2FtZGdwdV9zbXUuaApAQCAtNDY4LDYgKzQ2OCw3IEBAIHN0cnVjdCBwcHRhYmxlX2Z1bmNzIHsK
IAlpbnQgKCpnZXRfcG93ZXJfbGltaXQpKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCB1aW50MzJf
dCAqbGltaXQsIGJvb2wgYXNpY19kZWZhdWx0KTsKIAlpbnQgKCpnZXRfZHBtX2Nsa19saW1pdGVk
KShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgZW51bSBzbXVfY2xrX3R5cGUgY2xrX3R5cGUsCiAJ
CQkJICAgdWludDMyX3QgZHBtX2xldmVsLCB1aW50MzJfdCAqZnJlcSk7CisJaW50ICgqZ2V0X2Rw
bV9jbG9ja190YWJsZSkoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHN0cnVjdCBkcG1fY2xvY2tz
ICpjbG9ja190YWJsZSk7CiB9OwogCiBzdHJ1Y3Qgc211X2Z1bmNzCkBAIC00OTMsNyArNDk0LDYg
QEAgc3RydWN0IHNtdV9mdW5jcwogCWludCAoKnNldF9taW5fZGNlZl9kZWVwX3NsZWVwKShzdHJ1
Y3Qgc211X2NvbnRleHQgKnNtdSk7CiAJaW50ICgqc2V0X3Rvb2xfdGFibGVfbG9jYXRpb24pKHN0
cnVjdCBzbXVfY29udGV4dCAqc211KTsKIAlpbnQgKCpub3RpZnlfbWVtb3J5X3Bvb2xfbG9jYXRp
b24pKHN0cnVjdCBzbXVfY29udGV4dCAqc211KTsKLQlpbnQgKCp3cml0ZV93YXRlcm1hcmtzX3Rh
YmxlKShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSk7CiAJaW50ICgqc2V0X2xhc3RfZGNlZl9taW5f
ZGVlcF9zbGVlcF9jbGspKHN0cnVjdCBzbXVfY29udGV4dCAqc211KTsKIAlpbnQgKCpzeXN0ZW1f
ZmVhdHVyZXNfY29udHJvbCkoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGJvb2wgZW4pOwogCWlu
dCAoKnNlbmRfc21jX21zZykoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIHVpbnQxNl90IG1zZyk7
CkBAIC01MzEsOCArNTMxLDYgQEAgc3RydWN0IHNtdV9mdW5jcwogCWludCAoKmdldF9jdXJyZW50
X3NoYWxsb3dfc2xlZXBfY2xvY2tzKShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKIAkJCQkJCXN0
cnVjdCBzbXVfY2xvY2tfaW5mbyAqY2xvY2tzKTsKIAlpbnQgKCpub3RpZnlfc211X2VuYWJsZV9w
d2UpKHN0cnVjdCBzbXVfY29udGV4dCAqc211KTsKLQlpbnQgKCpzZXRfd2F0ZXJtYXJrc19mb3Jf
Y2xvY2tfcmFuZ2VzKShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwKLQkJCQkJICAgICAgIHN0cnVj
dCBkbV9wcF93bV9zZXRzX3dpdGhfY2xvY2tfcmFuZ2VzX3NvYzE1ICpjbG9ja19yYW5nZXMpOwog
CWludCAoKmNvbnZfcG93ZXJfcHJvZmlsZV90b19wcGxpYl93b3JrbG9hZCkoaW50IHBvd2VyX3By
b2ZpbGUpOwogCXVpbnQzMl90ICgqZ2V0X2Zhbl9jb250cm9sX21vZGUpKHN0cnVjdCBzbXVfY29u
dGV4dCAqc211KTsKIAlpbnQgKCpzZXRfZmFuX2NvbnRyb2xfbW9kZSkoc3RydWN0IHNtdV9jb250
ZXh0ICpzbXUsIHVpbnQzMl90IG1vZGUpOwpAQCAtNTk2LDkgKzU5NCw2IEBAIHN0cnVjdCBzbXVf
ZnVuY3MKIAkoKHNtdSktPmZ1bmNzLT5ub3RpZnlfbWVtb3J5X3Bvb2xfbG9jYXRpb24gPyAoc211
KS0+ZnVuY3MtPm5vdGlmeV9tZW1vcnlfcG9vbF9sb2NhdGlvbigoc211KSkgOiAwKQogI2RlZmlu
ZSBzbXVfZ2Z4X29mZl9jb250cm9sKHNtdSwgZW5hYmxlKSBcCiAJKChzbXUpLT5mdW5jcy0+Z2Z4
X29mZl9jb250cm9sID8gKHNtdSktPmZ1bmNzLT5nZnhfb2ZmX2NvbnRyb2woKHNtdSksIChlbmFi
bGUpKSA6IDApCi0KLSNkZWZpbmUgc211X3dyaXRlX3dhdGVybWFya3NfdGFibGUoc211KSBcCi0J
KChzbXUpLT5mdW5jcy0+d3JpdGVfd2F0ZXJtYXJrc190YWJsZSA/IChzbXUpLT5mdW5jcy0+d3Jp
dGVfd2F0ZXJtYXJrc190YWJsZSgoc211KSkgOiAwKQogI2RlZmluZSBzbXVfc2V0X2xhc3RfZGNl
Zl9taW5fZGVlcF9zbGVlcF9jbGsoc211KSBcCiAJKChzbXUpLT5mdW5jcy0+c2V0X2xhc3RfZGNl
Zl9taW5fZGVlcF9zbGVlcF9jbGsgPyAoc211KS0+ZnVuY3MtPnNldF9sYXN0X2RjZWZfbWluX2Rl
ZXBfc2xlZXBfY2xrKChzbXUpKSA6IDApCiAjZGVmaW5lIHNtdV9zeXN0ZW1fZmVhdHVyZXNfY29u
dHJvbChzbXUsIGVuKSBcCkBAIC03MzgsOCArNzMzLDYgQEAgc3RydWN0IHNtdV9mdW5jcwogCSgo
c211KS0+ZnVuY3MtPmdldF9jdXJyZW50X3NoYWxsb3dfc2xlZXBfY2xvY2tzID8gKHNtdSktPmZ1
bmNzLT5nZXRfY3VycmVudF9zaGFsbG93X3NsZWVwX2Nsb2Nrcygoc211KSwgKGNsb2NrcykpIDog
MCkKICNkZWZpbmUgc211X25vdGlmeV9zbXVfZW5hYmxlX3B3ZShzbXUpIFwKIAkoKHNtdSktPmZ1
bmNzLT5ub3RpZnlfc211X2VuYWJsZV9wd2UgPyAoc211KS0+ZnVuY3MtPm5vdGlmeV9zbXVfZW5h
YmxlX3B3ZSgoc211KSkgOiAwKQotI2RlZmluZSBzbXVfc2V0X3dhdGVybWFya3NfZm9yX2Nsb2Nr
X3JhbmdlcyhzbXUsIGNsb2NrX3JhbmdlcykgXAotCSgoc211KS0+ZnVuY3MtPnNldF93YXRlcm1h
cmtzX2Zvcl9jbG9ja19yYW5nZXMgPyAoc211KS0+ZnVuY3MtPnNldF93YXRlcm1hcmtzX2Zvcl9j
bG9ja19yYW5nZXMoKHNtdSksIChjbG9ja19yYW5nZXMpKSA6IDApCiAjZGVmaW5lIHNtdV9kcG1f
c2V0X3V2ZF9lbmFibGUoc211LCBlbmFibGUpIFwKIAkoKHNtdSktPnBwdF9mdW5jcy0+ZHBtX3Nl
dF91dmRfZW5hYmxlID8gKHNtdSktPnBwdF9mdW5jcy0+ZHBtX3NldF91dmRfZW5hYmxlKChzbXUp
LCAoZW5hYmxlKSkgOiAwKQogI2RlZmluZSBzbXVfZHBtX3NldF92Y2VfZW5hYmxlKHNtdSwgZW5h
YmxlKSBcCkBAIC03NzgsOSArNzcxLDEwIEBAIHN0cnVjdCBzbXVfZnVuY3MKIAkoKHNtdSktPnBw
dF9mdW5jcy0+ZHVtcF9wcHRhYmxlID8gKHNtdSktPnBwdF9mdW5jcy0+ZHVtcF9wcHRhYmxlKChz
bXUpKSA6IDApCiAjZGVmaW5lIHNtdV9nZXRfZHBtX2Nsa19saW1pdGVkKHNtdSwgY2xrX3R5cGUs
IGRwbV9sZXZlbCwgZnJlcSkgXAogCQkoKHNtdSktPnBwdF9mdW5jcy0+Z2V0X2RwbV9jbGtfbGlt
aXRlZCA/IChzbXUpLT5wcHRfZnVuY3MtPmdldF9kcG1fY2xrX2xpbWl0ZWQoKHNtdSksIChjbGtf
dHlwZSksIChkcG1fbGV2ZWwpLCAoZnJlcSkpIDogLUVJTlZBTCkKLQogI2RlZmluZSBzbXVfc2V0
X3NvZnRfZnJlcV9saW1pdGVkX3JhbmdlKHNtdSwgY2xrX3R5cGUsIG1pbiwgbWF4KSBcCiAJCSgo
c211KS0+ZnVuY3MtPnNldF9zb2Z0X2ZyZXFfbGltaXRlZF9yYW5nZSA/IChzbXUpLT5mdW5jcy0+
c2V0X3NvZnRfZnJlcV9saW1pdGVkX3JhbmdlKChzbXUpLCAoY2xrX3R5cGUpLCAobWluKSwgKG1h
eCkpIDogLUVJTlZBTCkKKyNkZWZpbmUgc211X2dldF9kcG1fY2xvY2tfdGFibGUoc211LCBjbG9j
a190YWJsZSkgXAorCQkoKHNtdSktPnBwdF9mdW5jcy0+Z2V0X2RwbV9jbG9ja190YWJsZSA/IChz
bXUpLT5wcHRfZnVuY3MtPmdldF9kcG1fY2xvY2tfdGFibGUoKHNtdSksIChjbG9ja190YWJsZSkp
IDogLUVJTlZBTCkKIAogZXh0ZXJuIGludCBzbXVfZ2V0X2F0b21fZGF0YV90YWJsZShzdHJ1Y3Qg
c211X2NvbnRleHQgKnNtdSwgdWludDMyX3QgdGFibGUsCiAJCQkJICAgdWludDE2X3QgKnNpemUs
IHVpbnQ4X3QgKmZyZXYsIHVpbnQ4X3QgKmNyZXYsCkBAIC04MTQsNiArODA4LDEwIEBAIGludCBz
bXVfc3lzX2dldF9wcF90YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgdm9pZCAqKnRhYmxl
KTsKIGludCBzbXVfc3lzX3NldF9wcF90YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgIHZv
aWQgKmJ1Ziwgc2l6ZV90IHNpemUpOwogaW50IHNtdV9nZXRfcG93ZXJfbnVtX3N0YXRlcyhzdHJ1
Y3Qgc211X2NvbnRleHQgKnNtdSwgc3RydWN0IHBwX3N0YXRlc19pbmZvICpzdGF0ZV9pbmZvKTsK
IGVudW0gYW1kX3BtX3N0YXRlX3R5cGUgc211X2dldF9jdXJyZW50X3Bvd2VyX3N0YXRlKHN0cnVj
dCBzbXVfY29udGV4dCAqc211KTsKK2ludCBzbXVfd3JpdGVfd2F0ZXJtYXJrc190YWJsZShzdHJ1
Y3Qgc211X2NvbnRleHQgKnNtdSk7CitpbnQgc211X3NldF93YXRlcm1hcmtzX2Zvcl9jbG9ja19y
YW5nZXMoCisJCXN0cnVjdCBzbXVfY29udGV4dCAqc211LAorCQlzdHJ1Y3QgZG1fcHBfd21fc2V0
c193aXRoX2Nsb2NrX3Jhbmdlc19zb2MxNSAqY2xvY2tfcmFuZ2VzKTsKIAogLyogc211IHRvIGRp
c3BsYXkgaW50ZXJmYWNlICovCiBleHRlcm4gaW50IHNtdV9kaXNwbGF5X2NvbmZpZ3VyYXRpb25f
Y2hhbmdlKHN0cnVjdCBzbXVfY29udGV4dCAqc211LCBjb25zdApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvcmVub2lyX3BwdC5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9wb3dlcnBsYXkvcmVub2lyX3BwdC5jCmluZGV4IDZhZWRmZmQ3MzlkYi4uZmEzMTRjMjc1YTgy
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL3Bvd2VycGxheS9yZW5vaXJfcHB0LmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvcmVub2lyX3BwdC5jCkBAIC00MTYs
NiArNDE2LDQwIEBAIHN0YXRpYyBpbnQgcmVub2lyX2dldF9wcm9maWxpbmdfY2xrX21hc2soc3Ry
dWN0IHNtdV9jb250ZXh0ICpzbXUsCiAJcmV0dXJuIDA7CiB9CiAKKy8qKgorICogVGhpcyBpbnRl
cmZhY2UgZ2V0IGRwbSBjbG9jayB0YWJsZSBmb3IgZGMKKyAqLworc3RhdGljIGludCByZW5vaXJf
Z2V0X2RwbV9jbG9ja190YWJsZShzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgc3RydWN0IGRwbV9j
bG9ja3MgKmNsb2NrX3RhYmxlKQoreworCURwbUNsb2Nrc190ICp0YWJsZSA9IHNtdS0+c211X3Rh
YmxlLmNsb2Nrc190YWJsZTsKKwlpbnQgaTsKKworCWlmICghY2xvY2tfdGFibGUgfHwgIXRhYmxl
KQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWZvciAoaSA9IDA7IGkgPCBQUF9TTVVfTlVNX0RDRkNM
S19EUE1fTEVWRUxTOyBpKyspIHsKKwkJY2xvY2tfdGFibGUtPkRjZkNsb2Nrc1tpXS5GcmVxID0g
dGFibGUtPkRjZkNsb2Nrc1tpXS5GcmVxOworCQljbG9ja190YWJsZS0+RGNmQ2xvY2tzW2ldLlZv
bCA9IHRhYmxlLT5EY2ZDbG9ja3NbaV0uVm9sOworCX0KKworCWZvciAoaSA9IDA7IGkgPCBQUF9T
TVVfTlVNX1NPQ0NMS19EUE1fTEVWRUxTOyBpKyspIHsKKwkJY2xvY2tfdGFibGUtPlNvY0Nsb2Nr
c1tpXS5GcmVxID0gdGFibGUtPlNvY0Nsb2Nrc1tpXS5GcmVxOworCQljbG9ja190YWJsZS0+U29j
Q2xvY2tzW2ldLlZvbCA9IHRhYmxlLT5Tb2NDbG9ja3NbaV0uVm9sOworCX0KKworCWZvciAoaSA9
IDA7IGkgPCBQUF9TTVVfTlVNX0ZDTEtfRFBNX0xFVkVMUzsgaSsrKSB7CisJCWNsb2NrX3RhYmxl
LT5GQ2xvY2tzW2ldLkZyZXEgPSB0YWJsZS0+RkNsb2Nrc1tpXS5GcmVxOworCQljbG9ja190YWJs
ZS0+RkNsb2Nrc1tpXS5Wb2wgPSB0YWJsZS0+RkNsb2Nrc1tpXS5Wb2w7CisJfQorCisJZm9yIChp
ID0gMDsgaTwgIFBQX1NNVV9OVU1fTUVNQ0xLX0RQTV9MRVZFTFM7IGkrKykgeworCQljbG9ja190
YWJsZS0+TWVtQ2xvY2tzW2ldLkZyZXEgPSB0YWJsZS0+TWVtQ2xvY2tzW2ldLkZyZXE7CisJCWNs
b2NrX3RhYmxlLT5NZW1DbG9ja3NbaV0uVm9sID0gdGFibGUtPk1lbUNsb2Nrc1tpXS5Wb2w7CisJ
fQorCisJcmV0dXJuIDA7Cit9CisKIHN0YXRpYyBpbnQgcmVub2lyX2ZvcmNlX2Nsa19sZXZlbHMo
c3RydWN0IHNtdV9jb250ZXh0ICpzbXUsCiAJCQkJICAgZW51bSBzbXVfY2xrX3R5cGUgY2xrX3R5
cGUsIHVpbnQzMl90IG1hc2spCiB7CkBAIC01NDYsNiArNTgwLDY2IEBAIHN0YXRpYyBpbnQgcmVu
b2lyX3NldF9wZXJmb3JtYW5jZV9sZXZlbChzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgZW51bSBh
bWRfZHBtX2ZvCiAJcmV0dXJuIHJldDsKIH0KIAorLyogc2F2ZSB3YXRlcm1hcmsgc2V0dGluZ3Mg
aW50byBwcGxpYiBzbXUgc3RydWN0dXJlLAorICogYWxzbyBwYXNzIGRhdGEgdG8gc211IGNvbnRy
b2xsZXIKKyAqLworc3RhdGljIGludCByZW5vaXJfc2V0X3dhdGVybWFya3NfdGFibGUoCisJCXN0
cnVjdCBzbXVfY29udGV4dCAqc211LAorCQl2b2lkICp3YXRlcm1hcmtzLAorCQlzdHJ1Y3QgZG1f
cHBfd21fc2V0c193aXRoX2Nsb2NrX3Jhbmdlc19zb2MxNSAqY2xvY2tfcmFuZ2VzKQoreworCWlu
dCBpOworCWludCByZXQgPSAwOworCVdhdGVybWFya3NfdCAqdGFibGUgPSB3YXRlcm1hcmtzOwor
CisJaWYgKCF0YWJsZSB8fCAhY2xvY2tfcmFuZ2VzKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWlm
IChjbG9ja19yYW5nZXMtPm51bV93bV9kbWlmX3NldHMgPiA0IHx8CisJCQljbG9ja19yYW5nZXMt
Pm51bV93bV9tY2lmX3NldHMgPiA0KQorCQlyZXR1cm4gLUVJTlZBTDsKKworCS8qIHNhdmUgaW50
byBzbXUtPnNtdV90YWJsZS50YWJsZXNbU01VX1RBQkxFX1dBVEVSTUFSS1NdLT5jcHVfYWRkciov
CisJZm9yIChpID0gMDsgaSA8IGNsb2NrX3Jhbmdlcy0+bnVtX3dtX2RtaWZfc2V0czsgaSsrKSB7
CisJCXRhYmxlLT5XYXRlcm1hcmtSb3dbV01fRENGQ0xLXVtpXS5NaW5DbG9jayA9CisJCQljcHVf
dG9fbGUxNigodWludDE2X3QpCisJCQkoY2xvY2tfcmFuZ2VzLT53bV9kbWlmX2Nsb2Nrc19yYW5n
ZXNbaV0ud21fbWluX2RjZmNsa19jbGtfaW5fa2h6KSk7CisJCXRhYmxlLT5XYXRlcm1hcmtSb3db
V01fRENGQ0xLXVtpXS5NYXhDbG9jayA9CisJCQljcHVfdG9fbGUxNigodWludDE2X3QpCisJCQko
Y2xvY2tfcmFuZ2VzLT53bV9kbWlmX2Nsb2Nrc19yYW5nZXNbaV0ud21fbWF4X2RjZmNsa19jbGtf
aW5fa2h6KSk7CisJCXRhYmxlLT5XYXRlcm1hcmtSb3dbV01fRENGQ0xLXVtpXS5NaW5NY2xrID0K
KwkJCWNwdV90b19sZTE2KCh1aW50MTZfdCkKKwkJCShjbG9ja19yYW5nZXMtPndtX2RtaWZfY2xv
Y2tzX3Jhbmdlc1tpXS53bV9taW5fbWVtX2Nsa19pbl9raHopKTsKKwkJdGFibGUtPldhdGVybWFy
a1Jvd1tXTV9EQ0ZDTEtdW2ldLk1heE1jbGsgPQorCQkJY3B1X3RvX2xlMTYoKHVpbnQxNl90KQor
CQkJKGNsb2NrX3Jhbmdlcy0+d21fZG1pZl9jbG9ja3NfcmFuZ2VzW2ldLndtX21heF9tZW1fY2xr
X2luX2toeikpOworCQl0YWJsZS0+V2F0ZXJtYXJrUm93W1dNX0RDRkNMS11baV0uV21TZXR0aW5n
ID0gKHVpbnQ4X3QpCisJCQkJY2xvY2tfcmFuZ2VzLT53bV9kbWlmX2Nsb2Nrc19yYW5nZXNbaV0u
d21fc2V0X2lkOworCX0KKworCWZvciAoaSA9IDA7IGkgPCBjbG9ja19yYW5nZXMtPm51bV93bV9t
Y2lmX3NldHM7IGkrKykgeworCQl0YWJsZS0+V2F0ZXJtYXJrUm93W1dNX1NPQ0NMS11baV0uTWlu
Q2xvY2sgPQorCQkJY3B1X3RvX2xlMTYoKHVpbnQxNl90KQorCQkJKGNsb2NrX3Jhbmdlcy0+d21f
bWNpZl9jbG9ja3NfcmFuZ2VzW2ldLndtX21pbl9zb2NjbGtfY2xrX2luX2toeikpOworCQl0YWJs
ZS0+V2F0ZXJtYXJrUm93W1dNX1NPQ0NMS11baV0uTWF4Q2xvY2sgPQorCQkJY3B1X3RvX2xlMTYo
KHVpbnQxNl90KQorCQkJKGNsb2NrX3Jhbmdlcy0+d21fbWNpZl9jbG9ja3NfcmFuZ2VzW2ldLndt
X21heF9zb2NjbGtfY2xrX2luX2toeikpOworCQl0YWJsZS0+V2F0ZXJtYXJrUm93W1dNX1NPQ0NM
S11baV0uTWluTWNsayA9CisJCQljcHVfdG9fbGUxNigodWludDE2X3QpCisJCQkoY2xvY2tfcmFu
Z2VzLT53bV9tY2lmX2Nsb2Nrc19yYW5nZXNbaV0ud21fbWluX21lbV9jbGtfaW5fa2h6KSk7CisJ
CXRhYmxlLT5XYXRlcm1hcmtSb3dbV01fU09DQ0xLXVtpXS5NYXhNY2xrID0KKwkJCWNwdV90b19s
ZTE2KCh1aW50MTZfdCkKKwkJCShjbG9ja19yYW5nZXMtPndtX21jaWZfY2xvY2tzX3Jhbmdlc1tp
XS53bV9tYXhfbWVtX2Nsa19pbl9raHopKTsKKwkJdGFibGUtPldhdGVybWFya1Jvd1tXTV9TT0ND
TEtdW2ldLldtU2V0dGluZyA9ICh1aW50OF90KQorCQkJCWNsb2NrX3Jhbmdlcy0+d21fbWNpZl9j
bG9ja3NfcmFuZ2VzW2ldLndtX3NldF9pZDsKKwl9CisKKwkvKiBwYXNzIGRhdGEgdG8gc211IGNv
bnRyb2xsZXIgKi8KKwlyZXQgPSBzbXVfd3JpdGVfd2F0ZXJtYXJrc190YWJsZShzbXUpOworCisJ
cmV0dXJuIHJldDsKK30KKwogc3RhdGljIGNvbnN0IHN0cnVjdCBwcHRhYmxlX2Z1bmNzIHJlbm9p
cl9wcHRfZnVuY3MgPSB7CiAJLmdldF9zbXVfbXNnX2luZGV4ID0gcmVub2lyX2dldF9zbXVfbXNn
X2luZGV4LAogCS5nZXRfc211X3RhYmxlX2luZGV4ID0gcmVub2lyX2dldF9zbXVfdGFibGVfaW5k
ZXgsCkBAIC01NjIsNiArNjU2LDggQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwcHRhYmxlX2Z1bmNz
IHJlbm9pcl9wcHRfZnVuY3MgPSB7CiAJLmZvcmNlX2Nsa19sZXZlbHMgPSByZW5vaXJfZm9yY2Vf
Y2xrX2xldmVscywKIAkuc2V0X3Bvd2VyX3Byb2ZpbGVfbW9kZSA9IHJlbm9pcl9zZXRfcG93ZXJf
cHJvZmlsZV9tb2RlLAogCS5zZXRfcGVyZm9ybWFuY2VfbGV2ZWwgPSByZW5vaXJfc2V0X3BlcmZv
cm1hbmNlX2xldmVsLAorCS5nZXRfZHBtX2Nsb2NrX3RhYmxlID0gcmVub2lyX2dldF9kcG1fY2xv
Y2tfdGFibGUsCisJLnNldF93YXRlcm1hcmtzX3RhYmxlID0gcmVub2lyX3NldF93YXRlcm1hcmtz
X3RhYmxlLAogfTsKIAogdm9pZCByZW5vaXJfc2V0X3BwdF9mdW5jcyhzdHJ1Y3Qgc211X2NvbnRl
eHQgKnNtdSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJwbGF5L3NtdV92
MTFfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9wb3dlcnBsYXkvc211X3YxMV8wLmMKaW5kZXgg
YzllOTBkNTlhNmI4Li5lZmY3ZmFhNzk0NGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvcG93ZXJwbGF5L3NtdV92MTFfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvcG93ZXJw
bGF5L3NtdV92MTFfMC5jCkBAIC03NzAsMjMgKzc3MCw2IEBAIHN0YXRpYyBpbnQgc211X3YxMV8w
X3dyaXRlX3BwdGFibGUoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUpCiAJcmV0dXJuIHJldDsKIH0K
IAotc3RhdGljIGludCBzbXVfdjExXzBfd3JpdGVfd2F0ZXJtYXJrc190YWJsZShzdHJ1Y3Qgc211
X2NvbnRleHQgKnNtdSkKLXsKLQlpbnQgcmV0ID0gMDsKLQlzdHJ1Y3Qgc211X3RhYmxlX2NvbnRl
eHQgKnNtdV90YWJsZSA9ICZzbXUtPnNtdV90YWJsZTsKLQlzdHJ1Y3Qgc211X3RhYmxlICp0YWJs
ZSA9IE5VTEw7Ci0KLQl0YWJsZSA9ICZzbXVfdGFibGUtPnRhYmxlc1tTTVVfVEFCTEVfV0FURVJN
QVJLU107Ci0KLQlpZiAoIXRhYmxlLT5jcHVfYWRkcikKLQkJcmV0dXJuIC1FSU5WQUw7Ci0KLQly
ZXQgPSBzbXVfdXBkYXRlX3RhYmxlKHNtdSwgU01VX1RBQkxFX1dBVEVSTUFSS1MsIDAsIHRhYmxl
LT5jcHVfYWRkciwKLQkJCQl0cnVlKTsKLQotCXJldHVybiByZXQ7Ci19Ci0KIHN0YXRpYyBpbnQg
c211X3YxMV8wX3NldF9kZWVwX3NsZWVwX2RjZWZjbGsoc3RydWN0IHNtdV9jb250ZXh0ICpzbXUs
IHVpbnQzMl90IGNsaykKIHsKIAlpbnQgcmV0OwpAQCAtMTMzNiwyNiArMTMxOSw2IEBAIHNtdV92
MTFfMF9kaXNwbGF5X2Nsb2NrX3ZvbHRhZ2VfcmVxdWVzdChzdHJ1Y3Qgc211X2NvbnRleHQgKnNt
dSwKIAlyZXR1cm4gcmV0OwogfQogCi1zdGF0aWMgaW50Ci1zbXVfdjExXzBfc2V0X3dhdGVybWFy
a3NfZm9yX2Nsb2NrX3JhbmdlcyhzdHJ1Y3Qgc211X2NvbnRleHQgKnNtdSwgc3RydWN0Ci0JCQkJ
CSAgZG1fcHBfd21fc2V0c193aXRoX2Nsb2NrX3Jhbmdlc19zb2MxNQotCQkJCQkgICpjbG9ja19y
YW5nZXMpCi17Ci0JaW50IHJldCA9IDA7Ci0Jc3RydWN0IHNtdV90YWJsZSAqd2F0ZXJtYXJrcyA9
ICZzbXUtPnNtdV90YWJsZS50YWJsZXNbU01VX1RBQkxFX1dBVEVSTUFSS1NdOwotCXZvaWQgKnRh
YmxlID0gd2F0ZXJtYXJrcy0+Y3B1X2FkZHI7Ci0KLQlpZiAoIXNtdS0+ZGlzYWJsZV93YXRlcm1h
cmsgJiYKLQkgICAgc211X2ZlYXR1cmVfaXNfZW5hYmxlZChzbXUsIFNNVV9GRUFUVVJFX0RQTV9E
Q0VGQ0xLX0JJVCkgJiYKLQkgICAgc211X2ZlYXR1cmVfaXNfZW5hYmxlZChzbXUsIFNNVV9GRUFU
VVJFX0RQTV9TT0NDTEtfQklUKSkgewotCQlzbXVfc2V0X3dhdGVybWFya3NfdGFibGUoc211LCB0
YWJsZSwgY2xvY2tfcmFuZ2VzKTsKLQkJc211LT53YXRlcm1hcmtzX2JpdG1hcCB8PSBXQVRFUk1B
UktTX0VYSVNUOwotCQlzbXUtPndhdGVybWFya3NfYml0bWFwICY9IH5XQVRFUk1BUktTX0xPQURF
RDsKLQl9Ci0KLQlyZXR1cm4gcmV0OwotfQotCiBzdGF0aWMgaW50IHNtdV92MTFfMF9nZnhfb2Zm
X2NvbnRyb2woc3RydWN0IHNtdV9jb250ZXh0ICpzbXUsIGJvb2wgZW5hYmxlKQogewogCWludCBy
ZXQgPSAwOwpAQCAtMTgxMiw3ICsxNzc1LDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBzbXVfZnVu
Y3Mgc211X3YxMV8wX2Z1bmNzID0gewogCS5wYXJzZV9wcHRhYmxlID0gc211X3YxMV8wX3BhcnNl
X3BwdGFibGUsCiAJLnBvcHVsYXRlX3NtY190YWJsZXMgPSBzbXVfdjExXzBfcG9wdWxhdGVfc21j
X3BwdGFibGUsCiAJLndyaXRlX3BwdGFibGUgPSBzbXVfdjExXzBfd3JpdGVfcHB0YWJsZSwKLQku
d3JpdGVfd2F0ZXJtYXJrc190YWJsZSA9IHNtdV92MTFfMF93cml0ZV93YXRlcm1hcmtzX3RhYmxl
LAogCS5zZXRfbWluX2RjZWZfZGVlcF9zbGVlcCA9IHNtdV92MTFfMF9zZXRfbWluX2RjZWZfZGVl
cF9zbGVlcCwKIAkuc2V0X3Rvb2xfdGFibGVfbG9jYXRpb24gPSBzbXVfdjExXzBfc2V0X3Rvb2xf
dGFibGVfbG9jYXRpb24sCiAJLmluaXRfZGlzcGxheV9jb3VudCA9IHNtdV92MTFfMF9pbml0X2Rp
c3BsYXlfY291bnQsCkBAIC0xODI4LDcgKzE3OTAsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNt
dV9mdW5jcyBzbXVfdjExXzBfZnVuY3MgPSB7CiAJLnJlYWRfc2Vuc29yID0gc211X3YxMV8wX3Jl
YWRfc2Vuc29yLAogCS5zZXRfZGVlcF9zbGVlcF9kY2VmY2xrID0gc211X3YxMV8wX3NldF9kZWVw
X3NsZWVwX2RjZWZjbGssCiAJLmRpc3BsYXlfY2xvY2tfdm9sdGFnZV9yZXF1ZXN0ID0gc211X3Yx
MV8wX2Rpc3BsYXlfY2xvY2tfdm9sdGFnZV9yZXF1ZXN0LAotCS5zZXRfd2F0ZXJtYXJrc19mb3Jf
Y2xvY2tfcmFuZ2VzID0gc211X3YxMV8wX3NldF93YXRlcm1hcmtzX2Zvcl9jbG9ja19yYW5nZXMs
CiAJLmdldF9mYW5fY29udHJvbF9tb2RlID0gc211X3YxMV8wX2dldF9mYW5fY29udHJvbF9tb2Rl
LAogCS5zZXRfZmFuX2NvbnRyb2xfbW9kZSA9IHNtdV92MTFfMF9zZXRfZmFuX2NvbnRyb2xfbW9k
ZSwKIAkuc2V0X2Zhbl9zcGVlZF9wZXJjZW50ID0gc211X3YxMV8wX3NldF9mYW5fc3BlZWRfcGVy
Y2VudCwKLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
