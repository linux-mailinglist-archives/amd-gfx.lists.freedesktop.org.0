Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E231B69E32
	for <lists+amd-gfx@lfdr.de>; Mon, 15 Jul 2019 23:25:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id ADA1289F77;
	Mon, 15 Jul 2019 21:25:44 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-qt1-x841.google.com (mail-qt1-x841.google.com
 [IPv6:2607:f8b0:4864:20::841])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3711089F69
 for <amd-gfx@lists.freedesktop.org>; Mon, 15 Jul 2019 21:25:42 +0000 (UTC)
Received: by mail-qt1-x841.google.com with SMTP id l9so17268921qtu.6
 for <amd-gfx@lists.freedesktop.org>; Mon, 15 Jul 2019 14:25:42 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=LAXfvOv0Z0vuIn9u+59mnzj3/KdcKS96uXyiFyVzrqs=;
 b=c3uyGFF/+YXOQm2aulyl1tZ1LVDbgnQNbvAyWmLiITYs7lF6XKmjsDJZqq0vC7EJ8W
 geHiJXjVjgcVB1F02XtwdNZrOpWLp72dDo904VXVR7/TErze1uU1R3x3thEyHeV+1bMk
 IiB+SVL0atxdwuHPGeDqbspY9LFhPYsj4Uq4eUSsNuwVdqgzHkUupm+h9GDqW2R4LBCk
 QkNrb79HdAuhJb9Ag6wzLnWepltN/4JLjD4caMRTtenoIwfe14pqCC/caEHnNssV8fHg
 nYGyPsEzkBNVPn7a9JG4hrNCUb6XE8apd1j9zhRFNRJJYXGfpgwoyVaQcGF9PfwuSL3R
 mpbA==
X-Gm-Message-State: APjAAAXmBtJDYuVlzbIEkmlGgE60vAHdcFiZLQJhq/vYyTvgJ5bRO3BI
 qu7cuWUjxmEK4kGsoqXVQD2wr6y4
X-Google-Smtp-Source: APXvYqz1e/6dEY3Umadgyl7pp7b1Nez4M2WAYB44J5jalwTpHKuoDaABAnZYZ/PS8zubX9xbgQWUQg==
X-Received: by 2002:ac8:f99:: with SMTP id b25mr13867928qtk.142.1563225940992; 
 Mon, 15 Jul 2019 14:25:40 -0700 (PDT)
Received: from localhost.localdomain ([71.219.21.119])
 by smtp.gmail.com with ESMTPSA id q56sm10274133qtq.64.2019.07.15.14.25.39
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 15 Jul 2019 14:25:40 -0700 (PDT)
From: Alex Deucher <alexdeucher@gmail.com>
X-Google-Original-From: Alex Deucher <alexander.deucher@amd.com>
To: amd-gfx@lists.freedesktop.org
Subject: [PATCH 063/102] drm/amdgpu: add JPEG2.5 HW start and stop
Date: Mon, 15 Jul 2019 16:23:58 -0500
Message-Id: <20190715212437.31793-61-alexander.deucher@amd.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190715212437.31793-1-alexander.deucher@amd.com>
References: <20190715212437.31793-1-alexander.deucher@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=LAXfvOv0Z0vuIn9u+59mnzj3/KdcKS96uXyiFyVzrqs=;
 b=tOi31PAodVn84Qom5MmE7/xkaFioj7UDHYWdkJUflZoOtEfWnWAO6mzwN0sY6yRhl8
 QKgUBfJWtNsuN12RlN57l6959WCibF4Gm/kAomZ3He6mPfecEpf/JVnTGMwBOv8Tervo
 r7eisRBfwsujufdmMefUdfXy+0UT+SsYLV5doirFETqLmQyo22zjWs1UI9ciekL7PG5n
 8FJUbEnhGfJjABH0OCorB8pTzOeFG+J8k0WjzGdF5gpQVN4IgmXUWuXgdbzDxQuLk7pi
 scSX8giRycDZIarVQ5b9vCMQZR0YWQAlWpVUg9U8K2Fhv7HrAHmXkF9Xc0yKYAM2i05U
 EjAQ==
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>, Leo Liu <leo.liu@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

RnJvbTogTGVvIExpdSA8bGVvLmxpdUBhbWQuY29tPgoKSlBFRyBlbmdpbmUgaW5pdGlhbGl6YXRp
b24gYW5kIHN1c3BlbmQgc2VxdWVuY2VzCgpTaWduZWQtb2ZmLWJ5OiBMZW8gTGl1IDxsZW8ubGl1
QGFtZC5jb20+ClJldmlld2VkLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFt
ZC5jb20+ClNpZ25lZC1vZmYtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1k
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92Y25fdjJfNS5jIHwgMTA0ICsr
KysrKysrKysrKysrKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdlZCwgMTA0IGluc2VydGlvbnMo
KykKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92Y25fdjJfNS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmNuX3YyXzUuYwppbmRleCBiNDJmNjc2OWFlMDYu
LjgyYzljNDBlOWFlNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvdmNu
X3YyXzUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS92Y25fdjJfNS5jCkBAIC01
MzAsNiArNTMwLDEwNCBAQCBzdGF0aWMgdm9pZCB2Y25fdjJfNV9lbmFibGVfY2xvY2tfZ2F0aW5n
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCVdSRUczMl9TT0MxNShWQ04sIDAsIG1tVVZE
X1NVVkRfQ0dDX0NUUkwsIGRhdGEpOwogfQogCisvKioKKyAqIGpwZWdfdjJfNV9zdGFydCAtIHN0
YXJ0IEpQRUcgYmxvY2sKKyAqCisgKiBAYWRldjogYW1kZ3B1X2RldmljZSBwb2ludGVyCisgKgor
ICogU2V0dXAgYW5kIHN0YXJ0IHRoZSBKUEVHIGJsb2NrCisgKi8KK3N0YXRpYyBpbnQganBlZ192
Ml81X3N0YXJ0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQoreworCXN0cnVjdCBhbWRncHVf
cmluZyAqcmluZyA9ICZhZGV2LT52Y24ucmluZ19qcGVnOworCXVpbnQzMl90IHRtcDsKKworCS8q
IGRpc2FibGUgYW50aSBoYW5nIG1lY2hhbmlzbSAqLworCVdSRUczMl9QKFNPQzE1X1JFR19PRkZT
RVQoVVZELCAwLCBtbVVWRF9KUEVHX1BPV0VSX1NUQVRVUyksIDAsCisJCX5VVkRfSlBFR19QT1dF
Ul9TVEFUVVNfX0pQRUdfUE9XRVJfU1RBVFVTX01BU0spOworCisJLyogSlBFRyBkaXNhYmxlIENH
QyAqLworCXRtcCA9IFJSRUczMl9TT0MxNShWQ04sIDAsIG1tSlBFR19DR0NfQ1RSTCk7CisJdG1w
IHw9IDEgPDwgSlBFR19DR0NfQ1RSTF9fRFlOX0NMT0NLX01PREVfX1NISUZUOworCXRtcCB8PSAx
IDw8IEpQRUdfQ0dDX0NUUkxfX0NMS19HQVRFX0RMWV9USU1FUl9fU0hJRlQ7CisJdG1wIHw9IDQg
PDwgSlBFR19DR0NfQ1RSTF9fQ0xLX09GRl9ERUxBWV9fU0hJRlQ7CisJV1JFRzMyX1NPQzE1KFZD
TiwgMCwgbW1KUEVHX0NHQ19DVFJMLCB0bXApOworCisJdG1wID0gUlJFRzMyX1NPQzE1KFZDTiwg
MCwgbW1KUEVHX0NHQ19HQVRFKTsKKwl0bXAgJj0gfihKUEVHX0NHQ19HQVRFX19KUEVHX0RFQ19N
QVNLCisJCXwgSlBFR19DR0NfR0FURV9fSlBFRzJfREVDX01BU0sKKwkJfCBKUEVHX0NHQ19HQVRF
X19KTUNJRl9NQVNLCisJCXwgSlBFR19DR0NfR0FURV9fSlJCQk1fTUFTSyk7CisJV1JFRzMyX1NP
QzE1KFZDTiwgMCwgbW1KUEVHX0NHQ19HQVRFLCB0bXApOworCisJdG1wID0gUlJFRzMyX1NPQzE1
KFZDTiwgMCwgbW1KUEVHX0NHQ19DVFJMKTsKKwl0bXAgJj0gfihKUEVHX0NHQ19DVFJMX19KUEVH
X0RFQ19NT0RFX01BU0sKKwkJfCBKUEVHX0NHQ19DVFJMX19KUEVHMl9ERUNfTU9ERV9NQVNLCisJ
CXwgSlBFR19DR0NfQ1RSTF9fSk1DSUZfTU9ERV9NQVNLCisJCXwgSlBFR19DR0NfQ1RSTF9fSlJC
Qk1fTU9ERV9NQVNLKTsKKwlXUkVHMzJfU09DMTUoVkNOLCAwLCBtbUpQRUdfQ0dDX0NUUkwsIHRt
cCk7CisKKwkvKiBNSlBFRyBnbG9iYWwgdGlsaW5nIHJlZ2lzdGVycyAqLworCVdSRUczMl9TT0Mx
NShVVkQsIDAsIG1tSlBFR19ERUNfR0ZYOF9BRERSX0NPTkZJRywKKwkJYWRldi0+Z2Z4LmNvbmZp
Zy5nYl9hZGRyX2NvbmZpZyk7CisJV1JFRzMyX1NPQzE1KFVWRCwgMCwgbW1KUEVHX0RFQ19HRlgx
MF9BRERSX0NPTkZJRywKKwkJYWRldi0+Z2Z4LmNvbmZpZy5nYl9hZGRyX2NvbmZpZyk7CisKKwkv
KiBlbmFibGUgSk1JIGNoYW5uZWwgKi8KKwlXUkVHMzJfUChTT0MxNV9SRUdfT0ZGU0VUKFVWRCwg
MCwgbW1VVkRfSk1JX0NOVEwpLCAwLAorCQl+VVZEX0pNSV9DTlRMX19TT0ZUX1JFU0VUX01BU0sp
OworCisJLyogZW5hYmxlIFN5c3RlbSBJbnRlcnJ1cHQgZm9yIEpSQkMgKi8KKwlXUkVHMzJfUChT
T0MxNV9SRUdfT0ZGU0VUKFZDTiwgMCwgbW1KUEVHX1NZU19JTlRfRU4pLAorCQlKUEVHX1NZU19J
TlRfRU5fX0RKUkJDX01BU0ssCisJCX5KUEVHX1NZU19JTlRfRU5fX0RKUkJDX01BU0spOworCisJ
V1JFRzMyX1NPQzE1KFVWRCwgMCwgbW1VVkRfTE1JX0pSQkNfUkJfVk1JRCwgMCk7CisJV1JFRzMy
X1NPQzE1KFVWRCwgMCwgbW1VVkRfSlJCQ19SQl9DTlRMLCAoMHgwMDAwMDAwMUwgfCAweDAwMDAw
MDAyTCkpOworCVdSRUczMl9TT0MxNShVVkQsIDAsIG1tVVZEX0xNSV9KUkJDX1JCXzY0QklUX0JB
Ul9MT1csCisJCWxvd2VyXzMyX2JpdHMocmluZy0+Z3B1X2FkZHIpKTsKKwlXUkVHMzJfU09DMTUo
VVZELCAwLCBtbVVWRF9MTUlfSlJCQ19SQl82NEJJVF9CQVJfSElHSCwKKwkJdXBwZXJfMzJfYml0
cyhyaW5nLT5ncHVfYWRkcikpOworCVdSRUczMl9TT0MxNShVVkQsIDAsIG1tVVZEX0pSQkNfUkJf
UlBUUiwgMCk7CisJV1JFRzMyX1NPQzE1KFVWRCwgMCwgbW1VVkRfSlJCQ19SQl9XUFRSLCAwKTsK
KwlXUkVHMzJfU09DMTUoVVZELCAwLCBtbVVWRF9KUkJDX1JCX0NOVEwsIDB4MDAwMDAwMDJMKTsK
KwlXUkVHMzJfU09DMTUoVVZELCAwLCBtbVVWRF9KUkJDX1JCX1NJWkUsIHJpbmctPnJpbmdfc2l6
ZSAvIDQpOworCXJpbmctPndwdHIgPSBSUkVHMzJfU09DMTUoVVZELCAwLCBtbVVWRF9KUkJDX1JC
X1dQVFIpOworCisJcmV0dXJuIDA7Cit9CisKKy8qKgorICoganBlZ192Ml81X3N0b3AgLSBzdG9w
IEpQRUcgYmxvY2sKKyAqCisgKiBAYWRldjogYW1kZ3B1X2RldmljZSBwb2ludGVyCisgKgorICog
c3RvcCB0aGUgSlBFRyBibG9jaworICovCitzdGF0aWMgaW50IGpwZWdfdjJfNV9zdG9wKHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2KQoreworCXVpbnQzMl90IHRtcDsKKworCS8qIHJlc2V0IEpN
SSAqLworCVdSRUczMl9QKFNPQzE1X1JFR19PRkZTRVQoVVZELCAwLCBtbVVWRF9KTUlfQ05UTCks
CisJCVVWRF9KTUlfQ05UTF9fU09GVF9SRVNFVF9NQVNLLAorCQl+VVZEX0pNSV9DTlRMX19TT0ZU
X1JFU0VUX01BU0spOworCisJdG1wID0gUlJFRzMyX1NPQzE1KFZDTiwgMCwgbW1KUEVHX0NHQ19H
QVRFKTsKKwl0bXAgfD0gKEpQRUdfQ0dDX0dBVEVfX0pQRUdfREVDX01BU0sKKwkJfEpQRUdfQ0dD
X0dBVEVfX0pQRUcyX0RFQ19NQVNLCisJCXxKUEVHX0NHQ19HQVRFX19KTUNJRl9NQVNLCisJCXxK
UEVHX0NHQ19HQVRFX19KUkJCTV9NQVNLKTsKKwlXUkVHMzJfU09DMTUoVkNOLCAwLCBtbUpQRUdf
Q0dDX0dBVEUsIHRtcCk7CisKKwkvKiBlbmFibGUgYW50aSBoYW5nIG1lY2hhbmlzbSAqLworCVdS
RUczMl9QKFNPQzE1X1JFR19PRkZTRVQoVVZELCAwLCBtbVVWRF9KUEVHX1BPV0VSX1NUQVRVUyks
CisJCVVWRF9KUEVHX1BPV0VSX1NUQVRVU19fSlBFR19QT1dFUl9TVEFUVVNfTUFTSywKKwkJflVW
RF9KUEVHX1BPV0VSX1NUQVRVU19fSlBFR19QT1dFUl9TVEFUVVNfTUFTSyk7CisKKwlyZXR1cm4g
MDsKK30KKwogc3RhdGljIGludCB2Y25fdjJfNV9zdGFydChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikKIHsKIAlzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcgPSAmYWRldi0+dmNuLnJpbmdfZGVj
OwpAQCAtNjg4LDYgKzc4Niw4IEBAIHN0YXRpYyBpbnQgdmNuX3YyXzVfc3RhcnQoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYpCiAJV1JFRzMyX1NPQzE1KFVWRCwgMCwgbW1VVkRfUkJfQkFTRV9I
STIsIHVwcGVyXzMyX2JpdHMocmluZy0+Z3B1X2FkZHIpKTsKIAlXUkVHMzJfU09DMTUoVVZELCAw
LCBtbVVWRF9SQl9TSVpFMiwgcmluZy0+cmluZ19zaXplIC8gNCk7CiAKKwlyID0ganBlZ192Ml81
X3N0YXJ0KGFkZXYpOworCiAJcmV0dXJuIHI7CiB9CiAKQEAgLTY5Niw2ICs3OTYsMTAgQEAgc3Rh
dGljIGludCB2Y25fdjJfNV9zdG9wKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCXVpbnQz
Ml90IHRtcDsKIAlpbnQgcjsKIAorCXIgPSBqcGVnX3YyXzVfc3RvcChhZGV2KTsKKwlpZiAocikK
KwkJcmV0dXJuIHI7CisKIAkvKiB3YWl0IGZvciB2Y24gaWRsZSAqLwogCVNPQzE1X1dBSVRfT05f
UlJFRyhWQ04sIDAsIG1tVVZEX1NUQVRVUywgVVZEX1NUQVRVU19fSURMRSwgMHg3LCByKTsKIAlp
ZiAocikKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4
