Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0E03371C9F
	for <lists+amd-gfx@lfdr.de>; Tue, 23 Jul 2019 18:15:25 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8CBCF6E2FF;
	Tue, 23 Jul 2019 16:15:23 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM05-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr720074.outbound.protection.outlook.com [40.107.72.74])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3F1AB6E2FF
 for <amd-gfx@lists.freedesktop.org>; Tue, 23 Jul 2019 16:15:22 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=D8Fa3G+IhzZMEoqiSuW6lA8raYs2dmWnsI0a0QKStGuBEk4IWmu2XaLvgfQq3lL+StBTBBLoqFGUV0zrx401DkiqYSPotc417q5NgNZ0D/e/iNfdsybHPDEirGifIr/GmcqO5u7ocatio3g4ArIZmxxHldjIbhftzTGu4Ewfva3LwcJik+T5TOhmTb5V1P/Grl931Y7GJzycxxNKl+CTiiSAdHvERLhLTZFMpX1GIfONyazOwi09jrR8RYTM2A6aJ5Yc7J06xbMlkOvkRdAZQ46uTP/9aJSmHZyHX1zgWBG86lUy9znnsebmH+ypKgJQnhyXzNqP7OYBwQnXJqmFEQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=O2nwH+1BSNTmtgS7lvi9VUJ5LdQdNXyGZ7jpwltt0Ek=;
 b=UNGP4L4roaZ81yXiZ6TPt1dSFMyKoJXQjjeNCpIG7ReS0d6+qxe+ExMAdp8FmvFuB9DLpzjYcweGu76whbrmJVWB5/KrbC6Xkqui2IZBcskX/5HfgJyTcz3eQXK3yEeY3ToaYYMQbkX6LuirLOi5P4MCxkKrAbP+XEGA7XRkeFAgHNMw/ddGyYbBRrrpft0W1AufMZE6I1ICOH5hdKLkr2x5dnbwfeKy5kt1WuRNErv1p4EhOOK+otomen1tjJB5YC7aosY6WgD9qS8PszfsbGmCf3vx48FN5m9xTQbF7Brj9bpo8Udvl8prRQgslA2Fi+cM33M3R+L8QcbGz9ZeCA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=amd.com;dmarc=pass action=none header.from=amd.com;dkim=pass
 header.d=amd.com;arc=none
Received: from BN6PR12MB1618.namprd12.prod.outlook.com (10.172.21.149) by
 BN6PR12MB1620.namprd12.prod.outlook.com (10.172.24.23) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2094.16; Tue, 23 Jul 2019 16:15:19 +0000
Received: from BN6PR12MB1618.namprd12.prod.outlook.com
 ([fe80::9134:e36a:9204:a483]) by BN6PR12MB1618.namprd12.prod.outlook.com
 ([fe80::9134:e36a:9204:a483%4]) with mapi id 15.20.2094.013; Tue, 23 Jul 2019
 16:15:19 +0000
From: "Russell, Kent" <Kent.Russell@amd.com>
To: "Kim, Jonathan" <Jonathan.Kim@amd.com>, "amd-gfx@lists.freedesktop.org"
 <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH 2/3] drm/amdgpu: add perfmon and fica atomics for df
Thread-Topic: [PATCH 2/3] drm/amdgpu: add perfmon and fica atomics for df
Thread-Index: AQHVO/kciHXsTpwjmkCzl7i5kFXriabNexgggArwiTA=
Date: Tue, 23 Jul 2019 16:15:19 +0000
Message-ID: <BN6PR12MB1618D7F9D19CD0B446AE8C9E85C70@BN6PR12MB1618.namprd12.prod.outlook.com>
References: <20190716170825.97385-1-jonathan.kim@amd.com>
 <CH2PR12MB3831FEB486B7716B39E7A47185CE0@CH2PR12MB3831.namprd12.prod.outlook.com>
In-Reply-To: <CH2PR12MB3831FEB486B7716B39E7A47185CE0@CH2PR12MB3831.namprd12.prod.outlook.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [2607:fea8:1ca0:3f2:9d6f:eb5c:5991:9000]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: aa6a26c7-47bd-4fc6-3c5c-08d70f88f50d
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:BN6PR12MB1620; 
x-ms-traffictypediagnostic: BN6PR12MB1620:
x-ms-exchange-purlcount: 1
x-microsoft-antispam-prvs: <BN6PR12MB1620CDEC92D38971965C3E6185C70@BN6PR12MB1620.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:2958;
x-forefront-prvs: 0107098B6C
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(136003)(366004)(376002)(346002)(396003)(199004)(189003)(13464003)(66556008)(66946007)(64756008)(66446008)(66476007)(99286004)(76116006)(53936002)(229853002)(52536014)(6246003)(71200400001)(71190400001)(25786009)(30864003)(6436002)(55016002)(86362001)(81166006)(2501003)(9686003)(6306002)(256004)(53546011)(966005)(6506007)(81156014)(486006)(102836004)(74316002)(8936002)(76176011)(305945005)(8676002)(14454004)(33656002)(11346002)(7696005)(316002)(5660300002)(186003)(68736007)(110136005)(476003)(46003)(6116002)(14444005)(2906002)(446003)(7736002)(478600001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BN6PR12MB1620;
 H:BN6PR12MB1618.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: UXQwmVMv5DPsonMRN26FX4+1yXZ1xXzyo1HH60KoWs/6EolXubcPeUs9ik0cLoHi01ybNd6I/rZSihxpzZu99staHszvrV9nb7455AjjSZskCaU9KjQBGMz8Eoz5V7whLJ/4SXfIrNQZxuGEzXCwxZ/x1y1SVtpx6LPw3/JjddBZOmIQflFLfN7UUD2cuA4a8IjPkEQd+V5BPxS9F3EINO15bPF0HR4o+edfn2gIiRqhLmR656CG8jgFXgbUaWFJnlDPH+yHdcNVhBZQBJDEEjRTdEyM0/Y6m/r5awklbcjNJeePtjSFTFYzAKNbd3rUvFaazmC2lMf3YbX0cR65JmoWowaPz61RIKU3QVN+LptdDFnyjRHchm5lUuHiUSovDHhlXHt+KgJVIPNbCG0acCq9K8auvCQCuugaIv6s01U=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: aa6a26c7-47bd-4fc6-3c5c-08d70f88f50d
X-MS-Exchange-CrossTenant-originalarrivaltime: 23 Jul 2019 16:15:19.5939 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: krussell@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN6PR12MB1620
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=O2nwH+1BSNTmtgS7lvi9VUJ5LdQdNXyGZ7jpwltt0Ek=;
 b=Pfoo3G1m5nWyAWMYYN00uxIqs4zhoEN1naNJoINux+sfZxalccTNXfgs5Wv6+OEg/zRZk6MnwU1PJl+3/KyomKUcFYN+TtbjC7iLuzrUMenDHS3XVqWiu4z5g9zepxEK5tBFGDUB3izinzN9ZpPOyURBSmrZiLz4aO39YR17ZHk=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Kent.Russell@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

UmV2aWV3ZWQtQnk6IEtlbnQgUnVzc2VsbCA8a2VudC5ydXNzZWxsQGFtZC5jb20+DQoNCiBLZW50
DQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBhbWQtZ2Z4IDxhbWQtZ2Z4LWJv
dW5jZXNAbGlzdHMuZnJlZWRlc2t0b3Aub3JnPiBPbiBCZWhhbGYgT2YgS2ltLCBKb25hdGhhbg0K
U2VudDogVHVlc2RheSwgSnVseSAxNiwgMjAxOSAxOjEyIFBNDQpUbzogYW1kLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcNClN1YmplY3Q6IFJFOiBbUEFUQ0ggMi8zXSBkcm0vYW1kZ3B1OiBhZGQg
cGVyZm1vbiBhbmQgZmljYSBhdG9taWNzIGZvciBkZg0KDQpOb3RlIHBhdGNoIDEgc2VudCB0byBp
bnRlcm5hbCBhbWQgbWFpbGluZyBsaXN0IGZvciByZXZpZXcuDQoNCi0tLS0tT3JpZ2luYWwgTWVz
c2FnZS0tLS0tDQpGcm9tOiBLaW0sIEpvbmF0aGFuIDxKb25hdGhhbi5LaW1AYW1kLmNvbT4NClNl
bnQ6IFR1ZXNkYXksIEp1bHkgMTYsIDIwMTkgMTowOSBQTQ0KVG86IGFtZC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnDQpDYzogS2ltLCBKb25hdGhhbiA8Sm9uYXRoYW4uS2ltQGFtZC5jb20+OyBL
aW0sIEpvbmF0aGFuIDxKb25hdGhhbi5LaW1AYW1kLmNvbT4NClN1YmplY3Q6IFtQQVRDSCAyLzNd
IGRybS9hbWRncHU6IGFkZCBwZXJmbW9uIGFuZCBmaWNhIGF0b21pY3MgZm9yIGRmDQoNCmFkZGlu
ZyBwZXJmbW9uIGFuZCBmaWNhIGF0b21pYyBvcGVyYXRpb25zIHRvIGFkaGVyZSB0byBkYXRhIGZh
YnJpY3MgZmluaXRlIHN0YXRlIG1hY2hpbmUgcmVxdWlyZW1lbnRzIGZvciBpbmRpcmVjdCByZWdp
c3RlciBhY2Nlc3MuDQoNCkNoYW5nZS1JZDogSTJhYjE3ZmQ1OWQ1NjZiNDI1MWM5YTlkMGU2N2I4
OTdiOGMyMjEyNDkNClNpZ25lZC1vZmYtYnk6IEpvbmF0aGFuIEtpbSA8Sm9uYXRoYW4uS2ltQGFt
ZC5jb20+DQotLS0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUuaCAgfCAgIDMg
Kw0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuYyB8IDIwMiArKysrKysrKysr
KysrKysrKy0tLS0tLS0tLS0NCiAyIGZpbGVzIGNoYW5nZWQsIDEyOCBpbnNlcnRpb25zKCspLCA3
NyBkZWxldGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1LmgNCmluZGV4IDJj
ZGY0NmJiZWRkZi4uNzdjYTE5NGIxM2QwIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1LmgNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dS5oDQpAQCAtNzA4LDYgKzcwOCw5IEBAIHN0cnVjdCBhbWRncHVfZGZfZnVuY3Mgew0KIAkJCQkJ
IGludCBpc19kaXNhYmxlKTsNCiAJdm9pZCAoKnBtY19nZXRfY291bnQpKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LCB1aW50NjRfdCBjb25maWcsDQogCQkJCQkgdWludDY0X3QgKmNvdW50KTsN
CisJdWludDY0X3QgKCpnZXRfZmljYSkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVpbnQz
Ml90IGZpY2FhX3ZhbCk7DQorCXZvaWQgKCpzZXRfZmljYSkoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsIHVpbnQzMl90IGZpY2FhX3ZhbCwNCisJCQkgdWludDMyX3QgZmljYWRsX3ZhbCwgdWlu
dDMyX3QgZmljYWRoX3ZhbCk7DQogfTsNCiAvKiBEZWZpbmUgdGhlIEhXIElQIGJsb2NrcyB3aWxs
IGJlIHVzZWQgaW4gZHJpdmVyICwgYWRkIG1vcmUgaWYgbmVjZXNzYXJ5ICovICBlbnVtIGFtZF9o
d19pcF9ibG9ja190eXBlIHsgZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2RmX3YzXzYuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuYw0KaW5kZXgg
ZWY2ZTkxZjlmNTFjLi41ODUwYzhlMzRjYWEgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9kZl92M182LmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Rm
X3YzXzYuYw0KQEAgLTkzLDYgKzkzLDk2IEBAIGNvbnN0IHN0cnVjdCBhdHRyaWJ1dGVfZ3JvdXAg
KmRmX3YzXzZfYXR0cl9ncm91cHNbXSA9IHsNCiAJCU5VTEwNCiB9Ow0KIA0KK3N0YXRpYyB1aW50
NjRfdCBkZl92M182X2dldF9maWNhKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KKwkJCQkg
dWludDMyX3QgZmljYWFfdmFsKQ0KK3sNCisJdW5zaWduZWQgbG9uZyBmbGFncywgYWRkcmVzcywg
ZGF0YTsNCisJdWludDMyX3QgZmljYWRsX3ZhbCwgZmljYWRoX3ZhbDsNCisNCisJYWRkcmVzcyA9
IGFkZXYtPm5iaW9fZnVuY3MtPmdldF9wY2llX2luZGV4X29mZnNldChhZGV2KTsNCisJZGF0YSA9
IGFkZXYtPm5iaW9fZnVuY3MtPmdldF9wY2llX2RhdGFfb2Zmc2V0KGFkZXYpOw0KKw0KKwlzcGlu
X2xvY2tfaXJxc2F2ZSgmYWRldi0+cGNpZV9pZHhfbG9jaywgZmxhZ3MpOw0KKwlXUkVHMzIoYWRk
cmVzcywgc21uREZfUElFX0FPTl9GYWJyaWNJbmRpcmVjdENvbmZpZ0FjY2Vzc0FkZHJlc3MzKTsN
CisJV1JFRzMyKGRhdGEsIGZpY2FhX3ZhbCk7DQorDQorCVdSRUczMihhZGRyZXNzLCBzbW5ERl9Q
SUVfQU9OX0ZhYnJpY0luZGlyZWN0Q29uZmlnQWNjZXNzRGF0YUxvMyk7DQorCWZpY2FkbF92YWwg
PSBSUkVHMzIoZGF0YSk7DQorDQorCVdSRUczMihhZGRyZXNzLCBzbW5ERl9QSUVfQU9OX0ZhYnJp
Y0luZGlyZWN0Q29uZmlnQWNjZXNzRGF0YUhpMyk7DQorCWZpY2FkaF92YWwgPSBSUkVHMzIoZGF0
YSk7DQorDQorCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZs
YWdzKTsNCisNCisJcmV0dXJuICgoKGZpY2FkaF92YWwgJiAweEZGRkZGRkZGRkZGRkZGRkYpIDw8
IDMyKSB8IGZpY2FkbF92YWwpOyB9DQorDQorc3RhdGljIHZvaWQgZGZfdjNfNl9zZXRfZmljYShz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDMyX3QgZmljYWFfdmFsLA0KKwkJCSAgICAg
dWludDMyX3QgZmljYWRsX3ZhbCwgdWludDMyX3QgZmljYWRoX3ZhbCkgew0KKwl1bnNpZ25lZCBs
b25nIGZsYWdzLCBhZGRyZXNzLCBkYXRhOw0KKw0KKwlhZGRyZXNzID0gYWRldi0+bmJpb19mdW5j
cy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFkZXYpOw0KKwlkYXRhID0gYWRldi0+bmJpb19mdW5j
cy0+Z2V0X3BjaWVfZGF0YV9vZmZzZXQoYWRldik7DQorDQorCXNwaW5fbG9ja19pcnFzYXZlKCZh
ZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7DQorCVdSRUczMihhZGRyZXNzLCBzbW5ERl9QSUVf
QU9OX0ZhYnJpY0luZGlyZWN0Q29uZmlnQWNjZXNzQWRkcmVzczMpOw0KKwlXUkVHMzIoZGF0YSwg
ZmljYWFfdmFsKTsNCisNCisJV1JFRzMyKGFkZHJlc3MsIHNtbkRGX1BJRV9BT05fRmFicmljSW5k
aXJlY3RDb25maWdBY2Nlc3NEYXRhTG8zKTsNCisJV1JFRzMyKGRhdGEsIGZpY2FkbF92YWwpOw0K
Kw0KKwlXUkVHMzIoYWRkcmVzcywgc21uREZfUElFX0FPTl9GYWJyaWNJbmRpcmVjdENvbmZpZ0Fj
Y2Vzc0RhdGFIaTMpOw0KKwlXUkVHMzIoZGF0YSwgZmljYWRoX3ZhbCk7DQorDQorCXNwaW5fdW5s
b2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsgfQ0KKw0KKy8qDQor
ICogZGZfdjNfNl9wZXJmbW9uX3JyZWcgLSByZWFkIHBlcmZtb24gbG8gYW5kIGhpDQorICoNCisg
KiByZXF1aXJlZCB0byBiZSBhdG9taWMuICBubyBtbWlvIG1ldGhvZCBwcm92aWRlZCBzbyBzdWJz
ZXF1ZW50IHJlYWRzIA0KK2ZvciBsbw0KKyAqIGFuZCBoaSByZXF1aXJlIHRvIHByZXNlcnZlIGRm
IGZpbml0ZSBzdGF0ZSBtYWNoaW5lICAqLyBzdGF0aWMgdm9pZCANCitkZl92M182X3BlcmZtb25f
cnJlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCisJCQkgICAgdWludDMyX3QgbG9fYWRk
ciwgdWludDMyX3QgKmxvX3ZhbCwNCisJCQkgICAgdWludDMyX3QgaGlfYWRkciwgdWludDMyX3Qg
KmhpX3ZhbCkgew0KKwl1bnNpZ25lZCBsb25nIGZsYWdzLCBhZGRyZXNzLCBkYXRhOw0KKw0KKwlh
ZGRyZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfaW5kZXhfb2Zmc2V0KGFkZXYpOw0K
KwlkYXRhID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfZGF0YV9vZmZzZXQoYWRldik7DQor
DQorCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7DQorCVdS
RUczMihhZGRyZXNzLCBsb19hZGRyKTsNCisJKmxvX3ZhbCA9IFJSRUczMihkYXRhKTsNCisJV1JF
RzMyKGFkZHJlc3MsIGhpX2FkZHIpOw0KKwkqaGlfdmFsID0gUlJFRzMyKGRhdGEpOw0KKwlzcGlu
X3VubG9ja19pcnFyZXN0b3JlKCZhZGV2LT5wY2llX2lkeF9sb2NrLCBmbGFncyk7IH0NCisNCisv
Kg0KKyAqIGRmX3YzXzZfcGVyZm1vbl93cmVnIC0gd3JpdGUgdG8gcGVyZm1vbiBsbyBhbmQgaGkN
CisgKg0KKyAqIHJlcXVpcmVkIHRvIGJlIGF0b21pYy4gIG5vIG1taW8gbWV0aG9kIHByb3ZpZGVk
IHNvIHN1YnNlcXVlbnQgcmVhZHMgDQorYWZ0ZXINCisgKiBkYXRhIHdyaXRlcyBjYW5ub3Qgb2Nj
dXIgdG8gcHJlc2VydmUgZGF0YSBmYWJyaWNzIGZpbml0ZSBzdGF0ZSBtYWNoaW5lLg0KKyAqLw0K
K3N0YXRpYyB2b2lkIGRmX3YzXzZfcGVyZm1vbl93cmVnKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2LCB1aW50MzJfdCBsb19hZGRyLA0KKwkJCSAgICB1aW50MzJfdCBsb192YWwsIHVpbnQzMl90
IGhpX2FkZHIsIHVpbnQzMl90IGhpX3ZhbCkgew0KKwl1bnNpZ25lZCBsb25nIGZsYWdzLCBhZGRy
ZXNzLCBkYXRhOw0KKw0KKwlhZGRyZXNzID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfaW5k
ZXhfb2Zmc2V0KGFkZXYpOw0KKwlkYXRhID0gYWRldi0+bmJpb19mdW5jcy0+Z2V0X3BjaWVfZGF0
YV9vZmZzZXQoYWRldik7DQorDQorCXNwaW5fbG9ja19pcnFzYXZlKCZhZGV2LT5wY2llX2lkeF9s
b2NrLCBmbGFncyk7DQorCVdSRUczMihhZGRyZXNzLCBsb19hZGRyKTsNCisJV1JFRzMyKGRhdGEs
IGxvX3ZhbCk7DQorCVdSRUczMihhZGRyZXNzLCBoaV9hZGRyKTsNCisJV1JFRzMyKGRhdGEsIGhp
X3ZhbCk7DQorCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZs
YWdzKTsgfQ0KKw0KIC8qIGdldCB0aGUgbnVtYmVyIG9mIGRmIGNvdW50ZXJzIGF2YWlsYWJsZSAq
LyAgc3RhdGljIHNzaXplX3QgZGZfdjNfNl9nZXRfZGZfY250cl9hdmFpbChzdHJ1Y3QgZGV2aWNl
ICpkZXYsDQogCQlzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwNCkBAIC0yNjgsNiArMzU4
LDEwIEBAIHN0YXRpYyBpbnQgZGZfdjNfNl9wbWNfZ2V0X2N0cmxfc2V0dGluZ3Moc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsDQogCQkJCQkgIHVpbnQzMl90ICpsb192YWwsDQogCQkJCQkgIHVp
bnQzMl90ICpoaV92YWwpDQogew0KKw0KKwl1aW50MzJfdCBldmVudHNlbCwgaW5zdGFuY2UsIHVu
aXRtYXNrOw0KKwl1aW50MzJfdCBpbnN0YW5jZV8xMCwgaW5zdGFuY2VfNTQzMiwgaW5zdGFuY2Vf
NzY7DQorDQogCWRmX3YzXzZfcG1jX2dldF9hZGRyKGFkZXYsIGNvbmZpZywgMSwgbG9fYmFzZV9h
ZGRyLCBoaV9iYXNlX2FkZHIpOw0KIA0KIAlpZiAoKCpsb19iYXNlX2FkZHIgPT0gMCkgfHwgKCpo
aV9iYXNlX2FkZHIgPT0gMCkpIHsgQEAgLTI3Niw0MCArMzcwLDMzIEBAIHN0YXRpYyBpbnQgZGZf
djNfNl9wbWNfZ2V0X2N0cmxfc2V0dGluZ3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQog
CQlyZXR1cm4gLUVOWElPOw0KIAl9DQogDQotCWlmIChsb192YWwgJiYgaGlfdmFsKSB7DQotCQl1
aW50MzJfdCBldmVudHNlbCwgaW5zdGFuY2UsIHVuaXRtYXNrOw0KLQkJdWludDMyX3QgaW5zdGFu
Y2VfMTAsIGluc3RhbmNlXzU0MzIsIGluc3RhbmNlXzc2Ow0KKwlldmVudHNlbCA9IERGX1YzXzZf
R0VUX0VWRU5UKGNvbmZpZykgJiAweDNmOw0KKwl1bml0bWFzayA9IERGX1YzXzZfR0VUX1VOSVRN
QVNLKGNvbmZpZykgJiAweGY7DQorCWluc3RhbmNlID0gREZfVjNfNl9HRVRfSU5TVEFOQ0UoY29u
ZmlnKTsNCiANCi0JCWV2ZW50c2VsID0gREZfVjNfNl9HRVRfRVZFTlQoY29uZmlnKSAmIDB4M2Y7
DQotCQl1bml0bWFzayA9IERGX1YzXzZfR0VUX1VOSVRNQVNLKGNvbmZpZykgJiAweGY7DQotCQlp
bnN0YW5jZSA9IERGX1YzXzZfR0VUX0lOU1RBTkNFKGNvbmZpZyk7DQorCWluc3RhbmNlXzEwID0g
aW5zdGFuY2UgJiAweDM7DQorCWluc3RhbmNlXzU0MzIgPSAoaW5zdGFuY2UgPj4gMikgJiAweGY7
DQorCWluc3RhbmNlXzc2ID0gKGluc3RhbmNlID4+IDYpICYgMHgzOw0KIA0KLQkJaW5zdGFuY2Vf
MTAgPSBpbnN0YW5jZSAmIDB4MzsNCi0JCWluc3RhbmNlXzU0MzIgPSAoaW5zdGFuY2UgPj4gMikg
JiAweGY7DQotCQlpbnN0YW5jZV83NiA9IChpbnN0YW5jZSA+PiA2KSAmIDB4MzsNCisJKmxvX3Zh
bCA9ICh1bml0bWFzayA8PCA4KSB8IChpbnN0YW5jZV8xMCA8PCA2KSB8IGV2ZW50c2VsIHwgKDEg
PDwgMjIpOw0KKwkqaGlfdmFsID0gKGluc3RhbmNlXzc2IDw8IDI5KSB8IGluc3RhbmNlXzU0MzI7
DQogDQotCQkqbG9fdmFsID0gKHVuaXRtYXNrIDw8IDgpIHwgKGluc3RhbmNlXzEwIDw8IDYpIHwg
ZXZlbnRzZWw7DQotCQkqaGlfdmFsID0gKGluc3RhbmNlXzc2IDw8IDI5KSB8IGluc3RhbmNlXzU0
MzI7DQotCX0NCisJRFJNX0RFQlVHX0RSSVZFUigiY29uZmlnPSVsbHggYWRkcj0lMDh4OiUwOHgg
dmFsPSUwOHg6JTA4eCIsDQorCQljb25maWcsICpsb19iYXNlX2FkZHIsICpoaV9iYXNlX2FkZHIs
ICpsb192YWwsICpoaV92YWwpOw0KIA0KIAlyZXR1cm4gMDsNCiB9DQogDQotLyogYXNzaWduIGRm
IHBlcmZvcm1hbmNlIGNvdW50ZXJzIGZvciByZWFkICovIC1zdGF0aWMgaW50IGRmX3YzXzZfcG1j
X2Fzc2lnbl9jbnRyKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LA0KLQkJCQkgICB1aW50NjRf
dCBjb25maWcsDQotCQkJCSAgIGludCAqaXNfYXNzaWduZWQpDQorLyogYWRkIGRmIHBlcmZvcm1h
bmNlIGNvdW50ZXJzIGZvciByZWFkICovIHN0YXRpYyBpbnQgDQorZGZfdjNfNl9wbWNfYWRkX2Nu
dHIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQorCQkJCSAgIHVpbnQ2NF90IGNvbmZpZykN
CiB7DQogCWludCBpLCB0YXJnZXRfY250cjsNCiANCi0JKmlzX2Fzc2lnbmVkID0gMDsNCi0NCiAJ
dGFyZ2V0X2NudHIgPSBkZl92M182X3BtY19jb25maWdfMl9jbnRyKGFkZXYsIGNvbmZpZyk7DQog
DQotCWlmICh0YXJnZXRfY250ciA+PSAwKSB7DQotCQkqaXNfYXNzaWduZWQgPSAxOw0KKwlpZiAo
dGFyZ2V0X2NudHIgPj0gMCkNCiAJCXJldHVybiAwOw0KLQl9DQogDQogCWZvciAoaSA9IDA7IGkg
PCBERl9WM182X01BWF9DT1VOVEVSUzsgaSsrKSB7DQogCQlpZiAoYWRldi0+ZGZfcGVyZm1vbl9j
b25maWdfYXNzaWduX21hc2tbaV0gPT0gMFUpIHsgQEAgLTM0NCw0NSArNDMxLDEzIEBAIHN0YXRp
YyB2b2lkIGRmX3YzXzZfcmVzZXRfcGVyZm1vbl9jbnRyKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2LA0KIAlpZiAoKGxvX2Jhc2VfYWRkciA9PSAwKSB8fCAoaGlfYmFzZV9hZGRyID09IDApKQ0K
IAkJcmV0dXJuOw0KIA0KLQlXUkVHMzJfUENJRShsb19iYXNlX2FkZHIsIDBVTCk7DQotCVdSRUcz
Ml9QQ0lFKGhpX2Jhc2VfYWRkciwgMFVMKTsNCi19DQotDQotDQotc3RhdGljIGludCBkZl92M182
X2FkZF9wZXJmbW9uX2NudHIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQotCQkJCSAgICAg
IHVpbnQ2NF90IGNvbmZpZykNCi17DQotCXVpbnQzMl90IGxvX2Jhc2VfYWRkciwgaGlfYmFzZV9h
ZGRyLCBsb192YWwsIGhpX3ZhbDsNCi0JaW50IHJldCwgaXNfYXNzaWduZWQ7DQotDQotCXJldCA9
IGRmX3YzXzZfcG1jX2Fzc2lnbl9jbnRyKGFkZXYsIGNvbmZpZywgJmlzX2Fzc2lnbmVkKTsNCi0N
Ci0JaWYgKHJldCB8fCBpc19hc3NpZ25lZCkNCi0JCXJldHVybiByZXQ7DQotDQotCXJldCA9IGRm
X3YzXzZfcG1jX2dldF9jdHJsX3NldHRpbmdzKGFkZXYsDQotCQkJY29uZmlnLA0KLQkJCSZsb19i
YXNlX2FkZHIsDQotCQkJJmhpX2Jhc2VfYWRkciwNCi0JCQkmbG9fdmFsLA0KLQkJCSZoaV92YWwp
Ow0KLQ0KLQlpZiAocmV0KQ0KLQkJcmV0dXJuIHJldDsNCi0NCi0JRFJNX0RFQlVHX0RSSVZFUigi
Y29uZmlnPSVsbHggYWRkcj0lMDh4OiUwOHggdmFsPSUwOHg6JTA4eCIsDQotCQkJY29uZmlnLCBs
b19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRkciwgbG9fdmFsLCBoaV92YWwpOw0KLQ0KLQlXUkVHMzJf
UENJRShsb19iYXNlX2FkZHIsIGxvX3ZhbCk7DQotCVdSRUczMl9QQ0lFKGhpX2Jhc2VfYWRkciwg
aGlfdmFsKTsNCi0NCi0JcmV0dXJuIHJldDsNCisJZGZfdjNfNl9wZXJmbW9uX3dyZWcoYWRldiwg
bG9fYmFzZV9hZGRyLCAwLCBoaV9iYXNlX2FkZHIsIDApOw0KIH0NCiANCiBzdGF0aWMgaW50IGRm
X3YzXzZfcG1jX3N0YXJ0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBjb25m
aWcsDQogCQkJICAgICBpbnQgaXNfZW5hYmxlKQ0KIHsNCi0JdWludDMyX3QgbG9fYmFzZV9hZGRy
LCBoaV9iYXNlX2FkZHIsIGxvX3ZhbDsNCisJdWludDMyX3QgbG9fYmFzZV9hZGRyLCBoaV9iYXNl
X2FkZHIsIGxvX3ZhbCwgaGlfdmFsOw0KIAlpbnQgcmV0ID0gMDsNCiANCiAJc3dpdGNoIChhZGV2
LT5hc2ljX3R5cGUpIHsNCkBAIC0zOTEsMjQgKzQ0NiwyMCBAQCBzdGF0aWMgaW50IGRmX3YzXzZf
cG1jX3N0YXJ0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBjb25maWcsDQog
CQlkZl92M182X3Jlc2V0X3BlcmZtb25fY250cihhZGV2LCBjb25maWcpOw0KIA0KIAkJaWYgKGlz
X2VuYWJsZSkgew0KLQkJCXJldCA9IGRmX3YzXzZfYWRkX3BlcmZtb25fY250cihhZGV2LCBjb25m
aWcpOw0KKwkJCXJldCA9IGRmX3YzXzZfcG1jX2FkZF9jbnRyKGFkZXYsIGNvbmZpZyk7DQogCQl9
IGVsc2Ugew0KIAkJCXJldCA9IGRmX3YzXzZfcG1jX2dldF9jdHJsX3NldHRpbmdzKGFkZXYsDQog
CQkJCQljb25maWcsDQogCQkJCQkmbG9fYmFzZV9hZGRyLA0KIAkJCQkJJmhpX2Jhc2VfYWRkciwN
Ci0JCQkJCU5VTEwsDQotCQkJCQlOVUxMKTsNCisJCQkJCSZsb192YWwsDQorCQkJCQkmaGlfdmFs
KTsNCiANCiAJCQlpZiAocmV0KQ0KIAkJCQlyZXR1cm4gcmV0Ow0KIA0KLQkJCWxvX3ZhbCA9IFJS
RUczMl9QQ0lFKGxvX2Jhc2VfYWRkcik7DQotDQotCQkJRFJNX0RFQlVHX0RSSVZFUigiY29uZmln
PSVsbHggYWRkcj0lMDh4OiUwOHggdmFsPSUwOHgiLA0KLQkJCQljb25maWcsIGxvX2Jhc2VfYWRk
ciwgaGlfYmFzZV9hZGRyLCBsb192YWwpOw0KLQ0KLQkJCVdSRUczMl9QQ0lFKGxvX2Jhc2VfYWRk
ciwgbG9fdmFsIHwgKDFVTEwgPDwgMjIpKTsNCisJCQlkZl92M182X3BlcmZtb25fd3JlZyhhZGV2
LCBsb19iYXNlX2FkZHIsIGxvX3ZhbCwNCisJCQkJCWhpX2Jhc2VfYWRkciwgaGlfdmFsKTsNCiAJ
CX0NCiANCiAJCWJyZWFrOw0KQEAgLTQyMiw3ICs0NzMsNyBAQCBzdGF0aWMgaW50IGRmX3YzXzZf
cG1jX3N0YXJ0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1aW50NjRfdCBjb25maWcsICBz
dGF0aWMgaW50IGRmX3YzXzZfcG1jX3N0b3Aoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHVp
bnQ2NF90IGNvbmZpZywNCiAJCQkgICAgaW50IGlzX2Rpc2FibGUpDQogew0KLQl1aW50MzJfdCBs
b19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRkciwgbG9fdmFsOw0KKwl1aW50MzJfdCBsb19iYXNlX2Fk
ZHIsIGhpX2Jhc2VfYWRkciwgbG9fdmFsLCBoaV92YWw7DQogCWludCByZXQgPSAwOw0KIA0KIAlz
d2l0Y2ggKGFkZXYtPmFzaWNfdHlwZSkgew0KQEAgLTQzMSwxOCArNDgyLDEzIEBAIHN0YXRpYyBp
bnQgZGZfdjNfNl9wbWNfc3RvcChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdWludDY0X3Qg
Y29uZmlnLA0KIAkJCWNvbmZpZywNCiAJCQkmbG9fYmFzZV9hZGRyLA0KIAkJCSZoaV9iYXNlX2Fk
ZHIsDQotCQkJTlVMTCwNCi0JCQlOVUxMKTsNCisJCQkmbG9fdmFsLA0KKwkJCSZoaV92YWwpOw0K
IA0KIAkJaWYgKHJldCkNCiAJCQlyZXR1cm4gcmV0Ow0KIA0KLQkJbG9fdmFsID0gUlJFRzMyX1BD
SUUobG9fYmFzZV9hZGRyKTsNCi0NCi0JCURSTV9ERUJVR19EUklWRVIoImNvbmZpZz0lbGx4IGFk
ZHI9JTA4eDolMDh4IHZhbD0lMDh4IiwNCi0JCQkJY29uZmlnLCBsb19iYXNlX2FkZHIsIGhpX2Jh
c2VfYWRkciwgbG9fdmFsKTsNCi0NCi0JCVdSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkciwgbG9fdmFs
ICYgfigxVUxMIDw8IDIyKSk7DQorCQlkZl92M182X3BlcmZtb25fd3JlZyhhZGV2LCBsb19iYXNl
X2FkZHIsIDAsIGhpX2Jhc2VfYWRkciwgMCk7DQogDQogCQlpZiAoaXNfZGlzYWJsZSkNCiAJCQlk
Zl92M182X3BtY19yZWxlYXNlX2NudHIoYWRldiwgY29uZmlnKTsgQEAgLTQ3MSw4ICs1MTcsOCBA
QCBzdGF0aWMgdm9pZCBkZl92M182X3BtY19nZXRfY291bnQoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYsDQogCQlpZiAoKGxvX2Jhc2VfYWRkciA9PSAwKSB8fCAoaGlfYmFzZV9hZGRyID09IDAp
KQ0KIAkJCXJldHVybjsNCiANCi0JCWxvX3ZhbCA9IFJSRUczMl9QQ0lFKGxvX2Jhc2VfYWRkcik7
DQotCQloaV92YWwgPSBSUkVHMzJfUENJRShoaV9iYXNlX2FkZHIpOw0KKwkJZGZfdjNfNl9wZXJm
bW9uX3JyZWcoYWRldiwgbG9fYmFzZV9hZGRyLCAmbG9fdmFsLA0KKwkJCQloaV9iYXNlX2FkZHIs
ICZoaV92YWwpOw0KIA0KIAkJKmNvdW50ICA9ICgoaGlfdmFsIHwgMFVMTCkgPDwgMzIpIHwgKGxv
X3ZhbCB8IDBVTEwpOw0KIA0KQEAgLTQ4MCw3ICs1MjYsNyBAQCBzdGF0aWMgdm9pZCBkZl92M182
X3BtY19nZXRfY291bnQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsDQogCQkJKmNvdW50ID0g
MDsNCiANCiAJCURSTV9ERUJVR19EUklWRVIoImNvbmZpZz0lbGx4IGFkZHI9JTA4eDolMDh4IHZh
bD0lMDh4OiUwOHgiLA0KLQkJCWNvbmZpZywgbG9fYmFzZV9hZGRyLCBoaV9iYXNlX2FkZHIsIGxv
X3ZhbCwgaGlfdmFsKTsNCisJCQkgY29uZmlnLCBsb19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRkciwg
bG9fdmFsLCBoaV92YWwpOw0KIA0KIAkJYnJlYWs7DQogDQpAQCAtNDk5LDUgKzU0NSw3IEBAIGNv
bnN0IHN0cnVjdCBhbWRncHVfZGZfZnVuY3MgZGZfdjNfNl9mdW5jcyA9IHsNCiAJLmdldF9jbG9j
a2dhdGluZ19zdGF0ZSA9IGRmX3YzXzZfZ2V0X2Nsb2NrZ2F0aW5nX3N0YXRlLA0KIAkucG1jX3N0
YXJ0ID0gZGZfdjNfNl9wbWNfc3RhcnQsDQogCS5wbWNfc3RvcCA9IGRmX3YzXzZfcG1jX3N0b3As
DQotCS5wbWNfZ2V0X2NvdW50ID0gZGZfdjNfNl9wbWNfZ2V0X2NvdW50DQorCS5wbWNfZ2V0X2Nv
dW50ID0gZGZfdjNfNl9wbWNfZ2V0X2NvdW50LA0KKwkuZ2V0X2ZpY2EgPSBkZl92M182X2dldF9m
aWNhLA0KKwkuc2V0X2ZpY2EgPSBkZl92M182X3NldF9maWNhDQogfTsNCi0tDQoyLjE3LjENCg0K
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCmFtZC1nZngg
bWFpbGluZyBsaXN0DQphbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4DQpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAph
bWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
