Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 334714BB75
	for <lists+amd-gfx@lfdr.de>; Wed, 19 Jun 2019 16:28:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9F51A6E3EE;
	Wed, 19 Jun 2019 14:28:19 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-CY1-obe.outbound.protection.outlook.com
 (mail-eopbgr760072.outbound.protection.outlook.com [40.107.76.72])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B3A696E3EE
 for <amd-gfx@lists.freedesktop.org>; Wed, 19 Jun 2019 14:28:17 +0000 (UTC)
Received: from BN6PR12MB1618.namprd12.prod.outlook.com (10.172.21.149) by
 BN6PR12MB1394.namprd12.prod.outlook.com (10.168.228.18) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1987.11; Wed, 19 Jun 2019 14:28:15 +0000
Received: from BN6PR12MB1618.namprd12.prod.outlook.com
 ([fe80::deb:c3c0:13cb:e332]) by BN6PR12MB1618.namprd12.prod.outlook.com
 ([fe80::deb:c3c0:13cb:e332%7]) with mapi id 15.20.1987.014; Wed, 19 Jun 2019
 14:28:15 +0000
From: "Russell, Kent" <Kent.Russell@amd.com>
To: "Koenig, Christian" <Christian.Koenig@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: RE: [PATCH] drm/amdkfd: Add procfs-style information for KFD processes
Thread-Topic: [PATCH] drm/amdkfd: Add procfs-style information for KFD
 processes
Thread-Index: AQHVJqeHpfF/cPY4kkm6oFJfXQsaSKajAl2AgAAGTwA=
Date: Wed, 19 Jun 2019 14:28:15 +0000
Message-ID: <BN6PR12MB161813FEBB800CA880A0EAC085E50@BN6PR12MB1618.namprd12.prod.outlook.com>
References: <20190619140133.2060-1-kent.russell@amd.com>
 <8c26a707-4069-3bf5-d0aa-962a20245ec0@gmail.com>
In-Reply-To: <8c26a707-4069-3bf5-d0aa-962a20245ec0@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [2607:fea8:1ca0:3f2:d9a9:e34f:d0bd:b54c]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 8d2797fb-5f57-4d76-0430-08d6f4c25dd8
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:BN6PR12MB1394; 
x-ms-traffictypediagnostic: BN6PR12MB1394:
x-microsoft-antispam-prvs: <BN6PR12MB1394A858A9D2B35F48787FB085E50@BN6PR12MB1394.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:4714;
x-forefront-prvs: 0073BFEF03
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(346002)(366004)(39860400002)(136003)(376002)(396003)(13464003)(199004)(189003)(316002)(25786009)(256004)(2501003)(74316002)(486006)(52536014)(76116006)(14454004)(6506007)(72206003)(76176011)(53546011)(53936002)(5660300002)(186003)(229853002)(14444005)(55016002)(71190400001)(9686003)(99286004)(71200400001)(6436002)(66574012)(102836004)(46003)(11346002)(81156014)(8676002)(110136005)(7696005)(33656002)(81166006)(8936002)(68736007)(478600001)(446003)(6246003)(66446008)(64756008)(66946007)(66556008)(66476007)(305945005)(476003)(7736002)(86362001)(2906002)(73956011)(6116002);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BN6PR12MB1394;
 H:BN6PR12MB1618.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: 3iWi+mAHtLciap9LNavSFl+0F9MMWF0ZgOW+U8B+jkRHqRwqb31R9rUhNHqVcccFiRkMgYEctUZ+arTEHacfM80cr8eFCVT6/rgmKYp3kzxpmSy2WwWfDabFAnp98gS4aZ2lPzaouF2rSi3nbPuVQfB6aJeIpW52rwLBMnmTC58R1VnhVeVc3yPUh19MUXagppXfdMuMLmkJkItNPPKYoWcn3kZLtDSJWOVks9aB9UMcC9jbSc23TbIzcGxX+Afkz78Cm7iu4dTkbi4T26/7r+MHZ0+WU0MNbWJB9Tjyh5TM/W2SijSpRe42qrVUmEspzVMG5Z2DEkcVjLWeZewtAmpVR5ZqtOoekjpMH4yjbkKYbENtJqaaukilfJlXd3EXc8dq+DCBvn4foQqC1ekaMBjKhDQg+aYn+eYcVQPBF6M=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 8d2797fb-5f57-4d76-0430-08d6f4c25dd8
X-MS-Exchange-CrossTenant-originalarrivaltime: 19 Jun 2019 14:28:15.1011 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: krussell@amd.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN6PR12MB1394
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=SMhBZ4JMMVwYk7COMykXvndcNas2pDuUoH7zMlNFOV4=;
 b=OZKg/QCVHgWZNuY/dkRTPEqd+5lzo/iewrNPQu+g9a0oF3Oem266Z9TisbRReh7AwaoGIISoVKkmC7DwYVdbD4yqDXJRcV0bTFoSwAsX1cuOqVLYLsQP/ps6H3TqXs27f086h+LdgjljOHaMeWrZcV3y7ZeaM/c/Ozoibv7/scU=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Kent.Russell@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

UmlnaHQgbm93IHRoZSB1c2UgY2FzZSB3b3VsZCBiZSB0byBsaXN0IHdoaWNoIHByb2Nlc3NlcyB3
ZXJlIGNyZWF0ZWQgaW4gYSBLRkQgY29udGV4dCwgYnV0IGl0IHdvdWxkIGFsbG93IGZvciBmdXJ0
aGVyIGV4cGFuc2lvbiB0byBpbmNsdWRlIHRoaW5ncyBsaWtlIHRoZSBHUFUgYXNzb2NpYXRlZCB3
aXRoIHRoZSBQSUQsIG1lbW9yeSB1c2FnZSwgZXRjLiBGb3Igbm93LCB0aGUgdXNlIGNhc2UgaXMg
bGlzdGluZyBLRkQtcmVsYXRlZCBQSURzLCBidXQgd2lsbCBiZSBleHBhbmRlZCBsYXRlciB0byBp
bmNsdWRlIG1lbW9yeSB1c2FnZSBmb3Igc3VyZSAocGx1cyBvdGhlciB0aGluZ3MgdGhhdCBJIGV4
cGVjdCB3aWxsIHJlcXVlc3RlZCBsYXRlciBvbikuDQogDQogS2VudA0KDQotLS0tLU9yaWdpbmFs
IE1lc3NhZ2UtLS0tLQ0KRnJvbTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2tvZW5pZy5sZWljaHR6dW1l
cmtlbkBnbWFpbC5jb20+IA0KU2VudDogV2VkbmVzZGF5LCBKdW5lIDE5LCAyMDE5IDEwOjA0IEFN
DQpUbzogUnVzc2VsbCwgS2VudCA8S2VudC5SdXNzZWxsQGFtZC5jb20+OyBhbWQtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZw0KU3ViamVjdDogUmU6IFtQQVRDSF0gZHJtL2FtZGtmZDogQWRkIHBy
b2Nmcy1zdHlsZSBpbmZvcm1hdGlvbiBmb3IgS0ZEIHByb2Nlc3Nlcw0KDQpBbSAxOS4wNi4xOSB1
bSAxNjowMSBzY2hyaWViIFJ1c3NlbGwsIEtlbnQ6DQo+IEFkZCBhIGZvbGRlciBzdHJ1Y3R1cmUg
dG8gL3N5cy9jbGFzcy9rZmQva2ZkLyBjYWxsZWQgcHJvYyB3aGljaCANCj4gY29udGFpbnMgc3Vi
Zm9sZGVycywgZWFjaCByZXByZXNlbnRpbmcgYW4gYWN0aXZlIEtGRCBwcm9jZXNzJyBQSUQsIA0K
PiBjb250YWluaW5nIDENCj4gZmlsZTogcGFzaWQuDQoNCldoYXQgaXMgdGhlIHVzZSBjYXNlIG9m
IHRoYXQgaW5mb3JtYXRpb24/IEluIG90aGVyIHdvcmRzIHdvdWxkIGl0IGJlIG1heWJlIGJldHRl
ciB0byBjcmVhdGUgZGVidWdmcyBlbnRyaWVzIGluc3RlYWQ/DQoNCkNocmlzdGlhbi4NCg0KPg0K
PiBDaGFuZ2UtSWQ6IElkM2RmYWI4YTYyNTAyNjQ0MzRiMzRjY2RkYmNkYjQ1OWQxZGE3NDc4DQo+
IFNpZ25lZC1vZmYtYnk6IEtlbnQgUnVzc2VsbCA8a2VudC5ydXNzZWxsQGFtZC5jb20+DQo+IC0t
LQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9tb2R1bGUuYyAgfCAgIDYgKysN
Cj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJpdi5oICAgIHwgICA5ICsrDQo+
ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3MuYyB8IDEwMCArKysrKysr
KysrKysrKysrKysrKysrLQ0KPiAgIDMgZmlsZXMgY2hhbmdlZCwgMTEzIGluc2VydGlvbnMoKyks
IDIgZGVsZXRpb25zKC0pDQo+DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGtmZC9rZmRfbW9kdWxlLmMgDQo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX21v
ZHVsZS5jDQo+IGluZGV4IDkzMjAwN2ViOTE2OC4uOTg2ZmY1MmQ1NzUwIDEwMDY0NA0KPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfbW9kdWxlLmMNCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX21vZHVsZS5jDQo+IEBAIC01Niw2ICs1NiwxMSBAQCBz
dGF0aWMgaW50IGtmZF9pbml0KHZvaWQpDQo+ICAgCWlmIChlcnIgPCAwKQ0KPiAgIAkJZ290byBl
cnJfY3JlYXRlX3dxOw0KPiAgIA0KPiArCS8qIElnbm9yZSB0aGUgcmV0dXJuIHZhbHVlLCBzbyB0
aGF0IHdlIGNhbiBjb250aW51ZQ0KPiArCSAqIHRvIGluaXQgdGhlIEtGRCwgZXZlbiBpZiBwcm9j
ZnMgaXNuJ3QgY3JhYXRlZA0KPiArCSAqLw0KPiArCWtmZF9wcm9jZnNfaW5pdCgpOw0KPiArDQo+
ICAgCWtmZF9kZWJ1Z2ZzX2luaXQoKTsNCj4gICANCj4gICAJcmV0dXJuIDA7DQo+IEBAIC03Miw2
ICs3Nyw3IEBAIHN0YXRpYyB2b2lkIGtmZF9leGl0KHZvaWQpDQo+ICAgew0KPiAgIAlrZmRfZGVi
dWdmc19maW5pKCk7DQo+ICAgCWtmZF9wcm9jZXNzX2Rlc3Ryb3lfd3EoKTsNCj4gKwlrZmRfcHJv
Y2ZzX3NodXRkb3duKCk7DQo+ICAgCWtmZF90b3BvbG9neV9zaHV0ZG93bigpOw0KPiAgIAlrZmRf
Y2hhcmRldl9leGl0KCk7DQo+ICAgfQ0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRrZmQva2ZkX3ByaXYuaCANCj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRf
cHJpdi5oDQo+IGluZGV4IGRhNTg5ZWUxMzY2Yy4uYmQwMTM5NmM4Y2VhIDEwMDY0NA0KPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJpdi5oDQo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcml2LmgNCj4gQEAgLTM1LDYgKzM1LDcgQEANCj4gICAj
aW5jbHVkZSA8bGludXgva2ZpZm8uaD4NCj4gICAjaW5jbHVkZSA8bGludXgvc2VxX2ZpbGUuaD4N
Cj4gICAjaW5jbHVkZSA8bGludXgva3JlZi5oPg0KPiArI2luY2x1ZGUgPGxpbnV4L3N5c2ZzLmg+
DQo+ICAgI2luY2x1ZGUgPGtnZF9rZmRfaW50ZXJmYWNlLmg+DQo+ICAgDQo+ICAgI2luY2x1ZGUg
ImFtZF9zaGFyZWQuaCINCj4gQEAgLTcxOCw2ICs3MTksMTAgQEAgc3RydWN0IGtmZF9wcm9jZXNz
IHsNCj4gICAJICogcmVzdG9yZWQgYWZ0ZXIgYW4gZXZpY3Rpb24NCj4gICAJICovDQo+ICAgCXVu
c2lnbmVkIGxvbmcgbGFzdF9yZXN0b3JlX3RpbWVzdGFtcDsNCj4gKw0KPiArCS8qIEtvYmogZm9y
IG91ciBwcm9jZnMgKi8NCj4gKwlzdHJ1Y3Qga29iamVjdCAqa29iajsNCj4gKwlzdHJ1Y3QgYXR0
cmlidXRlIGF0dHJfcGFzaWQ7DQo+ICAgfTsNCj4gICANCj4gICAjZGVmaW5lIEtGRF9QUk9DRVNT
X1RBQkxFX1NJWkUgNSAvKiBiaXRzOiAzMiBlbnRyaWVzICovIEBAIC04MjAsNiANCj4gKzgyNSwx
MCBAQCBpbnQga2ZkX2d0dF9zYV9mcmVlKHN0cnVjdCBrZmRfZGV2ICprZmQsIHN0cnVjdCBrZmRf
bWVtX29iaiANCj4gKm1lbV9vYmopOw0KPiAgIA0KPiAgIGV4dGVybiBzdHJ1Y3QgZGV2aWNlICpr
ZmRfZGV2aWNlOw0KPiAgIA0KPiArLyogS0ZEJ3MgcHJvY2ZzICovDQo+ICt2b2lkIGtmZF9wcm9j
ZnNfaW5pdCh2b2lkKTsNCj4gK3ZvaWQga2ZkX3Byb2Nmc19zaHV0ZG93bih2b2lkKTsNCj4gKw0K
PiAgIC8qIFRvcG9sb2d5ICovDQo+ICAgaW50IGtmZF90b3BvbG9neV9pbml0KHZvaWQpOw0KPiAg
IHZvaWQga2ZkX3RvcG9sb2d5X3NodXRkb3duKHZvaWQpOw0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3MuYyANCj4gYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGtmZC9rZmRfcHJvY2Vzcy5jDQo+IGluZGV4IDRiZGFlNzhiYWI4ZS4uZWQyZDgzZjkz
ZmQ4IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRfcHJvY2Vz
cy5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcm9jZXNzLmMNCj4g
QEAgLTY4LDYgKzY4LDY4IEBAIHN0YXRpYyBzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKmNyZWF0ZV9wcm9j
ZXNzKGNvbnN0IHN0cnVjdCB0YXNrX3N0cnVjdCAqdGhyZWFkLA0KPiAgIHN0YXRpYyB2b2lkIGV2
aWN0X3Byb2Nlc3Nfd29ya2VyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yayk7DQo+ICAgc3RhdGlj
IHZvaWQgcmVzdG9yZV9wcm9jZXNzX3dvcmtlcihzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspOw0K
PiAgIA0KPiArc3RydWN0IGtmZF9wcm9jZnNfdHJlZSB7DQo+ICsJc3RydWN0IGtvYmplY3QgKmtv
Ymo7DQo+ICt9Ow0KPiArDQo+ICtzdGF0aWMgc3RydWN0IGtmZF9wcm9jZnNfdHJlZSBwcm9jZnM7
DQo+ICsNCj4gK3N0YXRpYyBzc2l6ZV90IGtmZF9wcm9jZnNfc2hvdyhzdHJ1Y3Qga29iamVjdCAq
a29iaiwgc3RydWN0IGF0dHJpYnV0ZSAqYXR0ciwNCj4gKwkJCSAgICAgICBjaGFyICpidWZmZXIp
DQo+ICt7DQo+ICsJaW50IHZhbCA9IDA7DQo+ICsNCj4gKwlpZiAoc3RyY21wKGF0dHItPm5hbWUs
ICJwYXNpZCIpID09IDApIHsNCj4gKwkJc3RydWN0IGtmZF9wcm9jZXNzICpwID0gY29udGFpbmVy
X29mKGF0dHIsIHN0cnVjdCBrZmRfcHJvY2VzcywNCj4gKwkJCQkJCSAgICAgYXR0cl9wYXNpZCk7
DQo+ICsJCXZhbCA9IHAtPnBhc2lkOw0KPiArCX0gZWxzZSB7DQo+ICsJCXByX2VycigiSW52YWxp
ZCBhdHRyaWJ1dGUiKTsNCj4gKwkJcmV0dXJuIC1FSU5WQUw7DQo+ICsJfQ0KPiArDQo+ICsJcmV0
dXJuIHNucHJpbnRmKGJ1ZmZlciwgUEFHRV9TSVpFLCAiJWRcbiIsIHZhbCk7IH0NCj4gKw0KPiAr
c3RhdGljIHZvaWQga2ZkX3Byb2Nmc19rb2JqX3JlbGVhc2Uoc3RydWN0IGtvYmplY3QgKmtvYmop
IHsNCj4gKwlrZnJlZShrb2JqKTsNCj4gK30NCj4gKw0KPiArc3RhdGljIGNvbnN0IHN0cnVjdCBz
eXNmc19vcHMga2ZkX3Byb2Nmc19vcHMgPSB7DQo+ICsJLnNob3cgPSBrZmRfcHJvY2ZzX3Nob3cs
DQo+ICt9Ow0KPiArDQo+ICtzdGF0aWMgc3RydWN0IGtvYmpfdHlwZSBwcm9jZnNfdHlwZSA9IHsN
Cj4gKwkucmVsZWFzZSA9IGtmZF9wcm9jZnNfa29ial9yZWxlYXNlLA0KPiArCS5zeXNmc19vcHMg
PSAma2ZkX3Byb2Nmc19vcHMsDQo+ICt9Ow0KPiArDQo+ICt2b2lkIGtmZF9wcm9jZnNfaW5pdCh2
b2lkKQ0KPiArew0KPiArCWludCByZXQgPSAwOw0KPiArDQo+ICsJcHJvY2ZzLmtvYmogPSBrZmRf
YWxsb2Nfc3RydWN0KHByb2Nmcy5rb2JqKTsNCj4gKwlpZiAoIXByb2Nmcy5rb2JqKQ0KPiArCQly
ZXR1cm47DQo+ICsNCj4gKwlyZXQgPSBrb2JqZWN0X2luaXRfYW5kX2FkZChwcm9jZnMua29iaiwg
JnByb2Nmc190eXBlLA0KPiArCQkJCSAgICZrZmRfZGV2aWNlLT5rb2JqLCAicHJvYyIpOw0KPiAr
CWlmIChyZXQpIHsNCj4gKwkJcHJfd2FybigiQ291bGQgbm90IGNyZWF0ZSBwcm9jZnMgcHJvYyBm
b2xkZXIiKTsNCj4gKwkJLyogSWYgd2UgZmFpbCB0byBjcmVhdGUgdGhlIHByb2NmcywgY2xlYW4g
dXAgKi8NCj4gKwkJa2ZkX3Byb2Nmc19zaHV0ZG93bigpOw0KPiArCX0NCj4gK30NCj4gKw0KPiAr
dm9pZCBrZmRfcHJvY2ZzX3NodXRkb3duKHZvaWQpDQo+ICt7DQo+ICsJaWYgKHByb2Nmcy5rb2Jq
KSB7DQo+ICsJCWtvYmplY3RfZGVsKHByb2Nmcy5rb2JqKTsNCj4gKwkJa29iamVjdF9wdXQocHJv
Y2ZzLmtvYmopOw0KPiArCQlwcm9jZnMua29iaiA9IE5VTEw7DQo+ICsJfQ0KPiArfQ0KPiAgIA0K
PiAgIGludCBrZmRfcHJvY2Vzc19jcmVhdGVfd3Eodm9pZCkNCj4gICB7DQo+IEBAIC0yMDYsNiAr
MjY4LDcgQEAgc3RydWN0IGtmZF9wcm9jZXNzICprZmRfY3JlYXRlX3Byb2Nlc3Moc3RydWN0IGZp
bGUgKmZpbGVwKQ0KPiAgIHsNCj4gICAJc3RydWN0IGtmZF9wcm9jZXNzICpwcm9jZXNzOw0KPiAg
IAlzdHJ1Y3QgdGFza19zdHJ1Y3QgKnRocmVhZCA9IGN1cnJlbnQ7DQo+ICsJaW50IHJldDsNCj4g
ICANCj4gICAJaWYgKCF0aHJlYWQtPm1tKQ0KPiAgIAkJcmV0dXJuIEVSUl9QVFIoLUVJTlZBTCk7
DQo+IEBAIC0yMjMsMTEgKzI4NiwzNiBAQCBzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKmtmZF9jcmVhdGVf
cHJvY2VzcyhzdHJ1Y3QgDQo+IGZpbGUgKmZpbGVwKQ0KPiAgIA0KPiAgIAkvKiBBIHByaW9yIG9w
ZW4gb2YgL2Rldi9rZmQgY291bGQgaGF2ZSBhbHJlYWR5IGNyZWF0ZWQgdGhlIHByb2Nlc3MuICov
DQo+ICAgCXByb2Nlc3MgPSBmaW5kX3Byb2Nlc3ModGhyZWFkKTsNCj4gLQlpZiAocHJvY2VzcykN
Cj4gKwlpZiAocHJvY2Vzcykgew0KPiAgIAkJcHJfZGVidWcoIlByb2Nlc3MgYWxyZWFkeSBmb3Vu
ZFxuIik7DQo+IC0JZWxzZQ0KPiArCX0gZWxzZSB7DQo+ICAgCQlwcm9jZXNzID0gY3JlYXRlX3By
b2Nlc3ModGhyZWFkLCBmaWxlcCk7DQo+ICAgDQo+ICsJCWlmICghcHJvY2ZzLmtvYmopDQo+ICsJ
CQlnb3RvIG91dDsNCj4gKw0KPiArCQlwcm9jZXNzLT5rb2JqID0ga2ZkX2FsbG9jX3N0cnVjdChw
cm9jZXNzLT5rb2JqKTsNCj4gKwkJaWYgKCFwcm9jZXNzLT5rb2JqKSB7DQo+ICsJCQlwcl93YXJu
KCJDcmVhdGluZyBwcm9jZnMga29iamVjdCBmYWlsZWQiKTsNCj4gKwkJCWdvdG8gb3V0Ow0KPiAr
CQl9DQo+ICsJCXJldCA9IGtvYmplY3RfaW5pdF9hbmRfYWRkKHByb2Nlc3MtPmtvYmosICZwcm9j
ZnNfdHlwZSwNCj4gKwkJCQkJICAgcHJvY2ZzLmtvYmosICIlZCIsDQo+ICsJCQkJCSAgIChpbnQp
cHJvY2Vzcy0+bGVhZF90aHJlYWQtPnBpZCk7DQo+ICsJCWlmIChyZXQpIHsNCj4gKwkJCXByX3dh
cm4oIkNyZWF0aW5nIHByb2NmcyBwaWQgZGlyZWN0b3J5IGZhaWxlZCIpOw0KPiArCQkJZ290byBv
dXQ7DQo+ICsJCX0NCj4gKw0KPiArCQlwcm9jZXNzLT5hdHRyX3Bhc2lkLm5hbWUgPSAicGFzaWQi
Ow0KPiArCQlwcm9jZXNzLT5hdHRyX3Bhc2lkLm1vZGUgPSBLRkRfU1lTRlNfRklMRV9NT0RFOw0K
PiArCQlzeXNmc19hdHRyX2luaXQoJnByb2Nlc3MtPmF0dHJfcGFzaWQpOw0KPiArCQlyZXQgPSBz
eXNmc19jcmVhdGVfZmlsZShwcm9jZXNzLT5rb2JqLCAmcHJvY2Vzcy0+YXR0cl9wYXNpZCk7DQo+
ICsJCWlmIChyZXQpDQo+ICsJCQlwcl93YXJuKCJDcmVhdGluZyBwYXNpZCBmb3IgcGlkICVkIGZh
aWxlZCIsDQo+ICsJCQkJCShpbnQpcHJvY2Vzcy0+bGVhZF90aHJlYWQtPnBpZCk7DQo+ICsJfQ0K
PiArb3V0Og0KPiAgIAltdXRleF91bmxvY2soJmtmZF9wcm9jZXNzZXNfbXV0ZXgpOw0KPiAgIA0K
PiAgIAlyZXR1cm4gcHJvY2VzczsNCj4gQEAgLTM1NSw2ICs0NDMsMTQgQEAgc3RhdGljIHZvaWQg
a2ZkX3Byb2Nlc3Nfd3FfcmVsZWFzZShzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspDQo+ICAgCXN0
cnVjdCBrZmRfcHJvY2VzcyAqcCA9IGNvbnRhaW5lcl9vZih3b3JrLCBzdHJ1Y3Qga2ZkX3Byb2Nl
c3MsDQo+ICAgCQkJCQkgICAgIHJlbGVhc2Vfd29yayk7DQo+ICAgDQo+ICsJLyogUmVtb3ZlIHRo
ZSBwcm9jZnMgZmlsZXMgKi8NCj4gKwlpZiAocC0+a29iaikgew0KPiArCQlzeXNmc19yZW1vdmVf
ZmlsZShwLT5rb2JqLCAmcC0+YXR0cl9wYXNpZCk7DQo+ICsJCWtvYmplY3RfZGVsKHAtPmtvYmop
Ow0KPiArCQlrb2JqZWN0X3B1dChwLT5rb2JqKTsNCj4gKwkJcC0+a29iaiA9IE5VTEw7DQo+ICsJ
fQ0KPiArDQo+ICAgCWtmZF9pb21tdV91bmJpbmRfcHJvY2VzcyhwKTsNCj4gICANCj4gICAJa2Zk
X3Byb2Nlc3NfZnJlZV9vdXRzdGFuZGluZ19rZmRfYm9zKHApOw0KDQpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphbWQtZ2Z4IG1haWxpbmcgbGlzdAphbWQt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2FtZC1nZng=
