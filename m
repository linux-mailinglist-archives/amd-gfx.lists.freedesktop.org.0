Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 40F59A992D
	for <lists+amd-gfx@lfdr.de>; Thu,  5 Sep 2019 06:04:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D434C89CBC;
	Thu,  5 Sep 2019 04:04:05 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from NAM02-SN1-obe.outbound.protection.outlook.com
 (mail-eopbgr770048.outbound.protection.outlook.com [40.107.77.48])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1B7C089CBC
 for <amd-gfx@lists.freedesktop.org>; Thu,  5 Sep 2019 04:04:04 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=R7eH7dQmcq/gEeCLWCOU2l+4VS7azTrmTnSOPSEcM5yZNEVAQkqGUlgAyB9e/4rhJrLO3xahdNRlNLNDQnu7bq2WZ4UHR++dCAa/FiwAyHoPsMtLgAdUHl1MP65UbbnXKhmd8Li+ojhcX3hFBRhzL3cCSIjsxTXzajE0V1LVOCpXFrpqUCY03OHpmKh66HN47HOgfsg+CaZbbp98/DTXLs9vzflsy2qT+Q6ApejHAGxI6f4P3ZUMM5DXEhXv17avs5YYZSqi/VjyXywivxSxLREG9k1F2lo8k1WqYztOZVow6O3mg2KrAnhTSzGbLPXqXJIhfWAR3U1oE4lQ6ihVWQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=K6ygXAwE/TCwweUHgq+sR0xLH2CHXkI25ZfRywJyzRk=;
 b=YsNewQropayMOYNPbUkD1wBRm8ocnY1X43o7tjhAPCu5H8Sl1DPxwxsLn8IOxXlNCqbyxKLQhCWMce71Lc5/7tfoLn/h2Px+M2C32ejYimMd+LDgaN2vuNdfwwnIYU3O5b10r76KX8lbNlvjnBk+oQmk6mFFiO2wiOAyGz6ikTIEdiDY97RNTGZa7xVFSZORuceu00+vHL17JyirVpENOVOi6zzcLrckSiMuHvCKsRpPpBx/odMpO3/WBucKydHj3RtRwokmQgSRwrTowml8ESzh7cj5WqSH9rd74V0P4IgRqngp036/69xrDY96aCNJOrEMQh1PbH9f8ASYTxyo6Q==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB3054.namprd12.prod.outlook.com (20.178.244.79) by
 MN2PR12MB3807.namprd12.prod.outlook.com (10.255.237.24) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2241.15; Thu, 5 Sep 2019 04:04:02 +0000
Received: from MN2PR12MB3054.namprd12.prod.outlook.com
 ([fe80::f8cf:7a84:723c:27d0]) by MN2PR12MB3054.namprd12.prod.outlook.com
 ([fe80::f8cf:7a84:723c:27d0%3]) with mapi id 15.20.2220.022; Thu, 5 Sep 2019
 04:04:02 +0000
From: "Zhou1, Tao" <Tao.Zhou1@amd.com>
To: "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>,
 "Grodzovsky, Andrey" <Andrey.Grodzovsky@amd.com>, "Chen, Guchun"
 <Guchun.Chen@amd.com>, "Li, Dennis" <Dennis.Li@amd.com>, "Zhang, Hawking"
 <Hawking.Zhang@amd.com>, "Clements, John" <John.Clements@amd.com>
Subject: [PATCH 4/4] drm/amdgpu: move the call of ras recovery_init and bad
 page reserve to proper place
Thread-Topic: [PATCH 4/4] drm/amdgpu: move the call of ras recovery_init and
 bad page reserve to proper place
Thread-Index: AQHVY57zxJjOlJzehEu+qcXDKq9rYQ==
Date: Thu, 5 Sep 2019 04:04:02 +0000
Message-ID: <20190905040324.18741-4-tao.zhou1@amd.com>
References: <20190905040324.18741-1-tao.zhou1@amd.com>
In-Reply-To: <20190905040324.18741-1-tao.zhou1@amd.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: HK0PR03CA0030.apcprd03.prod.outlook.com
 (2603:1096:203:2f::18) To MN2PR12MB3054.namprd12.prod.outlook.com
 (2603:10b6:208:d1::15)
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [180.167.199.189]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: a8f993e3-6bdc-4b68-148e-08d731b61610
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:MN2PR12MB3807; 
x-ms-traffictypediagnostic: MN2PR12MB3807:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <MN2PR12MB380706655FB45A49F609CAD4B0BB0@MN2PR12MB3807.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:7691;
x-forefront-prvs: 015114592F
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(366004)(136003)(346002)(376002)(396003)(39860400002)(199004)(189003)(66556008)(2501003)(6512007)(446003)(14444005)(26005)(11346002)(6436002)(3846002)(2906002)(256004)(53936002)(2616005)(66476007)(64756008)(66446008)(66946007)(6486002)(6116002)(71200400001)(71190400001)(316002)(305945005)(110136005)(102836004)(7736002)(1076003)(6506007)(50226002)(386003)(8676002)(81166006)(6636002)(81156014)(86362001)(478600001)(36756003)(99286004)(486006)(186003)(25786009)(476003)(4326008)(5660300002)(8936002)(52116002)(14454004)(76176011)(66066001)(921003)(1121003);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB3807;
 H:MN2PR12MB3054.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: xrh62ovM4nxpjPdcztKB79LEvXAN3goyq0l47soIWWaRfLW79Qm0xGJnaWYxH0bSnWj1ntNhskZl3423SJ85fhTnLrHY79LhN7u/hWn82AHwZtOjmezbfAS0xG8x4iE4dxmZ+e+zOV07Ke2qTDbw4/Bg4hvN263JSlopojMfXfmUefctgMdX+A0T1GTmRM8tyeTbNwpupjZsxbldza4Gr24lGz9BV0qrNipHwGE7f9KMPjEfNQj0UwPA3EUegOt0MNKvl2eAMsOPYGx7gRCPELfVnGa/WnZPec4M+kbWlgceUTkKEVlq7qXdBPTLJgqjnOItrt2/0B1/vQmhkvTqNYIZeQ2ndQfR9Rl91MoJiGTVv/ODtH2hOzKQwNq//LFypBAsLHJrzkECnt4dotR4r34kjCJMIXaFfiaP5j4tL0g=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: a8f993e3-6bdc-4b68-148e-08d731b61610
X-MS-Exchange-CrossTenant-originalarrivaltime: 05 Sep 2019 04:04:02.3554 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: A9bzd7bHdK3kF48PU4h9hc4EAudXW/B7NQ2zJtbqsHJOURgV1i7JwGakuJKI0jvk
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB3807
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=K6ygXAwE/TCwweUHgq+sR0xLH2CHXkI25ZfRywJyzRk=;
 b=O2qzEzeP5pJVWkzve9f1rPLrywW//PLiDqjucyGNwjOio9pHNixlybE0dJc7GCq67M5MQYrngS7D3kz4eTA3Nu8FSMs0nGSXisOwA6vd2ofaRmI/lQVbNLmbVmMH0+ygULJ5Bx+rweqZ3Qj3wcoin0Jr/BSX+EH25YcdN2IpZls=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Tao.Zhou1@amd.com; 
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Zhou1, Tao" <Tao.Zhou1@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

cmFzIHJlY292ZXJ5X2luaXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0dG0gaW5pdCwKYmFkIHBh
Z2UgcmVzZXJ2ZSBzaG91bGQgYmUgcHV0IGluIGZyb250IG9mIGdwdSByZXNldCBzaW5jZSBpMmMK
bWF5IGJlIHVuc3RhYmxlIGR1cmluZyBncHUgcmVzZXQuCmFkZCBjbGVhbnVwIGZvciByZWNvdmVy
eV9pbml0IGFuZCByZWNvdmVyeV9maW5pCgp2MjogYWRkIG1vcmUgY29tbWVudCBhbmQgcHJpbnQu
CiAgICByZW1vdmUgY2FuY2VsX3dvcmtfc3luYyBpbiByZWNvdmVyeV9pbml0LgoKU2lnbmVkLW9m
Zi1ieTogVGFvIFpob3UgPHRhby56aG91MUBhbWQuY29tPgpSZXZpZXdlZC1ieTogR3VjaHVuIENo
ZW4gPGd1Y2h1bi5jaGVuQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2RldmljZS5jIHwgIDUgLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfcmFzLmMgICAgfCAzOSArKysrKysrKysrKysrKy0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfcmFzLmggICAgfCAgNSArKysKIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV90dG0uYyAgICB8IDEyICsrKysrKysKIDQgZmlsZXMgY2hhbmdlZCwgNDMg
aW5zZXJ0aW9ucygrKSwgMTggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2RldmljZS5jCmluZGV4IGU1MDg2MWUxNmNmNS4uMjJjZDNkZWFiNzMxIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jCkBAIC0zNjI5LDExICsz
NjI5LDYgQEAgc3RhdGljIGludCBhbWRncHVfZG9fYXNpY19yZXNldChzdHJ1Y3QgYW1kZ3B1X2hp
dmVfaW5mbyAqaGl2ZSwKIAkJCQkJCWJyZWFrOwogCQkJCX0KIAkJCX0KLQotCQkJbGlzdF9mb3Jf
ZWFjaF9lbnRyeSh0bXBfYWRldiwgZGV2aWNlX2xpc3RfaGFuZGxlLAotCQkJCQlnbWMueGdtaS5o
ZWFkKSB7Ci0JCQkJYW1kZ3B1X3Jhc19yZXNlcnZlX2JhZF9wYWdlcyh0bXBfYWRldik7Ci0JCQl9
CiAJCX0KIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9yYXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9yYXMuYwppbmRleCBl
NjhmNDNkMWNmZWEuLmMyYjJiMGUzNTE1YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3Jhcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9yYXMuYwpAQCAtMTQ5MSwxNiArMTQ5MSwxNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9yYXNf
cmVsZWFzZV9iYWRfcGFnZXMoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJcmV0dXJuIDA7
CiB9CiAKLXN0YXRpYyBpbnQgYW1kZ3B1X3Jhc19yZWNvdmVyeV9pbml0KHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2KQoraW50IGFtZGdwdV9yYXNfcmVjb3ZlcnlfaW5pdChzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldikKIHsKIAlzdHJ1Y3QgYW1kZ3B1X3JhcyAqY29uID0gYW1kZ3B1X3Jhc19n
ZXRfY29udGV4dChhZGV2KTsKIAlzdHJ1Y3QgcmFzX2Vycl9oYW5kbGVyX2RhdGEgKipkYXRhID0g
JmNvbi0+ZWhfZGF0YTsKIAlpbnQgcmV0OwogCi0JKmRhdGEgPSBrbWFsbG9jKHNpemVvZigqKmRh
dGEpLAotCQkJR0ZQX0tFUk5FTHxfX0dGUF9aRVJPKTsKLQlpZiAoISpkYXRhKQotCQlyZXR1cm4g
LUVOT01FTTsKKwkqZGF0YSA9IGttYWxsb2Moc2l6ZW9mKCoqZGF0YSksIEdGUF9LRVJORUwgfCBf
X0dGUF9aRVJPKTsKKwlpZiAoISpkYXRhKSB7CisJCXJldCA9IC1FTk9NRU07CisJCWdvdG8gb3V0
OworCX0KIAogCW11dGV4X2luaXQoJmNvbi0+cmVjb3ZlcnlfbG9jayk7CiAJSU5JVF9XT1JLKCZj
b24tPnJlY292ZXJ5X3dvcmssIGFtZGdwdV9yYXNfZG9fcmVjb3ZlcnkpOwpAQCAtMTUwOSwxOCAr
MTUxMCwzMCBAQCBzdGF0aWMgaW50IGFtZGdwdV9yYXNfcmVjb3ZlcnlfaW5pdChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldikKIAogCXJldCA9IGFtZGdwdV9yYXNfZWVwcm9tX2luaXQoJmFkZXYt
PnBzcC5yYXMucmFzLT5lZXByb21fY29udHJvbCk7CiAJaWYgKHJldCkKLQkJcmV0dXJuIHJldDsK
KwkJZ290byBmcmVlOwogCiAJaWYgKGFkZXYtPnBzcC5yYXMucmFzLT5lZXByb21fY29udHJvbC5u
dW1fcmVjcykgewogCQlyZXQgPSBhbWRncHVfcmFzX2xvYWRfYmFkX3BhZ2VzKGFkZXYpOwogCQlp
ZiAocmV0KQotCQkJcmV0dXJuIHJldDsKKwkJCWdvdG8gZnJlZTsKIAkJcmV0ID0gYW1kZ3B1X3Jh
c19yZXNlcnZlX2JhZF9wYWdlcyhhZGV2KTsKIAkJaWYgKHJldCkKLQkJCXJldHVybiByZXQ7CisJ
CQlnb3RvIHJlbGVhc2U7CiAJfQogCiAJcmV0dXJuIDA7CisKK3JlbGVhc2U6CisJYW1kZ3B1X3Jh
c19yZWxlYXNlX2JhZF9wYWdlcyhhZGV2KTsKK2ZyZWU6CisJY29uLT5laF9kYXRhID0gTlVMTDsK
KwlrZnJlZSgoKmRhdGEpLT5icHMpOworCWtmcmVlKCgqZGF0YSktPmJwc19ibyk7CisJa2ZyZWUo
KmRhdGEpOworb3V0OgorCURSTV9XQVJOKCJGYWlsZWQgdG8gaW5pdGlsYWl6ZSByYXMgcmVjb3Zl
cnkhXG4iKTsKKworCXJldHVybiByZXQ7CiB9CiAKIHN0YXRpYyBpbnQgYW1kZ3B1X3Jhc19yZWNv
dmVyeV9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQpAQCAtMTUyOCwxMiArMTU0MSwx
NyBAQCBzdGF0aWMgaW50IGFtZGdwdV9yYXNfcmVjb3ZlcnlfZmluaShzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldikKIAlzdHJ1Y3QgYW1kZ3B1X3JhcyAqY29uID0gYW1kZ3B1X3Jhc19nZXRfY29u
dGV4dChhZGV2KTsKIAlzdHJ1Y3QgcmFzX2Vycl9oYW5kbGVyX2RhdGEgKmRhdGEgPSBjb24tPmVo
X2RhdGE7CiAKKwkvKiByZWNvdmVyeV9pbml0IGZhaWxlZCB0byBpbml0IGl0LCBmaW5pIGlzIHVz
ZWxlc3MgKi8KKwlpZiAoIWRhdGEpCisJCXJldHVybiAwOworCiAJY2FuY2VsX3dvcmtfc3luYygm
Y29uLT5yZWNvdmVyeV93b3JrKTsKIAlhbWRncHVfcmFzX3JlbGVhc2VfYmFkX3BhZ2VzKGFkZXYp
OwogCiAJbXV0ZXhfbG9jaygmY29uLT5yZWNvdmVyeV9sb2NrKTsKIAljb24tPmVoX2RhdGEgPSBO
VUxMOwogCWtmcmVlKGRhdGEtPmJwcyk7CisJa2ZyZWUoZGF0YS0+YnBzX2JvKTsKIAlrZnJlZShk
YXRhKTsKIAltdXRleF91bmxvY2soJmNvbi0+cmVjb3ZlcnlfbG9jayk7CiAKQEAgLTE2MjUsOSAr
MTY0Myw2IEBAIGludCBhbWRncHVfcmFzX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYp
CiAJCQlyZXR1cm4gcjsKIAl9CiAKLQlpZiAoYW1kZ3B1X3Jhc19yZWNvdmVyeV9pbml0KGFkZXYp
KQotCQlnb3RvIHJlY292ZXJ5X291dDsKLQogCWFtZGdwdV9yYXNfbWFzayAmPSBBTURHUFVfUkFT
X0JMT0NLX01BU0s7CiAKIAlpZiAoYW1kZ3B1X3Jhc19mc19pbml0KGFkZXYpKQpAQCAtMTY0Miw4
ICsxNjU3LDYgQEAgaW50IGFtZGdwdV9yYXNfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
dikKIAkJCWNvbi0+aHdfc3VwcG9ydGVkLCBjb24tPnN1cHBvcnRlZCk7CiAJcmV0dXJuIDA7CiBm
c19vdXQ6Ci0JYW1kZ3B1X3Jhc19yZWNvdmVyeV9maW5pKGFkZXYpOwotcmVjb3Zlcnlfb3V0Ogog
CWFtZGdwdV9yYXNfc2V0X2NvbnRleHQoYWRldiwgTlVMTCk7CiAJa2ZyZWUoY29uKTsKIApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oCmluZGV4IDk2MjEwZTE4MTkxZS4uMDEy
MDM0ZDJhZTA2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
cmFzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Jhcy5oCkBAIC00
ODAsNiArNDgwLDcgQEAgc3RhdGljIGlubGluZSBpbnQgYW1kZ3B1X3Jhc19pc19zdXBwb3J0ZWQo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJcmV0dXJuIHJhcyAmJiAocmFzLT5zdXBwb3J0
ZWQgJiAoMSA8PCBibG9jaykpOwogfQogCitpbnQgYW1kZ3B1X3Jhc19yZWNvdmVyeV9pbml0KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsKIGludCBhbWRncHVfcmFzX3JlcXVlc3RfcmVzZXRf
b25fYm9vdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAkJdW5zaWduZWQgaW50IGJsb2Nr
KTsKIApAQCAtNTAwLDYgKzUwMSwxMCBAQCBzdGF0aWMgaW5saW5lIGludCBhbWRncHVfcmFzX3Jl
c2V0X2dwdShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIHsKIAlzdHJ1Y3QgYW1kZ3B1X3Jh
cyAqcmFzID0gYW1kZ3B1X3Jhc19nZXRfY29udGV4dChhZGV2KTsKIAorCS8qIHNhdmUgYmFkIHBh
Z2UgdG8gZWVwcm9tIGJlZm9yZSBncHUgcmVzZXQsCisJICogaTJjIG1heSBiZSB1bnN0YWJsZSBp
biBncHUgcmVzZXQKKwkgKi8KKwlhbWRncHVfcmFzX3Jlc2VydmVfYmFkX3BhZ2VzKGFkZXYpOwog
CWlmIChhdG9taWNfY21weGNoZygmcmFzLT5pbl9yZWNvdmVyeSwgMCwgMSkgPT0gMCkKIAkJc2No
ZWR1bGVfd29yaygmcmFzLT5yZWNvdmVyeV93b3JrKTsKIAlyZXR1cm4gMDsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwppbmRleCBkY2QzMmQwMWE1NzkuLmMwNTYzOGNmM2Yz
ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwpAQCAtNDksNiArNDks
NyBAQAogI2luY2x1ZGUgImFtZGdwdV90cmFjZS5oIgogI2luY2x1ZGUgImFtZGdwdV9hbWRrZmQu
aCIKICNpbmNsdWRlICJhbWRncHVfc2RtYS5oIgorI2luY2x1ZGUgImFtZGdwdV9yYXMuaCIKICNp
bmNsdWRlICJiaWYvYmlmXzRfMV9kLmgiCiAKIHN0YXRpYyBpbnQgYW1kZ3B1X21hcF9idWZmZXIo
c3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKQEAgLTE3NzIsNiArMTc3MywxNyBAQCBpbnQg
YW1kZ3B1X3R0bV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCQkJCQkJYWRldi0+
Z21jLnZpc2libGVfdnJhbV9zaXplKTsKICNlbmRpZgogCisJLyoKKwkgKiByZXRpcmVkIHBhZ2Vz
IHdpbGwgYmUgbG9hZGVkIGZyb20gZWVwcm9tIGFuZCByZXNlcnZlZCBoZXJlLAorCSAqIGl0IHNo
b3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdHRtIGluaXQgc2luY2UgbmV3IGJvIG1heSBiZSBjcmVhdGVk
LAorCSAqIHJlY292ZXJ5X2luaXQgbWF5IGZhaWwsIGJ1dCBpdCBjYW4gZnJlZSBhbGwgcmVzb3Vy
Y2VzIGFsbG9jYXRlZCBieQorCSAqIGl0c2VsZiBhbmQgaXRzIGZhaWx1cmUgc2hvdWxkIG5vdCBz
dG9wIGFtZGdwdSBpbml0IHByb2Nlc3MuCisJICoKKwkgKiBOb3RlOiB0aGVvcmV0aWNhbGx5LCB0
aGlzIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIGFsbCB2cmFtIGFsbG9jYXRpb25zCisJICogdG8g
cHJvdGVjdCByZXRpcmVkIHBhZ2UgZnJvbSBhYnVzaW5nCisJICovCisJYW1kZ3B1X3Jhc19yZWNv
dmVyeV9pbml0KGFkZXYpOworCiAJLyoKIAkgKlRoZSByZXNlcnZlZCB2cmFtIGZvciBmaXJtd2Fy
ZSBtdXN0IGJlIHBpbm5lZCB0byB0aGUgc3BlY2lmaWVkCiAJICpwbGFjZSBvbiB0aGUgVlJBTSwg
c28gcmVzZXJ2ZSBpdCBlYXJseS4KLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KYW1kLWdmeCBtYWlsaW5nIGxpc3QKYW1kLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9hbWQtZ2Z4
