Return-Path: <amd-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+amd-gfx@lfdr.de
Delivered-To: lists+amd-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3E35A233F50
	for <lists+amd-gfx@lfdr.de>; Fri, 31 Jul 2020 08:45:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 930916E9E1;
	Fri, 31 Jul 2020 06:45:14 +0000 (UTC)
X-Original-To: amd-gfx@lists.freedesktop.org
Delivered-To: amd-gfx@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C7ADE6E9E1
 for <amd-gfx@lists.freedesktop.org>; Fri, 31 Jul 2020 06:45:13 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id c2so15788858edx.8
 for <amd-gfx@lists.freedesktop.org>; Thu, 30 Jul 2020 23:45:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=reply-to:subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-transfer-encoding:content-language;
 bh=DpfHISwlEQa96YwWVq9pYbREbmMIrS2XkkoxP4pz5rk=;
 b=mKMq0ajREnBLiUnJrl8B6IM1GHTfecMqukvYOdpnl2D8TTdwh/MhkxIH0CjHkUSPgi
 9c+xwLFZ99R/GtOjbDMRt9TKAMHZGx3AXgERK9uddRD+9Yo9L+jzmi1+CpUjVm7dWs2Z
 aTEiux/lpgYmI+rntObkEP0dYCKcJ+CiBhu4LOBwHHUbF9eHbuSwYuUEF5iMIZ/3rSo5
 RgNjJaAyG82w0OEeZbHO+vpn0NhJfK9f7RYvhc21PSf8uoHFtPkDYG/NqyIZ7WzLscjB
 SjxHt7oJqmLibAdr4aNFDgQ7+zCk+MaB3m/t47Vy9y4W64uSin2NIZ3toXxIS7Ii37K6
 q4uw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:cc:references:from
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-transfer-encoding:content-language;
 bh=DpfHISwlEQa96YwWVq9pYbREbmMIrS2XkkoxP4pz5rk=;
 b=o6uJZP5CbB+iTusc8QLCTCpN4y6/4mUvdTYQ+iCg72wgX7Efz2F3OyIdePHC+ueLNU
 4FqbPBW/mLNOS11FOjXhCHarFIb9k0oL1r8r7LxQWNkMxJkNEMAGQWDYEn3LO5KrFlfa
 AhYVdfCkABzQ1M/g4pErVFkSZeoId/G6P2SKvXGar2FSh9XRy5nG6f2PhLV6Uro1HZY2
 BE+DD/cTcfqgBUSk1f7wQnAA4HW7okRpeVDdnShoJ6SSeKCkRqv1OzRqVzxrlMUnyHpM
 qQ8zfiEZpA/8QBmrtA40AGyPr6r4hgWQSMF8WRMPIPF9OLHn69S15S+FZJal4AmdfDiC
 h70A==
X-Gm-Message-State: AOAM532Iy0qZQthAyKVtypny7+yS7efZj3Ev00xWktcnHiKP9mhHoqRl
 l86FsKZ+oI4zsLP+dBUjFN0=
X-Google-Smtp-Source: ABdhPJwXPrwkFCD4TiCBNA5XVQwaJuaZjmC5xVqAkTEJBr+oL4VftnleItLqVoSy1UWKNEClPxkk2A==
X-Received: by 2002:a50:d908:: with SMTP id t8mr2376797edj.373.1596177912505; 
 Thu, 30 Jul 2020 23:45:12 -0700 (PDT)
Received: from ?IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7?
 ([2a02:908:1252:fb60:be8a:bd56:1f94:86e7])
 by smtp.gmail.com with ESMTPSA id t19sm8838207edw.63.2020.07.30.23.45.08
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Thu, 30 Jul 2020 23:45:09 -0700 (PDT)
Subject: Re: [PATCH 17/17] drm/amdgpu: move vram usage by vbios to mman (v2)
To: Alex Deucher <alexdeucher@gmail.com>, amd-gfx@lists.freedesktop.org
References: <20200730200414.40485-1-alexander.deucher@amd.com>
 <20200730200414.40485-18-alexander.deucher@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
Message-ID: <0b157f85-1e3b-6438-5ab5-d08de7e99b38@gmail.com>
Date: Fri, 31 Jul 2020 08:45:07 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.10.0
MIME-Version: 1.0
In-Reply-To: <20200730200414.40485-18-alexander.deucher@amd.com>
Content-Language: en-US
X-BeenThere: amd-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Discussion list for AMD gfx <amd-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/amd-gfx>
List-Post: <mailto:amd-gfx@lists.freedesktop.org>
List-Help: <mailto:amd-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/amd-gfx>,
 <mailto:amd-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: christian.koenig@amd.com
Cc: Alex Deucher <alexander.deucher@amd.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: amd-gfx-bounces@lists.freedesktop.org
Sender: "amd-gfx" <amd-gfx-bounces@lists.freedesktop.org>

QW0gMzAuMDcuMjAgdW0gMjI6MDQgc2NocmllYiBBbGV4IERldWNoZXI6Cj4gSXQncyByZWxhdGVk
IHRvIHRoZSBtZW1vcnkgbWFuYWdlciBzbyBtb3ZlIGl0IHRoZXJlLgo+Cj4gdjI6IGlubGluZSB0
aGUgc3RydWN0dXJlCj4KPiBTaWduZWQtb2ZmLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5k
ZXVjaGVyQGFtZC5jb20+CgpSZXZpZXdlZC1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFu
LmtvZW5pZ0BhbWQuY29tPgoKPiAtLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdS5oICAgICAgICAgICB8IDEyIC0tLS0tLS0tLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfYXRvbWJpb3MuYyAgfCAgNCArKy0tCj4gICAuLi4vZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuYyAgfCAgNCArKy0tCj4gICBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgICAgICAgfCAyMCArKysrKysrKystLS0tLS0tLS0t
Cj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmggICAgICAgfCAgNiAr
KysrKysKPiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92aXJ0LmMgICAgICB8
ICA2ICsrKy0tLQo+ICAgNiBmaWxlcyBjaGFuZ2VkLCAyMyBpbnNlcnRpb25zKCspLCAyOSBkZWxl
dGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHUuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCj4gaW5kZXggNDRmZDBl
ZjczOTRmLi44MWY2NDEyZWI1NGYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHUu
aAo+IEBAIC02NDksMTYgKzY0OSw2IEBAIHN0cnVjdCBhbWRncHVfYXRjcyB7Cj4gICAJc3RydWN0
IGFtZGdwdV9hdGNzX2Z1bmN0aW9ucyBmdW5jdGlvbnM7Cj4gICB9Owo+ICAgCj4gLS8qCj4gLSAq
IEZpcm13YXJlIFZSQU0gcmVzZXJ2YXRpb24KPiAtICovCj4gLXN0cnVjdCBhbWRncHVfZndfdnJh
bV91c2FnZSB7Cj4gLQl1NjQgc3RhcnRfb2Zmc2V0Owo+IC0JdTY0IHNpemU7Cj4gLQlzdHJ1Y3Qg
YW1kZ3B1X2JvICpyZXNlcnZlZF9ibzsKPiAtCXZvaWQgKnZhOwo+IC19Owo+IC0KPiAgIC8qCj4g
ICAgKiBDR1MKPiAgICAqLwo+IEBAIC05NDIsOCArOTMyLDYgQEAgc3RydWN0IGFtZGdwdV9kZXZp
Y2Ugewo+ICAgCXN0cnVjdCBkZWxheWVkX3dvcmsgICAgIGRlbGF5ZWRfaW5pdF93b3JrOwo+ICAg
Cj4gICAJc3RydWN0IGFtZGdwdV92aXJ0CXZpcnQ7Cj4gLQkvKiBmaXJtd2FyZSBWUkFNIHJlc2Vy
dmF0aW9uICovCj4gLQlzdHJ1Y3QgYW1kZ3B1X2Z3X3ZyYW1fdXNhZ2UgZndfdnJhbV91c2FnZTsK
PiAgIAo+ICAgCS8qIGxpbmsgYWxsIHNoYWRvdyBibyAqLwo+ICAgCXN0cnVjdCBsaXN0X2hlYWQg
ICAgICAgICAgICAgICAgc2hhZG93X2xpc3Q7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tYmlvcy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2F0b21iaW9zLmMKPiBpbmRleCAyOWY3NjdlMDI2ZTQuLmUzM2Y2MzcxMmI0NiAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYXRvbWJpb3Mu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tYmlvcy5jCj4g
QEAgLTE3ODYsOSArMTc4Niw5IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2F0b21iaW9zX2FsbG9jYXRl
X2ZiX3NjcmF0Y2goc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAJCQkodWludDMyX3Qp
KEFUT01fVlJBTV9CTE9DS19TUklPVl9NU0dfU0hBUkVfUkVTRVJWQVRJT04gPDwKPiAgIAkJCUFU
T01fVlJBTV9PUEVSQVRJT05fRkxBR1NfU0hJRlQpKSB7Cj4gICAJCQkvKiBGaXJtd2FyZSByZXF1
ZXN0IFZSQU0gcmVzZXJ2YXRpb24gZm9yIFNSLUlPViAqLwo+IC0JCQlhZGV2LT5md192cmFtX3Vz
YWdlLnN0YXJ0X29mZnNldCA9IChzdGFydF9hZGRyICYKPiArCQkJYWRldi0+bW1hbi5md192cmFt
X3VzYWdlX3N0YXJ0X29mZnNldCA9IChzdGFydF9hZGRyICYKPiAgIAkJCQkofkFUT01fVlJBTV9P
UEVSQVRJT05fRkxBR1NfTUFTSykpIDw8IDEwOwo+IC0JCQlhZGV2LT5md192cmFtX3VzYWdlLnNp
emUgPSBzaXplIDw8IDEwOwo+ICsJCQlhZGV2LT5tbWFuLmZ3X3ZyYW1fdXNhZ2Vfc2l6ZSA9IHNp
emUgPDwgMTA7Cj4gICAJCQkvKiBVc2UgdGhlIGRlZmF1bHQgc2NyYXRjaCBzaXplICovCj4gICAJ
CQl1c2FnZV9ieXRlcyA9IDA7Cj4gICAJCX0gZWxzZSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9hdG9tZmlybXdhcmUuYwo+IGluZGV4IDEyNzkwNTMzMjRmOS4u
MTdjMDEwZDA0MzFmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9hdG9tZmlybXdhcmUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9hdG9tZmlybXdhcmUuYwo+IEBAIC04OSw5ICs4OSw5IEBAIGludCBhbWRncHVfYXRvbWZp
cm13YXJlX2FsbG9jYXRlX2ZiX3NjcmF0Y2goc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4g
ICAJCQkodWludDMyX3QpKEFUT01fVlJBTV9CTE9DS19TUklPVl9NU0dfU0hBUkVfUkVTRVJWQVRJ
T04gPDwKPiAgIAkJCUFUT01fVlJBTV9PUEVSQVRJT05fRkxBR1NfU0hJRlQpKSB7Cj4gICAJCQkv
KiBGaXJtd2FyZSByZXF1ZXN0IFZSQU0gcmVzZXJ2YXRpb24gZm9yIFNSLUlPViAqLwo+IC0JCQlh
ZGV2LT5md192cmFtX3VzYWdlLnN0YXJ0X29mZnNldCA9IChzdGFydF9hZGRyICYKPiArCQkJYWRl
di0+bW1hbi5md192cmFtX3VzYWdlX3N0YXJ0X29mZnNldCA9IChzdGFydF9hZGRyICYKPiAgIAkJ
CQkofkFUT01fVlJBTV9PUEVSQVRJT05fRkxBR1NfTUFTSykpIDw8IDEwOwo+IC0JCQlhZGV2LT5m
d192cmFtX3VzYWdlLnNpemUgPSBzaXplIDw8IDEwOwo+ICsJCQlhZGV2LT5tbWFuLmZ3X3ZyYW1f
dXNhZ2Vfc2l6ZSA9IHNpemUgPDwgMTA7Cj4gICAJCQkvKiBVc2UgdGhlIGRlZmF1bHQgc2NyYXRj
aCBzaXplICovCj4gICAJCQl1c2FnZV9ieXRlcyA9IDA7Cj4gICAJCX0gZWxzZSB7Cj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwo+IGluZGV4IGVhOWI1YjM5ZjY0MC4uYzc0
MjFhYTMyOTQ2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV90dG0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwo+
IEBAIC0xNzY2LDggKzE3NjYsOCBAQCBzdGF0aWMgc3RydWN0IHR0bV9ib19kcml2ZXIgYW1kZ3B1
X2JvX2RyaXZlciA9IHsKPiAgICAqLwo+ICAgc3RhdGljIHZvaWQgYW1kZ3B1X3R0bV9md19yZXNl
cnZlX3ZyYW1fZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgIHsKPiAtCWFtZGdw
dV9ib19mcmVlX2tlcm5lbCgmYWRldi0+ZndfdnJhbV91c2FnZS5yZXNlcnZlZF9ibywKPiAtCQlO
VUxMLCAmYWRldi0+ZndfdnJhbV91c2FnZS52YSk7Cj4gKwlhbWRncHVfYm9fZnJlZV9rZXJuZWwo
JmFkZXYtPm1tYW4uZndfdnJhbV91c2FnZV9yZXNlcnZlZF9ibywKPiArCQlOVUxMLCAmYWRldi0+
bW1hbi5md192cmFtX3VzYWdlX3ZhKTsKPiAgIH0KPiAgIAo+ICAgLyoqCj4gQEAgLTE3ODEsMTkg
KzE3ODEsMTkgQEAgc3RhdGljIGludCBhbWRncHVfdHRtX2Z3X3Jlc2VydmVfdnJhbV9pbml0KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgewo+ICAgCXVpbnQ2NF90IHZyYW1fc2l6ZSA9
IGFkZXYtPmdtYy52aXNpYmxlX3ZyYW1fc2l6ZTsKPiAgIAo+IC0JYWRldi0+ZndfdnJhbV91c2Fn
ZS52YSA9IE5VTEw7Cj4gLQlhZGV2LT5md192cmFtX3VzYWdlLnJlc2VydmVkX2JvID0gTlVMTDsK
PiArCWFkZXYtPm1tYW4uZndfdnJhbV91c2FnZV92YSA9IE5VTEw7Cj4gKwlhZGV2LT5tbWFuLmZ3
X3ZyYW1fdXNhZ2VfcmVzZXJ2ZWRfYm8gPSBOVUxMOwo+ICAgCj4gLQlpZiAoYWRldi0+ZndfdnJh
bV91c2FnZS5zaXplID09IDAgfHwKPiAtCSAgICBhZGV2LT5md192cmFtX3VzYWdlLnNpemUgPiB2
cmFtX3NpemUpCj4gKwlpZiAoYWRldi0+bW1hbi5md192cmFtX3VzYWdlX3NpemUgPT0gMCB8fAo+
ICsJICAgIGFkZXYtPm1tYW4uZndfdnJhbV91c2FnZV9zaXplID4gdnJhbV9zaXplKQo+ICAgCQly
ZXR1cm4gMDsKPiAgIAo+ICAgCXJldHVybiBhbWRncHVfYm9fY3JlYXRlX2tlcm5lbF9hdChhZGV2
LAo+IC0JCQkJCSAgYWRldi0+ZndfdnJhbV91c2FnZS5zdGFydF9vZmZzZXQsCj4gLQkJCQkJICBh
ZGV2LT5md192cmFtX3VzYWdlLnNpemUsCj4gKwkJCQkJICBhZGV2LT5tbWFuLmZ3X3ZyYW1fdXNh
Z2Vfc3RhcnRfb2Zmc2V0LAo+ICsJCQkJCSAgYWRldi0+bW1hbi5md192cmFtX3VzYWdlX3NpemUs
Cj4gICAJCQkJCSAgQU1ER1BVX0dFTV9ET01BSU5fVlJBTSwKPiAtCQkJCQkgICZhZGV2LT5md192
cmFtX3VzYWdlLnJlc2VydmVkX2JvLAo+IC0JCQkJCSAgJmFkZXYtPmZ3X3ZyYW1fdXNhZ2UudmEp
Owo+ICsJCQkJCSAgJmFkZXYtPm1tYW4uZndfdnJhbV91c2FnZV9yZXNlcnZlZF9ibywKPiArCQkJ
CQkgICZhZGV2LT5tbWFuLmZ3X3ZyYW1fdXNhZ2VfdmEpOwo+ICAgfQo+ICAgCj4gICAvKgo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmggYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmgKPiBpbmRleCA2ZDdiODNkOTY3Y2Uu
LmRlMzdjZWZmMGU1NiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdHRtLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRt
LmgKPiBAQCAtNzAsNiArNzAsMTIgQEAgc3RydWN0IGFtZGdwdV9tbWFuIHsKPiAgIAl1aW50OF90
CQkJCSpkaXNjb3ZlcnlfYmluOwo+ICAgCXVpbnQzMl90CQkJZGlzY292ZXJ5X3Rtcl9zaXplOwo+
ICAgCXN0cnVjdCBhbWRncHVfYm8JCSpkaXNjb3ZlcnlfbWVtb3J5Owo+ICsKPiArCS8qIGZpcm13
YXJlIFZSQU0gcmVzZXJ2YXRpb24gKi8KPiArCXU2NAkJZndfdnJhbV91c2FnZV9zdGFydF9vZmZz
ZXQ7Cj4gKwl1NjQJCWZ3X3ZyYW1fdXNhZ2Vfc2l6ZTsKPiArCXN0cnVjdCBhbWRncHVfYm8JKmZ3
X3ZyYW1fdXNhZ2VfcmVzZXJ2ZWRfYm87Cj4gKwl2b2lkCQkqZndfdnJhbV91c2FnZV92YTsKPiAg
IH07Cj4gICAKPiAgIHN0cnVjdCBhbWRncHVfY29weV9tZW0gewo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmlydC5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3ZpcnQuYwo+IGluZGV4IDVjYWUzOWQzNWMwNC4uMWUyMTE1NDRmMmRj
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92aXJ0LmMK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmlydC5jCj4gQEAgLTQw
MSw3ICs0MDEsNyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfdmlydF9hZGRfYmFkX3BhZ2Uoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gICAJaWYgKGJwX2Jsb2NrX3NpemUpIHsKPiAgIAkJYnBf
Y250ID0gYnBfYmxvY2tfc2l6ZSAvIHNpemVvZih1aW50NjRfdCk7Cj4gICAJCWZvciAoYnBfaWR4
ID0gMDsgYnBfaWR4IDwgYnBfY250OyBicF9pZHgrKykgewo+IC0JCQlyZXRpcmVkX3BhZ2UgPSAq
KHVpbnQ2NF90ICopKGFkZXYtPmZ3X3ZyYW1fdXNhZ2UudmEgKwo+ICsJCQlyZXRpcmVkX3BhZ2Ug
PSAqKHVpbnQ2NF90ICopKGFkZXYtPm1tYW4uZndfdnJhbV91c2FnZV92YSArCj4gICAJCQkJCWJw
X2Jsb2NrX29mZnNldCArIGJwX2lkeCAqIHNpemVvZih1aW50NjRfdCkpOwo+ICAgCQkJYnAucmV0
aXJlZF9wYWdlID0gcmV0aXJlZF9wYWdlOwo+ICAgCj4gQEAgLTQyOCwxMCArNDI4LDEwIEBAIHZv
aWQgYW1kZ3B1X3ZpcnRfaW5pdF9kYXRhX2V4Y2hhbmdlKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KQo+ICAgCWFkZXYtPnZpcnQuZndfcmVzZXJ2ZS5wX3BmMnZmID0gTlVMTDsKPiAgIAlhZGV2
LT52aXJ0LmZ3X3Jlc2VydmUucF92ZjJwZiA9IE5VTEw7Cj4gICAKPiAtCWlmIChhZGV2LT5md192
cmFtX3VzYWdlLnZhICE9IE5VTEwpIHsKPiArCWlmIChhZGV2LT5tbWFuLmZ3X3ZyYW1fdXNhZ2Vf
dmEgIT0gTlVMTCkgewo+ICAgCQlhZGV2LT52aXJ0LmZ3X3Jlc2VydmUucF9wZjJ2ZiA9Cj4gICAJ
CQkoc3RydWN0IGFtZF9zcmlvdl9tc2dfcGYydmZfaW5mb19oZWFkZXIgKikoCj4gLQkJCWFkZXYt
PmZ3X3ZyYW1fdXNhZ2UudmEgKyBBTURHSU1fREFUQUVYQ0hBTkdFX09GRlNFVCk7Cj4gKwkJCWFk
ZXYtPm1tYW4uZndfdnJhbV91c2FnZV92YSArIEFNREdJTV9EQVRBRVhDSEFOR0VfT0ZGU0VUKTsK
PiAgIAkJQU1ER1BVX0ZXX1ZSQU1fUEYyVkZfUkVBRChhZGV2LCBoZWFkZXIuc2l6ZSwgJnBmMnZm
X3NpemUpOwo+ICAgCQlBTURHUFVfRldfVlJBTV9QRjJWRl9SRUFEKGFkZXYsIGNoZWNrc3VtLCAm
Y2hlY2tzdW0pOwo+ICAgCQlBTURHUFVfRldfVlJBTV9QRjJWRl9SRUFEKGFkZXYsIGZlYXR1cmVf
ZmxhZ3MsICZhZGV2LT52aXJ0LmdpbV9mZWF0dXJlKTsKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmFtZC1nZnggbWFpbGluZyBsaXN0CmFtZC1nZnhAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vYW1kLWdmeAo=
